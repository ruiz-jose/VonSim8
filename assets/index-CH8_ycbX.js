var U8=Object.defineProperty;var UA=t=>{throw TypeError(t)};var H8=(t,e,n)=>e in t?U8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fe=(t,e,n)=>H8(t,typeof e!="symbol"?e+"":e,n),Ow=(t,e,n)=>e.has(t)||UA("Cannot "+n);var A=(t,e,n)=>(Ow(t,e,"read from private field"),n?n.call(t):e.get(t)),De=(t,e,n)=>e.has(t)?UA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Q=(t,e,n,i)=>(Ow(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),xt=(t,e,n)=>(Ow(t,e,"access private method"),n);function V8(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var W8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cO={exports:{}},c0={},dO={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp=Symbol.for("react.element"),G8=Symbol.for("react.portal"),K8=Symbol.for("react.fragment"),X8=Symbol.for("react.strict_mode"),q8=Symbol.for("react.profiler"),Y8=Symbol.for("react.provider"),Z8=Symbol.for("react.context"),J8=Symbol.for("react.forward_ref"),Q8=Symbol.for("react.suspense"),e6=Symbol.for("react.memo"),t6=Symbol.for("react.lazy"),HA=Symbol.iterator;function n6(t){return t===null||typeof t!="object"?null:(t=HA&&t[HA]||t["@@iterator"],typeof t=="function"?t:null)}var hO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fO=Object.assign,pO={};function Bd(t,e,n){this.props=t,this.context=e,this.refs=pO,this.updater=n||hO}Bd.prototype.isReactComponent={};Bd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mO(){}mO.prototype=Bd.prototype;function hk(t,e,n){this.props=t,this.context=e,this.refs=pO,this.updater=n||hO}var fk=hk.prototype=new mO;fk.constructor=hk;fO(fk,Bd.prototype);fk.isPureReactComponent=!0;var VA=Array.isArray,gO=Object.prototype.hasOwnProperty,pk={current:null},vO={key:!0,ref:!0,__self:!0,__source:!0};function yO(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)gO.call(e,i)&&!vO.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:jp,type:t,key:s,ref:o,props:r,_owner:pk.current}}function i6(t,e){return{$$typeof:jp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mk(t){return typeof t=="object"&&t!==null&&t.$$typeof===jp}function r6(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var WA=/\/+/g;function Iw(t,e){return typeof t=="object"&&t!==null&&t.key!=null?r6(""+t.key):e.toString(36)}function Bg(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case jp:case G8:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Iw(o,0):i,VA(r)?(n="",t!=null&&(n=t.replace(WA,"$&/")+"/"),Bg(r,e,n,"",function(u){return u})):r!=null&&(mk(r)&&(r=i6(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(WA,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",VA(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Iw(s,a);o+=Bg(s,e,n,l,r)}else if(l=n6(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Iw(s,a++),o+=Bg(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ym(t,e,n){if(t==null)return t;var i=[],r=0;return Bg(t,i,"","",function(s){return e.call(n,s,r++)}),i}function s6(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wi={current:null},zg={transition:null},o6={ReactCurrentDispatcher:wi,ReactCurrentBatchConfig:zg,ReactCurrentOwner:pk};function wO(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:ym,forEach:function(t,e,n){ym(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ym(t,function(){e++}),e},toArray:function(t){return ym(t,function(e){return e})||[]},only:function(t){if(!mk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};nt.Component=Bd;nt.Fragment=K8;nt.Profiler=q8;nt.PureComponent=hk;nt.StrictMode=X8;nt.Suspense=Q8;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o6;nt.act=wO;nt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=fO({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=pk.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)gO.call(e,l)&&!vO.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:jp,type:t.type,key:r,ref:s,props:i,_owner:o}};nt.createContext=function(t){return t={$$typeof:Z8,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Y8,_context:t},t.Consumer=t};nt.createElement=yO;nt.createFactory=function(t){var e=yO.bind(null,t);return e.type=t,e};nt.createRef=function(){return{current:null}};nt.forwardRef=function(t){return{$$typeof:J8,render:t}};nt.isValidElement=mk;nt.lazy=function(t){return{$$typeof:t6,_payload:{_status:-1,_result:t},_init:s6}};nt.memo=function(t,e){return{$$typeof:e6,type:t,compare:e===void 0?null:e}};nt.startTransition=function(t){var e=zg.transition;zg.transition={};try{t()}finally{zg.transition=e}};nt.unstable_act=wO;nt.useCallback=function(t,e){return wi.current.useCallback(t,e)};nt.useContext=function(t){return wi.current.useContext(t)};nt.useDebugValue=function(){};nt.useDeferredValue=function(t){return wi.current.useDeferredValue(t)};nt.useEffect=function(t,e){return wi.current.useEffect(t,e)};nt.useId=function(){return wi.current.useId()};nt.useImperativeHandle=function(t,e,n){return wi.current.useImperativeHandle(t,e,n)};nt.useInsertionEffect=function(t,e){return wi.current.useInsertionEffect(t,e)};nt.useLayoutEffect=function(t,e){return wi.current.useLayoutEffect(t,e)};nt.useMemo=function(t,e){return wi.current.useMemo(t,e)};nt.useReducer=function(t,e,n){return wi.current.useReducer(t,e,n)};nt.useRef=function(t){return wi.current.useRef(t)};nt.useState=function(t){return wi.current.useState(t)};nt.useSyncExternalStore=function(t,e,n){return wi.current.useSyncExternalStore(t,e,n)};nt.useTransition=function(){return wi.current.useTransition()};nt.version="18.3.1";dO.exports=nt;var x=dO.exports;const on=Hu(x),gk=V8({__proto__:null,default:on},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a6=x,l6=Symbol.for("react.element"),u6=Symbol.for("react.fragment"),c6=Object.prototype.hasOwnProperty,d6=a6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h6={key:!0,ref:!0,__self:!0,__source:!0};function bO(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)c6.call(e,i)&&!h6.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:l6,type:t,key:s,ref:o,props:r,_owner:d6.current}}c0.Fragment=u6;c0.jsx=bO;c0.jsxs=bO;cO.exports=c0;var g=cO.exports,H=typeof window<"u"?window:void 0,Li=typeof globalThis<"u"?globalThis:H,xO=Array.prototype,GA=xO.forEach,KA=xO.indexOf,tr=Li==null?void 0:Li.navigator,Ce=Li==null?void 0:Li.document,Ti=Li==null?void 0:Li.location,B1=Li==null?void 0:Li.fetch,z1=Li!=null&&Li.XMLHttpRequest&&"withCredentials"in new Li.XMLHttpRequest?Li.XMLHttpRequest:void 0,XA=Li==null?void 0:Li.AbortController,An=tr==null?void 0:tr.userAgent,Ke=H??{},ua={DEBUG:!1,LIB_VERSION:"1.190.2"},kv={},d0=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function Lc(t,e,n){if(Qt(t)){if(GA&&t.forEach===GA)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===kv)return}}}function Ct(t,e,n){if(!Rt(t)){if(Qt(t))return Lc(t,e,n);if(y6(t)){for(var i of t.entries())if(e.call(n,i[1],i[0])===kv)return}else for(var r in t)if(kO.call(t,r)&&e.call(n,t[r],r)===kv)return}}var hi=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Lc(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t};function tt(t,e){return t.indexOf(e)!==-1}function Ug(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var qA=function(t){try{return t()}catch{return}},f6=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){J.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),J.critical(r)}}},Cv=function(t){var e={};return Ct(t,function(n,i){Qn(n)&&n.length>0&&(e[i]=n)}),e},U1=function(t){return t.replace(/^\$/,"")};function p6(t,e){return n=t,i=s=>Qn(s)&&!xl(e)?s.slice(0,e):s,r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),Qt(o)?(l=[],Lc(o,u=>{l.push(s(u))})):(l={},Ct(o,(u,c)=>{r.has(u)||(l[c]=s(u,c))})),l);var l}(n);var n,i,r}var m6=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),xl(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},To=function(){function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},function(e,n,i,r,s){if(e)if(e.addEventListener&&!r)e.addEventListener(n,i,!!s);else{var o="on"+n,a=e[o];e[o]=function(l,u,c){return function(d){if(d=d||t(H==null?void 0:H.event)){var h,f=!0;Tr(c)&&(h=c(d));var p=u.call(l,d);return h!==!1&&p!==!1||(f=!1),f}}}(e,i,a)}else J.error("No valid element provided to register_event")}}();function SO(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}var rs,Dw="$copy_autocapture",g6=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];(function(t){t.GZipJS="gzip-js",t.Base64="base64"})(rs||(rs={}));var v6=Array.isArray,_O=Object.prototype,kO=_O.hasOwnProperty,h0=_O.toString,Qt=v6||function(t){return h0.call(t)==="[object Array]"},Tr=t=>typeof t=="function",an=t=>t===Object(t)&&!Qt(t),fc=t=>{if(an(t)){for(var e in t)if(kO.call(t,e))return!1;return!0}return!1},Ie=t=>t===void 0,Qn=t=>h0.call(t)=="[object String]",YA=t=>Qn(t)&&t.trim().length===0,xl=t=>t===null,Rt=t=>Ie(t)||xl(t),Qi=t=>h0.call(t)=="[object Number]",ru=t=>h0.call(t)==="[object Boolean]",y6=t=>t instanceof FormData,w6=t=>tt(g6,t),ZA="[PostHog.js]",J={_log:function(t){if(H&&(ua.DEBUG||Ke.POSTHOG_DEBUG)&&!Ie(H.console)&&H.console){for(var e=("__rrweb_original__"in H.console[t])?H.console[t].__rrweb_original__:H.console[t],n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e(ZA,...i)}},info:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];J._log("log",...e)},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];J._log("warn",...e)},error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];J._log("error",...e)},critical:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];console.error(ZA,...e)},uninitializedWarning:t=>{J.error("You must initialize PostHog before calling ".concat(t))}},JA=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return J.warn("".concat(e," was requested but loading of external scripts is disabled.")),n("Loading of external scripts is disabled");var i=()=>{if(!Ce)return n("document not found");var r=Ce.createElement("script");r.type="text/javascript",r.crossOrigin="anonymous",r.src=e,r.onload=a=>n(void 0,a),r.onerror=a=>n(a);var s,o=Ce.querySelectorAll("body > script");o.length>0?(s=o[0].parentNode)===null||s===void 0||s.insertBefore(r,o[0]):Ce.body.appendChild(r)};Ce!=null&&Ce.body?i():Ce==null||Ce.addEventListener("DOMContentLoaded",i)};function QA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QA(Object(n),!0).forEach(function(i){ye(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QA(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ye(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CO(t,e){if(t==null)return{};var n,i,r=function(o,a){if(o==null)return{};var l,u,c={},d=Object.keys(o);for(u=0;u<d.length;u++)l=d[u],a.indexOf(l)>=0||(c[l]=o[l]);return c}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}Ke.__PosthogExtensions__=Ke.__PosthogExtensions__||{},Ke.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var i="/static/".concat(e,".js")+"?v=".concat(t.version);if(e==="toolbar"){var r=3e5,s=Math.floor(Date.now()/r)*r;i="".concat(i,"&t=").concat(s)}var o=t.requestRouter.endpointFor("assets",i);JA(t,o,n)},Ke.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var i=t.requestRouter.endpointFor("api",e);JA(t,i,n)};var EO="$people_distinct_id",Ah="__alias",Ph="__timers",eP="$autocapture_disabled_server_side",H1="$heatmaps_enabled_server_side",tP="$exception_capture_enabled_server_side",nP="$web_vitals_enabled_server_side",AO="$dead_clicks_enabled_server_side",iP="$web_vitals_allowed_metrics",V1="$session_recording_enabled_server_side",rP="$console_log_recording_enabled_server_side",sP="$session_recording_network_payload_capture",oP="$session_recording_canvas_recording",aP="$replay_sample_rate",lP="$replay_minimum_duration",Ev="$sesid",Th="$session_is_sampled",Lw="$session_recording_url_trigger_activated_session",jw="$session_recording_event_trigger_activated_session",pc="$enabled_feature_flags",W1="$early_access_features",mc="$stored_person_properties",ca="$stored_group_properties",G1="$surveys",wm="$surveys_activated",Av="$flag_call_reported",ho="$user_state",K1="$client_session_props",X1="$capture_rate_limit",q1="$initial_campaign_params",Y1="$initial_referrer_info",Z1="$initial_person_info",Pv="$epp",PO="__POSTHOG_TOOLBAR__",b6=[EO,Ah,"__cmpns",Ph,V1,H1,Ev,pc,ho,W1,ca,mc,G1,Av,K1,X1,q1,Y1,Pv],Fw="$active_feature_flags",bm="$override_feature_flags",uP="$feature_flag_payloads",cP=t=>{var e={};for(var[n,i]of Ug(t||{}))i&&(e[n]=i);return e};let x6=class{constructor(e){this.instance=e,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}getFlags(){return Object.keys(this.getFlagVariants())}getFlagVariants(){var e=this.instance.get_property(pc),n=this.instance.get_property(bm);if(!n)return e||{};for(var i=hi({},e),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this._override_warning||(J.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this._override_warning=!0),i}getFlagPayloads(){return this.instance.get_property(uP)||{}}reloadFeatureFlags(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.reloadFeatureFlagsInAction=e}resetRequestQueue(){this.reloadFeatureFlagsQueued=!1}_startReloadTimer(){this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(()=>{!this.reloadFeatureFlagsInAction&&this.reloadFeatureFlagsQueued&&(this.reloadFeatureFlagsQueued=!1,this._reloadFeatureFlagsRequest())},5)}_reloadFeatureFlagsRequest(){if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var e=this.instance.config.token,n=this.instance.get_property(mc),i=this.instance.get_property(ca),r={token:e,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:n,group_properties:i,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:r,compression:this.instance.config.disable_compression?void 0:rs.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:s=>{var o;this.setReloadingPaused(!1);var a=!0;s.statusCode===200&&(this.$anon_distinct_id=void 0,a=!1),this.receivedFeatureFlags((o=s.json)!==null&&o!==void 0?o:{},a),this._startReloadTimer()}})}}getFeatureFlag(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var i,r=this.getFlagVariants()[e],s="".concat(r),o=this.instance.get_property(Av)||{};return(n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(s))&&(Qt(o[e])?o[e].push(s):o[e]=[s],(i=this.instance.persistence)===null||i===void 0||i.register({[Av]:o}),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:r})),r}J.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}isFeatureEnabled(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);J.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads();(function(s,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=s.featureFlags,c=s.featureFlagPayloads;if(u)if(Qt(u)){var d={};if(u)for(var h=0;h<u.length;h++)d[u[h]]=!0;o&&o.register({[Fw]:u,[pc]:d})}else{var f=u,p=c;s.errorsWhileComputingFlags&&(f=le(le({},a),f),p=le(le({},l),p)),o&&o.register({[Fw]:Object.keys(cP(f)),[pc]:f||{},[uP]:p||{}})}})(e,this.instance.persistence,i,r),this._fireFeatureFlagsCallbacks(n)}}override(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.instance.__loaded||!this.instance.persistence)return J.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=n,e===!1)this.instance.persistence.unregister(bm);else if(Qt(e)){for(var i={},r=0;r<e.length;r++)i[e[r]]=!0;this.instance.persistence.register({[bm]:i})}else this.instance.persistence.register({[bm]:e})}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){var{flags:n,flagVariants:i}=this._prepareFeatureFlagsForCallbacks();e(n,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var i,r={["$feature_enrollment/".concat(e)]:n};this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:n,$set:r}),this.setPersonPropertiesForFlags(r,!1);var s=le(le({},this.getFlagVariants()),{},{[e]:n});(i=this.instance.persistence)===null||i===void 0||i.register({[Fw]:Object.keys(cP(s)),[pc]:s}),this._fireFeatureFlagsCallbacks()}getEarlyAccessFeatures(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.instance.get_property(W1);if(i&&!n)return e(i);this.instance._send_request({transport:"XHR",url:this.instance.requestRouter.endpointFor("api","/api/early_access_features/?token=".concat(this.instance.config.token)),method:"GET",callback:r=>{var s;if(r.json){var o=r.json.earlyAccessFeatures;return(s=this.instance.persistence)===null||s===void 0||s.register({[W1]:o}),e(o)}}})}_prepareFeatureFlagsForCallbacks(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(i=>n[i]),flagVariants:Object.keys(n).filter(i=>n[i]).reduce((i,r)=>(i[r]=n[r],i),{})}}_fireFeatureFlagsCallbacks(e){var{flags:n,flagVariants:i}=this._prepareFeatureFlagsForCallbacks();this.featureFlagEventHandlers.forEach(r=>r(n,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this.instance.get_property(mc)||{};this.instance.register({[mc]:le(le({},i),e)}),n&&this.instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this.instance.unregister(mc)}setGroupPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this.instance.get_property(ca)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(r=>{i[r]=le(le({},i[r]),e[r]),delete e[r]}),this.instance.register({[ca]:le(le({},i),e)}),n&&this.instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this.instance.get_property(ca)||{};this.instance.register({[ca]:le(le({},n),{},{[e]:{}})})}else this.instance.unregister(ca)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return Qi(t)&&isFinite(t)&&Math.floor(t)===t});var dP="0123456789abcdef";let S6=class J1{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new J1(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+dP.charAt(this.bytes[n]>>>4)+dP.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new J1(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}},_6=class{constructor(){ye(this,"timestamp",0),ye(this,"counter",0),ye(this,"random",new k6)}generate(){var e=this.generateOrAbort();if(Ie(e)){this.timestamp=0;var n=this.generateOrAbort();if(Ie(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return S6.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}resetCounter(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}};var hP,TO=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};H&&!Ie(H.crypto)&&crypto.getRandomValues&&(TO=t=>crypto.getRandomValues(t));let k6=class{constructor(){ye(this,"buffer",new Uint32Array(8)),ye(this,"cursor",1/0)}nextUint32(){return this.cursor>=this.buffer.length&&(TO(this.buffer),this.cursor=0),this.buffer[this.cursor++]}};var Pa=()=>C6().toString(),C6=()=>(hP||(hP=new _6)).generate(),E6="Thu, 01 Jan 1970 00:00:00 GMT",Qd="",A6=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function P6(t,e){if(e){var n=function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce;if(Qd)return Qd;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+Pa(),u=new RegExp("(^|;)\\s*"+l+"=1");!Qd&&a--;){var c=o.slice(a).join("."),d=l+"=1;domain=."+c;s.cookie=d,u.test(s.cookie)&&(s.cookie=d+";expires="+E6,Qd=c)}return Qd}(t);if(!n){var i=(r=>{var s=r.match(A6);return s?s[0]:""})(t);i!==n&&J.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var Oo={is_supported:()=>!!Ce,error:function(t){J.error("cookieStore error: "+t)},get:function(t){if(Ce){try{for(var e=t+"=",n=Ce.cookie.split(";").filter(s=>s.length),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},parse:function(t){var e;try{e=JSON.parse(Oo.get(t))||{}}catch{}return e},set:function(t,e,n,i,r){if(Ce)try{var s="",o="",a=P6(Ce.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var u=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return u.length>3686.4&&J.warn("cookieStore warning: large cookie, len="+u.length),Ce.cookie=u,u}catch{return}},remove:function(t,e){try{Oo.set(t,"",-1,e)}catch{return}}},$w=null,fn={is_supported:function(){if(!xl($w))return $w;var t=!0;if(Ie(H))t=!1;else try{var e="__mplssupport__";fn.set(e,"xyz"),fn.get(e)!=='"xyz"'&&(t=!1),fn.remove(e)}catch{t=!1}return t||J.error("localStorage unsupported; falling back to cookie store"),$w=t,t},error:function(t){J.error("localStorage error: "+t)},get:function(t){try{return H==null?void 0:H.localStorage.getItem(t)}catch(e){fn.error(e)}return null},parse:function(t){try{return JSON.parse(fn.get(t))||{}}catch{}return null},set:function(t,e){try{H==null||H.localStorage.setItem(t,JSON.stringify(e))}catch(n){fn.error(n)}},remove:function(t){try{H==null||H.localStorage.removeItem(t)}catch(e){fn.error(e)}}},T6=["distinct_id",Ev,Th,Pv,Z1],xm=le(le({},fn),{},{parse:function(t){try{var e={};try{e=Oo.parse(t)||{}}catch{}var n=hi(e,JSON.parse(fn.get(t)||"{}"));return fn.set(t,n),n}catch{}return null},set:function(t,e,n,i,r,s){try{fn.set(t,e,void 0,void 0,s);var o={};T6.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&Oo.set(t,o,n,i,r,s)}catch(a){fn.error(a)}},remove:function(t,e){try{H==null||H.localStorage.removeItem(t),Oo.remove(t,e)}catch(n){fn.error(n)}}}),Sm={},R6={is_supported:function(){return!0},error:function(t){J.error("memoryStorage error: "+t)},get:function(t){return Sm[t]||null},parse:function(t){return Sm[t]||null},set:function(t,e){Sm[t]=e},remove:function(t){delete Sm[t]}},jl=null,Ln={is_supported:function(){if(!xl(jl))return jl;if(jl=!0,Ie(H))jl=!1;else try{var t="__support__";Ln.set(t,"xyz"),Ln.get(t)!=='"xyz"'&&(jl=!1),Ln.remove(t)}catch{jl=!1}return jl},error:function(t){J.error("sessionStorage error: ",t)},get:function(t){try{return H==null?void 0:H.sessionStorage.getItem(t)}catch(e){Ln.error(e)}return null},parse:function(t){try{return JSON.parse(Ln.get(t))||null}catch{}return null},set:function(t,e){try{H==null||H.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Ln.error(n)}},remove:function(t){try{H==null||H.sessionStorage.removeItem(t)}catch(e){Ln.error(e)}}},M6=["localhost","127.0.0.1"],jc=t=>{var e=Ce==null?void 0:Ce.createElement("a");return Ie(e)?null:(e.href=t,e)},cd=function(t,e){return!!function(n){try{new RegExp(n)}catch{return!1}return!0}(e)&&new RegExp(e).test(t)},N6=function(t){var e,n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",r=[];return Ct(t,function(s,o){Ie(s)||Ie(o)||o==="undefined"||(e=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),n=encodeURIComponent(o),r[r.length]=n+"="+e)}),r.join(i)},Tv=function(t,e){for(var n,i=((t.split("#")[0]||"").split("?")[1]||"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!Qt(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{J.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},Rv=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},Or="Mobile",Mv="iOS",Vs="Android",xf="Tablet",RO=Vs+" "+xf,MO="iPad",NO="Apple",OO=NO+" Watch",Sf="Safari",dd="BlackBerry",IO="Samsung",DO=IO+"Browser",LO=IO+" Internet",Ua="Chrome",O6=Ua+" OS",jO=Ua+" "+Mv,vk="Internet Explorer",FO=vk+" "+Or,yk="Opera",I6=yk+" Mini",wk="Edge",$O="Microsoft "+wk,Fc="Firefox",BO=Fc+" "+Mv,_f="Nintendo",kf="PlayStation",$c="Xbox",zO=Vs+" "+Or,UO=Or+" "+Sf,Rh="Windows",Q1=Rh+" Phone",fP="Nokia",ex="Ouya",HO="Generic",D6=HO+" "+Or.toLowerCase(),VO=HO+" "+xf.toLowerCase(),tx="Konqueror",li="(\\d+(\\.\\d+)?)",Bw=new RegExp("Version/"+li),L6=new RegExp($c,"i"),j6=new RegExp(kf+" \\w+","i"),F6=new RegExp(_f+" \\w+","i"),bk=new RegExp(dd+"|PlayBook|BB10","i"),$6={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},B6=(t,e)=>e&&tt(e,NO)||function(n){return tt(n,Sf)&&!tt(n,Ua)&&!tt(n,Vs)}(t),pP=function(t,e){return e=e||"",tt(t," OPR/")&&tt(t,"Mini")?I6:tt(t," OPR/")?yk:bk.test(t)?dd:tt(t,"IE"+Or)||tt(t,"WPDesktop")?FO:tt(t,DO)?LO:tt(t,wk)||tt(t,"Edg/")?$O:tt(t,"FBIOS")?"Facebook "+Or:tt(t,"UCWEB")||tt(t,"UCBrowser")?"UC Browser":tt(t,"CriOS")?jO:tt(t,"CrMo")?Ua:tt(t,Vs)&&tt(t,Sf)?zO:tt(t,Ua)?Ua:tt(t,"FxiOS")?BO:tt(t.toLowerCase(),tx.toLowerCase())?tx:B6(t,e)?tt(t,Or)?UO:Sf:tt(t,Fc)?Fc:tt(t,"MSIE")||tt(t,"Trident/")?vk:tt(t,"Gecko")?Fc:""},z6={[FO]:[new RegExp("rv:"+li)],[$O]:[new RegExp(wk+"?\\/"+li)],[Ua]:[new RegExp("("+Ua+"|CrMo)\\/"+li)],[jO]:[new RegExp("CriOS\\/"+li)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+li)],[Sf]:[Bw],[UO]:[Bw],[yk]:[new RegExp("(Opera|OPR)\\/"+li)],[Fc]:[new RegExp(Fc+"\\/"+li)],[BO]:[new RegExp("FxiOS\\/"+li)],[tx]:[new RegExp("Konqueror[:/]?"+li,"i")],[dd]:[new RegExp(dd+" "+li),Bw],[zO]:[new RegExp("android\\s"+li,"i")],[LO]:[new RegExp(DO+"\\/"+li)],[vk]:[new RegExp("(rv:|MSIE )"+li)],Mozilla:[new RegExp("rv:"+li)]},mP=[[new RegExp($c+"; "+$c+" (.*?)[);]","i"),t=>[$c,t&&t[1]||""]],[new RegExp(_f,"i"),[_f,""]],[new RegExp(kf,"i"),[kf,""]],[bk,[dd,""]],[new RegExp(Rh,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[Q1,""];if(new RegExp(Or).test(e)&&!/IEMobile\b/.test(e))return[Rh+" "+Or,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=$6[i]||"";return/arm/i.test(e)&&(r="RT"),[Rh,r]}return[Rh,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[Mv,e.join(".")]}return[Mv,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=Ie(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+Vs+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Vs+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[Vs,e.join(".")]}return[Vs,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[O6,""]],[/Linux|debian/i,["Linux",""]]],gP=function(t){return F6.test(t)?_f:j6.test(t)?kf:L6.test(t)?$c:new RegExp(ex,"i").test(t)?ex:new RegExp("("+Q1+"|WPDesktop)","i").test(t)?Q1:/iPad/.test(t)?MO:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?OO:bk.test(t)?dd:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(fP,"i").test(t)?fP:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Or).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?Vs:RO:Vs:new RegExp("(pda|"+Or+")","i").test(t)?D6:new RegExp(xf,"i").test(t)&&!new RegExp(xf+" pc","i").test(t)?VO:""},_m="https?://(.*)",U6=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","mc_cid","igshid","ttclid","rdt_cid"],nn={campaignParams:function(t){return Ce?this._campaignParamsFromUrl(Ce.URL,t):{}},_campaignParamsFromUrl:function(t,e){var n=U6.concat(e||[]),i={};return Ct(n,function(r){var s=Tv(t,r);i[r]=s||null}),i},_searchEngine:function(t){return t?t.search(_m+"google.([^/?]*)")===0?"google":t.search(_m+"bing.com")===0?"bing":t.search(_m+"yahoo.com")===0?"yahoo":t.search(_m+"duckduckgo.com")===0?"duckduckgo":null:null},_searchInfoFromReferrer:function(t){var e=nn._searchEngine(t),n=e!="yahoo"?"q":"p",i={};if(!xl(e)){i.$search_engine=e;var r=Ce?Tv(Ce.referrer,n):"";r.length&&(i.ph_keyword=r)}return i},searchInfo:function(){var t=Ce==null?void 0:Ce.referrer;return t?this._searchInfoFromReferrer(t):{}},browser:pP,browserVersion:function(t,e){var n=pP(t,e),i=z6[n];if(Ie(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(t){for(var e=0;e<mP.length;e++){var[n,i]=mP[e],r=n.exec(t),s=r&&(Tr(i)?i(r,t):i);if(s)return s}return["",""]},device:gP,deviceType:function(t){var e=gP(t);return e===MO||e===RO||e==="Kobo"||e==="Kindle Fire"||e===VO?xf:e===_f||e===$c||e===kf||e===ex?"Console":e===OO?"Wearable":e?Or:"Desktop"},referrer:function(){return(Ce==null?void 0:Ce.referrer)||"$direct"},referringDomain:function(){var t;return Ce!=null&&Ce.referrer&&((t=jc(Ce.referrer))===null||t===void 0?void 0:t.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},initialPersonInfo:function(){return{r:this.referrer().substring(0,1e3),u:Ti==null?void 0:Ti.href.substring(0,1e3)}},initialPersonPropsFromInfo:function(t){var e,{r:n,u:i}=t,r={$initial_referrer:n,$initial_referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=jc(n))===null||e===void 0?void 0:e.host};if(i){r.$initial_current_url=i;var s=jc(i);r.$initial_host=s==null?void 0:s.host,r.$initial_pathname=s==null?void 0:s.pathname,Ct(this._campaignParamsFromUrl(i),function(o,a){r["$initial_"+U1(a)]=o})}return n&&Ct(this._searchInfoFromReferrer(n),function(o,a){r["$initial_"+U1(a)]=o}),r},timezone:function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}},properties:function(){if(!An)return{};var[t,e]=nn.os(An);return hi(Cv({$os:t,$os_version:e,$browser:nn.browser(An,navigator.vendor),$device:nn.device(An),$device_type:nn.deviceType(An),$timezone:nn.timezone()}),{$current_url:Ti==null?void 0:Ti.href,$host:Ti==null?void 0:Ti.host,$pathname:Ti==null?void 0:Ti.pathname,$raw_user_agent:An.length>1e3?An.substring(0,997)+"...":An,$browser_version:nn.browserVersion(An,navigator.vendor),$browser_language:nn.browserLanguage(),$screen_height:H==null?void 0:H.screen.height,$screen_width:H==null?void 0:H.screen.width,$viewport_height:H==null?void 0:H.innerHeight,$viewport_width:H==null?void 0:H.innerWidth,$lib:"web",$lib_version:ua.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})},people_properties:function(){if(!An)return{};var[t,e]=nn.os(An);return hi(Cv({$os:t,$os_version:e,$browser:nn.browser(An,navigator.vendor)}),{$browser_version:nn.browserVersion(An,navigator.vendor)})}},H6=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];let zw=class{constructor(e){this.config=e,this.props={},this.campaign_params_saved=!1,this.name=(n=>{var i="";return n.token&&(i=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+i+"_posthog"})(e),this.storage=this.buildStorage(e),this.load(),e.debug&&J.info("Persistence loaded",e.persistence,le({},this.props)),this.update_config(e,e),this.save()}buildStorage(e){H6.indexOf(e.persistence.toLowerCase())===-1&&(J.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&fn.is_supported()?fn:n==="localstorage+cookie"&&xm.is_supported()?xm:n==="sessionstorage"&&Ln.is_supported()?Ln:n==="memory"?R6:n==="cookie"?Oo:xm.is_supported()?xm:Oo}properties(){var e={};return Ct(this.props,function(n,i){if(i===pc&&an(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/".concat(r[s])]=n[r[s]];else a=i,l=!1,(xl(o=b6)?l:KA&&o.indexOf===KA?o.indexOf(a)!=-1:(Ct(o,function(u){if(l||(l=u===a))return kv}),l))||(e[i]=n);var o,a,l}),e}load(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=hi({},e))}}save(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure,this.config.debug)}remove(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}clear(){this.remove(),this.props={}}register_once(e,n,i){if(an(e)){Ie(n)&&(n="None"),this.expire_days=Ie(i)?this.default_expiry:i;var r=!1;if(Ct(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,n){if(an(e)){this.expire_days=Ie(n)?this.default_expiry:n;var i=!1;if(Ct(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.campaign_params_saved){var e=nn.campaignParams(this.config.custom_campaign_params);fc(Cv(e))||this.register(e),this.campaign_params_saved=!0}}update_search_keyword(){this.register(nn.searchInfo())}update_referrer_info(){this.register_once(nn.referrerInfo(),void 0)}set_initial_person_info(){this.props[q1]||this.props[Y1]||this.register_once({[Z1]:nn.initialPersonInfo()},void 0)}get_referrer_info(){return Cv({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}get_initial_props(){var e={};Ct([Y1,q1],r=>{var s=this.props[r];s&&Ct(s,function(o,a){e["$initial_"+U1(a)]=o})});var n=this.props[Z1];if(n){var i=nn.initialPersonPropsFromInfo(n);hi(e,i)}return e}safe_merge(e){return Ct(this.props,function(n,i){i in e||(e[i]=n)}),e}update_config(e,n){if(this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.buildStorage(e),r=this.props;this.clear(),this.storage=i,this.props=r,this.save()}}set_disabled(e){this.disabled=e,this.disabled?this.remove():this.save()}set_cross_subdomain(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}get_cross_subdomain(){return!!this.cross_subdomain}set_secure(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}set_event_timer(e,n){var i=this.props[Ph]||{};i[e]=n,this.props[Ph]=i,this.save()}remove_event_timer(e){var n=(this.props[Ph]||{})[e];return Ie(n)||(delete this.props[Ph][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}};function Nv(t){var e,n;return((e=JSON.stringify(t,(n=[],function(i,r){if(an(r)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(r)?"[Circular]":(n.push(r),r)}return r})))===null||e===void 0?void 0:e.length)||0}function nx(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66060288e-1;if(t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[nx({size:Nv(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),nx({size:Nv(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var fo=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(fo||{}),Yr=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(Yr||{});function vP(t){var e;return t.id===PO||!((e=t.closest)===null||e===void 0||!e.call(t,".toolbar-global-fade-container"))}function f0(t){return!!t&&t.nodeType===1}function Ha(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function WO(t){return!!t&&t.nodeType===3}function GO(t){return!!t&&t.nodeType===11}function xk(t){return t?d0(t).split(/\s+/):[]}function yP(t){var e=H==null?void 0:H.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function Ov(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return xk(e)}function KO(t){return Rt(t)?null:d0(t).split(/(\s+)/).filter(e=>hd(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function p0(t){var e="";return rx(t)&&!YO(t)&&t.childNodes&&t.childNodes.length&&Ct(t.childNodes,function(n){var i;WO(n)&&n.textContent&&(e+=(i=KO(n.textContent))!==null&&i!==void 0?i:"")}),d0(e)}function XO(t){return Ie(t.target)?t.srcElement||null:(e=t.target)!==null&&e!==void 0&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var ix=["a","button","form","input","select","textarea","label"];function qO(t){var e=t.parentNode;return!(!e||!f0(e))&&e}function V6(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(!H||!t||Ha(t,"html")||!f0(t)||n!=null&&n.url_allowlist&&!yP(n.url_allowlist)||n!=null&&n.url_ignorelist&&yP(n.url_ignorelist))return!1;if(n!=null&&n.dom_event_allowlist){var s=n.dom_event_allowlist;if(s&&!s.some(f=>e.type===f))return!1}for(var o=!1,a=[t],l=!0,u=t;u.parentNode&&!Ha(u,"body");)if(GO(u.parentNode))a.push(u.parentNode.host),u=u.parentNode.host;else{if(!(l=qO(u)))break;if(i||ix.indexOf(l.tagName.toLowerCase())>-1)o=!0;else{var c=H.getComputedStyle(l);c&&c.getPropertyValue("cursor")==="pointer"&&(o=!0)}a.push(l),u=l}if(!function(f,p){var m=p==null?void 0:p.element_allowlist;if(Ie(m))return!0;var w=function(b){if(m.some(_=>b.tagName.toLowerCase()===_))return{v:!0}};for(var v of f){var y=w(v);if(typeof y=="object")return y.v}return!1}(a,n)||!function(f,p){var m=p==null?void 0:p.css_selector_allowlist;if(Ie(m))return!0;var w=function(b){if(m.some(_=>b.matches(_)))return{v:!0}};for(var v of f){var y=w(v);if(typeof y=="object")return y.v}return!1}(a,n))return!1;var d=H.getComputedStyle(t);if(d&&d.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var h=t.tagName.toLowerCase();switch(h){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return o?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(ix.indexOf(h)>-1||t.getAttribute("contenteditable")==="true")}}function rx(t){for(var e=t;e.parentNode&&!Ha(e,"body");e=e.parentNode){var n=Ov(e);if(tt(n,"ph-sensitive")||tt(n,"ph-no-capture"))return!1}if(tt(Ov(t),"ph-include"))return!0;var i=t.type||"";if(Qn(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(Qn(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function YO(t){return!!(Ha(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||Ha(t,"select")||Ha(t,"textarea")||t.getAttribute("contenteditable")==="true")}var ZO="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",W6=new RegExp("^(?:".concat(ZO,")$")),G6=new RegExp(ZO),JO="\\d{3}-?\\d{2}-?\\d{4}",K6=new RegExp("^(".concat(JO,")$")),X6=new RegExp("(".concat(JO,")"));function hd(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return!(Rt(t)||Qn(t)&&(t=d0(t),(e?W6:G6).test((t||"").replace(/[- ]/g,""))||(e?K6:X6).test(t)))}function QO(t){var e=p0(t);return hd(e="".concat(e," ").concat(eI(t)).trim())?e:""}function eI(t){var e="";return t&&t.childNodes&&t.childNodes.length&&Ct(t.childNodes,function(n){var i;if(n&&((i=n.tagName)===null||i===void 0?void 0:i.toLowerCase())==="span")try{var r=p0(n);e="".concat(e," ").concat(r).trim(),n.childNodes&&n.childNodes.length&&(e="".concat(e," ").concat(eI(n)).trim())}catch(s){J.error(s)}}),e}function q6(t){return function(e){var n=e.map(i=>{var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class)for(var a of(i.attr_class.sort(),i.attr_class))o+=".".concat(a.replace(/"/g,""));var l=le(le(le(le({},i.text?{text:i.text}:{}),{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{}),i.attr_id?{attr_id:i.attr_id}:{}),i.attributes),u={};return Ug(l).sort((c,d)=>{var[h]=c,[f]=d;return h.localeCompare(f)}).forEach(c=>{var[d,h]=c;return u[wP(d.toString())]=wP(h.toString())}),o+=":",o+=Ug(l).map(c=>{var[d,h]=c;return"".concat(d,'="').concat(h,'"')}).join("")});return n.join(";")}(function(e){return e.map(n=>{var i,r,s={text:(i=n.$el_text)===null||i===void 0?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)===null||r===void 0?void 0:r.slice(0,2048),attr_class:Y6(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Ug(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function wP(t){return t.replace(/"|\\"/g,'\\"')}function Y6(t){var e=t.attr__class;return e?Qt(e)?e:xk(e):void 0}var sx="[SessionRecording]",ox="redacted",km={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io"]},Z6=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],J6=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],Q6=["/s/","/e/","/i/"];function bP(t,e,n,i){if(Rt(t))return t;var r=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return Qn(r)&&(r=parseInt(r)),r>n?sx+" ".concat(i," body too large to record (").concat(r," bytes)"):t}function xP(t,e){if(Rt(t))return t;var n=t;return hd(n,!1)||(n=sx+" "+e+" body "+ox),Ct(J6,i=>{var r,s;(r=n)!==null&&r!==void 0&&r.length&&((s=n)===null||s===void 0?void 0:s.indexOf(i))!==-1&&(n=sx+" "+e+" body "+ox+" as might contain: "+i)}),n}var eU=(t,e)=>{var n,i,r,s={payloadSizeLimitBytes:km.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...km.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...km.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,u=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),h=>(h!=null&&h.requestBody&&(h.requestBody=bP(h.requestBody,h.requestHeaders,r,"Request")),h!=null&&h.responseBody&&(h.responseBody=bP(h.responseBody,h.responseHeaders,r,"Response")),h)),c=h=>{return u(((m,w)=>{var v,y=jc(m.name),b=w.indexOf("http")===0?(v=jc(w))===null||v===void 0?void 0:v.pathname:w;b==="/"&&(b="");var _=y==null?void 0:y.pathname.replace(b||"","");if(!(y&&_&&Q6.some(k=>_.indexOf(k)===0)))return m})((p=(f=h).requestHeaders,Rt(p)||Ct(Object.keys(p??{}),m=>{Z6.includes(m.toLowerCase())&&(p[m]=ox)}),f),t.api_host));var f,p},d=Tr(t.session_recording.maskNetworkRequestFn);return d&&Tr(t.session_recording.maskCapturedNetworkRequestFn)&&J.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=h=>{var f=t.session_recording.maskNetworkRequestFn({url:h.name});return le(le({},h),{},{name:f==null?void 0:f.url})}),s.maskRequestFn=Tr(t.session_recording.maskCapturedNetworkRequestFn)?h=>{var f,p,m,w=c(h);return w&&(f=(p=(m=t.session_recording).maskCapturedNetworkRequestFn)===null||p===void 0?void 0:p.call(m,w))!==null&&f!==void 0?f:void 0}:h=>function(f){if(!Ie(f))return f.requestBody=xP(f.requestBody,"Request"),f.responseBody=xP(f.responseBody,"Response"),f}(c(h)),le(le(le({},km),s),{},{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};function Ro(t,e,n,i){return e>n&&(J.warn("min cannot be greater than max."),e=n),Qi(t)?t>n?(i&&J.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(i&&J.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):t:(i&&J.warn(i+" must be a number. Defaulting to max value:"+n),n)}class tU{constructor(e){var n,i,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ye(this,"bucketSize",100),ye(this,"refillRate",10),ye(this,"mutationBuckets",{}),ye(this,"loggedTracker",{}),ye(this,"refillBuckets",()=>{Object.keys(this.mutationBuckets).forEach(s=>{this.mutationBuckets[s]=this.mutationBuckets[s]+this.refillRate,this.mutationBuckets[s]>=this.bucketSize&&delete this.mutationBuckets[s]})}),ye(this,"getNodeOrRelevantParent",s=>{var o=this.rrweb.mirror.getNode(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this.rrweb.mirror.getId(a),a]}return[s,o]}),ye(this,"numberOfChanges",s=>{var o,a,l,u,c,d,h,f;return((o=(a=s.removes)===null||a===void 0?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(u=s.attributes)===null||u===void 0?void 0:u.length)!==null&&l!==void 0?l:0)+((c=(d=s.texts)===null||d===void 0?void 0:d.length)!==null&&c!==void 0?c:0)+((h=(f=s.adds)===null||f===void 0?void 0:f.length)!==null&&h!==void 0?h:0)}),ye(this,"throttleMutations",s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.numberOfChanges(o);o.attributes&&(o.attributes=o.attributes.filter(u=>{var c,d,h,[f,p]=this.getNodeOrRelevantParent(u.id);return this.mutationBuckets[f]===0?!1:(this.mutationBuckets[f]=(c=this.mutationBuckets[f])!==null&&c!==void 0?c:this.bucketSize,this.mutationBuckets[f]=Math.max(this.mutationBuckets[f]-1,0),this.mutationBuckets[f]===0&&(this.loggedTracker[f]||(this.loggedTracker[f]=!0,(d=(h=this.options).onBlockedNode)===null||d===void 0||d.call(h,f,p))),u)}));var l=this.numberOfChanges(o);return l!==0||a===l?s:void 0}),this.rrweb=e,this.options=r,this.refillRate=Ro((n=this.options.refillRate)!==null&&n!==void 0?n:this.refillRate,0,100,"mutation throttling refill rate"),this.bucketSize=Ro((i=this.options.bucketSize)!==null&&i!==void 0?i:this.bucketSize,0,100,"mutation throttling bucket size"),setInterval(()=>{this.refillBuckets()},1e3)}}var Ir=Uint8Array,ji=Uint16Array,fd=Uint32Array,Sk=new Ir([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_k=new Ir([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),SP=new Ir([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tI=function(t,e){for(var n=new ji(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new fd(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},nI=tI(Sk,2),nU=nI[0],ax=nI[1];nU[28]=258,ax[258]=28;for(var _P=tI(_k,0)[1],iI=new ji(32768),Dt=0;Dt<32768;++Dt){var Fl=(43690&Dt)>>>1|(21845&Dt)<<1;Fl=(61680&(Fl=(52428&Fl)>>>2|(13107&Fl)<<2))>>>4|(3855&Fl)<<4,iI[Dt]=((65280&Fl)>>>8|(255&Fl)<<8)>>>1}var qh=function(t,e,n){for(var i=t.length,r=0,s=new ji(e);r<i;++r)++s[t[r]-1];var o,a=new ji(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;for(o=new ji(i),r=0;r<i;++r)o[r]=iI[a[t[r]-1]++]>>>15-t[r];return o},xu=new Ir(288);for(Dt=0;Dt<144;++Dt)xu[Dt]=8;for(Dt=144;Dt<256;++Dt)xu[Dt]=9;for(Dt=256;Dt<280;++Dt)xu[Dt]=7;for(Dt=280;Dt<288;++Dt)xu[Dt]=8;var Iv=new Ir(32);for(Dt=0;Dt<32;++Dt)Iv[Dt]=5;var iU=qh(xu,9),rU=qh(Iv,5),rI=function(t){return(t/8>>0)+(7&t&&1)},sI=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof ji?ji:t instanceof fd?fd:Ir)(n-e);return i.set(t.subarray(e,n)),i},lo=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},eh=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},Uw=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new Ir(0),0];if(r==1){var o=new Ir(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(k,C){return k.f-C.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=r-1;)a=n[n[u].f<n[d].f?u++:d++],l=n[u!=c&&n[u].f<n[d].f?u++:d++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};var h=s[0].s;for(i=1;i<r;++i)s[i].s>h&&(h=s[i].s);var f=new ji(h+1),p=lx(n[c-1],f,0);if(p>e){i=0;var m=0,w=p-e,v=1<<w;for(s.sort(function(k,C){return f[C.s]-f[k.s]||k.f-C.f});i<r;++i){var y=s[i].s;if(!(f[y]>e))break;m+=v-(1<<p-f[y]),f[y]=e}for(m>>>=w;m>0;){var b=s[i].s;f[b]<e?m-=1<<e-f[b]++-1:++i}for(;i>=0&&m;--i){var _=s[i].s;f[_]==e&&(--f[_],++m)}p=e}return[new Ir(f),p]},lx=function(t,e,n){return t.s==-1?Math.max(lx(t.l,e,n+1),lx(t.r,e,n+1)):e[t.s]=n},kP=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ji(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},th=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},ux=function(t,e,n){var i=n.length,r=rI(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},CP=function(t,e,n,i,r,s,o,a,l,u,c){lo(e,c++,n),++r[256];for(var d=Uw(r,15),h=d[0],f=d[1],p=Uw(s,15),m=p[0],w=p[1],v=kP(h),y=v[0],b=v[1],_=kP(m),k=_[0],C=_[1],E=new ji(19),P=0;P<y.length;++P)E[31&y[P]]++;for(P=0;P<k.length;++P)E[31&k[P]]++;for(var M=Uw(E,7),D=M[0],L=M[1],$=19;$>4&&!D[SP[$-1]];--$);var G,z,X,ee,he=u+5<<3,V=th(r,xu)+th(s,Iv)+o,F=th(r,h)+th(s,m)+o+14+3*$+th(E,D)+(2*E[16]+3*E[17]+7*E[18]);if(he<=V&&he<=F)return ux(e,c,t.subarray(l,l+u));if(lo(e,c,1+(F<V)),c+=2,F<V){G=qh(h,f),z=h,X=qh(m,w),ee=m;var ne=qh(D,L);for(lo(e,c,b-257),lo(e,c+5,C-1),lo(e,c+10,$-4),c+=14,P=0;P<$;++P)lo(e,c+3*P,D[SP[P]]);c+=3*$;for(var _e=[y,k],Z=0;Z<2;++Z){var ue=_e[Z];for(P=0;P<ue.length;++P){var I=31&ue[P];lo(e,c,ne[I]),c+=D[I],I>15&&(lo(e,c,ue[P]>>>5&127),c+=ue[P]>>>12)}}}else G=iU,z=xu,X=rU,ee=Iv;for(P=0;P<a;++P)if(i[P]>255){I=i[P]>>>18&31,eh(e,c,G[I+257]),c+=z[I+257],I>7&&(lo(e,c,i[P]>>>23&31),c+=Sk[I]);var O=31&i[P];eh(e,c,X[O]),c+=ee[O],O>3&&(eh(e,c,i[P]>>>5&8191),c+=_k[O])}else eh(e,c,G[i[P]]),c+=z[i[P]];return eh(e,c,G[256]),c+z[256]},sU=new fd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),oU=function(){for(var t=new fd(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),aU=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=oU[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},lU=function(t,e,n,i,r){return function(s,o,a,l,u,c){var d=s.length,h=new Ir(l+d+5*(1+Math.floor(d/7e3))+u),f=h.subarray(l,h.length-u),p=0;if(!o||d<8)for(var m=0;m<=d;m+=65535){var w=m+65535;w<d?p=ux(f,p,s.subarray(m,w)):(f[m]=c,p=ux(f,p,s.subarray(m,d)))}else{for(var v=sU[o-1],y=v>>>13,b=8191&v,_=(1<<a)-1,k=new ji(32768),C=new ji(_+1),E=Math.ceil(a/3),P=2*E,M=function(Be){return(s[Be]^s[Be+1]<<E^s[Be+2]<<P)&_},D=new fd(25e3),L=new ji(288),$=new ji(32),G=0,z=0,X=(m=0,0),ee=0,he=0;m<d;++m){var V=M(m),F=32767&m,ne=C[V];if(k[F]=ne,C[V]=F,ee<=m){var _e=d-m;if((G>7e3||X>24576)&&_e>423){p=CP(s,f,0,D,L,$,z,X,he,m-he,p),X=G=z=0,he=m;for(var Z=0;Z<286;++Z)L[Z]=0;for(Z=0;Z<30;++Z)$[Z]=0}var ue=2,I=0,O=b,B=F-ne&32767;if(_e>2&&V==M(m-B))for(var S=Math.min(y,_e)-1,T=Math.min(32767,m),N=Math.min(258,_e);B<=T&&--O&&F!=ne;){if(s[m+ue]==s[m+ue-B]){for(var R=0;R<N&&s[m+R]==s[m+R-B];++R);if(R>ue){if(ue=R,I=B,R>S)break;var K=Math.min(B,R-2),W=0;for(Z=0;Z<K;++Z){var te=m-B+Z+32768&32767,q=te-k[te]+32768&32767;q>W&&(W=q,ne=te)}}}B+=(F=ne)-(ne=k[F])+32768&32767}if(I){D[X++]=268435456|ax[ue]<<18|_P[I];var Re=31&ax[ue],je=31&_P[I];z+=Sk[Re]+_k[je],++L[257+Re],++$[je],ee=m+ue,++G}else D[X++]=s[m],++L[s[m]]}}p=CP(s,f,c,D,L,$,z,X,he,m-he,p)}return sI(h,0,l+rI(p)+u)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!r)},cx=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},uU=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&cx(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},cU=function(t){return 10+(t.filename&&t.filename.length+1||0)};function oI(t,e){e===void 0&&(e={});var n=aU(),i=t.length;n.p(t);var r=lU(t,e,cU(e),8),s=r.length;return uU(r,e),cx(r,s-8,n.d()),cx(r,s-4,i),r}function aI(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new Ir(t.length+(t.length>>>1)),r=0,s=function(u){i[r++]=u},o=0;o<n;++o){if(r+5>i.length){var a=new Ir(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return sI(i,0,r)}var dU=3e5,hU=[Yr.MouseMove,Yr.MouseInteraction,Yr.Scroll,Yr.ViewportResize,Yr.Input,Yr.TouchMove,Yr.MediaInteraction,Yr.Drag],EP=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1}),Nn="[SessionRecording]";function $l(t){return function(e,n){for(var i="",r=0;r<e.length;){var s=e[r++];s<128||n?i+=String.fromCharCode(s):s<224?i+=String.fromCharCode((31&s)<<6|63&e[r++]):s<240?i+=String.fromCharCode((15&s)<<12|(63&e[r++])<<6|63&e[r++]):(s=((15&s)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,i+=String.fromCharCode(55296|s>>10,56320|1023&s))}return i}(oI(aI(JSON.stringify(t))),!0)}function AP(t){return t.type===fo.Custom&&t.data.tag==="sessionIdle"}function PP(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class fU{get sessionIdleThresholdMilliseconds(){return this.instance.config.session_recording.session_idle_threshold_ms||3e5}get rrwebRecord(){var e,n;return Ke==null||(e=Ke.__PosthogExtensions__)===null||e===void 0||(n=e.rrweb)===null||n===void 0?void 0:n.record}get started(){return this._captureStarted}get sessionManager(){if(!this.instance.sessionManager)throw new Error(Nn+" must be started with a valid sessionManager.");return this.instance.sessionManager}get fullSnapshotIntervalMillis(){var e,n;return this.triggerStatus==="trigger_pending"?6e4:(e=(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:dU}get isSampled(){var e=this.instance.get_property(Th);return ru(e)?e:null}get sessionDuration(){var e,n,i=(e=this.buffer)===null||e===void 0?void 0:e.data[((n=this.buffer)===null||n===void 0?void 0:n.data.length)-1],{sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get isRecordingEnabled(){var e=!!this.instance.get_property(V1),n=!this.instance.config.disable_session_recording;return H&&e&&n}get isConsoleLogCaptureEnabled(){var e=!!this.instance.get_property(rP),n=this.instance.config.enable_recording_console_log;return n??e}get canvasRecording(){var e,n,i,r,s,o,a=this.instance.config.session_recording.captureCanvas,l=this.instance.get_property(oP),u=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,c=(i=(r=a==null?void 0:a.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&i!==void 0?i:0,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:0;return{enabled:u,fps:Ro(c,0,12,"canvas recording fps"),quality:Ro(d,0,1,"canvas recording quality")}}get networkPayloadCapture(){var e,n,i=this.instance.get_property(sP),r={recordHeaders:(e=this.instance.config.session_recording)===null||e===void 0?void 0:e.recordHeaders,recordBody:(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=an(this.instance.config.capture_performance)?this.instance.config.capture_performance.network_timing:this.instance.config.capture_performance,l=!!(ru(a)?a:i!=null&&i.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get sampleRate(){var e=this.instance.get_property(aP);return Qi(e)?e:null}get minimumDuration(){var e=this.instance.get_property(lP);return Qi(e)?e:null}get status(){return this.receivedDecide?this.isRecordingEnabled?Rt(this._linkedFlag)||this._linkedFlagSeen?this.triggerStatus==="trigger_pending"?"buffering":this._urlBlocked?"paused":ru(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}get urlTriggerStatus(){var e;return this._urlTriggers.length===0?"trigger_disabled":((e=this.instance)===null||e===void 0?void 0:e.get_property(Lw))===this.sessionId?"trigger_activated":"trigger_pending"}get eventTriggerStatus(){var e;return this._eventTriggers.length===0?"trigger_disabled":((e=this.instance)===null||e===void 0?void 0:e.get_property(jw))===this.sessionId?"trigger_activated":"trigger_pending"}get triggerStatus(){var e=this.eventTriggerStatus==="trigger_activated"||this.urlTriggerStatus==="trigger_activated",n=this.eventTriggerStatus==="trigger_pending"||this.urlTriggerStatus==="trigger_pending";return e?"trigger_activated":n?"trigger_pending":"trigger_disabled"}constructor(e){if(ye(this,"queuedRRWebEvents",[]),ye(this,"isIdle",!1),ye(this,"_linkedFlagSeen",!1),ye(this,"_lastActivityTimestamp",Date.now()),ye(this,"_linkedFlag",null),ye(this,"_removePageViewCaptureHook",void 0),ye(this,"_onSessionIdListener",void 0),ye(this,"_persistDecideOnSessionListener",void 0),ye(this,"_samplingSessionListener",void 0),ye(this,"_urlTriggers",[]),ye(this,"_urlBlocklist",[]),ye(this,"_urlBlocked",!1),ye(this,"_eventTriggers",[]),ye(this,"_removeEventTriggerCaptureHook",void 0),ye(this,"_forceAllowLocalhostNetworkCapture",!1),ye(this,"_onBeforeUnload",()=>{this._flushBuffer()}),ye(this,"_onOffline",()=>{this._tryAddCustomEvent("browser offline",{})}),ye(this,"_onOnline",()=>{this._tryAddCustomEvent("browser online",{})}),ye(this,"_onVisibilityChange",()=>{if(Ce!=null&&Ce.visibilityState){var r="window "+Ce.visibilityState;this._tryAddCustomEvent(r,{})}}),this.instance=e,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,!this.instance.sessionManager)throw J.error(Nn+" started without valid sessionManager"),new Error(Nn+" started without valid sessionManager. This is a bug.");var{sessionId:n,windowId:i}=this.sessionManager.checkAndGetSessionAndWindowId();this.sessionId=n,this.windowId=i,this.buffer=this.clearBuffer(),this.sessionIdleThresholdMilliseconds>=this.sessionManager.sessionTimeoutMs&&J.warn(Nn+" session_idle_threshold_ms (".concat(this.sessionIdleThresholdMilliseconds,") is greater than the session timeout (").concat(this.sessionManager.sessionTimeoutMs,"). Session will never be detected as idle"))}startIfEnabledOrStop(e){this.isRecordingEnabled?(this._startCapture(e),H==null||H.addEventListener("beforeunload",this._onBeforeUnload),H==null||H.addEventListener("offline",this._onOffline),H==null||H.addEventListener("online",this._onOnline),H==null||H.addEventListener("visibilitychange",this._onVisibilityChange),this._setupSampling(),this._addEventTriggerListener(),Rt(this._removePageViewCaptureHook)&&(this._removePageViewCaptureHook=this.instance._addCaptureHook(n=>{try{if(n==="$pageview"){var i=H?this._maskUrl(H.location.href):"";if(!i)return;this._tryAddCustomEvent("$pageview",{href:i})}}catch(r){J.error("Could not add $pageview to rrweb session",r)}})),this._onSessionIdListener||(this._onSessionIdListener=this.sessionManager.onSessionId((n,i,r)=>{var s,o,a,l;r&&(this._tryAddCustomEvent("$session_id_change",{sessionId:n,windowId:i,changeReason:r}),(s=this.instance)===null||s===void 0||(o=s.persistence)===null||o===void 0||o.unregister(jw),(a=this.instance)===null||a===void 0||(l=a.persistence)===null||l===void 0||l.unregister(Lw))}))):this.stopRecording()}stopRecording(){var e,n,i,r;this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,H==null||H.removeEventListener("beforeunload",this._onBeforeUnload),H==null||H.removeEventListener("offline",this._onOffline),H==null||H.removeEventListener("online",this._onOnline),H==null||H.removeEventListener("visibilitychange",this._onVisibilityChange),this.clearBuffer(),clearInterval(this._fullSnapshotTimer),(e=this._removePageViewCaptureHook)===null||e===void 0||e.call(this),this._removePageViewCaptureHook=void 0,(n=this._removeEventTriggerCaptureHook)===null||n===void 0||n.call(this),this._removeEventTriggerCaptureHook=void 0,(i=this._onSessionIdListener)===null||i===void 0||i.call(this),this._onSessionIdListener=void 0,(r=this._samplingSessionListener)===null||r===void 0||r.call(this),this._samplingSessionListener=void 0,J.info(Nn+" stopped"))}makeSamplingDecision(e){var n,i=this.sessionId!==e,r=this.sampleRate;if(Qi(r)){var s,o=this.isSampled,a=i||!ru(o);a?s=Math.random()<r:s=o,a&&(s?this._reportStarted("sampled"):J.warn(Nn+" Sample rate (".concat(r,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:r,isSampled:s})),(n=this.instance.persistence)===null||n===void 0||n.register({[Th]:s})}else{var l;(l=this.instance.persistence)===null||l===void 0||l.register({[Th]:null})}}afterDecideResponse(e){var n,i,r,s,o,a;if(this._persistDecideResponse(e),this._linkedFlag=((n=e.sessionRecording)===null||n===void 0?void 0:n.linkedFlag)||null,(i=e.sessionRecording)!==null&&i!==void 0&&i.endpoint&&(this._endpoint=(a=e.sessionRecording)===null||a===void 0?void 0:a.endpoint),this._setupSampling(),!Rt(this._linkedFlag)&&!this._linkedFlagSeen){var l=Qn(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,u=Qn(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags((c,d)=>{var h=an(d)&&l in d,f=u?d[l]===u:h;f&&this._reportStarted("linked_flag_matched",{linkedFlag:l,linkedVariant:u}),this._linkedFlagSeen=f})}(r=e.sessionRecording)!==null&&r!==void 0&&r.urlTriggers&&(this._urlTriggers=e.sessionRecording.urlTriggers),(s=e.sessionRecording)!==null&&s!==void 0&&s.urlBlocklist&&(this._urlBlocklist=e.sessionRecording.urlBlocklist),(o=e.sessionRecording)!==null&&o!==void 0&&o.eventTriggers&&(this._eventTriggers=e.sessionRecording.eventTriggers),this.receivedDecide=!0,this.startIfEnabledOrStop()}_setupSampling(){Qi(this.sampleRate)&&Rt(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId(e=>{this.makeSamplingDecision(e)}))}_persistDecideResponse(e){if(this.instance.persistence){var n,i=this.instance.persistence,r=()=>{var s,o,a,l,u,c,d,h=(s=e.sessionRecording)===null||s===void 0?void 0:s.sampleRate,f=Rt(h)?null:parseFloat(h),p=(o=e.sessionRecording)===null||o===void 0?void 0:o.minimumDurationMilliseconds;i.register({[V1]:!!e.sessionRecording,[rP]:(a=e.sessionRecording)===null||a===void 0?void 0:a.consoleLogRecordingEnabled,[sP]:le({capturePerformance:e.capturePerformance},(l=e.sessionRecording)===null||l===void 0?void 0:l.networkPayloadCapture),[oP]:{enabled:(u=e.sessionRecording)===null||u===void 0?void 0:u.recordCanvas,fps:(c=e.sessionRecording)===null||c===void 0?void 0:c.canvasFps,quality:(d=e.sessionRecording)===null||d===void 0?void 0:d.canvasQuality},[aP]:f,[lP]:Ie(p)?null:p})};r(),(n=this._persistDecideOnSessionListener)===null||n===void 0||n.call(this),this._persistDecideOnSessionListener=this.sessionManager.onSessionId(r)}}log(e){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log";(n=this.instance.sessionRecording)===null||n===void 0||n.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:i,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}_startCapture(e){if(!Ie(Object.assign)&&!Ie(Array.from)&&!(this._captureStarted||this.instance.config.disable_session_recording||this.instance.consent.isOptedOut())){var n,i;this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord?this._onScriptLoaded():(n=Ke.__PosthogExtensions__)===null||n===void 0||(i=n.loadExternalDependency)===null||i===void 0||i.call(n,this.instance,"recorder",r=>{if(r)return J.error(Nn+" could not load recorder",r);this._onScriptLoaded()}),J.info(Nn+" starting"),this.status==="active"&&this._reportStarted(e||"recording_initialized")}}isInteractiveEvent(e){var n;return e.type===3&&hU.indexOf((n=e.data)===null||n===void 0?void 0:n.source)!==-1}_updateWindowAndSessionIds(e){var n=this.isInteractiveEvent(e);n||this.isIdle||e.timestamp-this._lastActivityTimestamp>this.sessionIdleThresholdMilliseconds&&(this.isIdle=!0,clearInterval(this._fullSnapshotTimer),this._tryAddCustomEvent("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this._lastActivityTimestamp,threshold:this.sessionIdleThresholdMilliseconds,bufferLength:this.buffer.data.length,bufferSize:this.buffer.size}),this._flushBuffer());var i=!1;if(n&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)),!this.isIdle){var{windowId:r,sessionId:s}=this.sessionManager.checkAndGetSessionAndWindowId(!n,e.timestamp),o=this.sessionId!==s,a=this.windowId!==r;this.windowId=r,this.sessionId=s,o||a?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this._scheduleFullSnapshot()}}_tryRRWebMethod(e){try{return e.rrwebMethod(),!0}catch(n){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):J.warn(Nn+" could not emit queued rrweb event.",n,e),!1}}_tryAddCustomEvent(e,n){return this._tryRRWebMethod(EP(()=>this.rrwebRecord.addCustomEvent(e,n)))}_tryTakeFullSnapshot(){return this._tryRRWebMethod(EP(()=>this.rrwebRecord.takeFullSnapshot()))}_onScriptLoaded(){var e,n={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},i=this.instance.config.session_recording;for(var[r,s]of Object.entries(i||{}))r in n&&(r==="maskInputOptions"?n.maskInputOptions=le({password:!0},s):n[r]=s);if(this.canvasRecording&&this.canvasRecording.enabled&&(n.recordCanvas=!0,n.sampling={canvas:this.canvasRecording.fps},n.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),this.rrwebRecord){this.mutationRateLimiter=(e=this.mutationRateLimiter)!==null&&e!==void 0?e:new tU(this.rrwebRecord,{refillRate:this.instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this.instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(a,l)=>{var u="Too many mutations on node '".concat(a,"'. Rate limiting. This could be due to SVG animations or something similar");J.info(u,{node:l}),this.log(Nn+" "+u,"warn")}});var o=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(le({emit:a=>{this.onRRwebEmit(a)},plugins:o},n)),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:n,activePlugins:o.map(a=>a==null?void 0:a.name)}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}else J.error(Nn+"onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}_scheduleFullSnapshot(){if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),!this.isIdle){var e=this.fullSnapshotIntervalMillis;e&&(this._fullSnapshotTimer=setInterval(()=>{this._tryTakeFullSnapshot()},e))}}_gatherRRWebPlugins(){var e,n,i,r,s=[],o=(e=Ke.__PosthogExtensions__)===null||e===void 0||(n=e.rrwebPlugins)===null||n===void 0?void 0:n.getRecordConsolePlugin;o&&this.isConsoleLogCaptureEnabled&&s.push(o());var a=(i=Ke.__PosthogExtensions__)===null||i===void 0||(r=i.rrwebPlugins)===null||r===void 0?void 0:r.getRecordNetworkPlugin;return this.networkPayloadCapture&&Tr(a)&&(!M6.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?s.push(a(eU(this.instance.config,this.networkPayloadCapture))):J.info(Nn+" NetworkCapture not started because we are on localhost.")),s}onRRwebEmit(e){var n;if(this._processQueuedEvents(),e&&an(e)){if(e.type===fo.Meta){var i=this._maskUrl(e.data.href);if(this._lastHref=i,!i)return;e.data.href=i}else this._pageViewFallBack();if(this._checkUrlTriggerConditions(),this.status!=="paused"||function(d){return d.type===fo.Custom&&d.data.tag==="recording paused"}(e)){e.type===fo.FullSnapshot&&this._scheduleFullSnapshot(),e.type===fo.FullSnapshot&&this.triggerStatus==="trigger_pending"&&this.clearBuffer();var r=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(r){var s=function(d){var h=d;if(h&&an(h)&&h.type===6&&an(h.data)&&h.data.plugin==="rrweb/console@1"){h.data.payload.payload.length>10&&(h.data.payload.payload=h.data.payload.payload.slice(0,10),h.data.payload.payload.push("...[truncated]"));for(var f=[],p=0;p<h.data.payload.payload.length;p++)h.data.payload.payload[p]&&h.data.payload.payload[p].length>2e3?f.push(h.data.payload.payload[p].slice(0,2e3)+"...[truncated]"):f.push(h.data.payload.payload[p]);return h.data.payload.payload=f,d}return d}(r);if(this._updateWindowAndSessionIds(s),!this.isIdle||AP(s)){if(AP(s)){var o=s.data.payload;if(o){var a=o.lastActivityTimestamp,l=o.threshold;s.timestamp=a+l}}var u=(n=this.instance.config.session_recording.compress_events)===null||n===void 0||n?function(d){if(Nv(d)<1024)return d;try{if(d.type===fo.FullSnapshot)return le(le({},d),{},{data:$l(d.data),cv:"2024-10"});if(d.type===fo.IncrementalSnapshot&&d.data.source===Yr.Mutation)return le(le({},d),{},{cv:"2024-10",data:le(le({},d.data),{},{texts:$l(d.data.texts),attributes:$l(d.data.attributes),removes:$l(d.data.removes),adds:$l(d.data.adds)})});if(d.type===fo.IncrementalSnapshot&&d.data.source===Yr.StyleSheetRule)return le(le({},d),{},{cv:"2024-10",data:le(le({},d.data),{},{adds:$l(d.data.adds),removes:$l(d.data.removes)})})}catch(h){J.error(Nn+" could not compress event - will use uncompressed event",h)}return d}(s):s,c={$snapshot_bytes:Nv(u),$snapshot_data:u,$session_id:this.sessionId,$window_id:this.windowId};this.status!=="disabled"?this._captureSnapshotBuffered(c):this.clearBuffer()}}}}}_pageViewFallBack(){if(!this.instance.config.capture_pageview&&H){var e=this._maskUrl(H.location.href);this._lastHref!==e&&(this._tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}}_processQueuedEvents(){if(this.queuedRRWebEvents.length){var e=[...this.queuedRRWebEvents];this.queuedRRWebEvents=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this._tryRRWebMethod(n)})}}_maskUrl(e){var n=this.instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))===null||i===void 0?void 0:i.url}return e}clearBuffer(){return this.buffer={size:0,data:[],sessionId:this.sessionId,windowId:this.windowId},this.buffer}_flushBuffer(){this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var e=this.minimumDuration,n=this.sessionDuration,i=Qi(n)&&n>=0,r=Qi(e)&&i&&n<e;return this.status==="buffering"||r?(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3),this.buffer):(this.buffer.data.length>0&&nx(this.buffer).forEach(s=>{this._captureSnapshot({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId})}),this.clearBuffer())}_captureSnapshotBuffered(e){var n,i=2+(((n=this.buffer)===null||n===void 0?void 0:n.data.length)||0);!this.isIdle&&(this.buffer.size+e.$snapshot_bytes+i>943718.4||this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||this.isIdle||(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3))}_captureSnapshot(e){this.instance.capture("$snapshot",e,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}_checkUrlTriggerConditions(){if(H!==void 0&&H.location.href){var e=H.location.href,n=this.status==="paused",i=PP(e,this._urlBlocklist);i&&!n?this._pauseRecording():!i&&n&&this._resumeRecording(),PP(e,this._urlTriggers)&&this._activateTrigger("url")}}_activateTrigger(e){var n,i;this.triggerStatus==="trigger_pending"&&((n=this.instance)===null||n===void 0||(i=n.persistence)===null||i===void 0||i.register({[e==="url"?Lw:jw]:this.sessionId}),this._flushBuffer(),this._reportStarted(e+"_trigger_matched"))}_pauseRecording(){var e,n;this.status!=="paused"&&(this._urlBlocked=!0,Ce==null||(e=Ce.body)===null||e===void 0||(n=e.classList)===null||n===void 0||n.add("ph-no-capture"),clearInterval(this._fullSnapshotTimer),setTimeout(()=>{this._flushBuffer()},100),J.info(Nn+" recording paused due to URL blocker"),this._tryAddCustomEvent("recording paused",{reason:"url blocker"}))}_resumeRecording(){var e,n;this.status==="paused"&&(this._urlBlocked=!1,Ce==null||(e=Ce.body)===null||e===void 0||(n=e.classList)===null||n===void 0||n.remove("ph-no-capture"),this._tryTakeFullSnapshot(),this._scheduleFullSnapshot(),this._tryAddCustomEvent("recording resumed",{reason:"left blocked url"}),J.info(Nn+" recording resumed"))}_addEventTriggerListener(){this._eventTriggers.length!==0&&Rt(this._removeEventTriggerCaptureHook)&&(this._removeEventTriggerCaptureHook=this.instance.on("eventCaptured",e=>{try{this._eventTriggers.includes(e.event)&&this._activateTrigger("event")}catch(n){J.error(Nn+"Could not activate event trigger",n)}}))}overrideLinkedFlag(){this._linkedFlagSeen=!0,this._reportStarted("linked_flag_overridden")}overrideSampling(){var e;(e=this.instance.persistence)===null||e===void 0||e.register({[Th]:!0}),this._reportStarted("sampling_overridden")}overrideTrigger(e){this._activateTrigger(e)}_reportStarted(e,n){this.instance.register_for_session({$session_recording_start_reason:e}),J.info(Nn+" "+e.replace("_"," "),n),tt(["recording_initialized","session_id_changed"],e)||this._tryAddCustomEvent(e,n)}}class pU{constructor(e){this.instance=e,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}call(){var e={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(mc),group_properties:this.instance.get_property(ca),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:e,compression:this.instance.config.disable_compression?void 0:rs.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:n=>this.parseDecideResponse(n.json)})}parseDecideResponse(e){this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer();var n=!e;if(this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(e??{},n),!n)return Ce&&Ce.body?void this.instance._afterDecideResponse(e):(J.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.parseDecideResponse(e)},500));J.error("Failed to fetch feature flags from PostHog.")}}var po,mU=H!=null&&H.location?Rv(H.location.hash,"__posthog")||Rv(location.hash,"state"):null,TP="_postHogToolbarParams";(function(t){t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED"})(po||(po={}));class gU{constructor(e){this.instance=e}setToolbarState(e){Ke.ph_toolbar_state=e}getToolbarState(){var e;return(e=Ke.ph_toolbar_state)!==null&&e!==void 0?e:po.UNINITIALIZED}maybeLoadToolbar(){var e,n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!H||!Ce)return!1;i=(e=i)!==null&&e!==void 0?e:H.location,s=(n=s)!==null&&n!==void 0?n:H.history;try{if(!r){try{H.localStorage.setItem("test","test"),H.localStorage.removeItem("test")}catch{return!1}r=H==null?void 0:H.localStorage}var o,a=mU||Rv(i.hash,"__posthog")||Rv(i.hash,"state"),l=a?qA(()=>JSON.parse(atob(decodeURIComponent(a))))||qA(()=>JSON.parse(decodeURIComponent(a))):null;return l&&l.action==="ph_authorize"?((o=l).source="url",o&&Object.keys(o).length>0&&(l.desiredHash?i.hash=l.desiredHash:s?s.replaceState(s.state,"",i.pathname+i.search):i.hash="")):((o=JSON.parse(r.getItem(TP)||"{}")).source="localstorage",delete o.userIntent),!(!o.token||this.instance.config.token!==o.token)&&(this.loadToolbar(o),!0)}catch{return!1}}_callLoadToolbar(e){(Ke.ph_load_toolbar||Ke.ph_load_editor)(e,this.instance)}loadToolbar(e){var n=!(Ce==null||!Ce.getElementById(PO));if(!H||n)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=le(le({token:this.instance.config.token},e),{},{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(H.localStorage.setItem(TP,JSON.stringify(le(le({},r),{},{source:void 0}))),this.getToolbarState()===po.LOADED)this._callLoadToolbar(r);else if(this.getToolbarState()===po.UNINITIALIZED){var s,o;this.setToolbarState(po.LOADING),(s=Ke.__PosthogExtensions__)===null||s===void 0||(o=s.loadExternalDependency)===null||o===void 0||o.call(s,this.instance,"toolbar",a=>{if(a)return J.error("Failed to load toolbar",a),void this.setToolbarState(po.UNINITIALIZED);this.setToolbarState(po.LOADED),this._callLoadToolbar(r)}),To(H,"turbolinks:load",()=>{this.setToolbarState(po.UNINITIALIZED),this.loadToolbar(r)})}return!0}_loadEditor(e){return this.loadToolbar(e)}maybeLoadEditor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return this.maybeLoadToolbar(e,n,i)}}class vU{constructor(e){ye(this,"isPaused",!0),ye(this,"queue",[]),ye(this,"flushTimeoutMs",3e3),this.sendRequest=e}enqueue(e){this.queue.push(e),this.flushTimeout||this.setFlushTimeout()}unload(){this.clearFlushTimeout();var e=this.queue.length>0?this.formatQueue():{},n=Object.values(e),i=[...n.filter(r=>r.url.indexOf("/e")===0),...n.filter(r=>r.url.indexOf("/e")!==0)];i.map(r=>{this.sendRequest(le(le({},r),{},{transport:"sendBeacon"}))})}enable(){this.isPaused=!1,this.setFlushTimeout()}setFlushTimeout(){var e=this;this.isPaused||(this.flushTimeout=setTimeout(()=>{if(this.clearFlushTimeout(),this.queue.length>0){var n=this.formatQueue(),i=function(s){var o=n[s],a=new Date().getTime();o.data&&Qt(o.data)&&Ct(o.data,l=>{l.offset=Math.abs(l.timestamp-a),delete l.timestamp}),e.sendRequest(o)};for(var r in n)i(r)}},this.flushTimeoutMs))}clearFlushTimeout(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}formatQueue(){var e={};return Ct(this.queue,n=>{var i,r=n,s=(r?r.batchKey:null)||r.url;Ie(e[s])&&(e[s]=le(le({},r),{},{data:[]})),(i=e[s].data)===null||i===void 0||i.push(r.data)}),this.queue=[],e}}var yU=!!z1||!!B1,RP="text/plain",Dv=(t,e)=>{var[n,i]=t.split("?"),r=le({},e);i==null||i.split("&").forEach(o=>{var[a]=o.split("=");delete r[a]});var s=N6(r);return s=s?(i?i+"&":"")+s:i,"".concat(n,"?").concat(s)},Hw=t=>{var{data:e,compression:n}=t;if(e){if(n===rs.GZipJS){var i=oI(aI(JSON.stringify(e)),{mtime:0}),r=new Blob([i],{type:RP});return{contentType:RP,body:r,estimatedSize:r.size}}if(n===rs.Base64){var s=function(l){var u,c,d,h,f,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m=0,w=0,v="",y=[];if(!l)return l;l=m6(l);do u=(f=l.charCodeAt(m++)<<16|l.charCodeAt(m++)<<8|l.charCodeAt(m++))>>18&63,c=f>>12&63,d=f>>6&63,h=63&f,y[w++]=p.charAt(u)+p.charAt(c)+p.charAt(d)+p.charAt(h);while(m<l.length);switch(v=y.join(""),l.length%3){case 1:v=v.slice(0,-2)+"==";break;case 2:v=v.slice(0,-1)+"="}return v}(JSON.stringify(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:JSON.stringify(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=JSON.stringify(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Yh=[];z1&&Yh.push({transport:"XHR",method:t=>{var e,n=new z1;n.open(t.method||"GET",t.url,!0);var{contentType:i,body:r}=(e=Hw(t))!==null&&e!==void 0?e:{};Ct(t.headers,function(s,o){n.setRequestHeader(o,s)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s,o={statusCode:n.status,text:n.responseText};if(n.status===200)try{o.json=JSON.parse(n.responseText)}catch{}(s=t.callback)===null||s===void 0||s.call(t,o)}},n.send(r)}}),B1&&Yh.push({transport:"fetch",method:t=>{var e,n,{contentType:i,body:r,estimatedSize:s}=(e=Hw(t))!==null&&e!==void 0?e:{},o=new Headers;Ct(t.headers,function(c,d){o.append(d,c)}),i&&o.append("Content-Type",i);var a=t.url,l=null;if(XA){var u=new XA;l={signal:u.signal,timeout:setTimeout(()=>u.abort(),t.timeout)}}B1(a,{method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:r,signal:(n=l)===null||n===void 0?void 0:n.signal}).then(c=>c.text().then(d=>{var h,f={statusCode:c.status,text:d};if(c.status===200)try{f.json=JSON.parse(d)}catch(p){J.error(p)}(h=t.callback)===null||h===void 0||h.call(t,f)})).catch(c=>{var d;J.error(c),(d=t.callback)===null||d===void 0||d.call(t,{statusCode:0,text:c})}).finally(()=>l?clearTimeout(l.timeout):null)}}),tr!=null&&tr.sendBeacon&&Yh.push({transport:"sendBeacon",method:t=>{var e=Dv(t.url,{beacon:"1"});try{var n,{contentType:i,body:r}=(n=Hw(t))!==null&&n!==void 0?n:{},s=typeof r=="string"?new Blob([r],{type:i}):r;tr.sendBeacon(e,s)}catch{}}});var wU=["retriesPerformedSoFar"];class bU{constructor(e){ye(this,"isPolling",!1),ye(this,"pollIntervalMs",3e3),ye(this,"queue",[]),this.instance=e,this.queue=[],this.areWeOnline=!0,!Ie(H)&&"onLine"in H.navigator&&(this.areWeOnline=H.navigator.onLine,H.addEventListener("online",()=>{this.areWeOnline=!0,this.flush()}),H.addEventListener("offline",()=>{this.areWeOnline=!1}))}retriableRequest(e){var{retriesPerformedSoFar:n}=e,i=CO(e,wU);Qi(n)&&n>0&&(i.url=Dv(i.url,{retry_count:n})),this.instance._send_request(le(le({},i),{},{callback:r=>{var s;r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(n??0)<10?this.enqueue(le({retriesPerformedSoFar:n},i)):(s=i.callback)===null||s===void 0||s.call(i,r)}}))}enqueue(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var i=function(o){var a=3e3*Math.pow(2,o),l=a/2,u=Math.min(18e5,a),c=(Math.random()-.5)*(u-l);return Math.ceil(u+c)}(n),r=Date.now()+i;this.queue.push({retryAt:r,requestOptions:e});var s="Enqueued failed request for retry in ".concat(i);navigator.onLine||(s+=" (Browser is offline)"),J.warn(s),this.isPolling||(this.isPolling=!0,this.poll())}poll(){this.poller&&clearTimeout(this.poller),this.poller=setTimeout(()=>{this.areWeOnline&&this.queue.length>0&&this.flush(),this.poll()},this.pollIntervalMs)}flush(){var e=Date.now(),n=[],i=this.queue.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.queue=n,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.poller&&(clearTimeout(this.poller),this.poller=void 0),this.queue))try{this.instance._send_request(le(le({},e),{},{transport:"sendBeacon"}))}catch(n){J.error(n)}this.queue=[]}}var su;class xU{constructor(e,n,i,r){var s;ye(this,"_sessionIdChangedHandlers",[]),this.config=e,this.persistence=n,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=i||Pa,this._windowIdGenerator=r||Pa;var o=e.persistence_name||e.token,a=e.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*Ro(a,60,1800,"session_idle_timeout_seconds"),this._window_id_storage_key="ph_"+o+"_window_id",this._primary_window_exists_storage_key="ph_"+o+"_primary_window_exists",this._canUseSessionStorage()){var l=Ln.parse(this._window_id_storage_key),u=Ln.parse(this._primary_window_exists_storage_key);l&&!u?this._windowId=l:Ln.remove(this._window_id_storage_key),Ln.set(this._primary_window_exists_storage_key,!0)}if((s=this.config.bootstrap)!==null&&s!==void 0&&s.sessionID)try{var c=(d=>{var h=d.replace(/-/g,"");if(h.length!==32)throw new Error("Not a valid UUID");if(h[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(h.substring(0,12),16)})(this.config.bootstrap.sessionID);this._setSessionId(this.config.bootstrap.sessionID,new Date().getTime(),c)}catch(d){J.error("Invalid sessionID in bootstrap",d)}this._listenToReloadWindow()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return Ie(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),()=>{this._sessionIdChangedHandlers=this._sessionIdChangedHandlers.filter(n=>n!==e)}}_canUseSessionStorage(){return this.config.persistence!=="memory"&&!this.persistence.disabled&&Ln.is_supported()}_setWindowId(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&Ln.set(this._window_id_storage_key,e))}_getWindowId(){return this._windowId?this._windowId:this._canUseSessionStorage()?Ln.parse(this._window_id_storage_key):null}_setSessionId(e,n,i){e===this._sessionId&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this._sessionId=e,this.persistence.register({[Ev]:[n,e,i]}))}_getSessionId(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[Ev];return Qt(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this._setSessionId(null,null,null)}_listenToReloadWindow(){H==null||H.addEventListener("beforeunload",()=>{this._canUseSessionStorage()&&Ln.remove(this._primary_window_exists_storage_key)})}checkAndGetSessionAndWindowId(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:null)||new Date().getTime(),[i,r,s]=this._getSessionId(),o=this._getWindowId(),a=Qi(s)&&s>0&&Math.abs(n-s)>864e5,l=!1,u=!r,c=!e&&Math.abs(n-i)>this.sessionTimeoutMs;u||c||a?(r=this._sessionIdGenerator(),o=this._windowIdGenerator(),J.info("[SessionId] new session ID generated",{sessionId:r,windowId:o,changeReason:{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}}),s=n,l=!0):o||(o=this._windowIdGenerator(),l=!0);var d=i===0||!e||a?n:i,h=s===0?new Date().getTime():s;return this._setWindowId(o),this._setSessionId(r,d,h),l&&this._sessionIdChangedHandlers.forEach(f=>f(r,o,l?{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}:void 0)),{sessionId:r,windowId:o,sessionStartTimestamp:h,changeReason:l?{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}:void 0,lastActivityTimestamp:i}}}(function(t){t.US="us",t.EU="eu",t.CUSTOM="custom"})(su||(su={}));var MP="i.posthog.com";class SU{constructor(e){ye(this,"_regionCache",{}),this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)===null||e===void 0?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace(".".concat(MP),".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=su.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=su.EU:this._regionCache[this.apiHost]=su.CUSTOM),this._regionCache[this.apiHost]}endpointFor(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(n&&(n=n[0]==="/"?n:"/".concat(n)),e==="ui")return this.uiHost+n;if(this.region===su.CUSTOM)return this.apiHost+n;var i=MP+n;switch(e){case"assets":return"https://".concat(this.region,"-assets.").concat(i);case"api":return"https://".concat(this.region,".").concat(i)}}}var lI="posthog-js";function uI(t){var{organization:e,projectId:n,prefix:i,severityAllowList:r=["error"]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return s=>{var o,a,l,u,c;if(!(r==="*"||r.includes(s.level))||!t.__loaded)return s;s.tags||(s.tags={});var d=t.requestRouter.endpointFor("ui","/project/".concat(t.config.token,"/person/").concat(t.get_distinct_id()));s.tags["PostHog Person URL"]=d,t.sessionRecordingStarted()&&(s.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var h=((o=s.exception)===null||o===void 0?void 0:o.values)||[];h.map(p=>{p.stacktrace&&(p.stacktrace.type="raw")});var f={$exception_message:((a=h[0])===null||a===void 0?void 0:a.value)||s.message,$exception_type:(l=h[0])===null||l===void 0?void 0:l.type,$exception_personURL:d,$exception_level:s.level,$exception_list:h,$sentry_event_id:s.event_id,$sentry_exception:s.exception,$sentry_exception_message:((u=h[0])===null||u===void 0?void 0:u.value)||s.message,$sentry_exception_type:(c=h[0])===null||c===void 0?void 0:c.type,$sentry_tags:s.tags};return e&&n&&(f.$sentry_url=(i||"https://sentry.io/organizations/")+e+"/issues/?project="+n+"&query="+s.event_id),t.exceptions.sendExceptionEvent(f),s}}class _U{constructor(e,n,i,r,s){this.name=lI,this.setupOnce=function(o){o(uI(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}}}var NP,Lv,Xr;function kU(t,e){var n=t.config.segment;if(!n)return e();(function(i,r){var s=i.config.segment;if(!s)return r();var o=l=>{var u=()=>l.anonymousId()||Pa();i.config.get_device_id=u,l.id()&&(i.register({distinct_id:l.id(),$device_id:u()}),i.persistence.set_property(ho,"identified")),r()},a=s.user();"then"in a&&Tr(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((i=>{Promise&&Promise.resolve||J.warn("This browser does not have Promise support, and can not use the segment integration");var r=(s,o)=>{var a;if(!o)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(J.info("Segment integration does not have a userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(J.info("Segment integration has a userId set, identifying with PostHog"),i.identify(s.event.userId));var l=i._calculate_event_properties(o,(a=s.event.properties)!==null&&a!==void 0?a:{},new Date);return s.event.properties=Object.assign({},l,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(t)).then(()=>{e()})})}class CU{constructor(e){this._instance=e}doPageView(e){var n,i=this._previousPageViewProperties(e);return this._currentPath=(n=H==null?void 0:H.location.pathname)!==null&&n!==void 0?n:"",this._instance.scrollManager.resetContext(),this._prevPageviewTimestamp=e,i}doPageLeave(e){return this._previousPageViewProperties(e)}_previousPageViewProperties(e){var n=this._currentPath,i=this._prevPageviewTimestamp,r=this._instance.scrollManager.getContext();if(!i)return{};var s={};if(r){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:u,lastContentY:c,maxContentY:d}=r;Ie(o)||Ie(a)||Ie(l)||Ie(u)||Ie(c)||Ie(d)||(o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),u=Math.ceil(u),c=Math.ceil(c),d=Math.ceil(d),s={$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:o<=1?1:Ro(a/o,0,1),$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:o<=1?1:Ro(l/o,0,1),$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:u<=1?1:Ro(c/u,0,1),$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:u<=1?1:Ro(d/u,0,1)})}return n&&(s.$prev_pageview_pathname=n),i&&(s.$prev_pageview_duration=(e.getTime()-i.getTime())/1e3),s}}(function(t){t.Popover="popover",t.API="api",t.Widget="widget"})(NP||(NP={})),function(t){t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link"}(Lv||(Lv={})),function(t){t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question"}(Xr||(Xr={}));class cI{constructor(){ye(this,"events",{}),this.events={}}on(e,n){return this.events[e]||(this.events[e]=[]),this.events[e].push(n),()=>{this.events[e]=this.events[e].filter(i=>i!==n)}}emit(e,n){for(var i of this.events[e]||[])i(n);for(var r of this.events["*"]||[])r(e,n)}}class Yl{constructor(e){ye(this,"_debugEventEmitter",new cI),ye(this,"checkStep",(n,i)=>this.checkStepEvent(n,i)&&this.checkStepUrl(n,i)&&this.checkStepElement(n,i)),ye(this,"checkStepEvent",(n,i)=>i==null||!i.event||(n==null?void 0:n.event)===(i==null?void 0:i.event)),this.instance=e,this.actionEvents=new Set,this.actionRegistry=new Set}init(){var e;if(!Ie((e=this.instance)===null||e===void 0?void 0:e._addCaptureHook)){var n;(n=this.instance)===null||n===void 0||n._addCaptureHook((i,r)=>{this.on(i,r)})}}register(e){var n,i;if(!Ie((n=this.instance)===null||n===void 0?void 0:n._addCaptureHook)&&(e.forEach(o=>{var a,l;(a=this.actionRegistry)===null||a===void 0||a.add(o),(l=o.steps)===null||l===void 0||l.forEach(u=>{var c;(c=this.actionEvents)===null||c===void 0||c.add((u==null?void 0:u.event)||"")})}),(i=this.instance)!==null&&i!==void 0&&i.autocapture)){var r,s=new Set;e.forEach(o=>{var a;(a=o.steps)===null||a===void 0||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(r=this.instance)===null||r===void 0||r.autocapture.setElementSelectors(s)}}on(e,n){var i;n!=null&&e.length!=0&&(this.actionEvents.has(e)||this.actionEvents.has(n==null?void 0:n.event))&&this.actionRegistry&&((i=this.actionRegistry)===null||i===void 0?void 0:i.size)>0&&this.actionRegistry.forEach(r=>{this.checkAction(n,r)&&this._debugEventEmitter.emit("actionCaptured",r.name)})}_addActionHook(e){this.onAction("actionCaptured",n=>e(n))}checkAction(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var i of n.steps)if(this.checkStep(e,i))return!0;return!1}onAction(e,n){return this._debugEventEmitter.on(e,n)}checkStepUrl(e,n){if(n!=null&&n.url){var i,r=e==null||(i=e.properties)===null||i===void 0?void 0:i.$current_url;if(!r||typeof r!="string"||!Yl.matchString(r,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static matchString(e,n,i){switch(i){case"regex":return!!H&&cd(e,n);case"exact":return n===e;case"contains":var r=Yl.escapeStringRegexp(n).replace(/_/g,".").replace(/%/g,".*");return cd(e,r);default:return!1}}static escapeStringRegexp(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}checkStepElement(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.getElementsList(e).some(s=>!(n!=null&&n.href&&!Yl.matchString(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!Yl.matchString(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!Yl.matchString(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var i,r=e==null||(i=e.properties)===null||i===void 0?void 0:i.$element_selectors;if(!r||!r.includes(n==null?void 0:n.selector))return!1}return!0}getElementsList(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}class Cf{constructor(e){this.instance=e,this.eventToSurveys=new Map,this.actionToSurveys=new Map}register(e){var n;Ie((n=this.instance)===null||n===void 0?void 0:n._addCaptureHook)||(this.setupEventBasedSurveys(e),this.setupActionBasedSurveys(e))}setupActionBasedSurveys(e){var n=e.filter(i=>{var r,s,o,a;return((r=i.conditions)===null||r===void 0?void 0:r.actions)&&((s=i.conditions)===null||s===void 0||(o=s.actions)===null||o===void 0||(a=o.values)===null||a===void 0?void 0:a.length)>0});n.length!==0&&(this.actionMatcher==null&&(this.actionMatcher=new Yl(this.instance),this.actionMatcher.init(),this.actionMatcher._addActionHook(i=>{this.onAction(i)})),n.forEach(i=>{var r,s,o,a,l,u,c,d,h,f;i.conditions&&(r=i.conditions)!==null&&r!==void 0&&r.actions&&(s=i.conditions)!==null&&s!==void 0&&(o=s.actions)!==null&&o!==void 0&&o.values&&((a=i.conditions)===null||a===void 0||(l=a.actions)===null||l===void 0||(u=l.values)===null||u===void 0?void 0:u.length)>0&&((c=this.actionMatcher)===null||c===void 0||c.register(i.conditions.actions.values),(d=i.conditions)===null||d===void 0||(h=d.actions)===null||h===void 0||(f=h.values)===null||f===void 0||f.forEach(p=>{if(p&&p.name){var m=this.actionToSurveys.get(p.name);m&&m.push(i.id),this.actionToSurveys.set(p.name,m||[i.id])}}))}))}setupEventBasedSurveys(e){var n;e.filter(i=>{var r,s,o,a;return((r=i.conditions)===null||r===void 0?void 0:r.events)&&((s=i.conditions)===null||s===void 0||(o=s.events)===null||o===void 0||(a=o.values)===null||a===void 0?void 0:a.length)>0}).length!==0&&((n=this.instance)===null||n===void 0||n._addCaptureHook((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r,s,o;(r=i.conditions)===null||r===void 0||(s=r.events)===null||s===void 0||(o=s.values)===null||o===void 0||o.forEach(a=>{if(a&&a.name){var l=this.eventToSurveys.get(a.name);l&&l.push(i.id),this.eventToSurveys.set(a.name,l||[i.id])}})}))}onEvent(e,n){var i,r,s=((i=this.instance)===null||i===void 0||(r=i.persistence)===null||r===void 0?void 0:r.props[wm])||[];if(Cf.SURVEY_SHOWN_EVENT_NAME==e&&n&&s.length>0){var o,a=n==null||(o=n.properties)===null||o===void 0?void 0:o.$survey_id;if(a){var l=s.indexOf(a);l>=0&&(s.splice(l,1),this._updateActivatedSurveys(s))}}else this.eventToSurveys.has(e)&&this._updateActivatedSurveys(s.concat(this.eventToSurveys.get(e)||[]))}onAction(e){var n,i,r=((n=this.instance)===null||n===void 0||(i=n.persistence)===null||i===void 0?void 0:i.props[wm])||[];this.actionToSurveys.has(e)&&this._updateActivatedSurveys(r.concat(this.actionToSurveys.get(e)||[]))}_updateActivatedSurveys(e){var n,i;(n=this.instance)===null||n===void 0||(i=n.persistence)===null||i===void 0||i.register({[wm]:[...new Set(e)]})}getSurveys(){var e,n,i=(e=this.instance)===null||e===void 0||(n=e.persistence)===null||n===void 0?void 0:n.props[wm];return i||[]}getEventToSurveys(){return this.eventToSurveys}_getActionMatcher(){return this.actionMatcher}}ye(Cf,"SURVEY_SHOWN_EVENT_NAME","survey shown");var dI,Zt,hI,Zl,OP,fI,dx,pI,hx={},mI=[],EU=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,kk=Array.isArray;function Ta(t,e){for(var n in e)t[n]=e[n];return t}function gI(t){var e=t.parentNode;e&&e.removeChild(t)}function Vw(t,e,n,i,r){var s={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++hI,__i:-1,__u:0};return r==null&&Zt.vnode!=null&&Zt.vnode(s),s}function Ck(t){return t.children}function Hg(t,e){this.props=t,this.context=e}function pd(t,e){if(e==null)return t.__?pd(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?pd(t):null}function vI(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return vI(t)}}function fx(t){(!t.__d&&(t.__d=!0)&&Zl.push(t)&&!jv.__r++||OP!==Zt.debounceRendering)&&((OP=Zt.debounceRendering)||fI)(jv)}function jv(){var t,e,n,i,r,s,o,a,l;for(Zl.sort(dx);t=Zl.shift();)t.__d&&(e=Zl.length,i=void 0,s=(r=(n=t).__v).__e,a=[],l=[],(o=n.__P)&&((i=Ta({},r)).__v=r.__v+1,Zt.vnode&&Zt.vnode(i),bI(o,i,r,n.__n,o.ownerSVGElement!==void 0,32&r.__u?[s]:null,a,s??pd(r),!!(32&r.__u),l),i.__.__k[i.__i]=i,TU(a,i,l),i.__e!=s&&vI(i)),Zl.length>e&&Zl.sort(dx));jv.__r=0}function yI(t,e,n,i,r,s,o,a,l,u,c){var d,h,f,p,m,w=i&&i.__k||mI,v=e.length;for(n.__d=l,AU(n,e,w),l=n.__d,d=0;d<v;d++)(f=n.__k[d])!=null&&typeof f!="boolean"&&typeof f!="function"&&(h=f.__i===-1?hx:w[f.__i]||hx,f.__i=d,bI(t,f,h,r,s,o,a,l,u,c),p=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&Ek(h.ref,null,f),c.push(f.ref,f.__c||p,f)),m==null&&p!=null&&(m=p),65536&f.__u||h.__k===f.__k?l=wI(f,l,t):typeof f.type=="function"&&f.__d!==void 0?l=f.__d:p&&(l=p.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=l,n.__e=m}function AU(t,e,n){var i,r,s,o,a,l=e.length,u=n.length,c=u,d=0;for(t.__k=[],i=0;i<l;i++)(r=t.__k[i]=(r=e[i])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?Vw(null,r,null,null,r):kk(r)?Vw(Ck,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?Vw(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=t,r.__b=t.__b+1,a=PU(r,n,o=i+d,c),r.__i=a,s=null,a!==-1&&(c--,(s=n[a])&&(s.__u|=131072)),s==null||s.__v===null?(a==-1&&d--,typeof r.type!="function"&&(r.__u|=65536)):a!==o&&(a===o+1?d++:a>o?c>l-o?d+=a-o:d--:d=a<o&&a==o-1?a-o:0,a!==i+d&&(r.__u|=65536))):(s=n[i])&&s.key==null&&s.__e&&(s.__e==t.__d&&(t.__d=pd(s)),px(s,s,!1),n[i]=null,c--);if(c)for(i=0;i<u;i++)(s=n[i])!=null&&!(131072&s.__u)&&(s.__e==t.__d&&(t.__d=pd(s)),px(s,s))}function wI(t,e,n){var i,r;if(typeof t.type=="function"){for(i=t.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=t,e=wI(i[r],e,n));return e}return t.__e!=e&&(n.insertBefore(t.__e,e||null),e=t.__e),e&&e.nextSibling}function PU(t,e,n,i){var r=t.key,s=t.type,o=n-1,a=n+1,l=e[n];if(l===null||l&&r==l.key&&s===l.type)return n;if(i>(l!=null&&!(131072&l.__u)?1:0))for(;o>=0||a<e.length;){if(o>=0){if((l=e[o])&&!(131072&l.__u)&&r==l.key&&s===l.type)return o;o--}if(a<e.length){if((l=e[a])&&!(131072&l.__u)&&r==l.key&&s===l.type)return a;a++}}return-1}function IP(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||EU.test(e)?n:n+"px"}function Cm(t,e,n,i,r){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||IP(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||IP(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i?n.u=i.u:(n.u=Date.now(),t.addEventListener(e,s?LP:DP,s)):t.removeEventListener(e,s?LP:DP,s);else{if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,n))}}function DP(t){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(Zt.event?Zt.event(t):t)}function LP(t){return this.l[t.type+!0](Zt.event?Zt.event(t):t)}function bI(t,e,n,i,r,s,o,a,l,u){var c,d,h,f,p,m,w,v,y,b,_,k,C,E,P,M=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),s=[a=e.__e=n.__e]),(c=Zt.__b)&&c(e);e:if(typeof M=="function")try{if(v=e.props,y=(c=M.contextType)&&i[c.__c],b=c?y?y.props.value:c.__:i,n.__c?w=(d=e.__c=n.__c).__=d.__E:("prototype"in M&&M.prototype.render?e.__c=d=new M(v,b):(e.__c=d=new Hg(v,b),d.constructor=M,d.render=MU),y&&y.sub(d),d.props=v,d.state||(d.state={}),d.context=b,d.__n=i,h=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),M.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Ta({},d.__s)),Ta(d.__s,M.getDerivedStateFromProps(v,d.__s))),f=d.props,p=d.state,d.__v=e,h)M.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(M.getDerivedStateFromProps==null&&v!==f&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(v,b),!d.__e&&(d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(v,d.__s,b)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(d.props=v,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(D){D&&(D.__=e)}),_=0;_<d._sb.length;_++)d.__h.push(d._sb[_]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(v,d.__s,b),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(f,p,m)})}if(d.context=b,d.props=v,d.__P=t,d.__e=!1,k=Zt.__r,C=0,"prototype"in M&&M.prototype.render){for(d.state=d.__s,d.__d=!1,k&&k(e),c=d.render(d.props,d.state,d.context),E=0;E<d._sb.length;E++)d.__h.push(d._sb[E]);d._sb=[]}else do d.__d=!1,k&&k(e),c=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++C<25);d.state=d.__s,d.getChildContext!=null&&(i=Ta(Ta({},i),d.getChildContext())),h||d.getSnapshotBeforeUpdate==null||(m=d.getSnapshotBeforeUpdate(f,p)),yI(t,kk(P=c!=null&&c.type===Ck&&c.key==null?c.props.children:c)?P:[P],e,n,i,r,s,o,a,l,u),d.base=e.__e,e.__u&=-161,d.__h.length&&o.push(d),w&&(d.__E=d.__=null)}catch(D){e.__v=null,l||s!=null?(e.__e=a,e.__u|=l?160:32,s[s.indexOf(a)]=null):(e.__e=n.__e,e.__k=n.__k),Zt.__e(D,e,n)}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=RU(n.__e,e,n,i,r,s,o,l,u);(c=Zt.diffed)&&c(e)}function TU(t,e,n){e.__d=void 0;for(var i=0;i<n.length;i++)Ek(n[i],n[++i],n[++i]);Zt.__c&&Zt.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(s){s.call(r)})}catch(s){Zt.__e(s,r.__v)}})}function RU(t,e,n,i,r,s,o,a,l){var u,c,d,h,f,p,m,w=n.props,v=e.props,y=e.type;if(y==="svg"&&(r=!0),s!=null){for(u=0;u<s.length;u++)if((f=s[u])&&"setAttribute"in f==!!y&&(y?f.localName===y:f.nodeType===3)){t=f,s[u]=null;break}}if(t==null){if(y===null)return document.createTextNode(v);t=r?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,v.is&&v),s=null,a=!1}if(y===null)w===v||a&&t.data===v||(t.data=v);else{if(s=s&&dI.call(t.childNodes),w=n.props||hx,!a&&s!=null)for(w={},u=0;u<t.attributes.length;u++)w[(f=t.attributes[u]).name]=f.value;for(u in w)f=w[u],u=="children"||(u=="dangerouslySetInnerHTML"?d=f:u==="key"||u in v||Cm(t,u,null,f,r));for(u in v)f=v[u],u=="children"?h=f:u=="dangerouslySetInnerHTML"?c=f:u=="value"?p=f:u=="checked"?m=f:u==="key"||a&&typeof f!="function"||w[u]===f||Cm(t,u,f,w[u],r);if(c)a||d&&(c.__html===d.__html||c.__html===t.innerHTML)||(t.innerHTML=c.__html),e.__k=[];else if(d&&(t.innerHTML=""),yI(t,kk(h)?h:[h],e,n,i,r&&y!=="foreignObject",s,o,s?s[0]:n.__k&&pd(n,0),a,l),s!=null)for(u=s.length;u--;)s[u]!=null&&gI(s[u]);a||(u="value",p!==void 0&&(p!==t[u]||y==="progress"&&!p||y==="option"&&p!==w[u])&&Cm(t,u,p,w[u],!1),u="checked",m!==void 0&&m!==t[u]&&Cm(t,u,m,w[u],!1))}return t}function Ek(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(i){Zt.__e(i,n)}}function px(t,e,n){var i,r;if(Zt.unmount&&Zt.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||Ek(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){Zt.__e(s,e)}i.base=i.__P=null,t.__c=void 0}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&px(i[r],e,n||typeof t.type!="function");n||t.__e==null||gI(t.__e),t.__=t.__e=t.__d=void 0}function MU(t,e,n){return this.constructor(t,n)}dI=mI.slice,Zt={__e:function(t,e,n,i){for(var r,s,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),o=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),o=r.__d),o)return r.__E=r}catch(a){t=a}throw t}},hI=0,Hg.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ta({},this.state),typeof t=="function"&&(t=t(Ta({},n),this.props)),t&&Ta(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),fx(this))},Hg.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),fx(this))},Hg.prototype.render=Ck,Zl=[],fI=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,dx=function(t,e){return t.__v.__b-e.__v.__b},jv.__r=0,pI=0;(function(t,e){var n={__c:e="__cC"+pI++,__:t,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,s;return this.getChildContext||(r=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&r.some(function(a){a.__e=!0,fx(a)})},this.sub=function(o){r.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){r.splice(r.indexOf(o),1),a&&a.call(o)}}),i.children}};n.Provider.__=n.Consumer.contextType=n})({isPreviewMode:!1,previewPageIndex:0,handleCloseSurveyPopup:()=>{},isPopup:!0});var nh="[Surveys]",NU={icontains:t=>!!H&&H.location.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:t=>!!H&&H.location.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:t=>!!H&&cd(H.location.href,t),not_regex:t=>!!H&&!cd(H.location.href,t),exact:t=>(H==null?void 0:H.location.href)===t,is_not:t=>(H==null?void 0:H.location.href)!==t};class OU{constructor(e){this.instance=e,this._surveyEventReceiver=null}afterDecideResponse(e){this._decideServerResponse=!!e.surveys,this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");var e=(()=>{for(var n=[],i=0;i<localStorage.length;i++){var r=localStorage.key(i);r!=null&&r.startsWith("seenSurvey_")&&n.push(r)}return n})();e.forEach(n=>localStorage.removeItem(n))}loadIfEnabled(){var e,n,i,r=Ke==null||(e=Ke.__PosthogExtensions__)===null||e===void 0?void 0:e.generateSurveys;this.instance.config.disable_surveys||!this._decideServerResponse||r||(this._surveyEventReceiver==null&&(this._surveyEventReceiver=new Cf(this.instance)),(n=Ke.__PosthogExtensions__)===null||n===void 0||(i=n.loadExternalDependency)===null||i===void 0||i.call(n,this.instance,"surveys",s=>{var o,a;if(s)return J.error(nh,"Could not load surveys script",s);this._surveyManager=(o=Ke.__PosthogExtensions__)===null||o===void 0||(a=o.generateSurveys)===null||a===void 0?void 0:a.call(o,this.instance)}))}getSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.instance.config.disable_surveys)return e([]);this._surveyEventReceiver==null&&(this._surveyEventReceiver=new Cf(this.instance));var i=this.instance.get_property(G1);if(i&&!n)return e(i);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/surveys/?token=".concat(this.instance.config.token)),method:"GET",transport:"XHR",callback:r=>{var s;if(r.statusCode!==200||!r.json)return e([]);var o,a=r.json.surveys||[],l=a.filter(u=>{var c,d,h,f,p,m,w,v,y,b,_,k;return((c=u.conditions)===null||c===void 0?void 0:c.events)&&((d=u.conditions)===null||d===void 0||(h=d.events)===null||h===void 0?void 0:h.values)&&((f=u.conditions)===null||f===void 0||(p=f.events)===null||p===void 0||(m=p.values)===null||m===void 0?void 0:m.length)>0||((w=u.conditions)===null||w===void 0?void 0:w.actions)&&((v=u.conditions)===null||v===void 0||(y=v.actions)===null||y===void 0?void 0:y.values)&&((b=u.conditions)===null||b===void 0||(_=b.actions)===null||_===void 0||(k=_.values)===null||k===void 0?void 0:k.length)>0});return l.length>0&&((o=this._surveyEventReceiver)===null||o===void 0||o.register(l)),(s=this.instance.persistence)===null||s===void 0||s.register({[G1]:a}),e(a)}})}getActiveMatchingSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.getSurveys(i=>{var r,s=i.filter(l=>!(!l.start_date||l.end_date)).filter(l=>{var u,c,d,h;if(!l.conditions)return!0;var f=(u=l.conditions)===null||u===void 0||!u.url||NU[(c=(d=l.conditions)===null||d===void 0?void 0:d.urlMatchType)!==null&&c!==void 0?c:"icontains"](l.conditions.url),p=(h=l.conditions)===null||h===void 0||!h.selector||(Ce==null?void 0:Ce.querySelector(l.conditions.selector));return f&&p}),o=(r=this._surveyEventReceiver)===null||r===void 0?void 0:r.getSurveys(),a=s.filter(l=>{var u,c,d,h,f,p,m,w,v,y,b;if(!(l.linked_flag_key||l.targeting_flag_key||l.internal_targeting_flag_key||(u=l.feature_flag_keys)!==null&&u!==void 0&&u.length))return!0;var _=!l.linked_flag_key||this.instance.featureFlags.isFeatureEnabled(l.linked_flag_key),k=!l.targeting_flag_key||this.instance.featureFlags.isFeatureEnabled(l.targeting_flag_key),C=((c=l.conditions)===null||c===void 0?void 0:c.events)&&((d=l.conditions)===null||d===void 0||(h=d.events)===null||h===void 0?void 0:h.values)&&((f=l.conditions)===null||f===void 0||(p=f.events)===null||p===void 0?void 0:p.values.length)>0,E=((m=l.conditions)===null||m===void 0?void 0:m.actions)&&((w=l.conditions)===null||w===void 0||(v=w.actions)===null||v===void 0?void 0:v.values)&&((y=l.conditions)===null||y===void 0||(b=y.actions)===null||b===void 0?void 0:b.values.length)>0,P=!C&&!E||(o==null?void 0:o.includes(l.id)),M=this._canActivateRepeatedly(l),D=!(l.internal_targeting_flag_key&&!M)||this.instance.featureFlags.isFeatureEnabled(l.internal_targeting_flag_key),L=this.checkFlags(l);return _&&k&&D&&P&&L});return e(a)},n)}checkFlags(e){var n;return(n=e.feature_flag_keys)===null||n===void 0||!n.length||e.feature_flag_keys.every(i=>{var{key:r,value:s}=i;return!r||!s||this.instance.featureFlags.isFeatureEnabled(s)})}getNextSurveyStep(e,n,i){var r,s=e.questions[n],o=n+1;if((r=s.branching)===null||r===void 0||!r.type)return n===e.questions.length-1?Xr.End:o;if(s.branching.type===Xr.End)return Xr.End;if(s.branching.type===Xr.SpecificQuestion){if(Number.isInteger(s.branching.index))return s.branching.index}else if(s.branching.type===Xr.ResponseBased){if(s.type===Lv.SingleChoice){var a,l,u=s.choices.indexOf("".concat(i));if((a=s.branching)!==null&&a!==void 0&&(l=a.responseValues)!==null&&l!==void 0&&l.hasOwnProperty(u)){var c=s.branching.responseValues[u];return Number.isInteger(c)?c:c===Xr.End?Xr.End:o}}else if(s.type===Lv.Rating){var d,h;if(typeof i!="number"||!Number.isInteger(i))throw new Error("The response type must be an integer");var f=function(m,w){if(w===3){if(m<1||m>3)throw new Error("The response must be in range 1-3");return m===1?"negative":m===2?"neutral":"positive"}if(w===5){if(m<1||m>5)throw new Error("The response must be in range 1-5");return m<=2?"negative":m===3?"neutral":"positive"}if(w===7){if(m<1||m>7)throw new Error("The response must be in range 1-7");return m<=3?"negative":m===4?"neutral":"positive"}if(w===10){if(m<0||m>10)throw new Error("The response must be in range 0-10");return m<=6?"detractors":m<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 7, 10")}(i,s.scale);if((d=s.branching)!==null&&d!==void 0&&(h=d.responseValues)!==null&&h!==void 0&&h.hasOwnProperty(f)){var p=s.branching.responseValues[f];return Number.isInteger(p)?p:p===Xr.End?Xr.End:o}}return o}return J.warn(nh,"Falling back to next question index due to unexpected branching type"),o}_canActivateRepeatedly(e){var n;return Rt((n=Ke.__PosthogExtensions__)===null||n===void 0?void 0:n.canActivateRepeatedly)?(J.warn(nh,"canActivateRepeatedly is not defined, must init before calling"),!1):Ke.__PosthogExtensions__.canActivateRepeatedly(e)}canRenderSurvey(e){Rt(this._surveyManager)?J.warn(nh,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys(n=>{var i=n.filter(r=>r.id===e)[0];this._surveyManager.canRenderSurvey(i)})}renderSurvey(e,n){Rt(this._surveyManager)?J.warn(nh,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys(i=>{var r=i.filter(s=>s.id===e)[0];this._surveyManager.renderSurvey(r,Ce==null?void 0:Ce.querySelector(n))})}}class IU{constructor(e){var n,i;ye(this,"serverLimits",{}),ye(this,"lastEventRateLimited",!1),ye(this,"checkForLimiting",r=>{var s=r.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{J.info("[RateLimiter] ".concat(o||"events"," is quota limited.")),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void J.warn('[RateLimiter] could not rate limit - continuing. Error: "'.concat(o==null?void 0:o.message,'"'),{text:s})}}),this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)===null||n===void 0?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((i=e.config.rate_limiting)===null||i===void 0?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(){var e,n,i,r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],s=new Date().getTime(),o=(e=(n=this.instance.persistence)===null||n===void 0?void 0:n.get_property(X1))!==null&&e!==void 0?e:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||r||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||r||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to ".concat(this.captureEventsPerSecond," events per second and ").concat(this.captureEventsBurstLimit," events burst limit.")},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(i=this.instance.persistence)===null||i===void 0||i.set_property(X1,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}}var DU=()=>le({initialPathName:(Ti==null?void 0:Ti.pathname)||"",referringDomain:nn.referringDomain()},nn.campaignParams());class LU{constructor(e,n,i){ye(this,"_onSessionIdCallback",r=>{var s=this._getStoredProps();if(!s||s.sessionId!==r){var o={sessionId:r,props:this._sessionSourceParamGenerator()};this._persistence.register({[K1]:o})}}),this._sessionIdManager=e,this._persistence=n,this._sessionSourceParamGenerator=i||DU,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}_getStoredProps(){return this._persistence.props[K1]}getSessionProps(){var e,n=(e=this._getStoredProps())===null||e===void 0?void 0:e.props;return n?{$client_session_initial_referring_host:n.referringDomain,$client_session_initial_pathname:n.initialPathName,$client_session_initial_utm_source:n.utm_source,$client_session_initial_utm_campaign:n.utm_campaign,$client_session_initial_utm_medium:n.utm_medium,$client_session_initial_utm_content:n.utm_content,$client_session_initial_utm_term:n.utm_term}:{}}}var jU=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","deepscan","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","headlesschrome","cypress","Google-HotelAdsVerifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],jP=function(t,e){if(!t)return!1;var n=t.toLowerCase();return jU.concat(e||[]).some(i=>{var r=i.toLowerCase();return n.indexOf(r)!==-1})},xI=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&jP(n,e))return!0;try{var i=t==null?void 0:t.userAgentData;if(i!=null&&i.brands&&i.brands.some(r=>jP(r==null?void 0:r.brand,e)))return!0}catch{}return!!t.webdriver};class SI{constructor(){this.clicks=[]}isRageClick(e,n,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}}var Em="[Dead Clicks]",FU=()=>!0,$U=t=>{var e,n=!((e=t.instance.persistence)===null||e===void 0||!e.get_property(AO)),i=t.instance.config.capture_dead_clicks;return ru(i)?i:n};class _I{get lazyLoadedDeadClicksAutocapture(){return this._lazyLoadedDeadClicksAutocapture}constructor(e,n,i){this.instance=e,this.isEnabled=n,this.onCapture=i,this.startIfEnabled()}afterDecideResponse(e){this.instance.persistence&&this.instance.persistence.register({[AO]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.loadScript(()=>{this.start()})}loadScript(e){var n,i,r;(n=Ke.__PosthogExtensions__)!==null&&n!==void 0&&n.initDeadClicksAutocapture&&e(),(i=Ke.__PosthogExtensions__)===null||i===void 0||(r=i.loadExternalDependency)===null||r===void 0||r.call(i,this.instance,"dead-clicks-autocapture",s=>{s?J.error(Em+" failed to load script",s):e()})}start(){var e;if(Ce){if(!this._lazyLoadedDeadClicksAutocapture&&(e=Ke.__PosthogExtensions__)!==null&&e!==void 0&&e.initDeadClicksAutocapture){var n=an(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this._lazyLoadedDeadClicksAutocapture=Ke.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this._lazyLoadedDeadClicksAutocapture.start(Ce),J.info("".concat(Em," starting..."))}}else J.error(Em+" `document` not found. Cannot start.")}stop(){this._lazyLoadedDeadClicksAutocapture&&(this._lazyLoadedDeadClicksAutocapture.stop(),this._lazyLoadedDeadClicksAutocapture=void 0,J.info("".concat(Em," stopping...")))}}class BU{constructor(e){var n;ye(this,"rageclicks",new SI),ye(this,"_enabledServerSide",!1),ye(this,"_initialized",!1),ye(this,"_flushInterval",null),this.instance=e,this._enabledServerSide=!((n=this.instance.persistence)===null||n===void 0||!n.props[H1]),H==null||H.addEventListener("beforeunload",()=>{this.flush()})}get flushIntervalMilliseconds(){var e=5e3;return an(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return Ie(this.instance.config.capture_heatmaps)?Ie(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this._initialized)return;J.info("[heatmaps] starting..."),this._setupListeners(),this._flushInterval=setInterval(this.flush.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this._flushInterval)!==null&&e!==void 0?e:void 0),(n=this.deadClicksCapture)===null||n===void 0||n.stop(),this.getAndClearBuffer()}}afterDecideResponse(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[H1]:n}),this._enabledServerSide=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.buffer;return this.buffer=void 0,e}_onDeadClick(e){this._onClick(e.originalEvent,"deadclick")}_setupListeners(){H&&Ce&&(To(Ce,"click",e=>this._onClick(e||(H==null?void 0:H.event)),!1,!0),To(Ce,"mousemove",e=>this._onMouseMove(e||(H==null?void 0:H.event)),!1,!0),this.deadClicksCapture=new _I(this.instance,FU,this._onDeadClick.bind(this)),this.deadClicksCapture.startIfEnabled(),this._initialized=!0)}_getProperties(e,n){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,u){for(var c=a;c&&f0(c)&&!Ha(c,"body");){if(c===u)return!1;if(tt(l,H==null?void 0:H.getComputedStyle(c).position))return!0;c=qO(c)}return!1}(XO(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:i),target_fixed:o,type:n}}_onClick(e){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"click";if(!vP(e.target)){var r=this._getProperties(e,i);(n=this.rageclicks)!==null&&n!==void 0&&n.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this._capture(le(le({},r),{},{type:"rageclick"})),this._capture(r)}}_onMouseMove(e){vP(e.target)||(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout(()=>{this._capture(this._getProperties(e,"mousemove"))},500))}_capture(e){if(H){var n=H.location.href;this.buffer=this.buffer||{},this.buffer[n]||(this.buffer[n]=[]),this.buffer[n].push(e)}}flush(){this.buffer&&!fc(this.buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class zU{constructor(e){ye(this,"_updateScrollData",()=>{var n,i,r,s;this.context||(this.context={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,u=a+((o==null?void 0:o.clientHeight)||0),c=(o==null?void 0:o.scrollHeight)||0;this.context.lastScrollY=Math.ceil(a),this.context.maxScrollY=Math.max(a,(n=this.context.maxScrollY)!==null&&n!==void 0?n:0),this.context.maxScrollHeight=Math.max(l,(i=this.context.maxScrollHeight)!==null&&i!==void 0?i:0),this.context.lastContentY=u,this.context.maxContentY=Math.max(u,(r=this.context.maxContentY)!==null&&r!==void 0?r:0),this.context.maxContentHeight=Math.max(c,(s=this.context.maxContentHeight)!==null&&s!==void 0?s:0)}),this.instance=e}getContext(){return this.context}resetContext(){var e=this.context;return setTimeout(this._updateScrollData,0),e}startMeasuringScrollPosition(){H==null||H.addEventListener("scroll",this._updateScrollData,!0),H==null||H.addEventListener("scrollend",this._updateScrollData,!0),H==null||H.addEventListener("resize",this._updateScrollData)}scrollElement(){if(!this.instance.config.scroll_root_selector)return H==null?void 0:H.document.documentElement;var e=Qt(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector];for(var n of e){var i=H==null?void 0:H.document.querySelector(n);if(i)return i}}scrollY(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return H&&(H.scrollY||H.pageYOffset||H.document.documentElement.scrollTop)||0}scrollX(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return H&&(H.scrollX||H.pageXOffset||H.document.documentElement.scrollLeft)||0}}function Ww(t,e){return e.length>t?e.slice(0,t)+"...":e}function UU(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!f0(e));return e}function HU(t,e,n,i){var r=t.tagName.toLowerCase(),s={tag_name:r};ix.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=Ww(1024,QO(t)):s.$el_text=Ww(1024,p0(t)));var o=Ov(t);o.length>0&&(s.classes=o.filter(function(c){return c!==""})),Ct(t.attributes,function(c){var d;if((!YO(t)||["name","id","class","aria-label"].indexOf(c.name)!==-1)&&(i==null||!i.includes(c.name))&&!e&&hd(c.value)&&(d=c.name,!Qn(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var h=c.value;c.name==="class"&&(h=xk(h).join(" ")),s["attr__"+c.name]=Ww(1024,h)}});for(var a=1,l=1,u=t;u=UU(u);)a++,u.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function VU(t,e){for(var n,i,{e:r,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,u=[t],c=t;c.parentNode&&!Ha(c,"body");)GO(c.parentNode)?(u.push(c.parentNode.host),c=c.parentNode.host):(u.push(c.parentNode),c=c.parentNode);var d,h=[],f={},p=!1,m=!1;if(Ct(u,_=>{var k=rx(_);_.tagName.toLowerCase()==="a"&&(p=_.getAttribute("href"),p=k&&p&&hd(p)&&p),tt(Ov(_),"ph-no-capture")&&(m=!0),h.push(HU(_,s,o,a));var C=function(E){if(!rx(E))return{};var P={};return Ct(E.attributes,function(M){if(M.name&&M.name.indexOf("data-ph-capture-attribute")===0){var D=M.name.replace("data-ph-capture-attribute-",""),L=M.value;D&&L&&hd(L)&&(P[D]=L)}}),P}(_);hi(f,C)}),m)return{props:{},explicitNoCapture:m};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?h[0].$el_text=QO(t):h[0].$el_text=p0(t)),p){var w,v;h[0].attr__href=p;var y=(w=jc(p))===null||w===void 0?void 0:w.host,b=H==null||(v=H.location)===null||v===void 0?void 0:v.host;y&&b&&y!==b&&(d=p)}return{props:hi({$event_type:r.type,$ce_version:1},l?{}:{$elements:h},{$elements_chain:q6(h)},(n=h[0])!==null&&n!==void 0&&n.$el_text?{$el_text:(i=h[0])===null||i===void 0?void 0:i.$el_text}:{},d&&r.type==="click"?{$external_click_url:d}:{},f)}}class WU{constructor(e){ye(this,"_initialized",!1),ye(this,"_isDisabledServerSide",null),ye(this,"rageclicks",new SI),ye(this,"_elementsChainAsString",!1),this.instance=e,this._elementSelectors=null}get config(){var e,n,i=an(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=(e=i.url_allowlist)===null||e===void 0?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=(n=i.url_ignorelist)===null||n===void 0?void 0:n.map(r=>new RegExp(r)),i}_addDomEventHandlers(){if(this.isBrowserSupported()){if(H&&Ce){var e=i=>{i=i||(H==null?void 0:H.event);try{this._captureEvent(i)}catch(r){J.error("Failed to capture event",r)}},n=i=>{i=i||(H==null?void 0:H.event),this._captureEvent(i,Dw)};To(Ce,"submit",e,!1,!0),To(Ce,"change",e,!1,!0),To(Ce,"click",e,!1,!0),this.config.capture_copied_text&&(To(Ce,"copy",n,!1,!0),To(Ce,"cut",n,!1,!0))}}else J.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}afterDecideResponse(e){e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[eP]:!!e.autocapture_opt_out}),this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this._elementSelectors=e}getElementSelectors(e){var n,i=[];return(n=this._elementSelectors)===null||n===void 0||n.forEach(r=>{var s=Ce==null?void 0:Ce.querySelectorAll(r);s==null||s.forEach(o=>{e===o&&i.push(r)})}),i}get isEnabled(){var e,n,i=(e=this.instance.persistence)===null||e===void 0?void 0:e.props[eP],r=this._isDisabledServerSide;if(xl(r)&&!ru(i)&&!this.instance.config.advanced_disable_decide)return!1;var s=(n=this._isDisabledServerSide)!==null&&n!==void 0?n:!!i;return!!this.instance.config.autocapture&&!s}_captureEvent(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"$autocapture";if(this.isEnabled){var i,r=XO(e);WO(r)&&(r=r.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!==null&&i!==void 0&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this._captureEvent(e,"$rageclick");var s=n===Dw;if(r&&V6(r,e,this.config,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=VU(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.config.element_attribute_ignorelist,elementsChainAsString:this._elementsChainAsString});if(a)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(o.$element_selectors=l),n===Dw){var u,c=KO(H==null||(u=H.getSelection())===null||u===void 0?void 0:u.toString()),d=e.type||"clipboard";if(!c)return!1;o.$selected_content=c,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Tr(Ce==null?void 0:Ce.querySelectorAll)}}class GU{constructor(e){ye(this,"_restoreXHRPatch",void 0),ye(this,"_restoreFetchPatch",void 0),ye(this,"_startCapturing",()=>{var n,i,r,s;Ie(this._restoreXHRPatch)&&((n=Ke.__PosthogExtensions__)===null||n===void 0||(i=n.tracingHeadersPatchFns)===null||i===void 0||i._patchXHR(this.instance.sessionManager)),Ie(this._restoreFetchPatch)&&((r=Ke.__PosthogExtensions__)===null||r===void 0||(s=r.tracingHeadersPatchFns)===null||s===void 0||s._patchFetch(this.instance.sessionManager))}),this.instance=e}_loadScript(e){var n,i,r;(n=Ke.__PosthogExtensions__)!==null&&n!==void 0&&n.tracingHeadersPatchFns&&e(),(i=Ke.__PosthogExtensions__)===null||i===void 0||(r=i.loadExternalDependency)===null||r===void 0||r.call(i,this.instance,"tracing-headers",s=>{if(s)return J.error("[TRACING-HEADERS] failed to load script",s);e()})}startIfEnabledOrStop(){var e,n;this.instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):((e=this._restoreXHRPatch)===null||e===void 0||e.call(this),(n=this._restoreFetchPatch)===null||n===void 0||n.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}}var da;(function(t){t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED"})(da||(da={}));class KU{constructor(e){this.instance=e}get config(){return this.instance.config}get consent(){return this.getDnt()?da.DENIED:this.storedConsent}isOptedOut(){return this.consent===da.DENIED||this.consent===da.PENDING&&this.config.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.storage.set(this.storageKey,e?1:0,this.config.cookie_expiration,this.config.cross_subdomain_cookie,this.config.secure_cookie)}reset(){this.storage.remove(this.storageKey,this.config.cross_subdomain_cookie)}get storageKey(){var{token:e,opt_out_capturing_cookie_prefix:n}=this.instance.config;return(n||"__ph_opt_in_out_")+e}get storedConsent(){var e=this.storage.get(this.storageKey);return e==="1"?da.GRANTED:e==="0"?da.DENIED:da.PENDING}get storage(){if(!this._storage){var e=this.config.opt_out_capturing_persistence_type;this._storage=e==="localStorage"?fn:Oo;var n=e==="localStorage"?Oo:fn;n.get(this.storageKey)&&(this._storage.get(this.storageKey)||this.optInOut(n.get(this.storageKey)==="1"),n.remove(this.storageKey,this.config.cross_subdomain_cookie))}return this._storage}getDnt(){return!!this.config.respect_dnt&&!!SO([tr==null?void 0:tr.doNotTrack,tr==null?void 0:tr.msDoNotTrack,Ke.doNotTrack],e=>tt([!0,1,"1","yes"],e))}}var Am="[Exception Autocapture]";class XU{constructor(e){var n;ye(this,"originalOnUnhandledRejectionHandler",void 0),ye(this,"startCapturing",()=>{var i,r,s,o;if(H&&this.isEnabled&&!this.hasHandlers&&!this.isCapturing){var a=(i=Ke.__PosthogExtensions__)===null||i===void 0||(r=i.errorWrappingFunctions)===null||r===void 0?void 0:r.wrapOnError,l=(s=Ke.__PosthogExtensions__)===null||s===void 0||(o=s.errorWrappingFunctions)===null||o===void 0?void 0:o.wrapUnhandledRejection;if(a&&l)try{this.unwrapOnError=a(this.captureException.bind(this)),this.unwrapUnhandledRejection=l(this.captureException.bind(this))}catch(u){J.error(Am+" failed to start",u),this.stopCapturing()}else J.error(Am+" failed to load error wrapping functions - cannot start")}}),this.instance=e,this.remoteEnabled=!((n=this.instance.persistence)===null||n===void 0||!n.props[tP]),this.startIfEnabled()}get isEnabled(){var e;return(e=this.remoteEnabled)!==null&&e!==void 0&&e}get isCapturing(){var e;return!(H==null||(e=H.onerror)===null||e===void 0||!e.__POSTHOG_INSTRUMENTED__)}get hasHandlers(){return this.originalOnUnhandledRejectionHandler||this.unwrapOnError}startIfEnabled(){this.isEnabled&&!this.isCapturing&&(J.info(Am+" enabled, starting..."),this.loadScript(this.startCapturing))}loadScript(e){var n,i;this.hasHandlers&&e(),(n=Ke.__PosthogExtensions__)===null||n===void 0||(i=n.loadExternalDependency)===null||i===void 0||i.call(n,this.instance,"exception-autocapture",r=>{if(r)return J.error(Am+" failed to load script",r);e()})}stopCapturing(){var e,n;(e=this.unwrapOnError)===null||e===void 0||e.call(this),(n=this.unwrapUnhandledRejection)===null||n===void 0||n.call(this)}afterDecideResponse(e){var n=e.autocaptureExceptions;this.remoteEnabled=!!n||!1,this.instance.persistence&&this.instance.persistence.register({[tP]:this.remoteEnabled}),this.startIfEnabled()}captureException(e){var n=this.instance.requestRouter.endpointFor("ui");e.$exception_personURL="".concat(n,"/project/").concat(this.instance.config.token,"/person/").concat(this.instance.get_distinct_id()),this.instance.exceptions.sendExceptionEvent(e)}}var FP=9e5,Bl="[Web Vitals]";class qU{constructor(e){var n;ye(this,"_enabledServerSide",!1),ye(this,"_initialized",!1),ye(this,"buffer",{url:void 0,metrics:[],firstMetricTimestamp:void 0}),ye(this,"_flushToCapture",()=>{clearTimeout(this._delayedFlushTimer),this.buffer.metrics.length!==0&&(this.instance.capture("$web_vitals",this.buffer.metrics.reduce((i,r)=>le(le({},i),{},{["$web_vitals_".concat(r.name,"_event")]:le({},r),["$web_vitals_".concat(r.name,"_value")]:r.value}),{})),this.buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})}),ye(this,"_addToBuffer",i=>{var r,s=(r=this.instance.sessionManager)===null||r===void 0?void 0:r.checkAndGetSessionAndWindowId(!0);if(Ie(s))J.error(Bl+"Could not read session ID. Dropping metrics!");else{this.buffer=this.buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this._currentURL();Ie(o)||(Rt(i==null?void 0:i.name)||Rt(i==null?void 0:i.value)?J.error(Bl+"Invalid metric received",i):this._maxAllowedValue&&i.value>=this._maxAllowedValue?J.error(Bl+"Ignoring metric with value >= "+this._maxAllowedValue,i):(this.buffer.url!==o&&(this._flushToCapture(),this._delayedFlushTimer=setTimeout(this._flushToCapture,this.flushToCaptureTimeoutMs)),Ie(this.buffer.url)&&(this.buffer.url=o),this.buffer.firstMetricTimestamp=Ie(this.buffer.firstMetricTimestamp)?Date.now():this.buffer.firstMetricTimestamp,i.attribution&&i.attribution.interactionTargetElement&&(i.attribution.interactionTargetElement=void 0),this.buffer.metrics.push(le(le({},i),{},{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.buffer.metrics.length===this.allowedMetrics.length&&this._flushToCapture()))}}),ye(this,"_startCapturing",()=>{var i,r,s,o,a=Ke.__PosthogExtensions__;Ie(a)||Ie(a.postHogWebVitalsCallbacks)||({onLCP:i,onCLS:r,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),i&&r&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&i(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this._addToBuffer.bind(this)),this._initialized=!0):J.error(Bl+"web vitals callbacks not loaded - not starting")}),this.instance=e,this._enabledServerSide=!((n=this.instance.persistence)===null||n===void 0||!n.props[nP]),this.startIfEnabled()}get allowedMetrics(){var e,n,i=an(this.instance.config.capture_performance)?(e=this.instance.config.capture_performance)===null||e===void 0?void 0:e.web_vitals_allowed_metrics:void 0;return Ie(i)?((n=this.instance.persistence)===null||n===void 0?void 0:n.props[iP])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(an(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get _maxAllowedValue(){var e=an(this.instance.config.capture_performance)&&Qi(this.instance.config.capture_performance.__web_vitals_max_value)?this.instance.config.capture_performance.__web_vitals_max_value:FP;return 0<e&&e<=6e4?FP:e}get isEnabled(){var e=an(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals:void 0;return ru(e)?e:this._enabledServerSide}startIfEnabled(){this.isEnabled&&!this._initialized&&(J.info(Bl+" enabled, starting..."),this.loadScript(this._startCapturing))}afterDecideResponse(e){var n=an(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=an(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this.instance.persistence&&(this.instance.persistence.register({[nP]:n}),this.instance.persistence.register({[iP]:i})),this._enabledServerSide=n,this.startIfEnabled()}loadScript(e){var n,i,r;(n=Ke.__PosthogExtensions__)!==null&&n!==void 0&&n.postHogWebVitalsCallbacks&&e(),(i=Ke.__PosthogExtensions__)===null||i===void 0||(r=i.loadExternalDependency)===null||r===void 0||r.call(i,this.instance,"web-vitals",s=>{s?J.error(Bl+" failed to load script",s):e()})}_currentURL(){var e=H?H.location.href:void 0;return e||J.error(Bl+"Could not determine current URL"),e}}var YU={icontains:(t,e)=>!!H&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!H&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!H&&cd(e.href,t),not_regex:(t,e)=>!!H&&!cd(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};class Cn{constructor(e){var n=this;ye(this,"getWebExperimentsAndEvaluateDisplayLogic",function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];n.getWebExperiments(r=>{Cn.logInfo("retrieved web experiments from the server"),n._flagToExperiments=new Map,r.forEach(s=>{if(s.feature_flag_key&&n._featureFlags&&n._featureFlags[s.feature_flag_key]){var o;n._flagToExperiments&&(Cn.logInfo("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n._flagToExperiments)===null||o===void 0||o.set(s.feature_flag_key,s));var a=n._featureFlags[s.feature_flag_key];a&&s.variants[a]&&n.applyTransforms(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var u=s.variants[l];Cn.matchesTestVariant(u)&&n.applyTransforms(s.name,l,u.transforms)}})},i)}),this.instance=e,this.instance.onFeatureFlags&&this.instance.onFeatureFlags(i=>{this.applyFeatureFlagChanges(i)}),this._flagToExperiments=new Map}applyFeatureFlagChanges(e){Rt(this._flagToExperiments)||this.instance.config.disable_web_experiments||(Cn.logInfo("applying feature flags",e),e.forEach(n=>{var i;if(this._flagToExperiments&&(i=this._flagToExperiments)!==null&&i!==void 0&&i.has(n)){var r,s=this.instance.getFeatureFlag(n),o=(r=this._flagToExperiments)===null||r===void 0?void 0:r.get(n);s&&o!=null&&o.variants[s]&&this.applyTransforms(o.name,s,o.variants[s].transforms)}}))}afterDecideResponse(e){this._is_bot()?Cn.logInfo("Refusing to render web experiment since the viewer is a likely bot"):(this._featureFlags=e.featureFlags,this.loadIfEnabled(),this.previewWebExperiment())}previewWebExperiment(){var e=Cn.getWindowLocation();if(e!=null&&e.search){var n=Tv(e==null?void 0:e.search,"__experiment_id"),i=Tv(e==null?void 0:e.search,"__experiment_variant");n&&i&&(Cn.logInfo("previewing web experiments ".concat(n," && ").concat(i)),this.getWebExperiments(r=>{this.showPreviewWebExperiment(parseInt(n),i,r)},!1,!0))}}loadIfEnabled(){this.instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,i){if(this.instance.config.disable_web_experiments&&!i)return e([]);var r=this.instance.get_property("$web_experiments");if(r&&!n)return e(r);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/web_experiments/?token=".concat(this.instance.config.token)),method:"GET",transport:"XHR",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}showPreviewWebExperiment(e,n,i){var r=i.filter(s=>s.id===e);r&&r.length>0&&(Cn.logInfo("Previewing web experiment [".concat(r[0].name,"] with variant [").concat(n,"]")),this.applyTransforms(r[0].name,n,r[0].variants[n].transforms,!0))}static matchesTestVariant(e){return!Rt(e.conditions)&&Cn.matchUrlConditions(e)&&Cn.matchUTMConditions(e)}static matchUrlConditions(e){var n;if(Rt(e.conditions)||Rt((n=e.conditions)===null||n===void 0?void 0:n.url))return!0;var i,r,s,o=Cn.getWindowLocation();return!!o&&((i=e.conditions)===null||i===void 0||!i.url||YU[(r=(s=e.conditions)===null||s===void 0?void 0:s.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,o))}static getWindowLocation(){return H==null?void 0:H.location}static matchUTMConditions(e){var n;if(Rt(e.conditions)||Rt((n=e.conditions)===null||n===void 0?void 0:n.utm))return!0;var i=nn.campaignParams();if(i.utm_source){var r,s,o,a,l,u,c,d,h,f,p,m,w,v,y,b,_=(r=e.conditions)===null||r===void 0||(s=r.utm)===null||s===void 0||!s.utm_campaign||((o=e.conditions)===null||o===void 0||(a=o.utm)===null||a===void 0?void 0:a.utm_campaign)==i.utm_campaign,k=(l=e.conditions)===null||l===void 0||(u=l.utm)===null||u===void 0||!u.utm_source||((c=e.conditions)===null||c===void 0||(d=c.utm)===null||d===void 0?void 0:d.utm_source)==i.utm_source,C=(h=e.conditions)===null||h===void 0||(f=h.utm)===null||f===void 0||!f.utm_medium||((p=e.conditions)===null||p===void 0||(m=p.utm)===null||m===void 0?void 0:m.utm_medium)==i.utm_medium,E=(w=e.conditions)===null||w===void 0||(v=w.utm)===null||v===void 0||!v.utm_term||((y=e.conditions)===null||y===void 0||(b=y.utm)===null||b===void 0?void 0:b.utm_term)==i.utm_term;return _&&C&&E&&k}return!1}static logInfo(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];J.info("[WebExperiments] ".concat(e),i)}applyTransforms(e,n,i,r){var s;this._is_bot()?Cn.logInfo("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?i.forEach(o=>{if(o.selector){var a;Cn.logInfo("applying transform of variant ".concat(n," for experiment ").concat(e," "),o);var l,u=0,c=(a=document)===null||a===void 0?void 0:a.querySelectorAll(o.selector);c==null||c.forEach(d=>{var h=d;u+=1,o.attributes&&o.attributes.forEach(f=>{switch(f.name){case"text":h.innerText=f.value;break;case"html":h.innerHTML=f.value;break;case"cssClass":h.className=f.value;break;default:h.setAttribute(f.name,f.value)}}),o.text&&(h.innerText=o.text),o.html&&(h.parentElement?h.parentElement.innerHTML=o.html:h.innerHTML=o.html),o.css&&h.setAttribute("style",o.css)}),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_variant:n,$web_experiment_preview:r,$web_experiment_document_url:(l=Cn.getWindowLocation())===null||l===void 0?void 0:l.href,$web_experiment_elements_modified:u})}}):(Cn.logInfo("Control variants leave the page unmodified."),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_preview:r,$web_experiment_variant:n,$web_experiment_document_url:(s=Cn.getWindowLocation())===null||s===void 0?void 0:s.href,$web_experiment_elements_modified:0}))}_is_bot(){return tr&&this.instance?xI(tr,this.instance.config.custom_blocked_useragents):void 0}}class ZU{constructor(e){this.instance=e}sendExceptionEvent(e){this.instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}}var JU=["$set_once","$set"];class QU{constructor(e){this.instance=e,this.enabled=!!this.instance.config.opt_in_site_apps&&!this.instance.config.advanced_disable_decide,this.missedInvocations=[],this.loaded=!1,this.appsLoading=new Set}eventCollector(e,n){if(this.enabled&&!this.loaded&&n){var i=this.globalsForEvent(n);this.missedInvocations.push(i),this.missedInvocations.length>1e3&&(this.missedInvocations=this.missedInvocations.slice(10))}}init(){var e;(e=this.instance)===null||e===void 0||e._addCaptureHook(this.eventCollector.bind(this))}globalsForEvent(e){var n,i,r,s,o,a,l;if(!e)throw new Error("Event payload is required");var u={},c=this.instance.get_property("$groups")||[],d=this.instance.get_property("$stored_group_properties")||{};for(var[h,f]of Object.entries(d))u[h]={id:c[h],type:h,properties:f};var{$set_once:p,$set:m}=e;return{event:le(le({},CO(e,JU)),{},{properties:le(le(le({},e.properties),m?{$set:le(le({},(n=(i=e.properties)===null||i===void 0?void 0:i.$set)!==null&&n!==void 0?n:{}),m)}:{}),p?{$set_once:le(le({},(r=(s=e.properties)===null||s===void 0?void 0:s.$set_once)!==null&&r!==void 0?r:{}),p)}:{}),elements_chain:(o=(a=e.properties)===null||a===void 0?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)===null||l===void 0?void 0:l.distinct_id}),person:{properties:this.instance.get_property("$stored_person_properties")},groups:u}}afterDecideResponse(e){var n=this;Qt(e==null?void 0:e.siteApps)&&e.siteApps.length>0?this.enabled&&this.instance.config.opt_in_site_apps?function(){var i=()=>{n.appsLoading.size===0&&(n.loaded=!0,n.missedInvocations=[])},r=function(a,l){var u,c;n.appsLoading.add(a),Ke["__$$ph_site_app_".concat(a,"_posthog")]=n.instance,Ke["__$$ph_site_app_".concat(a,"_missed_invocations")]=()=>n.missedInvocations,Ke["__$$ph_site_app_".concat(a,"_callback")]=()=>{n.appsLoading.delete(a),i()},(u=Ke.__PosthogExtensions__)===null||u===void 0||(c=u.loadSiteApp)===null||c===void 0||c.call(u,n.instance,l,d=>{if(d)return n.appsLoading.delete(a),i(),J.error("Error while initializing PostHog app with config id ".concat(a),d)})};for(var{id:s,url:o}of e.siteApps)r(s,o)}():e.siteApps.length>0?(J.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.'),this.loaded=!0):this.loaded=!0:(this.loaded=!0,this.enabled=!1)}}var Zh={},mx=()=>{},oc="posthog",kI=!yU&&(An==null?void 0:An.indexOf("MSIE"))===-1&&(An==null?void 0:An.indexOf("Mozilla"))===-1,$P=()=>{var t,e,n;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(e=Ce==null?void 0:Ce.location,n=e==null?void 0:e.hostname,!!Qn(n)&&n.split(".").slice(-2).join(".")!=="herokuapp.com"),persistence:"localStorage+cookie",persistence_name:"",loaded:mx,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:Ti&&Qn(Ti==null?void 0:Ti.search)&&Ti.search.indexOf("__posthog_debug=true")!==-1||!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,enable_recording_console_log:void 0,secure_cookie:(H==null||(t=H.location)===null||t===void 0?void 0:t.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:i=>{var r="Bad HTTP status: "+i.statusCode+" "+i.text;J.error(r)},get_device_id:i=>i,_onCapture:mx,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",__add_tracing_headers:!1,before_send:void 0}},BP=t=>{var e={};Ie(t.process_person)||(e.person_profiles=t.process_person),Ie(t.xhr_headers)||(e.request_headers=t.xhr_headers),Ie(t.cookie_name)||(e.persistence_name=t.cookie_name),Ie(t.disable_cookie)||(e.disable_persistence=t.disable_cookie);var n=hi({},e,t);return Qt(t.property_blacklist)&&(Ie(t.property_denylist)?n.property_denylist=t.property_blacklist:Qt(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:J.error("Invalid value for property_denylist config: "+t.property_denylist)),n};class e9{constructor(){ye(this,"__forceAllowLocalhost",!1)}get _forceAllowLocalhost(){return this.__forceAllowLocalhost}set _forceAllowLocalhost(e){J.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class m0{constructor(){ye(this,"webPerformance",new e9),ye(this,"version",ua.LIB_VERSION),ye(this,"_internalEventEmitter",new cI),this.config=$P(),this.decideEndpointWasHit=!1,this.SentryIntegration=_U,this.sentryIntegration=e=>function(n,i){var r=uI(n,i);return{name:lI,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this._initialPersonProfilesConfig=null,this.featureFlags=new x6(this),this.toolbar=new gU(this),this.scrollManager=new zU(this),this.pageViewManager=new CU(this),this.surveys=new OU(this),this.experiments=new Cn(this),this.exceptions=new ZU(this),this.rateLimiter=new IU(this),this.requestRouter=new SU(this),this.consent=new KU(this),this.people={set:(e,n,i)=>{var r=Qn(e)?{[e]:n}:e;this.setPersonProperties(r),i==null||i({})},set_once:(e,n,i)=>{var r=Qn(e)?{[e]:n}:e;this.setPersonProperties(void 0,r),i==null||i({})}},this.on("eventCaptured",e=>J.info('send "'.concat(e==null?void 0:e.event,'"'),e))}init(e,n,i){if(i&&i!==oc){var r,s=(r=Zh[i])!==null&&r!==void 0?r:new m0;return s._init(e,n,i),Zh[i]=s,Zh[oc][i]=s,s}return this._init(e,n,i)}_init(e){var n,i,r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(Ie(e)||YA(e))return J.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return J.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._triggered_notifs=[],s.person_profiles&&(this._initialPersonProfilesConfig=s.person_profiles),this.set_config(hi({},$P(),BP(s),{name:o,token:e})),this.config.on_xhr_error&&J.error("[posthog] on_xhr_error is deprecated. Use on_request_error instead"),this.compression=s.disable_compression?void 0:rs.GZipJS,this.persistence=new zw(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new zw(le(le({},this.config),{},{persistence:"sessionStorage"}));var a=le({},this.persistence.props),l=le({},this.sessionPersistence.props);if(this._requestQueue=new vU(y=>this._send_retriable_request(y)),this._retryQueue=new bU(this),this.__request_queue=[],this.sessionManager=new xU(this.config,this.persistence),this.sessionPropsManager=new LU(this.sessionManager,this.persistence),new GU(this).startIfEnabledOrStop(),this.siteApps=new QU(this),(n=this.siteApps)===null||n===void 0||n.init(),this.sessionRecording=new fU(this),this.sessionRecording.startIfEnabledOrStop(),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new WU(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new BU(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new qU(this),this.exceptionObserver=new XU(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new _I(this,$U),this.deadClicksAutocapture.startIfEnabled(),ua.DEBUG=ua.DEBUG||this.config.debug,ua.DEBUG&&J.info("Starting in debug mode",{this:this,config:s,thisC:le({},this.config),p:a,s:l}),this._sync_opt_out_with_persistence(),((i=s.bootstrap)===null||i===void 0?void 0:i.distinctID)!==void 0){var u,c,d=this.config.get_device_id(Pa()),h=(u=s.bootstrap)!==null&&u!==void 0&&u.isIdentifiedID?d:s.bootstrap.distinctID;this.persistence.set_property(ho,(c=s.bootstrap)!==null&&c!==void 0&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:s.bootstrap.distinctID,$device_id:h})}if(this._hasBootstrappedFeatureFlags()){var f,p,m=Object.keys(((f=s.bootstrap)===null||f===void 0?void 0:f.featureFlags)||{}).filter(y=>{var b,_;return!((b=s.bootstrap)===null||b===void 0||(_=b.featureFlags)===null||_===void 0||!_[y])}).reduce((y,b)=>{var _,k;return y[b]=((_=s.bootstrap)===null||_===void 0||(k=_.featureFlags)===null||k===void 0?void 0:k[b])||!1,y},{}),w=Object.keys(((p=s.bootstrap)===null||p===void 0?void 0:p.featureFlagPayloads)||{}).filter(y=>m[y]).reduce((y,b)=>{var _,k,C,E;return(_=s.bootstrap)!==null&&_!==void 0&&(k=_.featureFlagPayloads)!==null&&k!==void 0&&k[b]&&(y[b]=(C=s.bootstrap)===null||C===void 0||(E=C.featureFlagPayloads)===null||E===void 0?void 0:E[b]),y},{});this.featureFlags.receivedFeatureFlags({featureFlags:m,featureFlagPayloads:w})}if(!this.get_distinct_id()){var v=this.config.get_device_id(Pa());this.register_once({distinct_id:v,$device_id:v},""),this.persistence.set_property(ho,"anonymous")}return H==null||(r=H.addEventListener)===null||r===void 0||r.call(H,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),this.toolbar.maybeLoadToolbar(),s.segment?kU(this,()=>this._loaded()):this._loaded(),Tr(this.config._onCapture)&&this.config._onCapture!==mx&&(J.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",y=>this.config._onCapture(y.event,y))),this}_afterDecideResponse(e){var n,i,r,s,o,a,l,u,c,d;this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=tt(e.supportedCompression,rs.GZipJS)?rs.GZipJS:tt(e.supportedCompression,rs.Base64)?rs.Base64:void 0),(n=e.analytics)!==null&&n!==void 0&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this._initialPersonProfilesConfig?this._initialPersonProfilesConfig:e.defaultIdentifiedOnly?"identified_only":"always"}),(i=this.siteApps)===null||i===void 0||i.afterDecideResponse(e),(r=this.sessionRecording)===null||r===void 0||r.afterDecideResponse(e),(s=this.autocapture)===null||s===void 0||s.afterDecideResponse(e),(o=this.heatmaps)===null||o===void 0||o.afterDecideResponse(e),(a=this.experiments)===null||a===void 0||a.afterDecideResponse(e),(l=this.surveys)===null||l===void 0||l.afterDecideResponse(e),(u=this.webVitalsAutocapture)===null||u===void 0||u.afterDecideResponse(e),(c=this.exceptionObserver)===null||c===void 0||c.afterDecideResponse(e),(d=this.deadClicksAutocapture)===null||d===void 0||d.afterDecideResponse(e)}_loaded(){var e=this.config.advanced_disable_decide;e||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(n){J.critical("`loaded` function failed",n)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this._captureInitialPageview()},1),e||(new pU(this).call(),this.featureFlags.resetRequestQueue())}_start_queue_if_opted_in(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this._requestQueue)===null||e===void 0||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||Lc(this.__request_queue,e=>this._send_retriable_request(e)),this.__request_queue=[],this._start_queue_if_opted_in()}_handle_unload(){var e,n;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),(e=this._requestQueue)===null||e===void 0||e.unload(),(n=this._retryQueue)===null||n===void 0||n.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(kI?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=Dv(e.url,{ip:this.config.ip?1:0}),e.headers=le({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,(n=>{var i,r,s,o=le({},n);o.timeout=o.timeout||6e4,o.url=Dv(o.url,{_:new Date().getTime().toString(),ver:ua.LIB_VERSION,compression:o.compression});var a=(i=o.transport)!==null&&i!==void 0?i:"XHR",l=(r=(s=SO(Yh,u=>u.transport===a))===null||s===void 0?void 0:s.method)!==null&&r!==void 0?r:Yh[0].method;if(!l)throw new Error("No available transport method");l(o)})(le(le({},e),{},{callback:n=>{var i,r,s;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((r=(s=this.config).on_request_error)===null||r===void 0||r.call(s,n)),(i=e.callback)===null||i===void 0||i.call(e,n)}}))))}_send_retriable_request(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)}_execute_array(e){var n,i=[],r=[],s=[];Lc(e,a=>{a&&(n=a[0],Qt(n)?s.push(a):Tr(a)?a.call(this):Qt(a)&&n==="alias"?i.push(a):Qt(a)&&n.indexOf("capture")!==-1&&Tr(this[n])?s.push(a):r.push(a))});var o=function(a,l){Lc(a,function(u){if(Qt(u[0])){var c=l;Ct(u,function(d){c=c[d[0]].apply(c,d.slice(1))})}else this[u[0]].apply(this,u.slice(1))},l)};o(i,this),o(r,this),o(s,this)}_hasBootstrappedFeatureFlags(){var e,n;return((e=this.config.bootstrap)===null||e===void 0?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)===null||n===void 0?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue){if(!this.consent.isOptedOut())if(!Ie(e)&&Qn(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=i!=null&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.store_google||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(i==null?void 0:i.timestamp)||o,l={uuid:Pa(),event:e,properties:this._calculate_event_properties(e,n||{},a)};s&&(l.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),i!=null&&i.$set&&(l.$set=i==null?void 0:i.$set);var u=this._calculate_set_once_properties(i==null?void 0:i.$set_once);u&&(l.$set_once=u),(l=p6(l,i!=null&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,Ie(i==null?void 0:i.timestamp)||(l.properties.$event_time_override_provided=!0,l.properties.$event_time_override_system_time=o);var c=le(le({},l.properties.$set),l.$set);if(fc(c)||this.setPersonPropertiesForFlags(c),!Rt(this.config.before_send)){var d=this._runBeforeSend(l);if(!d)return;l=d}this._internalEventEmitter.emit("eventCaptured",l);var h={method:"POST",url:(r=i==null?void 0:i._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:l,compression:"best-available",batchKey:i==null?void 0:i._batchKey};return!this.config.request_batching||i&&(i==null||!i._batchKey)||i!=null&&i.send_instantly?this._send_retriable_request(h):this._requestQueue.enqueue(h),l}J.critical("This capture call is ignored due to client rate limiting.")}}else J.error("No event name provided to posthog.capture")}else J.uninitializedWarning("posthog.capture")}_addCaptureHook(e){return this.on("eventCaptured",n=>e(n.event,n))}_calculate_event_properties(e,n,i){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;var r=this.persistence.remove_event_timer(e),s=le({},n);if(s.token=this.config.token,e==="$snapshot"){var o=le(le({},this.persistence.properties()),this.sessionPersistence.properties());return s.distinct_id=o.distinct_id,(!Qn(s.distinct_id)&&!Qi(s.distinct_id)||YA(s.distinct_id))&&J.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}var a=nn.properties();if(this.sessionManager){var{sessionId:l,windowId:u}=this.sessionManager.checkAndGetSessionAndWindowId();s.$session_id=l,s.$window_id=u}if(this.requestRouter.region===su.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),this.sessionPropsManager&&this.config.__preview_send_client_session_params&&(e==="$pageview"||e==="$pageleave"||e==="$autocapture")){var c=this.sessionPropsManager.getSessionProps();s=hi(s,c)}if(!this.config.disable_scroll_properties){var d={};e==="$pageview"?d=this.pageViewManager.doPageView(i):e==="$pageleave"&&(d=this.pageViewManager.doPageLeave(i)),s=hi(s,d)}if(e==="$pageview"&&Ce&&(s.title=Ce.title),!Ie(r)){var h=i.getTime()-r;s.$duration=parseFloat((h/1e3).toFixed(3))}An&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),(s=hi({},a,this.persistence.properties(),this.sessionPersistence.properties(),s)).$is_identified=this._isIdentified(),Qt(this.config.property_denylist)?Ct(this.config.property_denylist,function(m){delete s[m]}):J.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var f=this.config.sanitize_properties;f&&(s=f(s,e));var p=this._hasPersonProcessing();return s.$process_person_profile=p,p&&this._requirePersonProcessing("_calculate_event_properties"),s}_calculate_set_once_properties(e){if(!this.persistence||!this._hasPersonProcessing())return e;var n=hi({},this.persistence.get_initial_props(),e||{}),i=this.config.sanitize_properties;return i&&(n=i(n,"$set_once")),fc(n)?void 0:n}register(e,n){var i;(i=this.persistence)===null||i===void 0||i.register(e,n)}register_once(e,n,i){var r;(r=this.persistence)===null||r===void 0||r.register_once(e,n,i)}register_for_session(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.register(e)}unregister(e){var n;(n=this.persistence)===null||n===void 0||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.unregister(e)}_register_single(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,n)}on(e,n){return this._internalEventEmitter.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSessionId(e){var n,i;return(n=(i=this.sessionManager)===null||i===void 0?void 0:i.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){this.surveys.canRenderSurvey(e)}getNextSurveyStep(e,n,i){return this.surveys.getNextSurveyStep(e,n,i)}identify(e,n,i){if(!this.__loaded||!this.persistence)return J.uninitializedWarning("posthog.identify");if(Qi(e)&&(e=e.toString(),J.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e){if(["distinct_id","distinctid"].includes(e.toLowerCase()))J.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else if(this._requirePersonProcessing("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(Ah)&&(this.unregister(Ah),this.register({distinct_id:e}));var o=(this.persistence.get_property(ho)||"anonymous")==="anonymous";e!==r&&o?(this.persistence.set_property(ho,"identified"),this.setPersonPropertiesForFlags(n||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(Av))}}else J.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){(e||n)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:n||{}}))}group(e,n,i){if(e&&n){if(this._requirePersonProcessing("posthog.group")){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:le(le({},r),{},{[e]:n})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===n||i||this.reloadFeatureFlags()}}else J.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this._requirePersonProcessing("posthog.setPersonPropertiesForFlags")&&this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,i,r,s,o;if(J.info("reset"),!this.__loaded)return J.uninitializedWarning("posthog.reset");var a=this.get_property("$device_id");this.consent.reset(),(n=this.persistence)===null||n===void 0||n.clear(),(i=this.sessionPersistence)===null||i===void 0||i.clear(),(r=this.surveys)===null||r===void 0||r.reset(),(s=this.persistence)===null||s===void 0||s.set_property(ho,"anonymous"),(o=this.sessionManager)===null||o===void 0||o.resetSessionId();var l=this.config.get_device_id(Pa());this.register_once({distinct_id:l,$device_id:e?l:a},"")}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)===null||n===void 0?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/".concat(this.config.token,"/replay/").concat(n));if(e!=null&&e.withTimestamp&&i){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return r;var a=Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0);r+="?t=".concat(a)}return r}alias(e,n){return e===this.get_property(EO)?(J.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(Ie(n)&&(n=this.get_distinct_id()),e!==n?(this._register_single(Ah,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(J.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,i,r,s,o=le({},this.config);an(e)&&(hi(this.config,BP(e)),(n=this.persistence)===null||n===void 0||n.update_config(this.config,o),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new zw(le(le({},this.config),{},{persistence:"sessionStorage"})),fn.is_supported()&&fn.get("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(ua.DEBUG=!0,J.info("set_config",{config:e,oldConfig:o,newConfig:le({},this.config)})),(i=this.sessionRecording)===null||i===void 0||i.startIfEnabledOrStop(),(r=this.autocapture)===null||r===void 0||r.startIfEnabled(),(s=this.heatmaps)===null||s===void 0||s.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence())}startSessionRecording(e){var n=e===!0,i={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(i).some(Boolean)){var r,s,o,a,l;(r=this.sessionManager)===null||r===void 0||r.checkAndGetSessionAndWindowId(),i.sampling&&((s=this.sessionRecording)===null||s===void 0||s.overrideSampling()),i.linked_flag&&((o=this.sessionRecording)===null||o===void 0||o.overrideLinkedFlag()),i.url_trigger&&((a=this.sessionRecording)===null||a===void 0||a.overrideTrigger("url")),i.event_trigger&&((l=this.sessionRecording)===null||l===void 0||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)===null||e===void 0||!e.started)}captureException(e,n){var i,r=new Error("PostHog syntheticException"),s=Tr((i=Ke.__PosthogExtensions__)===null||i===void 0?void 0:i.parseErrorAsProperties)?Ke.__PosthogExtensions__.parseErrorAsProperties([e.message,void 0,void 0,void 0,e],{syntheticException:r}):le({$exception_level:"error",$exception_list:[{type:e.name,value:e.message,mechanism:{handled:!0,synthetic:!1}}]},n);this.exceptions.sendExceptionEvent(s)}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)===null||n===void 0?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)===null||n===void 0?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:oc;return n!==oc&&(n=oc+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)===null||e===void 0?void 0:e.get_property(ho))==="identified"||((n=this.sessionPersistence)===null||n===void 0?void 0:n.get_property(ho))==="identified"}_hasPersonProcessing(){var e,n,i,r;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&fc(this.getGroups())&&((e=this.persistence)===null||e===void 0||(n=e.props)===null||n===void 0||!n[Ah])&&((i=this.persistence)===null||i===void 0||(r=i.props)===null||r===void 0||!r[Pv]))}_shouldCapturePageleave(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&this.config.capture_pageview}createPersonProfile(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}_requirePersonProcessing(e){return this.config.person_profiles==="never"?(J.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(Pv,!0),!0)}_sync_opt_out_with_persistence(){var e,n,i,r,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)===null||e===void 0?void 0:e.disabled)!==a&&((i=this.persistence)===null||i===void 0||i.set_disabled(a)),((n=this.sessionPersistence)===null||n===void 0?void 0:n.disabled)!==a&&((r=this.sessionPersistence)===null||r===void 0||r.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),(Ie(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this._captureInitialPageview()}opt_out_capturing(){this.consent.optInOut(!1),this._sync_opt_out_with_persistence()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this._sync_opt_out_with_persistence()}_is_bot(){return tr?xI(tr,this.config.custom_blocked_useragents):void 0}_captureInitialPageview(){Ce&&!this._initialPageviewCaptured&&(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:Ce.title},{send_instantly:!0}))}debug(e){e===!1?(H==null||H.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(H==null||H.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}_runBeforeSend(e){if(Rt(this.config.before_send))return e;var n=Qt(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of n){if(i=r(i),Rt(i)){var s="Event '".concat(e.event,"' was rejected in beforeSend function");return w6(e.event)?J.warn("".concat(s,". This can cause unexpected behavior.")):J.info(s),null}i.properties&&!fc(i.properties)||J.warn("Event '".concat(e.event,"' has no properties after beforeSend function, this is likely an error."))}return i}}(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=f6(t.prototype[e[n]])})(m0,["identify"]);var zP,Bc=(zP=Zh[oc]=new m0,function(){function t(){t.done||(t.done=!0,kI=!1,Ct(Zh,function(e){e._dom_loaded()}))}Ce!=null&&Ce.addEventListener&&(Ce.readyState==="complete"?t():Ce.addEventListener("DOMContentLoaded",t,!1)),H&&To(H,"load",t,!0)}(),zP),t9=x.createContext({client:Bc});function n9(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=x.useMemo(function(){return n&&i&&console.warn("[PostHog.js] You have provided both a client and an apiKey to PostHogProvider. The apiKey will be ignored in favour of the client."),n&&r&&console.warn("[PostHog.js] You have provided both a client and options to PostHogProvider. The options will be ignored in favour of the client."),n||(i&&(Bc.__loaded&&console.warn("[PostHog.js] was already loaded elsewhere. This may cause issues."),Bc.init(i,r)),Bc)},[n,i]);return on.createElement(t9.Provider,{value:{client:s}},e)}var gx={},CI={exports:{}},dr={},EI={exports:{}},AI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,F){var ne=V.length;V.push(F);e:for(;0<ne;){var _e=ne-1>>>1,Z=V[_e];if(0<r(Z,F))V[_e]=F,V[ne]=Z,ne=_e;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var F=V[0],ne=V.pop();if(ne!==F){V[0]=ne;e:for(var _e=0,Z=V.length,ue=Z>>>1;_e<ue;){var I=2*(_e+1)-1,O=V[I],B=I+1,S=V[B];if(0>r(O,ne))B<Z&&0>r(S,O)?(V[_e]=S,V[B]=ne,_e=B):(V[_e]=O,V[I]=ne,_e=I);else if(B<Z&&0>r(S,ne))V[_e]=S,V[B]=ne,_e=B;else break e}}return F}function r(V,F){var ne=V.sortIndex-F.sortIndex;return ne!==0?ne:V.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var F=n(u);F!==null;){if(F.callback===null)i(u);else if(F.startTime<=V)i(u),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(u)}}function _(V){if(m=!1,b(V),!p)if(n(l)!==null)p=!0,ee(k);else{var F=n(u);F!==null&&he(_,F.startTime-V)}}function k(V,F){p=!1,m&&(m=!1,v(P),P=-1),f=!0;var ne=h;try{for(b(F),d=n(l);d!==null&&(!(d.expirationTime>F)||V&&!L());){var _e=d.callback;if(typeof _e=="function"){d.callback=null,h=d.priorityLevel;var Z=_e(d.expirationTime<=F);F=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&i(l),b(F)}else i(l);d=n(l)}if(d!==null)var ue=!0;else{var I=n(u);I!==null&&he(_,I.startTime-F),ue=!1}return ue}finally{d=null,h=ne,f=!1}}var C=!1,E=null,P=-1,M=5,D=-1;function L(){return!(t.unstable_now()-D<M)}function $(){if(E!==null){var V=t.unstable_now();D=V;var F=!0;try{F=E(!0,V)}finally{F?G():(C=!1,E=null)}}else C=!1}var G;if(typeof y=="function")G=function(){y($)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,X=z.port2;z.port1.onmessage=$,G=function(){X.postMessage(null)}}else G=function(){w($,0)};function ee(V){E=V,C||(C=!0,G())}function he(V,F){P=w(function(){V(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,ee(k))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var ne=h;h=F;try{return V()}finally{h=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,F){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ne=h;h=V;try{return F()}finally{h=ne}},t.unstable_scheduleCallback=function(V,F,ne){var _e=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?_e+ne:_e):ne=_e,V){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ne+Z,V={id:c++,callback:F,priorityLevel:V,startTime:ne,expirationTime:Z,sortIndex:-1},ne>_e?(V.sortIndex=ne,e(u,V),n(l)===null&&V===n(u)&&(m?(v(P),P=-1):m=!0,he(_,ne-_e))):(V.sortIndex=Z,e(l,V),p||f||(p=!0,ee(k))),V},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(V){var F=h;return function(){var ne=h;h=F;try{return V.apply(this,arguments)}finally{h=ne}}}})(AI);EI.exports=AI;var i9=EI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r9=x,ur=i9;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PI=new Set,Ef={};function Vu(t,e){md(t,e),md(t+"Capture",e)}function md(t,e){for(Ef[t]=e,t=0;t<e.length;t++)PI.add(e[t])}var jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vx=Object.prototype.hasOwnProperty,s9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,UP={},HP={};function o9(t){return vx.call(HP,t)?!0:vx.call(UP,t)?!1:s9.test(t)?HP[t]=!0:(UP[t]=!0,!1)}function a9(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function l9(t,e,n,i){if(e===null||typeof e>"u"||a9(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bi(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wn[t]=new bi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wn[e]=new bi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wn[t]=new bi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wn[t]=new bi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wn[t]=new bi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wn[t]=new bi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wn[t]=new bi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wn[t]=new bi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wn[t]=new bi(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ak=/[\-:]([a-z])/g;function Pk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ak,Pk);Wn[e]=new bi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ak,Pk);Wn[e]=new bi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ak,Pk);Wn[e]=new bi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wn[t]=new bi(t,1,!1,t.toLowerCase(),null,!1,!1)});Wn.xlinkHref=new bi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wn[t]=new bi(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tk(t,e,n,i){var r=Wn.hasOwnProperty(e)?Wn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(l9(e,n,r,i)&&(n=null),i||r===null?o9(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Xo=r9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pm=Symbol.for("react.element"),gc=Symbol.for("react.portal"),vc=Symbol.for("react.fragment"),Rk=Symbol.for("react.strict_mode"),yx=Symbol.for("react.profiler"),TI=Symbol.for("react.provider"),RI=Symbol.for("react.context"),Mk=Symbol.for("react.forward_ref"),wx=Symbol.for("react.suspense"),bx=Symbol.for("react.suspense_list"),Nk=Symbol.for("react.memo"),ha=Symbol.for("react.lazy"),MI=Symbol.for("react.offscreen"),VP=Symbol.iterator;function ih(t){return t===null||typeof t!="object"?null:(t=VP&&t[VP]||t["@@iterator"],typeof t=="function"?t:null)}var Xt=Object.assign,Gw;function Mh(t){if(Gw===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gw=e&&e[1]||""}return`
`+Gw+t}var Kw=!1;function Xw(t,e){if(!t||Kw)return"";Kw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Kw=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Mh(t):""}function u9(t){switch(t.tag){case 5:return Mh(t.type);case 16:return Mh("Lazy");case 13:return Mh("Suspense");case 19:return Mh("SuspenseList");case 0:case 2:case 15:return t=Xw(t.type,!1),t;case 11:return t=Xw(t.type.render,!1),t;case 1:return t=Xw(t.type,!0),t;default:return""}}function xx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vc:return"Fragment";case gc:return"Portal";case yx:return"Profiler";case Rk:return"StrictMode";case wx:return"Suspense";case bx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case RI:return(t.displayName||"Context")+".Consumer";case TI:return(t._context.displayName||"Context")+".Provider";case Mk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Nk:return e=t.displayName||null,e!==null?e:xx(t.type)||"Memo";case ha:e=t._payload,t=t._init;try{return xx(t(e))}catch{}}return null}function c9(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xx(e);case 8:return e===Rk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function NI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function d9(t){var e=NI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Tm(t){t._valueTracker||(t._valueTracker=d9(t))}function OI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=NI(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Fv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sx(t,e){var n=e.checked;return Xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function WP(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=tl(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function II(t,e){e=e.checked,e!=null&&Tk(t,"checked",e,!1)}function _x(t,e){II(t,e);var n=tl(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?kx(t,e.type,n):e.hasOwnProperty("defaultValue")&&kx(t,e.type,tl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function GP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function kx(t,e,n){(e!=="number"||Fv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Nh=Array.isArray;function zc(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+tl(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Cx(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Xt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function KP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Nh(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:tl(n)}}function DI(t,e){var n=tl(e.value),i=tl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function XP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function LI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ex(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?LI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Rm,jI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Rm=Rm||document.createElement("div"),Rm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Rm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Af(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},h9=["Webkit","ms","Moz","O"];Object.keys(Jh).forEach(function(t){h9.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jh[e]=Jh[t]})});function FI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jh.hasOwnProperty(t)&&Jh[t]?(""+e).trim():e+"px"}function $I(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=FI(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var f9=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ax(t,e){if(e){if(f9[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function Px(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tx=null;function Ok(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rx=null,Uc=null,Hc=null;function qP(t){if(t=Bp(t)){if(typeof Rx!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=b0(e),Rx(t.stateNode,t.type,e))}}function BI(t){Uc?Hc?Hc.push(t):Hc=[t]:Uc=t}function zI(){if(Uc){var t=Uc,e=Hc;if(Hc=Uc=null,qP(t),e)for(t=0;t<e.length;t++)qP(e[t])}}function UI(t,e){return t(e)}function HI(){}var qw=!1;function VI(t,e,n){if(qw)return t(e,n);qw=!0;try{return UI(t,e,n)}finally{qw=!1,(Uc!==null||Hc!==null)&&(HI(),zI())}}function Pf(t,e){var n=t.stateNode;if(n===null)return null;var i=b0(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var Mx=!1;if(jo)try{var rh={};Object.defineProperty(rh,"passive",{get:function(){Mx=!0}}),window.addEventListener("test",rh,rh),window.removeEventListener("test",rh,rh)}catch{Mx=!1}function p9(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Qh=!1,$v=null,Bv=!1,Nx=null,m9={onError:function(t){Qh=!0,$v=t}};function g9(t,e,n,i,r,s,o,a,l){Qh=!1,$v=null,p9.apply(m9,arguments)}function v9(t,e,n,i,r,s,o,a,l){if(g9.apply(this,arguments),Qh){if(Qh){var u=$v;Qh=!1,$v=null}else throw Error(oe(198));Bv||(Bv=!0,Nx=u)}}function Wu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function WI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function YP(t){if(Wu(t)!==t)throw Error(oe(188))}function y9(t){var e=t.alternate;if(!e){if(e=Wu(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return YP(r),t;if(s===i)return YP(r),e;s=s.sibling}throw Error(oe(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==i)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function GI(t){return t=y9(t),t!==null?KI(t):null}function KI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=KI(t);if(e!==null)return e;t=t.sibling}return null}var XI=ur.unstable_scheduleCallback,ZP=ur.unstable_cancelCallback,w9=ur.unstable_shouldYield,b9=ur.unstable_requestPaint,en=ur.unstable_now,x9=ur.unstable_getCurrentPriorityLevel,Ik=ur.unstable_ImmediatePriority,qI=ur.unstable_UserBlockingPriority,zv=ur.unstable_NormalPriority,S9=ur.unstable_LowPriority,YI=ur.unstable_IdlePriority,g0=null,qs=null;function _9(t){if(qs&&typeof qs.onCommitFiberRoot=="function")try{qs.onCommitFiberRoot(g0,t,void 0,(t.current.flags&128)===128)}catch{}}var ds=Math.clz32?Math.clz32:E9,k9=Math.log,C9=Math.LN2;function E9(t){return t>>>=0,t===0?32:31-(k9(t)/C9|0)|0}var Mm=64,Nm=4194304;function Oh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uv(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Oh(a):(s&=o,s!==0&&(i=Oh(s)))}else o=n&~r,o!==0?i=Oh(o):s!==0&&(i=Oh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ds(e),r=1<<n,i|=t[n],e&=~r;return i}function A9(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P9(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ds(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=A9(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ox(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ZI(){var t=Mm;return Mm<<=1,!(Mm&4194240)&&(Mm=64),t}function Yw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ds(e),t[e]=n}function T9(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ds(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Dk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ds(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var yt=0;function JI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var QI,Lk,eD,tD,nD,Ix=!1,Om=[],Va=null,Wa=null,Ga=null,Tf=new Map,Rf=new Map,wa=[],R9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JP(t,e){switch(t){case"focusin":case"focusout":Va=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":Tf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rf.delete(e.pointerId)}}function sh(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Bp(e),e!==null&&Lk(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function M9(t,e,n,i,r){switch(e){case"focusin":return Va=sh(Va,t,e,n,i,r),!0;case"dragenter":return Wa=sh(Wa,t,e,n,i,r),!0;case"mouseover":return Ga=sh(Ga,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Tf.set(s,sh(Tf.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Rf.set(s,sh(Rf.get(s)||null,t,e,n,i,r)),!0}return!1}function iD(t){var e=ou(t.target);if(e!==null){var n=Wu(e);if(n!==null){if(e=n.tag,e===13){if(e=WI(n),e!==null){t.blockedOn=e,nD(t.priority,function(){eD(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Dx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Tx=i,n.target.dispatchEvent(i),Tx=null}else return e=Bp(n),e!==null&&Lk(e),t.blockedOn=n,!1;e.shift()}return!0}function QP(t,e,n){Vg(t)&&n.delete(e)}function N9(){Ix=!1,Va!==null&&Vg(Va)&&(Va=null),Wa!==null&&Vg(Wa)&&(Wa=null),Ga!==null&&Vg(Ga)&&(Ga=null),Tf.forEach(QP),Rf.forEach(QP)}function oh(t,e){t.blockedOn===e&&(t.blockedOn=null,Ix||(Ix=!0,ur.unstable_scheduleCallback(ur.unstable_NormalPriority,N9)))}function Mf(t){function e(r){return oh(r,t)}if(0<Om.length){oh(Om[0],t);for(var n=1;n<Om.length;n++){var i=Om[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Va!==null&&oh(Va,t),Wa!==null&&oh(Wa,t),Ga!==null&&oh(Ga,t),Tf.forEach(e),Rf.forEach(e),n=0;n<wa.length;n++)i=wa[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<wa.length&&(n=wa[0],n.blockedOn===null);)iD(n),n.blockedOn===null&&wa.shift()}var Vc=Xo.ReactCurrentBatchConfig,Hv=!0;function O9(t,e,n,i){var r=yt,s=Vc.transition;Vc.transition=null;try{yt=1,jk(t,e,n,i)}finally{yt=r,Vc.transition=s}}function I9(t,e,n,i){var r=yt,s=Vc.transition;Vc.transition=null;try{yt=4,jk(t,e,n,i)}finally{yt=r,Vc.transition=s}}function jk(t,e,n,i){if(Hv){var r=Dx(t,e,n,i);if(r===null)ob(t,e,i,Vv,n),JP(t,i);else if(M9(r,t,e,n,i))i.stopPropagation();else if(JP(t,i),e&4&&-1<R9.indexOf(t)){for(;r!==null;){var s=Bp(r);if(s!==null&&QI(s),s=Dx(t,e,n,i),s===null&&ob(t,e,i,Vv,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else ob(t,e,i,null,n)}}var Vv=null;function Dx(t,e,n,i){if(Vv=null,t=Ok(i),t=ou(t),t!==null)if(e=Wu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=WI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vv=t,null}function rD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(x9()){case Ik:return 1;case qI:return 4;case zv:case S9:return 16;case YI:return 536870912;default:return 16}default:return 16}}var Ra=null,Fk=null,Wg=null;function sD(){if(Wg)return Wg;var t,e=Fk,n=e.length,i,r="value"in Ra?Ra.value:Ra.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Wg=r.slice(t,1<i?1-i:void 0)}function Gg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Im(){return!0}function e2(){return!1}function hr(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Im:e2,this.isPropagationStopped=e2,this}return Xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Im)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Im)},persist:function(){},isPersistent:Im}),e}var zd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$k=hr(zd),$p=Xt({},zd,{view:0,detail:0}),D9=hr($p),Zw,Jw,ah,v0=Xt({},$p,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ah&&(ah&&t.type==="mousemove"?(Zw=t.screenX-ah.screenX,Jw=t.screenY-ah.screenY):Jw=Zw=0,ah=t),Zw)},movementY:function(t){return"movementY"in t?t.movementY:Jw}}),t2=hr(v0),L9=Xt({},v0,{dataTransfer:0}),j9=hr(L9),F9=Xt({},$p,{relatedTarget:0}),Qw=hr(F9),$9=Xt({},zd,{animationName:0,elapsedTime:0,pseudoElement:0}),B9=hr($9),z9=Xt({},zd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),U9=hr(z9),H9=Xt({},zd,{data:0}),n2=hr(H9),V9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K9(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=G9[t])?!!e[t]:!1}function Bk(){return K9}var X9=Xt({},$p,{key:function(t){if(t.key){var e=V9[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?W9[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bk,charCode:function(t){return t.type==="keypress"?Gg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),q9=hr(X9),Y9=Xt({},v0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i2=hr(Y9),Z9=Xt({},$p,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bk}),J9=hr(Z9),Q9=Xt({},zd,{propertyName:0,elapsedTime:0,pseudoElement:0}),eH=hr(Q9),tH=Xt({},v0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nH=hr(tH),iH=[9,13,27,32],zk=jo&&"CompositionEvent"in window,ef=null;jo&&"documentMode"in document&&(ef=document.documentMode);var rH=jo&&"TextEvent"in window&&!ef,oD=jo&&(!zk||ef&&8<ef&&11>=ef),r2=" ",s2=!1;function aD(t,e){switch(t){case"keyup":return iH.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yc=!1;function sH(t,e){switch(t){case"compositionend":return lD(e);case"keypress":return e.which!==32?null:(s2=!0,r2);case"textInput":return t=e.data,t===r2&&s2?null:t;default:return null}}function oH(t,e){if(yc)return t==="compositionend"||!zk&&aD(t,e)?(t=sD(),Wg=Fk=Ra=null,yc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oD&&e.locale!=="ko"?null:e.data;default:return null}}var aH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aH[t.type]:e==="textarea"}function uD(t,e,n,i){BI(i),e=Wv(e,"onChange"),0<e.length&&(n=new $k("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var tf=null,Nf=null;function lH(t){bD(t,0)}function y0(t){var e=xc(t);if(OI(e))return t}function uH(t,e){if(t==="change")return e}var cD=!1;if(jo){var eb;if(jo){var tb="oninput"in document;if(!tb){var a2=document.createElement("div");a2.setAttribute("oninput","return;"),tb=typeof a2.oninput=="function"}eb=tb}else eb=!1;cD=eb&&(!document.documentMode||9<document.documentMode)}function l2(){tf&&(tf.detachEvent("onpropertychange",dD),Nf=tf=null)}function dD(t){if(t.propertyName==="value"&&y0(Nf)){var e=[];uD(e,Nf,t,Ok(t)),VI(lH,e)}}function cH(t,e,n){t==="focusin"?(l2(),tf=e,Nf=n,tf.attachEvent("onpropertychange",dD)):t==="focusout"&&l2()}function dH(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return y0(Nf)}function hH(t,e){if(t==="click")return y0(e)}function fH(t,e){if(t==="input"||t==="change")return y0(e)}function pH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ps=typeof Object.is=="function"?Object.is:pH;function Of(t,e){if(ps(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!vx.call(e,r)||!ps(t[r],e[r]))return!1}return!0}function u2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function c2(t,e){var n=u2(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=u2(n)}}function hD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fD(){for(var t=window,e=Fv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fv(t.document)}return e}function Uk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mH(t){var e=fD(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hD(n.ownerDocument.documentElement,n)){if(i!==null&&Uk(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=c2(n,s);var o=c2(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gH=jo&&"documentMode"in document&&11>=document.documentMode,wc=null,Lx=null,nf=null,jx=!1;function d2(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jx||wc==null||wc!==Fv(i)||(i=wc,"selectionStart"in i&&Uk(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),nf&&Of(nf,i)||(nf=i,i=Wv(Lx,"onSelect"),0<i.length&&(e=new $k("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=wc)))}function Dm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bc={animationend:Dm("Animation","AnimationEnd"),animationiteration:Dm("Animation","AnimationIteration"),animationstart:Dm("Animation","AnimationStart"),transitionend:Dm("Transition","TransitionEnd")},nb={},pD={};jo&&(pD=document.createElement("div").style,"AnimationEvent"in window||(delete bc.animationend.animation,delete bc.animationiteration.animation,delete bc.animationstart.animation),"TransitionEvent"in window||delete bc.transitionend.transition);function w0(t){if(nb[t])return nb[t];if(!bc[t])return t;var e=bc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in pD)return nb[t]=e[n];return t}var mD=w0("animationend"),gD=w0("animationiteration"),vD=w0("animationstart"),yD=w0("transitionend"),wD=new Map,h2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sl(t,e){wD.set(t,e),Vu(e,[t])}for(var ib=0;ib<h2.length;ib++){var rb=h2[ib],vH=rb.toLowerCase(),yH=rb[0].toUpperCase()+rb.slice(1);Sl(vH,"on"+yH)}Sl(mD,"onAnimationEnd");Sl(gD,"onAnimationIteration");Sl(vD,"onAnimationStart");Sl("dblclick","onDoubleClick");Sl("focusin","onFocus");Sl("focusout","onBlur");Sl(yD,"onTransitionEnd");md("onMouseEnter",["mouseout","mouseover"]);md("onMouseLeave",["mouseout","mouseover"]);md("onPointerEnter",["pointerout","pointerover"]);md("onPointerLeave",["pointerout","pointerover"]);Vu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ih));function f2(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,v9(i,e,void 0,t),t.currentTarget=null}function bD(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;f2(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;f2(r,a,u),s=l}}}if(Bv)throw t=Nx,Bv=!1,Nx=null,t}function Ot(t,e){var n=e[Ux];n===void 0&&(n=e[Ux]=new Set);var i=t+"__bubble";n.has(i)||(xD(e,t,2,!1),n.add(i))}function sb(t,e,n){var i=0;e&&(i|=4),xD(n,t,i,e)}var Lm="_reactListening"+Math.random().toString(36).slice(2);function If(t){if(!t[Lm]){t[Lm]=!0,PI.forEach(function(n){n!=="selectionchange"&&(wH.has(n)||sb(n,!1,t),sb(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lm]||(e[Lm]=!0,sb("selectionchange",!1,e))}}function xD(t,e,n,i){switch(rD(e)){case 1:var r=O9;break;case 4:r=I9;break;default:r=jk}n=r.bind(null,e,n,t),r=void 0,!Mx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function ob(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ou(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}VI(function(){var u=s,c=Ok(n),d=[];e:{var h=wD.get(t);if(h!==void 0){var f=$k,p=t;switch(t){case"keypress":if(Gg(n)===0)break e;case"keydown":case"keyup":f=q9;break;case"focusin":p="focus",f=Qw;break;case"focusout":p="blur",f=Qw;break;case"beforeblur":case"afterblur":f=Qw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=t2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=j9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=J9;break;case mD:case gD:case vD:f=B9;break;case yD:f=eH;break;case"scroll":f=D9;break;case"wheel":f=nH;break;case"copy":case"cut":case"paste":f=U9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=i2}var m=(e&4)!==0,w=!m&&t==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var y=u,b;y!==null;){b=y;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,v!==null&&(_=Pf(y,v),_!=null&&m.push(Df(y,_,b)))),w)break;y=y.return}0<m.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Tx&&(p=n.relatedTarget||n.fromElement)&&(ou(p)||p[Fo]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?ou(p):null,p!==null&&(w=Wu(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(m=t2,_="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=i2,_="onPointerLeave",v="onPointerEnter",y="pointer"),w=f==null?h:xc(f),b=p==null?h:xc(p),h=new m(_,y+"leave",f,n,c),h.target=w,h.relatedTarget=b,_=null,ou(c)===u&&(m=new m(v,y+"enter",p,n,c),m.target=b,m.relatedTarget=w,_=m),w=_,f&&p)t:{for(m=f,v=p,y=0,b=m;b;b=Yu(b))y++;for(b=0,_=v;_;_=Yu(_))b++;for(;0<y-b;)m=Yu(m),y--;for(;0<b-y;)v=Yu(v),b--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=Yu(m),v=Yu(v)}m=null}else m=null;f!==null&&p2(d,h,f,m,!1),p!==null&&w!==null&&p2(d,w,p,m,!0)}}e:{if(h=u?xc(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var k=uH;else if(o2(h))if(cD)k=fH;else{k=dH;var C=cH}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=hH);if(k&&(k=k(t,u))){uD(d,k,n,c);break e}C&&C(t,h,u),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&kx(h,"number",h.value)}switch(C=u?xc(u):window,t){case"focusin":(o2(C)||C.contentEditable==="true")&&(wc=C,Lx=u,nf=null);break;case"focusout":nf=Lx=wc=null;break;case"mousedown":jx=!0;break;case"contextmenu":case"mouseup":case"dragend":jx=!1,d2(d,n,c);break;case"selectionchange":if(gH)break;case"keydown":case"keyup":d2(d,n,c)}var E;if(zk)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else yc?aD(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(oD&&n.locale!=="ko"&&(yc||P!=="onCompositionStart"?P==="onCompositionEnd"&&yc&&(E=sD()):(Ra=c,Fk="value"in Ra?Ra.value:Ra.textContent,yc=!0)),C=Wv(u,P),0<C.length&&(P=new n2(P,t,null,n,c),d.push({event:P,listeners:C}),E?P.data=E:(E=lD(n),E!==null&&(P.data=E)))),(E=rH?sH(t,n):oH(t,n))&&(u=Wv(u,"onBeforeInput"),0<u.length&&(c=new n2("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=E))}bD(d,e)})}function Df(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wv(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Pf(t,n),s!=null&&i.unshift(Df(t,s,r)),s=Pf(t,e),s!=null&&i.push(Df(t,s,r))),t=t.return}return i}function Yu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function p2(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=Pf(n,s),l!=null&&o.unshift(Df(n,l,a))):r||(l=Pf(n,s),l!=null&&o.push(Df(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bH=/\r\n?/g,xH=/\u0000|\uFFFD/g;function m2(t){return(typeof t=="string"?t:""+t).replace(bH,`
`).replace(xH,"")}function jm(t,e,n){if(e=m2(e),m2(t)!==e&&n)throw Error(oe(425))}function Gv(){}var Fx=null,$x=null;function Bx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zx=typeof setTimeout=="function"?setTimeout:void 0,SH=typeof clearTimeout=="function"?clearTimeout:void 0,g2=typeof Promise=="function"?Promise:void 0,_H=typeof queueMicrotask=="function"?queueMicrotask:typeof g2<"u"?function(t){return g2.resolve(null).then(t).catch(kH)}:zx;function kH(t){setTimeout(function(){throw t})}function ab(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Mf(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Mf(e)}function Ka(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function v2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ud=Math.random().toString(36).slice(2),Fs="__reactFiber$"+Ud,Lf="__reactProps$"+Ud,Fo="__reactContainer$"+Ud,Ux="__reactEvents$"+Ud,CH="__reactListeners$"+Ud,EH="__reactHandles$"+Ud;function ou(t){var e=t[Fs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fo]||n[Fs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=v2(t);t!==null;){if(n=t[Fs])return n;t=v2(t)}return e}t=n,n=t.parentNode}return null}function Bp(t){return t=t[Fs]||t[Fo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function b0(t){return t[Lf]||null}var Hx=[],Sc=-1;function _l(t){return{current:t}}function Lt(t){0>Sc||(t.current=Hx[Sc],Hx[Sc]=null,Sc--)}function Mt(t,e){Sc++,Hx[Sc]=t.current,t.current=e}var nl={},ei=_l(nl),Bi=_l(!1),Su=nl;function gd(t,e){var n=t.type.contextTypes;if(!n)return nl;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function zi(t){return t=t.childContextTypes,t!=null}function Kv(){Lt(Bi),Lt(ei)}function y2(t,e,n){if(ei.current!==nl)throw Error(oe(168));Mt(ei,e),Mt(Bi,n)}function SD(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(oe(108,c9(t)||"Unknown",r));return Xt({},n,i)}function Xv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nl,Su=ei.current,Mt(ei,t),Mt(Bi,Bi.current),!0}function w2(t,e,n){var i=t.stateNode;if(!i)throw Error(oe(169));n?(t=SD(t,e,Su),i.__reactInternalMemoizedMergedChildContext=t,Lt(Bi),Lt(ei),Mt(ei,t)):Lt(Bi),Mt(Bi,n)}var vo=null,x0=!1,lb=!1;function _D(t){vo===null?vo=[t]:vo.push(t)}function AH(t){x0=!0,_D(t)}function kl(){if(!lb&&vo!==null){lb=!0;var t=0,e=yt;try{var n=vo;for(yt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}vo=null,x0=!1}catch(r){throw vo!==null&&(vo=vo.slice(t+1)),XI(Ik,kl),r}finally{yt=e,lb=!1}}return null}var _c=[],kc=0,qv=null,Yv=0,kr=[],Cr=0,_u=null,Mo=1,No="";function Gl(t,e){_c[kc++]=Yv,_c[kc++]=qv,qv=t,Yv=e}function kD(t,e,n){kr[Cr++]=Mo,kr[Cr++]=No,kr[Cr++]=_u,_u=t;var i=Mo;t=No;var r=32-ds(i)-1;i&=~(1<<r),n+=1;var s=32-ds(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Mo=1<<32-ds(e)+r|n<<r|i,No=s+t}else Mo=1<<s|n<<r|i,No=t}function Hk(t){t.return!==null&&(Gl(t,1),kD(t,1,0))}function Vk(t){for(;t===qv;)qv=_c[--kc],_c[kc]=null,Yv=_c[--kc],_c[kc]=null;for(;t===_u;)_u=kr[--Cr],kr[Cr]=null,No=kr[--Cr],kr[Cr]=null,Mo=kr[--Cr],kr[Cr]=null}var or=null,nr=null,zt=!1,ns=null;function CD(t,e){var n=Rr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function b2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,or=t,nr=Ka(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,or=t,nr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_u!==null?{id:Mo,overflow:No}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,or=t,nr=null,!0):!1;default:return!1}}function Vx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wx(t){if(zt){var e=nr;if(e){var n=e;if(!b2(t,e)){if(Vx(t))throw Error(oe(418));e=Ka(n.nextSibling);var i=or;e&&b2(t,e)?CD(i,n):(t.flags=t.flags&-4097|2,zt=!1,or=t)}}else{if(Vx(t))throw Error(oe(418));t.flags=t.flags&-4097|2,zt=!1,or=t}}}function x2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;or=t}function Fm(t){if(t!==or)return!1;if(!zt)return x2(t),zt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bx(t.type,t.memoizedProps)),e&&(e=nr)){if(Vx(t))throw ED(),Error(oe(418));for(;e;)CD(t,e),e=Ka(e.nextSibling)}if(x2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nr=Ka(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nr=null}}else nr=or?Ka(t.stateNode.nextSibling):null;return!0}function ED(){for(var t=nr;t;)t=Ka(t.nextSibling)}function vd(){nr=or=null,zt=!1}function Wk(t){ns===null?ns=[t]:ns.push(t)}var PH=Xo.ReactCurrentBatchConfig;function lh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var i=n.stateNode}if(!i)throw Error(oe(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function $m(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function S2(t){var e=t._init;return e(t._payload)}function AD(t){function e(v,y){if(t){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=Za(v,y),v.index=0,v.sibling=null,v}function s(v,y,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,b,_){return y===null||y.tag!==6?(y=mb(b,v.mode,_),y.return=v,y):(y=r(y,b),y.return=v,y)}function l(v,y,b,_){var k=b.type;return k===vc?c(v,y,b.props.children,_,b.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ha&&S2(k)===y.type)?(_=r(y,b.props),_.ref=lh(v,y,b),_.return=v,_):(_=Qg(b.type,b.key,b.props,null,v.mode,_),_.ref=lh(v,y,b),_.return=v,_)}function u(v,y,b,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=gb(b,v.mode,_),y.return=v,y):(y=r(y,b.children||[]),y.return=v,y)}function c(v,y,b,_,k){return y===null||y.tag!==7?(y=mu(b,v.mode,_,k),y.return=v,y):(y=r(y,b),y.return=v,y)}function d(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=mb(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Pm:return b=Qg(y.type,y.key,y.props,null,v.mode,b),b.ref=lh(v,null,y),b.return=v,b;case gc:return y=gb(y,v.mode,b),y.return=v,y;case ha:var _=y._init;return d(v,_(y._payload),b)}if(Nh(y)||ih(y))return y=mu(y,v.mode,b,null),y.return=v,y;$m(v,y)}return null}function h(v,y,b,_){var k=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:a(v,y,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Pm:return b.key===k?l(v,y,b,_):null;case gc:return b.key===k?u(v,y,b,_):null;case ha:return k=b._init,h(v,y,k(b._payload),_)}if(Nh(b)||ih(b))return k!==null?null:c(v,y,b,_,null);$m(v,b)}return null}function f(v,y,b,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(b)||null,a(y,v,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Pm:return v=v.get(_.key===null?b:_.key)||null,l(y,v,_,k);case gc:return v=v.get(_.key===null?b:_.key)||null,u(y,v,_,k);case ha:var C=_._init;return f(v,y,b,C(_._payload),k)}if(Nh(_)||ih(_))return v=v.get(b)||null,c(y,v,_,k,null);$m(y,_)}return null}function p(v,y,b,_){for(var k=null,C=null,E=y,P=y=0,M=null;E!==null&&P<b.length;P++){E.index>P?(M=E,E=null):M=E.sibling;var D=h(v,E,b[P],_);if(D===null){E===null&&(E=M);break}t&&E&&D.alternate===null&&e(v,E),y=s(D,y,P),C===null?k=D:C.sibling=D,C=D,E=M}if(P===b.length)return n(v,E),zt&&Gl(v,P),k;if(E===null){for(;P<b.length;P++)E=d(v,b[P],_),E!==null&&(y=s(E,y,P),C===null?k=E:C.sibling=E,C=E);return zt&&Gl(v,P),k}for(E=i(v,E);P<b.length;P++)M=f(E,v,P,b[P],_),M!==null&&(t&&M.alternate!==null&&E.delete(M.key===null?P:M.key),y=s(M,y,P),C===null?k=M:C.sibling=M,C=M);return t&&E.forEach(function(L){return e(v,L)}),zt&&Gl(v,P),k}function m(v,y,b,_){var k=ih(b);if(typeof k!="function")throw Error(oe(150));if(b=k.call(b),b==null)throw Error(oe(151));for(var C=k=null,E=y,P=y=0,M=null,D=b.next();E!==null&&!D.done;P++,D=b.next()){E.index>P?(M=E,E=null):M=E.sibling;var L=h(v,E,D.value,_);if(L===null){E===null&&(E=M);break}t&&E&&L.alternate===null&&e(v,E),y=s(L,y,P),C===null?k=L:C.sibling=L,C=L,E=M}if(D.done)return n(v,E),zt&&Gl(v,P),k;if(E===null){for(;!D.done;P++,D=b.next())D=d(v,D.value,_),D!==null&&(y=s(D,y,P),C===null?k=D:C.sibling=D,C=D);return zt&&Gl(v,P),k}for(E=i(v,E);!D.done;P++,D=b.next())D=f(E,v,P,D.value,_),D!==null&&(t&&D.alternate!==null&&E.delete(D.key===null?P:D.key),y=s(D,y,P),C===null?k=D:C.sibling=D,C=D);return t&&E.forEach(function($){return e(v,$)}),zt&&Gl(v,P),k}function w(v,y,b,_){if(typeof b=="object"&&b!==null&&b.type===vc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Pm:e:{for(var k=b.key,C=y;C!==null;){if(C.key===k){if(k=b.type,k===vc){if(C.tag===7){n(v,C.sibling),y=r(C,b.props.children),y.return=v,v=y;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ha&&S2(k)===C.type){n(v,C.sibling),y=r(C,b.props),y.ref=lh(v,C,b),y.return=v,v=y;break e}n(v,C);break}else e(v,C);C=C.sibling}b.type===vc?(y=mu(b.props.children,v.mode,_,b.key),y.return=v,v=y):(_=Qg(b.type,b.key,b.props,null,v.mode,_),_.ref=lh(v,y,b),_.return=v,v=_)}return o(v);case gc:e:{for(C=b.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(v,y.sibling),y=r(y,b.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=gb(b,v.mode,_),y.return=v,v=y}return o(v);case ha:return C=b._init,w(v,y,C(b._payload),_)}if(Nh(b))return p(v,y,b,_);if(ih(b))return m(v,y,b,_);$m(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(v,y.sibling),y=r(y,b),y.return=v,v=y):(n(v,y),y=mb(b,v.mode,_),y.return=v,v=y),o(v)):n(v,y)}return w}var yd=AD(!0),PD=AD(!1),Zv=_l(null),Jv=null,Cc=null,Gk=null;function Kk(){Gk=Cc=Jv=null}function Xk(t){var e=Zv.current;Lt(Zv),t._currentValue=e}function Gx(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Wc(t,e){Jv=t,Gk=Cc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fi=!0),t.firstContext=null)}function zr(t){var e=t._currentValue;if(Gk!==t)if(t={context:t,memoizedValue:e,next:null},Cc===null){if(Jv===null)throw Error(oe(308));Cc=t,Jv.dependencies={lanes:0,firstContext:t}}else Cc=Cc.next=t;return e}var au=null;function qk(t){au===null?au=[t]:au.push(t)}function TD(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,qk(e)):(n.next=r.next,r.next=n),e.interleaved=n,$o(t,i)}function $o(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fa=!1;function Yk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Io(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xa(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,dt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,$o(t,n)}return r=i.interleaved,r===null?(e.next=e,qk(i)):(e.next=r.next,r.next=e),i.interleaved=e,$o(t,n)}function Kg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Dk(t,n)}}function _2(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qv(t,e,n,i){var r=t.updateQueue;fa=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Xt({},d,h);break e;case 2:fa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Cu|=o,t.lanes=o,t.memoizedState=d}}function k2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(oe(191,r));r.call(i)}}}var zp={},Ys=_l(zp),jf=_l(zp),Ff=_l(zp);function lu(t){if(t===zp)throw Error(oe(174));return t}function Zk(t,e){switch(Mt(Ff,e),Mt(jf,t),Mt(Ys,zp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ex(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ex(e,t)}Lt(Ys),Mt(Ys,e)}function wd(){Lt(Ys),Lt(jf),Lt(Ff)}function MD(t){lu(Ff.current);var e=lu(Ys.current),n=Ex(e,t.type);e!==n&&(Mt(jf,t),Mt(Ys,n))}function Jk(t){jf.current===t&&(Lt(Ys),Lt(jf))}var Wt=_l(0);function ey(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ub=[];function Qk(){for(var t=0;t<ub.length;t++)ub[t]._workInProgressVersionPrimary=null;ub.length=0}var Xg=Xo.ReactCurrentDispatcher,cb=Xo.ReactCurrentBatchConfig,ku=0,Kt=null,hn=null,Pn=null,ty=!1,rf=!1,$f=0,TH=0;function Kn(){throw Error(oe(321))}function eC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ps(t[n],e[n]))return!1;return!0}function tC(t,e,n,i,r,s){if(ku=s,Kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xg.current=t===null||t.memoizedState===null?OH:IH,t=n(i,r),rf){s=0;do{if(rf=!1,$f=0,25<=s)throw Error(oe(301));s+=1,Pn=hn=null,e.updateQueue=null,Xg.current=DH,t=n(i,r)}while(rf)}if(Xg.current=ny,e=hn!==null&&hn.next!==null,ku=0,Pn=hn=Kt=null,ty=!1,e)throw Error(oe(300));return t}function nC(){var t=$f!==0;return $f=0,t}function Ps(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Kt.memoizedState=Pn=t:Pn=Pn.next=t,Pn}function Ur(){if(hn===null){var t=Kt.alternate;t=t!==null?t.memoizedState:null}else t=hn.next;var e=Pn===null?Kt.memoizedState:Pn.next;if(e!==null)Pn=e,hn=t;else{if(t===null)throw Error(oe(310));hn=t,t={memoizedState:hn.memoizedState,baseState:hn.baseState,baseQueue:hn.baseQueue,queue:hn.queue,next:null},Pn===null?Kt.memoizedState=Pn=t:Pn=Pn.next=t}return Pn}function Bf(t,e){return typeof e=="function"?e(t):e}function db(t){var e=Ur(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var i=hn,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((ku&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Kt.lanes|=c,Cu|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,ps(i,e.memoizedState)||(Fi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Kt.lanes|=s,Cu|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function hb(t){var e=Ur(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);ps(s,e.memoizedState)||(Fi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function ND(){}function OD(t,e){var n=Kt,i=Ur(),r=e(),s=!ps(i.memoizedState,r);if(s&&(i.memoizedState=r,Fi=!0),i=i.queue,iC(LD.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Pn!==null&&Pn.memoizedState.tag&1){if(n.flags|=2048,zf(9,DD.bind(null,n,i,r,e),void 0,null),Tn===null)throw Error(oe(349));ku&30||ID(n,e,r)}return r}function ID(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function DD(t,e,n,i){e.value=n,e.getSnapshot=i,jD(e)&&FD(t)}function LD(t,e,n){return n(function(){jD(e)&&FD(t)})}function jD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ps(t,n)}catch{return!0}}function FD(t){var e=$o(t,1);e!==null&&hs(e,t,1,-1)}function C2(t){var e=Ps();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bf,lastRenderedState:t},e.queue=t,t=t.dispatch=NH.bind(null,Kt,t),[e.memoizedState,t]}function zf(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function $D(){return Ur().memoizedState}function qg(t,e,n,i){var r=Ps();Kt.flags|=t,r.memoizedState=zf(1|e,n,void 0,i===void 0?null:i)}function S0(t,e,n,i){var r=Ur();i=i===void 0?null:i;var s=void 0;if(hn!==null){var o=hn.memoizedState;if(s=o.destroy,i!==null&&eC(i,o.deps)){r.memoizedState=zf(e,n,s,i);return}}Kt.flags|=t,r.memoizedState=zf(1|e,n,s,i)}function E2(t,e){return qg(8390656,8,t,e)}function iC(t,e){return S0(2048,8,t,e)}function BD(t,e){return S0(4,2,t,e)}function zD(t,e){return S0(4,4,t,e)}function UD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function HD(t,e,n){return n=n!=null?n.concat([t]):null,S0(4,4,UD.bind(null,e,t),n)}function rC(){}function VD(t,e){var n=Ur();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&eC(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function WD(t,e){var n=Ur();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&eC(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function GD(t,e,n){return ku&21?(ps(n,e)||(n=ZI(),Kt.lanes|=n,Cu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fi=!0),t.memoizedState=n)}function RH(t,e){var n=yt;yt=n!==0&&4>n?n:4,t(!0);var i=cb.transition;cb.transition={};try{t(!1),e()}finally{yt=n,cb.transition=i}}function KD(){return Ur().memoizedState}function MH(t,e,n){var i=Ya(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},XD(t))qD(e,n);else if(n=TD(t,e,n,i),n!==null){var r=mi();hs(n,t,i,r),YD(n,e,i)}}function NH(t,e,n){var i=Ya(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(XD(t))qD(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ps(a,o)){var l=e.interleaved;l===null?(r.next=r,qk(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=TD(t,e,r,i),n!==null&&(r=mi(),hs(n,t,i,r),YD(n,e,i))}}function XD(t){var e=t.alternate;return t===Kt||e!==null&&e===Kt}function qD(t,e){rf=ty=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function YD(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Dk(t,n)}}var ny={readContext:zr,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useInsertionEffect:Kn,useLayoutEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useMutableSource:Kn,useSyncExternalStore:Kn,useId:Kn,unstable_isNewReconciler:!1},OH={readContext:zr,useCallback:function(t,e){return Ps().memoizedState=[t,e===void 0?null:e],t},useContext:zr,useEffect:E2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qg(4194308,4,UD.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qg(4194308,4,t,e)},useInsertionEffect:function(t,e){return qg(4,2,t,e)},useMemo:function(t,e){var n=Ps();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ps();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=MH.bind(null,Kt,t),[i.memoizedState,t]},useRef:function(t){var e=Ps();return t={current:t},e.memoizedState=t},useState:C2,useDebugValue:rC,useDeferredValue:function(t){return Ps().memoizedState=t},useTransition:function(){var t=C2(!1),e=t[0];return t=RH.bind(null,t[1]),Ps().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Kt,r=Ps();if(zt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),Tn===null)throw Error(oe(349));ku&30||ID(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,E2(LD.bind(null,i,s,t),[t]),i.flags|=2048,zf(9,DD.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ps(),e=Tn.identifierPrefix;if(zt){var n=No,i=Mo;n=(i&~(1<<32-ds(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=$f++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=TH++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IH={readContext:zr,useCallback:VD,useContext:zr,useEffect:iC,useImperativeHandle:HD,useInsertionEffect:BD,useLayoutEffect:zD,useMemo:WD,useReducer:db,useRef:$D,useState:function(){return db(Bf)},useDebugValue:rC,useDeferredValue:function(t){var e=Ur();return GD(e,hn.memoizedState,t)},useTransition:function(){var t=db(Bf)[0],e=Ur().memoizedState;return[t,e]},useMutableSource:ND,useSyncExternalStore:OD,useId:KD,unstable_isNewReconciler:!1},DH={readContext:zr,useCallback:VD,useContext:zr,useEffect:iC,useImperativeHandle:HD,useInsertionEffect:BD,useLayoutEffect:zD,useMemo:WD,useReducer:hb,useRef:$D,useState:function(){return hb(Bf)},useDebugValue:rC,useDeferredValue:function(t){var e=Ur();return hn===null?e.memoizedState=t:GD(e,hn.memoizedState,t)},useTransition:function(){var t=hb(Bf)[0],e=Ur().memoizedState;return[t,e]},useMutableSource:ND,useSyncExternalStore:OD,useId:KD,unstable_isNewReconciler:!1};function Zr(t,e){if(t&&t.defaultProps){e=Xt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Kx(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Xt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _0={isMounted:function(t){return(t=t._reactInternals)?Wu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=mi(),r=Ya(t),s=Io(i,r);s.payload=e,n!=null&&(s.callback=n),e=Xa(t,s,r),e!==null&&(hs(e,t,r,i),Kg(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=mi(),r=Ya(t),s=Io(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Xa(t,s,r),e!==null&&(hs(e,t,r,i),Kg(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mi(),i=Ya(t),r=Io(n,i);r.tag=2,e!=null&&(r.callback=e),e=Xa(t,r,i),e!==null&&(hs(e,t,i,n),Kg(e,t,i))}};function A2(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Of(n,i)||!Of(r,s):!0}function ZD(t,e,n){var i=!1,r=nl,s=e.contextType;return typeof s=="object"&&s!==null?s=zr(s):(r=zi(e)?Su:ei.current,i=e.contextTypes,s=(i=i!=null)?gd(t,r):nl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_0,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function P2(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&_0.enqueueReplaceState(e,e.state,null)}function Xx(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Yk(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=zr(s):(s=zi(e)?Su:ei.current,r.context=gd(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Kx(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&_0.enqueueReplaceState(r,r.state,null),Qv(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function bd(t,e){try{var n="",i=e;do n+=u9(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function fb(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var LH=typeof WeakMap=="function"?WeakMap:Map;function JD(t,e,n){n=Io(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ry||(ry=!0,sS=i),qx(t,e)},n}function QD(t,e,n){n=Io(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){qx(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){qx(t,e),typeof i!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function T2(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new LH;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=YH.bind(null,t,e,n),e.then(t,t))}function R2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function M2(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Io(-1,1),e.tag=2,Xa(n,e,1))),n.lanes|=1),t)}var jH=Xo.ReactCurrentOwner,Fi=!1;function di(t,e,n,i){e.child=t===null?PD(e,null,n,i):yd(e,t.child,n,i)}function N2(t,e,n,i,r){n=n.render;var s=e.ref;return Wc(e,r),i=tC(t,e,n,i,s,r),n=nC(),t!==null&&!Fi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Bo(t,e,r)):(zt&&n&&Hk(e),e.flags|=1,di(t,e,i,r),e.child)}function O2(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!hC(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,eL(t,e,s,i,r)):(t=Qg(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Of,n(o,i)&&t.ref===e.ref)return Bo(t,e,r)}return e.flags|=1,t=Za(s,i),t.ref=e.ref,t.return=e,e.child=t}function eL(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Of(s,i)&&t.ref===e.ref)if(Fi=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Fi=!0);else return e.lanes=t.lanes,Bo(t,e,r)}return Yx(t,e,n,i,r)}function tL(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(Ac,Yi),Yi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Mt(Ac,Yi),Yi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Mt(Ac,Yi),Yi|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Mt(Ac,Yi),Yi|=i;return di(t,e,r,n),e.child}function nL(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yx(t,e,n,i,r){var s=zi(n)?Su:ei.current;return s=gd(e,s),Wc(e,r),n=tC(t,e,n,i,s,r),i=nC(),t!==null&&!Fi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Bo(t,e,r)):(zt&&i&&Hk(e),e.flags|=1,di(t,e,n,r),e.child)}function I2(t,e,n,i,r){if(zi(n)){var s=!0;Xv(e)}else s=!1;if(Wc(e,r),e.stateNode===null)Yg(t,e),ZD(e,n,i),Xx(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=zr(u):(u=zi(n)?Su:ei.current,u=gd(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&P2(e,o,i,u),fa=!1;var h=e.memoizedState;o.state=h,Qv(e,i,o,r),l=e.memoizedState,a!==i||h!==l||Bi.current||fa?(typeof c=="function"&&(Kx(e,n,c,i),l=e.memoizedState),(a=fa||A2(e,n,a,i,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,RD(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Zr(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=zr(l):(l=zi(n)?Su:ei.current,l=gd(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&P2(e,o,i,l),fa=!1,h=e.memoizedState,o.state=h,Qv(e,i,o,r);var p=e.memoizedState;a!==d||h!==p||Bi.current||fa?(typeof f=="function"&&(Kx(e,n,f,i),p=e.memoizedState),(u=fa||A2(e,n,u,i,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return Zx(t,e,n,i,s,r)}function Zx(t,e,n,i,r,s){nL(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&w2(e,n,!1),Bo(t,e,s);i=e.stateNode,jH.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=yd(e,t.child,null,s),e.child=yd(e,null,a,s)):di(t,e,a,s),e.memoizedState=i.state,r&&w2(e,n,!0),e.child}function iL(t){var e=t.stateNode;e.pendingContext?y2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&y2(t,e.context,!1),Zk(t,e.containerInfo)}function D2(t,e,n,i,r){return vd(),Wk(r),e.flags|=256,di(t,e,n,i),e.child}var Jx={dehydrated:null,treeContext:null,retryLane:0};function Qx(t){return{baseLanes:t,cachePool:null,transitions:null}}function rL(t,e,n){var i=e.pendingProps,r=Wt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Mt(Wt,r&1),t===null)return Wx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=E0(o,i,0,null),t=mu(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Qx(n),e.memoizedState=Jx,t):sC(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return FH(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Za(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Za(a,s):(s=mu(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Qx(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Jx,i}return s=t.child,t=s.sibling,i=Za(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function sC(t,e){return e=E0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bm(t,e,n,i){return i!==null&&Wk(i),yd(e,t.child,null,n),t=sC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function FH(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=fb(Error(oe(422))),Bm(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=E0({mode:"visible",children:i.children},r,0,null),s=mu(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&yd(e,t.child,null,o),e.child.memoizedState=Qx(o),e.memoizedState=Jx,s);if(!(e.mode&1))return Bm(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(oe(419)),i=fb(s,i,void 0),Bm(t,e,o,i)}if(a=(o&t.childLanes)!==0,Fi||a){if(i=Tn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,$o(t,r),hs(i,t,r,-1))}return dC(),i=fb(Error(oe(421))),Bm(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=ZH.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,nr=Ka(r.nextSibling),or=e,zt=!0,ns=null,t!==null&&(kr[Cr++]=Mo,kr[Cr++]=No,kr[Cr++]=_u,Mo=t.id,No=t.overflow,_u=e),e=sC(e,i.children),e.flags|=4096,e)}function L2(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Gx(t.return,e,n)}function pb(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function sL(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(di(t,e,i.children,n),i=Wt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&L2(t,n,e);else if(t.tag===19)L2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Mt(Wt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&ey(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),pb(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&ey(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}pb(e,!0,n,null,s);break;case"together":pb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=Za(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Za(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $H(t,e,n){switch(e.tag){case 3:iL(e),vd();break;case 5:MD(e);break;case 1:zi(e.type)&&Xv(e);break;case 4:Zk(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Mt(Zv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Mt(Wt,Wt.current&1),e.flags|=128,null):n&e.child.childLanes?rL(t,e,n):(Mt(Wt,Wt.current&1),t=Bo(t,e,n),t!==null?t.sibling:null);Mt(Wt,Wt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return sL(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Mt(Wt,Wt.current),i)break;return null;case 22:case 23:return e.lanes=0,tL(t,e,n)}return Bo(t,e,n)}var oL,eS,aL,lL;oL=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};eS=function(){};aL=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,lu(Ys.current);var s=null;switch(n){case"input":r=Sx(t,r),i=Sx(t,i),s=[];break;case"select":r=Xt({},r,{value:void 0}),i=Xt({},i,{value:void 0}),s=[];break;case"textarea":r=Cx(t,r),i=Cx(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Gv)}Ax(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ef.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ef.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ot("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};lL=function(t,e,n,i){n!==i&&(e.flags|=4)};function uh(t,e){if(!zt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Xn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function BH(t,e,n){var i=e.pendingProps;switch(Vk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xn(e),null;case 1:return zi(e.type)&&Kv(),Xn(e),null;case 3:return i=e.stateNode,wd(),Lt(Bi),Lt(ei),Qk(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Fm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ns!==null&&(lS(ns),ns=null))),eS(t,e),Xn(e),null;case 5:Jk(e);var r=lu(Ff.current);if(n=e.type,t!==null&&e.stateNode!=null)aL(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(oe(166));return Xn(e),null}if(t=lu(Ys.current),Fm(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Fs]=e,i[Lf]=s,t=(e.mode&1)!==0,n){case"dialog":Ot("cancel",i),Ot("close",i);break;case"iframe":case"object":case"embed":Ot("load",i);break;case"video":case"audio":for(r=0;r<Ih.length;r++)Ot(Ih[r],i);break;case"source":Ot("error",i);break;case"img":case"image":case"link":Ot("error",i),Ot("load",i);break;case"details":Ot("toggle",i);break;case"input":WP(i,s),Ot("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ot("invalid",i);break;case"textarea":KP(i,s),Ot("invalid",i)}Ax(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&jm(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&jm(i.textContent,a,t),r=["children",""+a]):Ef.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ot("scroll",i)}switch(n){case"input":Tm(i),GP(i,s,!0);break;case"textarea":Tm(i),XP(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Gv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=LI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Fs]=e,t[Lf]=i,oL(t,e,!1,!1),e.stateNode=t;e:{switch(o=Px(n,i),n){case"dialog":Ot("cancel",t),Ot("close",t),r=i;break;case"iframe":case"object":case"embed":Ot("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ih.length;r++)Ot(Ih[r],t);r=i;break;case"source":Ot("error",t),r=i;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),r=i;break;case"details":Ot("toggle",t),r=i;break;case"input":WP(t,i),r=Sx(t,i),Ot("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Xt({},i,{value:void 0}),Ot("invalid",t);break;case"textarea":KP(t,i),r=Cx(t,i),Ot("invalid",t);break;default:r=i}Ax(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?$I(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&jI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Af(t,l):typeof l=="number"&&Af(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ef.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ot("scroll",t):l!=null&&Tk(t,s,l,o))}switch(n){case"input":Tm(t),GP(t,i,!1);break;case"textarea":Tm(t),XP(t);break;case"option":i.value!=null&&t.setAttribute("value",""+tl(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?zc(t,!!i.multiple,s,!1):i.defaultValue!=null&&zc(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Gv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xn(e),null;case 6:if(t&&e.stateNode!=null)lL(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(oe(166));if(n=lu(Ff.current),lu(Ys.current),Fm(e)){if(i=e.stateNode,n=e.memoizedProps,i[Fs]=e,(s=i.nodeValue!==n)&&(t=or,t!==null))switch(t.tag){case 3:jm(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jm(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Fs]=e,e.stateNode=i}return Xn(e),null;case 13:if(Lt(Wt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(zt&&nr!==null&&e.mode&1&&!(e.flags&128))ED(),vd(),e.flags|=98560,s=!1;else if(s=Fm(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[Fs]=e}else vd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xn(e),s=!1}else ns!==null&&(lS(ns),ns=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Wt.current&1?wn===0&&(wn=3):dC())),e.updateQueue!==null&&(e.flags|=4),Xn(e),null);case 4:return wd(),eS(t,e),t===null&&If(e.stateNode.containerInfo),Xn(e),null;case 10:return Xk(e.type._context),Xn(e),null;case 17:return zi(e.type)&&Kv(),Xn(e),null;case 19:if(Lt(Wt),s=e.memoizedState,s===null)return Xn(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)uh(s,!1);else{if(wn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ey(t),o!==null){for(e.flags|=128,uh(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Mt(Wt,Wt.current&1|2),e.child}t=t.sibling}s.tail!==null&&en()>xd&&(e.flags|=128,i=!0,uh(s,!1),e.lanes=4194304)}else{if(!i)if(t=ey(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),uh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!zt)return Xn(e),null}else 2*en()-s.renderingStartTime>xd&&n!==1073741824&&(e.flags|=128,i=!0,uh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=en(),e.sibling=null,n=Wt.current,Mt(Wt,i?n&1|2:n&1),e):(Xn(e),null);case 22:case 23:return cC(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Yi&1073741824&&(Xn(e),e.subtreeFlags&6&&(e.flags|=8192)):Xn(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function zH(t,e){switch(Vk(e),e.tag){case 1:return zi(e.type)&&Kv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wd(),Lt(Bi),Lt(ei),Qk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jk(e),null;case 13:if(Lt(Wt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));vd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Lt(Wt),null;case 4:return wd(),null;case 10:return Xk(e.type._context),null;case 22:case 23:return cC(),null;case 24:return null;default:return null}}var zm=!1,Zn=!1,UH=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Ec(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Yt(t,e,i)}else n.current=null}function tS(t,e,n){try{n()}catch(i){Yt(t,e,i)}}var j2=!1;function HH(t,e){if(Fx=Hv,t=fD(),Uk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===r&&(a=o),h===s&&++c===i&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for($x={focusedElem:t,selectionRange:n},Hv=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,w=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:Zr(e.type,m),w);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(_){Yt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return p=j2,j2=!1,p}function sf(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&tS(e,n,s)}r=r.next}while(r!==i)}}function k0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function nS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function uL(t){var e=t.alternate;e!==null&&(t.alternate=null,uL(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fs],delete e[Lf],delete e[Ux],delete e[CH],delete e[EH])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cL(t){return t.tag===5||t.tag===3||t.tag===4}function F2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cL(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function iS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gv));else if(i!==4&&(t=t.child,t!==null))for(iS(t,e,n),t=t.sibling;t!==null;)iS(t,e,n),t=t.sibling}function rS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(rS(t,e,n),t=t.sibling;t!==null;)rS(t,e,n),t=t.sibling}var In=null,ts=!1;function na(t,e,n){for(n=n.child;n!==null;)dL(t,e,n),n=n.sibling}function dL(t,e,n){if(qs&&typeof qs.onCommitFiberUnmount=="function")try{qs.onCommitFiberUnmount(g0,n)}catch{}switch(n.tag){case 5:Zn||Ec(n,e);case 6:var i=In,r=ts;In=null,na(t,e,n),In=i,ts=r,In!==null&&(ts?(t=In,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):In.removeChild(n.stateNode));break;case 18:In!==null&&(ts?(t=In,n=n.stateNode,t.nodeType===8?ab(t.parentNode,n):t.nodeType===1&&ab(t,n),Mf(t)):ab(In,n.stateNode));break;case 4:i=In,r=ts,In=n.stateNode.containerInfo,ts=!0,na(t,e,n),In=i,ts=r;break;case 0:case 11:case 14:case 15:if(!Zn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&tS(n,e,o),r=r.next}while(r!==i)}na(t,e,n);break;case 1:if(!Zn&&(Ec(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Yt(n,e,a)}na(t,e,n);break;case 21:na(t,e,n);break;case 22:n.mode&1?(Zn=(i=Zn)||n.memoizedState!==null,na(t,e,n),Zn=i):na(t,e,n);break;default:na(t,e,n)}}function $2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new UH),e.forEach(function(i){var r=JH.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Gr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:In=a.stateNode,ts=!1;break e;case 3:In=a.stateNode.containerInfo,ts=!0;break e;case 4:In=a.stateNode.containerInfo,ts=!0;break e}a=a.return}if(In===null)throw Error(oe(160));dL(s,o,r),In=null,ts=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Yt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hL(e,t),e=e.sibling}function hL(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gr(e,t),_s(t),i&4){try{sf(3,t,t.return),k0(3,t)}catch(m){Yt(t,t.return,m)}try{sf(5,t,t.return)}catch(m){Yt(t,t.return,m)}}break;case 1:Gr(e,t),_s(t),i&512&&n!==null&&Ec(n,n.return);break;case 5:if(Gr(e,t),_s(t),i&512&&n!==null&&Ec(n,n.return),t.flags&32){var r=t.stateNode;try{Af(r,"")}catch(m){Yt(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&II(r,s),Px(a,o);var u=Px(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?$I(r,d):c==="dangerouslySetInnerHTML"?jI(r,d):c==="children"?Af(r,d):Tk(r,c,d,u)}switch(a){case"input":_x(r,s);break;case"textarea":DI(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?zc(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?zc(r,!!s.multiple,s.defaultValue,!0):zc(r,!!s.multiple,s.multiple?[]:"",!1))}r[Lf]=s}catch(m){Yt(t,t.return,m)}}break;case 6:if(Gr(e,t),_s(t),i&4){if(t.stateNode===null)throw Error(oe(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){Yt(t,t.return,m)}}break;case 3:if(Gr(e,t),_s(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Mf(e.containerInfo)}catch(m){Yt(t,t.return,m)}break;case 4:Gr(e,t),_s(t);break;case 13:Gr(e,t),_s(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(lC=en())),i&4&&$2(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Zn=(u=Zn)||c,Gr(e,t),Zn=u):Gr(e,t),_s(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Te=t,c=t.child;c!==null;){for(d=Te=c;Te!==null;){switch(h=Te,f=h.child,h.tag){case 0:case 11:case 14:case 15:sf(4,h,h.return);break;case 1:Ec(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Yt(i,n,m)}}break;case 5:Ec(h,h.return);break;case 22:if(h.memoizedState!==null){z2(d);continue}}f!==null?(f.return=h,Te=f):z2(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=FI("display",o))}catch(m){Yt(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Yt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Gr(e,t),_s(t),i&4&&$2(t);break;case 21:break;default:Gr(e,t),_s(t)}}function _s(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cL(n)){var i=n;break e}n=n.return}throw Error(oe(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Af(r,""),i.flags&=-33);var s=F2(t);rS(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=F2(t);iS(t,a,o);break;default:throw Error(oe(161))}}catch(l){Yt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function VH(t,e,n){Te=t,fL(t)}function fL(t,e,n){for(var i=(t.mode&1)!==0;Te!==null;){var r=Te,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||zm;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Zn;a=zm;var u=Zn;if(zm=o,(Zn=l)&&!u)for(Te=r;Te!==null;)o=Te,l=o.child,o.tag===22&&o.memoizedState!==null?U2(r):l!==null?(l.return=o,Te=l):U2(r);for(;s!==null;)Te=s,fL(s),s=s.sibling;Te=r,zm=a,Zn=u}B2(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Te=s):B2(t)}}function B2(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zn||k0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Zn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Zr(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&k2(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}k2(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Mf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}Zn||e.flags&512&&nS(e)}catch(h){Yt(e,e.return,h)}}if(e===t){Te=null;break}if(n=e.sibling,n!==null){n.return=e.return,Te=n;break}Te=e.return}}function z2(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Te=n;break}Te=e.return}}function U2(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{k0(4,e)}catch(l){Yt(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Yt(e,r,l)}}var s=e.return;try{nS(e)}catch(l){Yt(e,s,l)}break;case 5:var o=e.return;try{nS(e)}catch(l){Yt(e,o,l)}}}catch(l){Yt(e,e.return,l)}if(e===t){Te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Te=a;break}Te=e.return}}var WH=Math.ceil,iy=Xo.ReactCurrentDispatcher,oC=Xo.ReactCurrentOwner,Dr=Xo.ReactCurrentBatchConfig,dt=0,Tn=null,ln=null,Vn=0,Yi=0,Ac=_l(0),wn=0,Uf=null,Cu=0,C0=0,aC=0,of=null,Ni=null,lC=0,xd=1/0,mo=null,ry=!1,sS=null,qa=null,Um=!1,Ma=null,sy=0,af=0,oS=null,Zg=-1,Jg=0;function mi(){return dt&6?en():Zg!==-1?Zg:Zg=en()}function Ya(t){return t.mode&1?dt&2&&Vn!==0?Vn&-Vn:PH.transition!==null?(Jg===0&&(Jg=ZI()),Jg):(t=yt,t!==0||(t=window.event,t=t===void 0?16:rD(t.type)),t):1}function hs(t,e,n,i){if(50<af)throw af=0,oS=null,Error(oe(185));Fp(t,n,i),(!(dt&2)||t!==Tn)&&(t===Tn&&(!(dt&2)&&(C0|=n),wn===4&&ba(t,Vn)),Ui(t,i),n===1&&dt===0&&!(e.mode&1)&&(xd=en()+500,x0&&kl()))}function Ui(t,e){var n=t.callbackNode;P9(t,e);var i=Uv(t,t===Tn?Vn:0);if(i===0)n!==null&&ZP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&ZP(n),e===1)t.tag===0?AH(H2.bind(null,t)):_D(H2.bind(null,t)),_H(function(){!(dt&6)&&kl()}),n=null;else{switch(JI(i)){case 1:n=Ik;break;case 4:n=qI;break;case 16:n=zv;break;case 536870912:n=YI;break;default:n=zv}n=xL(n,pL.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pL(t,e){if(Zg=-1,Jg=0,dt&6)throw Error(oe(327));var n=t.callbackNode;if(Gc()&&t.callbackNode!==n)return null;var i=Uv(t,t===Tn?Vn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=oy(t,i);else{e=i;var r=dt;dt|=2;var s=gL();(Tn!==t||Vn!==e)&&(mo=null,xd=en()+500,pu(t,e));do try{XH();break}catch(a){mL(t,a)}while(!0);Kk(),iy.current=s,dt=r,ln!==null?e=0:(Tn=null,Vn=0,e=wn)}if(e!==0){if(e===2&&(r=Ox(t),r!==0&&(i=r,e=aS(t,r))),e===1)throw n=Uf,pu(t,0),ba(t,i),Ui(t,en()),n;if(e===6)ba(t,i);else{if(r=t.current.alternate,!(i&30)&&!GH(r)&&(e=oy(t,i),e===2&&(s=Ox(t),s!==0&&(i=s,e=aS(t,s))),e===1))throw n=Uf,pu(t,0),ba(t,i),Ui(t,en()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(oe(345));case 2:Kl(t,Ni,mo);break;case 3:if(ba(t,i),(i&130023424)===i&&(e=lC+500-en(),10<e)){if(Uv(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){mi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=zx(Kl.bind(null,t,Ni,mo),e);break}Kl(t,Ni,mo);break;case 4:if(ba(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-ds(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=en()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*WH(i/1960))-i,10<i){t.timeoutHandle=zx(Kl.bind(null,t,Ni,mo),i);break}Kl(t,Ni,mo);break;case 5:Kl(t,Ni,mo);break;default:throw Error(oe(329))}}}return Ui(t,en()),t.callbackNode===n?pL.bind(null,t):null}function aS(t,e){var n=of;return t.current.memoizedState.isDehydrated&&(pu(t,e).flags|=256),t=oy(t,e),t!==2&&(e=Ni,Ni=n,e!==null&&lS(e)),t}function lS(t){Ni===null?Ni=t:Ni.push.apply(Ni,t)}function GH(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ps(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ba(t,e){for(e&=~aC,e&=~C0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ds(e),i=1<<n;t[n]=-1,e&=~i}}function H2(t){if(dt&6)throw Error(oe(327));Gc();var e=Uv(t,0);if(!(e&1))return Ui(t,en()),null;var n=oy(t,e);if(t.tag!==0&&n===2){var i=Ox(t);i!==0&&(e=i,n=aS(t,i))}if(n===1)throw n=Uf,pu(t,0),ba(t,e),Ui(t,en()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Kl(t,Ni,mo),Ui(t,en()),null}function uC(t,e){var n=dt;dt|=1;try{return t(e)}finally{dt=n,dt===0&&(xd=en()+500,x0&&kl())}}function Eu(t){Ma!==null&&Ma.tag===0&&!(dt&6)&&Gc();var e=dt;dt|=1;var n=Dr.transition,i=yt;try{if(Dr.transition=null,yt=1,t)return t()}finally{yt=i,Dr.transition=n,dt=e,!(dt&6)&&kl()}}function cC(){Yi=Ac.current,Lt(Ac)}function pu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,SH(n)),ln!==null)for(n=ln.return;n!==null;){var i=n;switch(Vk(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Kv();break;case 3:wd(),Lt(Bi),Lt(ei),Qk();break;case 5:Jk(i);break;case 4:wd();break;case 13:Lt(Wt);break;case 19:Lt(Wt);break;case 10:Xk(i.type._context);break;case 22:case 23:cC()}n=n.return}if(Tn=t,ln=t=Za(t.current,null),Vn=Yi=e,wn=0,Uf=null,aC=C0=Cu=0,Ni=of=null,au!==null){for(e=0;e<au.length;e++)if(n=au[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}au=null}return t}function mL(t,e){do{var n=ln;try{if(Kk(),Xg.current=ny,ty){for(var i=Kt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ty=!1}if(ku=0,Pn=hn=Kt=null,rf=!1,$f=0,oC.current=null,n===null||n.return===null){wn=1,Uf=e,ln=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Vn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=R2(o);if(f!==null){f.flags&=-257,M2(f,o,a,s,e),f.mode&1&&T2(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){T2(s,u,e),dC();break e}l=Error(oe(426))}}else if(zt&&a.mode&1){var w=R2(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),M2(w,o,a,s,e),Wk(bd(l,a));break e}}s=l=bd(l,a),wn!==4&&(wn=2),of===null?of=[s]:of.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=JD(s,l,e);_2(s,v);break e;case 1:a=l;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(qa===null||!qa.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=QD(s,a,e);_2(s,_);break e}}s=s.return}while(s!==null)}yL(n)}catch(k){e=k,ln===n&&n!==null&&(ln=n=n.return);continue}break}while(!0)}function gL(){var t=iy.current;return iy.current=ny,t===null?ny:t}function dC(){(wn===0||wn===3||wn===2)&&(wn=4),Tn===null||!(Cu&268435455)&&!(C0&268435455)||ba(Tn,Vn)}function oy(t,e){var n=dt;dt|=2;var i=gL();(Tn!==t||Vn!==e)&&(mo=null,pu(t,e));do try{KH();break}catch(r){mL(t,r)}while(!0);if(Kk(),dt=n,iy.current=i,ln!==null)throw Error(oe(261));return Tn=null,Vn=0,wn}function KH(){for(;ln!==null;)vL(ln)}function XH(){for(;ln!==null&&!w9();)vL(ln)}function vL(t){var e=bL(t.alternate,t,Yi);t.memoizedProps=t.pendingProps,e===null?yL(t):ln=e,oC.current=null}function yL(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zH(n,e),n!==null){n.flags&=32767,ln=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wn=6,ln=null;return}}else if(n=BH(n,e,Yi),n!==null){ln=n;return}if(e=e.sibling,e!==null){ln=e;return}ln=e=t}while(e!==null);wn===0&&(wn=5)}function Kl(t,e,n){var i=yt,r=Dr.transition;try{Dr.transition=null,yt=1,qH(t,e,n,i)}finally{Dr.transition=r,yt=i}return null}function qH(t,e,n,i){do Gc();while(Ma!==null);if(dt&6)throw Error(oe(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(T9(t,s),t===Tn&&(ln=Tn=null,Vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Um||(Um=!0,xL(zv,function(){return Gc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dr.transition,Dr.transition=null;var o=yt;yt=1;var a=dt;dt|=4,oC.current=null,HH(t,n),hL(n,t),mH($x),Hv=!!Fx,$x=Fx=null,t.current=n,VH(n),b9(),dt=a,yt=o,Dr.transition=s}else t.current=n;if(Um&&(Um=!1,Ma=t,sy=r),s=t.pendingLanes,s===0&&(qa=null),_9(n.stateNode),Ui(t,en()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ry)throw ry=!1,t=sS,sS=null,t;return sy&1&&t.tag!==0&&Gc(),s=t.pendingLanes,s&1?t===oS?af++:(af=0,oS=t):af=0,kl(),null}function Gc(){if(Ma!==null){var t=JI(sy),e=Dr.transition,n=yt;try{if(Dr.transition=null,yt=16>t?16:t,Ma===null)var i=!1;else{if(t=Ma,Ma=null,sy=0,dt&6)throw Error(oe(331));var r=dt;for(dt|=4,Te=t.current;Te!==null;){var s=Te,o=s.child;if(Te.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Te=u;Te!==null;){var c=Te;switch(c.tag){case 0:case 11:case 15:sf(8,c,s)}var d=c.child;if(d!==null)d.return=c,Te=d;else for(;Te!==null;){c=Te;var h=c.sibling,f=c.return;if(uL(c),c===u){Te=null;break}if(h!==null){h.return=f,Te=h;break}Te=f}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}Te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Te=o;else e:for(;Te!==null;){if(s=Te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:sf(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Te=v;break e}Te=s.return}}var y=t.current;for(Te=y;Te!==null;){o=Te;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Te=b;else e:for(o=y;Te!==null;){if(a=Te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:k0(9,a)}}catch(k){Yt(a,a.return,k)}if(a===o){Te=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Te=_;break e}Te=a.return}}if(dt=r,kl(),qs&&typeof qs.onPostCommitFiberRoot=="function")try{qs.onPostCommitFiberRoot(g0,t)}catch{}i=!0}return i}finally{yt=n,Dr.transition=e}}return!1}function V2(t,e,n){e=bd(n,e),e=JD(t,e,1),t=Xa(t,e,1),e=mi(),t!==null&&(Fp(t,1,e),Ui(t,e))}function Yt(t,e,n){if(t.tag===3)V2(t,t,n);else for(;e!==null;){if(e.tag===3){V2(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(qa===null||!qa.has(i))){t=bd(n,t),t=QD(e,t,1),e=Xa(e,t,1),t=mi(),e!==null&&(Fp(e,1,t),Ui(e,t));break}}e=e.return}}function YH(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=mi(),t.pingedLanes|=t.suspendedLanes&n,Tn===t&&(Vn&n)===n&&(wn===4||wn===3&&(Vn&130023424)===Vn&&500>en()-lC?pu(t,0):aC|=n),Ui(t,e)}function wL(t,e){e===0&&(t.mode&1?(e=Nm,Nm<<=1,!(Nm&130023424)&&(Nm=4194304)):e=1);var n=mi();t=$o(t,e),t!==null&&(Fp(t,e,n),Ui(t,n))}function ZH(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wL(t,n)}function JH(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(oe(314))}i!==null&&i.delete(e),wL(t,n)}var bL;bL=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bi.current)Fi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fi=!1,$H(t,e,n);Fi=!!(t.flags&131072)}else Fi=!1,zt&&e.flags&1048576&&kD(e,Yv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Yg(t,e),t=e.pendingProps;var r=gd(e,ei.current);Wc(e,n),r=tC(null,e,i,t,r,n);var s=nC();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zi(i)?(s=!0,Xv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Yk(e),r.updater=_0,e.stateNode=r,r._reactInternals=e,Xx(e,i,t,n),e=Zx(null,e,i,!0,s,n)):(e.tag=0,zt&&s&&Hk(e),di(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Yg(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=eV(i),t=Zr(i,t),r){case 0:e=Yx(null,e,i,t,n);break e;case 1:e=I2(null,e,i,t,n);break e;case 11:e=N2(null,e,i,t,n);break e;case 14:e=O2(null,e,i,Zr(i.type,t),n);break e}throw Error(oe(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zr(i,r),Yx(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zr(i,r),I2(t,e,i,r,n);case 3:e:{if(iL(e),t===null)throw Error(oe(387));i=e.pendingProps,s=e.memoizedState,r=s.element,RD(t,e),Qv(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=bd(Error(oe(423)),e),e=D2(t,e,i,n,r);break e}else if(i!==r){r=bd(Error(oe(424)),e),e=D2(t,e,i,n,r);break e}else for(nr=Ka(e.stateNode.containerInfo.firstChild),or=e,zt=!0,ns=null,n=PD(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vd(),i===r){e=Bo(t,e,n);break e}di(t,e,i,n)}e=e.child}return e;case 5:return MD(e),t===null&&Wx(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Bx(i,r)?o=null:s!==null&&Bx(i,s)&&(e.flags|=32),nL(t,e),di(t,e,o,n),e.child;case 6:return t===null&&Wx(e),null;case 13:return rL(t,e,n);case 4:return Zk(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=yd(e,null,i,n):di(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zr(i,r),N2(t,e,i,r,n);case 7:return di(t,e,e.pendingProps,n),e.child;case 8:return di(t,e,e.pendingProps.children,n),e.child;case 12:return di(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Mt(Zv,i._currentValue),i._currentValue=o,s!==null)if(ps(s.value,o)){if(s.children===r.children&&!Bi.current){e=Bo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Io(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Gx(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Gx(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}di(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Wc(e,n),r=zr(r),i=i(r),e.flags|=1,di(t,e,i,n),e.child;case 14:return i=e.type,r=Zr(i,e.pendingProps),r=Zr(i.type,r),O2(t,e,i,r,n);case 15:return eL(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Zr(i,r),Yg(t,e),e.tag=1,zi(i)?(t=!0,Xv(e)):t=!1,Wc(e,n),ZD(e,i,r),Xx(e,i,r,n),Zx(null,e,i,!0,t,n);case 19:return sL(t,e,n);case 22:return tL(t,e,n)}throw Error(oe(156,e.tag))};function xL(t,e){return XI(t,e)}function QH(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(t,e,n,i){return new QH(t,e,n,i)}function hC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eV(t){if(typeof t=="function")return hC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mk)return 11;if(t===Nk)return 14}return 2}function Za(t,e){var n=t.alternate;return n===null?(n=Rr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qg(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")hC(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vc:return mu(n.children,r,s,e);case Rk:o=8,r|=8;break;case yx:return t=Rr(12,n,e,r|2),t.elementType=yx,t.lanes=s,t;case wx:return t=Rr(13,n,e,r),t.elementType=wx,t.lanes=s,t;case bx:return t=Rr(19,n,e,r),t.elementType=bx,t.lanes=s,t;case MI:return E0(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case TI:o=10;break e;case RI:o=9;break e;case Mk:o=11;break e;case Nk:o=14;break e;case ha:o=16,i=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=Rr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function mu(t,e,n,i){return t=Rr(7,t,i,e),t.lanes=n,t}function E0(t,e,n,i){return t=Rr(22,t,i,e),t.elementType=MI,t.lanes=n,t.stateNode={isHidden:!1},t}function mb(t,e,n){return t=Rr(6,t,null,e),t.lanes=n,t}function gb(t,e,n){return e=Rr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tV(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yw(0),this.expirationTimes=Yw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yw(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function fC(t,e,n,i,r,s,o,a,l){return t=new tV(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Rr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yk(s),t}function nV(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gc,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function SL(t){if(!t)return nl;t=t._reactInternals;e:{if(Wu(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(zi(n))return SD(t,n,e)}return e}function _L(t,e,n,i,r,s,o,a,l){return t=fC(n,i,!0,t,r,s,o,a,l),t.context=SL(null),n=t.current,i=mi(),r=Ya(n),s=Io(i,r),s.callback=e??null,Xa(n,s,r),t.current.lanes=r,Fp(t,r,i),Ui(t,i),t}function A0(t,e,n,i){var r=e.current,s=mi(),o=Ya(r);return n=SL(n),e.context===null?e.context=n:e.pendingContext=n,e=Io(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Xa(r,e,o),t!==null&&(hs(t,r,o,s),Kg(t,r,o)),o}function ay(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function W2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pC(t,e){W2(t,e),(t=t.alternate)&&W2(t,e)}function iV(){return null}var kL=typeof reportError=="function"?reportError:function(t){console.error(t)};function mC(t){this._internalRoot=t}P0.prototype.render=mC.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));A0(t,e,null,null)};P0.prototype.unmount=mC.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Eu(function(){A0(null,t,null,null)}),e[Fo]=null}};function P0(t){this._internalRoot=t}P0.prototype.unstable_scheduleHydration=function(t){if(t){var e=tD();t={blockedOn:null,target:t,priority:e};for(var n=0;n<wa.length&&e!==0&&e<wa[n].priority;n++);wa.splice(n,0,t),n===0&&iD(t)}};function gC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function T0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function G2(){}function rV(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=ay(o);s.call(u)}}var o=_L(e,i,t,0,null,!1,!1,"",G2);return t._reactRootContainer=o,t[Fo]=o.current,If(t.nodeType===8?t.parentNode:t),Eu(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=ay(l);a.call(u)}}var l=fC(t,0,!1,null,null,!1,!1,"",G2);return t._reactRootContainer=l,t[Fo]=l.current,If(t.nodeType===8?t.parentNode:t),Eu(function(){A0(e,l,n,i)}),l}function R0(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=ay(o);a.call(l)}}A0(e,o,t,r)}else o=rV(n,e,t,r,i);return ay(o)}QI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Oh(e.pendingLanes);n!==0&&(Dk(e,n|1),Ui(e,en()),!(dt&6)&&(xd=en()+500,kl()))}break;case 13:Eu(function(){var i=$o(t,1);if(i!==null){var r=mi();hs(i,t,1,r)}}),pC(t,1)}};Lk=function(t){if(t.tag===13){var e=$o(t,134217728);if(e!==null){var n=mi();hs(e,t,134217728,n)}pC(t,134217728)}};eD=function(t){if(t.tag===13){var e=Ya(t),n=$o(t,e);if(n!==null){var i=mi();hs(n,t,e,i)}pC(t,e)}};tD=function(){return yt};nD=function(t,e){var n=yt;try{return yt=t,e()}finally{yt=n}};Rx=function(t,e,n){switch(e){case"input":if(_x(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=b0(i);if(!r)throw Error(oe(90));OI(i),_x(i,r)}}}break;case"textarea":DI(t,n);break;case"select":e=n.value,e!=null&&zc(t,!!n.multiple,e,!1)}};UI=uC;HI=Eu;var sV={usingClientEntryPoint:!1,Events:[Bp,xc,b0,BI,zI,uC]},ch={findFiberByHostInstance:ou,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oV={bundleType:ch.bundleType,version:ch.version,rendererPackageName:ch.rendererPackageName,rendererConfig:ch.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=GI(t),t===null?null:t.stateNode},findFiberByHostInstance:ch.findFiberByHostInstance||iV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hm.isDisabled&&Hm.supportsFiber)try{g0=Hm.inject(oV),qs=Hm}catch{}}dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sV;dr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gC(e))throw Error(oe(200));return nV(t,e,null,n)};dr.createRoot=function(t,e){if(!gC(t))throw Error(oe(299));var n=!1,i="",r=kL;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=fC(t,1,!1,null,null,n,!1,i,r),t[Fo]=e.current,If(t.nodeType===8?t.parentNode:t),new mC(e)};dr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=GI(e),t=t===null?null:t.stateNode,t};dr.flushSync=function(t){return Eu(t)};dr.hydrate=function(t,e,n){if(!T0(e))throw Error(oe(200));return R0(null,t,e,!0,n)};dr.hydrateRoot=function(t,e,n){if(!gC(t))throw Error(oe(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=kL;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=_L(e,null,t,1,n??null,r,!1,s,o),t[Fo]=e.current,If(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new P0(e)};dr.render=function(t,e,n){if(!T0(e))throw Error(oe(200));return R0(null,t,e,!1,n)};dr.unmountComponentAtNode=function(t){if(!T0(t))throw Error(oe(40));return t._reactRootContainer?(Eu(function(){R0(null,null,t,!1,function(){t._reactRootContainer=null,t[Fo]=null})}),!0):!1};dr.unstable_batchedUpdates=uC;dr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!T0(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return R0(t,e,n,!1,i)};dr.version="18.3.1-next-f1338f8080-20240426";function CL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CL)}catch(t){console.error(t)}}CL(),CI.exports=dr;var Cl=CI.exports;const aV=Hu(Cl);var K2=Cl;gx.createRoot=K2.createRoot,gx.hydrateRoot=K2.hydrateRoot;function ve(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function El(t,e=[]){let n=[];function i(s,o){const a=x.createContext(o),l=n.length;n=[...n,o];const u=d=>{var v;const{scope:h,children:f,...p}=d,m=((v=h==null?void 0:h[t])==null?void 0:v[l])||a,w=x.useMemo(()=>p,Object.values(p));return g.jsx(m.Provider,{value:w,children:f})};u.displayName=s+"Provider";function c(d,h){var m;const f=((m=h==null?void 0:h[t])==null?void 0:m[l])||a,p=x.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[u,c]}const r=()=>{const s=n.map(o=>x.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,lV(r,...e)]}function lV(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function vC(t,e=[]){let n=[];function i(s,o){const a=x.createContext(o),l=n.length;n=[...n,o];function u(d){const{scope:h,children:f,...p}=d,m=(h==null?void 0:h[t][l])||a,w=x.useMemo(()=>p,Object.values(p));return g.jsx(m.Provider,{value:w,children:f})}function c(d,h){const f=(h==null?void 0:h[t][l])||a,p=x.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const r=()=>{const s=n.map(o=>x.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,uV(r,...e)]}function uV(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function cV(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function M0(...t){return e=>t.forEach(n=>cV(n,e))}function ct(...t){return x.useCallback(M0(...t),t)}var Au=x.forwardRef((t,e)=>{const{children:n,...i}=t,r=x.Children.toArray(n),s=r.find(hV);if(s){const o=s.props.children,a=r.map(l=>l===s?x.Children.count(o)>1?x.Children.only(null):x.isValidElement(o)?o.props.children:null:l);return g.jsx(uS,{...i,ref:e,children:x.isValidElement(o)?x.cloneElement(o,void 0,a):null})}return g.jsx(uS,{...i,ref:e,children:n})});Au.displayName="Slot";var uS=x.forwardRef((t,e)=>{const{children:n,...i}=t;if(x.isValidElement(n)){const r=pV(n);return x.cloneElement(n,{...fV(i,n.props),ref:e?M0(e,r):r})}return x.Children.count(n)>1?x.Children.only(null):null});uS.displayName="SlotClone";var dV=({children:t})=>g.jsx(g.Fragment,{children:t});function hV(t){return x.isValidElement(t)&&t.type===dV}function fV(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function pV(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Up(t){const e=t+"CollectionProvider",[n,i]=vC(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:p,children:m}=f,w=on.useRef(null),v=on.useRef(new Map).current;return g.jsx(r,{scope:p,itemMap:v,collectionRef:w,children:m})};o.displayName=e;const a=t+"CollectionSlot",l=on.forwardRef((f,p)=>{const{scope:m,children:w}=f,v=s(a,m),y=ct(p,v.collectionRef);return g.jsx(Au,{ref:y,children:w})});l.displayName=a;const u=t+"CollectionItemSlot",c="data-radix-collection-item",d=on.forwardRef((f,p)=>{const{scope:m,children:w,...v}=f,y=on.useRef(null),b=ct(p,y),_=s(u,m);return on.useEffect(()=>(_.itemMap.set(y,{ref:y,...v}),()=>void _.itemMap.delete(y))),g.jsx(Au,{[c]:"",ref:b,children:w})});d.displayName=u;function h(f){const p=s(t+"CollectionConsumer",f);return on.useCallback(()=>{const w=p.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${c}]`));return Array.from(p.itemMap.values()).sort((_,k)=>v.indexOf(_.ref.current)-v.indexOf(k.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,i]}var ti=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},mV=gk.useId||(()=>{}),gV=0;function il(t){const[e,n]=x.useState(mV());return ti(()=>{n(i=>i??String(gV++))},[t]),e?`radix-${e}`:""}var vV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],He=vV.reduce((t,e)=>{const n=x.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?Au:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(a,{...o,ref:r})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function yC(t,e){t&&Cl.flushSync(()=>t.dispatchEvent(e))}function ni(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}function zo({prop:t,defaultProp:e,onChange:n=()=>{}}){const[i,r]=yV({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:i,a=ni(n),l=x.useCallback(u=>{if(s){const d=typeof u=="function"?u(t):u;d!==t&&a(d)}else r(u)},[s,t,r,a]);return[o,l]}function yV({defaultProp:t,onChange:e}){const n=x.useState(t),[i]=n,r=x.useRef(i),s=ni(e);return x.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}var wV=x.createContext(void 0);function Hp(t){const e=x.useContext(wV);return t||e||"ltr"}var vb="rovingFocusGroup.onEntryFocus",bV={bubbles:!1,cancelable:!0},N0="RovingFocusGroup",[cS,EL,xV]=Up(N0),[SV,O0]=vC(N0,[xV]),[_V,kV]=SV(N0),AL=x.forwardRef((t,e)=>g.jsx(cS.Provider,{scope:t.__scopeRovingFocusGroup,children:g.jsx(cS.Slot,{scope:t.__scopeRovingFocusGroup,children:g.jsx(CV,{...t,ref:e})})}));AL.displayName=N0;var CV=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:c=!1,...d}=t,h=x.useRef(null),f=ct(e,h),p=Hp(s),[m=null,w]=zo({prop:o,defaultProp:a,onChange:l}),[v,y]=x.useState(!1),b=ni(u),_=EL(n),k=x.useRef(!1),[C,E]=x.useState(0);return x.useEffect(()=>{const P=h.current;if(P)return P.addEventListener(vb,b),()=>P.removeEventListener(vb,b)},[b]),g.jsx(_V,{scope:n,orientation:i,dir:p,loop:r,currentTabStopId:m,onItemFocus:x.useCallback(P=>w(P),[w]),onItemShiftTab:x.useCallback(()=>y(!0),[]),onFocusableItemAdd:x.useCallback(()=>E(P=>P+1),[]),onFocusableItemRemove:x.useCallback(()=>E(P=>P-1),[]),children:g.jsx(He.div,{tabIndex:v||C===0?-1:0,"data-orientation":i,...d,ref:f,style:{outline:"none",...t.style},onMouseDown:ve(t.onMouseDown,()=>{k.current=!0}),onFocus:ve(t.onFocus,P=>{const M=!k.current;if(P.target===P.currentTarget&&M&&!v){const D=new CustomEvent(vb,bV);if(P.currentTarget.dispatchEvent(D),!D.defaultPrevented){const L=_().filter(ee=>ee.focusable),$=L.find(ee=>ee.active),G=L.find(ee=>ee.id===m),X=[$,G,...L].filter(Boolean).map(ee=>ee.ref.current);RL(X,c)}}k.current=!1}),onBlur:ve(t.onBlur,()=>y(!1))})})}),PL="RovingFocusGroupItem",TL=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,...o}=t,a=il(),l=s||a,u=kV(PL,n),c=u.currentTabStopId===l,d=EL(n),{onFocusableItemAdd:h,onFocusableItemRemove:f}=u;return x.useEffect(()=>{if(i)return h(),()=>f()},[i,h,f]),g.jsx(cS.ItemSlot,{scope:n,id:l,focusable:i,active:r,children:g.jsx(He.span,{tabIndex:c?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:ve(t.onMouseDown,p=>{i?u.onItemFocus(l):p.preventDefault()}),onFocus:ve(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:ve(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){u.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const m=PV(p,u.orientation,u.dir);if(m!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let v=d().filter(y=>y.focusable).map(y=>y.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const y=v.indexOf(p.currentTarget);v=u.loop?TV(v,y+1):v.slice(y+1)}setTimeout(()=>RL(v))}})})})});TL.displayName=PL;var EV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function AV(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function PV(t,e,n){const i=AV(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return EV[i]}function RL(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function TV(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var ML=AL,NL=TL;function RV(t,e){return x.useReducer((n,i)=>e[n][i]??n,t)}var qo=t=>{const{present:e,children:n}=t,i=MV(e),r=typeof n=="function"?n({present:i.isPresent}):x.Children.only(n),s=ct(i.ref,NV(r));return typeof n=="function"||i.isPresent?x.cloneElement(r,{ref:s}):null};qo.displayName="Presence";function MV(t){const[e,n]=x.useState(),i=x.useRef({}),r=x.useRef(t),s=x.useRef("none"),o=t?"mounted":"unmounted",[a,l]=RV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=Vm(i.current);s.current=a==="mounted"?u:"none"},[a]),ti(()=>{const u=i.current,c=r.current;if(c!==t){const h=s.current,f=Vm(u);t?l("MOUNT"):f==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&h!==f?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),ti(()=>{if(e){let u;const c=e.ownerDocument.defaultView??window,d=f=>{const m=Vm(i.current).includes(f.animationName);if(f.target===e&&m&&(l("ANIMATION_END"),!r.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",u=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},h=f=>{f.target===e&&(s.current=Vm(i.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{c.clearTimeout(u),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:x.useCallback(u=>{u&&(i.current=getComputedStyle(u)),n(u)},[])}}function Vm(t){return(t==null?void 0:t.animationName)||"none"}function NV(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var wC="Tabs",[OV,Ihe]=El(wC,[O0]),OL=O0(),[IV,bC]=OV(wC),IL=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=t,c=Hp(a),[d,h]=zo({prop:i,onChange:r,defaultProp:s});return g.jsx(IV,{scope:n,baseId:il(),value:d,onValueChange:h,orientation:o,dir:c,activationMode:l,children:g.jsx(He.div,{dir:c,"data-orientation":o,...u,ref:e})})});IL.displayName=wC;var DL="TabsList",LL=x.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=bC(DL,n),o=OL(n);return g.jsx(ML,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:g.jsx(He.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});LL.displayName=DL;var jL="TabsTrigger",dS=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=bC(jL,n),a=OL(n),l=$L(o.baseId,i),u=BL(o.baseId,i),c=i===o.value;return g.jsx(NL,{asChild:!0,...a,focusable:!r,active:c,children:g.jsx(He.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":u,"data-state":c?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:ve(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:ve(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:ve(t.onFocus,()=>{const d=o.activationMode!=="manual";!c&&!r&&d&&o.onValueChange(i)})})})});dS.displayName=jL;var FL="TabsContent",ev=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=bC(FL,n),l=$L(a.baseId,i),u=BL(a.baseId,i),c=i===a.value,d=x.useRef(c);return x.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),g.jsx(qo,{present:r||c,children:({present:h})=>g.jsx(He.div,{"data-state":c?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});ev.displayName=FL;function $L(t,e){return`${t}-trigger-${e}`}function BL(t,e){return`${t}-content-${e}`}const Er={BASE_URL:"/VonSim8/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};let DV=0;function me(t,e){const n=`atom${++DV}`,i={toString(){return(Er?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?i.read=t:(i.init=t,i.read=LV,i.write=jV),e&&(i.write=e),i}function LV(t){return t(this)}function jV(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const X2=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,yb=t=>"init"in t,wb=t=>!!t.write,ly=new WeakMap,hS=t=>{var e;return fS(t)&&!((e=ly.get(t))!=null&&e[1])},FV=(t,e)=>{const n=ly.get(t);if(n)n[1]=!0,n[0].forEach(i=>i(e));else if((Er?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},$V=t=>{if(ly.has(t))return;const e=[new Set,!1];ly.set(t,e);const n=()=>{e[1]=!0};t.then(n,n),t.onCancel=i=>{e[0].add(i)}},fS=t=>typeof(t==null?void 0:t.then)=="function",q2=t=>"v"in t||"e"in t,Wm=t=>{if("e"in t)throw t.e;if((Er?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},zL=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},Y2=(t,e,n,i,r)=>{var s;if((Er?"production":void 0)!=="production"&&i===e)throw new Error("[Bug] atom cannot depend on itself");n.d.set(i,r.n),hS(n.v)&&zL(e,n.v,r),(s=r.m)==null||s.t.add(e),t&&BV(t,i,e)},Zu=()=>[new Map,new Map,new Set],bb=(t,e,n)=>{t[0].has(e)||t[0].set(e,new Set),t[1].set(e,n)},BV=(t,e,n)=>{const i=t[0].get(e);i&&i.add(n)},zV=(t,e)=>t[0].get(e),Z2=(t,e)=>{t[2].add(e)},ia=t=>{let e,n=!1;const i=r=>{try{r()}catch(s){n||(e=s,n=!0)}};for(;t[1].size||t[2].size;){t[0].clear();const r=new Set(t[1].values());t[1].clear();const s=new Set(t[2]);t[2].clear(),r.forEach(o=>{var a;return(a=o.m)==null?void 0:a.l.forEach(i)}),s.forEach(i)}if(n)throw e},UL=(...[t,e,n,i])=>{let r;(Er?"production":void 0)!=="production"&&(r=new Set);const s=(b,_,k)=>{const C="v"in _,E=_.v,P=hS(_.v)?_.v:null;if(fS(k)){$V(k);for(const M of _.d.keys())zL(b,k,t(M));_.v=k,delete _.e}else _.v=k,delete _.e;(!C||!Object.is(E,_.v))&&(++_.n,P&&FV(P,k))},o=(b,_,k)=>{var C;const E=t(_);if(q2(E)&&(E.m&&!(k!=null&&k.has(_))||Array.from(E.d).every(([G,z])=>o(b,G,k).n===z)))return E;E.d.clear();let P=!0;const M=G=>{if(X2(_,G)){const X=t(G);if(!q2(X))if(yb(G))s(G,X,G.init);else throw new Error("no atom init");return Wm(X)}const z=o(b,G,k);try{return Wm(z)}finally{if(P)Y2(b,_,E,G,z);else{const X=Zu();Y2(X,_,E,G,z),f(X,_,E),ia(X)}}};let D,L;const $={get signal(){return D||(D=new AbortController),D.signal},get setSelf(){return(Er?"production":void 0)!=="production"&&!wb(_)&&console.warn("setSelf function cannot be used with read-only atom"),!L&&wb(_)&&(L=(...G)=>{if((Er?"production":void 0)!=="production"&&P&&console.warn("setSelf function cannot be called in sync"),!P)return h(_,...G)}),L}};try{const G=e(_,M,$);if(s(_,E,G),fS(G)){(C=G.onCancel)==null||C.call(G,()=>D==null?void 0:D.abort());const z=()=>{if(E.m){const X=Zu();f(X,_,E),ia(X)}};G.then(z,z)}return E}catch(G){return delete E.v,E.e=G,++E.n,E}finally{P=!1}},a=b=>Wm(o(void 0,b)),l=(b,_,k)=>{var C,E;const P=new Map;for(const M of((C=k.m)==null?void 0:C.t)||[])P.set(M,t(M));for(const M of k.p)P.set(M,t(M));return(E=zV(b,_))==null||E.forEach(M=>{P.set(M,t(M))}),P};function u(b,_,k){const C=[],E=new Set,P=new Set,M=[[_,k]];for(;M.length>0;){const[D,L]=M[M.length-1];if(P.has(D)){M.pop();continue}if(E.has(D)){C.push([D,L,L.n]),P.add(D),M.pop();continue}E.add(D);for(const[$,G]of l(b,D,L))D!==$&&!E.has($)&&M.push([$,G])}return[C,P]}const c=(b,_,k)=>{const[C,E]=u(b,_,k),P=new Set([_]);for(let M=C.length-1;M>=0;--M){const[D,L,$]=C[M];let G=!1;for(const z of L.d.keys())if(z!==D&&P.has(z)){G=!0;break}G&&(o(b,D,E),f(b,D,L),$!==L.n&&(bb(b,D,L),P.add(D))),E.delete(D)}},d=(b,_,...k)=>{let C=!0;const E=M=>Wm(o(b,M)),P=(M,...D)=>{const L=t(M);try{if(X2(_,M)){if(!yb(M))throw new Error("atom not writable");const $=L.n,G=D[0];s(M,L,G),f(b,M,L),$!==L.n&&(bb(b,M,L),c(b,M,L));return}else return d(b,M,...D)}finally{C||ia(b)}};try{return n(_,E,P,...k)}finally{C=!1}},h=(b,..._)=>{const k=Zu();try{return d(k,b,..._)}finally{ia(k)}},f=(b,_,k)=>{if(k.m&&!hS(k.v)){for(const C of k.d.keys())k.m.d.has(C)||(p(b,C,t(C)).t.add(_),k.m.d.add(C));for(const C of k.m.d||[])if(!k.d.has(C)){k.m.d.delete(C);const E=m(b,C,t(C));E==null||E.t.delete(_)}}},p=(b,_,k)=>{if(!k.m){o(b,_);for(const C of k.d.keys())p(b,C,t(C)).t.add(_);if(k.m={l:new Set,d:new Set(k.d.keys()),t:new Set},(Er?"production":void 0)!=="production"&&r.add(_),wb(_)){const C=k.m;let E;const P=(M,D)=>{let L=!0;E=(...$)=>{try{return d(M,_,...$)}finally{L||ia(M)}};try{return D()}finally{L=!1}};Z2(b,()=>{const M=P(b,()=>i(_,(...D)=>E(...D)));M&&(C.u=D=>P(D,M))})}}return k.m},m=(b,_,k)=>{if(k.m&&!k.m.l.size&&!Array.from(k.m.t).some(C=>{var E;return(E=t(C).m)==null?void 0:E.d.has(_)})){const C=k.m.u;C&&Z2(b,()=>C(b)),delete k.m,(Er?"production":void 0)!=="production"&&r.delete(_);for(const E of k.d.keys()){const P=m(b,E,t(E));P==null||P.t.delete(_)}return}return k.m},y={get:a,set:h,sub:(b,_)=>{const k=Zu(),C=t(b),P=p(k,b,C).l;return P.add(_),ia(k),()=>{P.delete(_);const M=Zu();m(M,b,C),ia(M)}},unstable_derive:b=>UL(...b(t,e,n,i))};return(Er?"production":void 0)!=="production"&&Object.assign(y,{dev4_get_internal_weak_map:()=>({get:_=>{const k=t(_);if(k.n!==0)return k}}),dev4_get_mounted_atoms:()=>r,dev4_restore_atoms:_=>{const k=Zu();for(const[C,E]of _)if(yb(C)){const P=t(C),M=P.n;s(C,P,E),f(k,C,P),M!==P.n&&(bb(k,C,P),c(k,C,P))}ia(k)}}),y},xC=()=>{const t=new WeakMap;return UL(n=>{if((Er?"production":void 0)!=="production"&&!n)throw new Error("Atom is undefined or null");let i=t.get(n);return i||(i={d:new Map,p:new Set,n:0},t.set(n,i)),i},(n,...i)=>n.read(...i),(n,...i)=>n.write(...i),(n,...i)=>{var r;return(r=n.onMount)==null?void 0:r.call(n,...i)})};let dh;const UV=()=>(dh||(dh=xC(),(Er?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=dh),globalThis.__JOTAI_DEFAULT_STORE__!==dh&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),dh),HL={BASE_URL:"/VonSim8/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},VL=x.createContext(void 0),WL=t=>x.useContext(VL)||UV(),HV=({children:t,store:e})=>{const n=x.useRef();return!e&&!n.current&&(n.current=xC()),x.createElement(VL.Provider,{value:e||n.current},t)},GL=t=>typeof(t==null?void 0:t.then)=="function",VV=t=>{t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e})},WV=on.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(VV(t),t)}),xb=new WeakMap,GV=t=>{let e=xb.get(t);return e||(e=new Promise((n,i)=>{let r=t;const s=l=>u=>{r===l&&n(u)},o=l=>u=>{r===l&&i(u)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(u=>{if((HL?"production":void 0)!=="production"&&u===l)throw new Error("[Bug] p is not updated even after cancelation");GL(u)?(xb.set(u,e),r=u,u.then(s(u),o(u)),a(u)):n(u)})};t.then(s(t),o(t)),a(t)}),xb.set(t,e)),e};function lt(t,e){const n=WL(),[[i,r,s],o]=x.useReducer(u=>{const c=n.get(t);return Object.is(u[0],c)&&u[1]===n&&u[2]===t?u:[c,n,t]},void 0,()=>[n.get(t),n,t]);let a=i;if((r!==n||s!==t)&&(o(),a=n.get(t)),x.useEffect(()=>{const u=n.sub(t,()=>{o()});return o(),u},[n,t,void 0]),x.useDebugValue(a),GL(a)){const u=GV(a);return WV(u)}return a}function KL(t,e){const n=WL();return x.useCallback((...r)=>{if((HL?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function Vp(t,e){return[lt(t),KL(t)]}const{createElement:Sd,createContext:KV,createRef:Dhe,forwardRef:XL,useCallback:_i,useContext:qL,useEffect:gu,useImperativeHandle:YL,useLayoutEffect:XV,useMemo:qV,useRef:Ji,useState:uy}=gk,J2=gk.useId,I0=KV(null);I0.displayName="PanelGroupContext";const Hf=XV,YV=typeof J2=="function"?J2:()=>null;let ZV=0;function SC(t=null){const e=YV(),n=Ji(t||e||null);return n.current===null&&(n.current=""+ZV++),t??n.current}function ZL({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:u,onExpand:c,onResize:d,order:h,style:f,tagName:p="div",...m}){const w=qL(I0);if(w===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:y,getPanelSize:b,getPanelStyle:_,groupId:k,isPanelCollapsed:C,reevaluatePanelConstraints:E,registerPanel:P,resizePanel:M,unregisterPanel:D}=w,L=SC(o),$=Ji({callbacks:{onCollapse:u,onExpand:c,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:L,idIsFromProps:o!==void 0,order:h});Ji({didLogMissingDefaultSizeWarning:!1}),Hf(()=>{const{callbacks:z,constraints:X}=$.current,ee={...X};$.current.id=L,$.current.idIsFromProps=o!==void 0,$.current.order=h,z.onCollapse=u,z.onExpand=c,z.onResize=d,X.collapsedSize=n,X.collapsible=i,X.defaultSize=r,X.maxSize=a,X.minSize=l,(ee.collapsedSize!==X.collapsedSize||ee.collapsible!==X.collapsible||ee.maxSize!==X.maxSize||ee.minSize!==X.minSize)&&E($.current,ee)}),Hf(()=>{const z=$.current;return P(z),()=>{D(z)}},[h,L,P,D]),YL(s,()=>({collapse:()=>{v($.current)},expand:()=>{y($.current)},getId(){return L},getSize(){return b($.current)},isCollapsed(){return C($.current)},isExpanded(){return!C($.current)},resize:z=>{M($.current,z)}}),[v,y,b,C,L,M]);const G=_($.current,r);return Sd(p,{...m,children:t,className:e,style:{...G,...f},"data-panel":"","data-panel-id":L,"data-panel-group-id":k,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const tv=XL((t,e)=>Sd(ZL,{...t,forwardedRef:e}));ZL.displayName="Panel";tv.displayName="forwardRef(Panel)";function Ge(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const JL=10;function Vf(t,e,n=JL){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function qi(t,e,n){return Vf(t,e,n)===0}function Pc({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];Ge(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if(Vf(n,a)<0)if(s){const l=(r+a)/2;Vf(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(JL)),n}function Dh({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(qi(t,0))return e;const s=[...e],[o,a]=i;Ge(o!=null),Ge(a!=null);let l=0;if(r==="keyboard"){{const c=t<0?a:o,d=n[c];if(Ge(d),d.collapsible){const h=e[c];Ge(h!=null);const f=n[c];Ge(f);const{collapsedSize:p=0,minSize:m=0}=f;if(qi(h,p)){const w=m-h;Vf(w,Math.abs(t))>0&&(t=t<0?0-w:w)}}}{const c=t<0?o:a,d=n[c];Ge(d);const{collapsible:h}=d;if(h){const f=e[c];Ge(f!=null);const p=n[c];Ge(p);const{collapsedSize:m=0,minSize:w=0}=p;if(qi(f,w)){const v=f-m;Vf(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}}{const c=t<0?1:-1;let d=t<0?a:o,h=0;for(;;){const p=e[d];Ge(p!=null);const w=Pc({panelConstraints:n,panelIndex:d,size:100})-p;if(h+=w,d+=c,d<0||d>=n.length)break}const f=Math.min(Math.abs(t),Math.abs(h));t=t<0?0-f:f}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const h=Math.abs(t)-Math.abs(l),f=e[d];Ge(f!=null);const p=f-h,m=Pc({panelConstraints:n,panelIndex:d,size:p});if(!qi(f,m)&&(l+=f-m,s[d]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(qi(l,0))return e;{const c=t<0?a:o,d=e[c];Ge(d!=null);const h=d+l,f=Pc({panelConstraints:n,panelIndex:c,size:h});if(s[c]=f,!qi(f,h)){let p=h-f,w=t<0?a:o;for(;w>=0&&w<n.length;){const v=s[w];Ge(v!=null);const y=v+p,b=Pc({panelConstraints:n,panelIndex:w,size:y});if(qi(v,b)||(p-=b-v,s[w]=b),qi(p,0))break;t>0?w--:w++}}}const u=s.reduce((c,d)=>d+c,0);return qi(u,100)?s:e}function JV({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];Ge(a!=null),e.forEach((d,h)=>{const{constraints:f}=d,{maxSize:p=100,minSize:m=0}=f;h===a?(i=m,r=p):(s+=m,o+=p)});const l=Math.min(r,100-s),u=Math.max(i,100-o),c=t[a];return{valueMax:l,valueMin:u,valueNow:c}}function Wf(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function QL(t,e,n=document){const r=Wf(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function ej(t,e,n){const i=QL(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function tj(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function D0(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function QV(t,e,n,i=document){var r,s,o,a;const l=D0(e,i),u=Wf(t,i),c=l?u.indexOf(l):-1,d=(r=(s=n[c])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,h=(o=(a=n[c+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,h]}function e7({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){Ji({didWarnAboutMissingResizeHandle:!1}),Hf(()=>{if(!s)return;const a=Wf(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:u,valueMin:c,valueNow:d}=JV({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),h=a[l];if(h!=null){const f=r[l];Ge(f),h.setAttribute("aria-controls",f.id),h.setAttribute("aria-valuemax",""+Math.round(u)),h.setAttribute("aria-valuemin",""+Math.round(c)),h.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,u)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),gu(()=>{if(!s)return;const a=e.current;Ge(a);const{panelDataArray:l}=a,u=tj(n,s);Ge(u!=null,`No group found for id "${n}"`);const c=Wf(n,s);Ge(c);const d=c.map(h=>{const f=h.getAttribute("data-panel-resize-handle-id");Ge(f);const[p,m]=QV(n,f,l,s);if(p==null||m==null)return()=>{};const w=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const y=l.findIndex(b=>b.id===p);if(y>=0){const b=l[y];Ge(b);const _=i[y],{collapsedSize:k=0,collapsible:C,minSize:E=0}=b.constraints;if(_!=null&&C){const P=Dh({delta:qi(_,k)?E-k:k-_,layout:i,panelConstraints:l.map(M=>M.constraints),pivotIndices:ej(n,f,s),trigger:"keyboard"});i!==P&&o(P)}}break}}};return h.addEventListener("keydown",w),()=>{h.removeEventListener("keydown",w)}});return()=>{d.forEach(h=>h())}},[s,t,e,n,i,r,o])}function Q2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function nj(t){return t.type==="keydown"}function ij(t){return t.type.startsWith("mouse")}function rj(t){return t.type.startsWith("touch")}function sj(t,e){const n=t==="horizontal";if(ij(e))return n?e.clientX:e.clientY;if(rj(e)){const i=e.touches[0];return Ge(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function t7(t,e,n,i,r){const s=n==="horizontal",o=D0(e,r);Ge(o);const a=o.getAttribute("data-panel-group-id");Ge(a);let{initialCursorPosition:l}=i;const u=sj(n,t),c=tj(a,r);Ge(c);const d=c.getBoundingClientRect(),h=s?d.width:d.height;return(u-l)/h*100}function n7(t,e,n,i,r,s){if(nj(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:t7(t,e,n,i,s)}function i7({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];Ge(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];Ge(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,u=r/l;i++,e[s]=u,r-=u}return e}function Ju(t,e,n){e.forEach((i,r)=>{const s=t[r];Ge(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:u=0,collapsible:c}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:h,onExpand:f,onResize:p}=o;p&&p(i,d),c&&(h||f)&&(f&&(d==null||d===u)&&i!==u&&f(),h&&(d==null||d!==u)&&i===u&&h())}})}function Gm(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function r7({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let pS=null,uu=null;function oj(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function s7(){uu!==null&&(document.head.removeChild(uu),pS=null,uu=null)}function Sb(t){if(pS===t)return;pS=t;const e=oj(t);uu===null&&(uu=document.createElement("style"),document.head.appendChild(uu)),uu.innerHTML=`*{cursor: ${e}!important;}`}function o7(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function eT(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function aj(t){return`react-resizable-panels:${t}`}function lj(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function uj(t,e){try{const n=aj(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function a7(t,e,n){var i,r;const s=(i=uj(t,n))!==null&&i!==void 0?i:{},o=lj(e);return(r=s[o])!==null&&r!==void 0?r:null}function l7(t,e,n,i,r){var s;const o=aj(t),a=lj(e),l=(s=uj(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(u){console.error(u)}}function tT({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!qi(i,100))for(let s=0;s<e.length;s++){const o=n[s];Ge(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];Ge(o!=null);const a=Pc({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!qi(r,0))for(let s=0;s<e.length;s++){const o=n[s];Ge(o!=null);const a=o+r,l=Pc({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,qi(r,0)))break}return n}const u7=100,Lh={getItem:t=>(eT(Lh),Lh.getItem(t)),setItem:(t,e)=>{eT(Lh),Lh.setItem(t,e)}},nT={};function cj({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=Lh,style:u,tagName:c="div",...d}){const h=SC(s),f=Ji(null),[p,m]=uy(null),[w,v]=uy([]),y=Ji({}),b=Ji(new Map),_=Ji(0),k=Ji({autoSaveId:t,direction:i,dragState:p,id:h,keyboardResizeBy:a,onLayout:o,storage:l}),C=Ji({layout:w,panelDataArray:[],panelDataArrayChanged:!1});Ji({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),YL(r,()=>({getId:()=>k.current.id,getLayout:()=>{const{layout:Z}=C.current;return Z},setLayout:Z=>{const{onLayout:ue}=k.current,{layout:I,panelDataArray:O}=C.current,B=tT({layout:Z,panelConstraints:O.map(S=>S.constraints)});Q2(I,B)||(v(B),C.current.layout=B,ue&&ue(B),Ju(O,B,y.current))}}),[]),Hf(()=>{k.current.autoSaveId=t,k.current.direction=i,k.current.dragState=p,k.current.id=h,k.current.onLayout=o,k.current.storage=l}),e7({committedValuesRef:k,eagerValuesRef:C,groupId:h,layout:w,panelDataArray:C.current.panelDataArray,setLayout:v,panelGroupElement:f.current}),gu(()=>{const{panelDataArray:Z}=C.current;if(t){if(w.length===0||w.length!==Z.length)return;let ue=nT[t];ue==null&&(ue=o7(l7,u7),nT[t]=ue);const I=[...Z],O=new Map(b.current);ue(t,I,O,w,l)}},[t,w,l]),gu(()=>{});const E=_i(Z=>{const{onLayout:ue}=k.current,{layout:I,panelDataArray:O}=C.current;if(Z.constraints.collapsible){const B=O.map(R=>R.constraints),{collapsedSize:S=0,panelSize:T,pivotIndices:N}=zl(O,Z,I);if(Ge(T!=null),T!==S){b.current.set(Z.id,T);const K=ac(O,Z)===O.length-1?T-S:S-T,W=Dh({delta:K,layout:I,panelConstraints:B,pivotIndices:N,trigger:"imperative-api"});Gm(I,W)||(v(W),C.current.layout=W,ue&&ue(W),Ju(O,W,y.current))}}},[]),P=_i(Z=>{const{onLayout:ue}=k.current,{layout:I,panelDataArray:O}=C.current;if(Z.constraints.collapsible){const B=O.map(K=>K.constraints),{collapsedSize:S=0,panelSize:T,minSize:N=0,pivotIndices:R}=zl(O,Z,I);if(T===S){const K=b.current.get(Z.id),W=K!=null&&K>=N?K:N,q=ac(O,Z)===O.length-1?T-W:W-T,Re=Dh({delta:q,layout:I,panelConstraints:B,pivotIndices:R,trigger:"imperative-api"});Gm(I,Re)||(v(Re),C.current.layout=Re,ue&&ue(Re),Ju(O,Re,y.current))}}},[]),M=_i(Z=>{const{layout:ue,panelDataArray:I}=C.current,{panelSize:O}=zl(I,Z,ue);return Ge(O!=null),O},[]),D=_i((Z,ue)=>{const{panelDataArray:I}=C.current,O=ac(I,Z);return r7({defaultSize:ue,dragState:p,layout:w,panelData:I,panelIndex:O})},[p,w]),L=_i(Z=>{const{layout:ue,panelDataArray:I}=C.current,{collapsedSize:O=0,collapsible:B,panelSize:S}=zl(I,Z,ue);return B===!0&&S===O},[]),$=_i(Z=>{const{layout:ue,panelDataArray:I}=C.current,{collapsedSize:O=0,collapsible:B,panelSize:S}=zl(I,Z,ue);return Ge(S!=null),!B||S>O},[]),G=_i(Z=>{const{panelDataArray:ue}=C.current;ue.push(Z),ue.sort((I,O)=>{const B=I.order,S=O.order;return B==null&&S==null?0:B==null?-1:S==null?1:B-S}),C.current.panelDataArrayChanged=!0},[]);Hf(()=>{if(C.current.panelDataArrayChanged){C.current.panelDataArrayChanged=!1;const{autoSaveId:Z,onLayout:ue,storage:I}=k.current,{layout:O,panelDataArray:B}=C.current;let S=null;if(Z){const N=a7(Z,B,I);N&&(b.current=new Map(Object.entries(N.expandToSizes)),S=N.layout)}S==null&&(S=i7({panelDataArray:B}));const T=tT({layout:S,panelConstraints:B.map(N=>N.constraints)});Q2(O,T)||(v(T),C.current.layout=T,ue&&ue(T),Ju(B,T,y.current))}});const z=_i(Z=>function(I){I.preventDefault();const O=f.current;if(!O)return()=>null;const{direction:B,dragState:S,id:T,keyboardResizeBy:N,onLayout:R}=k.current,{layout:K,panelDataArray:W}=C.current,{initialLayout:te}=S??{},q=ej(T,Z,O);let Re=n7(I,Z,B,S,N,O);if(Re===0)return;const je=B==="horizontal";document.dir==="rtl"&&je&&(Re=-Re);const Be=W.map(ge=>ge.constraints),Le=Dh({delta:Re,layout:te??K,panelConstraints:Be,pivotIndices:q,trigger:nj(I)?"keyboard":"mouse-or-touch"}),Ve=!Gm(K,Le);(ij(I)||rj(I))&&_.current!=Re&&(_.current=Re,Sb(Ve?je?"horizontal":"vertical":je?Re<0?"horizontal-min":"horizontal-max":Re<0?"vertical-min":"vertical-max")),Ve&&(v(Le),C.current.layout=Le,R&&R(Le),Ju(W,Le,y.current))},[]),X=_i((Z,ue)=>{const{onLayout:I}=k.current,{layout:O,panelDataArray:B}=C.current,S=B.map(te=>te.constraints),{panelSize:T,pivotIndices:N}=zl(B,Z,O);Ge(T!=null);const K=ac(B,Z)===B.length-1?T-ue:ue-T,W=Dh({delta:K,layout:O,panelConstraints:S,pivotIndices:N,trigger:"imperative-api"});Gm(O,W)||(v(W),C.current.layout=W,I&&I(W),Ju(B,W,y.current))},[]),ee=_i((Z,ue)=>{const{layout:I,panelDataArray:O}=C.current,{collapsedSize:B=0,collapsible:S}=ue,{collapsedSize:T=0,collapsible:N,maxSize:R=100,minSize:K=0}=Z.constraints,{panelSize:W}=zl(O,Z,I);Ge(W!=null),S&&N&&W===B?B!==T&&X(Z,T):W<K?X(Z,K):W>R&&X(Z,R)},[X]),he=_i((Z,ue)=>{const{direction:I}=k.current,{layout:O}=C.current;if(!f.current)return;const B=D0(Z,f.current);Ge(B);const S=sj(I,ue);m({dragHandleId:Z,dragHandleRect:B.getBoundingClientRect(),initialCursorPosition:S,initialLayout:O})},[]),V=_i(()=>{s7(),m(null)},[]),F=_i(Z=>{const{panelDataArray:ue}=C.current,I=ac(ue,Z);I>=0&&(ue.splice(I,1),delete y.current[Z.id],C.current.panelDataArrayChanged=!0)},[]),ne=qV(()=>({collapsePanel:E,direction:i,dragState:p,expandPanel:P,getPanelSize:M,getPanelStyle:D,groupId:h,isPanelCollapsed:L,isPanelExpanded:$,reevaluatePanelConstraints:ee,registerPanel:G,registerResizeHandle:z,resizePanel:X,startDragging:he,stopDragging:V,unregisterPanel:F,panelGroupElement:f.current}),[E,p,i,P,M,D,h,L,$,ee,G,z,X,he,V,F]),_e={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Sd(I0.Provider,{value:ne},Sd(c,{...d,children:e,className:n,style:{..._e,...u},ref:f,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":h}))}const dj=XL((t,e)=>Sd(cj,{...t,forwardedRef:e}));cj.displayName="PanelGroup";dj.displayName="forwardRef(PanelGroup)";function ac(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function zl(t,e,n){const i=ac(t,e),s=i===t.length-1?[i-1,i]:[i,i+1],o=n[i];return{...e.constraints,panelSize:o,pivotIndices:s}}function c7({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){gu(()=>{if(t||n==null||i==null)return;const r=D0(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");Ge(a);const l=Wf(a,i),u=QL(a,e,i);Ge(u!==null);const c=o.shiftKey?u>0?u-1:l.length-1:u+1<l.length?u+1:0;l[c].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function mS({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const u=Ji(null),c=Ji({onDragging:r});gu(()=>{c.current.onDragging=r});const d=qL(I0);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:h,dragState:f,groupId:p,registerResizeHandle:m,startDragging:w,stopDragging:v,panelGroupElement:y}=d,b=SC(i),_=(f==null?void 0:f.dragHandleId)===b,[k,C]=uy(!1),[E,P]=uy(null),M=_i(()=>{const L=u.current;Ge(L),L.blur(),v();const{onDragging:$}=c.current;$&&$(!1)},[v]);gu(()=>{if(n)P(null);else{const L=m(b);P(()=>L)}},[n,b,m]),gu(()=>{if(n||E==null||!_)return;const L=X=>{E(X)},$=X=>{E(X)},G=u.current;Ge(G);const z=G.ownerDocument;return z.body.addEventListener("contextmenu",M),z.body.addEventListener("mousemove",L),z.body.addEventListener("touchmove",L),z.body.addEventListener("mouseleave",$),window.addEventListener("mouseup",M),window.addEventListener("touchend",M),()=>{z.body.removeEventListener("contextmenu",M),z.body.removeEventListener("mousemove",L),z.body.removeEventListener("touchmove",L),z.body.removeEventListener("mouseleave",$),window.removeEventListener("mouseup",M),window.removeEventListener("touchend",M)}},[h,n,_,E,M]),c7({disabled:n,handleId:b,resizeHandler:E,panelGroupElement:y});const D={cursor:oj(h),touchAction:"none",userSelect:"none"};return Sd(a,{...l,children:t,className:e,onBlur:()=>C(!1),onFocus:()=>C(!0),onMouseDown:L=>{w(b,L.nativeEvent);const $=c.current;Ge($);const{onDragging:G}=$;G&&G(!0)},onMouseUp:M,onTouchCancel:M,onTouchEnd:M,onTouchStart:L=>{w(b,L.nativeEvent);const $=c.current;Ge($);const{onDragging:G}=$;G&&G(!0)},ref:u,role:"separator",style:{...D,...s},tabIndex:o,"data-panel-group-direction":h,"data-panel-group-id":p,"data-resize-handle":"","data-resize-handle-active":_?"pointer":k?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":b})}mS.displayName="PanelResizeHandle";var $s=function(){return $s=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$s.apply(this,arguments)};function hj(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function d7(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var h7=function(){};function f7(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function p7(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var fj=typeof window<"u",m7=fj?window:null,iT=function(t){return!!t.addEventListener},rT=function(t){return!!t.on},nv=function(t,e,n,i){n===void 0&&(n=m7),x.useEffect(function(){if(e&&n)return iT(n)?f7(n,t,e,i):rT(n)&&n.on(t,e,i),function(){iT(n)?p7(n,t,e,i):rT(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},g7=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},vu=function(t,e,n,i){e===void 0&&(e=h7),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=x.useMemo(function(){var u=g7(t),c=function(d){if(u(d))return e(d)};return c},i);nv(s,l,o,a)},v7=function(t,e){return fj?window.matchMedia(t).matches:!1},y7=function(t,e){var n=x.useState(v7(t)),i=n[0],r=n[1];return x.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addEventListener("change",a),r(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),i};const w7="modulepreload",b7=function(t){return"/VonSim8/"+t},sT={},x7=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=b7(l),l in sT)return;sT[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":w7,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function S7(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l,u;const c=async(h=!0)=>{await l,await(u==null?void 0:u())};async function d(){if("serviceWorker"in navigator){if(a=await x7(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(h=>{o==null||o(h)}),!a)return;u=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let h=!1;const f=()=>{h=!0,a==null||a.addEventListener("controlling",p=>{p.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",p=>{typeof p.isUpdate>"u"?typeof p.isExternal<"u"?p.isExternal?f():!h&&(i==null||i()):p.isExternal?window.location.reload():!h&&(i==null||i()):p.isUpdate||i==null||i()}),a.addEventListener("waiting",f),a.addEventListener("externalwaiting",f)}a.register({immediate:e}).then(h=>{s?s("/VonSim8/sw.js",h):r==null||r(h)}).catch(h=>{o==null||o(h)})}}return l=d(),c}function _7(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=x.useState(!1),[u,c]=x.useState(!1),[d]=x.useState(()=>S7({immediate:e,onOfflineReady(){c(!0),i==null||i()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:r,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[u,c],updateServiceWorker:d}}class pt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=_d(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Bs.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=_d(this,e,n);let i=[];return this.decompose(e,n,i,0),Bs.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new lf(this),s=new lf(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new lf(this,e)}iterRange(e,n=this.length){return new pj(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new mj(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?pt.empty:e.length<=32?new Jt(e):Bs.from(Jt.split(e,[]))}}class Jt extends pt{constructor(e,n=k7(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new C7(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new Jt(oT(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=iv(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new Jt(a,o.length+s.length));else{let l=a.length>>1;i.push(new Jt(a.slice(0,l)),new Jt(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof Jt))return super.replace(e,n,i);[e,n]=_d(this,e,n);let r=iv(this.text,iv(i.text,oT(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new Jt(r,s):Bs.from(Jt.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=_d(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new Jt(i,r)),i=[],r=-1);return r>-1&&n.push(new Jt(i,r)),n}}class Bs extends pt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let u=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!u?i.push(a):a.decompose(e-o,n-o,i,u)}o=l+1}}replace(e,n,i){if([e,n]=_d(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[r]=l,new Bs(c,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=_d(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Bs))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],u=e.children[s];if(l!=u)return i+l.scanIdentical(u,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let f of e)i+=f.lines;if(i<32){let f=[];for(let p of e)p.flatten(f);return new Jt(f,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,u=-1,c=[];function d(f){let p;if(f.lines>s&&f instanceof Bs)for(let m of f.children)d(m);else f.lines>o&&(l>o||!l)?(h(),a.push(f)):f instanceof Jt&&l&&(p=c[c.length-1])instanceof Jt&&f.lines+p.lines<=32?(l+=f.lines,u+=f.length+1,c[c.length-1]=new Jt(p.text.concat(f.text),p.length+1+f.length)):(l+f.lines>r&&h(),l+=f.lines,u+=f.length+1,c.push(f))}function h(){l!=0&&(a.push(c.length==1?c[0]:Bs.from(c,u)),u=-1,l=c.length=0)}for(let f of e)d(f);return h(),a.length==1?a[0]:new Bs(a,n)}}pt.empty=new Jt([""],0);function k7(t){let e=-1;for(let n of t)e+=n.length+1;return e}function iv(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function oT(t,e,n){return iv(t,[""],e,n)}class lf{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Jt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof Jt?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Jt){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Jt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class pj{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new lf(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class mj{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(pt.prototype[Symbol.iterator]=function(){return this.iter()},lf.prototype[Symbol.iterator]=pj.prototype[Symbol.iterator]=mj.prototype[Symbol.iterator]=function(){return this});class C7{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function _d(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}let Kc="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Kc.length;t++)Kc[t]+=Kc[t-1];function E7(t){for(let e=1;e<Kc.length;e+=2)if(Kc[e]>t)return Kc[e-1]<=t;return!1}function aT(t){return t>=127462&&t<=127487}const lT=8205;function Un(t,e,n=!0,i=!0){return(n?gj:A7)(t,e,i)}function gj(t,e,n){if(e==t.length)return e;e&&vj(t.charCodeAt(e))&&yj(t.charCodeAt(e-1))&&e--;let i=fi(t,e);for(e+=ss(i);e<t.length;){let r=fi(t,e);if(i==lT||r==lT||n&&E7(r))e+=ss(r),i=r;else if(aT(r)){let s=0,o=e-2;for(;o>=0&&aT(fi(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function A7(t,e,n){for(;e>0;){let i=gj(t,e-2,n);if(i<e)return i;e--}return 0}function vj(t){return t>=56320&&t<57344}function yj(t){return t>=55296&&t<56320}function fi(t,e){let n=t.charCodeAt(e);if(!yj(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return vj(i)?(n-55296<<10)+(i-56320)+65536:n}function _C(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function ss(t){return t<65536?1:2}const gS=/\r\n?|\n/;var Ii=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Ii||(Ii={}));class Zs{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){vS(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new Zs(e)}composeDesc(e){return this.empty?e:e.empty?this:wj(this,e)}mapDesc(e,n=!1){return e.empty?this:yS(this,e,n)}mapPos(e,n=-1,i=Ii.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=r+a;if(l<0){if(u>e)return s+(e-r);s+=a}else{if(i!=Ii.Simple&&u>=e&&(i==Ii.TrackDel&&r<e&&u>e||i==Ii.TrackBefore&&r<e||i==Ii.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Zs(e)}static create(e){return new Zs(e)}}class pn extends Zs{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return vS(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return yS(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(pt.empty);i.push(o?e.slice(s,s+o):pt.empty)}s+=o}return new pn(n,i)}compose(e){return this.empty?e:e.empty?this:wj(this,e,!0)}map(e,n=!1){return e.empty?this:yS(this,e,n,!0)}iterChanges(e,n=!1){vS(this,e,n)}get desc(){return Zs.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new Gf(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);Yn(r,c,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;Yn(n,c,d),d>0&&Na(i,n,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);Yn(n,c,-1),Yn(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new pn(n,i),filtered:Zs.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!r.length)return;o<n&&Yn(r,n-o,-1);let d=new pn(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let d of c)u(d);else if(c instanceof pn){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:d,to:h=d,insert:f}=c;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let p=f?typeof f=="string"?pt.of(f.split(i||gS)):f:pt.empty,m=p.length;if(d==h&&m==0)return;d<o&&l(),d>o&&Yn(r,d-o,-1),Yn(r,h-d,m),Na(s,r,p),o=h}}return u(e),l(!a),a}static empty(e){return new pn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(pt.empty);i[r]=pt.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new pn(n,i)}static createSet(e,n){return new pn(e,n)}}function Yn(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Na(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(pt.empty);t.push(n)}}function vS(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let u=r,c=s,d=pt.empty;for(;u+=a,c+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,u,s,c,d),r=u,s=c}}}function yS(t,e,n,i=!1){let r=[],s=i?[]:null,o=new Gf(t),a=new Gf(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);Yn(r,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let u=a.len;for(Yn(r,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(Yn(r,0,o.ins),s&&Na(s,r,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let d=Math.min(c,a.len);u+=d,c-=d,a.forward(d)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;Yn(r,u,l<o.i?o.ins:0),s&&l<o.i&&Na(s,r,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?pn.createSet(r,s):Zs.create(r);throw new Error("Mismatched change set lengths")}}function wj(t,e,n=!1){let i=[],r=n?[]:null,s=new Gf(t),o=new Gf(e);for(let a=!1;;){if(s.done&&o.done)return r?pn.createSet(i,r):Zs.create(i);if(s.ins==0)Yn(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)Yn(i,0,o.ins,a),r&&Na(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Yn(i,l,c,a),r&&c&&Na(r,i,o.text)}else o.ins==-1?(Yn(i,s.off?0:s.len,l,a),r&&Na(r,i,s.textBit(l))):(Yn(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Na(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>u),s.forward2(l),o.forward(l)}}}}class Gf{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?pt.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?pt.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class cu{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new cu(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return ie.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return ie.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ie.range(e.anchor,e.head)}static create(e,n,i){return new cu(e,n,i)}}class ie{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:ie.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ie([this.main],0)}addRange(e,n=!0){return ie.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,ie.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ie(e.ranges.map(n=>cu.fromJSON(n)),e.main)}static single(e,n=e){return new ie([ie.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return ie.normalized(e.slice(),n);i=s.to}return new ie(e,n)}static cursor(e,n=0,i,r){return cu.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?cu.create(n,e,48|s):cu.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?ie.range(l,a):ie.range(a,l))}}return new ie(e,n)}}function bj(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let kC=0;class Pe{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=kC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Pe(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:CC),!!e.static,e.enables)}of(e){return new rv([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new rv(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new rv(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function CC(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class rv{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=kC++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?u=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||c.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||wS(d,c)){let f=i(d);if(a?!uT(f,d.values[o],r):!r(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,p=h.config.address[s];if(p!=null){let m=dy(h,p);if(this.dependencies.every(w=>w instanceof Pe?h.facet(w)===d.facet(w):w instanceof xi?h.field(w,!1)==d.field(w,!1):!0)||(a?uT(f=i(d),m,r):r(f=i(d),m)))return d.values[o]=m,0}else f=i(d);return d.values[o]=f,1}}}}function uT(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function wS(t,e){let n=!1;for(let i of e)uf(t,i)&1&&(n=!0);return n}function P7(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let c=0;c<i.length;c++){let d=dy(l,i[c]);if(r[c]==2)for(let h of d)u.push(h);else u.push(d)}return e.combine(u)}return{create(l){for(let u of i)uf(l,u);return l.values[o]=a(l),1},update(l,u){if(!wS(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=wS(l,i),d=u.config.facets[e.id],h=u.facet(e);if(d&&!c&&CC(n,d))return l.values[o]=h,0;let f=a(l);return e.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const cT=Pe.define({static:!0});class xi{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new xi(kC++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(cT).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,cT.of({field:this,create:e})]}get extension(){return this}}const Jl={lowest:4,low:3,default:2,high:1,highest:0};function hh(t){return e=>new xj(e,t)}const Wp={highest:hh(Jl.highest),high:hh(Jl.high),default:hh(Jl.default),low:hh(Jl.low),lowest:hh(Jl.lowest)};class xj{constructor(e,n){this.inner=e,this.prec=n}}class Gp{of(e){return new bS(this,e)}reconfigure(e){return Gp.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class bS{constructor(e,n){this.compartment=e,this.inner=n}}class cy{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let h of T7(e,n,o))h instanceof xi?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],u=[];for(let h of r)a[h.id]=u.length<<1,u.push(f=>h.slot(f));let c=i==null?void 0:i.config.facets;for(let h in s){let f=s[h],p=f[0].facet,m=c&&c[h]||[];if(f.every(w=>w.type==0))if(a[p.id]=l.length<<1|1,CC(m,f))l.push(i.facet(p));else{let w=p.combine(f.map(v=>v.value));l.push(i&&p.compare(w,i.facet(p))?i.facet(p):w)}else{for(let w of f)w.type==0?(a[w.id]=l.length<<1|1,l.push(w.value)):(a[w.id]=u.length<<1,u.push(v=>w.dynamicSlot(v)));a[p.id]=u.length<<1,u.push(w=>P7(w,p,f))}}let d=u.map(h=>h(a));return new cy(e,o,d,a,l,s)}}function T7(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let u=i[l].indexOf(o);u>-1&&i[l].splice(u,1),o instanceof bS&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof bS){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,a)}else if(o instanceof xj)s(o.inner,o.prec);else if(o instanceof xi)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof rv)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,Jl.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,Jl.default),i.reduce((o,a)=>o.concat(a))}function uf(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function dy(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const Sj=Pe.define(),xS=Pe.define({combine:t=>t.some(e=>e),static:!0}),_j=Pe.define({combine:t=>t.length?t[0]:void 0,static:!0}),kj=Pe.define(),Cj=Pe.define(),Ej=Pe.define(),Aj=Pe.define({combine:t=>t.length?t[0]:!1});class Yo{constructor(e,n){this.type=e,this.value=n}static define(){return new R7}}class R7{of(e){return new Yo(this,e)}}class M7{constructor(e){this.map=e}of(e){return new Ze(this,e)}}class Ze{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Ze(this.type,n)}is(e){return this.type==e}static define(e={}){return new M7(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}Ze.reconfigure=Ze.define();Ze.appendConfig=Ze.define();class bn{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&bj(i,n.newLength),s.some(a=>a.type==bn.time)||(this.annotations=s.concat(bn.time.of(Date.now())))}static create(e,n,i,r,s,o){return new bn(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(bn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}bn.time=Yo.define();bn.userEvent=Yo.define();bn.addToHistory=Yo.define();bn.remote=Yo.define();function N7(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function Pj(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=pn.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:Ze.mapEffects(t.effects,r).concat(Ze.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function SS(t,e,n){let i=e.selection,r=Xc(e.annotations);return e.userEvent&&(r=r.concat(bn.userEvent.of(e.userEvent))),{changes:e.changes instanceof pn?e.changes:pn.of(e.changes||[],n,t.facet(_j)),selection:i&&(i instanceof ie?i:ie.single(i.anchor,i.head)),effects:Xc(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function Tj(t,e,n){let i=SS(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=Pj(i,SS(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=bn.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return I7(n?O7(r):r)}function O7(t){let e=t.startState,n=!0;for(let r of e.facet(kj)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:N7(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=pn.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=bn.create(e,r,t.selection&&t.selection.map(s),Ze.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(Cj);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof bn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof bn?t=s[0]:t=Tj(e,Xc(s),!1)}return t}function I7(t){let e=t.startState,n=e.facet(Ej),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=Pj(i,SS(e,s,t.changes.newLength),!0))}return i==t?t:bn.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const D7=[];function Xc(t){return t==null?D7:Array.isArray(t)?t:[t]}var Hn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Hn||(Hn={}));const L7=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let _S;try{_S=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function j7(t){if(_S)return _S.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||L7.test(n)))return!0}return!1}function F7(t){return e=>{if(!/\S/.test(e))return Hn.Space;if(j7(e))return Hn.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Hn.Word;return Hn.Other}}class it{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)uf(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return uf(this,i),dy(this,i)}update(...e){return Tj(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(Gp.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,u)=>r.set(u,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(Ze.reconfigure)?(n=null,i=a.value):a.is(Ze.appendConfig)&&(n=null,i=Xc(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=cy.resolve(i,r,this),s=new it(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let o=e.startState.facet(xS)?e.newSelection:e.newSelection.asSingle();new it(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:ie.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=Xc(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),u=this.changes(l.changes),c=u.map(r);for(let h=0;h<a;h++)s[h]=s[h].map(c);let d=r.mapDesc(u,!0);s.push(l.range.map(d)),r=r.compose(c),o=Ze.mapEffects(o,c).concat(Ze.mapEffects(Xc(l.effects),d))}return{changes:r,selection:ie.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof pn?e:pn.of(e,this.doc.length,this.facet(it.lineSeparator))}toText(e){return pt.of(e.split(this.facet(it.lineSeparator)||gS))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(uf(this,n),dy(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof xi&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return it.create({doc:e.doc,selection:ie.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=cy.resolve(e.extensions||[],new Map),i=e.doc instanceof pt?e.doc:pt.of((e.doc||"").split(n.staticFacet(it.lineSeparator)||gS)),r=e.selection?e.selection instanceof ie?e.selection:ie.single(e.selection.anchor,e.selection.head):ie.single(0);return bj(r,i.length),n.staticFacet(xS)||(r=r.asSingle()),new it(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(it.tabSize)}get lineBreak(){return this.facet(it.lineSeparator)||`
`}get readOnly(){return this.facet(Aj)}phrase(e,...n){for(let i of this.facet(it.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(Sj))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return F7(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=Un(n,o,!1);if(s(n.slice(l,o))!=Hn.Word)break;o=l}for(;a<r;){let l=Un(n,a);if(s(n.slice(a,l))!=Hn.Word)break;a=l}return o==a?null:ie.range(o+i,a+i)}}it.allowMultipleSelections=xS;it.tabSize=Pe.define({combine:t=>t.length?t[0]:4});it.lineSeparator=_j;it.readOnly=Aj;it.phrases=Pe.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});it.languageData=Sj;it.changeFilter=kj;it.transactionFilter=Cj;it.transactionExtender=Ej;Gp.reconfigure=Ze.define();function Al(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Pu{eq(e){return this==e}range(e,n=e){return kS.create(e,n,this)}}Pu.prototype.startSide=Pu.prototype.endSide=0;Pu.prototype.point=!1;Pu.prototype.mapMode=Ii.TrackDel;let kS=class Rj{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new Rj(e,n,i)}};function CS(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class EC{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,d=this.to[l]+e,h,f;if(c==d){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(h=f=p,u.startSide!=u.endSide&&(f=n.mapPos(c,u.endSide),f<h)))continue}else if(h=n.mapPos(c,u.startSide),f=n.mapPos(d,u.endSide),h>f||h==f&&u.startSide>0&&u.endSide<=0)continue;(f-h||u.endSide-u.startSide)<0||(o<0&&(o=h),u.point&&(a=Math.max(a,f-h)),i.push(u),r.push(h-o),s.push(f-o))}return{mapped:i.length?new EC(r,s,i,a):null,pos:o}}}class gt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new gt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(CS)),this.isEmpty)return n.length?gt.of(n):this;let a=new Mj(this,null,-1).goto(0),l=0,u=[],c=new Tu;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];c.addInner(d.from,d.to,d.value)||u.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(kS.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?gt.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:d}=l.map(a,e);c&&(r=Math.max(r,c.maxPoint),n.push(c),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new gt(i,n,s||gt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Kf.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Kf.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=dT(o,a,i),u=new fh(o,l,s),c=new fh(a,l,s);i.iterGaps((d,h,f)=>hT(u,d,c,h,f,r)),i.empty&&i.length==0&&hT(u,0,c,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=dT(s,o),l=new fh(s,a,0).goto(i),u=new fh(o,a,0).goto(i);for(;;){if(l.to!=u.to||!ES(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>r)return!0;l.next(),u.next()}}static spans(e,n,i,r,s=-1){let o=new fh(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),d=o.pointFrom<n?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,l);r.point(a,u,o.point,c,d,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(r.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new Tu;for(let r of e instanceof kS?[e]:n?$7(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return gt.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=gt.empty;r=r.nextLayer)n=new gt(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}gt.empty=new gt([],[],null,-1);function $7(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(CS(e,i)>0)return t.slice().sort(CS);e=i}return t}gt.empty.nextLayer=gt.empty;class Tu{finishChunk(e){this.chunks.push(new EC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new Tu)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(gt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=gt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function dT(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class Mj{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Kf{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new Mj(o,n,i,s));return r.length==1?r[0]:new Kf(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)_b(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)_b(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),_b(this.heap,0)}}}function _b(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class fh{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Kf.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Km(this.active,e),Km(this.activeTo,e),Km(this.activeRank,e),this.minActive=fT(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;Xm(this.active,n,i),Xm(this.activeTo,n,r),Xm(this.activeRank,n,s),e&&Xm(e,n,this.cursor.from),this.minActive=fT(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Km(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function hT(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let u=t.to+l-n.to||t.endSide-n.endSide,c=u<0?t.to+l:n.to,d=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&ES(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!ES(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),c>o)break;a=c,u<=0&&t.next(),u>=0&&n.next()}}function ES(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Km(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Xm(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function fT(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Kp(t,e,n=t.length){let i=0;for(let r=0;r<n;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Un(t,r));return i}function B7(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=Un(t,r)}return i===!0?-1:t.length}const AS="",pT=typeof Symbol>"u"?"__"+AS:Symbol.for(AS),PS=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),mT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class rl{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let f in a){let p=a[f];if(/&/.test(f))s(f.split(/,\s*/).map(m=>o.map(w=>m.replace(/&/,w))).reduce((m,w)=>m.concat(w)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(r(f),p,c,h)}else p!=null&&c.push(f.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(c.length||h)&&l.push((i&&!d&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=mT[pT]||1;return mT[pT]=e+1,AS+e.toString(36)}static mount(e,n,i){let r=e[PS],s=i&&i.nonce;r?s&&r.setNonce(s):r=new z7(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let gT=new Map;class z7{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=gT.get(i);if(s)return e[PS]=s;this.sheet=new r.CSSStyleSheet,gT.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[PS]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let u=0;u<a.rules.length;u++)i.insertRule(a.rules[u],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var sl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Xf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},U7=typeof navigator<"u"&&/Mac/.test(navigator.platform),H7=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var jn=0;jn<10;jn++)sl[48+jn]=sl[96+jn]=String(jn);for(var jn=1;jn<=24;jn++)sl[jn+111]="F"+jn;for(var jn=65;jn<=90;jn++)sl[jn]=String.fromCharCode(jn+32),Xf[jn]=String.fromCharCode(jn);for(var kb in sl)Xf.hasOwnProperty(kb)||(Xf[kb]=sl[kb]);function V7(t){var e=U7&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||H7&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Xf:sl)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function qf(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function TS(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function sv(t,e){if(!e.anchorNode)return!1;try{return TS(t,e.anchorNode)}catch{return!1}}function Yf(t){return t.nodeType==3?Mu(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function cf(t,e,n,i){return n?vT(t,e,n,i,-1)||vT(t,e,n,i,1):!1}function Ru(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function hy(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function vT(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:to(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Ru(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?to(t):0}else return!1}}function to(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function L0(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function W7(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Nj(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function G7(t,e,n,i,r,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,d=!1;c&&!d;)if(c.nodeType==1){let h,f=c==l.body,p=1,m=1;if(f)h=W7(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(d=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:p,scaleY:m}=Nj(c,y)),h={left:y.left,right:y.left+c.clientWidth*p,top:y.top,bottom:y.top+c.clientHeight*m}}let w=0,v=0;if(r=="nearest")e.top<h.top?(v=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+v&&(v=e.bottom-h.bottom+v+o)):e.bottom>h.bottom&&(v=e.bottom-h.bottom+o,n<0&&e.top-v<h.top&&(v=-(h.top+v-e.top+o)));else{let y=e.bottom-e.top,b=h.bottom-h.top;v=(r=="center"&&y<=b?e.top+y/2-b/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-b+o)-h.top}if(i=="nearest"?e.left<h.left?(w=-(h.left-e.left+s),n>0&&e.right>h.right+w&&(w=e.right-h.right+w+s)):e.right>h.right&&(w=e.right-h.right+s,n<0&&e.left<h.left+w&&(w=-(h.left+w-e.left+s))):w=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,w||v)if(f)u.scrollBy(w,v);else{let y=0,b=0;if(v){let _=c.scrollTop;c.scrollTop+=v/m,b=(c.scrollTop-_)*m}if(w){let _=c.scrollLeft;c.scrollLeft+=w/p,y=(c.scrollLeft-_)*p}e={left:e.left-y,top:e.top-b,right:e.right-y,bottom:e.bottom-b},y&&Math.abs(y-w)<1&&(i="nearest"),b&&Math.abs(b-v)<1&&(r="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function K7(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class X7{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?to(n):0),i,Math.min(e.focusOffset,i?to(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let Qu=null;function Oj(t){if(t.setActive)return t.setActive();if(Qu)return t.focus(Qu);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Qu==null?{get preventScroll(){return Qu={preventScroll:!0},!0}}:void 0),!Qu){Qu=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let yT;function Mu(t,e,n=e){let i=yT||(yT=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function qc(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function q7(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function Ij(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Y7(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,to(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=to(n))}else{if(n==t)return!0;i=Ru(n),n=n.parentNode}}function Dj(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function Lj(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=to(n)}else if(n.parentNode&&!hy(n))i=Ru(n),n=n.parentNode;else return null}}function jj(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!hy(n))i=Ru(n)+1,n=n.parentNode;else return null}}class Jn{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new Jn(e.parentNode,Ru(e),n)}static after(e,n){return new Jn(e.parentNode,Ru(e)+1,n)}}const AC=[];class At{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=At.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=wT(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=wT(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=to(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!At.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,u=i,c=i;l<this.children.length;l++){let d=this.children[l],h=u+d.length;if(u<e&&h>n)return d.domBoundsAround(e,n,u);if(h>=e&&r==-1&&(r=l,s=u),u>n&&d.dom.parentNode==this.dom){o=l,a=c;break}c=h,u=h+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=AC){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Fj(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}At.prototype.breakAfter=0;function wT(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Fj{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function $j(t,e,n,i,r,s,o,a,l){let{children:u}=t,c=u.length?u[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&c&&!o&&!h&&s.length<2&&c.merge(n,r,s.length?d:null,n==0,a,l))){if(i<u.length){let f=u[i];f&&(r<f.length||f.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(f=f.split(r),r=0),!h&&d&&f.merge(0,r,d,!0,0,l)?s[s.length-1]=f:((r||f.children.length&&!f.children[0].length)&&f.merge(0,r,null,!1,0,l),s.push(f))):f!=null&&f.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,a,0),e++));e<i&&s.length;)if(u[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function Bj(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),d=e-n;for(let h of i)d+=h.length;t.length+=d,$j(t,u,c,a,l,i,0,r,s)}let Oi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},RS=typeof document<"u"?document:{documentElement:{style:{}}};const MS=/Edge\/(\d+)/.exec(Oi.userAgent),zj=/MSIE \d/.test(Oi.userAgent),NS=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Oi.userAgent),j0=!!(zj||NS||MS),bT=!j0&&/gecko\/(\d+)/i.test(Oi.userAgent),Cb=!j0&&/Chrome\/(\d+)/.exec(Oi.userAgent),xT="webkitFontSmoothing"in RS.documentElement.style,Uj=!j0&&/Apple Computer/.test(Oi.vendor),ST=Uj&&(/Mobile\/\w+/.test(Oi.userAgent)||Oi.maxTouchPoints>2);var Ae={mac:ST||/Mac/.test(Oi.platform),windows:/Win/.test(Oi.platform),linux:/Linux|X11/.test(Oi.platform),ie:j0,ie_version:zj?RS.documentMode||6:NS?+NS[1]:MS?+MS[1]:0,gecko:bT,gecko_version:bT?+(/Firefox\/(\d+)/.exec(Oi.userAgent)||[0,0])[1]:0,chrome:!!Cb,chrome_version:Cb?+Cb[1]:0,ios:ST,android:/Android\b/.test(Oi.userAgent),webkit:xT,safari:Uj,webkit_version:xT?+(/\bAppleWebKit\/(\d+)/.exec(Oi.userAgent)||[0,0])[1]:0,tabSize:RS.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Z7=256;class ms extends At{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof ms)||this.length-(n-e)+i.length>Z7||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new ms(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Jn(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return J7(this.dom,e,n)}}class Uo extends At{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(Ij(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof Uo&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(Bj(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Uo(this.mark,n,o)}domAtPos(e){return Hj(this,e)}coordsAt(e,n){return Wj(this,e,n)}}function J7(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?Ae.chrome||Ae.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Mu(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return Ae.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?L0(l,o<0):l||null}class Oa extends At{static create(e,n,i){return new Oa(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=Oa.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Oa)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Oa&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return pt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):pt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Jn.before(this.dom):Jn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return L0(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class kd extends At{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof kd&&e.side==this.side}split(){return new kd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Jn.before(this.dom):Jn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return pt.empty}get isHidden(){return!0}}ms.prototype.children=Oa.prototype.children=kd.prototype.children=AC;function Hj(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Jn(n,0)}function Vj(t,e,n){let i,{children:r}=t;n>0&&e instanceof Uo&&r.length&&(i=r[r.length-1])instanceof Uo&&i.mark.eq(e.mark)?Vj(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function Wj(t,e,n){let i=null,r=-1,s=null,o=-1;function a(u,c){for(let d=0,h=0;d<u.children.length&&h<=c;d++){let f=u.children[d],p=h+f.length;p>=c&&(f.children.length?a(f,c-h):(!s||s.isHidden&&n>0)&&(p>c||h==p&&f.getSide()>0)?(s=f,o=c-h):(h<c||h==p&&f.getSide()<0&&!f.isHidden)&&(i=f,r=c-h)),h=p}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):Q7(t)}function Q7(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Yf(e);return n[n.length-1]||null}function OS(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const _T=Object.create(null);function fy(t,e,n){if(t==e)return!0;t||(t=_T),e||(e=_T);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function IS(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function eW(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Pl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var gi=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(gi||(gi={}));class Je extends Pu{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Xp(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new ol(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=Gj(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new ol(e,i,r,n,e.widget||null,!0)}static line(e){return new qp(e)}static set(e,n=!1){return gt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Je.none=gt.empty;class Xp extends Je{constructor(e){let{start:n,end:i}=Gj(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof Xp&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&fy(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Xp.prototype.point=!1;class qp extends Je{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof qp&&this.spec.class==e.spec.class&&fy(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}qp.prototype.mapMode=Ii.TrackBefore;qp.prototype.point=!0;class ol extends Je{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?Ii.TrackBefore:Ii.TrackAfter:Ii.TrackDel}get type(){return this.startSide!=this.endSide?gi.WidgetRange:this.startSide<=0?gi.WidgetBefore:gi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ol&&tW(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}ol.prototype.point=!0;function Gj(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function tW(t,e){return t==e||!!(t&&e&&t.compare(e))}function DS(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class sn extends At{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof sn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),Bj(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new sn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){fy(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){Vj(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=OS(n,this.attrs||{})),i&&(this.attrs=OS({class:i},this.attrs||{}))}domAtPos(e){return Hj(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(Ij(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(IS(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&At.get(r)instanceof Uo;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=At.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Ae.ios||!this.children.some(s=>s instanceof ms))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof ms)||/[^ -~]/.test(i.text))return null;let r=Yf(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=Wj(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof sn&&this.children.length==0&&e.children.length==0&&fy(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof sn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class Do extends At{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof Do)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Jn.before(this.dom):Jn.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new Do(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return AC}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):pt.empty}domBoundsAround(){return null}become(e){return e instanceof Do&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof LS?null:L0(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class LS extends Pl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class df{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Do&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new sn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(qm(new kd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Do)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(qm(new ms(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof ol){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof ol)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Do(i.widget||Cd.block,a,i));else{let l=Oa.create(i.widget||Cd.inline,a,a?0:i.startSide),u=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),c=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(d.append(qm(new kd(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(qm(l,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new df(e,n,i,s);return o.openEnd=gt.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function qm(t,e){for(let n of e)t=new Uo(n,[t],t.length);return t}class Cd extends Pl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Cd.inline=new Cd("span");Cd.block=new Cd("div");var jt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(jt||(jt={}));const Nu=jt.LTR,PC=jt.RTL;function Kj(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const nW=Kj("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),iW=Kj("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),jS=Object.create(null),ks=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);jS[e]=n,jS[n]=-e}function Xj(t){return t<=247?nW[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?iW[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const rW=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ia{get dir(){return this.level%2?PC:Nu}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function qj(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!qj(i.inner,r.inner))return!1}return!0}const kt=[];function sW(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let u=o,c=l,d=l;u<a;u++){let h=Xj(t.charCodeAt(u));h==512?h=c:h==8&&d==4&&(h=16),kt[u]=h==4?2:h,h&7&&(d=h),c=h}for(let u=o,c=l,d=l;u<a;u++){let h=kt[u];if(h==128)u<a-1&&c==kt[u+1]&&c&24?h=kt[u]=c:kt[u]=256;else if(h==64){let f=u+1;for(;f<a&&kt[f]==64;)f++;let p=u&&c==8||f<n&&kt[f]==8?d==1?1:8:256;for(let m=u;m<f;m++)kt[m]=p;u=f-1}else h==8&&d==1&&(kt[u]=1);c=h,h&7&&(d=h)}}}function oW(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let u=o?i[o-1].to:e,c=o<i.length?i[o].from:n;for(let d=u,h,f,p;d<c;d++)if(f=jS[h=t.charCodeAt(d)])if(f<0){for(let m=a-3;m>=0;m-=3)if(ks[m+1]==-f){let w=ks[m+2],v=w&2?r:w&4?w&1?s:r:0;v&&(kt[d]=kt[ks[m]]=v),a=m;break}}else{if(ks.length==189)break;ks[a++]=d,ks[a++]=h,ks[a++]=l}else if((p=kt[d])==2||p==1){let m=p==r;l=m?0:1;for(let w=a-3;w>=0;w-=3){let v=ks[w+2];if(v&2)break;if(m)ks[w+2]|=2;else{if(v&4)break;ks[w+2]|=4}}}}}function aW(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let u=kt[l];if(u==256){let c=l+1;for(;;)if(c==a){if(r==n.length)break;c=n[r++].to,a=r<n.length?n[r].from:e}else if(kt[c]==256)c++;else break;let d=s==1,h=(c<e?kt[c]:i)==1,f=d==h?d?1:2:i;for(let p=c,m=r,w=m?n[m-1].to:t;p>l;)p==w&&(p=n[--m].from,w=m?n[m-1].to:t),kt[--p]=f;l=c}else s=u,l++}}}function FS(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,u=0;l<n;){let c=!0,d=!1;if(u==s.length||l<s[u].from){let m=kt[l];m!=a&&(c=!1,d=m==16)}let h=!c&&a==1?[]:null,f=c?i:i+1,p=l;e:for(;;)if(u<s.length&&p==s[u].from){if(d)break e;let m=s[u];if(!c)for(let w=m.to,v=u+1;;){if(w==n)break e;if(v<s.length&&s[v].from==w)w=s[v++].to;else{if(kt[w]==a)break e;break}}if(u++,h)h.push(m);else{m.from>l&&o.push(new Ia(l,m.from,f));let w=m.direction==Nu!=!(f%2);$S(t,w?i+1:i,r,m.inner,m.from,m.to,o),l=m.to}p=m.to}else{if(p==n||(c?kt[p]!=a:kt[p]==a))break;p++}h?FS(t,l,p,i+1,r,h,o):l<p&&o.push(new Ia(l,p,f)),l=p}else for(let l=n,u=s.length;l>e;){let c=!0,d=!1;if(!u||l>s[u-1].to){let m=kt[l-1];m!=a&&(c=!1,d=m==16)}let h=!c&&a==1?[]:null,f=c?i:i+1,p=l;e:for(;;)if(u&&p==s[u-1].to){if(d)break e;let m=s[--u];if(!c)for(let w=m.from,v=u;;){if(w==e)break e;if(v&&s[v-1].to==w)w=s[--v].from;else{if(kt[w-1]==a)break e;break}}if(h)h.push(m);else{m.to<l&&o.push(new Ia(m.to,l,f));let w=m.direction==Nu!=!(f%2);$S(t,w?i+1:i,r,m.inner,m.from,m.to,o),l=m.from}p=m.from}else{if(p==e||(c?kt[p-1]!=a:kt[p-1]==a))break;p--}h?FS(t,p,l,i+1,r,h,o):p<l&&o.push(new Ia(p,l,f)),l=p}}function $S(t,e,n,i,r,s,o){let a=e%2?2:1;sW(t,r,s,i,a),oW(t,r,s,i,a),aW(r,s,i,a),FS(t,r,s,e,n,i,o)}function lW(t,e,n){if(!t)return[new Ia(0,0,e==PC?1:0)];if(e==Nu&&!n.length&&!rW.test(t))return Yj(t.length);if(n.length)for(;t.length>kt.length;)kt[kt.length]=256;let i=[],r=e==Nu?0:1;return $S(t,r,r,n,0,t.length,i),i}function Yj(t){return[new Ia(0,t,0)]}let Zj="";function uW(t,e,n,i,r){var s;let o=i.head-t.from,a=Ia.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],u=l.side(r,n);if(o==u){let h=a+=r?1:-1;if(h<0||h>=e.length)return null;l=e[a=h],o=l.side(!r,n),u=l.side(r,n)}let c=Un(t.text,o,l.forward(r,n));(c<l.from||c>l.to)&&(c=u),Zj=t.text.slice(Math.min(o,c),Math.max(o,c));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&c==u&&d.level+(r?0:1)<l.level?ie.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):ie.cursor(c+t.from,l.forward(r,n)?-1:1,l.level)}function cW(t,e,n){for(let i=e;i<n;i++){let r=Xj(t.charCodeAt(i));if(r==1)return Nu;if(r==2||r==4)return PC}return Nu}const Jj=Pe.define(),Qj=Pe.define(),eF=Pe.define(),tF=Pe.define(),BS=Pe.define(),nF=Pe.define(),iF=Pe.define(),TC=Pe.define(),RC=Pe.define(),rF=Pe.define({combine:t=>t.some(e=>e)}),sF=Pe.define({combine:t=>t.some(e=>e)}),oF=Pe.define();class Yc{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Yc(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Yc(ie.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ym=Ze.define({map:(t,e)=>t.map(e)}),aF=Ze.define();function ir(t,e,n){let i=t.facet(tF);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const xa=Pe.define({combine:t=>t.length?t[0]:!0});let dW=0;const jh=Pe.define();class Gn{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.extension=s(this)}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new Gn(dW++,e,i,r,a=>{let l=[jh.of(a)];return o&&l.push(Zf.of(u=>{let c=u.plugin(a);return c?o(c):Je.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return Gn.define(i=>new e(i),n)}}class Eb{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(ir(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){ir(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){ir(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const lF=Pe.define(),MC=Pe.define(),Zf=Pe.define(),uF=Pe.define(),NC=Pe.define(),cF=Pe.define();function kT(t,e){let n=t.state.facet(cF);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return gt.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let u=s-e.from,c=o-e.from,d=r;for(let h=a.length-1;h>=0;h--,l--){let f=a[h].spec.bidiIsolate,p;if(f==null&&(f=cW(e.text,u,c)),l>0&&d.length&&(p=d[d.length-1]).to==u&&p.direction==f)p.to=c,d=p.inner;else{let m={from:u,to:c,direction:f,inner:[]};d.push(m),d=m.inner}}}}),r}const dF=Pe.define();function OC(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(dF)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Fh=Pe.define();class Lr{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Lr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],u=o-a,c=l?l.fromB:1e9;for(;s<n.length&&n[s]<c;){let d=n[s],h=n[s+1],f=Math.max(a,d),p=Math.min(c,h);if(f<=p&&new Lr(f+u,p+u,f,p).addToSet(i),h>c)break;s+=2}if(!l)return i;new Lr(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class py{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=pn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Lr(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new py(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class CT extends At{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Je.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new sn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Lr(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!yW(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?fW(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;i=new Lr(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Ae.ie||Ae.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=gW(o,a,e.changes);return i=Lr.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ae.chrome||Ae.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Do&&o.widget instanceof LS&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:d}=a,h,f,p,m;if(i&&i.range.fromB<d&&i.range.toB>c){let _=df.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),k=df.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);f=_.breakAtStart,p=_.openStart,m=k.openEnd;let C=this.compositionView(i);k.breakAtStart?C.breakAfter=1:k.content.length&&C.merge(C.length,C.length,k.content[0],!1,k.openStart,0)&&(C.breakAfter=k.content[0].breakAfter,k.content.shift()),_.content.length&&C.merge(0,0,_.content[_.content.length-1],!0,0,_.openEnd)&&_.content.pop(),h=_.content.concat(C).concat(k.content)}else({content:h,breakAtStart:f,openStart:p,openEnd:m}=df.build(this.view.state.doc,c,d,this.decorations,this.dynamicDecorationMap));let{i:w,off:v}=s.findPos(u,1),{i:y,off:b}=s.findPos(l,-1);$j(this,y,b,w,v,h,f,p,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(aF)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new ms(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new Uo(r,[n],n.length);let i=new sn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=At.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&sv(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),u=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Ae.gecko&&a.empty&&!this.hasComposition&&hW(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=u=new Jn(d,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!cf(l.node,l.offset,c.anchorNode,c.anchorOffset)||!cf(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,a))&&(this.view.observer.ignore(()=>{Ae.android&&Ae.chrome&&this.dom.contains(c.focusNode)&&vW(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=qf(this.view.root);if(d)if(a.empty){if(Ae.gecko){let h=pW(l.node,l.offset);if(h&&h!=3){let f=(h==1?Lj:jj)(l.node,l.offset);f&&(l=new Jn(f.node,f.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new Jn(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Jn(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&cf(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=qf(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=sn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);i.collapse(c.node,c.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=At.get(n.childNodes[r]);s instanceof sn&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=At.get(n.childNodes[r]);s instanceof sn&&(i=s.domAtPos(s.length))}return i?new Jn(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=At.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof sn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,u=l-a.length;if(l<e)break;if(u<=e&&(u<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof sn&&!(i instanceof sn&&n>=0)))i=a,r=u;else if(i&&u==e&&l==e&&a instanceof Do&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=u}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof sn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof ms))return null;let s=Un(r.text,i);if(s==i)return null;let o=Mu(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==jt.LTR;for(let u=0,c=0;c<this.children.length;c++){let d=this.children[c],h=u+d.length;if(h>r)break;if(u>=i){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let p=d.dom.lastChild,m=p?Yf(p):[];if(m.length){let w=m[m.length-1],v=l?w.right-f.left:f.right-w.left;v>a&&(a=v,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?jt.RTL:jt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof sn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Yf(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new Fj(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(Je.replace({widget:new LS(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return Je.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Zf).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(uF).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(gt.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(oF))try{if(u(this.view,e.range,e))return!0}catch(c){ir(this.view.state,c,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=OC(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;G7(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==jt.LTR)}}function hW(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function hF(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=Lj(n.focusNode,n.focusOffset),r=jj(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=At.get(r.node);if(!a||a instanceof ms&&a.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let l=At.get(i.node);!l||l instanceof ms&&l.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function fW(t,e,n){let i=hF(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,u=new Lr(l.mapPos(s),l.mapPos(o),s,o),c=[];for(let d=r.parentNode;;d=d.parentNode){let h=At.get(d);if(h instanceof Uo)c.push({node:d,deco:h.mark});else{if(h instanceof sn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:u,text:r,marks:c,line:d};if(d!=t.contentDOM)c.push({node:d,deco:new Xp({inclusive:!0,attributes:eW(d),tagName:d.tagName.toLowerCase()})});else return null}}}function pW(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let mW=class{constructor(){this.changes=[]}compareRange(e,n){DS(e,n,this.changes)}comparePoint(e,n){DS(e,n,this.changes)}};function gW(t,e,n){let i=new mW;return gt.compare(t,e,n,i),i.changes}function vW(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function yW(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function wW(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return ie.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=Un(r.text,s,!1):a=Un(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let u=Un(r.text,o,!1);if(i(r.text.slice(u,o))!=l)break;o=u}for(;a<r.length;){let u=Un(r.text,a);if(i(r.text.slice(a,u))!=l)break;a=u}return ie.range(o+r.from,a+r.from)}function bW(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function xW(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Ab(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function ET(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function AT(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function zS(t,e,n){let i,r,s,o,a=!1,l,u,c,d;for(let p=t.firstChild;p;p=p.nextSibling){let m=Yf(p);for(let w=0;w<m.length;w++){let v=m[w];r&&Ab(r,v)&&(v=ET(AT(v,r.bottom),r.top));let y=bW(e,v),b=xW(n,v);if(y==0&&b==0)return p.nodeType==3?PT(p,e,n):zS(p,e,n);if(!i||o>b||o==b&&s>y){i=p,r=v,s=y,o=b;let _=b?n<v.top?-1:1:y?e<v.left?-1:1:0;a=!_||(_>0?w<m.length-1:w>0)}y==0?n>v.bottom&&(!c||c.bottom<v.bottom)?(l=p,c=v):n<v.top&&(!d||d.top>v.top)&&(u=p,d=v):c&&Ab(c,v)?c=AT(c,v.bottom):d&&Ab(d,v)&&(d=ET(d,v.top))}}if(c&&c.bottom>=n?(i=l,r=c):d&&d.top<=n&&(i=u,r=d),!i)return{node:t,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return PT(i,h,n);if(a&&i.contentEditable!="false")return zS(i,h,n);let f=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:f}}function PT(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=Mu(t,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let d=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&d<s){let h=e>=(c.left+c.right)/2,f=h;if((Ae.chrome||Ae.gecko)&&Mu(t,a).getBoundingClientRect().left==c.right&&(f=!h),d<=0)return{node:t,offset:a+(f?1:0)};r=a+(f?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function fF(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:d}=e,h=d-a;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let _=t.viewState.heightOracle.textHeight/2,k=!1;l=t.elementAtHeight(h),l.type!=gi.Text;)for(;h=i>0?l.bottom+_:l.top-_,!(h>=0&&h<=u);){if(k)return n?null:0;k=!0,i=-i}d=a+h;let f=l.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:TT(t,o,l,c,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:TT(t,o,l,c,d);let p=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:p,w=m.elementFromPoint(c,d);w&&!t.contentDOM.contains(w)&&(w=null),w||(c=Math.max(o.left+1,Math.min(o.right-1,c)),w=m.elementFromPoint(c,d),w&&!t.contentDOM.contains(w)&&(w=null));let v,y=-1;if(w&&((r=t.docView.nearest(w))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let _=p.caretPositionFromPoint(c,d);_&&({offsetNode:v,offset:y}=_)}else if(p.caretRangeFromPoint){let _=p.caretRangeFromPoint(c,d);_&&({startContainer:v,startOffset:y}=_,(!t.contentDOM.contains(v)||Ae.safari&&SW(v,y,c)||Ae.chrome&&_W(v,y,c))&&(v=void 0))}v&&(y=Math.min(to(v),y))}if(!v||!t.docView.dom.contains(v)){let _=sn.find(t.docView,f);if(!_)return h>l.top+l.height/2?l.to:l.from;({node:v,offset:y}=zS(_.dom,c,d))}let b=t.docView.nearest(v);if(!b)return null;if(b.isWidget&&((s=b.dom)===null||s===void 0?void 0:s.nodeType)==1){let _=b.dom.getBoundingClientRect();return e.y<_.top||e.y<=_.bottom&&e.x<=(_.left+_.right)/2?b.posAtStart:b.posAtEnd}else return b.localPosFromDOM(v,y)+b.posAtStart}function TT(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+B7(o,s,t.state.tabSize)}function SW(t,e,n){let i;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return Mu(t,i-1,i).getBoundingClientRect().left>n}function _W(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Mu(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function US(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==gi.Text))return i}return n}function kW(t,e,n,i){let r=US(t,e.head),s=!i||r.type!=gi.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==jt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return ie.cursor(l,n?-1:1)}return ie.cursor(n?r.to:r.from,n?-1:1)}function RT(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let u=uW(r,s,o,a,n),c=Zj;if(!u){if(r.number==(n?t.state.doc.lines:1))return a;c=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),u=t.visualLineSide(r,!n)}if(l){if(!l(c))return a}else{if(!i)return u;l=i(c)}a=u}}function CW(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Hn.Space&&(r=o),r==o}}function EW(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return ie.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(r,e.assoc||-1),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let f=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-f.from))),a=(s<0?f.top:f.bottom)+c}let d=l.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=a+(h+f)*s,m=fF(t,{x:d,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?m<r:m>r)){let w=t.docView.coordsForChar(m),v=!w||p<w.top?-1:1;return ie.cursor(m,v,void 0,o)}}}function ov(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function Pb(t,e,n){let i=ov(t.state.facet(NC).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:ie.cursor(i,i<n.from?1:-1)}const $h="";class AW{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(it.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=$h}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=At.get(r),l=At.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:hy(r))||hy(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=At.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(PW(e,i.node,i.offset)?n:0))}}function PW(t,e,n){for(;;){if(!e||n<to(e))return!1;if(e==t)return!0;n=Ru(e)+1,e=e.parentNode}}class MT{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class TW{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:NW(e),l=new AW(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=OW(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!TS(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!TS(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),c=e.viewport;if((Ae.ios||Ae.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let d=Math.min(l,u),h=Math.max(l,u),f=c.from-d,p=c.to-h;(f==0||f==1||d==0)&&(p==0||p==-1||h==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=ie.single(u,l)}}}function pF(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,u=null;(s===8||Ae.android&&e.text.length<a-o)&&(l=r.to,u="end");let c=MW(t.state.doc.sliceString(o,a,$h),e.text,l-o,u);c&&(Ae.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==$h+$h&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:pt.of(e.text.slice(c.from,c.toB).split($h))})}else i&&(!t.hasFocus&&t.state.facet(xa)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(Ae.mac||Ae.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=ie.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:pt.of([" "])}):Ae.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=ie.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:pt.of([" "])}),n)return IC(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function IC(t,e,n,i=-1){if(Ae.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(Ae.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&qc(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&qc(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&qc(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=RW(t,e,n));return t.state.facet(nF).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function RW(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let u=t.state.sliceDoc(e.from,e.to),c,d=n&&hF(t,n.main.head);if(d){let p=e.insert.length-(e.to-e.from);c={from:d.from,to:d.to-p}}else c=t.state.doc.lineAt(s.head);let h=s.to-e.to,f=s.to-s.from;i=r.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:a,range:l||p.map(a)};let m=p.to-h,w=m-u.length;if(p.to-p.from!=f||t.state.sliceDoc(w,m)!=u||p.to>=c.from&&p.from<=c.to)return{range:p};let v=r.changes({from:w,to:m,insert:e.insert}),y=p.to-s.to;return{changes:v,range:l?ie.range(Math.max(0,l.anchor+y),Math.max(0,l.head+y)):p.map(v)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function MW(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function NW(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new MT(n,i)),(r!=n||s!=i)&&e.push(new MT(r,s))),e}function OW(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?ie.single(n+e,i+e):null}class IW{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ae.safari&&e.contentDOM.addEventListener("input",()=>null),Ae.gecko&&YW(e.contentDOM.ownerDocument)}handleEvent(e){!UW(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=DW(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&gF.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ae.android&&Ae.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Ae.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=mF.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||LW.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,qc(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ae.safari&&!Ae.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function NT(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){ir(n.state,r)}}}function DW(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec;if(r&&r.domEventHandlers)for(let s in r.domEventHandlers){let o=r.domEventHandlers[s];o&&n(s).handlers.push(NT(i.value,o))}if(r&&r.domEventObservers)for(let s in r.domEventObservers){let o=r.domEventObservers[s];o&&n(s).observers.push(NT(i.value,o))}}for(let i in gs)n(i).handlers.push(gs[i]);for(let i in Hr)n(i).observers.push(Hr[i]);return e}const mF=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],LW="dthko",gF=[16,17,18,20,91,92,224,225],Zm=6;function Jm(t){return Math.max(0,t)*.7+8}function jW(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class FW{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=K7(e.contentDOM),this.atoms=e.state.facet(NC).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(it.allowMultipleSelections)&&$W(e,n),this.dragging=zW(e,n)&&wF(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&jW(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=OC(this.view);e.clientX-l.left<=r+Zm?n=-Jm(r-e.clientX):e.clientX+l.right>=o-Zm&&(n=Jm(e.clientX-o)),e.clientY-l.top<=s+Zm?i=-Jm(s-e.clientY):e.clientY+l.bottom>=a-Zm&&(i=Jm(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=ov(this.atoms,r.from,0);o!=r.from&&(s=ie.cursor(o,-1))}else{let o=ov(this.atoms,r.from,-1),a=ov(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=ie.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?ie.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function $W(t,e){let n=t.state.facet(Jj);return n.length?n[0](e):Ae.mac?e.metaKey:e.ctrlKey}function BW(t,e){let n=t.state.facet(Qj);return n.length?n[0](e):Ae.mac?!e.altKey:!e.ctrlKey}function zW(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=qf(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function UW(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=At.get(n))&&i.ignoreEvent(e))return!1;return!0}const gs=Object.create(null),Hr=Object.create(null),vF=Ae.ie&&Ae.ie_version<15||Ae.ios&&Ae.webkit_version<604;function HW(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),yF(t,n.value)},50)}function F0(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function yF(t,e){e=F0(t.state,TC,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(HS!=null&&n.selection.ranges.every(l=>l.empty)&&HS==s.toString()){let l=-1;i=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:d},range:ie.cursor(u.from+d.length)}})}else o?i=n.changeByRange(l=>{let u=s.line(r++);return{changes:{from:l.from,to:l.to,insert:u.text},range:ie.cursor(l.from+u.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Hr.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};gs.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Hr.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Hr.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};gs.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(eF))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=GW(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new FW(t,e,n,i)),i&&t.observer.ignore(()=>{Oj(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function OT(t,e,n,i){if(i==1)return ie.cursor(e,n);if(i==2)return wW(t.state,e,n);{let r=sn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,ie.range(o,a)}}let IT=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function VW(t,e,n,i){let r=sn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&IT(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&IT(n,i,a)?1:o&&o.bottom>=i?-1:1}function DT(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:VW(t,n,e.clientX,e.clientY)}}const WW=Ae.ie&&Ae.ie_version<=11;let LT=null,jT=0,FT=0;function wF(t){if(!WW)return t.detail;let e=LT,n=FT;return LT=t,FT=Date.now(),jT=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(jT+1)%3:1}function GW(t,e){let n=DT(t,e),i=wF(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=DT(t,s),u,c=OT(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=OT(t,n.pos,n.bias,i),h=Math.min(d.from,c.from),f=Math.max(d.to,c.to);c=h<c.from?ie.range(h,f):ie.range(f,h)}return o?r.replaceRange(r.main.extend(c.from,c.to)):a&&i==1&&r.ranges.length>1&&(u=KW(r,l.pos))?u:a?r.addRange(c):ie.create([c])}}}function KW(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return ie.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}gs.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=ie.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",F0(t.state,RC,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};gs.dragend=t=>(t.inputState.draggedContent=null,!1);function $T(t,e,n,i){if(n=F0(t.state,TC,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&BW(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}gs.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&$T(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return $T(t,e,i,!0),!0}return!1};gs.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=vF?null:e.clipboardData;return n?(yF(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(HW(t),!1)};function XW(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function qW(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:F0(t,RC,e.join(t.lineBreak)),ranges:n,linewise:i}}let HS=null;gs.copy=gs.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=qW(t.state);if(!n&&!r)return!1;HS=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=vF?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(XW(t,n),!1)};const bF=Yo.define();function xF(t,e){let n=[];for(let i of t.facet(iF)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:bF.of(!0)}):null}function SF(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=xF(t.state,e);n?t.dispatch(n):t.update([])}},10)}Hr.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),SF(t)};Hr.blur=t=>{t.observer.clearSelectionRange(),SF(t)};Hr.compositionstart=Hr.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Hr.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ae.chrome&&Ae.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Hr.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};gs.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),u=t.posAtDOM(a.endContainer,a.endOffset);return IC(t,{from:l,to:u,insert:t.state.toText(s)},null),!0}}let r;if(Ae.chrome&&Ae.android&&(r=mF.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Ae.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Ae.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Hr.compositionend(t,e),20),!1};const BT=new Set;function YW(t){BT.has(t)||(BT.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const zT=["pre-wrap","normal","pre-line","break-spaces"];let Ed=!1;function UT(){Ed=!1}class ZW{constructor(e){this.lineWrapping=e,this.doc=pt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return zT.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=zT.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class JW{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class zs{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?gi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ol?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new zs(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var It=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(It||(It={}));const av=.001;class vi{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>av&&(Ed=!0),this.height=e)}replace(e,n,i){return vi.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:d}=r[a],h=s.lineAt(l,It.ByPosNoHeight,i.setDoc(n),0,0),f=h.to>=u?h:s.lineAt(u,It.ByPosNoHeight,i,0,0);for(d+=f.to-u,u=f.to;a>0&&h.from<=r[a-1].toA;)l=r[a-1].fromA,c=r[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,It.ByPosNoHeight,i,0,0));c+=h.from-l,l=h.from;let p=DC.build(i.setDoc(o),e,c,d);s=my(s,s.replace(l,u,p))}return s.updateHeight(i,0)}static empty(){return new Zi(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new QW(vi.of(e.slice(0,n)),o,vi.of(e.slice(i)))}}function my(t,e){return t==e?t:(t.constructor!=e.constructor&&(Ed=!0),e)}vi.prototype.size=1;class _F extends vi{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new zs(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Zi extends _F{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new zs(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof Zi||r instanceof Dn&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Dn?r=new Zi(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):vi.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Dn extends vi{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),c=n.doc.lineAt(u),d=a+c.length*l,h=Math.max(i,e-d/2);return new zs(c.from,c.length,h,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:c,length:d}=n.doc.line(s+u);return new zs(c,d,i+a*u,a,0)}}lineAt(e,n,i,r,s){if(n==It.ByHeight)return this.blockAt(e,i,r,s);if(n==It.ByPosNoHeight){let{from:f,to:p}=i.doc.lineAt(e);return new zs(f,p-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),u=i.doc.lineAt(e),c=a+u.length*l,d=u.number-o,h=r+a*d+l*(u.from-s-d);return new zs(u.from,u.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(i,s);for(let c=e,d=r;c<=n;){let h=i.doc.lineAt(c);if(c==e){let p=h.number-a;d+=l*p+u*(e-s-p)}let f=l+u*h.length;o(new zs(h.from,h.length,d,f,0)),d+=f,c=h.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Dn?i[i.length-1]=new Dn(s.length+r):i.push(null,new Dn(r-1))}if(e>0){let s=i[0];s instanceof Dn?i[0]=new Dn(e+s.length):i.unshift(new Dn(e-1),null)}return vi.of(i)}decomposeLeft(e,n){n.push(new Dn(e-1),null)}decomposeRight(e,n){n.push(null,new Dn(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new Dn(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=av&&(l=-2);let h=new Zi(c,d);h.outdated=!1,o.push(h),a+=c+1}a<=s&&o.push(null,new Dn(s-a).updateHeight(e,a));let u=vi.of(o);return(l<0||Math.abs(u.height-this.height)>=av||Math.abs(l-this.heightMetrics(e,n).perLine)>=av)&&(Ed=!0),my(this,u)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class QW extends vi{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==It.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=n==It.ByPosNoHeight?It.ByPosNoHeight:It.ByPos;return l?u.join(this.right.lineAt(a,c,i,o,a)):this.left.lineAt(a,c,i,r,s).join(u)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let u=this.lineAt(l,It.ByPos,i,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&HT(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),HT(s,a)}return vi.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?vi.of(this.break?[e,null,n]:[e,n]):(this.left=my(this.left,e),this.right=my(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function HT(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Dn&&(i=t[e+1])instanceof Dn&&t.splice(e-1,3,new Dn(n.length+1+i.length))}const eG=5;class DC{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Zi?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Zi(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new _F(o,r,i)):(o||s||r>=eG)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Zi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Dn(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Zi)return e;let n=new Zi(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Zi)&&!this.isCovered?this.nodes.push(new Zi(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Zi&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new DC(i,e);return gt.spans(n,i,r,s,0),s.finish(i)}}function tG(t,e,n){let i=new nG;return gt.compare(t,e,n,i,0),i.changes}class nG{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&DS(e,n,this.changes,5)}}function iG(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,d=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&d.overflow!="visible"){let h=c.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=Math.min(u==t.parentNode?r.innerHeight:l,h.bottom)}u=d.position=="absolute"||d.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function rG(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Tb{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return Je.replace({widget:new sG(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class sG extends Pl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class VT{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=WT,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=jt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(MC).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new ZW(n),this.stateDeco=e.facet(Zf).filter(i=>typeof i!="function"),this.heightMap=vi.empty().applyChanges(this.stateDeco,pt.empty,this.heightOracle.setDoc(e.doc),[new Lr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Je.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Qm(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?WT:new LC(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Bh(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Zf).filter(c=>typeof c!="function");let r=e.changedRanges,s=Lr.extendWithRanges(r,tG(i,this.stateDeco,e?e.changes:pn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);UT(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Ed)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(sF)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?jt.RTL:jt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0;if(a.width&&a.height){let{scaleX:_,scaleY:k}=Nj(n,a);(_>.005&&Math.abs(this.scaleX-_)>.005||k>.005&&Math.abs(this.scaleY-k)>.005)&&(this.scaleX=_,this.scaleY=k,u|=8,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=Dj(e.scrollDOM);let p=(this.printing?rG:iG)(n,this.paddingTop),m=p.top-this.pixelViewport.top,w=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let y=a.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let _=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(_)&&(o=!0),o||r.lineWrapping&&Math.abs(y-this.contentDOMWidth)>r.charWidth){let{lineHeight:k,charWidth:C,textHeight:E}=e.docView.measureTextSize();o=k>0&&r.refresh(s,k,C,E,y/C,_),o&&(e.docView.minWidth=0,u|=8)}m>0&&w>0?c=Math.max(m,w):m<0&&w<0&&(c=Math.min(m,w)),UT();for(let k of this.viewports){let C=k.from==this.viewport.from?_:e.docView.measureVisibleLineHeights(k);this.heightMap=(o?vi.empty().applyChanges(this.stateDeco,pt.empty,this.heightOracle,[new Lr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new JW(k.from,C))}Ed&&(u|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Qm(r.lineAt(o-i*1e3,It.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,It.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(u,It.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?h=d.top:h=d.bottom-c,l=new Qm(r.lineAt(h-1e3/2,It.ByHeight,s,0,0).from,r.lineAt(h+c+1e3/2,It.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Qm(this.heightMap.lineAt(i,It.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,It.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,It.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,It.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new Tb(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=jt.LTR&&!i)return[];let a=[],l=(c,d,h,f)=>{if(d-c<s)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let v of m)if(v>c&&v<d){l(c,v-10,h,f),l(v+10,d,h,f);return}let w=aG(e,v=>v.from>=h.from&&v.to<=h.to&&Math.abs(v.from-c)<s&&Math.abs(v.to-d)<s&&!m.some(y=>v.from<y&&v.to>y));if(!w){if(d<h.to&&n&&i&&n.visibleRanges.some(b=>b.from<=d&&b.to>=d)){let b=n.moveToLineBoundary(ie.cursor(d),!1,!0).head;b>c&&(d=b)}let v=this.gapSize(h,c,d,f),y=i||v<2e6?v:2e6;w=new Tb(c,d,v,y)}a.push(w)},u=c=>{if(c.length<o||c.type!=gi.Text)return;let d=oG(c.from,c.to,this.stateDeco);if(d.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,f,p;if(i){let m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,v;if(h!=null){let y=tg(d,h),b=((this.visibleBottom-this.visibleTop)/2+m)/c.height;w=y-b,v=y+b}else w=(this.visibleTop-c.top-m)/c.height,v=(this.visibleBottom-c.top+m)/c.height;f=eg(d,w),p=eg(d,v)}else{let m=d.total*this.heightOracle.charWidth,w=r*this.heightOracle.charWidth,v=0;if(m>2e6)for(let C of e)C.from>=c.from&&C.from<c.to&&C.size!=C.displaySize&&C.from*this.heightOracle.charWidth+v<this.pixelViewport.left&&(v=C.size-C.displaySize);let y=this.pixelViewport.left+v,b=this.pixelViewport.right+v,_,k;if(h!=null){let C=tg(d,h),E=((b-y)/2+w)/m;_=C-E,k=C+E}else _=(y-w)/m,k=(b+w)/m;f=eg(d,_),p=eg(d,k)}f>c.from&&l(c.from,f,c,d),p<c.to&&l(p,c.to,c,d)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return a}gapSize(e,n,i,r){let s=tg(r,i)-tg(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Tb.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Je.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];gt.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Bh(this.heightMap.lineAt(e,It.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Bh(this.heightMap.lineAt(this.scaler.fromDOM(e),It.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Bh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Qm=class{constructor(e,n){this.from=e,this.to=n}};function oG(t,e,n){let i=[],r=t,s=0;return gt.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function eg({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function tg(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function aG(t,e){for(let n of t)if(e(n))return n}const WT={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class LC{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let u=n.lineAt(a,It.ByPos,e,0,0).top,c=n.lineAt(l,It.ByPos,e,0,0).bottom;return r+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof LC?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function Bh(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new zs(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>Bh(r,e)):t._content)}const ng=Pe.define({combine:t=>t.join(" ")}),VS=Pe.define({combine:t=>t.indexOf(!0)>-1}),WS=rl.newName(),kF=rl.newName(),CF=rl.newName(),EF={"&light":"."+kF,"&dark":"."+CF};function GS(t,e,n){return new rl(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const lG=GS("."+WS,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},EF),uG={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Rb=Ae.ie&&Ae.ie_version<=11;class cG{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new X7,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(Ae.ie&&Ae.ie_version<=11||Ae.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Ae.chrome&&Ae.chrome_version<126)&&(this.editContext=new hG(e),e.state.facet(xa)&&(e.contentDOM.editContext=this.editContext.editContext)),Rb&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(xa)?i.root.activeElement!=this.dom:!sv(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Ae.ie&&Ae.ie_version<=11||Ae.android&&Ae.chrome)&&!i.state.selection.main.empty&&r.focusNode&&cf(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=qf(e.root);if(!n)return!1;let i=Ae.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&dG(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=sv(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Y7(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,uG),Rb&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Rb&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&qc(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&sv(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new TW(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=pF(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=GT(n,e.previousSibling||e.target.previousSibling,-1),r=GT(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(xa)!=e.state.facet(xa)&&(e.view.contentDOM.editContext=e.state.facet(xa)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function GT(t,e,n){for(;e;){let i=At.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function KT(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return cf(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function dG(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return KT(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?KT(t,n):null}class hG{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let{anchor:r}=e.state.selection.main,s=this.toEditorPos(i.updateRangeStart),o=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:s,drifted:!1});let a={from:s,to:o,insert:pt.of(i.text.split(`
`))};a.from==this.from&&r<this.from?a.from=r:a.to==this.to&&r>this.to&&(a.to=r),!(a.from==a.to&&!a.insert.length)&&(this.pendingContextChange=a,e.state.readOnly||IC(e,a,ie.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(Je.mark({attributes:{style:l}}).range(this.toEditorPos(s.rangeStart),this.toEditorPos(s.rangeEnd)))}}e.dispatch({effects:aF.of(Je.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=qf(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,u)=>{if(i)return;let c=u.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(u)){r=this.pendingContextChange=null,n+=c,this.to+=c;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+u.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),u.toString()),this.to+=c}n+=c}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e){let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Me{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||q7(e.parent)||document,this.viewState=new VT(e.state||it.create(e)),e.scrollTo&&e.scrollTo.is(Ym)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(jh).map(r=>new Eb(r));for(let r of this.plugins)r.update(this);this.observer=new cG(this),this.inputState=new IW(this),this.inputState.ensureHandlers(this.plugins),this.docView=new CT(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof bn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(bF))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=xF(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(it.phrases)!=this.state.facet(it.phrases))return this.setState(s);r=py.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new Yc(f.empty?f:ie.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(Ym)&&(d=f.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=gy.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(Fh)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(ng)!=r.state.facet(ng)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let h of this.state.facet(BS))try{h(r)}catch(f){ir(this.state,f,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!pF(this,c)&&u.force&&qc(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new VT(e),this.plugins=e.facet(jh).map(i=>new Eb(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new CT(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(jh),i=e.state.facet(jh);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new Eb(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){ir(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(Dj(i))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(r);s=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(f=>{try{return f.read(this)}catch(p){return ir(this.state,p),XT}}),d=py.create(this,this.state,[]),h=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d),h&&this.docViewUpdate());for(let f=0;f<u.length;f++)if(c[f]!=XT)try{let p=u[f];p.write&&p.write(c[f],this)}catch(p){ir(this.state,p)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=r+p,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(BS))a(n)}get themeClasses(){return WS+" "+(this.state.facet(VS)?CF:kF)+" "+this.state.facet(ng)}updateAttrs(){let e=qT(this,lF,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(xa)?"true":"false",class:"cm-content",style:`${Ae.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),qT(this,MC,n);let i=this.observer.ignore(()=>{let r=IS(this.contentDOM,this.contentAttrs,n),s=IS(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Me.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Fh);let e=this.state.facet(Me.cspNonce);rl.mount(this.root,this.styleModules.concat(lG).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return Pb(this,e,RT(this,e,n,i))}moveByGroup(e,n){return Pb(this,e,RT(this,e,n,i=>CW(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return ie.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return kW(this,e,n,i)}moveVertically(e,n,i){return Pb(this,e,EW(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),fF(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Ia.find(s,e-r.from,-1,n)];return L0(i,o.dir==jt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(rF)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>fG)return Yj(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||qj(s.isolates,i=kT(this,e))))return s.order;i||(i=kT(this,e));let r=lW(e.text,n,i);return this.bidiCache.push(new gy(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ae.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Oj(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Ym.of(new Yc(typeof e=="number"?ie.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Ym.of(new Yc(ie.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Gn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Gn.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=rl.newName(),r=[ng.of(i),Fh.of(GS(`.${i}`,e))];return n&&n.dark&&r.push(VS.of(!0)),r}static baseTheme(e){return Wp.lowest(Fh.of(GS("."+WS,e,EF)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&At.get(i)||At.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Me.styleModule=Fh;Me.inputHandler=nF;Me.clipboardInputFilter=TC;Me.clipboardOutputFilter=RC;Me.scrollHandler=oF;Me.focusChangeEffect=iF;Me.perLineTextDirection=rF;Me.exceptionSink=tF;Me.updateListener=BS;Me.editable=xa;Me.mouseSelectionStyle=eF;Me.dragMovesSelection=Qj;Me.clickAddsSelectionRange=Jj;Me.decorations=Zf;Me.outerDecorations=uF;Me.atomicRanges=NC;Me.bidiIsolatedRanges=cF;Me.scrollMargins=dF;Me.darkTheme=VS;Me.cspNonce=Pe.define({combine:t=>t.length?t[0]:""});Me.contentAttributes=MC;Me.editorAttributes=lF;Me.lineWrapping=Me.contentAttributes.of({class:"cm-lineWrapping"});Me.announce=Ze.define();const fG=4096,XT={};class gy{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:jt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new gy(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function qT(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&OS(o,n)}return n}const pG=Ae.mac?"mac":Ae.windows?"win":Ae.linux?"linux":"key";function mG(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function ig(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const gG=Wp.default(Me.domEventHandlers({keydown(t,e){return TF(PF(e.state),t,e,"editor")}})),AF=Pe.define({enables:gG}),YT=new WeakMap;function PF(t){let e=t.facet(AF),n=YT.get(e);return n||YT.set(e,n=wG(e.reduce((i,r)=>i.concat(r),[]))),n}function vG(t,e,n){return TF(PF(t.state),e,t,n)}let Sa=null;const yG=4e3;function wG(t,e=pG){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(v=>mG(v,e));for(let v=1;v<p.length;v++){let y=p.slice(0,v).join(" ");r(y,!0),f[y]||(f[y]={preventDefault:!0,stopPropagation:!1,run:[b=>{let _=Sa={view:b,prefix:y,scope:o};return setTimeout(()=>{Sa==_&&(Sa=null)},yG),!0}]})}let m=p.join(" ");r(m,!1);let w=f[m]||(f[m]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&w.run.push(l),u&&(w.preventDefault=!0),c&&(w.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let h in c)c[h].run.push(f=>d(f,KS))}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let KS=null;function TF(t,e,n,i){KS=e;let r=V7(e),s=fi(r,0),o=ss(s)==r.length&&r!=" ",a="",l=!1,u=!1,c=!1;Sa&&Sa.view==n&&Sa.scope==i&&(a=Sa.prefix+" ",gF.indexOf(e.keyCode)<0&&(u=!0,Sa=null));let d=new Set,h=w=>{if(w){for(let v of w.run)if(!d.has(v)&&(d.add(v),v(n)))return w.stopPropagation&&(c=!0),!0;w.preventDefault&&(w.stopPropagation&&(c=!0),u=!0)}return!1},f=t[i],p,m;return f&&(h(f[a+ig(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ae.windows&&e.ctrlKey&&e.altKey)&&(p=sl[e.keyCode])&&p!=r?(h(f[a+ig(p,e,!0)])||e.shiftKey&&(m=Xf[e.keyCode])!=r&&m!=p&&h(f[a+ig(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(f[a+ig(r,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),KS=null,l}class Yp{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=RF(e);return[new Yp(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return bG(e,n,i)}}function RF(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==jt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function ZT(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function bG(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==jt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=RF(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),d=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=a.right-(c?parseInt(c.paddingRight):0),f=US(t,i),p=US(t,r),m=f.type==gi.Text?f:null,w=p.type==gi.Text?p:null;if(m&&(t.lineWrapping||f.widgetLineBreaks)&&(m=ZT(t,i,1,m)),w&&(t.lineWrapping||p.widgetLineBreaks)&&(w=ZT(t,r,-1,w)),m&&w&&m.from==w.from&&m.to==w.to)return y(b(n.from,n.to,m));{let k=m?b(n.from,null,m):_(f,!1),C=w?b(null,n.to,w):_(p,!0),E=[];return(m||f).to<(w||p).from-(m&&w?1:0)||f.widgetLineBreaks>1&&k.bottom+t.defaultLineHeight/2<C.top?E.push(v(d,k.bottom,h,C.top)):k.bottom<C.top&&t.elementAtHeight((k.bottom+C.top)/2).type==gi.Text&&(k.bottom=C.top=(k.bottom+C.top)/2),y(k).concat(E).concat(y(C))}function v(k,C,E,P){return new Yp(e,k-l.left,C-l.top-.01,E-k,P-C+.01)}function y({top:k,bottom:C,horizontal:E}){let P=[];for(let M=0;M<E.length;M+=2)P.push(v(E[M],k,E[M+1],C));return P}function b(k,C,E){let P=1e9,M=-1e9,D=[];function L(z,X,ee,he,V){let F=t.coordsAtPos(z,z==E.to?-2:2),ne=t.coordsAtPos(ee,ee==E.from?2:-2);!F||!ne||(P=Math.min(F.top,ne.top,P),M=Math.max(F.bottom,ne.bottom,M),V==jt.LTR?D.push(s&&X?d:F.left,s&&he?h:ne.right):D.push(!s&&he?d:ne.left,!s&&X?h:F.right))}let $=k??E.from,G=C??E.to;for(let z of t.visibleRanges)if(z.to>$&&z.from<G)for(let X=Math.max(z.from,$),ee=Math.min(z.to,G);;){let he=t.state.doc.lineAt(X);for(let V of t.bidiSpans(he)){let F=V.from+he.from,ne=V.to+he.from;if(F>=ee)break;ne>X&&L(Math.max(F,X),k==null&&F<=$,Math.min(ne,ee),C==null&&ne>=G,V.dir)}if(X=he.to+1,X>=ee)break}return D.length==0&&L($,k==null,G,C==null,t.textDirection),{top:P,bottom:M,horizontal:D}}function _(k,C){let E=a.top+(C?k.top:k.bottom);return{top:E,bottom:E,horizontal:[]}}}function xG(t,e){return t.constructor==e.constructor&&t.eq(e)}class SG{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(lv)!=e.state.facet(lv)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(lv);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!xG(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const lv=Pe.define();function MF(t){return[Gn.define(e=>new SG(e,t)),lv.of(t)]}const NF=!Ae.ios,Jf=Pe.define({combine(t){return Al(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function _G(t={}){return[Jf.of(t),kG,CG,EG,sF.of(!0)]}function OF(t){return t.startState.facet(Jf)!=t.state.facet(Jf)}const kG=MF({above:!0,markers(t){let{state:e}=t,n=e.facet(Jf),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||NF:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:ie.cursor(r.head,r.head>r.anchor?-1:1);for(let l of Yp.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=OF(t);return n&&JT(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){JT(e.state,t)},class:"cm-cursorLayer"});function JT(t,e){e.style.animationDuration=t.facet(Jf).cursorBlinkRate+"ms"}const CG=MF({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Yp.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||OF(t)},class:"cm-selectionLayer"}),XS={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};NF&&(XS[".cm-line"].caretColor=XS[".cm-content"].caretColor="transparent !important");const EG=Wp.highest(Me.theme(XS));function QT(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function AG(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class PG{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,u,c)=>r(c,u,u+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,u,c)=>{let d=i(a,l,u);d&&c(u,u+a[0].length,d)};else if(i)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Tu,i=n.add.bind(n);for(let{from:r,to:s}of AG(e,this.maxLength))QT(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),d=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){d=a;break}}let h=[],f,p=(m,w,v)=>h.push(v.range(m,w));if(l==u)for(this.regexp.lastIndex=c-l.from;(f=this.regexp.exec(l.text))&&f.index<d-l.from;)this.addMatch(f,e,f.index+l.from,p);else QT(e.state.doc,this.regexp,c,d,(m,w)=>this.addMatch(w,e,m,p));n=n.update({filterFrom:c,filterTo:d,filter:(m,w)=>m<c||w>d,add:h})}}return n}}const qS=/x/.unicode!=null?"gu":"g",TG=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,qS),RG={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Mb=null;function MG(){var t;if(Mb==null&&typeof document<"u"&&document.body){let e=document.body.style;Mb=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Mb||!1}const uv=Pe.define({combine(t){let e=Al(t,{render:null,specialChars:TG,addSpecialChars:null});return(e.replaceTabs=!MG())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,qS)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,qS)),e}});function NG(t={}){return[uv.of(t),OG()]}let eR=null;function OG(){return eR||(eR=Gn.fromClass(class{constructor(t){this.view=t,this.decorations=Je.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(uv)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new PG({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=fi(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=Kp(o.text,a,i-o.from);return Je.replace({widget:new jG((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Je.replace({widget:new LG(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(uv);t.startState.facet(uv)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const IG="";function DG(t){return t>=32?IG:t==10?"":String.fromCharCode(9216+t)}class LG extends Pl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=DG(this.code),i=e.state.phrase("Control character")+" "+(RG[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class jG extends Pl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function FG(){return BG}const $G=Je.line({class:"cm-activeLine"}),BG=Gn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push($G.range(r.from)),e=r.from)}return Je.set(n)}},{decorations:t=>t.decorations}),ph="-10000px";class IF{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let u=s[l],c=-1;if(u){for(let d=0;d<this.tooltips.length;d++){let h=this.tooltips[d];h&&h.create==u.create&&(c=d)}if(c<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),a&&(a[l]=!!u.above);else{let d=o[l]=this.tooltipViews[c];a&&(a[l]=n[c]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,u)=>n[u]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function zG(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Nb=Pe.define({combine:t=>{var e,n,i;return{position:Ae.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||zG}}}),tR=new WeakMap,jC=Gn.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Nb);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new IF(t,FC,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(Nb);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=ph,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Ae.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==ph&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=OC(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Nb).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:c}=u,d=t.pos[a],h=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){c.style.top=ph;continue}let f=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,m=h.right-h.left,w=(e=tR.get(u))!==null&&e!==void 0?e:h.bottom-h.top,v=u.offset||HG,y=this.view.textDirection==jt.LTR,b=h.width>i.right-i.left?y?i.left:i.right-h.width:y?Math.max(i.left,Math.min(d.left-(f?14:0)+v.x,i.right-m)):Math.min(Math.max(i.left,d.left-m+(f?14:0)-v.x),i.right-m),_=this.above[a];!l.strictSide&&(_?d.top-w-p-v.y<i.top:d.bottom+w+p+v.y>i.bottom)&&_==i.bottom-d.bottom>d.top-i.top&&(_=this.above[a]=!_);let k=(_?d.top-i.top:i.bottom-d.bottom)-p;if(k<w&&u.resize!==!1){if(k<this.view.defaultLineHeight){c.style.top=ph;continue}tR.set(u,w),c.style.height=(w=k)/s+"px"}else c.style.height&&(c.style.height="");let C=_?d.top-w-p-v.y:d.bottom+p+v.y,E=b+m;if(u.overlap!==!0)for(let P of o)P.left<E&&P.right>b&&P.top<C+w&&P.bottom>C&&(C=_?P.top-w-2-p:P.bottom+p+2);if(this.position=="absolute"?(c.style.top=(C-t.parent.top)/s+"px",c.style.left=(b-t.parent.left)/r+"px"):(c.style.top=C/s+"px",c.style.left=b/r+"px"),f){let P=d.left+(y?v.x:-v.x)-(b+14-7);f.style.left=P/r+"px"}u.overlap!==!0&&o.push({left:b,top:C,right:E,bottom:C+w}),c.classList.toggle("cm-tooltip-above",_),c.classList.toggle("cm-tooltip-below",!_),u.positioned&&u.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=ph}},{eventObservers:{scroll(){this.maybeMeasure()}}}),UG=Me.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),HG={x:0,y:0},FC=Pe.define({enables:[jC,UG]}),vy=Pe.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class $0{static create(e){return new $0(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new IF(e,vy,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const VG=FC.compute([vy],t=>{let e=t.facet(vy);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:$0.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class WG{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof Oa)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(c=>c.from<=r&&c.to>=r),u=l&&l.dir==jt.RTL?-1:1;s=n.x<a.left?-u:u}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>ir(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(jC),n=e?e.manager.tooltips.findIndex(i=>i.create==$0.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!GG(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!KG(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const rg=4;function GG(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=n-rg&&e.clientX<=i+rg&&e.clientY>=r-rg&&e.clientY<=s+rg}function KG(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function XG(t,e={}){let n=Ze.define(),i=xi.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,Ii.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),a);u.pos=l,u.end!=null&&(u.end=s.changes.mapPos(u.end)),o.push(u)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(YG)&&(r=[]);return r},provide:r=>vy.from(r)});return{active:i,extension:[i,Gn.define(r=>new WG(r,t,i,n,e.hoverTime||300)),VG]}}function qG(t,e){let n=t.plugin(jC);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const YG=Ze.define(),nR=Pe.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Qf(t,e){let n=t.plugin(DF),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const DF=Gn.fromClass(class{constructor(t){this.input=t.state.facet(ep),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(nR);this.top=new sg(t,!0,e.topContainer),this.bottom=new sg(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(nR);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new sg(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new sg(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(ep);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),a.push(c)):(c=this.panels[u],c.update&&c.update(t)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Me.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class sg{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=iR(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=iR(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function iR(t){let e=t.nextSibling;return t.remove(),e}const ep=Pe.define({enables:DF});class al extends Pu{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}al.prototype.elementClass="";al.prototype.toDOM=void 0;al.prototype.mapMode=Ii.TrackBefore;al.prototype.startSide=al.prototype.endSide=-1;al.prototype.point=!0;const cv=Pe.define(),ZG=Pe.define(),dv=Pe.define(),rR=Pe.define({combine:t=>t.some(e=>e)});function JG(t){return[QG]}const QG=Gn.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(dv).map(e=>new oR(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(rR),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(rR)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=gt.iter(this.view.state.facet(cv),this.view.viewport.from),i=[],r=this.gutters.map(s=>new eK(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==gi.Text&&o){YS(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==gi.Text){YS(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(dv),n=t.state.facet(dv),i=t.docChanged||t.heightChanged||t.viewportChanged||!gt.eq(t.startState.facet(cv),t.state.facet(cv),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new oR(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Me.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==jt.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function sR(t){return Array.isArray(t)?t:[t]}function YS(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class eK{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=gt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new LF(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];YS(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(ZG)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class oR{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=sR(n.markers(e)),n.initialSpacer&&(this.spacer=new LF(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=sR(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!gt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class LF{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),tK(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(i+=" "+c);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),u&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function tK(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const nK=Pe.define(),iK=Pe.define(),Tc=Pe.define({combine(t){return Al(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return i}})}});class Ob extends al{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ib(t,e){return t.state.facet(Tc).formatNumber(e,t.state)}const rK=dv.compute([Tc],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(nK)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new Ob(Ib(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(iK)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Tc)!=e.state.facet(Tc),initialSpacer(e){return new Ob(Ib(e,aR(e.state.doc.lines)))},updateSpacer(e,n){let i=Ib(n.view,aR(n.view.state.doc.lines));return i==e.number?e:new Ob(i)},domEventHandlers:t.facet(Tc).domEventHandlers}));function sK(t={}){return[Tc.of(t),JG(),rK]}function aR(t){let e=9;for(;e<t;)e=e*10+9;return e}const oK=new class extends al{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},aK=cv.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(oK.range(r)))}return gt.of(e)});function lK(){return aK}function jF(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=jF(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function $e(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=jF(t))&&(i&&(i+=" "),i+=e);return i}const $C={BASE_URL:"/VonSim8/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},uK=Symbol(($C?"production":void 0)!=="production"?"RESET":""),cK=t=>typeof(t==null?void 0:t.then)=="function";function dK(t=()=>{try{return window.localStorage}catch(n){($C?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let i,r;const s={getItem:(l,u)=>{var c,d;const h=p=>{if(p=p||"",i!==p){try{r=JSON.parse(p,e==null?void 0:e.reviver)}catch{return u}i=p}return r},f=(d=(c=t())==null?void 0:c.getItem(l))!=null?d:null;return cK(f)?f.then(h):h(f)},setItem:(l,u)=>{var c;return(c=t())==null?void 0:c.setItem(l,JSON.stringify(u,void 0))},removeItem:l=>{var u;return(u=t())==null?void 0:u.removeItem(l)}},o=l=>(u,c,d)=>l(u,h=>{let f;try{f=JSON.parse(h||"")}catch{f=d}c(f)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,u)=>{if(!(t()instanceof window.Storage))return()=>{};const c=d=>{d.storageArea===t()&&d.key===l&&u(d.newValue)};return window.addEventListener("storage",c),()=>{window.removeEventListener("storage",c)}}),a&&(s.subscribe=o(a)),s}const hK=dK();function FF(t,e,n=hK,i){const r=i==null?void 0:i.getOnInit,s=me(r?n.getItem(t,e):e);return($C?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},me(a=>a(s),(a,l,u)=>{const c=typeof u=="function"?u(a(s)):u;return c===uK?(l(s,e),n.removeItem(t)):c instanceof Promise?c.then(d=>(l(s,d),n.setItem(t,d))):(l(s,c),n.setItem(t,c))})}function fK(t,e=globalThis==null?void 0:globalThis.document){const n=ni(t);x.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var pK="DismissableLayer",ZS="dismissableLayer.update",mK="dismissableLayer.pointerDownOutside",gK="dismissableLayer.focusOutside",lR,$F=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zp=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,u=x.useContext($F),[c,d]=x.useState(null),h=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=x.useState({}),p=ct(e,E=>d(E)),m=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(w),y=c?m.indexOf(c):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,_=y>=v,k=yK(E=>{const P=E.target,M=[...u.branches].some(D=>D.contains(P));!_||M||(r==null||r(E),o==null||o(E),E.defaultPrevented||a==null||a())},h),C=wK(E=>{const P=E.target;[...u.branches].some(D=>D.contains(P))||(s==null||s(E),o==null||o(E),E.defaultPrevented||a==null||a())},h);return fK(E=>{y===u.layers.size-1&&(i==null||i(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},h),x.useEffect(()=>{if(c)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(lR=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),uR(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=lR)}},[c,h,n,u]),x.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),uR())},[c,u]),x.useEffect(()=>{const E=()=>f({});return document.addEventListener(ZS,E),()=>document.removeEventListener(ZS,E)},[]),g.jsx(He.div,{...l,ref:p,style:{pointerEvents:b?_?"auto":"none":void 0,...t.style},onFocusCapture:ve(t.onFocusCapture,C.onFocusCapture),onBlurCapture:ve(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ve(t.onPointerDownCapture,k.onPointerDownCapture)})});Zp.displayName=pK;var vK="DismissableLayerBranch",BF=x.forwardRef((t,e)=>{const n=x.useContext($F),i=x.useRef(null),r=ct(e,i);return x.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g.jsx(He.div,{...t,ref:r})});BF.displayName=vK;function yK(t,e=globalThis==null?void 0:globalThis.document){const n=ni(t),i=x.useRef(!1),r=x.useRef(()=>{});return x.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){zF(mK,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function wK(t,e=globalThis==null?void 0:globalThis.document){const n=ni(t),i=x.useRef(!1);return x.useEffect(()=>{const r=s=>{s.target&&!i.current&&zF(gK,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function uR(){const t=new CustomEvent(ZS);document.dispatchEvent(t)}function zF(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?yC(r,s):r.dispatchEvent(s)}var bK=Zp,xK=BF,Db=0;function BC(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??cR()),document.body.insertAdjacentElement("beforeend",t[1]??cR()),Db++,()=>{Db===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Db--}},[])}function cR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Lb="focusScope.autoFocusOnMount",jb="focusScope.autoFocusOnUnmount",dR={bubbles:!1,cancelable:!0},SK="FocusScope",B0=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=x.useState(null),u=ni(r),c=ni(s),d=x.useRef(null),h=ct(e,m=>l(m)),f=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(i){let m=function(b){if(f.paused||!a)return;const _=b.target;a.contains(_)?d.current=_:la(d.current,{select:!0})},w=function(b){if(f.paused||!a)return;const _=b.relatedTarget;_!==null&&(a.contains(_)||la(d.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const k of b)k.removedNodes.length>0&&la(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",w);const y=new MutationObserver(v);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",w),y.disconnect()}}},[i,a,f.paused]),x.useEffect(()=>{if(a){fR.add(f);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(Lb,dR);a.addEventListener(Lb,u),a.dispatchEvent(v),v.defaultPrevented||(_K(PK(UF(a)),{select:!0}),document.activeElement===m&&la(a))}return()=>{a.removeEventListener(Lb,u),setTimeout(()=>{const v=new CustomEvent(jb,dR);a.addEventListener(jb,c),a.dispatchEvent(v),v.defaultPrevented||la(m??document.body,{select:!0}),a.removeEventListener(jb,c),fR.remove(f)},0)}}},[a,u,c,f]);const p=x.useCallback(m=>{if(!n&&!i||f.paused)return;const w=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(w&&v){const y=m.currentTarget,[b,_]=kK(y);b&&_?!m.shiftKey&&v===_?(m.preventDefault(),n&&la(b,{select:!0})):m.shiftKey&&v===b&&(m.preventDefault(),n&&la(_,{select:!0})):v===y&&m.preventDefault()}},[n,i,f.paused]);return g.jsx(He.div,{tabIndex:-1,...o,ref:h,onKeyDown:p})});B0.displayName=SK;function _K(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(la(i,{select:e}),document.activeElement!==n)return}function kK(t){const e=UF(t),n=hR(e,t),i=hR(e.reverse(),t);return[n,i]}function UF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function hR(t,e){for(const n of t)if(!CK(n,{upTo:e}))return n}function CK(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function EK(t){return t instanceof HTMLInputElement&&"select"in t}function la(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&EK(t)&&e&&t.select()}}var fR=AK();function AK(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=pR(t,e),t.unshift(e)},remove(e){var n;t=pR(t,e),(n=t[0])==null||n.resume()}}}function pR(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function PK(t){return t.filter(e=>e.tagName!=="A")}const TK=["top","right","bottom","left"],ll=Math.min,er=Math.max,yy=Math.round,og=Math.floor,Js=t=>({x:t,y:t}),RK={left:"right",right:"left",bottom:"top",top:"bottom"},MK={start:"end",end:"start"};function JS(t,e,n){return er(t,ll(e,n))}function Ho(t,e){return typeof t=="function"?t(e):t}function Vo(t){return t.split("-")[0]}function Hd(t){return t.split("-")[1]}function zC(t){return t==="x"?"y":"x"}function UC(t){return t==="y"?"height":"width"}function ul(t){return["top","bottom"].includes(Vo(t))?"y":"x"}function HC(t){return zC(ul(t))}function NK(t,e,n){n===void 0&&(n=!1);const i=Hd(t),r=HC(t),s=UC(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=wy(o)),[o,wy(o)]}function OK(t){const e=wy(t);return[QS(t),e,QS(e)]}function QS(t){return t.replace(/start|end/g,e=>MK[e])}function IK(t,e,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?r:i:e?i:r;case"left":case"right":return e?s:o;default:return[]}}function DK(t,e,n,i){const r=Hd(t);let s=IK(Vo(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(QS)))),s}function wy(t){return t.replace(/left|right|bottom|top/g,e=>RK[e])}function LK(t){return{top:0,right:0,bottom:0,left:0,...t}}function HF(t){return typeof t!="number"?LK(t):{top:t,right:t,bottom:t,left:t}}function by(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function mR(t,e,n){let{reference:i,floating:r}=t;const s=ul(e),o=HC(e),a=UC(o),l=Vo(e),u=s==="y",c=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,h=i[a]/2-r[a]/2;let f;switch(l){case"top":f={x:c,y:i.y-r.height};break;case"bottom":f={x:c,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:d};break;case"left":f={x:i.x-r.width,y:d};break;default:f={x:i.x,y:i.y}}switch(Hd(e)){case"start":f[o]-=h*(n&&u?-1:1);break;case"end":f[o]+=h*(n&&u?-1:1);break}return f}const jK=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:c,y:d}=mR(u,i,l),h=i,f={},p=0;for(let m=0;m<a.length;m++){const{name:w,fn:v}=a[m],{x:y,y:b,data:_,reset:k}=await v({x:c,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:f,rects:u,platform:o,elements:{reference:t,floating:e}});c=y??c,d=b??d,f={...f,[w]:{...f[w],..._}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):k.rects),{x:c,y:d}=mR(u,h,l)),m=-1)}return{x:c,y:d,placement:h,strategy:r,middlewareData:f}};async function tp(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Ho(e,t),p=HF(f),w=a[h?d==="floating"?"reference":"floating":d],v=by(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),y=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},k=by(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:b,strategy:l}):y);return{top:(v.top-k.top+p.top)/_.y,bottom:(k.bottom-v.bottom+p.bottom)/_.y,left:(v.left-k.left+p.left)/_.x,right:(k.right-v.right+p.right)/_.x}}const FK=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=Ho(t,e)||{};if(u==null)return{};const d=HF(c),h={x:n,y:i},f=HC(r),p=UC(f),m=await o.getDimensions(u),w=f==="y",v=w?"top":"left",y=w?"bottom":"right",b=w?"clientHeight":"clientWidth",_=s.reference[p]+s.reference[f]-h[f]-s.floating[p],k=h[f]-s.reference[f],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=C?C[b]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=a.floating[b]||s.floating[p]);const P=_/2-k/2,M=E/2-m[p]/2-1,D=ll(d[v],M),L=ll(d[y],M),$=D,G=E-m[p]-L,z=E/2-m[p]/2+P,X=JS($,z,G),ee=!l.arrow&&Hd(r)!=null&&z!==X&&s.reference[p]/2-(z<$?D:L)-m[p]/2<0,he=ee?z<$?z-$:z-G:0;return{[f]:h[f]+he,data:{[f]:X,centerOffset:z-X-he,...ee&&{alignmentOffset:he}},reset:ee}}}),$K=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...w}=Ho(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Vo(r),y=ul(a),b=Vo(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=h||(b||!m?[wy(a)]:OK(a)),C=p!=="none";!h&&C&&k.push(...DK(a,m,p,_));const E=[a,...k],P=await tp(e,w),M=[];let D=((i=s.flip)==null?void 0:i.overflows)||[];if(c&&M.push(P[v]),d){const z=NK(r,o,_);M.push(P[z[0]],P[z[1]])}if(D=[...D,{placement:r,overflows:M}],!M.every(z=>z<=0)){var L,$;const z=(((L=s.flip)==null?void 0:L.index)||0)+1,X=E[z];if(X)return{data:{index:z,overflows:D},reset:{placement:X}};let ee=($=D.filter(he=>he.overflows[0]<=0).sort((he,V)=>he.overflows[1]-V.overflows[1])[0])==null?void 0:$.placement;if(!ee)switch(f){case"bestFit":{var G;const he=(G=D.filter(V=>{if(C){const F=ul(V.placement);return F===y||F==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(F=>F>0).reduce((F,ne)=>F+ne,0)]).sort((V,F)=>V[1]-F[1])[0])==null?void 0:G[0];he&&(ee=he);break}case"initialPlacement":ee=a;break}if(r!==ee)return{reset:{placement:ee}}}return{}}}};function gR(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function vR(t){return TK.some(e=>t[e]>=0)}const BK=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=Ho(t,e);switch(i){case"referenceHidden":{const s=await tp(e,{...r,elementContext:"reference"}),o=gR(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:vR(o)}}}case"escaped":{const s=await tp(e,{...r,altBoundary:!0}),o=gR(s,n.floating);return{data:{escapedOffsets:o,escaped:vR(o)}}}default:return{}}}}};async function zK(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=Vo(n),a=Hd(n),l=ul(n)==="y",u=["left","top"].includes(o)?-1:1,c=s&&l?-1:1,d=Ho(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*c,y:h*u}:{x:h*u,y:f*c}}const UK=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await zK(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},HK=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:v,y}=w;return{x:v,y}}},...l}=Ho(t,e),u={x:n,y:i},c=await tp(e,l),d=ul(Vo(r)),h=zC(d);let f=u[h],p=u[d];if(s){const w=h==="y"?"top":"left",v=h==="y"?"bottom":"right",y=f+c[w],b=f-c[v];f=JS(y,f,b)}if(o){const w=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=p+c[w],b=p-c[v];p=JS(y,p,b)}const m=a.fn({...e,[h]:f,[d]:p});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[h]:s,[d]:o}}}}}},VK=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Ho(t,e),c={x:n,y:i},d=ul(r),h=zC(d);let f=c[h],p=c[d];const m=Ho(a,e),w=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const b=h==="y"?"height":"width",_=s.reference[h]-s.floating[b]+w.mainAxis,k=s.reference[h]+s.reference[b]-w.mainAxis;f<_?f=_:f>k&&(f=k)}if(u){var v,y;const b=h==="y"?"width":"height",_=["top","left"].includes(Vo(r)),k=s.reference[d]-s.floating[b]+(_&&((v=o.offset)==null?void 0:v[d])||0)+(_?0:w.crossAxis),C=s.reference[d]+s.reference[b]+(_?0:((y=o.offset)==null?void 0:y[d])||0)-(_?w.crossAxis:0);p<k?p=k:p>C&&(p=C)}return{[h]:f,[d]:p}}}},WK=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=Ho(t,e),c=await tp(e,u),d=Vo(r),h=Hd(r),f=ul(r)==="y",{width:p,height:m}=s.floating;let w,v;d==="top"||d==="bottom"?(w=d,v=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,w=h==="end"?"top":"bottom");const y=m-c.top-c.bottom,b=p-c.left-c.right,_=ll(m-c[w],y),k=ll(p-c[v],b),C=!e.middlewareData.shift;let E=_,P=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=b),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(E=y),C&&!h){const D=er(c.left,0),L=er(c.right,0),$=er(c.top,0),G=er(c.bottom,0);f?P=p-2*(D!==0||L!==0?D+L:er(c.left,c.right)):E=m-2*($!==0||G!==0?$+G:er(c.top,c.bottom))}await l({...e,availableWidth:P,availableHeight:E});const M=await o.getDimensions(a.floating);return p!==M.width||m!==M.height?{reset:{rects:!0}}:{}}}};function z0(){return typeof window<"u"}function Vd(t){return VF(t)?(t.nodeName||"").toLowerCase():"#document"}function ar(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ao(t){var e;return(e=(VF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function VF(t){return z0()?t instanceof Node||t instanceof ar(t).Node:!1}function vs(t){return z0()?t instanceof Element||t instanceof ar(t).Element:!1}function no(t){return z0()?t instanceof HTMLElement||t instanceof ar(t).HTMLElement:!1}function yR(t){return!z0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ar(t).ShadowRoot}function Jp(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=ys(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function GK(t){return["table","td","th"].includes(Vd(t))}function U0(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function VC(t){const e=WC(),n=vs(t)?ys(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function KK(t){let e=cl(t);for(;no(e)&&!Ad(e);){if(VC(e))return e;if(U0(e))return null;e=cl(e)}return null}function WC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ad(t){return["html","body","#document"].includes(Vd(t))}function ys(t){return ar(t).getComputedStyle(t)}function H0(t){return vs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function cl(t){if(Vd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||yR(t)&&t.host||ao(t);return yR(e)?e.host:e}function WF(t){const e=cl(t);return Ad(e)?t.ownerDocument?t.ownerDocument.body:t.body:no(e)&&Jp(e)?e:WF(e)}function np(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=WF(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=ar(r);if(s){const a=e_(o);return e.concat(o,o.visualViewport||[],Jp(r)?r:[],a&&n?np(a):[])}return e.concat(r,np(r,[],n))}function e_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function GF(t){const e=ys(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=no(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=yy(n)!==s||yy(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function GC(t){return vs(t)?t:t.contextElement}function Zc(t){const e=GC(t);if(!no(e))return Js(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=GF(e);let o=(s?yy(n.width):n.width)/i,a=(s?yy(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const XK=Js(0);function KF(t){const e=ar(t);return!WC()||!e.visualViewport?XK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function qK(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ar(t)?!1:e}function Ou(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=GC(t);let o=Js(1);e&&(i?vs(i)&&(o=Zc(i)):o=Zc(t));const a=qK(s,n,i)?KF(s):Js(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,c=r.width/o.x,d=r.height/o.y;if(s){const h=ar(s),f=i&&vs(i)?ar(i):i;let p=h,m=e_(p);for(;m&&i&&f!==p;){const w=Zc(m),v=m.getBoundingClientRect(),y=ys(m),b=v.left+(m.clientLeft+parseFloat(y.paddingLeft))*w.x,_=v.top+(m.clientTop+parseFloat(y.paddingTop))*w.y;l*=w.x,u*=w.y,c*=w.x,d*=w.y,l+=b,u+=_,p=ar(m),m=e_(p)}}return by({width:c,height:d,x:l,y:u})}function KC(t,e){const n=H0(t).scrollLeft;return e?e.left+n:Ou(ao(t)).left+n}function XF(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:KC(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function YK(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=ao(i),a=e?U0(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=Js(1);const c=Js(0),d=no(i);if((d||!d&&!s)&&((Vd(i)!=="body"||Jp(o))&&(l=H0(i)),no(i))){const f=Ou(i);u=Zc(i),c.x=f.x+i.clientLeft,c.y=f.y+i.clientTop}const h=o&&!d&&!s?XF(o,l,!0):Js(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+h.x,y:n.y*u.y-l.scrollTop*u.y+c.y+h.y}}function ZK(t){return Array.from(t.getClientRects())}function JK(t){const e=ao(t),n=H0(t),i=t.ownerDocument.body,r=er(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=er(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+KC(t);const a=-n.scrollTop;return ys(i).direction==="rtl"&&(o+=er(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function QK(t,e){const n=ar(t),i=ao(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const u=WC();(!u||u&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function eX(t,e){const n=Ou(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=no(t)?Zc(t):Js(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,u=i*s.y;return{width:o,height:a,x:l,y:u}}function wR(t,e,n){let i;if(e==="viewport")i=QK(t,n);else if(e==="document")i=JK(ao(t));else if(vs(e))i=eX(e,n);else{const r=KF(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return by(i)}function qF(t,e){const n=cl(t);return n===e||!vs(n)||Ad(n)?!1:ys(n).position==="fixed"||qF(n,e)}function tX(t,e){const n=e.get(t);if(n)return n;let i=np(t,[],!1).filter(a=>vs(a)&&Vd(a)!=="body"),r=null;const s=ys(t).position==="fixed";let o=s?cl(t):t;for(;vs(o)&&!Ad(o);){const a=ys(o),l=VC(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Jp(o)&&!l&&qF(t,o))?i=i.filter(c=>c!==o):r=a,o=cl(o)}return e.set(t,i),i}function nX(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?U0(e)?[]:tX(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((u,c)=>{const d=wR(e,c,r);return u.top=er(d.top,u.top),u.right=ll(d.right,u.right),u.bottom=ll(d.bottom,u.bottom),u.left=er(d.left,u.left),u},wR(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function iX(t){const{width:e,height:n}=GF(t);return{width:e,height:n}}function rX(t,e,n){const i=no(e),r=ao(e),s=n==="fixed",o=Ou(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Js(0);if(i||!i&&!s)if((Vd(e)!=="body"||Jp(r))&&(a=H0(e)),i){const h=Ou(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else r&&(l.x=KC(r));const u=r&&!i&&!s?XF(r,a):Js(0),c=o.left+a.scrollLeft-l.x-u.x,d=o.top+a.scrollTop-l.y-u.y;return{x:c,y:d,width:o.width,height:o.height}}function Fb(t){return ys(t).position==="static"}function bR(t,e){if(!no(t)||ys(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ao(t)===n&&(n=n.ownerDocument.body),n}function YF(t,e){const n=ar(t);if(U0(t))return n;if(!no(t)){let r=cl(t);for(;r&&!Ad(r);){if(vs(r)&&!Fb(r))return r;r=cl(r)}return n}let i=bR(t,e);for(;i&&GK(i)&&Fb(i);)i=bR(i,e);return i&&Ad(i)&&Fb(i)&&!VC(i)?n:i||KK(t)||n}const sX=async function(t){const e=this.getOffsetParent||YF,n=this.getDimensions,i=await n(t.floating);return{reference:rX(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function oX(t){return ys(t).direction==="rtl"}const aX={convertOffsetParentRelativeRectToViewportRelativeRect:YK,getDocumentElement:ao,getClippingRect:nX,getOffsetParent:YF,getElementRects:sX,getClientRects:ZK,getDimensions:iX,getScale:Zc,isElement:vs,isRTL:oX};function lX(t,e){let n=null,i;const r=ao(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:d,height:h}=t.getBoundingClientRect();if(a||e(),!d||!h)return;const f=og(c),p=og(r.clientWidth-(u+d)),m=og(r.clientHeight-(c+h)),w=og(u),y={rootMargin:-f+"px "+-p+"px "+-m+"px "+-w+"px",threshold:er(0,ll(1,l))||1};let b=!0;function _(k){const C=k[0].intersectionRatio;if(C!==l){if(!b)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(_,{...y,root:r.ownerDocument})}catch{n=new IntersectionObserver(_,y)}n.observe(t)}return o(!0),s}function uX(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,u=GC(t),c=r||s?[...u?np(u):[],...np(e)]:[];c.forEach(v=>{r&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=u&&a?lX(u,n):null;let h=-1,f=null;o&&(f=new ResizeObserver(v=>{let[y]=v;y&&y.target===u&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=f)==null||b.observe(e)})),n()}),u&&!l&&f.observe(u),f.observe(e));let p,m=l?Ou(t):null;l&&w();function w(){const v=Ou(t);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(w)}return n(),()=>{var v;c.forEach(y=>{r&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),d==null||d(),(v=f)==null||v.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const cX=UK,dX=HK,hX=$K,fX=WK,pX=BK,xR=FK,mX=VK,gX=(t,e,n)=>{const i=new Map,r={platform:aX,...n},s={...r.platform,_c:i};return jK(t,e,{...r,platform:s})};var hv=typeof document<"u"?x.useLayoutEffect:x.useEffect;function xy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!xy(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!xy(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function ZF(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function SR(t,e){const n=ZF(t);return Math.round(e*n)/n}function $b(t){const e=x.useRef(t);return hv(()=>{e.current=t}),e}function vX(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[c,d]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=x.useState(i);xy(h,i)||f(i);const[p,m]=x.useState(null),[w,v]=x.useState(null),y=x.useCallback(V=>{V!==C.current&&(C.current=V,m(V))},[]),b=x.useCallback(V=>{V!==E.current&&(E.current=V,v(V))},[]),_=s||p,k=o||w,C=x.useRef(null),E=x.useRef(null),P=x.useRef(c),M=l!=null,D=$b(l),L=$b(r),$=$b(u),G=x.useCallback(()=>{if(!C.current||!E.current)return;const V={placement:e,strategy:n,middleware:h};L.current&&(V.platform=L.current),gX(C.current,E.current,V).then(F=>{const ne={...F,isPositioned:$.current!==!1};z.current&&!xy(P.current,ne)&&(P.current=ne,Cl.flushSync(()=>{d(ne)}))})},[h,e,n,L,$]);hv(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,d(V=>({...V,isPositioned:!1})))},[u]);const z=x.useRef(!1);hv(()=>(z.current=!0,()=>{z.current=!1}),[]),hv(()=>{if(_&&(C.current=_),k&&(E.current=k),_&&k){if(D.current)return D.current(_,k,G);G()}},[_,k,G,D,M]);const X=x.useMemo(()=>({reference:C,floating:E,setReference:y,setFloating:b}),[y,b]),ee=x.useMemo(()=>({reference:_,floating:k}),[_,k]),he=x.useMemo(()=>{const V={position:n,left:0,top:0};if(!ee.floating)return V;const F=SR(ee.floating,c.x),ne=SR(ee.floating,c.y);return a?{...V,transform:"translate("+F+"px, "+ne+"px)",...ZF(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:ne}},[n,a,ee.floating,c.x,c.y]);return x.useMemo(()=>({...c,update:G,refs:X,elements:ee,floatingStyles:he}),[c,G,X,ee,he])}const yX=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?xR({element:i.current,padding:r}).fn(n):{}:i?xR({element:i,padding:r}).fn(n):{}}}},wX=(t,e)=>({...cX(t),options:[t,e]}),bX=(t,e)=>({...dX(t),options:[t,e]}),xX=(t,e)=>({...mX(t),options:[t,e]}),SX=(t,e)=>({...hX(t),options:[t,e]}),_X=(t,e)=>({...fX(t),options:[t,e]}),kX=(t,e)=>({...pX(t),options:[t,e]}),CX=(t,e)=>({...yX(t),options:[t,e]});var EX="Arrow",JF=x.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return g.jsx(He.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});JF.displayName=EX;var AX=JF;function XC(t){const[e,n]=x.useState(void 0);return ti(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var qC="Popper",[QF,Wd]=vC(qC),[PX,e$]=QF(qC),t$=t=>{const{__scopePopper:e,children:n}=t,[i,r]=x.useState(null);return g.jsx(PX,{scope:e,anchor:i,onAnchorChange:r,children:n})};t$.displayName=qC;var n$="PopperAnchor",i$=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=e$(n$,n),o=x.useRef(null),a=ct(e,o);return x.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:g.jsx(He.div,{...r,ref:a})});i$.displayName=n$;var YC="PopperContent",[TX,RX]=QF(YC),r$=x.forwardRef((t,e)=>{var S,T,N,R,K,W;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:f="optimized",onPlaced:p,...m}=t,w=e$(YC,n),[v,y]=x.useState(null),b=ct(e,te=>y(te)),[_,k]=x.useState(null),C=XC(_),E=(C==null?void 0:C.width)??0,P=(C==null?void 0:C.height)??0,M=i+(s!=="center"?"-"+s:""),D=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},L=Array.isArray(u)?u:[u],$=L.length>0,G={padding:D,boundary:L.filter(NX),altBoundary:$},{refs:z,floatingStyles:X,placement:ee,isPositioned:he,middlewareData:V}=vX({strategy:"fixed",placement:M,whileElementsMounted:(...te)=>uX(...te,{animationFrame:f==="always"}),elements:{reference:w.anchor},middleware:[wX({mainAxis:r+P,alignmentAxis:o}),l&&bX({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?xX():void 0,...G}),l&&SX({...G}),_X({...G,apply:({elements:te,rects:q,availableWidth:Re,availableHeight:je})=>{const{width:Be,height:Le}=q.reference,Ve=te.floating.style;Ve.setProperty("--radix-popper-available-width",`${Re}px`),Ve.setProperty("--radix-popper-available-height",`${je}px`),Ve.setProperty("--radix-popper-anchor-width",`${Be}px`),Ve.setProperty("--radix-popper-anchor-height",`${Le}px`)}}),_&&CX({element:_,padding:a}),OX({arrowWidth:E,arrowHeight:P}),h&&kX({strategy:"referenceHidden",...G})]}),[F,ne]=a$(ee),_e=ni(p);ti(()=>{he&&(_e==null||_e())},[he,_e]);const Z=(S=V.arrow)==null?void 0:S.x,ue=(T=V.arrow)==null?void 0:T.y,I=((N=V.arrow)==null?void 0:N.centerOffset)!==0,[O,B]=x.useState();return ti(()=>{v&&B(window.getComputedStyle(v).zIndex)},[v]),g.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:he?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:O,"--radix-popper-transform-origin":[(R=V.transformOrigin)==null?void 0:R.x,(K=V.transformOrigin)==null?void 0:K.y].join(" "),...((W=V.hide)==null?void 0:W.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:g.jsx(TX,{scope:n,placedSide:F,onArrowChange:k,arrowX:Z,arrowY:ue,shouldHideArrow:I,children:g.jsx(He.div,{"data-side":F,"data-align":ne,...m,ref:b,style:{...m.style,animation:he?void 0:"none"}})})})});r$.displayName=YC;var s$="PopperArrow",MX={top:"bottom",right:"left",bottom:"top",left:"right"},o$=x.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=RX(s$,i),o=MX[s.placedSide];return g.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:g.jsx(AX,{...r,ref:n,style:{...r.style,display:"block"}})})});o$.displayName=s$;function NX(t){return t!==null}var OX=t=>({name:"transformOrigin",options:t,fn(e){var w,v,y;const{placement:n,rects:i,middlewareData:r}=e,o=((w=r.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,c]=a$(n),d={start:"0%",center:"50%",end:"100%"}[c],h=(((v=r.arrow)==null?void 0:v.x)??0)+a/2,f=(((y=r.arrow)==null?void 0:y.y)??0)+l/2;let p="",m="";return u==="bottom"?(p=o?d:`${h}px`,m=`${-l}px`):u==="top"?(p=o?d:`${h}px`,m=`${i.floating.height+l}px`):u==="right"?(p=`${-l}px`,m=o?d:`${f}px`):u==="left"&&(p=`${i.floating.width+l}px`,m=o?d:`${f}px`),{data:{x:p,y:m}}}});function a$(t){const[e,n="center"]=t.split("-");return[e,n]}var ZC=t$,V0=i$,JC=r$,QC=o$,IX="Portal",Qp=x.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=x.useState(!1);ti(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?aV.createPortal(g.jsx(He.div,{...i,ref:e}),o):null});Qp.displayName=IX;var DX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ec=new WeakMap,ag=new WeakMap,lg={},Bb=0,l$=function(t){return t&&(t.host||l$(t.parentNode))},LX=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=l$(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},jX=function(t,e,n,i){var r=LX(e,Array.isArray(t)?t:[t]);lg[n]||(lg[n]=new WeakMap);var s=lg[n],o=[],a=new Set,l=new Set(r),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};r.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))c(h);else try{var f=h.getAttribute(i),p=f!==null&&f!=="false",m=(ec.get(h)||0)+1,w=(s.get(h)||0)+1;ec.set(h,m),s.set(h,w),o.push(h),m===1&&p&&ag.set(h,!0),w===1&&h.setAttribute(n,"true"),p||h.setAttribute(i,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return c(e),a.clear(),Bb++,function(){o.forEach(function(d){var h=ec.get(d)-1,f=s.get(d)-1;ec.set(d,h),s.set(d,f),h||(ag.has(d)||d.removeAttribute(i),ag.delete(d)),f||d.removeAttribute(n)}),Bb--,Bb||(ec=new WeakMap,ec=new WeakMap,ag=new WeakMap,lg={})}},eE=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=DX(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),jX(i,r,n,"aria-hidden")):function(){return null}},fv="right-scroll-bar-position",pv="width-before-scroll-bar",FX="with-scroll-bars-hidden",$X="--removed-body-scroll-bar-size";function zb(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function BX(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var zX=typeof window<"u"?x.useLayoutEffect:x.useEffect,_R=new WeakMap;function UX(t,e){var n=BX(null,function(i){return t.forEach(function(r){return zb(r,i)})});return zX(function(){var i=_R.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||zb(a,null)}),s.forEach(function(a){r.has(a)||zb(a,o)})}_R.set(n,t)},[t]),n}function HX(t){return t}function VX(t,e){e===void 0&&(e=HX);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return r}function WX(t){t===void 0&&(t={});var e=VX(null);return e.options=$s({async:!0,ssr:!1},t),e}var u$=function(t){var e=t.sideCar,n=hj(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return x.createElement(i,$s({},n))};u$.isSideCarExport=!0;function GX(t,e){return t.useMedium(e),u$}var c$=WX(),Ub=function(){},W0=x.forwardRef(function(t,e){var n=x.useRef(null),i=x.useState({onScrollCapture:Ub,onWheelCapture:Ub,onTouchMoveCapture:Ub}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,c=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,p=t.inert,m=t.allowPinchZoom,w=t.as,v=w===void 0?"div":w,y=t.gapMode,b=hj(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,k=UX([n,e]),C=$s($s({},b),r);return x.createElement(x.Fragment,null,c&&x.createElement(_,{sideCar:c$,removeScrollBar:u,shards:d,noIsolation:f,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:y}),o?x.cloneElement(x.Children.only(a),$s($s({},C),{ref:k})):x.createElement(v,$s({},C,{className:l,ref:k}),a))});W0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};W0.classNames={fullWidth:pv,zeroRight:fv};var KX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function XX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=KX();return e&&t.setAttribute("nonce",e),t}function qX(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function YX(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var ZX=function(){var t=0,e=null;return{add:function(n){t==0&&(e=XX())&&(qX(e,n),YX(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},JX=function(){var t=ZX();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},d$=function(){var t=JX(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},QX={left:0,top:0,right:0,gap:0},Hb=function(t){return parseInt(t||"",10)||0},eq=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Hb(n),Hb(i),Hb(r)]},tq=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return QX;var e=eq(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},nq=d$(),Jc="data-scroll-locked",iq=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(FX,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(Jc,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(fv,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(pv,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(fv," .").concat(fv,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(pv," .").concat(pv,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Jc,`] {
    `).concat($X,": ").concat(a,`px;
  }
`)},kR=function(){var t=parseInt(document.body.getAttribute(Jc)||"0",10);return isFinite(t)?t:0},rq=function(){x.useEffect(function(){return document.body.setAttribute(Jc,(kR()+1).toString()),function(){var t=kR()-1;t<=0?document.body.removeAttribute(Jc):document.body.setAttribute(Jc,t.toString())}},[])},sq=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;rq();var s=x.useMemo(function(){return tq(r)},[r]);return x.createElement(nq,{styles:iq(s,!e,r,n?"":"!important")})},t_=!1;if(typeof window<"u")try{var ug=Object.defineProperty({},"passive",{get:function(){return t_=!0,!0}});window.addEventListener("test",ug,ug),window.removeEventListener("test",ug,ug)}catch{t_=!1}var tc=t_?{passive:!1}:!1,oq=function(t){return t.tagName==="TEXTAREA"},h$=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!oq(t)&&n[e]==="visible")},aq=function(t){return h$(t,"overflowY")},lq=function(t){return h$(t,"overflowX")},CR=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=f$(t,i);if(r){var s=p$(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},uq=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},cq=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},f$=function(t,e){return t==="v"?aq(e):lq(e)},p$=function(t,e){return t==="v"?uq(e):cq(e)},dq=function(t,e){return t==="h"&&e==="rtl"?-1:1},hq=function(t,e,n,i,r){var s=dq(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),u=!1,c=o>0,d=0,h=0;do{var f=p$(t,a),p=f[0],m=f[1],w=f[2],v=m-w-s*p;(p||v)&&f$(t,a)&&(d+=v,h+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(c&&(Math.abs(d)<1||!r)||!c&&(Math.abs(h)<1||!r))&&(u=!0),u},cg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},ER=function(t){return[t.deltaX,t.deltaY]},AR=function(t){return t&&"current"in t?t.current:t},fq=function(t,e){return t[0]===e[0]&&t[1]===e[1]},pq=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},mq=0,nc=[];function gq(t){var e=x.useRef([]),n=x.useRef([0,0]),i=x.useRef(),r=x.useState(mq++)[0],s=x.useState(d$)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var m=d7([t.lockRef.current],(t.shards||[]).map(AR),!0).filter(Boolean);return m.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=x.useCallback(function(m,w){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=cg(m),y=n.current,b="deltaX"in m?m.deltaX:y[0]-v[0],_="deltaY"in m?m.deltaY:y[1]-v[1],k,C=m.target,E=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in m&&E==="h"&&C.type==="range")return!1;var P=CR(E,C);if(!P)return!0;if(P?k=E:(k=E==="v"?"h":"v",P=CR(E,C)),!P)return!1;if(!i.current&&"changedTouches"in m&&(b||_)&&(i.current=k),!k)return!0;var M=i.current||k;return hq(M,w,m,M==="h"?b:_,!0)},[]),l=x.useCallback(function(m){var w=m;if(!(!nc.length||nc[nc.length-1]!==s)){var v="deltaY"in w?ER(w):cg(w),y=e.current.filter(function(k){return k.name===w.type&&(k.target===w.target||w.target===k.shadowParent)&&fq(k.delta,v)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(AR).filter(Boolean).filter(function(k){return k.contains(w.target)}),_=b.length>0?a(w,b[0]):!o.current.noIsolation;_&&w.cancelable&&w.preventDefault()}}},[]),u=x.useCallback(function(m,w,v,y){var b={name:m,delta:w,target:v,should:y,shadowParent:vq(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(_){return _!==b})},1)},[]),c=x.useCallback(function(m){n.current=cg(m),i.current=void 0},[]),d=x.useCallback(function(m){u(m.type,ER(m),m.target,a(m,t.lockRef.current))},[]),h=x.useCallback(function(m){u(m.type,cg(m),m.target,a(m,t.lockRef.current))},[]);x.useEffect(function(){return nc.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,tc),document.addEventListener("touchmove",l,tc),document.addEventListener("touchstart",c,tc),function(){nc=nc.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,tc),document.removeEventListener("touchmove",l,tc),document.removeEventListener("touchstart",c,tc)}},[]);var f=t.removeScrollBar,p=t.inert;return x.createElement(x.Fragment,null,p?x.createElement(s,{styles:pq(r)}):null,f?x.createElement(sq,{gapMode:t.gapMode}):null)}function vq(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const yq=GX(c$,gq);var G0=x.forwardRef(function(t,e){return x.createElement(W0,$s({},t,{ref:e,sideCar:yq}))});G0.classNames=W0.classNames;var n_=["Enter"," "],wq=["ArrowDown","PageUp","Home"],m$=["ArrowUp","PageDown","End"],bq=[...wq,...m$],xq={ltr:[...n_,"ArrowRight"],rtl:[...n_,"ArrowLeft"]},Sq={ltr:["ArrowLeft"],rtl:["ArrowRight"]},em="Menu",[ip,_q,kq]=Up(em),[Gu,g$]=El(em,[kq,Wd,O0]),K0=Wd(),v$=O0(),[Cq,Ku]=Gu(em),[Eq,tm]=Gu(em),y$=t=>{const{__scopeMenu:e,open:n=!1,children:i,dir:r,onOpenChange:s,modal:o=!0}=t,a=K0(e),[l,u]=x.useState(null),c=x.useRef(!1),d=ni(s),h=Hp(r);return x.useEffect(()=>{const f=()=>{c.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>c.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),g.jsx(ZC,{...a,children:g.jsx(Cq,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:u,children:g.jsx(Eq,{scope:e,onClose:x.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:c,dir:h,modal:o,children:i})})})};y$.displayName=em;var Aq="MenuAnchor",tE=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=K0(n);return g.jsx(V0,{...r,...i,ref:e})});tE.displayName=Aq;var nE="MenuPortal",[Pq,w$]=Gu(nE,{forceMount:void 0}),b$=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=Ku(nE,e);return g.jsx(Pq,{scope:e,forceMount:n,children:g.jsx(qo,{present:n||s.open,children:g.jsx(Qp,{asChild:!0,container:r,children:i})})})};b$.displayName=nE;var jr="MenuContent",[Tq,iE]=Gu(jr),x$=x.forwardRef((t,e)=>{const n=w$(jr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Ku(jr,t.__scopeMenu),o=tm(jr,t.__scopeMenu);return g.jsx(ip.Provider,{scope:t.__scopeMenu,children:g.jsx(qo,{present:i||s.open,children:g.jsx(ip.Slot,{scope:t.__scopeMenu,children:o.modal?g.jsx(Rq,{...r,ref:e}):g.jsx(Mq,{...r,ref:e})})})})}),Rq=x.forwardRef((t,e)=>{const n=Ku(jr,t.__scopeMenu),i=x.useRef(null),r=ct(e,i);return x.useEffect(()=>{const s=i.current;if(s)return eE(s)},[]),g.jsx(rE,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ve(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Mq=x.forwardRef((t,e)=>{const n=Ku(jr,t.__scopeMenu);return g.jsx(rE,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),rE=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:p,...m}=t,w=Ku(jr,n),v=tm(jr,n),y=K0(n),b=v$(n),_=_q(n),[k,C]=x.useState(null),E=x.useRef(null),P=ct(e,E,w.onContentChange),M=x.useRef(0),D=x.useRef(""),L=x.useRef(0),$=x.useRef(null),G=x.useRef("right"),z=x.useRef(0),X=p?G0:x.Fragment,ee=p?{as:Au,allowPinchZoom:!0}:void 0,he=F=>{var S,T;const ne=D.current+F,_e=_().filter(N=>!N.disabled),Z=document.activeElement,ue=(S=_e.find(N=>N.ref.current===Z))==null?void 0:S.textValue,I=_e.map(N=>N.textValue),O=Hq(I,ne,ue),B=(T=_e.find(N=>N.textValue===O))==null?void 0:T.ref.current;(function N(R){D.current=R,window.clearTimeout(M.current),R!==""&&(M.current=window.setTimeout(()=>N(""),1e3))})(ne),B&&setTimeout(()=>B.focus())};x.useEffect(()=>()=>window.clearTimeout(M.current),[]),BC();const V=x.useCallback(F=>{var _e,Z;return G.current===((_e=$.current)==null?void 0:_e.side)&&Wq(F,(Z=$.current)==null?void 0:Z.area)},[]);return g.jsx(Tq,{scope:n,searchRef:D,onItemEnter:x.useCallback(F=>{V(F)&&F.preventDefault()},[V]),onItemLeave:x.useCallback(F=>{var ne;V(F)||((ne=E.current)==null||ne.focus(),C(null))},[V]),onTriggerLeave:x.useCallback(F=>{V(F)&&F.preventDefault()},[V]),pointerGraceTimerRef:L,onPointerGraceIntentChange:x.useCallback(F=>{$.current=F},[]),children:g.jsx(X,{...ee,children:g.jsx(B0,{asChild:!0,trapped:r,onMountAutoFocus:ve(s,F=>{var ne;F.preventDefault(),(ne=E.current)==null||ne.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:g.jsx(Zp,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f,children:g.jsx(ML,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:i,currentTabStopId:k,onCurrentTabStopIdChange:C,onEntryFocus:ve(l,F=>{v.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(JC,{role:"menu","aria-orientation":"vertical","data-state":j$(w.open),"data-radix-menu-content":"",dir:v.dir,...y,...m,ref:P,style:{outline:"none",...m.style},onKeyDown:ve(m.onKeyDown,F=>{const _e=F.target.closest("[data-radix-menu-content]")===F.currentTarget,Z=F.ctrlKey||F.altKey||F.metaKey,ue=F.key.length===1;_e&&(F.key==="Tab"&&F.preventDefault(),!Z&&ue&&he(F.key));const I=E.current;if(F.target!==I||!bq.includes(F.key))return;F.preventDefault();const B=_().filter(S=>!S.disabled).map(S=>S.ref.current);m$.includes(F.key)&&B.reverse(),zq(B)}),onBlur:ve(t.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(M.current),D.current="")}),onPointerMove:ve(t.onPointerMove,rp(F=>{const ne=F.target,_e=z.current!==F.clientX;if(F.currentTarget.contains(ne)&&_e){const Z=F.clientX>z.current?"right":"left";G.current=Z,z.current=F.clientX}}))})})})})})})});x$.displayName=jr;var Nq="MenuGroup",sE=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return g.jsx(He.div,{role:"group",...i,ref:e})});sE.displayName=Nq;var Oq="MenuLabel",S$=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return g.jsx(He.div,{...i,ref:e})});S$.displayName=Oq;var Sy="MenuItem",PR="menu.itemSelect",X0=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=x.useRef(null),o=tm(Sy,t.__scopeMenu),a=iE(Sy,t.__scopeMenu),l=ct(e,s),u=x.useRef(!1),c=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(PR,{bubbles:!0,cancelable:!0});d.addEventListener(PR,f=>i==null?void 0:i(f),{once:!0}),yC(d,h),h.defaultPrevented?u.current=!1:o.onClose()}};return g.jsx(_$,{...r,ref:l,disabled:n,onClick:ve(t.onClick,c),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),u.current=!0},onPointerUp:ve(t.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:ve(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||n_.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});X0.displayName=Sy;var _$=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=iE(Sy,n),a=v$(n),l=x.useRef(null),u=ct(e,l),[c,d]=x.useState(!1),[h,f]=x.useState("");return x.useEffect(()=>{const p=l.current;p&&f((p.textContent??"").trim())},[s.children]),g.jsx(ip.ItemSlot,{scope:n,disabled:i,textValue:r??h,children:g.jsx(NL,{asChild:!0,...a,focusable:!i,children:g.jsx(He.div,{role:"menuitem","data-highlighted":c?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:u,onPointerMove:ve(t.onPointerMove,rp(p=>{i?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ve(t.onPointerLeave,rp(p=>o.onItemLeave(p))),onFocus:ve(t.onFocus,()=>d(!0)),onBlur:ve(t.onBlur,()=>d(!1))})})})}),Iq="MenuCheckboxItem",k$=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return g.jsx(T$,{scope:t.__scopeMenu,checked:n,children:g.jsx(X0,{role:"menuitemcheckbox","aria-checked":_y(n)?"mixed":n,...r,ref:e,"data-state":aE(n),onSelect:ve(r.onSelect,()=>i==null?void 0:i(_y(n)?!0:!n),{checkForDefaultPrevented:!1})})})});k$.displayName=Iq;var C$="MenuRadioGroup",[Dq,Lq]=Gu(C$,{value:void 0,onValueChange:()=>{}}),E$=x.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=ni(i);return g.jsx(Dq,{scope:t.__scopeMenu,value:n,onValueChange:s,children:g.jsx(sE,{...r,ref:e})})});E$.displayName=C$;var A$="MenuRadioItem",P$=x.forwardRef((t,e)=>{const{value:n,...i}=t,r=Lq(A$,t.__scopeMenu),s=n===r.value;return g.jsx(T$,{scope:t.__scopeMenu,checked:s,children:g.jsx(X0,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":aE(s),onSelect:ve(i.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});P$.displayName=A$;var oE="MenuItemIndicator",[T$,jq]=Gu(oE,{checked:!1}),R$=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=jq(oE,n);return g.jsx(qo,{present:i||_y(s.checked)||s.checked===!0,children:g.jsx(He.span,{...r,ref:e,"data-state":aE(s.checked)})})});R$.displayName=oE;var Fq="MenuSeparator",M$=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return g.jsx(He.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});M$.displayName=Fq;var $q="MenuArrow",N$=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=K0(n);return g.jsx(QC,{...r,...i,ref:e})});N$.displayName=$q;var Bq="MenuSub",[Fhe,O$]=Gu(Bq),zh="MenuSubTrigger",I$=x.forwardRef((t,e)=>{const n=Ku(zh,t.__scopeMenu),i=tm(zh,t.__scopeMenu),r=O$(zh,t.__scopeMenu),s=iE(zh,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,u={__scopeMenu:t.__scopeMenu},c=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>c,[c]),x.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),g.jsx(tE,{asChild:!0,...u,children:g.jsx(_$,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":j$(n.open),...t,ref:M0(e,r.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ve(t.onPointerMove,rp(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),c()},100))})),onPointerLeave:ve(t.onPointerLeave,rp(d=>{var f,p;c();const h=(f=n.content)==null?void 0:f.getBoundingClientRect();if(h){const m=(p=n.content)==null?void 0:p.dataset.side,w=m==="right",v=w?-5:5,y=h[w?"left":"right"],b=h[w?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:y,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x:y,y:h.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ve(t.onKeyDown,d=>{var f;const h=s.searchRef.current!=="";t.disabled||h&&d.key===" "||xq[i.dir].includes(d.key)&&(n.onOpenChange(!0),(f=n.content)==null||f.focus(),d.preventDefault())})})})});I$.displayName=zh;var D$="MenuSubContent",L$=x.forwardRef((t,e)=>{const n=w$(jr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Ku(jr,t.__scopeMenu),o=tm(jr,t.__scopeMenu),a=O$(D$,t.__scopeMenu),l=x.useRef(null),u=ct(e,l);return g.jsx(ip.Provider,{scope:t.__scopeMenu,children:g.jsx(qo,{present:i||s.open,children:g.jsx(ip.Slot,{scope:t.__scopeMenu,children:g.jsx(rE,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:c=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),c.preventDefault()},onCloseAutoFocus:c=>c.preventDefault(),onFocusOutside:ve(t.onFocusOutside,c=>{c.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ve(t.onEscapeKeyDown,c=>{o.onClose(),c.preventDefault()}),onKeyDown:ve(t.onKeyDown,c=>{var f;const d=c.currentTarget.contains(c.target),h=Sq[o.dir].includes(c.key);d&&h&&(s.onOpenChange(!1),(f=a.trigger)==null||f.focus(),c.preventDefault())})})})})})});L$.displayName=D$;function j$(t){return t?"open":"closed"}function _y(t){return t==="indeterminate"}function aE(t){return _y(t)?"indeterminate":t?"checked":"unchecked"}function zq(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Uq(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function Hq(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Uq(t,Math.max(s,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Vq(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,u=e[o].x,c=e[o].y;l>i!=c>i&&n<(u-a)*(i-l)/(c-l)+a&&(r=!r)}return r}function Wq(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Vq(n,e)}function rp(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Gq=y$,Kq=tE,Xq=b$,qq=x$,Yq=sE,Zq=S$,Jq=X0,Qq=k$,eY=E$,tY=P$,nY=R$,iY=M$,rY=N$,sY=I$,oY=L$,lE="DropdownMenu",[aY,$he]=El(lE,[g$]),Si=g$(),[lY,F$]=aY(lE),$$=t=>{const{__scopeDropdownMenu:e,children:n,dir:i,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=Si(e),u=x.useRef(null),[c=!1,d]=zo({prop:r,defaultProp:s,onChange:o});return g.jsx(lY,{scope:e,triggerId:il(),triggerRef:u,contentId:il(),open:c,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(h=>!h),[d]),modal:a,children:g.jsx(Gq,{...l,open:c,onOpenChange:d,dir:i,modal:a,children:n})})};$$.displayName=lE;var B$="DropdownMenuTrigger",z$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=F$(B$,n),o=Si(n);return g.jsx(Kq,{asChild:!0,...o,children:g.jsx(He.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:M0(e,s.triggerRef),onPointerDown:ve(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ve(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});z$.displayName=B$;var uY="DropdownMenuPortal",U$=t=>{const{__scopeDropdownMenu:e,...n}=t,i=Si(e);return g.jsx(Xq,{...i,...n})};U$.displayName=uY;var H$="DropdownMenuContent",V$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=F$(H$,n),s=Si(n),o=x.useRef(!1);return g.jsx(qq,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...i,ref:e,onCloseAutoFocus:ve(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ve(t.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,c=l.button===2||u;(!r.modal||c)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});V$.displayName=H$;var cY="DropdownMenuGroup",dY=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return g.jsx(Yq,{...r,...i,ref:e})});dY.displayName=cY;var hY="DropdownMenuLabel",W$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return g.jsx(Zq,{...r,...i,ref:e})});W$.displayName=hY;var fY="DropdownMenuItem",G$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return g.jsx(Jq,{...r,...i,ref:e})});G$.displayName=fY;var pY="DropdownMenuCheckboxItem",K$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return g.jsx(Qq,{...r,...i,ref:e})});K$.displayName=pY;var mY="DropdownMenuRadioGroup",gY=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return g.jsx(eY,{...r,...i,ref:e})});gY.displayName=mY;var vY="DropdownMenuRadioItem",X$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return g.jsx(tY,{...r,...i,ref:e})});X$.displayName=vY;var yY="DropdownMenuItemIndicator",q$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return g.jsx(nY,{...r,...i,ref:e})});q$.displayName=yY;var wY="DropdownMenuSeparator",Y$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return g.jsx(iY,{...r,...i,ref:e})});Y$.displayName=wY;var bY="DropdownMenuArrow",xY=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return g.jsx(rY,{...r,...i,ref:e})});xY.displayName=bY;var SY="DropdownMenuSubTrigger",Z$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return g.jsx(sY,{...r,...i,ref:e})});Z$.displayName=SY;var _Y="DropdownMenuSubContent",J$=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Si(n);return g.jsx(oY,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});J$.displayName=_Y;var kY=$$,CY=z$,EY=U$,Q$=V$,e3=W$,t3=G$,n3=K$,i3=X$,r3=q$,s3=Y$,o3=Z$,a3=J$;const AY=kY,PY=CY,TY=x.forwardRef(({className:t,inset:e,children:n,...i},r)=>g.jsxs(o3,{ref:r,className:$e("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,g.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block h-4 w-4"})]}));TY.displayName=o3.displayName;const RY=x.forwardRef(({className:t,...e},n)=>g.jsx(a3,{ref:n,className:$e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));RY.displayName=a3.displayName;const l3=x.forwardRef(({className:t,sideOffset:e=4,...n},i)=>g.jsx(EY,{children:g.jsx(Q$,{ref:i,sideOffset:e,className:$e("z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));l3.displayName=Q$.displayName;const mv=x.forwardRef(({className:t,inset:e,...n},i)=>g.jsx(t3,{ref:i,className:$e("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));mv.displayName=t3.displayName;const MY=x.forwardRef(({className:t,children:e,checked:n,...i},r)=>g.jsxs(n3,{ref:r,className:$e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(r3,{children:g.jsx("span",{className:"icon-[lucide--check] h-4 w-4"})})}),e]}));MY.displayName=n3.displayName;const NY=x.forwardRef(({className:t,children:e,...n},i)=>g.jsxs(i3,{ref:i,className:$e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(r3,{children:g.jsx("span",{className:"icon-[lucide--circle-dot] block h-4 w-4"})})}),e]}));NY.displayName=i3.displayName;const OY=x.forwardRef(({className:t,inset:e,...n},i)=>g.jsx(e3,{ref:i,className:$e("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));OY.displayName=e3.displayName;const IY=x.forwardRef(({className:t,...e},n)=>g.jsx(s3,{ref:n,className:$e("-mx-1 my-1 h-px bg-stone-600",t),...e}));IY.displayName=s3.displayName;function u3(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const c3=["en","es"];function uE(t){return function(n,i,...r){const s=u3(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const U=xC();function DY(t){return g.jsx(HV,{store:U,children:t.children})}var at;(function(t){t.assertEqual=r=>r;function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(at||(at={}));var i_;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(i_||(i_={}));const ke=at.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),_a=t=>{switch(typeof t){case"undefined":return ke.undefined;case"string":return ke.string;case"number":return isNaN(t)?ke.nan:ke.number;case"boolean":return ke.boolean;case"function":return ke.function;case"bigint":return ke.bigint;case"symbol":return ke.symbol;case"object":return Array.isArray(t)?ke.array:t===null?ke.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ke.promise:typeof Map<"u"&&t instanceof Map?ke.map:typeof Set<"u"&&t instanceof Set?ke.set:typeof Date<"u"&&t instanceof Date?ke.date:ke.object;default:return ke.unknown}},ae=at.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),LY=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class lr extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return r(this),i}static assert(e){if(!(e instanceof lr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,at.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}lr.create=t=>new lr(t);const Pd=(t,e)=>{let n;switch(t.code){case ae.invalid_type:t.received===ke.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ae.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,at.jsonStringifyReplacer)}`;break;case ae.unrecognized_keys:n=`Unrecognized key(s) in object: ${at.joinValues(t.keys,", ")}`;break;case ae.invalid_union:n="Invalid input";break;case ae.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${at.joinValues(t.options)}`;break;case ae.invalid_enum_value:n=`Invalid enum value. Expected ${at.joinValues(t.options)}, received '${t.received}'`;break;case ae.invalid_arguments:n="Invalid function arguments";break;case ae.invalid_return_type:n="Invalid function return type";break;case ae.invalid_date:n="Invalid date";break;case ae.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:at.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ae.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ae.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ae.custom:n="Invalid input";break;case ae.invalid_intersection_types:n="Intersection results could not be merged";break;case ae.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ae.not_finite:n="Number must be finite";break;default:n=e.defaultError,at.assertNever(t)}return{message:n}};let d3=Pd;function jY(t){d3=t}function ky(){return d3}const Cy=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=i.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}},FY=[];function be(t,e){const n=ky(),i=Cy({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Pd?void 0:Pd].filter(r=>!!r)});t.common.issues.push(i)}class ii{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Ue;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return ii.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Ue;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Ue=Object.freeze({status:"aborted"}),Rc=t=>({status:"dirty",value:t}),yi=t=>({status:"valid",value:t}),r_=t=>t.status==="aborted",s_=t=>t.status==="dirty",sp=t=>t.status==="valid",op=t=>typeof Promise<"u"&&t instanceof Promise;function Ey(t,e,n,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function h3(t,e,n,i,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Oe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Oe||(Oe={}));var Uh,Hh;class io{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const TR=(t,e)=>{if(sp(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new lr(t.common.issues);return this._error=n,this._error}}};function Xe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{var l,u;const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:(l=c??i)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(u=c??n)!==null&&u!==void 0?u:a.defaultError}},description:r}}class Qe{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return _a(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:_a(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ii,ctx:{common:e.parent.common,data:e.data,parsedType:_a(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(op(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){var i;const r={common:{issues:[],async:(i=n==null?void 0:n.async)!==null&&i!==void 0?i:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_a(e)},s=this._parseSync({data:e,path:r.path,parent:r});return TR(r,s)}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_a(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(op(r)?r:Promise.resolve(r));return TR(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:ae.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new ws({schema:this,typeName:ze.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Qs.create(this,this._def)}nullable(){return pl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return fs.create(this,this._def)}promise(){return Rd.create(this,this._def)}or(e){return cp.create([this,e],this._def)}and(e){return dp.create(this,e,this._def)}transform(e){return new ws({...Xe(this._def),schema:this,typeName:ze.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new gp({...Xe(this._def),innerType:this,defaultValue:n,typeName:ze.ZodDefault})}brand(){return new cE({typeName:ze.ZodBranded,type:this,...Xe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new vp({...Xe(this._def),innerType:this,catchValue:n,typeName:ze.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return nm.create(this,e)}readonly(){return yp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const $Y=/^c[^\s-]{8,}$/i,BY=/^[0-9a-z]+$/,zY=/^[0-9A-HJKMNP-TV-Z]{26}$/,UY=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,HY=/^[a-z0-9_-]{21}$/i,VY=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,WY=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,GY="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Vb;const KY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,XY=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,qY=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,f3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",YY=new RegExp(`^${f3}$`);function p3(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function ZY(t){return new RegExp(`^${p3(t)}$`)}function m3(t){let e=`${f3}T${p3(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function JY(t,e){return!!((e==="v4"||!e)&&KY.test(t)||(e==="v6"||!e)&&XY.test(t))}class as extends Qe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ke.string){const s=this._getOrReturnCtx(e);return be(s,{code:ae.invalid_type,expected:ke.string,received:s.parsedType}),Ue}const i=new ii;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ae.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ae.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?be(r,{code:ae.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&be(r,{code:ae.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")WY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"email",code:ae.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")Vb||(Vb=new RegExp(GY,"u")),Vb.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"emoji",code:ae.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")UY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"uuid",code:ae.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")HY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"nanoid",code:ae.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")$Y.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"cuid",code:ae.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")BY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"cuid2",code:ae.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")zY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"ulid",code:ae.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),be(r,{validation:"url",code:ae.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"regex",code:ae.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),be(r,{code:ae.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),be(r,{code:ae.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),be(r,{code:ae.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?m3(s).test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ae.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?YY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ae.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?ZY(s).test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ae.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?VY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"duration",code:ae.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?JY(e.data,s.version)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"ip",code:ae.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?qY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"base64",code:ae.invalid_string,message:s.message}),i.dirty()):at.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:ae.invalid_string,...Oe.errToObj(i)})}_addCheck(e){return new as({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Oe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Oe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Oe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Oe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Oe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Oe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Oe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Oe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Oe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Oe.errToObj(e)})}datetime(e){var n,i;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(i=e==null?void 0:e.local)!==null&&i!==void 0?i:!1,...Oe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Oe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Oe.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Oe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Oe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Oe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Oe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Oe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Oe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Oe.errToObj(n)})}nonempty(e){return this.min(1,Oe.errToObj(e))}trim(){return new as({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new as({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new as({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}as.create=t=>{var e;return new as({checks:[],typeName:ze.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Xe(t)})};function QY(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=parseInt(t.toFixed(r).replace(".","")),o=parseInt(e.toFixed(r).replace(".",""));return s%o/Math.pow(10,r)}class dl extends Qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ke.number){const s=this._getOrReturnCtx(e);return be(s,{code:ae.invalid_type,expected:ke.number,received:s.parsedType}),Ue}let i;const r=new ii;for(const s of this._def.checks)s.kind==="int"?at.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{code:ae.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ae.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ae.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?QY(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),be(i,{code:ae.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{code:ae.not_finite,message:s.message}),r.dirty()):at.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,i,r){return new dl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Oe.toString(r)}]})}_addCheck(e){return new dl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Oe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Oe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Oe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Oe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&at.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}dl.create=t=>new dl({checks:[],typeName:ze.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Xe(t)});class hl extends Qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ke.bigint){const s=this._getOrReturnCtx(e);return be(s,{code:ae.invalid_type,expected:ke.bigint,received:s.parsedType}),Ue}let i;const r=new ii;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ae.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ae.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ae.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):at.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,i,r){return new hl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Oe.toString(r)}]})}_addCheck(e){return new hl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}hl.create=t=>{var e;return new hl({checks:[],typeName:ze.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Xe(t)})};class ap extends Qe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ke.boolean){const i=this._getOrReturnCtx(e);return be(i,{code:ae.invalid_type,expected:ke.boolean,received:i.parsedType}),Ue}return yi(e.data)}}ap.create=t=>new ap({typeName:ze.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Xe(t)});class Iu extends Qe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ke.date){const s=this._getOrReturnCtx(e);return be(s,{code:ae.invalid_type,expected:ke.date,received:s.parsedType}),Ue}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return be(s,{code:ae.invalid_date}),Ue}const i=new ii;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ae.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ae.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):at.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Iu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Oe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Oe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Iu.create=t=>new Iu({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ze.ZodDate,...Xe(t)});class Ay extends Qe{_parse(e){if(this._getType(e)!==ke.symbol){const i=this._getOrReturnCtx(e);return be(i,{code:ae.invalid_type,expected:ke.symbol,received:i.parsedType}),Ue}return yi(e.data)}}Ay.create=t=>new Ay({typeName:ze.ZodSymbol,...Xe(t)});class lp extends Qe{_parse(e){if(this._getType(e)!==ke.undefined){const i=this._getOrReturnCtx(e);return be(i,{code:ae.invalid_type,expected:ke.undefined,received:i.parsedType}),Ue}return yi(e.data)}}lp.create=t=>new lp({typeName:ze.ZodUndefined,...Xe(t)});class up extends Qe{_parse(e){if(this._getType(e)!==ke.null){const i=this._getOrReturnCtx(e);return be(i,{code:ae.invalid_type,expected:ke.null,received:i.parsedType}),Ue}return yi(e.data)}}up.create=t=>new up({typeName:ze.ZodNull,...Xe(t)});class Td extends Qe{constructor(){super(...arguments),this._any=!0}_parse(e){return yi(e.data)}}Td.create=t=>new Td({typeName:ze.ZodAny,...Xe(t)});class yu extends Qe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return yi(e.data)}}yu.create=t=>new yu({typeName:ze.ZodUnknown,...Xe(t)});class Wo extends Qe{_parse(e){const n=this._getOrReturnCtx(e);return be(n,{code:ae.invalid_type,expected:ke.never,received:n.parsedType}),Ue}}Wo.create=t=>new Wo({typeName:ze.ZodNever,...Xe(t)});class Py extends Qe{_parse(e){if(this._getType(e)!==ke.undefined){const i=this._getOrReturnCtx(e);return be(i,{code:ae.invalid_type,expected:ke.void,received:i.parsedType}),Ue}return yi(e.data)}}Py.create=t=>new Py({typeName:ze.ZodVoid,...Xe(t)});class fs extends Qe{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==ke.array)return be(n,{code:ae.invalid_type,expected:ke.array,received:n.parsedType}),Ue;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(be(n,{code:o?ae.too_big:ae.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(be(n,{code:ae.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(be(n,{code:ae.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new io(n,o,n.path,a)))).then(o=>ii.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new io(n,o,n.path,a)));return ii.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new fs({...this._def,minLength:{value:e,message:Oe.toString(n)}})}max(e,n){return new fs({...this._def,maxLength:{value:e,message:Oe.toString(n)}})}length(e,n){return new fs({...this._def,exactLength:{value:e,message:Oe.toString(n)}})}nonempty(e){return this.min(1,e)}}fs.create=(t,e)=>new fs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ze.ZodArray,...Xe(e)});function lc(t){if(t instanceof Vt){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=Qs.create(lc(i))}return new Vt({...t._def,shape:()=>e})}else return t instanceof fs?new fs({...t._def,type:lc(t.element)}):t instanceof Qs?Qs.create(lc(t.unwrap())):t instanceof pl?pl.create(lc(t.unwrap())):t instanceof ro?ro.create(t.items.map(e=>lc(e))):t}class Vt extends Qe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=at.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ke.object){const u=this._getOrReturnCtx(e);return be(u,{code:ae.invalid_type,expected:ke.object,received:u.parsedType}),Ue}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Wo&&this._def.unknownKeys==="strip"))for(const u in r.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=s[u],d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new io(r,d,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof Wo){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:r.data[c]}});else if(u==="strict")a.length>0&&(be(r,{code:ae.unrecognized_keys,keys:a}),i.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new io(r,d,r.path,c)),alwaysSet:c in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key,h=await c.value;u.push({key:d,value:h,alwaysSet:c.alwaysSet})}return u}).then(u=>ii.mergeObjectSync(i,u)):ii.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Oe.errToObj,new Vt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var r,s,o,a;const l=(o=(s=(r=this._def).errorMap)===null||s===void 0?void 0:s.call(r,n,i).message)!==null&&o!==void 0?o:i.defaultError;return n.code==="unrecognized_keys"?{message:(a=Oe.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new Vt({...this._def,unknownKeys:"strip"})}passthrough(){return new Vt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Vt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Vt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ze.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Vt({...this._def,catchall:e})}pick(e){const n={};return at.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(n[i]=this.shape[i])}),new Vt({...this._def,shape:()=>n})}omit(e){const n={};return at.objectKeys(this.shape).forEach(i=>{e[i]||(n[i]=this.shape[i])}),new Vt({...this._def,shape:()=>n})}deepPartial(){return lc(this)}partial(e){const n={};return at.objectKeys(this.shape).forEach(i=>{const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}),new Vt({...this._def,shape:()=>n})}required(e){const n={};return at.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof Qs;)s=s._def.innerType;n[i]=s}}),new Vt({...this._def,shape:()=>n})}keyof(){return g3(at.objectKeys(this.shape))}}Vt.create=(t,e)=>new Vt({shape:()=>t,unknownKeys:"strip",catchall:Wo.create(),typeName:ze.ZodObject,...Xe(e)});Vt.strictCreate=(t,e)=>new Vt({shape:()=>t,unknownKeys:"strict",catchall:Wo.create(),typeName:ze.ZodObject,...Xe(e)});Vt.lazycreate=(t,e)=>new Vt({shape:t,unknownKeys:"strip",catchall:Wo.create(),typeName:ze.ZodObject,...Xe(e)});class cp extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new lr(a.ctx.common.issues));return be(n,{code:ae.invalid_union,unionErrors:o}),Ue}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new lr(l));return be(n,{code:ae.invalid_union,unionErrors:a}),Ue}}get options(){return this._def.options}}cp.create=(t,e)=>new cp({options:t,typeName:ze.ZodUnion,...Xe(e)});const co=t=>t instanceof fp?co(t.schema):t instanceof ws?co(t.innerType()):t instanceof pp?[t.value]:t instanceof fl?t.options:t instanceof mp?at.objectValues(t.enum):t instanceof gp?co(t._def.innerType):t instanceof lp?[void 0]:t instanceof up?[null]:t instanceof Qs?[void 0,...co(t.unwrap())]:t instanceof pl?[null,...co(t.unwrap())]:t instanceof cE||t instanceof yp?co(t.unwrap()):t instanceof vp?co(t._def.innerType):[];class q0 extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ke.object)return be(n,{code:ae.invalid_type,expected:ke.object,received:n.parsedType}),Ue;const i=this.discriminator,r=n.data[i],s=this.optionsMap.get(r);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(be(n,{code:ae.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Ue)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,i){const r=new Map;for(const s of n){const o=co(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(r.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);r.set(a,s)}}return new q0({typeName:ze.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:r,...Xe(i)})}}function o_(t,e){const n=_a(t),i=_a(e);if(t===e)return{valid:!0,data:t};if(n===ke.object&&i===ke.object){const r=at.objectKeys(e),s=at.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=o_(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===ke.array&&i===ke.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=o_(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===ke.date&&i===ke.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class dp extends Qe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(r_(s)||r_(o))return Ue;const a=o_(s.value,o.value);return a.valid?((s_(s)||s_(o))&&n.dirty(),{status:n.value,value:a.data}):(be(i,{code:ae.invalid_intersection_types}),Ue)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}dp.create=(t,e,n)=>new dp({left:t,right:e,typeName:ze.ZodIntersection,...Xe(n)});class ro extends Qe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ke.array)return be(i,{code:ae.invalid_type,expected:ke.array,received:i.parsedType}),Ue;if(i.data.length<this._def.items.length)return be(i,{code:ae.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ue;!this._def.rest&&i.data.length>this._def.items.length&&(be(i,{code:ae.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new io(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>ii.mergeArray(n,o)):ii.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new ro({...this._def,rest:e})}}ro.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ro({items:t,typeName:ze.ZodTuple,rest:null,...Xe(e)})};class hp extends Qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ke.object)return be(i,{code:ae.invalid_type,expected:ke.object,received:i.parsedType}),Ue;const r=[],s=this._def.keyType,o=this._def.valueType;for(const a in i.data)r.push({key:s._parse(new io(i,a,i.path,a)),value:o._parse(new io(i,i.data[a],i.path,a)),alwaysSet:a in i.data});return i.common.async?ii.mergeObjectAsync(n,r):ii.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof Qe?new hp({keyType:e,valueType:n,typeName:ze.ZodRecord,...Xe(i)}):new hp({keyType:as.create(),valueType:e,typeName:ze.ZodRecord,...Xe(n)})}}class Ty extends Qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ke.map)return be(i,{code:ae.invalid_type,expected:ke.map,received:i.parsedType}),Ue;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],u)=>({key:r._parse(new io(i,a,i.path,[u,"key"])),value:s._parse(new io(i,l,i.path,[u,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Ue;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Ue;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),a.set(u.value,c.value)}return{status:n.value,value:a}}}}Ty.create=(t,e,n)=>new Ty({valueType:e,keyType:t,typeName:ze.ZodMap,...Xe(n)});class Du extends Qe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ke.set)return be(i,{code:ae.invalid_type,expected:ke.set,received:i.parsedType}),Ue;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(be(i,{code:ae.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(be(i,{code:ae.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Ue;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const a=[...i.data.values()].map((l,u)=>s._parse(new io(i,l,i.path,u)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Du({...this._def,minSize:{value:e,message:Oe.toString(n)}})}max(e,n){return new Du({...this._def,maxSize:{value:e,message:Oe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Du.create=(t,e)=>new Du({valueType:t,minSize:null,maxSize:null,typeName:ze.ZodSet,...Xe(e)});class Qc extends Qe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ke.function)return be(n,{code:ae.invalid_type,expected:ke.function,received:n.parsedType}),Ue;function i(a,l){return Cy({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ky(),Pd].filter(u=>!!u),issueData:{code:ae.invalid_arguments,argumentsError:l}})}function r(a,l){return Cy({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ky(),Pd].filter(u=>!!u),issueData:{code:ae.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Rd){const a=this;return yi(async function(...l){const u=new lr([]),c=await a._def.args.parseAsync(l,s).catch(f=>{throw u.addIssue(i(l,f)),u}),d=await Reflect.apply(o,this,c);return await a._def.returns._def.type.parseAsync(d,s).catch(f=>{throw u.addIssue(r(d,f)),u})})}else{const a=this;return yi(function(...l){const u=a._def.args.safeParse(l,s);if(!u.success)throw new lr([i(l,u.error)]);const c=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(c,s);if(!d.success)throw new lr([r(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Qc({...this._def,args:ro.create(e).rest(yu.create())})}returns(e){return new Qc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,i){return new Qc({args:e||ro.create([]).rest(yu.create()),returns:n||yu.create(),typeName:ze.ZodFunction,...Xe(i)})}}class fp extends Qe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}fp.create=(t,e)=>new fp({getter:t,typeName:ze.ZodLazy,...Xe(e)});class pp extends Qe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return be(n,{received:n.data,code:ae.invalid_literal,expected:this._def.value}),Ue}return{status:"valid",value:e.data}}get value(){return this._def.value}}pp.create=(t,e)=>new pp({value:t,typeName:ze.ZodLiteral,...Xe(e)});function g3(t,e){return new fl({values:t,typeName:ze.ZodEnum,...Xe(e)})}class fl extends Qe{constructor(){super(...arguments),Uh.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return be(n,{expected:at.joinValues(i),received:n.parsedType,code:ae.invalid_type}),Ue}if(Ey(this,Uh)||h3(this,Uh,new Set(this._def.values)),!Ey(this,Uh).has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return be(n,{received:n.data,code:ae.invalid_enum_value,options:i}),Ue}return yi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return fl.create(e,{...this._def,...n})}exclude(e,n=this._def){return fl.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Uh=new WeakMap;fl.create=g3;class mp extends Qe{constructor(){super(...arguments),Hh.set(this,void 0)}_parse(e){const n=at.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==ke.string&&i.parsedType!==ke.number){const r=at.objectValues(n);return be(i,{expected:at.joinValues(r),received:i.parsedType,code:ae.invalid_type}),Ue}if(Ey(this,Hh)||h3(this,Hh,new Set(at.getValidEnumValues(this._def.values))),!Ey(this,Hh).has(e.data)){const r=at.objectValues(n);return be(i,{received:i.data,code:ae.invalid_enum_value,options:r}),Ue}return yi(e.data)}get enum(){return this._def.values}}Hh=new WeakMap;mp.create=(t,e)=>new mp({values:t,typeName:ze.ZodNativeEnum,...Xe(e)});class Rd extends Qe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ke.promise&&n.common.async===!1)return be(n,{code:ae.invalid_type,expected:ke.promise,received:n.parsedType}),Ue;const i=n.parsedType===ke.promise?n.data:Promise.resolve(n.data);return yi(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Rd.create=(t,e)=>new Rd({type:t,typeName:ze.ZodPromise,...Xe(e)});class ws extends Qe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ze.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{be(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ue;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?Ue:l.status==="dirty"||n.value==="dirty"?Rc(l.value):l});{if(n.value==="aborted")return Ue;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?Ue:a.status==="dirty"||n.value==="dirty"?Rc(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Ue:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Ue:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!sp(o))return o;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>sp(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);at.assertNever(r)}}ws.create=(t,e,n)=>new ws({schema:t,typeName:ze.ZodEffects,effect:e,...Xe(n)});ws.createWithPreprocess=(t,e,n)=>new ws({schema:e,effect:{type:"preprocess",transform:t},typeName:ze.ZodEffects,...Xe(n)});class Qs extends Qe{_parse(e){return this._getType(e)===ke.undefined?yi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qs.create=(t,e)=>new Qs({innerType:t,typeName:ze.ZodOptional,...Xe(e)});class pl extends Qe{_parse(e){return this._getType(e)===ke.null?yi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}pl.create=(t,e)=>new pl({innerType:t,typeName:ze.ZodNullable,...Xe(e)});class gp extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===ke.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}gp.create=(t,e)=>new gp({innerType:t,typeName:ze.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Xe(e)});class vp extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return op(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new lr(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new lr(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}vp.create=(t,e)=>new vp({innerType:t,typeName:ze.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Xe(e)});class Ry extends Qe{_parse(e){if(this._getType(e)!==ke.nan){const i=this._getOrReturnCtx(e);return be(i,{code:ae.invalid_type,expected:ke.nan,received:i.parsedType}),Ue}return{status:"valid",value:e.data}}}Ry.create=t=>new Ry({typeName:ze.ZodNaN,...Xe(t)});const eZ=Symbol("zod_brand");class cE extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class nm extends Qe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Ue:s.status==="dirty"?(n.dirty(),Rc(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Ue:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new nm({in:e,out:n,typeName:ze.ZodPipeline})}}class yp extends Qe{_parse(e){const n=this._def.innerType._parse(e),i=r=>(sp(r)&&(r.value=Object.freeze(r.value)),r);return op(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}yp.create=(t,e)=>new yp({innerType:t,typeName:ze.ZodReadonly,...Xe(e)});function v3(t,e={},n){return t?Td.create().superRefine((i,r)=>{var s,o;if(!t(i)){const a=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;r.addIssue({code:"custom",...u,fatal:l})}}):Td.create()}const tZ={object:Vt.lazycreate};var ze;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ze||(ze={}));const nZ=(t,e={message:`Input not instance of ${t.name}`})=>v3(n=>n instanceof t,e),y3=as.create,w3=dl.create,iZ=Ry.create,rZ=hl.create,b3=ap.create,sZ=Iu.create,oZ=Ay.create,aZ=lp.create,lZ=up.create,uZ=Td.create,cZ=yu.create,dZ=Wo.create,hZ=Py.create,fZ=fs.create,pZ=Vt.create,mZ=Vt.strictCreate,gZ=cp.create,vZ=q0.create,yZ=dp.create,wZ=ro.create,bZ=hp.create,xZ=Ty.create,SZ=Du.create,_Z=Qc.create,kZ=fp.create,CZ=pp.create,EZ=fl.create,AZ=mp.create,PZ=Rd.create,RR=ws.create,TZ=Qs.create,RZ=pl.create,MZ=ws.createWithPreprocess,NZ=nm.create,OZ=()=>y3().optional(),IZ=()=>w3().optional(),DZ=()=>b3().optional(),LZ={string:t=>as.create({...t,coerce:!0}),number:t=>dl.create({...t,coerce:!0}),boolean:t=>ap.create({...t,coerce:!0}),bigint:t=>hl.create({...t,coerce:!0}),date:t=>Iu.create({...t,coerce:!0})},jZ=Ue;var tn=Object.freeze({__proto__:null,defaultErrorMap:Pd,setErrorMap:jY,getErrorMap:ky,makeIssue:Cy,EMPTY_PATH:FY,addIssueToContext:be,ParseStatus:ii,INVALID:Ue,DIRTY:Rc,OK:yi,isAborted:r_,isDirty:s_,isValid:sp,isAsync:op,get util(){return at},get objectUtil(){return i_},ZodParsedType:ke,getParsedType:_a,ZodType:Qe,datetimeRegex:m3,ZodString:as,ZodNumber:dl,ZodBigInt:hl,ZodBoolean:ap,ZodDate:Iu,ZodSymbol:Ay,ZodUndefined:lp,ZodNull:up,ZodAny:Td,ZodUnknown:yu,ZodNever:Wo,ZodVoid:Py,ZodArray:fs,ZodObject:Vt,ZodUnion:cp,ZodDiscriminatedUnion:q0,ZodIntersection:dp,ZodTuple:ro,ZodRecord:hp,ZodMap:Ty,ZodSet:Du,ZodFunction:Qc,ZodLazy:fp,ZodLiteral:pp,ZodEnum:fl,ZodNativeEnum:mp,ZodPromise:Rd,ZodEffects:ws,ZodTransformer:ws,ZodOptional:Qs,ZodNullable:pl,ZodDefault:gp,ZodCatch:vp,ZodNaN:Ry,BRAND:eZ,ZodBranded:cE,ZodPipeline:nm,ZodReadonly:yp,custom:v3,Schema:Qe,ZodSchema:Qe,late:tZ,get ZodFirstPartyTypeKind(){return ze},coerce:LZ,any:uZ,array:fZ,bigint:rZ,boolean:b3,date:sZ,discriminatedUnion:vZ,effect:RR,enum:EZ,function:_Z,instanceof:nZ,intersection:yZ,lazy:kZ,literal:CZ,map:xZ,nan:iZ,nativeEnum:AZ,never:dZ,null:lZ,nullable:RZ,number:w3,object:pZ,oboolean:DZ,onumber:IZ,optional:TZ,ostring:OZ,pipeline:NZ,preprocess:MZ,promise:PZ,record:bZ,set:SZ,strictObject:mZ,string:y3,symbol:oZ,transformer:RR,tuple:wZ,undefined:aZ,union:gZ,unknown:cZ,void:hZ,NEVER:jZ,ZodIssueCode:ae,quotelessJson:LY,ZodError:lr});const FZ=["randomize","clean","unchanged"],$Z=["switches-and-leds","printer","null"],BZ=["printer","null"],a_=tn.object({showInstructionCycle:tn.boolean().catch(!1),showStatsCPU:tn.boolean().catch(!1),language:tn.enum(c3).catch(zZ),editorFontSize:tn.number().int().min(8).max(64).catch(14),dataOnLoad:tn.enum(FZ).catch("clean"),devices:tn.object({keyboardAndScreen:tn.boolean(),pic:tn.boolean(),pio:tn.enum(["switches-and-leds","printer"]).nullable(),handshake:tn.enum(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:tn.boolean().catch(!0),executionUnit:tn.number().min(1).max(500).catch(150),clockSpeed:tn.number().min(100).max(3e3).catch(1e3),printerSpeed:tn.number().min(500).max(2e4).catch(5e3),flagsVisibility:tn.enum(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:tn.number().min(0).catch(1),filterContrast:tn.number().min(0).catch(1),filterInvert:tn.boolean().catch(!1),filterSaturation:tn.number().min(0).catch(1)}),uc=a_.parse({});function zZ(){const t=navigator.language.toLowerCase();for(const e of c3)if(t.startsWith(e))return e;return"en"}const Wr=FF("vonsim-settings",uc,{getItem(t,e){try{const n=localStorage.getItem(t);return a_.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=a_.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),Di=()=>U.get(Wr),im=()=>Vp(Wr);me(t=>t(Wr).showInstructionCycle);me(t=>t(Wr).showStatsCPU);const UZ=me(t=>t(Wr).language),dE=()=>lt(UZ);me(t=>t(Wr).flagsVisibility);const HZ=me(t=>t(Wr).editorFontSize),VZ=()=>lt(HZ);me(t=>t(Wr).dataOnLoad);const WZ=me(t=>t(Wr).devices),GZ=()=>lt(WZ);me(t=>{const e=t(Wr);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});const KZ=me(t=>{const e=t(Wr);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")}),XZ=()=>lt(KZ);function wp(t){const e=t.charCodeAt(0);return j.fitsUnsigned(e,8)?e:null}function hE(t){return j.fitsUnsigned(t,8)?String.fromCharCode(t):null}function x3(t){return qZ.at(t)??null}const qZ=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","","","","","","","","","","","","","SHY","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];var $t,Ht;const st=class st{constructor(e,n){De(this,$t);De(this,Ht);Q(this,$t,e|0),Q(this,Ht,n)}get size(){return A(this,Ht)}is8bits(){return A(this,Ht)===8}is16bits(){return A(this,Ht)===16}get unsigned(){return A(this,$t)}get signed(){return A(this,$t)<=st.maxSignedValue(A(this,Ht))?A(this,$t):A(this,$t)-(st.maxValue(A(this,Ht))+1)}get low(){return this.is8bits()?this:st.fromUnsigned(A(this,$t)&st.maxValue(8),8)}get high(){return this.is8bits()?new st(0,8):st.fromUnsigned(A(this,$t)>>8&st.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return st.fromUnsigned(A(this,$t)&~st.maxValue(8)|e.unsigned,A(this,Ht))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return st.fromUnsigned(A(this,$t)&st.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Ht))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Ht)}`);return(A(this,$t)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Ht))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Ht)}`);return n?st.fromUnsigned(A(this,$t)|1<<e,A(this,Ht)):st.fromUnsigned(A(this,$t)&~(1<<e),A(this,Ht))}add(e){return e=Number(e),st.fromUnsigned(A(this,$t)+e,A(this,Ht))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,$t)===A(e,$t)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,Ht));for(let n=0;n<A(this,Ht);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,$t).toString(16).padStart(A(this,Ht)/4,"0").toUpperCase();case"bin":return A(this,$t).toString(2).padStart(A(this,Ht),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,Ht)===8?hE(A(this,$t))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,Ht)===8?x3(A(this,$t))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,$t)}valueOf(){return A(this,$t)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=st.minSignedValue(n)&&e<=st.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=st.minValue()&&e<=st.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=st.minSignedValue(n)&&e<=st.maxSignedValue(n)}static fromUnsigned(e,n){if(!st.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new st(e,n)}static fromSigned(e,n){if(!st.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new st(e+st.maxValue(n)+1,n):new st(e,n)}static fromNumber(e,n){return e<0?st.fromSigned(e,n):st.fromUnsigned(e,n)}static fromChar(e){const n=wp(e)??-1;return st.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*st.maxValue(e));return new st(n,e)}static zero(e){return new st(0,e)}};$t=new WeakMap,Ht=new WeakMap;let j=st;var yo;const va=class va{constructor(e){De(this,yo);Q(this,yo,e)}get value(){return A(this,yo).unsigned}get byte(){return A(this,yo)}toString(e=!1){let n=A(this,yo).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,yo).toJSON()}valueOf(){return A(this,yo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=va.MIN_ADDRESS&&e<=va.MAX_ADDRESS}static from(e){if(e=Number(e),!va.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=j.fromUnsigned(e,16);return new va(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};yo=new WeakMap,fe(va,"MIN_ADDRESS",0),fe(va,"MAX_ADDRESS",255);let Ee=va;var wo;const ya=class ya{constructor(e){De(this,wo);Q(this,wo,e)}get value(){return A(this,wo).unsigned}get byte(){return A(this,wo)}toString(e=!0){let n=A(this,wo).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,wo).toJSON()}valueOf(){return A(this,wo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=ya.MIN_ADDRESS&&e<=ya.MAX_ADDRESS}static from(e){if(e=Number(e),!ya.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=j.fromUnsigned(e,8);return new ya(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};wo=new WeakMap,fe(ya,"MIN_ADDRESS",0),fe(ya,"MAX_ADDRESS",127);let cr=ya;function MR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function NR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MR(Object(n),!0).forEach(function(i){YZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function YZ(t,e,n){return e=ZZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZZ(t){var e=JZ(t,"string");return typeof e=="symbol"?e:String(e)}function JZ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const My=S3({});function S3(t){return e.withOptions=n=>S3(NR(NR({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n)}=t;let o="";for(let u=0;u<r.length;u++){let c=r[u];s&&(c=c.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),o+=c,u<i.length&&(o+=i[u])}const a=o.split(`
`);let l=null;for(const u of a){const c=u.match(/^(\s+)\S+/);if(c){const d=c[1].length;l?l=Math.min(l,d):l=d}}if(l!==null){const u=l;o=a.map(c=>c[0]===" "||c[0]==="	"?c.slice(u):c).join(`
`)}return o=o.trim(),s&&(o=o.replace(/\\n/g,`
`)),o}}const QZ=Ee.from(Ee.MAX_ADDRESS).toString(),eJ={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${cr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:My`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"One cycle","end-of-instruction":"One instruction",infinity:"Until stop"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instruccin",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."}},memory:{name:"Memory",cell:t=>`Cell ${Ee.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${QZ}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Enabling animations."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>My`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"bc0088f"}](https://github.com/vonsim/vonsim/commit/${"bc0088f"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},tJ=Ee.from(Ee.MAX_ADDRESS).toString(),nJ={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${cr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"Hay una nueva versin disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Accin invlida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la FileSystem API","no-file":"No hay ningn archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:My`
      ; Bienvenido a VonSim 8!
      ; Este es un ejemplo de cdigo que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Un ciclo","end-of-instruction":"Una instruccin",infinity:"Hasta el final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadsticas CPU","instruction-cycle":"Ciclo de instruccin",status:{fetching:"Captacin instruccin...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupcin...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."}},memory:{name:"Memoria",cell:t=>`Celda ${Ee.format(t)}`,"fix-address":"Fijar direccin","unfix-address":"Desfijar direccin","address-must-be-integer":"El valor de inicio debe ser un nmero entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${tJ}.`,"address-increment":"Incrementar direccin (Page Up)","address-decrement":"Decrementar direccin (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuracin",instructionCycle:{label:"Ciclo de Instruccin"},statsCPU:{label:"Estadsticas CPU"},flags:{label:"Banderas",description:"Selecciona qu banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamao de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qu hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qu dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"Tambin agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Habilitacin de animaciones."].join(" ")},speeds:{executionUnit:"Velocidad de simulacin",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresin"},filters:{label:"Filtros",description:"Filtros aplicados a la pgina. til cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturacin"},reset:"Restablecer configuracin"},footer:{documentation:"Documentacin",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>My`
        <!-- Por favor, describa el problema que est teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Informacin extra (POR FAVOR, NO BORRAR)</summary>

          **Versin**: [${"bc0088f"}](https://github.com/ruiz-jose/VonSim8/commit/${"bc0088f"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuracin

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},Y0=uE({en:eJ,es:nJ});function wt(){const t=dE();return x.useCallback((e,...n)=>Y0(t,e,...n),[t])}const iJ=1,OR=5e3,Ts=new Map,hf=[];function rJ(){let t=0;for(const e of Ts.keys())e>t&&(t=e);return t+1}function sJ(){let t=1/0;for(const e of Ts.keys())e<t&&(t=e);return t}function Da(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??OR,s=Number.isFinite(r)?setTimeout(()=>Da({type:"DISMISS_TOAST",toastId:n}),r):null;Ts.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Da({type:"DISMISS_TOAST",toastId:n})}}}),Ts.size>iJ&&Da({type:"DISMISS_TOAST",toastId:sJ()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=Ts.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??OR,o=Number.isFinite(s)?setTimeout(()=>Da({type:"DISMISS_TOAST",toastId:n}),s):null;Ts.set(n,{...r,...i,timeout:o})}else Ts.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=Ts.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),Ts.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&hf.length>0){const n=Array.from(Ts.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of hf)i(n)}}function Ri(t){const e=rJ(),n=r=>Da({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>Da({type:"DISMISS_TOAST",toastId:e});return Da({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function oJ(){const[t,e]=x.useState([]);return x.useEffect(()=>(hf.push(e),()=>{const n=hf.indexOf(e);n>-1&&hf.splice(n,1)}),[]),{toastList:t,toast:Ri,dismiss:n=>Da({type:"DISMISS_TOAST",toastId:n})}}const Ny=me(!1),Z0=FF("vonsim-program",Y0(Di().language,"editor.example"),void 0,{getOnInit:!0}),aJ=()=>lt(Z0),lJ=()=>U.get(Z0),uJ=Gn.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(U.set(Z0,this.view.state.doc.toString()),U.set(Ny,!0))}}),mh="showSaveFilePicker"in window,cJ=me(null),_3=me(""),dJ=me(t=>t(_3)!==t(Z0));function hJ(){const t=wt(),[e,n]=Vp(cJ),i=lt(dJ),r=KL(_3),s=e&&i,o=x.useCallback(async()=>{if(!mh){Ri({title:t("editor.files.unsupported"),variant:"error"});return}if(!(s&&!confirm(t("editor.files.unsaved"))))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});await d.requestPermission({mode:"readwrite"})==="granted"&&n(d);const p=await(await d.getFile()).text();r(p),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:p}})}catch(d){console.error(d),Ri({title:t("editor.files.open-error"),variant:"error"})}},[t,s,n,r]);vu(d=>d.ctrlKey&&d.key==="o",d=>{d.preventDefault(),o()},void 0,[o]);const a=x.useCallback(async d=>{var f,p;if(d.stopPropagation(),d.preventDefault(),!mh){Ri({title:t("editor.files.unsupported"),variant:"error"});return}const h=(p=(f=d.dataTransfer)==null?void 0:f.items)==null?void 0:p[0];if(!(!h||h.kind!=="file")&&!(s&&!confirm(t("editor.files.unsaved"))))try{const m=await h.getAsFileSystemHandle();if(!m)throw new Error("File handle not found");await m.requestPermission({mode:"readwrite"})==="granted"&&n(m);const y=await(await m.getFile()).text();r(y),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:y}})}catch(m){console.error(m),Ri({title:t("editor.files.open-error"),variant:"error"})}},[n,r,t,s]);nv("drop",a,window),nv("dragover",d=>{d.preventDefault(),d.stopPropagation()},window);const l=x.useCallback(async()=>{if(!mh){Ri({title:t("editor.files.unsupported"),variant:"error"});return}if(s)try{const d=window.codemirror.state.doc.toString(),h=await e.createWritable({keepExistingData:!1});await h.write(d),await h.close(),r(d)}catch(d){console.error(d),Ri({title:t("editor.files.save-error"),variant:"error"})}},[t,s,e,r]),u=x.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),h=(e==null?void 0:e.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(mh)try{const f=await window.showSaveFilePicker({suggestedName:h,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]}),p=await f.requestPermission({mode:"readwrite"});if(p!=="granted")throw new Error(`Permission denied: ${p}`);n(f);const m=await f.createWritable({keepExistingData:!1});await m.write(d),await m.close(),r(d)}catch(f){console.error(f),Ri({title:t("editor.files.save-error"),variant:"error"})}else{const f=new Blob([d],{type:"text/plain"}),p=URL.createObjectURL(f),m=document.createElement("a");m.style.display="none",m.href=p,m.download=h,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(p)}},[t,e,n,r]);vu(d=>d.ctrlKey&&d.key==="s",d=>{d.preventDefault(),mh&&(e?l():u())},void 0,[e,l,u]),vu(d=>d.ctrlKey&&d.shiftKey&&d.key==="S",d=>{d.preventDefault(),u()},void 0,[u]);const c=x.useCallback(d=>{s&&(d.preventDefault(),d.returnValue=t("editor.files.unsaved"))},[t,s]);return nv("beforeunload",c,window),g.jsxs(AY,{children:[g.jsx(PY,{asChild:!0,children:g.jsxs("button",{className:$e("flex items-center transition-colors hover:text-white",e&&"text-white"),children:[e?e.name:t("editor.files.no-file"),s&&g.jsx("span",{className:"ml-1 h-2 w-2 rounded-full bg-current"})]})}),g.jsxs(l3,{className:"w-64",align:"start",children:[g.jsxs(mv,{onClick:o,children:[g.jsx("span",{className:"icon-[lucide--file-search-2] mr-2 h-4 w-4"}),t("editor.files.open"),g.jsx("div",{className:"grow"}),g.jsx("kbd",{className:"text-stone-600",children:"Ctrl+O"})]}),g.jsxs(mv,{disabled:!s,onClick:l,children:[g.jsx("span",{className:"icon-[lucide--save] mr-2 h-4 w-4"}),t("editor.files.save"),g.jsx("div",{className:"grow"}),g.jsx("kbd",{className:"text-stone-600",children:"Ctrl+S"})]}),g.jsxs(mv,{onClick:u,children:[g.jsx("span",{className:"icon-[lucide--save-all] mr-2 h-4 w-4"}),t("editor.files.save-as"),g.jsx("div",{className:"grow"}),g.jsx("kbd",{className:"text-stone-600",children:"Ctrl+Shift+S"})]})]})]})}function fJ(){const t=wt(),e=pJ();return g.jsxs("footer",{className:"px-2 py-1 text-center text-xs tracking-wider text-stone-500",children:[g.jsx("a",{href:"/VonSim8/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),g.jsx("span",{className:"px-2",children:""}),g.jsx("a",{href:"https://github.com/ruiz-jose/VonSim8",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),g.jsx("span",{className:"px-2",children:""}),g.jsx("a",{href:e,className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.issue.report")}),g.jsx("span",{className:"px-2 max-sm:hidden",children:""}),g.jsx("br",{className:"sm:hidden"}),g.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:[" Copyright 2017-",new Date().getFullYear(),"  ",t("footer.copyright")]})]})}function pJ(){const t=wt(),[e]=im(),n=aJ();return"https://github.com/ruiz-jose/VonSim8/issues/new?body="+encodeURIComponent(t("footer.issue.body",e,n))}/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const mJ={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},gJ=mJ,vJ={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},yJ={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},wJ=yJ,bJ={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},xJ={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function SJ(t,e,n){return(e=kJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function re(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IR(Object(n),!0).forEach(function(i){SJ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _J(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kJ(t){var e=_J(t,"string");return typeof e=="symbol"?e:e+""}const DR=()=>{};let fE={},k3={},C3=null,E3={mark:DR,measure:DR};try{typeof window<"u"&&(fE=window),typeof document<"u"&&(k3=document),typeof MutationObserver<"u"&&(C3=MutationObserver),typeof performance<"u"&&(E3=performance)}catch{}const{userAgent:LR=""}=fE.navigator||{},ml=fE,Ft=k3,jR=C3,dg=E3;ml.document;const Zo=!!Ft.documentElement&&!!Ft.head&&typeof Ft.addEventListener=="function"&&typeof Ft.createElement=="function",A3=~LR.indexOf("MSIE")||~LR.indexOf("Trident/");var CJ=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,EJ=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,P3={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},AJ={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},T3=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],ri="classic",J0="duotone",PJ="sharp",TJ="sharp-duotone",R3=[ri,J0,PJ,TJ],RJ={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},MJ={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},NJ=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),OJ={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},IJ=["fak","fa-kit","fakd","fa-kit-duotone"],FR={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},DJ=["kit"],LJ={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},jJ=["fak","fakd"],FJ={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},$R={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},hg={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},$J=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],BJ=["fak","fa-kit","fakd","fa-kit-duotone"],zJ={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},UJ={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},HJ={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},l_={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},VJ=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],u_=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...$J,...VJ],WJ=["solid","regular","light","thin","duotone","brands"],M3=[1,2,3,4,5,6,7,8,9,10],GJ=M3.concat([11,12,13,14,15,16,17,18,19,20]),KJ=[...Object.keys(HJ),...WJ,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",hg.GROUP,hg.SWAP_OPACITY,hg.PRIMARY,hg.SECONDARY].concat(M3.map(t=>"".concat(t,"x"))).concat(GJ.map(t=>"w-".concat(t))),XJ={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Go="___FONT_AWESOME___",c_=16,N3="fa",O3="svg-inline--fa",Lu="data-fa-i2svg",d_="data-fa-pseudo-element",qJ="data-fa-pseudo-element-pending",pE="data-prefix",mE="data-icon",BR="fontawesome-i2svg",YJ="async",ZJ=["HTML","HEAD","STYLE","SCRIPT"],I3=(()=>{try{return!0}catch{return!1}})();function rm(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[ri]}})}const D3=re({},P3);D3[ri]=re(re(re(re({},{"fa-duotone":"duotone"}),P3[ri]),FR.kit),FR["kit-duotone"]);const JJ=rm(D3),h_=re({},OJ);h_[ri]=re(re(re(re({},{duotone:"fad"}),h_[ri]),$R.kit),$R["kit-duotone"]);const zR=rm(h_),f_=re({},l_);f_[ri]=re(re({},f_[ri]),FJ.kit);const gE=rm(f_),p_=re({},UJ);p_[ri]=re(re({},p_[ri]),LJ.kit);rm(p_);const QJ=CJ,L3="fa-layers-text",eQ=EJ,tQ=re({},RJ);rm(tQ);const nQ=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Wb=AJ,iQ=[...DJ,...KJ],ff=ml.FontAwesomeConfig||{};function rQ(t){var e=Ft.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function sQ(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}Ft&&typeof Ft.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=sQ(rQ(n));r!=null&&(ff[i]=r)});const j3={styleDefault:"solid",familyDefault:ri,cssPrefix:N3,replacementClass:O3,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};ff.familyPrefix&&(ff.cssPrefix=ff.familyPrefix);const Md=re(re({},j3),ff);Md.autoReplaceSvg||(Md.observeMutations=!1);const Ne={};Object.keys(j3).forEach(t=>{Object.defineProperty(Ne,t,{enumerable:!0,set:function(e){Md[t]=e,pf.forEach(n=>n(Ne))},get:function(){return Md[t]}})});Object.defineProperty(Ne,"familyPrefix",{enumerable:!0,set:function(t){Md.cssPrefix=t,pf.forEach(e=>e(Ne))},get:function(){return Md.cssPrefix}});ml.FontAwesomeConfig=Ne;const pf=[];function oQ(t){return pf.push(t),()=>{pf.splice(pf.indexOf(t),1)}}const ra=c_,Ws={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function aQ(t){if(!t||!Zo)return;const e=Ft.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=Ft.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return Ft.head.insertBefore(e,i),t}const lQ="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function bp(){let t=12,e="";for(;t-- >0;)e+=lQ[Math.random()*62|0];return e}function Gd(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function vE(t){return t.classList?Gd(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function F3(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function uQ(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(F3(t[n]),'" '),"").trim()}function Q0(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function yE(t){return t.size!==Ws.size||t.x!==Ws.x||t.y!==Ws.y||t.rotate!==Ws.rotate||t.flipX||t.flipY}function cQ(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},u={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:u}}function dQ(t){let{transform:e,width:n=c_,height:i=c_,startCentered:r=!1}=t,s="";return r&&A3?s+="translate(".concat(e.x/ra-n/2,"em, ").concat(e.y/ra-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/ra,"em), calc(-50% + ").concat(e.y/ra,"em)) "):s+="translate(".concat(e.x/ra,"em, ").concat(e.y/ra,"em) "),s+="scale(".concat(e.size/ra*(e.flipX?-1:1),", ").concat(e.size/ra*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var hQ=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function $3(){const t=N3,e=O3,n=Ne.cssPrefix,i=Ne.replacementClass;let r=hQ;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let UR=!1;function Gb(){Ne.autoAddCss&&!UR&&(aQ($3()),UR=!0)}var fQ={mixout(){return{dom:{css:$3,insertCss:Gb}}},hooks(){return{beforeDOMElementCreation(){Gb()},beforeI2svg(){Gb()}}}};const Ko=ml||{};Ko[Go]||(Ko[Go]={});Ko[Go].styles||(Ko[Go].styles={});Ko[Go].hooks||(Ko[Go].hooks={});Ko[Go].shims||(Ko[Go].shims=[]);var Gs=Ko[Go];const B3=[],z3=function(){Ft.removeEventListener("DOMContentLoaded",z3),Oy=1,B3.map(t=>t())};let Oy=!1;Zo&&(Oy=(Ft.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ft.readyState),Oy||Ft.addEventListener("DOMContentLoaded",z3));function pQ(t){Zo&&(Oy?setTimeout(t,0):B3.push(t))}function sm(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?F3(t):"<".concat(e," ").concat(uQ(n),">").concat(i.map(sm).join(""),"</").concat(e,">")}function HR(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var Kb=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,u,c;for(i===void 0?(l=1,c=e[s[0]]):(l=0,c=i);l<o;l++)u=s[l],c=a(c,e[u],u,e);return c};function mQ(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function m_(t){const e=mQ(t);return e.length===1?e[0].toString(16):null}function gQ(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function VR(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function g_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=VR(e);typeof Gs.hooks.addPack=="function"&&!i?Gs.hooks.addPack(t,VR(e)):Gs.styles[t]=re(re({},Gs.styles[t]||{}),r),t==="fas"&&g_("fa",e)}const{styles:xp,shims:vQ}=Gs,U3=Object.keys(gE),yQ=U3.reduce((t,e)=>(t[e]=Object.keys(gE[e]),t),{});let wE=null,H3={},V3={},W3={},G3={},K3={};function wQ(t){return~iQ.indexOf(t)}function bQ(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!wQ(r)?r:null}const X3=()=>{const t=i=>Kb(xp,(r,s,o)=>(r[o]=Kb(s,i,{}),r),{});H3=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),V3=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),K3=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in xp||Ne.autoFetchSvg,n=Kb(vQ,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});W3=n.names,G3=n.unicodes,wE=ew(Ne.styleDefault,{family:Ne.familyDefault})};oQ(t=>{wE=ew(t.styleDefault,{family:Ne.familyDefault})});X3();function bE(t,e){return(H3[t]||{})[e]}function xQ(t,e){return(V3[t]||{})[e]}function du(t,e){return(K3[t]||{})[e]}function q3(t){return W3[t]||{prefix:null,iconName:null}}function SQ(t){const e=G3[t],n=bE("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function gl(){return wE}const Y3=()=>({prefix:null,iconName:null,rest:[]});function _Q(t){let e=ri;const n=U3.reduce((i,r)=>(i[r]="".concat(Ne.cssPrefix,"-").concat(r),i),{});return R3.forEach(i=>{(t.includes(n[i])||t.some(r=>yQ[i].includes(r)))&&(e=i)}),e}function ew(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=ri}=e,i=JJ[n][t];if(n===J0&&!t)return"fad";const r=zR[n][t]||zR[n][i],s=t in Gs.styles?t:null;return r||s||null}function kQ(t){let e=[],n=null;return t.forEach(i=>{const r=bQ(Ne.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function WR(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function tw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=u_.concat(BJ),s=WR(t.filter(d=>r.includes(d))),o=WR(t.filter(d=>!u_.includes(d))),a=s.filter(d=>(i=d,!T3.includes(d))),[l=null]=a,u=_Q(s),c=re(re({},kQ(o)),{},{prefix:ew(l,{family:u})});return re(re(re({},c),PQ({values:t,family:u,styles:xp,config:Ne,canonical:c,givenPrefix:i})),CQ(n,i,c))}function CQ(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?q3(r):{},o=du(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!xp.far&&xp.fas&&!Ne.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const EQ=R3.filter(t=>t!==ri||t!==J0),AQ=Object.keys(l_).filter(t=>t!==ri).map(t=>Object.keys(l_[t])).flat();function PQ(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===J0,l=e.includes("fa-duotone")||e.includes("fad"),u=o.familyDefault==="duotone",c=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||u||c)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&EQ.includes(n)&&(Object.keys(s).find(h=>AQ.includes(h))||o.autoFetchSvg)){const h=NJ.get(n).defaultShortPrefixId;i.prefix=h,i.iconName=du(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=gl()||"fas"),i}class TQ{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=re(re({},this.definitions[s]||{}),r[s]),g_(s,r[s]);const o=gE[ri][s];o&&g_(o,r[s]),X3()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(u=>{typeof u=="string"&&(e[s][u]=a)}),e[s][o]=a}),e}}let GR=[],Mc={};const ed={},RQ=Object.keys(ed);function MQ(t,e){let{mixoutsTo:n}=e;return GR=t,Mc={},Object.keys(ed).forEach(i=>{RQ.indexOf(i)===-1&&delete ed[i]}),GR.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{Mc[o]||(Mc[o]=[]),Mc[o].push(s[o])})}i.provides&&i.provides(ed)}),n}function v_(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(Mc[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function ju(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(Mc[t]||[]).forEach(s=>{s.apply(null,n)})}function vl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return ed[t]?ed[t].apply(null,e):void 0}function y_(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||gl();if(e)return e=du(n,e)||e,HR(Z3.definitions,n,e)||HR(Gs.styles,n,e)}const Z3=new TQ,NQ=()=>{Ne.autoReplaceSvg=!1,Ne.observeMutations=!1,ju("noAuto")},OQ={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Zo?(ju("beforeI2svg",t),vl("pseudoElements2svg",t),vl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Ne.autoReplaceSvg===!1&&(Ne.autoReplaceSvg=!0),Ne.observeMutations=!0,pQ(()=>{DQ({autoReplaceSvgRoot:e}),ju("watch",t)})}},IQ={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:du(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=ew(t[0]);return{prefix:n,iconName:du(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Ne.cssPrefix,"-"))>-1||t.match(QJ))){const e=tw(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||gl(),iconName:du(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=gl();return{prefix:e,iconName:du(e,t)||t}}}},fr={noAuto:NQ,config:Ne,dom:OQ,parse:IQ,library:Z3,findIconDefinition:y_,toHtml:sm},DQ=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Ft}=t;(Object.keys(Gs.styles).length>0||Ne.autoFetchSvg)&&Zo&&Ne.autoReplaceSvg&&fr.dom.i2svg({node:e})};function nw(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>sm(n))}}),Object.defineProperty(t,"node",{get:function(){if(!Zo)return;const n=Ft.createElement("div");return n.innerHTML=t.html,n.children}}),t}function LQ(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(yE(o)&&n.found&&!i.found){const{width:a,height:l}=n,u={x:a/l/2,y:.5};r.style=Q0(re(re({},s),{},{"transform-origin":"".concat(u.x+o.x/16,"em ").concat(u.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function jQ(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(Ne.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:re(re({},r),{},{id:o}),children:i}]}]}function xE(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:u,extra:c,watchable:d=!1}=t,{width:h,height:f}=n.found?n:e,p=jJ.includes(i),m=[Ne.replacementClass,r?"".concat(Ne.cssPrefix,"-").concat(r):""].filter(k=>c.classes.indexOf(k)===-1).filter(k=>k!==""||!!k).concat(c.classes).join(" ");let w={children:[],attributes:re(re({},c.attributes),{},{"data-prefix":i,"data-icon":r,class:m,role:c.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h," ").concat(f)})};const v=p&&!~c.classes.indexOf("fa-fw")?{width:"".concat(h/f*16*.0625,"em")}:{};d&&(w.attributes[Lu]=""),a&&(w.children.push({tag:"title",attributes:{id:w.attributes["aria-labelledby"]||"title-".concat(u||bp())},children:[a]}),delete w.attributes.title);const y=re(re({},w),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:re(re({},v),c.styles)}),{children:b,attributes:_}=n.found&&e.found?vl("generateAbstractMask",y)||{children:[],attributes:{}}:vl("generateAbstractIcon",y)||{children:[],attributes:{}};return y.children=b,y.attributes=_,o?jQ(y):LQ(y)}function KR(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=re(re(re({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Lu]="");const u=re({},o.styles);yE(r)&&(u.transform=dQ({transform:r,startCentered:!0,width:n,height:i}),u["-webkit-transform"]=u.transform);const c=Q0(u);c.length>0&&(l.style=c);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function FQ(t){const{content:e,title:n,extra:i}=t,r=re(re(re({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=Q0(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:Xb}=Gs;function w_(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat(Ne.cssPrefix,"-").concat(Wb.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ne.cssPrefix,"-").concat(Wb.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(Ne.cssPrefix,"-").concat(Wb.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const $Q={found:!1,width:512,height:512};function BQ(t,e){!I3&&!Ne.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function b_(t,e){let n=e;return e==="fa"&&Ne.styleDefault!==null&&(e=gl()),new Promise((i,r)=>{if(n==="fa"){const s=q3(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&Xb[e]&&Xb[e][t]){const s=Xb[e][t];return i(w_(s))}BQ(t,e),i(re(re({},$Q),{},{icon:Ne.showMissingIcons&&t?vl("missingIconAbstract")||{}:{}}))})}const XR=()=>{},x_=Ne.measurePerformance&&dg&&dg.mark&&dg.measure?dg:{mark:XR,measure:XR},Vh='FA "6.7.1"',zQ=t=>(x_.mark("".concat(Vh," ").concat(t," begins")),()=>J3(t)),J3=t=>{x_.mark("".concat(Vh," ").concat(t," ends")),x_.measure("".concat(Vh," ").concat(t),"".concat(Vh," ").concat(t," begins"),"".concat(Vh," ").concat(t," ends"))};var SE={begin:zQ,end:J3};const gv=()=>{};function qR(t){return typeof(t.getAttribute?t.getAttribute(Lu):null)=="string"}function UQ(t){const e=t.getAttribute?t.getAttribute(pE):null,n=t.getAttribute?t.getAttribute(mE):null;return e&&n}function HQ(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Ne.replacementClass)}function VQ(){return Ne.autoReplaceSvg===!0?vv.replace:vv[Ne.autoReplaceSvg]||vv.replace}function WQ(t){return Ft.createElementNS("http://www.w3.org/2000/svg",t)}function GQ(t){return Ft.createElement(t)}function Q3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?WQ:GQ}=e;if(typeof t=="string")return Ft.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild(Q3(s,{ceFn:n}))}),i}function KQ(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const vv={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(Q3(n),e)}),e.getAttribute(Lu)===null&&Ne.keepOriginalSource){let n=Ft.createComment(KQ(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~vE(e).indexOf(Ne.replacementClass))return vv.replace(t);const i=new RegExp("".concat(Ne.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===Ne.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>sm(s)).join(`
`);e.setAttribute(Lu,""),e.innerHTML=r}};function YR(t){t()}function e5(t,e){const n=typeof e=="function"?e:gv;if(t.length===0)n();else{let i=YR;Ne.mutateApproach===YJ&&(i=ml.requestAnimationFrame||YR),i(()=>{const r=VQ(),s=SE.begin("mutate");t.map(r),s(),n()})}}let _E=!1;function t5(){_E=!0}function S_(){_E=!1}let Iy=null;function ZR(t){if(!jR||!Ne.observeMutations)return;const{treeCallback:e=gv,nodeCallback:n=gv,pseudoElementsCallback:i=gv,observeMutationsRoot:r=Ft}=t;Iy=new jR(s=>{if(_E)return;const o=gl();Gd(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!qR(a.addedNodes[0])&&(Ne.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Ne.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&qR(a.target)&&~nQ.indexOf(a.attributeName))if(a.attributeName==="class"&&UQ(a.target)){const{prefix:l,iconName:u}=tw(vE(a.target));a.target.setAttribute(pE,l||o),u&&a.target.setAttribute(mE,u)}else HQ(a.target)&&n(a.target)})}),Zo&&Iy.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function XQ(){Iy&&Iy.disconnect()}function qQ(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function YQ(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=tw(vE(t));return r.prefix||(r.prefix=gl()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=xQ(r.prefix,t.innerText)||bE(r.prefix,m_(t.innerText))),!r.iconName&&Ne.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function ZQ(t){const e=Gd(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return Ne.autoA11y&&(n?e["aria-labelledby"]="".concat(Ne.replacementClass,"-title-").concat(i||bp()):(e["aria-hidden"]="true",e.focusable="false")),e}function JQ(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ws,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function JR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=YQ(t),s=ZQ(t),o=v_("parseNodeAttributes",{},t);let a=e.styleParser?qQ(t):[];return re({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:Ws,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:QQ}=Gs;function n5(t){const e=Ne.autoReplaceSvg==="nest"?JR(t,{styleParser:!1}):JR(t);return~e.extra.classes.indexOf(L3)?vl("generateLayersText",t,e):vl("generateSvgReplacementMutation",t,e)}function eee(){return[...IJ,...u_]}function QR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Zo)return Promise.resolve();const n=Ft.documentElement.classList,i=c=>n.add("".concat(BR,"-").concat(c)),r=c=>n.remove("".concat(BR,"-").concat(c)),s=Ne.autoFetchSvg?eee():T3.concat(Object.keys(QQ));s.includes("fa")||s.push("fa");const o=[".".concat(L3,":not([").concat(Lu,"])")].concat(s.map(c=>".".concat(c,":not([").concat(Lu,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=Gd(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=SE.begin("onTree"),u=a.reduce((c,d)=>{try{const h=n5(d);h&&c.push(h)}catch(h){I3||h.name==="MissingIcon"&&console.error(h)}return c},[]);return new Promise((c,d)=>{Promise.all(u).then(h=>{e5(h,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),c()})}).catch(h=>{l(),d(h)})})}function tee(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;n5(t).then(n=>{n&&e5([n],e)})}function nee(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:y_(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:y_(r||{})),t(i,re(re({},n),{},{mask:r}))}}const iee=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Ws,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:u={},styles:c={}}=e;if(!t)return;const{prefix:d,iconName:h,icon:f}=t;return nw(re({type:"icon"},t),()=>(ju("beforeDOMElementCreation",{iconDefinition:t,params:e}),Ne.autoA11y&&(o?u["aria-labelledby"]="".concat(Ne.replacementClass,"-title-").concat(a||bp()):(u["aria-hidden"]="true",u.focusable="false")),xE({icons:{main:w_(f),mask:r?w_(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:h,transform:re(re({},Ws),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:u,styles:c,classes:l}})))};var ree={mixout(){return{icon:nee(iee)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=QR,t.nodeCallback=tee,t}}},provides(t){t.i2svg=function(e){const{node:n=Ft,callback:i=()=>{}}=e;return QR(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:u,maskId:c,extra:d}=n;return new Promise((h,f)=>{Promise.all([b_(i,o),u.iconName?b_(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(p=>{let[m,w]=p;h([e,xE({icons:{main:m,mask:w},prefix:o,iconName:i,transform:a,symbol:l,maskId:c,title:r,titleId:s,extra:d,watchable:!0})])}).catch(f)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=Q0(o);a.length>0&&(i.style=a);let l;return yE(s)&&(l=vl("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},see={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return nw({type:"layer"},()=>{ju("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat(Ne.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},oee={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return nw({type:"counter",content:t},()=>(ju("beforeDOMElementCreation",{content:t,params:e}),FQ({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat(Ne.cssPrefix,"-layers-counter"),...i]}})))}}}},aee={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Ws,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return nw({type:"text",content:t},()=>(ju("beforeDOMElementCreation",{content:t,params:e}),KR({content:t,transform:re(re({},Ws),n),title:i,extra:{attributes:s,styles:o,classes:["".concat(Ne.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(A3){const l=parseInt(getComputedStyle(e).fontSize,10),u=e.getBoundingClientRect();o=u.width/l,a=u.height/l}return Ne.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,KR({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const lee=new RegExp('"',"ug"),eM=[1105920,1112319],tM=re(re(re(re({},{FontAwesome:{normal:"fas",400:"fas"}}),MJ),XJ),zJ),__=Object.keys(tM).reduce((t,e)=>(t[e.toLowerCase()]=tM[e],t),{}),uee=Object.keys(__).reduce((t,e)=>{const n=__[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function cee(t){const e=t.replace(lee,""),n=gQ(e,0),i=n>=eM[0]&&n<=eM[1],r=e.length===2?e[0]===e[1]:!1;return{value:m_(r?e[0]:e),isSecondary:i||r}}function dee(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(__[n]||{})[r]||uee[n]}function nM(t,e){const n="".concat(qJ).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=Gd(t.children).filter(h=>h.getAttribute(d_)===e)[0],a=ml.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),u=l.match(eQ),c=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!u)return t.removeChild(o),i();if(u&&d!=="none"&&d!==""){const h=a.getPropertyValue("content");let f=dee(l,c);const{value:p,isSecondary:m}=cee(h),w=u[0].startsWith("FontAwesome");let v=bE(f,p),y=v;if(w){const b=SQ(p);b.iconName&&b.prefix&&(v=b.iconName,f=b.prefix)}if(v&&!m&&(!o||o.getAttribute(pE)!==f||o.getAttribute(mE)!==y)){t.setAttribute(n,y),o&&t.removeChild(o);const b=JQ(),{extra:_}=b;_.attributes[d_]=e,b_(v,f).then(k=>{const C=xE(re(re({},b),{},{icons:{main:k,mask:Y3()},prefix:f,iconName:y,extra:_,watchable:!0})),E=Ft.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(E,t.firstChild):t.appendChild(E),E.outerHTML=C.map(P=>sm(P)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function hee(t){return Promise.all([nM(t,"::before"),nM(t,"::after")])}function fee(t){return t.parentNode!==document.head&&!~ZJ.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(d_)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function iM(t){if(Zo)return new Promise((e,n)=>{const i=Gd(t.querySelectorAll("*")).filter(fee).map(hee),r=SE.begin("searchPseudoElements");t5(),Promise.all(i).then(()=>{r(),S_(),e()}).catch(()=>{r(),S_(),n()})})}var pee={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=iM,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=Ft}=e;Ne.searchPseudoElements&&iM(n)}}};let rM=!1;var mee={mixout(){return{dom:{unwatch(){t5(),rM=!0}}}},hooks(){return{bootstrap(){ZR(v_("mutationObserverCallbacks",{}))},noAuto(){XQ()},watch(t){const{observeMutationsRoot:e}=t;rM?S_():ZR(v_("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const sM=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var gee={mixout(){return{parse:{transform:t=>sM(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=sM(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),c={transform:"".concat(a," ").concat(l," ").concat(u)},d={transform:"translate(".concat(s/2*-1," -256)")},h={outer:o,inner:c,path:d};return{tag:"g",attributes:re({},h.outer),children:[{tag:"g",attributes:re({},h.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:re(re({},n.icon.attributes),h.path)}]}]}}}};const qb={x:0,y:0,width:"100%",height:"100%"};function oM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function vee(t){return t.tag==="g"?t.children:[t]}var yee={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?tw(n.split(" ").map(r=>r.trim())):Y3();return i.prefix||(i.prefix=gl()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:u}=r,{width:c,icon:d}=s,h=cQ({transform:a,containerWidth:c,iconWidth:l}),f={tag:"rect",attributes:re(re({},qb),{},{fill:"white"})},p=u.children?{children:u.children.map(oM)}:{},m={tag:"g",attributes:re({},h.inner),children:[oM(re({tag:u.tag,attributes:re(re({},u.attributes),h.path)},p))]},w={tag:"g",attributes:re({},h.outer),children:[m]},v="mask-".concat(o||bp()),y="clip-".concat(o||bp()),b={tag:"mask",attributes:re(re({},qb),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[f,w]},_={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:vee(d)},b]};return n.push(_,{tag:"rect",attributes:re({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(v,")")},qb)}),{children:n,attributes:i}}}},wee={provides(t){let e=!1;ml.matchMedia&&(e=ml.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:re(re({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=re(re({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:re(re({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:re(re({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:re(re({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:re(re({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:re(re({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:re(re({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:re(re({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},bee={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},xee=[fQ,ree,see,oee,aee,pee,mee,gee,yee,wee,bee];MQ(xee,{mixoutsTo:fr});fr.noAuto;fr.config;fr.library;fr.dom;const k_=fr.parse;fr.findIconDefinition;fr.toHtml;const See=fr.icon;fr.layer;fr.text;fr.counter;var i5={exports:{}},_ee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kee=_ee,Cee=kee;function r5(){}function s5(){}s5.resetWarningCache=r5;var Eee=function(){function t(i,r,s,o,a,l){if(l!==Cee){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:s5,resetWarningCache:r5};return n.PropTypes=n,n};i5.exports=Eee();var Aee=i5.exports;const et=Hu(Aee);function aM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aM(Object(n),!0).forEach(function(i){Nc(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Dy(t){"@babel/helpers - typeof";return Dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dy(t)}function Nc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pee(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function Tee(t,e){if(t==null)return{};var n=Pee(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function C_(t){return Ree(t)||Mee(t)||Nee(t)||Oee()}function Ree(t){if(Array.isArray(t))return E_(t)}function Mee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Nee(t,e){if(t){if(typeof t=="string")return E_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E_(t,e)}}function E_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Oee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iee(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,u=t.spinPulse,c=t.spinReverse,d=t.pulse,h=t.fixedWidth,f=t.inverse,p=t.border,m=t.listItem,w=t.flip,v=t.size,y=t.rotation,b=t.pull,_=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":c,"fa-spin-pulse":u,"fa-pulse":d,"fa-fw":h,"fa-inverse":f,"fa-border":p,"fa-li":m,"fa-flip":w===!0,"fa-flip-horizontal":w==="horizontal"||w==="both","fa-flip-vertical":w==="vertical"||w==="both"},Nc(e,"fa-".concat(v),typeof v<"u"&&v!==null),Nc(e,"fa-rotate-".concat(y),typeof y<"u"&&y!==null&&y!==0),Nc(e,"fa-pull-".concat(b),typeof b<"u"&&b!==null),Nc(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(_).map(function(k){return _[k]?k:null}).filter(function(k){return k})}function Dee(t){return t=t-0,t===t}function o5(t){return Dee(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var Lee=["style"];function jee(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Fee(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=o5(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[jee(r)]=s:e[r]=s,e},{})}function a5(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return a5(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,u){var c=e.attributes[u];switch(u){case"class":l.attrs.className=c,delete e.attributes.class;break;case"style":l.attrs.style=Fee(c);break;default:u.indexOf("aria-")===0||u.indexOf("data-")===0?l.attrs[u.toLowerCase()]=c:l.attrs[o5(u)]=c}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=Tee(n,Lee);return r.attrs.style=js(js({},r.attrs.style),o),t.apply(void 0,[e.tag,js(js({},r.attrs),a)].concat(C_(i)))}var l5=!1;try{l5=!0}catch{}function $ee(){if(!l5&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function lM(t){if(t&&Dy(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(k_.icon)return k_.icon(t);if(t===null)return null;if(t&&Dy(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function Yb(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Nc({},t,e):{}}var uM={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Oc=on.forwardRef(function(t,e){var n=js(js({},uM),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,u=n.maskId,c=lM(i),d=Yb("classes",[].concat(C_(Iee(n)),C_((o||"").split(" ")))),h=Yb("transform",typeof n.transform=="string"?k_.transform(n.transform):n.transform),f=Yb("mask",lM(r)),p=See(c,js(js(js(js({},d),h),f),{},{symbol:s,title:a,titleId:l,maskId:u}));if(!p)return $ee("Could not find icon",c),null;var m=p.abstract,w={ref:e};return Object.keys(n).forEach(function(v){uM.hasOwnProperty(v)||(w[v]=n[v])}),Bee(m[0],w)});Oc.displayName="FontAwesomeIcon";Oc.propTypes={beat:et.bool,border:et.bool,beatFade:et.bool,bounce:et.bool,className:et.string,fade:et.bool,flash:et.bool,mask:et.oneOfType([et.object,et.array,et.string]),maskId:et.string,fixedWidth:et.bool,inverse:et.bool,flip:et.oneOf([!0,!1,"horizontal","vertical","both"]),icon:et.oneOfType([et.object,et.array,et.string]),listItem:et.bool,pull:et.oneOf(["right","left"]),pulse:et.bool,rotation:et.oneOf([0,90,180,270]),shake:et.bool,size:et.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:et.bool,spinPulse:et.bool,spinReverse:et.bool,symbol:et.oneOfType([et.bool,et.string]),title:et.string,titleId:et.string,transform:et.oneOfType([et.string,et.object]),swapOpacity:et.bool};var Bee=a5.bind(null,on.createElement);function Sp(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class mn{constructor(e,n){fe(this,"start");fe(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new mn(i,r)}toJSON(){return this.range}}const cM=Ee.from(Ee.MAX_ADDRESS).toString(),zee=cr.from(cr.MAX_ADDRESS).toString(),Uee={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${Ee.format(t)} is out of range (max memory address: ${cM}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","instruction-out-of-range":t=>`This instruction would be placed in address ${Ee.format(t)}, which is outside the memory range (max memory address: ${cM}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${zee}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction  cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea."}},dM=Ee.from(Ee.MAX_ADDRESS).toString(),Hee=cr.from(cr.MAX_ADDRESS).toString(),Vee={"address-has-code":t=>`La direccin de memoria ${Ee.format(t)} tiene instrucciones. No se puede usar como direccin de datos.`,"address-out-of-range":t=>`La direccin de memoria ${Ee.format(t)} est fuera de rango (direccin mxima de memoria: ${dM}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una direccin de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detect una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instruccin.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vaco. El programa debe tener, al menos, una instruccin END.","end-must-be-the-last-statement":"END debe ser la ltima instruccin.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El nico registro vlido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instruccin no espera ningn operando.","expects-one-operand":"Esta instruccin espera un operando.","expects-two-operands":"Esta instruccin espera dos operandos.","expects-word-register":"Esta instruccin espera un registro de 16 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","instruction-out-of-range":t=>`Esta instruccin se colocara en la direccin ${Ee.format(t)}, la cual se encuentra fuera del rango de memoria (direccin mxima de memoria: ${dM}).`,"invalid-interrupt":t=>`${t} no es un nmero de interrupcin vlido.`,"io-address-out-of-range":t=>`La direccin de E/S ${t} est fuera de rango (direccin mxima de memoria E/S: ${Hee}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debera apuntar a una constante EQU o a una instruccin. Quizs quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debera apuntar a una instruccin.`,"missing-org":"No hay ningn ORG antes de esta instruccin, por lo que no se puede determinar su ubicacin en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instruccin sera colocada en la direccin ${Ee.format(t)}, la cual ya est ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instruccin sera colocada en la direccin ${Ee.format(t)}, la cual ya est reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamao.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una direccin de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la direccin.","value-out-of-range":(t,e)=>`El nmero ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carcter solo puede contener un carcter.","empty-character":"Los carcter no puede estar vaco.","invalid-binary":"Nmero binario invlido. Solo puede contener ceros y unos.","invalid-decimal":"Nmero decimal invlido. Solo puede contener dgitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carcter inesperado "${t}".`,"unterminated-character":"Carcter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detect una expresin unaria ambigua. Use parntesis para evitar ambigedades.","expected-address-after-org":"Se esperaba una direccin despus de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instruccin termine.","expected-instruction":t=>`Se esperaba una instruccin, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta despus de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instruccin despus de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" despus de la expresin.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" despus de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El nico registro vlido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Parntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},Wee=uE({en:Uee,es:Vee});class se extends Error{constructor(n,...i){super();fe(this,"code");fe(this,"context");fe(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof mn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return Wee(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof se?n:new se("unexpected-error",n)}}const kE=[[0,j.fromUnsigned(160,8)],[3,j.fromUnsigned(176,8)],[6,j.fromUnsigned(192,8)],[7,j.fromUnsigned(208,8)]],hM=new Set(...kE.map(([t])=>[t,t+1,t+2,t+3]));var ka,rd;class Gee{constructor(){fe(this,"codeMemory",new Set);fe(this,"labels",new Map);fe(this,"hasORG",!1);De(this,ka,!1);De(this,rd,!1)}loadStatements(e){if(A(this,ka))throw new Error("Tried to load statements twice");Q(this,ka,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new se("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:Ee.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:Ee.from(0)})}return n}computeAddresses(e){if(A(this,rd))throw new Error("Tried to compute addresses twice");Q(this,rd,!0),this.codeMemory.clear();const n=new Set,i=e.some(c=>c.isInstruction()&&c.instruction==="INT");if(this.hasORG=e.some(c=>c.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new se("missing-org").at(e[0].position);let r=i||this.hasORG?32:0,s=null,o=r;const a=[],l=[],u=[];for(const c of e)c.isInstruction()?a.push(c):c.isOriginChange()?l.push(c):c.isDataDirective()&&u.push(c);if(this.hasORG){const c=[];return Sp(e,d=>{if(d.isEnd()||d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){r=d.newAddress;return}const h=r;if(h===null)throw new se("missing-org").at(d);const f=d.length;for(let m=0;m<f;m++){if(!Ee.inRange(h+m))throw new se("instruction-out-of-range",h+m).at(d);const w=Ee.from(h+m);if(n.has(w.value))throw new se("occupied-address",w).at(d);if(i&&hM.has(w.value))throw new se("reserved-address",w).at(d);n.add(w.value),d.isInstruction()&&this.codeMemory.add(w.value)}const p=Ee.from(h);d.setStart(p),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:p}),(d.isDataDirective()||d.isInstruction())&&(r+=f,o=Math.max(o,r))},se.from),c}else return Sp([...a,...l,...u],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const m=d.newAddress;m<32?s=m:r=m;return}let h;if(d.isDataDirective())s===null&&(s=o),h=s;else if(d.isInstruction())h=r;else throw new se("missing-org").at(d);const f=d.length;for(let m=0;m<f;m++){if(!Ee.inRange(h+m))throw new se("instruction-out-of-range",h+m).at(d);const w=Ee.from(h+m);if(n.has(w.value))throw new se("occupied-address",w).at(d);if(i&&hM.has(w.value))throw new se("reserved-address",w).at(d);n.add(w.value),d.isInstruction()&&this.codeMemory.add(w.value)}const p=Ee.from(h);if(d.setStart(p),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:p}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=f}else d.isInstruction()&&(r+=f,o=Math.max(o,r))},se.from)}labelExists(e){if(!A(this,ka))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,ka))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,ka))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,rd))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof Ee&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}ka=new WeakMap,rd=new WeakMap;const Kee=["AL","BL","CL","DL","AH","BH","CH","DH"],u5=["AX","BX","CX","DX","SP"],Ly=[...Kee,...u5],CE=["DB","DW","EQU"],EE=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],Xee=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...Ly,...EE,...CE];class qee{constructor(e,n,i){fe(this,"type");fe(this,"lexeme");fe(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class Yee{constructor(e){fe(this,"scanned",!1);fe(this,"tokens",[]);fe(this,"position",new mn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new mn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-character").at(this.position);if(wp(this.peek())===null)throw new se("lexer.only-ascii").at(new mn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new se("lexer.empty-character").at(this.position);if(n>=2)throw new se("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-string").at(this.position);if(wp(this.peek())===null)throw new se("lexer.only-ascii").at(new mn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new se("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new se("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();Xee.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new se("lexer.unexpected-character",e).at(this.position)}return this.position=new mn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new qee(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new mn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class Fn{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}fe(Fn,"numberLiteral",(...e)=>new Zee(...e)),fe(Fn,"label",(...e)=>new Jee(...e)),fe(Fn,"unaryOperation",(...e)=>new Qee(...e)),fe(Fn,"binaryOperation",(...e)=>new ete(...e));class Zee extends Fn{constructor(n,i){super(i);fe(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}class Jee extends Fn{constructor(n,i,r){super(r);fe(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new se("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new se("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new se("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}}class Qee extends Fn{constructor(n,i,r){super(r);fe(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class ete extends Fn{constructor(n,i,r,s){super(s);fe(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class iw{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var bo;class c5 extends iw{constructor(n,i,r){super(r);fe(this,"type","data-directive");fe(this,"label");fe(this,"values");De(this,bo,null);this.values=n,this.label=i}get start(){if(A(this,bo)===null)throw new Error("Start not set");return A(this,bo)}setStart(n){if(A(this,bo)!==null)throw new Error("Start already set");Q(this,bo,n)}toJSON(){return{...super.toJSON(),...A(this,bo)?{start:A(this,bo).toJSON()}:{},directive:this.directive,label:this.label}}}bo=new WeakMap;var hu,Ca,sd;class tte extends c5{constructor(n,i,r){super(n,i,r);fe(this,"directive","EQU");De(this,hu,"not-processed");De(this,Ca,null);De(this,sd,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,sd)??((n=A(this,Ca))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(A(this,Ca))throw new Error("Constant already validated");if(!this.label)throw new se("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new se("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new se("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new se("cannot-be-unassinged","EQU").at(n);Q(this,Ca,n.value)}evaluateExpressions(n){if(!A(this,Ca))throw new Error("Constant not validated");if(A(this,hu)==="processed")return A(this,sd);if(A(this,hu)==="processing")throw new se("circular-reference").at(this.position);Q(this,hu,"processed");const i=A(this,Ca).evaluate(n);return Q(this,hu,"processed"),Q(this,sd,i),i}evaluate(n){return this.evaluateExpressions(n)}}hu=new WeakMap,Ca=new WeakMap,sd=new WeakMap;const Wh=Symbol("unassigned");var Ci,Jr;class nte extends c5{constructor(n,i,r,s){super(i,r,s);fe(this,"size");De(this,Ci,null);De(this,Jr,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,Ci))throw new Error("Data directive not validated");return A(this,Ci).length*(this.size/8)}getValues(){if(!A(this,Jr))throw new Error("Data directive not evaluated");return A(this,Jr)}toJSON(){return{...super.toJSON(),values:(A(this,Jr)??A(this,Ci)??this.values).map(n=>n===Wh?"?":n.toJSON())}}validate(){if(A(this,Ci))throw new Error("Data directive already validated");Q(this,Ci,[]);for(const n of this.values)if(n.isUnassigned())A(this,Ci).push(Wh);else if(n.isString()){if(this.directive!=="DB")throw new se("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=wp(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new mn(n.position.start+r,n.position.start+r+1),a=Fn.numberLiteral(s,o);A(this,Ci).push(a)}}else A(this,Ci).push(n.value);if(A(this,Ci).length===0)throw new se("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,Ci))throw new Error("Data directive not validated");if(A(this,Jr))throw new Error("Data directive already evaluated");Q(this,Jr,[]);const i=Sp(A(this,Ci),r=>{if(r===Wh)A(this,Jr).push(Wh);else{const s=r.evaluate(n);if(!j.fits(s,this.size))throw new se("value-out-of-range",s,this.size).at(this);const o=j.fromNumber(s,this.size);A(this,Jr).push(o)}},se.from);return i.length>0&&Q(this,Jr,null),i}}Ci=new WeakMap,Jr=new WeakMap;class AE{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class ite extends AE{constructor(n,i){super(i);fe(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class rte extends AE{constructor(n){super(n);fe(this,"type","unassigned")}}class ste extends AE{constructor(n){super(n.position);fe(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function ote(t,e,n){const i=mn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new nte(t.type,e,n,i);case"EQU":return new tte(e,n,i)}}class Zb extends iw{constructor(n){super(n);fe(this,"type","end")}}function Ql(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var xo;class Xu extends iw{constructor(n,i,r){super(r);fe(this,"type","instruction");fe(this,"label");fe(this,"operands");De(this,xo,null);this.operands=n,this.label=i}getOperands(){return this.operands}get start(){if(A(this,xo)===null)throw new Error("Start not set");return A(this,xo)}setStart(n){if(A(this,xo)!==null)throw new Error("Start already set");Q(this,xo,n)}toJSON(){return{...super.toJSON(),...A(this,xo)?{start:A(this,xo).toJSON()}:{},instruction:this.instruction,label:this.label}}}xo=new WeakMap;var qn,yr;class ate extends Xu{constructor(n,i,r,s){super(i,r,s);De(this,qn,null);De(this,yr,null);this.instruction=n}get length(){if(!A(this,qn))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=A(this,qn);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!A(this,yr))throw new Error("Instruction not evaluated");return A(this,yr)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(Ql(r)&3)<<2,o[0]|=(Ql(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(Ql(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(Ql(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(Ql(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,yr)??A(this,qn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,qn))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new se("size-mismatch",r.size,i.size).at(this);Q(this,qn,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);Q(this,qn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);Q(this,qn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new se("size-mismatch",s.size,i.size).at(this);Q(this,qn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}Q(this,qn,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new se("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new se("size-mismatch",s,r.size).at(this);Q(this,qn,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new se("double-memory-access").at(this);s==="auto"&&(s=8),Q(this,qn,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new se("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,qn))throw new Error("Instruction not validated");if(A(this,yr))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=A(this,qn),a=l=>{const u=l.evaluate(n);if(!Ee.inRange(u))throw new se("address-out-of-range",u).at(l);const c=Ee.from(u);if(n.addressIsReserved(c))throw new se("address-has-code",c).at(l);return c};switch(i){case"reg<-reg":{Q(this,yr,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{Q(this,yr,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!j.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const u=j.fromNumber(l,r);Q(this,yr,{mode:i,size:r,out:s,src:u});return}case"mem<-reg":{Q(this,yr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!j.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const u=j.fromNumber(l,r);Q(this,yr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:u});return}default:return i}}}qn=new WeakMap,yr=new WeakMap;var Ns,So;class lte extends Xu{constructor(n,i,r,s){super(i,r,s);De(this,Ns,null);De(this,So,null);fe(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,So))throw new Error("Instruction not evaluated");return A(this,So)}toJSON(){return{...super.toJSON(),...A(this,So)?{value:A(this,So).toJSON()}:A(this,Ns)?{initialValue:A(this,Ns).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Ns))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new se("expects-immediate").at(n);Q(this,Ns,n.value)}evaluateExpressions(n){if(!A(this,Ns))throw new Error("Instruction not validated");if(A(this,So))throw new Error("Instruction aready evaluated");const i=A(this,Ns).evaluate(n);if(!j.fitsUnsigned(i,8))throw new se("invalid-interrupt",i).at(A(this,Ns));Q(this,So,j.fromUnsigned(i,8))}}Ns=new WeakMap,So=new WeakMap;var Qr,_o,eO;let ute=(eO=class extends Xu{constructor(n,i,r,s){super(i,r,s);De(this,Qr,null);De(this,_o,null);this.instruction=n}get length(){if(!A(this,Qr))throw new Error("Instruction not validated");return A(this,Qr).port==="fixed"?2:1}toBytes(){const n=[],i={IN:216,OUT:220};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,_o)===null)throw new Error("Operation not set");return A(this,_o)}toJSON(){return{...super.toJSON(),...A(this,_o)??A(this,Qr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Qr))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new se("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new se("expects-dx").at(i);Q(this,Qr,{port:"variable",size:r});return}if(i.isNumberExpression()){Q(this,Qr,{port:"fixed",size:r,address:i.value});return}throw new se("expects-immediate").at(i)}evaluateExpressions(n){if(!A(this,Qr))throw new Error("Instruction not validated");if(A(this,_o))throw new Error("Instruction aready evaluated");const i=A(this,Qr);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!cr.inRange(r))throw new se("io-address-out-of-range",r).at(this);const s=cr.from(r);Q(this,_o,{port:"fixed",size:i.size,address:s})}else Q(this,_o,{port:"variable",size:i.size})}},Qr=new WeakMap,_o=new WeakMap,eO);var ko,Os,tO;let cte=(tO=class extends Xu{constructor(n,i,r,s){super(i,r,s);De(this,ko,null);De(this,Os,null);fe(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,Os)===null)throw new Error("Instruction not evaluated");return A(this,Os)}toJSON(){return{...super.toJSON(),...A(this,Os)?{address:A(this,Os).toJSON()}:A(this,ko)?{jumpTo:A(this,ko)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,ko))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel()&&!i.value.isNumberLiteral())throw new se("expects-label").at(i);if(i.value.isLabel()){const r=i.value.value,s=n.getLabelType(r);if(!s)throw new se("label-not-found",r).at(i);if(s!=="instruction")throw new se("label-should-be-an-instruction",r).at(i);Q(this,ko,r)}else if(i.value.isNumberLiteral()){const r=i.value.value;if(!Ee.inRange(r))throw new se("address-out-of-range",r).at(i);Q(this,Os,Ee.from(r))}}evaluateExpressions(n){if(!A(this,Os)&&A(this,ko)){const i=n.getLabelValue(A(this,ko));if(!Ee.inRange(i))throw new se("address-out-of-range",i).at(this);Q(this,Os,Ee.from(i))}}},ko=new WeakMap,Os=new WeakMap,tO);var Is,nO;let dte=(nO=class extends Xu{constructor(n,i,r,s){super(i,r,s);De(this,Is,null);fe(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:208,POP:212}[this.instruction];return i|=Ql(this.register),new Uint8Array([i])}get register(){if(!A(this,Is))throw new Error("Instruction not evaluated");return A(this,Is)}toJSON(){return{...super.toJSON(),...A(this,Is)?{register:A(this,Is)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Is))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new se("expects-word-register").at(n);Q(this,Is,n.value)}evaluateExpressions(){if(!A(this,Is))throw new Error("Instruction not validated")}},Is=new WeakMap,nO);var Ki,Ds;class hte extends Xu{constructor(n,i,r,s){super(i,r,s);De(this,Ki,null);De(this,Ds,null);this.instruction=n}get length(){if(!A(this,Ki))throw new Error("Instruction not validated");const{mode:n}=A(this,Ki);let i=1;return n==="mem-direct"&&(i+=1),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=Ql(this.operation.reg);break}case"mem-direct":{n[1]=192;const r=this.operation.address.byte;n.push(r.low.unsigned),n.push(r.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,Ds))throw new Error("Instruction not evaluated");return A(this,Ds)}toJSON(){return{...super.toJSON(),...A(this,Ds)??A(this,Ki)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Ki))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){Q(this,Ki,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);Q(this,Ki,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);Q(this,Ki,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){Q(this,Ki,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new se("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!A(this,Ki))throw new Error("Instruction not validated");if(A(this,Ds))throw new Error("Instruction aready evaluated");const i=A(this,Ki);switch(i.mode){case"reg":{Q(this,Ds,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!Ee.inRange(r))throw new se("address-out-of-range",r).at(i.address);const s=Ee.from(r);if(n.addressIsReserved(s))throw new se("address-has-code",s).at(i.address);Q(this,Ds,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{Q(this,Ds,{mode:"mem-indirect",size:i.size});return}default:return i}}}Ki=new WeakMap,Ds=new WeakMap;var od;class fte extends Xu{constructor(n,i,r,s){super(i,r,s);De(this,od,!1);fe(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,od))throw new Error("Instruction already validated");if(this.operands.length>0)throw new se("expects-no-operands").at(this);Q(this,od,!0)}evaluateExpressions(){if(!A(this,od))throw new Error("Instruction not validated")}}od=new WeakMap;class rw{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class pte extends rw{constructor(n){super(n.position);fe(this,"type","register");fe(this,"value");this.value=n.type}get size(){return u5.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class mte extends rw{constructor(n,i){super(i);fe(this,"type","indirect-address");fe(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class gte extends rw{constructor(n,i,r){super(r);fe(this,"type","direct-address");fe(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class jy extends rw{constructor(n){super(n.position);fe(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return jy.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new se("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:Fn.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=jy.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:Fn.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function fM(t,e,n){const i=mn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new fte(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new ate(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new hte(t.type,e,n,i);case"PUSH":case"POP":return new dte(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new cte(t.type,e,n,i);case"IN":case"OUT":return new ute(t.type,e,n,i);case"INT":return new lte(t.type,e,n,i)}}class vte extends iw{constructor(n,i){super(i);fe(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let yte=class{constructor(e){fe(this,"tokens");fe(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new se("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new se("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new vte(i,mn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new se("end-must-be-the-last-statement").at(e);return new Zb(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new Zb(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new Zb(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...CE);if(e&&!n)throw new se("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),ote(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new ite(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new rte(e.position)}return new ste(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...EE);if(e&&!n){const s=this.peek();throw new se("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return fM(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),fM(n,r,i)}instructionOperand(){if(this.match(...Ly)){const n=this.previous();return new pte(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new se("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Ly)){this.consume("BL",new se("parser.indirect-addressing-must-be-bx"));const i=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-literal","]","BL"));return new mte(e==null?void 0:e.type,mn.merge(e==null?void 0:e.position,n.position,i.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-expression","]"));return new gte(i,e==null?void 0:e.type,mn.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new se("parser.expected-literal-after-literal","[","PTR");return new jy(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new se("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new se("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return Fn.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=wp(i.lexeme.slice(1,-1));return Fn.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new se("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new se("parser.expected-label-after-offset").at(this.peek());if(!n)throw new se("parser.expected-argument").at(this.peek());return Fn.label(n.lexeme.toUpperCase(),e!==null,mn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new se("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return Fn.unaryOperation(e.type==="PLUS"?"+":"-",n,mn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=Fn.binaryOperation(e,"*",n,mn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=Fn.binaryOperation(e,n.type==="PLUS"?"+":"-",i,mn.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function d5(t){try{const n=new Yee(t).scanTokens(),r=new yte(n).parse();if(!r.at(-1))throw new se("empty-program");let o=[];const a=new Gee;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=Sp(r,c=>{c.isOriginChange()||c.isEnd()||c.validate(a)},se.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],u=[];return o=Sp(r,c=>{if(c.isDataDirective())if(c.directive==="EQU")c.evaluateExpressions(a);else{const d=c.evaluateExpressions(a);return l.push(c),d}else c.isInstruction()&&(c.evaluateExpressions(a),u.push(c))},se.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:u,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[se.from(e)]}}}class xs{constructor(e){fe(this,"computer");this.computer=e.computer}}const wte=t=>Ee.format(t).slice(-2),bte=wte(Ee.MAX_ADDRESS),xte={"address-has-instruction":t=>`Memory address ${Ee.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${Ee.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${Ee.format(t)} is out of range (max memory address: ${bte}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${cr.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${Ee.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},Ste=Ee.from(Ee.MAX_ADDRESS).toString(),_te={"address-has-instruction":t=>`La direccin de memoria ${Ee.format(t)} tiene una instruccin, y no se puede escribir.`,"address-is-reserved":t=>`La direccin de memoria ${Ee.format(t)} est reservada, y no se puede escribir.`,"address-out-of-range":t=>`La direccin de memoria ${Ee.format(t)} est fuera de rango (direccin mxima de memoria: ${Ste}).`,"device-not-connected":t=>`"${t}" no est conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontr ningn mdulo conectado a la direccin de memoria E/S ${cr.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instruccin en la direccin de memoria ${Ee.format(t)} pero no se encontr ninguna.`,"no-program":"No hay ningn programa cargado. Ensambl antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},kte=uE({en:xte,es:_te});class Ut extends Error{constructor(n,...i){super();fe(this,"code");fe(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return kte(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof Ut?n:new Ut("unexpected-error",n)}}class Jo{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,i){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new Ut("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),i||(yield*e.cpu.getMBR(n))}}var o0,h5;class Cte extends Jo{constructor(){super(...arguments);De(this,o0)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:xt(this,o0,h5).call(this),willUse:{id:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct",ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"&&this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")i!=="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(this.operation.mode==="mem<-imd"?yield*n.cpu.getMBR("id.l"):yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}i==="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}i==="mem<-imd"&&(yield*n.cpu.copyByteRegister("id.l","left.l")),yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let u;const c={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;u=j.fromSigned(d,r),c.CF=!1,c.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned+l.unsigned+d;h>j.maxValue(r)?(c.CF=!0,u=j.fromUnsigned(h-j.maxValue(r)-1,r)):(c.CF=!1,u=j.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed>=0&&u.signed<0||a.signed<0&&l.signed<0&&u.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned-l.unsigned-d;h<0?(c.CF=!0,u=j.fromUnsigned(h+j.maxValue(r)+1,r)):(c.CF=!1,u=j.fromUnsigned(h,r)),c.OF=a.signed>=0&&l.signed<0&&u.signed<0||a.signed<0&&l.signed>=0&&u.signed>=0;break}}if(c.ZF=u.isZero(),c.SF=u.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,u,c),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}o0=new WeakSet,h5=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var a0,f5;class Ete extends Jo{constructor(){super(...arguments);De(this,a0)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:xt(this,a0,f5).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=j.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=j.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===j.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",j.fromSigned(1,16));const o=i.unsigned+1;o>j.maxValue(this.operation.size)?(s.CF=!0,r=j.fromUnsigned(o-j.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=j.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",j.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=j.fromUnsigned(o+j.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=j.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}a0=new WeakSet,f5=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class Ate extends Jo{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var l0,p5;class Pte extends Jo{constructor(){super(...arguments);De(this,l0)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:xt(this,l0,p5).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new Ut("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Ut("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Ut("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}l0=new WeakSet,p5=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class Tte extends Jo{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:this.name==="CALL",ri:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(yield*e.cpu.copyByteRegister("IP.l","id.l"),yield*e.cpu.copyByteRegister("ri.l","IP.l"),!(yield*e.cpu.pushToStack("id.l")))return!1}else yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class Rte extends Jo{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function eu(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function Mte(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var u0,m5;class Nte extends Jo{constructor(){super(...arguments);De(this,u0)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:xt(this,u0,m5).call(this),willUse:{id:!1,ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):(this.operation.mode==="mem<-reg"||this.operation.mode==="reg<-mem")&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"ri.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":return r===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=Mte(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"||(yield*n.cpu.copyByteRegister("BL","ri.l")),yield*n.cpu.setMAR("ri"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}u0=new WeakSet,m5=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class Ote extends Jo{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class Ite extends Jo{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(i)}else{const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(i))}}}function Dte(t){switch(t.instruction){case"MOV":return new Nte(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new Cte(t);case"NOT":case"NEG":case"INC":case"DEC":return new Ete(t);case"IN":case"OUT":return new Pte(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new Ite(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new Tte(t);case"RET":case"IRET":return new Ote(t);case"INT":return new Ate(t);case"CLI":case"STI":case"NOP":case"HLT":return new Rte(t)}}function Lte(t){for(const[e,n]of kE)if(n.unsigned===t.unsigned)return e;return null}function*jte(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 3:{yield{type:"cpu:int.3"};break}case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new Ut("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",r=>r.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new Ut("device-not-connected","keyboard")},!1;const i=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",i),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new Ut("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",j.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(i);else return yield{type:"cpu:error",error:new Ut("device-not-connected","screen")},!1;n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",j.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",j.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===j.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var ad,We,wr,Ei,rn,cc,vr,iO;let Fte=(iO=class extends xs{constructor(n){super(n);De(this,rn);De(this,ad);De(this,We);De(this,wr);De(this,Ei);n.data==="unchanged"?(Q(this,We,A(n.previous.cpu,We)),Q(this,wr,A(n.previous.cpu,wr)),Q(this,Ei,A(n.previous.cpu,Ei))):(Q(this,We,{AX:j.zero(16),BX:j.zero(16),CX:j.zero(16),DX:j.zero(16),SP:j.zero(16),IP:j.zero(16),IR:j.zero(8),ri:j.zero(16),id:j.zero(16),left:j.zero(16),right:j.zero(16),result:j.zero(16),FLAGS:j.zero(16)}),Q(this,wr,j.zero(16)),Q(this,Ei,j.zero(8))),A(this,We).SP=j.fromUnsigned(Ee.MAX_ADDRESS,16);const i=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),r=n.hasORG??!1,s=i||r?32:0;A(this,We).IP=j.fromUnsigned(s,16),A(this,We).ri=j.fromUnsigned(0,16),A(this,We).id=j.fromUnsigned(0,16),xt(this,rn,vr).call(this,"IF",!0),Q(this,ad,new Map);for(const o of n.program.instructions){const a=Dte(o);A(this,ad).set(a.start.value,a)}}*run(){var n;for(;;){const i=A(this,We).IP,r=Lte(i);if(r!==null){if(!(yield*jte(this.computer,r)))return}else{const s=A(this,ad).get(i.unsigned);if(!s){yield{type:"cpu:error",error:new Ut("no-instruction",A(this,We).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",j.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){return!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l")))||(yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("IP.l"),!0)}toJSON(){return{...Object.entries(A(this,We)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:A(this,wr).toJSON(),MBR:A(this,Ei).toJSON()}}getRegister(n){const[i,r]=eu(n);return r==="low"?A(this,We)[i].low:r==="high"?A(this,We)[i].high:A(this,We)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);xt(this,rn,cc).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);xt(this,rn,cc).call(this,i,r.withHigh(j.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,xt(this,rn,cc).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,xt(this,rn,cc).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return A(this,We).FLAGS.bit(1);case"ZF":return A(this,We).FLAGS.bit(0);case"SF":return A(this,We).FLAGS.bit(3);case"IF":return A(this,We).FLAGS.bit(4);case"OF":return A(this,We).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&xt(this,rn,vr).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&xt(this,rn,vr).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&xt(this,rn,vr).call(this,"SF",n.SF),typeof n.IF=="boolean"&&xt(this,rn,vr).call(this,"IF",n.IF),typeof n.OF=="boolean"&&xt(this,rn,vr).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,We).FLAGS}}*aluExecute(n,i,r){A(this,We).result=i.is8bits()?A(this,We).result.withLow(i):i,typeof r.CF=="boolean"&&xt(this,rn,vr).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&xt(this,rn,vr).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&xt(this,rn,vr).call(this,"SF",r.SF),typeof r.IF=="boolean"&&xt(this,rn,vr).call(this,"IF",r.IF),typeof r.OF=="boolean"&&xt(this,rn,vr).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:A(this,We).result,flags:A(this,We).FLAGS}}*setMAR(n){const i=this.getRegister(n);Q(this,wr,i.withHigh(j.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){xt(this,rn,cc).call(this,n,A(this,Ei)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);Q(this,Ei,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(A(this,wr));return i?(Q(this,Ei,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,wr),A(this,Ei)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,wr).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(Q(this,Ei,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,wr).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,A(this,Ei))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const i=yield*this.computer.io.pic.handleINTR();return Q(this,Ei,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return Ee.inRange(i.unsigned-1)?Ee.inRange(i.unsigned-1)?(yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?(i=i.add(-1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new Ut("stack-overflow")},!1):(yield{type:"cpu:error",error:new Ut("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return Ee.inRange(i)?(i=i.add(1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),!0):!1):(yield{type:"cpu:error",error:new Ut("stack-underflow")},!1)}},ad=new WeakMap,We=new WeakMap,wr=new WeakMap,Ei=new WeakMap,rn=new WeakSet,cc=function(n,i){const[r,s]=eu(n);if(s===null){if(A(this,We)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);A(this,We)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?A(this,We)[r]=A(this,We)[r].withLow(i):A(this,We)[r]=A(this,We)[r].withHigh(i)}},vr=function(n,i){switch(n){case"CF":A(this,We).FLAGS=A(this,We).FLAGS.withBit(1,i);return;case"ZF":A(this,We).FLAGS=A(this,We).FLAGS.withBit(0,i);return;case"SF":A(this,We).FLAGS=A(this,We).FLAGS.withBit(3,i);return;case"IF":A(this,We).FLAGS=A(this,We).FLAGS.withBit(4,i);return;case"OF":A(this,We).FLAGS=A(this,We).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},iO);var Ba,br,Co,Ea;let g5=(Ba=class extends xs{constructor(n){super(n);De(this,br);De(this,Co);De(this,Ea,!1);n.data==="unchanged"&&n.previous.io.printer?(Q(this,br,A(n.previous.io.printer,br)),Q(this,Co,A(n.previous.io.printer,Co)),Q(this,Ea,A(n.previous.io.printer,Ea))):(Q(this,br,[]),Q(this,Co,""),Q(this,Ea,!1))}get busy(){return A(this,br).length>=Ba.BUFFER_SIZE}*setStrobe(n){const i=A(this,Ea);if(i===n)return;if(Q(this,Ea,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();A(this,br).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){Q(this,Co,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,br).length===0)return;const[n,...i]=A(this,br);if(Q(this,br,i),yield{type:"printer:buffer.pop",char:n},i.length===Ba.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=hE(n.unsigned);Q(this,Co,A(this,Co)+r),yield{type:"printer:paper.print",char:r}}}toJSON(){return{paper:A(this,Co),buffer:[...A(this,br).map(n=>n.unsigned)]}}},br=new WeakMap,Co=new WeakMap,Ea=new WeakMap,fe(Ba,"BUFFER_SIZE",5),Ba);class sw extends xs{}let v5=class extends sw{constructor(n){super(n);fe(this,"PA");fe(this,"PB");fe(this,"CA");fe(this,"CB");fe(this,"leds",null);fe(this,"printer",null);fe(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=j.random(8),this.PB=j.random(8),this.CA=j.random(8),this.CB=j.random(8)):(this.PA=j.zero(8),this.PB=j.zero(8),this.CA=j.zero(8),this.CB=j.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class pM extends v5{constructor(n){super(n);fe(this,"printer");this.PA=this.PA.withBit(1,!1);const i=this;this.printer=new class extends g5{*readData(){const r=i.readData();return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updatePort("A")}}(n)}readData(){const n=this.PB.unsigned&~this.CB.unsigned;return j.fromUnsigned(n,8)}*updatePort(n){if(n==="B")return;let i=this.PA.unsigned;const r=this.CA.unsigned,s=this.printer.busy;i=i&~r,this.line("A",0)==="input"&&s&&(i|=1),i!==this.PA.unsigned&&(this.PA=j.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var Eo,rO;let $te=(rO=class extends xs{constructor(n){super(n);De(this,Eo);n.data==="unchanged"&&n.previous.io.leds?Q(this,Eo,A(n.previous.io.leds,Eo)):n.data==="randomize"?Q(this,Eo,j.random(8)):Q(this,Eo,j.zero(8))}get state(){return A(this,Eo)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,Eo).toJSON()}},Eo=new WeakMap,rO);var xr,sO;let Bte=(sO=class extends xs{constructor(n){super(n);De(this,xr);n.data==="unchanged"&&n.previous.io.switches?Q(this,xr,A(n.previous.io.switches,xr)):n.data==="randomize"?Q(this,xr,j.random(8)):Q(this,xr,j.zero(8))}get state(){return A(this,xr)}*toggle(n){Q(this,xr,A(this,xr).withBit(n,!A(this,xr).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,xr).toJSON()}},xr=new WeakMap,sO);class zte extends v5{constructor(n){super(n);fe(this,"leds");fe(this,"switches");const i=this;this.leds=new class extends $te{}(n),this.switches=new class extends Bte{*toggle(r){yield*super.toggle(r),yield*i.updatePort("A")}}(n)}*updatePort(n){if(n==="A"){const i=this.switches.state.unsigned;let r=this.PA.unsigned;const s=this.CA.unsigned;r=i&s|r&~s,r!==this.PA.unsigned&&(this.PA=j.fromUnsigned(r,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let i=this.PB.unsigned;const r=this.CB.unsigned;i=i&~r,yield*this.leds.update(j.fromUnsigned(i,8))}}}let Ute=class extends xs{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},Hte=class extends xs{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var ld,oO;let Vte=(oO=class extends xs{constructor(){super(...arguments);De(this,ld,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,ld);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},Q(this,ld,null),n}setLastCharRead(n){Q(this,ld,n)}toJSON(){return null}},ld=new WeakMap,oO);var Xi,aO;let Wte=(aO=class extends xs{constructor(n){super(n);De(this,Xi);n.data==="unchanged"&&n.previous.io.screen?Q(this,Xi,A(n.previous.io.screen,Xi)):Q(this,Xi,"")}clear(){return this.sendChar(j.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:Q(this,Xi,A(this,Xi).slice(0,-1));break;case 10:Q(this,Xi,A(this,Xi)+`
`);break;case 12:Q(this,Xi,"");break;default:Q(this,Xi,A(this,Xi)+hE(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,Xi)}}toJSON(){return A(this,Xi)}},Xi=new WeakMap,aO);var Ao,ui,lO;let Gte=(lO=class extends sw{constructor(n){super(n);De(this,Ao);De(this,ui);fe(this,"printer");n.data==="randomize"?Q(this,Ao,j.random(8)):Q(this,Ao,j.zero(8)),Q(this,ui,j.zero(8));const i=this;this.printer=new class extends g5{*readData(){const r=A(i,Ao);return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updateBusy(r)}}(n)}get interrupts(){return A(this,ui).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=A(this,Ao);else if(n==="STATE")i=A(this,ui);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")Q(this,Ao,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.printer.busy),Q(this,ui,i),yield{type:"handshake:register.update",register:n,value:i},A(this,ui).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),Q(this,ui,A(this,ui).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,ui)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){Q(this,ui,A(this,ui).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,ui)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,Ao).toJSON(),STATE:A(this,ui).toJSON()}}},Ao=new WeakMap,ui=new WeakMap,lO);var os,Po,Ai,ci,es,eo,yv,wv;let Kte=(os=class extends sw{constructor(n){super(n);De(this,eo);De(this,Po);De(this,Ai);De(this,ci);De(this,es);Q(this,Po,j.fromUnsigned(255,8)),Q(this,Ai,j.fromUnsigned(0,8)),Q(this,ci,j.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?Q(this,es,A(n.previous.io.pic,es)):n.data==="randomize"?Q(this,es,new Array(os.LINES).fill(j.zero(8)).map(()=>j.random(8))):Q(this,es,new Array(os.LINES).fill(j.zero(8)))}chipSelect(n){const r=4+os.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=j.zero(8);else if(n==="IMR")i=A(this,Po);else if(n==="IRR")i=A(this,Ai);else if(n==="ISR")i=A(this,ci);else{const r=Number(n.slice(3));i=A(this,es)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")A(this,ci).isZero()||(yield{type:"pic:intr.off"},Q(this,ci,j.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,ci)},yield*xt(this,eo,wv).call(this));else if(n==="IMR")Q(this,Po,i),yield{type:"pic:register.update",register:"IMR",value:A(this,Po)},yield*xt(this,eo,wv).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));A(this,es)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=os.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,Ai).bit(n)||(Q(this,Ai,A(this,Ai).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ai)},yield*xt(this,eo,wv).call(this))}isINTRActive(){return A(this,ci).isZero()&&xt(this,eo,yv).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,ci).isZero())throw new Error("INTR line is active but ISR is not zero");const n=xt(this,eo,yv).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");Q(this,ci,A(this,ci).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,ci)},Q(this,Ai,A(this,Ai).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ai)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=A(this,es)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:A(this,Po).toJSON(),IRR:A(this,Ai).toJSON(),ISR:A(this,ci).toJSON(),lines:A(this,es).map(n=>n.toJSON())}}},Po=new WeakMap,Ai=new WeakMap,ci=new WeakMap,es=new WeakMap,eo=new WeakSet,yv=function(){for(let n=0;n<os.LINES;n++)if(A(this,Ai).bit(n)&&!A(this,Po).bit(n))return n;return null},wv=function*(){A(this,ci).isZero()&&xt(this,eo,yv).call(this)!==null&&(yield{type:"pic:intr.on"})},fe(os,"LINES",8),os);var Ls,Aa,uO;let Xte=(uO=class extends sw{constructor(n){super(n);De(this,Ls);De(this,Aa);Q(this,Ls,j.zero(8)),Q(this,Aa,j.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=A(this,Ls);else if(n==="COMP")i=A(this,Aa);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")Q(this,Ls,i);else if(n==="COMP")Q(this,Aa,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=A(this,Ls).unsigned===j.maxValue(8)?j.zero(8):A(this,Ls).add(1);Q(this,Ls,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,Aa).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,Ls).toJSON(),COMP:A(this,Aa).toJSON()}}},Ls=new WeakMap,Aa=new WeakMap,uO);class qte extends xs{constructor(n){super(n);fe(this,"clock",null);fe(this,"f10",null);fe(this,"keyboard",null);fe(this,"screen",null);fe(this,"handshake",null);fe(this,"pic",null);fe(this,"pio",null);fe(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new Vte(n),this.screen=new Wte(n)),n.devices.pic&&(this.clock=new Ute(n),this.f10=new Hte(n),this.timer=new Xte(n),this.pic=new Kte(n)),this.pio=n.devices.pio==="switches-and-leds"?new zte(n):n.devices.pio==="printer"?new pM(n):null,n.devices.handshake){if(this.pio instanceof pM)throw new Ut("io-printer-conflict");this.handshake=new Gte(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,i;return((n=this.pio)==null?void 0:n.printer)??((i=this.handshake)==null?void 0:i.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,u,c;const i=(a=this.handshake)==null?void 0:a.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=(l=this.pic)==null?void 0:l.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=(u=this.pio)==null?void 0:u.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(c=this.timer)==null?void 0:c.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new Ut("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return this[i]?yield*this[i].read(r):(yield{type:"bus:io.error",error:new Ut("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return this[r]?(yield*this[r].write(s,i),!0):(yield{type:"bus:io.error",error:new Ut("device-not-connected",r)},!1)}toJSON(){var n,i,r,s,o,a,l,u,c,d,h;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((i=this.f10)==null?void 0:i.toJSON())??null,keyboard:((r=this.keyboard)==null?void 0:r.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((u=this.handshake)==null?void 0:u.toJSON())??null,pic:((c=this.pic)==null?void 0:c.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((h=this.timer)==null?void 0:h.toJSON())??null}}}var za,Pi,ud,fu;let Yte=(za=class extends xs{constructor(n){super(n);De(this,Pi);De(this,ud);De(this,fu);n.data==="unchanged"?Q(this,Pi,A(n.previous.memory,Pi)):n.data==="randomize"?Q(this,Pi,new Uint8Array(za.SIZE).map(()=>j.random(8).unsigned)):Q(this,Pi,new Uint8Array(za.SIZE).fill(0));const i=n.program.instructions.some(r=>r.instruction==="INT");if(Q(this,fu,new Set),i)for(const[r,s]of kE){const o=r;if(A(this,Pi)[o]=s.unsigned,A(this,fu).add(o),r===6){const a=[208,216,100,18,1,193,193,216,96,212,65,225],l=s.unsigned;for(let u=0;u<a.length;u++)A(this,Pi)[l+u]=a[u],A(this,fu).add(l+u)}}for(const r of n.program.data){let s=r.start.value;for(const o of r.getValues())o!==Wh&&A(this,Pi).set(o.toUint8Array(),s),s+=r.size/8}Q(this,ud,new Set);for(const r of n.program.instructions){A(this,Pi).set(r.toBytes(),r.start.value);for(let s=0;s<r.length;s++)A(this,ud).add(r.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!Ee.inRange(n))return yield{type:"memory:read.error",error:new Ut("address-out-of-range",n)},null;const i=j.fromUnsigned(A(this,Pi).at(n),8);return yield{type:"memory:read.ok",address:Ee.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},Ee.inRange(n)?(A(this,ud).has(n)&&(yield{type:"memory:write.warning",warning:`Sobrescribiendo instruccin en la direccin ${Ee.format(n)}`},console.warn(`Advertencia: Sobrescribiendo instruccin en la direccin ${Ee.format(n)}`)),A(this,fu).has(n)?(yield{type:"memory:write.error",error:new Ut("address-is-reserved",n)},!1):(A(this,Pi).set([i.unsigned],n),yield{type:"memory:write.ok",address:Ee.from(n),value:i},!0)):(yield{type:"memory:write.error",error:new Ut("address-out-of-range",n)},!1)}toJSON(){return[...A(this,Pi)]}},Pi=new WeakMap,ud=new WeakMap,fu=new WeakMap,fe(za,"SIZE",Ee.MAX_ADDRESS+1),za);class mM{constructor(e){fe(this,"cpu");fe(this,"memory");fe(this,"io");const n={computer:this,...e};this.cpu=new Fte(n),this.memory=new Yte(n),this.io=new qte(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var mt;class Zte{constructor(){De(this,mt,new mM({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){Q(this,mt,new mM({...e,previous:A(this,mt)}))}getComputerState(){var e;return((e=A(this,mt))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,mt))throw new Ut("no-program");return A(this,mt).cpu.run()}get devices(){if(!A(this,mt))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,mt).io.clock!==null,tick:()=>{if(A(this,mt).io.clock)return A(this,mt).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,mt).io,press:()=>{if(A(this,mt).io.f10)return A(this,mt).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,mt).io,readChar:e=>{if(A(this,mt).io.keyboard)return A(this,mt).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,mt).io},printer:{connected:()=>A(this,mt).io.printer!==null,clear:()=>{if(A(this,mt).io.printer)return A(this,mt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,mt).io.printer)return A(this,mt).io.printer.print();console.warn("No printer connected to the computer!")}},screen:{connected:()=>"screen"in A(this,mt).io,clear:()=>{if(A(this,mt).io.screen)return A(this,mt).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,mt).io,toggle:e=>{if(A(this,mt).io.switches)return A(this,mt).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}mt=new WeakMap;const y5=me([]),w5=me([]),Fy=me(new Array(Ee.MAX_ADDRESS+1).fill(j.zero(8))),_p=me(Ee.from(32)),Jte=me(null),fg=256,Qte=me(t=>{const e=t(Jte)??t(_p);let n=e.value-e.value%fg,i=n+fg-1;i>Ee.MAX_ADDRESS&&(i=Ee.MAX_ADDRESS,n=i-fg+1);const r=t(Fy),s=[];for(let o=0;o<fg;o++)s.push({address:Ee.from(n+o),value:r[n+o]});return s});function ene(t,e=!1){e?U.set(Fy,new Array(Ee.MAX_ADDRESS+1).fill(j.zero(8))):U.set(Fy,t.memory.map(n=>j.fromUnsigned(n,8))),U.set(_p,Ee.from(32))}const b5=new Gp;function tne(t){window.codemirror&&window.codemirror.dispatch({effects:b5.reconfigure(it.readOnly.of(t))})}const A_=Ze.define(),nne=xi.define({create(){return Je.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(A_)&&(n=Je.none,i.value!==null&&(n=n.update({add:[ine.range(i.value)]})));return n},provide:t=>Me.decorations.from(t)}),ine=Je.line({class:"!bg-mantis-400/10"});function x5(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:A_.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:A_.of(e)})}}const S5=Bc.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||Bc,Jb=me(j.zero(16)),Qb=me(j.zero(16)),e1=me(j.zero(16)),t1=me(j.zero(16)),n1=me(j.zero(16)),i1=me(j.zero(16)),rne=me(j.zero(8)),r1=me(j.zero(16)),s1=me(j.zero(16)),o1=me(j.zero(16)),a1=me(j.zero(16)),l1=me(j.zero(16)),u1=me(j.zero(16)),_5=me(j.zero(16)),$y=me(j.zero(8)),ft=me(null),Fu=me(0),k5=me(!1),sne=me(!1),ow=me(0),By=me([]),C5=me(!1);me(!0);me(!0);const pr=t=>me(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),mr=t=>me(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),qe={AX:Jb,AL:pr(Jb),AH:mr(Jb),BX:Qb,BL:pr(Qb),BH:mr(Qb),CX:e1,CL:pr(e1),CH:mr(e1),DX:t1,DL:pr(t1),DH:mr(t1),SP:n1,"SP.l":pr(n1),"SP.h":mr(n1),IP:i1,"IP.l":pr(i1),"IP.h":mr(i1),IR:rne,ri:r1,"ri.l":pr(r1),"ri.h":mr(r1),id:s1,"id.l":pr(s1),"id.h":mr(s1),left:o1,"left.l":pr(o1),"left.h":mr(o1),right:a1,"right.l":pr(a1),"right.h":mr(a1),result:l1,"result.l":pr(l1),"result.h":mr(l1),FLAGS:u1,"FLAGS.l":pr(u1),"FLAGS.h":mr(u1),MAR:_5,MBR:$y},Rs=me({phase:"stopped"}),E5=me("ADD");function one(t,e=!1){e?(U.set(qe.AX,j.zero(16)),U.set(qe.BX,j.zero(16)),U.set(qe.CX,j.zero(16)),U.set(qe.DX,j.zero(16)),U.set(qe.SP,j.zero(16)),U.set(qe.IP,j.zero(16)),U.set(qe.IR,j.zero(8)),U.set(qe.ri,j.zero(16)),U.set(qe.id,j.zero(16)),U.set(qe.left,j.zero(16)),U.set(qe.right,j.zero(16)),U.set(qe.result,j.zero(16)),U.set(qe.FLAGS,j.zero(16)),U.set(qe.MAR,j.zero(16)),U.set(qe.MBR,j.zero(8))):(U.set(qe.AX,j.fromUnsigned(t.cpu.AX,16)),U.set(qe.BX,j.fromUnsigned(t.cpu.BX,16)),U.set(qe.CX,j.fromUnsigned(t.cpu.CX,16)),U.set(qe.DX,j.fromUnsigned(t.cpu.DX,16)),U.set(qe.SP,j.fromUnsigned(t.cpu.SP,16)),U.set(qe.IP,j.fromUnsigned(t.cpu.IP,16)),U.set(qe.IR,j.fromUnsigned(t.cpu.IR,8)),U.set(qe.ri,j.fromUnsigned(t.cpu.ri,16)),U.set(qe.id,j.fromUnsigned(t.cpu.id,16)),U.set(qe.left,j.fromUnsigned(t.cpu.left,16)),U.set(qe.right,j.fromUnsigned(t.cpu.right,16)),U.set(qe.result,j.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,U.set(qe.FLAGS,j.fromUnsigned(t.cpu.FLAGS,16)),U.set(qe.MAR,j.fromUnsigned(t.cpu.MAR,16)),U.set(qe.MBR,j.fromUnsigned(t.cpu.MBR,8))),U.set(Rs,{phase:"stopped"})}var PE=am(),Ye=t=>om(t,PE),TE=am();Ye.write=t=>om(t,TE);var aw=am();Ye.onStart=t=>om(t,aw);var RE=am();Ye.onFrame=t=>om(t,RE);var ME=am();Ye.onFinish=t=>om(t,ME);var td=[];Ye.setTimeout=(t,e)=>{const n=Ye.now()+e,i=()=>{const s=td.findIndex(o=>o.cancel==i);~s&&td.splice(s,1),ja-=~s?1:0},r={time:n,handler:t,cancel:i};return td.splice(A5(n),0,r),ja+=1,P5(),r};var A5=t=>~(~td.findIndex(e=>e.time>t)||~td.length);Ye.cancel=t=>{aw.delete(t),RE.delete(t),ME.delete(t),PE.delete(t),TE.delete(t)};Ye.sync=t=>{P_=!0,Ye.batchedUpdates(t),P_=!1};Ye.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Ye.onStart(n)}return i.handler=t,i.cancel=()=>{aw.delete(n),e=null},i};var NE=typeof window<"u"?window.requestAnimationFrame:()=>{};Ye.use=t=>NE=t;Ye.now=typeof performance<"u"?()=>performance.now():Date.now;Ye.batchedUpdates=t=>t();Ye.catch=console.error;Ye.frameLoop="always";Ye.advance=()=>{Ye.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):R5()};var La=-1,ja=0,P_=!1;function om(t,e){P_?(e.delete(t),t(0)):(e.add(t),P5())}function P5(){La<0&&(La=0,Ye.frameLoop!=="demand"&&NE(T5))}function ane(){La=-1}function T5(){~La&&(NE(T5),Ye.batchedUpdates(R5))}function R5(){const t=La;La=Ye.now();const e=A5(La);if(e&&(M5(td.splice(0,e),n=>n.handler()),ja-=e),!ja){ane();return}aw.flush(),PE.flush(t?Math.min(64,La-t):16.667),RE.flush(),TE.flush(),ME.flush()}function am(){let t=new Set,e=t;return{add(n){ja+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return ja-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,ja-=e.size,M5(e,i=>i(n)&&t.add(i)),ja+=t.size,e=t)}}}function M5(t,e){t.forEach(n=>{try{e(n)}catch(i){Ye.catch(i)}})}var lne=Object.defineProperty,une=(t,e)=>{for(var n in e)lne(t,n,{get:e[n],enumerable:!0})},bs={};une(bs,{assign:()=>hne,colors:()=>Ja,createStringInterpolator:()=>IE,skipAnimation:()=>I5,to:()=>O5,willAdvance:()=>DE});function cne(){}var dne=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Se={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function go(t,e){if(Se.arr(t)){if(!Se.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Bn=(t,e)=>t.forEach(e);function yl(t,e,n){if(Se.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var Fa=t=>Se.und(t)?[]:Se.arr(t)?t:[t];function N5(t,e){if(t.size){const n=Array.from(t);t.clear(),Bn(n,e)}}var pg=(t,...e)=>N5(t,n=>n(...e)),OE=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),IE,O5,Ja=null,I5=!1,DE=cne,hne=t=>{t.to&&(O5=t.to),t.now&&(Ye.now=t.now),t.colors!==void 0&&(Ja=t.colors),t.skipAnimation!=null&&(I5=t.skipAnimation),t.createStringInterpolator&&(IE=t.createStringInterpolator),t.requestAnimationFrame&&Ye.use(t.requestAnimationFrame),t.batchedUpdates&&(Ye.batchedUpdates=t.batchedUpdates),t.willAdvance&&(DE=t.willAdvance),t.frameLoop&&(Ye.frameLoop=t.frameLoop)},mf=new Set,Pr=[],c1=[],zy=0,lw={get idle(){return!mf.size&&!Pr.length},start(t){zy>t.priority?(mf.add(t),Ye.onStart(fne)):(D5(t),Ye(T_))},advance:T_,sort(t){if(zy)Ye.onFrame(()=>lw.sort(t));else{const e=Pr.indexOf(t);~e&&(Pr.splice(e,1),L5(t))}},clear(){Pr=[],mf.clear()}};function fne(){mf.forEach(D5),mf.clear(),Ye(T_)}function D5(t){Pr.includes(t)||L5(t)}function L5(t){Pr.splice(pne(Pr,e=>e.priority>t.priority),0,t)}function T_(t){const e=c1;for(let n=0;n<Pr.length;n++){const i=Pr[n];zy=i.priority,i.idle||(DE(i),i.advance(t),i.idle||e.push(i))}return zy=0,c1=Pr,c1.length=0,Pr=e,Pr.length>0}function pne(t,e){const n=t.findIndex(e);return n<0?t.length:n}var mne=(t,e,n)=>Math.min(Math.max(n,t),e),gne={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ls="[-+]?\\d*\\.?\\d+",Uy=ls+"%";function uw(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var vne=new RegExp("rgb"+uw(ls,ls,ls)),yne=new RegExp("rgba"+uw(ls,ls,ls,ls)),wne=new RegExp("hsl"+uw(ls,Uy,Uy)),bne=new RegExp("hsla"+uw(ls,Uy,Uy,ls)),xne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Sne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,_ne=/^#([0-9a-fA-F]{6})$/,kne=/^#([0-9a-fA-F]{8})$/;function Cne(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=_ne.exec(t))?parseInt(e[1]+"ff",16)>>>0:Ja&&Ja[t]!==void 0?Ja[t]:(e=vne.exec(t))?(ic(e[1])<<24|ic(e[2])<<16|ic(e[3])<<8|255)>>>0:(e=yne.exec(t))?(ic(e[1])<<24|ic(e[2])<<16|ic(e[3])<<8|yM(e[4]))>>>0:(e=xne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=kne.exec(t))?parseInt(e[1],16)>>>0:(e=Sne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=wne.exec(t))?(gM(vM(e[1]),mg(e[2]),mg(e[3]))|255)>>>0:(e=bne.exec(t))?(gM(vM(e[1]),mg(e[2]),mg(e[3]))|yM(e[4]))>>>0:null}function d1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function gM(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=d1(r,i,t+1/3),o=d1(r,i,t),a=d1(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function ic(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function vM(t){return(parseFloat(t)%360+360)%360/360}function yM(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function mg(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function wM(t){let e=Cne(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var kp=(t,e,n)=>{if(Se.fun(t))return t;if(Se.arr(t))return kp({range:t,output:e,extrapolate:n});if(Se.str(t.output[0]))return IE(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const c=Ane(u,s);return Ene(u,s[c],s[c+1],r[c],r[c+1],l,o,a,i.map)}};function Ene(t,e,n,i,r,s,o,a,l){let u=l?l(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>n){if(a==="identity")return u;a==="clamp"&&(u=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function Ane(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Pne=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return mne(0,1,r/t)},Hy=1.70158,gg=Hy*1.525,bM=Hy+1,xM=2*Math.PI/3,SM=2*Math.PI/4.5,vg=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,j5={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>bM*t*t*t-Hy*t*t,easeOutBack:t=>1+bM*Math.pow(t-1,3)+Hy*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((gg+1)*2*t-gg)/2:(Math.pow(2*t-2,2)*((gg+1)*(t*2-2)+gg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*xM),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*xM)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*SM))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*SM)/2+1,easeInBounce:t=>1-vg(1-t),easeOutBounce:vg,easeInOutBounce:t=>t<.5?(1-vg(1-2*t))/2:(1+vg(2*t-1))/2,steps:Pne},Cp=Symbol.for("FluidValue.get"),Nd=Symbol.for("FluidValue.observers"),Ar=t=>!!(t&&t[Cp]),Mi=t=>t&&t[Cp]?t[Cp]():t,_M=t=>t[Nd]||null;function Tne(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Ep(t,e){const n=t[Nd];n&&n.forEach(i=>{Tne(i,e)})}var F5=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Rne(this,t)}},Rne=(t,e)=>$5(t,Cp,e);function cw(t,e){if(t[Cp]){let n=t[Nd];n||$5(t,Nd,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Ap(t,e){const n=t[Nd];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Nd]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var $5=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),bv=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Mne=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,kM=new RegExp(`(${bv.source})(%|[a-z]+)`,"i"),Nne=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,dw=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,B5=t=>{const[e,n]=One(t);if(!e||OE())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&dw.test(n))return B5(n);if(n)return n}return t},One=t=>{const e=dw.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},h1,Ine=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,z5=t=>{h1||(h1=Ja?new RegExp(`(${Object.keys(Ja).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Mi(s).replace(dw,B5).replace(Mne,wM).replace(h1,wM)),n=e.map(s=>s.match(bv).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>kp({...t,output:s}));return s=>{var l;const o=!kM.test(e[0])&&((l=e.find(u=>kM.test(u)))==null?void 0:l.replace(bv,""));let a=0;return e[0].replace(bv,()=>`${r[a++](s)}${o||""}`).replace(Nne,Ine)}},U5="react-spring: ",H5=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${U5}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},Dne=H5(console.warn);function Lne(){Dne(`${U5}The "interpolate" function is deprecated in v9 (use "to" instead)`)}H5(console.warn);function hw(t){return Se.str(t)&&(t[0]=="#"||/\d/.test(t)||!OE()&&dw.test(t)||t in(Ja||{}))}var V5=OE()?x.useEffect:x.useLayoutEffect,jne=()=>{const t=x.useRef(!1);return V5(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function Fne(){const t=x.useState()[1],e=jne();return()=>{e.current&&t(Math.random())}}function $ne(t,e){const[n]=x.useState(()=>({inputs:e,result:t()})),i=x.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&Bne(e,s.inputs)||(s={inputs:e,result:t()}):s=n,x.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Bne(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var zne=t=>x.useEffect(t,Une),Une=[],Pp=Symbol.for("Animated:node"),Hne=t=>!!t&&t[Pp]===t,Ms=t=>t&&t[Pp],LE=(t,e)=>dne(t,Pp,e),fw=t=>t&&t[Pp]&&t[Pp].getPayload(),W5=class{constructor(){LE(this,this)}getPayload(){return this.payload||[]}},lm=class extends W5{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,Se.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new lm(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return Se.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,Se.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Tp=class extends lm{constructor(t){super(0),this._string=null,this._toString=kp({output:[t,t]})}static create(t){return new Tp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(Se.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=kp({output:[this.getValue(),t]})),this._value=0,super.reset()}},Vy={dependencies:null},pw=class extends W5{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return yl(this.source,(n,i)=>{Hne(n)?e[i]=n.getValue(t):Ar(n)?e[i]=Mi(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Bn(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return yl(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Vy.dependencies&&Ar(t)&&Vy.dependencies.add(t);const e=fw(t);e&&Bn(e,n=>this.add(n))}},G5=class extends pw{constructor(t){super(t)}static create(t){return new G5(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(Vne)),!0)}};function Vne(t){return(hw(t)?Tp:lm).create(t)}function R_(t){const e=Ms(t);return e?e.constructor:Se.arr(t)?G5:hw(t)?Tp:lm}var CM=(t,e)=>{const n=!Se.fun(t)||t.prototype&&t.prototype.isReactComponent;return x.forwardRef((i,r)=>{const s=x.useRef(null),o=n&&x.useCallback(p=>{s.current=Kne(r,p)},[r]),[a,l]=Gne(i,e),u=Fne(),c=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&u()},d=new Wne(c,l),h=x.useRef();V5(()=>(h.current=d,Bn(l,p=>cw(p,d)),()=>{h.current&&(Bn(h.current.deps,p=>Ap(p,h.current)),Ye.cancel(h.current.update))})),x.useEffect(c,[]),zne(()=>()=>{const p=h.current;Bn(p.deps,m=>Ap(m,p))});const f=e.getComponentProps(a.getValue());return x.createElement(t,{...f,ref:o})})},Wne=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Ye.write(this.update)}};function Gne(t,e){const n=new Set;return Vy.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new pw(t),Vy.dependencies=null,[t,n]}function Kne(t,e){return t&&(Se.fun(t)?t(e):t.current=e),e}var EM=Symbol.for("AnimatedComponent"),Xne=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new pw(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=AM(o)||"Anonymous";return Se.str(o)?o=s[o]||(s[o]=CM(o,r)):o=o[EM]||(o[EM]=CM(o,r)),o.displayName=`Animated(${a})`,o};return yl(t,(o,a)=>{Se.arr(t)&&(a=AM(o)),s[a]=s(o)}),{animated:s}},AM=t=>Se.str(t)?t:t&&Se.str(t.displayName)?t.displayName:Se.fun(t)&&t.name||null;function tu(t,...e){return Se.fun(t)?t(...e):t}var gf=(t,e)=>t===!0||!!(e&&t&&(Se.fun(t)?t(e):Fa(t).includes(e))),K5=(t,e)=>Se.obj(t)?e&&t[e]:t,qne=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Yne=t=>t,X5=(t,e=Yne)=>{let n=Zne;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);Se.und(s)||(i[r]=s)}return i},Zne=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Jne={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Qne(t){const e={};let n=0;if(yl(t,(i,r)=>{Jne[r]||(e[r]=i,n++)}),n)return e}function q5(t){const e=Qne(t);if(e){const n={to:e};return yl(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Rp(t){return t=Mi(t),Se.arr(t)?t.map(Rp):hw(t)?bs.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function M_(t){return Se.fun(t)||Se.arr(t)&&Se.obj(t[0])}var eie={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},N_={...eie.default,mass:1,damping:1,easing:j5.linear,clamp:!1},tie=class{constructor(){this.velocity=0,Object.assign(this,N_)}};function nie(t,e,n){n&&(n={...n},PM(n,e),e={...n,...e}),PM(t,e),Object.assign(t,e);for(const o in N_)t[o]==null&&(t[o]=N_[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return Se.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function PM(t,e){if(!Se.und(e.decay))t.duration=void 0;else{const n=!Se.und(e.tension)||!Se.und(e.friction);(n||!Se.und(e.frequency)||!Se.und(e.damping)||!Se.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var TM=[],iie=class{constructor(){this.changed=!1,this.values=TM,this.toValues=null,this.fromValues=TM,this.config=new tie,this.immediate=!1}};function rie(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,u,c=gf(n.cancel??(i==null?void 0:i.cancel),e);if(c)f();else{Se.und(n.pause)||(r.paused=gf(n.pause,e));let p=i==null?void 0:i.pause;p!==!0&&(p=r.paused||gf(p,e)),l=tu(n.delay||0,e),p?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(u),u.cancel(),l=u.time-Ye.now()}function h(){l>0&&!bs.skipAnimation?(r.delayed=!0,u=Ye.setTimeout(f,l),r.pauseQueue.add(d),r.timeouts.add(u)):f()}function f(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),t<=(r.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},o)}catch(p){a(p)}}})}var sie=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?vf(t.get()):e.every(n=>n.noop)?Y5(t.get()):is(t.get(),e.every(n=>n.finished)),Y5=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),is=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),vf=t=>({value:t,cancelled:!0,finished:!1});function oie(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const u=X5(e,(w,v)=>v==="onRest"?void 0:w);let c,d;const h=new Promise((w,v)=>(c=w,d=v)),f=w=>{const v=r<=(n.cancelId||0)&&vf(i)||r!==n.asyncId&&is(i,!1);if(v)throw w.result=v,d(w),w},p=(w,v)=>{const y=new RM,b=new MM;return(async()=>{if(bs.skipAnimation)throw O_(n),b.result=is(i,!1),d(b),b;f(y);const _=Se.obj(w)?{...w}:{...v,to:w};_.parentId=r,yl(u,(C,E)=>{Se.und(_[E])&&(_[E]=C)});const k=await i.start(_);return f(y),n.paused&&await new Promise(C=>{n.resumeQueue.add(C)}),k})()};let m;if(bs.skipAnimation)return O_(n),is(i,!1);try{let w;Se.arr(t)?w=(async v=>{for(const y of v)await p(y)})(t):w=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([w.then(c),h]),m=is(i.get(),!0,!1)}catch(w){if(w instanceof RM)m=w.result;else if(w instanceof MM)m=w.result;else throw w}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return Se.fun(o)&&Ye.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function O_(t,e){N5(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var RM=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},MM=class extends Error{constructor(){super("SkipAnimationSignal")}},I_=t=>t instanceof jE,aie=1,jE=class extends F5{constructor(){super(...arguments),this.id=aie++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Ms(this);return t&&t.getValue()}to(...t){return bs.to(this,t)}interpolate(...t){return Lne(),bs.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Ep(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||lw.sort(this),Ep(this,{type:"priority",parent:this,priority:t})}},$u=Symbol.for("SpringPhase"),Z5=1,D_=2,L_=4,f1=t=>(t[$u]&Z5)>0,sa=t=>(t[$u]&D_)>0,gh=t=>(t[$u]&L_)>0,NM=(t,e)=>e?t[$u]|=D_|Z5:t[$u]&=~D_,OM=(t,e)=>e?t[$u]|=L_:t[$u]&=~L_,St=class extends jE{constructor(t,e){if(super(),this.animation=new iie,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Se.und(t)||!Se.und(e)){const n=Se.obj(t)?{...t}:{...e,from:t};Se.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(sa(this)||this._state.asyncTo)||gh(this)}get goal(){return Mi(this.animation.to)}get velocity(){const t=Ms(this);return t instanceof lm?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return f1(this)}get isAnimating(){return sa(this)}get isPaused(){return gh(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=fw(i.to);!o&&Ar(i.to)&&(r=Fa(Mi(i.to))),i.values.forEach((u,c)=>{if(u.done)return;const d=u.constructor==Tp?1:o?o[c].lastPosition:r[c];let h=i.immediate,f=d;if(!h){if(f=u.lastPosition,s.tension<=0){u.done=!0;return}let p=u.elapsedTime+=t;const m=i.fromValues[c],w=u.v0!=null?u.v0:u.v0=Se.arr(s.velocity)?s.velocity[c]:s.velocity;let v;const y=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(Se.und(s.duration))if(s.decay){const b=s.decay===!0?.998:s.decay,_=Math.exp(-(1-b)*p);f=m+w/(1-b)*(1-_),h=Math.abs(u.lastPosition-f)<=y,v=w*_}else{v=u.lastVelocity==null?w:u.lastVelocity;const b=s.restVelocity||y/10,_=s.clamp?0:s.bounce,k=!Se.und(_),C=m==d?u.v0>0:m<d;let E,P=!1;const M=1,D=Math.ceil(t/M);for(let L=0;L<D&&(E=Math.abs(v)>b,!(!E&&(h=Math.abs(d-f)<=y,h)));++L){k&&(P=f==d||f>d==C,P&&(v=-v*_,f=d));const $=-s.tension*1e-6*(f-d),G=-s.friction*.001*v,z=($+G)/s.mass;v=v+z*M,f=f+v*M}}else{let b=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,p=u.elapsedTime+=t)),b=(s.progress||0)+p/this._memoizedDuration,b=b>1?1:b<0?0:b,u.durationProgress=b),f=m+s.easing(b)*(d-m),v=(f-u.lastPosition)/t,h=b==1}u.lastVelocity=v,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[c].done&&(h=!1),h?u.done=!0:e=!1,u.setValue(f,s.round)&&(n=!0)});const a=Ms(this),l=a.getValue();if(e){const u=Mi(i.to);(l!==u||n)&&!s.decay?(a.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Ye.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(sa(this)){const{to:t,config:e}=this.animation;Ye.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return Se.und(t)?(n=this.queue||[],this.queue=[]):n=[Se.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>sie(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),O_(this._state,t&&this._lastCallId),Ye.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=Se.obj(n)?n[e]:n,(n==null||M_(n))&&(n=void 0),i=Se.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return f1(this)||(t.reverse&&([n,i]=[i,n]),i=Mi(i),Se.und(i)?Ms(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,X5(t,(o,a)=>/^on/.test(a)?K5(o,n):o)),DM(this,t,"onProps"),yh(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return rie(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{gh(this)||(OM(this,!0),pg(s.pauseQueue),yh(this,"onPause",is(this,vh(this,this.animation.to)),this))},resume:()=>{gh(this)&&(OM(this,!1),sa(this)&&this._resume(),pg(s.resumeQueue),yh(this,"onResume",is(this,vh(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=lie(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(vf(this));const i=!Se.und(t.to),r=!Se.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(vf(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:c=l,from:d=u}=t;r&&!i&&(!e.default||Se.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const h=!go(d,u);h&&(a.from=d),d=Mi(d);const f=!go(c,l);f&&this._focus(c);const p=M_(e.to),{config:m}=a,{decay:w,velocity:v}=m;(i||r)&&(m.velocity=0),e.config&&!p&&nie(m,tu(e.config,s),e.config!==o.config?tu(o.config,s):void 0);let y=Ms(this);if(!y||Se.und(c))return n(is(this,!0));const b=Se.und(e.reset)?r&&!e.default:!Se.und(d)&&gf(e.reset,s),_=b?d:this.get(),k=Rp(c),C=Se.num(k)||Se.arr(k)||hw(k),E=!p&&(!C||gf(o.immediate||e.immediate,s));if(f){const L=R_(c);if(L!==y.constructor)if(E)y=this._set(k);else throw Error(`Cannot animate between ${y.constructor.name} and ${L.name}, as the "to" prop suggests`)}const P=y.constructor;let M=Ar(c),D=!1;if(!M){const L=b||!f1(this)&&h;(f||L)&&(D=go(Rp(_),k),M=!D),(!go(a.immediate,E)&&!E||!go(m.decay,w)||!go(m.velocity,v))&&(M=!0)}if(D&&sa(this)&&(a.changed&&!b?M=!0:M||this._stop(l)),!p&&((M||Ar(l))&&(a.values=y.getPayload(),a.toValues=Ar(c)?null:P==Tp?[1]:Fa(k)),a.immediate!=E&&(a.immediate=E,!E&&!b&&this._set(l)),M)){const{onRest:L}=a;Bn(cie,G=>DM(this,e,G));const $=is(this,vh(this,l));pg(this._pendingCalls,$),this._pendingCalls.add(n),a.changed&&Ye.batchedUpdates(()=>{var G;a.changed=!b,L==null||L($,this),b?tu(o.onRest,$):(G=a.onStart)==null||G.call(a,$,this)})}b&&this._set(_),p?n(oie(e.to,e,this._state,this)):M?this._start():sa(this)&&!f?this._pendingCalls.add(n):n(Y5(_))}_focus(t){const e=this.animation;t!==e.to&&(_M(this)&&this._detach(),e.to=t,_M(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Ar(e)&&(cw(e,this),I_(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Ar(t)&&Ap(t,this)}_set(t,e=!0){const n=Mi(t);if(!Se.und(n)){const i=Ms(this);if(!i||!go(n,i.getValue())){const r=R_(n);!i||i.constructor!=r?LE(this,r.create(n)):i.setValue(n),i&&Ye.batchedUpdates(()=>{this._onChange(n,e)})}}return Ms(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,yh(this,"onStart",is(this,vh(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),tu(this.animation.onChange,t,this)),tu(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Ms(this).reset(Mi(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),sa(this)||(NM(this,!0),gh(this)||this._resume())}_resume(){bs.skipAnimation?this.finish():lw.start(this)}_stop(t,e){if(sa(this)){NM(this,!1);const n=this.animation;Bn(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ep(this,{type:"idle",parent:this});const i=e?vf(this.get()):is(this.get(),vh(this,t??n.to));pg(this._pendingCalls,i),n.changed&&(n.changed=!1,yh(this,"onRest",i,this))}}};function vh(t,e){const n=Rp(e),i=Rp(t.get());return go(i,n)}function lie(t,e=t.loop,n=t.to){const i=tu(e);if(i){const r=i!==!0&&q5(i),s=(r||t).reverse,o=!r||r.reset;return uie({...t,loop:e,default:!1,pause:void 0,to:!s||M_(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function uie(t){const{to:e,from:n}=t=q5(t),i=new Set;return Se.obj(e)&&IM(e,i),Se.obj(n)&&IM(n,i),t.keys=i.size?Array.from(i):null,t}function IM(t,e){yl(t,(n,i)=>n!=null&&e.add(i))}var cie=["onStart","onRest","onChange","onPause","onResume"];function DM(t,e,n){t.animation[n]=e[n]!==qne(e,n)?K5(e[n],t.key):void 0}function yh(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var FE=({children:t,...e})=>{const n=x.useContext(Wy),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=$ne(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=Wy;return x.createElement(s,{value:e},t)},Wy=die(FE,{});FE.Provider=Wy.Provider;FE.Consumer=Wy.Consumer;function die(t,e){return Object.assign(t,x.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var hie=class extends jE{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=kp(...e);const n=this._get(),i=R_(n);LE(this,i.create(n))}advance(t){const e=this._get(),n=this.get();go(e,n)||(Ms(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&LM(this._active)&&p1(this)}_get(){const t=Se.arr(this.source)?this.source.map(Mi):Fa(Mi(this.source));return this.calc(...t)}_start(){this.idle&&!LM(this._active)&&(this.idle=!1,Bn(fw(this),t=>{t.done=!1}),bs.skipAnimation?(Ye.batchedUpdates(()=>this.advance()),p1(this)):lw.start(this))}_attach(){let t=1;Bn(Fa(this.source),e=>{Ar(e)&&cw(e,this),I_(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Bn(Fa(this.source),t=>{Ar(t)&&Ap(t,this)}),this._active.clear(),p1(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Fa(this.source).reduce((e,n)=>Math.max(e,(I_(n)?n.priority:0)+1),0))}};function fie(t){return t.idle!==!1}function LM(t){return!t.size||Array.from(t).every(fie)}function p1(t){t.idle||(t.idle=!0,Bn(fw(t),e=>{e.done=!0}),Ep(t,{type:"idle",parent:t}))}bs.assign({createStringInterpolator:z5,to:(t,e)=>new hie(t,e)});var J5=/^--/;function pie(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!J5.test(t)&&!(yf.hasOwnProperty(t)&&yf[t])?e+"px":(""+e).trim()}var jM={};function mie(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...u}=e,c=Object.values(u),d=Object.keys(u).map(h=>n||t.hasAttribute(h)?h:jM[h]||(jM[h]=h.replace(/([A-Z])/g,f=>"-"+f.toLowerCase())));s!==void 0&&(t.textContent=s);for(const h in r)if(r.hasOwnProperty(h)){const f=pie(h,r[h]);J5.test(h)?t.style.setProperty(h,f):t.style[h]=f}d.forEach((h,f)=>{t.setAttribute(h,c[f])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var yf={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gie=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),vie=["Webkit","Ms","Moz","O"];yf=Object.keys(yf).reduce((t,e)=>(vie.forEach(n=>t[gie(n,e)]=t[e]),t),yf);var yie=/^(matrix|translate|scale|rotate|skew)/,wie=/^(translate)/,bie=/^(rotate|skew)/,m1=(t,e)=>Se.num(t)&&t!==0?t+e:t,xv=(t,e)=>Se.arr(t)?t.every(n=>xv(n,e)):Se.num(t)?t===e:parseFloat(t)===e,xie=class extends pw{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>m1(a,"px")).join(",")})`,xv(o,0)])),yl(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(yie.test(a)){if(delete i[a],Se.und(o))return;const l=wie.test(a)?"px":bie.test(a)?"deg":"";r.push(Fa(o)),s.push(a==="rotate3d"?([u,c,d,h])=>[`rotate3d(${u},${c},${d},${m1(h,l)})`,xv(h,0)]:u=>[`${a}(${u.map(c=>m1(c,l)).join(",")})`,xv(u,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new Sie(r,s)),super(i)}},Sie=class extends F5{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Bn(this.inputs,(n,i)=>{const r=Mi(n[0]),[s,o]=this.transforms[i](Se.arr(r)?r:n.map(Mi));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Bn(this.inputs,e=>Bn(e,n=>Ar(n)&&cw(n,this)))}observerRemoved(t){t==0&&Bn(this.inputs,e=>Bn(e,n=>Ar(n)&&Ap(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Ep(this,t)}},_ie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];bs.assign({batchedUpdates:Cl.unstable_batchedUpdates,createStringInterpolator:z5,colors:gne});var kie=Xne(_ie,{applyAnimatedValues:mie,createAnimatedStyle:t=>new xie(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),yn=kie.animated;const Et={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},rt=(t=Et.stone[800])=>({backgroundColor:new St(t),opacity:new St(1)}),Sn=()=>({strokeDashoffset:new St(1),opacity:new St(1)}),$E={bus:{address:{stroke:new St(Et.stone[700])},data:{stroke:new St(Et.stone[700])},rd:{stroke:new St(Et.stone[700])},wr:{stroke:new St(Et.stone[700])},iom:Sn(),mem:{stroke:new St(Et.red[500])},handshake:Sn(),pic:Sn(),pio:Sn(),timer:Sn(),intr:Sn(),inta:Sn(),int0:Sn(),int1:Sn(),int2:Sn(),"switches->pio":Sn(),"pio->leds":Sn(),printer:{data:Sn(),strobe:Sn(),busy:Sn()}},clock:{angle:new St(0)},cpu:{internalBus:{address:{strokeDashoffset:new St(1),opacity:new St(1),path:new St("")},data:{strokeDashoffset:new St(1),opacity:new St(1),path:new St("")}},alu:{operands:Sn(),results:Sn(),cog:{rot:new St(0)},operation:{backgroundColor:new St(Et.stone[800])}},decoder:{path:Sn(),progress:{progress:new St(0),opacity:new St(1)}},AX:rt(),BX:rt(),CX:rt(),DX:rt(),SP:rt(),IP:rt(),IR:rt(),ri:{...rt(),opacity:new St(0)},id:{...rt(),opacity:new St(0)},left:rt(),right:rt(),result:rt(),FLAGS:rt(),MAR:rt(),MBR:rt()},handshake:{DATA:rt(),STATE:rt()},memory:{"operating-cell":{color:new St(Et.white)}},pic:{IMR:rt(),IRR:rt(),ISR:rt(),INT0:rt(),INT1:rt(),INT2:rt(),INT3:rt(),INT4:rt(),INT5:rt(),INT6:rt(),INT7:rt()},pio:{PA:rt(),PB:rt(),CA:rt(),CB:rt()},printer:{printing:{progress:new St(0),opacity:new St(1)}},timer:{CONT:rt(),COMP:rt()}};function Nt(t){return u3($E,t)}function Q5(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof St?e[n]=i.get():e[n]=Q5(i)}return e}const Cie=Q5($E);function eB(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof St?i.set(e[n]):eB(t[n],e[n])}}const Eie=()=>eB($E,Cie),Mp=new Set;async function ot(t,e){const n=U.get(xn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=U.sub(xn,()=>{U.get(xn).type!=="paused"&&(o(),s())})}),await ot(t,e);const i=Di();if(!i.animations&&!e.forceMs)return null;const r={duration:e.forceMs?e.duration:e.duration*i.executionUnit,easing:j5[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;const l=Nt(s);if(a===void 0)return l.set(o);{Mp.add(s);const u=await Nt(s).start({from:o,to:a,config:r});return Mp.delete(s),u}}))}const Aie=()=>Mp.forEach(t=>Nt(t).pause()),Pie=()=>Mp.forEach(t=>Nt(t).resume());function tB(){Mp.forEach(t=>{const e=Nt(t);e.stop(!0),e.isPaused&&e.resume()}),setTimeout(()=>Eie(),10)}async function Sr(t,e=Et.mantis[400]){return await ot({key:`${t}.backgroundColor`,to:e},{duration:1,easing:"easeOutQuart"})}async function _r(t){return await ot({key:`${t}.backgroundColor`,to:Et.stone[800]},{duration:1,easing:"easeOutQuart"})}async function Od(t){await ot({key:"bus.data.stroke",to:Et.mantis[400]},{duration:5,easing:"easeOutSine"}),await Sr("cpu.MBR"),U.set($y,t),await _r("cpu.MBR")}async function Fr(t,e){return await ot([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function pi(t){return await ot({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function Tie(t){switch(t.type){case"bus:io.selected":{await Promise.all([ot({key:"bus.mem.stroke",to:Et.stone[700]},{duration:1,easing:"easeInSine"}),Fr(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Bu(t.error);return}case"bus:reset":{await Promise.all([ot([{key:"bus.address.stroke",to:Et.stone[700]},{key:"bus.data.stroke",to:Et.stone[700]},{key:"bus.rd.stroke",to:Et.stone[700]},{key:"bus.wr.stroke",to:Et.stone[700]}],{duration:1,easing:"easeInSine"}),ot({key:"bus.mem.stroke",to:Et.red[500]},{duration:1,easing:"easeOutSine"}),pi("bus.iom"),pi("bus.handshake"),pi("bus.pio"),pi("bus.pic"),pi("bus.timer")]);return}default:return t}}async function Rie(t){switch(t.type){case"clock:tick":return;default:return t.type}}function Mie(t,e,n){let i="";switch(e&&(i="M 454 388 H 550 V 349 H 698"),n&&(i="M 680 250 H 550 V 349 H 698"),t){case"SP":return"M 451 309 H 550 V 349 H 698";case"IP":return"M 451 349 H 698";case"ri":return e||n?i:"";default:throw new Error(`Invalid register ${t}`)}}function Nie({showSP:t,showri:e}){const{path:n,...i}=Nt("cpu.internalBus.address"),[r]=x.useState(!1),s=[t?"M 451 309 H 550 V 250":"","M 451 349 H 550 V 255",e?"M 444 388 H 550 V 300":"","M 451 349 H 698"];return g.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[s.map((o,a)=>g.jsx("path",{className:`fill-none stroke-bus ${r&&o==="M 444 388 H 575 V 349"?"stroke-mantis-400":"stroke-stone-700"}`,strokeLinejoin:"round",d:o},a)),g.jsx(yn.path,{d:n,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}var BE={exports:{}},nd=typeof Reflect=="object"?Reflect:null,FM=nd&&typeof nd.apply=="function"?nd.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},Sv;nd&&typeof nd.ownKeys=="function"?Sv=nd.ownKeys:Object.getOwnPropertySymbols?Sv=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Sv=function(e){return Object.getOwnPropertyNames(e)};function Oie(t){console&&console.warn&&console.warn(t)}var nB=Number.isNaN||function(e){return e!==e};function bt(){bt.init.call(this)}BE.exports=bt;BE.exports.once=jie;bt.EventEmitter=bt;bt.prototype._events=void 0;bt.prototype._eventsCount=0;bt.prototype._maxListeners=void 0;var $M=10;function mw(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(bt,"defaultMaxListeners",{enumerable:!0,get:function(){return $M},set:function(t){if(typeof t!="number"||t<0||nB(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");$M=t}});bt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};bt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||nB(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function iB(t){return t._maxListeners===void 0?bt.defaultMaxListeners:t._maxListeners}bt.prototype.getMaxListeners=function(){return iB(this)};bt.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")FM(l,this,n);else for(var u=l.length,c=lB(l,u),i=0;i<u;++i)FM(c[i],this,n);return!0};function rB(t,e,n,i){var r,s,o;if(mw(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=iB(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Oie(a)}return t}bt.prototype.addListener=function(e,n){return rB(this,e,n,!1)};bt.prototype.on=bt.prototype.addListener;bt.prototype.prependListener=function(e,n){return rB(this,e,n,!0)};function Iie(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function sB(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=Iie.bind(i);return r.listener=n,i.wrapFn=r,r}bt.prototype.once=function(e,n){return mw(n),this.on(e,sB(this,e,n)),this};bt.prototype.prependOnceListener=function(e,n){return mw(n),this.prependListener(e,sB(this,e,n)),this};bt.prototype.removeListener=function(e,n){var i,r,s,o,a;if(mw(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():Die(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};bt.prototype.off=bt.prototype.removeListener;bt.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function oB(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?Lie(r):lB(r,r.length)}bt.prototype.listeners=function(e){return oB(this,e,!0)};bt.prototype.rawListeners=function(e){return oB(this,e,!1)};bt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):aB.call(t,e)};bt.prototype.listenerCount=aB;function aB(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}bt.prototype.eventNames=function(){return this._eventsCount>0?Sv(this._events):[]};function lB(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function Die(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Lie(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function jie(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}uB(t,e,s,{once:!0}),e!=="error"&&Fie(t,r,{once:!0})})}function Fie(t,e,n){typeof t.on=="function"&&uB(t,"error",e,n)}function uB(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var $ie=BE.exports;function so(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(so.prototype[Symbol.iterator]=function(){return this});so.of=function(){var t=arguments,e=t.length,n=0;return new so(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};so.empty=function(){var t=new so(function(){return{done:!0}});return t};so.fromSequence=function(t){var e=0,n=t.length;return new so(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};so.is=function(t){return t instanceof so?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var gw=so;const Vr=Hu(gw);var vw={};vw.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";vw.SYMBOL_SUPPORT=typeof Symbol<"u";var Bie=gw,cB=vw,zie=cB.ARRAY_BUFFER_SUPPORT,Uie=cB.SYMBOL_SUPPORT;function Hie(t){return typeof t=="string"||Array.isArray(t)||zie&&ArrayBuffer.isView(t)?Bie.fromSequence(t):typeof t!="object"||t===null?null:Uie&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var dB=function(e){var n=Hie(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},Vie=dB,Wie=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=Vie(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const hB=Hu(Wie);var Gie=gw,Kie=dB,Xie=function(){var e=arguments,n=null,i=-1;return new Gie(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=Kie(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Lo=Hu(Xie);function qie(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let gn=qie;typeof Object.assign=="function"&&(gn=Object.assign);function $r(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function zn(t){return typeof t=="object"&&t!==null}function fB(t){let e;for(e in t)return!1;return!0}function gr(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Kr(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function BM(t){return!(!zn(t)||t.attributes&&!Array.isArray(t.attributes))}function Yie(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class zE extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class xe extends zE{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,xe.prototype.constructor)}}class ce extends zE{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ce.prototype.constructor)}}class Fe extends zE{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Fe.prototype.constructor)}}function pB(t,e){this.key=t,this.attributes=e,this.clear()}pB.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function mB(t,e){this.key=t,this.attributes=e,this.clear()}mB.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function gB(t,e){this.key=t,this.attributes=e,this.clear()}gB.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Kd(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}Kd.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};Kd.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};Kd.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};Kd.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const vB=0,yB=1,Zie=2,wB=3;function Qo(t,e,n,i,r,s,o){let a,l,u,c;if(i=""+i,n===vB){if(a=t._nodes.get(i),!a)throw new ce(`Graph.${e}: could not find the "${i}" node in the graph.`);u=r,c=s}else if(n===wB){if(r=""+r,l=t._edges.get(r),!l)throw new ce(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(i===d)a=l.target;else if(i===h)a=l.source;else throw new ce(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${h}).`);u=s,c=o}else{if(l=t._edges.get(i),!l)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===yB?a=l.source:a=l.target,u=r,c=s}return[a,u,c]}function Jie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Qo(this,e,n,i,r,s);return o.attributes[a]}}function Qie(t,e,n){t.prototype[e]=function(i,r){const[s]=Qo(this,e,n,i,r);return s.attributes}}function ere(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Qo(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function tre(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=Qo(this,e,n,i,r,s,o);return a.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function nre(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,u]=Qo(this,e,n,i,r,s,o);if(typeof u!="function")throw new xe(`Graph.${e}: updater should be a function.`);const c=a.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function ire(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Qo(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function rre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Qo(this,e,n,i,r,s);if(!zn(a))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function sre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Qo(this,e,n,i,r,s);if(!zn(a))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return gn(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function ore(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Qo(this,e,n,i,r,s);if(typeof a!="function")throw new xe(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const are=[{name:t=>`get${t}Attribute`,attacher:Jie},{name:t=>`get${t}Attributes`,attacher:Qie},{name:t=>`has${t}Attribute`,attacher:ere},{name:t=>`set${t}Attribute`,attacher:tre},{name:t=>`update${t}Attribute`,attacher:nre},{name:t=>`remove${t}Attribute`,attacher:ire},{name:t=>`replace${t}Attributes`,attacher:rre},{name:t=>`merge${t}Attributes`,attacher:sre},{name:t=>`update${t}Attributes`,attacher:ore}];function lre(t){are.forEach(function({name:e,attacher:n}){n(t,e("Node"),vB),n(t,e("Source"),yB),n(t,e("Target"),Zie),n(t,e("Opposite"),wB)})}function ure(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Fe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Fe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$r(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Fe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function cre(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Fe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Fe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=$r(this,s,o,n),!r)throw new ce(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new Fe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function dre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Fe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Fe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$r(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Fe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function hre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Fe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Fe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=$r(this,a,l,n),!o)throw new ce(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Fe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function fre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Fe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Fe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=$r(this,a,l,n),!o)throw new ce(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Fe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new xe(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function pre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Fe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Fe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$r(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Fe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function mre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Fe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Fe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$r(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Fe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!zn(r))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function gre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Fe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Fe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$r(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Fe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!zn(r))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return gn(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function vre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Fe(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Fe(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=$r(this,o,a,n),!s)throw new ce(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Fe(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ce(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new xe(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const yre=[{name:t=>`get${t}Attribute`,attacher:ure},{name:t=>`get${t}Attributes`,attacher:cre},{name:t=>`has${t}Attribute`,attacher:dre},{name:t=>`set${t}Attribute`,attacher:hre},{name:t=>`update${t}Attribute`,attacher:fre},{name:t=>`remove${t}Attribute`,attacher:pre},{name:t=>`replace${t}Attributes`,attacher:mre},{name:t=>`merge${t}Attributes`,attacher:gre},{name:t=>`update${t}Attributes`,attacher:vre}];function wre(t){yre.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const bre=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function xre(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function Sre(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function g1(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new Vr(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function _re(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function kre(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function v1(t,e){let n=t[e];return n.next!==void 0?new Vr(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Vr.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function Cre(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):hB(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function bB(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:c,attributes:d,source:h,target:f}=a;if(l=i(c,d,h.key,f.key,h.attributes,f.attributes,a.undirected),t&&l)return c}}function Ere(t,e){if(t.size===0)return Vr.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Vr(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function UE(t,e,n,i,r,s){const o=e?Sre:xre;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function Are(t,e,n,i){const r=[];return UE(!1,t,e,n,i,function(s){r.push(s)}),r}function Pre(t,e,n){let i=Vr.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=Lo(i,g1(n.in))),e!=="in"&&typeof n.out<"u"&&(i=Lo(i,g1(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=Lo(i,g1(n.undirected))),i}function HE(t,e,n,i,r,s,o){const a=n?kre:_re;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function Tre(t,e,n,i,r){const s=[];return HE(!1,t,e,n,i,r,function(o){s.push(o)}),s}function Rre(t,e,n,i){let r=Vr.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=Lo(r,v1(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=Lo(r,v1(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Lo(r,v1(n.undirected,i))),r}function Mre(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return Cre(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new ce(`Graph.${n}: could not find the "${s}" node in the graph.`);return Are(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new ce(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new ce(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return Tre(i,this.multi,r,a,o)}throw new xe(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Nre(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=u,bB(!1,this,i,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new ce(`Graph.${s}: could not find the "${u}" node in the graph.`);return UE(!1,this.multi,i==="mixed"?this.type:i,r,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new ce(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new ce(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return HE(!1,i,this.multi,r,h,c,d)}throw new xe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((p,m,w,v,y,b,_)=>{d[f++]=c(p,m,w,v,y,b,_)})}else d=[],u.push((h,f,p,m,w,v,y)=>{d.push(c(h,f,p,m,w,v,y))});return this[s].apply(this,u),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,p,m,w,v,y)=>{c(h,f,p,m,w,v,y)&&d.push(h)}),this[s].apply(this,u),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new xe(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new xe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,p,m,w,v,y,b)=>{h=c(h,f,p,m,w,v,y,b)}),this[s].apply(this,u),h}}function Ore(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return c=l,bB(!0,this,i,c);if(arguments.length===2){l=""+l,c=u;const d=this._nodes.get(l);if(typeof d>"u")throw new ce(`Graph.${s}: could not find the "${l}" node in the graph.`);return UE(!0,this.multi,i==="mixed"?this.type:i,r,d,c)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new ce(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new ce(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return HE(!0,i,this.multi,r,d,u,c)}throw new xe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,m,w,v)=>u(d,h,f,p,m,w,v)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,m,w,v)=>!u(d,h,f,p,m,w,v)),!this[s].apply(this,l)}}function Ire(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Vr.empty();if(!arguments.length)return Ere(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new ce(`Graph.${s}: could not find the "${o}" node in the graph.`);return Pre(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new ce(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new ce(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return Rre(i,r,l,a)}throw new xe(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Dre(t){bre.forEach(e=>{Mre(t,e),Nre(t,e),Ore(t,e),Ire(t,e)})}const Lre=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function yw(){this.A=null,this.B=null}yw.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};yw.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function wh(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,u=a===n?l:a;if(e&&e.has(u.key))continue;const c=r(u.key,u.attributes);if(t&&c)return u.key}}function VE(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return wh(t,null,i,i.undirected,r);if(typeof n=="string")return wh(t,null,i,i[n],r)}const s=new yw;let o;if(e!=="undirected"){if(n!=="out"){if(o=wh(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=wh(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=wh(t,s,i,i.undirected,r),t&&o))return o}function jre(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return VE(!1,t,e,n,function(r){i.push(r)}),i}function bh(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new Vr(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],u=l.source,c=l.target;if(a=u===e?c:u,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function Fre(t,e,n){if(t!=="mixed"){if(t==="undirected")return bh(null,n,n.undirected);if(typeof e=="string")return bh(null,n,n[e])}let i=Vr.empty();const r=new yw;return t!=="undirected"&&(e!=="out"&&(i=Lo(i,bh(r,n,n.in))),e!=="in"&&(i=Lo(i,bh(r,n,n.out)))),t!=="directed"&&(i=Lo(i,bh(r,n,n.undirected))),i}function $re(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new ce(`Graph.${n}: could not find the "${s}" node in the graph.`);return jre(i==="mixed"?this.type:i,r,o)}}function Bre(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new ce(`Graph.${s}: could not find the "${u}" node in the graph.`);VE(!1,i==="mixed"?this.type:i,r,d,c)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(u,c){const d=[];return this[s](u,(h,f)=>{d.push(c(h,f))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c){const d=[];return this[s](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c,d){if(arguments.length<3)throw new xe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](u,(f,p)=>{h=c(h,f,p)}),h}}function zre(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new ce(`Graph.${o}: could not find the "${u}" node in the graph.`);return VE(!0,i==="mixed"?this.type:i,r,d,c)};const a="some"+s;t.prototype[a]=function(u,c){return!!this[o](u,c)};const l="every"+s;t.prototype[l]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function Ure(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Vr.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new ce(`Graph.${s}: could not find the "${o}" node in the graph.`);return Fre(i==="mixed"?this.type:i,r,a)}}function Hre(t){Lre.forEach(e=>{$re(t,e),Bre(t,e),zre(t,e),Ure(t,e)})}function yg(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,u,c,d,h;for(;a=s.next(),a.done!==!0;){let f=!1;if(l=a.value,o!=="undirected"){c=l.out;for(u in c){d=c[u];do h=d.target,f=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){c=l.undirected;for(u in c)if(!(e&&l.key>u)){d=c[u];do h=d.target,h.key!==u&&(h=d.source),f=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!f&&r(l.key,null,l.attributes,null,null,null,null)}}function Vre(t,e){const n={key:t};return fB(e.attributes)||(n.attributes=gn({},e.attributes)),n}function Wre(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return fB(n.attributes)||(i.attributes=gn({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function Gre(t){if(!zn(t))throw new xe('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new xe("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!zn(t.attributes)||t.attributes===null))throw new xe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Kre(t){if(!zn(t))throw new xe('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new xe("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new xe("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!zn(t.attributes)||t.attributes===null))throw new xe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new xe("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Xre=Yie(),qre=new Set(["directed","undirected","mixed"]),zM=new Set(["domain","_events","_eventsCount","_maxListeners"]),Yre=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],Zre={allowSelfLoops:!0,multi:!1,type:"mixed"};function Jre(t,e,n){if(n&&!zn(n))throw new xe(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new Fe(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function UM(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function xB(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new Fe(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Fe(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!zn(a))throw new xe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new Fe(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),u=t._nodes.get(o);if(!l)throw new ce(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new ce(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Fe(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Fe(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new Kd(i,r,l,u,a);t._edges.set(r,d);const h=s===o;return i?(l.undirectedDegree++,u.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,c.key=r,t.emit("edgeAdded",c),r}function Qre(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new Fe(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Fe(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new xe(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!zn(a))throw new xe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let u;if(l&&(u=a,a=void 0),!t.allowSelfLoops&&s===o)throw new Fe(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(s),d=t._nodes.get(o),h,f;if(!n&&(h=t._edges.get(r),h)){if((h.source.key!==s||h.target.key!==o)&&(!i||h.source.key!==o||h.target.key!==s))throw new Fe(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!t.multi&&c&&(f=i?c.undirected[o]:c.out[o]),f){const y=[f.key,!1,!1,!1];if(l?!u:!a)return y;if(l){const b=f.attributes;f.attributes=u(b),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else gn(f.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return y}a=a||{},l&&u&&(a=u(a));const p={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Fe(`Graph.${e}: the "${r}" edge already exists in the graph.`);let m=!1,w=!1;c||(c=UM(t,s,{}),m=!0,s===o&&(d=c,w=!0)),d||(d=UM(t,o,{}),w=!0),h=new Kd(i,r,c,d,a),t._edges.set(r,h);const v=s===o;return i?(c.undirectedDegree++,d.undirectedDegree++,v&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,v&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),i?t._undirectedSize++:t._directedSize++,p.key=r,t.emit("edgeAdded",p),[r,!0,m,w]}function rc(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class Pt extends $ie.EventEmitter{constructor(e){if(super(),e=gn({},Zre,e),typeof e.multi!="boolean")throw new xe(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!qre.has(e.type))throw new xe(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new xe(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?pB:e.type==="directed"?mB:gB;gr(this,"NodeDataClass",n);const i="geid_"+Xre()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};gr(this,"_attributes",{}),gr(this,"_nodes",new Map),gr(this,"_edges",new Map),gr(this,"_directedSize",0),gr(this,"_undirectedSize",0),gr(this,"_directedSelfLoopCount",0),gr(this,"_undirectedSelfLoopCount",0),gr(this,"_edgeKeyGenerator",s),gr(this,"_options",e),zM.forEach(o=>gr(this,o,this[o])),Kr(this,"order",()=>this._nodes.size),Kr(this,"size",()=>this._edges.size),Kr(this,"directedSize",()=>this._directedSize),Kr(this,"undirectedSize",()=>this._undirectedSize),Kr(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Kr(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Kr(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Kr(this,"multi",this._options.multi),Kr(this,"type",this._options.type),Kr(this,"allowSelfLoops",this._options.allowSelfLoops),Kr(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new xe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new xe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new xe(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new Fe("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ce(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ce(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new Fe("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ce(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ce(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new Fe("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ce(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ce(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new ce(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new ce(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new ce(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ce(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return Jre(this,e,n).key}mergeNode(e,n){if(n&&!zn(n))throw new xe(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(gn(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new xe(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ce(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do rc(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do rc(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do rc(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=$r(this,i,r,this.type),!n)throw new ce(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new ce(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return rc(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new Fe("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Fe("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=$r(this,e,n,"directed");if(!i)throw new ce(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return rc(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new Fe("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Fe("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=$r(this,e,n,"undirected");if(!i)throw new ce(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return rc(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new xe("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!zn(e))throw new xe("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!zn(e))throw new xe("Graph.mergeAttributes: provided attributes are not a plain object.");return gn(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new xe("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new xe("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!BM(n))throw new xe("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new xe("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!BM(n))throw new xe("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new xe("Graph.forEachAdjacencyEntry: expecting a callback.");yg(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new xe("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");yg(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new xe("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");yg(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new xe("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");yg(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):hB(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new xe("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new xe("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new xe("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new xe("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new xe("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new xe("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new xe("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new xe("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Vr(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=Vre(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=Wre(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof Pt)return e.forEachNode((l,u)=>{n?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,c,d,h,f,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,c,d,u):this.mergeDirectedEdgeWithKey(l,c,d,u):p?this.addUndirectedEdgeWithKey(l,c,d,u):this.addDirectedEdgeWithKey(l,c,d,u)}),this;if(!zn(e))throw new xe("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!zn(e.attributes))throw new xe("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new xe("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],Gre(o);const{key:l,attributes:u}=o;n?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new xe("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],Kre(a);const{source:u,target:c,attributes:d,undirected:h=l}=a;let f;"key"in a?(f=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,u,c,d)):(f=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(e){const n=new Pt(gn({},this._options,e));return n.replaceAttributes(gn({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=gn({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Fe(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Fe("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Fe("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,xB(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,gn({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${a}(${c})`;o.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,l+=`${i[h]}. `):l+=`[${o}]: `,l+=h,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!zM.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,gr(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(Pt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Pt.prototype.inspect);Yre.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?xB:Qre;t.generateKey?Pt.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:Pt.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});lre(Pt);wre(Pt);Dre(Pt);Hre(Pt);class SB extends Pt{constructor(e){const n=gn({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new xe("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new xe('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class WE extends Pt{constructor(e){const n=gn({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new xe("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new xe('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class _B extends Pt{constructor(e){const n=gn({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new xe("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class kB extends Pt{constructor(e){const n=gn({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new xe("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new xe('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class CB extends Pt{constructor(e){const n=gn({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new xe("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new xe('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Xd(t){t.from=function(e,n){const i=gn({},e.options,n),r=new t(i);return r.import(e),r}}Xd(Pt);Xd(SB);Xd(WE);Xd(_B);Xd(kB);Xd(CB);Pt.Graph=Pt;Pt.DirectedGraph=SB;Pt.UndirectedGraph=WE;Pt.MultiGraph=_B;Pt.MultiDirectedGraph=kB;Pt.MultiUndirectedGraph=CB;Pt.InvalidArgumentsGraphError=xe;Pt.NotFoundGraphError=ce;Pt.UsageGraphError=Fe;var ese=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},EB=vw,tse=EB.ARRAY_BUFFER_SUPPORT,nse=EB.SYMBOL_SUPPORT,ise=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||tse&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(nse&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},AB=gw,rse=ise;function un(){this.clear()}un.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};un.prototype.enqueue=function(t){return this.items.push(t),++this.size};un.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};un.prototype.peek=function(){if(this.size)return this.items[this.offset]};un.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};un.prototype.toArray=function(){return this.items.slice(this.offset)};un.prototype.values=function(){var t=this.items,e=this.offset;return new AB(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};un.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new AB(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(un.prototype[Symbol.iterator]=un.prototype.values);un.prototype.toString=function(){return this.toArray().join(",")};un.prototype.toJSON=function(){return this.toArray()};un.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:un,enumerable:!1}),t};typeof Symbol<"u"&&(un.prototype[Symbol.for("nodejs.util.inspect.custom")]=un.prototype.inspect);un.from=function(t){var e=new un;return rse(t,function(n){e.enqueue(n)}),e};un.of=function(){return un.from(arguments)};var sse=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},PB=ese,ose=sse;function ase(t,e,n){if(!PB(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],u,c,d,h,f,p,m,w,v=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(u=a,a=[],f=0,m=u.length;f<m;f++)for(c=u[f],d=r(c),p=0,w=d.length;p<w;p++)if(h=d[p],h in s||(a.push(h),s[h]=c),h in o){v=!0;break e}}else for(u=l,l=[],f=0,m=u.length;f<m;f++)for(c=u[f],d=i(c),p=0,w=d.length;p<w;p++)if(h=d[p],h in o||(l.push(h),o[h]=c),h in s){v=!0;break e}if(!v)return null;for(var y=[];h;)y.unshift(h),h=s[h];for(h=o[y[y.length-1]];h;)y.push(h),h=o[h];return y.length?y:null}function TB(t,e,n){if(!PB(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,u;o.length!==0;){var c=[];for(a=0,l=o.length;a<l;a++)u=o[a],!i.has(u)&&(i.add(u),ose(c,e[t](u)),r[u]=s);s++,o=c}return r}TB.bind(null,"outboundNeighbors");TB.bind(null,"neighbors");var lse=ase;const Y=new WE({allowSelfLoops:!1});Y.addNode("MBR",{position:[620,250]});Y.addNode("AX",{position:[451,45]});Y.addNode("BX",{position:[451,85]});Y.addNode("CX",{position:[451,125]});Y.addNode("DX",{position:[451,165]});Y.addNode("id",{position:[451,205]});Y.addNode("SP",{position:[451,309]});Y.addNode("IP",{position:[451,349]});Y.addNode("ri",{position:[451,388]});Y.addNode("MAR",{position:[698,349]});Y.addNode("result",{position:[272,115]});Y.addNode("ALUresult",{position:[370,115]});Y.addNode("FLAGS",{position:[250,225]});Y.addNode("IR",{position:[205,272]});Y.addNode("left",{position:[130,85]});Y.addNode("right",{position:[125,145]});Y.addNode("rmbr",{position:[250,390]});Y.addNode("bleft1",{position:[550,16]});Y.addNode("bleft2",{position:[90,16]});Y.addNode("bleft3",{position:[90,85]});Y.addNode("AX join",{position:[421,45]});Y.addNode("BX join",{position:[421,85]});Y.addNode("CX join",{position:[421,125]});Y.addNode("DX join",{position:[421,165]});Y.addNode("id join",{position:[421,205]});Y.addNode("data mbr join",{position:[421,250]});Y.addNode("SP join",{position:[421,309]});Y.addNode("IP join",{position:[421,349]});Y.addNode("ri join",{position:[421,388]});Y.addNode("MAR join1",{position:[550,388]});Y.addNode("MAR join2",{position:[550,349]});Y.addNode("addresses mbr join",{position:[421,250]});Y.addNode("result mbr join",{position:[370,250]});Y.addNode("FLAGS mbr join",{position:[250,250]});Y.addNode("IR mbr join",{position:[205,250]});Y.addNode("left join",{position:[30,85]});Y.addNode("right join",{position:[90,145]});Y.addNode("operands mbr join",{position:[90,250]});Y.addNode("outr mbr join",{position:[550,250]});Y.addNode("mbr reg join",{position:[421,250]});Y.addNode("AX out",{position:[510,45]});Y.addNode("BX out",{position:[510,85]});Y.addNode("CX out",{position:[510,125]});Y.addNode("DX out",{position:[510,165]});Y.addNode("id out",{position:[510,205]});Y.addNode("SP out",{position:[510,309]});Y.addNode("IP out",{position:[510,349]});Y.addNode("AX out join",{position:[550,45]});Y.addNode("BX out join",{position:[550,85]});Y.addNode("CX out join",{position:[550,125]});Y.addNode("DX out join",{position:[550,165]});Y.addNode("id out join",{position:[550,205]});Y.addNode("SP out join",{position:[550,309]});Y.addNode("IP out join",{position:[550,349]});Y.addUndirectedEdge("AX","AX out");Y.addUndirectedEdge("BX","BX out");Y.addUndirectedEdge("CX","CX out");Y.addUndirectedEdge("DX","DX out");Y.addUndirectedEdge("id","id out");Y.addUndirectedEdge("IP","IP out");Y.addUndirectedEdge("SP","SP out");Y.addUndirectedEdge("AX out","AX out join");Y.addUndirectedEdge("BX out","BX out join");Y.addUndirectedEdge("CX out","CX out join");Y.addUndirectedEdge("DX out","DX out join");Y.addUndirectedEdge("id out","id out join");Y.addUndirectedEdge("AX out join","outr mbr join");Y.addUndirectedEdge("BX out join","outr mbr join");Y.addUndirectedEdge("CX out join","outr mbr join");Y.addUndirectedEdge("DX out join","outr mbr join");Y.addUndirectedEdge("id out join","outr mbr join");Y.addUndirectedEdge("AX out join","bleft1");Y.addUndirectedEdge("BX out join","bleft1");Y.addUndirectedEdge("CX out join","bleft1");Y.addUndirectedEdge("DX out join","bleft1");Y.addUndirectedEdge("id out join","bleft1");Y.addUndirectedEdge("bleft1","bleft2");Y.addUndirectedEdge("bleft2","bleft3");Y.addUndirectedEdge("bleft3","left");Y.addUndirectedEdge("IP out join","outr mbr join");Y.addUndirectedEdge("SP out join","outr mbr join");Y.addUndirectedEdge("SP out join","MAR join2");Y.addUndirectedEdge("outr mbr join","mbr reg join");Y.addUndirectedEdge("MBR","outr mbr join");Y.addUndirectedEdge("mbr reg join","AX join");Y.addUndirectedEdge("mbr reg join","BX join");Y.addUndirectedEdge("mbr reg join","CX join");Y.addUndirectedEdge("mbr reg join","DX join");Y.addUndirectedEdge("mbr reg join","id join");Y.addUndirectedEdge("outr mbr join","operands mbr join");Y.addUndirectedEdge("AX join","AX");Y.addUndirectedEdge("BX join","BX");Y.addUndirectedEdge("CX join","CX");Y.addUndirectedEdge("DX join","DX");Y.addUndirectedEdge("id join","data mbr join");Y.addUndirectedEdge("MBR","data mbr join");Y.addUndirectedEdge("IP","IP join");Y.addUndirectedEdge("SP","SP join");Y.addUndirectedEdge("ri","ri join");Y.addUndirectedEdge("MAR join1","ri");Y.addUndirectedEdge("MAR join2","MAR join1");Y.addUndirectedEdge("MAR","MAR join2");Y.addUndirectedEdge("IP join","SP join");Y.addUndirectedEdge("SP join","ri join");Y.addUndirectedEdge("IP join","addresses mbr join");Y.addUndirectedEdge("addresses mbr join","data mbr join");Y.addUndirectedEdge("result","ALUresult");Y.addUndirectedEdge("ALUresult","result mbr join");Y.addUndirectedEdge("result mbr join","addresses mbr join");Y.addUndirectedEdge("FLAGS","FLAGS mbr join");Y.addUndirectedEdge("FLAGS mbr join","result mbr join");Y.addUndirectedEdge("IR","IR mbr join");Y.addUndirectedEdge("IR mbr join","FLAGS mbr join");Y.addUndirectedEdge("left","left join");Y.addUndirectedEdge("right","right join");Y.addUndirectedEdge("left join","right join");Y.addUndirectedEdge("right join","operands mbr join");function use(t,e,n,i){console.log("from:",t),console.log("to:",e);const r=(u,c)=>c==="left"?[u,"bleft1","bleft2","bleft3","left",`${u} out`,`${u} out join`,"outr mbr join","mbr reg join",`${c} join`,c]:[u,`${u} out`,`${u} out join`,"outr mbr join","mbr reg join",`${c} join`,c];let s=[];const o=["AX","BX","CX","DX","id"];if(t==="MBR"&&e==="left"?s=["MBR","outr mbr join","bleft1","bleft2","bleft3","left"]:t==="MBR"&&e==="ri"?s=["MBR","outr mbr join","SP out join","MAR join2","MAR"]:t==="MBR"&&o.includes(e)?s=["MBR","mbr reg join",`${e} join`,e]:o.includes(t)&&o.includes(e)?s=r(t,e):t==="IP"&&e==="id"?s=["IP out","IP out join","outr mbr join","mbr reg join","id join","id"]:t==="id"&&e==="ri"?s=["id out","id out join","outr mbr join","MAR join2","MAR"]:t==="BX"&&e==="ri"?s=["BX out","BX out join","outr mbr join","MAR join2","MAR"]:t==="id"&&e==="MBR"?s=["id out","id out join","outr mbr join","MBR"]:t==="id"&&e==="IP"&&n==="RET"?s=["MBR","mbr reg join","IP join","IP"]:s=lse(Y,t,e)||[],t==="ri"&&e==="IP"&&(s=["MBR","mbr reg join","IP join","IP"]),t==="MBR"&&e==="ri"&&["JMP","JZ","JC","CALL"].includes(n??""))return"";if(t==="MBR"&&e==="ri"&&(n==="MOV"||n==="INT")&&i==="mem<-imd"&&(s=["MBR","mbr reg join","ri join","ri"]),t==="IP"&&e==="MBR"&&n==="INT")return"M 510 349 H 550 V 250 H 620";if(t==="MBR"&&e==="ri"&&i==="mem<-imd"&&(n==="ADD"||n==="SUB")&&(s=["MBR","mbr reg join","ri join","ri"]),s.length===0)throw new Error(`No path from ${t} to ${e}`);const a=Y.getNodeAttribute(s[0],"position");console.log("start:",a);let l=`M ${a[0]} ${a[1]}`;for(let u=1;u<s.length;u++){const[c,d]=Y.getNodeAttribute(s[u],"position");l+=` L ${c} ${d}`}return l}function cse({showSP:t,showid:e,showri:n}){const{path:i,...r}=Nt("cpu.internalBus.data");return g.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[g.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 630","M 90 145 H 90","M 272 115 H 370 V 250","M 250 225 V 250","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 430 349 H 421","V 250","M 451 349 H 421",t?"M 451 309 H 421":"M 451 309",n?"M 451 388 H 421 V 300":"","M 451 45 H 421","V 250","M 451 85 H 421","M 451 125 H 421","M 451 165 H 421",e?"M 451 205 H 421":"","M 550 45 H 520","M 550 85 H 510","M 550 125 H 510","M 550 165 H 510",e?"M 550 205 H 510":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220"].join(" ")}),g.jsx(yn.path,{d:i,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r})]})}const y1=(t,e,n,i)=>{const r=use(t,e,n,i);return ot([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})},w1=()=>ot({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});let oa="",wg="",b1=!1,bg=!1,xg=0;async function dse(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await ot([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),U.set(E5,t.operation),await Promise.all([ot({key:"cpu.alu.operation.backgroundColor",to:Et.mantis[400]},{duration:1,easing:"easeOutQuart"}),ot({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([ot({key:"cpu.alu.operation.backgroundColor",to:Et.stone[800]},{duration:1,easing:"easeOutQuart"}),ot([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([Sr("cpu.result"),Sr("cpu.FLAGS")]),U.set(qe.FLAGS,t.flags),U.set(qe.result,t.result),await Promise.all([_r("cpu.result"),_r("cpu.FLAGS")]),await ot([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{U.set(Rs,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await ot([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{oa=t.instruction.name,wg=t.instruction.willUse.ri?"mem<-imd":"",b1=!!(t.instruction.willUse.ri&&oa==="MOV"),bg=!!(t.instruction.willUse.ri&&(oa==="ADD"||oa==="SUB"||oa==="INT")),xg=0,x5(t.instruction.position.start),U.set(Rs,{phase:"fetching",metadata:t.instruction}),await ot([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{U.set(Rs,e=>"metadata"in e?{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase}:e);return}case"cpu:decode":{await ot([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await ot([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await ot([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{U.set(Rs,{phase:"stopped",error:t.error}),Bu(t.error);return}case"cpu:halt":case"cpu:int.0":{U.set(Rs,{phase:"stopped"}),Bu();return}case"cpu:int.3":{En();return}case"cpu:int.6":{U.set(Rs,{phase:"int6"});return}case"cpu:int.7":{U.set(Rs,{phase:"int7"});return}case"cpu:inta.off":{await pi("bus.inta");return}case"cpu:inta.on":{await Fr("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await ot({key:"bus.address.stroke",to:Et.blue[500]},{duration:5,easing:"easeInOutSine"}),await ot({key:`bus.${e}.stroke`,to:Et.red[500]},{duration:5,easing:"easeOutSine"}),await ot({key:"bus.data.stroke",to:Et.mantis[400]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await Fr("bus.iom",15);return}case"cpu:mar.set":{xg++,console.log("countersetMAR",xg),xg===4&&bg&&(b1=!0,bg=!1),await ot([{key:"cpu.internalBus.address.path",from:Mie(t.register,b1,bg)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await Sr("cpu.MAR",Et.blue[500]),U.set(_5,U.get(qe[t.register])),await Promise.all([_r("cpu.MAR"),ot({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=eu(t.register);await y1("MBR",e,oa,wg),await Sr(`cpu.${e}`),U.set(qe[t.register],U.get($y)),await Promise.all([_r(`cpu.${e}`),w1()]);return}case"cpu:mbr.set":{const[e]=eu(t.register);await y1(e,"MBR",oa,wg),await Sr("cpu.MBR"),U.set($y,U.get(qe[t.register])),await Promise.all([_r("cpu.MBR"),w1()]);return}case"cpu:register.copy":{const[e]=eu(t.src),[n]=eu(t.dest);e!==n&&await y1(e,n,oa,wg),await Sr(`cpu.${n}`),U.set(qe[t.dest],U.get(qe[t.src])),await Promise.all([_r(`cpu.${n}`),e!==n&&w1()]);return}case"cpu:register.update":{const[e]=eu(t.register);await Sr(`cpu.${e}`),U.set(qe[t.register],t.value),await _r(`cpu.${e}`);return}default:return t}}async function hse(t){switch(t.type){case"f10:press":await Fr("bus.int0",2),await pi("bus.int0");return;default:return t.type}}const GE=me(j.zero(8)),KE=me(j.zero(8));function fse(t){t.io.handshake&&(U.set(GE,j.fromUnsigned(t.io.handshake.DATA,8)),U.set(KE,j.fromUnsigned(t.io.handshake.STATE,8)))}async function pse(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await Od(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await Sr(`handshake.${t.register}`),t.register){case"DATA":{U.set(GE,t.value);break}case"STATE":{U.set(KE,t.value);break}default:return t.register}await _r(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await pi("bus.int2");return}case"handshake:int.on":{await Fr("bus.int2",10);return}default:return t}}async function mse(t){switch(t.type){case"keyboard:listen-key":{U.set(xn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{U.sub(xn,()=>{const n=U.get(xn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const XE=me(j.zero(8));function gse(t){t.io.leds!==null&&U.set(XE,j.fromUnsigned(t.io.leds,8))}async function vse(t){switch(t.type){case"leds:update":{await Fr("bus.pio->leds",2),U.set(XE,t.state),await pi("bus.pio->leds");return}default:return t.type}}async function yse(t){switch(t.type){case"memory:read":return;case"memory:read.ok":{U.set(_p,Ee.from(t.address)),await ot({key:"memory.operating-cell.color",to:Et.mantis[400]},{duration:1,easing:"easeOutQuart"}),await Od(t.value),await ot({key:"memory.operating-cell.color",to:Et.white},{duration:1,easing:"easeOutQuart"});return}case"memory:write":return;case"memory:write.ok":{U.set(_p,Ee.from(t.address)),await ot({key:"memory.operating-cell.color",to:Et.mantis[400]},{duration:1,easing:"easeOutQuart"}),U.set(Fy,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await ot({key:"memory.operating-cell.color",to:Et.white},{duration:1,easing:"easeOutQuart"});return}case"memory:read.error":case"memory:write.error":{Bu(t.error);return}case"memory:write.warning":{Ri({title:"Advertencia de Memoria",description:`${t.warning}`,variant:"info"});return}default:return t}}const qE=me(j.fromUnsigned(255,8)),YE=me(j.fromUnsigned(0,8)),ZE=me(j.fromUnsigned(0,8)),Gy=[me(j.zero(8)),me(j.zero(8)),me(j.zero(8)),me(j.zero(8)),me(j.zero(8)),me(j.zero(8)),me(j.zero(8)),me(j.zero(8))];function wse(t){if(t.io.pic){U.set(qE,j.fromUnsigned(t.io.pic.IMR,8)),U.set(YE,j.fromUnsigned(t.io.pic.IRR,8)),U.set(ZE,j.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<Gy.length;e++)U.set(Gy[e],j.fromUnsigned(t.io.pic.lines[e],8))}}async function bse(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await Od(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await Sr(`pic.${t.register}`),t.register){case"IMR":{U.set(qE,t.value);break}case"IRR":{U.set(YE,t.value);break}case"ISR":{U.set(ZE,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));U.set(Gy[e],t.value);break}default:return t}await _r(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await pi("bus.intr");return}case"pic:intr.on":{await Fr("bus.intr",10);return}case"pic:int.send":{await Od(t.number);return}default:return t}}const JE=me(j.zero(8)),QE=me(j.zero(8)),eA=me(j.zero(8)),tA=me(j.zero(8));function xse(t){t.io.pio&&(U.set(JE,j.fromUnsigned(t.io.pio.PA,8)),U.set(QE,j.fromUnsigned(t.io.pio.PB,8)),U.set(eA,j.fromUnsigned(t.io.pio.CA,8)),U.set(tA,j.fromUnsigned(t.io.pio.CB,8)))}async function Sse(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await Od(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await Sr(`pio.${t.register}`),t.register){case"PA":{U.set(JE,t.value);break}case"PB":{U.set(QE,t.value);break}case"CA":{U.set(eA,t.value);break}case"CB":{U.set(tA,t.value);break}default:return t.register}await _r(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const Ky=me([]),Xy=me("");function _se(t){t.io.printer&&(U.set(Ky,t.io.printer.buffer.map(e=>j.fromUnsigned(e,8))),U.set(Xy,t.io.printer.paper))}async function kse(t){switch(t.type){case"printer:buffer.add":{U.set(Ky,e=>[...e,t.char]);return}case"printer:buffer.pop":{U.set(Ky,e=>e.slice(1));return}case"printer:busy.off":{await pi("bus.printer.busy");return}case"printer:busy.on":{await Fr("bus.printer.busy",15);return}case"printer:data.read":{await Fr("bus.printer.data",15),await pi("bus.printer.data");return}case"printer:paper.print":{U.set(Xy,e=>e+t.char);return}case"printer:paper.replace":{U.set(Xy,"");return}case"printer:strobe.off":{await pi("bus.printer.strobe");return}case"printer:strobe.on":{await Fr("bus.printer.strobe",15);return}default:return t}}const nA=me("");function Cse(t){"screen"in t.io&&t.io.screen!==null&&U.set(nA,t.io.screen)}async function Ese(t){switch(t.type){case"screen:send-char":{U.set(nA,t.output);return}default:return t.type}}const iA=me(j.zero(8));function Ase(t){t.io.switches!==null&&U.set(iA,j.fromUnsigned(t.io.switches,8))}async function Pse(t){switch(t.type){case"switches:toggle":{U.set(iA,e=>e.withBit(t.index,!e.bit(t.index))),await Fr("bus.switches->pio",2),await pi("bus.switches->pio");return}default:return t.type}}const rA=me(j.zero(8)),sA=me(j.zero(8));function Tse(t){t.io.timer&&(U.set(rA,j.fromUnsigned(t.io.timer.CONT,8)),U.set(sA,j.fromUnsigned(t.io.timer.COMP,8)))}async function Rse(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await Od(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await Sr(`timer.${t.register}`),t.register){case"CONT":{U.set(rA,t.value);break}case"COMP":{U.set(sA,t.value);break}default:return t.register}await _r(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await pi("bus.int1");return}case"timer:int.on":{await Fr("bus.int1",10);return}default:return t}}const j_=new Set;async function Mse(t){Ose(t);const[e]=t.type.split(":",2);switch(j_.add(t.type),e){case"bus":{await Tie(t);break}case"clock":{await Rie(t);break}case"cpu":{await dse(t);break}case"f10":{await hse(t);break}case"handshake":{await pse(t);break}case"keyboard":{await mse(t);break}case"leds":{await vse(t);break}case"memory":{await yse(t);break}case"pic":{await bse(t);break}case"pio":{await Sse(t);break}case"printer":{await kse(t);break}case"screen":{await Ese(t);break}case"switches":{await Pse(t);break}case"timer":{await Rse(t);break}default:return e}j_.delete(t.type)}function HM(...t){for(const e of t)if(j_.has(e))return!0;return!1}const Nse={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function Ose(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${Nse[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof j?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof Ee?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof cr?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}me(!1);const On=new Zte,xn=me({type:"stopped"});function Ise(t){const e=t.translate(Di().language);Ri({title:e,variant:"error"})}function Bu(t){if(t&&(Ise(t),t.code==="no-instruction")){U.set(xn,{type:"paused"});return}x5(null),tne(!1),U.set(xn,{type:"stopped",error:t}),U.set(Rs,{phase:"stopped",error:t}),tB()}function En(){U.set(xn,{type:"paused"}),Aie()}function Dse(){Ri({title:Y0(Di().language,"messages.assemble-error"),variant:"error"})}function sc(){Ri({title:Y0(Di().language,"messages.invalid-action"),variant:"error"})}function VM(t,e=!1){one(t,e),ene(t,e),fse(t),wse(t),xse(t),Tse(t),gse(t),_se(t),Cse(t),Ase(t),dn=0,wu=0,U.set(Fu,dn),U.set(ow,wu),U.set(ft,""),e&&U.set(By,[])}let we=null,Ul=0,ht=0,aa="",uo=!0,x1=!1,_n=!1,dn=0,wu=0,Hl="",WM="",GM="",xh=!1,Sg=!1,_g="";async function nu(t){try{for(;;){const e=U.get(xn),n=Di();if(U.get(Ny)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),U.set(Ny,!1),Bu();break}if(e.type==="stopped"){Ul=0,ht=0,aa="";break}if(e.type==="paused"){await new Promise(o=>{const a=U.sub(xn,()=>{a(),o()})});continue}const r=t.next();if(r.done)break;if(await Mse(r.value),r.value.type==="cpu:cycle.start"&&(we=r.value.instruction.name,x1=!!r.value.instruction.willUse.id,_n=!!r.value.instruction.willUse.ri,U.set(sne,_n),xh=!1,Sg=!1,_g=""),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(r.value.type==="cpu:cycle.end"||r.value.type==="cpu:halt"){Ul=0,ht=0,uo=!0,aa="",wu++,console.log(`Instrucciones: ${wu}`),U.set(ow,wu),r.value.type==="cpu:halt"?(dn++,U.set(Fu,dn),U.set(ft,"Ejecucin: Detenido")):(e.until==="cycle-change"||e.until==="end-of-instruction")&&En();continue}else r.value.type==="cpu:int.6"?U.set(ft,"Interrupcin: Rutina leer caracter del teclado"):r.value.type==="cpu:int.7"&&(U.set(ft,"Interrupcin: Rutina mostrar por pantalla"),e.until==="cycle-change"&&En());if(Ul<3)r.value.type==="cpu:mar.set"?(r.value.register==="SP"?(Ul=3,ht=3,U.set(ft,"Ejecucin: MAR  SP")):U.set(ft,"Captacin: MAR  IP"),e.until==="cycle-change"&&En(),Ul++,dn++):r.value.type==="cpu:register.update"?(U.set(ft,"Captacin: MBR  read(Memoria[MAR]); IP  IP + 1"),e.until==="cycle-change"&&En(),Ul++,dn++):r.value.type==="cpu:mbr.get"&&(U.set(ft,"Captacin: IR  MBR"),e.until==="cycle-change"&&En(),Ul++,dn++);else if(r.value.type==="cpu:rd.on"&&ht>1?aa="Ejecucin: MBR  read(Memoria[MAR])":r.value.type==="cpu:wr.on"?aa="Ejecucin: write(Memoria[MAR])  MBR":r.value.type==="pio:write.ok"&&(U.set(ft,"Ejecucin: write(PIO[MAR])  MBR"),ht++,dn++),r.value.type==="cpu:mar.set"){const o=r.value.register,a=o==="ri"?"MBR":o;let l=!1,u=!1;_n&&ht===5&&(we==="ADD"||we==="SUB")&&(l=!0),_n&&ht===9&&(l=!0),_n&&ht===2&&(we==="ADD"||we==="SUB")&&(u=!0),console.log("executeStageCounter:",ht),console.log("mbridirmar:",xh),console.log("resultmbrimar:",Sg),console.log("displayMessageresultmbr:",_g),console.log("shouldDisplayMessage:",uo),(uo||o==="SP")&&(Sg?U.set(ft,_g):l?U.set(ft,`Ejecucin: MAR  ${o}`):u?U.set(ft,"Ejecucin: ri  MBR; MAR  MBR"):ht===2&&_n&&we==="MOV"?U.set(ft,"Ejecucin: ri  MBR; MAR  IP"):ht===4&&_n&&we==="MOV"?U.set(ft,`Ejecucin: MAR  ${o}`):xh?U.set(ft,"Ejecucin: id  MBR; MAR  IP"):ht===2&&_n&&we==="INT"?U.set(ft,"Ejecucin: ri  MBR; MAR  SP"):U.set(ft,`Ejecucin: MAR  ${a}`)),e.until==="cycle-change"&&En(),ht++,dn++}else if(r.value.type==="cpu:register.update"){const o=r.value.register;let a="";uo=!0;let l=!0;o==="SP"?(_n&&ht===4&&we==="INT"&&(l=!1,uo=!1),(we==="RET"||we==="IRET"||we==="POP")&&(a="Ejecucin: SP = SP + 1")):o==="FLAGS"?(a="Ejecucin: IF = 0",_n&&ht===5&&we==="INT"&&(a="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1; IF = 0")):o==="DL"&&we==="INT"?a="Interrupcin: AL  ASCII":o==="right.l"&&we==="INT"?a="Interrupcin: SUB AL, 1":o==="right"&&we==="INT"?a="Interrupcin: ADD BL, 1":o==="ri.l"&&we==="INT"?(a="Interrupcin: MAR  (video)",uo=!1):_n&&ht===3&&we==="MOV"?(a="Ejecucin: MBR  read(Memoria[MAR]); IP  IP + 1; MAR  ri",l=!1,uo=!1):ht===4&&we==="CALL"?l=!1:a=o==="IP"?"Ejecucin: MBR  read(Memoria[MAR]); IP  IP + 1":`Ejecucin: MBR  ${o}`,_n&&ht===8&&we==="INT"&&(a="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1"),ht===4&&we==="CALL"&&(a="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1"),console.log("displayMessage:",a),console.log("currentInstructionName:",we),console.log("currentInstructionModeri:",_n),console.log("executeStageCounter:",ht),console.log("pause:",l),ht++,we!=="PUSH"&&we!=="DEC"&&we!=="INC"&&we!=="NOT"&&we!=="NEG"&&!(we==="INT"&&ht===5)&&(U.set(ft,a),dn++),a!=="Interrupcin: MAR  (video)"&&e.until==="cycle-change"&&we!=="PUSH"&&we!=="DEC"&&we!=="INC"&&we!=="NOT"&&we!=="NEG"&&l&&En()}else if(r.value.type==="cpu:alu.execute")we==="CMP"&&(U.set(ft,`Ejecucin: ${WM} ${we} ${Hl} ; write(FLAGS)`),dn++,e.until==="cycle-change"&&En());else if(r.value.type==="cpu:mbr.get"){const o=r.value.register==="id.l"?"id":r.value.register==="IP.l"?"IP":r.value.register==="FLAGS.l"?"FLAGS":r.value.register;(String(o)==="right.l"||String(o)==="left.l")&&(Hl="MBR"),_n&&ht===3&&(we==="ADD"||we==="SUB"||we==="CMP")&&(xh=!0),xh||String(o)!=="ri.l"&&String(o)!=="right.l"&&String(o)!=="left.l"&&(U.set(ft,`Ejecucin: ${o}  MBR`),dn++,e.until==="cycle-change"&&En())}else if(r.value.type==="cpu:register.copy"){const o=r.value.src.replace(/\.l$/,""),a=r.value.dest.replace(/\.l$/,"");let l="";we==="DEC"||we==="INC"||we==="NOT"||we==="NEG"?l=o==="result"?`${we} ${Hl}`:o:(l=o==="result"?`${a} ${we} ${Hl}`:o,GM=`${o} ${we} ${Hl}; write(FLAGS)`),we==="CMP"&&String(a)==="right"&&(Hl=o),we==="CMP"&&String(a)==="left"&&(WM=o);let u=`Ejecucin: ${a}  ${l}`;(we==="ADD"||we==="SUB"||we==="CMP")&&(u+="; write(FLAGS)"),o==="ri"&&a==="IP"?(u="Ejecucin: IP  MBR",U.set(ft,u),e.until==="cycle-change"&&En()):a==="left"&&we==="INT"?u="ADD BL, 1":o==="result"&&we==="INT"?e.until==="cycle-change"&&En():o==="IP"&&a==="id"?(u="Ejecucin: id  IP",U.set(ft,u),e.until==="cycle-change"&&En()):o==="id"&&a==="ri"?(u="Ejecucin: MAR  id",uo=!1,U.set(ft,u)):o==="MBR"&&a==="ri"?(u="Ejecucin: MAR  MBR",U.set(ft,u)):o==="id"&&a==="IP"?(u="Ejecucin: IP  MBR",U.set(ft,u),e.until==="cycle-change"&&En()):o==="BL"&&a==="ri"||o==="BX"&&a==="ri"?(u="Ejecucin: MAR  BL",U.set(ft,u),uo=!1,ht++):String(o)==="right.l"&&(Hl=o),(a!=="result"&&a!=="left"&&a!=="right"&&o!=="result"&&o!=="left"&&o!=="right"||o==="result"&&a!=="MBR")&&(U.set(ft,u),dn++)}else if(r.value.type==="bus:reset"&&ht>1&&(we==="MOV"||we==="ADD"||we==="SUB"||we==="CMP"||we==="CALL"||we==="INT"||we==="PUSH"||we==="IN"||we==="RET")){(we==="CALL"||we==="PUSH")&&(aa+="; SP = SP - 1"),we==="RET"&&(aa="Ejecucin: MBR  read(Memoria[MAR])"),we==="IN"&&(aa="Ejecucin: MBR  read(PIO[MAR])");let a=!1;(_n&&(ht===4||ht===8)&&we==="INT"||_n&&ht===3&&we==="MOV"||x1&&ht===4&&(we==="CALL"||we==="ADD"||we==="SUB"||we==="CMP"))&&(a=!0),console.log("executeStageCounter:",ht),a||(U.set(ft,aa),dn++,e.until==="cycle-change"&&En())}else if(r.value.type==="cpu:mbr.set"){const o=r.value.register==="id.l"?"id":r.value.register==="FLAGS.l"?"FLAGS":r.value.register==="IP.l"?"IP":r.value.register==="result.l"?GM:r.value.register;_n&&ht===5&&(we==="ADD"||we==="SUB")?(Sg=!0,_g=`Ejecucin: MBR  ${o} ; MAR  ri`):(U.set(ft,`Ejecucin: MBR  ${o}`),e.until==="cycle-change"&&En(),ht++,dn++)}}else U.set(ft,"");console.log(`Ciclos ejecutados: ${dn}`),U.set(Fu,dn);const s=new CustomEvent("instructionChange",{detail:{instruction:we,modeid:x1,moderi:_n}});window.dispatchEvent(s),r.value.type==="cpu:cycle.update"||r.value.type==="cpu:cycle.interrupt"?e.until==="cycle-change"||n.animations||await new Promise(o=>setTimeout(o,n.executionUnit)):r.value.type==="cpu:cycle.end"&&(e.until==="cycle-change"||e.until==="end-of-instruction"?En():n.animations||await new Promise(o=>setTimeout(o,n.executionUnit)))}t.return()}catch(e){const n=Ut.from(e);Bu(n)}}async function Lse(...t){const e=t[0],n=U.get(xn);switch(e){case"cpu.run":{if(n.type==="running")return sc();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;dn=0,wu=0,U.set(Fu,dn),U.set(ow,wu),U.set(By,[]);const r=window.codemirror.state.doc.toString(),s=d5(r);if(!s.success)return Dse();const a=s.instructions.map(h=>h.instruction).some(h=>["CALL","RET","INT","IRET","POP","PUSH"].includes(h));U.set(k5,a);const l=s.instructions.some(h=>h.instruction==="INT"?h.operands.some(f=>f.type==="number-expression"&&typeof f.value.value=="number"?f.value.value===6||f.value.value===7:!1):!1);U.set(Wr,h=>({...h,devices:{...h.devices,keyboardAndScreen:l}})),U.set(C5,l),On.loadProgram({program:s,data:Di().dataOnLoad,devices:Di().devices,hasORG:s.hasORG}),console.log("result:",s);const u=s.instructions.filter(h=>h.type==="instruction").flatMap(h=>{const f=h.operands.map(w=>{if(w.type==="register")return w.value;if(w.type==="number-expression"){const v=w.value;if(v.isNumberLiteral())return v.value.toString(16)+"h";if(v.isLabel())return v.value}else{if(w.type==="indirect-address")return"[BL]";if(w.type==="direct-address"){const v=w.value;if(v.isNumberLiteral())return v.value.toString(16)+"h"}}return""}).join(", "),p=`${h.instruction} ${f}`.trim(),m=[{address:h.start.value,name:p,length:h.length.toString().trim()}];if(h.operands.some(w=>w.type==="number-expression"||w.type==="direct-address")){const w=h.start.value+1,v=h.operands.filter((y,b)=>h.length===3?b===0&&y.type==="number-expression":y.type==="number-expression").map(y=>{if(y.type==="number-expression"){const b=y.value;if(b.isNumberLiteral())return b.value.toString(16)+"h";if(b.isLabel())return b.value}else if(y.type==="direct-address"){const b=y.value;if(b.isNumberLiteral())return b.value.toString(16)+"h"}return""}).join(", ");m.push({address:w,name:v,length:""})}if(h.length===3){const w=h.start.value+2,v=h.operands.filter(y=>y.type==="number-expression").map(y=>{if(y.type==="number-expression"){const b=y.value;if(b.isNumberLiteral())return b.value.toString(16)+"h"}return""}).join(" ");m.push({address:w,name:v,length:""})}return m}),c=s.data.filter(h=>h.type==="data-directive").flatMap(h=>{const f=h.start.value;return h.getValues().map(m=>typeof m=="object"&&m!==null&&"toNumber"in m&&typeof m.toNumber=="function"?m.toNumber():typeof m=="number"?m:0).map((m,w)=>({address:f+w,label:w===0&&h.label||null,value:m}))});console.log("Direcciones de las instrucciones:",u),console.log("Direcciones de los datos:",c),U.set(y5,u),U.set(w5,c.map(h=>({...h,length:""}))),VM(On.getComputerState());const d=["Start CPU",{until:i,devices:Di().devices,language:Di().language,animations:Di().animations?"yes":"no"}];S5.capture(...d),U.set(xn,{type:"running",until:i,waitingForInput:!1}),nu(On.startCPU()),jse(),Fse()}else U.set(xn,{type:"running",until:i,waitingForInput:!1}),Pie();return}case"cpu.stop":{const i=t[1];i?(Bu(),VM(On.getComputerState(),i)):En();return}case"f10.press":{if(!On.devices.f10.connected()||n.type!=="running")return sc();if(HM("f10:press"))return;nu(On.devices.f10.press());return}case"switch.toggle":{if(n.type!=="running"||!On.devices.switches.connected())return sc();if(HM("switches:toggle"))return;const i=t[1];nu(On.devices.switches.toggle(i));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return sc();On.devices.keyboard.readChar(j.fromChar(t[1])),U.set(xn,{...n,waitingForInput:!1});return}case"screen.clean":{if(!On.devices.screen.connected())return sc();nu(On.devices.screen.clear());return}case"printer.clean":{if(!On.devices.printer.connected())return sc();nu(On.devices.printer.clear());return}default:return e}}async function jse(){if(On.devices.clock.connected())for(;U.get(xn).type!=="stopped";){const t=Di().clockSpeed;await ot({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),nu(On.devices.clock.tick())}}async function Fse(){if(On.devices.printer.connected())for(;U.get(xn).type!=="stopped";){const t=Di().printerSpeed;await ot([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await ot({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),nu(On.devices.printer.print())}}function Rn(){const t=lt(xn),e=GZ(),n=x.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:Lse,devices:n}}function $se({className:t}){const e=wt(),{status:n,dispatch:i}=Rn(),r=x.useCallback(()=>{n.type!=="running"&&i("cpu.run","cycle-change")},[n.type,i]);vu("F7",l=>{l.preventDefault(),r()},void 0,[r]);const s=x.useCallback(()=>{n.type!=="running"&&i("cpu.run","end-of-instruction")},[n.type,i]);vu("F8",l=>{l.preventDefault(),s()},void 0,[s]);const o=x.useCallback(()=>{n.type!=="running"&&i("cpu.run","infinity")},[n.type,i]);vu("F4",l=>{l.preventDefault(),o()},void 0,[o]);const a=x.useCallback(()=>{n.type==="running"?i("cpu.stop",!1):i("cpu.stop",!0)},[n.type,i]);return g.jsxs("div",{className:$e("flex items-center justify-center gap-4",t),children:[g.jsxs("button",{disabled:n.type==="running",onClick:r,className:"bg-mantis-500 inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[g.jsx(Oc,{icon:bJ,className:"md:mr-2"}),g.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e("control.action.run.cycle-change")}),g.jsx("kbd",{className:"ml-2 hidden text-stone-600 md:inline",children:"F7"})]}),g.jsxs("button",{disabled:n.type==="running",onClick:s,className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-blue-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[g.jsx(Oc,{icon:gJ,className:"md:mr-2"}),g.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e("control.action.run.end-of-instruction")}),g.jsx("kbd",{className:"ml-2 hidden text-stone-600 md:inline",children:"F8"})]}),g.jsxs("button",{disabled:n.type==="running",onClick:o,className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-orange-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[g.jsx(Oc,{icon:xJ,className:"md:mr-2"}),g.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e("control.action.run.infinity")}),g.jsx("kbd",{className:"ml-2 hidden text-stone-600 md:inline",children:"F4"})]}),g.jsxs("button",{disabled:n.type==="stopped",onClick:a,className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-red-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[g.jsx(Oc,{icon:n.type==="running"?vJ:wJ,className:"md:mr-2"}),g.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e(n.type==="running"?"control.action.pause":"control.action.reset")})]})]})}function qy(t,[e,n]){return Math.min(n,Math.max(e,t))}function oA(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Bse="VisuallyHidden",ww=x.forwardRef((t,e)=>g.jsx(He.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));ww.displayName=Bse;var zse=[" ","Enter","ArrowUp","ArrowDown"],Use=[" ","Enter"],um="Select",[bw,xw,Hse]=Up(um),[qd,efe]=El(um,[Hse,Wd]),Sw=Wd(),[Vse,Tl]=qd(um),[Wse,Gse]=qd(um),RB=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:h,required:f,form:p}=t,m=Sw(e),[w,v]=x.useState(null),[y,b]=x.useState(null),[_,k]=x.useState(!1),C=Hp(u),[E=!1,P]=zo({prop:i,defaultProp:r,onChange:s}),[M,D]=zo({prop:o,defaultProp:a,onChange:l}),L=x.useRef(null),$=w?p||!!w.closest("form"):!0,[G,z]=x.useState(new Set),X=Array.from(G).map(ee=>ee.props.value).join(";");return g.jsx(ZC,{...m,children:g.jsxs(Vse,{required:f,scope:e,trigger:w,onTriggerChange:v,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:_,onValueNodeHasChildrenChange:k,contentId:il(),value:M,onValueChange:D,open:E,onOpenChange:P,dir:C,triggerPointerDownPosRef:L,disabled:h,children:[g.jsx(bw.Provider,{scope:e,children:g.jsx(Wse,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(ee=>{z(he=>new Set(he).add(ee))},[]),onNativeOptionRemove:x.useCallback(ee=>{z(he=>{const V=new Set(he);return V.delete(ee),V})},[]),children:n})}),$?g.jsxs(YB,{"aria-hidden":!0,required:f,tabIndex:-1,name:c,autoComplete:d,value:M,onChange:ee=>D(ee.target.value),disabled:h,form:p,children:[M===void 0?g.jsx("option",{value:""}):null,Array.from(G)]},X):null]})})};RB.displayName=um;var MB="SelectTrigger",NB=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=Sw(n),o=Tl(MB,n),a=o.disabled||i,l=ct(e,o.onTriggerChange),u=xw(n),c=x.useRef("touch"),[d,h,f]=ZB(m=>{const w=u().filter(b=>!b.disabled),v=w.find(b=>b.value===o.value),y=JB(w,m,v);y!==void 0&&o.onValueChange(y.value)}),p=m=>{a||(o.onOpenChange(!0),f()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return g.jsx(V0,{asChild:!0,...s,children:g.jsx(He.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":qB(o.value)?"":void 0,...r,ref:l,onClick:ve(r.onClick,m=>{m.currentTarget.focus(),c.current!=="mouse"&&p(m)}),onPointerDown:ve(r.onPointerDown,m=>{c.current=m.pointerType;const w=m.target;w.hasPointerCapture(m.pointerId)&&w.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(p(m),m.preventDefault())}),onKeyDown:ve(r.onKeyDown,m=>{const w=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&h(m.key),!(w&&m.key===" ")&&zse.includes(m.key)&&(p(),m.preventDefault())})})})});NB.displayName=MB;var OB="SelectValue",IB=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=Tl(OB,n),{onValueNodeHasChildrenChange:u}=l,c=s!==void 0,d=ct(e,l.onValueNodeChange);return ti(()=>{u(c)},[u,c]),g.jsx(He.span,{...a,ref:d,style:{pointerEvents:"none"},children:qB(l.value)?g.jsx(g.Fragment,{children:o}):s})});IB.displayName=OB;var Kse="SelectIcon",DB=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return g.jsx(He.span,{"aria-hidden":!0,...r,ref:e,children:i||""})});DB.displayName=Kse;var Xse="SelectPortal",LB=t=>g.jsx(Qp,{asChild:!0,...t});LB.displayName=Xse;var zu="SelectContent",jB=x.forwardRef((t,e)=>{const n=Tl(zu,t.__scopeSelect),[i,r]=x.useState();if(ti(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?Cl.createPortal(g.jsx(FB,{scope:t.__scopeSelect,children:g.jsx(bw.Slot,{scope:t.__scopeSelect,children:g.jsx("div",{children:t.children})})}),s):null}return g.jsx($B,{...t,ref:e})});jB.displayName=zu;var qr=10,[FB,Rl]=qd(zu),qse="SelectContentImpl",$B=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:w,...v}=t,y=Tl(zu,n),[b,_]=x.useState(null),[k,C]=x.useState(null),E=ct(e,S=>_(S)),[P,M]=x.useState(null),[D,L]=x.useState(null),$=xw(n),[G,z]=x.useState(!1),X=x.useRef(!1);x.useEffect(()=>{if(b)return eE(b)},[b]),BC();const ee=x.useCallback(S=>{const[T,...N]=$().map(W=>W.ref.current),[R]=N.slice(-1),K=document.activeElement;for(const W of S)if(W===K||(W==null||W.scrollIntoView({block:"nearest"}),W===T&&k&&(k.scrollTop=0),W===R&&k&&(k.scrollTop=k.scrollHeight),W==null||W.focus(),document.activeElement!==K))return},[$,k]),he=x.useCallback(()=>ee([P,b]),[ee,P,b]);x.useEffect(()=>{G&&he()},[G,he]);const{onOpenChange:V,triggerPointerDownPosRef:F}=y;x.useEffect(()=>{if(b){let S={x:0,y:0};const T=R=>{var K,W;S={x:Math.abs(Math.round(R.pageX)-(((K=F.current)==null?void 0:K.x)??0)),y:Math.abs(Math.round(R.pageY)-(((W=F.current)==null?void 0:W.y)??0))}},N=R=>{S.x<=10&&S.y<=10?R.preventDefault():b.contains(R.target)||V(!1),document.removeEventListener("pointermove",T),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",T),document.addEventListener("pointerup",N,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",N,{capture:!0})}}},[b,V,F]),x.useEffect(()=>{const S=()=>V(!1);return window.addEventListener("blur",S),window.addEventListener("resize",S),()=>{window.removeEventListener("blur",S),window.removeEventListener("resize",S)}},[V]);const[ne,_e]=ZB(S=>{const T=$().filter(K=>!K.disabled),N=T.find(K=>K.ref.current===document.activeElement),R=JB(T,S,N);R&&setTimeout(()=>R.ref.current.focus())}),Z=x.useCallback((S,T,N)=>{const R=!X.current&&!N;(y.value!==void 0&&y.value===T||R)&&(M(S),R&&(X.current=!0))},[y.value]),ue=x.useCallback(()=>b==null?void 0:b.focus(),[b]),I=x.useCallback((S,T,N)=>{const R=!X.current&&!N;(y.value!==void 0&&y.value===T||R)&&L(S)},[y.value]),O=i==="popper"?F_:BB,B=O===F_?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:w}:{};return g.jsx(FB,{scope:n,content:b,viewport:k,onViewportChange:C,itemRefCallback:Z,selectedItem:P,onItemLeave:ue,itemTextRefCallback:I,focusSelectedItem:he,selectedItemText:D,position:i,isPositioned:G,searchRef:ne,children:g.jsx(G0,{as:Au,allowPinchZoom:!0,children:g.jsx(B0,{asChild:!0,trapped:y.open,onMountAutoFocus:S=>{S.preventDefault()},onUnmountAutoFocus:ve(r,S=>{var T;(T=y.trigger)==null||T.focus({preventScroll:!0}),S.preventDefault()}),children:g.jsx(Zp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:S=>S.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:g.jsx(O,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:S=>S.preventDefault(),...v,...B,onPlaced:()=>z(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ve(v.onKeyDown,S=>{const T=S.ctrlKey||S.altKey||S.metaKey;if(S.key==="Tab"&&S.preventDefault(),!T&&S.key.length===1&&_e(S.key),["ArrowUp","ArrowDown","Home","End"].includes(S.key)){let R=$().filter(K=>!K.disabled).map(K=>K.ref.current);if(["ArrowUp","End"].includes(S.key)&&(R=R.slice().reverse()),["ArrowUp","ArrowDown"].includes(S.key)){const K=S.target,W=R.indexOf(K);R=R.slice(W+1)}setTimeout(()=>ee(R)),S.preventDefault()}})})})})})})});$B.displayName=qse;var Yse="SelectItemAlignedPosition",BB=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=Tl(zu,n),o=Rl(zu,n),[a,l]=x.useState(null),[u,c]=x.useState(null),d=ct(e,E=>c(E)),h=xw(n),f=x.useRef(!1),p=x.useRef(!0),{viewport:m,selectedItem:w,selectedItemText:v,focusSelectedItem:y}=o,b=x.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&m&&w&&v){const E=s.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),M=s.valueNode.getBoundingClientRect(),D=v.getBoundingClientRect();if(s.dir!=="rtl"){const K=D.left-P.left,W=M.left-K,te=E.left-W,q=E.width+te,Re=Math.max(q,P.width),je=window.innerWidth-qr,Be=qy(W,[qr,Math.max(qr,je-Re)]);a.style.minWidth=q+"px",a.style.left=Be+"px"}else{const K=P.right-D.right,W=window.innerWidth-M.right-K,te=window.innerWidth-E.right-W,q=E.width+te,Re=Math.max(q,P.width),je=window.innerWidth-qr,Be=qy(W,[qr,Math.max(qr,je-Re)]);a.style.minWidth=q+"px",a.style.right=Be+"px"}const L=h(),$=window.innerHeight-qr*2,G=m.scrollHeight,z=window.getComputedStyle(u),X=parseInt(z.borderTopWidth,10),ee=parseInt(z.paddingTop,10),he=parseInt(z.borderBottomWidth,10),V=parseInt(z.paddingBottom,10),F=X+ee+G+V+he,ne=Math.min(w.offsetHeight*5,F),_e=window.getComputedStyle(m),Z=parseInt(_e.paddingTop,10),ue=parseInt(_e.paddingBottom,10),I=E.top+E.height/2-qr,O=$-I,B=w.offsetHeight/2,S=w.offsetTop+B,T=X+ee+S,N=F-T;if(T<=I){const K=L.length>0&&w===L[L.length-1].ref.current;a.style.bottom="0px";const W=u.clientHeight-m.offsetTop-m.offsetHeight,te=Math.max(O,B+(K?ue:0)+W+he),q=T+te;a.style.height=q+"px"}else{const K=L.length>0&&w===L[0].ref.current;a.style.top="0px";const te=Math.max(I,X+m.offsetTop+(K?Z:0)+B)+N;a.style.height=te+"px",m.scrollTop=T-I+m.offsetTop}a.style.margin=`${qr}px 0`,a.style.minHeight=ne+"px",a.style.maxHeight=$+"px",i==null||i(),requestAnimationFrame(()=>f.current=!0)}},[h,s.trigger,s.valueNode,a,u,m,w,v,s.dir,i]);ti(()=>b(),[b]);const[_,k]=x.useState();ti(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const C=x.useCallback(E=>{E&&p.current===!0&&(b(),y==null||y(),p.current=!1)},[b,y]);return g.jsx(Jse,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:C,children:g.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:g.jsx(He.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});BB.displayName=Yse;var Zse="SelectPopperPosition",F_=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=qr,...s}=t,o=Sw(n);return g.jsx(JC,{...o,...s,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});F_.displayName=Zse;var[Jse,aA]=qd(zu,{}),$_="SelectViewport",zB=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,s=Rl($_,n),o=aA($_,n),a=ct(e,s.onViewportChange),l=x.useRef(0);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),g.jsx(bw.Slot,{scope:n,children:g.jsx(He.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:ve(r.onScroll,u=>{const c=u.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&d){const f=Math.abs(l.current-c.scrollTop);if(f>0){const p=window.innerHeight-qr*2,m=parseFloat(d.style.minHeight),w=parseFloat(d.style.height),v=Math.max(m,w);if(v<p){const y=v+f,b=Math.min(p,y),_=y-b;d.style.height=b+"px",d.style.bottom==="0px"&&(c.scrollTop=_>0?_:0,d.style.justifyContent="flex-end")}}}l.current=c.scrollTop})})})]})});zB.displayName=$_;var UB="SelectGroup",[Qse,eoe]=qd(UB),toe=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=il();return g.jsx(Qse,{scope:n,id:r,children:g.jsx(He.div,{role:"group","aria-labelledby":r,...i,ref:e})})});toe.displayName=UB;var HB="SelectLabel",noe=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=eoe(HB,n);return g.jsx(He.div,{id:r.id,...i,ref:e})});noe.displayName=HB;var Yy="SelectItem",[ioe,VB]=qd(Yy),WB=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=Tl(Yy,n),l=Rl(Yy,n),u=a.value===i,[c,d]=x.useState(s??""),[h,f]=x.useState(!1),p=ct(e,y=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,y,i,r)}),m=il(),w=x.useRef("touch"),v=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g.jsx(ioe,{scope:n,value:i,disabled:r,textId:m,isSelected:u,onItemTextChange:x.useCallback(y=>{d(b=>b||((y==null?void 0:y.textContent)??"").trim())},[]),children:g.jsx(bw.ItemSlot,{scope:n,value:i,disabled:r,textValue:c,children:g.jsx(He.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:p,onFocus:ve(o.onFocus,()=>f(!0)),onBlur:ve(o.onBlur,()=>f(!1)),onClick:ve(o.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:ve(o.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:ve(o.onPointerDown,y=>{w.current=y.pointerType}),onPointerMove:ve(o.onPointerMove,y=>{var b;w.current=y.pointerType,r?(b=l.onItemLeave)==null||b.call(l):w.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ve(o.onPointerLeave,y=>{var b;y.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:ve(o.onKeyDown,y=>{var _;((_=l.searchRef)==null?void 0:_.current)!==""&&y.key===" "||(Use.includes(y.key)&&v(),y.key===" "&&y.preventDefault())})})})})});WB.displayName=Yy;var Gh="SelectItemText",GB=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=Tl(Gh,n),a=Rl(Gh,n),l=VB(Gh,n),u=Gse(Gh,n),[c,d]=x.useState(null),h=ct(e,v=>d(v),l.onItemTextChange,v=>{var y;return(y=a.itemTextRefCallback)==null?void 0:y.call(a,v,l.value,l.disabled)}),f=c==null?void 0:c.textContent,p=x.useMemo(()=>g.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:m,onNativeOptionRemove:w}=u;return ti(()=>(m(p),()=>w(p)),[m,w,p]),g.jsxs(g.Fragment,{children:[g.jsx(He.span,{id:l.textId,...s,ref:h}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Cl.createPortal(s.children,o.valueNode):null]})});GB.displayName=Gh;var KB="SelectItemIndicator",roe=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return VB(KB,n).isSelected?g.jsx(He.span,{"aria-hidden":!0,...i,ref:e}):null});roe.displayName=KB;var B_="SelectScrollUpButton",soe=x.forwardRef((t,e)=>{const n=Rl(B_,t.__scopeSelect),i=aA(B_,t.__scopeSelect),[r,s]=x.useState(!1),o=ct(e,i.onScrollButtonChange);return ti(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollTop>0;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?g.jsx(XB,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});soe.displayName=B_;var z_="SelectScrollDownButton",ooe=x.forwardRef((t,e)=>{const n=Rl(z_,t.__scopeSelect),i=aA(z_,t.__scopeSelect),[r,s]=x.useState(!1),o=ct(e,i.onScrollButtonChange);return ti(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,c=Math.ceil(l.scrollTop)<u;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?g.jsx(XB,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});ooe.displayName=z_;var XB=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,s=Rl("SelectScrollButton",n),o=x.useRef(null),a=xw(n),l=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),ti(()=>{var c;const u=a().find(d=>d.ref.current===document.activeElement);(c=u==null?void 0:u.ref.current)==null||c.scrollIntoView({block:"nearest"})},[a]),g.jsx(He.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:ve(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:ve(r.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:ve(r.onPointerLeave,()=>{l()})})}),aoe="SelectSeparator",loe=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return g.jsx(He.div,{"aria-hidden":!0,...i,ref:e})});loe.displayName=aoe;var U_="SelectArrow",uoe=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Sw(n),s=Tl(U_,n),o=Rl(U_,n);return s.open&&o.position==="popper"?g.jsx(QC,{...r,...i,ref:e}):null});uoe.displayName=U_;function qB(t){return t===""||t===void 0}var YB=x.forwardRef((t,e)=>{const{value:n,...i}=t,r=x.useRef(null),s=ct(e,r),o=oA(n);return x.useEffect(()=>{const a=r.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&c){const d=new Event("change",{bubbles:!0});c.call(a,n),a.dispatchEvent(d)}},[o,n]),g.jsx(ww,{asChild:!0,children:g.jsx("select",{...i,ref:s,defaultValue:n})})});YB.displayName="BubbleSelect";function ZB(t){const e=ni(t),n=x.useRef(""),i=x.useRef(0),r=x.useCallback(o=>{const a=n.current+o;e(a),function l(u){n.current=u,window.clearTimeout(i.current),u!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=x.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function JB(t,e,n){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=coe(t,Math.max(s,0));r.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function coe(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var doe=RB,QB=NB,hoe=IB,foe=DB,poe=LB,e4=jB,moe=zB,t4=WB,goe=GB;const kg=doe,Cg=hoe,Kh=x.forwardRef(({className:t,children:e,...n},i)=>g.jsxs(QB,{ref:i,className:$e("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,g.jsx(foe,{asChild:!0,children:g.jsx("span",{className:"icon-[lucide--chevron-down] h-4 w-4 opacity-50"})})]}));Kh.displayName=QB.displayName;const Xh=x.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>g.jsx(poe,{children:g.jsx(e4,{ref:r,className:$e("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:g.jsx(moe,{className:"p-1",children:e})})}));Xh.displayName=e4.displayName;const Xl=x.forwardRef(({className:t,children:e,...n},i)=>g.jsx(t4,{ref:i,className:$e("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:g.jsx(goe,{children:e})}));Xl.displayName=t4.displayName;var n4=["PageUp","PageDown"],i4=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],r4={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Yd="Slider",[H_,voe,yoe]=Up(Yd),[s4,tfe]=El(Yd,[yoe]),[woe,_w]=s4(Yd),o4=x.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[i],value:c,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:f=!1,form:p,...m}=t,w=x.useRef(new Set),v=x.useRef(0),b=o==="horizontal"?boe:xoe,[_=[],k]=zo({prop:c,defaultProp:u,onChange:L=>{var G;(G=[...w.current][v.current])==null||G.focus(),d(L)}}),C=x.useRef(_);function E(L){const $=Eoe(_,L);D(L,$)}function P(L){D(L,v.current)}function M(){const L=C.current[v.current];_[v.current]!==L&&h(_)}function D(L,$,{commit:G}={commit:!1}){const z=Roe(s),X=Moe(Math.round((L-i)/s)*s+i,z),ee=qy(X,[i,r]);k((he=[])=>{const V=koe(he,ee,$);if(Toe(V,l*s)){v.current=V.indexOf(ee);const F=String(V)!==String(he);return F&&G&&h(V),F?V:he}else return he})}return g.jsx(woe,{scope:t.__scopeSlider,name:n,disabled:a,min:i,max:r,valueIndexToChangeRef:v,thumbs:w.current,values:_,orientation:o,form:p,children:g.jsx(H_.Provider,{scope:t.__scopeSlider,children:g.jsx(H_.Slot,{scope:t.__scopeSlider,children:g.jsx(b,{"aria-disabled":a,"data-disabled":a?"":void 0,...m,ref:e,onPointerDown:ve(m.onPointerDown,()=>{a||(C.current=_)}),min:i,max:r,inverted:f,onSlideStart:a?void 0:E,onSlideMove:a?void 0:P,onSlideEnd:a?void 0:M,onHomeKeyDown:()=>!a&&D(i,0,{commit:!0}),onEndKeyDown:()=>!a&&D(r,_.length-1,{commit:!0}),onStepKeyDown:({event:L,direction:$})=>{if(!a){const X=n4.includes(L.key)||L.shiftKey&&i4.includes(L.key)?10:1,ee=v.current,he=_[ee],V=s*X*$;D(he+V,ee,{commit:!0})}}})})})})});o4.displayName=Yd;var[a4,l4]=s4(Yd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),boe=x.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:u,...c}=t,[d,h]=x.useState(null),f=ct(e,b=>h(b)),p=x.useRef(),m=Hp(r),w=m==="ltr",v=w&&!s||!w&&s;function y(b){const _=p.current||d.getBoundingClientRect(),k=[0,_.width],E=lA(k,v?[n,i]:[i,n]);return p.current=_,E(b-_.left)}return g.jsx(a4,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:g.jsx(u4,{dir:m,"data-orientation":"horizontal",...c,ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const _=y(b.clientX);o==null||o(_)},onSlideMove:b=>{const _=y(b.clientX);a==null||a(_)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:b=>{const k=r4[v?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:k?-1:1})}})})}),xoe=x.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...u}=t,c=x.useRef(null),d=ct(e,c),h=x.useRef(),f=!r;function p(m){const w=h.current||c.current.getBoundingClientRect(),v=[0,w.height],b=lA(v,f?[i,n]:[n,i]);return h.current=w,b(m-w.top)}return g.jsx(a4,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:g.jsx(u4,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const w=p(m.clientY);s==null||s(w)},onSlideMove:m=>{const w=p(m.clientY);o==null||o(w)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:m=>{const v=r4[f?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:v?-1:1})}})})}),u4=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...u}=t,c=_w(Yd,n);return g.jsx(He.span,{...u,ref:e,onKeyDown:ve(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):n4.concat(i4).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ve(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),c.thumbs.has(h)?h.focus():i(d)}),onPointerMove:ve(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:ve(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})})}),c4="SliderTrack",d4=x.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=_w(c4,n);return g.jsx(He.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});d4.displayName=c4;var V_="SliderRange",h4=x.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=_w(V_,n),s=l4(V_,n),o=x.useRef(null),a=ct(e,o),l=r.values.length,u=r.values.map(h=>p4(h,r.min,r.max)),c=l>1?Math.min(...u):0,d=100-Math.max(...u);return g.jsx(He.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:c+"%",[s.endEdge]:d+"%"}})});h4.displayName=V_;var W_="SliderThumb",f4=x.forwardRef((t,e)=>{const n=voe(t.__scopeSlider),[i,r]=x.useState(null),s=ct(e,a=>r(a)),o=x.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return g.jsx(Soe,{...t,ref:s,index:o})}),Soe=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,name:r,...s}=t,o=_w(W_,n),a=l4(W_,n),[l,u]=x.useState(null),c=ct(e,y=>u(y)),d=l?o.form||!!l.closest("form"):!0,h=XC(l),f=o.values[i],p=f===void 0?0:p4(f,o.min,o.max),m=Coe(i,o.values.length),w=h==null?void 0:h[a.size],v=w?Aoe(w,p,a.direction):0;return x.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),g.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${p}% + ${v}px)`},children:[g.jsx(H_.ItemSlot,{scope:t.__scopeSlider,children:g.jsx(He.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":o.min,"aria-valuenow":f,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:c,style:f===void 0?{display:"none"}:t.style,onFocus:ve(t.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),d&&g.jsx(_oe,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:f},i)]})});f4.displayName=W_;var _oe=t=>{const{value:e,...n}=t,i=x.useRef(null),r=oA(e);return x.useEffect(()=>{const s=i.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(r!==e&&l){const u=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(u)}},[r,e]),g.jsx("input",{style:{display:"none"},...n,ref:i,defaultValue:e})};function koe(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function p4(t,e,n){const s=100/(n-e)*(t-e);return qy(s,[0,100])}function Coe(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Eoe(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function Aoe(t,e,n){const i=t/2,s=lA([0,50],[0,i]);return(i-s(e)*n)*n}function Poe(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Toe(t,e){if(e>0){const n=Poe(t);return Math.min(...n)>=e}return!0}function lA(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function Roe(t){return(String(t).split(".")[1]||"").length}function Moe(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var m4=o4,Noe=d4,Ooe=h4,Ioe=f4;const ql=x.forwardRef(({className:t,...e},n)=>g.jsxs(m4,{ref:n,className:$e("relative flex touch-none select-none items-center",t),...e,children:[g.jsx(Noe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:g.jsx(Ooe,{className:"absolute h-full bg-mantis-400"})}),g.jsx(Ioe,{className:"block h-5 w-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ql.displayName=m4.displayName;var uA="Switch",[Doe,nfe]=El(uA),[Loe,joe]=Doe(uA),g4=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:u,form:c,...d}=t,[h,f]=x.useState(null),p=ct(e,b=>f(b)),m=x.useRef(!1),w=h?c||!!h.closest("form"):!0,[v=!1,y]=zo({prop:r,defaultProp:s,onChange:u});return g.jsxs(Loe,{scope:n,checked:v,disabled:a,children:[g.jsx(He.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":w4(v),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:p,onClick:ve(t.onClick,b=>{y(_=>!_),w&&(m.current=b.isPropagationStopped(),m.current||b.stopPropagation())})}),w&&g.jsx(Foe,{control:h,bubbles:!m.current,name:i,value:l,checked:v,required:o,disabled:a,form:c,style:{transform:"translateX(-100%)"}})]})});g4.displayName=uA;var v4="SwitchThumb",y4=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=joe(v4,n);return g.jsx(He.span,{"data-state":w4(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})});y4.displayName=v4;var Foe=t=>{const{control:e,checked:n,bubbles:i=!0,...r}=t,s=x.useRef(null),o=oA(n),a=XC(e);return x.useEffect(()=>{const l=s.current,u=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&d){const h=new Event("click",{bubbles:i});d.call(l,n),l.dispatchEvent(h)}},[o,n,i]),g.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function w4(t){return t?"checked":"unchecked"}var b4=g4,$oe=y4;const pa=x.forwardRef(({className:t,...e},n)=>g.jsx(b4,{className:$e("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:g.jsx($oe,{className:$e("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));pa.displayName=b4.displayName;const cA=me(!1);function x4({className:t}){const e=wt(),[n,i]=im(),{status:r}=Rn();return g.jsxs("div",{className:$e("overflow-auto scrollbar-stone-700",t),children:[g.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[g.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),g.jsxs(si,{children:[g.jsxs(oi,{children:[g.jsxs(ai,{children:[g.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),g.jsx(Sh,{children:e("settings.animations.description")})]}),g.jsx(pa,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&tB()}})]}),g.jsxs(si,{children:[g.jsx(oi,{children:g.jsxs(ai,{children:[g.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),g.jsx(ql,{className:"w-44",...S1({value:n.executionUnit,onValueChange:s=>i(o=>({...o,executionUnit:s})),min:500,max:1})})]}),g.jsx("hr",{className:"border-stone-600"}),g.jsxs(si,{children:[g.jsx(oi,{children:g.jsx(ai,{children:e("settings.instructionCycle.label")})}),g.jsx(pa,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>i(o=>({...o,showInstructionCycle:s}))})]}),g.jsxs(si,{children:[g.jsx(oi,{children:g.jsx(ai,{children:e("settings.statsCPU.label")})}),g.jsx(pa,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>i(o=>({...o,showStatsCPU:s}))})]}),g.jsx("hr",{className:"border-stone-600"}),g.jsx(si,{children:g.jsxs(oi,{children:[g.jsxs(ai,{children:[g.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),g.jsx(Sh,{children:e("settings.devices.description")})]})}),g.jsxs(si,{children:[g.jsx(oi,{children:g.jsx(ai,{children:e("settings.devices.keyboard-and-screen")})}),g.jsx(pa,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),g.jsxs(si,{children:[g.jsxs(oi,{children:[g.jsx(ai,{children:e("settings.devices.pic.label")}),g.jsx(Sh,{children:e("settings.devices.pic.description")})]}),g.jsx(pa,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,pic:s}}))})]}),g.jsxs(si,{children:[g.jsx(oi,{children:g.jsxs(ai,{children:[g.jsx("span",{className:"icon-[lucide--clock] size-6"}),e("settings.speeds.clockSpeed")]})}),g.jsx(ql,{className:"w-44",...S1({value:n.clockSpeed,onValueChange:s=>i(o=>({...o,clockSpeed:s})),min:3e3,max:100})})]}),g.jsxs(si,{children:[g.jsx(oi,{children:g.jsx(ai,{children:e("settings.devices.pio.label")})}),g.jsxs(kg,{value:n.devices.pio??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[g.jsx(Kh,{className:"w-52 min-w-[theme(width.52)]",children:g.jsx(Cg,{})}),g.jsx(Xh,{children:$Z.map(s=>g.jsx(Xl,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),g.jsxs(si,{children:[g.jsx(oi,{children:g.jsx(ai,{children:e("settings.devices.handshake.label")})}),g.jsxs(kg,{value:n.devices.handshake??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:r.type!=="stopped",children:[g.jsx(Kh,{className:"w-52 min-w-[theme(width.52)]",children:g.jsx(Cg,{})}),g.jsx(Xh,{children:BZ.map(s=>g.jsx(Xl,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),g.jsxs(si,{children:[g.jsx(oi,{children:g.jsxs(ai,{children:[g.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),g.jsx(ql,{className:"w-44",...S1({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),g.jsx("hr",{className:"border-stone-600"}),g.jsxs(si,{children:[g.jsxs(oi,{children:[g.jsxs(ai,{children:[g.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),g.jsx(Sh,{children:e("settings.flags.description")})]}),g.jsxs(kg,{value:n.flagsVisibility,onValueChange:s=>i(o=>({...o,flagsVisibility:s})),children:[g.jsx(Kh,{className:"w-32",children:g.jsx(Cg,{})}),g.jsxs(Xh,{children:[g.jsx(Xl,{value:"CF_ZF",children:"C Z"}),g.jsx(Xl,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),g.jsx("hr",{className:"border-stone-600"}),g.jsxs(si,{children:[g.jsx(oi,{children:g.jsxs(ai,{children:[g.jsx("span",{className:"icon-[lucide--languages] size-6"}),e("settings.language.label")]})}),g.jsxs(kg,{value:n.language,onValueChange:s=>i(o=>({...o,language:s})),children:[g.jsx(Kh,{className:"w-32",children:g.jsx(Cg,{})}),g.jsxs(Xh,{children:[g.jsx(Xl,{value:"en",children:g.jsxs("span",{className:"inline-flex items-center gap-2",children:[g.jsx("span",{className:"icon-[circle-flags--uk] size-4"})," English"]})}),g.jsx(Xl,{value:"es",children:g.jsxs("span",{className:"inline-flex items-center gap-2",children:[g.jsx("span",{className:"icon-[circle-flags--ar] size-4"})," Espaol"]})})]})]})]}),g.jsxs(si,{children:[g.jsx(oi,{children:g.jsxs(ai,{children:[g.jsx("span",{className:"icon-[lucide--pilcrow-square] size-6"}),e("settings.editorFontSize.label")]})}),g.jsxs("div",{className:"flex items-center rounded-lg border border-stone-600 bg-stone-900",children:[g.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize<=8,onClick:()=>i(s=>({...s,editorFontSize:s.editorFontSize-1})),title:e("settings.editorFontSize.decrease"),children:g.jsx("span",{className:"icon-[lucide--minus] size-4"})}),g.jsx("span",{className:"w-8 text-center text-sm font-normal",children:n.editorFontSize}),g.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize>=64,onClick:()=>i(s=>({...s,editorFontSize:s.editorFontSize+1})),title:e("settings.editorFontSize.increase"),children:g.jsx("span",{className:"icon-[lucide--plus] size-4"})})]})]}),g.jsx("hr",{className:"border-stone-600"}),g.jsxs(si,{children:[g.jsxs(oi,{children:[g.jsxs(ai,{children:[g.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),g.jsxs(Sh,{children:[e("settings.filters.description"),g.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:uc.filterBightness,filterContrast:uc.filterContrast,filterInvert:uc.filterInvert,filterSaturation:uc.filterSaturation})),children:e("settings.filters.revert")})]})]}),g.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[g.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),g.jsx(ql,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),g.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),g.jsx(ql,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),g.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),g.jsx(pa,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),g.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),g.jsx(ql,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),g.jsx("hr",{className:"border-stone-600"}),g.jsx("div",{className:"flex justify-end p-4",children:g.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...uc,language:s.language,devices:s.devices})),children:[g.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function si({children:t}){return g.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function oi({children:t}){return g.jsx("div",{className:"grow",children:t})}function ai({children:t}){return g.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function Sh({children:t}){return g.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function S1({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}function Boe(){const t=wt(),[e,n]=Vp(cA);return g.jsxs("header",{className:"relative p-2 text-sm text-white",children:[g.jsx($se,{className:" absolute inset-0"}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex select-none items-center justify-center",children:[g.jsx("img",{src:"/VonSim8/favicon.svg",className:"mr-2 h-10 w-10"}),g.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",g.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]})]}),g.jsx("button",{className:$e("h-min w-min rounded-full p-2 transition-colors focus:outline-stone-400",e?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:t("settings.title"),onClick:()=>n(!e),children:g.jsx("span",{className:"icon-[lucide--settings] block h-6 w-6"})})]})]})}var dA="ToastProvider",[hA,zoe,Uoe]=Up("Toast"),[S4,ife]=El("Toast",[Uoe]),[Hoe,kw]=S4(dA),_4=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=x.useState(null),[u,c]=x.useState(0),d=x.useRef(!1),h=x.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${dA}\`. Expected non-empty \`string\`.`),g.jsx(hA.Provider,{scope:e,children:g.jsx(Hoe,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:x.useCallback(()=>c(f=>f+1),[]),onToastRemove:x.useCallback(()=>c(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};_4.displayName=dA;var k4="ToastViewport",Voe=["F8"],G_="toast.viewportPause",K_="toast.viewportResume",C4=x.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=Voe,label:r="Notifications ({hotkey})",...s}=t,o=kw(k4,n),a=zoe(n),l=x.useRef(null),u=x.useRef(null),c=x.useRef(null),d=x.useRef(null),h=ct(e,d,o.onViewportChange),f=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;x.useEffect(()=>{const w=v=>{var b;i.length!==0&&i.every(_=>v[_]||v.code===_)&&((b=d.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[i]),x.useEffect(()=>{const w=l.current,v=d.current;if(p&&w&&v){const y=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(G_);v.dispatchEvent(C),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(K_);v.dispatchEvent(C),o.isClosePausedRef.current=!1}},_=C=>{!w.contains(C.relatedTarget)&&b()},k=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",y),w.addEventListener("focusout",_),w.addEventListener("pointermove",y),w.addEventListener("pointerleave",k),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",y),w.removeEventListener("focusout",_),w.removeEventListener("pointermove",y),w.removeEventListener("pointerleave",k),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[p,o.isClosePausedRef]);const m=x.useCallback(({tabbingDirection:w})=>{const y=a().map(b=>{const _=b.ref.current,k=[_,...iae(_)];return w==="forwards"?k:k.reverse()});return(w==="forwards"?y.reverse():y).flat()},[a]);return x.useEffect(()=>{const w=d.current;if(w){const v=y=>{var k,C,E;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const P=document.activeElement,M=y.shiftKey;if(y.target===w&&M){(k=u.current)==null||k.focus();return}const $=m({tabbingDirection:M?"backwards":"forwards"}),G=$.findIndex(z=>z===P);_1($.slice(G+1))?y.preventDefault():M?(C=u.current)==null||C.focus():(E=c.current)==null||E.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[a,m]),g.jsxs(xK,{ref:l,role:"region","aria-label":r.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&g.jsx(X_,{ref:u,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"forwards"});_1(w)}}),g.jsx(hA.Slot,{scope:n,children:g.jsx(He.ol,{tabIndex:-1,...s,ref:h})}),p&&g.jsx(X_,{ref:c,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"backwards"});_1(w)}})]})});C4.displayName=k4;var E4="ToastFocusProxy",X_=x.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=kw(E4,n);return g.jsx(ww,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(a))&&i()}})});X_.displayName=E4;var Cw="Toast",Woe="toast.swipeStart",Goe="toast.swipeMove",Koe="toast.swipeCancel",Xoe="toast.swipeEnd",A4=x.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a=!0,l]=zo({prop:i,defaultProp:r,onChange:s});return g.jsx(qo,{present:n||a,children:g.jsx(Zoe,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:ni(t.onPause),onResume:ni(t.onResume),onSwipeStart:ve(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ve(t.onSwipeMove,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ve(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ve(t.onSwipeEnd,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});A4.displayName=Cw;var[qoe,Yoe]=S4(Cw,{onClose(){}}),Zoe=x.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:c,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:f,...p}=t,m=kw(Cw,n),[w,v]=x.useState(null),y=ct(e,z=>v(z)),b=x.useRef(null),_=x.useRef(null),k=r||m.duration,C=x.useRef(0),E=x.useRef(k),P=x.useRef(0),{onToastAdd:M,onToastRemove:D}=m,L=ni(()=>{var X;(w==null?void 0:w.contains(document.activeElement))&&((X=m.viewport)==null||X.focus()),o()}),$=x.useCallback(z=>{!z||z===1/0||(window.clearTimeout(P.current),C.current=new Date().getTime(),P.current=window.setTimeout(L,z))},[L]);x.useEffect(()=>{const z=m.viewport;if(z){const X=()=>{$(E.current),u==null||u()},ee=()=>{const he=new Date().getTime()-C.current;E.current=E.current-he,window.clearTimeout(P.current),l==null||l()};return z.addEventListener(G_,ee),z.addEventListener(K_,X),()=>{z.removeEventListener(G_,ee),z.removeEventListener(K_,X)}}},[m.viewport,k,l,u,$]),x.useEffect(()=>{s&&!m.isClosePausedRef.current&&$(k)},[s,k,m.isClosePausedRef,$]),x.useEffect(()=>(M(),()=>D()),[M,D]);const G=x.useMemo(()=>w?I4(w):null,[w]);return m.viewport?g.jsxs(g.Fragment,{children:[G&&g.jsx(Joe,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),g.jsx(qoe,{scope:n,onClose:L,children:Cl.createPortal(g.jsx(hA.ItemSlot,{scope:n,children:g.jsx(bK,{asChild:!0,onEscapeKeyDown:ve(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||L(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:g.jsx(He.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...p,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ve(t.onKeyDown,z=>{z.key==="Escape"&&(a==null||a(z.nativeEvent),z.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:ve(t.onPointerDown,z=>{z.button===0&&(b.current={x:z.clientX,y:z.clientY})}),onPointerMove:ve(t.onPointerMove,z=>{if(!b.current)return;const X=z.clientX-b.current.x,ee=z.clientY-b.current.y,he=!!_.current,V=["left","right"].includes(m.swipeDirection),F=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,ne=V?F(0,X):0,_e=V?0:F(0,ee),Z=z.pointerType==="touch"?10:2,ue={x:ne,y:_e},I={originalEvent:z,delta:ue};he?(_.current=ue,Eg(Goe,d,I,{discrete:!1})):KM(ue,m.swipeDirection,Z)?(_.current=ue,Eg(Woe,c,I,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(X)>Z||Math.abs(ee)>Z)&&(b.current=null)}),onPointerUp:ve(t.onPointerUp,z=>{const X=_.current,ee=z.target;if(ee.hasPointerCapture(z.pointerId)&&ee.releasePointerCapture(z.pointerId),_.current=null,b.current=null,X){const he=z.currentTarget,V={originalEvent:z,delta:X};KM(X,m.swipeDirection,m.swipeThreshold)?Eg(Xoe,f,V,{discrete:!0}):Eg(Koe,h,V,{discrete:!0}),he.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),Joe=t=>{const{__scopeToast:e,children:n,...i}=t,r=kw(Cw,e),[s,o]=x.useState(!1),[a,l]=x.useState(!1);return tae(()=>o(!0)),x.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:g.jsx(Qp,{asChild:!0,children:g.jsx(ww,{...i,children:s&&g.jsxs(g.Fragment,{children:[r.label," ",n]})})})},Qoe="ToastTitle",P4=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return g.jsx(He.div,{...i,ref:e})});P4.displayName=Qoe;var eae="ToastDescription",T4=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return g.jsx(He.div,{...i,ref:e})});T4.displayName=eae;var R4="ToastAction",M4=x.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?g.jsx(O4,{altText:n,asChild:!0,children:g.jsx(fA,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${R4}\`. Expected non-empty \`string\`.`),null)});M4.displayName=R4;var N4="ToastClose",fA=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=Yoe(N4,n);return g.jsx(O4,{asChild:!0,children:g.jsx(He.button,{type:"button",...i,ref:e,onClick:ve(t.onClick,r.onClose)})})});fA.displayName=N4;var O4=x.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return g.jsx(He.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function I4(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),nae(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...I4(i))}}),e}function Eg(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?yC(r,s):r.dispatchEvent(s)}var KM=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function tae(t=()=>{}){const e=ni(t);ti(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function nae(t){return t.nodeType===t.ELEMENT_NODE}function iae(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function _1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var rae=_4,D4=C4,L4=A4,j4=P4,F4=T4,$4=M4,B4=fA;const sae=rae,z4=x.forwardRef(({className:t,...e},n)=>g.jsx(D4,{ref:n,className:$e("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));z4.displayName=D4.displayName;const U4=x.forwardRef(({className:t,variant:e="default",...n},i)=>g.jsx(L4,{ref:i,"data-variant":e,className:$e("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-bottom-full data-[state=open]:slide-in-from-top-full",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"group bg-red-900 text-red-50",e==="info"&&"border border-green-500 border-stone-600 bg-stone-900 text-white",t),...n}));U4.displayName=L4.displayName;const H4=x.forwardRef(({className:t,...e},n)=>g.jsx($4,{ref:n,className:$e("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));H4.displayName=$4.displayName;const V4=x.forwardRef(({className:t,...e},n)=>g.jsx(B4,{ref:n,className:$e("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-data-[variant=error]:text-red-300 group-data-[variant=error]:hover:text-red-50 group-data-[variant=error]:focus:ring-red-400 group-data-[variant=error]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:g.jsx("span",{className:"icon-[lucide--x] block h-4 w-4"})}));V4.displayName=B4.displayName;const W4=x.forwardRef(({className:t,...e},n)=>g.jsx(j4,{ref:n,className:$e("text-sm font-semibold",t),...e}));W4.displayName=j4.displayName;const G4=x.forwardRef(({className:t,...e},n)=>g.jsx(F4,{ref:n,className:$e("text-sm opacity-90",t),...e}));G4.displayName=F4.displayName;var Mr=function(t,e){return Number(t.toFixed(e))},oae=function(t,e){return e},Bt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},aae=function(t){return-Math.cos(t*Math.PI)/2+.5},lae=function(t){return t},uae=function(t){return t*t},cae=function(t){return t*(2-t)},dae=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},hae=function(t){return t*t*t},fae=function(t){return--t*t*t+1},pae=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},mae=function(t){return t*t*t*t},gae=function(t){return 1- --t*t*t*t},vae=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},yae=function(t){return t*t*t*t*t},wae=function(t){return 1+--t*t*t*t*t},bae=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},K4={easeOut:aae,linear:lae,easeInQuad:uae,easeOutQuad:cae,easeInOutQuad:dae,easeInCubic:hae,easeOutCubic:fae,easeInOutCubic:pae,easeInQuart:mae,easeOutQuart:gae,easeInOutQuart:vae,easeInQuint:yae,easeOutQuint:wae,easeInOutQuint:bae},X4=function(t){typeof t=="number"&&cancelAnimationFrame(t)},Us=function(t){t.mounted&&(X4(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function q4(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;Us(t),t.animation=function(){if(!t.mounted)return X4(t.animation);var o=new Date().getTime()-r,a=o/n,l=K4[e],u=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(u),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function xae(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function Ml(t,e,n,i){var r=xae(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=e.scale-a,d=e.positionX-l,h=e.positionY-u;n===0?s(e.scale,e.positionX,e.positionY):q4(t,i,n,function(f){var p=a+c*f,m=l+d*f,w=u+h*f;s(p,m,w)})}}function Sae(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,u=i-a,c=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:u,newContentHeight:l,newDiffHeight:c}}var _ae=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,u=t-e-a,c=a,d=i-r-l,h=l;return{minPositionX:u,maxPositionX:c,minPositionY:d,maxPositionY:h}},pA=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=Sae(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,u=s.newDiffWidth,c=s.newContentHeight,d=s.newDiffHeight,h=_ae(o,l,u,a,c,d,!!r);return h},q_=function(t,e,n,i){return i?t<e?Mr(e,2):t>n?Mr(n,2):Mr(t,2):Mr(t,2)},Id=function(t,e){var n=pA(t,e);return t.bounds=n,n};function cm(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,u=n.maxPositionX,c=n.maxPositionY,d=0,h=0;o&&(d=r,h=s);var f=q_(t,a-d,u+d,i),p=q_(e,l-h,c+h,i);return{x:f,y:p}}function Ew(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY,c=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:u};var d=l-e*c,h=u-n*c,f=cm(d,h,r,s,0,0,null);return f}function dm(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var XM=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(c){return c instanceof Element?r==null?void 0:r.contains(c):!1}):r==null?void 0:r.contains(s),l=i&&s&&a;if(!l)return!1;var u=Aw(s,n);return!u},qM=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},kae=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},Cae=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function Eae(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,u=t.wrapperComponent;if(!(o||!u||!t.bounds)){var c=t.bounds,d=c.maxPositionX,h=c.minPositionX,f=c.maxPositionY,p=c.minPositionY,m=n>d||n<h,w=i>f||i<p,v=n>d?u.offsetWidth:t.setup.minPositionX||0,y=i>f?u.offsetHeight:t.setup.minPositionY||0,b=Ew(t,v,y,r,t.bounds,a||l),_=b.x,k=b.y;return{scale:r,positionX:m?_:n,positionY:w?k:i}}}function Y4(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(!(o===null||a===null||e===c&&n===d)){var h=cm(e,n,a,s,i,r,o),f=h.x,p=h.y;t.setTransformState(u,f,p)}}var Aae=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,u=r.positionY;if(!i)return{x:l,y:u};var c=e-i.x,d=n-i.y,h=o?l:c,f=a?u:d;return{x:h,y:f}},wl=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},Pae=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},Tae=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,u=!l||a>1||!s||e;return!(!u||!n||!i)};function Rae(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function YM(t,e,n,i,r,s,o,a,l,u){if(r){if(e>o&&n>o){var c=o+(t-o)*u;return c>l?l:c<o?o:c}if(e<s&&n<s){var c=s+(t-s)*u;return c<a?a:c>s?s:c}}return i?e:q_(t,s,o,r)}function Mae(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function Nae(t,e){var n=Pae(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var u=Mae(o,a),c=e.x-i.x,d=e.y-i.y,h=c/u,f=d/u,p=l-r,m=c*c+d*d,w=Math.sqrt(m)/p;t.velocity={velocityX:h,velocityY:f,total:w}}t.lastMousePosition=e,t.velocityTime=l}}function Oae(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=Tae(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,u=n.maxPositionX,c=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,f=i.limitToBounds,p=i.alignmentAnimation,m=i.zoomAnimation,w=i.panning,v=w.lockAxisY,y=w.lockAxisX,b=m.animationType,_=p.sizeX,k=p.sizeY,C=p.velocityAlignmentTime,E=C,P=Rae(t,l),M=Math.max(P,E),D=wl(t,_),L=wl(t,k),$=D*r.offsetWidth/100,G=L*r.offsetHeight/100,z=u+$,X=c-$,ee=d+G,he=h-G,V=t.transformState,F=new Date().getTime();q4(t,b,M,function(ne){var _e=t.transformState,Z=_e.scale,ue=_e.positionX,I=_e.positionY,O=new Date().getTime()-F,B=O/E,S=K4[p.animationType],T=1-S(Math.min(1,B)),N=1-ne,R=ue+o*N,K=I+a*N,W=YM(R,V.positionX,ue,y,f,c,u,X,z,T),te=YM(K,V.positionY,I,v,f,h,d,he,ee,T);(ue!==R||I!==K)&&t.setTransformState(Z,W,te)})}}function ZM(t,e){var n=t.transformState.scale;Us(t),Id(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?Cae(t,e):kae(t,e)}function Z4(t){var e=t.transformState.scale,n=t.setup,i=n.minScale,r=n.alignmentAnimation,s=r.disabled,o=r.sizeX,a=r.sizeY,l=r.animationTime,u=r.animationType,c=s||e<i||!o&&!a;if(!c){var d=Eae(t);d&&Ml(t,d,l,u)}}function JM(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=Aae(t,e,n),u=l.x,c=l.y,d=wl(t,o),h=wl(t,a);Nae(t,{x:u,y:c}),Y4(t,u,c,d,h)}}function Iae(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,u=(o==null?void 0:o.width)||0,c=(o==null?void 0:o.height)||0,d=a<u||l<c,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?Oae(t):Z4(t)}}function mA(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=dm(Mr(e,2),s,o,0,!1),u=Id(t,l),c=Ew(t,n,i,l,u,a),d=c.x,h=c.y;return{scale:l,positionX:d,positionY:h}}function J4(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,u=l.disabled,c=l.animationTime,d=l.animationType,h=u||i>=o;if((i>=1||a)&&Z4(t),!(h||!r||!t.mounted)){var f=e||r.offsetWidth/2,p=n||r.offsetHeight/2,m=mA(t,o,f,p);m&&Ml(t,m,c,d)}}var Qa=function(){return Qa=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Qa.apply(this,arguments)};function QM(t,e,n){for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var Ag={previousScale:1,scale:1,positionX:0,positionY:0},_h={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},Y_={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},Q4=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Ag.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:Ag.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:Ag.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:Ag.positionY}},eN=function(t){var e=Qa({},_h);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof _h[n]<"u";if(r&&i){var s=Object.prototype.toString.call(_h[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=Qa(Qa({},_h[n]),t[n]):a?e[n]=QM(QM([],_h[n],!0),t[n]):e[n]=t[n]}}),e},ez=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,u=s.smooth,c=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=u?i*Math.exp(e*n):i+e*n,h=dm(Mr(d,3),a,o,c,!1);return h};function tz(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,u=o.positionY;if(!s)return console.error("No WrapperComponent found");var c=s.offsetWidth,d=s.offsetHeight,h=(c/2-l)/a,f=(d/2-u)/a,p=ez(t,e,n),m=mA(t,p,h,f);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");Ml(t,m,i,r)}function nz(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=Q4(t.props),l=t.transformState,u=l.scale,c=l.positionX,d=l.positionY;if(s){var h=pA(t,a.scale),f=cm(a.positionX,a.positionY,h,o,0,0,s),p={scale:a.scale,positionX:f.x,positionY:f.y};u===a.scale&&c===a.positionX&&d===a.positionY||(i==null||i(),Ml(t,p,e,n))}}function Dae(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function Lae(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,u=o.maxScale;if(!i||!r)return s;var c=i.getBoundingClientRect(),d=e.getBoundingClientRect(),h=Dae(e,i,r,s),f=h.x,p=h.y,m=d.width/s.scale,w=d.height/s.scale,v=i.offsetWidth/m,y=i.offsetHeight/w,b=dm(n||Math.min(v,y),l,u,0,!1),_=(c.width-m*b)/2,k=(c.height-w*b)/2,C=(c.left-f)*b+_,E=(c.top-p)*b+k,P=pA(t,b),M=cm(C,E,P,a,0,0,i),D=M.x,L=M.y;return{positionX:D,positionY:L,scale:b}}var jae=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),tz(t,1,e,n,i)}},Fae=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),tz(t,-1,e,n,i)}},$ae=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,u=o.scale,c=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!c||!d)){var f={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?u:i};Ml(t,f,r,s)}}},Bae=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),nz(t,e,n)}},zae=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=iz(e||r.scale,s,o);Ml(t,a,n,i)}}},Uae=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),Us(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=Lae(t,o,n);Ml(t,a,i,r)}}},Z_=function(t){return{instance:t,zoomIn:jae(t),zoomOut:Fae(t),setTransform:$ae(t),resetTransform:Bae(t),centerView:zae(t),zoomToElement:Uae(t)}},Hae=function(t){return{instance:t,state:t.transformState}},_t=function(t){var e={};return Object.assign(e,Hae(t)),Object.assign(e,Z_(t)),e},k1=!1;function C1(){try{var t={get passive(){return k1=!0,!1}};return t}catch{return k1=!1,k1}}var Pg=".".concat(Y_.wrapperClass),Aw=function(t,e){return e.some(function(n){return t.matches("".concat(Pg," ").concat(n,", ").concat(Pg," .").concat(n,", ").concat(Pg," ").concat(n," *, ").concat(Pg," .").concat(n," *"))})},J_=function(t){t&&clearTimeout(t)},Vae=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},iz=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function Wae(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Gae=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,u=e.target,c=a&&!l&&!i&&u;if(!c||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Aw(u,o);return!d},Kae=function(t){return t?t.deltaY<0?1:-1:0};function Xae(t,e){var n=Kae(t),i=oae(e,n);return i}function rz(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var qae=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,u=a.minScale,c=a.zoomAnimation,d=a.disablePadding,h=c.size,f=c.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n,m=i?!1:!f,w=dm(Mr(p,3),u,l,h,m&&!d);return w},Yae=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},Zae=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=Aw(o,r);return!l},Jae=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},Qae=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Mr(r[0].clientX-i.left,5),o=Mr(r[0].clientY-i.top,5),a=Mr(r[1].clientX-i.left,5),l=Mr(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},sz=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},ele=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,u=a.size,c=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,h=d*n;return dm(Mr(h,2),o,s,u,!c&&!l)},tle=160,nle=100,ile=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(Us(t),Bt(_t(t),e,i),Bt(_t(t),e,r))},rle=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,u=o.limitToBounds,c=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,f=o.disablePadding,p=o.smooth,m=d.size,w=d.disabled,v=h.step,y=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var b=Xae(e,null),_=p?y*Math.abs(e.deltaY):v,k=qae(t,b,_,!e.ctrlKey);if(l!==k){var C=Id(t,k),E=rz(e,s,l),P=w||m===0||c||f,M=u&&P,D=Ew(t,E.x,E.y,k,C,M),L=D.x,$=D.y;t.previousWheelEvent=e,t.setTransformState(k,L,$),Bt(_t(t),e,i),Bt(_t(t),e,r)}},sle=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;J_(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(J4(t,e.x,e.y),t.wheelAnimationTimer=null)},nle);var s=Yae(t,e);s&&(J_(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Bt(_t(t),e,i),Bt(_t(t),e,r))},tle))},oz=function(t){for(var e=0,n=0,i=0;i<2;i+=1)e+=t.touches[i].clientX,n+=t.touches[i].clientY;var r=e/2,s=n/2;return{x:r,y:s}},ole=function(t,e){var n=sz(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var i=oz(e);t.pinchLastCenterX=i.x,t.pinchLastCenterY=i.y,Us(t)},ale=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,u=o.zoomAnimation,c=o.alignmentAnimation,d=u.disabled,h=u.size;if(!(i===null||!n)){var f=Qae(e,s,n);if(!(!Number.isFinite(f.x)||!Number.isFinite(f.y))){var p=sz(e),m=ele(t,p),w=oz(e),v=w.x-(t.pinchLastCenterX||0),y=w.y-(t.pinchLastCenterY||0);if(!(m===s&&v===0&&y===0)){t.pinchLastCenterX=w.x,t.pinchLastCenterY=w.y;var b=Id(t,m),_=d||h===0||l,k=a&&_,C=Ew(t,f.x,f.y,m,b,k),E=C.x,P=C.y;t.pinchMidpoint=f,t.lastDistance=p;var M=c.sizeX,D=c.sizeY,L=wl(t,M),$=wl(t,D),G=E+v,z=P+y,X=cm(G,z,b,a,L,$,r),ee=X.x,he=X.y;t.setTransformState(m,ee,he)}}}},lle=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,J4(t,e==null?void 0:e.x,e==null?void 0:e.y)},az=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;J_(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Bt(_t(t),e,n)},i)},ule=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Bt(_t(t),e,i),nz(t,o,a,function(){return Bt(_t(t),e,r)}),az(t,e)};function cle(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function dle(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,u=a.onZoom,c=n.doubleClick,d=c.disabled,h=c.mode,f=c.step,p=c.animationTime,m=c.animationType;if(!d&&!i){if(h==="reset")return ule(t,e);if(!s)return console.error("No ContentComponent found");var w=cle(h,t.transformState.scale),v=ez(t,w,f);if(o!==v){Bt(_t(t),e,l);var y=rz(e,s,o),b=mA(t,v,y.x,y.y);if(!b)return console.error("Error during zoom event. New transformation state was not calculated.");Bt(_t(t),e,u),Ml(t,b,p,m),az(t,e)}}}var hle=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,u=r==null?void 0:r.contains(l),c=n&&l&&u&&!o;if(!c)return!1;var d=Aw(l,a);return!d},fle=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){n.props=i,Id(n,n.transformState.scale),n.setup=eN(i)},this.initializeWindowEvents=function(){var i,r,s=C1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;(r=n.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var i,r,s=C1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),Us(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=C1();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i){var r=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(_t(n))}),r&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s,o=i.offsetWidth,a=i.offsetHeight;(o>0||a>0)&&(n.onInitCallbacks.forEach(function(l){return l(_t(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect())}),setTimeout(function(){var s;(s=n.observer)===null||s===void 0||s.disconnect()},5e3),n.observer.observe(i))},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=Gae(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(ile(n,i),rle(n,i),sle(n,i))}}},this.onWheelPanning=function(i){var r=n.setup,s=r.disabled,o=r.wheel,a=r.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var l=n.transformState,u=l.positionX,c=l.positionY,d=u-i.deltaX,h=c-i.deltaY,f=a.lockAxisX?u:d,p=a.lockAxisY?c:h,m=n.setup.alignmentAnimation,w=m.sizeX,v=m.sizeY,y=wl(n,w),b=wl(n,v);f===u&&p===c||Y4(n,f,p,y,b)}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=XM(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),Us(n),ZM(n,i),Bt(_t(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=qM(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),JM(n,i.clientX,i.clientY),Bt(_t(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(Iae(n),Bt(_t(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=Zae(n,i);l&&(ole(n,i),Us(n),Bt(_t(n),i,o),Bt(_t(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=Jae(n);l&&(i.preventDefault(),i.stopPropagation(),ale(n,i),Bt(_t(n),i,o),Bt(_t(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(lle(n),Bt(_t(n),i,s),Bt(_t(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=XM(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200;if(!a){n.lastTouch=+new Date,Us(n);var l=i.touches,u=l.length===1,c=l.length===2;u&&(Us(n),ZM(n,i),Bt(_t(n),i,s)),c&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=qM(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];JM(n,a.clientX,a.clientY),Bt(_t(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=hle(n,i);s&&dle(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=_t(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Bt(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=iz(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):Vae(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return _t(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Id(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(r),n.initializeWindowEvents(),n.isInitialized=!0;var s=_t(n);Bt(s,void 0,n.props.onInit)},this.props=e,this.setup=eN(this.props),this.transformState=Q4(this.props)}return t}(),gA=on.createContext(null),ple=function(t,e){return typeof t=="function"?t(e):t},mle=on.forwardRef(function(t,e){var n=x.useRef(new fle(t)).current,i=ple(t.children,Z_(n));return x.useImperativeHandle(e,function(){return Z_(n)},[n]),x.useEffect(function(){n.update(t)},[n,t]),on.createElement(gA.Provider,{value:n},i)});on.forwardRef(function(t,e){var n=x.useRef(null),i=x.useContext(gA);return x.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),on.createElement("div",Qa({},t,{ref:Wae([n,e])}))});function gle(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var vle=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,tN={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};gle(vle);var yle=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,u=l===void 0?{}:l,c=t.contentProps,d=c===void 0?{}:c,h=x.useContext(gA),f=h.init,p=h.cleanupWindowEvents,m=x.useRef(null),w=x.useRef(null);return x.useEffect(function(){var v=m.current,y=w.current;return v!==null&&y!==null&&f&&(f==null||f(v,y)),function(){p==null||p()}},[]),on.createElement("div",Qa({},u,{ref:m,className:"".concat(Y_.wrapperClass," ").concat(tN.wrapper," ").concat(i),style:o}),on.createElement("div",Qa({},d,{ref:w,className:"".concat(Y_.contentClass," ").concat(tN.content," ").concat(s),style:a}),e))};function wle({wrapperRef:t}){const e=wt();return g.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[g.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:g.jsx("span",{className:"h-4 w-4",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),g.jsx("hr",{className:"border-stone-600"}),g.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:g.jsx("span",{className:"h-4 w-4",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function ble(){const t=wt(),e=lt(ft),n=lt(Fu),i=lt(By),r=lt(xn),s=lt(Ny),[o]=im(),a=x.useRef(null),l=(u,c)=>{const[d,...h]=u.split(":"),f=h.join(":").trim();return{cycle:c,stage:d.trim(),action:f}};return x.useEffect(()=>{if(e){const u=l(e,n);U.set(By,c=>[...c,u])}},[e]),x.useEffect(()=>{r.type==="running"&&s&&Ri({title:"El programa ha sido modificado",description:"La ejecucin se reiniciar desde el principio para aplicar los cambios.",variant:"info"})},[r,s]),x.useEffect(()=>{const u=a.current;u&&(u.scrollTop=u.scrollHeight)},[i]),o.showInstructionCycle?g.jsxs("div",{className:"absolute left-[120px] top-[520px] z-10 h-min w-[300px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"mb-2 block h-min w-full rounded-br-lg rounded-tl-lg border-b border-stone-600 bg-purple-500 px-2 py-1 text-lg text-white cursor-move",children:t("computer.cpu.instruction-cycle")}),g.jsx("hr",{className:"border-stone-600"}),g.jsx("div",{ref:a,className:"flex flex-col w-full py-2 px-2 overflow-y-auto max-h-[300px]",children:i.map((u,c)=>{const d=c===0||i[c-1].stage!==u.stage;return g.jsxs("div",{children:[d&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:`mb-2 ${u.stage==="Captacin"?"text-blue-400 text-lg font-serif":u.stage==="Ejecucin"?"text-green-400 text-lg font-sans":u.stage==="Interrupcin"?"text-red-400 text-lg font-mono":"text-white text-sm font-bold"}`,children:["Etapa: ",u.stage]}),u.stage!=="Interrupcin"&&g.jsxs("div",{className:"flex text-white text-sm font-bold mb-2 font-serif",children:[g.jsx("div",{className:"w-1/4 text-center",children:"Ciclo"}),g.jsx("div",{className:"w-3/4 text-left",children:"Accin"})]})]}),u.stage==="Interrupcin"?g.jsx("div",{className:"text-white text-sm mb-1",children:u.action}):g.jsxs("div",{className:"flex text-white text-sm mb-1",children:[g.jsx("div",{className:"w-1/4 text-center",children:u.cycle}),g.jsx("div",{className:"w-3/4 text-left",children:u.action})]})]},c)})})]}):null}function xle(){const t=wt(),{devices:e}=Rn();return e.hasIOBus?g.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:g.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function Sle(){const{devices:t}=Rn(),e=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),n=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),i="M 750 545 H 800";return g.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[g.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:e}),g.jsx(yn.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:e,style:Nt("bus.rd")}),g.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),g.jsx(yn.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:n,style:Nt("bus.wr")}),t.hasIOBus&&g.jsxs(g.Fragment,{children:[g.jsx(kn,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),g.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:i}),g.jsx(yn.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:i,style:Nt("bus.mem")})]}),t.pic&&g.jsx(kn,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&g.jsx(kn,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&g.jsx(kn,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&g.jsx(kn,{springs:"bus.handshake",d:"M 710 595 V 950 H 900"}),t.pic&&g.jsxs(g.Fragment,{children:[g.jsx(kn,{springs:"bus.intr",d:"M 110 700 V 470"}),g.jsx(kn,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&g.jsx(kn,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&g.jsx(kn,{springs:"bus.int1",d:"M 475 955 H 400 V 900"}),t.pic&&t.handshake&&g.jsx(kn,{springs:"bus.int2",d:"M 900 1075 H 300 V 900"}),t.pio==="switches-and-leds"&&g.jsxs(g.Fragment,{children:[g.jsx(kn,{springs:"bus.switches->pio",d:"M 1300 868 H 1120"}),g.jsx(kn,{springs:"bus.pio->leds",d:"M 1120 758 H 1300"})]}),t.pio==="printer"&&g.jsxs(g.Fragment,{children:[g.jsx(kn,{springs:"bus.printer.strobe",d:"M 1120 667 H 1225 V 992 H 1300"}),g.jsx(kn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1210 V 682 H 1120"}),g.jsx(kn,{springs:"bus.printer.data",d:"M 1120 737 H 1175 V 1062 H 1300"})]}),t.handshake==="printer"&&g.jsxs(g.Fragment,{children:[g.jsx(kn,{springs:"bus.printer.strobe",d:"M 1120 992 H 1300"}),g.jsx(kn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1120"}),g.jsx(kn,{springs:"bus.printer.data",d:"M 1120 1062 H 1300"})]})]})}function kn({d:t,springs:e}){return g.jsxs(g.Fragment,{children:[g.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),g.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),g.jsx(yn.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Nt(e)})]})}function _le(){const t=wt(),{devices:e}=Rn();return g.jsxs(g.Fragment,{children:[g.jsx(Vi,{className:"left-[384px] top-[403px]",children:"rd"}),g.jsx(Vi,{className:"left-[384px] top-[423px]",children:"wr"}),e.hasIOBus&&g.jsxs(g.Fragment,{children:[g.jsx(Vi,{className:"left-[384px] top-[443px]",children:"io/m"}),g.jsx(Vi,{className:"left-[715px] top-[538px]",children:t("computer.chip-select.mem")})]}),e.pic&&g.jsx(Vi,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")}),e.timer&&g.jsx(Vi,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")}),e.pio&&g.jsx(Vi,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")}),e.handshake&&g.jsx(Vi,{className:"left-[675px] top-[573px]",children:t("computer.chip-select.handshake")}),e.pic&&g.jsxs(g.Fragment,{children:[g.jsx(Vi,{className:"left-[75px] top-[478px]",children:"intr"}),g.jsx(Vi,{className:"left-[125px] top-[478px]",children:"inta"})]}),e.printer&&g.jsxs(g.Fragment,{children:[g.jsx(Vi,{className:"left-[1310px] top-[983px]",children:"strobe"}),g.jsx(Vi,{className:"left-[1310px] top-[998px]",children:"busy"}),g.jsx(Vi,{className:"left-[1310px] top-[1053px]",children:"data"})]})]})}function Vi({className:t,children:e}){return g.jsx("span",{className:$e("pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",t),children:e})}function kle(){const{devices:t}=Rn(),e=["M 699 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 687 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" ");return g.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] size-full",children:[g.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),g.jsx(yn.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:n,style:Nt("bus.data")}),g.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),g.jsx(yn.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:e,style:Nt("bus.address")})]})}function Cle(){return g.jsxs(g.Fragment,{children:[g.jsx(kle,{}),g.jsx(Sle,{}),g.jsx(_le,{}),g.jsx(xle,{})]})}function Ele(){const{devices:t}=Rn();if(!t.clock)return null;const e=Nt("clock.angle");return g.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:g.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[g.jsx("circle",{cx:"12",cy:"12",r:"10"}),g.jsx(yn.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}var vA="Popover",[lz,rfe]=El(vA,[Wd]),hm=Wd(),[Ale,Nl]=lz(vA),uz=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=hm(e),l=x.useRef(null),[u,c]=x.useState(!1),[d=!1,h]=zo({prop:i,defaultProp:r,onChange:s});return g.jsx(ZC,{...a,children:g.jsx(Ale,{scope:e,contentId:il(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(f=>!f),[h]),hasCustomAnchor:u,onCustomAnchorAdd:x.useCallback(()=>c(!0),[]),onCustomAnchorRemove:x.useCallback(()=>c(!1),[]),modal:o,children:n})})};uz.displayName=vA;var cz="PopoverAnchor",Ple=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Nl(cz,n),s=hm(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return x.useEffect(()=>(o(),()=>a()),[o,a]),g.jsx(V0,{...s,...i,ref:e})});Ple.displayName=cz;var dz="PopoverTrigger",hz=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Nl(dz,n),s=hm(n),o=ct(e,r.triggerRef),a=g.jsx(He.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":vz(r.open),...i,ref:o,onClick:ve(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:g.jsx(V0,{asChild:!0,...s,children:a})});hz.displayName=dz;var yA="PopoverPortal",[Tle,Rle]=lz(yA,{forceMount:void 0}),fz=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=Nl(yA,e);return g.jsx(Tle,{scope:e,forceMount:n,children:g.jsx(qo,{present:n||s.open,children:g.jsx(Qp,{asChild:!0,container:r,children:i})})})};fz.displayName=yA;var Dd="PopoverContent",pz=x.forwardRef((t,e)=>{const n=Rle(Dd,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=Nl(Dd,t.__scopePopover);return g.jsx(qo,{present:i||s.open,children:s.modal?g.jsx(Mle,{...r,ref:e}):g.jsx(Nle,{...r,ref:e})})});pz.displayName=Dd;var Mle=x.forwardRef((t,e)=>{const n=Nl(Dd,t.__scopePopover),i=x.useRef(null),r=ct(e,i),s=x.useRef(!1);return x.useEffect(()=>{const o=i.current;if(o)return eE(o)},[]),g.jsx(G0,{as:Au,allowPinchZoom:!0,children:g.jsx(mz,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ve(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,u=a.button===2||l;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ve(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Nle=x.forwardRef((t,e)=>{const n=Nl(Dd,t.__scopePopover),i=x.useRef(!1),r=x.useRef(!1);return g.jsx(mz,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),mz=x.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:c,...d}=t,h=Nl(Dd,n),f=hm(n);return BC(),g.jsx(B0,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:g.jsx(Zp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:c,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:g.jsx(JC,{"data-state":vz(h.open),role:"dialog",id:h.contentId,...f,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),gz="PopoverClose",Ole=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Nl(gz,n);return g.jsx(He.button,{type:"button",...i,ref:e,onClick:ve(t.onClick,()=>r.onOpenChange(!1))})});Ole.displayName=gz;var Ile="PopoverArrow",Dle=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=hm(n);return g.jsx(QC,{...r,...i,ref:e})});Dle.displayName=Ile;function vz(t){return t?"open":"closed"}var Lle=uz,jle=hz,Fle=fz,yz=pz;const wz=Lle,bz=jle,wA=x.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>g.jsx(Fle,{children:g.jsx(yz,{ref:r,align:e,sideOffset:n,className:$e("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));wA.displayName=yz.displayName;function rr({name:t,title:e,valueAtom:n,springs:i,emphasis:r=!1,className:s}){const o=wt(),a=lt(n),l=a.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t;return g.jsxs(wz,{children:[g.jsx(bz,{asChild:!0,children:g.jsxs(yn.button,{title:c!=="left"&&c!=="right"?`Registro ${c}`:c,className:$e("flex w-min cursor-pointer items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",r?"border-mantis-400 text-lg":"border-stone-600 text-base",s),style:c==="left"||c==="right"?{backgroundColor:"transparent"}:Nt(i),children:[g.jsx("span",{className:"mr-2 font-bold",children:c}),g.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:l.toString("hex")})]})}),g.jsxs(wA,{className:"w-60",children:[g.jsx("p",{className:"px-4 py-2 font-medium text-white",children:c!=="left"&&c!=="right"?`Registro ${c}`:c}),g.jsx("hr",{className:"border-stone-600"}),g.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(d=>g.jsxs("li",{children:[g.jsx("b",{className:"font-medium",children:o(`generics.byte-representation.${d}`)}),":"," ",g.jsx("span",{className:"font-mono text-mantis-400",children:a.low.toString(d)})]},d))})]})]})}function $le(){const t=lt(qe.FLAGS),e=lt(E5),[n,i]=x.useState(!1),r=lt(C5),[s]=im();x.useEffect(()=>{const d=f=>{i(f==="ADD"||f==="SUB"||f==="CMP"||f==="AND"||f==="OR"||f==="XOR"||f==="NOT"||f==="NEG"||f==="DEC"||f==="INC")},h=f=>{d(f.detail.instruction)};return window.addEventListener("instructionChange",h),()=>{window.removeEventListener("instructionChange",h)}},[]);const o=t.bit(1),a=t.bit(0),l=t.bit(3),u=t.bit(4),c=t.bit(2);return g.jsxs(g.Fragment,{children:[g.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[g.jsx(yn.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 120 85 H 220",pathLength:1,strokeDasharray:1,style:Nt("cpu.alu.operands")}),g.jsx(yn.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 120 145 H 220",pathLength:1,strokeDasharray:1,style:Nt("cpu.alu.operands")}),g.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),g.jsx(yn.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:Nt("cpu.alu.cog").rot.to(d=>`rotate(${d*60}deg)`)}}),n&&g.jsx(yn.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:Nt("cpu.alu.operation"),children:e}),g.jsxs(yn.div,{className:$e("absolute top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",s.flagsVisibility==="SF_OF_CF_ZF"?"left-[200px]":"left-[220px]"),style:Nt("cpu.FLAGS"),children:[r&&g.jsx("span",{className:$e("rounded p-1 font-light",u?"bg-mantis-400":"bg-stone-900"),children:"I"}),s.flagsVisibility==="SF_OF_CF_ZF"&&g.jsxs(g.Fragment,{children:[g.jsx("span",{className:$e("rounded p-1 font-light",l?"bg-mantis-400":"bg-stone-900"),children:"S"}),g.jsx("span",{className:$e("rounded p-1 font-light",c?"bg-mantis-400":"bg-stone-900"),children:"O"})]}),g.jsx("span",{className:$e("rounded p-1 font-light",o?"bg-mantis-400":"bg-stone-900"),children:"C"}),g.jsx("span",{className:$e("rounded p-1 font-light",a?"bg-mantis-400":"bg-stone-900"),children:"Z"})]})]})}function Ble(){const t=wt(),e=lt(Fu),{status:n}=Rn(),i=lt(Rs),r=lt(ft),s=x.useMemo(()=>{if(!("metadata"in i)||i.metadata.operands.length===0)return"";if(i.phase==="fetching-operands"){let a=" __";for(let l=1;l<i.metadata.operands.length;l++)a+=", __";return a}else return" "+i.metadata.operands.join(", ")},[i]),o=x.useMemo(()=>n.type==="running"&&n.waitingForInput?"waiting-for-input":n.type==="stopped"?n.error?"stopped-error":"stopped":i.phase==="stopped"&&i.error?"stopped-error":i.phase,[n,i]);return g.jsxs(g.Fragment,{children:[g.jsx("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:g.jsx(yn.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:Nt("cpu.decoder.path")})}),g.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:g.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:t("computer.cpu.control-unit")})}),g.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[g.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[g.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),g.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:g.jsx(yn.div,{className:"h-full bg-mantis-400",style:{width:Nt("cpu.decoder.progress.progress").to(a=>`${a*100}%`),opacity:Nt("cpu.decoder.progress.opacity")}})})]}),g.jsx("span",{className:$e("mt-4 w-full rounded-lg border border-stone-600 py-2 text-center text-sm leading-none transition-colors",o==="stopped-error"?"bg-red-500":o==="waiting-for-input"?"bg-amber-600":o==="int6"||o==="int7"?"bg-blue-600":"bg-stone-900"),children:o==="int6"||o==="int7"?g.jsxs(g.Fragment,{children:[t(`computer.cpu.status.${o}`),g.jsx("div",{children:r})]}):o==="stopped-error"||o==="waiting-for-input"?g.jsx(g.Fragment,{children:t(`computer.cpu.status.${o}`)}):r?g.jsx("div",{children:r}):t(`computer.cpu.status.${o}`)}),g.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:g.jsx("p",{className:"text-center font-mono",children:!("metadata"in i)||i.phase==="fetching"||n.type==="stopped"?i.phase==="stopped"&&o!=="stopped-error"&&o==="stopped"&&e!==0?g.jsx("span",{className:"text-mantis-400",children:"HLT"}):g.jsx("span",{className:"italic text-stone-400",children:"???"}):g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"text-mantis-400",children:i.metadata.name}),g.jsx("span",{className:"text-white",children:s})]})})})]})]})}function zle(){const t=wt(),e=lt(k5),[n,i]=x.useState(!1),[r,s]=x.useState(!1),[o,a]=x.useState(!1);return x.useEffect(()=>{const l=(c,d,h)=>{a(c==="ADD"||c==="SUB"||c==="CMP"||c==="AND"||c==="OR"||c==="XOR"||c==="NOT"||c==="NEG"||c==="DEC"||c==="INC"),i(!!(c==="CALL"||c==="IRET"||d)),s(!!h)},u=c=>{const d=c;l(d.detail.instruction,d.detail.modeid,d.detail.moderi)};return window.addEventListener("instructionChange",u),()=>{window.removeEventListener("instructionChange",u)}},[]),g.jsxs("div",{className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),g.jsx(Nie,{showSP:e,showri:r}),g.jsx(cse,{showSP:e,showid:n,showri:r}),o&&g.jsxs(g.Fragment,{children:[g.jsx(Wi,{name:"left",className:$e("left-[96px] top-[49px]","border-transparent","bg-transparent")}),g.jsx(Wi,{name:"right",className:$e("left-[96px] top-[150px]","border-transparent","bg-transparent")})]}),g.jsx($le,{}),g.jsx(Wi,{name:"AX",emphasis:!0,className:"left-[450px] top-[30px]"}),g.jsx(Wi,{name:"BX",emphasis:!0,className:"left-[450px] top-[70px]"}),g.jsx(Wi,{name:"CX",emphasis:!0,className:"left-[450px] top-[110px]"}),g.jsx(Wi,{name:"DX",emphasis:!0,className:"left-[450px] top-[150px]"}),n&&g.jsx(Wi,{name:"id",className:$e("left-[450px] top-[190px]","border-red-color")}),g.jsx(Wi,{name:"MBR",className:$e("right-[-51px] top-[233px]","border-red-color")}),g.jsx(Wi,{name:"IR",className:$e("left-[171px] top-[270px]","border-red-color")}),g.jsx(Ble,{}),e&&g.jsx(Wi,{name:"SP",emphasis:!0,className:$e("left-[450px] top-[292px]","border-red-color")}),g.jsx(Wi,{name:"IP",emphasis:!0,className:$e("left-[450px] top-[332px]","border-red-color")}),r&&g.jsx(Wi,{name:"ri",emphasis:!0,className:$e("left-[450px] top-[372px]","border-red-color")}),g.jsx(Wi,{name:"MAR",className:$e("right-[-51px] top-[333px]","border-red-color")})]})}function Wi({name:t,emphasis:e,className:n}){return g.jsx(rr,{name:t,valueAtom:qe[t],springs:`cpu.${t}`,emphasis:e,className:$e("absolute",n)})}function Ule(){const t=wt(),e=lt(Fu),n=lt(ow),[i]=im();return i.showStatsCPU?g.jsxs("div",{className:"absolute left-[120px] top-[-120px] z-10 h-min w-[300px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"mb-2 block h-min w-full rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-blue-500 px-2 py-1 text-lg text-white cursor-move",children:t("computer.cpu.stats")}),g.jsx("hr",{className:"border-stone-600"}),g.jsx("div",{className:"flex flex-col w-full items-start py-2 px-2",children:g.jsxs("div",{className:"text-white pl-1 text-sm text-left",children:[g.jsxs("div",{className:"mb-1",children:["Total de ciclos: ",e]}),g.jsxs("div",{children:["Recuento de instrucciones: ",n]})]})})]}):null}const Hle="_pushable_1q0ek_2",Vle="_front_1q0ek_15",Wle="_shadow_1q0ek_20",Gle="_edge_1q0ek_52",Tg={pushable:Hle,front:Vle,shadow:Wle,edge:Gle};function Kle(){const t=wt(),{status:e,dispatch:n,devices:i}=Rn();return vu("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?g.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:g.jsxs("button",{className:Tg.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[g.jsx("div",{className:Tg.shadow}),g.jsx("div",{className:Tg.edge}),g.jsx("span",{className:Tg.front,children:t("computer.f10")})]})}):null}function Xle(){const t=wt(),{devices:e}=Rn();return e.handshake?g.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),g.jsx(rr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:KE,springs:"handshake.STATE",className:"mx-auto my-4"}),g.jsx("hr",{className:"border-stone-600"}),g.jsx(rr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:GE,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var xz={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.23 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(x)})(W8,function(n){return function(){var i={651:function(a){a.exports=function(){var l={d:function(I,O){for(var B in O)l.o(O,B)&&!l.o(I,B)&&Object.defineProperty(I,B,{enumerable:!0,get:O[B]})},o:function(I,O){return Object.prototype.hasOwnProperty.call(I,O)},r:function(I){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})}},u={};function c(I){return function(O){if(Array.isArray(O))return h(O)}(I)||function(O){if(typeof Symbol<"u"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)}(I)||d(I)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(I,O){if(I){if(typeof I=="string")return h(I,O);var B={}.toString.call(I).slice(8,-1);return B==="Object"&&I.constructor&&(B=I.constructor.name),B==="Map"||B==="Set"?Array.from(I):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?h(I,O):void 0}}function h(I,O){(O==null||O>I.length)&&(O=I.length);for(var B=0,S=Array(O);B<O;B++)S[B]=I[B];return S}function f(I){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},f(I)}function p(I,O){for(var B=0;B<O.length;B++){var S=O[B];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(I,w(S.key),S)}}function m(I,O,B){return(O=w(O))in I?Object.defineProperty(I,O,{value:B,enumerable:!0,configurable:!0,writable:!0}):I[O]=B,I}function w(I){var O=function(B,S){if(f(B)!="object"||!B)return B;var T=B[Symbol.toPrimitive];if(T!==void 0){var N=T.call(B,S||"default");if(f(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(B)}(I,"string");return f(O)=="symbol"?O:O+""}l.r(u),l.d(u,{SimpleKeyboard:function(){return Z},default:function(){return ue}});var v=function(){return I=function S(T){var N=T.getOptions,R=T.getCaretPosition,K=T.getCaretPositionEnd,W=T.dispatch;(function(te,q){if(!(te instanceof q))throw new TypeError("Cannot call a class as a function")})(this,S),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(te){return te&&!(te[0]==="{"&&te[te.length-1]==="}")}),this.getOptions=N,this.getCaretPosition=R,this.getCaretPositionEnd=K,this.dispatch=W,S.bindMethods(S,this)},O=[{key:"getButtonType",value:function(S){return S.includes("{")&&S.includes("}")&&S!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(S){var T=this.getButtonType(S),N=S.replace("{","").replace("}",""),R="";return T!=="standardBtn"&&(R=" hg-button-".concat(N)),"hg-".concat(T).concat(R)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"","{arrowleft}":"","{arrowdown}":"","{arrowright}":"","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(S,T){return(T=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),T):T||this.getDefaultDiplay())[S]||S}},{key:"getUpdatedInput",value:function(S,T,N){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:N,K=arguments.length>4&&arguments[4]!==void 0&&arguments[4],W=this.getOptions(),te=[N,R,K],q=T;return(S==="{bksp}"||S==="{backspace}")&&q.length>0?q=this.removeAt.apply(this,[q].concat(te)):(S==="{delete}"||S==="{forwarddelete}")&&q.length>0?q=this.removeForwardsAt.apply(this,[q].concat(te)):S==="{space}"?q=this.addStringAt.apply(this,[q," "].concat(te)):S!=="{tab}"||typeof W.tabCharOnTab=="boolean"&&W.tabCharOnTab===!1?S!=="{enter}"&&S!=="{numpadenter}"||!W.newLineOnEnter?S.includes("numpad")&&Number.isInteger(Number(S[S.length-2]))?q=this.addStringAt.apply(this,[q,S[S.length-2]].concat(te)):S==="{numpaddivide}"?q=this.addStringAt.apply(this,[q,"/"].concat(te)):S==="{numpadmultiply}"?q=this.addStringAt.apply(this,[q,"*"].concat(te)):S==="{numpadsubtract}"?q=this.addStringAt.apply(this,[q,"-"].concat(te)):S==="{numpadadd}"?q=this.addStringAt.apply(this,[q,"+"].concat(te)):S==="{numpaddecimal}"?q=this.addStringAt.apply(this,[q,"."].concat(te)):S==="{"||S==="}"?q=this.addStringAt.apply(this,[q,S].concat(te)):S.includes("{")||S.includes("}")||(q=this.addStringAt.apply(this,[q,S].concat(te))):q=this.addStringAt.apply(this,[q,`
`].concat(te)):q=this.addStringAt.apply(this,[q,"	"].concat(te)),W.debug&&console.log("Input will be: "+q),q}},{key:"updateCaretPos",value:function(S){var T=arguments.length>1&&arguments[1]!==void 0&&arguments[1],N=this.updateCaretPosAction(S,T);this.dispatch(function(R){R.setCaretPosition(N)})}},{key:"updateCaretPosAction",value:function(S){var T=arguments.length>1&&arguments[1]!==void 0&&arguments[1],N=this.getOptions(),R=this.getCaretPosition();return R!=null&&(T?R>0&&(R-=S):R+=S),N.debug&&console.log("Caret at:",R),R}},{key:"addStringAt",value:function(S,T){var N,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:S.length,W=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return R||R===0?(N=[S.slice(0,R),T,S.slice(K)].join(""),this.isMaxLengthReached()||W&&this.updateCaretPos(T.length)):N=S+T,N}},{key:"removeAt",value:function(S){var T,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,K=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(N===0&&R===0)return S;if(N===R){var W=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;N&&N>=0?S.substring(N-2,N).match(W)?(T=S.substr(0,N-2)+S.substr(N),K&&this.updateCaretPos(2,!0)):(T=S.substr(0,N-1)+S.substr(N),K&&this.updateCaretPos(1,!0)):S.slice(-2).match(W)?(T=S.slice(0,-2),K&&this.updateCaretPos(2,!0)):(T=S.slice(0,-1),K&&this.updateCaretPos(1,!0))}else T=S.slice(0,N)+S.slice(R),K&&this.dispatch(function(te){te.setCaretPosition(N)});return T}},{key:"removeForwardsAt",value:function(S){var T,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,K=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return S!=null&&S.length&&N!==null?(N===R?T=S.substring(N,N+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?S.substr(0,N)+S.substr(N+2):S.substr(0,N)+S.substr(N+1):(T=S.slice(0,N)+S.slice(R),K&&this.dispatch(function(W){W.setCaretPosition(N)})),T):S}},{key:"handleMaxLength",value:function(S,T){var N=this.getOptions(),R=N.maxLength,K=S[N.inputName||"default"],W=T.length-1>=R;if(T.length<=K.length)return!1;if(Number.isInteger(R))return N.debug&&console.log("maxLength (num) reached:",W),W?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(f(R)==="object"){var te=T.length-1>=R[N.inputName||"default"];return N.debug&&console.log("maxLength (obj) reached:",te),te?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(S){return S?S.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(T,N){return N.length?T+N[0].toUpperCase()+N.slice(1):T}):""}},{key:"chunkArray",value:function(S,T){return c(Array(Math.ceil(S.length/T))).map(function(N,R){return S.slice(T*R,T+T*R)})}},{key:"escapeRegex",value:function(S){return S.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(S,T){var N=S,R=T.indexOf("");return R<S&&R!=-1&&N--,T.indexOf("")<S&&R!=-1&&N--,N<0?0:N}}],B=[{key:"bindMethods",value:function(S,T){var N,R=function(W,te){var q=typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(!q){if(Array.isArray(W)||(q=d(W))||te){q&&(W=q);var Re=0,je=function(){};return{s:je,n:function(){return Re>=W.length?{done:!0}:{done:!1,value:W[Re++]}},e:function(ge){throw ge},f:je}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Be,Le=!0,Ve=!1;return{s:function(){q=q.call(W)},n:function(){var ge=q.next();return Le=ge.done,ge},e:function(ge){Ve=!0,Be=ge},f:function(){try{Le||q.return==null||q.return()}finally{if(Ve)throw Be}}}}(Object.getOwnPropertyNames(S.prototype));try{for(R.s();!(N=R.n()).done;){var K=N.value;K==="constructor"||K==="bindMethods"||(T[K]=T[K].bind(T))}}catch(W){R.e(W)}finally{R.f()}}}],O&&p(I.prototype,O),B&&p(I,B),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,O,B}();m(v,"noop",function(){});var y=v;function b(I){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},b(I)}function _(I,O){for(var B=0;B<O.length;B++){var S=O[B];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(I,C(S.key),S)}}function k(I,O,B){return(O=C(O))in I?Object.defineProperty(I,O,{value:B,enumerable:!0,configurable:!0,writable:!0}):I[O]=B,I}function C(I){var O=function(B,S){if(b(B)!="object"||!B)return B;var T=B[Symbol.toPrimitive];if(T!==void 0){var N=T.call(B,S);if(b(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)}(I,"string");return b(O)=="symbol"?O:O+""}var E=function(){return I=function S(T){var N=this,R=T.dispatch,K=T.getOptions;(function(W,te){if(!(W instanceof te))throw new TypeError("Cannot call a class as a function")})(this,S),k(this,"getOptions",void 0),k(this,"dispatch",void 0),k(this,"isModifierKey",function(W){return W.altKey||W.ctrlKey||W.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(W.code||W.key||N.keyCodeToKey(W==null?void 0:W.keyCode))}),this.dispatch=R,this.getOptions=K,y.bindMethods(S,this)},O=[{key:"handleHighlightKeyDown",value:function(S){var T=this.getOptions();T.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var N=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(R){var K,W,te=R.getButtonElement(N),q=R.getButtonElement("{".concat(N,"}"));if(te)K=te,W=N;else{if(!q)return;K=q,W="{".concat(N,"}")}var Re,je,Be,Le,Ve=function(vt){vt.style.background=T.physicalKeyboardHighlightBgColor||"#dadce4",vt.style.color=T.physicalKeyboardHighlightTextColor||"black"};if(K)if(Array.isArray(K)){if(K.forEach(function(vt){return Ve(vt)}),T.physicalKeyboardHighlightPress)if(T.physicalKeyboardHighlightPressUsePointerEvents)(Re=K[0])===null||Re===void 0||(je=Re.onpointerdown)===null||je===void 0||je.call(Re,S);else if(T.physicalKeyboardHighlightPressUseClick){var ge;(ge=K[0])===null||ge===void 0||ge.click()}else R.handleButtonClicked(W,S)}else Ve(K),T.physicalKeyboardHighlightPress&&(T.physicalKeyboardHighlightPressUsePointerEvents?(Be=K)===null||Be===void 0||(Le=Be.onpointerdown)===null||Le===void 0||Le.call(Be,S):T.physicalKeyboardHighlightPressUseClick?K.click():R.handleButtonClicked(W,S))})}},{key:"handleHighlightKeyUp",value:function(S){var T=this.getOptions();T.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var N=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(R){var K,W,te,q=R.getButtonElement(N)||R.getButtonElement("{".concat(N,"}")),Re=function(je){je.removeAttribute&&je.removeAttribute("style")};q&&(Array.isArray(q)?(q.forEach(function(je){return Re(je)}),T.physicalKeyboardHighlightPressUsePointerEvents&&((K=q[0])===null||K===void 0||(W=K.onpointerup)===null||W===void 0||W.call(K,S))):(Re(q),T.physicalKeyboardHighlightPressUsePointerEvents&&(q==null||(te=q.onpointerup)===null||te===void 0||te.call(q,S))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(S){var T,N="",R=S.code||S.key||this.keyCodeToKey(S==null?void 0:S.keyCode);return(N=R!=null&&R.includes("Numpad")||R!=null&&R.includes("Shift")||R!=null&&R.includes("Space")||R!=null&&R.includes("Backspace")||R!=null&&R.includes("Control")||R!=null&&R.includes("Alt")||R!=null&&R.includes("Meta")?S.code||"":S.key||this.keyCodeToKey(S==null?void 0:S.keyCode)||"").length>1?(T=N)===null||T===void 0?void 0:T.toLowerCase():N}},{key:"keyCodeToKey",value:function(S){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[S]||""}}],O&&_(I.prototype,O),B&&_(I,B),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,O,B}();function P(I){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},P(I)}function M(I,O){for(var B=0;B<O.length;B++){var S=O[B];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(I,L(S.key),S)}}function D(I,O,B){return(O=L(O))in I?Object.defineProperty(I,O,{value:B,enumerable:!0,configurable:!0,writable:!0}):I[O]=B,I}function L(I){var O=function(B,S){if(P(B)!="object"||!B)return B;var T=B[Symbol.toPrimitive];if(T!==void 0){var N=T.call(B,S);if(P(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)}(I,"string");return P(O)=="symbol"?O:O+""}var $=function(){return I=function S(T){var N=T.utilities,R=T.options;(function(K,W){if(!(K instanceof W))throw new TypeError("Cannot call a class as a function")})(this,S),D(this,"utilities",void 0),D(this,"options",void 0),D(this,"candidateBoxElement",void 0),D(this,"pageIndex",0),D(this,"pageSize",void 0),this.utilities=N,this.options=R,y.bindMethods(S,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},O=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(S){var T=this,N=S.candidateValue,R=S.targetElement,K=S.onSelect;if(N&&N.length){var W=this.utilities.chunkArray(N.split(" "),this.pageSize);this.renderPage({candidateListPages:W,targetElement:R,pageIndex:this.pageIndex,nbPages:W.length,onItemSelected:function(te,q){K(te,q),T.destroy()}})}}},{key:"renderPage",value:function(S){var T,N=this,R=S.candidateListPages,K=S.targetElement,W=S.pageIndex,te=S.nbPages,q=S.onItemSelected;(T=this.candidateBoxElement)===null||T===void 0||T.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Re=document.createElement("ul");Re.className="hg-candidate-box-list",R[W].forEach(function(cn){var Ll,Ss=document.createElement("li"),ea=function(){var ta=new(N.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(ta,"target",{value:Ss}),ta};Ss.className="hg-candidate-box-list-item",Ss.innerHTML=((Ll=N.options.display)===null||Ll===void 0?void 0:Ll[cn])||cn,N.options.useTouchEvents?Ss.ontouchstart=function(ta){return q(cn,ta||ea())}:Ss.onclick=function(){var ta=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ea();return q(cn,ta)},Re.appendChild(Ss)});var je=W>0,Be=document.createElement("div");Be.classList.add("hg-candidate-box-prev"),je&&Be.classList.add("hg-candidate-box-btn-active");var Le=function(){je&&N.renderPage({candidateListPages:R,targetElement:K,pageIndex:W-1,nbPages:te,onItemSelected:q})};this.options.useTouchEvents?Be.ontouchstart=Le:Be.onclick=Le,this.candidateBoxElement.appendChild(Be),this.candidateBoxElement.appendChild(Re);var Ve=W<te-1,ge=document.createElement("div");ge.classList.add("hg-candidate-box-next"),Ve&&ge.classList.add("hg-candidate-box-btn-active");var vt=function(){Ve&&N.renderPage({candidateListPages:R,targetElement:K,pageIndex:W+1,nbPages:te,onItemSelected:q})};this.options.useTouchEvents?ge.ontouchstart=vt:ge.onclick=vt,this.candidateBoxElement.appendChild(ge),K.prepend(this.candidateBoxElement)}}],O&&M(I.prototype,O),B&&M(I,B),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,O,B}(),G=$;function z(I){return function(O){if(Array.isArray(O))return X(O)}(I)||function(O){if(typeof Symbol<"u"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)}(I)||function(O,B){if(O){if(typeof O=="string")return X(O,B);var S={}.toString.call(O).slice(8,-1);return S==="Object"&&O.constructor&&(S=O.constructor.name),S==="Map"||S==="Set"?Array.from(O):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?X(O,B):void 0}}(I)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function X(I,O){(O==null||O>I.length)&&(O=I.length);for(var B=0,S=Array(O);B<O;B++)S[B]=I[B];return S}function ee(I){return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},ee(I)}function he(I,O){var B=Object.keys(I);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(I);O&&(S=S.filter(function(T){return Object.getOwnPropertyDescriptor(I,T).enumerable})),B.push.apply(B,S)}return B}function V(I,O){for(var B=0;B<O.length;B++){var S=O[B];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(I,ne(S.key),S)}}function F(I,O,B){return(O=ne(O))in I?Object.defineProperty(I,O,{value:B,enumerable:!0,configurable:!0,writable:!0}):I[O]=B,I}function ne(I){var O=function(B,S){if(ee(B)!="object"||!B)return B;var T=B[Symbol.toPrimitive];if(T!==void 0){var N=T.call(B,S);if(ee(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(B)}(I,"string");return ee(O)=="symbol"?O:O+""}var _e=function(){return I=function S(T,N){var R=this;if(function(Le,Ve){if(!(Le instanceof Ve))throw new TypeError("Cannot call a class as a function")}(this,S),F(this,"input",void 0),F(this,"options",void 0),F(this,"utilities",void 0),F(this,"caretPosition",void 0),F(this,"caretPositionEnd",void 0),F(this,"keyboardDOM",void 0),F(this,"keyboardPluginClasses",void 0),F(this,"keyboardDOMClass",void 0),F(this,"buttonElements",void 0),F(this,"currentInstanceName",void 0),F(this,"allKeyboardInstances",void 0),F(this,"keyboardInstanceNames",void 0),F(this,"isFirstKeyboardInstance",void 0),F(this,"physicalKeyboard",void 0),F(this,"modules",void 0),F(this,"activeButtonClass",void 0),F(this,"holdInteractionTimeout",void 0),F(this,"holdTimeout",void 0),F(this,"isMouseHold",void 0),F(this,"initialized",void 0),F(this,"candidateBox",void 0),F(this,"keyboardRowsDOM",void 0),F(this,"defaultName","default"),F(this,"activeInputElement",null),F(this,"handleParams",function(Le,Ve){var ge,vt,cn;if(typeof Le=="string")ge=Le.split(".").join(""),vt=document.querySelector(".".concat(ge)),cn=Ve;else if(Le instanceof HTMLDivElement){if(!Le.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");ge=Le.className.split(" ")[0],vt=Le,cn=Ve}else ge="simple-keyboard",vt=document.querySelector(".".concat(ge)),cn=Le;return{keyboardDOMClass:ge,keyboardDOM:vt,options:cn}}),F(this,"getOptions",function(){return R.options}),F(this,"getCaretPosition",function(){return R.caretPosition}),F(this,"getCaretPositionEnd",function(){return R.caretPositionEnd}),F(this,"registerModule",function(Le,Ve){R.modules[Le]||(R.modules[Le]={}),Ve(R.modules[Le])}),F(this,"getKeyboardClassString",function(){for(var Le=arguments.length,Ve=new Array(Le),ge=0;ge<Le;ge++)Ve[ge]=arguments[ge];return[R.keyboardDOMClass].concat(Ve).filter(function(vt){return!!vt}).join(" ")}),typeof window<"u"){var K=this.handleParams(T,N),W=K.keyboardDOMClass,te=K.keyboardDOM,q=K.options,Re=q===void 0?{}:q;this.utilities=new y({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=te,this.options=function(Le){for(var Ve=1;Ve<arguments.length;Ve++){var ge=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?he(Object(ge),!0).forEach(function(vt){F(Le,vt,ge[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Le,Object.getOwnPropertyDescriptors(ge)):he(Object(ge)).forEach(function(vt){Object.defineProperty(Le,vt,Object.getOwnPropertyDescriptor(ge,vt))})}return Le}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Re),this.keyboardPluginClasses="",y.bindMethods(S,this);var je=this.options.inputName,Be=je===void 0?this.defaultName:je;if(this.input={},this.input[Be]="",this.keyboardDOMClass=W,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new E({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new G({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(W,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},O=[{key:"setCaretPosition",value:function(S){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S;this.caretPosition=S,this.caretPositionEnd=T}},{key:"getInputCandidates",value:function(S){var T=this,N=this.options,R=N.layoutCandidates,K=N.layoutCandidatesCaseSensitiveMatch;if(!R||ee(R)!=="object")return{};var W=Object.keys(R).filter(function(Re){var je=S.substring(0,T.getCaretPositionEnd()||0)||S,Be=new RegExp("".concat(T.utilities.escapeRegex(Re),"$"),K?"g":"gi");return!!z(je.matchAll(Be)).length});if(W.length>1){var te=W.sort(function(Re,je){return je.length-Re.length})[0];return{candidateKey:te,candidateValue:R[te]}}if(W.length){var q=W[0];return{candidateKey:q,candidateValue:R[q]}}return{}}},{key:"showCandidatesBox",value:function(S,T,N){var R=this;this.candidateBox&&this.candidateBox.show({candidateValue:T,targetElement:N,onSelect:function(K,W){var te=R.options,q=te.layoutCandidatesCaseSensitiveMatch,Re=te.disableCandidateNormalization,je=te.enableLayoutCandidatesKeyPress,Be=K;Re||(Be=K.normalize("NFD")),typeof R.options.beforeInputUpdate=="function"&&R.options.beforeInputUpdate(R);var Le=R.getInput(R.options.inputName,!0),Ve=R.getCaretPositionEnd()||0,ge=Le.substring(0,Ve||0)||Le,vt=new RegExp("".concat(R.utilities.escapeRegex(S),"$"),q?"g":"gi"),cn=ge.replace(vt,Be),Ll=Le.replace(ge,cn),Ss=cn.length-ge.length,ea=(Ve||Le.length)+Ss;ea<0&&(ea=0),R.setInput(Ll,R.options.inputName,!0),R.setCaretPosition(ea),je&&typeof R.options.onKeyPress=="function"&&R.options.onKeyPress(K,W),typeof R.options.onChange=="function"&&R.options.onChange(R.getInput(R.options.inputName,!0),W),typeof R.options.onChangeAll=="function"&&R.options.onChangeAll(R.getAllInputs(),W)}})}},{key:"handleButtonClicked",value:function(S,T){var N=this.options,R=N.inputName,K=R===void 0?this.defaultName:R,W=N.debug;if(S!=="{//}"){this.input[K]||(this.input[K]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var te=this.utilities.getUpdatedInput(S,this.input[K],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(S)&&this.activeInputElement&&this.input[K]&&this.input[K]===te&&this.caretPosition===0&&this.caretPositionEnd===te.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(S,T);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(S,T),this.input[K]!==te&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(te))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,te))return;var q=this.utilities.getUpdatedInput(S,this.input[K],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(q,this.options.inputName,!0),W&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),T==null?void 0:T.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),T),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),T),T!=null&&T.target&&this.options.enableLayoutCandidates){var Re,je=this.getInputCandidates(te),Be=je.candidateKey,Le=je.candidateValue;Be&&Le?this.showCandidatesBox(Be,Le,this.keyboardDOM):(Re=this.candidateBox)===null||Re===void 0||Re.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),W&&console.log("Key pressed:",S)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(S){this.options.syncInstanceInputs?this.dispatch(function(T){T.isMouseHold=S}):this.isMouseHold=S}},{key:"handleButtonMouseDown",value:function(S,T){var N=this;T&&(this.options.preventMouseDownDefault&&T.preventDefault(),this.options.stopMouseDownPropagation&&T.stopPropagation(),T.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(N.getMouseHold()&&(!S.includes("{")&&!S.includes("}")||S==="{delete}"||S==="{backspace}"||S==="{bksp}"||S==="{space}"||S==="{tab}")||S==="{arrowright}"||S==="{arrowleft}"||S==="{arrowup}"||S==="{arrowdown}")&&(N.options.debug&&console.log("Button held:",S),N.handleButtonHold(S)),clearTimeout(N.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(S,T){var N=this;T&&(this.options.preventMouseUpDefault&&T.preventDefault&&T.preventDefault(),this.options.stopMouseUpPropagation&&T.stopPropagation&&T.stopPropagation(),!(T.target===this.keyboardDOM||T.target&&this.keyboardDOM.contains(T.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(T.target===this.candidateBox.candidateBoxElement||T.target&&this.candidateBox.candidateBoxElement.contains(T.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(R){R.classList.remove(N.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),S&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(S,T)}},{key:"handleKeyboardContainerMouseDown",value:function(S){this.options.preventMouseDownDefault&&S.preventDefault()}},{key:"handleButtonHold",value:function(S){var T=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){T.getMouseHold()?(T.handleButtonClicked(S),T.handleButtonHold(S)):clearTimeout(T.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var S=this;this.dispatch(function(T){T.replaceInput(S.input),T.setCaretPosition(S.caretPosition,S.caretPositionEnd)})}},{key:"clearInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[S]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,T=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!T&&this.syncInstanceInputs(),this.options.rtl?""+this.input[S].replace("","").replace("","")+"":this.input[S]}},{key:"getAllInputs",value:function(){var S=this,T={};return Object.keys(this.input).forEach(function(N){T[N]=S.getInput(N,!0)}),T}},{key:"setInput",value:function(S){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,N=arguments.length>2?arguments[2]:void 0;this.input[T]=S,!N&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(S){this.input=S}},{key:"setOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},T=this.changedOptions(S);this.options=Object.assign(this.options,S),T.length&&(this.options.debug&&console.log("changedOptions",T),this.onSetOptions(T),this.render())}},{key:"changedOptions",value:function(S){var T=this;return Object.keys(S).filter(function(N){return JSON.stringify(S[N])!==JSON.stringify(T.options[N])})}},{key:"onSetOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];S.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(S.includes("layoutCandidatesPageSize")||S.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new G({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(S){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(T){S(window.SimpleKeyboardInstances[T],T)})}},{key:"addButtonTheme",value:function(S,T){var N=this;T&&S&&(S.split(" ").forEach(function(R){T.split(" ").forEach(function(K){N.options.buttonTheme||(N.options.buttonTheme=[]);var W=!1;N.options.buttonTheme.map(function(te){if(te!=null&&te.class.split(" ").includes(K)){W=!0;var q=te.buttons.split(" ");q.includes(R)||(W=!0,q.push(R),te.buttons=q.join(" "))}return te}),W||N.options.buttonTheme.push({class:K,buttons:S})})}),this.render())}},{key:"removeButtonTheme",value:function(S,T){var N=this;if(!S&&!T)return this.options.buttonTheme=[],void this.render();S&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(S.split(" ").forEach(function(R){var K;(K=N.options)===null||K===void 0||(K=K.buttonTheme)===null||K===void 0||K.map(function(W,te){if(W&&T&&T.includes(W.class)||!T){var q,Re,je=(q=W)===null||q===void 0?void 0:q.buttons.split(" ").filter(function(Be){return Be!==R});W&&je!=null&&je.length?W.buttons=je.join(" "):((Re=N.options.buttonTheme)===null||Re===void 0||Re.splice(te,1),W=null)}return W})}),this.render())}},{key:"getButtonElement",value:function(S){var T,N=this.buttonElements[S];return N&&(T=N.length>1?N:N[0]),T}},{key:"inputPatternIsValid",value:function(S){var T,N=this.options.inputPattern;if((T=N instanceof RegExp?N:N[this.options.inputName||this.defaultName])&&S){var R=T.test(S);return this.options.debug&&console.log('inputPattern ("'.concat(T,'"): ').concat(R?"passed":"did not pass!")),R}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var S=this.options.physicalKeyboardHighlightPreventDefault,T=S!==void 0&&S;document.addEventListener("keyup",this.handleKeyUp,T),document.addEventListener("keydown",this.handleKeyDown,T),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(S){this.caretEventHandler(S),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(S)}},{key:"handleKeyDown",value:function(S){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(S)}},{key:"handleMouseUp",value:function(S){this.caretEventHandler(S)}},{key:"handleTouchEnd",value:function(S){this.caretEventHandler(S)}},{key:"handleSelect",value:function(S){this.caretEventHandler(S)}},{key:"handleSelectionChange",value:function(S){navigator.userAgent.includes("Firefox")||this.caretEventHandler(S)}},{key:"caretEventHandler",value:function(S){var T,N=this;S.target.tagName&&(T=S.target.tagName.toLowerCase()),this.dispatch(function(R){var K=S.target===R.keyboardDOM||S.target&&R.keyboardDOM.contains(S.target);if(N.options.syncInstanceInputs&&Array.isArray(S.path)&&(K=S.path.some(function(q){var Re;return q==null||(Re=q.hasAttribute)===null||Re===void 0?void 0:Re.call(q,"data-skInstance")})),(T==="textarea"||T==="input"&&["text","search","url","tel","password"].includes(S.target.type))&&!R.options.disableCaretPositioning){var W=S.target.selectionStart,te=S.target.selectionEnd;R.options.rtl&&(W=R.utilities.getRtlOffset(W,R.getInput()),te=R.utilities.getRtlOffset(te,R.getInput())),R.setCaretPosition(W,te),R.activeInputElement=S.target,R.options.debug&&console.log("Caret at: ",R.getCaretPosition(),R.getCaretPositionEnd(),S&&S.target.tagName.toLowerCase(),"(".concat(R.keyboardDOMClass,")"),S==null?void 0:S.type)}else!R.options.disableCaretPositioning&&K||(S==null?void 0:S.type)==="selectionchange"||(R.setCaretPosition(null),R.activeInputElement=null,R.options.debug&&console.log('Caret position reset due to "'.concat(S==null?void 0:S.type,'" event'),S))})}},{key:"recurseButtons",value:function(S){var T=this;S&&Object.keys(this.buttonElements).forEach(function(N){return T.buttonElements[N].forEach(S)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var S=this.options.physicalKeyboardHighlightPreventDefault,T=S!==void 0&&S;document.removeEventListener("keyup",this.handleKeyUp,T),document.removeEventListener("keydown",this.handleKeyDown,T),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(N){N&&(N.onpointerdown=null,N.onpointerup=null,N.onpointercancel=null,N.ontouchstart=null,N.ontouchend=null,N.ontouchcancel=null,N.onclick=null,N.onmousedown=null,N.onmouseup=null,N.remove(),N=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(S){var T=this.options.buttonTheme,N=[];return Array.isArray(T)&&T.forEach(function(R){if(R&&R.class&&typeof R.class=="string"&&R.buttons&&typeof R.buttons=="string"){var K=R.class.split(" ");R.buttons.split(" ").includes(S)&&(N=[].concat(z(N),z(K)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',R)}),N}},{key:"setDOMButtonAttributes",value:function(S,T){var N=this.options.buttonAttributes;Array.isArray(N)&&N.forEach(function(R){R.attribute&&typeof R.attribute=="string"&&R.value&&typeof R.value=="string"&&R.buttons&&typeof R.buttons=="string"?R.buttons.split(" ").includes(S)&&T(R.attribute,R.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',R)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(S){if(S.target.classList.contains("hg-button"))return S.preventDefault(),S.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var S=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(T){var N=new T(S);N.init&&N.init(S)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(S,T){return!!this.modules[S]&&this.modules[S][T]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(S,T,N,R){var K=this,W=Array.from(S.children),te=0;return W.length&&N.forEach(function(q,Re){var je=R[Re];if(!(je&&je>q))return!1;var Be=q-te,Le=je-te,Ve=document.createElement("div");Ve.className+="hg-button-container";var ge="".concat(K.options.layoutName,"-r").concat(T,"c").concat(Re);Ve.setAttribute("data-skUID",ge);var vt=W.splice(Be,Le-Be+1);te=Le-Be,vt.forEach(function(cn){return Ve.appendChild(cn)}),W.splice(Be,0,Ve),S.innerHTML="",W.forEach(function(cn){return S.appendChild(cn)}),K.options.debug&&console.log("rowDOMContainer",vt,Be,Le,te+1)}),S}},{key:"render",value:function(){var S=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var T="hg-layout-".concat(this.options.layoutName),N=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},R=this.options.useTouchEvents||!1,K=R?"hg-touch-events":"",W=this.options.useMouseEvents||!1,te=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,T,this.keyboardPluginClasses,K),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",N[this.options.layoutName||this.defaultName].forEach(function(q,Re){var je=q.split(" ");S.options.excludeFromLayout&&S.options.excludeFromLayout[S.options.layoutName||S.defaultName]&&(je=je.filter(function(ge){return S.options.excludeFromLayout&&!S.options.excludeFromLayout[S.options.layoutName||S.defaultName].includes(ge)}));var Be=document.createElement("div");Be.className+="hg-row";var Le=[],Ve=[];je.forEach(function(ge,vt){var cn,Ll=!te&&typeof ge=="string"&&ge.length>1&&ge.indexOf("[")===0,Ss=!te&&typeof ge=="string"&&ge.length>1&&ge.indexOf("]")===ge.length-1;Ll&&(Le.push(vt),ge=ge.replace(/\[/g,"")),Ss&&(Ve.push(vt),ge=ge.replace(/\]/g,""));var ea=S.utilities.getButtonClass(ge),ta=S.utilities.getButtonDisplayName(ge,S.options.display,S.options.mergeDisplay),$8=S.options.useButtonTag?"button":"div",Mn=document.createElement($8);Mn.className+="hg-button ".concat(ea),(cn=Mn.classList).add.apply(cn,z(S.getButtonThemeClasses(ge))),S.setDOMButtonAttributes(ge,function(qt,z8){Mn.setAttribute(qt,z8)}),S.activeButtonClass="hg-activeButton",!S.utilities.pointerEventsSupported()||R||W?R?(Mn.ontouchstart=function(qt){S.handleButtonClicked(ge,qt),S.handleButtonMouseDown(ge,qt)},Mn.ontouchend=function(qt){S.handleButtonMouseUp(ge,qt)},Mn.ontouchcancel=function(qt){S.handleButtonMouseUp(ge,qt)}):(Mn.onclick=function(qt){S.setMouseHold(!1),typeof S.options.onKeyReleased!="function"&&S.handleButtonClicked(ge,qt)},Mn.onmousedown=function(qt){typeof S.options.onKeyReleased!="function"||S.isMouseHold||S.handleButtonClicked(ge,qt),S.handleButtonMouseDown(ge,qt)},Mn.onmouseup=function(qt){S.handleButtonMouseUp(ge,qt)}):(Mn.onpointerdown=function(qt){S.handleButtonClicked(ge,qt),S.handleButtonMouseDown(ge,qt)},Mn.onpointerup=function(qt){S.handleButtonMouseUp(ge,qt)},Mn.onpointercancel=function(qt){S.handleButtonMouseUp(ge,qt)}),Mn.setAttribute("data-skBtn",ge);var B8="".concat(S.options.layoutName,"-r").concat(Re,"b").concat(vt);Mn.setAttribute("data-skBtnUID",B8);var zA=document.createElement("span");zA.innerHTML=ta,Mn.appendChild(zA),S.buttonElements[ge]||(S.buttonElements[ge]=[]),S.buttonElements[ge].push(Mn),Be.appendChild(Mn)}),Be=S.parseRowDOMContainers(Be,Re,Le,Ve),S.keyboardRowsDOM.appendChild(Be)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||R||W?R?(document.ontouchend=function(q){return S.handleButtonMouseUp(void 0,q)},document.ontouchcancel=function(q){return S.handleButtonMouseUp(void 0,q)},this.keyboardDOM.ontouchstart=function(q){return S.handleKeyboardContainerMouseDown(q)}):R||(document.onmouseup=function(q){return S.handleButtonMouseUp(void 0,q)},this.keyboardDOM.onmousedown=function(q){return S.handleKeyboardContainerMouseDown(q)}):(document.onpointerup=function(q){return S.handleButtonMouseUp(void 0,q)},this.keyboardDOM.onpointerdown=function(q){return S.handleKeyboardContainerMouseDown(q)}),this.onInit())}}],O&&V(I.prototype,O),B&&V(I,B),Object.defineProperty(I,"prototype",{writable:!1}),I;var I,O,B}(),Z=_e,ue=Z;return u}()},442:function(a){a.exports=n}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var u=r[a]={exports:{}};return i[a].call(u.exports,u,u.exports,s),u.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var u in l)s.o(l,u)&&!s.o(a,u)&&Object.defineProperty(a,u,{enumerable:!0,get:l[u]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return m},default:function(){return w}});var a=s(442);function l(v){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},l(v)}function u(v,y){var b=Object.keys(v);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(v);y&&(_=_.filter(function(k){return Object.getOwnPropertyDescriptor(v,k).enumerable})),b.push.apply(b,_)}return b}function c(v){for(var y=1;y<arguments.length;y++){var b=arguments[y]!=null?arguments[y]:{};y%2?u(Object(b),!0).forEach(function(_){d(v,_,b[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(b)):u(Object(b)).forEach(function(_){Object.defineProperty(v,_,Object.getOwnPropertyDescriptor(b,_))})}return v}function d(v,y,b){return(y=function(_){var k=function(C,E){if(l(C)!="object"||!C)return C;var P=C[Symbol.toPrimitive];if(P!==void 0){var M=P.call(C,E||"default");if(l(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(E==="string"?String:Number)(C)}(_,"string");return l(k)=="symbol"?k:k+""}(y))in v?Object.defineProperty(v,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):v[y]=b,v}var h=function(v){return c(c({},v),{},{keyboardRef:null})},f=s(651),p=s.n(f),m=function(v){var y=v.baseClass||"react-simple-keyboard",b=a.useRef(null),_=a.useRef(null),k=a.useRef(null),C=a.useRef(v);return a.useEffect(function(){return function(){k.current&&k.current.destroy(),b.current=!1}},[]),a.useEffect(function(){var E=function($){return c(c({},$),{},{theme:"simple-keyboard ".concat($.theme||"hg-theme-default")})}(v);if(!b.current){b.current=!0,E.debug&&console.log("ReactSimpleKeyboard: Init");var P=_.current,M=".".concat(y);k.current=new(p())(P||M,E),E.keyboardRef&&E.keyboardRef(k.current)}var D=function($,G){var z=h(G),X=h($);return Object.keys(z).filter(function(ee){return z[ee]!==X[ee]})}(C.current,E);if(D.length){var L=k.current;C.current=E,L==null||L.setOptions(E),E.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",D)}},[b,y,C,v]),a.createElement("div",{className:y,ref:_})},w=m}(),o}()})})(xz);var qle=xz.exports;const Yle=Hu(qle),Zle={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w  r t y    p  +","{lock}  s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W  R T Y    P  *","{lock}  S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y  i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y  I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},Jle={en:{"{bksp}":"Backspace ","{enter}":"Enter ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Caps Lock ","{space}":"Space"},es:{"{bksp}":"","{enter}":"Intro ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Bloq Mays ","{space}":"Espacio"}},nN="          ",iN="  ";function Qle(){const t=dE(),e=wt(),{status:n,dispatch:i,devices:r}=Rn(),[s,o]=x.useState("none"),[a,l]=x.useState(!1),[u,c]=x.useState(!1),d=x.useMemo(()=>[t,t==="es"&&(a&&"accent"||u&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,u]),h=x.useCallback(f=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",f)},[n,i,r.keyboard]);return r.keyboard?g.jsxs("div",{className:"absolute left-[1450px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),g.jsx(Yle,{theme:$e("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",u&&"hg-diaeresisDeadKey"),layoutName:d,layout:Zle,display:Jle[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:nN},{class:"hg-diaeresisDeadKeyButton",buttons:iN}],disableButtonHold:!0,onKeyPress:f=>{if(f==="{shiftleft}"||f==="{shiftright}"){o(p=>p==="none"?"once":"none");return}if(f==="{lock}"){o(p=>p==="none"?"lock":"none");return}if(t==="es"){if(a){nN.includes(f)&&(l(!1),s==="once"&&o("none"),h(f));return}else if(f===""){l(!0);return}if(u){iN.includes(f)&&(c(!1),s==="once"&&o("none"),h(f));return}else if(f===""){c(!0);return}}s==="once"&&o("none"),h(f==="{bksp}"?"\b":f==="{enter}"?`
`:f==="{tab}"?"	":f==="{space}"?" ":f)}})]}):null}function eue(){const t=wt(),{devices:e}=Rn(),n=lt(XE).toArray();return e.leds?g.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),g.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>g.jsx("div",{className:$e("relative h-7 w-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:g.jsx("div",{className:$e("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})},r))})]}):null}function tue(){const t=wt(),e=lt(Qte),n=lt(qe.IP),i=lt(y5),r=lt(w5),s=()=>{const o=[];for(let a=0;a<256;a+=16){const l=e.slice(a,a+16);o.push(l)}return o};return g.jsxs("div",{className:"absolute left-[800px] top-0 z-10 h-auto w-auto rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.memory.name")}),g.jsx("div",{className:"m-4 overflow-x-auto",children:g.jsxs("table",{className:"border-collapse w-auto mx-auto text-center font-mono",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{}),Array.from({length:16}).map((o,a)=>g.jsx("th",{className:"border border-gray-300 w-8 h-8 bg-mantis-500",children:a.toString(16).toUpperCase()},a))]})}),g.jsx("tbody",{children:s().map((o,a)=>g.jsxs("tr",{children:[g.jsx("th",{className:"border border-gray-300 w-8 h-8 bg-mantis-500",children:a.toString(16).toUpperCase()}),o.map((l,u)=>{var c,d,h;return g.jsx("td",{className:"border border-gray-300 w-8 h-8",children:g.jsx(nue,{address:l.address,value:l.value,isIP:l.address.valueOf()===n.valueOf(),isProgramAddress:!!i.find(f=>f.address===l.address.value),isDataAddress:!!r.find(f=>f.address===l.address.value),label:((c=i.find(f=>f.address===l.address.value))==null?void 0:c.name)||((d=r.find(f=>f.address===l.address.value))==null?void 0:d.label)||null,length:((h=i.find(f=>f.address===l.address.value))==null?void 0:h.length)??null})},u)})]},a))})]})})]})}function nue({address:t,value:e,isIP:n,isProgramAddress:i,isDataAddress:r,label:s,length:o}){const a=wt(),l=lt(_p),u=a("computer.memory.cell",t);return g.jsxs(wz,{children:[g.jsx(bz,{asChild:!0,children:g.jsx(yn.div,{title:u,className:`cursor-pointer border border-stone-600 w-8 h-8 flex items-center justify-center ${n?"bg-red-500":i?"bg-blue-500":r?"bg-teal-500":"bg-stone-800"} text-white`,style:t.value===l.value?Nt("memory.operating-cell"):void 0,children:e.toString("hex")})}),g.jsxs(wA,{className:"w-60",children:[g.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[u," ",s?g.jsxs("span",{className:"text-mantis-400 font-bold",children:["(",s,")",o!==null&&o!==""&&g.jsxs("span",{className:"text-white text-xs font-normal",children:[" Bytes: ",o]})]}):""]}),g.jsx("hr",{className:"border-stone-600"}),g.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(c=>g.jsxs("li",{children:[g.jsx("b",{className:"font-medium",children:a(`generics.byte-representation.${c}`)}),":"," ",g.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(c)})]},c))})]})]})}function iue(){const t=wt(),{devices:e}=Rn();return e.pic?g.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsxs("div",{className:"flex items-start",children:[g.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),g.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[g.jsx(rr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:qE,springs:"pic.IMR",emphasis:!0}),g.jsx(rr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:YE,springs:"pic.IRR",emphasis:!0}),g.jsx(rr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:ZE,springs:"pic.ISR",emphasis:!0})]})]}),g.jsx("hr",{className:"mb-2 border-stone-600"}),g.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:Gy.map((n,i)=>g.jsx(rr,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function rue(){const t=wt(),{devices:e}=Rn();return e.pio?g.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"mb-2 block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),g.jsx("hr",{className:"border-stone-600"}),g.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[g.jsx(rr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:JE,springs:"pio.PA"}),g.jsx(rr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:eA,springs:"pio.CA"})]}),g.jsx("hr",{className:"border-stone-600"}),g.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[g.jsx(rr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:QE,springs:"pio.PB"}),g.jsx(rr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:tA,springs:"pio.CB"})]})]}):null}const sue="_printer_fbkny_2",oue="_shadow_fbkny_6",aue="_sides_fbkny_11",lue="_front_fbkny_22",uue="_trailContainer_fbkny_27",cue="_trail_fbkny_27",due="_paper_fbkny_33",Vl={printer:sue,shadow:oue,sides:aue,front:lue,trailContainer:uue,trail:cue,paper:due},hue=Array.from({length:5},(t,e)=>e);function fue(){const t=wt(),{devices:e}=Rn(),n=lt(Ky),i=lt(Xy);return e.printer?g.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:g.jsxs("div",{className:Vl.printer,title:t("computer.printer.name"),children:[g.jsx("div",{className:Vl.shadow}),g.jsx("div",{className:Vl.sides}),g.jsxs("div",{className:Vl.front,children:[g.jsx("div",{className:Vl.trailContainer,children:g.jsx("div",{className:Vl.trail,children:g.jsx("pre",{className:Vl.paper,children:i})})}),g.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:hue.map(r=>{const s=n[r]?x3(n[r].unsigned):null;return g.jsx("span",{className:$e("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),g.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:g.jsx(yn.div,{className:"h-full bg-mantis-400",style:{width:Nt("printer.printing.progress").to(r=>`${r*100}%`),opacity:Nt("printer.printing.opacity")}})})]})]})}):null}const pue="_container_6nvz7_2",mue="_text_6nvz7_22",rN={container:pue,text:mue};function gue(){const t=wt(),{devices:e}=Rn(),n=lt(nA);return e.screen?g.jsxs("div",{className:"absolute left-[1450px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),g.jsx("div",{className:rN.container,children:g.jsx("pre",{className:rN.text,children:n})})]}):null}function vue(){const t=wt(),{status:e,dispatch:n,devices:i}=Rn(),r=lt(iA).toArray();return i.switches?g.jsxs("div",{className:"absolute left-[1300px] top-[700px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),g.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:r.map((s,o)=>g.jsx("div",{className:"w-6",children:g.jsx(pa,{checked:s,onCheckedChange:()=>n("switch.toggle",o),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800",disabled:e.type!=="running"})},o))})]}):null}function yue(){const t=wt(),{devices:e}=Rn();return e.timer?g.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[g.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),g.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[g.jsx(rr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:rA,springs:"timer.CONT"}),g.jsx(rr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:sA,springs:"timer.COMP"})]})]}):null}function Sz(){const t=x.useRef(null);return g.jsx("div",{className:"relative h-full w-full",children:g.jsxs(mle,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[g.jsx(yle,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:g.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[g.jsx(Cle,{}),g.jsx(Ule,{}),g.jsx(zle,{}),g.jsx(ble,{}),g.jsx(tue,{}),g.jsx(Xle,{}),g.jsx(iue,{}),g.jsx(rue,{}),g.jsx(yue,{}),g.jsx(Ele,{}),g.jsx(Kle,{}),g.jsx(Qle,{}),g.jsx(eue,{}),g.jsx(fue,{}),g.jsx(vue,{}),g.jsx(gue,{})]})}),g.jsx(wle,{wrapperRef:t})]})})}const wue=1024;let bue=0;class E1{constructor(e,n){this.from=e,this.to=n}}class ut{constructor(e={}){this.id=bue++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Hi.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}ut.closedBy=new ut({deserialize:t=>t.split(" ")});ut.openedBy=new ut({deserialize:t=>t.split(" ")});ut.group=new ut({deserialize:t=>t.split(" ")});ut.isolate=new ut({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});ut.contextHash=new ut({perNode:!0});ut.lookAhead=new ut({perNode:!0});ut.mounted=new ut({perNode:!0});class Zy{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[ut.mounted.id]}}const xue=Object.create(null);class Hi{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):xue,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Hi(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(ut.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(ut.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Hi.none=new Hi("",Object.create(null),0,8);class bA{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Hi(i.name,r,i.id,i.flags):i)}return new bA(n)}}const Rg=new WeakMap,sN=new WeakMap;var $n;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})($n||($n={}));class Gt{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Zy.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new ek(this.topNode,e)}cursorAt(e,n=0,i=0){let r=Rg.get(this)||this.topNode,s=new ek(r);return s.moveTo(e,n),Rg.set(this,s._tree),s}get topNode(){return new Br(this,0,0,null)}resolve(e,n=0){let i=Np(Rg.get(this)||this.topNode,e,n,!1);return Rg.set(this,i),i}resolveInner(e,n=0){let i=Np(sN.get(this)||this.topNode,e,n,!0);return sN.set(this,i),i}resolveStack(e,n=0){return kue(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&$n.IncludeAnonymous)>0;for(let l=this.cursor(o|$n.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:_A(Hi.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new Gt(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new Gt(Hi.none,n,i,r)))}static build(e){return Cue(e)}}Gt.empty=new Gt(Hi.none,[],[],0);class xA{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new xA(this.buffer,this.index)}}class bl{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Hi.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(_z(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let u=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,u)}return new bl(s,o,this.set)}}function _z(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Np(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Br&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:$n.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Br&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class kz{cursor(e=0){return new ek(this,e)}getChild(e,n=null,i=null){let r=oN(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return oN(this,e,n,i)}resolve(e,n=0){return Np(this,e,n,!1)}resolveInner(e,n=0){return Np(this,e,n,!0)}matchContext(e){return Q_(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class Br extends kz{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],d=l[e]+o.from;if(_z(r,i,d,d+c.length)){if(c instanceof bl){if(s&$n.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,i-d,r);if(h>-1)return new $a(new Sue(o,c,e,d),null,h)}else if(s&$n.IncludeAnonymous||!c.type.isAnonymous||SA(c)){let h;if(!(s&$n.IgnoreMounts)&&(h=Zy.get(c))&&!h.overlay)return new Br(h.tree,d,e,o);let f=new Br(c,d,e,o);return s&$n.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?c.children.length-1:0,n,i,r)}}}if(s&$n.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&$n.IgnoreOverlays)&&(r=Zy.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Br(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function oN(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Q_(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class Sue{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class $a extends kz{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new $a(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&$n.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new $a(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new $a(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new $a(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new Gt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Cz(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof Br&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new _ue(r,n)}class _ue{constructor(e,n){this.heads=e,this.node=n}get next(){return Cz(this.heads)}}function kue(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof Br?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=Zy.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Br(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Np(a,e,n,!1))}}return r?Cz(r):i}class ek{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Br)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Br?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&$n.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&$n.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&$n.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&$n.IncludeAnonymous||a instanceof bl||!a.type.isAnonymous||SA(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new $a(this.buffer,n,this.stack[r]);return this.bufferNode=new $a(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Q_(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Q_(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function SA(t){return t.children.some(e=>e instanceof bl||!e.type.isAnonymous||SA(e))}function Cue(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=wue,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new xA(n,n.length):n,l=i.types,u=0,c=0;function d(k,C,E,P,M,D){let{id:L,start:$,end:G,size:z}=a,X=c,ee=u;for(;z<0;)if(a.next(),z==-1){let _e=s[L];E.push(_e),P.push($-k);return}else if(z==-3){u=L;return}else if(z==-4){c=L;return}else throw new RangeError(`Unrecognized record size: ${z}`);let he=l[L],V,F,ne=$-k;if(G-$<=r&&(F=w(a.pos-C,M))){let _e=new Uint16Array(F.size-F.skip),Z=a.pos-F.size,ue=_e.length;for(;a.pos>Z;)ue=v(F.start,_e,ue);V=new bl(_e,G-F.start,i),ne=F.start-k}else{let _e=a.pos-z;a.next();let Z=[],ue=[],I=L>=o?L:-1,O=0,B=G;for(;a.pos>_e;)I>=0&&a.id==I&&a.size>=0?(a.end<=B-r&&(p(Z,ue,$,O,a.end,B,I,X,ee),O=Z.length,B=a.end),a.next()):D>2500?h($,_e,Z,ue):d($,_e,Z,ue,I,D+1);if(I>=0&&O>0&&O<Z.length&&p(Z,ue,$,O,$,B,I,X,ee),Z.reverse(),ue.reverse(),I>-1&&O>0){let S=f(he,ee);V=_A(he,Z,ue,0,Z.length,0,G-$,S,S)}else V=m(he,Z,ue,G-$,X-G,ee)}E.push(V),P.push(ne)}function h(k,C,E,P){let M=[],D=0,L=-1;for(;a.pos>C;){let{id:$,start:G,end:z,size:X}=a;if(X>4)a.next();else{if(L>-1&&G<L)break;L<0&&(L=z-r),M.push($,G,z),D++,a.next()}}if(D){let $=new Uint16Array(D*4),G=M[M.length-2];for(let z=M.length-3,X=0;z>=0;z-=3)$[X++]=M[z],$[X++]=M[z+1]-G,$[X++]=M[z+2]-G,$[X++]=X;E.push(new bl($,M[2]-G,i)),P.push(G-k)}}function f(k,C){return(E,P,M)=>{let D=0,L=E.length-1,$,G;if(L>=0&&($=E[L])instanceof Gt){if(!L&&$.type==k&&$.length==M)return $;(G=$.prop(ut.lookAhead))&&(D=P[L]+$.length+G)}return m(k,E,P,M,D,C)}}function p(k,C,E,P,M,D,L,$,G){let z=[],X=[];for(;k.length>P;)z.push(k.pop()),X.push(C.pop()+E-M);k.push(m(i.types[L],z,X,D-M,$-D,G)),C.push(M-E)}function m(k,C,E,P,M,D,L){if(D){let $=[ut.contextHash,D];L=L?[$].concat(L):[$]}if(M>25){let $=[ut.lookAhead,M];L=L?[$].concat(L):[$]}return new Gt(k,C,E,P,L)}function w(k,C){let E=a.fork(),P=0,M=0,D=0,L=E.end-r,$={size:0,start:0,skip:0};e:for(let G=E.pos-k;E.pos>G;){let z=E.size;if(E.id==C&&z>=0){$.size=P,$.start=M,$.skip=D,D+=4,P+=4,E.next();continue}let X=E.pos-z;if(z<0||X<G||E.start<L)break;let ee=E.id>=o?4:0,he=E.start;for(E.next();E.pos>X;){if(E.size<0)if(E.size==-3)ee+=4;else break e;else E.id>=o&&(ee+=4);E.next()}M=he,P+=z,D+=ee}return(C<0||P==k)&&($.size=P,$.start=M,$.skip=D),$.size>4?$:void 0}function v(k,C,E){let{id:P,start:M,end:D,size:L}=a;if(a.next(),L>=0&&P<o){let $=E;if(L>4){let G=a.pos-(L-4);for(;a.pos>G;)E=v(k,C,E)}C[--E]=$,C[--E]=D-k,C[--E]=M-k,C[--E]=P}else L==-3?u=P:L==-4&&(c=P);return E}let y=[],b=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,y,b,-1,0);let _=(e=t.length)!==null&&e!==void 0?e:y.length?b[0]+y[0].length:0;return new Gt(l[t.topID],y.reverse(),b.reverse(),_)}const aN=new WeakMap;function _v(t,e){if(!t.isAnonymous||e instanceof bl||e.type!=t)return 1;let n=aN.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof Gt)){n=1;break}n+=_v(t,i)}aN.set(e,n)}return n}function _A(t,e,n,i,r,s,o,a,l){let u=0;for(let p=i;p<r;p++)u+=_v(t,e[p]);let c=Math.ceil(u*1.5/8),d=[],h=[];function f(p,m,w,v,y){for(let b=w;b<v;){let _=b,k=m[b],C=_v(t,p[b]);for(b++;b<v;b++){let E=_v(t,p[b]);if(C+E>=c)break;C+=E}if(b==_+1){if(C>c){let E=p[_];f(E.children,E.positions,0,E.children.length,m[_]+y);continue}d.push(p[_])}else{let E=m[b-1]+p[b-1].length-k;d.push(_A(t,p,m,_,b,k,E,null,l))}h.push(k+y-s)}}return f(e,n,i,r,0),(a||l)(d,h,o)}class bu{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new bu(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<n.length?n[a]:null,d=c?c.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||u){let f=Math.max(h.from,l)-u,p=Math.min(h.to,d)-u;h=f>=p?null:new bu(f,p,h.tree,h.offset+u,a>0,!!c)}if(h&&r.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return r}}class Ez{startParse(e,n,i){return typeof e=="string"&&(e=new Eue(e)),i=i?i.length?i.map(r=>new E1(r.from,r.to)):[new E1(0,0)]:[new E1(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class Eue{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new ut({perNode:!0});let Aue=0;class vn{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=Aue++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof vn&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new vn(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new Jy(e);return i=>i.modified.indexOf(n)>-1?i:Jy.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let Pue=0;class Jy{constructor(e){this.name=e,this.instances=[],this.id=Pue++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&Tue(n,a.modified));if(i)return i;let r=[],s=new vn(e.name,r,e,n);for(let a of n)a.instances.push(s);let o=Rue(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(Jy.get(a,l));return s}}function Tue(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function Rue(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function Mue(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let f=r[d++];if(d==r.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+r);let c=new Qy(i,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return Az.add(e)}const Az=new ut;class Qy{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Qy.empty=new Qy([],2,null);function Pz(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let u=n[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function Nue(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function Oue(t,e,n,i=0,r=t.length){let s=new Iue(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class Iue{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let u=r,c=Due(e)||Qy.empty,d=Nue(s,c.tags);if(d&&(u&&(u+=" "),u+=d,c.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),u),c.opaque)return;let h=e.tree&&e.tree.prop(ut.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter(w=>!w.scope||w.scope(h.tree.type)),m=e.firstChild();for(let w=0,v=a;;w++){let y=w<h.overlay.length?h.overlay[w]:null,b=y?y.from+a:l,_=Math.max(n,v),k=Math.min(i,b);if(_<k&&m)for(;e.from<k&&(this.highlightRange(e,_,k,r,s),this.startSpan(Math.min(k,e.to),u),!(e.to>=b||!e.nextSibling())););if(!y||b>i)break;v=y.to+a,v>n&&(this.highlightRange(f.cursor(),Math.max(n,y.from+a),Math.min(i,v),"",p),this.startSpan(Math.min(i,v),u))}m&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function Due(t){let e=t.type.prop(Az);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const pe=vn.define,Mg=pe(),ma=pe(),lN=pe(ma),uN=pe(ma),ga=pe(),Ng=pe(ga),A1=pe(ga),As=pe(),Wl=pe(As),Cs=pe(),Es=pe(),tk=pe(),kh=pe(tk),Og=pe(),de={comment:Mg,lineComment:pe(Mg),blockComment:pe(Mg),docComment:pe(Mg),name:ma,variableName:pe(ma),typeName:lN,tagName:pe(lN),propertyName:uN,attributeName:pe(uN),className:pe(ma),labelName:pe(ma),namespace:pe(ma),macroName:pe(ma),literal:ga,string:Ng,docString:pe(Ng),character:pe(Ng),attributeValue:pe(Ng),number:A1,integer:pe(A1),float:pe(A1),bool:pe(ga),regexp:pe(ga),escape:pe(ga),color:pe(ga),url:pe(ga),keyword:Cs,self:pe(Cs),null:pe(Cs),atom:pe(Cs),unit:pe(Cs),modifier:pe(Cs),operatorKeyword:pe(Cs),controlKeyword:pe(Cs),definitionKeyword:pe(Cs),moduleKeyword:pe(Cs),operator:Es,derefOperator:pe(Es),arithmeticOperator:pe(Es),logicOperator:pe(Es),bitwiseOperator:pe(Es),compareOperator:pe(Es),updateOperator:pe(Es),definitionOperator:pe(Es),typeOperator:pe(Es),controlOperator:pe(Es),punctuation:tk,separator:pe(tk),bracket:kh,angleBracket:pe(kh),squareBracket:pe(kh),paren:pe(kh),brace:pe(kh),content:As,heading:Wl,heading1:pe(Wl),heading2:pe(Wl),heading3:pe(Wl),heading4:pe(Wl),heading5:pe(Wl),heading6:pe(Wl),contentSeparator:pe(As),list:pe(As),quote:pe(As),emphasis:pe(As),strong:pe(As),link:pe(As),monospace:pe(As),strikethrough:pe(As),inserted:pe(),deleted:pe(),changed:pe(),invalid:pe(),meta:Og,documentMeta:pe(Og),annotation:pe(Og),processingInstruction:pe(Og),definition:vn.defineModifier("definition"),constant:vn.defineModifier("constant"),function:vn.defineModifier("function"),standard:vn.defineModifier("standard"),local:vn.defineModifier("local"),special:vn.defineModifier("special")};for(let t in de){let e=de[t];e instanceof vn&&(e.name=t)}Pz([{tag:de.link,class:"tok-link"},{tag:de.heading,class:"tok-heading"},{tag:de.emphasis,class:"tok-emphasis"},{tag:de.strong,class:"tok-strong"},{tag:de.keyword,class:"tok-keyword"},{tag:de.atom,class:"tok-atom"},{tag:de.bool,class:"tok-bool"},{tag:de.url,class:"tok-url"},{tag:de.labelName,class:"tok-labelName"},{tag:de.inserted,class:"tok-inserted"},{tag:de.deleted,class:"tok-deleted"},{tag:de.literal,class:"tok-literal"},{tag:de.string,class:"tok-string"},{tag:de.number,class:"tok-number"},{tag:[de.regexp,de.escape,de.special(de.string)],class:"tok-string2"},{tag:de.variableName,class:"tok-variableName"},{tag:de.local(de.variableName),class:"tok-variableName tok-local"},{tag:de.definition(de.variableName),class:"tok-variableName tok-definition"},{tag:de.special(de.variableName),class:"tok-variableName2"},{tag:de.definition(de.propertyName),class:"tok-propertyName tok-definition"},{tag:de.typeName,class:"tok-typeName"},{tag:de.namespace,class:"tok-namespace"},{tag:de.className,class:"tok-className"},{tag:de.macroName,class:"tok-macroName"},{tag:de.propertyName,class:"tok-propertyName"},{tag:de.operator,class:"tok-operator"},{tag:de.comment,class:"tok-comment"},{tag:de.meta,class:"tok-meta"},{tag:de.invalid,class:"tok-invalid"},{tag:de.punctuation,class:"tok-punctuation"}]);var P1;const Ic=new ut;function Lue(t){return Pe.define({combine:t?e=>e.concat(t):void 0})}const jue=new ut;class us{constructor(e,n,i=[],r=""){this.data=e,this.name=r,it.prototype.hasOwnProperty("tree")||Object.defineProperty(it.prototype,"tree",{get(){return oo(this)}}),this.parser=n,this.extension=[Fd.of(this),it.languageData.of((s,o,a)=>{let l=cN(s,o,a),u=l.type.prop(Ic);if(!u)return[];let c=s.facet(u),d=l.type.prop(jue);if(d){let h=l.resolve(o-l.from,a);for(let f of d)if(f.test(h,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,n,i=-1){return cN(e,n,i).type.prop(Ic)==this.data}findRegions(e){let n=e.facet(Fd);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Ic)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(ut.mounted);if(a){if(a.tree.prop(Ic)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof Gt&&r(u,s.positions[l]+o)}};return r(oo(e),0),i}get allowsNesting(){return!0}}us.setState=Ze.define();function cN(t,e,n){let i=t.facet(Fd),r=oo(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,$n.ExcludeBuffers))s.type.isTop&&(r=s);return r}function oo(t){let e=t.field(us.state,!1);return e?e.tree:Gt.empty}class Fue{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Ch=null;class Ld{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Ld(e,n,[],Gt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new Fue(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Gt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(bu.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(bu.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ch;Ch=this;try{return e()}finally{Ch=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=dN(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,d,h)=>l.push({fromA:u,toA:c,fromB:d,toB:h})),i=bu.applyChanges(i,l),r=Gt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);c<d&&a.push({from:c,to:d})}}}return new Ld(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=dN(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Ez{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=Ch;if(l){for(let u of r)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Gt(Hi.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ch}}function dN(t,e,n){return bu.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class jd{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new jd(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Ld.create(e.facet(Fd).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new jd(i)}}us.state=xi.define({create:jd.init,update(t,e){for(let n of e.effects)if(n.is(us.setState))return n.value;return e.startState.facet(Fd)!=e.state.facet(Fd)?jd.init(e.state):t.apply(e)}});let Tz=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Tz=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const T1=typeof navigator<"u"&&(!((P1=navigator.scheduling)===null||P1===void 0)&&P1.isInputPending)?()=>navigator.scheduling.isInputPending():null,$ue=Gn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(us.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(us.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Tz(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(us.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!T1?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>T1&&T1()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:us.setState.of(new jd(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>ir(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Fd=Pe.define({combine(t){return t.length?t[0]:null},enables:t=>[us.state,$ue,Me.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class Bue{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const zue=Pe.define(),kA=Pe.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Uu(t){let e=t.facet(kA);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function nk(t,e){let n="",i=t.tabSize,r=t.facet(kA)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function Uue(t,e){t instanceof it&&(t=new CA(t));for(let i of t.state.facet(zue)){let r=i(t,e);if(r!==void 0)return r}let n=oo(t.state);return n.length>=e?Hue(t,n,e):null}class CA{constructor(e,n={}){this.state=e,this.options=n,this.unit=Uu(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Kp(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Rz=new ut;function Hue(t,e,n){let i=e.resolveStack(n),r=i.node.enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o!=i.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return Mz(i,t,n)}function Mz(t,e,n){for(let i=t;i;i=i.next){let r=Wue(i.node);if(r)return r(EA.create(e,n,i))}return 0}function Vue(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Wue(t){let e=t.type.prop(Rz);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(ut.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>que(o,!0,1,void 0,s&&!Vue(o)?r.from:void 0)}return t.parent==null?Gue:null}function Gue(){return 0}class EA extends CA{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new EA(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Kue(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return Mz(this.context.next,this.base,this.pos)}}function Kue(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Xue(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}a=l.to}}function que(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r==t.pos+o,l=Xue(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const Yue=Pe.define(),Zue=new ut;function Jue(t,e,n){let i=oo(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(Zue);if(l&&(a.to<i.length-50||i.length==t.doc.length||!Que(a))){let u=l(a,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function Que(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Nz(t,e,n){for(let i of t.facet(Yue)){let r=i(t,e,n);if(r)return r}return Jue(t,e,n)}function Oz(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const AA=Ze.define({map:Oz}),Pw=Ze.define({map:Oz});function Iz(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const fm=xi.define({create(){return Je.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(AA)&&!ece(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(Fz),r=i?Je.replace({widget:new ace(i(e.state,n.value))}):hN;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(Pw)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(r,s)=>{r<i&&s>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return t},provide:t=>Me.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(hN.range(i,r))}return Je.set(e,!0)}});function Dz(t,e,n){var i;let r=null;return(i=t.field(fm,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function ece(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function Lz(t,e){return t.field(fm,!1)?e:e.concat(Ze.appendConfig.of(oce()))}const tce=t=>{for(let e of Iz(t)){let n=Nz(t.state,e.from,e.to);if(n)return t.dispatch({effects:Lz(t.state,[AA.of(n),jz(t,n)])}),!0}return!1},nce=t=>{if(!t.state.field(fm,!1))return!1;let e=[];for(let n of Iz(t)){let i=Dz(t.state,n.from,n.to);i&&e.push(Pw.of(i),jz(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function jz(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Me.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const ice=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=Nz(e,r.from,r.to);s&&n.push(AA.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:Lz(t.state,n)}),!!n.length},rce=t=>{let e=t.state.field(fm,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(Pw.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},sce={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Fz=Pe.define({combine(t){return Al(t,sce)}});function oce(t){return[fm,lce]}function $z(t,e){let{state:n}=t,i=n.facet(Fz),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=Dz(t.state,a.from,a.to);l&&t.dispatch({effects:Pw.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const hN=Je.replace({widget:new class extends Pl{toDOM(t){return $z(t,null)}}});class ace extends Pl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return $z(e,this.value)}}const lce=Me.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class pm{constructor(e,n){this.specs=e;let i;function r(a){let l=rl.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof us?a=>a.prop(Ic)==o.data:o?a=>a==o:void 0,this.style=Pz(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new rl(i):null,this.themeType=n.themeType}static define(e,n){return new pm(e,n||{})}}const ik=Pe.define(),uce=Pe.define({combine(t){return t.length?[t[0]]:null}});function R1(t){let e=t.facet(ik);return e.length?e:t.facet(uce)}function cce(t,e){let n=[hce],i;return t instanceof pm&&(t.module&&n.push(Me.styleModule.of(t.module)),i=t.themeType),i?n.push(ik.computeN([Me.darkTheme],r=>r.facet(Me.darkTheme)==(i=="dark")?[t]:[])):n.push(ik.of(t)),n}class dce{constructor(e){this.markCache=Object.create(null),this.tree=oo(e.state),this.decorations=this.buildDeco(e,R1(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=oo(e.state),i=R1(e.state),r=i!=R1(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return Je.none;let i=new Tu;for(let{from:r,to:s}of e.visibleRanges)Oue(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=Je.mark({class:l})))},r,s);return i.finish()}}const hce=Wp.high(Gn.fromClass(dce,{decorations:t=>t.decorations}));de.meta,de.link,de.heading,de.emphasis,de.strong,de.strikethrough,de.keyword,de.atom,de.bool,de.url,de.contentSeparator,de.labelName,de.literal,de.inserted,de.string,de.deleted,de.regexp,de.escape,de.string,de.variableName,de.variableName,de.typeName,de.namespace,de.className,de.variableName,de.macroName,de.propertyName,de.comment,de.invalid;const fce=1e4,pce="()[]{}",mce=new ut;function rk(t,e,n){let i=t.prop(e<0?ut.openedBy:ut.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function sk(t){let e=t.type.prop(mce);return e?e(t.node):t}function Ig(t,e,n,i={}){let r=i.maxScanDistance||fce,s=i.brackets||pce,o=oo(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let u=rk(l.type,n,s);if(u&&l.from<l.to){let c=sk(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return gce(t,e,n,l,c,u,s)}}return vce(t,e,n,o,a.type,r,s)}function gce(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},u=0,c=a==null?void 0:a.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do if(n<0?c.to<=i.from:c.from>=i.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let d=sk(c);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(rk(c.type,n,o))u++;else if(rk(c.type,-n,o)){if(u==0){let d=sk(c);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function vce(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!c.next().done&&h<=s;){let f=c.value;n<0&&(h+=f.length);let p=e+h*n;for(let m=n>0?0:f.length-1,w=n>0?f.length:-1;m!=w;m+=n){let v=o.indexOf(f[m]);if(!(v<0||i.resolveInner(p+m,1).type!=r))if(v%2==0==n>0)d++;else{if(d==1)return{start:u,end:{from:p+m,to:p+m+1},matched:v>>1==l>>1};d--}}n>0&&(h+=f.length)}return c.done?{start:u,matched:!1}:null}function fN(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class Bz{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=fN(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:fN(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function yce(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||wce,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||RA}}function wce(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const pN=new WeakMap;class PA extends us{constructor(e){let n=Lue(e.languageData),i=yce(e),r,s=new class extends Ez{createParse(o,a,l){return new xce(r,o,a,l)}};super(n,s,[],e.name),this.topNode=kce(n,this),r=this,this.streamParser=i,this.stateAfter=new ut({perNode:!0}),this.tokenTable=e.tokenTable?new Vz(i.tokenTable):_ce}static define(e){return new PA(e)}getIndent(e){let n,{overrideIndentation:i}=e.options;i&&(n=pN.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let r=TA(this,e.node.tree,0,e.node.from,n??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=0),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),u=Math.min(e.pos,l.to);if(l.length){let c=i?i(l.from):-1,d=new Bz(l.text,e.state.tabSize,e.unit,c<0?void 0:c);for(;d.pos<u-l.from;)Uz(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(u==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return i&&n==null&&pN.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function TA(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],u=a instanceof Gt&&l<r&&TA(t,a,l,i,r);if(u)return u}return null}function zz(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&n==0&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof Gt){if(!(l=zz(t,a,n-o,i-o,r)))break;return r?new Gt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function bce(t,e,n,i,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&TA(t,s.tree,0-s.offset,n,a),u;if(l&&l.pos<=i&&(u=zz(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:u}}return{state:t.streamParser.startState(r?Uu(r):4),tree:Gt.empty}}class xce{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=Ld.get(),o=r[0].from,{state:a,tree:l}=bce(e,i,o,r[r.length-1].to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Uu(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Ld.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(n,r,1),n+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=i:this.chunk.push(e,n,i,s),r}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new Bz(n,e?e.state.tabSize:4,e?Uu(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=Uz(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Gt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Sce,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Gt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Gt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Uz(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const RA=Object.create(null),Op=[Hi.none],Sce=new bA(Op),mN=[],gN=Object.create(null),Hz=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Hz[t]=Wz(RA,e);class Vz{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Hz)}resolve(e){return e?this.table[e]||(this.table[e]=Wz(this.extra,e)):0}}const _ce=new Vz(RA);function M1(t,e){mN.indexOf(t)>-1||(mN.push(t),console.warn(e))}function Wz(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let u of a.split(".")){let c=t[u]||de[u];c?typeof c=="function"?l.length?l=l.map(c):M1(u,`Modifier ${u} used at start of tag`):l.length?M1(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:M1(u,`Unknown highlighting tag ${u}`)}for(let u of l)n.push(u)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=gN[r];if(s)return s.id;let o=gN[r]=Hi.define({id:Op.length,name:i,props:[Mue({[i]:n})]});return Op.push(o),o.id}function kce(t,e){let n=Hi.define({id:Op.length,name:"Document",props:[Ic.add(()=>t),Rz.add(()=>i=>e.getIndent(i))],top:!0});return Op.push(n),n}jt.RTL,jt.LTR;const Cce=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=MA(t.state,n.from);return i.line?Ece(t):i.block?Rce(t):!1};function mm(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const Ece=mm(NA,0),Ace=mm(NA,1),Pce=mm(NA,2),Tce=mm(Gz,0),Rce=mm((t,e)=>Gz(t,e,Nce(e)),0);function MA(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const Eh=50;function Mce(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Eh,i),o=t.sliceDoc(r,r+Eh),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let c,d;r-i<=2*Eh?c=d=t.sliceDoc(i,r):(c=t.sliceDoc(i,i+Eh),d=t.sliceDoc(r-Eh,r));let h=/^\s*/.exec(c)[0].length,f=/\s*$/.exec(d)[0].length,p=d.length-f-n.length;return c.slice(h,h+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:r-f-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function Nce(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function Gz(t,e,n=e.selection.ranges){let i=n.map(s=>MA(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>Mce(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function NA(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,u=MA(e,s).line;if(u){for(let c=s;c<=o;){let d=e.doc.lineAt(c);if(d.from>r&&(s==o||o>d.from)){r=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,p=d.text.slice(h,h+u.length)==u?h:-1;h<d.text.length&&h<l&&(l=h),i.push({line:d,comment:p,token:u,indent:h,empty:f,single:!1})}c=d.to+1}if(l<1e9)for(let c=a;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:d}of i)(d||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const ok=Yo.define(),Oce=Yo.define(),Ice=Pe.define(),Kz=Pe.define({combine(t){return Al(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),Xz=xi.define({create(){return Ks.empty},update(t,e){let n=e.state.facet(Kz),i=e.annotation(ok);if(i){let l=$i.fromTransaction(e,i.selection),u=i.side,c=u==0?t.undone:t.done;return l?c=e0(c,c.length,n.minDepth,l):c=Zz(c,e.startState.selection),new Ks(u==0?i.rest:c,u==0?c:i.rest)}let r=e.annotation(Oce);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(bn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=$i.fromTransaction(e),o=e.annotation(bn.time),a=e.annotation(bn.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Ks(t.done.map($i.fromJSON),t.undone.map($i.fromJSON))}});function Dce(t={}){return[Xz,Kz.of(t),Me.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?qz:e.inputType=="historyRedo"?ak:null;return i?(e.preventDefault(),i(n)):!1}})]}function OA(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(Xz,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const qz=OA(0,!1),ak=OA(1,!1),Lce=OA(0,!0);class $i{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new $i(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new $i(e.changes&&pn.fromJSON(e.changes),[],e.mapped&&Zs.fromJSON(e.mapped),e.startSelection&&ie.fromJSON(e.startSelection),e.selectionsAfter.map(ie.fromJSON))}static fromTransaction(e,n){let i=Nr;for(let r of e.startState.facet(Ice)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new $i(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Nr)}static selection(e){return new $i(void 0,Nr,void 0,void 0,e)}}function e0(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function jce(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];a>=u&&o<=c&&(i=!0)}}),i}function Fce(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function Yz(t,e){return t.length?e.length?t.concat(e):t:e}const Nr=[],$ce=200;function Zz(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-$ce));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),e0(t,t.length-1,1e9,n.setSelAfter(i)))}else return[$i.selection([e])]}function Bce(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function N1(t,e){if(!t.length)return t;let n=t.length,i=Nr;for(;n;){let r=zce(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[$i.selection(i)]:Nr}function zce(t,e,n){let i=Yz(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Nr,n);if(!t.changes)return $i.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new $i(r,Ze.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const Uce=/^(input\.type|delete)($|\.)/;class Ks{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Ks(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||Uce.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,jce(a.changes,e.changes))||i=="input.type.compose")?o=e0(o,o.length-1,r.minDepth,new $i(e.changes.compose(a.changes),Yz(Ze.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Nr)):o=e0(o,o.length,r.minDepth,e),new Ks(o,Nr,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Nr;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&Fce(s[s.length-1],e)?this:new Ks(Zz(this.done,e),this.undone,n,i)}addMapping(e){return new Ks(N1(this.done,e),N1(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:ok.of({side:e,rest:Bce(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?Nr:r.slice(0,r.length-1);return s.mapped&&(a=N1(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:ok.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Ks.empty=new Ks(Nr,Nr);function gm(t,e){return ie.create(t.ranges.map(e),t.mainIndex)}function Ol(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function qu({state:t,dispatch:e},n){let i=gm(t.selection,n);return i.eq(t.selection,!0)?!1:(e(Ol(t,i)),!0)}function Tw(t,e){return ie.cursor(e?t.to:t.from)}function Jz(t,e){return qu(t,n=>n.empty?t.moveByChar(n,e):Tw(n,e))}function Il(t){return t.textDirectionAt(t.state.selection.main.head)==jt.LTR}const vN=t=>Jz(t,!Il(t)),yN=t=>Jz(t,Il(t));function Qz(t,e){return qu(t,n=>n.empty?t.moveByGroup(n,e):Tw(n,e))}const Hce=t=>Qz(t,!Il(t)),Vce=t=>Qz(t,Il(t));function e8(t,e){return qu(t,n=>{if(!n.empty)return Tw(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const wN=t=>e8(t,!1),bN=t=>e8(t,!0);function t8(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Me.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function n8(t,e){let n=t8(t),{state:i}=t,r=gm(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):Tw(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,u=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<u&&(s=Me.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Ol(i,r),{effects:s}),!0}const O1=t=>n8(t,!1),I1=t=>n8(t,!0);function Rw(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=ie.cursor(i.from+s))}return r}const xN=t=>qu(t,e=>Rw(t,e,!0)),SN=t=>qu(t,e=>Rw(t,e,!1)),Wce=t=>qu(t,e=>ie.cursor(t.lineBlockAt(e.head).from,1)),Gce=t=>qu(t,e=>ie.cursor(t.lineBlockAt(e.head).to,-1));function Kce(t,e,n){let i=!1,r=gm(t.selection,s=>{let o=Ig(t,s.head,-1)||Ig(t,s.head,1)||s.head>0&&Ig(t,s.head-1,1)||s.head<t.doc.length&&Ig(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return ie.cursor(a)});return i?(e(Ol(t,r)),!0):!1}const Xce=({state:t,dispatch:e})=>Kce(t,e);function Dl(t,e){let n=gm(t.state.selection,i=>{let r=e(i);return ie.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Ol(t.state,n)),!0)}function i8(t,e){return Dl(t,n=>t.moveByChar(n,e))}const _N=t=>i8(t,!Il(t)),kN=t=>i8(t,Il(t));function r8(t,e){return Dl(t,n=>t.moveByGroup(n,e))}const qce=t=>r8(t,!Il(t)),Yce=t=>r8(t,Il(t));function s8(t,e){return Dl(t,n=>t.moveVertically(n,e))}const CN=t=>s8(t,!1),EN=t=>s8(t,!0);function o8(t,e){return Dl(t,n=>t.moveVertically(n,e,t8(t).height))}const AN=t=>o8(t,!1),PN=t=>o8(t,!0),TN=t=>Dl(t,e=>Rw(t,e,!0)),RN=t=>Dl(t,e=>Rw(t,e,!1)),Zce=t=>Dl(t,e=>ie.cursor(t.lineBlockAt(e.head).from)),Jce=t=>Dl(t,e=>ie.cursor(t.lineBlockAt(e.head).to)),MN=({state:t,dispatch:e})=>(e(Ol(t,{anchor:0})),!0),NN=({state:t,dispatch:e})=>(e(Ol(t,{anchor:t.doc.length})),!0),ON=({state:t,dispatch:e})=>(e(Ol(t,{anchor:t.selection.main.anchor,head:0})),!0),IN=({state:t,dispatch:e})=>(e(Ol(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Qce=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),ede=({state:t,dispatch:e})=>{let n=Nw(t).map(({from:i,to:r})=>ie.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:ie.create(n),userEvent:"select"})),!0};function Mw(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=Dg(t,l,!1)):l>o&&(n="delete.forward",l=Dg(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Dg(t,o,!1),a=Dg(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:ie.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Me.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Dg(t,e,n){if(t instanceof Me)for(let i of t.state.facet(Me.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const a8=(t,e,n)=>Mw(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),a,l;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let u=Kp(a,s.tabSize),c=u%Uu(s)||Uu(s);for(let d=0;d<c&&a[a.length-1-d]==" ";d++)r--;l=r}else l=Un(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=Un(o.text,l-o.from,!1,!1)+o.from);return l}),D1=t=>a8(t,!1,!0),DN=t=>a8(t,!0,!1),l8=(t,e)=>Mw(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=Un(s.text,i-s.from,e)+s.from,u=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||i!=n.head)&&(a=c),i=l}return i}),LN=t=>l8(t,!1),tde=t=>l8(t,!0),jN=t=>Mw(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),nde=t=>Mw(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),ide=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:pt.of(["",""])},range:ie.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},rde=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:Un(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:Un(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:ie.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Nw(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function u8(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of Nw(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(ie.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(ie.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:ie.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const sde=({state:t,dispatch:e})=>u8(t,e,!1),ode=({state:t,dispatch:e})=>u8(t,e,!0);function c8(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of Nw(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const ade=({state:t,dispatch:e})=>c8(t,e,!1),lde=({state:t,dispatch:e})=>c8(t,e,!0),ude=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Nw(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=gm(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),a=t.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function cde(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=oo(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(ut.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const FN=dde(!1);function dde(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&cde(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new CA(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=Uue(u,s);for(c==null&&(c=Kp(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",nk(e,c)];return l&&d.push(nk(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:pt.of(d)},range:ie.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function d8(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:ie.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const lk=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(d8(t,(n,i)=>{i.push({from:n.from,insert:t.facet(kA)})}),{userEvent:"input.indent"})),!0),$N=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(d8(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Kp(r,t.tabSize),o=0,a=nk(t,Math.max(0,s-Uu(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0);function Tt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)h8(t,arguments[e]);return t}function h8(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)h8(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const BN=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Ip{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(BN(a)):BN,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return fi(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=_C(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=ss(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Ip.prototype[Symbol.iterator]=function(){return this});const f8={from:-1,to:-1,match:/.*/.exec("")},IA="gm"+(/x/.unicode==null?"":"u");class p8{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=f8,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new m8(e,n,i,r,s);this.re=new RegExp(n,IA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=t0(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=t0(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const L1=new WeakMap;class id{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=L1.get(e);if(!r||r.from>=i||r.to<=n){let a=new id(n,e.sliceString(n,i));return L1.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),L1.set(e,new id(o,s)),new id(n,s.slice(n-o,i-o))}}class m8{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=f8,this.matchPos=t0(e,r),this.re=new RegExp(n,IA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=id.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=t0(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=id.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(p8.prototype[Symbol.iterator]=m8.prototype[Symbol.iterator]=function(){return this});function hde(t){try{return new RegExp(t,IA),!0}catch{return!1}}function t0(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function uk(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Tt("input",{class:"cm-textfield",name:"line",value:e}),i=Tt("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:n0.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},Tt("label",t.state.phrase("Go to line"),": ",n)," ",Tt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,u,c,d]=s,h=c?+c.slice(1):0,f=u?+u:a.number;if(u&&d){let w=f/100;l&&(w=w*(l=="-"?-1:1)+a.number/o.doc.lines),f=Math.round(o.doc.lines*w)}else u&&l&&(f=f*(l=="-"?-1:1)+a.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,f))),m=ie.cursor(p.from+Math.max(0,Math.min(h,p.length)));t.dispatch({effects:[n0.of(!1),Me.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:i}}const n0=Ze.define(),zN=xi.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(n0)&&(t=n.value);return t},provide:t=>ep.from(t,e=>e?uk:null)}),fde=t=>{let e=Qf(t,uk);if(!e){let n=[n0.of(!0)];t.state.field(zN,!1)==null&&n.push(Ze.appendConfig.of([zN,pde])),t.dispatch({effects:n}),e=Qf(t,uk)}return e&&e.dom.querySelector("input").select(),!0},pde=Me.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),mde=({state:t,dispatch:e})=>{let{selection:n}=t,i=ie.create(n.ranges.map(r=>t.wordAt(r.head)||ie.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function gde(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new Ip(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Ip(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const vde=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return mde({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=gde(t,i);return r?(e(t.update({selection:t.selection.addRange(ie.range(r.from,r.to),!1),effects:Me.scrollIntoView(r.to)})),!0):!1},Zd=Pe.define({combine(t){return Al(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Ede(e),scrollToMatch:e=>Me.scrollIntoView(e)})}});class g8{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||hde(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new xde(this):new wde(this)}getCursor(e,n=0,i){let r=e.doc?e:it.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?hc(this,r,n,i):dc(this,r,n,i)}}class v8{constructor(e){this.spec=e}}function dc(t,e,n,i){return new Ip(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?yde(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function yde(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(i0(r,n-s))!=Hn.Word||e(r0(r,n-s))!=Hn.Word)&&(e(r0(r,i-s))!=Hn.Word||e(i0(r,i-s))!=Hn.Word))}class wde extends v8{constructor(e){super(e)}nextMatch(e,n,i){let r=dc(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=dc(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=dc(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=dc(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=dc(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function hc(t,e,n,i){return new p8(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?bde(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function i0(t,e){return t.slice(Un(t,e,!1),e)}function r0(t,e){return t.slice(e,Un(t,e))}function bde(t){return(e,n,i)=>!i[0].length||(t(i0(i.input,i.index))!=Hn.Word||t(r0(i.input,i.index))!=Hn.Word)&&(t(r0(i.input,i.index+i[0].length))!=Hn.Word||t(i0(i.input,i.index+i[0].length))!=Hn.Word)}class xde extends v8{nextMatch(e,n,i){let r=hc(this.spec,e,i,e.doc.length).next();return r.done&&(r=hc(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=hc(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n)}matchAll(e,n){let i=hc(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=hc(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Dp=Ze.define(),DA=Ze.define(),el=xi.define({create(t){return new j1(ck(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Dp)?t=new j1(n.value.create(),t.panel):n.is(DA)&&(t=new j1(t.query,n.value?LA:null));return t},provide:t=>ep.from(t,e=>e.panel)});class j1{constructor(e,n){this.query=e,this.panel=n}}const Sde=Je.mark({class:"cm-searchMatch"}),_de=Je.mark({class:"cm-searchMatch cm-searchMatch-selected"}),kde=Gn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(el))}update(t){let e=t.state.field(el);(e!=t.startState.field(el)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Je.none;let{view:n}=this,i=new Tu;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(u,c)=>{let d=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);i.add(u,c,d?_de:Sde)})}return i.finish()}},{decorations:t=>t.decorations});function vm(t){return e=>{let n=e.state.field(el,!1);return n&&n.query.spec.valid?t(e,n):S8(e)}}const UN=vm((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=ie.single(i.from,i.to),s=t.state.facet(Zd);return t.dispatch({selection:r,effects:[jA(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),x8(t),!0}),HN=vm((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=ie.single(r.from,r.to),o=t.state.facet(Zd);return t.dispatch({selection:s,effects:[jA(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),x8(t),!0}),y8=vm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:ie.create(n.map(i=>ie.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),Cde=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new Ip(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(ie.range(a.value.from,a.value.to))}return e(t.update({selection:ie.create(s,o),userEvent:"select.search.matches"})),!0},VN=vm((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,a=[],l,u,c=[];if(o.from==i&&o.to==r&&(u=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:u}),o=e.nextMatch(n,o.from,o.to),c.push(Me.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),o){let d=a.length==0||a[0].from>=s.to?0:s.to-s.from-u.length;l=ie.single(o.from-d,o.to-d),c.push(jA(t,o)),c.push(n.facet(Zd).scrollToMatch(l.main,t))}return t.dispatch({changes:a,selection:l,effects:c,userEvent:"input.replace"}),!0}),w8=vm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Me.announce.of(i),userEvent:"input.replace.all"}),!0});function LA(t){return t.state.facet(Zd).createPanel(t)}function ck(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let u=t.facet(Zd);return new g8({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function b8(t){let e=Qf(t,LA);return e&&e.dom.querySelector("[main-field]")}function x8(t){let e=b8(t);e&&e==t.root.activeElement&&e.select()}const S8=t=>{let e=t.state.field(el,!1);if(e&&e.panel){let n=b8(t);if(n&&n!=t.root.activeElement){let i=ck(t.state,e.query.spec);i.valid&&t.dispatch({effects:Dp.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[DA.of(!0),e?Dp.of(ck(t.state,e.query.spec)):Ze.appendConfig.of(Pde)]});return!0},_8=t=>{let e=t.state.field(el,!1);if(!e||!e.panel)return!1;let n=Qf(t,LA);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:DA.of(!1)}),!0};class Ede{constructor(e){this.view=e;let n=this.query=e.state.field(el).query.spec;this.commit=this.commit.bind(this),this.searchField=Tt("input",{value:n.search,placeholder:Gi(e,"Find"),"aria-label":Gi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Tt("input",{value:n.replace,placeholder:Gi(e,"Replace"),"aria-label":Gi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Tt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Tt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Tt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return Tt("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Tt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>UN(e),[Gi(e,"next")]),i("prev",()=>HN(e),[Gi(e,"previous")]),i("select",()=>y8(e),[Gi(e,"all")]),Tt("label",null,[this.caseField,Gi(e,"match case")]),Tt("label",null,[this.reField,Gi(e,"regexp")]),Tt("label",null,[this.wordField,Gi(e,"by word")]),...e.state.readOnly?[]:[Tt("br"),this.replaceField,i("replace",()=>VN(e),[Gi(e,"replace")]),i("replaceAll",()=>w8(e),[Gi(e,"replace all")])],Tt("button",{name:"close",onclick:()=>_8(e),"aria-label":Gi(e,"close"),type:"button"},[""])])}commit(){let e=new g8({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Dp.of(e)}))}keydown(e){vG(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?HN:UN)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),VN(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Dp)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Zd).top}}function Gi(t,e){return t.state.phrase(e)}const Lg=30,jg=/[\s\.,:;?!]/;function jA(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-Lg),o=Math.min(r,n+Lg),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<Lg;l++)if(!jg.test(a[l+1])&&jg.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-Lg;l--)if(!jg.test(a[l-1])&&jg.test(a[l])){a=a.slice(0,l);break}}return Me.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const Ade=Me.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Pde=[el,Wp.low(kde),Ade];class Tde{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=oo(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(k8(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function WN(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Rde(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=WN(e)+WN(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Mde(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:Rde(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class GN{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function wf(t){return t.selection.main.from}function k8(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const C8=Yo.define();function Nde(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:ie.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const KN=new WeakMap;function Ode(t){if(!Array.isArray(t))return t;let e=KN.get(t);return e||KN.set(t,e=Mde(t)),e}const E8=Ze.define(),FA=Ze.define();class Ide{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=fi(e,n),r=ss(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(fi(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let y=fi(e,0),b=ss(y),_=b==e.length?0:-100;if(y!=n[0])if(y==i[0])_+=-200;else return null;return this.ret(_,[0,b])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,u=0;if(a<0){for(let y=0,b=Math.min(e.length,200);y<b&&u<l;){let _=fi(e,y);(_==n[u]||_==i[u])&&(r[u++]=y),y+=ss(_)}if(u<l)return null}let c=0,d=0,h=!1,f=0,p=-1,m=-1,w=/[a-z]/.test(e),v=!0;for(let y=0,b=Math.min(e.length,200),_=0;y<b&&d<l;){let k=fi(e,y);a<0&&(c<l&&k==n[c]&&(s[c++]=y),f<l&&(k==n[f]||k==i[f]?(f==0&&(p=y),m=y+1,f++):f=0));let C,E=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(C=_C(k))!=C.toLowerCase()?1:C!=C.toUpperCase()?2:0;(!y||E==1&&w||_==0&&E!=0)&&(n[d]==k||i[d]==k&&(h=!0)?o[d++]=y:o.length&&(v=!1)),_=E,y+=ss(k)}return d==l&&o[0]==0&&v?this.result(-100+(h?-200:0),o,e):f==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-900-e.length,[p,m]):d==l?this.result(-100+(h?-200:0)+-700+(v?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?ss(fi(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class Dde{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Hs=Pe.define({combine(t){return Al(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Lde,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>XN(e(i),n(i)),optionClass:(e,n)=>i=>XN(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function XN(t,e){return t?e?t+" "+e:t:e}function Lde(t,e,n,i,r,s){let o=t.textDirection==jt.RTL,a=o,l=!1,u="top",c,d,h=e.left-r.left,f=r.right-e.right,p=i.right-i.left,m=i.bottom-i.top;if(a&&h<Math.min(p,f)?a=!1:!a&&f<Math.min(p,h)&&(a=!0),p<=(a?h:f))c=Math.max(r.top,Math.min(n.top,r.bottom-m))-e.top,d=Math.min(400,a?h:f);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let y=r.bottom-e.bottom;y>=m||y>e.top?c=n.bottom-e.top:(u="bottom",c=e.bottom-n.top)}let w=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${c/w}px; max-width: ${d/v}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function jde(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let u=0;u<s.length;){let c=s[u++],d=s[u++];c>l&&o.appendChild(document.createTextNode(a.slice(l,c)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(a.slice(c,d))),h.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function F1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class Fde{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(Hs);this.optionContent=jde(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=F1(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(n).open;for(let c=l.target,d;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(d=/-(\d+)$/.exec(c.id))&&+d[1]<u.length){this.applyCompletion(e,u[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Hs).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:FA.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=F1(s.length,o,e.state.facet(Hs).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=F1(n.options.length,n.selected,this.view.state.facet(Hs).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>ir(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&Bde(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Hs).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let h=typeof u=="string"?u:u.name;if(h!=s&&(o>i.from||i.from==0))if(s=h,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let f=r.appendChild(document.createElement("completion-section"));f.textContent=h}}const c=r.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let d=this.optionClass(a);d&&(c.className=d);for(let h of this.optionContent){let f=h(a,this.view.state,this.view,l);f&&c.appendChild(f)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function $de(t,e){return n=>new Fde(n,t,e)}function Bde(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function qN(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function zde(t,e){let n=[],i=null,r=u=>{n.push(u);let{section:c}=u.completion;if(c){i||(i=[]);let d=typeof c=="string"?c:c.name;i.some(h=>h.name==d)||i.push(typeof c=="string"?{name:d}:c)}},s=e.facet(Hs);for(let u of t)if(u.hasResult()){let c=u.result.getMatch;if(u.result.filter===!1)for(let d of u.result.options)r(new GN(d,u.source,c?c(d):[],1e9-n.length));else{let d=e.sliceDoc(u.from,u.to),h,f=s.filterStrict?new Dde(d):new Ide(d);for(let p of u.result.options)if(h=f.match(p.label)){let m=p.displayLabel?c?c(p,h.matched):[]:h.matched;r(new GN(p,u.source,m,h.score+(p.boost||0)))}}}if(i){let u=Object.create(null),c=0,d=(h,f)=>{var p,m;return((p=h.rank)!==null&&p!==void 0?p:1e9)-((m=f.rank)!==null&&m!==void 0?m:1e9)||(h.name<f.name?-1:1)};for(let h of i.sort(d))c-=1e5,u[h.name]=c;for(let h of n){let{section:f}=h.completion;f&&(h.score+=u[typeof f=="string"?f:f.name])}}let o=[],a=null,l=s.compareCompletions;for(let u of n.sort((c,d)=>d.score-c.score||l(c.completion,d.completion))){let c=u.completion;!a||a.label!=c.label||a.detail!=c.detail||a.type!=null&&c.type!=null&&a.type!=c.type||a.apply!=c.apply||a.boost!=c.boost?o.push(u):qN(u.completion)>qN(a)&&(o[o.length-1]=u),a=u.completion}return o}class Dc{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Dc(this.options,YN(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(u=>u.isPending))return r.setDisabled();let a=zde(e,n);if(!a.length)return r&&e.some(u=>u.isPending)?r.setDisabled():null;let l=n.facet(Hs).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let u=r.options[r.selected].completion;for(let c=0;c<a.length;c++)if(a[c].completion==u){l=c;break}}return new Dc(a,YN(i,l),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:Xde,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new Dc(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Dc(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class s0{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new s0(Wde,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Hs),s=(i.override||n.languageDataAt("autocomplete",wf(n)).map(Ode)).map(l=>(this.active.find(c=>c.source==l)||new cs(l,this.active.some(c=>c.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,u)=>l==this.active[u])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(A8));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Ude(s,this.active)||a?o=Dc.build(s,n,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new cs(l.source,0):l));for(let l of e.effects)l.is(P8)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new s0(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Hde:Vde}}function Ude(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const Hde={"aria-autocomplete":"list"},Vde={};function YN(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Wde=[];function Gde(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(C8);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class cs{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=Gde(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new cs(r.source,0)),i&4&&r.state==0&&(r=new cs(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(E8))r=new cs(r.source,1,s.value);else if(s.is(FA))r=new cs(r.source,0);else if(s.is(A8))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(wf(e.state))}}class bf extends cs{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=wf(e.state);if(a>o||!r||n&2&&(wf(e.startState)==this.from||a<this.limit))return new cs(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return Kde(r.validFor,e.state,s,o)?new bf(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new Tde(e.state,a,!1)))?new bf(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:wf(e.state)):new cs(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new bf(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new cs(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Kde(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):k8(t,!0).test(r)}const A8=Ze.define({map(t,e){return t.map(n=>n.map(e))}}),P8=Ze.define(),Jd=xi.define({create(){return s0.start()},update(t,e){return t.update(e)},provide:t=>[FC.from(t,e=>e.tooltip),Me.contentAttributes.from(t,e=>e.attrs)]});function T8(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(Jd).active.find(r=>r.source==e.source);return i instanceof bf?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},Nde(t.state,n,i.from,i.to)),{annotations:C8.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const Xde=$de(Jd,T8);function Fg(t,e="option"){return n=>{let i=n.state.field(Jd,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Hs).interactionDelay)return!1;let r=1,s;e=="page"&&(s=qG(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:P8.of(a)}),!0}}const ZN=t=>{let e=t.state.field(Jd,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Hs).interactionDelay?!1:T8(t,e.open.options[e.open.selected])},qde=t=>t.state.field(Jd,!1)?(t.dispatch({effects:E8.of(!0)}),!0):!1,Yde=t=>{let e=t.state.field(Jd,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:FA.of(null)}),!0)},R8={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},M8=new class extends Pu{};M8.startSide=1;M8.endSide=-1;const $1="()[]{}<>";function Zde(t){for(let e=0;e<$1.length;e+=2)if($1.charCodeAt(e)==t)return $1.charAt(e+1);return _C(t<128?t:t+1)}function Jde(t,e){return t.languageDataAt("closeBrackets",e)[0]||R8}const Qde=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=Jde(t,t.selection.main.head).brackets||R8.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=the(t.doc,o.head);for(let l of i)if(l==a&&ehe(t.doc,o.head)==Zde(fi(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:ie.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function ehe(t,e){let n=t.sliceString(e,e+2);return n.slice(0,ss(fi(n,0)))}function the(t,e){let n=t.sliceString(e-2,e);return ss(fi(n,0))==n.length?n:n.slice(1)}class nhe{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class iu{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=e,s=i.facet(Xs).markerFilter;s&&(r=s(r,i));let o=Je.set(r.map(a=>a.from==a.to||a.from==a.to-1&&i.doc.lineAt(a.from).to==a.from?Je.widget({widget:new fhe(a),diagnostic:a}).range(a.from):Je.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new iu(o,n,$d(o))}}function $d(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new nhe(r,s,o.diagnostic),!1}),i}function ihe(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(Xs).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is($A))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function N8(t,e){return t.field(sr,!1)?e:e.concat(Ze.appendConfig.of(L8))}function rhe(t,e){return{effects:N8(t,[$A.of(e)])}}const $A=Ze.define(),BA=Ze.define(),O8=Ze.define(),sr=xi.define({create(){return new iu(Je.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=$d(n,t.selected.diagnostic,s)||$d(n,null,s)}!n.size&&r&&e.state.facet(Xs).autoPanel&&(r=null),t=new iu(n,r,i)}for(let n of e.effects)if(n.is($A)){let i=e.state.facet(Xs).autoPanel?n.value.length?Lp.open:null:t.panel;t=iu.init(n.value,i,e.state)}else n.is(BA)?t=new iu(t.diagnostics,n.value?Lp.open:null,t.selected):n.is(O8)&&(t=new iu(t.diagnostics,t.panel,n.value));return t},provide:t=>[ep.from(t,e=>e.panel),Me.decorations.from(t,e=>e.diagnostics)]}),she=Je.mark({class:"cm-lintRange cm-lintRange-active"});function ohe(t,e,n){let{diagnostics:i}=t.state.field(sr),r=[],s=2e8,o=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||n>0)&&(e<u||n<0))&&(r.push(c.diagnostic),s=Math.min(l,s),o=Math.max(u,o))});let a=t.state.facet(Xs).tooltipFilter;return a&&(r=a(r,t.state)),r.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:ahe(t,r)}}}:null}function ahe(t,e){return Tt("ul",{class:"cm-tooltip-lint"},e.map(n=>D8(t,n,!1)))}const lhe=t=>{let e=t.state.field(sr,!1);(!e||!e.panel)&&t.dispatch({effects:N8(t.state,[BA.of(!0)])});let n=Qf(t,Lp.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},JN=t=>{let e=t.state.field(sr,!1);return!e||!e.panel?!1:(t.dispatch({effects:BA.of(!1)}),!0)},uhe=t=>{let e=t.state.field(sr,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},che=Gn.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Xs);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Xs);n.length&&dhe(n.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(rhe(this.view.state,i.reduce((r,s)=>r.concat(s))))},i=>{ir(this.view.state,i)})}}update(t){let e=t.state.facet(Xs);(t.docChanged||e!=t.startState.facet(Xs)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function dhe(t,e,n){let i=[],r=-1;for(let s of t)s.then(o=>{i.push(o),clearTimeout(r),i.length==t.length?e(i):setTimeout(()=>e(i),200)},n)}const Xs=Pe.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Al(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function hhe(t,e={}){return[Xs.of({source:t,config:e}),che,L8]}function I8(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function D8(t,e,n){var i;let r=n?I8(e.actions):[];return Tt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Tt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=h=>{if(h.preventDefault(),a)return;a=!0;let f=$d(t.state.field(sr).diagnostics,e);f&&s.apply(t,f.from,f.to)},{name:u}=s,c=r[o]?u.indexOf(r[o]):-1,d=c<0?u:[u.slice(0,c),Tt("u",u.slice(c,c+1)),u.slice(c+1)];return Tt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&Tt("div",{class:"cm-diagnosticSource"},e.source))}class fhe extends Pl{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Tt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class QN{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=D8(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Lp{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)JN(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=I8(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=$d(this.view.state.field(sr).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Tt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Tt("div",{class:"cm-panel-lint"},this.list,Tt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>JN(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(sr).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(sr),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let u=-1,c;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){u=d;break}u<0?(c=new QN(this.view,l.diagnostic),this.items.splice(i,0,c),r=!0):(c=this.items[u],u>i&&(this.items.splice(i,u-i),r=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new QN(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{let l=a.height/this.list.offsetHeight;o.top<a.top?this.list.scrollTop-=(a.top-o.top)/l:o.bottom>a.bottom&&(this.list.scrollTop+=(o.bottom-a.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(sr),i=$d(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:O8.of(i)})}static open(e){return new Lp(e)}}function phe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function $g(t){return phe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const mhe=Me.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:$g("#d11")},".cm-lintRange-warning":{backgroundImage:$g("orange")},".cm-lintRange-info":{backgroundImage:$g("#999")},".cm-lintRange-hint":{backgroundImage:$g("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),L8=[sr,Me.decorations.compute([sr],t=>{let{selected:e,panel:n}=t.field(sr);return!e||!n||e.from==e.to?Je.none:Je.set([she.range(e.from,e.to)])}),XG(ohe,{hideOn:ihe}),mhe],j8=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},ghe=j8("up"),vhe=j8("down"),yhe=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(ie.range(s,s)):e=ie.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},whe=[{key:"Ctrl-Space",run:qde},{key:"Escape",run:Yde},{key:"ArrowDown",run:Fg(!0)},{key:"ArrowUp",run:Fg(!1)},{key:"PageDown",run:Fg(!0,"page")},{key:"PageUp",run:Fg(!1,"page")},{key:"Enter",run:ZN},{key:"Tab",run:ZN},{key:"Mod-f",run:S8,scope:"editor search-panel"},{key:"Escape",run:_8,scope:"editor search-panel"},{key:"Alt-Enter",run:y8,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:w8,scope:"editor search-panel"},{key:"Ctrl-g",run:fde},{key:"Mod-d",run:vde,preventDefault:!0},{key:"Shift-Mod-l",run:Cde},{key:"Enter",run:FN,shift:FN},{key:"ArrowLeft",run:vN,shift:_N,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Hce,shift:qce},{key:"ArrowRight",run:yN,shift:kN,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Vce,shift:Yce},{key:"ArrowUp",run:wN,shift:CN,preventDefault:!0},{key:"ArrowDown",run:bN,shift:EN,preventDefault:!0},{key:"Home",run:SN,shift:RN},{mac:"Cmd-ArrowLeft",run:SN,shift:RN},{key:"Mod-Home",run:MN,shift:ON},{mac:"Cmd-ArrowUp",run:MN,shift:ON},{key:"PageUp",run:O1,shift:AN},{mac:"Ctrl-ArrowUp",run:O1,shift:AN},{key:"PageDown",run:I1,shift:PN},{mac:"Ctrl-ArrowDown",run:I1,shift:PN},{key:"End",run:xN,shift:TN},{mac:"Cmd-ArrowRight",run:xN,shift:TN},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:ghe,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:vhe,preventDefault:!0},{key:"Shift-Alt-i",run:yhe},{key:"Mod-End",run:NN,shift:IN},{mac:"Cmd-ArrowDown",run:NN,shift:IN},{key:"Mod-a",run:Qce},{key:"Backspace",run:Qde},{key:"Backspace",run:D1,shift:D1},{key:"Delete",run:DN},{key:"Mod-Backspace",mac:"Alt-Backspace",run:LN},{key:"Mod-Delete",mac:"Alt-Delete",run:tde},{mac:"Mod-Backspace",run:nde},{mac:"Mod-Delete",run:jN},{mac:"Ctrl-b",run:vN,shift:_N,preventDefault:!0},{mac:"Ctrl-f",run:yN,shift:kN},{mac:"Ctrl-p",run:wN,shift:CN},{mac:"Ctrl-n",run:bN,shift:EN},{mac:"Ctrl-a",run:Wce,shift:Zce},{mac:"Ctrl-e",run:Gce,shift:Jce},{mac:"Ctrl-d",run:DN},{mac:"Ctrl-h",run:D1},{mac:"Ctrl-k",run:jN},{mac:"Ctrl-Alt-h",run:LN},{mac:"Ctrl-o",run:ide},{mac:"Ctrl-t",run:rde},{mac:"Ctrl-v",run:I1},{mac:"Alt-v",run:O1},{key:"Shift-Mod-k",run:ude},{key:"Alt-ArrowDown",run:ode},{key:"Alt-ArrowUp",run:sde},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:lde},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:ade},{key:"Mod-l",run:ede,preventDefault:!0},{key:"Shift-Mod-\\",run:Xce},{key:"Tab",run:lk,shift:$N,preventDefault:!0},{key:"Mod-[",run:$N},{key:"Mod-]",run:lk},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:tce},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:nce},{key:"Mod-k Mod-0",run:ice},{key:"Mod-k Mod-j",run:rce},{key:"Mod-k Mod-c",run:Ace},{key:"Mod-k Mod-u",run:Pce},{key:"Mod-/",run:Cce},{key:"Shift-Alt-a",run:Tce},{key:"Mod-z",run:qz,preventDefault:!0},{key:"Mod-y",run:ak,preventDefault:!0},{key:"Mod-Shift-z",run:ak,preventDefault:!0},{key:"Mod-u",run:Lce,preventDefault:!0},{key:"Mod-Shift-m",run:lhe},{key:"F8",run:uhe}],dk=me(0);function bhe(){const t=wt(),e=lt(dk);return g.jsxs("div",{className:"flex items-center justify-between border-t border-stone-600 bg-stone-800 px-3 font-sans text-xs tracking-wider text-stone-400",children:[g.jsx(hJ,{}),g.jsx("span",{className:$e(e>0&&"font-semibold text-red-400"),children:t("editor.lintSummary",e)})]})}const ki={character:de.character,comment:de.comment,"data-directive":vn.define(),identifier:de.variableName,instruction:vn.define(),label:de.labelName,number:de.number,operator:de.operator,offset:vn.define(),"ptr-size":vn.define(),punctuation:de.punctuation,register:vn.define(),special:vn.define(),string:de.string,unassigned:vn.define()},xhe=PA.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":CE.includes(e)?"data-directive":EE.includes(e)?"instruction":Ly.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:ki}),She=cce(pm.define([{tag:ki.character,class:"text-orange-300"},{tag:ki.comment,class:"text-stone-500 italic"},{tag:ki["data-directive"],class:"text-rose-400/80"},{tag:ki.instruction,class:"text-mantis-400"},{tag:ki.number,class:"text-cyan-300/60"},{tag:ki.operator,class:"text-rose-300"},{tag:ki.offset,class:"text-rose-400/80 italic"},{tag:ki["ptr-size"],class:"text-rose-400/80 italic"},{tag:ki.punctuation,class:"text-stone-600"},{tag:ki.register,class:"text-emerald-400/80"},{tag:ki.special,class:"text-yellow-300/80"},{tag:ki.string,class:"text-orange-300"},{tag:ki.unassigned,class:"text-rose-400/80"}])),_he=hhe(t=>{const e=t.state.doc.toString(),n=d5(e);if(n.success)return U.set(dk,0),[];const i=Di().language,r=n.errors.map(s=>{var l,u;const o=((l=s.position)==null?void 0:l.start)??0,a=((u=s.position)==null?void 0:u.end)??e.length;return{message:s.translate(i),severity:"error",from:o,to:a}});return U.set(dk,r.length),r},{delay:200});function khe(){return new Bue(xhe,[She,_he])}function F8({className:t}){const[e,n]=x.useState(),i=VZ(),r=x.useCallback(s=>{s&&n(s)},[]);return x.useEffect(()=>{if(e)return window.codemirror=new Me({state:it.create({doc:lJ(),extensions:[it.tabSize.of(2),b5.of(it.readOnly.of(!1)),uJ,sK(),nne,lK(),NG(),Dce(),_G(),Me.domEventHandlers({drop:s=>s.preventDefault()}),it.allowMultipleSelections.of(!0),FG(),AF.of([{key:"Escape",run:s=>(s.dispatch({selection:ie.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?lk(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...whe]),khe()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),g.jsxs("div",{className:$e("flex flex-col",t),children:[g.jsx("div",{ref:r,className:"grow overflow-auto font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),g.jsx(bhe,{})]})}function Che(){const t=dE(),e=wt(),n=XZ(),i=y7("(max-width: 640px)"),{updateServiceWorker:r}=_7({onNeedRefresh(){Ri({title:e("update.update-available"),action:g.jsx(H4,{altText:e("update.reload"),onClick:()=>r(!0),children:e("update.reload")}),duration:1/0})}});return g.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",lang:t,style:{filter:n},children:[g.jsx(Boe,{}),i?g.jsx(Ahe,{}):g.jsx(Ehe,{}),g.jsx(fJ,{})]})}function Ehe(){const[t]=Vp(cA);return g.jsxs(dj,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[g.jsx(tv,{id:"panel-editor",order:1,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:g.jsx(F8,{className:"h-full w-full"})}),g.jsx(mS,{className:"w-2"}),g.jsx(tv,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"computer-background rounded-lg border border-stone-600",children:g.jsx(Sz,{})}),t&&g.jsxs(g.Fragment,{children:[g.jsx(mS,{className:"w-2"}),g.jsx(tv,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:g.jsx(x4,{className:"h-full w-full"})})]})]})}function Ahe(){const t=wt(),[e,n]=x.useState("editor"),[i,r]=Vp(cA),s=i?"settings":e,o=a=>{i&&r(!1),n(a)};return g.jsx(IL,{value:s,onValueChange:o,asChild:!0,children:g.jsxs(g.Fragment,{children:[g.jsx(ev,{value:"editor",asChild:!0,children:g.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:g.jsx(F8,{className:"h-full w-full"})})}),g.jsx(ev,{value:"computer",asChild:!0,children:g.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:g.jsx(Sz,{})})}),g.jsx(ev,{value:"settings",asChild:!0,children:g.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:g.jsx(x4,{className:"h-full w-full"})})}),g.jsxs(LL,{className:"grid grid-cols-2 gap-2 p-2",children:[g.jsxs(dS,{value:"editor",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[g.jsx("span",{className:"icon-[lucide--file-terminal] mr-2 h-4 w-4"}),t("control.tabs.editor")]}),g.jsxs(dS,{value:"computer",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[g.jsx("span",{className:"icon-[lucide--computer] mr-2 h-4 w-4"}),t("control.tabs.computer")]})]})]})})}function Phe(){const{toastList:t}=oJ();return g.jsxs(sae,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>g.jsxs(U4,{...o,variant:s,children:[g.jsxs("div",{className:"grid gap-1",children:[n&&g.jsx(W4,{children:n}),i&&g.jsx(G4,{children:i})]}),r,g.jsx(V4,{})]},e)),g.jsx(z4,{})]})}window.codemirror=null;gx.createRoot(document.getElementById("root")).render(g.jsx(on.StrictMode,{children:g.jsxs(n9,{client:S5,children:[g.jsx(DY,{children:g.jsx(Che,{})}),g.jsx(Phe,{})]})}));
