var f9=Object.defineProperty;var X2=t=>{throw TypeError(t)};var h9=(t,e,n)=>e in t?f9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var de=(t,e,n)=>h9(t,typeof e!="symbol"?e+"":e,n),Mw=(t,e,n)=>e.has(t)||X2("Cannot "+n);var A=(t,e,n)=>(Mw(t,e,"read from private field"),n?n.call(t):e.get(t)),De=(t,e,n)=>e.has(t)?X2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Q=(t,e,n,r)=>(Mw(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),St=(t,e,n)=>(Mw(t,e,"access private method"),n);function p9(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var m9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var iI={exports:{}},r0={},sI={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap=Symbol.for("react.element"),g9=Symbol.for("react.portal"),v9=Symbol.for("react.fragment"),y9=Symbol.for("react.strict_mode"),w9=Symbol.for("react.profiler"),b9=Symbol.for("react.provider"),x9=Symbol.for("react.context"),S9=Symbol.for("react.forward_ref"),k9=Symbol.for("react.suspense"),_9=Symbol.for("react.memo"),C9=Symbol.for("react.lazy"),Y2=Symbol.iterator;function E9(t){return t===null||typeof t!="object"?null:(t=Y2&&t[Y2]||t["@@iterator"],typeof t=="function"?t:null)}var oI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aI=Object.assign,lI={};function Od(t,e,n){this.props=t,this.context=e,this.refs=lI,this.updater=n||oI}Od.prototype.isReactComponent={};Od.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Od.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cI(){}cI.prototype=Od.prototype;function y_(t,e,n){this.props=t,this.context=e,this.refs=lI,this.updater=n||oI}var w_=y_.prototype=new cI;w_.constructor=y_;aI(w_,Od.prototype);w_.isPureReactComponent=!0;var q2=Array.isArray,uI=Object.prototype.hasOwnProperty,b_={current:null},dI={key:!0,ref:!0,__self:!0,__source:!0};function fI(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)uI.call(e,r)&&!dI.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ap,type:t,key:s,ref:o,props:i,_owner:b_.current}}function A9(t,e){return{$$typeof:Ap,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function x_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ap}function P9(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var J2=/\/+/g;function Rw(t,e){return typeof t=="object"&&t!==null&&t.key!=null?P9(""+t.key):e.toString(36)}function Og(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ap:case g9:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Rw(o,0):r,q2(i)?(n="",t!=null&&(n=t.replace(J2,"$&/")+"/"),Og(i,e,n,"",function(c){return c})):i!=null&&(x_(i)&&(i=A9(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(J2,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",q2(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Rw(s,a);o+=Og(s,e,n,l,i)}else if(l=E9(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Rw(s,a++),o+=Og(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function om(t,e,n){if(t==null)return t;var r=[],i=0;return Og(t,r,"","",function(s){return e.call(n,s,i++)}),r}function N9(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var yr={current:null},Ig={transition:null},T9={ReactCurrentDispatcher:yr,ReactCurrentBatchConfig:Ig,ReactCurrentOwner:b_};function hI(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:om,forEach:function(t,e,n){om(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return om(t,function(){e++}),e},toArray:function(t){return om(t,function(e){return e})||[]},only:function(t){if(!x_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};rt.Component=Od;rt.Fragment=v9;rt.Profiler=w9;rt.PureComponent=y_;rt.StrictMode=y9;rt.Suspense=k9;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T9;rt.act=hI;rt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=aI({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=b_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)uI.call(e,l)&&!dI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ap,type:t.type,key:i,ref:s,props:r,_owner:o}};rt.createContext=function(t){return t={$$typeof:x9,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:b9,_context:t},t.Consumer=t};rt.createElement=fI;rt.createFactory=function(t){var e=fI.bind(null,t);return e.type=t,e};rt.createRef=function(){return{current:null}};rt.forwardRef=function(t){return{$$typeof:S9,render:t}};rt.isValidElement=x_;rt.lazy=function(t){return{$$typeof:C9,_payload:{_status:-1,_result:t},_init:N9}};rt.memo=function(t,e){return{$$typeof:_9,type:t,compare:e===void 0?null:e}};rt.startTransition=function(t){var e=Ig.transition;Ig.transition={};try{t()}finally{Ig.transition=e}};rt.unstable_act=hI;rt.useCallback=function(t,e){return yr.current.useCallback(t,e)};rt.useContext=function(t){return yr.current.useContext(t)};rt.useDebugValue=function(){};rt.useDeferredValue=function(t){return yr.current.useDeferredValue(t)};rt.useEffect=function(t,e){return yr.current.useEffect(t,e)};rt.useId=function(){return yr.current.useId()};rt.useImperativeHandle=function(t,e,n){return yr.current.useImperativeHandle(t,e,n)};rt.useInsertionEffect=function(t,e){return yr.current.useInsertionEffect(t,e)};rt.useLayoutEffect=function(t,e){return yr.current.useLayoutEffect(t,e)};rt.useMemo=function(t,e){return yr.current.useMemo(t,e)};rt.useReducer=function(t,e,n){return yr.current.useReducer(t,e,n)};rt.useRef=function(t){return yr.current.useRef(t)};rt.useState=function(t){return yr.current.useState(t)};rt.useSyncExternalStore=function(t,e,n){return yr.current.useSyncExternalStore(t,e,n)};rt.useTransition=function(){return yr.current.useTransition()};rt.version="18.3.1";sI.exports=rt;var x=sI.exports;const Ot=jc(x),i0=p9({__proto__:null,default:Ot},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M9=x,R9=Symbol.for("react.element"),O9=Symbol.for("react.fragment"),I9=Object.prototype.hasOwnProperty,D9=M9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L9={key:!0,ref:!0,__self:!0,__source:!0};function pI(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)I9.call(e,r)&&!L9.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:R9,type:t,key:s,ref:o,props:i,_owner:D9.current}}r0.Fragment=O9;r0.jsx=pI;r0.jsxs=pI;iI.exports=r0;var p=iI.exports,W=typeof window<"u"?window:void 0,Or=typeof globalThis<"u"?globalThis:W,mI=Array.prototype,Z2=mI.forEach,Q2=mI.indexOf,ni=Or==null?void 0:Or.navigator,Ce=Or==null?void 0:Or.document,Nr=Or==null?void 0:Or.location,Bx=Or==null?void 0:Or.fetch,zx=Or!=null&&Or.XMLHttpRequest&&"withCredentials"in new Or.XMLHttpRequest?Or.XMLHttpRequest:void 0,eA=Or==null?void 0:Or.AbortController,Ar=ni==null?void 0:ni.userAgent,Ue=W??{},ho={DEBUG:!1,LIB_VERSION:"1.256.2"},Ow="$copy_autocapture",j9=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],Eo=function(t){return t.GZipJS="gzip-js",t.Base64="base64",t}({}),$9=["fatal","error","warning","log","info","debug"];function tt(t,e){return t.indexOf(e)!==-1}var s0=function(t){return t.trim()},Ux=function(t){return t.replace(/^\$/,"")},F9=Array.isArray,gI=Object.prototype,vI=gI.hasOwnProperty,o0=gI.toString,Bt=F9||function(t){return o0.call(t)==="[object Array]"},Ti=t=>typeof t=="function",Zt=t=>t===Object(t)&&!Bt(t),uu=t=>{if(Zt(t)){for(var e in t)if(vI.call(t,e))return!1;return!0}return!1},me=t=>t===void 0,Qt=t=>o0.call(t)=="[object String]",Hx=t=>Qt(t)&&t.trim().length===0,vl=t=>t===null,gt=t=>me(t)||vl(t),Qn=t=>o0.call(t)=="[object Number]",Fs=t=>o0.call(t)==="[object Boolean]",B9=t=>t instanceof FormData,z9=t=>tt(j9,t),yI=t=>{var e={t:function(n){if(W&&(ho.DEBUG||Ue.POSTHOG_DEBUG)&&!me(W.console)&&W.console){for(var r=("__rrweb_original__"in W.console[n])?W.console[n].__rrweb_original__:W.console[n],i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];r(t,...s)}},info:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.t("log",...r)},warn:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.t("warn",...r)},error:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.t("error",...r)},critical:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];console.error(t,...r)},uninitializedWarning:n=>{e.error("You must initialize PostHog before calling "+n)},createLogger:n=>yI(t+" "+n)};return e},Ae=yI("[PostHog.js]"),Rn=Ae.createLogger,U9=Rn("[ExternalScriptsLoader]"),tA=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return U9.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var r=Ce==null?void 0:Ce.querySelectorAll("script");if(r){for(var i=0;i<r.length;i++)if(r[i].src===e)return n()}var s=()=>{if(!Ce)return n("document not found");var o=Ce.createElement("script");if(o.type="text/javascript",o.crossOrigin="anonymous",o.src=e,o.onload=c=>n(void 0,c),o.onerror=c=>n(c),t.config.prepare_external_dependency_script&&(o=t.config.prepare_external_dependency_script(o)),!o)return n("prepare_external_dependency_script returned null");var a,l=Ce.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(o,l[0]):Ce.body.appendChild(o)};Ce!=null&&Ce.body?s():Ce==null||Ce.addEventListener("DOMContentLoaded",s)};function xe(){return xe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xe.apply(null,arguments)}function wI(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}Ue.__PosthogExtensions__=Ue.__PosthogExtensions__||{},Ue.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var r="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(r="/array/"+t.config.token+"/config.js"),e==="toolbar"){var i=3e5;r=r+"&t="+Math.floor(Date.now()/i)*i}var s=t.requestRouter.endpointFor("assets",r);tA(t,s,n)},Ue.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var r=t.requestRouter.endpointFor("api",e);tA(t,r,n)};var bv={};function $a(t,e,n){if(Bt(t)){if(Z2&&t.forEach===Z2)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r)===bv)return}}}function bt(t,e,n){if(!gt(t)){if(Bt(t))return $a(t,e,n);if(B9(t)){for(var r of t.entries())if(e.call(n,r[1],r[0])===bv)return}else for(var i in t)if(vI.call(t,i)&&e.call(n,t[i],i)===bv)return}}var rn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return $a(n,function(i){for(var s in i)i[s]!==void 0&&(t[s]=i[s])}),t},a0=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return $a(n,function(i){$a(i,function(s){t.push(s)})}),t};function Dg(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r}var nA=function(t){try{return t()}catch{return}},H9=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(this,n)}catch(i){Ae.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Ae.critical(i)}}},S_=function(t){var e={};return bt(t,function(n,r){(Qt(n)&&n.length>0||Qn(n))&&(e[r]=n)}),e};function V9(t,e){return n=t,r=s=>Qt(s)&&!vl(e)?s.slice(0,e):s,i=new Set,function s(o,a){return o!==Object(o)?r?r(o,a):o:i.has(o)?void 0:(i.add(o),Bt(o)?(l=[],$a(o,c=>{l.push(s(c))})):(l={},bt(o,(c,u)=>{i.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,r,i}var W9=["herokuapp.com","vercel.app","netlify.app"];function G9(t){var e=t==null?void 0:t.hostname;if(!Qt(e))return!1;var n=e.split(".").slice(-2).join(".");for(var r of W9)if(n===r)return!1;return!0}function bI(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function Wt(t,e,n,r){var{capture:i=!1,passive:s=!0}=r??{};t==null||t.addEventListener(e,n,{capture:i,passive:s})}var xI="$people_distinct_id",Sf="__alias",kf="__timers",rA="$autocapture_disabled_server_side",Vx="$heatmaps_enabled_server_side",iA="$exception_capture_enabled_server_side",Wx="$error_tracking_suppression_rules",sA="$web_vitals_enabled_server_side",SI="$dead_clicks_enabled_server_side",oA="$web_vitals_allowed_metrics",Gx="$session_recording_enabled_server_side",aA="$console_log_recording_enabled_server_side",lA="$session_recording_network_payload_capture",cA="$session_recording_masking",uA="$session_recording_canvas_recording",dA="$replay_sample_rate",fA="$replay_minimum_duration",hA="$replay_script_config",xv="$sesid",_f="$session_is_sampled",Kx="$session_recording_url_trigger_activated_session",Xx="$session_recording_event_trigger_activated_session",du="$enabled_feature_flags",Lg="$early_access_features",Yx="$feature_flag_details",Cf="$stored_person_properties",Vl="$stored_group_properties",qx="$surveys",am="$surveys_activated",Sv="$flag_call_reported",lo="$user_state",Jx="$client_session_props",Zx="$capture_rate_limit",Qx="$initial_campaign_params",e1="$initial_referrer_info",kv="$initial_person_info",_v="$epp",kI="__POSTHOG_TOOLBAR__",lm="$posthog_cookieless",K9=[xI,Sf,"__cmpns",kf,Gx,Vx,xv,du,Wx,lo,Lg,Yx,Vl,Cf,qx,Sv,Jx,Zx,Qx,e1,_v,kv];function pA(t){return t instanceof Element&&(t.id===kI||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function l0(t){return!!t&&t.nodeType===1}function Fa(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function _I(t){return!!t&&t.nodeType===3}function CI(t){return!!t&&t.nodeType===11}function k_(t){return t?s0(t).split(/\s+/):[]}function mA(t){var e=W==null?void 0:W.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function Cv(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return k_(e)}function EI(t){return gt(t)?null:s0(t).split(/(\s+)/).filter(e=>nd(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function c0(t){var e="";return n1(t)&&!NI(t)&&t.childNodes&&t.childNodes.length&&bt(t.childNodes,function(n){var r;_I(n)&&n.textContent&&(e+=(r=EI(n.textContent))!==null&&r!==void 0?r:"")}),s0(e)}function AI(t){return me(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var t1=["a","button","form","input","select","textarea","label"];function PI(t){var e=t.parentNode;return!(!e||!l0(e))&&e}function X9(t,e,n,r,i){var s,o,a;if(n===void 0&&(n=void 0),!W||!t||Fa(t,"html")||!l0(t)||(s=n)!=null&&s.url_allowlist&&!mA(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&mA(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(y=>e.type===y))return!1}for(var c=!1,u=[t],d=!0,f=t;f.parentNode&&!Fa(f,"body");)if(CI(f.parentNode))u.push(f.parentNode.host),f=f.parentNode.host;else{if(!(d=PI(f)))break;if(r||t1.indexOf(d.tagName.toLowerCase())>-1)c=!0;else{var h=W.getComputedStyle(d);h&&h.getPropertyValue("cursor")==="pointer"&&(c=!0)}u.push(d),f=d}if(!function(y,v){var w=v==null?void 0:v.element_allowlist;if(me(w))return!0;var b,k=function(E){if(w.some(C=>E.tagName.toLowerCase()===C))return{v:!0}};for(var _ of y)if(b=k(_))return b.v;return!1}(u,n)||!function(y,v){var w=v==null?void 0:v.css_selector_allowlist;if(me(w))return!0;var b,k=function(E){if(w.some(C=>E.matches(C)))return{v:!0}};for(var _ of y)if(b=k(_))return b.v;return!1}(u,n))return!1;var m=W.getComputedStyle(t);if(m&&m.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var g=t.tagName.toLowerCase();switch(g){case"html":return!1;case"form":return(i||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(e.type)>=0;default:return c?(i||["click"]).indexOf(e.type)>=0:(i||["click"]).indexOf(e.type)>=0&&(t1.indexOf(g)>-1||t.getAttribute("contenteditable")==="true")}}function n1(t){for(var e=t;e.parentNode&&!Fa(e,"body");e=e.parentNode){var n=Cv(e);if(tt(n,"ph-sensitive")||tt(n,"ph-no-capture"))return!1}if(tt(Cv(t),"ph-include"))return!0;var r=t.type||"";if(Qt(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=t.name||t.id||"";return!(Qt(i)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))}function NI(t){return!!(Fa(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||Fa(t,"select")||Fa(t,"textarea")||t.getAttribute("contenteditable")==="true")}var TI="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",Y9=new RegExp("^(?:"+TI+")$"),q9=new RegExp(TI),MI="\\d{3}-?\\d{2}-?\\d{4}",J9=new RegExp("^("+MI+")$"),Z9=new RegExp("("+MI+")");function nd(t,e){return e===void 0&&(e=!0),!(gt(t)||Qt(t)&&(t=s0(t),(e?Y9:q9).test((t||"").replace(/[- ]/g,""))||(e?J9:Z9).test(t)))}function RI(t){var e=c0(t);return nd(e=(e+" "+OI(t)).trim())?e:""}function OI(t){var e="";return t&&t.childNodes&&t.childNodes.length&&bt(t.childNodes,function(n){var r;if(n&&((r=n.tagName)==null?void 0:r.toLowerCase())==="span")try{var i=c0(n);e=(e+" "+i).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+OI(n)).trim())}catch(s){Ae.error("[AutoCapture]",s)}}),e}function Q9(t){return function(e){var n=e.map(r=>{var i,s,o="";if(r.tag_name&&(o+=r.tag_name),r.attr_class)for(var a of(r.attr_class.sort(),r.attr_class))o+="."+a.replace(/"/g,"");var l=xe({},r.text?{text:r.text}:{},{"nth-child":(i=r.nth_child)!==null&&i!==void 0?i:0,"nth-of-type":(s=r.nth_of_type)!==null&&s!==void 0?s:0},r.href?{href:r.href}:{},r.attr_id?{attr_id:r.attr_id}:{},r.attributes),c={};return Dg(l).sort((u,d)=>{var[f]=u,[h]=d;return f.localeCompare(h)}).forEach(u=>{var[d,f]=u;return c[gA(d.toString())]=gA(f.toString())}),o+=":",o+=Dg(c).map(u=>{var[d,f]=u;return d+'="'+f+'"'}).join("")});return n.join(";")}(function(e){return e.map(n=>{var r,i,s={text:(r=n.$el_text)==null?void 0:r.slice(0,400),tag_name:n.tag_name,href:(i=n.attr__href)==null?void 0:i.slice(0,2048),attr_class:e7(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Dg(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function gA(t){return t.replace(/"|\\"/g,'\\"')}function e7(t){var e=t.attr__class;return e?Bt(e)?e:k_(e):void 0}let II=class{constructor(){this.clicks=[]}isRageClick(e,n,r){var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(e-i.x)+Math.abs(n-i.y)<30&&r-i.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:r}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:r}];return!1}};var t7=["localhost","127.0.0.1"],rd=t=>{var e=Ce==null?void 0:Ce.createElement("a");return me(e)?null:(e.href=t,e)},n7=function(t,e){var n,r;e===void 0&&(e="&");var i=[];return bt(t,function(s,o){me(s)||me(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),r=encodeURIComponent(o),i[i.length]=r+"="+n)}),i.join(e)},Ev=function(t,e){for(var n,r=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),i=0;i<r.length;i++){var s=r[i].split("=");if(s[0]===e){n=s;break}}if(!Bt(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{Ae.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},__=function(t,e,n){if(!t||!e||!e.length)return t;for(var r=t.split("#"),i=r[0]||"",s=r[1],o=i.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),u=[],d=0;d<c.length;d++){var f=c[d].split("=");Bt(f)&&(e.includes(f[0])?u.push(f[0]+"="+n):u.push(c[d]))}var h=l;return a!=null&&(h+="?"+u.join("&")),s!=null&&(h+="#"+s),h},Av=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},vA=Rn("[AutoCapture]");function Iw(t,e){return e.length>t?e.slice(0,t)+"...":e}function r7(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!l0(e));return e}function i7(t,e,n,r){var i=t.tagName.toLowerCase(),s={tag_name:i};t1.indexOf(i)>-1&&!n&&(i.toLowerCase()==="a"||i.toLowerCase()==="button"?s.$el_text=Iw(1024,RI(t)):s.$el_text=Iw(1024,c0(t)));var o=Cv(t);o.length>0&&(s.classes=o.filter(function(u){return u!==""})),bt(t.attributes,function(u){var d;if((!NI(t)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(r==null||!r.includes(u.name))&&!e&&nd(u.value)&&(d=u.name,!Qt(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var f=u.value;u.name==="class"&&(f=k_(f).join(" ")),s["attr__"+u.name]=Iw(1024,f)}});for(var a=1,l=1,c=t;c=r7(c);)a++,c.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function s7(t,e){for(var n,r,{e:i,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,c=[t],u=t;u.parentNode&&!Fa(u,"body");)CI(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,f=[],h={},m=!1,g=!1;if(bt(c,k=>{var _=n1(k);k.tagName.toLowerCase()==="a"&&(m=k.getAttribute("href"),m=_&&m&&nd(m)&&m),tt(Cv(k),"ph-no-capture")&&(g=!0),f.push(i7(k,s,o,a));var E=function(C){if(!n1(C))return{};var P={};return bt(C.attributes,function(M){if(M.name&&M.name.indexOf("data-ph-capture-attribute")===0){var O=M.name.replace("data-ph-capture-attribute-",""),I=M.value;O&&I&&nd(I)&&(P[O]=I)}}),P}(k);rn(h,E)}),g)return{props:{},explicitNoCapture:g};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?f[0].$el_text=RI(t):f[0].$el_text=c0(t)),m){var y,v;f[0].attr__href=m;var w=(y=rd(m))==null?void 0:y.host,b=W==null||(v=W.location)==null?void 0:v.host;w&&b&&w!==b&&(d=m)}return{props:rn({$event_type:i.type,$ce_version:1},l?{}:{$elements:f},{$elements_chain:Q9(f)},(n=f[0])!=null&&n.$el_text?{$el_text:(r=f[0])==null?void 0:r.$el_text}:{},d&&i.type==="click"?{$external_click_url:d}:{},h)}}let o7=class{constructor(e){this.i=!1,this.o=null,this.rageclicks=new II,this.h=!1,this.instance=e,this.m=null}get S(){var e,n,r=Zt(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(e=r.url_allowlist)==null?void 0:e.map(i=>new RegExp(i)),r.url_ignorelist=(n=r.url_ignorelist)==null?void 0:n.map(i=>new RegExp(i)),r}$(){if(this.isBrowserSupported()){if(W&&Ce){var e=r=>{r=r||(W==null?void 0:W.event);try{this.k(r)}catch(i){vA.error("Failed to capture event",i)}};if(Wt(Ce,"submit",e,{capture:!0}),Wt(Ce,"change",e,{capture:!0}),Wt(Ce,"click",e,{capture:!0}),this.S.capture_copied_text){var n=r=>{r=r||(W==null?void 0:W.event),this.k(r,Ow)};Wt(Ce,"copy",n,{capture:!0}),Wt(Ce,"cut",n,{capture:!0})}}}else vA.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[rA]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var n,r=[];return(n=this.m)==null||n.forEach(i=>{var s=Ce==null?void 0:Ce.querySelectorAll(i);s==null||s.forEach(o=>{e===o&&r.push(i)})}),r}get isEnabled(){var e,n,r=(e=this.instance.persistence)==null?void 0:e.props[rA],i=this.o;if(vl(i)&&!Fs(r)&&!this.instance.I())return!1;var s=(n=this.o)!==null&&n!==void 0?n:!!r;return!!this.instance.config.autocapture&&!s}k(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var r,i=AI(e);_I(i)&&(i=i.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.k(e,"$rageclick");var s=n===Ow;if(i&&X9(i,e,this.S,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=s7(i,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(i);if(l&&l.length>0&&(o.$element_selectors=l),n===Ow){var c,u=EI(W==null||(c=W.getSelection())==null?void 0:c.toString()),d=e.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Ti(Ce==null?void 0:Ce.querySelectorAll)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return Qn(t)&&isFinite(t)&&Math.floor(t)===t});var yA="0123456789abcdef";let a7=class r1{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,r,i){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||e<0||n<0||r<0||i<0||e>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|r>>>24,s[9]=r>>>16,s[10]=r>>>8,s[11]=r,s[12]=i>>>24,s[13]=i>>>16,s[14]=i>>>8,s[15]=i,new r1(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+yA.charAt(this.bytes[n]>>>4)+yA.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new r1(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var r=this.bytes[n]-e.bytes[n];if(r!==0)return Math.sign(r)}return 0}},l7=class{constructor(){this.P=0,this.R=0,this.T=new c7}generate(){var e=this.generateOrAbort();if(me(e)){this.P=0;var n=this.generateOrAbort();if(me(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.P)this.P=e,this.M();else{if(!(e+1e4>this.P))return;this.R++,this.R>4398046511103&&(this.P++,this.M())}return a7.fromFieldsV7(this.P,Math.trunc(this.R/Math.pow(2,30)),this.R&Math.pow(2,30)-1,this.T.nextUint32())}M(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}};var wA,DI=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};W&&!me(W.crypto)&&crypto.getRandomValues&&(DI=t=>crypto.getRandomValues(t));let c7=class{constructor(){this.C=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.C.length&&(DI(this.C),this.F=0),this.C[this.F++]}};var Ca=()=>u7().toString(),u7=()=>(wA||(wA=new l7)).generate(),Gd="",d7=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function f7(t,e){if(e){var n=function(i,s){if(s===void 0&&(s=Ce),Gd)return Gd;if(!s||["localhost","127.0.0.1"].includes(i))return"";for(var o=i.split("."),a=Math.min(o.length,8),l="dmn_chk_"+Ca();!Gd&&a--;){var c=o.slice(a).join("."),u=l+"=1;domain=."+c+";path=/";s.cookie=u+";max-age=3",s.cookie.includes(l)&&(s.cookie=u+";max-age=0",Gd=c)}return Gd}(t);if(!n){var r=(i=>{var s=i.match(d7);return s?s[0]:""})(t);r!==n&&Ae.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var Gs={O:()=>!!Ce,A:function(t){Ae.error("cookieStore error: "+t)},D:function(t){if(Ce){try{for(var e=t+"=",n=Ce.cookie.split(";").filter(s=>s.length),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return decodeURIComponent(i.substring(e.length,i.length))}}catch{}return null}},L:function(t){var e;try{e=JSON.parse(Gs.D(t))||{}}catch{}return e},j:function(t,e,n,r,i){if(Ce)try{var s="",o="",a=f7(Ce.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}i&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&Ae.warn("cookieStore warning: large cookie, len="+c.length),Ce.cookie=c,c}catch{return}},N:function(t,e){try{Gs.j(t,"",-1,e)}catch{return}}},Dw=null,vn={O:function(){if(!vl(Dw))return Dw;var t=!0;if(me(W))t=!1;else try{var e="__mplssupport__";vn.j(e,"xyz"),vn.D(e)!=='"xyz"'&&(t=!1),vn.N(e)}catch{t=!1}return t||Ae.error("localStorage unsupported; falling back to cookie store"),Dw=t,t},A:function(t){Ae.error("localStorage error: "+t)},D:function(t){try{return W==null?void 0:W.localStorage.getItem(t)}catch(e){vn.A(e)}return null},L:function(t){try{return JSON.parse(vn.D(t))||{}}catch{}return null},j:function(t,e){try{W==null||W.localStorage.setItem(t,JSON.stringify(e))}catch(n){vn.A(n)}},N:function(t){try{W==null||W.localStorage.removeItem(t)}catch(e){vn.A(e)}}},h7=["distinct_id",xv,_f,_v,kv],cm=xe({},vn,{L:function(t){try{var e={};try{e=Gs.L(t)||{}}catch{}var n=rn(e,JSON.parse(vn.D(t)||"{}"));return vn.j(t,n),n}catch{}return null},j:function(t,e,n,r,i,s){try{vn.j(t,e,void 0,void 0,s);var o={};h7.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&Gs.j(t,o,n,r,i,s)}catch(a){vn.A(a)}},N:function(t,e){try{W==null||W.localStorage.removeItem(t),Gs.N(t,e)}catch(n){vn.A(n)}}}),um={},p7={O:function(){return!0},A:function(t){Ae.error("memoryStorage error: "+t)},D:function(t){return um[t]||null},L:function(t){return um[t]||null},j:function(t,e){um[t]=e},N:function(t){delete um[t]}},Rl=null,Ln={O:function(){if(!vl(Rl))return Rl;if(Rl=!0,me(W))Rl=!1;else try{var t="__support__";Ln.j(t,"xyz"),Ln.D(t)!=='"xyz"'&&(Rl=!1),Ln.N(t)}catch{Rl=!1}return Rl},A:function(t){Ae.error("sessionStorage error: ",t)},D:function(t){try{return W==null?void 0:W.sessionStorage.getItem(t)}catch(e){Ln.A(e)}return null},L:function(t){try{return JSON.parse(Ln.D(t))||null}catch{}return null},j:function(t,e){try{W==null||W.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Ln.A(n)}},N:function(t){try{W==null||W.sessionStorage.removeItem(t)}catch(e){Ln.A(e)}}},Vc=function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t}({});let m7=class{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.U()?Vc.DENIED:this.q}isOptedOut(){return this.consent===Vc.DENIED||this.consent===Vc.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.B.j(this.H,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:e,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+e}get q(){var e=this.B.D(this.H);return e==="1"?Vc.GRANTED:e==="0"?Vc.DENIED:Vc.PENDING}get B(){if(!this.W){var e=this.S.opt_out_capturing_persistence_type;this.W=e==="localStorage"?vn:Gs;var n=e==="localStorage"?Gs:vn;n.D(this.H)&&(this.W.D(this.H)||this.optInOut(n.D(this.H)==="1"),n.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!bI([ni==null?void 0:ni.doNotTrack,ni==null?void 0:ni.msDoNotTrack,Ue.doNotTrack],e=>tt([!0,1,"1","yes"],e))}};var dm=Rn("[Dead Clicks]"),g7=()=>!0,v7=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property(SI)),r=t.instance.config.capture_dead_clicks;return Fs(r)?r:n};let LI=class{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(e,n,r){this.instance=e,this.isEnabled=n,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[SI]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(e){var n,r;(n=Ue.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(r=Ue.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this.instance,"dead-clicks-autocapture",i=>{i?dm.error("failed to load script",i):e()})}V(){var e;if(Ce){if(!this.G&&(e=Ue.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=Zt(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.G=Ue.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.G.start(Ce),dm.info("starting...")}}else dm.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,dm.info("stopping..."))}};function ri(t,e,n,r,i){return e>n&&(Ae.warn("min cannot be greater than max."),e=n),Qn(t)?t>n?(r&&Ae.warn(r+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(r&&Ae.warn(r+" cannot be less than min: "+e+". Using min value instead."),e):t:(r&&Ae.warn(r+" must be a number. using max or fallback. max: "+n+", fallback: "+i),ri(i||n,e,n,r))}let jI=class{constructor(e){this.K={},this.Y=()=>{Object.keys(this.K).forEach(n=>{var r=this.X(n)+this.Z;r>=this.tt?delete this.K[n]:this.it(n,r)})},this.X=n=>this.K[String(n)],this.it=(n,r)=>{this.K[String(n)]=r},this.consumeRateLimit=n=>{var r,i=(r=this.X(n))!==null&&r!==void 0?r:this.tt;if((i=Math.max(i-1,0))===0)return!0;this.it(n,i);var s,o=i===0;return o&&((s=this.et)==null||s.call(this,n)),o},this.rt=e,this.et=this.rt.et,this.tt=ri(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=ri(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=ri(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}};var fm=Rn("[ExceptionAutocapture]");let y7=class{constructor(e){var n,r,i;this.nt=()=>{var s;if(W&&this.isEnabled&&(s=Ue.__PosthogExtensions__)!=null&&s.errorWrappingFunctions){var o=Ue.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=Ue.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=Ue.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=o(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=a(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=l(this.captureException.bind(this)))}catch(c){fm.error("failed to start",c),this.ht()}}},this._instance=e,this.dt=!((n=this._instance.persistence)==null||!n.props[iA]),this.S=this.vt(),this.ct=new jI({refillRate:(r=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&r!==void 0?r:1,bucketSize:(i=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&i!==void 0?i:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return Zt(e)?n=xe({},n,e):(me(e)?this.dt:e)&&(n=xe({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(fm.info("enabled"),this.J(this.nt))}J(e){var n,r;(n=Ue.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(r=Ue.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"exception-autocapture",i=>{if(i)return fm.error("failed to load script",i);e()})}ht(){var e,n,r;(e=this.ot)==null||e.call(this),this.ot=void 0,(n=this.lt)==null||n.call(this),this.lt=void 0,(r=this.ut)==null||r.call(this),this.ut=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.dt=!!n||!1,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[iA]:this.dt}),this.startIfEnabled()}captureException(e){var n,r=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=r+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var i=(n=e.$exception_list[0].type)!==null&&n!==void 0?n:"Exception";this.ct.consumeRateLimit(i)?fm.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}};function $I(t){return!me(Event)&&FI(t,Event)}function FI(t,e){try{return t instanceof e}catch{return!1}}function BI(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return FI(t,Error)}}function jg(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function Lw(t){return jg(t,"DOMError")}var bA=/\(error: (.*)\)/,xA=50,fu="?";function jw(t,e,n,r){var i={platform:"web:javascript",filename:t,function:e==="<anonymous>"?fu:e,in_app:!0};return me(n)||(i.lineno=n),me(r)||(i.colno=r),i}var w7=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,b7=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,x7=/\((\S*)(?::(\d+))(?::(\d+))\)/,S7=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,k7=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,_7=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.sort((i,s)=>i[0]-s[0]).map(i=>i[1]);return function(i,s){s===void 0&&(s=0);for(var o=[],a=i.split(`
`),l=s;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var u=bA.test(c)?c.replace(bA,"$1"):c;if(!u.match(/\S*Error: /)){for(var d of r){var f=d(u);if(f){o.push(f);break}}if(o.length>=xA)break}}}return function(h){if(!h.length)return[];var m=Array.from(h);return m.reverse(),m.slice(0,xA).map(g=>xe({},g,{filename:g.filename||C7(m).filename,function:g.function||fu}))}(o)}}([30,t=>{var e=w7.exec(t);if(e){var[,n,r,i]=e;return jw(n,fu,+r,+i)}var s=b7.exec(t);if(s){if(s[2]&&s[2].indexOf("eval")===0){var o=x7.exec(s[2]);o&&(s[2]=o[1],s[3]=o[2],s[4]=o[3])}var[a,l]=kA(s[1]||fu,s[2]);return jw(l,a,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}}],[50,t=>{var e=S7.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=k7.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var r=e[3],i=e[1]||fu;return[i,r]=kA(i,r),jw(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function C7(t){return t[t.length-1]||{}}var hm,SA,$w,kA=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:fu,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},E7=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function C_(t,e){e===void 0&&(e=0);var n=t.stacktrace||t.stack||"",r=function(o){return o&&A7.test(o.message)?1:0}(t);try{var i=_7,s=function(o,a){var l=function(c){var u=globalThis._posthogChunkIds;if(!u)return{};var d=Object.keys(u);return $w&&d.length===SA||(SA=d.length,$w=d.reduce((f,h)=>{hm||(hm={});var m=hm[h];if(m)f[m[0]]=m[1];else for(var g=c(h),y=g.length-1;y>=0;y--){var v=g[y],w=v==null?void 0:v.filename,b=u[h];if(w&&b){f[w]=b,hm[h]=[w,b];break}}return f},{})),$w}(a);return o.forEach(c=>{c.filename&&(c.chunk_id=l[c.filename])}),o}(i(n,r),i);return s.slice(0,s.length-e)}catch{}return[]}var A7=/Minified React error #\d+;/i;function P7(t,e){var n,r,i=C_(t),s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(r=e==null?void 0:e.synthetic)!==null&&r!==void 0&&r;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(t),stacktrace:{frames:i,type:"raw"},mechanism:{handled:s,synthetic:o}}}function zI(t,e){var n=P7(t,e);return t.cause&&BI(t.cause)&&t.cause!==t?[n,...zI(t.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[n]}function Fw(t,e){return{$exception_list:zI(t,e),$exception_level:"error"}}function Bw(t,e){var n,r,i,s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(r=e==null?void 0:e.synthetic)===null||r===void 0||r,a={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(i=e==null?void 0:e.defaultExceptionType)!==null&&i!==void 0?i:"Error",value:t||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:s,synthetic:o}};if(e!=null&&e.syntheticException){var l=C_(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function N7(t){return Qt(t)&&!Hx(t)&&$9.indexOf(t)>=0}function T7(t,e){var n,r,i=(n=e==null?void 0:e.handled)===null||n===void 0||n,s=(r=e==null?void 0:e.synthetic)===null||r===void 0||r,o=e!=null&&e.overrideExceptionType?e.overrideExceptionType:$I(t)?t.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(u,d){d===void 0&&(d=40);var f=Object.keys(u);if(f.sort(),!f.length)return"[object has no keys]";for(var h=f.length;h>0;h--){var m=f.slice(0,h).join(", ");if(!(m.length>d))return h===f.length||m.length<=d?m:m.slice(0,d)+"..."}return""}(t),l={type:o,value:a,mechanism:{handled:i,synthetic:s}};if(e!=null&&e.syntheticException){var c=C_(e==null?void 0:e.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:N7(t.level)?t.level:"error"}}function M7(t,e){var{error:n,event:r}=t,i={$exception_list:[]},s=n||r;if(Lw(s)||function(f){return jg(f,"DOMException")}(s)){var o=s;if(function(f){return"stack"in f}(s))i=Fw(s,e);else{var a=o.name||(Lw(o)?"DOMError":"DOMException"),l=o.message?a+": "+o.message:a;i=Bw(l,xe({},e,{overrideExceptionType:Lw(o)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in o&&(i.$exception_DOMException_code=""+o.code),i}if(function(f){return jg(f,"ErrorEvent")}(s)&&s.error)return Fw(s.error,e);if(BI(s))return Fw(s,e);if(function(f){return jg(f,"Object")}(s)||$I(s))return T7(s,e);if(me(n)&&Qt(r)){var c="Error",u=r,d=r.match(E7);return d&&(c=d[1],u=d[2]),Bw(u,xe({},e,{overrideExceptionType:c,defaultExceptionMessage:u}))}return Bw(s,e)}function _A(t,e,n){try{if(!(e in t))return()=>{};var r=t[e],i=n(r);return Ti(i)&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=i,()=>{t[e]=r}}catch{return()=>{}}}let R7=class{constructor(e){var n;this._instance=e,this.ft=(W==null||(n=W.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(Ae.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.gt&&this.gt(),this.gt=void 0,Ae.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(W&&W.history){var r=this;(e=W.history.pushState)!=null&&e.__posthog_wrapped__||_A(W.history,"pushState",i=>function(s,o,a){i.call(this,s,o,a),r._t("pushState")}),(n=W.history.replaceState)!=null&&n.__posthog_wrapped__||_A(W.history,"replaceState",i=>function(s,o,a){i.call(this,s,o,a),r._t("replaceState")}),this.bt()}}_t(e){try{var n,r=W==null||(n=W.location)==null?void 0:n.pathname;if(!r)return;r!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ft=r}catch(i){Ae.error("Error capturing "+e+" pageview",i)}}bt(){if(!this.gt){var e=()=>{this._t("popstate")};Wt(W,"popstate",e),this.gt=()=>{W&&W.removeEventListener("popstate",e)}}}};function Pv(t){var e,n;return((e=JSON.stringify(t,(n=[],function(r,i){if(Zt(i)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(i)?"[Circular]":(n.push(i),i)}return i})))==null?void 0:e.length)||0}function i1(t,e){if(e===void 0&&(e=66060288e-1),t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),r=t.data.slice(0,n),i=t.data.slice(n);return[i1({size:Pv(r),data:r,sessionId:t.sessionId,windowId:t.windowId}),i1({size:Pv(i),data:i,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var co=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(co||{}),Ki=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(Ki||{}),s1="[SessionRecording]",o1="redacted",pm={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},O7=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],I7=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],D7=["/s/","/e/","/i/"];function CA(t,e,n,r){if(gt(t))return t;var i=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return Qt(i)&&(i=parseInt(i)),i>n?s1+" "+r+" body too large to record ("+i+" bytes)":t}function EA(t,e){if(gt(t))return t;var n=t;return nd(n,!1)||(n=s1+" "+e+" body "+o1),bt(I7,r=>{var i,s;(i=n)!=null&&i.length&&((s=n)==null?void 0:s.indexOf(r))!==-1&&(n=s1+" "+e+" body "+o1+" as might contain: "+r)}),n}var L7=(t,e)=>{var n,r,i,s={payloadSizeLimitBytes:pm.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...pm.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...pm.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,c=(n=s,i=Math.min(1e6,(r=n.payloadSizeLimitBytes)!==null&&r!==void 0?r:1e6),f=>(f!=null&&f.requestBody&&(f.requestBody=CA(f.requestBody,f.requestHeaders,i,"Request")),f!=null&&f.responseBody&&(f.responseBody=CA(f.responseBody,f.responseHeaders,i,"Response")),f)),u=f=>{return c(((g,y)=>{var v,w=rd(g.name),b=y.indexOf("http")===0?(v=rd(y))==null?void 0:v.pathname:y;b==="/"&&(b="");var k=w==null?void 0:w.pathname.replace(b||"","");if(!(w&&k&&D7.some(_=>k.indexOf(_)===0)))return g})((m=(h=f).requestHeaders,gt(m)||bt(Object.keys(m??{}),g=>{O7.includes(g.toLowerCase())&&(m[g]=o1)}),h),t.api_host));var h,m},d=Ti(t.session_recording.maskNetworkRequestFn);return d&&Ti(t.session_recording.maskCapturedNetworkRequestFn)&&Ae.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=f=>{var h=t.session_recording.maskNetworkRequestFn({url:f.name});return xe({},f,{name:h==null?void 0:h.url})}),s.maskRequestFn=Ti(t.session_recording.maskCapturedNetworkRequestFn)?f=>{var h,m=u(f);return m&&(h=t.session_recording.maskCapturedNetworkRequestFn==null?void 0:t.session_recording.maskCapturedNetworkRequestFn(m))!==null&&h!==void 0?h:void 0}:f=>function(h){if(!me(h))return h.requestBody=EA(h.requestBody,"Request"),h.responseBody=EA(h.responseBody,"Response"),h}(u(f)),xe({},pm,s,{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};let j7=class{constructor(e,n){var r,i;n===void 0&&(n={}),this.yt={},this.wt=s=>{if(!this.yt[s]){var o,a;this.yt[s]=!0;var l=this.St(s);(o=(a=this.rt).onBlockedNode)==null||o.call(a,s,l)}},this.$t=s=>{var o=this.St(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[s,o]},this.St=s=>this._rrweb.mirror.getNode(s),this.kt=s=>{var o,a,l,c,u,d,f,h;return((o=(a=s.removes)==null?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(c=s.attributes)==null?void 0:c.length)!==null&&l!==void 0?l:0)+((u=(d=s.texts)==null?void 0:d.length)!==null&&u!==void 0?u:0)+((f=(h=s.adds)==null?void 0:h.length)!==null&&f!==void 0?f:0)},this.throttleMutations=s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.kt(o);o.attributes&&(o.attributes=o.attributes.filter(c=>{var[u]=this.$t(c.id);return!this.ct.consumeRateLimit(u)&&c}));var l=this.kt(o);return l!==0||a===l?s:void 0},this._rrweb=e,this.rt=n,this.ct=new jI({bucketSize:(r=this.rt.bucketSize)!==null&&r!==void 0?r:100,refillRate:(i=this.rt.refillRate)!==null&&i!==void 0?i:10,refillInterval:1e3,et:this.wt})}};var Mi=Uint8Array,Ir=Uint16Array,id=Uint32Array,E_=new Mi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),A_=new Mi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),AA=new Mi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),UI=function(t,e){for(var n=new Ir(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new id(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},HI=UI(E_,2),$7=HI[0],a1=HI[1];$7[28]=258,a1[258]=28;for(var PA=UI(A_,0)[1],VI=new Ir(32768),It=0;It<32768;++It){var Ol=(43690&It)>>>1|(21845&It)<<1;Ol=(61680&(Ol=(52428&Ol)>>>2|(13107&Ol)<<2))>>>4|(3855&Ol)<<4,VI[It]=((65280&Ol)>>>8|(255&Ol)<<8)>>>1}var Xf=function(t,e,n){for(var r=t.length,i=0,s=new Ir(e);i<r;++i)++s[t[i]-1];var o,a=new Ir(e);for(i=0;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;for(o=new Ir(r),i=0;i<r;++i)o[i]=VI[a[t[i]-1]++]>>>15-t[i];return o},mc=new Mi(288);for(It=0;It<144;++It)mc[It]=8;for(It=144;It<256;++It)mc[It]=9;for(It=256;It<280;++It)mc[It]=7;for(It=280;It<288;++It)mc[It]=8;var Nv=new Mi(32);for(It=0;It<32;++It)Nv[It]=5;var F7=Xf(mc,9),B7=Xf(Nv,5),WI=function(t){return(t/8>>0)+(7&t&&1)},GI=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof Ir?Ir:t instanceof id?id:Mi)(n-e);return r.set(t.subarray(e,n)),r},oo=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},Kd=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},zw=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return[new Mi(0),0];if(i==1){var o=new Mi(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(_,E){return _.f-E.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var f=s[0].s;for(r=1;r<i;++r)s[r].s>f&&(f=s[r].s);var h=new Ir(f+1),m=l1(n[u-1],h,0);if(m>e){r=0;var g=0,y=m-e,v=1<<y;for(s.sort(function(_,E){return h[E.s]-h[_.s]||_.f-E.f});r<i;++r){var w=s[r].s;if(!(h[w]>e))break;g+=v-(1<<m-h[w]),h[w]=e}for(g>>>=y;g>0;){var b=s[r].s;h[b]<e?g-=1<<e-h[b]++-1:++r}for(;r>=0&&g;--r){var k=s[r].s;h[k]==e&&(--h[k],++g)}m=e}return[new Mi(h),m]},l1=function(t,e,n){return t.s==-1?Math.max(l1(t.l,e,n+1),l1(t.r,e,n+1)):e[t.s]=n},NA=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ir(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return[n.subarray(0,r),e]},Xd=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},c1=function(t,e,n){var r=n.length,i=WI(e+2);t[i]=255&r,t[i+1]=r>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<r;++s)t[i+s+4]=n[s];return 8*(i+4+r)},TA=function(t,e,n,r,i,s,o,a,l,c,u){oo(e,u++,n),++i[256];for(var d=zw(i,15),f=d[0],h=d[1],m=zw(s,15),g=m[0],y=m[1],v=NA(f),w=v[0],b=v[1],k=NA(g),_=k[0],E=k[1],C=new Ir(19),P=0;P<w.length;++P)C[31&w[P]]++;for(P=0;P<_.length;++P)C[31&_[P]]++;for(var M=zw(C,7),O=M[0],I=M[1],D=19;D>4&&!O[AA[D-1]];--D);var G,U,X,Z,te=c+5<<3,H=Xd(i,mc)+Xd(s,Nv)+o,$=Xd(i,f)+Xd(s,g)+o+14+3*D+Xd(C,O)+(2*C[16]+3*C[17]+7*C[18]);if(te<=H&&te<=$)return c1(e,u,t.subarray(l,l+c));if(oo(e,u,1+($<H)),u+=2,$<H){G=Xf(f,h),U=f,X=Xf(g,y),Z=g;var ne=Xf(O,I);for(oo(e,u,b-257),oo(e,u+5,E-1),oo(e,u+10,D-4),u+=14,P=0;P<D;++P)oo(e,u+3*P,O[AA[P]]);u+=3*D;for(var ke=[w,_],J=0;J<2;++J){var ae=ke[J];for(P=0;P<ae.length;++P){var j=31&ae[P];oo(e,u,ne[j]),u+=O[j],j>15&&(oo(e,u,ae[P]>>>5&127),u+=ae[P]>>>12)}}}else G=F7,U=mc,X=B7,Z=Nv;for(P=0;P<a;++P)if(r[P]>255){j=r[P]>>>18&31,Kd(e,u,G[j+257]),u+=U[j+257],j>7&&(oo(e,u,r[P]>>>23&31),u+=E_[j]);var L=31&r[P];Kd(e,u,X[L]),u+=Z[L],L>3&&(Kd(e,u,r[P]>>>5&8191),u+=A_[L])}else Kd(e,u,G[r[P]]),u+=U[r[P]];return Kd(e,u,G[256]),u+U[256]},z7=new id([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),U7=function(){for(var t=new id(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),H7=function(){var t=4294967295;return{p:function(e){for(var n=t,r=0;r<e.length;++r)n=U7[255&n^e[r]]^n>>>8;t=n},d:function(){return 4294967295^t}}},V7=function(t,e,n,r,i){return function(s,o,a,l,c,u){var d=s.length,f=new Mi(l+d+5*(1+Math.floor(d/7e3))+c),h=f.subarray(l,f.length-c),m=0;if(!o||d<8)for(var g=0;g<=d;g+=65535){var y=g+65535;y<d?m=c1(h,m,s.subarray(g,y)):(h[g]=u,m=c1(h,m,s.subarray(g,d)))}else{for(var v=z7[o-1],w=v>>>13,b=8191&v,k=(1<<a)-1,_=new Ir(32768),E=new Ir(k+1),C=Math.ceil(a/3),P=2*C,M=function(Fe){return(s[Fe]^s[Fe+1]<<C^s[Fe+2]<<P)&k},O=new id(25e3),I=new Ir(288),D=new Ir(32),G=0,U=0,X=(g=0,0),Z=0,te=0;g<d;++g){var H=M(g),$=32767&g,ne=E[H];if(_[$]=ne,E[H]=$,Z<=g){var ke=d-g;if((G>7e3||X>24576)&&ke>423){m=TA(s,h,0,O,I,D,U,X,te,g-te,m),X=G=U=0,te=g;for(var J=0;J<286;++J)I[J]=0;for(J=0;J<30;++J)D[J]=0}var ae=2,j=0,L=b,z=$-ne&32767;if(ke>2&&H==M(g-z))for(var S=Math.min(w,ke)-1,N=Math.min(32767,g),R=Math.min(258,ke);z<=N&&--L&&$!=ne;){if(s[g+ae]==s[g+ae-z]){for(var T=0;T<R&&s[g+T]==s[g+T-z];++T);if(T>ae){if(ae=T,j=z,T>S)break;var K=Math.min(z,T-2),V=0;for(J=0;J<K;++J){var ee=g-z+J+32768&32767,q=ee-_[ee]+32768&32767;q>V&&(V=q,ne=ee)}}}z+=($=ne)-(ne=_[$])+32768&32767}if(j){O[X++]=268435456|a1[ae]<<18|PA[j];var Te=31&a1[ae],je=31&PA[j];U+=E_[Te]+A_[je],++I[257+Te],++D[je],Z=g+ae,++G}else O[X++]=s[g],++I[s[g]]}}m=TA(s,h,u,O,I,D,U,X,te,g-te,m)}return GI(f,0,l+WI(m)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,r,!0)},u1=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},W7=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&u1(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var r=0;r<=n.length;++r)t[r+10]=n.charCodeAt(r)}},G7=function(t){return 10+(t.filename&&t.filename.length+1||0)};function KI(t,e){e===void 0&&(e={});var n=H7(),r=t.length;n.p(t);var i=V7(t,e,G7(e),8),s=i.length;return W7(i,e),u1(i,s-8,n.d()),u1(i,s-4,r),i}function XI(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var r=new Mi(t.length+(t.length>>>1)),i=0,s=function(c){r[i++]=c},o=0;o<n;++o){if(i+5>r.length){var a=new Mi(i+8+(n-o<<1));a.set(r),r=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return GI(r,0,i)}function K7(t,e){return function(n){for(var r=0,i=0;i<n.length;i++)r=(r<<5)-r+n.charCodeAt(i),r|=0;return Math.abs(r)}(t)%100<ri(100*e,0,100)}var Za="disabled",P_="sampled",Tv="active",gc="buffering",N_="paused",T_="trigger",Ks=T_+"_activated",rr=T_+"_pending",eo=T_+"_"+Za;function MA(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class YI{constructor(e){this.xt=e}triggerStatus(e){var n=this.xt.map(r=>r.triggerStatus(e));return n.includes(Ks)?Ks:n.includes(rr)?rr:eo}stop(){this.xt.forEach(e=>e.stop())}}class qI{constructor(e){this.xt=e}triggerStatus(e){var n=new Set;for(var r of this.xt)n.add(r.triggerStatus(e));switch(n.delete(eo),n.size){case 0:return eo;case 1:return Array.from(n)[0];default:return rr}}stop(){this.xt.forEach(e=>e.stop())}}class X7{triggerStatus(){return rr}stop(){}}class Y7{constructor(e){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var n,r;this.Et=((n=e.sessionRecording)==null?void 0:n.urlTriggers)||[],this.It=((r=e.sessionRecording)==null?void 0:r.urlBlocklist)||[]}Pt(e){var n;return this.Et.length===0?eo:((n=this._instance)==null?void 0:n.get_property(Kx))===e?Ks:rr}triggerStatus(e){var n=this.Pt(e),r=n===Ks?Ks:n===rr?rr:eo;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:r}),r}checkUrlTriggerConditions(e,n,r){if(W!==void 0&&W.location.href){var i=W.location.href,s=this.urlBlocked,o=MA(i,this.It);s&&o||(o&&!s?e():!o&&s&&n(),MA(i,this.Et)&&r("url"))}}stop(){}}class q7{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=e}triggerStatus(){var e=rr;return gt(this.linkedFlag)&&(e=eo),this.linkedFlagSeen&&(e=Ks),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,n){var r;if(this.linkedFlag=((r=e.sessionRecording)==null?void 0:r.linkedFlag)||null,!gt(this.linkedFlag)&&!this.linkedFlagSeen){var i=Qt(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,s=Qt(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((o,a)=>{var l=!1;if(Zt(a)&&i in a){var c=a[i];l=Fs(c)?c===!0:s?c===s:!!c}this.linkedFlagSeen=l,l&&n(i,s)})}}stop(){this.Rt()}}let J7=class{constructor(e){this.Tt=[],this._instance=e}onRemoteConfig(e){var n;this.Tt=((n=e.sessionRecording)==null?void 0:n.eventTriggers)||[]}Mt(e){var n;return this.Tt.length===0?eo:((n=this._instance)==null?void 0:n.get_property(Xx))===e?Ks:rr}triggerStatus(e){var n=this.Mt(e),r=n===Ks?Ks:n===rr?rr:eo;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:r}),r}stop(){}};function Z7(t){return t.isRecordingEnabled?gc:Za}function Q7(t){if(!t.receivedFlags)return gc;if(!t.isRecordingEnabled)return Za;if(t.urlTriggerMatching.urlBlocked)return N_;var e=t.isSampled===!0,n=new YI([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId);return e?P_:n===Ks?Tv:n===rr?gc:t.isSampled===!1?Za:Tv}function eU(t){if(!t.receivedFlags)return gc;if(!t.isRecordingEnabled)return Za;if(t.urlTriggerMatching.urlBlocked)return N_;var e=new qI([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId),n=e!==eo,r=Fs(t.isSampled);return n&&e===rr?gc:n&&e===eo||r&&!t.isSampled?Za:t.isSampled===!0?P_:Tv}var Ef="[SessionRecording]",Xn=Rn(Ef);function mm(){var t;return Ue==null||(t=Ue.__PosthogExtensions__)==null||(t=t.rrweb)==null?void 0:t.record}var tU=3e5,nU=[Ki.MouseMove,Ki.MouseInteraction,Ki.Scroll,Ki.ViewportResize,Ki.Input,Ki.TouchMove,Ki.MediaInteraction,Ki.Drag],RA=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function Il(t){return function(e,n){for(var r="",i=0;i<e.length;){var s=e[i++];r+=String.fromCharCode(s)}return r}(KI(XI(JSON.stringify(t))))}function OA(t){return t.type===co.Custom&&t.data.tag==="sessionIdle"}class rU{get sessionId(){return this.Ct}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw new Error(Ef+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var e,n;return this.Lt.triggerStatus(this.sessionId)===rr?6e4:(e=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:tU}get jt(){var e=this._instance.get_property(_f);return Fs(e)?e:null}get Nt(){var e,n,r=(e=this.C)==null?void 0:e.data[((n=this.C)==null?void 0:n.data.length)-1],{sessionStartTimestamp:i}=this.At.checkAndGetSessionAndWindowId(!0);return r?r.timestamp-i:null}get zt(){var e=!!this._instance.get_property(Gx),n=!this._instance.config.disable_session_recording;return W&&e&&n}get Ut(){var e=!!this._instance.get_property(aA),n=this._instance.config.enable_recording_console_log;return n??e}get qt(){var e,n,r,i,s,o,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(uA),c=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,u=(r=(i=a==null?void 0:a.canvasFps)!==null&&i!==void 0?i:l==null?void 0:l.fps)!==null&&r!==void 0?r:4,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:.4;if(typeof d=="string"){var f=parseFloat(d);d=isNaN(f)?.4:f}return{enabled:c,fps:ri(u,0,12,"canvas recording fps",4),quality:ri(d,0,1,"canvas recording quality",.4)}}get Bt(){var e,n,r=this._instance.get_property(lA),i={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},s=(i==null?void 0:i.recordHeaders)||(r==null?void 0:r.recordHeaders),o=(i==null?void 0:i.recordBody)||(r==null?void 0:r.recordBody),a=Zt(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(Fs(a)?a:r!=null&&r.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get Ht(){var e,n,r,i,s,o,a=this._instance.get_property(cA),l={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(r=this._instance.config.session_recording)==null?void 0:r.blockSelector},c=(i=l==null?void 0:l.maskAllInputs)!==null&&i!==void 0?i:a==null?void 0:a.maskAllInputs,u=(s=l==null?void 0:l.maskTextSelector)!==null&&s!==void 0?s:a==null?void 0:a.maskTextSelector,d=(o=l==null?void 0:l.blockSelector)!==null&&o!==void 0?o:a==null?void 0:a.blockSelector;return me(c)&&me(u)&&me(d)?void 0:{maskAllInputs:c==null||c,maskTextSelector:u,blockSelector:d}}get Wt(){var e=this._instance.get_property(dA);return Qn(e)?e:null}get Gt(){var e=this._instance.get_property(fA);return Qn(e)?e:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.jt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):gc}constructor(e){if(this.Vt=Z7,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.Lt=new X7,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(Ce!=null&&Ce.visibilityState){var i="window "+Ce.visibilityState;this.ui(i,{})}},this._instance=e,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw Xn.error("started without valid sessionManager"),new Error(Ef+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(Ef+" cannot be used with __preview_experimental_cookieless_mode.");this.Xt=new q7(this._instance),this.Kt=new Y7(this._instance),this.Yt=new J7(this._instance);var{sessionId:n,windowId:r}=this.At.checkAndGetSessionAndWindowId();this.Ct=n,this.fi=r,this.C=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&Xn.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.zt?(this.gi(e),Wt(W,"beforeunload",this.oi),Wt(W,"offline",this.li),Wt(W,"online",this.hi),Wt(W,"visibilitychange",this.di),this.mi(),this.bi(),gt(this.ii)&&(this.ii=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var r=n!=null&&n.properties.$current_url?this.yi(n==null?void 0:n.properties.$current_url):"";if(!r)return;this.ui("$pageview",{href:r})}}catch(i){Xn.error("Could not add $pageview to rrweb session",i)}})),this.ei||(this.ei=this.At.onSessionId((n,r,i)=>{var s,o;i&&(this.ui("$session_id_change",{sessionId:n,windowId:r,changeReason:i}),(s=this._instance)==null||(s=s.persistence)==null||s.unregister(Xx),(o=this._instance)==null||(o=o.persistence)==null||o.unregister(Kx))}))):this.stopRecording()}stopRecording(){var e,n,r,i;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,W==null||W.removeEventListener("beforeunload",this.oi),W==null||W.removeEventListener("offline",this.li),W==null||W.removeEventListener("online",this.hi),W==null||W.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),(e=this.ii)==null||e.call(this),this.ii=void 0,(n=this.ni)==null||n.call(this),this.ni=void 0,(r=this.ei)==null||r.call(this),this.ei=void 0,(i=this.si)==null||i.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),Xn.info("stopped"))}Si(){var e;(e=this._instance.persistence)==null||e.unregister(_f)}$i(e){var n,r=this.Ct!==e,i=this.Wt;if(Qn(i)){var s=this.jt,o=r||!Fs(s),a=o?K7(e,i):s;o&&(a?this.ki(P_):Xn.warn("Sample rate ("+i+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:i,isSampled:a})),(n=this._instance.persistence)==null||n.register({[_f]:a})}else this.Si()}onRemoteConfig(e){var n,r,i,s;this.ui("$remote_config_received",e),this.xi(e),(n=e.sessionRecording)!=null&&n.endpoint&&(this.vi=(s=e.sessionRecording)==null?void 0:s.endpoint),this.mi(),((r=e.sessionRecording)==null?void 0:r.triggerMatchType)==="any"?(this.Vt=Q7,this.Lt=new YI([this.Yt,this.Kt])):(this.Vt=eU,this.Lt=new qI([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(i=e.sessionRecording)==null?void 0:i.triggerMatchType}),this.Kt.onRemoteConfig(e),this.Yt.onRemoteConfig(e),this.Xt.onRemoteConfig(e,(o,a)=>{this.ki("linked_flag_matched",{flag:o,variant:a})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){Qn(this.Wt)&&gt(this.si)&&(this.si=this.At.onSessionId(e=>{this.$i(e)}))}xi(e){if(this._instance.persistence){var n,r=this._instance.persistence,i=()=>{var s,o,a,l,c,u,d,f,h,m=(s=e.sessionRecording)==null?void 0:s.sampleRate,g=gt(m)?null:parseFloat(m);gt(g)&&this.Si();var y=(o=e.sessionRecording)==null?void 0:o.minimumDurationMilliseconds;r.register({[Gx]:!!e.sessionRecording,[aA]:(a=e.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[lA]:xe({capturePerformance:e.capturePerformance},(l=e.sessionRecording)==null?void 0:l.networkPayloadCapture),[cA]:(c=e.sessionRecording)==null?void 0:c.masking,[uA]:{enabled:(u=e.sessionRecording)==null?void 0:u.recordCanvas,fps:(d=e.sessionRecording)==null?void 0:d.canvasFps,quality:(f=e.sessionRecording)==null?void 0:f.canvasQuality},[dA]:g,[fA]:me(y)?null:y,[hA]:(h=e.sessionRecording)==null?void 0:h.scriptConfig})};i(),(n=this.ri)==null||n.call(this),this.ri=this.At.onSessionId(i)}}log(e,n){var r;n===void 0&&(n="log"),(r=this._instance.sessionRecording)==null||r.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}gi(e){if(!me(Object.assign)&&!me(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),mm()?this.Ei():(n=Ue.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.Ii,r=>{if(r)return Xn.error("could not load recorder",r);this.Ei()}),Xn.info("starting"),this.status===Tv&&this.ki(e||"recording_initialized")}}get Ii(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(hA))==null?void 0:e.script)||"recorder"}Pi(e){var n;return e.type===3&&nU.indexOf((n=e.data)==null?void 0:n.source)!==-1}Ri(e){var n=this.Pi(e);n||this.Zt||e.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.C.data.length,bufferSize:this.C.size}),this.ai());var r=!1;if(n&&(this.ti=e.timestamp,this.Zt)){var i=this.Zt==="unknown";this.Zt=!1,i||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:e.type}),r=!0)}if(!this.Zt){var{windowId:s,sessionId:o}=this.At.checkAndGetSessionAndWindowId(!n,e.timestamp),a=this.Ct!==o,l=this.fi!==s;this.fi=s,this.Ct=o,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):r&&this.Ti()}}Mi(e){try{return e.rrwebMethod(),!0}catch(n){return this.Qt.length<10?this.Qt.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):Xn.warn("could not emit queued rrweb event.",n,e),!1}}ui(e,n){return this.Mi(RA(()=>mm().addCustomEvent(e,n)))}Ci(){return this.Mi(RA(()=>mm().takeFullSnapshot()))}Ei(){var e,n,r,i,s={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},o=this._instance.config.session_recording;for(var[a,l]of Object.entries(o||{}))a in s&&(a==="maskInputOptions"?s.maskInputOptions=xe({password:!0},l):s[a]=l);this.qt&&this.qt.enabled&&(s.recordCanvas=!0,s.sampling={canvas:this.qt.fps},s.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(s.maskAllInputs=(n=this.Ht.maskAllInputs)===null||n===void 0||n,s.maskTextSelector=(r=this.Ht.maskTextSelector)!==null&&r!==void 0?r:void 0,s.blockSelector=(i=this.Ht.blockSelector)!==null&&i!==void 0?i:void 0);var c=mm();if(c){this.Fi=(e=this.Fi)!==null&&e!==void 0?e:new j7(c,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(d,f)=>{var h="Too many mutations on node '"+d+"'. Rate limiting. This could be due to SVG animations or something similar";Xn.info(h,{node:f}),this.log(Ef+" "+h,"warn")}});var u=this.Oi();this.ci=c(xe({emit:d=>{this.onRRwebEmit(d)},plugins:u},s)),this.ti=Date.now(),this.Zt=Fs(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:s,activePlugins:u.map(d=>d==null?void 0:d.name)}),this.ui("$posthog_config",{config:this._instance.config})}else Xn.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),this.Zt!==!0){var e=this.Dt;e&&(this.wi=setInterval(()=>{this.Ci()},e))}}Oi(){var e,n,r=[],i=(e=Ue.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;i&&this.Ut&&r.push(i());var s=(n=Ue.__PosthogExtensions__)==null||(n=n.rrwebPlugins)==null?void 0:n.getRecordNetworkPlugin;return this.Bt&&Ti(s)&&(!t7.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?r.push(s(L7(this._instance.config,this.Bt))):Xn.info("NetworkCapture not started because we are on localhost.")),r}onRRwebEmit(e){var n;if(this.Ai(),e&&Zt(e)){if(e.type===co.Meta){var r=this.yi(e.data.href);if(this.Di=r,!r)return;e.data.href=r}else this.Li();if(this.Kt.checkUrlTriggerConditions(()=>this.ji(),()=>this.Ni(),f=>this.zi(f)),!this.Kt.urlBlocked||(i=e).type===co.Custom&&i.data.tag==="recording paused"){var i;e.type===co.FullSnapshot&&this.Ti(),e.type===co.FullSnapshot&&this.Jt&&this.Lt.triggerStatus(this.sessionId)===rr&&this.pi();var s=this.Fi?this.Fi.throttleMutations(e):e;if(s){var o=function(f){var h=f;if(h&&Zt(h)&&h.type===6&&Zt(h.data)&&h.data.plugin==="rrweb/console@1"){h.data.payload.payload.length>10&&(h.data.payload.payload=h.data.payload.payload.slice(0,10),h.data.payload.payload.push("...[truncated]"));for(var m=[],g=0;g<h.data.payload.payload.length;g++)h.data.payload.payload[g]&&h.data.payload.payload[g].length>2e3?m.push(h.data.payload.payload[g].slice(0,2e3)+"...[truncated]"):m.push(h.data.payload.payload[g]);return h.data.payload.payload=m,f}return f}(s);if(this.Ri(o),this.Zt!==!0||OA(o)){if(OA(o)){var a=o.data.payload;if(a){var l=a.lastActivityTimestamp,c=a.threshold;o.timestamp=l+c}}var u=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(f){if(Pv(f)<1024)return f;try{if(f.type===co.FullSnapshot)return xe({},f,{data:Il(f.data),cv:"2024-10"});if(f.type===co.IncrementalSnapshot&&f.data.source===Ki.Mutation)return xe({},f,{cv:"2024-10",data:xe({},f.data,{texts:Il(f.data.texts),attributes:Il(f.data.attributes),removes:Il(f.data.removes),adds:Il(f.data.adds)})});if(f.type===co.IncrementalSnapshot&&f.data.source===Ki.StyleSheetRule)return xe({},f,{cv:"2024-10",data:xe({},f.data,{adds:f.data.adds?Il(f.data.adds):void 0,removes:f.data.removes?Il(f.data.removes):void 0})})}catch(h){Xn.error("could not compress event - will use uncompressed event",h)}return f}(o):o,d={$snapshot_bytes:Pv(u),$snapshot_data:u,$session_id:this.Ct,$window_id:this.fi};this.status!==Za?this.Ui(d):this.pi()}}}}}Li(){if(!this._instance.config.capture_pageview&&W){var e=this.yi(W.location.href);this.Di!==e&&(this.ui("$url_changed",{href:e}),this.Di=e)}}Ai(){if(this.Qt.length){var e=[...this.Qt];this.Qt=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.Mi(n)})}}yi(e){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var r,i={url:e};return(r=i=n.maskNetworkRequestFn(i))==null?void 0:r.url}return e}pi(){return this.C={size:0,data:[],sessionId:this.Ct,windowId:this.fi},this.C}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var e=this.Gt,n=this.Nt,r=Qn(n)&&n>=0,i=Qn(e)&&r&&n<e;return this.status===gc||this.status===N_||this.status===Za||i?(this.qi=setTimeout(()=>{this.ai()},2e3),this.C):(this.C.data.length>0&&i1(this.C).forEach(s=>{this.Bi({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId,$lib:"web",$lib_version:ho.LIB_VERSION})}),this.pi())}Ui(e){var n,r=2+(((n=this.C)==null?void 0:n.data.length)||0);!this.Zt&&(this.C.size+e.$snapshot_bytes+r>943718.4||this.C.sessionId!==this.Ct)&&(this.C=this.ai()),this.C.size+=e.$snapshot_bytes,this.C.data.push(e.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(e){var n;this.Lt.triggerStatus(this.sessionId)===rr&&((n=this._instance)==null||(n=n.persistence)==null||n.register({[e==="url"?Kx:Xx]:this.Ct}),this.ai(),this.ki(e+"_trigger_matched"))}ji(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),Xn.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Ci(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),Xn.info("recording resumed"))}bi(){this.Yt.Tt.length!==0&&gt(this.ni)&&(this.ni=this._instance.on("eventCaptured",e=>{try{this.Yt.Tt.includes(e.event)&&this.zi("event")}catch(n){Xn.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Ci(),this.ki("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[_f]:!0}),this.Ci(),this.ki("sampling_overridden")}overrideTrigger(e){this.zi(e)}ki(e,n){this._instance.register_for_session({$session_recording_start_reason:e}),Xn.info(e.replace("_"," "),n),tt(["recording_initialized","session_id_changed"],e)||this.ui(e,n)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.C.data.length,$sdk_debug_replay_internal_buffer_size:this.C.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:e}}}var Uw=Rn("[SegmentIntegration]");function iU(t,e){var n=t.config.segment;if(!n)return e();(function(r,i){var s=r.config.segment;if(!s)return i();var o=l=>{var c=()=>l.anonymousId()||Ca();r.config.get_device_id=c,l.id()&&(r.register({distinct_id:l.id(),$device_id:c()}),r.persistence.set_property(lo,"identified")),i()},a=s.user();"then"in a&&Ti(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((r=>{Promise&&Promise.resolve||Uw.warn("This browser does not have Promise support, and can not use the segment integration");var i=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===r.get_distinct_id()||(Uw.info("No userId set, resetting PostHog"),r.reset()),s.event.userId&&s.event.userId!==r.get_distinct_id()&&(Uw.info("UserId set, identifying with PostHog"),r.identify(s.event.userId));var a=r.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},a,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>i(s,s.event.event),page:s=>i(s,"$pageview"),identify:s=>i(s,"$identify"),screen:s=>i(s,"$screen")}})(t)).then(()=>{e()})})}var JI="posthog-js";function ZI(t,e){var{organization:n,projectId:r,prefix:i,severityAllowList:s=["error"]}=e===void 0?{}:e;return o=>{var a,l,c,u,d;if(!(s==="*"||s.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var f=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());o.tags["PostHog Person URL"]=f,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var h=((a=o.exception)==null?void 0:a.values)||[],m=h.map(y=>xe({},y,{stacktrace:y.stacktrace?xe({},y.stacktrace,{type:"raw",frames:(y.stacktrace.frames||[]).map(v=>xe({},v,{platform:"web:javascript"}))}):void 0})),g={$exception_message:((l=h[0])==null?void 0:l.value)||o.message,$exception_type:(c=h[0])==null?void 0:c.type,$exception_personURL:f,$exception_level:o.level,$exception_list:m,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((u=h[0])==null?void 0:u.value)||o.message,$sentry_exception_type:(d=h[0])==null?void 0:d.type,$sentry_tags:o.tags};return n&&r&&(g.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+o.event_id),t.exceptions.sendExceptionEvent(g),o}}class sU{constructor(e,n,r,i,s){this.name=JI,this.setupOnce=function(o){o(ZI(e,{organization:n,projectId:r,prefix:i,severityAllowList:s}))}}}var oU=W!=null&&W.location?Av(W.location.hash,"__posthog")||Av(location.hash,"state"):null,IA="_postHogToolbarParams",DA=Rn("[Toolbar]"),aa=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t}(aa||{});class aU{constructor(e){this.instance=e}Hi(e){Ue.ph_toolbar_state=e}Wi(){var e;return(e=Ue.ph_toolbar_state)!==null&&e!==void 0?e:aa.UNINITIALIZED}maybeLoadToolbar(e,n,r){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),!W||!Ce)return!1;e=e??W.location,r=r??W.history;try{if(!n){try{W.localStorage.setItem("test","test"),W.localStorage.removeItem("test")}catch{return!1}n=W==null?void 0:W.localStorage}var i,s=oU||Av(e.hash,"__posthog")||Av(e.hash,"state"),o=s?nA(()=>JSON.parse(atob(decodeURIComponent(s))))||nA(()=>JSON.parse(decodeURIComponent(s))):null;return o&&o.action==="ph_authorize"?((i=o).source="url",i&&Object.keys(i).length>0&&(o.desiredHash?e.hash=o.desiredHash:r?r.replaceState(r.state,"",e.pathname+e.search):e.hash="")):((i=JSON.parse(n.getItem(IA)||"{}")).source="localstorage",delete i.userIntent),!(!i.token||this.instance.config.token!==i.token)&&(this.loadToolbar(i),!0)}catch{return!1}}Gi(e){var n=Ue.ph_load_toolbar||Ue.ph_load_editor;!gt(n)&&Ti(n)?n(e,this.instance):DA.warn("No toolbar load function found")}loadToolbar(e){var n=!(Ce==null||!Ce.getElementById(kI));if(!W||n)return!1;var r=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,i=xe({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(W.localStorage.setItem(IA,JSON.stringify(xe({},i,{source:void 0}))),this.Wi()===aa.LOADED)this.Gi(i);else if(this.Wi()===aa.UNINITIALIZED){var s;this.Hi(aa.LOADING),(s=Ue.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return DA.error("[Toolbar] Failed to load",o),void this.Hi(aa.UNINITIALIZED);this.Hi(aa.LOADED),this.Gi(i)}),Wt(W,"turbolinks:load",()=>{this.Hi(aa.UNINITIALIZED),this.loadToolbar(i)})}return!0}Ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,r){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),this.maybeLoadToolbar(e,n,r)}}var lU=Rn("[TracingHeaders]");class cU{constructor(e){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var n,r;me(this.Vi)&&((n=Ue.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.get_distinct_id(),this._instance.sessionManager)),me(this.Ki)&&((r=Ue.__PosthogExtensions__)==null||(r=r.tracingHeadersPatchFns)==null||r._patchFetch(this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}J(e){var n,r;(n=Ue.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(r=Ue.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"tracing-headers",i=>{if(i)return lU.error("failed to load script",i);e()})}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.J(this.nt):((e=this.Vi)==null||e.call(this),(n=this.Ki)==null||n.call(this),this.Vi=void 0,this.Ki=void 0)}}var ea=Rn("[Web Vitals]"),LA=9e5;class uU{constructor(e){var n;this.Yi=!1,this.i=!1,this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),this.C.metrics.length!==0&&(this._instance.capture("$web_vitals",this.C.metrics.reduce((r,i)=>xe({},r,{["$web_vitals_"+i.name+"_event"]:xe({},i),["$web_vitals_"+i.name+"_value"]:i.value}),{})),this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=r=>{var i,s=(i=this._instance.sessionManager)==null?void 0:i.checkAndGetSessionAndWindowId(!0);if(me(s))ea.error("Could not read session ID. Dropping metrics!");else{this.C=this.C||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.te();me(o)||(gt(r==null?void 0:r.name)||gt(r==null?void 0:r.value)?ea.error("Invalid metric received",r):this.ie&&r.value>=this.ie?ea.error("Ignoring metric with value >= "+this.ie,r):(this.C.url!==o&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),me(this.C.url)&&(this.C.url=o),this.C.firstMetricTimestamp=me(this.C.firstMetricTimestamp)?Date.now():this.C.firstMetricTimestamp,r.attribution&&r.attribution.interactionTargetElement&&(r.attribution.interactionTargetElement=void 0),this.C.metrics.push(xe({},r,{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.C.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var r,i,s,o,a=Ue.__PosthogExtensions__;me(a)||me(a.postHogWebVitalsCallbacks)||({onLCP:r,onCLS:i,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),r&&i&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&r(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&i(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Zi.bind(this)),this.i=!0):ea.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Yi=!((n=this._instance.persistence)==null||!n.props[sA]),this.startIfEnabled()}get allowedMetrics(){var e,n,r=Zt(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return me(r)?((n=this._instance.persistence)==null?void 0:n.props[oA])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(Zt(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var e=Zt(this._instance.config.capture_performance)&&Qn(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:LA;return 0<e&&e<=6e4?LA:e}get isEnabled(){var e=Nr==null?void 0:Nr.protocol;if(e!=="http:"&&e!=="https:")return ea.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=Zt(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Fs(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Fs(n)?n:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(ea.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(e){var n=Zt(e.capturePerformance)&&!!e.capturePerformance.web_vitals,r=Zt(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[sA]:n}),this._instance.persistence.register({[oA]:r})),this.Yi=n,this.startIfEnabled()}J(e){var n,r;(n=Ue.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&e(),(r=Ue.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"web-vitals",i=>{i?ea.error("failed to load script",i):e()})}te(){var e=W?W.location.href:void 0;return e||ea.error("Could not determine current URL"),e}}var dU=Rn("[Heatmaps]");function jA(t){return Zt(t)&&"clientX"in t&&"clientY"in t&&Qn(t.clientX)&&Qn(t.clientY)}class fU{constructor(e){var n;this.rageclicks=new II,this.Yi=!1,this.i=!1,this.ee=null,this.instance=e,this.Yi=!((n=this.instance.persistence)==null||!n.props[Vx])}get flushIntervalMilliseconds(){var e=5e3;return Zt(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return me(this.instance.config.capture_heatmaps)?me(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;dU.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this.ee)!==null&&e!==void 0?e:void 0),(n=this.ne)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[Vx]:n}),this.Yi=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.C;return this.C=void 0,e}oe(e){this.ae(e.originalEvent,"deadclick")}re(){W&&Ce&&(Wt(W,"beforeunload",this.se.bind(this)),Wt(Ce,"click",e=>this.ae(e||(W==null?void 0:W.event)),{capture:!0}),Wt(Ce,"mousemove",e=>this.le(e||(W==null?void 0:W.event)),{capture:!0}),this.ne=new LI(this.instance,g7,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(e,n){var r=this.instance.scrollManager.scrollY(),i=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,c){for(var u=a;u&&l0(u)&&!Fa(u,"body");){if(u===c)return!1;if(tt(l,W==null?void 0:W.getComputedStyle(u).position))return!0;u=PI(u)}return!1}(AI(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:i),y:e.clientY+(o?0:r),target_fixed:o,type:n}}ae(e,n){var r;if(n===void 0&&(n="click"),!pA(e.target)&&jA(e)){var i=this.ue(e,n);(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.he(xe({},i,{type:"rageclick"})),this.he(i)}}le(e){!pA(e.target)&&jA(e)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(e,"mousemove"))},500))}he(e){if(W){var n=W.location.href;this.C=this.C||{},this.C[n]||(this.C[n]=[]),this.C[n].push(e)}}se(){this.C&&!uu(this.C)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class hU{constructor(e){this._instance=e}doPageView(e,n){var r,i=this.ve(e,n);return this.ce={pathname:(r=W==null?void 0:W.location.pathname)!==null&&r!==void 0?r:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),i}doPageLeave(e){var n;return this.ve(e,(n=this.ce)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.ce)==null?void 0:e.pageViewId}}ve(e,n){var r=this.ce;if(!r)return{$pageview_id:n};var i={$pageview_id:n,$prev_pageview_id:r.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:u,maxContentY:d}=s;if(!(me(o)||me(a)||me(l)||me(c)||me(u)||me(d))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),d=Math.ceil(d);var f=o<=1?1:ri(a/o,0,1),h=o<=1?1:ri(l/o,0,1),m=c<=1?1:ri(u/c,0,1),g=c<=1?1:ri(d/c,0,1);i=rn(i,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:f,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:h,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:m,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:g})}}return r.pathname&&(i.$prev_pageview_pathname=r.pathname),r.timestamp&&(i.$prev_pageview_duration=(e.getTime()-r.timestamp.getTime())/1e3),i}}var pU=function(t){var e,n,r,i,s="";for(e=n=0,r=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,i=0;i<r;i++){var o=t.charCodeAt(i),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),vl(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=i+1)}return n>e&&(s+=t.substring(e,t.length)),s},mU=!!zx||!!Bx,$A="text/plain",Mv=(t,e)=>{var[n,r]=t.split("?"),i=xe({},e);r==null||r.split("&").forEach(o=>{var[a]=o.split("=");delete i[a]});var s=n7(i);return n+"?"+(s=s?(r?r+"&":"")+s:r)},Af=(t,e)=>JSON.stringify(t,(n,r)=>typeof r=="bigint"?r.toString():r,e),Hw=t=>{var{data:e,compression:n}=t;if(e){if(n===Eo.GZipJS){var r=KI(XI(Af(e)),{mtime:0}),i=new Blob([r],{type:$A});return{contentType:$A,body:i,estimatedSize:i.size}}if(n===Eo.Base64){var s=function(l){var c,u,d,f,h,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=0,y=0,v="",w=[];if(!l)return l;l=pU(l);do c=(h=l.charCodeAt(g++)<<16|l.charCodeAt(g++)<<8|l.charCodeAt(g++))>>18&63,u=h>>12&63,d=h>>6&63,f=63&h,w[y++]=m.charAt(c)+m.charAt(u)+m.charAt(d)+m.charAt(f);while(g<l.length);switch(v=w.join(""),l.length%3){case 1:v=v.slice(0,-2)+"==";break;case 2:v=v.slice(0,-1)+"="}return v}(Af(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:Af(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=Af(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Yf=[];Bx&&Yf.push({transport:"fetch",method:t=>{var e,n,{contentType:r,body:i,estimatedSize:s}=(e=Hw(t))!==null&&e!==void 0?e:{},o=new Headers;bt(t.headers,function(u,d){o.append(d,u)}),r&&o.append("Content-Type",r);var a=t.url,l=null;if(eA){var c=new eA;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),t.timeout)}}Bx(a,xe({method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:i,signal:(n=l)==null?void 0:n.signal},t.fetchOptions)).then(u=>u.text().then(d=>{var f={statusCode:u.status,text:d};if(u.status===200)try{f.json=JSON.parse(d)}catch(h){Ae.error(h)}t.callback==null||t.callback(f)})).catch(u=>{Ae.error(u),t.callback==null||t.callback({statusCode:0,text:u})}).finally(()=>l?clearTimeout(l.timeout):null)}}),zx&&Yf.push({transport:"XHR",method:t=>{var e,n=new zx;n.open(t.method||"GET",t.url,!0);var{contentType:r,body:i}=(e=Hw(t))!==null&&e!==void 0?e:{};bt(t.headers,function(s,o){n.setRequestHeader(o,s)}),r&&n.setRequestHeader("Content-Type",r),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s={statusCode:n.status,text:n.responseText};if(n.status===200)try{s.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(s)}},n.send(i)}}),ni!=null&&ni.sendBeacon&&Yf.push({transport:"sendBeacon",method:t=>{var e=Mv(t.url,{beacon:"1"});try{var n,{contentType:r,body:i}=(n=Hw(t))!==null&&n!==void 0?n:{},s=typeof i=="string"?new Blob([i],{type:r}):i;ni.sendBeacon(e,s)}catch{}}});var sd=function(t,e){if(!function(n){try{new RegExp(n)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function FA(t,e,n){return Af({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var gU={exact:(t,e)=>e.some(n=>t.some(r=>n===r)),is_not:(t,e)=>e.every(n=>t.every(r=>n!==r)),regex:(t,e)=>e.some(n=>t.some(r=>sd(n,r))),not_regex:(t,e)=>e.every(n=>t.every(r=>!sd(n,r))),icontains:(t,e)=>e.map(gm).some(n=>t.map(gm).some(r=>n.includes(r))),not_icontains:(t,e)=>e.map(gm).every(n=>t.map(gm).every(r=>!n.includes(r)))},gm=t=>t.toLowerCase(),vU=Rn("[Error tracking]");class yU{constructor(e){var n,r;this.fe=[],this._instance=e,this.fe=(n=(r=this._instance.persistence)==null?void 0:r.get_property(Wx))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,r,i=(n=(r=e.errorTracking)==null?void 0:r.suppressionRules)!==null&&n!==void 0?n:[];this.fe=i,this._instance.persistence&&this._instance.persistence.register({[Wx]:this.fe})}sendExceptionEvent(e){this.pe(e)?vU.info("Skipping exception capture because a suppression rule matched"):this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}pe(e){var n=e.$exception_list;if(!n||!Bt(n)||n.length===0)return!1;var r=n.reduce((i,s)=>{var{type:o,value:a}=s;return Qt(o)&&o.length>0&&i.$exception_types.push(o),Qt(a)&&a.length>0&&i.$exception_values.push(a),i},{$exception_types:[],$exception_values:[]});return this.fe.some(i=>{var s=i.values.map(o=>{var a,l=gU[o.operator],c=Bt(o.value)?o.value:[o.value],u=(a=r[o.key])!==null&&a!==void 0?a:[];return c.length>0&&l(c,u)});return i.type==="OR"?s.some(Boolean):s.every(Boolean)})}}var Ri="Mobile",Rv="iOS",Bs="Android",xh="Tablet",QI=Bs+" "+xh,eD="iPad",tD="Apple",nD=tD+" Watch",Sh="Safari",od="BlackBerry",rD="Samsung",iD=rD+"Browser",sD=rD+" Internet",vc="Chrome",wU=vc+" OS",oD=vc+" "+Rv,M_="Internet Explorer",aD=M_+" "+Ri,R_="Opera",bU=R_+" Mini",O_="Edge",lD="Microsoft "+O_,Ru="Firefox",cD=Ru+" "+Rv,kh="Nintendo",_h="PlayStation",Ou="Xbox",uD=Bs+" "+Ri,dD=Ri+" "+Sh,Pf="Windows",d1=Pf+" Phone",BA="Nokia",f1="Ouya",fD="Generic",xU=fD+" "+Ri.toLowerCase(),hD=fD+" "+xh.toLowerCase(),h1="Konqueror",cr="(\\d+(\\.\\d+)?)",Vw=new RegExp("Version/"+cr),SU=new RegExp(Ou,"i"),kU=new RegExp(_h+" \\w+","i"),_U=new RegExp(kh+" \\w+","i"),I_=new RegExp(od+"|PlayBook|BB10","i"),CU={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},EU=(t,e)=>e&&tt(e,tD)||function(n){return tt(n,Sh)&&!tt(n,vc)&&!tt(n,Bs)}(t),pD=function(t,e){return e=e||"",tt(t," OPR/")&&tt(t,"Mini")?bU:tt(t," OPR/")?R_:I_.test(t)?od:tt(t,"IE"+Ri)||tt(t,"WPDesktop")?aD:tt(t,iD)?sD:tt(t,O_)||tt(t,"Edg/")?lD:tt(t,"FBIOS")?"Facebook "+Ri:tt(t,"UCWEB")||tt(t,"UCBrowser")?"UC Browser":tt(t,"CriOS")?oD:tt(t,"CrMo")||tt(t,vc)?vc:tt(t,Bs)&&tt(t,Sh)?uD:tt(t,"FxiOS")?cD:tt(t.toLowerCase(),h1.toLowerCase())?h1:EU(t,e)?tt(t,Ri)?dD:Sh:tt(t,Ru)?Ru:tt(t,"MSIE")||tt(t,"Trident/")?M_:tt(t,"Gecko")?Ru:""},AU={[aD]:[new RegExp("rv:"+cr)],[lD]:[new RegExp(O_+"?\\/"+cr)],[vc]:[new RegExp("("+vc+"|CrMo)\\/"+cr)],[oD]:[new RegExp("CriOS\\/"+cr)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+cr)],[Sh]:[Vw],[dD]:[Vw],[R_]:[new RegExp("(Opera|OPR)\\/"+cr)],[Ru]:[new RegExp(Ru+"\\/"+cr)],[cD]:[new RegExp("FxiOS\\/"+cr)],[h1]:[new RegExp("Konqueror[:/]?"+cr,"i")],[od]:[new RegExp(od+" "+cr),Vw],[uD]:[new RegExp("android\\s"+cr,"i")],[sD]:[new RegExp(iD+"\\/"+cr)],[M_]:[new RegExp("(rv:|MSIE )"+cr)],Mozilla:[new RegExp("rv:"+cr)]},PU=function(t,e){var n=pD(t,e),r=AU[n];if(me(r))return null;for(var i=0;i<r.length;i++){var s=r[i],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},zA=[[new RegExp(Ou+"; "+Ou+" (.*?)[);]","i"),t=>[Ou,t&&t[1]||""]],[new RegExp(kh,"i"),[kh,""]],[new RegExp(_h,"i"),[_h,""]],[I_,[od,""]],[new RegExp(Pf,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[d1,""];if(new RegExp(Ri).test(e)&&!/IEMobile\b/.test(e))return[Pf+" "+Ri,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var r=n[1],i=CU[r]||"";return/arm/i.test(e)&&(i="RT"),[Pf,i]}return[Pf,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[Rv,e.join(".")]}return[Rv,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=me(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+Bs+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Bs+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[Bs,e.join(".")]}return[Bs,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[wU,""]],[/Linux|debian/i,["Linux",""]]],UA=function(t){return _U.test(t)?kh:kU.test(t)?_h:SU.test(t)?Ou:new RegExp(f1,"i").test(t)?f1:new RegExp("("+d1+"|WPDesktop)","i").test(t)?d1:/iPad/.test(t)?eD:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?nD:I_.test(t)?od:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(BA,"i").test(t)?BA:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Ri).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?Bs:QI:Bs:new RegExp("(pda|"+Ri+")","i").test(t)?xU:new RegExp(xh,"i").test(t)&&!new RegExp(xh+" pc","i").test(t)?hD:""},vm="https?://(.*)",u0=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],NU=a0(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],u0),D_="<masked>",TU=["li_fat_id"];function mD(t,e,n){if(!Ce)return{};var r,i=e?a0([],u0,n||[]):[],s=gD(__(Ce.URL,i,D_),t),o=(r={},bt(TU,function(a){var l=Gs.D(a);r[a]=l||null}),r);return rn(o,s)}function gD(t,e){var n=NU.concat(e||[]),r={};return bt(n,function(i){var s=Ev(t,i);r[i]=s||null}),r}function vD(t){var e=function(s){return s?s.search(vm+"google.([^/?]*)")===0?"google":s.search(vm+"bing.com")===0?"bing":s.search(vm+"yahoo.com")===0?"yahoo":s.search(vm+"duckduckgo.com")===0?"duckduckgo":null:null}(t),n=e!="yahoo"?"q":"p",r={};if(!vl(e)){r.$search_engine=e;var i=Ce?Ev(Ce.referrer,n):"";i.length&&(r.ph_keyword=i)}return r}function HA(){return navigator.language||navigator.userLanguage}function yD(){return(Ce==null?void 0:Ce.referrer)||"$direct"}function wD(t,e){var n=t?a0([],u0,e||[]):[],r=Nr==null?void 0:Nr.href.substring(0,1e3);return{r:yD().substring(0,1e3),u:r?__(r,n,D_):void 0}}function bD(t){var e,{r:n,u:r}=t,i={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=rd(n))==null?void 0:e.host};if(r){i.$current_url=r;var s=rd(r);i.$host=s==null?void 0:s.host,i.$pathname=s==null?void 0:s.pathname;var o=gD(r);rn(i,o)}if(n){var a=vD(n);rn(i,a)}return i}function xD(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function MU(){try{return new Date().getTimezoneOffset()}catch{return}}function RU(t,e){if(!Ar)return{};var n,r,i,s=t?a0([],u0,e||[]):[],[o,a]=function(l){for(var c=0;c<zA.length;c++){var[u,d]=zA[c],f=u.exec(l),h=f&&(Ti(d)?d(f,l):d);if(h)return h}return["",""]}(Ar);return rn(S_({$os:o,$os_version:a,$browser:pD(Ar,navigator.vendor),$device:UA(Ar),$device_type:(r=Ar,i=UA(r),i===eD||i===QI||i==="Kobo"||i==="Kindle Fire"||i===hD?xh:i===kh||i===Ou||i===_h||i===f1?"Console":i===nD?"Wearable":i?Ri:"Desktop"),$timezone:xD(),$timezone_offset:MU()}),{$current_url:__(Nr==null?void 0:Nr.href,s,D_),$host:Nr==null?void 0:Nr.host,$pathname:Nr==null?void 0:Nr.pathname,$raw_user_agent:Ar.length>1e3?Ar.substring(0,997)+"...":Ar,$browser_version:PU(Ar,navigator.vendor),$browser_language:HA(),$browser_language_prefix:(n=HA(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:W==null?void 0:W.screen.height,$screen_width:W==null?void 0:W.screen.width,$viewport_height:W==null?void 0:W.innerHeight,$viewport_width:W==null?void 0:W.innerWidth,$lib:"web",$lib_version:ho.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var Ss=Rn("[FeatureFlags]"),Ww="$active_feature_flags",Wc="$override_feature_flags",VA="$feature_flag_payloads",Yd="$override_feature_flag_payloads",WA="$feature_flag_request_id",GA=t=>{var e={};for(var[n,r]of Dg(t||{}))r&&(e[n]=r);return e},OU=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map(n=>{var r;return[n,(r=e[n].variant)!==null&&r!==void 0?r:e[n].enabled]})),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(n=>e[n].enabled).filter(n=>{var r;return(r=e[n].metadata)==null?void 0:r.payload}).map(n=>{var r;return[n,(r=e[n].metadata)==null?void 0:r.payload]}))):Ss.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},IU=function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t}({}),KA=new Set(["7c6f7b45","66c1f69c","2727f65a","f3287528","8cc9a311","eb9f671b","c0e1c6f9","057989ec","723f4019","7b102104","563359d3","bad973ea","f6f2c4f4","59454a61","89ad1076","4edd0da1","26c52e72","a970bd2e","89cf4454","16e2b4e7","fba0e7b6","301c8488","bc65d69e","fe66a3c5","37926ca6","52a196df","d32a7577","42c4c9ef","6883bd5a","04809ff7","e59430a8","61be3dd8","7fa5500b","bf027177","8cfdba9b","96f6df5f","569798e9","0ebc61a5","1b5d7b92","17ebb0a4","f97ea965","85cc817b","3044dfc1","0c3fe5c3","b1f95fa3","8a6342e8","72365c68","12d34ad9","733853ec","3beeb69a","0645bb64","32de7f98","5dcbee21","3fe85053","ad960278","9466e5dd","7ca97b2d","2ee2a65c","28fde5f2","85c52f49","0ad823f4","f11b6cc9","aacf8af9","ab3e62b3","3a85ff15","8a67d3c4","f5e91ef1","4b873698","c5dae949","5b643d76","9599c892","34377448","2189e408","3be9ad53","1a14ce7c","2a164ded","8d53ea86","53bdb37d","bfc3f590","8df38ede","bdb81e49","38fde5c0","8d707e6d","73cbc496","f9d8a5ef","d3a9f8c4","a980d8cd","5bcfe086","e4818f68","4f11fb39","a13c6ae3","150c7fbb","98f3d658","f84f7377","1924dd9c","1f6b63b3","24748755","7c0f717c","8a87f11b","49f57f22","3c9e9234","3772f65b","dff631b6","cd609d40","f853c7f7","952db5ee","c5aa8a79","2d21b6fd","79b7164c","4110e26c","a7d3b43f","84e1b8f6","75cc0998","07f78e33","10ca9b1a","ce441b18","01eb8256","c0ac4b67","8e8e5216","db7943dd","fa133a95","498a4508","21bbda67","7dbfed69","be3ec24c","fc80b8e2"]);class DU{constructor(e){this.ge=!1,this._e=!1,this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.we=!0;else{var e=!this.$e&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ke({disableFlags:e})}}get hasLoadedFlags(){return this._e}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(Yx),n=this._instance.get_property(Wc),r=this._instance.get_property(Yd);if(!r&&!n)return e||{};var i=rn({},e||{}),s=[...new Set([...Object.keys(r||{}),...Object.keys(n||{})])];for(var o of s){var a,l,c=i[o],u=n==null?void 0:n[o],d=me(u)?(a=c==null?void 0:c.enabled)!==null&&a!==void 0&&a:!!u,f=me(u)?c.variant:typeof u=="string"?u:void 0,h=r==null?void 0:r[o],m=xe({},c,{enabled:d,variant:d?f??(c==null?void 0:c.variant):void 0});d!==(c==null?void 0:c.enabled)&&(m.original_enabled=c==null?void 0:c.enabled),f!==(c==null?void 0:c.variant)&&(m.original_variant=c==null?void 0:c.variant),h&&(m.metadata=xe({},c==null?void 0:c.metadata,{payload:h,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),i[o]=m}return this.ge||(Ss.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:r,finalDetails:i}),this.ge=!0),i}getFlagVariants(){var e=this._instance.get_property(du),n=this._instance.get_property(Wc);if(!n)return e||{};for(var r=rn({},e),i=Object.keys(n),s=0;s<i.length;s++)r[i[s]]=n[i[s]];return this.ge||(Ss.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:r}),this.ge=!0),r}getFlagPayloads(){var e=this._instance.get_property(VA),n=this._instance.get_property(Yd);if(!n)return e||{};for(var r=rn({},e||{}),i=Object.keys(n),s=0;s<i.length;s++)r[i[s]]=n[i[s]];return this.ge||(Ss.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:r}),this.ge=!0),r}reloadFeatureFlags(){this.be||this._instance.config.advanced_disable_feature_flags||this.$e||(this.$e=setTimeout(()=>{this.ke()},5))}xe(){clearTimeout(this.$e),this.$e=void 0}ensureFlagsLoaded(){this._e||this.me||this.$e||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.be=e}ke(e){var n;if(this.xe(),!this._instance.I())if(this.me)this.ye=!0;else{var r={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:xe({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(Cf)||{}),group_properties:this._instance.get_property(Vl)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(r.disable_flags=!0);var i=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config,s=function(l){var c=function(u){for(var d=2166136261,f=0;f<u.length;f++)d^=u.charCodeAt(f),d+=(d<<1)+(d<<4)+(d<<7)+(d<<8)+(d<<24);return("00000000"+(d>>>0).toString(16)).slice(-8)}(l);return KA==null?void 0:KA.has(c)}(this._instance.config.token)?"/decide?v=4":i?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("api",s+o);i&&(r.timezone=xD()),this.me=!0,this._instance.Ee({method:"POST",url:a,data:r,compression:this._instance.config.disable_compression?void 0:Eo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var c,u,d=!0;if(l.statusCode===200&&(this.ye||(this.$anon_distinct_id=void 0),d=!1),this.me=!1,this.we||(this.we=!0,this._instance.Ie((u=l.json)!==null&&u!==void 0?u:{})),!r.disable_flags||this.ye)if(this.Se=!d,l.json&&(c=l.json.quotaLimited)!=null&&c.includes(IU.FeatureFlags))Ss.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var f;r.disable_flags||this.receivedFeatureFlags((f=l.json)!==null&&f!==void 0?f:{},d),this.ye&&(this.ye=!1,this.ke())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0){var r=this.getFlagVariants()[e],i=""+r,s=this._instance.get_property(WA)||void 0,o=this._instance.get_property(Sv)||{};if((n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(i))){var a,l,c,u,d,f,h,m,g;Bt(o[e])?o[e].push(i):o[e]=[i],(a=this._instance.persistence)==null||a.register({[Sv]:o});var y=this.getFeatureFlagDetails(e),v={$feature_flag:e,$feature_flag_response:r,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[e])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(c=c.featureFlagPayloads)==null?void 0:c[e])||null,$used_bootstrap_value:!this.Se};me(y==null||(u=y.metadata)==null?void 0:u.version)||(v.$feature_flag_version=y.metadata.version);var w,b=(d=y==null||(f=y.reason)==null?void 0:f.description)!==null&&d!==void 0?d:y==null||(h=y.reason)==null?void 0:h.code;b&&(v.$feature_flag_reason=b),y!=null&&(m=y.metadata)!=null&&m.id&&(v.$feature_flag_id=y.metadata.id),me(y==null?void 0:y.original_variant)&&me(y==null?void 0:y.original_enabled)||(v.$feature_flag_original_response=me(y.original_variant)?y.original_enabled:y.original_variant),y!=null&&(g=y.metadata)!=null&&g.original_payload&&(v.$feature_flag_original_payload=y==null||(w=y.metadata)==null?void 0:w.original_payload),this._instance.capture("$feature_flag_called",v)}return r}Ss.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var r=this._instance.config.token;this._instance.Ee({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:r},compression:this._instance.config.disable_compression?void 0:Eo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:i=>{var s,o=(s=i.json)==null?void 0:s.featureFlagPayloads;n((o==null?void 0:o[e])||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);Ss.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this._instance.persistence){this._e=!0;var r=this.getFlagVariants(),i=this.getFlagPayloads(),s=this.getFlagsWithDetails();(function(o,a,l,c,u){l===void 0&&(l={}),c===void 0&&(c={}),u===void 0&&(u={});var d=OU(o),f=d.flags,h=d.featureFlags,m=d.featureFlagPayloads;if(h){var g=o.requestId;if(Bt(h)){Ss.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var y={};if(h)for(var v=0;v<h.length;v++)y[h[v]]=!0;a&&a.register({[Ww]:h,[du]:y})}else{var w=h,b=m,k=f;o.errorsWhileComputingFlags&&(w=xe({},l,w),b=xe({},c,b),k=xe({},u,k)),a&&a.register(xe({[Ww]:Object.keys(GA(w)),[du]:w||{},[VA]:b||{},[Yx]:k||{}},g?{[WA]:g}:{}))}}})(e,this._instance.persistence,r,i,s),this.Pe(n)}}override(e,n){n===void 0&&(n=!1),Ss.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return Ss.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(Wc),this._instance.persistence.unregister(Yd),void this.Pe();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,r=e;if(this.ge=!!((n=r.suppressWarning)!==null&&n!==void 0&&n),"flags"in r){if(r.flags===!1)this._instance.persistence.unregister(Wc);else if(r.flags)if(Bt(r.flags)){for(var i={},s=0;s<r.flags.length;s++)i[r.flags[s]]=!0;this._instance.persistence.register({[Wc]:i})}else this._instance.persistence.register({[Wc]:r.flags})}return"payloads"in r&&(r.payloads===!1?this._instance.persistence.unregister(Yd):r.payloads&&this._instance.persistence.register({[Yd]:r.payloads})),void this.Pe()}this.Pe()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._e){var{flags:n,flagVariants:r}=this.Re();e(n,r)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var r,i=(this._instance.get_property(Lg)||[]).find(l=>l.flagKey===e),s={["$feature_enrollment/"+e]:n},o={$feature_flag:e,$feature_enrollment:n,$set:s};i&&(o.$early_access_feature_name=i.name),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(s,!1);var a=xe({},this.getFlagVariants(),{[e]:n});(r=this._instance.persistence)==null||r.register({[Ww]:Object.keys(GA(a)),[du]:a}),this.Pe()}getEarlyAccessFeatures(e,n,r){n===void 0&&(n=!1);var i=this._instance.get_property(Lg),s=r?"&"+r.map(o=>"stage="+o).join("&"):"";if(i&&!n)return e(i);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:o=>{var a;if(o.json){var l=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[Lg]:l}),e(l)}}})}Re(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(r=>n[r]),flagVariants:Object.keys(n).filter(r=>n[r]).reduce((r,i)=>(r[i]=n[i],r),{})}}Pe(e){var{flags:n,flagVariants:r}=this.Re();this.featureFlagEventHandlers.forEach(i=>i(n,r,{errorsLoading:e}))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var r=this._instance.get_property(Cf)||{};this._instance.register({[Cf]:xe({},r,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Cf)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var r=this._instance.get_property(Vl)||{};Object.keys(r).length!==0&&Object.keys(r).forEach(i=>{r[i]=xe({},r[i],e[i]),delete e[i]}),this._instance.register({[Vl]:xe({},r,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(Vl)||{};this._instance.register({[Vl]:xe({},n,{[e]:{}})})}else this._instance.unregister(Vl)}}var LU=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class Gw{constructor(e){this.S=e,this.props={},this.Te=!1,this.Me=(n=>{var r="";return n.token&&(r=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+r+"_posthog"})(e),this.B=this.Ce(e),this.load(),e.debug&&Ae.info("Persistence loaded",e.persistence,xe({},this.props)),this.update_config(e,e),this.save()}Ce(e){LU.indexOf(e.persistence.toLowerCase())===-1&&(Ae.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&vn.O()?vn:n==="localstorage+cookie"&&cm.O()?cm:n==="sessionstorage"&&Ln.O()?Ln:n==="memory"?p7:n==="cookie"?Gs:cm.O()?cm:Gs}properties(){var e={};return bt(this.props,function(n,r){if(r===du&&Zt(n))for(var i=Object.keys(n),s=0;s<i.length;s++)e["$feature/"+i[s]]=n[i[s]];else a=r,l=!1,(vl(o=K9)?l:Q2&&o.indexOf===Q2?o.indexOf(a)!=-1:(bt(o,function(c){if(l||(l=c===a))return bv}),l))||(e[r]=n);var o,a,l}),e}load(){if(!this.Fe){var e=this.B.L(this.Me);e&&(this.props=rn({},e))}}save(){this.Fe||this.B.j(this.Me,this.props,this.Oe,this.Ae,this.De,this.S.debug)}remove(){this.B.N(this.Me,!1),this.B.N(this.Me,!0)}clear(){this.remove(),this.props={}}register_once(e,n,r){if(Zt(e)){me(n)&&(n="None"),this.Oe=me(r)?this.Le:r;var i=!1;if(bt(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,i=!0)}),i)return this.save(),!0}return!1}register(e,n){if(Zt(e)){this.Oe=me(n)?this.Le:n;var r=!1;if(bt(e,(i,s)=>{e.hasOwnProperty(s)&&this.props[s]!==i&&(this.props[s]=i,r=!0)}),r)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Te){var e=mD(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);uu(S_(e))||this.register(e),this.Te=!0}}update_search_keyword(){var e;this.register((e=Ce==null?void 0:Ce.referrer)?vD(e):{})}update_referrer_info(){var e;this.register_once({$referrer:yD(),$referring_domain:Ce!=null&&Ce.referrer&&((e=rd(Ce.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[Qx]||this.props[e1]||this.register_once({[kv]:wD(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};bt([e1,Qx],o=>{var a=this.props[o];a&&bt(a,function(l,c){e["$initial_"+Ux(c)]=l})});var n,r,i=this.props[kv];if(i){var s=(n=bD(i),r={},bt(n,function(o,a){r["$initial_"+Ux(a)]=o}),r);rn(e,s)}return e}safe_merge(e){return bt(this.props,function(n,r){r in e||(e[r]=n)}),e}update_config(e,n){if(this.Le=this.Oe=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var r=this.Ce(e),i=this.props;this.clear(),this.B=r,this.props=i,this.save()}}set_disabled(e){this.Fe=e,this.Fe?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ae&&(this.Ae=e,this.remove(),this.save())}set_secure(e){e!==this.De&&(this.De=e,this.remove(),this.save())}set_event_timer(e,n){var r=this.props[kf]||{};r[e]=n,this.props[kf]=r,this.save()}remove_event_timer(e){var n=(this.props[kf]||{})[e];return me(n)||(delete this.props[kf][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}class SD{constructor(){this.je={},this.je={}}on(e,n){return this.je[e]||(this.je[e]=[]),this.je[e].push(n),()=>{this.je[e]=this.je[e].filter(r=>r!==n)}}emit(e,n){for(var r of this.je[e]||[])r(n);for(var i of this.je["*"]||[])i(e,n)}}class Yl{constructor(e){this.Ne=new SD,this.ze=(n,r)=>this.Ue(n,r)&&this.qe(n,r)&&this.Be(n,r),this.Ue=(n,r)=>r==null||!r.event||(n==null?void 0:n.event)===(r==null?void 0:r.event),this._instance=e,this.He=new Set,this.We=new Set}init(){var e;if(!me((e=this._instance)==null?void 0:e.Ge)){var n;(n=this._instance)==null||n.Ge((r,i)=>{this.on(r,i)})}}register(e){var n,r;if(!me((n=this._instance)==null?void 0:n.Ge)&&(e.forEach(o=>{var a,l;(a=this.We)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var u;(u=this.He)==null||u.add((c==null?void 0:c.event)||"")})}),(r=this._instance)!=null&&r.autocapture)){var i,s=new Set;e.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(i=this._instance)==null||i.autocapture.setElementSelectors(s)}}on(e,n){var r;n!=null&&e.length!=0&&(this.He.has(e)||this.He.has(n==null?void 0:n.event))&&this.We&&((r=this.We)==null?void 0:r.size)>0&&this.We.forEach(i=>{this.Je(n,i)&&this.Ne.emit("actionCaptured",i.name)})}Ve(e){this.onAction("actionCaptured",n=>e(n))}Je(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var r of n.steps)if(this.ze(e,r))return!0;return!1}onAction(e,n){return this.Ne.on(e,n)}qe(e,n){if(n!=null&&n.url){var r,i=e==null||(r=e.properties)==null?void 0:r.$current_url;if(!i||typeof i!="string"||!Yl.Ke(i,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static Ke(e,n,r){switch(r){case"regex":return!!W&&sd(e,n);case"exact":return n===e;case"contains":var i=Yl.Ye(n).replace(/_/g,".").replace(/%/g,".*");return sd(e,i);default:return!1}}static Ye(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Be(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.Xe(e).some(s=>!(n!=null&&n.href&&!Yl.Ke(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!Yl.Ke(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!Yl.Ke(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var r,i=e==null||(r=e.properties)==null?void 0:r.$element_selectors;if(!i||!i.includes(n==null?void 0:n.selector))return!1}return!0}Xe(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}var An=Rn("[Surveys]"),p1="seenSurvey_",jU=(t,e)=>{var n="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(n="$survey_"+e+"/"+t.id+"/"+t.current_iteration),n};class $U{constructor(e){this._instance=e,this.Qe=new Map,this.Ze=new Map}register(e){var n;me((n=this._instance)==null?void 0:n.Ge)||(this.tr(e),this.ir(e))}ir(e){var n=e.filter(r=>{var i,s;return((i=r.conditions)==null?void 0:i.actions)&&((s=r.conditions)==null||(s=s.actions)==null||(s=s.values)==null?void 0:s.length)>0});n.length!==0&&(this.er==null&&(this.er=new Yl(this._instance),this.er.init(),this.er.Ve(r=>{this.onAction(r)})),n.forEach(r=>{var i,s,o,a,l;r.conditions&&(i=r.conditions)!=null&&i.actions&&(s=r.conditions)!=null&&(s=s.actions)!=null&&s.values&&((o=r.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.er)==null||a.register(r.conditions.actions.values),(l=r.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var u=this.Ze.get(c.name);u&&u.push(r.id),this.Ze.set(c.name,u||[r.id])}}))}))}tr(e){var n;e.filter(r=>{var i,s;return((i=r.conditions)==null?void 0:i.events)&&((s=r.conditions)==null||(s=s.events)==null||(s=s.values)==null?void 0:s.length)>0}).length!==0&&((n=this._instance)==null||n.Ge((r,i)=>{this.onEvent(r,i)}),e.forEach(r=>{var i;(i=r.conditions)==null||(i=i.events)==null||(i=i.values)==null||i.forEach(s=>{if(s&&s.name){var o=this.Qe.get(s.name);o&&o.push(r.id),this.Qe.set(s.name,o||[r.id])}})}))}onEvent(e,n){var r,i=((r=this._instance)==null||(r=r.persistence)==null?void 0:r.props[am])||[];if(e==="survey shown"&&n&&i.length>0){var s;An.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:n,existingActivatedSurveys:i});var o=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(o){var a=i.indexOf(o);a>=0&&(i.splice(a,1),this.rr(i))}}else this.Qe.has(e)&&(An.info("survey event matched, updating activated surveys",{event:e,surveys:this.Qe.get(e)}),this.rr(i.concat(this.Qe.get(e)||[])))}onAction(e){var n,r=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[am])||[];this.Ze.has(e)&&this.rr(r.concat(this.Ze.get(e)||[]))}rr(e){var n;(n=this._instance)==null||(n=n.persistence)==null||n.register({[am]:[...new Set(e)]})}getSurveys(){var e,n=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[am];return n||[]}getEventToSurveys(){return this.Qe}sr(){return this.er}}class FU{constructor(e){this.nr=void 0,this.ar=null,this.lr=!1,this.ur=!1,this.hr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var n=e.surveys;if(gt(n))return An.warn("Flags not loaded yet. Not loading surveys.");var r=Bt(n);this.nr=r?n.length>0:n,An.info("flags response received, isSurveysEnabled: "+this.nr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);(r!=null&&r.startsWith(p1)||r!=null&&r.startsWith("inProgressSurvey_"))&&e.push(r)}e.forEach(i=>localStorage.removeItem(i))}loadIfEnabled(){if(!this.ar)if(this.ur)An.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)An.info("Disabled. Not loading surveys.");else{var e=Ue==null?void 0:Ue.__PosthogExtensions__;if(e){var n=this.nr;if(!me(n)){this.ur=!0;try{var r=e.generateSurveys;if(r)return void this.dr(r,n);var i=e.loadExternalDependency;if(!i)return void this.vr("PostHog loadExternalDependency extension not found.");i(this._instance,"surveys",s=>{s||!e.generateSurveys?this.vr("Could not load surveys script",s):this.dr(e.generateSurveys,n)})}catch(s){throw this.vr("Error initializing surveys",s),s}finally{this.ur=!1}}}else An.error("PostHog Extensions not found.")}}dr(e,n){this.ar=e(this._instance,n),this._surveyEventReceiver=new $U(this._instance),An.info("Surveys loaded successfully"),this.cr({isLoaded:!0})}vr(e,n){An.error(e,n),this.cr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.hr.push(e),this.ar&&this.cr({isLoaded:!0}),()=>{this.hr=this.hr.filter(n=>n!==e)}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return An.info("Disabled. Not loading surveys."),e([]);var r=this._instance.get_property(qx);if(r&&!n)return e(r,{isLoaded:!0});if(this.lr)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.lr=!0,this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:i=>{var s;this.lr=!1;var o=i.statusCode;if(o!==200||!i.json){var a="Surveys API could not be loaded, status: "+o;return An.error(a),e([],{isLoaded:!1,error:a})}var l,c=i.json.surveys||[],u=c.filter(d=>function(f){return!(!f.start_date||f.end_date)}(d)&&(function(f){var h;return!((h=f.conditions)==null||(h=h.events)==null||(h=h.values)==null||!h.length)}(d)||function(f){var h;return!((h=f.conditions)==null||(h=h.actions)==null||(h=h.values)==null||!h.length)}(d)));return u.length>0&&((l=this._surveyEventReceiver)==null||l.register(u)),(s=this._instance.persistence)==null||s.register({[qx]:c}),e(c,{isLoaded:!0})}})}catch(i){throw this.lr=!1,i}}cr(e){for(var n of this.hr)try{e.isLoaded?this.getSurveys(n):n([],e)}catch(r){An.error("Error in survey callback",r)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!gt(this.ar))return this.ar.getActiveMatchingSurveys(e,n);An.warn("init was not called")}pr(e){var n=null;return this.getSurveys(r=>{var i;n=(i=r.find(s=>s.id===e))!==null&&i!==void 0?i:null}),n}gr(e){if(gt(this.ar))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.pr(e):e;return n?this.ar.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(gt(this.ar))return An.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.gr(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return gt(this.ar)?(An.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(r=>{this.getSurveys(i=>{var s,o=(s=i.find(l=>l.id===e))!==null&&s!==void 0?s:null;if(o){var a=this.gr(o);r({visible:a.eligible,disabledReason:a.reason})}else r({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(e,n){if(gt(this.ar))An.warn("init was not called");else{var r=this.pr(e),i=Ce==null?void 0:Ce.querySelector(n);r?i?this.ar.renderSurvey(r,i):An.warn("Survey element not found"):An.warn("Survey not found")}}}(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t})({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var Kw=function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t}({}),XA=function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t}({}),YA=Rn("[RateLimiter]");let BU=class{constructor(e){var n,r;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=i=>{var s=i.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{YA.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void YA.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:s})}},this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((r=e.config.rate_limiting)==null?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var n,r,i;e===void 0&&(e=!1);var s=new Date().getTime(),o=(n=(r=this.instance.persistence)==null?void 0:r.get_property(Zx))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(i=this.instance.persistence)==null||i.set_property(Zx,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}};var Dl=Rn("[RemoteConfig]");class zU{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=Ue._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}_r(e){var n,r;(n=Ue.__PosthogExtensions__)!=null&&n.loadExternalDependency?(r=Ue.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(Dl.error("PostHog Extensions not found. Cannot load remote config."),e())}mr(e){this._instance.Ee({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return Dl.info("Using preloaded remote config",this.remoteConfig),void this.Ie(this.remoteConfig);if(this._instance.I())return void Dl.warn("Remote config is disabled. Falling back to local config.");this._r(e=>{if(!e)return Dl.info("No config found after loading remote JS config. Falling back to JSON."),void this.mr(n=>{this.Ie(n)});this.Ie(e)})}catch(e){Dl.error("Error loading remote config",e)}}Ie(e){e?this._instance.config.__preview_remote_config?(this._instance.Ie(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):Dl.info("__preview_remote_config is disabled. Logging config instead",e):Dl.error("Failed to fetch remote config from PostHog.")}}var m1=3e3;class UU{constructor(e,n){this.br=!0,this.yr=[],this.wr=ri((n==null?void 0:n.flush_interval_ms)||m1,250,5e3,"flush interval",m1),this.Sr=e}enqueue(e){this.yr.push(e),this.$r||this.kr()}unload(){this.Er();var e=this.yr.length>0?this.Ir():{},n=Object.values(e);[...n.filter(r=>r.url.indexOf("/e")===0),...n.filter(r=>r.url.indexOf("/e")!==0)].map(r=>{this.Sr(xe({},r,{transport:"sendBeacon"}))})}enable(){this.br=!1,this.kr()}kr(){var e=this;this.br||(this.$r=setTimeout(()=>{if(this.Er(),this.yr.length>0){var n=this.Ir(),r=function(){var s=n[i],o=new Date().getTime();s.data&&Bt(s.data)&&bt(s.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),e.Sr(s)};for(var i in n)r()}},this.wr))}Er(){clearTimeout(this.$r),this.$r=void 0}Ir(){var e={};return bt(this.yr,n=>{var r,i=n,s=(i?i.batchKey:null)||i.url;me(e[s])&&(e[s]=xe({},i,{data:[]})),(r=e[s].data)==null||r.push(i.data)}),this.yr=[],e}}var HU=["retriesPerformedSoFar"];class VU{constructor(e){this.Pr=!1,this.Rr=3e3,this.yr=[],this._instance=e,this.yr=[],this.Tr=!0,!me(W)&&"onLine"in W.navigator&&(this.Tr=W.navigator.onLine,Wt(W,"online",()=>{this.Tr=!0,this.se()}),Wt(W,"offline",()=>{this.Tr=!1}))}get length(){return this.yr.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,r=wI(e,HU);Qn(n)&&n>0&&(r.url=Mv(r.url,{retry_count:n})),this._instance.Ee(xe({},r,{callback:i=>{i.statusCode!==200&&(i.statusCode<400||i.statusCode>=500)&&(n??0)<10?this.Mr(xe({retriesPerformedSoFar:n},r)):r.callback==null||r.callback(i)}}))}Mr(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var r=function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),u=(Math.random()-.5)*(c-l);return Math.ceil(c+u)}(n),i=Date.now()+r;this.yr.push({retryAt:i,requestOptions:e});var s="Enqueued failed request for retry in "+r;navigator.onLine||(s+=" (Browser is offline)"),Ae.warn(s),this.Pr||(this.Pr=!0,this.Cr())}Cr(){this.Fr&&clearTimeout(this.Fr),this.Fr=setTimeout(()=>{this.Tr&&this.yr.length>0&&this.se(),this.Cr()},this.Rr)}se(){var e=Date.now(),n=[],r=this.yr.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.yr=n,r.length>0)for(var{requestOptions:i}of r)this.retriableRequest(i)}unload(){for(var{requestOptions:e}of(this.Fr&&(clearTimeout(this.Fr),this.Fr=void 0),this.yr))try{this._instance.Ee(xe({},e,{transport:"sendBeacon"}))}catch(n){Ae.error(n)}this.yr=[]}}class WU{constructor(e){this.Or=()=>{var n,r,i,s;this.Ar||(this.Ar={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+((o==null?void 0:o.clientHeight)||0),u=(o==null?void 0:o.scrollHeight)||0;this.Ar.lastScrollY=Math.ceil(a),this.Ar.maxScrollY=Math.max(a,(n=this.Ar.maxScrollY)!==null&&n!==void 0?n:0),this.Ar.maxScrollHeight=Math.max(l,(r=this.Ar.maxScrollHeight)!==null&&r!==void 0?r:0),this.Ar.lastContentY=c,this.Ar.maxContentY=Math.max(c,(i=this.Ar.maxContentY)!==null&&i!==void 0?i:0),this.Ar.maxContentHeight=Math.max(u,(s=this.Ar.maxContentHeight)!==null&&s!==void 0?s:0)},this._instance=e}getContext(){return this.Ar}resetContext(){var e=this.Ar;return setTimeout(this.Or,0),e}startMeasuringScrollPosition(){Wt(W,"scroll",this.Or,{capture:!0}),Wt(W,"scrollend",this.Or,{capture:!0}),Wt(W,"resize",this.Or)}scrollElement(){if(!this._instance.config.scroll_root_selector)return W==null?void 0:W.document.documentElement;var e=Bt(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var r=W==null?void 0:W.document.querySelector(n);if(r)return r}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return W&&(W.scrollY||W.pageYOffset||W.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return W&&(W.scrollX||W.pageXOffset||W.document.documentElement.scrollLeft)||0}}var GU=t=>wD(t==null?void 0:t.config.mask_personal_data_properties,t==null?void 0:t.config.custom_personal_data_properties);class KU{constructor(e,n,r,i){this.Dr=s=>{var o=this.Lr();if(!o||o.sessionId!==s){var a={sessionId:s,props:this.jr(this._instance)};this.Nr.register({[Jx]:a})}},this._instance=e,this.zr=n,this.Nr=r,this.jr=i||GU,this.zr.onSessionId(this.Dr)}Lr(){return this.Nr.props[Jx]}getSetOnceProps(){var e,n=(e=this.Lr())==null?void 0:e.props;return n?"r"in n?bD(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return bt(S_(this.getSetOnceProps()),(n,r)=>{r==="$current_url"&&(r="url"),e["$session_entry_"+Ux(r)]=n}),e}}var qA=Rn("[SessionId]");class XU{constructor(e,n,r){var i;if(this.Ur=[],!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Nr=e.persistence,this.fi=void 0,this.Ct=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.qr=n||Ca,this.Br=r||Ca;var s=this.S.persistence_name||this.S.token,o=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*ri(o,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Hr(),this.Wr="ph_"+s+"_window_id",this.Gr="ph_"+s+"_primary_window_exists",this.Jr()){var a=Ln.L(this.Wr),l=Ln.L(this.Gr);a&&!l?this.fi=a:Ln.N(this.Wr),Ln.j(this.Gr,!0)}if((i=this.S.bootstrap)!=null&&i.sessionID)try{var c=(u=>{var d=u.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Vr(this.S.bootstrap.sessionID,new Date().getTime(),c)}catch(u){qA.error("Invalid sessionID in bootstrap",u)}this.Kr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return me(this.Ur)&&(this.Ur=[]),this.Ur.push(e),this.Ct&&e(this.Ct,this.fi),()=>{this.Ur=this.Ur.filter(n=>n!==e)}}Jr(){return this.S.persistence!=="memory"&&!this.Nr.Fe&&Ln.O()}Yr(e){e!==this.fi&&(this.fi=e,this.Jr()&&Ln.j(this.Wr,e))}Xr(){return this.fi?this.fi:this.Jr()?Ln.L(this.Wr):null}Vr(e,n,r){e===this.Ct&&n===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this.Ct=e,this.Nr.register({[xv]:[n,e,r]}))}Qr(){if(this.Ct&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ct,this._sessionStartTimestamp];var e=this.Nr.props[xv];return Bt(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Vr(null,null,null)}Kr(){Wt(W,"beforeunload",()=>{this.Jr()&&Ln.N(this.Gr)},{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var r=n||new Date().getTime(),[i,s,o]=this.Qr(),a=this.Xr(),l=Qn(o)&&o>0&&Math.abs(r-o)>864e5,c=!1,u=!s,d=!e&&Math.abs(r-i)>this.sessionTimeoutMs;u||d||l?(s=this.qr(),a=this.Br(),qA.info("new session ID generated",{sessionId:s,windowId:a,changeReason:{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}}),o=r,c=!0):a||(a=this.Br(),c=!0);var f=i===0||!e||l?r:i,h=o===0?new Date().getTime():o;return this.Yr(a),this.Vr(s,f,h),e||this.Hr(),c&&this.Ur.forEach(m=>m(s,a,c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0)),{sessionId:s,windowId:a,sessionStartTimestamp:h,changeReason:c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:i}}Hr(){clearTimeout(this.Zr),this.Zr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var YU=["$set_once","$set"],ta=Rn("[SiteApps]");class qU{constructor(e){this._instance=e,this.ts=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}es(e,n){if(n){var r=this.globalsForEvent(n);this.ts.push(r),this.ts.length>1e3&&(this.ts=this.ts.slice(10))}}get siteAppLoaders(){var e;return(e=Ue._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ge(this.es.bind(this));this.rs=()=>{e(),this.ts=[],this.rs=void 0}}}globalsForEvent(e){var n,r,i,s,o,a,l;if(!e)throw new Error("Event payload is required");var c={},u=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[f,h]of Object.entries(d))c[f]={id:u[f],type:f,properties:h};var{$set_once:m,$set:g}=e;return{event:xe({},wI(e,YU),{properties:xe({},e.properties,g?{$set:xe({},(n=(r=e.properties)==null?void 0:r.$set)!==null&&n!==void 0?n:{},g)}:{},m?{$set_once:xe({},(i=(s=e.properties)==null?void 0:s.$set_once)!==null&&i!==void 0?i:{},m)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var n=this.apps[e.id],r=()=>{var a;!n.errored&&this.ts.length&&(ta.info("Processing "+this.ts.length+" events for site app with id "+e.id),this.ts.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.rs)==null||a.call(this))},i=!1,s=a=>{n.errored=!a,n.loaded=!0,ta.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),i&&r()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{s(a)}});o&&(n.processEvent=o),i=!0}catch(a){ta.error("Error while initializing PostHog app with config id "+e.id,a),s(!1)}if(i&&n.loaded)try{r()}catch(a){ta.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}ss(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var r of e)this.setupSiteApp(r)}ns(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var r of Object.values(this.apps))try{r.processEvent==null||r.processEvent(n)}catch(i){ta.error("Error while processing event "+e.event+" for site app "+r.id,i)}}}onRemoteConfig(e){var n,r,i,s=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.ss(),void this._instance.on("eventCaptured",c=>this.ns(c))):void ta.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((r=this.rs)==null||r.call(this),(i=e.siteApps)!=null&&i.length)if(this.isEnabled){var o=function(c){var u;Ue["__$$ph_site_app_"+c]=s._instance,(u=Ue.__PosthogExtensions__)==null||u.loadSiteApp==null||u.loadSiteApp(s._instance,l,d=>{if(d)return ta.error("Error while initializing PostHog app with config id "+c,d)})};for(var{id:a,url:l}of e.siteApps)o(a)}else ta.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var JU=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],JA=function(t,e){if(!t)return!1;var n=t.toLowerCase();return JU.concat(e||[]).some(r=>{var i=r.toLowerCase();return n.indexOf(i)!==-1})},kD=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&JA(n,e))return!0;try{var r=t==null?void 0:t.userAgentData;if(r!=null&&r.brands&&r.brands.some(i=>JA(i==null?void 0:i.brand,e)))return!0}catch{}return!!t.webdriver},Nf=function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t}({}),ZA="i.posthog.com";class ZU{constructor(e){this.os={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+ZA,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.os[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Nf.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Nf.EU:this.os[this.apiHost]=Nf.CUSTOM),this.os[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(this.region===Nf.CUSTOM)return this.apiHost+n;var r=ZA+n;switch(e){case"assets":return"https://"+this.region+"-assets."+r;case"api":return"https://"+this.region+"."+r}}}var QU={icontains:(t,e)=>!!W&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!W&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!W&&sd(e.href,t),not_regex:(t,e)=>!!W&&!sd(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};let eH=class ur{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(r){r===void 0&&(r=!1),n.getWebExperiments(i=>{ur.ls("retrieved web experiments from the server"),n.us=new Map,i.forEach(s=>{if(s.feature_flag_key){var o;n.us&&(ur.ls("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n.us)==null||o.set(s.feature_flag_key,s));var a=n._instance.getFeatureFlag(s.feature_flag_key);Qt(a)&&s.variants[a]&&n.hs(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var c=s.variants[l];ur.ds(c)&&n.hs(s.name,l,c.transforms)}})},r)},this._instance=e,this._instance.onFeatureFlags(r=>{this.onFeatureFlags(r)})}onFeatureFlags(e){if(this._is_bot())ur.ls("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(gt(this.us))return this.us=new Map,this.loadIfEnabled(),void this.previewWebExperiment();ur.ls("applying feature flags",e),e.forEach(n=>{var r;if(this.us&&(r=this.us)!=null&&r.has(n)){var i,s=this._instance.getFeatureFlag(n),o=(i=this.us)==null?void 0:i.get(n);s&&o!=null&&o.variants[s]&&this.hs(o.name,s,o.variants[s].transforms)}})}}previewWebExperiment(){var e=ur.getWindowLocation();if(e!=null&&e.search){var n=Ev(e==null?void 0:e.search,"__experiment_id"),r=Ev(e==null?void 0:e.search,"__experiment_variant");n&&r&&(ur.ls("previewing web experiments "+n+" && "+r),this.getWebExperiments(i=>{this.vs(parseInt(n),r,i)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,r){if(this._instance.config.disable_web_experiments&&!r)return e([]);var i=this._instance.get_property("$web_experiments");if(i&&!n)return e(i);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}vs(e,n,r){var i=r.filter(s=>s.id===e);i&&i.length>0&&(ur.ls("Previewing web experiment ["+i[0].name+"] with variant ["+n+"]"),this.hs(i[0].name,n,i[0].variants[n].transforms))}static ds(e){return!gt(e.conditions)&&ur.cs(e)&&ur.fs(e)}static cs(e){var n;if(gt(e.conditions)||gt((n=e.conditions)==null?void 0:n.url))return!0;var r,i,s,o=ur.getWindowLocation();return!!o&&((r=e.conditions)==null||!r.url||QU[(i=(s=e.conditions)==null?void 0:s.urlMatchType)!==null&&i!==void 0?i:"icontains"](e.conditions.url,o))}static getWindowLocation(){return W==null?void 0:W.location}static fs(e){var n;if(gt(e.conditions)||gt((n=e.conditions)==null?void 0:n.utm))return!0;var r=mD();if(r.utm_source){var i,s,o,a,l,c,u,d,f=(i=e.conditions)==null||(i=i.utm)==null||!i.utm_campaign||((s=e.conditions)==null||(s=s.utm)==null?void 0:s.utm_campaign)==r.utm_campaign,h=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==r.utm_source,m=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=e.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==r.utm_medium,g=(u=e.conditions)==null||(u=u.utm)==null||!u.utm_term||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_term)==r.utm_term;return f&&m&&g&&h}return!1}static ls(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Ae.info("[WebExperiments] "+e,r)}hs(e,n,r){this._is_bot()?ur.ls("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?r.forEach(i=>{if(i.selector){var s;ur.ls("applying transform of variant "+n+" for experiment "+e+" ",i);var o=(s=document)==null?void 0:s.querySelectorAll(i.selector);o==null||o.forEach(a=>{var l=a;i.html&&(l.innerHTML=i.html),i.css&&l.setAttribute("style",i.css)})}}):ur.ls("Control variants leave the page unmodified.")}_is_bot(){return ni&&this._instance?kD(ni,this._instance.config.custom_blocked_useragents):void 0}};var tH=Rn("[PostHog ExternalIntegrations]"),nH={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};let rH=class{constructor(e){this._instance=e}J(e,n){var r;(r=Ue.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,e,i=>{if(i)return tH.error("failed to load script",i);n()})}startIfEnabledOrStop(){var e=this,n=function(o){var a,l,c;!i||(a=Ue.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.J(nH[o],()=>{var u;(u=Ue.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.start(e._instance)}),!i&&(l=Ue.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((c=Ue.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.stop())};for(var[r,i]of Object.entries((s=this._instance.config.integrations)!==null&&s!==void 0?s:{})){var s;n(r)}}};var qf={},g1=()=>{},ru="posthog",_D=!mU&&(Ar==null?void 0:Ar.indexOf("MSIE"))===-1&&(Ar==null?void 0:Ar.indexOf("Mozilla"))===-1,QA=t=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:G9(Ce==null?void 0:Ce.location),persistence:"localStorage+cookie",persistence_name:"",loaded:g1,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:t!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:t??"unset",debug:Nr&&Qt(Nr==null?void 0:Nr.search)&&Nr.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(W==null||(e=W.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var r="Bad HTTP status: "+n.statusCode+" "+n.text;Ae.error(r)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:m1},error_tracking:{},_onCapture:g1}},eP=t=>{var e={};me(t.process_person)||(e.person_profiles=t.process_person),me(t.xhr_headers)||(e.request_headers=t.xhr_headers),me(t.cookie_name)||(e.persistence_name=t.cookie_name),me(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),me(t.store_google)||(e.save_campaign_params=t.store_google),me(t.verbose)||(e.debug=t.verbose);var n=rn({},e,t);return Bt(t.property_blacklist)&&(me(t.property_denylist)?n.property_denylist=t.property_blacklist:Bt(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:Ae.error("Invalid value for property_denylist config: "+t.property_denylist)),n};let iH=class{constructor(){this.__forceAllowLocalhost=!1}get ps(){return this.__forceAllowLocalhost}set ps(e){Ae.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}},CD=class ED{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new iH,this.gs=!1,this.version=ho.LIB_VERSION,this._s=new SD,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=QA(),this.SentryIntegration=sU,this.sentryIntegration=e=>function(n,r){var i=ZI(n,r);return{name:JI,processEvent:s=>i(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.bs=!1,this.ys=null,this.ws=null,this.Ss=null,this.featureFlags=new DU(this),this.toolbar=new aU(this),this.scrollManager=new WU(this),this.pageViewManager=new hU(this),this.surveys=new FU(this),this.experiments=new eH(this),this.exceptions=new yU(this),this.rateLimiter=new BU(this),this.requestRouter=new ZU(this),this.consent=new m7(this),this.externalIntegrations=new rH(this),this.people={set:(e,n,r)=>{var i=Qt(e)?{[e]:n}:e;this.setPersonProperties(i),r==null||r({})},set_once:(e,n,r)=>{var i=Qt(e)?{[e]:n}:e;this.setPersonProperties(void 0,i),r==null||r({})}},this.on("eventCaptured",e=>Ae.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,n,r){if(r&&r!==ru){var i,s=(i=qf[r])!==null&&i!==void 0?i:new ED;return s._init(e,n,r),qf[r]=s,qf[ru][r]=s,s}return this._init(e,n,r)}_init(e,n,r){var i,s;if(n===void 0&&(n={}),me(e)||Hx(e))return Ae.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Ae.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.$s=n,this.ks=[],n.person_profiles&&(this.ws=n.person_profiles),this.set_config(rn({},QA(n.defaults),eP(n),{name:r,token:e})),this.config.on_xhr_error&&Ae.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:Eo.GZipJS,this.persistence=new Gw(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Gw(xe({},this.config,{persistence:"sessionStorage"}));var o=xe({},this.persistence.props),a=xe({},this.sessionPersistence.props);if(this.register({$initialization_time:new Date().toISOString()}),this.xs=new UU(v=>this.Es(v),this.config.request_queue_config),this.Is=new VU(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new XU(this),this.sessionPropsManager=new KU(this,this.sessionManager,this.persistence)),new cU(this).startIfEnabledOrStop(),this.siteApps=new qU(this),(i=this.siteApps)==null||i.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new rU(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new o7(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new fU(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new uU(this),this.exceptionObserver=new y7(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new LI(this,v7),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new R7(this),this.historyAutocapture.startIfEnabled(),ho.DEBUG=ho.DEBUG||this.config.debug,ho.DEBUG&&Ae.info("Starting in debug mode",{this:this,config:n,thisC:xe({},this.config),p:o,s:a}),this.Ps(),((s=n.bootstrap)==null?void 0:s.distinctID)!==void 0){var l,c,u=this.config.get_device_id(Ca()),d=(l=n.bootstrap)!=null&&l.isIdentifiedID?u:n.bootstrap.distinctID;this.persistence.set_property(lo,(c=n.bootstrap)!=null&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:d})}if(this.Rs()){var f,h,m=Object.keys(((f=n.bootstrap)==null?void 0:f.featureFlags)||{}).filter(v=>{var w;return!((w=n.bootstrap)==null||(w=w.featureFlags)==null||!w[v])}).reduce((v,w)=>{var b;return v[w]=((b=n.bootstrap)==null||(b=b.featureFlags)==null?void 0:b[w])||!1,v},{}),g=Object.keys(((h=n.bootstrap)==null?void 0:h.featureFlagPayloads)||{}).filter(v=>m[v]).reduce((v,w)=>{var b,k;return(b=n.bootstrap)!=null&&(b=b.featureFlagPayloads)!=null&&b[w]&&(v[w]=(k=n.bootstrap)==null||(k=k.featureFlagPayloads)==null?void 0:k[w]),v},{});this.featureFlags.receivedFeatureFlags({featureFlags:m,featureFlagPayloads:g})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:lm,$device_id:null},"");else if(!this.get_distinct_id()){var y=this.config.get_device_id(Ca());this.register_once({distinct_id:y,$device_id:y},""),this.persistence.set_property(lo,"anonymous")}return Wt(W,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?iU(this,()=>this.Ts()):this.Ts(),Ti(this.config._onCapture)&&this.config._onCapture!==g1&&(Ae.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",v=>this.config._onCapture(v.event,v))),this.config.ip&&Ae.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Ie(e){var n,r,i,s,o,a,l,c;if(!Ce||!Ce.body)return Ae.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Ie(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=tt(e.supportedCompression,Eo.GZipJS)?Eo.GZipJS:tt(e.supportedCompression,Eo.Base64)?Eo.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.ws?this.ws:"identified_only"}),(r=this.siteApps)==null||r.onRemoteConfig(e),(i=this.sessionRecording)==null||i.onRemoteConfig(e),(s=this.autocapture)==null||s.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(e)}Ts(){try{this.config.loaded(this)}catch(e){Ae.critical("`loaded` function failed",e)}this.Ms(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Cs()},1),new zU(this).load(),this.featureFlags.flags()}Ms(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this.xs)==null||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||$a(this.__request_queue,e=>this.Es(e)),this.__request_queue=[],this.Ms()}_handle_unload(){var e,n;this.config.request_batching?(this.Fs()&&this.capture("$pageleave"),(e=this.xs)==null||e.unload(),(n=this.Is)==null||n.unload()):this.Fs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Ee(e){this.__loaded&&(_D?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=Mv(e.url,{ip:this.config.ip?1:0}),e.headers=xe({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var r,i,s,o=xe({},n);o.timeout=o.timeout||6e4,o.url=Mv(o.url,{_:new Date().getTime().toString(),ver:ho.LIB_VERSION,compression:o.compression});var a=(r=o.transport)!==null&&r!==void 0?r:"fetch",l=(i=(s=bI(Yf,c=>c.transport===a))==null?void 0:s.method)!==null&&i!==void 0?i:Yf[0].method;if(!l)throw new Error("No available transport method");l(o)})(xe({},e,{callback:n=>{var r,i;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((r=(i=this.config).on_request_error)==null||r.call(i,n)),e.callback==null||e.callback(n)}}))))}Es(e){this.Is?this.Is.retriableRequest(e):this.Ee(e)}_execute_array(e){var n,r=[],i=[],s=[];$a(e,a=>{a&&(n=a[0],Bt(n)?s.push(a):Ti(a)?a.call(this):Bt(a)&&n==="alias"?r.push(a):Bt(a)&&n.indexOf("capture")!==-1&&Ti(this[n])?s.push(a):i.push(a))});var o=function(a,l){$a(a,function(c){if(Bt(c[0])){var u=l;bt(c,function(d){u=u[d[0]].apply(u,d.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(r,this),o(i,this),o(s,this)}Rs(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,r){var i;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.xs){if(!this.consent.isOptedOut())if(!me(e)&&Qt(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){n!=null&&n.$current_url&&!Qt(n==null?void 0:n.$current_url)&&(Ae.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(r==null?void 0:r.timestamp)||o,l=Ca(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,n||{},a,l)};s&&(c.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),r!=null&&r.$set&&(c.$set=r==null?void 0:r.$set);var u,d,f=this.Os(r==null?void 0:r.$set_once);if(f&&(c.$set_once=f),(c=V9(c,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,me(r==null?void 0:r.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=o),e===Kw.DISMISSED||e===Kw.SENT){var h=n==null?void 0:n[XA.SURVEY_ID],m=n==null?void 0:n[XA.SURVEY_ITERATION];localStorage.setItem((d=""+p1+(u={id:h,current_iteration:m}).id,u.current_iteration&&u.current_iteration>0&&(d=""+p1+u.id+"_"+u.current_iteration),d),"true"),c.$set=xe({},c.$set,{[jU({id:h,current_iteration:m},e===Kw.SENT?"responded":"dismissed")]:!0})}var g=xe({},c.properties.$set,c.$set);if(uu(g)||this.setPersonPropertiesForFlags(g),!gt(this.config.before_send)){var y=this.As(c);if(!y)return;c=y}this._s.emit("eventCaptured",c);var v={method:"POST",url:(i=r==null?void 0:r._url)!==null&&i!==void 0?i:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:r==null?void 0:r._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this.Es(v):this.xs.enqueue(v),c}Ae.critical("This capture call is ignored due to client rate limiting.")}}else Ae.error("No event name provided to posthog.capture")}else Ae.uninitializedWarning("posthog.capture")}Ge(e){return this.on("eventCaptured",n=>e(n.event,n))}calculateEventProperties(e,n,r,i,s){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return n;var o=s?void 0:this.persistence.remove_event_timer(e),a=xe({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(a.$cookieless_mode=!0),e==="$snapshot"){var l=xe({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!Qt(a.distinct_id)&&!Qn(a.distinct_id)||Hx(a.distinct_id))&&Ae.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,u=RU(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId(s,r.getTime());a.$session_id=d,a.$window_id=f}this.sessionPropsManager&&rn(a,this.sessionPropsManager.getSessionProps());try{var h;this.sessionRecording&&rn(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(h=this.Is)==null?void 0:h.length}catch(v){a.$sdk_debug_error_capturing_properties=String(v)}if(this.requestRouter.region===Nf.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=e!=="$pageview"||s?e!=="$pageleave"||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(r):this.pageViewManager.doPageView(r,i),a=rn(a,c),e==="$pageview"&&Ce&&(a.title=Ce.title),!me(o)){var m=r.getTime()-o;a.$duration=parseFloat((m/1e3).toFixed(3))}Ar&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=rn({},u,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),Bt(this.config.property_denylist)?bt(this.config.property_denylist,function(v){delete a[v]}):Ae.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var g=this.config.sanitize_properties;g&&(Ae.error("sanitize_properties is deprecated. Use before_send instead"),a=g(a,e));var y=this.Ds();return a.$process_person_profile=y,y&&!s&&this.Ls("_calculate_event_properties"),a}Os(e){var n;if(!this.persistence||!this.Ds()||this.gs)return e;var r=this.persistence.get_initial_props(),i=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),s=rn({},r,i||{},e||{}),o=this.config.sanitize_properties;return o&&(Ae.error("sanitize_properties is deprecated. Use before_send instead"),s=o(s,"$set_once")),this.gs=!0,uu(s)?void 0:s}register(e,n){var r;(r=this.persistence)==null||r.register(e,n)}register_once(e,n,r){var i;(i=this.persistence)==null||i.register_once(e,n,r)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}js(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e,n,r){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,r)}on(e,n){return this._s.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,r;return(n=(r=this.sessionManager)==null?void 0:r.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,r){if(!this.__loaded||!this.persistence)return Ae.uninitializedWarning("posthog.identify");if(Qn(e)&&(e=e.toString(),Ae.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Ae.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==lm){if(this.Ls("posthog.identify")){var i=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==i&&e!==this.get_property(Sf)&&(this.unregister(Sf),this.register({distinct_id:e}));var o=(this.persistence.get_property(lo)||"anonymous")==="anonymous";e!==i&&o?(this.persistence.set_property(lo,"identified"),this.setPersonPropertiesForFlags(xe({},r||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:i},{$set:n||{},$set_once:r||{}}),this.Ss=FA(e,n,r),this.featureFlags.setAnonymousDistinctId(i)):(n||r)&&this.setPersonProperties(n,r),e!==i&&(this.reloadFeatureFlags(),this.unregister(Sv))}}else Ae.critical('The string "'+lm+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Ae.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.Ls("posthog.setPersonProperties")){var r=FA(this.get_distinct_id(),e,n);this.Ss!==r?(this.setPersonPropertiesForFlags(xe({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.Ss=r):Ae.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,r){if(e&&n){if(this.Ls("posthog.group")){var i=this.getGroups();i[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:xe({},i,{[e]:n})}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:r}),this.setGroupPropertiesForFlags({[e]:r})),i[e]===n||r||this.reloadFeatureFlags()}}else Ae.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.Ls("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,r,i,s;if(Ae.info("reset"),!this.__loaded)return Ae.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(r=this.sessionPersistence)==null||r.clear(),this.surveys.reset(),(i=this.persistence)==null||i.set_property(lo,"anonymous"),(s=this.sessionManager)==null||s.resetSessionId(),this.Ss=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:lm,$device_id:null},"");else{var a=this.config.get_device_id(Ca());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),i=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&r){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!r)return i;i+="?t="+Math.max(Math.floor((new Date().getTime()-r)/1e3)-o,0)}return i}alias(e,n){return e===this.get_property(xI)?(Ae.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ls("posthog.alias")?(me(n)&&(n=this.get_distinct_id()),e!==n?(this.js(Sf,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(Ae.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,r,i,s,o,a=xe({},this.config);Zt(e)&&(rn(this.config,eP(e)),(n=this.persistence)==null||n.update_config(this.config,a),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Gw(xe({},this.config,{persistence:"sessionStorage"})),vn.O()&&vn.D("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(ho.DEBUG=!0,Ae.info("set_config",{config:e,oldConfig:a,newConfig:xe({},this.config)})),(r=this.sessionRecording)==null||r.startIfEnabledOrStop(),(i=this.autocapture)==null||i.startIfEnabled(),(s=this.heatmaps)==null||s.startIfEnabled(),this.surveys.loadIfEnabled(),this.Ps(),(o=this.externalIntegrations)==null||o.startIfEnabledOrStop())}startSessionRecording(e){var n=e===!0,r={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(r).some(Boolean)){var i,s,o,a,l;(i=this.sessionManager)==null||i.checkAndGetSessionAndWindowId(),r.sampling&&((s=this.sessionRecording)==null||s.overrideSampling()),r.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),r.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),r.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var r=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(xe({},M7((i=>i instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:r}),n))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:ru;return n!==ru&&(n=ru+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(lo))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(lo))==="identified"}Ds(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&uu(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Sf])&&((n=this.persistence)==null||(n=n.props)==null||!n[_v]))}Fs(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Ds()||this.Ls("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ls(e){return this.config.person_profiles==="never"?(Ae.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.js(_v,!0),!0)}Ps(){var e,n,r,i,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)==null?void 0:e.Fe)!==a&&((r=this.persistence)==null||r.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.Fe)!==a&&((i=this.sessionPersistence)==null||i.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this.Ps(),(me(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Cs()}opt_out_capturing(){this.consent.optInOut(!1),this.Ps()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Ps()}_is_bot(){return ni?kD(ni,this.config.custom_blocked_useragents):void 0}Cs(){Ce&&(Ce.visibilityState==="visible"?this.bs||(this.bs=!0,this.capture("$pageview",{title:Ce.title},{send_instantly:!0}),this.ys&&(Ce.removeEventListener("visibilitychange",this.ys),this.ys=null)):this.ys||(this.ys=this.Cs.bind(this),Wt(Ce,"visibilitychange",this.ys)))}debug(e){e===!1?(W==null||W.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(W==null||W.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var e,n,r,i,s,o,a,l=this.$s||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(Ae.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(r="advanced_disable_decide",i=!1,s=Ae,o=(n="advanced_disable_flags")in(e=l)&&!me(e[n]),a=r in e&&!me(e[r]),o?e[n]:a?(s&&s.warn("Config field '"+r+"' is deprecated. Please use '"+n+"' instead. The old field will be removed in a future major version."),e[r]):i)}As(e){if(gt(this.config.before_send))return e;var n=Bt(this.config.before_send)?this.config.before_send:[this.config.before_send],r=e;for(var i of n){if(r=i(r),gt(r)){var s="Event '"+e.event+"' was rejected in beforeSend function";return z9(e.event)?Ae.warn(s+". This can cause unexpected behavior."):Ae.info(s),null}r.properties&&!uu(r.properties)||Ae.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return r}getPageViewId(){var e;return(e=this.pageViewManager.ce)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,r){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(r)})}};(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=H9(t.prototype[e[n]])})(CD,["identify"]);var tP,va=(tP=qf[ru]=new CD,function(){function t(){t.done||(t.done=!0,_D=!1,bt(qf,function(e){e._dom_loaded()}))}Ce!=null&&Ce.addEventListener?Ce.readyState==="complete"?t():Wt(Ce,"DOMContentLoaded",t,{capture:!1}):W&&Ae.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),tP),AD=x.createContext({client:va});function PD(t,e,n){if(n===void 0&&(n=new WeakMap),t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(n.has(t)&&n.get(t)===e)return!0;n.set(t,e);var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var s=0,o=r;s<o.length;s++){var a=o[s];if(!i.includes(a)||!PD(t[a],e[a],n))return!1}return!0}function sH(t){var e=t.children,n=t.client,r=t.apiKey,i=t.options,s=x.useRef(null),o=x.useMemo(function(){return n?(r&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),i&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(r||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),va)},[n,r,JSON.stringify(i)]);return x.useEffect(function(){if(!n){var a=s.current;a?(r!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),i&&!PD(i,a.options)&&va.set_config(i),s.current={apiKey:r,options:i??{}}):(va.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),va.init(r,i),s.current={apiKey:r,options:i??{}})}},[n,r,JSON.stringify(i)]),Ot.createElement(AD.Provider,{value:{client:o}},e)}var v1=function(t,e){return v1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},v1(t,e)};function oH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");v1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Xw=function(t){return typeof t=="function"},aH={componentStack:null,error:null},lH={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(t){oH(e,t);function e(n){var r=t.call(this,n)||this;return r.state=aH,r}return e.prototype.componentDidCatch=function(n,r){var i=r.componentStack,s=this.props.additionalProperties;this.setState({error:n,componentStack:i});var o;Xw(s)?o=s(n):typeof s=="object"&&(o=s);var a=this.context.client;a.captureException(n,o)},e.prototype.render=function(){var n=this.props,r=n.children,i=n.fallback,s=this.state;if(s.componentStack==null)return Xw(r)?r():r;var o=Xw(i)?Ot.createElement(i,{error:s.error,componentStack:s.componentStack}):i;return Ot.isValidElement(o)?o:(console.warn(lH.INVALID_FALLBACK),Ot.createElement(Ot.Fragment,null))},e.contextType=AD,e})(Ot.Component);var ND={exports:{}},hi={},TD={exports:{}},MD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,$){var ne=H.length;H.push($);e:for(;0<ne;){var ke=ne-1>>>1,J=H[ke];if(0<i(J,$))H[ke]=$,H[ne]=J,ne=ke;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var $=H[0],ne=H.pop();if(ne!==$){H[0]=ne;e:for(var ke=0,J=H.length,ae=J>>>1;ke<ae;){var j=2*(ke+1)-1,L=H[j],z=j+1,S=H[z];if(0>i(L,ne))z<J&&0>i(S,L)?(H[ke]=S,H[z]=ne,ke=z):(H[ke]=L,H[j]=ne,ke=j);else if(z<J&&0>i(S,ne))H[ke]=S,H[z]=ne,ke=z;else break e}}return $}function i(H,$){var ne=H.sortIndex-$.sortIndex;return ne!==0?ne:H.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(H){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=H)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function k(H){if(g=!1,b(H),!m)if(n(l)!==null)m=!0,Z(_);else{var $=n(c);$!==null&&te(k,$.startTime-H)}}function _(H,$){m=!1,g&&(g=!1,v(P),P=-1),h=!0;var ne=f;try{for(b($),d=n(l);d!==null&&(!(d.expirationTime>$)||H&&!I());){var ke=d.callback;if(typeof ke=="function"){d.callback=null,f=d.priorityLevel;var J=ke(d.expirationTime<=$);$=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(l)&&r(l),b($)}else r(l);d=n(l)}if(d!==null)var ae=!0;else{var j=n(c);j!==null&&te(k,j.startTime-$),ae=!1}return ae}finally{d=null,f=ne,h=!1}}var E=!1,C=null,P=-1,M=5,O=-1;function I(){return!(t.unstable_now()-O<M)}function D(){if(C!==null){var H=t.unstable_now();O=H;var $=!0;try{$=C(!0,H)}finally{$?G():(E=!1,C=null)}}else E=!1}var G;if(typeof w=="function")G=function(){w(D)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,X=U.port2;U.port1.onmessage=D,G=function(){X.postMessage(null)}}else G=function(){y(D,0)};function Z(H){C=H,E||(E=!0,G())}function te(H,$){P=y(function(){H(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,Z(_))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var ne=f;f=$;try{return H()}finally{f=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,$){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ne=f;f=H;try{return $()}finally{f=ne}},t.unstable_scheduleCallback=function(H,$,ne){var ke=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ke+ne:ke):ne=ke,H){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ne+J,H={id:u++,callback:$,priorityLevel:H,startTime:ne,expirationTime:J,sortIndex:-1},ne>ke?(H.sortIndex=ne,e(c,H),n(l)===null&&H===n(c)&&(g?(v(P),P=-1):g=!0,te(k,ne-ke))):(H.sortIndex=J,e(l,H),m||h||(m=!0,Z(_))),H},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(H){var $=f;return function(){var ne=f;f=$;try{return H.apply(this,arguments)}finally{f=ne}}}})(MD);TD.exports=MD;var cH=TD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uH=x,ui=cH;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var RD=new Set,Ch={};function $c(t,e){ad(t,e),ad(t+"Capture",e)}function ad(t,e){for(Ch[t]=e,t=0;t<e.length;t++)RD.add(e[t])}var Do=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y1=Object.prototype.hasOwnProperty,dH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nP={},rP={};function fH(t){return y1.call(rP,t)?!0:y1.call(nP,t)?!1:dH.test(t)?rP[t]=!0:(nP[t]=!0,!1)}function hH(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pH(t,e,n,r){if(e===null||typeof e>"u"||hH(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wn[t]=new wr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wn[e]=new wr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wn[t]=new wr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wn[t]=new wr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wn[t]=new wr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wn[t]=new wr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wn[t]=new wr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wn[t]=new wr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wn[t]=new wr(t,5,!1,t.toLowerCase(),null,!1,!1)});var L_=/[\-:]([a-z])/g;function j_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(L_,j_);Wn[e]=new wr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(L_,j_);Wn[e]=new wr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(L_,j_);Wn[e]=new wr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wn[t]=new wr(t,1,!1,t.toLowerCase(),null,!1,!1)});Wn.xlinkHref=new wr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wn[t]=new wr(t,1,!1,t.toLowerCase(),null,!0,!0)});function $_(t,e,n,r){var i=Wn.hasOwnProperty(e)?Wn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pH(e,n,i,r)&&(n=null),r||i===null?fH(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Go=uH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ym=Symbol.for("react.element"),hu=Symbol.for("react.portal"),pu=Symbol.for("react.fragment"),F_=Symbol.for("react.strict_mode"),w1=Symbol.for("react.profiler"),OD=Symbol.for("react.provider"),ID=Symbol.for("react.context"),B_=Symbol.for("react.forward_ref"),b1=Symbol.for("react.suspense"),x1=Symbol.for("react.suspense_list"),z_=Symbol.for("react.memo"),ca=Symbol.for("react.lazy"),DD=Symbol.for("react.offscreen"),iP=Symbol.iterator;function qd(t){return t===null||typeof t!="object"?null:(t=iP&&t[iP]||t["@@iterator"],typeof t=="function"?t:null)}var Yt=Object.assign,Yw;function Tf(t){if(Yw===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yw=e&&e[1]||""}return`
`+Yw+t}var qw=!1;function Jw(t,e){if(!t||qw)return"";qw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{qw=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Tf(t):""}function mH(t){switch(t.tag){case 5:return Tf(t.type);case 16:return Tf("Lazy");case 13:return Tf("Suspense");case 19:return Tf("SuspenseList");case 0:case 2:case 15:return t=Jw(t.type,!1),t;case 11:return t=Jw(t.type.render,!1),t;case 1:return t=Jw(t.type,!0),t;default:return""}}function S1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pu:return"Fragment";case hu:return"Portal";case w1:return"Profiler";case F_:return"StrictMode";case b1:return"Suspense";case x1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ID:return(t.displayName||"Context")+".Consumer";case OD:return(t._context.displayName||"Context")+".Provider";case B_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case z_:return e=t.displayName||null,e!==null?e:S1(t.type)||"Memo";case ca:e=t._payload,t=t._init;try{return S1(t(e))}catch{}}return null}function gH(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S1(e);case 8:return e===F_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function LD(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vH(t){var e=LD(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wm(t){t._valueTracker||(t._valueTracker=vH(t))}function jD(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=LD(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ov(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function k1(t,e){var n=e.checked;return Yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qa(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $D(t,e){e=e.checked,e!=null&&$_(t,"checked",e,!1)}function _1(t,e){$D(t,e);var n=Qa(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?C1(t,e.type,n):e.hasOwnProperty("defaultValue")&&C1(t,e.type,Qa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function oP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function C1(t,e,n){(e!=="number"||Ov(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mf=Array.isArray;function Iu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qa(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function E1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function aP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Mf(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qa(n)}}function FD(t,e){var n=Qa(e.value),r=Qa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function lP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function BD(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function A1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?BD(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bm,zD=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bm=bm||document.createElement("div"),bm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Eh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yH=["Webkit","ms","Moz","O"];Object.keys(Jf).forEach(function(t){yH.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jf[e]=Jf[t]})});function UD(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jf.hasOwnProperty(t)&&Jf[t]?(""+e).trim():e+"px"}function HD(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=UD(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var wH=Yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function P1(t,e){if(e){if(wH[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function N1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var T1=null;function U_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var M1=null,Du=null,Lu=null;function cP(t){if(t=Tp(t)){if(typeof M1!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=m0(e),M1(t.stateNode,t.type,e))}}function VD(t){Du?Lu?Lu.push(t):Lu=[t]:Du=t}function WD(){if(Du){var t=Du,e=Lu;if(Lu=Du=null,cP(t),e)for(t=0;t<e.length;t++)cP(e[t])}}function GD(t,e){return t(e)}function KD(){}var Zw=!1;function XD(t,e,n){if(Zw)return t(e,n);Zw=!0;try{return GD(t,e,n)}finally{Zw=!1,(Du!==null||Lu!==null)&&(KD(),WD())}}function Ah(t,e){var n=t.stateNode;if(n===null)return null;var r=m0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var R1=!1;if(Do)try{var Jd={};Object.defineProperty(Jd,"passive",{get:function(){R1=!0}}),window.addEventListener("test",Jd,Jd),window.removeEventListener("test",Jd,Jd)}catch{R1=!1}function bH(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Zf=!1,Iv=null,Dv=!1,O1=null,xH={onError:function(t){Zf=!0,Iv=t}};function SH(t,e,n,r,i,s,o,a,l){Zf=!1,Iv=null,bH.apply(xH,arguments)}function kH(t,e,n,r,i,s,o,a,l){if(SH.apply(this,arguments),Zf){if(Zf){var c=Iv;Zf=!1,Iv=null}else throw Error(oe(198));Dv||(Dv=!0,O1=c)}}function Fc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function YD(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uP(t){if(Fc(t)!==t)throw Error(oe(188))}function _H(t){var e=t.alternate;if(!e){if(e=Fc(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return uP(i),t;if(s===r)return uP(i),e;s=s.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function qD(t){return t=_H(t),t!==null?JD(t):null}function JD(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=JD(t);if(e!==null)return e;t=t.sibling}return null}var ZD=ui.unstable_scheduleCallback,dP=ui.unstable_cancelCallback,CH=ui.unstable_shouldYield,EH=ui.unstable_requestPaint,sn=ui.unstable_now,AH=ui.unstable_getCurrentPriorityLevel,H_=ui.unstable_ImmediatePriority,QD=ui.unstable_UserBlockingPriority,Lv=ui.unstable_NormalPriority,PH=ui.unstable_LowPriority,eL=ui.unstable_IdlePriority,d0=null,Xs=null;function NH(t){if(Xs&&typeof Xs.onCommitFiberRoot=="function")try{Xs.onCommitFiberRoot(d0,t,void 0,(t.current.flags&128)===128)}catch{}}var as=Math.clz32?Math.clz32:RH,TH=Math.log,MH=Math.LN2;function RH(t){return t>>>=0,t===0?32:31-(TH(t)/MH|0)|0}var xm=64,Sm=4194304;function Rf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jv(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Rf(a):(s&=o,s!==0&&(r=Rf(s)))}else o=n&~i,o!==0?r=Rf(o):s!==0&&(r=Rf(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-as(e),i=1<<n,r|=t[n],e&=~i;return r}function OH(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IH(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-as(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=OH(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function I1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tL(){var t=xm;return xm<<=1,!(xm&4194240)&&(xm=64),t}function Qw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-as(e),t[e]=n}function DH(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-as(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function V_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-as(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var wt=0;function nL(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rL,W_,iL,sL,oL,D1=!1,km=[],Ba=null,za=null,Ua=null,Ph=new Map,Nh=new Map,ya=[],LH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fP(t,e){switch(t){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":Ua=null;break;case"pointerover":case"pointerout":Ph.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nh.delete(e.pointerId)}}function Zd(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Tp(e),e!==null&&W_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jH(t,e,n,r,i){switch(e){case"focusin":return Ba=Zd(Ba,t,e,n,r,i),!0;case"dragenter":return za=Zd(za,t,e,n,r,i),!0;case"mouseover":return Ua=Zd(Ua,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ph.set(s,Zd(Ph.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Nh.set(s,Zd(Nh.get(s)||null,t,e,n,r,i)),!0}return!1}function aL(t){var e=tc(t.target);if(e!==null){var n=Fc(e);if(n!==null){if(e=n.tag,e===13){if(e=YD(n),e!==null){t.blockedOn=e,oL(t.priority,function(){iL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $g(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=L1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);T1=r,n.target.dispatchEvent(r),T1=null}else return e=Tp(n),e!==null&&W_(e),t.blockedOn=n,!1;e.shift()}return!0}function hP(t,e,n){$g(t)&&n.delete(e)}function $H(){D1=!1,Ba!==null&&$g(Ba)&&(Ba=null),za!==null&&$g(za)&&(za=null),Ua!==null&&$g(Ua)&&(Ua=null),Ph.forEach(hP),Nh.forEach(hP)}function Qd(t,e){t.blockedOn===e&&(t.blockedOn=null,D1||(D1=!0,ui.unstable_scheduleCallback(ui.unstable_NormalPriority,$H)))}function Th(t){function e(i){return Qd(i,t)}if(0<km.length){Qd(km[0],t);for(var n=1;n<km.length;n++){var r=km[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ba!==null&&Qd(Ba,t),za!==null&&Qd(za,t),Ua!==null&&Qd(Ua,t),Ph.forEach(e),Nh.forEach(e),n=0;n<ya.length;n++)r=ya[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ya.length&&(n=ya[0],n.blockedOn===null);)aL(n),n.blockedOn===null&&ya.shift()}var ju=Go.ReactCurrentBatchConfig,$v=!0;function FH(t,e,n,r){var i=wt,s=ju.transition;ju.transition=null;try{wt=1,G_(t,e,n,r)}finally{wt=i,ju.transition=s}}function BH(t,e,n,r){var i=wt,s=ju.transition;ju.transition=null;try{wt=4,G_(t,e,n,r)}finally{wt=i,ju.transition=s}}function G_(t,e,n,r){if($v){var i=L1(t,e,n,r);if(i===null)cb(t,e,r,Fv,n),fP(t,r);else if(jH(i,t,e,n,r))r.stopPropagation();else if(fP(t,r),e&4&&-1<LH.indexOf(t)){for(;i!==null;){var s=Tp(i);if(s!==null&&rL(s),s=L1(t,e,n,r),s===null&&cb(t,e,r,Fv,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else cb(t,e,r,null,n)}}var Fv=null;function L1(t,e,n,r){if(Fv=null,t=U_(r),t=tc(t),t!==null)if(e=Fc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=YD(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fv=t,null}function lL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AH()){case H_:return 1;case QD:return 4;case Lv:case PH:return 16;case eL:return 536870912;default:return 16}default:return 16}}var Ea=null,K_=null,Fg=null;function cL(){if(Fg)return Fg;var t,e=K_,n=e.length,r,i="value"in Ea?Ea.value:Ea.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Fg=i.slice(t,1<r?1-r:void 0)}function Bg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _m(){return!0}function pP(){return!1}function pi(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_m:pP,this.isPropagationStopped=pP,this}return Yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_m)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_m)},persist:function(){},isPersistent:_m}),e}var Id={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},X_=pi(Id),Np=Yt({},Id,{view:0,detail:0}),zH=pi(Np),eb,tb,ef,f0=Yt({},Np,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Y_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ef&&(ef&&t.type==="mousemove"?(eb=t.screenX-ef.screenX,tb=t.screenY-ef.screenY):tb=eb=0,ef=t),eb)},movementY:function(t){return"movementY"in t?t.movementY:tb}}),mP=pi(f0),UH=Yt({},f0,{dataTransfer:0}),HH=pi(UH),VH=Yt({},Np,{relatedTarget:0}),nb=pi(VH),WH=Yt({},Id,{animationName:0,elapsedTime:0,pseudoElement:0}),GH=pi(WH),KH=Yt({},Id,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XH=pi(KH),YH=Yt({},Id,{data:0}),gP=pi(YH),qH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QH(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ZH[t])?!!e[t]:!1}function Y_(){return QH}var eV=Yt({},Np,{key:function(t){if(t.key){var e=qH[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JH[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Y_,charCode:function(t){return t.type==="keypress"?Bg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tV=pi(eV),nV=Yt({},f0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vP=pi(nV),rV=Yt({},Np,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Y_}),iV=pi(rV),sV=Yt({},Id,{propertyName:0,elapsedTime:0,pseudoElement:0}),oV=pi(sV),aV=Yt({},f0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lV=pi(aV),cV=[9,13,27,32],q_=Do&&"CompositionEvent"in window,Qf=null;Do&&"documentMode"in document&&(Qf=document.documentMode);var uV=Do&&"TextEvent"in window&&!Qf,uL=Do&&(!q_||Qf&&8<Qf&&11>=Qf),yP=" ",wP=!1;function dL(t,e){switch(t){case"keyup":return cV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mu=!1;function dV(t,e){switch(t){case"compositionend":return fL(e);case"keypress":return e.which!==32?null:(wP=!0,yP);case"textInput":return t=e.data,t===yP&&wP?null:t;default:return null}}function fV(t,e){if(mu)return t==="compositionend"||!q_&&dL(t,e)?(t=cL(),Fg=K_=Ea=null,mu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uL&&e.locale!=="ko"?null:e.data;default:return null}}var hV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hV[t.type]:e==="textarea"}function hL(t,e,n,r){VD(r),e=Bv(e,"onChange"),0<e.length&&(n=new X_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var eh=null,Mh=null;function pV(t){_L(t,0)}function h0(t){var e=yu(t);if(jD(e))return t}function mV(t,e){if(t==="change")return e}var pL=!1;if(Do){var rb;if(Do){var ib="oninput"in document;if(!ib){var xP=document.createElement("div");xP.setAttribute("oninput","return;"),ib=typeof xP.oninput=="function"}rb=ib}else rb=!1;pL=rb&&(!document.documentMode||9<document.documentMode)}function SP(){eh&&(eh.detachEvent("onpropertychange",mL),Mh=eh=null)}function mL(t){if(t.propertyName==="value"&&h0(Mh)){var e=[];hL(e,Mh,t,U_(t)),XD(pV,e)}}function gV(t,e,n){t==="focusin"?(SP(),eh=e,Mh=n,eh.attachEvent("onpropertychange",mL)):t==="focusout"&&SP()}function vV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return h0(Mh)}function yV(t,e){if(t==="click")return h0(e)}function wV(t,e){if(t==="input"||t==="change")return h0(e)}function bV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cs=typeof Object.is=="function"?Object.is:bV;function Rh(t,e){if(cs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!y1.call(e,i)||!cs(t[i],e[i]))return!1}return!0}function kP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _P(t,e){var n=kP(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kP(n)}}function gL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vL(){for(var t=window,e=Ov();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ov(t.document)}return e}function J_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xV(t){var e=vL(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&gL(n.ownerDocument.documentElement,n)){if(r!==null&&J_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=_P(n,s);var o=_P(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var SV=Do&&"documentMode"in document&&11>=document.documentMode,gu=null,j1=null,th=null,$1=!1;function CP(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$1||gu==null||gu!==Ov(r)||(r=gu,"selectionStart"in r&&J_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),th&&Rh(th,r)||(th=r,r=Bv(j1,"onSelect"),0<r.length&&(e=new X_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gu)))}function Cm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vu={animationend:Cm("Animation","AnimationEnd"),animationiteration:Cm("Animation","AnimationIteration"),animationstart:Cm("Animation","AnimationStart"),transitionend:Cm("Transition","TransitionEnd")},sb={},yL={};Do&&(yL=document.createElement("div").style,"AnimationEvent"in window||(delete vu.animationend.animation,delete vu.animationiteration.animation,delete vu.animationstart.animation),"TransitionEvent"in window||delete vu.transitionend.transition);function p0(t){if(sb[t])return sb[t];if(!vu[t])return t;var e=vu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in yL)return sb[t]=e[n];return t}var wL=p0("animationend"),bL=p0("animationiteration"),xL=p0("animationstart"),SL=p0("transitionend"),kL=new Map,EP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yl(t,e){kL.set(t,e),$c(e,[t])}for(var ob=0;ob<EP.length;ob++){var ab=EP[ob],kV=ab.toLowerCase(),_V=ab[0].toUpperCase()+ab.slice(1);yl(kV,"on"+_V)}yl(wL,"onAnimationEnd");yl(bL,"onAnimationIteration");yl(xL,"onAnimationStart");yl("dblclick","onDoubleClick");yl("focusin","onFocus");yl("focusout","onBlur");yl(SL,"onTransitionEnd");ad("onMouseEnter",["mouseout","mouseover"]);ad("onMouseLeave",["mouseout","mouseover"]);ad("onPointerEnter",["pointerout","pointerover"]);ad("onPointerLeave",["pointerout","pointerover"]);$c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$c("onBeforeInput",["compositionend","keypress","textInput","paste"]);$c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Of));function AP(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,kH(r,e,void 0,t),t.currentTarget=null}function _L(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;AP(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;AP(i,a,c),s=l}}}if(Dv)throw t=O1,Dv=!1,O1=null,t}function Mt(t,e){var n=e[H1];n===void 0&&(n=e[H1]=new Set);var r=t+"__bubble";n.has(r)||(CL(e,t,2,!1),n.add(r))}function lb(t,e,n){var r=0;e&&(r|=4),CL(n,t,r,e)}var Em="_reactListening"+Math.random().toString(36).slice(2);function Oh(t){if(!t[Em]){t[Em]=!0,RD.forEach(function(n){n!=="selectionchange"&&(CV.has(n)||lb(n,!1,t),lb(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Em]||(e[Em]=!0,lb("selectionchange",!1,e))}}function CL(t,e,n,r){switch(lL(e)){case 1:var i=FH;break;case 4:i=BH;break;default:i=G_}n=i.bind(null,e,n,t),i=void 0,!R1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function cb(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=tc(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}XD(function(){var c=s,u=U_(n),d=[];e:{var f=kL.get(t);if(f!==void 0){var h=X_,m=t;switch(t){case"keypress":if(Bg(n)===0)break e;case"keydown":case"keyup":h=tV;break;case"focusin":m="focus",h=nb;break;case"focusout":m="blur",h=nb;break;case"beforeblur":case"afterblur":h=nb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=mP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=HH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=iV;break;case wL:case bL:case xL:h=GH;break;case SL:h=oV;break;case"scroll":h=zH;break;case"wheel":h=lV;break;case"copy":case"cut":case"paste":h=XH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=vP}var g=(e&4)!==0,y=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var w=c,b;w!==null;){b=w;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,v!==null&&(k=Ah(w,v),k!=null&&g.push(Ih(w,k,b)))),y)break;w=w.return}0<g.length&&(f=new h(f,m,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==T1&&(m=n.relatedTarget||n.fromElement)&&(tc(m)||m[Lo]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?tc(m):null,m!==null&&(y=Fc(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=c),h!==m)){if(g=mP,k="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=vP,k="onPointerLeave",v="onPointerEnter",w="pointer"),y=h==null?f:yu(h),b=m==null?f:yu(m),f=new g(k,w+"leave",h,n,u),f.target=y,f.relatedTarget=b,k=null,tc(u)===c&&(g=new g(v,w+"enter",m,n,u),g.target=b,g.relatedTarget=y,k=g),y=k,h&&m)t:{for(g=h,v=m,w=0,b=g;b;b=Gc(b))w++;for(b=0,k=v;k;k=Gc(k))b++;for(;0<w-b;)g=Gc(g),w--;for(;0<b-w;)v=Gc(v),b--;for(;w--;){if(g===v||v!==null&&g===v.alternate)break t;g=Gc(g),v=Gc(v)}g=null}else g=null;h!==null&&PP(d,f,h,g,!1),m!==null&&y!==null&&PP(d,y,m,g,!0)}}e:{if(f=c?yu(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var _=mV;else if(bP(f))if(pL)_=wV;else{_=vV;var E=gV}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=yV);if(_&&(_=_(t,c))){hL(d,_,n,u);break e}E&&E(t,f,c),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&C1(f,"number",f.value)}switch(E=c?yu(c):window,t){case"focusin":(bP(E)||E.contentEditable==="true")&&(gu=E,j1=c,th=null);break;case"focusout":th=j1=gu=null;break;case"mousedown":$1=!0;break;case"contextmenu":case"mouseup":case"dragend":$1=!1,CP(d,n,u);break;case"selectionchange":if(SV)break;case"keydown":case"keyup":CP(d,n,u)}var C;if(q_)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else mu?dL(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(uL&&n.locale!=="ko"&&(mu||P!=="onCompositionStart"?P==="onCompositionEnd"&&mu&&(C=cL()):(Ea=u,K_="value"in Ea?Ea.value:Ea.textContent,mu=!0)),E=Bv(c,P),0<E.length&&(P=new gP(P,t,null,n,u),d.push({event:P,listeners:E}),C?P.data=C:(C=fL(n),C!==null&&(P.data=C)))),(C=uV?dV(t,n):fV(t,n))&&(c=Bv(c,"onBeforeInput"),0<c.length&&(u=new gP("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}_L(d,e)})}function Ih(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bv(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ah(t,n),s!=null&&r.unshift(Ih(t,s,i)),s=Ah(t,e),s!=null&&r.push(Ih(t,s,i))),t=t.return}return r}function Gc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function PP(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ah(n,s),l!=null&&o.unshift(Ih(n,l,a))):i||(l=Ah(n,s),l!=null&&o.push(Ih(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var EV=/\r\n?/g,AV=/\u0000|\uFFFD/g;function NP(t){return(typeof t=="string"?t:""+t).replace(EV,`
`).replace(AV,"")}function Am(t,e,n){if(e=NP(e),NP(t)!==e&&n)throw Error(oe(425))}function zv(){}var F1=null,B1=null;function z1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var U1=typeof setTimeout=="function"?setTimeout:void 0,PV=typeof clearTimeout=="function"?clearTimeout:void 0,TP=typeof Promise=="function"?Promise:void 0,NV=typeof queueMicrotask=="function"?queueMicrotask:typeof TP<"u"?function(t){return TP.resolve(null).then(t).catch(TV)}:U1;function TV(t){setTimeout(function(){throw t})}function ub(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Th(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Th(e)}function Ha(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function MP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Dd=Math.random().toString(36).slice(2),Os="__reactFiber$"+Dd,Dh="__reactProps$"+Dd,Lo="__reactContainer$"+Dd,H1="__reactEvents$"+Dd,MV="__reactListeners$"+Dd,RV="__reactHandles$"+Dd;function tc(t){var e=t[Os];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lo]||n[Os]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=MP(t);t!==null;){if(n=t[Os])return n;t=MP(t)}return e}t=n,n=t.parentNode}return null}function Tp(t){return t=t[Os]||t[Lo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function m0(t){return t[Dh]||null}var V1=[],wu=-1;function wl(t){return{current:t}}function Dt(t){0>wu||(t.current=V1[wu],V1[wu]=null,wu--)}function Nt(t,e){wu++,V1[wu]=t.current,t.current=e}var el={},ir=wl(el),jr=wl(!1),yc=el;function ld(t,e){var n=t.type.contextTypes;if(!n)return el;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function $r(t){return t=t.childContextTypes,t!=null}function Uv(){Dt(jr),Dt(ir)}function RP(t,e,n){if(ir.current!==el)throw Error(oe(168));Nt(ir,e),Nt(jr,n)}function EL(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,gH(t)||"Unknown",i));return Yt({},n,r)}function Hv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||el,yc=ir.current,Nt(ir,t),Nt(jr,jr.current),!0}function OP(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=EL(t,e,yc),r.__reactInternalMemoizedMergedChildContext=t,Dt(jr),Dt(ir),Nt(ir,t)):Dt(jr),Nt(jr,n)}var po=null,g0=!1,db=!1;function AL(t){po===null?po=[t]:po.push(t)}function OV(t){g0=!0,AL(t)}function bl(){if(!db&&po!==null){db=!0;var t=0,e=wt;try{var n=po;for(wt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}po=null,g0=!1}catch(i){throw po!==null&&(po=po.slice(t+1)),ZD(H_,bl),i}finally{wt=e,db=!1}}return null}var bu=[],xu=0,Vv=null,Wv=0,xi=[],Si=0,wc=null,To=1,Mo="";function Wl(t,e){bu[xu++]=Wv,bu[xu++]=Vv,Vv=t,Wv=e}function PL(t,e,n){xi[Si++]=To,xi[Si++]=Mo,xi[Si++]=wc,wc=t;var r=To;t=Mo;var i=32-as(r)-1;r&=~(1<<i),n+=1;var s=32-as(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,To=1<<32-as(e)+i|n<<i|r,Mo=s+t}else To=1<<s|n<<i|r,Mo=t}function Z_(t){t.return!==null&&(Wl(t,1),PL(t,1,0))}function Q_(t){for(;t===Vv;)Vv=bu[--xu],bu[xu]=null,Wv=bu[--xu],bu[xu]=null;for(;t===wc;)wc=xi[--Si],xi[Si]=null,Mo=xi[--Si],xi[Si]=null,To=xi[--Si],xi[Si]=null}var li=null,ii=null,zt=!1,es=null;function NL(t,e){var n=Ai(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function IP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,li=t,ii=Ha(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,li=t,ii=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wc!==null?{id:To,overflow:Mo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ai(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,li=t,ii=null,!0):!1;default:return!1}}function W1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function G1(t){if(zt){var e=ii;if(e){var n=e;if(!IP(t,e)){if(W1(t))throw Error(oe(418));e=Ha(n.nextSibling);var r=li;e&&IP(t,e)?NL(r,n):(t.flags=t.flags&-4097|2,zt=!1,li=t)}}else{if(W1(t))throw Error(oe(418));t.flags=t.flags&-4097|2,zt=!1,li=t}}}function DP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;li=t}function Pm(t){if(t!==li)return!1;if(!zt)return DP(t),zt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!z1(t.type,t.memoizedProps)),e&&(e=ii)){if(W1(t))throw TL(),Error(oe(418));for(;e;)NL(t,e),e=Ha(e.nextSibling)}if(DP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ii=Ha(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ii=null}}else ii=li?Ha(t.stateNode.nextSibling):null;return!0}function TL(){for(var t=ii;t;)t=Ha(t.nextSibling)}function cd(){ii=li=null,zt=!1}function eC(t){es===null?es=[t]:es.push(t)}var IV=Go.ReactCurrentBatchConfig;function tf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function Nm(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function LP(t){var e=t._init;return e(t._payload)}function ML(t){function e(v,w){if(t){var b=v.deletions;b===null?(v.deletions=[w],v.flags|=16):b.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function i(v,w){return v=Ka(v,w),v.index=0,v.sibling=null,v}function s(v,w,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<w?(v.flags|=2,w):b):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,b,k){return w===null||w.tag!==6?(w=yb(b,v.mode,k),w.return=v,w):(w=i(w,b),w.return=v,w)}function l(v,w,b,k){var _=b.type;return _===pu?u(v,w,b.props.children,k,b.key):w!==null&&(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ca&&LP(_)===w.type)?(k=i(w,b.props),k.ref=tf(v,w,b),k.return=v,k):(k=Kg(b.type,b.key,b.props,null,v.mode,k),k.ref=tf(v,w,b),k.return=v,k)}function c(v,w,b,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=wb(b,v.mode,k),w.return=v,w):(w=i(w,b.children||[]),w.return=v,w)}function u(v,w,b,k,_){return w===null||w.tag!==7?(w=uc(b,v.mode,k,_),w.return=v,w):(w=i(w,b),w.return=v,w)}function d(v,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=yb(""+w,v.mode,b),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ym:return b=Kg(w.type,w.key,w.props,null,v.mode,b),b.ref=tf(v,null,w),b.return=v,b;case hu:return w=wb(w,v.mode,b),w.return=v,w;case ca:var k=w._init;return d(v,k(w._payload),b)}if(Mf(w)||qd(w))return w=uc(w,v.mode,b,null),w.return=v,w;Nm(v,w)}return null}function f(v,w,b,k){var _=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:a(v,w,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ym:return b.key===_?l(v,w,b,k):null;case hu:return b.key===_?c(v,w,b,k):null;case ca:return _=b._init,f(v,w,_(b._payload),k)}if(Mf(b)||qd(b))return _!==null?null:u(v,w,b,k,null);Nm(v,b)}return null}function h(v,w,b,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(b)||null,a(w,v,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ym:return v=v.get(k.key===null?b:k.key)||null,l(w,v,k,_);case hu:return v=v.get(k.key===null?b:k.key)||null,c(w,v,k,_);case ca:var E=k._init;return h(v,w,b,E(k._payload),_)}if(Mf(k)||qd(k))return v=v.get(b)||null,u(w,v,k,_,null);Nm(w,k)}return null}function m(v,w,b,k){for(var _=null,E=null,C=w,P=w=0,M=null;C!==null&&P<b.length;P++){C.index>P?(M=C,C=null):M=C.sibling;var O=f(v,C,b[P],k);if(O===null){C===null&&(C=M);break}t&&C&&O.alternate===null&&e(v,C),w=s(O,w,P),E===null?_=O:E.sibling=O,E=O,C=M}if(P===b.length)return n(v,C),zt&&Wl(v,P),_;if(C===null){for(;P<b.length;P++)C=d(v,b[P],k),C!==null&&(w=s(C,w,P),E===null?_=C:E.sibling=C,E=C);return zt&&Wl(v,P),_}for(C=r(v,C);P<b.length;P++)M=h(C,v,P,b[P],k),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?P:M.key),w=s(M,w,P),E===null?_=M:E.sibling=M,E=M);return t&&C.forEach(function(I){return e(v,I)}),zt&&Wl(v,P),_}function g(v,w,b,k){var _=qd(b);if(typeof _!="function")throw Error(oe(150));if(b=_.call(b),b==null)throw Error(oe(151));for(var E=_=null,C=w,P=w=0,M=null,O=b.next();C!==null&&!O.done;P++,O=b.next()){C.index>P?(M=C,C=null):M=C.sibling;var I=f(v,C,O.value,k);if(I===null){C===null&&(C=M);break}t&&C&&I.alternate===null&&e(v,C),w=s(I,w,P),E===null?_=I:E.sibling=I,E=I,C=M}if(O.done)return n(v,C),zt&&Wl(v,P),_;if(C===null){for(;!O.done;P++,O=b.next())O=d(v,O.value,k),O!==null&&(w=s(O,w,P),E===null?_=O:E.sibling=O,E=O);return zt&&Wl(v,P),_}for(C=r(v,C);!O.done;P++,O=b.next())O=h(C,v,P,O.value,k),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?P:O.key),w=s(O,w,P),E===null?_=O:E.sibling=O,E=O);return t&&C.forEach(function(D){return e(v,D)}),zt&&Wl(v,P),_}function y(v,w,b,k){if(typeof b=="object"&&b!==null&&b.type===pu&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ym:e:{for(var _=b.key,E=w;E!==null;){if(E.key===_){if(_=b.type,_===pu){if(E.tag===7){n(v,E.sibling),w=i(E,b.props.children),w.return=v,v=w;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ca&&LP(_)===E.type){n(v,E.sibling),w=i(E,b.props),w.ref=tf(v,E,b),w.return=v,v=w;break e}n(v,E);break}else e(v,E);E=E.sibling}b.type===pu?(w=uc(b.props.children,v.mode,k,b.key),w.return=v,v=w):(k=Kg(b.type,b.key,b.props,null,v.mode,k),k.ref=tf(v,w,b),k.return=v,v=k)}return o(v);case hu:e:{for(E=b.key;w!==null;){if(w.key===E)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(v,w.sibling),w=i(w,b.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=wb(b,v.mode,k),w.return=v,v=w}return o(v);case ca:return E=b._init,y(v,w,E(b._payload),k)}if(Mf(b))return m(v,w,b,k);if(qd(b))return g(v,w,b,k);Nm(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(v,w.sibling),w=i(w,b),w.return=v,v=w):(n(v,w),w=yb(b,v.mode,k),w.return=v,v=w),o(v)):n(v,w)}return y}var ud=ML(!0),RL=ML(!1),Gv=wl(null),Kv=null,Su=null,tC=null;function nC(){tC=Su=Kv=null}function rC(t){var e=Gv.current;Dt(Gv),t._currentValue=e}function K1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $u(t,e){Kv=t,tC=Su=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dr=!0),t.firstContext=null)}function $i(t){var e=t._currentValue;if(tC!==t)if(t={context:t,memoizedValue:e,next:null},Su===null){if(Kv===null)throw Error(oe(308));Su=t,Kv.dependencies={lanes:0,firstContext:t}}else Su=Su.next=t;return e}var nc=null;function iC(t){nc===null?nc=[t]:nc.push(t)}function OL(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,iC(e)):(n.next=i.next,i.next=n),e.interleaved=n,jo(t,r)}function jo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ua=!1;function sC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IL(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ro(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Va(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ut&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,jo(t,n)}return i=r.interleaved,i===null?(e.next=e,iC(r)):(e.next=i.next,i.next=e),r.interleaved=e,jo(t,n)}function zg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,V_(t,n)}}function jP(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xv(t,e,n,r){var i=t.updateQueue;ua=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,h=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(h,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(h,d,f):m,f==null)break e;d=Yt({},d,f);break e;case 2:ua=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);xc|=o,t.lanes=o,t.memoizedState=d}}function $P(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var Mp={},Ys=wl(Mp),Lh=wl(Mp),jh=wl(Mp);function rc(t){if(t===Mp)throw Error(oe(174));return t}function oC(t,e){switch(Nt(jh,e),Nt(Lh,t),Nt(Ys,Mp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:A1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=A1(e,t)}Dt(Ys),Nt(Ys,e)}function dd(){Dt(Ys),Dt(Lh),Dt(jh)}function DL(t){rc(jh.current);var e=rc(Ys.current),n=A1(e,t.type);e!==n&&(Nt(Lh,t),Nt(Ys,n))}function aC(t){Lh.current===t&&(Dt(Ys),Dt(Lh))}var Ht=wl(0);function Yv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fb=[];function lC(){for(var t=0;t<fb.length;t++)fb[t]._workInProgressVersionPrimary=null;fb.length=0}var Ug=Go.ReactCurrentDispatcher,hb=Go.ReactCurrentBatchConfig,bc=0,Xt=null,gn=null,Nn=null,qv=!1,nh=!1,$h=0,DV=0;function Yn(){throw Error(oe(321))}function cC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cs(t[n],e[n]))return!1;return!0}function uC(t,e,n,r,i,s){if(bc=s,Xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ug.current=t===null||t.memoizedState===null?FV:BV,t=n(r,i),nh){s=0;do{if(nh=!1,$h=0,25<=s)throw Error(oe(301));s+=1,Nn=gn=null,e.updateQueue=null,Ug.current=zV,t=n(r,i)}while(nh)}if(Ug.current=Jv,e=gn!==null&&gn.next!==null,bc=0,Nn=gn=Xt=null,qv=!1,e)throw Error(oe(300));return t}function dC(){var t=$h!==0;return $h=0,t}function _s(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?Xt.memoizedState=Nn=t:Nn=Nn.next=t,Nn}function Fi(){if(gn===null){var t=Xt.alternate;t=t!==null?t.memoizedState:null}else t=gn.next;var e=Nn===null?Xt.memoizedState:Nn.next;if(e!==null)Nn=e,gn=t;else{if(t===null)throw Error(oe(310));gn=t,t={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},Nn===null?Xt.memoizedState=Nn=t:Nn=Nn.next=t}return Nn}function Fh(t,e){return typeof e=="function"?e(t):e}function pb(t){var e=Fi(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=gn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((bc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Xt.lanes|=u,xc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,cs(r,e.memoizedState)||(Dr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Xt.lanes|=s,xc|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function mb(t){var e=Fi(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);cs(s,e.memoizedState)||(Dr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function LL(){}function jL(t,e){var n=Xt,r=Fi(),i=e(),s=!cs(r.memoizedState,i);if(s&&(r.memoizedState=i,Dr=!0),r=r.queue,fC(BL.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Nn!==null&&Nn.memoizedState.tag&1){if(n.flags|=2048,Bh(9,FL.bind(null,n,r,i,e),void 0,null),Mn===null)throw Error(oe(349));bc&30||$L(n,e,i)}return i}function $L(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function FL(t,e,n,r){e.value=n,e.getSnapshot=r,zL(e)&&UL(t)}function BL(t,e,n){return n(function(){zL(e)&&UL(t)})}function zL(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cs(t,n)}catch{return!0}}function UL(t){var e=jo(t,1);e!==null&&ls(e,t,1,-1)}function FP(t){var e=_s();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fh,lastRenderedState:t},e.queue=t,t=t.dispatch=$V.bind(null,Xt,t),[e.memoizedState,t]}function Bh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function HL(){return Fi().memoizedState}function Hg(t,e,n,r){var i=_s();Xt.flags|=t,i.memoizedState=Bh(1|e,n,void 0,r===void 0?null:r)}function v0(t,e,n,r){var i=Fi();r=r===void 0?null:r;var s=void 0;if(gn!==null){var o=gn.memoizedState;if(s=o.destroy,r!==null&&cC(r,o.deps)){i.memoizedState=Bh(e,n,s,r);return}}Xt.flags|=t,i.memoizedState=Bh(1|e,n,s,r)}function BP(t,e){return Hg(8390656,8,t,e)}function fC(t,e){return v0(2048,8,t,e)}function VL(t,e){return v0(4,2,t,e)}function WL(t,e){return v0(4,4,t,e)}function GL(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function KL(t,e,n){return n=n!=null?n.concat([t]):null,v0(4,4,GL.bind(null,e,t),n)}function hC(){}function XL(t,e){var n=Fi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cC(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function YL(t,e){var n=Fi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cC(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qL(t,e,n){return bc&21?(cs(n,e)||(n=tL(),Xt.lanes|=n,xc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dr=!0),t.memoizedState=n)}function LV(t,e){var n=wt;wt=n!==0&&4>n?n:4,t(!0);var r=hb.transition;hb.transition={};try{t(!1),e()}finally{wt=n,hb.transition=r}}function JL(){return Fi().memoizedState}function jV(t,e,n){var r=Ga(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ZL(t))QL(e,n);else if(n=OL(t,e,n,r),n!==null){var i=mr();ls(n,t,r,i),e4(n,e,r)}}function $V(t,e,n){var r=Ga(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ZL(t))QL(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,cs(a,o)){var l=e.interleaved;l===null?(i.next=i,iC(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=OL(t,e,i,r),n!==null&&(i=mr(),ls(n,t,r,i),e4(n,e,r))}}function ZL(t){var e=t.alternate;return t===Xt||e!==null&&e===Xt}function QL(t,e){nh=qv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function e4(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,V_(t,n)}}var Jv={readContext:$i,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useInsertionEffect:Yn,useLayoutEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useMutableSource:Yn,useSyncExternalStore:Yn,useId:Yn,unstable_isNewReconciler:!1},FV={readContext:$i,useCallback:function(t,e){return _s().memoizedState=[t,e===void 0?null:e],t},useContext:$i,useEffect:BP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hg(4194308,4,GL.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hg(4,2,t,e)},useMemo:function(t,e){var n=_s();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_s();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=jV.bind(null,Xt,t),[r.memoizedState,t]},useRef:function(t){var e=_s();return t={current:t},e.memoizedState=t},useState:FP,useDebugValue:hC,useDeferredValue:function(t){return _s().memoizedState=t},useTransition:function(){var t=FP(!1),e=t[0];return t=LV.bind(null,t[1]),_s().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xt,i=_s();if(zt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),Mn===null)throw Error(oe(349));bc&30||$L(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,BP(BL.bind(null,r,s,t),[t]),r.flags|=2048,Bh(9,FL.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=_s(),e=Mn.identifierPrefix;if(zt){var n=Mo,r=To;n=(r&~(1<<32-as(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$h++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=DV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BV={readContext:$i,useCallback:XL,useContext:$i,useEffect:fC,useImperativeHandle:KL,useInsertionEffect:VL,useLayoutEffect:WL,useMemo:YL,useReducer:pb,useRef:HL,useState:function(){return pb(Fh)},useDebugValue:hC,useDeferredValue:function(t){var e=Fi();return qL(e,gn.memoizedState,t)},useTransition:function(){var t=pb(Fh)[0],e=Fi().memoizedState;return[t,e]},useMutableSource:LL,useSyncExternalStore:jL,useId:JL,unstable_isNewReconciler:!1},zV={readContext:$i,useCallback:XL,useContext:$i,useEffect:fC,useImperativeHandle:KL,useInsertionEffect:VL,useLayoutEffect:WL,useMemo:YL,useReducer:mb,useRef:HL,useState:function(){return mb(Fh)},useDebugValue:hC,useDeferredValue:function(t){var e=Fi();return gn===null?e.memoizedState=t:qL(e,gn.memoizedState,t)},useTransition:function(){var t=mb(Fh)[0],e=Fi().memoizedState;return[t,e]},useMutableSource:LL,useSyncExternalStore:jL,useId:JL,unstable_isNewReconciler:!1};function Xi(t,e){if(t&&t.defaultProps){e=Yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function X1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var y0={isMounted:function(t){return(t=t._reactInternals)?Fc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mr(),i=Ga(t),s=Ro(r,i);s.payload=e,n!=null&&(s.callback=n),e=Va(t,s,i),e!==null&&(ls(e,t,i,r),zg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mr(),i=Ga(t),s=Ro(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Va(t,s,i),e!==null&&(ls(e,t,i,r),zg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mr(),r=Ga(t),i=Ro(n,r);i.tag=2,e!=null&&(i.callback=e),e=Va(t,i,r),e!==null&&(ls(e,t,r,n),zg(e,t,r))}};function zP(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Rh(n,r)||!Rh(i,s):!0}function t4(t,e,n){var r=!1,i=el,s=e.contextType;return typeof s=="object"&&s!==null?s=$i(s):(i=$r(e)?yc:ir.current,r=e.contextTypes,s=(r=r!=null)?ld(t,i):el),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=y0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function UP(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&y0.enqueueReplaceState(e,e.state,null)}function Y1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},sC(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=$i(s):(s=$r(e)?yc:ir.current,i.context=ld(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(X1(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&y0.enqueueReplaceState(i,i.state,null),Xv(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fd(t,e){try{var n="",r=e;do n+=mH(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function gb(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function q1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var UV=typeof WeakMap=="function"?WeakMap:Map;function n4(t,e,n){n=Ro(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Qv||(Qv=!0,oS=r),q1(t,e)},n}function r4(t,e,n){n=Ro(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){q1(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){q1(t,e),typeof r!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function HP(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new UV;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=nW.bind(null,t,e,n),e.then(t,t))}function VP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function WP(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ro(-1,1),e.tag=2,Va(n,e,1))),n.lanes|=1),t)}var HV=Go.ReactCurrentOwner,Dr=!1;function pr(t,e,n,r){e.child=t===null?RL(e,null,n,r):ud(e,t.child,n,r)}function GP(t,e,n,r,i){n=n.render;var s=e.ref;return $u(e,i),r=uC(t,e,n,r,s,i),n=dC(),t!==null&&!Dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$o(t,e,i)):(zt&&n&&Z_(e),e.flags|=1,pr(t,e,r,i),e.child)}function KP(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!xC(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,i4(t,e,s,r,i)):(t=Kg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Rh,n(o,r)&&t.ref===e.ref)return $o(t,e,i)}return e.flags|=1,t=Ka(s,r),t.ref=e.ref,t.return=e,e.child=t}function i4(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Rh(s,r)&&t.ref===e.ref)if(Dr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Dr=!0);else return e.lanes=t.lanes,$o(t,e,i)}return J1(t,e,n,r,i)}function s4(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nt(_u,qr),qr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Nt(_u,qr),qr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Nt(_u,qr),qr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Nt(_u,qr),qr|=r;return pr(t,e,i,n),e.child}function o4(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function J1(t,e,n,r,i){var s=$r(n)?yc:ir.current;return s=ld(e,s),$u(e,i),n=uC(t,e,n,r,s,i),r=dC(),t!==null&&!Dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$o(t,e,i)):(zt&&r&&Z_(e),e.flags|=1,pr(t,e,n,i),e.child)}function XP(t,e,n,r,i){if($r(n)){var s=!0;Hv(e)}else s=!1;if($u(e,i),e.stateNode===null)Vg(t,e),t4(e,n,r),Y1(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=$i(c):(c=$r(n)?yc:ir.current,c=ld(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&UP(e,o,r,c),ua=!1;var f=e.memoizedState;o.state=f,Xv(e,r,o,i),l=e.memoizedState,a!==r||f!==l||jr.current||ua?(typeof u=="function"&&(X1(e,n,u,r),l=e.memoizedState),(a=ua||zP(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,IL(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Xi(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$i(l):(l=$r(n)?yc:ir.current,l=ld(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&UP(e,o,r,l),ua=!1,f=e.memoizedState,o.state=f,Xv(e,r,o,i);var m=e.memoizedState;a!==d||f!==m||jr.current||ua?(typeof h=="function"&&(X1(e,n,h,r),m=e.memoizedState),(c=ua||zP(e,n,c,r,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Z1(t,e,n,r,s,i)}function Z1(t,e,n,r,i,s){o4(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&OP(e,n,!1),$o(t,e,s);r=e.stateNode,HV.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ud(e,t.child,null,s),e.child=ud(e,null,a,s)):pr(t,e,a,s),e.memoizedState=r.state,i&&OP(e,n,!0),e.child}function a4(t){var e=t.stateNode;e.pendingContext?RP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&RP(t,e.context,!1),oC(t,e.containerInfo)}function YP(t,e,n,r,i){return cd(),eC(i),e.flags|=256,pr(t,e,n,r),e.child}var Q1={dehydrated:null,treeContext:null,retryLane:0};function eS(t){return{baseLanes:t,cachePool:null,transitions:null}}function l4(t,e,n){var r=e.pendingProps,i=Ht.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Nt(Ht,i&1),t===null)return G1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=x0(o,r,0,null),t=uc(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=eS(n),e.memoizedState=Q1,t):pC(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return VV(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ka(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ka(a,s):(s=uc(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?eS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Q1,r}return s=t.child,t=s.sibling,r=Ka(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pC(t,e){return e=x0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Tm(t,e,n,r){return r!==null&&eC(r),ud(e,t.child,null,n),t=pC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function VV(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=gb(Error(oe(422))),Tm(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=x0({mode:"visible",children:r.children},i,0,null),s=uc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ud(e,t.child,null,o),e.child.memoizedState=eS(o),e.memoizedState=Q1,s);if(!(e.mode&1))return Tm(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(oe(419)),r=gb(s,r,void 0),Tm(t,e,o,r)}if(a=(o&t.childLanes)!==0,Dr||a){if(r=Mn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,jo(t,i),ls(r,t,i,-1))}return bC(),r=gb(Error(oe(421))),Tm(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=rW.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ii=Ha(i.nextSibling),li=e,zt=!0,es=null,t!==null&&(xi[Si++]=To,xi[Si++]=Mo,xi[Si++]=wc,To=t.id,Mo=t.overflow,wc=e),e=pC(e,r.children),e.flags|=4096,e)}function qP(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),K1(t.return,e,n)}function vb(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function c4(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(pr(t,e,r.children,n),r=Ht.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qP(t,n,e);else if(t.tag===19)qP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Nt(Ht,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Yv(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),vb(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Yv(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}vb(e,!0,n,null,s);break;case"together":vb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $o(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=Ka(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ka(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function WV(t,e,n){switch(e.tag){case 3:a4(e),cd();break;case 5:DL(e);break;case 1:$r(e.type)&&Hv(e);break;case 4:oC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Nt(Gv,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Nt(Ht,Ht.current&1),e.flags|=128,null):n&e.child.childLanes?l4(t,e,n):(Nt(Ht,Ht.current&1),t=$o(t,e,n),t!==null?t.sibling:null);Nt(Ht,Ht.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return c4(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Nt(Ht,Ht.current),r)break;return null;case 22:case 23:return e.lanes=0,s4(t,e,n)}return $o(t,e,n)}var u4,tS,d4,f4;u4=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tS=function(){};d4=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,rc(Ys.current);var s=null;switch(n){case"input":i=k1(t,i),r=k1(t,r),s=[];break;case"select":i=Yt({},i,{value:void 0}),r=Yt({},r,{value:void 0}),s=[];break;case"textarea":i=E1(t,i),r=E1(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zv)}P1(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ch.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ch.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Mt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};f4=function(t,e,n,r){n!==r&&(e.flags|=4)};function nf(t,e){if(!zt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function GV(t,e,n){var r=e.pendingProps;switch(Q_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(e),null;case 1:return $r(e.type)&&Uv(),qn(e),null;case 3:return r=e.stateNode,dd(),Dt(jr),Dt(ir),lC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,es!==null&&(cS(es),es=null))),tS(t,e),qn(e),null;case 5:aC(e);var i=rc(jh.current);if(n=e.type,t!==null&&e.stateNode!=null)d4(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return qn(e),null}if(t=rc(Ys.current),Pm(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Os]=e,r[Dh]=s,t=(e.mode&1)!==0,n){case"dialog":Mt("cancel",r),Mt("close",r);break;case"iframe":case"object":case"embed":Mt("load",r);break;case"video":case"audio":for(i=0;i<Of.length;i++)Mt(Of[i],r);break;case"source":Mt("error",r);break;case"img":case"image":case"link":Mt("error",r),Mt("load",r);break;case"details":Mt("toggle",r);break;case"input":sP(r,s),Mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Mt("invalid",r);break;case"textarea":aP(r,s),Mt("invalid",r)}P1(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Am(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Am(r.textContent,a,t),i=["children",""+a]):Ch.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Mt("scroll",r)}switch(n){case"input":wm(r),oP(r,s,!0);break;case"textarea":wm(r),lP(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=zv)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=BD(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Os]=e,t[Dh]=r,u4(t,e,!1,!1),e.stateNode=t;e:{switch(o=N1(n,r),n){case"dialog":Mt("cancel",t),Mt("close",t),i=r;break;case"iframe":case"object":case"embed":Mt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Of.length;i++)Mt(Of[i],t);i=r;break;case"source":Mt("error",t),i=r;break;case"img":case"image":case"link":Mt("error",t),Mt("load",t),i=r;break;case"details":Mt("toggle",t),i=r;break;case"input":sP(t,r),i=k1(t,r),Mt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Yt({},r,{value:void 0}),Mt("invalid",t);break;case"textarea":aP(t,r),i=E1(t,r),Mt("invalid",t);break;default:i=r}P1(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?HD(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&zD(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Eh(t,l):typeof l=="number"&&Eh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ch.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Mt("scroll",t):l!=null&&$_(t,s,l,o))}switch(n){case"input":wm(t),oP(t,r,!1);break;case"textarea":wm(t),lP(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qa(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Iu(t,!!r.multiple,s,!1):r.defaultValue!=null&&Iu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=zv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qn(e),null;case 6:if(t&&e.stateNode!=null)f4(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=rc(jh.current),rc(Ys.current),Pm(e)){if(r=e.stateNode,n=e.memoizedProps,r[Os]=e,(s=r.nodeValue!==n)&&(t=li,t!==null))switch(t.tag){case 3:Am(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Am(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Os]=e,e.stateNode=r}return qn(e),null;case 13:if(Dt(Ht),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(zt&&ii!==null&&e.mode&1&&!(e.flags&128))TL(),cd(),e.flags|=98560,s=!1;else if(s=Pm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[Os]=e}else cd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qn(e),s=!1}else es!==null&&(cS(es),es=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ht.current&1?xn===0&&(xn=3):bC())),e.updateQueue!==null&&(e.flags|=4),qn(e),null);case 4:return dd(),tS(t,e),t===null&&Oh(e.stateNode.containerInfo),qn(e),null;case 10:return rC(e.type._context),qn(e),null;case 17:return $r(e.type)&&Uv(),qn(e),null;case 19:if(Dt(Ht),s=e.memoizedState,s===null)return qn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)nf(s,!1);else{if(xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Yv(t),o!==null){for(e.flags|=128,nf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Nt(Ht,Ht.current&1|2),e.child}t=t.sibling}s.tail!==null&&sn()>hd&&(e.flags|=128,r=!0,nf(s,!1),e.lanes=4194304)}else{if(!r)if(t=Yv(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),nf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!zt)return qn(e),null}else 2*sn()-s.renderingStartTime>hd&&n!==1073741824&&(e.flags|=128,r=!0,nf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=sn(),e.sibling=null,n=Ht.current,Nt(Ht,r?n&1|2:n&1),e):(qn(e),null);case 22:case 23:return wC(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qr&1073741824&&(qn(e),e.subtreeFlags&6&&(e.flags|=8192)):qn(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function KV(t,e){switch(Q_(e),e.tag){case 1:return $r(e.type)&&Uv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dd(),Dt(jr),Dt(ir),lC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return aC(e),null;case 13:if(Dt(Ht),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));cd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Dt(Ht),null;case 4:return dd(),null;case 10:return rC(e.type._context),null;case 22:case 23:return wC(),null;case 24:return null;default:return null}}var Mm=!1,er=!1,XV=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function ku(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Jt(t,e,r)}else n.current=null}function nS(t,e,n){try{n()}catch(r){Jt(t,e,r)}}var JP=!1;function YV(t,e){if(F1=$v,t=vL(),J_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(B1={focusedElem:t,selectionRange:n},$v=!1,Ne=e;Ne!==null;)if(e=Ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ne=t;else for(;Ne!==null;){e=Ne;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Xi(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(k){Jt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Ne=t;break}Ne=e.return}return m=JP,JP=!1,m}function rh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&nS(e,n,s)}i=i.next}while(i!==r)}}function w0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function h4(t){var e=t.alternate;e!==null&&(t.alternate=null,h4(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Os],delete e[Dh],delete e[H1],delete e[MV],delete e[RV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function p4(t){return t.tag===5||t.tag===3||t.tag===4}function ZP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||p4(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function iS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zv));else if(r!==4&&(t=t.child,t!==null))for(iS(t,e,n),t=t.sibling;t!==null;)iS(t,e,n),t=t.sibling}function sS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sS(t,e,n),t=t.sibling;t!==null;)sS(t,e,n),t=t.sibling}var In=null,Zi=!1;function na(t,e,n){for(n=n.child;n!==null;)m4(t,e,n),n=n.sibling}function m4(t,e,n){if(Xs&&typeof Xs.onCommitFiberUnmount=="function")try{Xs.onCommitFiberUnmount(d0,n)}catch{}switch(n.tag){case 5:er||ku(n,e);case 6:var r=In,i=Zi;In=null,na(t,e,n),In=r,Zi=i,In!==null&&(Zi?(t=In,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):In.removeChild(n.stateNode));break;case 18:In!==null&&(Zi?(t=In,n=n.stateNode,t.nodeType===8?ub(t.parentNode,n):t.nodeType===1&&ub(t,n),Th(t)):ub(In,n.stateNode));break;case 4:r=In,i=Zi,In=n.stateNode.containerInfo,Zi=!0,na(t,e,n),In=r,Zi=i;break;case 0:case 11:case 14:case 15:if(!er&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&nS(n,e,o),i=i.next}while(i!==r)}na(t,e,n);break;case 1:if(!er&&(ku(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Jt(n,e,a)}na(t,e,n);break;case 21:na(t,e,n);break;case 22:n.mode&1?(er=(r=er)||n.memoizedState!==null,na(t,e,n),er=r):na(t,e,n);break;default:na(t,e,n)}}function QP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new XV),e.forEach(function(r){var i=iW.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Vi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:In=a.stateNode,Zi=!1;break e;case 3:In=a.stateNode.containerInfo,Zi=!0;break e;case 4:In=a.stateNode.containerInfo,Zi=!0;break e}a=a.return}if(In===null)throw Error(oe(160));m4(s,o,i),In=null,Zi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Jt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)g4(e,t),e=e.sibling}function g4(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vi(e,t),ys(t),r&4){try{rh(3,t,t.return),w0(3,t)}catch(g){Jt(t,t.return,g)}try{rh(5,t,t.return)}catch(g){Jt(t,t.return,g)}}break;case 1:Vi(e,t),ys(t),r&512&&n!==null&&ku(n,n.return);break;case 5:if(Vi(e,t),ys(t),r&512&&n!==null&&ku(n,n.return),t.flags&32){var i=t.stateNode;try{Eh(i,"")}catch(g){Jt(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&$D(i,s),N1(a,o);var c=N1(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?HD(i,d):u==="dangerouslySetInnerHTML"?zD(i,d):u==="children"?Eh(i,d):$_(i,u,d,c)}switch(a){case"input":_1(i,s);break;case"textarea":FD(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Iu(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Iu(i,!!s.multiple,s.defaultValue,!0):Iu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Dh]=s}catch(g){Jt(t,t.return,g)}}break;case 6:if(Vi(e,t),ys(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Jt(t,t.return,g)}}break;case 3:if(Vi(e,t),ys(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Th(e.containerInfo)}catch(g){Jt(t,t.return,g)}break;case 4:Vi(e,t),ys(t);break;case 13:Vi(e,t),ys(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(vC=sn())),r&4&&QP(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(er=(c=er)||u,Vi(e,t),er=c):Vi(e,t),ys(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ne=t,u=t.child;u!==null;){for(d=Ne=u;Ne!==null;){switch(f=Ne,h=f.child,f.tag){case 0:case 11:case 14:case 15:rh(4,f,f.return);break;case 1:ku(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Jt(r,n,g)}}break;case 5:ku(f,f.return);break;case 22:if(f.memoizedState!==null){tN(d);continue}}h!==null?(h.return=f,Ne=h):tN(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=UD("display",o))}catch(g){Jt(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Jt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Vi(e,t),ys(t),r&4&&QP(t);break;case 21:break;default:Vi(e,t),ys(t)}}function ys(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(p4(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Eh(i,""),r.flags&=-33);var s=ZP(t);sS(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ZP(t);iS(t,a,o);break;default:throw Error(oe(161))}}catch(l){Jt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qV(t,e,n){Ne=t,v4(t)}function v4(t,e,n){for(var r=(t.mode&1)!==0;Ne!==null;){var i=Ne,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Mm;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||er;a=Mm;var c=er;if(Mm=o,(er=l)&&!c)for(Ne=i;Ne!==null;)o=Ne,l=o.child,o.tag===22&&o.memoizedState!==null?nN(i):l!==null?(l.return=o,Ne=l):nN(i);for(;s!==null;)Ne=s,v4(s),s=s.sibling;Ne=i,Mm=a,er=c}eN(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ne=s):eN(t)}}function eN(t){for(;Ne!==null;){var e=Ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:er||w0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!er)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Xi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&$P(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$P(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Th(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}er||e.flags&512&&rS(e)}catch(f){Jt(e,e.return,f)}}if(e===t){Ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function tN(t){for(;Ne!==null;){var e=Ne;if(e===t){Ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function nN(t){for(;Ne!==null;){var e=Ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{w0(4,e)}catch(l){Jt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Jt(e,i,l)}}var s=e.return;try{rS(e)}catch(l){Jt(e,s,l)}break;case 5:var o=e.return;try{rS(e)}catch(l){Jt(e,o,l)}}}catch(l){Jt(e,e.return,l)}if(e===t){Ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ne=a;break}Ne=e.return}}var JV=Math.ceil,Zv=Go.ReactCurrentDispatcher,mC=Go.ReactCurrentOwner,Oi=Go.ReactCurrentBatchConfig,ut=0,Mn=null,fn=null,Vn=0,qr=0,_u=wl(0),xn=0,zh=null,xc=0,b0=0,gC=0,ih=null,Tr=null,vC=0,hd=1/0,uo=null,Qv=!1,oS=null,Wa=null,Rm=!1,Aa=null,ey=0,sh=0,aS=null,Wg=-1,Gg=0;function mr(){return ut&6?sn():Wg!==-1?Wg:Wg=sn()}function Ga(t){return t.mode&1?ut&2&&Vn!==0?Vn&-Vn:IV.transition!==null?(Gg===0&&(Gg=tL()),Gg):(t=wt,t!==0||(t=window.event,t=t===void 0?16:lL(t.type)),t):1}function ls(t,e,n,r){if(50<sh)throw sh=0,aS=null,Error(oe(185));Pp(t,n,r),(!(ut&2)||t!==Mn)&&(t===Mn&&(!(ut&2)&&(b0|=n),xn===4&&wa(t,Vn)),Fr(t,r),n===1&&ut===0&&!(e.mode&1)&&(hd=sn()+500,g0&&bl()))}function Fr(t,e){var n=t.callbackNode;IH(t,e);var r=jv(t,t===Mn?Vn:0);if(r===0)n!==null&&dP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&dP(n),e===1)t.tag===0?OV(rN.bind(null,t)):AL(rN.bind(null,t)),NV(function(){!(ut&6)&&bl()}),n=null;else{switch(nL(r)){case 1:n=H_;break;case 4:n=QD;break;case 16:n=Lv;break;case 536870912:n=eL;break;default:n=Lv}n=C4(n,y4.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function y4(t,e){if(Wg=-1,Gg=0,ut&6)throw Error(oe(327));var n=t.callbackNode;if(Fu()&&t.callbackNode!==n)return null;var r=jv(t,t===Mn?Vn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ty(t,r);else{e=r;var i=ut;ut|=2;var s=b4();(Mn!==t||Vn!==e)&&(uo=null,hd=sn()+500,cc(t,e));do try{eW();break}catch(a){w4(t,a)}while(!0);nC(),Zv.current=s,ut=i,fn!==null?e=0:(Mn=null,Vn=0,e=xn)}if(e!==0){if(e===2&&(i=I1(t),i!==0&&(r=i,e=lS(t,i))),e===1)throw n=zh,cc(t,0),wa(t,r),Fr(t,sn()),n;if(e===6)wa(t,r);else{if(i=t.current.alternate,!(r&30)&&!ZV(i)&&(e=ty(t,r),e===2&&(s=I1(t),s!==0&&(r=s,e=lS(t,s))),e===1))throw n=zh,cc(t,0),wa(t,r),Fr(t,sn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:Gl(t,Tr,uo);break;case 3:if(wa(t,r),(r&130023424)===r&&(e=vC+500-sn(),10<e)){if(jv(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){mr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=U1(Gl.bind(null,t,Tr,uo),e);break}Gl(t,Tr,uo);break;case 4:if(wa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-as(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=sn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JV(r/1960))-r,10<r){t.timeoutHandle=U1(Gl.bind(null,t,Tr,uo),r);break}Gl(t,Tr,uo);break;case 5:Gl(t,Tr,uo);break;default:throw Error(oe(329))}}}return Fr(t,sn()),t.callbackNode===n?y4.bind(null,t):null}function lS(t,e){var n=ih;return t.current.memoizedState.isDehydrated&&(cc(t,e).flags|=256),t=ty(t,e),t!==2&&(e=Tr,Tr=n,e!==null&&cS(e)),t}function cS(t){Tr===null?Tr=t:Tr.push.apply(Tr,t)}function ZV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!cs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wa(t,e){for(e&=~gC,e&=~b0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-as(e),r=1<<n;t[n]=-1,e&=~r}}function rN(t){if(ut&6)throw Error(oe(327));Fu();var e=jv(t,0);if(!(e&1))return Fr(t,sn()),null;var n=ty(t,e);if(t.tag!==0&&n===2){var r=I1(t);r!==0&&(e=r,n=lS(t,r))}if(n===1)throw n=zh,cc(t,0),wa(t,e),Fr(t,sn()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gl(t,Tr,uo),Fr(t,sn()),null}function yC(t,e){var n=ut;ut|=1;try{return t(e)}finally{ut=n,ut===0&&(hd=sn()+500,g0&&bl())}}function Sc(t){Aa!==null&&Aa.tag===0&&!(ut&6)&&Fu();var e=ut;ut|=1;var n=Oi.transition,r=wt;try{if(Oi.transition=null,wt=1,t)return t()}finally{wt=r,Oi.transition=n,ut=e,!(ut&6)&&bl()}}function wC(){qr=_u.current,Dt(_u)}function cc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,PV(n)),fn!==null)for(n=fn.return;n!==null;){var r=n;switch(Q_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Uv();break;case 3:dd(),Dt(jr),Dt(ir),lC();break;case 5:aC(r);break;case 4:dd();break;case 13:Dt(Ht);break;case 19:Dt(Ht);break;case 10:rC(r.type._context);break;case 22:case 23:wC()}n=n.return}if(Mn=t,fn=t=Ka(t.current,null),Vn=qr=e,xn=0,zh=null,gC=b0=xc=0,Tr=ih=null,nc!==null){for(e=0;e<nc.length;e++)if(n=nc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}nc=null}return t}function w4(t,e){do{var n=fn;try{if(nC(),Ug.current=Jv,qv){for(var r=Xt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qv=!1}if(bc=0,Nn=gn=Xt=null,nh=!1,$h=0,mC.current=null,n===null||n.return===null){xn=1,zh=e,fn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Vn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=VP(o);if(h!==null){h.flags&=-257,WP(h,o,a,s,e),h.mode&1&&HP(s,c,e),e=h,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){HP(s,c,e),bC();break e}l=Error(oe(426))}}else if(zt&&a.mode&1){var y=VP(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),WP(y,o,a,s,e),eC(fd(l,a));break e}}s=l=fd(l,a),xn!==4&&(xn=2),ih===null?ih=[s]:ih.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=n4(s,l,e);jP(s,v);break e;case 1:a=l;var w=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Wa===null||!Wa.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=r4(s,a,e);jP(s,k);break e}}s=s.return}while(s!==null)}S4(n)}catch(_){e=_,fn===n&&n!==null&&(fn=n=n.return);continue}break}while(!0)}function b4(){var t=Zv.current;return Zv.current=Jv,t===null?Jv:t}function bC(){(xn===0||xn===3||xn===2)&&(xn=4),Mn===null||!(xc&268435455)&&!(b0&268435455)||wa(Mn,Vn)}function ty(t,e){var n=ut;ut|=2;var r=b4();(Mn!==t||Vn!==e)&&(uo=null,cc(t,e));do try{QV();break}catch(i){w4(t,i)}while(!0);if(nC(),ut=n,Zv.current=r,fn!==null)throw Error(oe(261));return Mn=null,Vn=0,xn}function QV(){for(;fn!==null;)x4(fn)}function eW(){for(;fn!==null&&!CH();)x4(fn)}function x4(t){var e=_4(t.alternate,t,qr);t.memoizedProps=t.pendingProps,e===null?S4(t):fn=e,mC.current=null}function S4(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=KV(n,e),n!==null){n.flags&=32767,fn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xn=6,fn=null;return}}else if(n=GV(n,e,qr),n!==null){fn=n;return}if(e=e.sibling,e!==null){fn=e;return}fn=e=t}while(e!==null);xn===0&&(xn=5)}function Gl(t,e,n){var r=wt,i=Oi.transition;try{Oi.transition=null,wt=1,tW(t,e,n,r)}finally{Oi.transition=i,wt=r}return null}function tW(t,e,n,r){do Fu();while(Aa!==null);if(ut&6)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(DH(t,s),t===Mn&&(fn=Mn=null,Vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rm||(Rm=!0,C4(Lv,function(){return Fu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Oi.transition,Oi.transition=null;var o=wt;wt=1;var a=ut;ut|=4,mC.current=null,YV(t,n),g4(n,t),xV(B1),$v=!!F1,B1=F1=null,t.current=n,qV(n),EH(),ut=a,wt=o,Oi.transition=s}else t.current=n;if(Rm&&(Rm=!1,Aa=t,ey=i),s=t.pendingLanes,s===0&&(Wa=null),NH(n.stateNode),Fr(t,sn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Qv)throw Qv=!1,t=oS,oS=null,t;return ey&1&&t.tag!==0&&Fu(),s=t.pendingLanes,s&1?t===aS?sh++:(sh=0,aS=t):sh=0,bl(),null}function Fu(){if(Aa!==null){var t=nL(ey),e=Oi.transition,n=wt;try{if(Oi.transition=null,wt=16>t?16:t,Aa===null)var r=!1;else{if(t=Aa,Aa=null,ey=0,ut&6)throw Error(oe(331));var i=ut;for(ut|=4,Ne=t.current;Ne!==null;){var s=Ne,o=s.child;if(Ne.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ne=c;Ne!==null;){var u=Ne;switch(u.tag){case 0:case 11:case 15:rh(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ne=d;else for(;Ne!==null;){u=Ne;var f=u.sibling,h=u.return;if(h4(u),u===c){Ne=null;break}if(f!==null){f.return=h,Ne=f;break}Ne=h}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ne=o;else e:for(;Ne!==null;){if(s=Ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:rh(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Ne=v;break e}Ne=s.return}}var w=t.current;for(Ne=w;Ne!==null;){o=Ne;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ne=b;else e:for(o=w;Ne!==null;){if(a=Ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:w0(9,a)}}catch(_){Jt(a,a.return,_)}if(a===o){Ne=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,Ne=k;break e}Ne=a.return}}if(ut=i,bl(),Xs&&typeof Xs.onPostCommitFiberRoot=="function")try{Xs.onPostCommitFiberRoot(d0,t)}catch{}r=!0}return r}finally{wt=n,Oi.transition=e}}return!1}function iN(t,e,n){e=fd(n,e),e=n4(t,e,1),t=Va(t,e,1),e=mr(),t!==null&&(Pp(t,1,e),Fr(t,e))}function Jt(t,e,n){if(t.tag===3)iN(t,t,n);else for(;e!==null;){if(e.tag===3){iN(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wa===null||!Wa.has(r))){t=fd(n,t),t=r4(e,t,1),e=Va(e,t,1),t=mr(),e!==null&&(Pp(e,1,t),Fr(e,t));break}}e=e.return}}function nW(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mr(),t.pingedLanes|=t.suspendedLanes&n,Mn===t&&(Vn&n)===n&&(xn===4||xn===3&&(Vn&130023424)===Vn&&500>sn()-vC?cc(t,0):gC|=n),Fr(t,e)}function k4(t,e){e===0&&(t.mode&1?(e=Sm,Sm<<=1,!(Sm&130023424)&&(Sm=4194304)):e=1);var n=mr();t=jo(t,e),t!==null&&(Pp(t,e,n),Fr(t,n))}function rW(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),k4(t,n)}function iW(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),k4(t,n)}var _4;_4=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jr.current)Dr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dr=!1,WV(t,e,n);Dr=!!(t.flags&131072)}else Dr=!1,zt&&e.flags&1048576&&PL(e,Wv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vg(t,e),t=e.pendingProps;var i=ld(e,ir.current);$u(e,n),i=uC(null,e,r,t,i,n);var s=dC();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$r(r)?(s=!0,Hv(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,sC(e),i.updater=y0,e.stateNode=i,i._reactInternals=e,Y1(e,r,t,n),e=Z1(null,e,r,!0,s,n)):(e.tag=0,zt&&s&&Z_(e),pr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=oW(r),t=Xi(r,t),i){case 0:e=J1(null,e,r,t,n);break e;case 1:e=XP(null,e,r,t,n);break e;case 11:e=GP(null,e,r,t,n);break e;case 14:e=KP(null,e,r,Xi(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),J1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),XP(t,e,r,i,n);case 3:e:{if(a4(e),t===null)throw Error(oe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,IL(t,e),Xv(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=fd(Error(oe(423)),e),e=YP(t,e,r,n,i);break e}else if(r!==i){i=fd(Error(oe(424)),e),e=YP(t,e,r,n,i);break e}else for(ii=Ha(e.stateNode.containerInfo.firstChild),li=e,zt=!0,es=null,n=RL(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cd(),r===i){e=$o(t,e,n);break e}pr(t,e,r,n)}e=e.child}return e;case 5:return DL(e),t===null&&G1(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,z1(r,i)?o=null:s!==null&&z1(r,s)&&(e.flags|=32),o4(t,e),pr(t,e,o,n),e.child;case 6:return t===null&&G1(e),null;case 13:return l4(t,e,n);case 4:return oC(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ud(e,null,r,n):pr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),GP(t,e,r,i,n);case 7:return pr(t,e,e.pendingProps,n),e.child;case 8:return pr(t,e,e.pendingProps.children,n),e.child;case 12:return pr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Nt(Gv,r._currentValue),r._currentValue=o,s!==null)if(cs(s.value,o)){if(s.children===i.children&&!jr.current){e=$o(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ro(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),K1(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),K1(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}pr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,$u(e,n),i=$i(i),r=r(i),e.flags|=1,pr(t,e,r,n),e.child;case 14:return r=e.type,i=Xi(r,e.pendingProps),i=Xi(r.type,i),KP(t,e,r,i,n);case 15:return i4(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xi(r,i),Vg(t,e),e.tag=1,$r(r)?(t=!0,Hv(e)):t=!1,$u(e,n),t4(e,r,i),Y1(e,r,i,n),Z1(null,e,r,!0,t,n);case 19:return c4(t,e,n);case 22:return s4(t,e,n)}throw Error(oe(156,e.tag))};function C4(t,e){return ZD(t,e)}function sW(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ai(t,e,n,r){return new sW(t,e,n,r)}function xC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oW(t){if(typeof t=="function")return xC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===B_)return 11;if(t===z_)return 14}return 2}function Ka(t,e){var n=t.alternate;return n===null?(n=Ai(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kg(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")xC(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case pu:return uc(n.children,i,s,e);case F_:o=8,i|=8;break;case w1:return t=Ai(12,n,e,i|2),t.elementType=w1,t.lanes=s,t;case b1:return t=Ai(13,n,e,i),t.elementType=b1,t.lanes=s,t;case x1:return t=Ai(19,n,e,i),t.elementType=x1,t.lanes=s,t;case DD:return x0(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case OD:o=10;break e;case ID:o=9;break e;case B_:o=11;break e;case z_:o=14;break e;case ca:o=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=Ai(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function uc(t,e,n,r){return t=Ai(7,t,r,e),t.lanes=n,t}function x0(t,e,n,r){return t=Ai(22,t,r,e),t.elementType=DD,t.lanes=n,t.stateNode={isHidden:!1},t}function yb(t,e,n){return t=Ai(6,t,null,e),t.lanes=n,t}function wb(t,e,n){return e=Ai(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function aW(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qw(0),this.expirationTimes=Qw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function SC(t,e,n,r,i,s,o,a,l){return t=new aW(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ai(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sC(s),t}function lW(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function E4(t){if(!t)return el;t=t._reactInternals;e:{if(Fc(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($r(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if($r(n))return EL(t,n,e)}return e}function A4(t,e,n,r,i,s,o,a,l){return t=SC(n,r,!0,t,i,s,o,a,l),t.context=E4(null),n=t.current,r=mr(),i=Ga(n),s=Ro(r,i),s.callback=e??null,Va(n,s,i),t.current.lanes=i,Pp(t,i,r),Fr(t,r),t}function S0(t,e,n,r){var i=e.current,s=mr(),o=Ga(i);return n=E4(n),e.context===null?e.context=n:e.pendingContext=n,e=Ro(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Va(i,e,o),t!==null&&(ls(t,i,o,s),zg(t,i,o)),o}function ny(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sN(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kC(t,e){sN(t,e),(t=t.alternate)&&sN(t,e)}function cW(){return null}var P4=typeof reportError=="function"?reportError:function(t){console.error(t)};function _C(t){this._internalRoot=t}k0.prototype.render=_C.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));S0(t,e,null,null)};k0.prototype.unmount=_C.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sc(function(){S0(null,t,null,null)}),e[Lo]=null}};function k0(t){this._internalRoot=t}k0.prototype.unstable_scheduleHydration=function(t){if(t){var e=sL();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ya.length&&e!==0&&e<ya[n].priority;n++);ya.splice(n,0,t),n===0&&aL(t)}};function CC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function oN(){}function uW(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ny(o);s.call(c)}}var o=A4(e,r,t,0,null,!1,!1,"",oN);return t._reactRootContainer=o,t[Lo]=o.current,Oh(t.nodeType===8?t.parentNode:t),Sc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=ny(l);a.call(c)}}var l=SC(t,0,!1,null,null,!1,!1,"",oN);return t._reactRootContainer=l,t[Lo]=l.current,Oh(t.nodeType===8?t.parentNode:t),Sc(function(){S0(e,l,n,r)}),l}function C0(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ny(o);a.call(l)}}S0(e,o,t,i)}else o=uW(n,e,t,i,r);return ny(o)}rL=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Rf(e.pendingLanes);n!==0&&(V_(e,n|1),Fr(e,sn()),!(ut&6)&&(hd=sn()+500,bl()))}break;case 13:Sc(function(){var r=jo(t,1);if(r!==null){var i=mr();ls(r,t,1,i)}}),kC(t,1)}};W_=function(t){if(t.tag===13){var e=jo(t,134217728);if(e!==null){var n=mr();ls(e,t,134217728,n)}kC(t,134217728)}};iL=function(t){if(t.tag===13){var e=Ga(t),n=jo(t,e);if(n!==null){var r=mr();ls(n,t,e,r)}kC(t,e)}};sL=function(){return wt};oL=function(t,e){var n=wt;try{return wt=t,e()}finally{wt=n}};M1=function(t,e,n){switch(e){case"input":if(_1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=m0(r);if(!i)throw Error(oe(90));jD(r),_1(r,i)}}}break;case"textarea":FD(t,n);break;case"select":e=n.value,e!=null&&Iu(t,!!n.multiple,e,!1)}};GD=yC;KD=Sc;var dW={usingClientEntryPoint:!1,Events:[Tp,yu,m0,VD,WD,yC]},rf={findFiberByHostInstance:tc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fW={bundleType:rf.bundleType,version:rf.version,rendererPackageName:rf.rendererPackageName,rendererConfig:rf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Go.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qD(t),t===null?null:t.stateNode},findFiberByHostInstance:rf.findFiberByHostInstance||cW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Om=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Om.isDisabled&&Om.supportsFiber)try{d0=Om.inject(fW),Xs=Om}catch{}}hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dW;hi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!CC(e))throw Error(oe(200));return lW(t,e,null,n)};hi.createRoot=function(t,e){if(!CC(t))throw Error(oe(299));var n=!1,r="",i=P4;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=SC(t,1,!1,null,null,n,!1,r,i),t[Lo]=e.current,Oh(t.nodeType===8?t.parentNode:t),new _C(e)};hi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=qD(e),t=t===null?null:t.stateNode,t};hi.flushSync=function(t){return Sc(t)};hi.hydrate=function(t,e,n){if(!_0(e))throw Error(oe(200));return C0(null,t,e,!0,n)};hi.hydrateRoot=function(t,e,n){if(!CC(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=P4;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=A4(e,null,t,1,n??null,i,!1,s,o),t[Lo]=e.current,Oh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new k0(e)};hi.render=function(t,e,n){if(!_0(e))throw Error(oe(200));return C0(null,t,e,!1,n)};hi.unmountComponentAtNode=function(t){if(!_0(t))throw Error(oe(40));return t._reactRootContainer?(Sc(function(){C0(null,null,t,!1,function(){t._reactRootContainer=null,t[Lo]=null})}),!0):!1};hi.unstable_batchedUpdates=yC;hi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_0(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return C0(t,e,n,!1,r)};hi.version="18.3.1-next-f1338f8080-20240426";function N4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N4)}catch(t){console.error(t)}}N4(),ND.exports=hi;var xl=ND.exports;const hW=jc(xl);var T4,aN=xl;T4=aN.createRoot,aN.hydrateRoot;function ge(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function ms(t,e=[]){let n=[];function r(s,o){const a=x.createContext(o),l=n.length;n=[...n,o];const c=d=>{var v;const{scope:f,children:h,...m}=d,g=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,y=x.useMemo(()=>m,Object.values(m));return p.jsx(g.Provider,{value:y,children:h})};c.displayName=s+"Provider";function u(d,f){var g;const h=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,m=x.useContext(h);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>x.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,pW(i,...e)]}function pW(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function lN(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function E0(...t){return e=>{let n=!1;const r=t.map(i=>{const s=lN(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():lN(t[i],null)}}}}function it(...t){return x.useCallback(E0(...t),t)}function pd(t){const e=mW(t),n=x.forwardRef((r,i)=>{const{children:s,...o}=r,a=x.Children.toArray(s),l=a.find(vW);if(l){const c=l.props.children,u=a.map(d=>d===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:d);return p.jsx(e,{...o,ref:i,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return p.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function mW(t){const e=x.forwardRef((n,r)=>{const{children:i,...s}=n;if(x.isValidElement(i)){const o=wW(i),a=yW(s,i.props);return i.type!==x.Fragment&&(a.ref=r?E0(r,o):o),x.cloneElement(i,a)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var gW=Symbol("radix.slottable");function vW(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===gW}function yW(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function wW(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Rp(t){const e=t+"CollectionProvider",[n,r]=ms(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:v}=g,w=Ot.useRef(null),b=Ot.useRef(new Map).current;return p.jsx(i,{scope:y,itemMap:b,collectionRef:w,children:v})};o.displayName=e;const a=t+"CollectionSlot",l=pd(a),c=Ot.forwardRef((g,y)=>{const{scope:v,children:w}=g,b=s(a,v),k=it(y,b.collectionRef);return p.jsx(l,{ref:k,children:w})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=pd(u),h=Ot.forwardRef((g,y)=>{const{scope:v,children:w,...b}=g,k=Ot.useRef(null),_=it(y,k),E=s(u,v);return Ot.useEffect(()=>(E.itemMap.set(k,{ref:k,...b}),()=>void E.itemMap.delete(k))),p.jsx(f,{[d]:"",ref:_,children:w})});h.displayName=u;function m(g){const y=s(t+"CollectionConsumer",g);return Ot.useCallback(()=>{const w=y.collectionRef.current;if(!w)return[];const b=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((E,C)=>b.indexOf(E.ref.current)-b.indexOf(C.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},m,r]}var Gn=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},bW=i0[" useId ".trim().toString()]||(()=>{}),xW=0;function tl(t){const[e,n]=x.useState(bW());return Gn(()=>{n(r=>r??String(xW++))},[t]),e?`radix-${e}`:""}var SW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ze=SW.reduce((t,e)=>{const n=pd(`Primitive.${e}`),r=x.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function EC(t,e){t&&xl.flushSync(()=>t.dispatchEvent(e))}function zr(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var kW=i0[" useInsertionEffect ".trim().toString()]||Gn;function Fo({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=_W({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const u=x.useRef(t!==void 0);x.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=x.useCallback(u=>{var d;if(a){const f=CW(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else s(u)},[a,t,s,o]);return[l,c]}function _W({defaultProp:t,onChange:e}){const[n,r]=x.useState(t),i=x.useRef(n),s=x.useRef(e);return kW(()=>{s.current=e},[e]),x.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function CW(t){return typeof t=="function"}var EW=x.createContext(void 0);function Op(t){const e=x.useContext(EW);return t||e||"ltr"}var bb="rovingFocusGroup.onEntryFocus",AW={bubbles:!1,cancelable:!0},Ip="RovingFocusGroup",[uS,M4,PW]=Rp(Ip),[NW,A0]=ms(Ip,[PW]),[TW,MW]=NW(Ip),R4=x.forwardRef((t,e)=>p.jsx(uS.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(uS.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(RW,{...t,ref:e})})}));R4.displayName=Ip;var RW=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=x.useRef(null),h=it(e,f),m=Op(s),[g,y]=Fo({prop:o,defaultProp:a??null,onChange:l,caller:Ip}),[v,w]=x.useState(!1),b=zr(c),k=M4(n),_=x.useRef(!1),[E,C]=x.useState(0);return x.useEffect(()=>{const P=f.current;if(P)return P.addEventListener(bb,b),()=>P.removeEventListener(bb,b)},[b]),p.jsx(TW,{scope:n,orientation:r,dir:m,loop:i,currentTabStopId:g,onItemFocus:x.useCallback(P=>y(P),[y]),onItemShiftTab:x.useCallback(()=>w(!0),[]),onFocusableItemAdd:x.useCallback(()=>C(P=>P+1),[]),onFocusableItemRemove:x.useCallback(()=>C(P=>P-1),[]),children:p.jsx(ze.div,{tabIndex:v||E===0?-1:0,"data-orientation":r,...d,ref:h,style:{outline:"none",...t.style},onMouseDown:ge(t.onMouseDown,()=>{_.current=!0}),onFocus:ge(t.onFocus,P=>{const M=!_.current;if(P.target===P.currentTarget&&M&&!v){const O=new CustomEvent(bb,AW);if(P.currentTarget.dispatchEvent(O),!O.defaultPrevented){const I=k().filter(Z=>Z.focusable),D=I.find(Z=>Z.active),G=I.find(Z=>Z.id===g),X=[D,G,...I].filter(Boolean).map(Z=>Z.ref.current);D4(X,u)}}_.current=!1}),onBlur:ge(t.onBlur,()=>w(!1))})})}),O4="RovingFocusGroupItem",I4=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,l=tl(),c=s||l,u=MW(O4,n),d=u.currentTabStopId===c,f=M4(n),{onFocusableItemAdd:h,onFocusableItemRemove:m,currentTabStopId:g}=u;return x.useEffect(()=>{if(r)return h(),()=>m()},[r,h,m]),p.jsx(uS.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:p.jsx(ze.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:ge(t.onMouseDown,y=>{r?u.onItemFocus(c):y.preventDefault()}),onFocus:ge(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:ge(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const v=DW(y,u.orientation,u.dir);if(v!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let b=f().filter(k=>k.focusable).map(k=>k.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const k=b.indexOf(y.currentTarget);b=u.loop?LW(b,k+1):b.slice(k+1)}setTimeout(()=>D4(b))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:g!=null}):o})})});I4.displayName=O4;var OW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function IW(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function DW(t,e,n){const r=IW(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return OW[r]}function D4(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function LW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var L4=R4,j4=I4;function jW(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var Ko=t=>{const{present:e,children:n}=t,r=$W(e),i=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),s=it(r.ref,FW(i));return typeof n=="function"||r.isPresent?x.cloneElement(i,{ref:s}):null};Ko.displayName="Presence";function $W(t){const[e,n]=x.useState(),r=x.useRef(null),i=x.useRef(t),s=x.useRef("none"),o=t?"mounted":"unmounted",[a,l]=jW(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const c=Im(r.current);s.current=a==="mounted"?c:"none"},[a]),Gn(()=>{const c=r.current,u=i.current;if(u!==t){const f=s.current,h=Im(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Gn(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=h=>{const g=Im(r.current).includes(h.animationName);if(h.target===e&&g&&(l("ANIMATION_END"),!i.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=h=>{h.target===e&&(s.current=Im(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:x.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Im(t){return(t==null?void 0:t.animationName)||"none"}function FW(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var P0="Tabs",[BW,bme]=ms(P0,[A0]),$4=A0(),[zW,AC]=BW(P0),F4=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=Op(a),[d,f]=Fo({prop:r,onChange:i,defaultProp:s??"",caller:P0});return p.jsx(zW,{scope:n,baseId:tl(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:p.jsx(ze.div,{dir:u,"data-orientation":o,...c,ref:e})})});F4.displayName=P0;var B4="TabsList",z4=x.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=AC(B4,n),o=$4(n);return p.jsx(L4,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:p.jsx(ze.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});z4.displayName=B4;var U4="TabsTrigger",Xg=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=AC(U4,n),a=$4(n),l=V4(o.baseId,r),c=W4(o.baseId,r),u=r===o.value;return p.jsx(j4,{asChild:!0,...a,focusable:!i,active:u,children:p.jsx(ze.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:ge(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:ge(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:ge(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!i&&d&&o.onValueChange(r)})})})});Xg.displayName=U4;var H4="TabsContent",Yg=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=AC(H4,n),l=V4(a.baseId,r),c=W4(a.baseId,r),u=r===a.value,d=x.useRef(u);return x.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),p.jsx(Ko,{present:i||u,children:({present:f})=>p.jsx(ze.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});Yg.displayName=H4;function V4(t,e){return`${t}-trigger-${e}`}function W4(t,e){return`${t}-content-${e}`}const If={},cN=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,uN=t=>"init"in t,xb=t=>!!t.write,dN=t=>"v"in t||"e"in t,Dm=t=>{if("e"in t)throw t.e;if((If?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},ry=new WeakMap,fN=t=>{var e;return iy(t)&&!!((e=ry.get(t))!=null&&e[0])},UW=t=>{const e=ry.get(t);e!=null&&e[0]&&(e[0]=!1,e[1].forEach(n=>n()))},G4=(t,e)=>{let n=ry.get(t);if(!n){n=[!0,new Set],ry.set(t,n);const r=()=>{n[0]=!1};t.then(r,r)}n[1].add(e)},iy=t=>typeof(t==null?void 0:t.then)=="function",K4=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},Sb=(t,e,n)=>{const r=n(t),i="v"in r,s=r.v;if(iy(e))for(const o of r.d.keys())K4(t,e,n(o));r.v=e,delete r.e,(!i||!Object.is(s,r.v))&&(++r.n,iy(s)&&UW(s))},hN=(t,e,n)=>{var r;const i=new Set;for(const s of((r=n.get(t))==null?void 0:r.t)||[])n.has(s)&&i.add(s);for(const s of e.p)i.add(s);return i},HW=()=>{const t=new Set,e=()=>{t.forEach(n=>n())};return e.add=n=>(t.add(n),()=>{t.delete(n)}),e},kb=()=>{const t={},e=new WeakMap,n=r=>{var i,s;(i=e.get(t))==null||i.forEach(o=>o(r)),(s=e.get(r))==null||s.forEach(o=>o())};return n.add=(r,i)=>{const s=r||t,o=(e.has(s)?e:e.set(s,new Set)).get(s);return o.add(i),()=>{o==null||o.delete(i),o.size||e.delete(s)}},n},VW=t=>(t.c||(t.c=kb()),t.m||(t.m=kb()),t.u||(t.u=kb()),t.f||(t.f=HW()),t),WW=Symbol(),GW=(t=new WeakMap,e=new WeakMap,n=new WeakMap,r=new Set,i=new Set,s=new Set,o={},a=(f,...h)=>f.read(...h),l=(f,...h)=>f.write(...h),c=(f,h)=>{var m;return(m=f.unstable_onInit)==null?void 0:m.call(f,h)},u=(f,h)=>{var m;return(m=f.onMount)==null?void 0:m.call(f,h)},...d)=>{const f=d[0]||(C=>{if((If?"production":void 0)!=="production"&&!C)throw new Error("Atom is undefined or null");let P=t.get(C);return P||(P={d:new Map,p:new Set,n:0},t.set(C,P),c==null||c(C,E)),P}),h=d[1]||(()=>{const C=[],P=M=>{try{M()}catch(O){C.push(O)}};do{o.f&&P(o.f);const M=new Set,O=M.add.bind(M);r.forEach(I=>{var D;return(D=e.get(I))==null?void 0:D.l.forEach(O)}),r.clear(),s.forEach(O),s.clear(),i.forEach(O),i.clear(),M.forEach(P),r.size&&m()}while(r.size||s.size||i.size);if(C.length)throw new AggregateError(C)}),m=d[2]||(()=>{const C=[],P=new WeakSet,M=new WeakSet,O=Array.from(r);for(;O.length;){const I=O[O.length-1],D=f(I);if(M.has(I)){O.pop();continue}if(P.has(I)){if(n.get(I)===D.n)C.push([I,D]);else if((If?"production":void 0)!=="production"&&n.has(I))throw new Error("[Bug] invalidated atom exists");M.add(I),O.pop();continue}P.add(I);for(const G of hN(I,D,e))P.has(G)||O.push(G)}for(let I=C.length-1;I>=0;--I){const[D,G]=C[I];let U=!1;for(const X of G.d.keys())if(X!==D&&r.has(X)){U=!0;break}U&&(g(D),w(D)),n.delete(D)}}),g=d[3]||(C=>{var P;const M=f(C);if(dN(M)&&(e.has(C)&&n.get(C)!==M.n||Array.from(M.d).every(([te,H])=>g(te).n===H)))return M;M.d.clear();let O=!0;const I=()=>{e.has(C)&&(w(C),m(),h())},D=te=>{var H;if(cN(C,te)){const ne=f(te);if(!dN(ne))if(uN(te))Sb(te,te.init,f);else throw new Error("no atom init");return Dm(ne)}const $=g(te);try{return Dm($)}finally{M.d.set(te,$.n),fN(M.v)&&K4(C,M.v,$),(H=e.get(te))==null||H.t.add(C),O||I()}};let G,U;const X={get signal(){return G||(G=new AbortController),G.signal},get setSelf(){return(If?"production":void 0)!=="production"&&!xb(C)&&console.warn("setSelf function cannot be used with read-only atom"),!U&&xb(C)&&(U=(...te)=>{if((If?"production":void 0)!=="production"&&O&&console.warn("setSelf function cannot be called in sync"),!O)try{return v(C,...te)}finally{m(),h()}}),U}},Z=M.n;try{const te=a(C,D,X);return Sb(C,te,f),iy(te)&&(G4(te,()=>G==null?void 0:G.abort()),te.then(I,I)),M}catch(te){return delete M.v,M.e=te,++M.n,M}finally{O=!1,Z!==M.n&&n.get(C)===Z&&(n.set(C,M.n),r.add(C),(P=o.c)==null||P.call(o,C))}}),y=d[4]||(C=>{const P=[C];for(;P.length;){const M=P.pop(),O=f(M);for(const I of hN(M,O,e)){const D=f(I);n.set(I,D.n),P.push(I)}}}),v=d[5]||((C,...P)=>{let M=!0;const O=D=>Dm(g(D)),I=(D,...G)=>{var U;const X=f(D);try{if(cN(C,D)){if(!uN(D))throw new Error("atom not writable");const Z=X.n,te=G[0];Sb(D,te,f),w(D),Z!==X.n&&(r.add(D),(U=o.c)==null||U.call(o,D),y(D));return}else return v(D,...G)}finally{M||(m(),h())}};try{return l(C,O,I,...P)}finally{M=!1}}),w=d[6]||(C=>{var P;const M=f(C),O=e.get(C);if(O&&!fN(M.v)){for(const[I,D]of M.d)if(!O.d.has(I)){const G=f(I);b(I).t.add(C),O.d.add(I),D!==G.n&&(r.add(I),(P=o.c)==null||P.call(o,I),y(I))}for(const I of O.d||[])if(!M.d.has(I)){O.d.delete(I);const D=k(I);D==null||D.t.delete(C)}}}),b=d[7]||(C=>{var P;const M=f(C);let O=e.get(C);if(!O){g(C);for(const I of M.d.keys())b(I).t.add(C);if(O={l:new Set,d:new Set(M.d.keys()),t:new Set},e.set(C,O),(P=o.m)==null||P.call(o,C),xb(C)){const I=()=>{let D=!0;const G=(...U)=>{try{return v(C,...U)}finally{D||(m(),h())}};try{const U=u(C,G);U&&(O.u=()=>{D=!0;try{U()}finally{D=!1}})}finally{D=!1}};i.add(I)}}return O}),k=d[8]||(C=>{var P;const M=f(C);let O=e.get(C);if(O&&!O.l.size&&!Array.from(O.t).some(I=>{var D;return(D=e.get(I))==null?void 0:D.d.has(C)})){O.u&&s.add(O.u),O=void 0,e.delete(C),(P=o.u)==null||P.call(o,C);for(const I of M.d.keys()){const D=k(I);D==null||D.t.delete(C)}return}return O}),_=[t,e,n,r,i,s,o,a,l,c,u,f,h,m,g,y,v,w,b,k],E={get:C=>Dm(g(C)),set:(C,...P)=>{try{return v(C,...P)}finally{m(),h()}},sub:(C,P)=>{const O=b(C).l;return O.add(P),h(),()=>{O.delete(P),k(C),h()}}};return Object.defineProperty(E,WW,{value:_}),E},X4=GW,KW=VW,pN=G4,PC={};let XW=0;function ce(t,e){const n=`atom${++XW}`,r={toString(){return(PC?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?r.read=t:(r.init=t,r.read=YW,r.write=qW),e&&(r.write=e),r}function YW(t){return t(this)}function qW(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const JW=()=>{let t=0;const e=KW({}),n=new WeakMap,r=new WeakMap,i=X4(n,r,void 0,void 0,void 0,void 0,e,void 0,(a,l,c,...u)=>t?c(a,...u):a.write(l,c,...u)),s=new Set;return e.m.add(void 0,a=>{s.add(a);const l=n.get(a);l.m=r.get(a)}),e.u.add(void 0,a=>{s.delete(a);const l=n.get(a);delete l.m}),Object.assign(i,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),n),dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:a=>{const l={read:()=>null,write:(c,u)=>{++t;try{for(const[d,f]of a)"init"in d&&u(d,f)}finally{--t}}};i.set(l)}})};function NC(){return(PC?"production":void 0)!=="production"?JW():X4()}let sf;function ZW(){return sf||(sf=NC(),(PC?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=sf),globalThis.__JOTAI_DEFAULT_STORE__!==sf&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),sf}const QW={},Y4=x.createContext(void 0);function q4(t){return x.useContext(Y4)||ZW()}function eG({children:t,store:e}){const n=x.useRef(void 0);return!e&&!n.current&&(n.current=NC()),x.createElement(Y4.Provider,{value:e||n.current},t)}const dS=t=>typeof(t==null?void 0:t.then)=="function",fS=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},tG=Ot.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(fS(t),t)}),_b=new WeakMap,mN=(t,e)=>{let n=_b.get(t);return n||(n=new Promise((r,i)=>{let s=t;const o=c=>u=>{s===c&&r(u)},a=c=>u=>{s===c&&i(u)},l=()=>{try{const c=e();dS(c)?(_b.set(c,n),s=c,c.then(o(c),a(c)),pN(c,l)):r(c)}catch(c){i(c)}};t.then(o(t),a(t)),pN(t,l)}),_b.set(t,n)),n};function nt(t,e){const{delay:n,unstable_promiseStatus:r=!Ot.use}={},i=q4(),[[s,o,a],l]=x.useReducer(u=>{const d=i.get(t);return Object.is(u[0],d)&&u[1]===i&&u[2]===t?u:[d,i,t]},void 0,()=>[i.get(t),i,t]);let c=s;if((o!==i||a!==t)&&(l(),c=i.get(t)),x.useEffect(()=>{const u=i.sub(t,()=>{if(r)try{const d=i.get(t);dS(d)&&fS(mN(d,()=>i.get(t)))}catch{}if(typeof n=="number"){setTimeout(l,n);return}l()});return l(),u},[i,t,n,r]),x.useDebugValue(c),dS(c)){const u=mN(c,()=>i.get(t));return r&&fS(u),tG(u)}return c}function hS(t,e){const n=q4();return x.useCallback((...i)=>{if((QW?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...i)},[n,t])}function Dp(t,e){return[nt(t),hS(t)]}const{createElement:md,createContext:nG,forwardRef:J4,useCallback:Sr,useContext:Z4,useEffect:dc,useImperativeHandle:Q4,useLayoutEffect:rG,useMemo:iG,useRef:Zr,useState:sy}=i0,gN=i0.useId,N0=nG(null);N0.displayName="PanelGroupContext";const Uh=rG,sG=typeof gN=="function"?gN:()=>null;let oG=0;function TC(t=null){const e=sG(),n=Zr(t||e||null);return n.current===null&&(n.current=""+oG++),t??n.current}function e3({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:f,style:h,tagName:m="div",...g}){const y=Z4(N0);if(y===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:w,getPanelSize:b,getPanelStyle:k,groupId:_,isPanelCollapsed:E,reevaluatePanelConstraints:C,registerPanel:P,resizePanel:M,unregisterPanel:O}=y,I=TC(o),D=Zr({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:a,minSize:l},id:I,idIsFromProps:o!==void 0,order:f});Zr({didLogMissingDefaultSizeWarning:!1}),Uh(()=>{const{callbacks:U,constraints:X}=D.current,Z={...X};D.current.id=I,D.current.idIsFromProps=o!==void 0,D.current.order=f,U.onCollapse=c,U.onExpand=u,U.onResize=d,X.collapsedSize=n,X.collapsible=r,X.defaultSize=i,X.maxSize=a,X.minSize=l,(Z.collapsedSize!==X.collapsedSize||Z.collapsible!==X.collapsible||Z.maxSize!==X.maxSize||Z.minSize!==X.minSize)&&C(D.current,Z)}),Uh(()=>{const U=D.current;return P(U),()=>{O(U)}},[f,I,P,O]),Q4(s,()=>({collapse:()=>{v(D.current)},expand:()=>{w(D.current)},getId(){return I},getSize(){return b(D.current)},isCollapsed(){return E(D.current)},isExpanded(){return!E(D.current)},resize:U=>{M(D.current,U)}}),[v,w,b,E,I,M]);const G=k(D.current,i);return md(m,{...g,children:t,className:e,style:{...G,...h},"data-panel":"","data-panel-id":I,"data-panel-group-id":_,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const qg=J4((t,e)=>md(e3,{...t,forwardedRef:e}));e3.displayName="Panel";qg.displayName="forwardRef(Panel)";function Xe(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const t3=10;function Hh(t,e,n=t3){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const r=t-e;return r===0?0:r>0?1:-1}function Yr(t,e,n){return Hh(t,e,n)===0}function Cu({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];Xe(r!=null);let{collapsedSize:i=0,collapsible:s,maxSize:o=100,minSize:a=0}=r;if(Hh(n,a)<0)if(s){const l=(i+a)/2;Hh(n,l)<0?n=i:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(t3)),n}function Df({delta:t,layout:e,panelConstraints:n,pivotIndices:r,trigger:i}){if(Yr(t,0))return e;const s=[...e],[o,a]=r;Xe(o!=null),Xe(a!=null);let l=0;if(i==="keyboard"){{const u=t<0?a:o,d=n[u];if(Xe(d),d.collapsible){const f=e[u];Xe(f!=null);const h=n[u];Xe(h);const{collapsedSize:m=0,minSize:g=0}=h;if(Yr(f,m)){const y=g-f;Hh(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}{const u=t<0?o:a,d=n[u];Xe(d);const{collapsible:f}=d;if(f){const h=e[u];Xe(h!=null);const m=n[u];Xe(m);const{collapsedSize:g=0,minSize:y=0}=m;if(Yr(h,y)){const v=h-g;Hh(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}}{const u=t<0?1:-1;let d=t<0?a:o,f=0;for(;;){const m=e[d];Xe(m!=null);const y=Cu({panelConstraints:n,panelIndex:d,size:100})-m;if(f+=y,d+=u,d<0||d>=n.length)break}const h=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-h:h}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(l),h=e[d];Xe(h!=null);const m=h-f,g=Cu({panelConstraints:n,panelIndex:d,size:m});if(!Yr(h,g)&&(l+=h-g,s[d]=g,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(Yr(l,0))return e;{const u=t<0?a:o,d=e[u];Xe(d!=null);const f=d+l,h=Cu({panelConstraints:n,panelIndex:u,size:f});if(s[u]=h,!Yr(h,f)){let m=f-h,y=t<0?a:o;for(;y>=0&&y<n.length;){const v=s[y];Xe(v!=null);const w=v+m,b=Cu({panelConstraints:n,panelIndex:y,size:w});if(Yr(v,b)||(m-=b-v,s[y]=b),Yr(m,0))break;t>0?y--:y++}}}const c=s.reduce((u,d)=>d+u,0);return Yr(c,100)?s:e}function aG({layout:t,panelsArray:e,pivotIndices:n}){let r=0,i=100,s=0,o=0;const a=n[0];Xe(a!=null),e.forEach((d,f)=>{const{constraints:h}=d,{maxSize:m=100,minSize:g=0}=h;f===a?(r=g,i=m):(s+=g,o+=m)});const l=Math.min(i,100-s),c=Math.max(r,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function Vh(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function n3(t,e,n=document){const i=Vh(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return i??null}function r3(t,e,n){const r=n3(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function i3(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return r||null}function T0(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function lG(t,e,n,r=document){var i,s,o,a;const l=T0(e,r),c=Vh(t,r),u=l?c.indexOf(l):-1,d=(i=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:null,f=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,f]}function cG({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:i,panelGroupElement:s,setLayout:o}){Zr({didWarnAboutMissingResizeHandle:!1}),Uh(()=>{if(!s)return;const a=Vh(n,s);for(let l=0;l<i.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=aG({layout:r,panelsArray:i,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const h=i[l];Xe(h),f.setAttribute("aria-controls",h.id),f.setAttribute("aria-valuemax",""+Math.round(c)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,r,i,s]),dc(()=>{if(!s)return;const a=e.current;Xe(a);const{panelDataArray:l}=a,c=i3(n,s);Xe(c!=null,`No group found for id "${n}"`);const u=Vh(n,s);Xe(u);const d=u.map(f=>{const h=f.getAttribute("data-panel-resize-handle-id");Xe(h);const[m,g]=lG(n,h,l,s);if(m==null||g==null)return()=>{};const y=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const w=l.findIndex(b=>b.id===m);if(w>=0){const b=l[w];Xe(b);const k=r[w],{collapsedSize:_=0,collapsible:E,minSize:C=0}=b.constraints;if(k!=null&&E){const P=Df({delta:Yr(k,_)?C-_:_-k,layout:r,panelConstraints:l.map(M=>M.constraints),pivotIndices:r3(n,h,s),trigger:"keyboard"});r!==P&&o(P)}}break}}};return f.addEventListener("keydown",y),()=>{f.removeEventListener("keydown",y)}});return()=>{d.forEach(f=>f())}},[s,t,e,n,r,i,o])}function vN(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function s3(t){return t.type==="keydown"}function o3(t){return t.type.startsWith("mouse")}function a3(t){return t.type.startsWith("touch")}function l3(t,e){const n=t==="horizontal";if(o3(e))return n?e.clientX:e.clientY;if(a3(e)){const r=e.touches[0];return Xe(r),n?r.screenX:r.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function uG(t,e,n,r,i){const s=n==="horizontal",o=T0(e,i);Xe(o);const a=o.getAttribute("data-panel-group-id");Xe(a);let{initialCursorPosition:l}=r;const c=l3(n,t),u=i3(a,i);Xe(u);const d=u.getBoundingClientRect(),f=s?d.width:d.height;return(c-l)/f*100}function dG(t,e,n,r,i,s){if(s3(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:i!=null?a=i:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return r==null?0:uG(t,e,n,r,s)}function fG({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let r=0,i=100;for(let s=0;s<t.length;s++){const o=n[s];Xe(o);const{defaultSize:a}=o;a!=null&&(r++,e[s]=a,i-=a)}for(let s=0;s<t.length;s++){const o=n[s];Xe(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-r,c=i/l;r++,e[s]=c,i-=c}return e}function Kc(t,e,n){e.forEach((r,i)=>{const s=t[i];Xe(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||r!==d){n[l]=r;const{onCollapse:f,onExpand:h,onResize:m}=o;m&&m(r,d),u&&(f||h)&&(h&&(d==null||d===c)&&r!==c&&h(),f&&(d==null||d!==c)&&r===c&&f())}})}function Lm(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function hG({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:i,precision:s=3}){const o=n[i];let a;return o==null?a=t??"1":r.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let pS=null,ic=null;function c3(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function pG(){ic!==null&&(document.head.removeChild(ic),pS=null,ic=null)}function Cb(t){if(pS===t)return;pS=t;const e=c3(t);ic===null&&(ic=document.createElement("style"),document.head.appendChild(ic)),ic.innerHTML=`*{cursor: ${e}!important;}`}function mG(t,e=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function yN(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function u3(t){return`react-resizable-panels:${t}`}function d3(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:i,order:s}=e;return i?r:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function f3(t,e){try{const n=u3(t),r=e.getItem(n);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function gG(t,e,n){var r,i;const s=(r=f3(t,n))!==null&&r!==void 0?r:{},o=d3(e);return(i=s[o])!==null&&i!==void 0?i:null}function vG(t,e,n,r,i){var s;const o=u3(t),a=d3(e),l=(s=f3(t,i))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function wN({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!Yr(r,100))for(let s=0;s<e.length;s++){const o=n[s];Xe(o!=null);const a=100/r*o;n[s]=a}let i=0;for(let s=0;s<e.length;s++){const o=n[s];Xe(o!=null);const a=Cu({panelConstraints:e,panelIndex:s,size:o});o!=a&&(i+=o-a,n[s]=a)}if(!Yr(i,0))for(let s=0;s<e.length;s++){const o=n[s];Xe(o!=null);const a=o+i,l=Cu({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(i-=l-o,n[s]=l,Yr(i,0)))break}return n}const yG=100,Lf={getItem:t=>(yN(Lf),Lf.getItem(t)),setItem:(t,e)=>{yN(Lf),Lf.setItem(t,e)}},bN={};function h3({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:i,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=Lf,style:c,tagName:u="div",...d}){const f=TC(s),h=Zr(null),[m,g]=sy(null),[y,v]=sy([]),w=Zr({}),b=Zr(new Map),k=Zr(0),_=Zr({autoSaveId:t,direction:r,dragState:m,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),E=Zr({layout:y,panelDataArray:[],panelDataArrayChanged:!1});Zr({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),Q4(i,()=>({getId:()=>_.current.id,getLayout:()=>{const{layout:J}=E.current;return J},setLayout:J=>{const{onLayout:ae}=_.current,{layout:j,panelDataArray:L}=E.current,z=wN({layout:J,panelConstraints:L.map(S=>S.constraints)});vN(j,z)||(v(z),E.current.layout=z,ae&&ae(z),Kc(L,z,w.current))}}),[]),Uh(()=>{_.current.autoSaveId=t,_.current.direction=r,_.current.dragState=m,_.current.id=f,_.current.onLayout=o,_.current.storage=l}),cG({committedValuesRef:_,eagerValuesRef:E,groupId:f,layout:y,panelDataArray:E.current.panelDataArray,setLayout:v,panelGroupElement:h.current}),dc(()=>{const{panelDataArray:J}=E.current;if(t){if(y.length===0||y.length!==J.length)return;let ae=bN[t];ae==null&&(ae=mG(vG,yG),bN[t]=ae);const j=[...J],L=new Map(b.current);ae(t,j,L,y,l)}},[t,y,l]),dc(()=>{});const C=Sr(J=>{const{onLayout:ae}=_.current,{layout:j,panelDataArray:L}=E.current;if(J.constraints.collapsible){const z=L.map(T=>T.constraints),{collapsedSize:S=0,panelSize:N,pivotIndices:R}=Ll(L,J,j);if(Xe(N!=null),N!==S){b.current.set(J.id,N);const K=iu(L,J)===L.length-1?N-S:S-N,V=Df({delta:K,layout:j,panelConstraints:z,pivotIndices:R,trigger:"imperative-api"});Lm(j,V)||(v(V),E.current.layout=V,ae&&ae(V),Kc(L,V,w.current))}}},[]),P=Sr(J=>{const{onLayout:ae}=_.current,{layout:j,panelDataArray:L}=E.current;if(J.constraints.collapsible){const z=L.map(K=>K.constraints),{collapsedSize:S=0,panelSize:N,minSize:R=0,pivotIndices:T}=Ll(L,J,j);if(N===S){const K=b.current.get(J.id),V=K!=null&&K>=R?K:R,q=iu(L,J)===L.length-1?N-V:V-N,Te=Df({delta:q,layout:j,panelConstraints:z,pivotIndices:T,trigger:"imperative-api"});Lm(j,Te)||(v(Te),E.current.layout=Te,ae&&ae(Te),Kc(L,Te,w.current))}}},[]),M=Sr(J=>{const{layout:ae,panelDataArray:j}=E.current,{panelSize:L}=Ll(j,J,ae);return Xe(L!=null),L},[]),O=Sr((J,ae)=>{const{panelDataArray:j}=E.current,L=iu(j,J);return hG({defaultSize:ae,dragState:m,layout:y,panelData:j,panelIndex:L})},[m,y]),I=Sr(J=>{const{layout:ae,panelDataArray:j}=E.current,{collapsedSize:L=0,collapsible:z,panelSize:S}=Ll(j,J,ae);return z===!0&&S===L},[]),D=Sr(J=>{const{layout:ae,panelDataArray:j}=E.current,{collapsedSize:L=0,collapsible:z,panelSize:S}=Ll(j,J,ae);return Xe(S!=null),!z||S>L},[]),G=Sr(J=>{const{panelDataArray:ae}=E.current;ae.push(J),ae.sort((j,L)=>{const z=j.order,S=L.order;return z==null&&S==null?0:z==null?-1:S==null?1:z-S}),E.current.panelDataArrayChanged=!0},[]);Uh(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:J,onLayout:ae,storage:j}=_.current,{layout:L,panelDataArray:z}=E.current;let S=null;if(J){const R=gG(J,z,j);R&&(b.current=new Map(Object.entries(R.expandToSizes)),S=R.layout)}S==null&&(S=fG({panelDataArray:z}));const N=wN({layout:S,panelConstraints:z.map(R=>R.constraints)});vN(L,N)||(v(N),E.current.layout=N,ae&&ae(N),Kc(z,N,w.current))}});const U=Sr(J=>function(j){j.preventDefault();const L=h.current;if(!L)return()=>null;const{direction:z,dragState:S,id:N,keyboardResizeBy:R,onLayout:T}=_.current,{layout:K,panelDataArray:V}=E.current,{initialLayout:ee}=S??{},q=r3(N,J,L);let Te=dG(j,J,z,S,R,L);if(Te===0)return;const je=z==="horizontal";document.dir==="rtl"&&je&&(Te=-Te);const Fe=V.map(he=>he.constraints),Le=Df({delta:Te,layout:ee??K,panelConstraints:Fe,pivotIndices:q,trigger:s3(j)?"keyboard":"mouse-or-touch"}),We=!Lm(K,Le);(o3(j)||a3(j))&&k.current!=Te&&(k.current=Te,Cb(We?je?"horizontal":"vertical":je?Te<0?"horizontal-min":"horizontal-max":Te<0?"vertical-min":"vertical-max")),We&&(v(Le),E.current.layout=Le,T&&T(Le),Kc(V,Le,w.current))},[]),X=Sr((J,ae)=>{const{onLayout:j}=_.current,{layout:L,panelDataArray:z}=E.current,S=z.map(ee=>ee.constraints),{panelSize:N,pivotIndices:R}=Ll(z,J,L);Xe(N!=null);const K=iu(z,J)===z.length-1?N-ae:ae-N,V=Df({delta:K,layout:L,panelConstraints:S,pivotIndices:R,trigger:"imperative-api"});Lm(L,V)||(v(V),E.current.layout=V,j&&j(V),Kc(z,V,w.current))},[]),Z=Sr((J,ae)=>{const{layout:j,panelDataArray:L}=E.current,{collapsedSize:z=0,collapsible:S}=ae,{collapsedSize:N=0,collapsible:R,maxSize:T=100,minSize:K=0}=J.constraints,{panelSize:V}=Ll(L,J,j);Xe(V!=null),S&&R&&V===z?z!==N&&X(J,N):V<K?X(J,K):V>T&&X(J,T)},[X]),te=Sr((J,ae)=>{const{direction:j}=_.current,{layout:L}=E.current;if(!h.current)return;const z=T0(J,h.current);Xe(z);const S=l3(j,ae);g({dragHandleId:J,dragHandleRect:z.getBoundingClientRect(),initialCursorPosition:S,initialLayout:L})},[]),H=Sr(()=>{pG(),g(null)},[]),$=Sr(J=>{const{panelDataArray:ae}=E.current,j=iu(ae,J);j>=0&&(ae.splice(j,1),delete w.current[J.id],E.current.panelDataArrayChanged=!0)},[]),ne=iG(()=>({collapsePanel:C,direction:r,dragState:m,expandPanel:P,getPanelSize:M,getPanelStyle:O,groupId:f,isPanelCollapsed:I,isPanelExpanded:D,reevaluatePanelConstraints:Z,registerPanel:G,registerResizeHandle:U,resizePanel:X,startDragging:te,stopDragging:H,unregisterPanel:$,panelGroupElement:h.current}),[C,m,r,P,M,O,f,I,D,Z,G,U,X,te,H,$]),ke={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return md(N0.Provider,{value:ne},md(u,{...d,children:e,className:n,style:{...ke,...c},ref:h,"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":f}))}const p3=J4((t,e)=>md(h3,{...t,forwardedRef:e}));h3.displayName="PanelGroup";p3.displayName="forwardRef(PanelGroup)";function iu(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Ll(t,e,n){const r=iu(t,e),s=r===t.length-1?[r-1,r]:[r,r+1],o=n[r];return{...e.constraints,panelSize:o,pivotIndices:s}}function wG({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){dc(()=>{if(t||n==null||r==null)return;const i=T0(e,r);if(i==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=i.getAttribute("data-panel-group-id");Xe(a);const l=Vh(a,r),c=n3(a,e,r);Xe(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return i.addEventListener("keydown",s),()=>{i.removeEventListener("keydown",s)}},[r,t,e,n])}function mS({children:t=null,className:e="",disabled:n=!1,id:r,onDragging:i,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=Zr(null),u=Zr({onDragging:i});dc(()=>{u.current.onDragging=i});const d=Z4(N0);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,dragState:h,groupId:m,registerResizeHandle:g,startDragging:y,stopDragging:v,panelGroupElement:w}=d,b=TC(r),k=(h==null?void 0:h.dragHandleId)===b,[_,E]=sy(!1),[C,P]=sy(null),M=Sr(()=>{const I=c.current;Xe(I),I.blur(),v();const{onDragging:D}=u.current;D&&D(!1)},[v]);dc(()=>{if(n)P(null);else{const I=g(b);P(()=>I)}},[n,b,g]),dc(()=>{if(n||C==null||!k)return;const I=X=>{C(X)},D=X=>{C(X)},G=c.current;Xe(G);const U=G.ownerDocument;return U.body.addEventListener("contextmenu",M),U.body.addEventListener("mousemove",I),U.body.addEventListener("touchmove",I),U.body.addEventListener("mouseleave",D),window.addEventListener("mouseup",M),window.addEventListener("touchend",M),()=>{U.body.removeEventListener("contextmenu",M),U.body.removeEventListener("mousemove",I),U.body.removeEventListener("touchmove",I),U.body.removeEventListener("mouseleave",D),window.removeEventListener("mouseup",M),window.removeEventListener("touchend",M)}},[f,n,k,C,M]),wG({disabled:n,handleId:b,resizeHandler:C,panelGroupElement:w});const O={cursor:c3(f),touchAction:"none",userSelect:"none"};return md(a,{...l,children:t,className:e,onBlur:()=>E(!1),onFocus:()=>E(!0),onMouseDown:I=>{y(b,I.nativeEvent);const D=u.current;Xe(D);const{onDragging:G}=D;G&&G(!0)},onMouseUp:M,onTouchCancel:M,onTouchEnd:M,onTouchStart:I=>{y(b,I.nativeEvent);const D=u.current;Xe(D);const{onDragging:G}=D;G&&G(!0)},ref:c,role:"separator",style:{...O,...s},tabIndex:o,"data-panel-group-direction":f,"data-panel-group-id":m,"data-resize-handle":"","data-resize-handle-active":k?"pointer":_?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":b})}mS.displayName="PanelResizeHandle";var Is=function(){return Is=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Is.apply(this,arguments)};function m3(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function bG(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var xG=function(){};function SG(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function kG(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var g3=typeof window<"u",_G=g3?window:null,xN=function(t){return!!t.addEventListener},SN=function(t){return!!t.on},Jg=function(t,e,n,r){n===void 0&&(n=_G),x.useEffect(function(){if(e&&n)return xN(n)?SG(n,t,e,r):SN(n)&&n.on(t,e,r),function(){xN(n)?kG(n,t,e,r):SN(n)&&n.off(t,e,r)}},[t,e,n,JSON.stringify(r)])},CG=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},Ao=function(t,e,n,r){e===void 0&&(e=xG),n===void 0&&(n={}),r===void 0&&(r=[t]);var i=n.event,s=i===void 0?"keydown":i,o=n.target,a=n.options,l=x.useMemo(function(){var c=CG(t),u=function(d){if(c(d))return e(d)};return u},r);Jg(s,l,o,a)},EG=function(t,e){return g3?window.matchMedia(t).matches:!1},AG=function(t,e){var n=x.useState(EG(t)),r=n[0],i=n[1];return x.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&i(!!o.matches)};return o.addEventListener("change",a),i(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),r};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const PG={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function NG(t,e,n){return(e=MG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function se(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kN(Object(n),!0).forEach(function(r){NG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MG(t){var e=TG(t,"string");return typeof e=="symbol"?e:e+""}const _N=()=>{};let MC={},v3={},y3=null,w3={mark:_N,measure:_N};try{typeof window<"u"&&(MC=window),typeof document<"u"&&(v3=document),typeof MutationObserver<"u"&&(y3=MutationObserver),typeof performance<"u"&&(w3=performance)}catch{}const{userAgent:CN=""}=MC.navigator||{},nl=MC,Lt=v3,EN=y3,jm=w3;nl.document;const Xo=!!Lt.documentElement&&!!Lt.head&&typeof Lt.addEventListener=="function"&&typeof Lt.createElement=="function",b3=~CN.indexOf("MSIE")||~CN.indexOf("Trident/");var RG=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,OG=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,x3={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},IG={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},S3=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],sr="classic",M0="duotone",DG="sharp",LG="sharp-duotone",k3=[sr,M0,DG,LG],jG={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},$G={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},FG=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),BG={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},zG=["fak","fa-kit","fakd","fa-kit-duotone"],AN={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},UG=["kit"],HG={kit:{"fa-kit":"fak"}},VG=["fak","fakd"],WG={kit:{fak:"fa-kit"}},PN={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},$m={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},GG=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],KG=["fak","fa-kit","fakd","fa-kit-duotone"],XG={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},YG={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},qG={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},gS={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},JG=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],vS=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...GG,...JG],ZG=["solid","regular","light","thin","duotone","brands"],_3=[1,2,3,4,5,6,7,8,9,10],QG=_3.concat([11,12,13,14,15,16,17,18,19,20]),eK=[...Object.keys(qG),...ZG,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",$m.GROUP,$m.SWAP_OPACITY,$m.PRIMARY,$m.SECONDARY].concat(_3.map(t=>"".concat(t,"x"))).concat(QG.map(t=>"w-".concat(t))),tK={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Bo="___FONT_AWESOME___",yS=16,C3="fa",E3="svg-inline--fa",kc="data-fa-i2svg",wS="data-fa-pseudo-element",nK="data-fa-pseudo-element-pending",RC="data-prefix",OC="data-icon",NN="fontawesome-i2svg",rK="async",iK=["HTML","HEAD","STYLE","SCRIPT"],A3=(()=>{try{return!0}catch{return!1}})();function Lp(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[sr]}})}const P3=se({},x3);P3[sr]=se(se(se(se({},{"fa-duotone":"duotone"}),x3[sr]),AN.kit),AN["kit-duotone"]);const sK=Lp(P3),bS=se({},BG);bS[sr]=se(se(se(se({},{duotone:"fad"}),bS[sr]),PN.kit),PN["kit-duotone"]);const TN=Lp(bS),xS=se({},gS);xS[sr]=se(se({},xS[sr]),WG.kit);const IC=Lp(xS),SS=se({},YG);SS[sr]=se(se({},SS[sr]),HG.kit);Lp(SS);const oK=RG,N3="fa-layers-text",aK=OG,lK=se({},jG);Lp(lK);const cK=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Eb=IG,uK=[...UG,...eK],oh=nl.FontAwesomeConfig||{};function dK(t){var e=Lt.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function fK(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}Lt&&typeof Lt.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,r]=e;const i=fK(dK(n));i!=null&&(oh[r]=i)});const T3={styleDefault:"solid",familyDefault:sr,cssPrefix:C3,replacementClass:E3,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};oh.familyPrefix&&(oh.cssPrefix=oh.familyPrefix);const gd=se(se({},T3),oh);gd.autoReplaceSvg||(gd.observeMutations=!1);const Ie={};Object.keys(T3).forEach(t=>{Object.defineProperty(Ie,t,{enumerable:!0,set:function(e){gd[t]=e,ah.forEach(n=>n(Ie))},get:function(){return gd[t]}})});Object.defineProperty(Ie,"familyPrefix",{enumerable:!0,set:function(t){gd.cssPrefix=t,ah.forEach(e=>e(Ie))},get:function(){return gd.cssPrefix}});nl.FontAwesomeConfig=Ie;const ah=[];function hK(t){return ah.push(t),()=>{ah.splice(ah.indexOf(t),1)}}const ra=yS,zs={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function pK(t){if(!t||!Xo)return;const e=Lt.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=Lt.head.childNodes;let r=null;for(let i=n.length-1;i>-1;i--){const s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return Lt.head.insertBefore(e,r),t}const mK="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Wh(){let t=12,e="";for(;t-- >0;)e+=mK[Math.random()*62|0];return e}function Ld(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function DC(t){return t.classList?Ld(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function M3(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function gK(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(M3(t[n]),'" '),"").trim()}function R0(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function LC(t){return t.size!==zs.size||t.x!==zs.x||t.y!==zs.y||t.rotate!==zs.rotate||t.flipX||t.flipY}function vK(t){let{transform:e,containerWidth:n,iconWidth:r}=t;const i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:c}}function yK(t){let{transform:e,width:n=yS,height:r=yS,startCentered:i=!1}=t,s="";return i&&b3?s+="translate(".concat(e.x/ra-n/2,"em, ").concat(e.y/ra-r/2,"em) "):i?s+="translate(calc(-50% + ".concat(e.x/ra,"em), calc(-50% + ").concat(e.y/ra,"em)) "):s+="translate(".concat(e.x/ra,"em, ").concat(e.y/ra,"em) "),s+="scale(".concat(e.size/ra*(e.flipX?-1:1),", ").concat(e.size/ra*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var wK=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function R3(){const t=C3,e=E3,n=Ie.cssPrefix,r=Ie.replacementClass;let i=wK;if(n!==t||r!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}let MN=!1;function Ab(){Ie.autoAddCss&&!MN&&(pK(R3()),MN=!0)}var bK={mixout(){return{dom:{css:R3,insertCss:Ab}}},hooks(){return{beforeDOMElementCreation(){Ab()},beforeI2svg(){Ab()}}}};const zo=nl||{};zo[Bo]||(zo[Bo]={});zo[Bo].styles||(zo[Bo].styles={});zo[Bo].hooks||(zo[Bo].hooks={});zo[Bo].shims||(zo[Bo].shims=[]);var Us=zo[Bo];const O3=[],I3=function(){Lt.removeEventListener("DOMContentLoaded",I3),oy=1,O3.map(t=>t())};let oy=!1;Xo&&(oy=(Lt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Lt.readyState),oy||Lt.addEventListener("DOMContentLoaded",I3));function xK(t){Xo&&(oy?setTimeout(t,0):O3.push(t))}function jp(t){const{tag:e,attributes:n={},children:r=[]}=t;return typeof t=="string"?M3(t):"<".concat(e," ").concat(gK(n),">").concat(r.map(jp).join(""),"</").concat(e,">")}function RN(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var Pb=function(e,n,r,i){var s=Object.keys(e),o=s.length,a=n,l,c,u;for(r===void 0?(l=1,u=e[s[0]]):(l=0,u=r);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function SK(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function kS(t){const e=SK(t);return e.length===1?e[0].toString(16):null}function kK(t,e){const n=t.length;let r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function ON(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e},{})}function _S(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:r=!1}=n,i=ON(e);typeof Us.hooks.addPack=="function"&&!r?Us.hooks.addPack(t,ON(e)):Us.styles[t]=se(se({},Us.styles[t]||{}),i),t==="fas"&&_S("fa",e)}const{styles:Gh,shims:_K}=Us,D3=Object.keys(IC),CK=D3.reduce((t,e)=>(t[e]=Object.keys(IC[e]),t),{});let jC=null,L3={},j3={},$3={},F3={},B3={};function EK(t){return~uK.indexOf(t)}function AK(t,e){const n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!EK(i)?i:null}const z3=()=>{const t=r=>Pb(Gh,(i,s,o)=>(i[o]=Pb(s,r,{}),i),{});L3=t((r,i,s)=>(i[3]&&(r[i[3]]=s),i[2]&&i[2].filter(a=>typeof a=="number").forEach(a=>{r[a.toString(16)]=s}),r)),j3=t((r,i,s)=>(r[s]=s,i[2]&&i[2].filter(a=>typeof a=="string").forEach(a=>{r[a]=s}),r)),B3=t((r,i,s)=>{const o=i[2];return r[s]=s,o.forEach(a=>{r[a]=s}),r});const e="far"in Gh||Ie.autoFetchSvg,n=Pb(_K,(r,i)=>{const s=i[0];let o=i[1];const a=i[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(r.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(r.unicodes[s.toString(16)]={prefix:o,iconName:a}),r},{names:{},unicodes:{}});$3=n.names,F3=n.unicodes,jC=O0(Ie.styleDefault,{family:Ie.familyDefault})};hK(t=>{jC=O0(t.styleDefault,{family:Ie.familyDefault})});z3();function $C(t,e){return(L3[t]||{})[e]}function PK(t,e){return(j3[t]||{})[e]}function sc(t,e){return(B3[t]||{})[e]}function U3(t){return $3[t]||{prefix:null,iconName:null}}function NK(t){const e=F3[t],n=$C("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function rl(){return jC}const H3=()=>({prefix:null,iconName:null,rest:[]});function TK(t){let e=sr;const n=D3.reduce((r,i)=>(r[i]="".concat(Ie.cssPrefix,"-").concat(i),r),{});return k3.forEach(r=>{(t.includes(n[r])||t.some(i=>CK[r].includes(i)))&&(e=r)}),e}function O0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=sr}=e,r=sK[n][t];if(n===M0&&!t)return"fad";const i=TN[n][t]||TN[n][r],s=t in Us.styles?t:null;return i||s||null}function MK(t){let e=[],n=null;return t.forEach(r=>{const i=AK(Ie.cssPrefix,r);i?n=i:r&&e.push(r)}),{iconName:n,rest:e}}function IN(t){return t.sort().filter((e,n,r)=>r.indexOf(e)===n)}function I0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let r=null;const i=vS.concat(KG),s=IN(t.filter(d=>i.includes(d))),o=IN(t.filter(d=>!vS.includes(d))),a=s.filter(d=>(r=d,!S3.includes(d))),[l=null]=a,c=TK(s),u=se(se({},MK(o)),{},{prefix:O0(l,{family:c})});return se(se(se({},u),DK({values:t,family:c,styles:Gh,config:Ie,canonical:u,givenPrefix:r})),RK(n,r,u))}function RK(t,e,n){let{prefix:r,iconName:i}=n;if(t||!r||!i)return{prefix:r,iconName:i};const s=e==="fa"?U3(i):{},o=sc(r,i);return i=s.iconName||o||i,r=s.prefix||r,r==="far"&&!Gh.far&&Gh.fas&&!Ie.autoFetchSvg&&(r="fas"),{prefix:r,iconName:i}}const OK=k3.filter(t=>t!==sr||t!==M0),IK=Object.keys(gS).filter(t=>t!==sr).map(t=>Object.keys(gS[t])).flat();function DK(t){const{values:e,family:n,canonical:r,givenPrefix:i="",styles:s={},config:o={}}=t,a=n===M0,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=r.prefix==="fad"||r.prefix==="fa-duotone";if(!a&&(l||c||u)&&(r.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(r.prefix="fab"),!r.prefix&&OK.includes(n)&&(Object.keys(s).find(f=>IK.includes(f))||o.autoFetchSvg)){const f=FG.get(n).defaultShortPrefixId;r.prefix=f,r.iconName=sc(r.prefix,r.iconName)||r.iconName}return(r.prefix==="fa"||i==="fa")&&(r.prefix=rl()||"fas"),r}class LK{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach(s=>{this.definitions[s]=se(se({},this.definitions[s]||{}),i[s]),_S(s,i[s]);const o=IC[sr][s];o&&_S(o,i[s]),z3()})}reset(){this.definitions={}}_pullDefinitions(e,n){const r=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(r).map(i=>{const{prefix:s,iconName:o,icon:a}=r[i],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=a)}),e[s][o]=a}),e}}let DN=[],Eu={};const Bu={},jK=Object.keys(Bu);function $K(t,e){let{mixoutsTo:n}=e;return DN=t,Eu={},Object.keys(Bu).forEach(r=>{jK.indexOf(r)===-1&&delete Bu[r]}),DN.forEach(r=>{const i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(s=>{typeof i[s]=="function"&&(n[s]=i[s]),typeof i[s]=="object"&&Object.keys(i[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=i[s][o]})}),r.hooks){const s=r.hooks();Object.keys(s).forEach(o=>{Eu[o]||(Eu[o]=[]),Eu[o].push(s[o])})}r.provides&&r.provides(Bu)}),n}function CS(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(Eu[t]||[]).forEach(o=>{e=o.apply(null,[e,...r])}),e}function _c(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(Eu[t]||[]).forEach(s=>{s.apply(null,n)})}function il(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Bu[t]?Bu[t].apply(null,e):void 0}function ES(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||rl();if(e)return e=sc(n,e)||e,RN(V3.definitions,n,e)||RN(Us.styles,n,e)}const V3=new LK,FK=()=>{Ie.autoReplaceSvg=!1,Ie.observeMutations=!1,_c("noAuto")},BK={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Xo?(_c("beforeI2svg",t),il("pseudoElements2svg",t),il("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Ie.autoReplaceSvg===!1&&(Ie.autoReplaceSvg=!0),Ie.observeMutations=!0,xK(()=>{UK({autoReplaceSvgRoot:e}),_c("watch",t)})}},zK={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:sc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=O0(t[0]);return{prefix:n,iconName:sc(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Ie.cssPrefix,"-"))>-1||t.match(oK))){const e=I0(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||rl(),iconName:sc(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=rl();return{prefix:e,iconName:sc(e,t)||t}}}},mi={noAuto:FK,config:Ie,dom:BK,parse:zK,library:V3,findIconDefinition:ES,toHtml:jp},UK=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Lt}=t;(Object.keys(Us.styles).length>0||Ie.autoFetchSvg)&&Xo&&Ie.autoReplaceSvg&&mi.dom.i2svg({node:e})};function D0(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>jp(n))}}),Object.defineProperty(t,"node",{get:function(){if(!Xo)return;const n=Lt.createElement("div");return n.innerHTML=t.html,n.children}}),t}function HK(t){let{children:e,main:n,mask:r,attributes:i,styles:s,transform:o}=t;if(LC(o)&&n.found&&!r.found){const{width:a,height:l}=n,c={x:a/l/2,y:.5};i.style=R0(se(se({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function VK(t){let{prefix:e,iconName:n,children:r,attributes:i,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(Ie.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:se(se({},i),{},{id:o}),children:r}]}]}function FC(t){const{icons:{main:e,mask:n},prefix:r,iconName:i,transform:s,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:d=!1}=t,{width:f,height:h}=n.found?n:e,m=VG.includes(r),g=[Ie.replacementClass,i?"".concat(Ie.cssPrefix,"-").concat(i):""].filter(_=>u.classes.indexOf(_)===-1).filter(_=>_!==""||!!_).concat(u.classes).join(" ");let y={children:[],attributes:se(se({},u.attributes),{},{"data-prefix":r,"data-icon":i,class:g,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(h)})};const v=m&&!~u.classes.indexOf("fa-fw")?{width:"".concat(f/h*16*.0625,"em")}:{};d&&(y.attributes[kc]=""),a&&(y.children.push({tag:"title",attributes:{id:y.attributes["aria-labelledby"]||"title-".concat(c||Wh())},children:[a]}),delete y.attributes.title);const w=se(se({},y),{},{prefix:r,iconName:i,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:se(se({},v),u.styles)}),{children:b,attributes:k}=n.found&&e.found?il("generateAbstractMask",w)||{children:[],attributes:{}}:il("generateAbstractIcon",w)||{children:[],attributes:{}};return w.children=b,w.attributes=k,o?VK(w):HK(w)}function LN(t){const{content:e,width:n,height:r,transform:i,title:s,extra:o,watchable:a=!1}=t,l=se(se(se({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[kc]="");const c=se({},o.styles);LC(i)&&(c.transform=yK({transform:i,startCentered:!0,width:n,height:r}),c["-webkit-transform"]=c.transform);const u=R0(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function WK(t){const{content:e,title:n,extra:r}=t,i=se(se(se({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=R0(r.styles);s.length>0&&(i.style=s);const o=[];return o.push({tag:"span",attributes:i,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:Nb}=Us;function AS(t){const e=t[0],n=t[1],[r]=t.slice(4);let i=null;return Array.isArray(r)?i={tag:"g",attributes:{class:"".concat(Ie.cssPrefix,"-").concat(Eb.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ie.cssPrefix,"-").concat(Eb.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Ie.cssPrefix,"-").concat(Eb.PRIMARY),fill:"currentColor",d:r[1]}}]}:i={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:e,height:n,icon:i}}const GK={found:!1,width:512,height:512};function KK(t,e){!A3&&!Ie.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function PS(t,e){let n=e;return e==="fa"&&Ie.styleDefault!==null&&(e=rl()),new Promise((r,i)=>{if(n==="fa"){const s=U3(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&Nb[e]&&Nb[e][t]){const s=Nb[e][t];return r(AS(s))}KK(t,e),r(se(se({},GK),{},{icon:Ie.showMissingIcons&&t?il("missingIconAbstract")||{}:{}}))})}const jN=()=>{},NS=Ie.measurePerformance&&jm&&jm.mark&&jm.measure?jm:{mark:jN,measure:jN},jf='FA "6.7.1"',XK=t=>(NS.mark("".concat(jf," ").concat(t," begins")),()=>W3(t)),W3=t=>{NS.mark("".concat(jf," ").concat(t," ends")),NS.measure("".concat(jf," ").concat(t),"".concat(jf," ").concat(t," begins"),"".concat(jf," ").concat(t," ends"))};var BC={begin:XK,end:W3};const Zg=()=>{};function $N(t){return typeof(t.getAttribute?t.getAttribute(kc):null)=="string"}function YK(t){const e=t.getAttribute?t.getAttribute(RC):null,n=t.getAttribute?t.getAttribute(OC):null;return e&&n}function qK(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Ie.replacementClass)}function JK(){return Ie.autoReplaceSvg===!0?Qg.replace:Qg[Ie.autoReplaceSvg]||Qg.replace}function ZK(t){return Lt.createElementNS("http://www.w3.org/2000/svg",t)}function QK(t){return Lt.createElement(t)}function G3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?ZK:QK}=e;if(typeof t=="string")return Lt.createTextNode(t);const r=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){r.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){r.appendChild(G3(s,{ceFn:n}))}),r}function eX(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const Qg={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(G3(n),e)}),e.getAttribute(kc)===null&&Ie.keepOriginalSource){let n=Lt.createComment(eX(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~DC(e).indexOf(Ie.replacementClass))return Qg.replace(t);const r=new RegExp("".concat(Ie.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===Ie.replacementClass||a.match(r)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const i=n.map(s=>jp(s)).join(`
`);e.setAttribute(kc,""),e.innerHTML=i}};function FN(t){t()}function K3(t,e){const n=typeof e=="function"?e:Zg;if(t.length===0)n();else{let r=FN;Ie.mutateApproach===rK&&(r=nl.requestAnimationFrame||FN),r(()=>{const i=JK(),s=BC.begin("mutate");t.map(i),s(),n()})}}let zC=!1;function X3(){zC=!0}function TS(){zC=!1}let ay=null;function BN(t){if(!EN||!Ie.observeMutations)return;const{treeCallback:e=Zg,nodeCallback:n=Zg,pseudoElementsCallback:r=Zg,observeMutationsRoot:i=Lt}=t;ay=new EN(s=>{if(zC)return;const o=rl();Ld(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!$N(a.addedNodes[0])&&(Ie.searchPseudoElements&&r(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Ie.searchPseudoElements&&r(a.target.parentNode),a.type==="attributes"&&$N(a.target)&&~cK.indexOf(a.attributeName))if(a.attributeName==="class"&&YK(a.target)){const{prefix:l,iconName:c}=I0(DC(a.target));a.target.setAttribute(RC,l||o),c&&a.target.setAttribute(OC,c)}else qK(a.target)&&n(a.target)})}),Xo&&ay.observe(i,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function tX(){ay&&ay.disconnect()}function nX(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((r,i)=>{const s=i.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(r[o]=a.join(":").trim()),r},{})),n}function rX(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"";let i=I0(DC(t));return i.prefix||(i.prefix=rl()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=PK(i.prefix,t.innerText)||$C(i.prefix,kS(t.innerText))),!i.iconName&&Ie.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function iX(t){const e=Ld(t.attributes).reduce((i,s)=>(i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i),{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return Ie.autoA11y&&(n?e["aria-labelledby"]="".concat(Ie.replacementClass,"-title-").concat(r||Wh()):(e["aria-hidden"]="true",e.focusable="false")),e}function sX(){return{iconName:null,title:null,titleId:null,prefix:null,transform:zs,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function zN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:i}=rX(t),s=iX(t),o=CS("parseNodeAttributes",{},t);let a=e.styleParser?nX(t):[];return se({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:r,transform:zs,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:a,attributes:s}},o)}const{styles:oX}=Us;function Y3(t){const e=Ie.autoReplaceSvg==="nest"?zN(t,{styleParser:!1}):zN(t);return~e.extra.classes.indexOf(N3)?il("generateLayersText",t,e):il("generateSvgReplacementMutation",t,e)}function aX(){return[...zG,...vS]}function UN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Xo)return Promise.resolve();const n=Lt.documentElement.classList,r=u=>n.add("".concat(NN,"-").concat(u)),i=u=>n.remove("".concat(NN,"-").concat(u)),s=Ie.autoFetchSvg?aX():S3.concat(Object.keys(oX));s.includes("fa")||s.push("fa");const o=[".".concat(N3,":not([").concat(kc,"])")].concat(s.map(u=>".".concat(u,":not([").concat(kc,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=Ld(t.querySelectorAll(o))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();const l=BC.begin("onTree"),c=a.reduce((u,d)=>{try{const f=Y3(d);f&&u.push(f)}catch(f){A3||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(f=>{K3(f,()=>{r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),u()})}).catch(f=>{l(),d(f)})})}function lX(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Y3(t).then(n=>{n&&K3([n],e)})}function cX(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(e||{}).icon?e:ES(e||{});let{mask:i}=n;return i&&(i=(i||{}).icon?i:ES(i||{})),t(r,se(se({},n),{},{mask:i}))}}const uX=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=zs,symbol:r=!1,mask:i=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!t)return;const{prefix:d,iconName:f,icon:h}=t;return D0(se({type:"icon"},t),()=>(_c("beforeDOMElementCreation",{iconDefinition:t,params:e}),Ie.autoA11y&&(o?c["aria-labelledby"]="".concat(Ie.replacementClass,"-title-").concat(a||Wh()):(c["aria-hidden"]="true",c.focusable="false")),FC({icons:{main:AS(h),mask:i?AS(i.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:f,transform:se(se({},zs),n),symbol:r,title:o,maskId:s,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var dX={mixout(){return{icon:cX(uX)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=UN,t.nodeCallback=lX,t}}},provides(t){t.i2svg=function(e){const{node:n=Lt,callback:r=()=>{}}=e;return UN(n,r)},t.generateSvgReplacementMutation=function(e,n){const{iconName:r,title:i,titleId:s,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:d}=n;return new Promise((f,h)=>{Promise.all([PS(r,o),c.iconName?PS(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(m=>{let[g,y]=m;f([e,FC({icons:{main:g,mask:y},prefix:o,iconName:r,transform:a,symbol:l,maskId:u,title:i,titleId:s,extra:d,watchable:!0})])}).catch(h)})},t.generateAbstractIcon=function(e){let{children:n,attributes:r,main:i,transform:s,styles:o}=e;const a=R0(o);a.length>0&&(r.style=a);let l;return LC(s)&&(l=il("generateAbstractTransformGrouping",{main:i,transform:s,containerWidth:i.width,iconWidth:i.width})),n.push(l||i.icon),{children:n,attributes:r}}}},fX={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return D0({type:"layer"},()=>{_c("beforeDOMElementCreation",{assembler:t,params:e});let r=[];return t(i=>{Array.isArray(i)?i.map(s=>{r=r.concat(s.abstract)}):r=r.concat(i.abstract)}),[{tag:"span",attributes:{class:["".concat(Ie.cssPrefix,"-layers"),...n].join(" ")},children:r}]})}}}},hX={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:r=[],attributes:i={},styles:s={}}=e;return D0({type:"counter",content:t},()=>(_c("beforeDOMElementCreation",{content:t,params:e}),WK({content:t.toString(),title:n,extra:{attributes:i,styles:s,classes:["".concat(Ie.cssPrefix,"-layers-counter"),...r]}})))}}}},pX={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=zs,title:r=null,classes:i=[],attributes:s={},styles:o={}}=e;return D0({type:"text",content:t},()=>(_c("beforeDOMElementCreation",{content:t,params:e}),LN({content:t,transform:se(se({},zs),n),title:r,extra:{attributes:s,styles:o,classes:["".concat(Ie.cssPrefix,"-layers-text"),...i]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:r,transform:i,extra:s}=n;let o=null,a=null;if(b3){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return Ie.autoA11y&&!r&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,LN({content:e.innerHTML,width:o,height:a,transform:i,title:r,extra:s,watchable:!0})])}}};const mX=new RegExp('"',"ug"),HN=[1105920,1112319],VN=se(se(se(se({},{FontAwesome:{normal:"fas",400:"fas"}}),$G),tK),XG),MS=Object.keys(VN).reduce((t,e)=>(t[e.toLowerCase()]=VN[e],t),{}),gX=Object.keys(MS).reduce((t,e)=>{const n=MS[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function vX(t){const e=t.replace(mX,""),n=kK(e,0),r=n>=HN[0]&&n<=HN[1],i=e.length===2?e[0]===e[1]:!1;return{value:kS(i?e[0]:e),isSecondary:r||i}}function yX(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(e),i=isNaN(r)?"normal":r;return(MS[n]||{})[i]||gX[n]}function WN(t,e){const n="".concat(nK).concat(e.replace(":","-"));return new Promise((r,i)=>{if(t.getAttribute(n)!==null)return r();const o=Ld(t.children).filter(f=>f.getAttribute(wS)===e)[0],a=nl.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),c=l.match(aK),u=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return t.removeChild(o),r();if(c&&d!=="none"&&d!==""){const f=a.getPropertyValue("content");let h=yX(l,u);const{value:m,isSecondary:g}=vX(f),y=c[0].startsWith("FontAwesome");let v=$C(h,m),w=v;if(y){const b=NK(m);b.iconName&&b.prefix&&(v=b.iconName,h=b.prefix)}if(v&&!g&&(!o||o.getAttribute(RC)!==h||o.getAttribute(OC)!==w)){t.setAttribute(n,w),o&&t.removeChild(o);const b=sX(),{extra:k}=b;k.attributes[wS]=e,PS(v,h).then(_=>{const E=FC(se(se({},b),{},{icons:{main:_,mask:H3()},prefix:h,iconName:w,extra:k,watchable:!0})),C=Lt.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(C,t.firstChild):t.appendChild(C),C.outerHTML=E.map(P=>jp(P)).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function wX(t){return Promise.all([WN(t,"::before"),WN(t,"::after")])}function bX(t){return t.parentNode!==document.head&&!~iK.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(wS)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function GN(t){if(Xo)return new Promise((e,n)=>{const r=Ld(t.querySelectorAll("*")).filter(bX).map(wX),i=BC.begin("searchPseudoElements");X3(),Promise.all(r).then(()=>{i(),TS(),e()}).catch(()=>{i(),TS(),n()})})}var xX={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=GN,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=Lt}=e;Ie.searchPseudoElements&&GN(n)}}};let KN=!1;var SX={mixout(){return{dom:{unwatch(){X3(),KN=!0}}}},hooks(){return{bootstrap(){BN(CS("mutationObserverCallbacks",{}))},noAuto(){tX()},watch(t){const{observeMutationsRoot:e}=t;KN?TS():BN(CS("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const XN=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,r)=>{const i=r.toLowerCase().split("-"),s=i[0];let o=i.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var kX={mixout(){return{parse:{transform:t=>XN(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=XN(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:r,containerWidth:i,iconWidth:s}=e;const o={transform:"translate(".concat(i/2," 256)")},a="translate(".concat(r.x*32,", ").concat(r.y*32,") "),l="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),c="rotate(".concat(r.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},d={transform:"translate(".concat(s/2*-1," -256)")},f={outer:o,inner:u,path:d};return{tag:"g",attributes:se({},f.outer),children:[{tag:"g",attributes:se({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:se(se({},n.icon.attributes),f.path)}]}]}}}};const Tb={x:0,y:0,width:"100%",height:"100%"};function YN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function _X(t){return t.tag==="g"?t.children:[t]}var CX={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),r=n?I0(n.split(" ").map(i=>i.trim())):H3();return r.prefix||(r.prefix=rl()),t.mask=r,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:r,main:i,mask:s,maskId:o,transform:a}=e;const{width:l,icon:c}=i,{width:u,icon:d}=s,f=vK({transform:a,containerWidth:u,iconWidth:l}),h={tag:"rect",attributes:se(se({},Tb),{},{fill:"white"})},m=c.children?{children:c.children.map(YN)}:{},g={tag:"g",attributes:se({},f.inner),children:[YN(se({tag:c.tag,attributes:se(se({},c.attributes),f.path)},m))]},y={tag:"g",attributes:se({},f.outer),children:[g]},v="mask-".concat(o||Wh()),w="clip-".concat(o||Wh()),b={tag:"mask",attributes:se(se({},Tb),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,y]},k={tag:"defs",children:[{tag:"clipPath",attributes:{id:w},children:_X(d)},b]};return n.push(k,{tag:"rect",attributes:se({fill:"currentColor","clip-path":"url(#".concat(w,")"),mask:"url(#".concat(v,")")},Tb)}),{children:n,attributes:r}}}},EX={provides(t){let e=!1;nl.matchMedia&&(e=nl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],r={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:se(se({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=se(se({},i),{},{attributeName:"opacity"}),o={tag:"circle",attributes:se(se({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:se(se({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:se(se({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:se(se({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:se(se({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:se(se({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:se(se({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},AX={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),r=n===null?!1:n===""?!0:n;return t.symbol=r,t}}}},PX=[bK,dX,fX,hX,pX,xX,SX,kX,CX,EX,AX];$K(PX,{mixoutsTo:mi});mi.noAuto;mi.config;mi.library;mi.dom;const RS=mi.parse;mi.findIconDefinition;mi.toHtml;const NX=mi.icon;mi.layer;mi.text;mi.counter;var q3={exports:{}},TX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",MX=TX,RX=MX;function J3(){}function Z3(){}Z3.resetWarningCache=J3;var OX=function(){function t(r,i,s,o,a,l){if(l!==RX){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Z3,resetWarningCache:J3};return n.PropTypes=n,n};q3.exports=OX();var IX=q3.exports;const et=jc(IX);function qN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qN(Object(n),!0).forEach(function(r){Au(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ly(t){"@babel/helpers - typeof";return ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ly(t)}function Au(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DX(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function LX(t,e){if(t==null)return{};var n=DX(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function OS(t){return jX(t)||$X(t)||FX(t)||BX()}function jX(t){if(Array.isArray(t))return IS(t)}function $X(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function FX(t,e){if(t){if(typeof t=="string")return IS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IS(t,e)}}function IS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function BX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zX(t){var e,n=t.beat,r=t.fade,i=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,d=t.pulse,f=t.fixedWidth,h=t.inverse,m=t.border,g=t.listItem,y=t.flip,v=t.size,w=t.rotation,b=t.pull,k=(e={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":f,"fa-inverse":h,"fa-border":m,"fa-li":g,"fa-flip":y===!0,"fa-flip-horizontal":y==="horizontal"||y==="both","fa-flip-vertical":y==="vertical"||y==="both"},Au(e,"fa-".concat(v),typeof v<"u"&&v!==null),Au(e,"fa-rotate-".concat(w),typeof w<"u"&&w!==null&&w!==0),Au(e,"fa-pull-".concat(b),typeof b<"u"&&b!==null),Au(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(k).map(function(_){return k[_]?_:null}).filter(function(_){return _})}function UX(t){return t=t-0,t===t}function Q3(t){return UX(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var HX=["style"];function VX(t){return t.charAt(0).toUpperCase()+t.slice(1)}function WX(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=Q3(n.slice(0,r)),s=n.slice(r+1).trim();return i.startsWith("webkit")?e[VX(i)]=s:e[i]=s,e},{})}function e5(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(l){return e5(t,l)}),i=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=WX(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[Q3(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=LX(n,HX);return i.attrs.style=Rs(Rs({},i.attrs.style),o),t.apply(void 0,[e.tag,Rs(Rs({},i.attrs),a)].concat(OS(r)))}var t5=!1;try{t5=!0}catch{}function GX(){if(!t5&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function JN(t){if(t&&ly(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(RS.icon)return RS.icon(t);if(t===null)return null;if(t&&ly(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function Mb(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Au({},t,e):{}}var ZN={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Vt=Ot.forwardRef(function(t,e){var n=Rs(Rs({},ZN),t),r=n.icon,i=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=JN(r),d=Mb("classes",[].concat(OS(zX(n)),OS((o||"").split(" ")))),f=Mb("transform",typeof n.transform=="string"?RS.transform(n.transform):n.transform),h=Mb("mask",JN(i)),m=NX(u,Rs(Rs(Rs(Rs({},d),f),h),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!m)return GX("Could not find icon",u),null;var g=m.abstract,y={ref:e};return Object.keys(n).forEach(function(v){ZN.hasOwnProperty(v)||(y[v]=n[v])}),KX(g[0],y)});Vt.displayName="FontAwesomeIcon";Vt.propTypes={beat:et.bool,border:et.bool,beatFade:et.bool,bounce:et.bool,className:et.string,fade:et.bool,flash:et.bool,mask:et.oneOfType([et.object,et.array,et.string]),maskId:et.string,fixedWidth:et.bool,inverse:et.bool,flip:et.oneOf([!0,!1,"horizontal","vertical","both"]),icon:et.oneOfType([et.object,et.array,et.string]),listItem:et.bool,pull:et.oneOf(["right","left"]),pulse:et.bool,rotation:et.oneOf([0,90,180,270]),shake:et.bool,size:et.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:et.bool,spinPulse:et.bool,spinReverse:et.bool,symbol:et.oneOfType([et.bool,et.string]),title:et.string,titleId:et.string,transform:et.oneOfType([et.string,et.object]),swapOpacity:et.bool};var KX=e5.bind(null,Ot.createElement);function n5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=n5(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ve(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=n5(t))&&(r&&(r+=" "),r+=e);return r}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const QN={prefix:"fas",iconName:"info",icon:[192,512,[],"f129","M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"]},XX={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},YX=XX,qX={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},JX={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},ZX=JX,QX={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},eY={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},tY=eY,nY={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},rY=nY,iY={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},sY=iY,eT={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]},oY={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},aY={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},UC=aY,lY={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},cY={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},r5={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},uY={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]},dY={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},fY={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},DS=fY,i5={default:"bg-stone-800 text-white hover:bg-stone-700 focus:ring-stone-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-stone-600 bg-transparent text-white hover:bg-stone-800 focus:ring-stone-500",secondary:"bg-stone-700 text-white hover:bg-stone-600 focus:ring-stone-500",ghost:"bg-transparent text-stone-300 hover:bg-stone-800 hover:text-white focus:ring-stone-500",link:"bg-transparent text-mantis-400 hover:text-mantis-300 hover:underline focus:ring-mantis-500",primary:"bg-mantis-600 text-white hover:bg-mantis-700 focus:ring-mantis-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",error:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},hY={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg"},Ds=x.memo(x.forwardRef(({variant:t="default",size:e="md",isLoading:n=!1,loadingText:r,leftIcon:i,rightIcon:s,disabled:o=!1,fullWidth:a=!1,className:l,children:c,onClick:u,type:d="button","aria-label":f,title:h,...m},g)=>{const y=o||n;return p.jsxs("button",{ref:g,type:d,disabled:y,onClick:u,"aria-label":f,title:h,className:ve("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:opacity-50 disabled:cursor-not-allowed disabled:pointer-events-none","active:scale-95 hover:scale-105",i5[t],hY[e],a&&"w-full",l),...m,children:[n&&p.jsx(Vt,{icon:r5,className:"animate-spin","aria-hidden":"true"}),!n&&i&&p.jsx("span",{className:"flex items-center","aria-hidden":"true",children:i}),p.jsx("span",{children:n&&r?r:c}),!n&&s&&p.jsx("span",{className:"flex items-center","aria-hidden":"true",children:s})]})}));Ds.displayName="Button";const LS=x.memo(x.forwardRef(({icon:t,variant:e="ghost",size:n="md",isLoading:r=!1,disabled:i=!1,className:s,onClick:o,"aria-label":a,title:l,...c},u)=>{const d=i||r,f={sm:"size-8",md:"size-10",lg:"size-12",xl:"size-14"};return p.jsx("button",{ref:u,disabled:d,onClick:o,"aria-label":a,title:l,className:ve("inline-flex items-center justify-center rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:opacity-50 disabled:cursor-not-allowed disabled:pointer-events-none","active:scale-95 hover:scale-105",i5[e],f[n],s),...c,children:r?p.jsx(Vt,{icon:r5,className:"animate-spin","aria-hidden":"true"}):p.jsx("span",{className:"flex items-center justify-center","aria-hidden":"true",children:t})})}));LS.displayName="IconButton";const pY=x.memo(({children:t,orientation:e="horizontal",className:n})=>p.jsx("div",{className:ve("inline-flex",e==="horizontal"?"flex-row":"flex-col",n),role:"group",children:t}));pY.displayName="ButtonGroup";const s5={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2","top-start":"bottom-full left-0 mb-2","top-end":"bottom-full right-0 mb-2","bottom-start":"top-full left-0 mt-2","bottom-end":"top-full right-0 mt-2"},o5={top:"top-full left-1/2 transform -translate-x-1/2 border-t-stone-800",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-b-stone-800",left:"left-full top-1/2 transform -translate-y-1/2 border-l-stone-800",right:"right-full top-1/2 transform -translate-y-1/2 border-r-stone-800","top-start":"top-full left-4 border-t-stone-800","top-end":"top-full right-4 border-t-stone-800","bottom-start":"bottom-full left-4 border-b-stone-800","bottom-end":"bottom-full right-4 border-b-stone-800"},Kh=x.memo(({content:t,children:e,position:n="top",delay:r=200,className:i,maxWidth:s=200,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=x.useState(!1),[u,d]=x.useState(n),f=x.useRef(null),h=x.useRef(null),m=x.useRef(),g=x.useCallback(()=>{a||(m.current=setTimeout(()=>{c(!0)},r))},[a,r]),y=x.useCallback(()=>{m.current&&clearTimeout(m.current),c(!1)},[]);return x.useEffect(()=>{if(!l||!h.current||!f.current)return;const v=h.current,b=f.current.getBoundingClientRect(),k=v.getBoundingClientRect();let _=n;b.left+k.width>window.innerWidth&&(n.includes("right")?_="left":n.includes("top")?_="top-end":n.includes("bottom")&&(_="bottom-end")),b.left-k.width<0&&(n.includes("left")?_="right":n.includes("top")?_="top-start":n.includes("bottom")&&(_="bottom-start")),b.top-k.height<0&&n.includes("top")&&(_="bottom"),b.bottom+k.height>window.innerHeight&&n.includes("bottom")&&(_="top"),d(_)},[l,n]),p.jsxs("div",{ref:f,className:ve("relative inline-block",i),onMouseEnter:g,onMouseLeave:y,onFocus:g,onBlur:y,children:[e,l&&p.jsxs("div",{ref:h,className:ve("absolute z-50 px-3 py-2 text-sm text-white bg-stone-800 rounded-lg shadow-lg border border-stone-600","animate-fade-in",s5[u]),style:{maxWidth:`${s}px`},role:"tooltip",children:[t,o&&p.jsx("div",{className:ve("absolute w-0 h-0 border-4 border-transparent",o5[u])})]})]})});Kh.displayName="Tooltip";const mY=x.memo(({content:t,className:e,size:n="md"})=>{const r={sm:"size-3",md:"size-4",lg:"size-5"};return p.jsx(Kh,{content:t,className:e,children:p.jsx(Vt,{icon:sY,className:ve("text-stone-400 hover:text-stone-300 cursor-help transition-colors",r[n])})})});mY.displayName="InfoTooltip";const gY=x.memo(({content:t,trigger:e,position:n="top",delay:r=200,className:i,maxWidth:s=200,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=x.useState(!1),u=x.useRef(null),d=x.useRef(null),f=x.useRef(),h=x.useCallback(()=>{a||(f.current=setTimeout(()=>{c(!0)},r))},[a,r]),m=x.useCallback(()=>{f.current&&clearTimeout(f.current),c(!1)},[]);return p.jsxs("div",{ref:u,className:ve("relative inline-block",i),onMouseEnter:h,onMouseLeave:m,onFocus:h,onBlur:m,children:[e,l&&p.jsxs("div",{ref:d,className:ve("absolute z-50 px-3 py-2 text-sm text-white bg-stone-800 rounded-lg shadow-lg border border-stone-600","animate-fade-in",s5[n]),style:{maxWidth:`${s}px`},role:"tooltip",children:[t,o&&p.jsx("div",{className:ve("absolute w-0 h-0 border-4 border-transparent",o5[n])})]})]})});gY.displayName="CustomTooltip";const vY=[{name:"Documentacin",url:"https://vonsim.github.io/docs",icon:"icon-[lucide--book-open]"},{name:"GitHub",url:"https://github.com/vonsim/vonsim8",icon:PG},{name:"Reportar Bug",url:"https://github.com/vonsim/vonsim8/issues",icon:"icon-[lucide--bug]"}],a5=x.memo(({name:t,url:e,icon:n})=>p.jsx(Kh,{content:t,position:"top",children:p.jsx(Ds,{variant:"ghost",size:"sm",onClick:()=>window.open(e,"_blank"),className:"hover-lift","aria-label":t,children:typeof n=="string"?p.jsx("span",{className:ve(n,"size-4")}):p.jsx(Vt,{icon:n,className:"size-4"})})}));a5.displayName="SocialLink";const l5=x.memo(()=>p.jsx("footer",{className:"px-4 py-2 text-xs text-white bg-black","data-testid":"footer",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-stone-400",children:" Copyright 2017-2025  III-LIDI, FI, UNLP, UNER"}),p.jsx("div",{className:"flex items-center gap-1","data-testid":"footer-links",children:vY.map(t=>p.jsx(a5,{name:t.name,url:t.url,icon:t.icon},t.name))})]})}));l5.displayName="Footer";function Xh(t,e,n){const r=[];for(let i=0;i<t.length;i++)try{const s=e(t[i],i,t);s&&(Array.isArray(s)?s.forEach(o=>o&&r.push(n(o,i,t))):r.push(n(s,i,t)))}catch(s){r.push(n(s,i,t))}return r}function c5(t,e){const n=e.split(".");let r=t;for(const i of n)if(i in r)r=r[i];else throw new ReferenceError(`Couldn't find path "${e}".`);return r}const u5=["en","es"];function HC(t){return function(n,r,...i){const s=c5(t[n],r);if(typeof s=="function")return s(...i);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${r}`)}}class nn{constructor(e,n){de(this,"start");de(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let r=n[0].start,i=n[0].end;for(const s of n)s.start<r&&(r=s.start),s.end>i&&(i=s.end);return new nn(r,i)}toJSON(){return this.range}}function Yh(t){const e=t.charCodeAt(0);return F.fitsUnsigned(e,8)?e:null}function VC(t){return F.fitsUnsigned(t,8)?String.fromCharCode(t):null}function d5(t){return yY.at(t)??null}const yY=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","","","","","","","","","","","","","SHY","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];var $t,Ut;const at=class at{constructor(e,n){De(this,$t);De(this,Ut);Q(this,$t,e|0),Q(this,Ut,n)}get size(){return A(this,Ut)}is8bits(){return A(this,Ut)===8}is16bits(){return A(this,Ut)===16}get unsigned(){return A(this,$t)}get signed(){return A(this,$t)<=at.maxSignedValue(A(this,Ut))?A(this,$t):A(this,$t)-(at.maxValue(A(this,Ut))+1)}get low(){return this.is8bits()?this:at.fromUnsigned(A(this,$t)&at.maxValue(8),8)}get high(){return this.is8bits()?new at(0,8):at.fromUnsigned(A(this,$t)>>8&at.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return at.fromUnsigned(A(this,$t)&~at.maxValue(8)|e.unsigned,A(this,Ut))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return at.fromUnsigned(A(this,$t)&at.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Ut))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Ut)}`);return(A(this,$t)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Ut))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Ut)}`);return n?at.fromUnsigned(A(this,$t)|1<<e,A(this,Ut)):at.fromUnsigned(A(this,$t)&~(1<<e),A(this,Ut))}add(e){return e=Number(e),at.fromUnsigned(A(this,$t)+e,A(this,Ut))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,$t)===A(e,$t)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,Ut));for(let n=0;n<A(this,Ut);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,$t).toString(16).padStart(A(this,Ut)/4,"0").toUpperCase();case"bin":return A(this,$t).toString(2).padStart(A(this,Ut),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,Ut)===8?VC(A(this,$t))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,Ut)===8?d5(A(this,$t))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,$t)}valueOf(){return A(this,$t)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=at.minSignedValue(n)&&e<=at.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=at.minValue()&&e<=at.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=at.minSignedValue(n)&&e<=at.maxSignedValue(n)}static fromUnsigned(e,n){if(!at.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new at(e,n)}static fromSigned(e,n){if(!at.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new at(e+at.maxValue(n)+1,n):new at(e,n)}static fromNumber(e,n){return e<0?at.fromSigned(e,n):at.fromUnsigned(e,n)}static fromChar(e){const n=Yh(e)??-1;return at.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*at.maxValue(e));return new at(n,e)}static zero(e){return new at(0,e)}};$t=new WeakMap,Ut=new WeakMap;let F=at;var mo;const ma=class ma{constructor(e){De(this,mo);Q(this,mo,e)}get value(){return A(this,mo).unsigned}get byte(){return A(this,mo)}toString(e=!1){let n=A(this,mo).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,mo).toJSON()}valueOf(){return A(this,mo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=ma.MIN_ADDRESS&&e<=ma.MAX_ADDRESS}static from(e){if(e=Number(e),!ma.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=F.fromUnsigned(e,16);return new ma(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let r=e.toString(16).padStart(4,"0").toUpperCase();return n&&(r+="h"),r.slice(-3)}};mo=new WeakMap,de(ma,"MIN_ADDRESS",0),de(ma,"MAX_ADDRESS",255);let Se=ma;var go;const ga=class ga{constructor(e){De(this,go);Q(this,go,e)}get value(){return A(this,go).unsigned}get byte(){return A(this,go)}toString(e=!0){let n=A(this,go).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,go).toJSON()}valueOf(){return A(this,go).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=ga.MIN_ADDRESS&&e<=ga.MAX_ADDRESS}static from(e){if(e=Number(e),!ga.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=F.fromUnsigned(e,8);return new ga(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let r=e.toString(16).padStart(2,"0").toUpperCase();return n&&(r+="h"),r}};go=new WeakMap,de(ga,"MIN_ADDRESS",0),de(ga,"MAX_ADDRESS",127);let di=ga;const tT=Se.from(Se.MAX_ADDRESS).toString(),wY=di.from(di.MAX_ADDRESS).toString(),bY={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${Se.format(t)} is out of range (max memory address: ${tT}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","instruction-out-of-range":t=>`This instruction would be placed in address ${Se.format(t)}, which is outside the memory range (max memory address: ${tT}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${wY}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction  cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea."}},nT=Se.from(Se.MAX_ADDRESS).toString(),xY=di.from(di.MAX_ADDRESS).toString(),SY={"address-has-code":t=>`La direccin de memoria ${Se.format(t)} tiene instrucciones. No se puede usar como direccin de datos.`,"address-out-of-range":t=>`La direccin de memoria ${Se.format(t)} est fuera de rango (direccin mxima de memoria: ${nT}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una direccin de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detect una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instruccin.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vaco. El programa debe tener, al menos, una instruccin END.","end-must-be-the-last-statement":"END debe ser la ltima instruccin.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El nico registro vlido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instruccin no espera ningn operando.","expects-one-operand":"Esta instruccin espera un operando.","expects-two-operands":"Esta instruccin espera dos operandos.","expects-word-register":"Esta instruccin espera un registro de 16 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","instruction-out-of-range":t=>`Esta instruccin se colocara en la direccin ${Se.format(t)}, la cual se encuentra fuera del rango de memoria (direccin mxima de memoria: ${nT}).`,"invalid-interrupt":t=>`${t} no es un nmero de interrupcin vlido.`,"io-address-out-of-range":t=>`La direccin de E/S ${t} est fuera de rango (direccin mxima de memoria E/S: ${xY}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debera apuntar a una constante EQU o a una instruccin. Quizs quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debera apuntar a una instruccin.`,"missing-org":"No hay ningn ORG antes de esta instruccin, por lo que no se puede determinar su ubicacin en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instruccin sera colocada en la direccin ${Se.format(t)}, la cual ya est ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instruccin sera colocada en la direccin ${Se.format(t)}, la cual ya est reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamao.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una direccin de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la direccin.","value-out-of-range":(t,e)=>`El nmero ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carcter solo puede contener un carcter.","empty-character":"Los carcter no puede estar vaco.","invalid-binary":"Nmero binario invlido. Solo puede contener ceros y unos.","invalid-decimal":"Nmero decimal invlido. Solo puede contener dgitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carcter inesperado "${t}".`,"unterminated-character":"Carcter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detect una expresin unaria ambigua. Use parntesis para evitar ambigedades.","expected-address-after-org":"Se esperaba una direccin despus de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instruccin termine.","expected-instruction":t=>`Se esperaba una instruccin, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta despus de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instruccin despus de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" despus de la expresin.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" despus de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El nico registro vlido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Parntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea."}},kY=HC({en:bY,es:SY});class ie extends Error{constructor(n,...r){super();de(this,"code");de(this,"context");de(this,"position");this.code=n,this.context=r,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...r)}at(n){return n&&(n instanceof nn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return kY(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof ie?n:new ie("unexpected-error",n)}}const WC=[[0,F.fromUnsigned(160,8)],[3,F.fromUnsigned(176,8)],[6,F.fromUnsigned(192,8)],[7,F.fromUnsigned(208,8)]],rT=new Set(...WC.map(([t])=>[t]));var xa,Yu;class _Y{constructor(){de(this,"codeMemory",new Set);de(this,"labels",new Map);de(this,"hasORG",!1);De(this,xa,!1);De(this,Yu,!1)}loadStatements(e){if(A(this,xa))throw new Error("Tried to load statements twice");Q(this,xa,!0),this.labels.clear();const n=[];for(const r of e)if("label"in r&&r.label){if(this.labels.has(r.label)){n.push(new ie("duplicated-label",r.label).at(r.position));continue}r.isInstruction()?this.labels.set(r.label,{type:"instruction",address:Se.from(0)}):r.directive==="EQU"?this.labels.set(r.label,{type:"EQU",constant:r}):this.labels.set(r.label,{type:r.directive,address:Se.from(0)})}return n}computeAddresses(e){if(A(this,Yu))throw new Error("Tried to compute addresses twice");Q(this,Yu,!0),this.codeMemory.clear();const n=new Set,r=e.some(u=>u.isInstruction()&&u.instruction==="INT");if(this.hasORG=e.some(u=>u.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new ie("missing-org").at(e[0].position);let i=r&&!this.hasORG?8:this.hasORG?32:0,s=null,o=i;const a=[],l=[],c=[];for(const u of e)u.isInstruction()?a.push(u):u.isOriginChange()?l.push(u):u.isDataDirective()&&c.push(u);if(this.hasORG){const u=[],d=[];return Xh(e,f=>{if(f.isEnd()||f.isDataDirective()&&f.directive==="EQU")return;if(f.isOriginChange()){i=f.newAddress;return}const h=i;if(h===null)throw new ie("missing-org").at(f);const m=f.length,g=h,y=h+m-1;for(const w of d)if(Math.max(g,w.start)<=Math.min(y,w.end)){u.push(new ie("occupied-address",Se.from(g)).at(f));return}d.push({start:g,end:y,statement:f});for(let w=0;w<m;w++){if(!Se.inRange(h+w))throw new ie("instruction-out-of-range",h+w).at(f);const b=Se.from(h+w);if(n.has(b.value))throw new ie("occupied-address",b).at(f);if(r&&rT.has(b.value))throw new ie("reserved-address",b).at(f);n.add(b.value),f.isInstruction()&&this.codeMemory.add(b.value)}const v=Se.from(h);f.setStart(v),f.label&&this.labels.set(f.label,{type:f.isInstruction()?"instruction":f.directive,address:v}),(f.isDataDirective()||f.isInstruction())&&(i+=m,o=Math.max(o,i))},ie.from),u}else return Xh([...a,...l,...c],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const g=d.newAddress;g<32?s=g:i=g;return}let f;if(d.isDataDirective())s===null&&(s=o),f=s;else if(d.isInstruction())f=i;else throw new ie("missing-org").at(d);const h=d.length;for(let g=0;g<h;g++){if(!Se.inRange(f+g))throw new ie("instruction-out-of-range",f+g).at(d);const y=Se.from(f+g);if(n.has(y.value))throw new ie("occupied-address",y).at(d);if(r&&rT.has(y.value))throw new ie("reserved-address",y).at(d);n.add(y.value),d.isInstruction()&&this.codeMemory.add(y.value)}const m=Se.from(f);if(d.setStart(m),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:m}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=h}else d.isInstruction()&&(i+=h,o=Math.max(o,i))},ie.from)}labelExists(e){if(!A(this,xa))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,xa))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,xa))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,Yu))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof Se&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}xa=new WeakMap,Yu=new WeakMap;const CY=["AL","BL","CL","DL","AH","BH","CH","DH"],f5=["AX","BX","CX","DX","SP"],cy=[...CY,...f5],GC=["DB","DW","EQU"],KC=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],EY=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...cy,...KC,...GC];class AY{constructor(e,n,r){de(this,"type");de(this,"lexeme");de(this,"position");this.type=e,this.lexeme=n,this.position=r}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class PY{constructor(e){de(this,"scanned",!1);de(this,"tokens",[]);de(this,"position",new nn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new nn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new ie("lexer.unterminated-character").at(this.position);if(Yh(this.peek())===null)throw new ie("lexer.only-ascii").at(new nn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new ie("lexer.empty-character").at(this.position);if(n>=2)throw new ie("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new ie("lexer.unterminated-string").at(this.position);if(Yh(this.peek())===null)throw new ie("lexer.only-ascii").at(new nn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()===".")throw new ie("lexer.unexpected-character",".").at(new nn(this.position.end,this.position.end+1));if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new ie("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new ie("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){if(e==="."&&this.isDigit(this.peek()))throw new ie("lexer.unexpected-character",".").at(new nn(this.position.start,this.position.start+1));for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();EY.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new ie("lexer.unexpected-character",e).at(this.position)}return this.position=new nn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new AY(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new nn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class jn{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}de(jn,"numberLiteral",(...e)=>new NY(...e)),de(jn,"label",(...e)=>new TY(...e)),de(jn,"unaryOperation",(...e)=>new MY(...e)),de(jn,"binaryOperation",(...e)=>new RY(...e));class NY extends jn{constructor(n,r){super(r);de(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let TY=class extends jn{constructor(n,r,i){super(i);de(this,"type","label");this.value=n,this.offset=r}evaluate(n){if(!n.labelExists(this.value))throw new ie("label-not-found",this.value).at(this.position);const r=n.getLabelType(this.value);if((r==="DB"||r==="DW")&&!this.offset)throw new ie("label-should-be-a-number",this.value).at(this.position);if((r==="EQU"||r==="instruction")&&this.offset)throw new ie("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class MY extends jn{constructor(n,r,i){super(i);de(this,"type","unary-operation");this.operator=n,this.right=r}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class RY extends jn{constructor(n,r,i,s){super(s);de(this,"type","binary-operation");this.left=n,this.operator=r,this.right=i}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class L0{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var vo;class h5 extends L0{constructor(n,r,i){super(i);de(this,"type","data-directive");de(this,"label");de(this,"values");De(this,vo,null);this.values=n,this.label=r}get start(){if(A(this,vo)===null)throw new Error("Start not set");return A(this,vo)}setStart(n){if(A(this,vo)!==null)throw new Error("Start already set");Q(this,vo,n)}toJSON(){return{...super.toJSON(),...A(this,vo)?{start:A(this,vo).toJSON()}:{},directive:this.directive,label:this.label}}}vo=new WeakMap;var lc,Sa,qu;class OY extends h5{constructor(n,r,i){super(n,r,i);de(this,"directive","EQU");De(this,lc,"not-processed");De(this,Sa,null);De(this,qu,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,qu)??((n=A(this,Sa))==null?void 0:n.toJSON())??this.values.map(r=>r.toJSON())}}validate(){if(A(this,Sa))throw new Error("Constant already validated");if(!this.label)throw new ie("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new ie("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new ie("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new ie("cannot-be-unassinged","EQU").at(n);Q(this,Sa,n.value)}evaluateExpressions(n){if(!A(this,Sa))throw new Error("Constant not validated");if(A(this,lc)==="processed")return A(this,qu);if(A(this,lc)==="processing")throw new ie("circular-reference").at(this.position);Q(this,lc,"processed");const r=A(this,Sa).evaluate(n);return Q(this,lc,"processed"),Q(this,qu,r),r}evaluate(n){return this.evaluateExpressions(n)}}lc=new WeakMap,Sa=new WeakMap,qu=new WeakMap;const $f=Symbol("unassigned");var _r,Yi;class IY extends h5{constructor(n,r,i,s){super(r,i,s);de(this,"size");De(this,_r,null);De(this,Yi,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,_r))throw new Error("Data directive not validated");return A(this,_r).length*(this.size/8)}getValues(){if(!A(this,Yi))throw new Error("Data directive not evaluated");return A(this,Yi)}toJSON(){return{...super.toJSON(),values:(A(this,Yi)??A(this,_r)??this.values).map(n=>n===$f?"?":n.toJSON())}}validate(){if(A(this,_r))throw new Error("Data directive already validated");Q(this,_r,[]);for(const n of this.values)if(n.isUnassigned())A(this,_r).push($f);else if(n.isString()){if(this.directive!=="DB")throw new ie("cannot-accept-strings",this.directive).at(n);const r=n.value;for(let i=0;i<r.length;i++){const s=Yh(r[i]);if(s===null)throw new Error("Invalid character, should not happen");const o=new nn(n.position.start+i,n.position.start+i+1),a=jn.numberLiteral(s,o);A(this,_r).push(a)}}else A(this,_r).push(n.value);if(A(this,_r).length===0)throw new ie("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,_r))throw new Error("Data directive not validated");if(A(this,Yi))throw new Error("Data directive already evaluated");Q(this,Yi,[]);const r=Xh(A(this,_r),i=>{if(i===$f)A(this,Yi).push($f);else{const s=i.evaluate(n);if(!F.fits(s,this.size))throw new ie("value-out-of-range",s,this.size).at(this);const o=F.fromNumber(s,this.size);A(this,Yi).push(o)}},ie.from);return r.length>0&&Q(this,Yi,null),r}}_r=new WeakMap,Yi=new WeakMap;class XC{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class DY extends XC{constructor(n,r){super(r);de(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class LY extends XC{constructor(n){super(n);de(this,"type","unassigned")}}class jY extends XC{constructor(n){super(n.position);de(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function $Y(t,e,n){const r=nn.merge(t.position,...e.map(i=>i.position));switch(t.type){case"DB":case"DW":return new IY(t.type,e,n,r);case"EQU":return new OY(e,n,r)}}class Rb extends L0{constructor(n){super(n);de(this,"type","end")}}function ql(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var yo;class Bc extends L0{constructor(n,r,i){super(i);de(this,"type","instruction");de(this,"label");de(this,"operands");De(this,yo,null);this.operands=n,this.label=r}getOperands(){return this.operands}get start(){if(A(this,yo)===null)throw new Error("Start not set");return A(this,yo)}setStart(n){if(A(this,yo)!==null)throw new Error("Start already set");Q(this,yo,n)}toJSON(){return{...super.toJSON(),...A(this,yo)?{start:A(this,yo).toJSON()}:{},instruction:this.instruction,label:this.label}}}yo=new WeakMap;var Jn,yi;class FY extends Bc{constructor(n,r,i,s){super(r,i,s);De(this,Jn,null);De(this,yi,null);this.instruction=n}get length(){if(!A(this,Jn))throw new Error("Instruction not validated");const{mode:n,size:r,out:i,src:s}=A(this,Jn);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&i.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=r/8),o}get operation(){if(!A(this,yi))throw new Error("Instruction not evaluated");return A(this,yi)}toBytes(){const{mode:n,size:r,out:i,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],r===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(ql(i)&3)<<2,o[0]|=(ql(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(ql(i)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(ql(i)&3)<<2;break}case"mem<-reg":{i.mode==="direct"?(o[0]=32,o.push(i.address.byte.low.unsigned)):o[0]=65,o[0]|=(ql(s)&3)<<2;break}case"mem<-imd":{i.mode==="direct"?(o[0]=44,o.push(i.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),r===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,yi)??A(this,Jn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Jn))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ie("expects-two-operands").at(this);const[r,i]=this.operands;if(r.isRegister()){if(i.isRegister()){if(r.size!==i.size)throw new ie("size-mismatch",i.size,r.size).at(this);Q(this,Jn,{mode:"reg<-reg",size:r.size,out:r.value,src:i.value});return}if(i.isDirectAddress()){if(i.size!=="auto"&&i.size!==r.size)throw new ie("size-mismatch",i.size,r.size).at(this);Q(this,Jn,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"direct",address:i.value}});return}if(i.isIndirectAddress()){if(i.size!=="auto"&&i.size!==r.size)throw new ie("size-mismatch",i.size,r.size).at(this);Q(this,Jn,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"indirect"}});return}const s=i.getAsDirectAddress(n);if(s){if(s.size!==r.size)throw new ie("size-mismatch",s.size,r.size).at(this);Q(this,Jn,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"direct",address:s.expression}});return}Q(this,Jn,{mode:"reg<-imd",size:r.size,out:r.value,src:i.value});return}else{let s,o;if(r.isIndirectAddress())s=r.size,o={mode:"indirect"};else if(r.isDirectAddress())s=r.size,o={mode:"direct",address:r.value};else{const a=r.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new ie("destination-cannot-be-immediate").at(r)}if(i.isRegister()){if(s!=="auto"&&s!==i.size)throw new ie("size-mismatch",s,i.size).at(this);Q(this,Jn,{mode:"mem<-reg",size:i.size,out:o,src:i.value});return}if(i.isNumberExpression()){if(i.getAsDirectAddress(n))throw new ie("double-memory-access").at(this);s==="auto"&&(s=8),Q(this,Jn,{mode:"mem<-imd",size:s,out:o,src:i.value});return}throw new ie("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,Jn))throw new Error("Instruction not validated");if(A(this,yi))throw new Error("Instruction aready evaluated");const{mode:r,size:i,out:s,src:o}=A(this,Jn),a=l=>{const c=l.evaluate(n);if(!Se.inRange(c))throw new ie("address-out-of-range",c).at(l);const u=Se.from(c);if(n.addressIsReserved(u))throw new ie("address-has-code",u).at(l);return u};switch(r){case"reg<-reg":{Q(this,yi,{mode:r,size:i,out:s,src:o});return}case"reg<-mem":{Q(this,yi,{mode:r,size:i,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!F.fits(l,i))throw new ie("value-out-of-range",l,i).at(o);const c=F.fromNumber(l,i);Q(this,yi,{mode:r,size:i,out:s,src:c});return}case"mem<-reg":{Q(this,yi,{mode:r,size:i,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!F.fits(l,i))throw new ie("value-out-of-range",l,i).at(o);const c=F.fromNumber(l,i);Q(this,yi,{mode:r,size:i,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return r}}}Jn=new WeakMap,yi=new WeakMap;var As,wo;class BY extends Bc{constructor(n,r,i,s){super(r,i,s);De(this,As,null);De(this,wo,null);de(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,wo))throw new Error("Instruction not evaluated");return A(this,wo)}toJSON(){return{...super.toJSON(),...A(this,wo)?{value:A(this,wo).toJSON()}:A(this,As)?{initialValue:A(this,As).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,As))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ie("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new ie("expects-immediate").at(n);Q(this,As,n.value)}evaluateExpressions(n){if(!A(this,As))throw new Error("Instruction not validated");if(A(this,wo))throw new Error("Instruction aready evaluated");const r=A(this,As).evaluate(n);if(!F.fitsUnsigned(r,8))throw new ie("invalid-interrupt",r).at(A(this,As));Q(this,wo,F.fromUnsigned(r,8))}}As=new WeakMap,wo=new WeakMap;var qi,bo,XO;let zY=(XO=class extends Bc{constructor(n,r,i,s){super(r,i,s);De(this,qi,null);De(this,bo,null);this.instruction=n}get length(){if(!A(this,qi))throw new Error("Instruction not validated");return A(this,qi).port==="fixed"?2:1}toBytes(){const n=[],r={IN:216,OUT:220};return n[0]=r[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,bo)===null)throw new Error("Operation not set");return A(this,bo)}toJSON(){return{...super.toJSON(),...A(this,bo)??A(this,qi)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,qi))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ie("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],r=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new ie("expects-ax").at(n);const i=n.value==="AX"?16:8;if(r.isRegister()){if(r.value!=="DX")throw new ie("expects-dx").at(r);Q(this,qi,{port:"variable",size:i});return}if(r.isNumberExpression()){Q(this,qi,{port:"fixed",size:i,address:r.value});return}throw new ie("expects-immediate").at(r)}evaluateExpressions(n){if(!A(this,qi))throw new Error("Instruction not validated");if(A(this,bo))throw new Error("Instruction aready evaluated");const r=A(this,qi);if(r.port==="fixed"){const i=r.address.evaluate(n);if(!di.inRange(i))throw new ie("io-address-out-of-range",i).at(this);const s=di.from(i);Q(this,bo,{port:"fixed",size:r.size,address:s})}else Q(this,bo,{port:"variable",size:r.size})}},qi=new WeakMap,bo=new WeakMap,XO);var xo,Ps,YO;let UY=(YO=class extends Bc{constructor(n,r,i,s){super(r,i,s);De(this,xo,null);De(this,Ps,null);de(this,"length",2);this.instruction=n}toBytes(){const n=[],r={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(r[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,Ps)===null)throw new Error("Instruction not evaluated");return A(this,Ps)}toJSON(){return{...super.toJSON(),...A(this,Ps)?{address:A(this,Ps).toJSON()}:A(this,xo)?{jumpTo:A(this,xo)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,xo))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ie("expects-one-operand").at(this);const r=this.operands[0];if(!r.isNumberExpression()||!r.value.isLabel()&&!r.value.isNumberLiteral())throw new ie("expects-label").at(r);if(r.value.isLabel()){const i=r.value.value,s=n.getLabelType(i);if(!s)throw new ie("label-not-found",i).at(r);if(s!=="instruction")throw new ie("label-should-be-an-instruction",i).at(r);Q(this,xo,i)}else if(r.value.isNumberLiteral()){const i=r.value.value;if(!Se.inRange(i))throw new ie("address-out-of-range",i).at(r);Q(this,Ps,Se.from(i))}}evaluateExpressions(n){if(!A(this,Ps)&&A(this,xo)){const r=n.getLabelValue(A(this,xo));if(!Se.inRange(r))throw new ie("address-out-of-range",r).at(this);Q(this,Ps,Se.from(r))}}},xo=new WeakMap,Ps=new WeakMap,YO);var Ns,qO;let HY=(qO=class extends Bc{constructor(n,r,i,s){super(r,i,s);De(this,Ns,null);de(this,"length",1);this.instruction=n}toBytes(){let r={PUSH:208,POP:212}[this.instruction];return r|=ql(this.register),new Uint8Array([r])}get register(){if(!A(this,Ns))throw new Error("Instruction not evaluated");return A(this,Ns)}toJSON(){return{...super.toJSON(),...A(this,Ns)?{register:A(this,Ns)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Ns))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ie("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new ie("expects-word-register").at(n);Q(this,Ns,n.value)}evaluateExpressions(){if(!A(this,Ns))throw new Error("Instruction not validated")}},Ns=new WeakMap,qO);var Gr,Ts;class VY extends Bc{constructor(n,r,i,s){super(r,i,s);De(this,Gr,null);De(this,Ts,null);this.instruction=n}get length(){if(!A(this,Gr))throw new Error("Instruction not validated");const{mode:n}=A(this,Gr);let r=1;return n==="mem-direct"&&(r+=1),r}toBytes(){const n=[],r={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=r[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=ql(this.operation.reg);break}case"mem-direct":{const i=this.operation.address.byte;n.push(i.low.unsigned);break}case"mem-indirect":break;default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,Ts))throw new Error("Instruction not evaluated");return A(this,Ts)}toJSON(){return{...super.toJSON(),...A(this,Ts)??A(this,Gr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Gr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ie("expects-one-operand").at(this);const r=this.operands[0];if(r.isRegister()){Q(this,Gr,{mode:"reg",size:r.size,reg:r.value});return}if(r.isDirectAddress()){if(r.size==="auto")throw new ie("unknown-size").at(r);Q(this,Gr,{mode:"mem-direct",size:r.size,address:r.value});return}if(r.isIndirectAddress()){if(r.size==="auto")throw new ie("unknown-size").at(r);Q(this,Gr,{mode:"mem-indirect",size:r.size});return}const i=r.getAsDirectAddress(n);if(i){Q(this,Gr,{mode:"mem-direct",size:i.size,address:i.expression});return}throw new ie("destination-cannot-be-immediate").at(r)}evaluateExpressions(n){if(!A(this,Gr))throw new Error("Instruction not validated");if(A(this,Ts))throw new Error("Instruction aready evaluated");const r=A(this,Gr);switch(r.mode){case"reg":{Q(this,Ts,{mode:"reg",size:r.size,reg:r.reg});return}case"mem-direct":{const i=r.address.evaluate(n);if(!Se.inRange(i))throw new ie("address-out-of-range",i).at(r.address);const s=Se.from(i);if(n.addressIsReserved(s))throw new ie("address-has-code",s).at(r.address);Q(this,Ts,{mode:"mem-direct",size:r.size,address:s});return}case"mem-indirect":{Q(this,Ts,{mode:"mem-indirect",size:r.size});return}default:return r}}}Gr=new WeakMap,Ts=new WeakMap;var Ju;class WY extends Bc{constructor(n,r,i,s){super(r,i,s);De(this,Ju,!1);de(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,Ju))throw new Error("Instruction already validated");if(this.operands.length>0)throw new ie("expects-no-operands").at(this);Q(this,Ju,!0)}evaluateExpressions(){if(!A(this,Ju))throw new Error("Instruction not validated")}}Ju=new WeakMap;class j0{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class GY extends j0{constructor(n){super(n.position);de(this,"type","register");de(this,"value");this.value=n.type}get size(){return f5.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class KY extends j0{constructor(n,r){super(r);de(this,"type","indirect-address");de(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class XY extends j0{constructor(n,r,i){super(i);de(this,"type","direct-address");de(this,"size");this.value=n,r?this.size=r==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class uy extends j0{constructor(n){super(n.position);de(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return uy.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,r){if(n.isLabel()){const i=n;if(i.offset)return!1;if(!r.labelExists(i.value))throw new ie("label-not-found",i.value).at(n.position);const s=r.getLabelType(i.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:jn.label(i.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const i=uy.recursiveGetAsDirectAddress(n.left,r);return i?{size:i.size,expression:jn.binaryOperation(i.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function iT(t,e,n){const r=nn.merge(t.position,...e.map(i=>i.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new WY(t.type,e,n,r);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new FY(t.type,e,n,r);case"NEG":case"INC":case"DEC":case"NOT":return new VY(t.type,e,n,r);case"PUSH":case"POP":return new HY(t.type,e,n,r);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new UY(t.type,e,n,r);case"IN":case"OUT":return new zY(t.type,e,n,r);case"INT":return new BY(t.type,e,n,r)}}class YY extends L0{constructor(n,r){super(r);de(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let qY=class{constructor(e){de(this,"tokens");de(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new ie("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new ie("parser.expected-address-after-org")),r=this.parseNumber(n);return this.endOfStatement(),new YY(r,nn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new ie("end-must-be-the-last-statement").at(e);return new Rb(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new Rb(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new Rb(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...GC);if(e&&!n)throw new ie("parser.unexpected-identifier").at(e);if(!n)return null;const r=(e==null?void 0:e.lexeme.toUpperCase())||null,i=[this.dataDirectiveValue()];for(;this.match("COMMA");)i.push(this.dataDirectiveValue());return this.endOfStatement(),$Y(n,i,r)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new DY(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new LY(e.position)}return new jY(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...KC);if(e&&!n){const s=this.peek();throw new ie("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const r=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return iT(n,[],r);const i=[this.instructionOperand()];for(;this.match("COMMA");)i.push(this.instructionOperand());return this.endOfStatement(),iT(n,i,r)}instructionOperand(){if(this.match(...cy)){const n=this.previous();return new GY(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new ie("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...cy)){if(!this.check("BX","BL"))throw new ie("parser.indirect-addressing-must-be-bx");const r=this.advance(),i=this.consume("RIGHT_BRACKET",new ie("parser.expected-literal-after-literal","]",r.lexeme));return new KY(e==null?void 0:e.type,nn.merge(e==null?void 0:e.position,n.position,i.position))}else{const r=this.numberExpression(),i=this.consume("RIGHT_BRACKET",new ie("parser.expected-literal-after-expression","]"));return new XY(r,e==null?void 0:e.type,nn.merge(e==null?void 0:e.position,n.position,i.position))}}else if(e)throw new ie("parser.expected-literal-after-literal","[","PTR");return new uy(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const r=this.match(...e);if(r)return r;throw n||(n=new ie("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new ie("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const r=this.previous(),i=this.parseNumber(r);return jn.numberLiteral(i,r.position)}if(this.match("CHARACTER")){const r=this.previous(),i=Yh(r.lexeme.slice(1,-1));return jn.numberLiteral(i,r.position)}if(this.match("LEFT_PAREN")){const r=this.numberExpression();return this.consume("RIGHT_PAREN",new ie("parser.unclosed-parenthesis")),r}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new ie("parser.expected-label-after-offset").at(this.peek());if(!n)throw new ie("parser.expected-argument").at(this.peek());return jn.label(n.lexeme.toUpperCase(),e!==null,nn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new ie("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return jn.unaryOperation(e.type==="PLUS"?"+":"-",n,nn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=jn.binaryOperation(e,"*",n,nn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),r=this.factorNE();e=jn.binaryOperation(e,n.type==="PLUS"?"+":"-",r,nn.merge(e.position,r.position))}return e}numberExpression(){return this.termNE()}};function p5(t){try{const n=new PY(t).scanTokens(),i=new qY(n).parse();if(!i.at(-1))throw new ie("empty-program");let o=[];const a=new _Y;if(o=a.loadStatements(i),o.length>0)return{success:!1,errors:o};if(o=Xh(i,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},ie.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(i),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=Xh(i,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},ie.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[ie.from(e)]}}}class gs{constructor(e){de(this,"computer");this.computer=e.computer}}const JY=t=>Se.format(t).slice(-2),ZY=JY(Se.MAX_ADDRESS),QY={"address-has-instruction":t=>`Memory address ${Se.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${Se.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${Se.format(t)} is out of range (max memory address: ${ZY}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${di.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${Se.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},eq=Se.from(Se.MAX_ADDRESS).toString(),tq={"address-has-instruction":t=>`La direccin de memoria ${Se.format(t)} tiene una instruccin, y no se puede escribir.`,"address-is-reserved":t=>`La direccin de memoria ${Se.format(t)} est reservada, y no se puede escribir.`,"address-out-of-range":t=>`La direccin de memoria ${Se.format(t)} est fuera de rango (direccin mxima de memoria: ${eq}).`,"device-not-connected":t=>`"${t}" no est conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontr ningn mdulo conectado a la direccin de memoria E/S ${di.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instruccin en la direccin de memoria ${Se.format(t)} pero no se encontr ninguna.`,"no-program":"No hay ningn programa cargado. Ensambl antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},nq=HC({en:QY,es:tq});class Gt extends Error{constructor(n,...r){super();de(this,"code");de(this,"context");this.code=n,this.context=r,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...r)}translate(n){return nq(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof Gt?n:new Gt("unexpected-error",n)}}class Yo{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,r){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new Gt("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),r||(yield*e.cpu.getMBR(n))}}var Qy,m5;class rq extends Yo{constructor(){super(...arguments);De(this,Qy)}get operation(){return this.statement.operation}*execute(n){const{mode:r,size:i,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:St(this,Qy,m5).call(this),willUse:{id:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct",ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"&&this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},r==="reg<-reg"||r==="reg<-mem"||r==="reg<-imd")r!=="reg<-mem"&&(i===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(this.operation.mode==="mem<-imd"?yield*n.cpu.getMBR("id.l"):yield*n.cpu.getMBR("left.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(r==="reg<-reg"||r==="mem<-reg")i===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(r==="reg<-imd"||r==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),i===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}r==="reg<-mem"&&(i===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}r==="mem<-imd"&&(yield*n.cpu.copyByteRegister("id.l","left.l")),yield{type:"cpu:cycle.update",phase:"execute"};const a=i===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=i===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=F.fromSigned(d,i),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned+l.unsigned+d;f>F.maxValue(i)?(u.CF=!0,c=F.fromUnsigned(f-F.maxValue(i)-1,i)):(u.CF=!1,c=F.fromUnsigned(f,i)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned-l.unsigned-d;f<0?(u.CF=!0,c=F.fromUnsigned(f+F.maxValue(i)+1,i)):(u.CF=!1,c=F.fromUnsigned(f,i)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},r==="reg<-reg"||r==="reg<-mem"||r==="reg<-imd")i===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(i===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Qy=new WeakSet,m5=function(){const{mode:n,out:r,src:i}=this.operation;switch(n){case"reg<-reg":return[r,i];case"reg<-mem":{const s=i.mode==="direct"?i.address.toString():"BL";return[r,`[${s}]`]}case"reg<-imd":return[r,`${i.toString("hex")}h`];case"mem<-reg":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,i];case"mem<-imd":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,`${i.toString("hex")}h`];default:return n}};var e0,g5;class iq extends Yo{constructor(){super(...arguments);De(this,e0)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:St(this,e0,g5).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const r=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let i;const s={};switch(this.name){case"NOT":{i=F.fromSigned(~r.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{i=F.fromSigned(-r.signed,this.operation.size),s.CF=!r.isZero(),s.OF=r.signed===F.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",F.fromSigned(1,16));const o=r.unsigned+1;o>F.maxValue(this.operation.size)?(s.CF=!0,i=F.fromUnsigned(o-F.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,i=F.fromUnsigned(o,this.operation.size)),s.OF=r.signed>=0&&i.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",F.fromSigned(1,16));const o=r.unsigned-1;o<0?(s.CF=!0,i=F.fromUnsigned(o+F.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,i=F.fromUnsigned(o,this.operation.size)),s.OF=r.signed<0&&i.signed>=0;break}}if(s.ZF=i.isZero(),s.SF=i.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,i,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}e0=new WeakSet,g5=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class sq extends Yo{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var t0,v5;class oq extends Yo{constructor(){super(...arguments);De(this,t0)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:St(this,t0,v5).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new Gt("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",r=>r.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Gt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",r=>r.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Gt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}t0=new WeakSet,v5=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class aq extends Yo{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:!1,ri:this.name==="CALL"}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(!(yield*e.cpu.pushToStack("IP.l")))return!1;yield*e.cpu.copyByteRegister("ri.l","IP.l")}else yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class lq extends Yo{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function jS(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function cq(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var n0,y5;class uq extends Yo{constructor(){super(...arguments);De(this,n0)}get operation(){return this.statement.operation}*execute(n){const{mode:r,size:i,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:St(this,n0,y5).call(this),willUse:{id:!1,ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):(this.operation.mode==="mem<-reg"||this.operation.mode==="reg<-mem")&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(i===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"ri.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},r){case"reg<-reg":return i===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(i===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return i===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=cq(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"||(yield*n.cpu.copyByteRegister("BL","ri.l")),yield*n.cpu.setMAR("ri"),!(!(yield*n.cpu.useBus("mem-write"))||i===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return r}}}n0=new WeakSet,y5=function(){const{mode:n,out:r,src:i}=this.operation;switch(n){case"reg<-reg":return[r,i];case"reg<-mem":{const s=i.mode==="direct"?i.address.toString():"BL";return[r,`[${s}]`]}case"reg<-imd":return[r,`${i.toString("hex")}h`];case"mem<-reg":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,i];case"mem<-imd":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,`${i.toString("hex")}h`];default:return n}};class dq extends Yo{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class fq extends Yo{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const r=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(r)}else{const r=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(r))}}}function hq(t){switch(t.instruction){case"MOV":return new uq(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new rq(t);case"NOT":case"NEG":case"INC":case"DEC":return new iq(t);case"IN":case"OUT":return new oq(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new fq(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new aq(t);case"RET":case"IRET":return new dq(t);case"INT":return new sq(t);case"CLI":case"STI":case"NOP":case"HLT":return new lq(t)}}function pq(t){for(const[e,n]of WC)if(n.unsigned===t.unsigned)return e;return null}function*mq(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 3:{yield{type:"cpu:int.3"};break}case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new Gt("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",i=>i.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new Gt("device-not-connected","keyboard")},!1;const r=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",r),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new Gt("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",F.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const r=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(r);else return yield{type:"cpu:error",error:new Gt("device-not-connected","screen")},!1;n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",F.fromUnsigned(1,16));const i=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",i,{CF:!1,OF:i.signed<0,SF:i.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",F.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===F.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var Zu,Ke,wi,Cr,cn,su,vi,JO;let gq=(JO=class extends gs{constructor(n){super(n);De(this,cn);De(this,Zu);De(this,Ke);De(this,wi);De(this,Cr);n.data==="unchanged"?(Q(this,Ke,A(n.previous.cpu,Ke)),Q(this,wi,A(n.previous.cpu,wi)),Q(this,Cr,A(n.previous.cpu,Cr))):(Q(this,Ke,{AX:F.zero(16),BX:F.zero(16),CX:F.zero(16),DX:F.zero(16),SP:F.zero(16),IP:F.zero(16),IR:F.zero(8),ri:F.zero(16),id:F.zero(16),left:F.zero(16),right:F.zero(16),result:F.zero(16),FLAGS:F.zero(16)}),Q(this,wi,F.zero(16)),Q(this,Cr,F.zero(8))),A(this,Ke).SP=F.fromUnsigned(Se.MAX_ADDRESS,16);const r=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),i=n.hasORG??!1;let s;i?s=32:r?s=8:s=0,A(this,Ke).IP=F.fromUnsigned(s,16),A(this,Ke).ri=F.fromUnsigned(0,16),A(this,Ke).id=F.fromUnsigned(0,16),St(this,cn,vi).call(this,"IF",!0),Q(this,Zu,new Map);for(const o of n.program.instructions){const a=hq(o);A(this,Zu).set(a.start.value,a)}}*run(){var n;for(;;){const r=A(this,Ke).IP,i=pq(r);if(i!==null){if(!(yield*mq(this.computer,i)))return}else{const s=A(this,Zu).get(r.unsigned);if(!s){yield{type:"cpu:error",error:new Gt("no-instruction",A(this,Ke).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",F.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l"))))return!1;const r=F.fromUnsigned(n.unsigned,8);return yield*this.updateByteRegister("ri.l",r),yield*this.copyWordRegister("ri","IP"),yield*this.setMAR("ri"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("IP.l"),!0):!1}toJSON(){return{...Object.entries(A(this,Ke)).reduce((r,[i,s])=>({...r,[i]:s.toJSON()}),{}),MAR:A(this,wi).toJSON(),MBR:A(this,Cr).toJSON()}}getRegister(n){const[r,i]=jS(n);return i==="low"?A(this,Ke)[r].low:i==="high"?A(this,Ke)[r].high:A(this,Ke)[r]}*copyByteRegister(n,r){const i=this.getRegister(n);St(this,cn,su).call(this,r,i),yield{type:"cpu:register.copy",size:8,src:n,dest:r}}*copyWordRegister(n,r){const i=this.getRegister(n);St(this,cn,su).call(this,r,i.withHigh(F.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:r}}*updateByteRegister(n,r){r=typeof r=="function"?r(this.getRegister(n)):r,St(this,cn,su).call(this,n,r),yield{type:"cpu:register.update",size:8,register:n,value:r}}*updateWordRegister(n,r){r=typeof r=="function"?r(this.getRegister(n)):r,St(this,cn,su).call(this,n,r),yield{type:"cpu:register.update",size:16,register:n,value:r}}getFlag(n){switch(n){case"CF":return A(this,Ke).FLAGS.bit(1);case"ZF":return A(this,Ke).FLAGS.bit(0);case"SF":return A(this,Ke).FLAGS.bit(3);case"IF":return A(this,Ke).FLAGS.bit(4);case"OF":return A(this,Ke).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&St(this,cn,vi).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&St(this,cn,vi).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&St(this,cn,vi).call(this,"SF",n.SF),typeof n.IF=="boolean"&&St(this,cn,vi).call(this,"IF",n.IF),typeof n.OF=="boolean"&&St(this,cn,vi).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,Ke).FLAGS}}*aluExecute(n,r,i){A(this,Ke).result=r.is8bits()?A(this,Ke).result.withLow(r):r,typeof i.CF=="boolean"&&St(this,cn,vi).call(this,"CF",i.CF),typeof i.ZF=="boolean"&&St(this,cn,vi).call(this,"ZF",i.ZF),typeof i.SF=="boolean"&&St(this,cn,vi).call(this,"SF",i.SF),typeof i.IF=="boolean"&&St(this,cn,vi).call(this,"IF",i.IF),typeof i.OF=="boolean"&&St(this,cn,vi).call(this,"OF",i.OF),yield{type:"cpu:alu.execute",operation:n,size:r.size,result:A(this,Ke).result,flags:A(this,Ke).FLAGS}}*setMAR(n){const r=this.getRegister(n);Q(this,wi,r.withHigh(F.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){St(this,cn,su).call(this,n,A(this,Cr)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const r=this.getRegister(n);Q(this,Cr,r),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const r=yield*this.computer.memory.read(A(this,wi));return r?(Q(this,Cr,r),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,wi),A(this,Cr)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const r=yield*this.computer.io.chipSelect(A(this,wi).low);if(!r)return!1;yield{type:"cpu:rd.on"};const i=yield*this.computer.io.read(r);return i?(Q(this,Cr,i),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const r=yield*this.computer.io.chipSelect(A(this,wi).low);return!r||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(r,A(this,Cr))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const r=yield*this.computer.io.pic.handleINTR();return Q(this,Cr,r),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let r=this.getRegister("SP");return Se.inRange(r.unsigned-1)?(r=r.add(-1),yield*this.updateWordRegister("SP",r),yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?Se.inRange(r.unsigned-1)?!0:(yield{type:"cpu:error",error:new Gt("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new Gt("stack-overflow")},!1)}*popFromStack(n){let r=this.getRegister("SP");return Se.inRange(r)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),r=r.add(1),yield*this.updateWordRegister("SP",r),!0):!1):(yield{type:"cpu:error",error:new Gt("stack-underflow")},!1)}},Zu=new WeakMap,Ke=new WeakMap,wi=new WeakMap,Cr=new WeakMap,cn=new WeakSet,su=function(n,r){const[i,s]=jS(n);if(s===null){if(A(this,Ke)[i].size!==r.size)throw new TypeError(`Cannot set register ${n} with value ${r} of different size`);A(this,Ke)[i]=r}else{if(!r.is8bits())throw new TypeError(`Cannot set register ${n} with value ${r} of different size`);s==="low"?A(this,Ke)[i]=A(this,Ke)[i].withLow(r):A(this,Ke)[i]=A(this,Ke)[i].withHigh(r)}},vi=function(n,r){switch(n){case"CF":A(this,Ke).FLAGS=A(this,Ke).FLAGS.withBit(1,r);return;case"ZF":A(this,Ke).FLAGS=A(this,Ke).FLAGS.withBit(0,r);return;case"SF":A(this,Ke).FLAGS=A(this,Ke).FLAGS.withBit(3,r);return;case"IF":A(this,Ke).FLAGS=A(this,Ke).FLAGS.withBit(4,r);return;case"OF":A(this,Ke).FLAGS=A(this,Ke).FLAGS.withBit(2,r);return;default:throw new TypeError(`Invalid flag ${n}`)}},JO);var La,Kr,So,ka;let w5=(La=class extends gs{constructor(n){super(n);De(this,Kr);De(this,So);De(this,ka,!1);n.data==="unchanged"&&n.previous.io.printer?(Q(this,Kr,A(n.previous.io.printer,Kr)),Q(this,So,A(n.previous.io.printer,So)),Q(this,ka,A(n.previous.io.printer,ka))):(Q(this,Kr,[]),Q(this,So,""),Q(this,ka,!1))}get busy(){return A(this,Kr).length>=La.BUFFER_SIZE}*setStrobe(n){const r=A(this,ka);if(r===n)return;if(Q(this,ka,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!r&&!this.busy){const s=yield*this.readData();A(this,Kr).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){Q(this,So,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,Kr).length===0)return;const[n,...r]=A(this,Kr);if(Q(this,Kr,r),yield{type:"printer:buffer.pop",char:n},r.length===La.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const i=VC(n.unsigned);Q(this,So,A(this,So)+i),yield{type:"printer:paper.print",char:i}}}get hasPending(){return A(this,Kr).length>0}toJSON(){return{paper:A(this,So),buffer:[...A(this,Kr).map(n=>n.unsigned)]}}},Kr=new WeakMap,So=new WeakMap,ka=new WeakMap,de(La,"BUFFER_SIZE",5),La);class $0 extends gs{}let b5=class extends $0{constructor(n){super(n);de(this,"PA");de(this,"PB");de(this,"CA");de(this,"CB");de(this,"leds",null);de(this,"printer",null);de(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=F.random(8),this.PB=F.random(8),this.CA=F.random(8),this.CB=F.random(8)):(this.PA=F.zero(8),this.PB=F.zero(8),this.CA=F.zero(8),this.CB=F.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let r;if(n==="PA")r=this.PA;else if(n==="PB")r=this.PB;else if(n==="CA")r=this.CA;else if(n==="CB")r=this.CB;else return n;return yield{type:"pio:read.ok",value:r},r}*write(n,r){if(yield{type:"pio:write",register:n,value:r},n==="PA")this.PA=r;else if(n==="PB")this.PB=r;else if(n==="CA")this.CA=r;else if(n==="CB")this.CB=r;else return n;yield{type:"pio:register.update",register:n,value:r},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,r){return n==="A"?this.CA.bit(r)?"input":"output":this.CB.bit(r)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class sT extends b5{constructor(e){super(e),this.PA=this.PA.withBit(1,!1);const n=this;this.printer=new class extends w5{*readData(){const r=n.readData();return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*n.updatePort("A")}}(e)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return F.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const r=this.CA.unsigned,i=this.printer.busy;n=n&~r,this.line("A",0)==="input"&&i&&(n|=1),n!==this.PA.unsigned&&(this.PA=F.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var ko,ZO;let vq=(ZO=class extends gs{constructor(n){super(n);De(this,ko);n.data==="unchanged"&&n.previous.io.leds?Q(this,ko,A(n.previous.io.leds,ko)):n.data==="randomize"?Q(this,ko,F.random(8)):Q(this,ko,F.zero(8))}get state(){return A(this,ko)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,ko).toJSON()}},ko=new WeakMap,ZO);var bi,QO;let yq=(QO=class extends gs{constructor(n){super(n);De(this,bi);n.data==="unchanged"&&n.previous.io.switches?Q(this,bi,A(n.previous.io.switches,bi)):n.data==="randomize"?Q(this,bi,F.random(8)):Q(this,bi,F.zero(8))}get state(){return A(this,bi)}*toggle(n){Q(this,bi,A(this,bi).withBit(n,!A(this,bi).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,bi).toJSON()}},bi=new WeakMap,QO);class wq extends b5{constructor(e){super(e);const n=this;this.leds=new class extends vq{}(e),this.switches=new class extends yq{*toggle(r){yield*super.toggle(r),yield*n.updatePort("A")}}(e)}*updatePort(e){if(e==="A"){const n=this.switches.state.unsigned;let r=this.PA.unsigned;const i=this.CA.unsigned;r=n&i|r&~i,r!==this.PA.unsigned&&(this.PA=F.fromUnsigned(r,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const r=this.CB.unsigned;n=n&~r,yield*this.leds.update(F.fromUnsigned(n,8))}}}let bq=class extends gs{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},xq=class extends gs{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var Qu,eI;let Sq=(eI=class extends gs{constructor(){super(...arguments);De(this,Qu,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,Qu);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},Q(this,Qu,null),n}setLastCharRead(n){Q(this,Qu,n)}toJSON(){return null}},Qu=new WeakMap,eI);var Xr,tI;let kq=(tI=class extends gs{constructor(n){super(n);De(this,Xr);n.data==="unchanged"&&n.previous.io.screen?Q(this,Xr,A(n.previous.io.screen,Xr)):Q(this,Xr,"")}clear(){return this.sendChar(F.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:Q(this,Xr,A(this,Xr).slice(0,-1));break;case 10:Q(this,Xr,A(this,Xr)+`
`);break;case 12:Q(this,Xr,"");break;default:Q(this,Xr,A(this,Xr)+VC(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,Xr)}}toJSON(){return A(this,Xr)}},Xr=new WeakMap,tI);var _o,dr,nI;let _q=(nI=class extends $0{constructor(n){super(n);De(this,_o);De(this,dr);de(this,"printer");n.data==="randomize"?Q(this,_o,F.random(8)):Q(this,_o,F.zero(8)),Q(this,dr,F.zero(8));const r=this;this.printer=new class extends w5{*readData(){const i=A(r,_o);return yield{type:"printer:data.read",char:i},i}*updateBusy(i){i?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*r.updateBusy(i)}}(n)}get interrupts(){return A(this,dr).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let r;if(n==="DATA")r=A(this,_o);else if(n==="STATE")r=A(this,dr);else return n;return yield{type:"handshake:read.ok",value:r},r}*write(n,r){if(yield{type:"handshake:write",register:n,value:r},n==="DATA")Q(this,_o,r),yield{type:"handshake:register.update",register:n,value:r},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")r=r.withBit(0,this.printer.busy),Q(this,dr,r),yield{type:"handshake:register.update",register:n,value:r},A(this,dr).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),Q(this,dr,A(this,dr).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,dr)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){Q(this,dr,A(this,dr).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,dr)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,_o).toJSON(),STATE:A(this,dr).toJSON()}}},_o=new WeakMap,dr=new WeakMap,nI);var rs,Co,Er,fr,Ji,Qs,ev,tv;let Cq=(rs=class extends $0{constructor(n){super(n);De(this,Qs);De(this,Co);De(this,Er);De(this,fr);De(this,Ji);Q(this,Co,F.fromUnsigned(255,8)),Q(this,Er,F.fromUnsigned(0,8)),Q(this,fr,F.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?Q(this,Ji,A(n.previous.io.pic,Ji)):n.data==="randomize"?Q(this,Ji,new Array(rs.LINES).fill(F.zero(8)).map(()=>F.random(8))):Q(this,Ji,new Array(rs.LINES).fill(F.zero(8)))}chipSelect(n){const i=4+rs.LINES;return n=Number(n)-32,n<0||n>=i?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let r;if(n==="EOI")r=F.zero(8);else if(n==="IMR")r=A(this,Co);else if(n==="IRR")r=A(this,Er);else if(n==="ISR")r=A(this,fr);else{const i=Number(n.slice(3));r=A(this,Ji)[i]}return yield{type:"pic:read.ok",value:r},r}*write(n,r){if(yield{type:"pic:write",register:n,value:r},n==="EOI")A(this,fr).isZero()||(yield{type:"pic:intr.off"},Q(this,fr,F.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,fr)},yield*St(this,Qs,tv).call(this));else if(n==="IMR")Q(this,Co,r),yield{type:"pic:register.update",register:"IMR",value:A(this,Co)},yield*St(this,Qs,tv).call(this);else if(!(n==="IRR"||n==="ISR")){const i=Number(n.slice(3));A(this,Ji)[i]=r,yield{type:"pic:register.update",register:n,value:r}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=rs.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,Er).bit(n)||(Q(this,Er,A(this,Er).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,Er)},yield*St(this,Qs,tv).call(this))}isINTRActive(){return A(this,fr).isZero()&&St(this,Qs,ev).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,fr).isZero())throw new Error("INTR line is active but ISR is not zero");const n=St(this,Qs,ev).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");Q(this,fr,A(this,fr).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,fr)},Q(this,Er,A(this,Er).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,Er)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const r=A(this,Ji)[n];return yield{type:"pic:int.send",number:r},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},r}toJSON(){return{IMR:A(this,Co).toJSON(),IRR:A(this,Er).toJSON(),ISR:A(this,fr).toJSON(),lines:A(this,Ji).map(n=>n.toJSON())}}},Co=new WeakMap,Er=new WeakMap,fr=new WeakMap,Ji=new WeakMap,Qs=new WeakSet,ev=function(){for(let n=0;n<rs.LINES;n++)if(A(this,Er).bit(n)&&!A(this,Co).bit(n))return n;return null},tv=function*(){A(this,fr).isZero()&&St(this,Qs,ev).call(this)!==null&&(yield{type:"pic:intr.on"})},de(rs,"LINES",8),rs);var Ms,_a,rI;let Eq=(rI=class extends $0{constructor(n){super(n);De(this,Ms);De(this,_a);Q(this,Ms,F.zero(8)),Q(this,_a,F.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let r;if(n==="CONT")r=A(this,Ms);else if(n==="COMP")r=A(this,_a);else return n;return yield{type:"timer:read.ok",value:r},r}*write(n,r){if(yield{type:"timer:write",register:n,value:r},n==="CONT")Q(this,Ms,r);else if(n==="COMP")Q(this,_a,r);else return n;yield{type:"timer:register.update",register:n,value:r},yield{type:"timer:write.ok"}}*tick(){const n=A(this,Ms).unsigned===F.maxValue(8)?F.zero(8):A(this,Ms).add(1);Q(this,Ms,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,_a).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,Ms).toJSON(),COMP:A(this,_a).toJSON()}}},Ms=new WeakMap,_a=new WeakMap,rI);class Aq extends gs{constructor(n){super(n);de(this,"clock",null);de(this,"f10",null);de(this,"keyboard",null);de(this,"screen",null);de(this,"handshake",null);de(this,"pic",null);de(this,"pio",null);de(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new Sq(n),this.screen=new kq(n)),n.devices.pic&&(this.clock=new bq(n),this.f10=new xq(n),this.timer=new Eq(n),this.pic=new Cq(n)),this.pio=n.devices.pio==="switches-and-leds"?new wq(n):n.devices.pio==="printer"?new sT(n):null,n.devices.handshake){if(this.pio instanceof sT)throw new Gt("io-printer-conflict");this.handshake=new _q(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,r;return((n=this.pio)==null?void 0:n.printer)??((r=this.handshake)==null?void 0:r.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,c,u;const r=(a=this.handshake)==null?void 0:a.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:r};const i=(l=this.pic)==null?void 0:l.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:i};const s=(c=this.pio)==null?void 0:c.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(u=this.timer)==null?void 0:u.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new Gt("io-memory-not-connected",n)},null)}*read(n){const{chip:r,register:i}=n;return this[r]?yield*this[r].read(i):(yield{type:"bus:io.error",error:new Gt("device-not-connected",r)},null)}*write(n,r){const{chip:i,register:s}=n;return this[i]?(yield*this[i].write(s,r),!0):(yield{type:"bus:io.error",error:new Gt("device-not-connected",i)},!1)}toJSON(){var n,r,i,s,o,a,l,c,u,d,f;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((r=this.f10)==null?void 0:r.toJSON())??null,keyboard:((i=this.keyboard)==null?void 0:i.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((c=this.handshake)==null?void 0:c.toJSON())??null,pic:((u=this.pic)==null?void 0:u.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((f=this.timer)==null?void 0:f.toJSON())??null}}}var ja,hr,ed,td;let Pq=(ja=class extends gs{constructor(n){super(n);De(this,hr);De(this,ed);De(this,td);n.data==="unchanged"?Q(this,hr,A(n.previous.memory,hr)):n.data==="randomize"?Q(this,hr,new Uint8Array(ja.SIZE).map(()=>F.random(8).unsigned)):Q(this,hr,new Uint8Array(ja.SIZE).fill(0)),A(this,hr)[255]=1;const r=n.program.instructions.some(i=>i.instruction==="INT");if(Q(this,td,new Set),r)for(const[i,s]of WC){const o=i;if(A(this,hr)[o]=s.unsigned,A(this,td).add(o),i===6){const a=[208,216,48,18,1,193,193,216,49,212,65,225],l=s.unsigned;for(let c=0;c<a.length;c++)A(this,hr)[l+c]=a[c],A(this,td).add(l+c)}}for(const i of n.program.data){let s=i.start.value;for(const o of i.getValues())o!==$f&&A(this,hr).set(o.toUint8Array(),s),s+=i.size/8}Q(this,ed,new Set);for(const i of n.program.instructions){A(this,hr).set(i.toBytes(),i.start.value);for(let s=0;s<i.length;s++)A(this,ed).add(i.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!Se.inRange(n))return yield{type:"memory:read.error",error:new Gt("address-out-of-range",n)},null;const r=F.fromUnsigned(A(this,hr).at(n),8);return yield{type:"memory:read.ok",address:Se.from(n),value:r},r}*write(n,r){return n=Number(n),yield{type:"memory:write",address:n,value:r},Se.inRange(n)?(A(this,ed).has(n)&&(yield{type:"memory:write.warning",warning:`Sobrescribiendo instruccin en la direccin ${Se.format(n)}`},console.warn(`Advertencia: Sobrescribiendo instruccin en la direccin ${Se.format(n)}`)),A(this,hr).set([r.unsigned],n),yield{type:"memory:write.ok",address:Se.from(n),value:r},!0):(yield{type:"memory:write.error",error:new Gt("address-out-of-range",n)},!1)}toJSON(){return[...A(this,hr)]}},hr=new WeakMap,ed=new WeakMap,td=new WeakMap,de(ja,"SIZE",Se.MAX_ADDRESS+1),ja);class oT{constructor(e){de(this,"cpu");de(this,"memory");de(this,"io");const n={computer:this,...e};this.cpu=new gq(n),this.memory=new Pq(n),this.io=new Aq(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var mt;class Nq{constructor(){De(this,mt,new oT({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){Q(this,mt,new oT({...e,previous:A(this,mt)}))}getComputerState(){var e;return((e=A(this,mt))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,mt))throw new Gt("no-program");return A(this,mt).cpu.run()}get devices(){if(!A(this,mt))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,mt).io.clock!==null,tick:()=>{if(A(this,mt).io.clock)return A(this,mt).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,mt).io,press:()=>{if(A(this,mt).io.f10)return A(this,mt).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,mt).io,readChar:e=>{if(A(this,mt).io.keyboard)return A(this,mt).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,mt).io},printer:{connected:()=>A(this,mt).io.printer!==null,clear:()=>{if(A(this,mt).io.printer)return A(this,mt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,mt).io.printer)return A(this,mt).io.printer.print();console.warn("No printer connected to the computer!")},hasPending:()=>{var e;return((e=A(this,mt).io.printer)==null?void 0:e.hasPending)??!1}},screen:{connected:()=>"screen"in A(this,mt).io,clear:()=>{if(A(this,mt).io.screen)return A(this,mt).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,mt).io,toggle:e=>{if(A(this,mt).io.switches)return A(this,mt).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}mt=new WeakMap;const B=NC();function Tq(t){return p.jsx(eG,{store:B,children:t.children})}const Ob=ce(F.zero(16)),Ib=ce(F.zero(16)),Mq=ce(F.zero(8)),Db=ce(F.zero(16)),Lb=ce(F.zero(16)),jb=ce(F.zero(16)),$b=ce(F.zero(16)),Fb=ce(F.zero(16)),Bb=ce(F.zero(16)),x5=ce(F.zero(16)),qh=ce(F.zero(8)),ft=ce(""),Cc=ce(0),YC=ce(!1),Rq=ce(!1),F0=ce(0),dy=ce([]),S5=ce(!1);ce(!0);ce(!0);const $S=ce(!1),ia=t=>ce(e=>e(t).low,(e,n,r)=>{const i=e(t),s=typeof r=="function"?r(i.low):r;n(t,i.withLow(s))}),sa=t=>ce(e=>e(t).high,(e,n,r)=>{const i=e(t),s=typeof r=="function"?r(i.high):r;n(t,i.withHigh(s))}),Pe={AX:ce(F.zero(16)),AL:ce(t=>t(Pe.AX).low,(t,e,n)=>{const r=t(Pe.AX);e(Pe.AX,r.withLow(n))}),AH:ce(t=>t(Pe.AX).high,(t,e,n)=>{const r=t(Pe.AX);e(Pe.AX,r.withHigh(n))}),BX:ce(F.zero(16)),BL:ce(t=>t(Pe.BX).low,(t,e,n)=>{const r=t(Pe.BX);e(Pe.BX,r.withLow(n))}),BH:ce(t=>t(Pe.BX).high,(t,e,n)=>{const r=t(Pe.BX);e(Pe.BX,r.withHigh(n))}),CX:ce(F.zero(16)),CL:ce(t=>t(Pe.CX).low,(t,e,n)=>{const r=t(Pe.CX);e(Pe.CX,r.withLow(n))}),CH:ce(t=>t(Pe.CX).high,(t,e,n)=>{const r=t(Pe.CX);e(Pe.CX,r.withHigh(n))}),DX:ce(F.zero(16)),DL:ce(t=>t(Pe.DX).low,(t,e,n)=>{const r=t(Pe.DX);e(Pe.DX,r.withLow(n))}),DH:ce(t=>t(Pe.DX).high,(t,e,n)=>{const r=t(Pe.DX);e(Pe.DX,r.withHigh(n))}),SP:Ob,"SP.l":ia(Ob),"SP.h":sa(Ob),IP:Ib,"IP.l":ia(Ib),"IP.h":sa(Ib),IR:Mq,ri:Db,"ri.l":ia(Db),"ri.h":sa(Db),id:Lb,"id.l":ia(Lb),"id.h":sa(Lb),left:jb,"left.l":ia(jb),"left.h":sa(jb),right:$b,"right.l":ia($b),"right.h":sa($b),result:Fb,"result.l":ia(Fb),"result.h":sa(Fb),FLAGS:Bb,"FLAGS.l":ia(Bb),"FLAGS.h":sa(Bb),MAR:x5,MBR:qh},Qi=ce({phase:"stopped"}),k5=ce("ADD");function Oq(t,e=!1){e?(B.set(Pe.AX,F.zero(16)),B.set(Pe.BX,F.zero(16)),B.set(Pe.CX,F.zero(16)),B.set(Pe.DX,F.zero(16)),B.set(Pe.SP,F.fromUnsigned(255,16)),B.set(Pe.IP,F.zero(16)),B.set(Pe.IR,F.zero(8)),B.set(Pe.ri,F.zero(16)),B.set(Pe.id,F.zero(16)),B.set(Pe.left,F.zero(16)),B.set(Pe.right,F.zero(16)),B.set(Pe.result,F.zero(16)),B.set(Pe.FLAGS,F.zero(16)),B.set(Pe.MAR,F.zero(16)),B.set(Pe.MBR,F.zero(8))):(B.set(Pe.AX,F.fromUnsigned(t.cpu.AX,16)),B.set(Pe.BX,F.fromUnsigned(t.cpu.BX,16)),B.set(Pe.CX,F.fromUnsigned(t.cpu.CX,16)),B.set(Pe.DX,F.fromUnsigned(t.cpu.DX,16)),B.set(Pe.SP,F.fromUnsigned(t.cpu.SP,16)),B.set(Pe.IP,F.fromUnsigned(t.cpu.IP,16)),B.set(Pe.IR,F.fromUnsigned(t.cpu.IR,8)),B.set(Pe.ri,F.fromUnsigned(t.cpu.ri,16)),B.set(Pe.id,F.fromUnsigned(t.cpu.id,16)),B.set(Pe.left,F.fromUnsigned(t.cpu.left,16)),B.set(Pe.right,F.fromUnsigned(t.cpu.right,16)),B.set(Pe.result,F.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,B.set(Pe.FLAGS,F.fromUnsigned(t.cpu.FLAGS,16)),B.set(Pe.MAR,F.fromUnsigned(t.cpu.MAR,16)),B.set(Pe.MBR,F.fromUnsigned(t.cpu.MBR,8))),B.set(Qi,{phase:"stopped"})}const _5=ce([]),C5=ce([]),fy=ce(new Array(Se.MAX_ADDRESS+1).fill(F.zero(8))),Jh=ce(Se.from(32)),Iq=ce(null),Fm=256,Dq=ce(t=>{const e=t(Iq)??t(Jh);let n=e.value-e.value%Fm,r=n+Fm-1;r>Se.MAX_ADDRESS&&(r=Se.MAX_ADDRESS,n=r-Fm+1);const i=t(fy),s=[];for(let o=0;o<Fm;o++)s.push({address:Se.from(n+o),value:i[n+o]});return s});function Lq(t,e=!1){e?B.set(fy,new Array(Se.MAX_ADDRESS+1).fill(F.zero(8))):B.set(fy,t.memory.map(n=>F.fromUnsigned(n,8))),B.set(Jh,Se.from(32))}let FS=[],E5=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?E5:FS).push(n=n+t[e])})();function jq(t){if(t<768)return!1;for(let e=0,n=FS.length;;){let r=e+n>>1;if(t<FS[r])n=r;else if(t>=E5[r])e=r+1;else return!0;if(e==n)return!1}}function aT(t){return t>=127462&&t<=127487}const lT=8205;function $q(t,e,n=!0,r=!0){return(n?A5:Fq)(t,e,r)}function A5(t,e,n){if(e==t.length)return e;e&&P5(t.charCodeAt(e))&&N5(t.charCodeAt(e-1))&&e--;let r=zb(t,e);for(e+=cT(r);e<t.length;){let i=zb(t,e);if(r==lT||i==lT||n&&jq(i))e+=cT(i),r=i;else if(aT(i)){let s=0,o=e-2;for(;o>=0&&aT(zb(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function Fq(t,e,n){for(;e>0;){let r=A5(t,e-2,n);if(r<e)return r;e--}return 0}function zb(t,e){let n=t.charCodeAt(e);if(!N5(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return P5(r)?(n-55296<<10)+(r-56320)+65536:n}function P5(t){return t>=56320&&t<57344}function N5(t){return t>=55296&&t<56320}function cT(t){return t<65536?1:2}class ct{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=vd(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Ls.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=vd(this,e,n);let r=[];return this.decompose(e,n,r,0),Ls.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new lh(this),s=new lh(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new lh(this,e)}iterRange(e,n=this.length){return new T5(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new M5(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ct.empty:e.length<=32?new tn(e):Ls.from(tn.split(e,[]))}}class tn extends ct{constructor(e,n=Bq(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new zq(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new tn(uT(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=nv(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new tn(a,o.length+s.length));else{let l=a.length>>1;r.push(new tn(a.slice(0,l)),new tn(a.slice(l)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof tn))return super.replace(e,n,r);[e,n]=vd(this,e,n);let i=nv(this.text,nv(r.text,uT(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new tn(i,s):Ls.from(tn.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=vd(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new tn(r,i)),r=[],i=-1);return i>-1&&n.push(new tn(r,i)),n}}class Ls extends ct{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=i&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?r.push(a):a.decompose(e-o,n-o,r,c)}o=l+1}}replace(e,n,r){if([e,n]=vd(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[i]=l,new Ls(u,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=vd(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Ls))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],c=e.children[s];if(l!=c)return r+l.scanIdentical(c,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let h of e)r+=h.lines;if(r<32){let h=[];for(let m of e)m.flatten(h);return new tn(h,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,u=[];function d(h){let m;if(h.lines>s&&h instanceof Ls)for(let g of h.children)d(g);else h.lines>o&&(l>o||!l)?(f(),a.push(h)):h instanceof tn&&l&&(m=u[u.length-1])instanceof tn&&h.lines+m.lines<=32?(l+=h.lines,c+=h.length+1,u[u.length-1]=new tn(m.text.concat(h.text),m.length+1+h.length)):(l+h.lines>i&&f(),l+=h.lines,c+=h.length+1,u.push(h))}function f(){l!=0&&(a.push(u.length==1?u[0]:Ls.from(u,c)),c=-1,l=u.length=0)}for(let h of e)d(h);return f(),a.length==1?a[0]:new Ls(a,n)}}ct.empty=new tn([""],0);function Bq(t){let e=-1;for(let n of t)e+=n.length+1;return e}function nv(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function uT(t,e,n){return nv(t,[""],e,n)}class lh{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof tn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof tn?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof tn){let l=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof tn?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class T5{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new lh(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class M5{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ct.prototype[Symbol.iterator]=function(){return this.iter()},lh.prototype[Symbol.iterator]=T5.prototype[Symbol.iterator]=M5.prototype[Symbol.iterator]=function(){return this});class zq{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function vd(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Un(t,e,n=!0,r=!0){return $q(t,e,n,r)}function Uq(t){return t>=56320&&t<57344}function Hq(t){return t>=55296&&t<56320}function ki(t,e){let n=t.charCodeAt(e);if(!Hq(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return Uq(r)?(n-55296<<10)+(r-56320)+65536:n}function qC(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Po(t){return t<65536?1:2}const BS=/\r\n?|\n/;var Rr=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Rr||(Rr={}));class qs{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){zS(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new qs(e)}composeDesc(e){return this.empty?e:e.empty?this:R5(this,e)}mapDesc(e,n=!1){return e.empty?this:US(this,e,n)}mapPos(e,n=-1,r=Rr.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(r!=Rr.Simple&&c>=e&&(r==Rr.TrackDel&&i<e&&c>e||r==Rr.TrackBefore&&i<e||r==Rr.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new qs(e)}static create(e){return new qs(e)}}class yn extends qs{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return zS(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return US(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(ct.empty);r.push(o?e.slice(s,s+o):ct.empty)}s+=o}return new yn(n,r)}compose(e){return this.empty?e:e.empty?this:R5(this,e,!0)}map(e,n=!1){return e.empty?this:US(this,e,n,!0)}iterChanges(e,n=!1){zS(this,e,n)}get desc(){return qs.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new Zh(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);Zn(i,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;Zn(n,u,d),d>0&&Pa(r,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);Zn(n,u,-1),Zn(i,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new yn(n,r),filtered:qs.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!i.length)return;o<n&&Zn(i,n-o,-1);let d=new yn(i,s);a=a?a.compose(d.map(a)):d,i=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof yn){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:f=d,insert:h}=u;if(d>f||d<0||f>n)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${n})`);let m=h?typeof h=="string"?ct.of(h.split(r||BS)):h:ct.empty,g=m.length;if(d==f&&g==0)return;d<o&&l(),d>o&&Zn(i,d-o,-1),Zn(i,f-d,g),Pa(s,i,m),o=f}}return c(e),l(!a),a}static empty(e){return new yn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(ct.empty);r[i]=ct.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new yn(n,r)}static createSet(e,n){return new yn(e,n)}}function Zn(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Pa(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(ct.empty);t.push(n)}}function zS(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,u=s,d=ct.empty;for(;c+=a,u+=l,l&&r&&(d=d.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,c,s,u,d),i=c,s=u}}}function US(t,e,n,r=!1){let i=[],s=r?[]:null,o=new Zh(t),a=new Zh(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);Zn(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(Zn(i,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(Zn(i,0,o.ins),s&&Pa(s,i,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;Zn(i,c,l<o.i?o.ins:0),s&&l<o.i&&Pa(s,i,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?yn.createSet(i,s):qs.create(i);throw new Error("Mismatched change set lengths")}}}function R5(t,e,n=!1){let r=[],i=n?[]:null,s=new Zh(t),o=new Zh(e);for(let a=!1;;){if(s.done&&o.done)return i?yn.createSet(r,i):qs.create(r);if(s.ins==0)Zn(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)Zn(r,0,o.ins,a),i&&Pa(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Zn(r,l,u,a),i&&u&&Pa(i,r,o.text)}else o.ins==-1?(Zn(r,s.off?0:s.len,l,a),i&&Pa(i,r,s.textBit(l))):(Zn(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Pa(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),s.forward2(l),o.forward(l)}}}}class Zh{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?ct.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?ct.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class oc{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new oc(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return re.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return re.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return re.range(e.anchor,e.head)}static create(e,n,r){return new oc(e,n,r)}}class re{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:re.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new re([this.main],0)}addRange(e,n=!0){return re.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,re.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new re(e.ranges.map(n=>oc.fromJSON(n)),e.main)}static single(e,n=e){return new re([re.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return re.normalized(e.slice(),n);r=s.to}return new re(e,n)}static cursor(e,n=0,r,i){return oc.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?oc.create(n,e,48|s):oc.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?re.range(l,a):re.range(a,l))}}return new re(e,n)}}function O5(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let JC=0;class Ee{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=JC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ee(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:ZC),!!e.static,e.enables)}of(e){return new rv([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new rv(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new rv(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function ZC(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class rv{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=JC++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=r(d),1},update(d,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||HS(d,u)){let h=r(d);if(a?!dT(h,d.values[o],i):!i(h,d.values[o]))return d.values[o]=h,1}return 0},reconfigure:(d,f)=>{let h,m=f.config.address[s];if(m!=null){let g=py(f,m);if(this.dependencies.every(y=>y instanceof Ee?f.facet(y)===d.facet(y):y instanceof br?f.field(y,!1)==d.field(y,!1):!0)||(a?dT(h=r(d),g,i):i(h=r(d),g)))return d.values[o]=g,0}else h=r(d);return d.values[o]=h,1}}}}function dT(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function HS(t,e){let n=!1;for(let r of e)ch(t,r)&1&&(n=!0);return n}function Vq(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<r.length;u++){let d=py(l,r[u]);if(i[u]==2)for(let f of d)c.push(f);else c.push(d)}return e.combine(c)}return{create(l){for(let c of r)ch(l,c);return l.values[o]=a(l),1},update(l,c){if(!HS(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=HS(l,r),d=c.config.facets[e.id],f=c.facet(e);if(d&&!u&&ZC(n,d))return l.values[o]=f,0;let h=a(l);return e.compare(h,f)?(l.values[o]=f,0):(l.values[o]=h,1)}}}const Bm=Ee.define({static:!0});class br{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new br(JC++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Bm).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>{let s=r.facet(Bm),o=i.facet(Bm),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(r.values[n]=a.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,Bm.of({field:this,create:e})]}get extension(){return this}}const Jl={lowest:4,low:3,default:2,high:1,highest:0};function of(t){return e=>new I5(e,t)}const $p={highest:of(Jl.highest),high:of(Jl.high),default:of(Jl.default),low:of(Jl.low),lowest:of(Jl.lowest)};class I5{constructor(e,n){this.inner=e,this.prec=n}}class Fp{of(e){return new VS(this,e)}reconfigure(e){return Fp.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class VS{constructor(e,n){this.compartment=e,this.inner=n}}class hy{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let f of Wq(e,n,o))f instanceof br?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of i)a[f.id]=c.length<<1,c.push(h=>f.slot(h));let u=r==null?void 0:r.config.facets;for(let f in s){let h=s[f],m=h[0].facet,g=u&&u[f]||[];if(h.every(y=>y.type==0))if(a[m.id]=l.length<<1|1,ZC(g,h))l.push(r.facet(m));else{let y=m.combine(h.map(v=>v.value));l.push(r&&m.compare(y,r.facet(m))?r.facet(m):y)}else{for(let y of h)y.type==0?(a[y.id]=l.length<<1|1,l.push(y.value)):(a[y.id]=c.length<<1,c.push(v=>y.dynamicSlot(v)));a[m.id]=c.length<<1,c.push(y=>Vq(y,m,h))}}let d=c.map(f=>f(a));return new hy(e,o,d,a,l,s)}}function Wq(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof VS&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof VS){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof I5)s(o.inner,o.prec);else if(o instanceof br)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof rv)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,Jl.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,Jl.default),r.reduce((o,a)=>o.concat(a))}function ch(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function py(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const D5=Ee.define(),WS=Ee.define({combine:t=>t.some(e=>e),static:!0}),L5=Ee.define({combine:t=>t.length?t[0]:void 0,static:!0}),j5=Ee.define(),$5=Ee.define(),F5=Ee.define(),B5=Ee.define({combine:t=>t.length?t[0]:!1});class qo{constructor(e,n){this.type=e,this.value=n}static define(){return new Gq}}class Gq{of(e){return new qo(this,e)}}class Kq{constructor(e){this.map=e}of(e){return new qe(this,e)}}class qe{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new qe(this.type,n)}is(e){return this.type==e}static define(e={}){return new Kq(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}qe.reconfigure=qe.define();qe.appendConfig=qe.define();class Sn{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&O5(r,n.newLength),s.some(a=>a.type==Sn.time)||(this.annotations=s.concat(Sn.time.of(Date.now())))}static create(e,n,r,i,s,o){return new Sn(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Sn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Sn.time=qo.define();Sn.userEvent=qo.define();Sn.addToHistory=qo.define();Sn.remote=qo.define();function Xq(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function z5(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=yn.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:qe.mapEffects(t.effects,i).concat(qe.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function GS(t,e,n){let r=e.selection,i=zu(e.annotations);return e.userEvent&&(i=i.concat(Sn.userEvent.of(e.userEvent))),{changes:e.changes instanceof yn?e.changes:yn.of(e.changes||[],n,t.facet(L5)),selection:r&&(r instanceof re?r:re.single(r.anchor,r.head)),effects:zu(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function U5(t,e,n){let r=GS(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=z5(r,GS(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=Sn.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return qq(n?Yq(i):i)}function Yq(t){let e=t.startState,n=!0;for(let i of e.facet(j5)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:Xq(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=yn.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Sn.create(e,i,t.selection&&t.selection.map(s),qe.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet($5);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof Sn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Sn?t=s[0]:t=U5(e,zu(s),!1)}return t}function qq(t){let e=t.startState,n=e.facet(F5),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=z5(r,GS(e,s,t.changes.newLength),!0))}return r==t?t:Sn.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const Jq=[];function zu(t){return t==null?Jq:Array.isArray(t)?t:[t]}var Hn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Hn||(Hn={}));const Zq=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let KS;try{KS=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Qq(t){if(KS)return KS.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Zq.test(n)))return!0}return!1}function eJ(t){return e=>{if(!/\S/.test(e))return Hn.Space;if(Qq(e))return Hn.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Hn.Word;return Hn.Other}}class st{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)ch(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return ch(this,r),py(this,r)}update(...e){return U5(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(Fp.reconfigure)?(n&&(i=new Map,n.compartments.forEach((l,c)=>i.set(c,l)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(qe.reconfigure)?(n=null,r=a.value):a.is(qe.appendConfig)&&(n=null,r=zu(r).concat(a.value));let s;n?s=e.startState.values.slice():(n=hy.resolve(r,i,this),s=new st(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(WS)?e.newSelection:e.newSelection.asSingle();new st(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:re.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=zu(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(i);for(let f=0;f<a;f++)s[f]=s[f].map(u);let d=i.mapDesc(c,!0);s.push(l.range.map(d)),i=i.compose(u),o=qe.mapEffects(o,u).concat(qe.mapEffects(zu(l.effects),d))}return{changes:i,selection:re.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof yn?e:yn.of(e,this.doc.length,this.facet(st.lineSeparator))}toText(e){return ct.of(e.split(this.facet(st.lineSeparator)||BS))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(ch(this,n),py(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof br&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return st.create({doc:e.doc,selection:re.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=hy.resolve(e.extensions||[],new Map),r=e.doc instanceof ct?e.doc:ct.of((e.doc||"").split(n.staticFacet(st.lineSeparator)||BS)),i=e.selection?e.selection instanceof re?e.selection:re.single(e.selection.anchor,e.selection.head):re.single(0);return O5(i,r.length),n.staticFacet(WS)||(i=i.asSingle()),new st(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(st.tabSize)}get lineBreak(){return this.facet(st.lineSeparator)||`
`}get readOnly(){return this.facet(B5)}phrase(e,...n){for(let r of this.facet(st.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(D5))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return eJ(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Un(n,o,!1);if(s(n.slice(l,o))!=Hn.Word)break;o=l}for(;a<i;){let l=Un(n,a);if(s(n.slice(a,l))!=Hn.Word)break;a=l}return o==a?null:re.range(o+r,a+r)}}st.allowMultipleSelections=WS;st.tabSize=Ee.define({combine:t=>t.length?t[0]:4});st.lineSeparator=L5;st.readOnly=B5;st.phrases=Ee.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});st.languageData=D5;st.changeFilter=j5;st.transactionFilter=$5;st.transactionExtender=F5;Fp.reconfigure=qe.define();function Sl(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Ec{eq(e){return this==e}range(e,n=e){return XS.create(e,n,this)}}Ec.prototype.startSide=Ec.prototype.endSide=0;Ec.prototype.point=!1;Ec.prototype.mapMode=Rr.TrackDel;let XS=class H5{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new H5(e,n,r)}};function YS(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class QC{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,f,h;if(u==d){let m=n.mapPos(u,c.startSide,c.mapMode);if(m==null||(f=h=m,c.startSide!=c.endSide&&(h=n.mapPos(u,c.endSide),h<f)))continue}else if(f=n.mapPos(u,c.startSide),h=n.mapPos(d,c.endSide),f>h||f==h&&c.startSide>0&&c.endSide<=0)continue;(h-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,h-f)),r.push(c),i.push(f-o),s.push(h-o))}return{mapped:r.length?new QC(i,s,r,a):null,pos:o}}}class vt{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new vt(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(YS)),this.isEmpty)return n.length?vt.of(n):this;let a=new V5(this,null,-1).goto(0),l=0,c=[],u=new sl;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(XS.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?vt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(i=Math.max(i,u.maxPoint),n.push(u),r.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new vt(r,n,s||vt.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return Qh.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Qh.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=fT(o,a,r),c=new af(o,l,s),u=new af(a,l,s);r.iterGaps((d,f,h)=>hT(c,d,u,f,h,i)),r.empty&&r.length==0&&hT(c,0,u,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=fT(s,o),l=new af(s,a,0).goto(r),c=new af(o,a,0).goto(r);for(;;){if(l.to!=c.to||!qS(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,n,r,i,s=-1){let o=new af(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);i.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new sl;for(let i of e instanceof XS?[e]:n?tJ(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return vt.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=vt.empty;i=i.nextLayer)n=new vt(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}vt.empty=new vt([],[],null,-1);function tJ(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(YS(e,r)>0)return t.slice().sort(YS);e=r}return t}vt.empty.nextLayer=vt.empty;class sl{finishChunk(e){this.chunks.push(new QC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new sl)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(vt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=vt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function fT(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class V5{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Qh{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new V5(o,n,r,s));return i.length==1?i[0]:new Qh(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Ub(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Ub(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Ub(this.heap,0)}}}function Ub(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class af{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Qh.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){zm(this.active,e),zm(this.activeTo,e),zm(this.activeRank,e),this.minActive=pT(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Um(this.active,n,r),Um(this.activeTo,n,i),Um(this.activeRank,n,s),e&&Um(e,n,this.cursor.from),this.minActive=pT(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&zm(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function hT(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,l=r-e;for(;;){let c=t.to+l-n.to,u=c||t.endSide-n.endSide,d=u<0?t.to+l:n.to,f=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&qS(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,f,t.point,n.point):f>a&&!qS(t.active,n.active)&&s.compareRange(a,f,t.active,n.active),d>o)break;(c||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(d),a=d,u<=0&&t.next(),u>=0&&n.next()}}function qS(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function zm(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Um(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function pT(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Bp(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Un(t,i));return r}function nJ(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Un(t,i)}return t.length}const JS="",mT=typeof Symbol>"u"?"__"+JS:Symbol.for(JS),ZS=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),gT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ol{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let h in a){let m=a[h];if(/&/.test(h))s(h.split(/,\s*/).map(g=>o.map(y=>g.replace(/&/,y))).reduce((g,y)=>g.concat(y)),m,l);else if(m&&typeof m=="object"){if(!d)throw new RangeError("The value of a property ("+h+") should be a primitive value.");s(i(h),m,u,f)}else m!=null&&u.push(h.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+m+";")}(u.length||f)&&l.push((r&&!d&&!c?o.map(r):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=gT[mT]||1;return gT[mT]=e+1,JS+e.toString(36)}static mount(e,n,r){let i=e[ZS],s=r&&r.nonce;i?s&&i.setNonce(s):i=new rJ(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let vT=new Map;class rJ{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=vT.get(r);if(s)return e[ZS]=s;this.sheet=new i.CSSStyleSheet,vT.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[ZS]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),r)for(let c=0;c<a.rules.length;c++)r.insertRule(a.rules[c],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var al={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ep={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},iJ=typeof navigator<"u"&&/Mac/.test(navigator.platform),sJ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var $n=0;$n<10;$n++)al[48+$n]=al[96+$n]=String($n);for(var $n=1;$n<=24;$n++)al[$n+111]="F"+$n;for(var $n=65;$n<=90;$n++)al[$n]=String.fromCharCode($n+32),ep[$n]=String.fromCharCode($n);for(var Hb in al)ep.hasOwnProperty(Hb)||(ep[Hb]=al[Hb]);function oJ(t){var e=iJ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||sJ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?ep:al)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function kt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)W5(t,arguments[e]);return t}function W5(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)W5(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function tp(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function QS(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function iv(t,e){if(!e.anchorNode)return!1;try{return QS(t,e.anchorNode)}catch{return!1}}function np(t){return t.nodeType==3?Pc(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function uh(t,e,n,r){return n?yT(t,e,n,r,-1)||yT(t,e,n,r,1):!1}function Ac(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function my(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function yT(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:to(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Ac(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?to(t):0}else return!1}}function to(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function B0(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function aJ(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function G5(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function lJ(t,e,n,r,i,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let f,h=u==l.body,m=1,g=1;if(h)f=aJ(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let w=u.getBoundingClientRect();({scaleX:m,scaleY:g}=G5(u,w)),f={left:w.left,right:w.left+u.clientWidth*m,top:w.top,bottom:w.top+u.clientHeight*g}}let y=0,v=0;if(i=="nearest")e.top<f.top?(v=e.top-(f.top+o),n>0&&e.bottom>f.bottom+v&&(v=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(v=e.bottom-f.bottom+o,n<0&&e.top-v<f.top&&(v=e.top-(f.top+o)));else{let w=e.bottom-e.top,b=f.bottom-f.top;v=(i=="center"&&w<=b?e.top+w/2-b/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-b+o)-f.top}if(r=="nearest"?e.left<f.left?(y=e.left-(f.left+s),n>0&&e.right>f.right+y&&(y=e.right-f.right+s)):e.right>f.right&&(y=e.right-f.right+s,n<0&&e.left<f.left+y&&(y=e.left-(f.left+s))):y=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,y||v)if(h)c.scrollBy(y,v);else{let w=0,b=0;if(v){let k=u.scrollTop;u.scrollTop+=v/g,b=(u.scrollTop-k)*g}if(y){let k=u.scrollLeft;u.scrollLeft+=y/m,w=(u.scrollLeft-k)*m}e={left:e.left-w,top:e.top-b,right:e.right-w,bottom:e.bottom-b},w&&Math.abs(w-y)<1&&(r="nearest"),b&&Math.abs(b-v)<1&&(i="nearest")}if(h)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function cJ(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class uJ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?to(n):0),r,Math.min(e.focusOffset,r?to(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Xc=null;function K5(t){if(t.setActive)return t.setActive();if(Xc)return t.focus(Xc);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Xc==null?{get preventScroll(){return Xc={preventScroll:!0},!0}}:void 0),!Xc){Xc=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let wT;function Pc(t,e,n=e){let r=wT||(wT=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Uu(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function dJ(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function X5(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function fJ(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,to(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=to(n))}else{if(n==t)return!0;r=Ac(n),n=n.parentNode}}function Y5(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function q5(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=to(n)}else if(n.parentNode&&!my(n))r=Ac(n),n=n.parentNode;else return null}}function J5(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!my(n))r=Ac(n)+1,n=n.parentNode;else return null}}class tr{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new tr(e.parentNode,Ac(e),n)}static after(e,n){return new tr(e.parentNode,Ac(e)+1,n)}}const eE=[];class Ct{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=Ct.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=bT(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=bT(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=to(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Ct.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=r,u=r;l<this.children.length;l++){let d=this.children[l],f=c+d.length;if(c<e&&f>n)return d.domBoundsAround(e,n,c);if(f>=e&&i==-1&&(i=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+d.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=eE){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Z5(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Ct.prototype.breakAfter=0;function bT(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Z5{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function Q5(t,e,n,r,i,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,f=d?d.breakAfter:o;if(!(e==r&&u&&!o&&!f&&s.length<2&&u.merge(n,i,s.length?d:null,n==0,a,l))){if(r<c.length){let h=c[r];h&&(i<h.length||h.breakAfter&&(d!=null&&d.breakAfter))?(e==r&&(h=h.split(i),i=0),!f&&d&&h.merge(0,i,d,!0,0,l)?s[s.length-1]=h:((i||h.children.length&&!h.children[0].length)&&h.merge(0,i,null,!1,0,l),s.push(h))):h!=null&&h.breakAfter&&(d?d.breakAfter=1:o=1),r++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function ej(t,e,n,r,i,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let f of r)d+=f.length;t.length+=d,Q5(t,c,u,a,l,r,0,i,s)}let Mr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},ek=typeof document<"u"?document:{documentElement:{style:{}}};const tk=/Edge\/(\d+)/.exec(Mr.userAgent),tj=/MSIE \d/.test(Mr.userAgent),nk=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Mr.userAgent),z0=!!(tj||nk||tk),xT=!z0&&/gecko\/(\d+)/i.test(Mr.userAgent),Vb=!z0&&/Chrome\/(\d+)/.exec(Mr.userAgent),hJ="webkitFontSmoothing"in ek.documentElement.style,nj=!z0&&/Apple Computer/.test(Mr.vendor),ST=nj&&(/Mobile\/\w+/.test(Mr.userAgent)||Mr.maxTouchPoints>2);var _e={mac:ST||/Mac/.test(Mr.platform),windows:/Win/.test(Mr.platform),linux:/Linux|X11/.test(Mr.platform),ie:z0,ie_version:tj?ek.documentMode||6:nk?+nk[1]:tk?+tk[1]:0,gecko:xT,gecko_version:xT?+(/Firefox\/(\d+)/.exec(Mr.userAgent)||[0,0])[1]:0,chrome:!!Vb,chrome_version:Vb?+Vb[1]:0,ios:ST,android:/Android\b/.test(Mr.userAgent),safari:nj,webkit_version:hJ?+(/\bAppleWebKit\/(\d+)/.exec(Mr.userAgent)||[0,0])[1]:0,tabSize:ek.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const pJ=256;class us extends Ct{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof us)||this.length-(n-e)+r.length>pJ||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new us(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new tr(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return mJ(this.dom,e,n)}}class Uo extends Ct{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(X5(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return r&&(!(r instanceof Uo&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(ej(this,e,n,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&n.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Uo(this.mark,n,o)}domAtPos(e){return rj(this,e)}coordsAt(e,n){return sj(this,e,n)}}function mJ(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?_e.chrome||_e.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=Pc(t,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return _e.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?B0(l,o<0):l||null}class Na extends Ct{static create(e,n,r){return new Na(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=Na.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof Na)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof Na&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ct.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):ct.empty}domAtPos(e){return(this.length?e==0:this.side>0)?tr.before(this.dom):tr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return B0(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class yd extends Ct{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof yd&&e.side==this.side}split(){return new yd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?tr.before(this.dom):tr.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ct.empty}get isHidden(){return!0}}us.prototype.children=Na.prototype.children=yd.prototype.children=eE;function rj(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new tr(n,0)}function ij(t,e,n){let r,{children:i}=t;n>0&&e instanceof Uo&&i.length&&(r=i[i.length-1])instanceof Uo&&r.mark.eq(e.mark)?ij(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function sj(t,e,n){let r=null,i=-1,s=null,o=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let h=c.children[d],m=f+h.length;m>=u&&(h.children.length?a(h,u-f):(!s||s.isHidden&&(n>0||vJ(s,h)))&&(m>u||f==m&&h.getSide()>0)?(s=h,o=u-f):(f<u||f==m&&h.getSide()<0&&!h.isHidden)&&(r=h,i=u-f)),f=m}}a(t,e);let l=(n<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),n):gJ(t)}function gJ(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=np(e);return n[n.length-1]||null}function vJ(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function rk(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const kT=Object.create(null);function gy(t,e,n){if(t==e)return!0;t||(t=kT),e||(e=kT);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function ik(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function yJ(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class kl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var gr=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(gr||(gr={}));class Qe extends Ec{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new zp(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new ll(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=oj(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new ll(e,r,i,n,e.widget||null,!0)}static line(e){return new Up(e)}static set(e,n=!1){return vt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Qe.none=vt.empty;class zp extends Qe{constructor(e){let{start:n,end:r}=oj(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof zp&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&gy(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}zp.prototype.point=!1;class Up extends Qe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Up&&this.spec.class==e.spec.class&&gy(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Up.prototype.mapMode=Rr.TrackBefore;Up.prototype.point=!0;class ll extends Qe{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?Rr.TrackBefore:Rr.TrackAfter:Rr.TrackDel}get type(){return this.startSide!=this.endSide?gr.WidgetRange:this.startSide<=0?gr.WidgetBefore:gr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ll&&wJ(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}ll.prototype.point=!0;function oj(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function wJ(t,e){return t==e||!!(t&&e&&t.compare(e))}function sv(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class un extends Ct{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof un))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),ej(this,e,n,r?r.children.slice():[],s,o),!0}split(e){let n=new un;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){gy(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){ij(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=rk(n,this.attrs||{})),r&&(this.attrs=rk({class:r},this.attrs||{}))}domAtPos(e){return rj(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(X5(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(ik(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&Ct.get(i)instanceof Uo;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Ct.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!_e.ios||!this.children.some(s=>s instanceof us))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof us)||/[^ -~]/.test(r.text))return null;let i=np(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=sj(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof un&&this.children.length==0&&e.children.length==0&&gy(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof un)return s;if(o>n)break}i=o+s.breakAfter}return null}}class Oo extends Ct{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof Oo)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?tr.before(this.dom):tr.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new Oo(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return eE}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ct.empty}domBoundsAround(){return null}become(e){return e instanceof Oo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof sk?null:B0(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class sk extends kl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class dh{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Oo&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new un),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Hm(new yd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Oo)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(Hm(new us(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof ll){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof ll)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Oo(r.widget||wd.block,a,r));else{let l=Na.create(r.widget||wd.inline,a,a?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<n||r.startSide>0),u=!l.isEditable&&(e<n||s>i.length||r.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(d.append(Hm(new yd(1),i),s),s=i.length+Math.max(0,s-i.length)),d.append(Hm(l,i),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new dh(e,n,r,s);return o.openEnd=vt.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Hm(t,e){for(let n of e)t=new Uo(n,[t],t.length);return t}class wd extends kl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}wd.inline=new wd("span");wd.block=new wd("div");var jt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(jt||(jt={}));const Nc=jt.LTR,tE=jt.RTL;function aj(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const bJ=aj("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),xJ=aj("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ok=Object.create(null),ws=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);ok[e]=n,ok[n]=-e}function lj(t){return t<=247?bJ[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?xJ[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const SJ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ta{get dir(){return this.level%2?tE:Nc}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function cj(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!cj(r.inner,i.inner))return!1}return!0}const _t=[];function kJ(t,e,n,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:n,l=s?256:i;for(let c=o,u=l,d=l;c<a;c++){let f=lj(t.charCodeAt(c));f==512?f=u:f==8&&d==4&&(f=16),_t[c]=f==4?2:f,f&7&&(d=f),u=f}for(let c=o,u=l,d=l;c<a;c++){let f=_t[c];if(f==128)c<a-1&&u==_t[c+1]&&u&24?f=_t[c]=u:_t[c]=256;else if(f==64){let h=c+1;for(;h<a&&_t[h]==64;)h++;let m=c&&u==8||h<n&&_t[h]==8?d==1?1:8:256;for(let g=c;g<h;g++)_t[g]=m;c=h-1}else f==8&&d==1&&(_t[c]=1);u=f,f&7&&(d=f)}}}function _J(t,e,n,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let c=o?r[o-1].to:e,u=o<r.length?r[o].from:n;for(let d=c,f,h,m;d<u;d++)if(h=ok[f=t.charCodeAt(d)])if(h<0){for(let g=a-3;g>=0;g-=3)if(ws[g+1]==-h){let y=ws[g+2],v=y&2?i:y&4?y&1?s:i:0;v&&(_t[d]=_t[ws[g]]=v),a=g;break}}else{if(ws.length==189)break;ws[a++]=d,ws[a++]=f,ws[a++]=l}else if((m=_t[d])==2||m==1){let g=m==i;l=g?0:1;for(let y=a-3;y>=0;y-=3){let v=ws[y+2];if(v&2)break;if(g)ws[y+2]|=2;else{if(v&4)break;ws[y+2]|=4}}}}}function CJ(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let o=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let l=o;l<a;){let c=_t[l];if(c==256){let u=l+1;for(;;)if(u==a){if(i==n.length)break;u=n[i++].to,a=i<n.length?n[i].from:e}else if(_t[u]==256)u++;else break;let d=s==1,f=(u<e?_t[u]:r)==1,h=d==f?d?1:2:r;for(let m=u,g=i,y=g?n[g-1].to:t;m>l;)m==y&&(m=n[--g].from,y=g?n[g-1].to:t),_t[--m]=h;l=u}else s=c,l++}}}function ak(t,e,n,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let g=_t[l];g!=a&&(u=!1,d=g==16)}let f=!u&&a==1?[]:null,h=u?r:r+1,m=l;e:for(;;)if(c<s.length&&m==s[c].from){if(d)break e;let g=s[c];if(!u)for(let y=g.to,v=c+1;;){if(y==n)break e;if(v<s.length&&s[v].from==y)y=s[v++].to;else{if(_t[y]==a)break e;break}}if(c++,f)f.push(g);else{g.from>l&&o.push(new Ta(l,g.from,h));let y=g.direction==Nc!=!(h%2);lk(t,y?r+1:r,i,g.inner,g.from,g.to,o),l=g.to}m=g.to}else{if(m==n||(u?_t[m]!=a:_t[m]==a))break;m++}f?ak(t,l,m,r+1,i,f,o):l<m&&o.push(new Ta(l,m,h)),l=m}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let g=_t[l-1];g!=a&&(u=!1,d=g==16)}let f=!u&&a==1?[]:null,h=u?r:r+1,m=l;e:for(;;)if(c&&m==s[c-1].to){if(d)break e;let g=s[--c];if(!u)for(let y=g.from,v=c;;){if(y==e)break e;if(v&&s[v-1].to==y)y=s[--v].from;else{if(_t[y-1]==a)break e;break}}if(f)f.push(g);else{g.to<l&&o.push(new Ta(g.to,l,h));let y=g.direction==Nc!=!(h%2);lk(t,y?r+1:r,i,g.inner,g.from,g.to,o),l=g.from}m=g.from}else{if(m==e||(u?_t[m-1]!=a:_t[m-1]==a))break;m--}f?ak(t,m,l,r+1,i,f,o):m<l&&o.push(new Ta(m,l,h)),l=m}}function lk(t,e,n,r,i,s,o){let a=e%2?2:1;kJ(t,i,s,r,a),_J(t,i,s,r,a),CJ(i,s,r,a),ak(t,i,s,e,n,r,o)}function EJ(t,e,n){if(!t)return[new Ta(0,0,e==tE?1:0)];if(e==Nc&&!n.length&&!SJ.test(t))return uj(t.length);if(n.length)for(;t.length>_t.length;)_t[_t.length]=256;let r=[],i=e==Nc?0:1;return lk(t,i,i,n,0,t.length,r),r}function uj(t){return[new Ta(0,t,0)]}let dj="";function AJ(t,e,n,r,i){var s;let o=r.head-t.from,a=Ta.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],c=l.side(i,n);if(o==c){let f=a+=i?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!i,n),c=l.side(i,n)}let u=Un(t.text,o,l.forward(i,n));(u<l.from||u>l.to)&&(u=c),dj=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return d&&u==c&&d.level+(i?0:1)<l.level?re.cursor(d.side(!i,n)+t.from,d.forward(i,n)?1:-1,d.level):re.cursor(u+t.from,l.forward(i,n)?-1:1,l.level)}function PJ(t,e,n){for(let r=e;r<n;r++){let i=lj(t.charCodeAt(r));if(i==1)return Nc;if(i==2||i==4)return tE}return Nc}const fj=Ee.define(),hj=Ee.define(),pj=Ee.define(),mj=Ee.define(),ck=Ee.define(),gj=Ee.define(),vj=Ee.define(),nE=Ee.define(),rE=Ee.define(),yj=Ee.define({combine:t=>t.some(e=>e)}),wj=Ee.define({combine:t=>t.some(e=>e)}),bj=Ee.define();class Hu{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Hu(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Hu(re.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Vm=qe.define({map:(t,e)=>t.map(e)}),xj=qe.define();function si(t,e,n){let r=t.facet(mj);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const No=Ee.define({combine:t=>t.length?t[0]:!0});let NJ=0;const Pu=Ee.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class Kn{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Pu.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Pu.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new Kn(NJ++,e,r,i,a=>{let l=[];return o&&l.push(rp.of(c=>{let u=c.plugin(a);return u?o(u):Qe.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return Kn.define((r,i)=>new e(r,i),n)}}class Wb{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(si(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){si(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){si(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Sj=Ee.define(),iE=Ee.define(),rp=Ee.define(),kj=Ee.define(),sE=Ee.define(),_j=Ee.define();function _T(t,e){let n=t.state.facet(_j);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return vt.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=i;for(let f=a.length-1;f>=0;f--,l--){let h=a[f].spec.bidiIsolate,m;if(h==null&&(h=PJ(e.text,c,u)),l>0&&d.length&&(m=d[d.length-1]).to==c&&m.direction==h)m.to=u,d=m.inner;else{let g={from:c,to:u,direction:h,inner:[]};d.push(g),d=g.inner}}}}),i}const Cj=Ee.define();function oE(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(Cj)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Ff=Ee.define();class Ii{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Ii(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],f=n[s+1],h=Math.max(a,d),m=Math.min(u,f);if(h<=m&&new Ii(h+c,m+c,h,m).addToSet(r),f>u)break;s+=2}if(!l)return r;new Ii(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class vy{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=yn.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new Ii(s,o,a,l))),this.changedRanges=i}static create(e,n,r){return new vy(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class CT extends Ct{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Qe.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new un],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ii(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!LJ(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?MJ(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;r=new Ii(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(_e.ie||_e.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=IJ(o,a,e.changes);return r=Ii.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=_e.chrome||_e.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Oo&&o.widget instanceof sk&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,f,h,m,g;if(r&&r.range.fromB<d&&r.range.toB>u){let k=dh.build(this.view.state.doc,u,r.range.fromB,this.decorations,this.dynamicDecorationMap),_=dh.build(this.view.state.doc,r.range.toB,d,this.decorations,this.dynamicDecorationMap);h=k.breakAtStart,m=k.openStart,g=_.openEnd;let E=this.compositionView(r);_.breakAtStart?E.breakAfter=1:_.content.length&&E.merge(E.length,E.length,_.content[0],!1,_.openStart,0)&&(E.breakAfter=_.content[0].breakAfter,_.content.shift()),k.content.length&&E.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),f=k.content.concat(E).concat(_.content)}else({content:f,breakAtStart:h,openStart:m,openEnd:g}=dh.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:y,off:v}=s.findPos(c,1),{i:w,off:b}=s.findPos(l,-1);Q5(this,w,b,y,v,f,h,m,g)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(xj)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new us(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new Uo(i,[n],n.length);let r=new un;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Ct.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(No)||this.dom.tabIndex>-1)&&iv(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(_e.gecko&&a.empty&&!this.hasComposition&&TJ(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new tr(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!uh(l.node,l.offset,u.anchorNode,u.anchorOffset)||!uh(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{_e.android&&_e.chrome&&this.dom.contains(u.focusNode)&&DJ(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=tp(this.view.root);if(d)if(a.empty){if(_e.gecko){let f=RJ(l.node,l.offset);if(f&&f!=3){let h=(f==1?q5:J5)(l.node,l.offset);h&&(l=new tr(h.node,h.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new tr(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new tr(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&uh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=tp(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=un.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);r.collapse(u.node,u.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=Ct.get(n.childNodes[i]);s instanceof un&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=Ct.get(n.childNodes[i]);s instanceof un&&(r=s.domAtPos(s.length))}return r?new tr(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=Ct.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof un)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof un&&!(r instanceof un&&n>=0)))r=a,i=c;else if(r&&c==e&&l==e&&a instanceof Oo&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(r=null)}s=c}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof un))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof us))return null;let s=Un(i.text,r);if(s==r)return null;let o=Pc(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==jt.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],f=c+d.length;if(f>i)break;if(c>=r){let h=d.dom.getBoundingClientRect();if(n.push(h.height),o){let m=d.dom.lastChild,g=m?np(m):[];if(g.length){let y=g[g.length-1],v=l?y.right-h.left:h.right-y.left;v>a&&(a=v,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?jt.RTL:jt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof un){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=np(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new Z5(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(Qe.replace({widget:new sk(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Qe.set(e)}updateDeco(){let e=1,n=this.view.state.facet(rp).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(kj).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(vt.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(bj))try{if(c(this.view,e.range,e))return!0}catch(u){si(this.view.state,u,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=oE(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;lJ(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==jt.LTR)}}function TJ(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function Ej(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=q5(n.focusNode,n.focusOffset),i=J5(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=Ct.get(i.node);if(!a||a instanceof us&&a.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let l=Ct.get(r.node);!l||l instanceof us&&l.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function MJ(t,e,n){let r=Ej(t,n);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,c=new Ii(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=i.parentNode;;d=d.parentNode){let f=Ct.get(d);if(f instanceof Uo)u.push({node:d,deco:f.mark});else{if(f instanceof un||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:i,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new zp({inclusive:!0,attributes:yJ(d),tagName:d.tagName.toLowerCase()})});else return null}}}function RJ(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let OJ=class{constructor(){this.changes=[]}compareRange(e,n){sv(e,n,this.changes)}comparePoint(e,n){sv(e,n,this.changes)}boundChange(e){sv(e,e,this.changes)}};function IJ(t,e,n){let r=new OJ;return vt.compare(t,e,n,r),r.changes}function DJ(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function LJ(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function jJ(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return re.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=Un(i.text,s,!1):a=Un(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let c=Un(i.text,o,!1);if(r(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=Un(i.text,a);if(r(i.text.slice(a,c))!=l)break;a=c}return re.range(o+i.from,a+i.from)}function $J(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function FJ(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Gb(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function ET(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function AT(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function uk(t,e,n){let r,i,s,o,a=!1,l,c,u,d;for(let m=t.firstChild;m;m=m.nextSibling){let g=np(m);for(let y=0;y<g.length;y++){let v=g[y];i&&Gb(i,v)&&(v=ET(AT(v,i.bottom),i.top));let w=$J(e,v),b=FJ(n,v);if(w==0&&b==0)return m.nodeType==3?PT(m,e,n):uk(m,e,n);(!r||o>b||o==b&&s>w)&&(r=m,i=v,s=w,o=b,a=w?e<v.left?y>0:y<g.length-1:!0),w==0?n>v.bottom&&(!u||u.bottom<v.bottom)?(l=m,u=v):n<v.top&&(!d||d.top>v.top)&&(c=m,d=v):u&&Gb(u,v)?u=AT(u,v.bottom):d&&Gb(d,v)&&(d=ET(d,v.top))}}if(u&&u.bottom>=n?(r=l,i=u):d&&d.top<=n&&(r=c,i=d),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return PT(r,f,n);if(a&&r.contentEditable!="false")return uk(r,f,n);let h=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:h}}function PT(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=Pc(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let f=e>=(u.left+u.right)/2,h=f;if((_e.chrome||_e.gecko)&&Pc(t,a).getBoundingClientRect().left==u.right&&(h=!f),d<=0)return{node:t,offset:a+(h?1:0)};i=a+(h?1:0),s=d}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function Aj(t,e,n,r=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,f=d-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let k=t.viewState.heightOracle.textHeight/2,_=!1;l=t.elementAtHeight(f),l.type!=gr.Text;)for(;f=r>0?l.bottom+k:l.top-k,!(f>=0&&f<=c);){if(_)return n?null:0;_=!0,r=-r}d=a+f;let h=l.from;if(h<t.viewport.from)return t.viewport.from==0?0:n?null:NT(t,o,l,u,d);if(h>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:NT(t,o,l,u,d);let m=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:m,y=g.elementFromPoint(u,d);y&&!t.contentDOM.contains(y)&&(y=null),y||(u=Math.max(o.left+1,Math.min(o.right-1,u)),y=g.elementFromPoint(u,d),y&&!t.contentDOM.contains(y)&&(y=null));let v,w=-1;if(y&&((i=t.docView.nearest(y))===null||i===void 0?void 0:i.isEditable)!=!1){if(m.caretPositionFromPoint){let k=m.caretPositionFromPoint(u,d);k&&({offsetNode:v,offset:w}=k)}else if(m.caretRangeFromPoint){let k=m.caretRangeFromPoint(u,d);k&&({startContainer:v,startOffset:w}=k,(!t.contentDOM.contains(v)||_e.safari&&BJ(v,w,u)||_e.chrome&&zJ(v,w,u))&&(v=void 0))}v&&(w=Math.min(to(v),w))}if(!v||!t.docView.dom.contains(v)){let k=un.find(t.docView,h);if(!k)return f>l.top+l.height/2?l.to:l.from;({node:v,offset:w}=uk(k.dom,u,d))}let b=t.docView.nearest(v);if(!b)return null;if(b.isWidget&&((s=b.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=b.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?b.posAtStart:b.posAtEnd}else return b.localPosFromDOM(v,w)+b.posAtStart}function NT(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+nJ(o,s,t.state.tabSize)}function BJ(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=i.parentNode;if(!o||o.nodeName=="DIV")break;i=o}}return Pc(t,r-1,r).getBoundingClientRect().right>n}function zJ(t,e,n){if(e!=0)return!1;for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Pc(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function dk(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==gr.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function UJ(t,e,n,r){let i=dk(t,e.head,e.assoc||-1),s=!r||i.type!=gr.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(a==jt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return re.cursor(l,n?-1:1)}return re.cursor(n?i.to:i.from,n?-1:1)}function TT(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let c=AJ(i,s,o,a,n),u=dj;if(!c){if(i.number==(n?t.state.doc.lines:1))return a;u=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),c=t.visualLineSide(i,!n)}if(l){if(!l(u))return a}else{if(!r)return c;l=r(u)}a=c}}function HJ(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==Hn.Space&&(i=o),i==o}}function VJ(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return re.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let h=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-h.from))),a=(s<0?h.top:h.bottom)+u}let d=l.left+o,f=r??t.viewState.heightOracle.textHeight>>1;for(let h=0;;h+=10){let m=a+(f+h)*s,g=Aj(t,{x:d,y:m},!1,s);if(m<l.top||m>l.bottom||(s<0?g<i:g>i)){let y=t.docView.coordsForChar(g),v=!y||m<y.top?-1:1;return re.cursor(g,v,void 0,o)}}}function ov(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||n||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function Kb(t,e,n){let r=ov(t.state.facet(sE).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:re.cursor(r,r<n.from?1:-1)}const Bf="";class WJ{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(st.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Bf}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==n)break;let a=Ct.get(i),l=Ct.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:my(i))||my(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=Ct.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(GJ(e,r.node,r.offset)?n:0))}}function GJ(t,e,n){for(;;){if(!e||n<to(e))return!1;if(e==t)return!0;n=Ac(e)+1,e=e.parentNode}}class MT{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class KJ{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=s||o?[]:qJ(e),l=new WJ(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=JJ(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!QS(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!QS(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((_e.ios||_e.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),f=Math.max(l,c),h=u.from-d,m=u.to-f;(h==0||h==1||d==0)&&(m==0||m==-1||f==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=re.single(c,l)}}}function Pj(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,c=null;(s===8||_e.android&&e.text.length<a-o)&&(l=i.to,c="end");let u=YJ(t.state.doc.sliceString(o,a,Bf),e.text,l-o,c);u&&(_e.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Bf+Bf&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:ct.of(e.text.slice(u.from,u.toB).split(Bf))})}else r&&(!t.hasFocus&&t.state.facet(No)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(_e.mac||_e.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=re.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:ct.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:_e.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=re.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:ct.of([" "])}),n)return aE(t,n,r,s);if(r&&!r.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function aE(t,e,n,r=-1){if(_e.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(_e.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Uu(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Uu(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Uu(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=XJ(t,e,n));return t.state.facet(gj).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function XJ(t,e,n){let r,i=t.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=i.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&Ej(t,n.main.head);if(d){let m=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-m}}else u=t.state.doc.lineAt(s.head);let f=s.to-e.to,h=s.to-s.from;r=i.changeByRange(m=>{if(m.from==s.from&&m.to==s.to)return{changes:a,range:l||m.map(a)};let g=m.to-f,y=g-c.length;if(m.to-m.from!=h||t.state.sliceDoc(y,g)!=c||m.to>=u.from&&m.from<=u.to)return{range:m};let v=i.changes({from:y,to:g,insert:e.insert}),w=m.to-s.to;return{changes:v,range:l?re.range(Math.max(0,l.anchor+w),Math.max(0,l.head+w)):m.map(v)}})}else r={changes:a,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function YJ(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function qJ(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new MT(n,r)),(i!=n||s!=r)&&e.push(new MT(i,s))),e}function JJ(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?re.single(n+e,r+e):null}class ZJ{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,_e.safari&&e.contentDOM.addEventListener("input",()=>null),_e.gecko&&pZ(e.contentDOM.ownerDocument)}handleEvent(e){!oZ(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=QJ(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Tj.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),_e.android&&_e.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return _e.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=Nj.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||eZ.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Uu(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:_e.safari&&!_e.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function RT(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){si(n.state,i)}}}function QJ(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(RT(r.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(RT(r.value,l))}}for(let r in ds)n(r).handlers.push(ds[r]);for(let r in Bi)n(r).observers.push(Bi[r]);return e}const Nj=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],eZ="dthko",Tj=[16,17,18,20,91,92,224,225],Wm=6;function Gm(t){return Math.max(0,t)*.7+8}function tZ(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class nZ{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=cJ(e.contentDOM),this.atoms=e.state.facet(sE).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(st.allowMultipleSelections)&&rZ(e,n),this.dragging=sZ(e,n)&&Oj(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&tZ(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=oE(this.view);e.clientX-l.left<=i+Wm?n=-Gm(i-e.clientX):e.clientX+l.right>=o-Wm&&(n=Gm(e.clientX-o)),e.clientY-l.top<=s+Wm?r=-Gm(s-e.clientY):e.clientY+l.bottom>=a-Wm&&(r=Gm(e.clientY-a)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=ov(this.atoms,i.from,0);o!=i.from&&(s=re.cursor(o,-1))}else{let o=ov(this.atoms,i.from,-1),a=ov(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=re.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?re.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function rZ(t,e){let n=t.state.facet(fj);return n.length?n[0](e):_e.mac?e.metaKey:e.ctrlKey}function iZ(t,e){let n=t.state.facet(hj);return n.length?n[0](e):_e.mac?!e.altKey:!e.ctrlKey}function sZ(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=tp(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function oZ(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=Ct.get(n))&&r.ignoreEvent(e))return!1;return!0}const ds=Object.create(null),Bi=Object.create(null),Mj=_e.ie&&_e.ie_version<15||_e.ios&&_e.webkit_version<604;function aZ(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),Rj(t,n.value)},50)}function U0(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function Rj(t,e){e=U0(t.state,nE,e);let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(fk!=null&&n.selection.ranges.every(l=>l.empty)&&fk==s.toString()){let l=-1;r=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:re.cursor(c.from+d.length)}})}else o?r=n.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:re.cursor(l.from+c.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Bi.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};ds.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Bi.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Bi.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};ds.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(pj))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=uZ(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new nZ(t,e,n,r)),r&&t.observer.ignore(()=>{K5(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function OT(t,e,n,r){if(r==1)return re.cursor(e,n);if(r==2)return jJ(t.state,e,n);{let i=un.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,re.range(o,a)}}let IT=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function lZ(t,e,n,r){let i=un.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&IT(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&IT(n,r,a)?1:o&&o.bottom>=r?-1:1}function DT(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:lZ(t,n,e.clientX,e.clientY)}}const cZ=_e.ie&&_e.ie_version<=11;let LT=null,jT=0,$T=0;function Oj(t){if(!cZ)return t.detail;let e=LT,n=$T;return LT=t,$T=Date.now(),jT=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(jT+1)%3:1}function uZ(t,e){let n=DT(t,e),r=Oj(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let l=DT(t,s),c,u=OT(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let d=OT(t,n.pos,n.bias,r),f=Math.min(d.from,u.from),h=Math.max(d.to,u.to);u=f<u.from?re.range(f,h):re.range(h,f)}return o?i.replaceRange(i.main.extend(u.from,u.to)):a&&r==1&&i.ranges.length>1&&(c=dZ(i,l.pos))?c:a?i.addRange(u):re.create([u])}}}function dZ(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return re.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}ds.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=n.to||o<=n.from)&&(n=re.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",U0(t.state,rE,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ds.dragend=t=>(t.inputState.draggedContent=null,!1);function FT(t,e,n,r){if(n=U0(t.state,nE,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&iZ(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}ds.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&FT(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return FT(t,e,r,!0),!0}return!1};ds.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=Mj?null:e.clipboardData;return n?(Rj(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(aZ(t),!1)};function fZ(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function hZ(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:U0(t,rE,e.join(t.lineBreak)),ranges:n,linewise:r}}let fk=null;ds.copy=ds.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=hZ(t.state);if(!n&&!i)return!1;fk=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=Mj?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(fZ(t,n),!1)};const Ij=qo.define();function Dj(t,e){let n=[];for(let r of t.facet(vj)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:Ij.of(!0)}):null}function Lj(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=Dj(t.state,e);n?t.dispatch(n):t.update([])}},10)}Bi.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Lj(t)};Bi.blur=t=>{t.observer.clearSelectionRange(),Lj(t)};Bi.compositionstart=Bi.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Bi.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,_e.chrome&&_e.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Bi.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};ds.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return aE(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let i;if(_e.chrome&&_e.android&&(i=Nj.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return _e.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),_e.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Bi.compositionend(t,e),20),!1};const BT=new Set;function pZ(t){BT.has(t)||(BT.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const zT=["pre-wrap","normal","pre-line","break-spaces"];let bd=!1;function UT(){bd=!1}class mZ{constructor(e){this.lineWrapping=e,this.doc=ct.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return zT.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=zT.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class gZ{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class js{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?gr.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ll?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new js(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var Rt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Rt||(Rt={}));const av=.001;class vr{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>av&&(bd=!0),this.height=e)}replace(e,n,r){return vr.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=i[a],f=s.lineAt(l,Rt.ByPosNoHeight,r.setDoc(n),0,0),h=f.to>=c?f:s.lineAt(c,Rt.ByPosNoHeight,r,0,0);for(d+=h.to-c,c=h.to;a>0&&f.from<=i[a-1].toA;)l=i[a-1].fromA,u=i[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,Rt.ByPosNoHeight,r,0,0));u+=f.from-l,l=f.from;let m=lE.build(r.setDoc(o),e,u,d);s=yy(s,s.replace(l,c,m))}return s.updateHeight(r,0)}static empty(){return new Jr(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new vZ(vr.of(e.slice(0,n)),o,vr.of(e.slice(r)))}}function yy(t,e){return t==e?t:(t.constructor!=e.constructor&&(bd=!0),e)}vr.prototype.size=1;class jj extends vr{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new js(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Jr extends jj{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new js(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof Jr||i instanceof Dn&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Dn?i=new Jr(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):vr.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Dn extends vr{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let c=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),u=n.doc.lineAt(c),d=a+u.length*l,f=Math.max(r,e-d/2);return new js(u.from,u.length,f,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:u,length:d}=n.doc.line(s+c);return new js(u,d,r+a*c,a,0)}}lineAt(e,n,r,i,s){if(n==Rt.ByHeight)return this.blockAt(e,r,i,s);if(n==Rt.ByPosNoHeight){let{from:h,to:m}=r.doc.lineAt(e);return new js(h,m-h,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),c=r.doc.lineAt(e),u=a+c.length*l,d=c.number-o,f=i+a*d+l*(c.from-s-d);return new js(c.from,c.length,Math.max(i,Math.min(f,i+this.height-u)),u,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(r,s);for(let u=e,d=i;u<=n;){let f=r.doc.lineAt(u);if(u==e){let m=f.number-a;d+=l*m+c*(e-s-m)}let h=l+c*f.length;o(new js(f.from,f.length,d,h,0)),d+=h,u=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Dn?r[r.length-1]=new Dn(s.length+i):r.push(null,new Dn(i-1))}if(e>0){let s=r[0];s instanceof Dn?r[0]=new Dn(e+s.length):r.unshift(new Dn(e-1),null)}return vr.of(r)}decomposeLeft(e,n){n.push(new Dn(e-1),null)}decomposeRight(e,n){n.push(null,new Dn(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),l=-1;for(i.from>n&&o.push(new Dn(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=i.heights[i.index++];l==-1?l=d:Math.abs(d-l)>=av&&(l=-2);let f=new Jr(u,d);f.outdated=!1,o.push(f),a+=u+1}a<=s&&o.push(null,new Dn(s-a).updateHeight(e,a));let c=vr.of(o);return(l<0||Math.abs(c.height-this.height)>=av||Math.abs(l-this.heightMetrics(e,n).perLine)>=av)&&(bd=!0),yy(this,c)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class vZ extends vr{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==Rt.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==Rt.ByPosNoHeight?Rt.ByPosNoHeight:Rt.ByPos;return l?c.join(this.right.lineAt(a,u,r,o,a)):this.left.lineAt(a,u,r,i,s).join(c)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let c=this.lineAt(l,Rt.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&HT(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),HT(s,a)}return vr.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?vr.of(this.break?[e,null,n]:[e,n]):(this.left=yy(this.left,e),this.right=yy(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function HT(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Dn&&(r=t[e+1])instanceof Dn&&t.splice(e-1,3,new Dn(n.length+1+r.length))}const yZ=5;class lE{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Jr?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Jr(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new jj(o,i,r)):(o||s||i>=yZ)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Jr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Dn(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Jr)return e;let n=new Jr(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Jr)&&!this.isCovered?this.nodes.push(new Jr(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Jr&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new lE(r,e);return vt.spans(n,r,i,s,0),s.finish(r)}}function wZ(t,e,n){let r=new bZ;return vt.compare(t,e,n,r,0),r.changes}class bZ{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&sv(e,n,this.changes,5)}}function xZ(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(c==t.parentNode?i.innerHeight:l,f.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function SZ(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function kZ(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Xb{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return Qe.replace({widget:new _Z(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class _Z extends kl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class VT{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=WT,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=jt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(iE).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new mZ(n),this.stateDeco=e.facet(rp).filter(r=>typeof r!="function"),this.heightMap=vr.empty().applyChanges(this.stateDeco,ct.empty,this.heightOracle.setDoc(e.doc),[new Ii(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Qe.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new Km(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?WT:new cE(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(zf(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(rp).filter(u=>typeof u!="function");let i=e.changedRanges,s=Ii.extendWithRanges(i,wZ(r,this.stateDeco,e?e.changes:yn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);UT(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||bd)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(wj)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?jt.RTL:jt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:k,scaleY:_}=G5(n,a);(k>.005&&Math.abs(this.scaleX-k)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=k,this.scaleY=_,c|=16,o=l=!0)}let d=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let h=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=h&&(this.scrollAnchorHeight=-1,this.scrollTop=h),this.scrolledToBottom=Y5(e.scrollDOM);let m=(this.printing?kZ:xZ)(n,this.paddingTop),g=m.top-this.pixelViewport.top,y=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget&&!SZ(e.dom))return 0;let w=a.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let k=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(k)&&(o=!0),o||i.lineWrapping&&Math.abs(w-this.contentDOMWidth)>i.charWidth){let{lineHeight:_,charWidth:E,textHeight:C}=e.docView.measureTextSize();o=_>0&&i.refresh(s,_,E,C,w/E,k),o&&(e.docView.minWidth=0,c|=16)}g>0&&y>0?u=Math.max(g,y):g<0&&y<0&&(u=Math.min(g,y)),UT();for(let _ of this.viewports){let E=_.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?vr.empty().applyChanges(this.stateDeco,ct.empty,this.heightOracle,[new Ii(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new gZ(_.from,E))}bd&&(c|=2)}let b=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Km(i.lineAt(o-r*1e3,Rt.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,Rt.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(c,Rt.ByPos,s,0,0),f;n.y=="center"?f=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?f=d.top:f=d.bottom-u,l=new Km(i.lineAt(f-1e3/2,Rt.ByHeight,s,0,0).from,i.lineAt(f+u+1e3/2,Rt.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new Km(this.heightMap.lineAt(r,Rt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Rt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Rt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,Rt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new Xb(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=jt.LTR&&!r)return[];let a=[],l=(u,d,f,h)=>{if(d-u<s)return;let m=this.state.selection.main,g=[m.from];m.empty||g.push(m.to);for(let v of g)if(v>u&&v<d){l(u,v-10,f,h),l(v+10,d,f,h);return}let y=EZ(e,v=>v.from>=f.from&&v.to<=f.to&&Math.abs(v.from-u)<s&&Math.abs(v.to-d)<s&&!g.some(w=>v.from<w&&v.to>w));if(!y){if(d<f.to&&n&&r&&n.visibleRanges.some(b=>b.from<=d&&b.to>=d)){let b=n.moveToLineBoundary(re.cursor(d),!1,!0).head;b>u&&(d=b)}let v=this.gapSize(f,u,d,h),w=r||v<2e6?v:2e6;y=new Xb(u,d,v,w)}a.push(y)},c=u=>{if(u.length<o||u.type!=gr.Text)return;let d=CZ(u.from,u.to,this.stateDeco);if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,h,m;if(r){let g=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,v;if(f!=null){let w=Ym(d,f),b=((this.visibleBottom-this.visibleTop)/2+g)/u.height;y=w-b,v=w+b}else y=(this.visibleTop-u.top-g)/u.height,v=(this.visibleBottom-u.top+g)/u.height;h=Xm(d,y),m=Xm(d,v)}else{let g=d.total*this.heightOracle.charWidth,y=i*this.heightOracle.charWidth,v=0;if(g>2e6)for(let E of e)E.from>=u.from&&E.from<u.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+v<this.pixelViewport.left&&(v=E.size-E.displaySize);let w=this.pixelViewport.left+v,b=this.pixelViewport.right+v,k,_;if(f!=null){let E=Ym(d,f),C=((b-w)/2+y)/g;k=E-C,_=E+C}else k=(w-y)/g,_=(b+y)/g;h=Xm(d,k),m=Xm(d,_)}h>u.from&&l(u.from,h,u,d),m<u.to&&l(m,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,r,i){let s=Ym(i,r)-Ym(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Xb.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Qe.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];vt.spans(n,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||zf(this.heightMap.lineAt(e,Rt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||zf(this.heightMap.lineAt(this.scaler.fromDOM(e),Rt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return zf(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Km=class{constructor(e,n){this.from=e,this.to=n}};function CZ(t,e,n){let r=[],i=t,s=0;return vt.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function Xm({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function Ym(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function EZ(t,e){for(let n of t)if(e(n))return n}const WT={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class cE{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=n.lineAt(a,Rt.ByPos,e,0,0).top,u=n.lineAt(l,Rt.ByPos,e,0,0).bottom;return i+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof cE?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function zf(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new js(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>zf(i,e)):t._content)}const qm=Ee.define({combine:t=>t.join(" ")}),hk=Ee.define({combine:t=>t.indexOf(!0)>-1}),pk=ol.newName(),$j=ol.newName(),Fj=ol.newName(),Bj={"&light":"."+$j,"&dark":"."+Fj};function mk(t,e,n){return new ol(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const AZ=mk("."+pk,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Bj),PZ={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Yb=_e.ie&&_e.ie_version<=11;class NZ{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new uJ,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(_e.ie&&_e.ie_version<=11||_e.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&_e.android&&e.constructor.EDIT_CONTEXT!==!1&&!(_e.chrome&&_e.chrome_version<126)&&(this.editContext=new MZ(e),e.state.facet(No)&&(e.contentDOM.editContext=this.editContext.editContext)),Yb&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(No)?r.root.activeElement!=this.dom:!iv(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(_e.ie&&_e.ie_version<=11||_e.android&&_e.chrome)&&!r.state.selection.main.empty&&i.focusNode&&uh(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=tp(e.root);if(!n)return!1;let r=_e.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&TZ(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=iv(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&fJ(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,PZ),Yb&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Yb&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Uu(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&iv(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new KJ(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=Pj(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=GT(n,e.previousSibling||e.target.previousSibling,-1),i=GT(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(No)!=e.state.facet(No)&&(e.view.contentDOM.editContext=e.state.facet(No)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function GT(t,e,n){for(;e;){let r=Ct.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function KT(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return uh(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function TZ(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return KT(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?KT(t,n):null}class MZ{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(r.updateRangeStart),l=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:ct.of(r.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=re.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));u.main.eq(i)||e.dispatch({selection:u,userEvent:"select"});return}if((_e.mac||_e.android)&&c.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:ct.of([r.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);aE(e,c,re.single(this.toEditorPos(r.selectionStart,u),this.toEditorPos(r.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(Qe.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:xj.of(Qe.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=tp(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(r)return;let u=c.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(c)){i=this.pendingContextChange=null,n+=u,this.to+=u;return}else i=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Re{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||dJ(e.parent)||document,this.viewState=new VT(e.state||st.create(e)),e.scrollTo&&e.scrollTo.is(Vm)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Pu).map(i=>new Wb(i));for(let i of this.plugins)i.update(this);this.observer=new NZ(this),this.inputState=new ZJ(this),this.inputState.ensureHandlers(this.plugins),this.docView=new CT(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Sn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(Ij))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=Dj(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(st.phrases)!=this.state.facet(st.phrases))return this.setState(s);i=vy.create(this,s,e),i.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:h}=f.state.selection;d=new Hu(h.empty?h:re.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of f.effects)h.is(Vm)&&(d=h.value.clip(this.state))}this.viewState.update(i,d),this.bidiCache=wy.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Ff)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(qm)!=i.state.facet(qm)&&(this.viewState.mustMeasureContent=!0),(n||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(ck))try{f(i)}catch(h){si(this.state,h,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!Pj(this,u)&&c.force&&Uu(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new VT(e),this.plugins=e.facet(Pu).map(r=>new Wb(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new CT(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Pu),r=e.state.facet(Pu);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new Wb(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){si(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(Y5(r))s=-1,o=this.viewState.heightMap.height;else{let h=this.viewState.scrollAnchorAt(i);s=h.from,o=h.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(h=>{try{return h.read(this)}catch(m){return si(this.state,m),XT}}),d=vy.create(this,this.state,[]),f=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d),f&&this.docViewUpdate());for(let h=0;h<c.length;h++)if(u[h]!=XT)try{let m=c[h];m.write&&m.write(u[h],this)}catch(m){si(this.state,m)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let m=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(m>1||m<-1){i=i+m,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(ck))a(n)}get themeClasses(){return pk+" "+(this.state.facet(hk)?Fj:$j)+" "+this.state.facet(qm)}updateAttrs(){let e=YT(this,Sj,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(No)?"true":"false",class:"cm-content",style:`${_e.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),YT(this,iE,n);let r=this.observer.ignore(()=>{let i=ik(this.contentDOM,this.contentAttrs,n),s=ik(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(Re.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Ff);let e=this.state.facet(Re.cspNonce);ol.mount(this.root,this.styleModules.concat(AZ).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return Kb(this,e,TT(this,e,n,r))}moveByGroup(e,n){return Kb(this,e,TT(this,e,n,r=>HJ(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return re.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return UJ(this,e,n,r)}moveVertically(e,n,r){return Kb(this,e,VJ(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),Aj(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Ta.find(s,e-i.from,-1,n)];return B0(r,o.dir==jt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(yj)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>RZ)return uj(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||cj(s.isolates,r=_T(this,e))))return s.order;r||(r=_T(this,e));let i=EJ(e.text,n,r);return this.bidiCache.push(new wy(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||_e.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{K5(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Vm.of(new Hu(typeof e=="number"?re.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Vm.of(new Hu(re.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Kn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Kn.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=ol.newName(),i=[qm.of(r),Ff.of(mk(`.${r}`,e))];return n&&n.dark&&i.push(hk.of(!0)),i}static baseTheme(e){return $p.lowest(Ff.of(mk("."+pk,e,Bj)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&Ct.get(r)||Ct.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}Re.styleModule=Ff;Re.inputHandler=gj;Re.clipboardInputFilter=nE;Re.clipboardOutputFilter=rE;Re.scrollHandler=bj;Re.focusChangeEffect=vj;Re.perLineTextDirection=yj;Re.exceptionSink=mj;Re.updateListener=ck;Re.editable=No;Re.mouseSelectionStyle=pj;Re.dragMovesSelection=hj;Re.clickAddsSelectionRange=fj;Re.decorations=rp;Re.outerDecorations=kj;Re.atomicRanges=sE;Re.bidiIsolatedRanges=_j;Re.scrollMargins=Cj;Re.darkTheme=hk;Re.cspNonce=Ee.define({combine:t=>t.length?t[0]:""});Re.contentAttributes=iE;Re.editorAttributes=Sj;Re.lineWrapping=Re.contentAttributes.of({class:"cm-lineWrapping"});Re.announce=qe.define();const RZ=4096,XT={};class wy{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:jt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new wy(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function YT(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&rk(o,n)}return n}const OZ=_e.mac?"mac":_e.windows?"win":_e.linux?"linux":"key";function IZ(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function Jm(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const DZ=$p.default(Re.domEventHandlers({keydown(t,e){return Hj(Uj(e.state),t,e,"editor")}})),zj=Ee.define({enables:DZ}),qT=new WeakMap;function Uj(t){let e=t.facet(zj),n=qT.get(e);return n||qT.set(e,n=$Z(e.reduce((r,i)=>r.concat(i),[]))),n}function LZ(t,e,n){return Hj(Uj(t.state),e,t,n)}let ba=null;const jZ=4e3;function $Z(t,e=OZ){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,f;let h=n[o]||(n[o]=Object.create(null)),m=a.split(/ (?!$)/).map(v=>IZ(v,e));for(let v=1;v<m.length;v++){let w=m.slice(0,v).join(" ");i(w,!0),h[w]||(h[w]={preventDefault:!0,stopPropagation:!1,run:[b=>{let k=ba={view:b,prefix:w,scope:o};return setTimeout(()=>{ba==k&&(ba=null)},jZ),!0}]})}let g=m.join(" ");i(g,!1);let y=h[g]||(h[g]={preventDefault:!1,stopPropagation:!1,run:((f=(d=h._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&y.run.push(l),c&&(y.preventDefault=!0),u&&(y.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let f in u)u[f].run.push(h=>d(h,gk))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let gk=null;function Hj(t,e,n,r){gk=e;let i=oJ(e),s=ki(i,0),o=Po(s)==i.length&&i!=" ",a="",l=!1,c=!1,u=!1;ba&&ba.view==n&&ba.scope==r&&(a=ba.prefix+" ",Tj.indexOf(e.keyCode)<0&&(c=!0,ba=null));let d=new Set,f=y=>{if(y){for(let v of y.run)if(!d.has(v)&&(d.add(v),v(n)))return y.stopPropagation&&(u=!0),!0;y.preventDefault&&(y.stopPropagation&&(u=!0),c=!0)}return!1},h=t[r],m,g;return h&&(f(h[a+Jm(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(_e.windows&&e.ctrlKey&&e.altKey)&&(m=al[e.keyCode])&&m!=i?(f(h[a+Jm(m,e,!0)])||e.shiftKey&&(g=ep[e.keyCode])!=i&&g!=m&&f(h[a+Jm(g,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(h[a+Jm(i,e,!0)])&&(l=!0),!l&&f(h._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),gk=null,l}class Hp{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=Vj(e);return[new Hp(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return FZ(e,n,r)}}function Vj(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==jt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function JT(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let s=t.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function FZ(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==jt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=Vj(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),h=dk(t,r,1),m=dk(t,i,-1),g=h.type==gr.Text?h:null,y=m.type==gr.Text?m:null;if(g&&(t.lineWrapping||h.widgetLineBreaks)&&(g=JT(t,r,1,g)),y&&(t.lineWrapping||m.widgetLineBreaks)&&(y=JT(t,i,-1,y)),g&&y&&g.from==y.from&&g.to==y.to)return w(b(n.from,n.to,g));{let _=g?b(n.from,null,g):k(h,!1),E=y?b(null,n.to,y):k(m,!0),C=[];return(g||h).to<(y||m).from-(g&&y?1:0)||h.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<E.top?C.push(v(d,_.bottom,f,E.top)):_.bottom<E.top&&t.elementAtHeight((_.bottom+E.top)/2).type==gr.Text&&(_.bottom=E.top=(_.bottom+E.top)/2),w(_).concat(C).concat(w(E))}function v(_,E,C,P){return new Hp(e,_-l.left,E-l.top,C-_,P-E)}function w({top:_,bottom:E,horizontal:C}){let P=[];for(let M=0;M<C.length;M+=2)P.push(v(C[M],_,C[M+1],E));return P}function b(_,E,C){let P=1e9,M=-1e9,O=[];function I(U,X,Z,te,H){let $=t.coordsAtPos(U,U==C.to?-2:2),ne=t.coordsAtPos(Z,Z==C.from?2:-2);!$||!ne||(P=Math.min($.top,ne.top,P),M=Math.max($.bottom,ne.bottom,M),H==jt.LTR?O.push(s&&X?d:$.left,s&&te?f:ne.right):O.push(!s&&te?d:ne.left,!s&&X?f:$.right))}let D=_??C.from,G=E??C.to;for(let U of t.visibleRanges)if(U.to>D&&U.from<G)for(let X=Math.max(U.from,D),Z=Math.min(U.to,G);;){let te=t.state.doc.lineAt(X);for(let H of t.bidiSpans(te)){let $=H.from+te.from,ne=H.to+te.from;if($>=Z)break;ne>X&&I(Math.max($,X),_==null&&$<=D,Math.min(ne,Z),E==null&&ne>=G,H.dir)}if(X=te.to+1,X>=Z)break}return O.length==0&&I(D,_==null,G,E==null,t.textDirection),{top:P,bottom:M,horizontal:O}}function k(_,E){let C=a.top+(E?_.top:_.bottom);return{top:C,bottom:C,horizontal:[]}}}function BZ(t,e){return t.constructor==e.constructor&&t.eq(e)}class zZ{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(lv)!=e.state.facet(lv)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(lv);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!BZ(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const lv=Ee.define();function Wj(t){return[Kn.define(e=>new zZ(e,t)),lv.of(t)]}const ip=Ee.define({combine(t){return Sl(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function UZ(t={}){return[ip.of(t),HZ,VZ,WZ,wj.of(!0)]}function Gj(t){return t.startState.facet(ip)!=t.state.facet(ip)}const HZ=Wj({above:!0,markers(t){let{state:e}=t,n=e.facet(ip),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:re.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Hp.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=Gj(t);return n&&ZT(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){ZT(e.state,t)},class:"cm-cursorLayer"});function ZT(t,e){e.style.animationDuration=t.facet(ip).cursorBlinkRate+"ms"}const VZ=Wj({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Hp.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||Gj(t)},class:"cm-selectionLayer"}),WZ=$p.highest(Re.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function QT(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function GZ(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class KZ{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(a,l,c,u)=>i(u,c,c+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,c,u)=>{let d=r(a,l,c);d&&u(c,c+a[0].length,d)};else if(r)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new sl,r=n.add.bind(n);for(let{from:i,to:s}of GZ(e,this.maxLength))QT(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let f=[],h,m=(g,y,v)=>f.push(v.range(g,y));if(l==c)for(this.regexp.lastIndex=u-l.from;(h=this.regexp.exec(l.text))&&h.index<d-l.from;)this.addMatch(h,e,h.index+l.from,m);else QT(e.state.doc,this.regexp,u,d,(g,y)=>this.addMatch(y,e,g,m));n=n.update({filterFrom:u,filterTo:d,filter:(g,y)=>g<u||y>d,add:f})}}return n}}const vk=/x/.unicode!=null?"gu":"g",XZ=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,vk),YZ={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let qb=null;function qZ(){var t;if(qb==null&&typeof document<"u"&&document.body){let e=document.body.style;qb=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return qb||!1}const cv=Ee.define({combine(t){let e=Sl(t,{render:null,specialChars:XZ,addSpecialChars:null});return(e.replaceTabs=!qZ())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,vk)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,vk)),e}});function JZ(t={}){return[cv.of(t),ZZ()]}let eM=null;function ZZ(){return eM||(eM=Kn.fromClass(class{constructor(t){this.view=t,this.decorations=Qe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(cv)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new KZ({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=ki(e[0],0);if(s==9){let o=i.lineAt(r),a=n.state.tabSize,l=Bp(o.text,a,r-o.from);return Qe.replace({widget:new nQ((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Qe.replace({widget:new tQ(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(cv);t.startState.facet(cv)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const QZ="";function eQ(t){return t>=32?QZ:t==10?"":String.fromCharCode(9216+t)}class tQ extends kl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=eQ(this.code),r=e.state.phrase("Control character")+" "+(YZ[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class nQ extends kl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function rQ(){return sQ}const iQ=Qe.line({class:"cm-activeLine"}),sQ=Kn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(iQ.range(i.from)),e=i.from)}return Qe.set(n)}},{decorations:t=>t.decorations}),lf="-10000px";class Kj{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function oQ(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Jb=Ee.define({combine:t=>{var e,n,r;return{position:_e.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||oQ}}}),tM=new WeakMap,uE=Kn.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Jb);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Kj(t,dE,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(Jb);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=lf,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(_e.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==lf&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=oE(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Jb).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],f=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,r.top)||d.top>=Math.min(n.bottom,r.bottom)||d.right<Math.max(n.left,r.left)-.1||d.left>Math.min(n.right,r.right)+.1)){u.style.top=lf;continue}let h=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,m=h?7:0,g=f.right-f.left,y=(e=tM.get(c))!==null&&e!==void 0?e:f.bottom-f.top,v=c.offset||lQ,w=this.view.textDirection==jt.LTR,b=f.width>r.right-r.left?w?r.left:r.right-f.width:w?Math.max(r.left,Math.min(d.left-(h?14:0)+v.x,r.right-g)):Math.min(Math.max(r.left,d.left-g+(h?14:0)-v.x),r.right-g),k=this.above[a];!l.strictSide&&(k?d.top-y-m-v.y<r.top:d.bottom+y+m+v.y>r.bottom)&&k==r.bottom-d.bottom>d.top-r.top&&(k=this.above[a]=!k);let _=(k?d.top-r.top:r.bottom-d.bottom)-m;if(_<y&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=lf;continue}tM.set(c,y),u.style.height=(y=_)/s+"px"}else u.style.height&&(u.style.height="");let E=k?d.top-y-m-v.y:d.bottom+m+v.y,C=b+g;if(c.overlap!==!0)for(let P of o)P.left<C&&P.right>b&&P.top<E+y&&P.bottom>E&&(E=k?P.top-y-2-m:P.bottom+m+2);if(this.position=="absolute"?(u.style.top=(E-t.parent.top)/s+"px",nM(u,(b-t.parent.left)/i)):(u.style.top=E/s+"px",nM(u,b/i)),h){let P=d.left+(w?v.x:-v.x)-(b+14-7);h.style.left=P/i+"px"}c.overlap!==!0&&o.push({left:b,top:E,right:C,bottom:E+y}),u.classList.toggle("cm-tooltip-above",k),u.classList.toggle("cm-tooltip-below",!k),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=lf}},{eventObservers:{scroll(){this.maybeMeasure()}}});function nM(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const aQ=Re.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),lQ={x:0,y:0},dE=Ee.define({enables:[uE,aQ]}),by=Ee.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class H0{static create(e){return new H0(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Kj(e,by,(n,r)=>this.createHostedView(n,r),n=>n.dom.remove())}createHostedView(e,n){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const cQ=dE.compute([by],t=>{let e=t.facet(by);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:H0.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class uQ{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.nearest(n.target);if(!r)return;let i,s=1;if(r instanceof Na)i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let a=e.coordsAtPos(i);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(u=>u.from<=i&&u.to>=i),c=l&&l.dir==jt.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,i,s);if(o!=null&&o.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>si(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(uE),n=e?e.manager.tooltips.findIndex(r=>r.create==H0.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!dQ(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(r=(n=i[0])===null||n===void 0?void 0:n.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!fQ(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Zm=4;function dQ(t,e){let{left:n,right:r,top:i,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),s=Math.max(a.bottom,s)}return e.clientX>=n-Zm&&e.clientX<=r+Zm&&e.clientY>=i-Zm&&e.clientY<=s+Zm}function fQ(t,e,n,r,i,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=t.posAtCoords({x:r,y:i},!1);return l>=e&&l<=n}function hQ(t,e={}){let n=qe.define(),r=br.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let l=s.changes.mapPos(a.pos,-1,Rr.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}i=o}for(let o of s.effects)o.is(n)&&(i=o.value),o.is(mQ)&&(i=[]);return i},provide:i=>by.from(i)});return{active:r,extension:[r,Kn.define(i=>new uQ(i,t,r,n,e.hoverTime||300)),cQ]}}function pQ(t,e){let n=t.plugin(uE);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const mQ=qe.define(),rM=Ee.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function sp(t,e){let n=t.plugin(Xj),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Xj=Kn.fromClass(class{constructor(t){this.input=t.state.facet(op),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(rM);this.top=new Qm(t,!0,e.topContainer),this.bottom=new Qm(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(rM);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Qm(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Qm(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(op);if(n!=this.input){let r=n.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),i.push(u),(u.top?s:o).push(u)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Qm{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=iM(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=iM(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function iM(t){let e=t.nextSibling;return t.remove(),e}const op=Ee.define({enables:Xj});class cl extends Ec{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}cl.prototype.elementClass="";cl.prototype.toDOM=void 0;cl.prototype.mapMode=Rr.TrackBefore;cl.prototype.startSide=cl.prototype.endSide=-1;cl.prototype.point=!0;const uv=Ee.define(),gQ=Ee.define(),dv=Ee.define(),sM=Ee.define({combine:t=>t.some(e=>e)});function vQ(t){return[yQ]}const yQ=Kn.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(dv).map(e=>new aM(t,e)),this.fixed=!t.state.facet(sM);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(sM)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=vt.iter(this.view.state.facet(uv),this.view.viewport.from),r=[],i=this.gutters.map(s=>new wQ(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==gr.Text&&o){yk(n,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==gr.Text){yk(n,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(dv),n=t.state.facet(dv),r=t.docChanged||t.heightChanged||t.viewportChanged||!vt.eq(t.startState.facet(uv),t.state.facet(uv),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new aM(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==jt.LTR?{left:r,right:i}:{right:r,left:i}})});function oM(t){return Array.isArray(t)?t:[t]}function yk(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class wQ{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=vt.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let a=new Yj(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];yk(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(gQ)){let o=s(e,n.widget,n);o&&(i||(i=[])).push(o)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class aM{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=oM(n.markers(e)),n.initialSpacer&&(this.spacer=new Yj(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=oM(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!vt.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Yj{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),bQ(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(r+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function bQ(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const xQ=Ee.define(),SQ=Ee.define(),Nu=Ee.define({combine(t){return Sl(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return r}})}});class Zb extends cl{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Qb(t,e){return t.state.facet(Nu).formatNumber(e,t.state)}const kQ=dv.compute([Nu],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(xQ)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new Zb(Qb(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(SQ)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Nu)!=e.state.facet(Nu),initialSpacer(e){return new Zb(Qb(e,lM(e.state.doc.lines)))},updateSpacer(e,n){let r=Qb(n.view,lM(n.view.state.doc.lines));return r==e.number?e:new Zb(r)},domEventHandlers:t.facet(Nu).domEventHandlers,side:"before"}));function _Q(t={}){return[Nu.of(t),vQ(),kQ]}function lM(t){let e=9;for(;e<t;)e=e*10+9;return e}const CQ=new class extends cl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},EQ=uv.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(CQ.range(i)))}return vt.of(e)});function AQ(){return EQ}const qj=new Fp;function PQ(t){window.codemirror&&window.codemirror.dispatch({effects:qj.reconfigure(st.readOnly.of(t))})}const wk=qe.define(),NQ=br.define({create(){return Qe.none},update(t,e){let n=t.map(e.changes);for(const r of e.effects)r.is(wk)&&(n=Qe.none,r.value!==null&&(n=n.update({add:[TQ.range(r.value)]})));return n},provide:t=>Re.decorations.from(t)}),TQ=Qe.line({class:"!bg-mantis-400/10"});function Jj(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:wk.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:wk.of(e)})}}const xy=ce(!1),fE={},MQ=Symbol((fE?"production":void 0)!=="production"?"RESET":""),Zj=t=>typeof(t==null?void 0:t.then)=="function";function RQ(t=()=>{try{return window.localStorage}catch(n){(fE?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let r,i;const s={getItem:(l,c)=>{var u,d;const f=m=>{if(m=m||"",r!==m){try{i=JSON.parse(m,e==null?void 0:e.reviver)}catch{return c}r=m}return i},h=(d=(u=t())==null?void 0:u.getItem(l))!=null?d:null;return Zj(h)?h.then(f):f(h)},setItem:(l,c)=>{var u;return(u=t())==null?void 0:u.setItem(l,JSON.stringify(c,void 0))},removeItem:l=>{var c;return(c=t())==null?void 0:c.removeItem(l)}},o=l=>(c,u,d)=>l(c,f=>{let h;try{h=JSON.parse(f||"")}catch{h=d}u(h)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,c)=>{if(!(t()instanceof window.Storage))return()=>{};const u=d=>{d.storageArea===t()&&d.key===l&&c(d.newValue)};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}}),a&&(s.subscribe=o(a)),s}const OQ=RQ();function Qj(t,e,n=OQ,r){const i=r==null?void 0:r.getOnInit,s=ce(i?n.getItem(t,e):e);return(fE?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},ce(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===MQ?(l(s,e),n.removeItem(t)):Zj(u)?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}var ht;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ht||(ht={}));var cM;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(cM||(cM={}));const Me=ht.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),da=t=>{switch(typeof t){case"undefined":return Me.undefined;case"string":return Me.string;case"number":return Number.isNaN(t)?Me.nan:Me.number;case"boolean":return Me.boolean;case"function":return Me.function;case"bigint":return Me.bigint;case"symbol":return Me.symbol;case"object":return Array.isArray(t)?Me.array:t===null?Me.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Me.promise:typeof Map<"u"&&t instanceof Map?Me.map:typeof Set<"u"&&t instanceof Set?Me.set:typeof Date<"u"&&t instanceof Date?Me.date:Me.object;default:return Me.unknown}},le=ht.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ho extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof Ho))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ht.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];n[s]=n[s]||[],n[s].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ho.create=t=>new Ho(t);const bk=(t,e)=>{let n;switch(t.code){case le.invalid_type:t.received===Me.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case le.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ht.jsonStringifyReplacer)}`;break;case le.unrecognized_keys:n=`Unrecognized key(s) in object: ${ht.joinValues(t.keys,", ")}`;break;case le.invalid_union:n="Invalid input";break;case le.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ht.joinValues(t.options)}`;break;case le.invalid_enum_value:n=`Invalid enum value. Expected ${ht.joinValues(t.options)}, received '${t.received}'`;break;case le.invalid_arguments:n="Invalid function arguments";break;case le.invalid_return_type:n="Invalid function return type";break;case le.invalid_date:n="Invalid date";break;case le.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ht.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case le.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case le.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case le.custom:n="Invalid input";break;case le.invalid_intersection_types:n="Intersection results could not be merged";break;case le.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case le.not_finite:n="Number must be finite";break;default:n=e.defaultError,ht.assertNever(t)}return{message:n}};let IQ=bk;function DQ(){return IQ}const LQ=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}};function we(t,e){const n=DQ(),r=LQ({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===bk?void 0:bk].filter(i=>!!i)});t.common.issues.push(r)}class fi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return He;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return fi.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return He;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const He=Object.freeze({status:"aborted"}),Uf=t=>({status:"dirty",value:t}),Ui=t=>({status:"valid",value:t}),uM=t=>t.status==="aborted",dM=t=>t.status==="dirty",xd=t=>t.status==="valid",Sy=t=>typeof Promise<"u"&&t instanceof Promise;var Oe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Oe||(Oe={}));class ul{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const fM=(t,e)=>{if(xd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ho(t.common.issues);return this._error=n,this._error}}};function Ze(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:i}}class dt{get description(){return this._def.description}_getType(e){return da(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:da(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new fi,ctx:{common:e.parent.common,data:e.data,parsedType:da(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Sy(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:da(e)},i=this._parseSync({data:e,path:r.path,parent:r});return fM(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:da(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return xd(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(i=(r=s==null?void 0:s.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>xd(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:da(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Sy(i)?i:Promise.resolve(i));return fM(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:le.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new _d({schema:this,typeName:Ve.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Xa.create(this,this._def)}nullable(){return Cd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Js.create(this)}promise(){return Ey.create(this,this._def)}or(e){return _y.create([this,e],this._def)}and(e){return Cy.create(this,e,this._def)}transform(e){return new _d({...Ze(this._def),schema:this,typeName:Ve.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new kk({...Ze(this._def),innerType:this,defaultValue:n,typeName:Ve.ZodDefault})}brand(){return new see({typeName:Ve.ZodBranded,type:this,...Ze(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new _k({...Ze(this._def),innerType:this,catchValue:n,typeName:Ve.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return hE.create(this,e)}readonly(){return Ck.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const jQ=/^c[^\s-]{8,}$/i,$Q=/^[0-9a-z]+$/,FQ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,BQ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,zQ=/^[a-z0-9_-]{21}$/i,UQ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,HQ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,VQ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,WQ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ex;const GQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,KQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,XQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,YQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,qQ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,JQ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,e$="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ZQ=new RegExp(`^${e$}$`);function t$(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function QQ(t){return new RegExp(`^${t$(t)}$`)}function eee(t){let e=`${e$}T${t$(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function tee(t,e){return!!((e==="v4"||!e)&&GQ.test(t)||(e==="v6"||!e)&&XQ.test(t))}function nee(t,e){if(!UQ.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function ree(t,e){return!!((e==="v4"||!e)&&KQ.test(t)||(e==="v6"||!e)&&YQ.test(t))}class ac extends dt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Me.string){const s=this._getOrReturnCtx(e);return we(s,{code:le.invalid_type,expected:Me.string,received:s.parsedType}),He}const r=new fi;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),we(i,{code:le.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),we(i,{code:le.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?we(i,{code:le.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&we(i,{code:le.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")VQ.test(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{validation:"email",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")ex||(ex=new RegExp(WQ,"u")),ex.test(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{validation:"emoji",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")BQ.test(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{validation:"uuid",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")zQ.test(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{validation:"nanoid",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")jQ.test(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{validation:"cuid",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")$Q.test(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{validation:"cuid2",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")FQ.test(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{validation:"ulid",code:le.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),we(i,{validation:"url",code:le.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{validation:"regex",code:le.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),we(i,{code:le.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),we(i,{code:le.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),we(i,{code:le.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?eee(s).test(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{code:le.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?ZQ.test(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{code:le.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?QQ(s).test(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{code:le.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?HQ.test(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{validation:"duration",code:le.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?tee(e.data,s.version)||(i=this._getOrReturnCtx(e,i),we(i,{validation:"ip",code:le.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?nee(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),we(i,{validation:"jwt",code:le.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?ree(e.data,s.version)||(i=this._getOrReturnCtx(e,i),we(i,{validation:"cidr",code:le.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?qQ.test(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{validation:"base64",code:le.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?JQ.test(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{validation:"base64url",code:le.invalid_string,message:s.message}),r.dirty()):ht.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:le.invalid_string,...Oe.errToObj(r)})}_addCheck(e){return new ac({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Oe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Oe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Oe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Oe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Oe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Oe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Oe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Oe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Oe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Oe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Oe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Oe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Oe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Oe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Oe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Oe.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Oe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Oe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Oe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Oe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Oe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Oe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Oe.errToObj(n)})}nonempty(e){return this.min(1,Oe.errToObj(e))}trim(){return new ac({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ac({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ac({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ac.create=t=>new ac({checks:[],typeName:Ve.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ze(t)});function iee(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return s%o/10**i}class Sd extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Me.number){const s=this._getOrReturnCtx(e);return we(s,{code:le.invalid_type,expected:Me.number,received:s.parsedType}),He}let r;const i=new fi;for(const s of this._def.checks)s.kind==="int"?ht.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:le.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),we(r,{code:le.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),we(r,{code:le.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?iee(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),we(r,{code:le.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:le.not_finite,message:s.message}),i.dirty()):ht.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,r,i){return new Sd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Oe.toString(i)}]})}_addCheck(e){return new Sd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Oe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Oe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Oe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Oe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ht.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Sd.create=t=>new Sd({checks:[],typeName:Ve.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ze(t)});class ap extends dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Me.bigint)return this._getInvalidInput(e);let r;const i=new fi;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),we(r,{code:le.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),we(r,{code:le.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),we(r,{code:le.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ht.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return we(n,{code:le.invalid_type,expected:Me.bigint,received:n.parsedType}),He}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,r,i){return new ap({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Oe.toString(i)}]})}_addCheck(e){return new ap({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ap.create=t=>new ap({checks:[],typeName:Ve.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ze(t)});class xk extends dt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Me.boolean){const r=this._getOrReturnCtx(e);return we(r,{code:le.invalid_type,expected:Me.boolean,received:r.parsedType}),He}return Ui(e.data)}}xk.create=t=>new xk({typeName:Ve.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ze(t)});class ky extends dt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Me.date){const s=this._getOrReturnCtx(e);return we(s,{code:le.invalid_type,expected:Me.date,received:s.parsedType}),He}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return we(s,{code:le.invalid_date}),He}const r=new fi;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),we(i,{code:le.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),we(i,{code:le.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):ht.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ky({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Oe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Oe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ky.create=t=>new ky({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ve.ZodDate,...Ze(t)});class hM extends dt{_parse(e){if(this._getType(e)!==Me.symbol){const r=this._getOrReturnCtx(e);return we(r,{code:le.invalid_type,expected:Me.symbol,received:r.parsedType}),He}return Ui(e.data)}}hM.create=t=>new hM({typeName:Ve.ZodSymbol,...Ze(t)});class pM extends dt{_parse(e){if(this._getType(e)!==Me.undefined){const r=this._getOrReturnCtx(e);return we(r,{code:le.invalid_type,expected:Me.undefined,received:r.parsedType}),He}return Ui(e.data)}}pM.create=t=>new pM({typeName:Ve.ZodUndefined,...Ze(t)});class mM extends dt{_parse(e){if(this._getType(e)!==Me.null){const r=this._getOrReturnCtx(e);return we(r,{code:le.invalid_type,expected:Me.null,received:r.parsedType}),He}return Ui(e.data)}}mM.create=t=>new mM({typeName:Ve.ZodNull,...Ze(t)});class gM extends dt{constructor(){super(...arguments),this._any=!0}_parse(e){return Ui(e.data)}}gM.create=t=>new gM({typeName:Ve.ZodAny,...Ze(t)});class vM extends dt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ui(e.data)}}vM.create=t=>new vM({typeName:Ve.ZodUnknown,...Ze(t)});class dl extends dt{_parse(e){const n=this._getOrReturnCtx(e);return we(n,{code:le.invalid_type,expected:Me.never,received:n.parsedType}),He}}dl.create=t=>new dl({typeName:Ve.ZodNever,...Ze(t)});class yM extends dt{_parse(e){if(this._getType(e)!==Me.undefined){const r=this._getOrReturnCtx(e);return we(r,{code:le.invalid_type,expected:Me.void,received:r.parsedType}),He}return Ui(e.data)}}yM.create=t=>new yM({typeName:Ve.ZodVoid,...Ze(t)});class Js extends dt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Me.array)return we(n,{code:le.invalid_type,expected:Me.array,received:n.parsedType}),He;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(we(n,{code:o?le.too_big:le.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(we(n,{code:le.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(we(n,{code:le.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new ul(n,o,n.path,a)))).then(o=>fi.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new ul(n,o,n.path,a)));return fi.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Js({...this._def,minLength:{value:e,message:Oe.toString(n)}})}max(e,n){return new Js({...this._def,maxLength:{value:e,message:Oe.toString(n)}})}length(e,n){return new Js({...this._def,exactLength:{value:e,message:Oe.toString(n)}})}nonempty(e){return this.min(1,e)}}Js.create=(t,e)=>new Js({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ve.ZodArray,...Ze(e)});function ou(t){if(t instanceof dn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Xa.create(ou(r))}return new dn({...t._def,shape:()=>e})}else return t instanceof Js?new Js({...t._def,type:ou(t.element)}):t instanceof Xa?Xa.create(ou(t.unwrap())):t instanceof Cd?Cd.create(ou(t.unwrap())):t instanceof Tc?Tc.create(t.items.map(e=>ou(e))):t}class dn extends dt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ht.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Me.object){const c=this._getOrReturnCtx(e);return we(c,{code:le.invalid_type,expected:Me.object,received:c.parsedType}),He}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof dl&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new ul(i,d,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof dl){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(we(i,{code:le.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new ul(i,d,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,f=await u.value;c.push({key:d,value:f,alwaysSet:u.alwaysSet})}return c}).then(c=>fi.mergeObjectSync(r,c)):fi.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Oe.errToObj,new dn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,o;const i=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Oe.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new dn({...this._def,unknownKeys:"strip"})}passthrough(){return new dn({...this._def,unknownKeys:"passthrough"})}extend(e){return new dn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new dn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ve.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new dn({...this._def,catchall:e})}pick(e){const n={};for(const r of ht.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new dn({...this._def,shape:()=>n})}omit(e){const n={};for(const r of ht.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new dn({...this._def,shape:()=>n})}deepPartial(){return ou(this)}partial(e){const n={};for(const r of ht.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new dn({...this._def,shape:()=>n})}required(e){const n={};for(const r of ht.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Xa;)s=s._def.innerType;n[r]=s}return new dn({...this._def,shape:()=>n})}keyof(){return n$(ht.objectKeys(this.shape))}}dn.create=(t,e)=>new dn({shape:()=>t,unknownKeys:"strip",catchall:dl.create(),typeName:Ve.ZodObject,...Ze(e)});dn.strictCreate=(t,e)=>new dn({shape:()=>t,unknownKeys:"strict",catchall:dl.create(),typeName:Ve.ZodObject,...Ze(e)});dn.lazycreate=(t,e)=>new dn({shape:t,unknownKeys:"strip",catchall:dl.create(),typeName:Ve.ZodObject,...Ze(e)});class _y extends dt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Ho(a.ctx.common.issues));return we(n,{code:le.invalid_union,unionErrors:o}),He}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Ho(l));return we(n,{code:le.invalid_union,unionErrors:a}),He}}get options(){return this._def.options}}_y.create=(t,e)=>new _y({options:t,typeName:Ve.ZodUnion,...Ze(e)});function Sk(t,e){const n=da(t),r=da(e);if(t===e)return{valid:!0,data:t};if(n===Me.object&&r===Me.object){const i=ht.objectKeys(e),s=ht.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=Sk(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===Me.array&&r===Me.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=Sk(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===Me.date&&r===Me.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Cy extends dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(uM(s)||uM(o))return He;const a=Sk(s.value,o.value);return a.valid?((dM(s)||dM(o))&&n.dirty(),{status:n.value,value:a.data}):(we(r,{code:le.invalid_intersection_types}),He)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Cy.create=(t,e,n)=>new Cy({left:t,right:e,typeName:Ve.ZodIntersection,...Ze(n)});class Tc extends dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Me.array)return we(r,{code:le.invalid_type,expected:Me.array,received:r.parsedType}),He;if(r.data.length<this._def.items.length)return we(r,{code:le.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),He;!this._def.rest&&r.data.length>this._def.items.length&&(we(r,{code:le.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new ul(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>fi.mergeArray(n,o)):fi.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Tc({...this._def,rest:e})}}Tc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Tc({items:t,typeName:Ve.ZodTuple,rest:null,...Ze(e)})};class wM extends dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Me.map)return we(r,{code:le.invalid_type,expected:Me.map,received:r.parsedType}),He;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new ul(r,a,r.path,[c,"key"])),value:s._parse(new ul(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return He;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return He;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}wM.create=(t,e,n)=>new wM({valueType:e,keyType:t,typeName:Ve.ZodMap,...Ze(n)});class lp extends dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Me.set)return we(r,{code:le.invalid_type,expected:Me.set,received:r.parsedType}),He;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(we(r,{code:le.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(we(r,{code:le.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return He;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new ul(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new lp({...this._def,minSize:{value:e,message:Oe.toString(n)}})}max(e,n){return new lp({...this._def,maxSize:{value:e,message:Oe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}lp.create=(t,e)=>new lp({valueType:t,minSize:null,maxSize:null,typeName:Ve.ZodSet,...Ze(e)});class bM extends dt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}bM.create=(t,e)=>new bM({getter:t,typeName:Ve.ZodLazy,...Ze(e)});class xM extends dt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return we(n,{received:n.data,code:le.invalid_literal,expected:this._def.value}),He}return{status:"valid",value:e.data}}get value(){return this._def.value}}xM.create=(t,e)=>new xM({value:t,typeName:Ve.ZodLiteral,...Ze(e)});function n$(t,e){return new kd({values:t,typeName:Ve.ZodEnum,...Ze(e)})}class kd extends dt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return we(n,{expected:ht.joinValues(r),received:n.parsedType,code:le.invalid_type}),He}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return we(n,{received:n.data,code:le.invalid_enum_value,options:r}),He}return Ui(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return kd.create(e,{...this._def,...n})}exclude(e,n=this._def){return kd.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}kd.create=n$;class SM extends dt{_parse(e){const n=ht.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Me.string&&r.parsedType!==Me.number){const i=ht.objectValues(n);return we(r,{expected:ht.joinValues(i),received:r.parsedType,code:le.invalid_type}),He}if(this._cache||(this._cache=new Set(ht.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=ht.objectValues(n);return we(r,{received:r.data,code:le.invalid_enum_value,options:i}),He}return Ui(e.data)}get enum(){return this._def.values}}SM.create=(t,e)=>new SM({values:t,typeName:Ve.ZodNativeEnum,...Ze(e)});class Ey extends dt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Me.promise&&n.common.async===!1)return we(n,{code:le.invalid_type,expected:Me.promise,received:n.parsedType}),He;const r=n.parsedType===Me.promise?n.data:Promise.resolve(n.data);return Ui(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ey.create=(t,e)=>new Ey({type:t,typeName:Ve.ZodPromise,...Ze(e)});class _d extends dt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ve.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{we(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return He;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?He:l.status==="dirty"||n.value==="dirty"?Uf(l.value):l});{if(n.value==="aborted")return He;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?He:a.status==="dirty"||n.value==="dirty"?Uf(a.value):a}}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?He:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?He:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!xd(o))return He;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>xd(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):He);ht.assertNever(i)}}_d.create=(t,e,n)=>new _d({schema:t,typeName:Ve.ZodEffects,effect:e,...Ze(n)});_d.createWithPreprocess=(t,e,n)=>new _d({schema:e,effect:{type:"preprocess",transform:t},typeName:Ve.ZodEffects,...Ze(n)});class Xa extends dt{_parse(e){return this._getType(e)===Me.undefined?Ui(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Xa.create=(t,e)=>new Xa({innerType:t,typeName:Ve.ZodOptional,...Ze(e)});class Cd extends dt{_parse(e){return this._getType(e)===Me.null?Ui(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Cd.create=(t,e)=>new Cd({innerType:t,typeName:Ve.ZodNullable,...Ze(e)});class kk extends dt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Me.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}kk.create=(t,e)=>new kk({innerType:t,typeName:Ve.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ze(e)});class _k extends dt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Sy(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ho(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ho(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}_k.create=(t,e)=>new _k({innerType:t,typeName:Ve.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ze(e)});class kM extends dt{_parse(e){if(this._getType(e)!==Me.nan){const r=this._getOrReturnCtx(e);return we(r,{code:le.invalid_type,expected:Me.nan,received:r.parsedType}),He}return{status:"valid",value:e.data}}}kM.create=t=>new kM({typeName:Ve.ZodNaN,...Ze(t)});class see extends dt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class hE extends dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?He:s.status==="dirty"?(n.dirty(),Uf(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?He:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new hE({in:e,out:n,typeName:Ve.ZodPipeline})}}class Ck extends dt{_parse(e){const n=this._def.innerType._parse(e),r=i=>(xd(i)&&(i.value=Object.freeze(i.value)),i);return Sy(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Ck.create=(t,e)=>new Ck({innerType:t,typeName:Ve.ZodReadonly,...Ze(e)});var Ve;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ve||(Ve={}));const jl=Sd.create,Yc=xk.create;dl.create;Js.create;const _M=dn.create;_y.create;Cy.create;Tc.create;const cf=kd.create;Ey.create;Xa.create;Cd.create;const oee=["randomize","clean","unchanged"],aee=["switches-and-leds","printer","null"],lee=["printer","null"],Ek=_M({showInstructionCycle:Yc().catch(!1),showStatsCPU:Yc().catch(!1),language:cf(u5).catch(cee),editorFontSize:jl().int().min(8).max(64).catch(14),dataOnLoad:cf(oee).catch("clean"),devices:_M({keyboardAndScreen:Yc(),pic:Yc(),pio:cf(["switches-and-leds","printer"]).nullable(),handshake:cf(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:Yc().catch(!0),executionUnit:jl().min(1).max(500).catch(150),clockSpeed:jl().min(100).max(3e3).catch(1e3),printerSpeed:jl().min(500).max(2e4).catch(5e3),flagsVisibility:cf(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:jl().min(0).catch(1),filterContrast:jl().min(0).catch(1),filterInvert:Yc().catch(!1),filterSaturation:jl().min(0).catch(1)}),au=Ek.parse({});function cee(){const t=navigator.language.toLowerCase();for(const e of u5)if(t.startsWith(e))return e;return"en"}const Hi=Qj("vonsim-settings",au,{getItem(t,e){try{const n=localStorage.getItem(t);return Ek.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const r=i=>{if(i.storageArea===localStorage&&i.key===t){let s;try{s=Ek.parse(JSON.parse(i.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",r),()=>window==null?void 0:window.removeEventListener("storage",r)}},{getOnInit:!0}),Tn=()=>B.get(Hi),V0=()=>Dp(Hi);ce(t=>t(Hi).showInstructionCycle);ce(t=>t(Hi).showStatsCPU);const uee=ce(t=>t(Hi).language),pE=()=>nt(uee);ce(t=>t(Hi).flagsVisibility);const dee=ce(t=>t(Hi).editorFontSize),fee=()=>nt(dee);ce(t=>t(Hi).dataOnLoad);const hee=ce(t=>t(Hi).devices),r$=()=>nt(hee);ce(t=>{const e=t(Hi);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});const pee=ce(t=>{const e=t(Hi);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")}),mee=()=>nt(pee);function CM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function EM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CM(Object(n),!0).forEach(function(r){gee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gee(t,e,n){return e=vee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vee(t){var e=yee(t,"string");return typeof e=="symbol"?e:String(e)}function yee(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Ay=i$({});function i$(t){return e.withOptions=n=>i$(EM(EM({},t),n)),e;function e(n,...r){const i=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n),trimWhitespace:o=!0}=t;let a="";for(let u=0;u<i.length;u++){let d=i[u];s&&(d=d.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),a+=d,u<r.length&&(a+=r[u])}const l=a.split(`
`);let c=null;for(const u of l){const d=u.match(/^(\s+)\S+/);if(d){const f=d[1].length;c?c=Math.min(c,f):c=f}}if(c!==null){const u=c;a=l.map(d=>d[0]===" "||d[0]==="	"?d.slice(u):d).join(`
`)}return o&&(a=a.trim()),s&&(a=a.replace(/\\n/g,`
`)),a}}const wee=Se.from(Se.MAX_ADDRESS).toString(),bee={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${di.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:Ay`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"Cycle","end-of-instruction":"Instruction",infinity:"End"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instruccin",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."}},memory:{name:"Memory",cell:t=>`Cell ${Se.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${wee}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"READ MEMORY","write-memory":"WRITE MEMORY"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Enabling animations."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>Ay`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"eea5027"}](https://github.com/vonsim/vonsim/commit/${"eea5027"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},xee=Se.from(Se.MAX_ADDRESS).toString(),See={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${di.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"Hay una nueva versin disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Accin invlida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la FileSystem API","no-file":"No hay ningn archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:Ay`
      ; Bienvenido a VonSim 8!
      ; Este es un ejemplo de cdigo que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Ciclo","end-of-instruction":"Instruccin",infinity:"Final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadsticas CPU","instruction-cycle":"Ciclo de instruccin",status:{fetching:"Captacin instruccin...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupcin...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."}},memory:{name:"Memoria",cell:t=>`Celda ${Se.format(t)}`,"fix-address":"Fijar direccin","unfix-address":"Desfijar direccin","address-must-be-integer":"El valor de inicio debe ser un nmero entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${xee}.`,"address-increment":"Incrementar direccin (Page Up)","address-decrement":"Decrementar direccin (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"LEER MEMORIA","write-memory":"ESCRIBIR MEMORIA"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuracin",instructionCycle:{label:"Ciclo de Instruccin"},statsCPU:{label:"Estadsticas CPU"},flags:{label:"Banderas",description:"Selecciona qu banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamao de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qu hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qu dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"Tambin agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Habilitacin de animaciones."].join(" ")},speeds:{executionUnit:"Velocidad de simulacin",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresin"},filters:{label:"Filtros",description:"Filtros aplicados a la pgina. til cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturacin"},reset:"Restablecer configuracin"},footer:{documentation:"Documentacin",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>Ay`
        <!-- Por favor, describa el problema que est teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Informacin extra (POR FAVOR, NO BORRAR)</summary>

          **Versin**: [${"eea5027"}](https://github.com/ruiz-jose/VonSim8/commit/${"eea5027"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuracin

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},W0=HC({en:bee,es:See});function Tt(){const t=pE();return x.useCallback((e,...n)=>W0(t,e,...n),[t])}const s$=va.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||va,kee=1,AM=5e3,Cs=new Map,fh=[];function _ee(){let t=0;for(const e of Cs.keys())e>t&&(t=e);return t+1}function Cee(){let t=1/0;for(const e of Cs.keys())e<t&&(t=e);return t}function Ma(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:r}=t,i=r.duration??AM,s=Number.isFinite(i)?setTimeout(()=>Ma({type:"DISMISS_TOAST",toastId:n}),i):null;Cs.set(n,{...r,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Ma({type:"DISMISS_TOAST",toastId:n})}}}),Cs.size>kee&&Ma({type:"DISMISS_TOAST",toastId:Cee()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:r}=t,i=Cs.get(n);if(!i)return;if(typeof r.duration=="number"){i.timeout!==null&&clearTimeout(i.timeout);const s=r.duration??AM,o=Number.isFinite(s)?setTimeout(()=>Ma({type:"DISMISS_TOAST",toastId:n}),s):null;Cs.set(n,{...i,...r,timeout:o})}else Cs.set(n,{...i,...r});break}case"DISMISS_TOAST":{const{toastId:n}=t,r=Cs.get(n);if(!r)return;r.timeout!==null&&clearTimeout(r.timeout),Cs.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&fh.length>0){const n=Array.from(Cs.entries()).map(([r,i])=>({...i,id:r})).sort((r,i)=>i.id-r.id);for(const r of fh)r(n)}}function Qr(t){const e=_ee(),n=i=>Ma({type:"UPDATE_TOAST",toastId:e,toast:{...i}}),r=()=>Ma({type:"DISMISS_TOAST",toastId:e});return Ma({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:r,update:n}}function Eee(){const[t,e]=x.useState([]);return x.useEffect(()=>(fh.push(e),()=>{const n=fh.indexOf(e);n>-1&&fh.splice(n,1)}),[]),{toastList:t,toast:Qr,dismiss:n=>Ma({type:"DISMISS_TOAST",toastId:n})}}var mE=Wp(),Ye=t=>Vp(t,mE),gE=Wp();Ye.write=t=>Vp(t,gE);var G0=Wp();Ye.onStart=t=>Vp(t,G0);var vE=Wp();Ye.onFrame=t=>Vp(t,vE);var yE=Wp();Ye.onFinish=t=>Vp(t,yE);var Vu=[];Ye.setTimeout=(t,e)=>{const n=Ye.now()+e,r=()=>{const s=Vu.findIndex(o=>o.cancel==r);~s&&Vu.splice(s,1),Oa-=~s?1:0},i={time:n,handler:t,cancel:r};return Vu.splice(o$(n),0,i),Oa+=1,a$(),i};var o$=t=>~(~Vu.findIndex(e=>e.time>t)||~Vu.length);Ye.cancel=t=>{G0.delete(t),vE.delete(t),yE.delete(t),mE.delete(t),gE.delete(t)};Ye.sync=t=>{Ak=!0,Ye.batchedUpdates(t),Ak=!1};Ye.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,Ye.onStart(n)}return r.handler=t,r.cancel=()=>{G0.delete(n),e=null},r};var wE=typeof window<"u"?window.requestAnimationFrame:()=>{};Ye.use=t=>wE=t;Ye.now=typeof performance<"u"?()=>performance.now():Date.now;Ye.batchedUpdates=t=>t();Ye.catch=console.error;Ye.frameLoop="always";Ye.advance=()=>{Ye.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):c$()};var Ra=-1,Oa=0,Ak=!1;function Vp(t,e){Ak?(e.delete(t),t(0)):(e.add(t),a$())}function a$(){Ra<0&&(Ra=0,Ye.frameLoop!=="demand"&&wE(l$))}function Aee(){Ra=-1}function l$(){~Ra&&(wE(l$),Ye.batchedUpdates(c$))}function c$(){const t=Ra;Ra=Ye.now();const e=o$(Ra);if(e&&(u$(Vu.splice(0,e),n=>n.handler()),Oa-=e),!Oa){Aee();return}G0.flush(),mE.flush(t?Math.min(64,Ra-t):16.667),vE.flush(),gE.flush(),yE.flush()}function Wp(){let t=new Set,e=t;return{add(n){Oa+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Oa-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Oa-=e.size,u$(e,r=>r(n)&&t.add(r)),Oa+=t.size,e=t)}}}function u$(t,e){t.forEach(n=>{try{e(n)}catch(r){Ye.catch(r)}})}var Pee=Object.defineProperty,Nee=(t,e)=>{for(var n in e)Pee(t,n,{get:e[n],enumerable:!0})},fs={};Nee(fs,{assign:()=>Ree,colors:()=>Ya,createStringInterpolator:()=>xE,skipAnimation:()=>h$,to:()=>f$,willAdvance:()=>SE});function Tee(){}var Mee=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),be={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function fo(t,e){if(be.arr(t)){if(!be.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Bn=(t,e)=>t.forEach(e);function fl(t,e,n){if(be.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var Ia=t=>be.und(t)?[]:be.arr(t)?t:[t];function d$(t,e){if(t.size){const n=Array.from(t);t.clear(),Bn(n,e)}}var eg=(t,...e)=>d$(t,n=>n(...e)),bE=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),xE,f$,Ya=null,h$=!1,SE=Tee,Ree=t=>{t.to&&(f$=t.to),t.now&&(Ye.now=t.now),t.colors!==void 0&&(Ya=t.colors),t.skipAnimation!=null&&(h$=t.skipAnimation),t.createStringInterpolator&&(xE=t.createStringInterpolator),t.requestAnimationFrame&&Ye.use(t.requestAnimationFrame),t.batchedUpdates&&(Ye.batchedUpdates=t.batchedUpdates),t.willAdvance&&(SE=t.willAdvance),t.frameLoop&&(Ye.frameLoop=t.frameLoop)},hh=new Set,Ei=[],tx=[],Py=0,K0={get idle(){return!hh.size&&!Ei.length},start(t){Py>t.priority?(hh.add(t),Ye.onStart(Oee)):(p$(t),Ye(Pk))},advance:Pk,sort(t){if(Py)Ye.onFrame(()=>K0.sort(t));else{const e=Ei.indexOf(t);~e&&(Ei.splice(e,1),m$(t))}},clear(){Ei=[],hh.clear()}};function Oee(){hh.forEach(p$),hh.clear(),Ye(Pk)}function p$(t){Ei.includes(t)||m$(t)}function m$(t){Ei.splice(Iee(Ei,e=>e.priority>t.priority),0,t)}function Pk(t){const e=tx;for(let n=0;n<Ei.length;n++){const r=Ei[n];Py=r.priority,r.idle||(SE(r),r.advance(t),r.idle||e.push(r))}return Py=0,tx=Ei,tx.length=0,Ei=e,Ei.length>0}function Iee(t,e){const n=t.findIndex(e);return n<0?t.length:n}var Dee=(t,e,n)=>Math.min(Math.max(n,t),e),Lee={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},is="[-+]?\\d*\\.?\\d+",Ny=is+"%";function X0(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var jee=new RegExp("rgb"+X0(is,is,is)),$ee=new RegExp("rgba"+X0(is,is,is,is)),Fee=new RegExp("hsl"+X0(is,Ny,Ny)),Bee=new RegExp("hsla"+X0(is,Ny,Ny,is)),zee=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Uee=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Hee=/^#([0-9a-fA-F]{6})$/,Vee=/^#([0-9a-fA-F]{8})$/;function Wee(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Hee.exec(t))?parseInt(e[1]+"ff",16)>>>0:Ya&&Ya[t]!==void 0?Ya[t]:(e=jee.exec(t))?(qc(e[1])<<24|qc(e[2])<<16|qc(e[3])<<8|255)>>>0:(e=$ee.exec(t))?(qc(e[1])<<24|qc(e[2])<<16|qc(e[3])<<8|TM(e[4]))>>>0:(e=zee.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Vee.exec(t))?parseInt(e[1],16)>>>0:(e=Uee.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Fee.exec(t))?(PM(NM(e[1]),tg(e[2]),tg(e[3]))|255)>>>0:(e=Bee.exec(t))?(PM(NM(e[1]),tg(e[2]),tg(e[3]))|TM(e[4]))>>>0:null}function nx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function PM(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=nx(i,r,t+1/3),o=nx(i,r,t),a=nx(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function qc(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function NM(t){return(parseFloat(t)%360+360)%360/360}function TM(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function tg(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function MM(t){let e=Wee(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var cp=(t,e,n)=>{if(be.fun(t))return t;if(be.arr(t))return cp({range:t,output:e,extrapolate:n});if(be.str(t.output[0]))return xE(t);const r=t,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const u=Kee(c,s);return Gee(c,s[u],s[u+1],i[u],i[u+1],l,o,a,r.map)}};function Gee(t,e,n,r,i,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function Kee(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Xee=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return Dee(0,1,i/t)},Ty=1.70158,ng=Ty*1.525,RM=Ty+1,OM=2*Math.PI/3,IM=2*Math.PI/4.5,rg=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,g$={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>RM*t*t*t-Ty*t*t,easeOutBack:t=>1+RM*Math.pow(t-1,3)+Ty*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((ng+1)*2*t-ng)/2:(Math.pow(2*t-2,2)*((ng+1)*(t*2-2)+ng)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*OM),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*OM)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*IM))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*IM)/2+1,easeInBounce:t=>1-rg(1-t),easeOutBounce:rg,easeInOutBounce:t=>t<.5?(1-rg(1-2*t))/2:(1+rg(2*t-1))/2,steps:Xee},up=Symbol.for("FluidValue.get"),Ed=Symbol.for("FluidValue.observers"),_i=t=>!!(t&&t[up]),Pr=t=>t&&t[up]?t[up]():t,DM=t=>t[Ed]||null;function Yee(t,e){t.eventObserved?t.eventObserved(e):t(e)}function dp(t,e){const n=t[Ed];n&&n.forEach(r=>{Yee(r,e)})}var v$=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");qee(this,t)}},qee=(t,e)=>y$(t,up,e);function Y0(t,e){if(t[up]){let n=t[Ed];n||y$(t,Ed,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function fp(t,e){const n=t[Ed];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[Ed]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var y$=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),fv=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Jee=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,LM=new RegExp(`(${fv.source})(%|[a-z]+)`,"i"),Zee=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,q0=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,w$=t=>{const[e,n]=Qee(t);if(!e||bE())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&q0.test(n))return w$(n);if(n)return n}return t},Qee=t=>{const e=q0.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},rx,ete=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,b$=t=>{rx||(rx=Ya?new RegExp(`(${Object.keys(Ya).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Pr(s).replace(q0,w$).replace(Jee,MM).replace(rx,MM)),n=e.map(s=>s.match(fv).map(Number)),i=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>cp({...t,output:s}));return s=>{var l;const o=!LM.test(e[0])&&((l=e.find(c=>LM.test(c)))==null?void 0:l.replace(fv,""));let a=0;return e[0].replace(fv,()=>`${i[a++](s)}${o||""}`).replace(Zee,ete)}},x$="react-spring: ",S$=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${x$}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},tte=S$(console.warn);function nte(){tte(`${x$}The "interpolate" function is deprecated in v9 (use "to" instead)`)}S$(console.warn);function J0(t){return be.str(t)&&(t[0]=="#"||/\d/.test(t)||!bE()&&q0.test(t)||t in(Ya||{}))}var k$=bE()?x.useEffect:x.useLayoutEffect,rte=()=>{const t=x.useRef(!1);return k$(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function ite(){const t=x.useState()[1],e=rte();return()=>{e.current&&t(Math.random())}}function ste(t,e){const[n]=x.useState(()=>({inputs:e,result:t()})),r=x.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&ote(e,s.inputs)||(s={inputs:e,result:t()}):s=n,x.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function ote(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var ate=t=>x.useEffect(t,lte),lte=[],hp=Symbol.for("Animated:node"),cte=t=>!!t&&t[hp]===t,Es=t=>t&&t[hp],kE=(t,e)=>Mee(t,hp,e),Z0=t=>t&&t[hp]&&t[hp].getPayload(),_$=class{constructor(){kE(this,this)}getPayload(){return this.payload||[]}},Gp=class extends _${constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,be.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Gp(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return be.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,be.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},pp=class extends Gp{constructor(t){super(0),this._string=null,this._toString=cp({output:[t,t]})}static create(t){return new pp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(be.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=cp({output:[this.getValue(),t]})),this._value=0,super.reset()}},My={dependencies:null},Q0=class extends _${constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return fl(this.source,(n,r)=>{cte(n)?e[r]=n.getValue(t):_i(n)?e[r]=Pr(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Bn(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return fl(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){My.dependencies&&_i(t)&&My.dependencies.add(t);const e=Z0(t);e&&Bn(e,n=>this.add(n))}},C$=class extends Q0{constructor(t){super(t)}static create(t){return new C$(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(ute)),!0)}};function ute(t){return(J0(t)?pp:Gp).create(t)}function Nk(t){const e=Es(t);return e?e.constructor:be.arr(t)?C$:J0(t)?pp:Gp}var jM=(t,e)=>{const n=!be.fun(t)||t.prototype&&t.prototype.isReactComponent;return x.forwardRef((r,i)=>{const s=x.useRef(null),o=n&&x.useCallback(m=>{s.current=hte(i,m)},[i]),[a,l]=fte(r,e),c=ite(),u=()=>{const m=s.current;if(n&&!m)return;(m?e.applyAnimatedValues(m,a.getValue(!0)):!1)===!1&&c()},d=new dte(u,l),f=x.useRef();k$(()=>(f.current=d,Bn(l,m=>Y0(m,d)),()=>{f.current&&(Bn(f.current.deps,m=>fp(m,f.current)),Ye.cancel(f.current.update))})),x.useEffect(u,[]),ate(()=>()=>{const m=f.current;Bn(m.deps,g=>fp(g,m))});const h=e.getComponentProps(a.getValue());return x.createElement(t,{...h,ref:o})})},dte=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Ye.write(this.update)}};function fte(t,e){const n=new Set;return My.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Q0(t),My.dependencies=null,[t,n]}function hte(t,e){return t&&(be.fun(t)?t(e):t.current=e),e}var $M=Symbol.for("AnimatedComponent"),pte=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new Q0(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=o=>{const a=FM(o)||"Anonymous";return be.str(o)?o=s[o]||(s[o]=jM(o,i)):o=o[$M]||(o[$M]=jM(o,i)),o.displayName=`Animated(${a})`,o};return fl(t,(o,a)=>{be.arr(t)&&(a=FM(o)),s[a]=s(o)}),{animated:s}},FM=t=>be.str(t)?t:t&&be.str(t.displayName)?t.displayName:be.fun(t)&&t.name||null;function Zl(t,...e){return be.fun(t)?t(...e):t}var ph=(t,e)=>t===!0||!!(e&&t&&(be.fun(t)?t(e):Ia(t).includes(e))),E$=(t,e)=>be.obj(t)?e&&t[e]:t,mte=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,gte=t=>t,A$=(t,e=gte)=>{let n=vte;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const s=e(t[i],i);be.und(s)||(r[i]=s)}return r},vte=["config","onProps","onStart","onChange","onPause","onResume","onRest"],yte={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function wte(t){const e={};let n=0;if(fl(t,(r,i)=>{yte[i]||(e[i]=r,n++)}),n)return e}function P$(t){const e=wte(t);if(e){const n={to:e};return fl(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function mp(t){return t=Pr(t),be.arr(t)?t.map(mp):J0(t)?fs.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function Tk(t){return be.fun(t)||be.arr(t)&&be.obj(t[0])}var bte={default:{tension:170,friction:26}},Mk={...bte.default,mass:1,damping:1,easing:g$.linear,clamp:!1},xte=class{constructor(){this.velocity=0,Object.assign(this,Mk)}};function Ste(t,e,n){n&&(n={...n},BM(n,e),e={...n,...e}),BM(t,e),Object.assign(t,e);for(const o in Mk)t[o]==null&&(t[o]=Mk[o]);let{frequency:r,damping:i}=t;const{mass:s}=t;return be.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function BM(t,e){if(!be.und(e.decay))t.duration=void 0;else{const n=!be.und(e.tension)||!be.und(e.friction);(n||!be.und(e.frequency)||!be.und(e.damping)||!be.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var zM=[],kte=class{constructor(){this.changed=!1,this.values=zM,this.toValues=null,this.fromValues=zM,this.config=new xte,this.immediate=!1}};function _te(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let l,c,u=ph(n.cancel??(r==null?void 0:r.cancel),e);if(u)h();else{be.und(n.pause)||(i.paused=ph(n.pause,e));let m=r==null?void 0:r.pause;m!==!0&&(m=i.paused||ph(m,e)),l=Zl(n.delay||0,e),m?(i.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){i.resumeQueue.add(f),i.timeouts.delete(c),c.cancel(),l=c.time-Ye.now()}function f(){l>0&&!fs.skipAnimation?(i.delayed=!0,c=Ye.setTimeout(h,l),i.pauseQueue.add(d),i.timeouts.add(c)):h()}function h(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(d),i.timeouts.delete(c),t<=(i.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(m){a(m)}}})}var Cte=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?mh(t.get()):e.every(n=>n.noop)?N$(t.get()):ts(t.get(),e.every(n=>n.finished)),N$=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),ts=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),mh=t=>({value:t,cancelled:!0,finished:!1});function Ete(t,e,n,r){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const c=A$(e,(y,v)=>v==="onRest"?void 0:y);let u,d;const f=new Promise((y,v)=>(u=y,d=v)),h=y=>{const v=i<=(n.cancelId||0)&&mh(r)||i!==n.asyncId&&ts(r,!1);if(v)throw y.result=v,d(y),y},m=(y,v)=>{const w=new UM,b=new HM;return(async()=>{if(fs.skipAnimation)throw Rk(n),b.result=ts(r,!1),d(b),b;h(w);const k=be.obj(y)?{...y}:{...v,to:y};k.parentId=i,fl(c,(E,C)=>{be.und(k[C])&&(k[C]=E)});const _=await r.start(k);return h(w),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),_})()};let g;if(fs.skipAnimation)return Rk(n),ts(r,!1);try{let y;be.arr(t)?y=(async v=>{for(const w of v)await m(w)})(t):y=Promise.resolve(t(m,r.stop.bind(r))),await Promise.all([y.then(u),f]),g=ts(r.get(),!0,!1)}catch(y){if(y instanceof UM)g=y.result;else if(y instanceof HM)g=y.result;else throw y}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return be.fun(o)&&Ye.batchedUpdates(()=>{o(g,r,r.item)}),g})()}function Rk(t,e){d$(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var UM=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},HM=class extends Error{constructor(){super("SkipAnimationSignal")}},Ok=t=>t instanceof _E,Ate=1,_E=class extends v${constructor(){super(...arguments),this.id=Ate++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Es(this);return t&&t.getValue()}to(...t){return fs.to(this,t)}interpolate(...t){return nte(),fs.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){dp(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||K0.sort(this),dp(this,{type:"priority",parent:this,priority:t})}},Mc=Symbol.for("SpringPhase"),T$=1,Ik=2,Dk=4,ix=t=>(t[Mc]&T$)>0,oa=t=>(t[Mc]&Ik)>0,uf=t=>(t[Mc]&Dk)>0,VM=(t,e)=>e?t[Mc]|=Ik|T$:t[Mc]&=~Ik,WM=(t,e)=>e?t[Mc]|=Dk:t[Mc]&=~Dk,At=class extends _E{constructor(t,e){if(super(),this.animation=new kte,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!be.und(t)||!be.und(e)){const n=be.obj(t)?{...t}:{...e,from:t};be.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(oa(this)||this._state.asyncTo)||uf(this)}get goal(){return Pr(this.animation.to)}get velocity(){const t=Es(this);return t instanceof Gp?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return ix(this)}get isAnimating(){return oa(this)}get isPaused(){return uf(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=Z0(r.to);!o&&_i(r.to)&&(i=Ia(Pr(r.to))),r.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==pp?1:o?o[u].lastPosition:i[u];let f=r.immediate,h=d;if(!f){if(h=c.lastPosition,s.tension<=0){c.done=!0;return}let m=c.elapsedTime+=t;const g=r.fromValues[u],y=c.v0!=null?c.v0:c.v0=be.arr(s.velocity)?s.velocity[u]:s.velocity;let v;const w=s.precision||(g==d?.005:Math.min(1,Math.abs(d-g)*.001));if(be.und(s.duration))if(s.decay){const b=s.decay===!0?.998:s.decay,k=Math.exp(-(1-b)*m);h=g+y/(1-b)*(1-k),f=Math.abs(c.lastPosition-h)<=w,v=y*k}else{v=c.lastVelocity==null?y:c.lastVelocity;const b=s.restVelocity||w/10,k=s.clamp?0:s.bounce,_=!be.und(k),E=g==d?c.v0>0:g<d;let C,P=!1;const M=1,O=Math.ceil(t/M);for(let I=0;I<O&&(C=Math.abs(v)>b,!(!C&&(f=Math.abs(d-h)<=w,f)));++I){_&&(P=h==d||h>d==E,P&&(v=-v*k,h=d));const D=-s.tension*1e-6*(h-d),G=-s.friction*.001*v,U=(D+G)/s.mass;v=v+U*M,h=h+v*M}}else{let b=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,m=c.elapsedTime+=t)),b=(s.progress||0)+m/this._memoizedDuration,b=b>1?1:b<0?0:b,c.durationProgress=b),h=g+s.easing(b)*(d-g),v=(h-c.lastPosition)/t,f=b==1}c.lastVelocity=v,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(h,s.round)&&(n=!0)});const a=Es(this),l=a.getValue();if(e){const c=Pr(r.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Ye.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(oa(this)){const{to:t,config:e}=this.animation;Ye.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return be.und(t)?(n=this.queue||[],this.queue=[]):n=[be.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>Cte(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Rk(this._state,t&&this._lastCallId),Ye.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=be.obj(n)?n[e]:n,(n==null||Tk(n))&&(n=void 0),r=be.obj(r)?r[e]:r,r==null&&(r=void 0);const i={to:n,from:r};return ix(this)||(t.reverse&&([n,r]=[r,n]),r=Pr(r),be.und(r)?Es(this)||this._set(n):this._set(r)),i}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,A$(t,(o,a)=>/^on/.test(a)?E$(o,n):o)),KM(this,t,"onProps"),ff(this,"onProps",t,this);const i=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return _te(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{uf(this)||(WM(this,!0),eg(s.pauseQueue),ff(this,"onPause",ts(this,df(this,this.animation.to)),this))},resume:()=>{uf(this)&&(WM(this,!1),oa(this)&&this._resume(),eg(s.resumeQueue),ff(this,"onResume",ts(this,df(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=Pte(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(mh(this));const r=!be.und(t.to),i=!be.und(t.from);if(r||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(mh(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;i&&!r&&(!e.default||be.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!fo(d,c);f&&(a.from=d),d=Pr(d);const h=!fo(u,l);h&&this._focus(u);const m=Tk(e.to),{config:g}=a,{decay:y,velocity:v}=g;(r||i)&&(g.velocity=0),e.config&&!m&&Ste(g,Zl(e.config,s),e.config!==o.config?Zl(o.config,s):void 0);let w=Es(this);if(!w||be.und(u))return n(ts(this,!0));const b=be.und(e.reset)?i&&!e.default:!be.und(d)&&ph(e.reset,s),k=b?d:this.get(),_=mp(u),E=be.num(_)||be.arr(_)||J0(_),C=!m&&(!E||ph(o.immediate||e.immediate,s));if(h){const I=Nk(u);if(I!==w.constructor)if(C)w=this._set(_);else throw Error(`Cannot animate between ${w.constructor.name} and ${I.name}, as the "to" prop suggests`)}const P=w.constructor;let M=_i(u),O=!1;if(!M){const I=b||!ix(this)&&f;(h||I)&&(O=fo(mp(k),_),M=!O),(!fo(a.immediate,C)&&!C||!fo(g.decay,y)||!fo(g.velocity,v))&&(M=!0)}if(O&&oa(this)&&(a.changed&&!b?M=!0:M||this._stop(l)),!m&&((M||_i(l))&&(a.values=w.getPayload(),a.toValues=_i(u)?null:P==pp?[1]:Ia(_)),a.immediate!=C&&(a.immediate=C,!C&&!b&&this._set(l)),M)){const{onRest:I}=a;Bn(Tte,G=>KM(this,e,G));const D=ts(this,df(this,l));eg(this._pendingCalls,D),this._pendingCalls.add(n),a.changed&&Ye.batchedUpdates(()=>{var G;a.changed=!b,I==null||I(D,this),b?Zl(o.onRest,D):(G=a.onStart)==null||G.call(a,D,this)})}b&&this._set(k),m?n(Ete(e.to,e,this._state,this)):M?this._start():oa(this)&&!h?this._pendingCalls.add(n):n(N$(k))}_focus(t){const e=this.animation;t!==e.to&&(DM(this)&&this._detach(),e.to=t,DM(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;_i(e)&&(Y0(e,this),Ok(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;_i(t)&&fp(t,this)}_set(t,e=!0){const n=Pr(t);if(!be.und(n)){const r=Es(this);if(!r||!fo(n,r.getValue())){const i=Nk(n);!r||r.constructor!=i?kE(this,i.create(n)):r.setValue(n),r&&Ye.batchedUpdates(()=>{this._onChange(n,e)})}}return Es(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,ff(this,"onStart",ts(this,df(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Zl(this.animation.onChange,t,this)),Zl(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Es(this).reset(Pr(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),oa(this)||(VM(this,!0),uf(this)||this._resume())}_resume(){fs.skipAnimation?this.finish():K0.start(this)}_stop(t,e){if(oa(this)){VM(this,!1);const n=this.animation;Bn(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),dp(this,{type:"idle",parent:this});const r=e?mh(this.get()):ts(this.get(),df(this,t??n.to));eg(this._pendingCalls,r),n.changed&&(n.changed=!1,ff(this,"onRest",r,this))}}};function df(t,e){const n=mp(e),r=mp(t.get());return fo(r,n)}function Pte(t,e=t.loop,n=t.to){const r=Zl(e);if(r){const i=r!==!0&&P$(r),s=(i||t).reverse,o=!i||i.reset;return Nte({...t,loop:e,default:!1,pause:void 0,to:!s||Tk(n)?n:void 0,from:o?t.from:void 0,reset:o,...i})}}function Nte(t){const{to:e,from:n}=t=P$(t),r=new Set;return be.obj(e)&&GM(e,r),be.obj(n)&&GM(n,r),t.keys=r.size?Array.from(r):null,t}function GM(t,e){fl(t,(n,r)=>n!=null&&e.add(r))}var Tte=["onStart","onRest","onChange","onPause","onResume"];function KM(t,e,n){t.animation[n]=e[n]!==mte(e,n)?E$(e[n],t.key):void 0}function ff(t,e,...n){var r,i,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var CE=({children:t,...e})=>{const n=x.useContext(Ry),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=ste(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=Ry;return x.createElement(s,{value:e},t)},Ry=Mte(CE,{});CE.Provider=Ry.Provider;CE.Consumer=Ry.Consumer;function Mte(t,e){return Object.assign(t,x.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var Rte=class extends _E{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=cp(...e);const n=this._get(),r=Nk(n);kE(this,r.create(n))}advance(t){const e=this._get(),n=this.get();fo(e,n)||(Es(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&XM(this._active)&&sx(this)}_get(){const t=be.arr(this.source)?this.source.map(Pr):Ia(Pr(this.source));return this.calc(...t)}_start(){this.idle&&!XM(this._active)&&(this.idle=!1,Bn(Z0(this),t=>{t.done=!1}),fs.skipAnimation?(Ye.batchedUpdates(()=>this.advance()),sx(this)):K0.start(this))}_attach(){let t=1;Bn(Ia(this.source),e=>{_i(e)&&Y0(e,this),Ok(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Bn(Ia(this.source),t=>{_i(t)&&fp(t,this)}),this._active.clear(),sx(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Ia(this.source).reduce((e,n)=>Math.max(e,(Ok(n)?n.priority:0)+1),0))}};function Ote(t){return t.idle!==!1}function XM(t){return!t.size||Array.from(t).every(Ote)}function sx(t){t.idle||(t.idle=!0,Bn(Z0(t),e=>{e.done=!0}),dp(t,{type:"idle",parent:t}))}fs.assign({createStringInterpolator:b$,to:(t,e)=>new Rte(t,e)});var M$=/^--/;function Ite(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!M$.test(t)&&!(gh.hasOwnProperty(t)&&gh[t])?e+"px":(""+e).trim()}var YM={};function Dte(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:r,style:i,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...c}=e,u=Object.values(c),d=Object.keys(c).map(f=>n||t.hasAttribute(f)?f:YM[f]||(YM[f]=f.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));s!==void 0&&(t.textContent=s);for(const f in i)if(i.hasOwnProperty(f)){const h=Ite(f,i[f]);M$.test(f)?t.style.setProperty(f,h):t.style[f]=h}d.forEach((f,h)=>{t.setAttribute(f,u[h])}),r!==void 0&&(t.className=r),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var gh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lte=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),jte=["Webkit","Ms","Moz","O"];gh=Object.keys(gh).reduce((t,e)=>(jte.forEach(n=>t[Lte(n,e)]=t[e]),t),gh);var $te=/^(matrix|translate|scale|rotate|skew)/,Fte=/^(translate)/,Bte=/^(rotate|skew)/,ox=(t,e)=>be.num(t)&&t!==0?t+e:t,hv=(t,e)=>be.arr(t)?t.every(n=>hv(n,e)):be.num(t)?t===e:parseFloat(t)===e,zte=class extends Q0{constructor({x:t,y:e,z:n,...r}){const i=[],s=[];(t||e||n)&&(i.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>ox(a,"px")).join(",")})`,hv(o,0)])),fl(r,(o,a)=>{if(a==="transform")i.push([o||""]),s.push(l=>[l,l===""]);else if($te.test(a)){if(delete r[a],be.und(o))return;const l=Fte.test(a)?"px":Bte.test(a)?"deg":"";i.push(Ia(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${ox(f,l)})`,hv(f,0)]:c=>[`${a}(${c.map(u=>ox(u,l)).join(",")})`,hv(c,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new Ute(i,s)),super(r)}},Ute=class extends v${constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Bn(this.inputs,(n,r)=>{const i=Pr(n[0]),[s,o]=this.transforms[r](be.arr(i)?i:n.map(Pr));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Bn(this.inputs,e=>Bn(e,n=>_i(n)&&Y0(n,this)))}observerRemoved(t){t==0&&Bn(this.inputs,e=>Bn(e,n=>_i(n)&&fp(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),dp(this,t)}},Hte=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];fs.assign({batchedUpdates:xl.unstable_batchedUpdates,createStringInterpolator:b$,colors:Lee});var Vte=pte(Hte,{applyAnimatedValues:Dte,createAnimatedStyle:t=>new zte(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),on=Vte.animated;const en={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},ot=(t=en.stone[800])=>({backgroundColor:new At(t),opacity:new At(1)}),_n=()=>({strokeDashoffset:new At(1),opacity:new At(1)}),ig=()=>({strokeDashoffset:new At(1),opacity:new At(1),path:new At("")}),EE={bus:{address:ig(),data:ig(),rd:ig(),wr:ig(),iom:_n(),mem:{stroke:new At(en.red[500])},handshake:_n(),pic:_n(),pio:_n(),timer:_n(),intr:_n(),inta:_n(),int0:_n(),int1:_n(),int2:_n(),"switches->pio":_n(),"pio->leds":_n(),printer:{data:_n(),strobe:_n(),busy:_n()}},clock:{angle:new At(0)},cpu:{internalBus:{address:{strokeDashoffset:new At(1),opacity:new At(1),path:new At("")},data:{strokeDashoffset:new At(1),opacity:new At(1),path:new At("")}},alu:{operands:_n(),results:_n(),cog:{rot:new At(0)},operation:{backgroundColor:new At(en.stone[800])}},decoder:{path:_n(),progress:{progress:new At(0),opacity:new At(1)}},AX:ot(),BX:ot(),CX:ot(),DX:ot(),SP:ot(),IP:ot(),IR:ot(),ri:{...ot(),opacity:new At(0)},id:{...ot(),opacity:new At(0)},left:ot(),right:ot(),result:ot(),FLAGS:ot(),MAR:ot(),MBR:ot()},handshake:{DATA:ot(),STATE:ot()},memory:{"operating-cell":{color:new At(en.white)}},pic:{IMR:ot(),IRR:ot(),ISR:ot(),INT0:ot(),INT1:ot(),INT2:ot(),INT3:ot(),INT4:ot(),INT5:ot(),INT6:ot(),INT7:ot()},pio:{PA:ot(),PB:ot(),CA:ot(),CB:ot()},printer:{printing:{progress:new At(0),opacity:new At(1)}},timer:{CONT:ot(),COMP:ot()}};function pt(t){return c5(EE,t)}function R$(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];r instanceof At?e[n]=r.get():e[n]=R$(r)}return e}const Wte=R$(EE);function O$(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];r instanceof At?r.set(e[n]):O$(t[n],e[n])}}const Gte=()=>O$(EE,Wte),gp=new Set;async function Ge(t,e){const n=B.get(an);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=B.sub(an,()=>{B.get(an).type!=="paused"&&(o(),s())})}),await Ge(t,e);const r=Tn();if(!r.animations&&!e.forceMs)return null;const i={duration:e.forceMs?e.duration:r.animations?e.duration*r.executionUnit:1,easing:g$[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;try{const l=pt(s);if(a===void 0)return l.set(o);{gp.add(s);const c=await pt(s).start({from:o,to:a,config:i});return gp.delete(s),c}}catch(l){return console.warn(`Error animando la clave ${s}:`,l),null}}))}const Kte=()=>gp.forEach(t=>pt(t).pause()),Xte=()=>gp.forEach(t=>pt(t).resume());function I$(){gp.forEach(t=>{const e=pt(t);e.stop(!0),e.isPaused&&e.resume()}),setTimeout(()=>Gte(),10)}const Yte={AX:en.blue[500],BX:"#4F46E5",CX:"#3B82F6",DX:"#1E40AF",IP:en.red[500],SP:"#DC2626",MAR:en.blue[500],MBR:en.blue[500],IR:en.blue[500],FLAGS:"#F59E0B",result:"#10B981",id:"#F97316",ri:"#EA580C",left:"#22C55E",right:"#16A34A"};function D$(t){const e=t.replace("cpu.","").split(".")[0];return Yte[e]||en.stone[600]}async function ei(t,e){try{const n=e||D$(t);await Ge({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutCubic"}),await Ge({key:`${t}.backgroundColor`,to:en.stone[750]},{duration:3,easing:"easeInCubic"});return}catch(n){return console.warn(`No se pudo animar el registro ${t}:`,n),null}}async function Ci(t){try{return await Ge({key:`${t}.backgroundColor`,to:en.stone[800]},{duration:2,easing:"easeInOutQuart"})}catch(e){return console.warn(`No se pudo desactivar el registro ${t}:`,e),null}}async function pv(t){try{const e=Tn(),n=D$(t);await Ge({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutQuart"});const r=e.animations?1e3:1;await new Promise(i=>setTimeout(i,r)),await Ge({key:`${t}.backgroundColor`,to:en.stone[800]},{duration:2,easing:"easeInQuart"});return}catch(e){return console.warn(`No se pudo actualizar el registro ${t}:`,e),null}}async function vp(t){await ei("cpu.MBR"),B.set(qh,t),await Ci("cpu.MBR")}function qte(){setTimeout(()=>{try{pt("bus.rd.opacity").set(0)}catch{}try{pt("bus.wr.opacity").set(0)}catch{}},0)}function Jte(){try{pt("bus.rd.opacity").start({to:1})}catch{}}function Zte(){try{pt("bus.rd.opacity").start({to:0})}catch{}}function Qte(){try{pt("bus.wr.opacity").start({to:1})}catch{}}function ene(){try{pt("bus.wr.opacity").start({to:0})}catch{}}async function Br(t,e){return await Ge([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function nr(t){return await Ge({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function tne(t){switch(t.type){case"bus:io.selected":{await Promise.all([Ge({key:"bus.mem.stroke",to:en.stone[700]},{duration:1,easing:"easeInSine"}),Br(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Rc(t.error);return}case"bus:reset":{await Promise.all([Ge([{key:"bus.address.strokeDashoffset",to:1},{key:"bus.data.strokeDashoffset",to:1},{key:"bus.rd.strokeDashoffset",to:1},{key:"bus.wr.strokeDashoffset",to:1}],{duration:1,easing:"easeInSine"}),Ge({key:"bus.mem.stroke",to:en.red[500]},{duration:1,easing:"easeOutSine"}),nr("bus.iom"),nr("bus.handshake"),nr("bus.pio"),nr("bus.pic"),nr("bus.timer")]);return}default:return t}}async function nne(t){switch(t.type){case"clock:tick":return;default:return t.type}}function rne(t,e,n){let r="";switch(e&&(r="M 470 388 H 550 V 349 H 659"),n&&(r="M 629 250 H 550 V 349 H 659"),t){case"SP":return"M 451 309 H 550 V 349 H 659";case"IP":return"M 451 349 H 659";case"ri":return e||n?r:"";default:throw new Error(`Invalid register ${t}`)}}function ine({showSP:t,showri:e}){const{path:n,...r}=pt("cpu.internalBus.address"),[i]=x.useState(!1),s=[t?"M 451 309 H 550 V 250":"","M 451 349 H 550 V 255",e?"M 470 388 H 550 V 300":"","M 451 349 H 659"];return p.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[s.map((o,a)=>p.jsx("path",{className:`fill-none stroke-bus ${i&&o==="M 444 388 H 575 V 349"?"stroke-mantis-400":"stroke-stone-700"}`,strokeLinejoin:"round",d:o},a)),p.jsx(on.path,{d:n,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r})]})}var AE={exports:{}},Wu=typeof Reflect=="object"?Reflect:null,qM=Wu&&typeof Wu.apply=="function"?Wu.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},mv;Wu&&typeof Wu.ownKeys=="function"?mv=Wu.ownKeys:Object.getOwnPropertySymbols?mv=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:mv=function(e){return Object.getOwnPropertyNames(e)};function sne(t){console&&console.warn&&console.warn(t)}var L$=Number.isNaN||function(e){return e!==e};function xt(){xt.init.call(this)}AE.exports=xt;AE.exports.once=cne;xt.EventEmitter=xt;xt.prototype._events=void 0;xt.prototype._eventsCount=0;xt.prototype._maxListeners=void 0;var JM=10;function ew(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(xt,"defaultMaxListeners",{enumerable:!0,get:function(){return JM},set:function(t){if(typeof t!="number"||t<0||L$(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");JM=t}});xt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};xt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||L$(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function j$(t){return t._maxListeners===void 0?xt.defaultMaxListeners:t._maxListeners}xt.prototype.getMaxListeners=function(){return j$(this)};xt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")qM(l,this,n);else for(var c=l.length,u=U$(l,c),r=0;r<c;++r)qM(u[r],this,n);return!0};function $$(t,e,n,r){var i,s,o;if(ew(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=j$(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,sne(a)}return t}xt.prototype.addListener=function(e,n){return $$(this,e,n,!1)};xt.prototype.on=xt.prototype.addListener;xt.prototype.prependListener=function(e,n){return $$(this,e,n,!0)};function one(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function F$(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=one.bind(r);return i.listener=n,r.wrapFn=i,i}xt.prototype.once=function(e,n){return ew(n),this.on(e,F$(this,e,n)),this};xt.prototype.prependOnceListener=function(e,n){return ew(n),this.prependListener(e,F$(this,e,n)),this};xt.prototype.removeListener=function(e,n){var r,i,s,o,a;if(ew(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():ane(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};xt.prototype.off=xt.prototype.removeListener;xt.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function B$(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?lne(i):U$(i,i.length)}xt.prototype.listeners=function(e){return B$(this,e,!0)};xt.prototype.rawListeners=function(e){return B$(this,e,!1)};xt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):z$.call(t,e)};xt.prototype.listenerCount=z$;function z$(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}xt.prototype.eventNames=function(){return this._eventsCount>0?mv(this._events):[]};function U$(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function ane(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function lne(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function cne(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}H$(t,e,s,{once:!0}),e!=="error"&&une(t,i,{once:!0})})}function une(t,e,n){typeof t.on=="function"&&H$(t,"error",e,n)}function H$(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var dne=AE.exports;function no(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(no.prototype[Symbol.iterator]=function(){return this});no.of=function(){var t=arguments,e=t.length,n=0;return new no(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};no.empty=function(){var t=new no(function(){return{done:!0}});return t};no.fromSequence=function(t){var e=0,n=t.length;return new no(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};no.is=function(t){return t instanceof no?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var tw=no;const zi=jc(tw);var nw={};nw.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";nw.SYMBOL_SUPPORT=typeof Symbol<"u";var fne=tw,V$=nw,hne=V$.ARRAY_BUFFER_SUPPORT,pne=V$.SYMBOL_SUPPORT;function mne(t){return typeof t=="string"||Array.isArray(t)||hne&&ArrayBuffer.isView(t)?fne.fromSequence(t):typeof t!="object"||t===null?null:pne&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var W$=function(e){var n=mne(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},gne=W$,vne=function(e,n){for(var r=arguments.length>1?n:1/0,i=r!==1/0?new Array(r):[],s,o=0,a=gne(e);;){if(o===r)return i;if(s=a.next(),s.done)return o!==n&&(i.length=o),i;i[o++]=s.value}};const G$=jc(vne);var yne=tw,wne=W$,bne=function(){var e=arguments,n=null,r=-1;return new yne(function(){var s=null;do{if(n===null){if(r++,r>=e.length)return{done:!0};n=wne(e[r])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Io=jc(bne);function xne(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const r in arguments[e])t[r]=arguments[e][r];return t}let wn=xne;typeof Object.assign=="function"&&(wn=Object.assign);function Di(t,e,n,r){const i=t._nodes.get(e);let s=null;return i&&(r==="mixed"?s=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?s=i.out&&i.out[n]:s=i.undirected&&i.undirected[n]),s}function zn(t){return typeof t=="object"&&t!==null}function K$(t){let e;for(e in t)return!1;return!0}function gi(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Wi(t,e,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function ZM(t){return!(!zn(t)||t.attributes&&!Array.isArray(t.attributes))}function Sne(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class PE extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class ye extends PE{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ye.prototype.constructor)}}class ue extends PE{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ue.prototype.constructor)}}class $e extends PE{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,$e.prototype.constructor)}}function X$(t,e){this.key=t,this.attributes=e,this.clear()}X$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Y$(t,e){this.key=t,this.attributes=e,this.clear()}Y$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function q$(t,e){this.key=t,this.attributes=e,this.clear()}q$.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function jd(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}jd.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};jd.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],s=i[r];if(typeof s>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}s.previous=this,this.next=s,i[r]=this,this.target[e][n]=this};jd.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};jd.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const J$=0,Z$=1,kne=2,Q$=3;function Jo(t,e,n,r,i,s,o){let a,l,c,u;if(r=""+r,n===J$){if(a=t._nodes.get(r),!a)throw new ue(`Graph.${e}: could not find the "${r}" node in the graph.`);c=i,u=s}else if(n===Q$){if(i=""+i,l=t._edges.get(i),!l)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`);const d=l.source.key,f=l.target.key;if(r===d)a=l.target;else if(r===f)a=l.source;else throw new ue(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${d}, ${f}).`);c=s,u=o}else{if(l=t._edges.get(r),!l)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===Z$?a=l.source:a=l.target,c=i,u=s}return[a,c,u]}function _ne(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Jo(this,e,n,r,i,s);return o.attributes[a]}}function Cne(t,e,n){t.prototype[e]=function(r,i){const[s]=Jo(this,e,n,r,i);return s.attributes}}function Ene(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Jo(this,e,n,r,i,s);return o.attributes.hasOwnProperty(a)}}function Ane(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,c]=Jo(this,e,n,r,i,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Pne(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,c]=Jo(this,e,n,r,i,s,o);if(typeof c!="function")throw new ye(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Nne(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Jo(this,e,n,r,i,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function Tne(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Jo(this,e,n,r,i,s);if(!zn(a))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Mne(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Jo(this,e,n,r,i,s);if(!zn(a))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return wn(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function Rne(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Jo(this,e,n,r,i,s);if(typeof a!="function")throw new ye(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const One=[{name:t=>`get${t}Attribute`,attacher:_ne},{name:t=>`get${t}Attributes`,attacher:Cne},{name:t=>`has${t}Attribute`,attacher:Ene},{name:t=>`set${t}Attribute`,attacher:Ane},{name:t=>`update${t}Attribute`,attacher:Pne},{name:t=>`remove${t}Attribute`,attacher:Nne},{name:t=>`replace${t}Attributes`,attacher:Tne},{name:t=>`merge${t}Attributes`,attacher:Mne},{name:t=>`update${t}Attributes`,attacher:Rne}];function Ine(t){One.forEach(function({name:e,attacher:n}){n(t,e("Node"),J$),n(t,e("Source"),Z$),n(t,e("Target"),kne),n(t,e("Opposite"),Q$)})}function Dne(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Di(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]}}function Lne(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,o=""+arguments[1];if(i=Di(this,s,o,n),!i)throw new ue(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function jne(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Di(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes.hasOwnProperty(i)}}function $ne(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=Di(this,a,l,n),!o)throw new ue(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function Fne(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=Di(this,a,l,n),!o)throw new ue(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof s!="function")throw new ye(`Graph.${e}: updater should be a function.`);return o.attributes[i]=s(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function Bne(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Di(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete s.attributes[i],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:i}),this}}function zne(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Di(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!zn(i))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=i,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function Une(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Di(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!zn(i))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return wn(s.attributes,i),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:i}),this}}function Hne(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Di(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new ye(`Graph.${e}: provided updater is not a function.`);return s.attributes=i(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Vne=[{name:t=>`get${t}Attribute`,attacher:Dne},{name:t=>`get${t}Attributes`,attacher:Lne},{name:t=>`has${t}Attribute`,attacher:jne},{name:t=>`set${t}Attribute`,attacher:$ne},{name:t=>`update${t}Attribute`,attacher:Fne},{name:t=>`remove${t}Attribute`,attacher:Bne},{name:t=>`replace${t}Attributes`,attacher:zne},{name:t=>`merge${t}Attributes`,attacher:Une},{name:t=>`update${t}Attributes`,attacher:Hne}];function Wne(t){Vne.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const Gne=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Kne(t,e,n,r){let i=!1;for(const s in e){if(s===r)continue;const o=e[s];if(i=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&i)return o.key}}function Xne(t,e,n,r){let i,s,o,a=!1;for(const l in e)if(l!==r){i=e[l];do{if(s=i.source,o=i.target,a=n(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected),t&&a)return i.key;i=i.next}while(i!==void 0)}}function ax(t,e){const n=Object.keys(t),r=n.length;let i,s=0;return new zi(function(){do if(i)i=i.next;else{if(s>=r)return{done:!0};const a=n[s++];if(a===e){i=void 0;continue}i=t[a]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function Yne(t,e,n,r){const i=e[n];if(!i)return;const s=i.source,o=i.target;if(r(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected)&&t)return i.key}function qne(t,e,n,r){let i=e[n];if(!i)return;let s=!1;do{if(s=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&s)return i.key;i=i.next}while(i!==void 0)}function lx(t,e){let n=t[e];return n.next!==void 0?new zi(function(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}):zi.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function Jne(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):G$(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===i&&(r[o++]=l.key);return r}function eF(t,e,n,r){if(e.size===0)return;const i=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,i&&a.undirected!==s)continue;const{key:u,attributes:d,source:f,target:h}=a;if(l=r(u,d,f.key,h.key,f.attributes,h.attributes,a.undirected),t&&l)return u}}function Zne(t,e){if(t.size===0)return zi.empty();const n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return new zi(function(){let o,a;for(;;){if(o=i.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==r))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function NE(t,e,n,r,i,s){const o=e?Xne:Kne;let a;if(n!=="undirected"&&(r!=="out"&&(a=o(t,i.in,s),t&&a)||r!=="in"&&(a=o(t,i.out,s,r?void 0:i.key),t&&a))||n!=="directed"&&(a=o(t,i.undirected,s),t&&a))return a}function Qne(t,e,n,r){const i=[];return NE(!1,t,e,n,r,function(s){i.push(s)}),i}function ere(t,e,n){let r=zi.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=Io(r,ax(n.in))),e!=="in"&&typeof n.out<"u"&&(r=Io(r,ax(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=Io(r,ax(n.undirected))),r}function TE(t,e,n,r,i,s,o){const a=n?qne:Yne;let l;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(l=a(t,i.in,s,o),t&&l)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==s)&&(l=a(t,i.out,s,o),t&&l))||e!=="directed"&&typeof i.undirected<"u"&&(l=a(t,i.undirected,s,o),t&&l))return l}function tre(t,e,n,r,i){const s=[];return TE(!1,t,e,n,r,i,function(o){s.push(o)}),s}function nre(t,e,n,r){let i=zi.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=Io(i,lx(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=Io(i,lx(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=Io(i,lx(n.undirected,r))),i}function rre(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return Jne(this,r);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new ue(`Graph.${n}: could not find the "${s}" node in the graph.`);return Qne(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new ue(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new ue(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return tre(r,this.multi,i,a,o)}throw new ye(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function ire(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return d=c,eF(!1,this,r,d);if(arguments.length===2){c=""+c,d=u;const f=this._nodes.get(c);if(typeof f>"u")throw new ue(`Graph.${s}: could not find the "${c}" node in the graph.`);return NE(!1,this.multi,r==="mixed"?this.type:r,i,f,d)}if(arguments.length===3){c=""+c,u=""+u;const f=this._nodes.get(c);if(!f)throw new ue(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new ue(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return TE(!1,r,this.multi,i,f,u,d)}throw new ye(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let f=0;r!=="directed"&&(f+=this.undirectedSize),r!=="undirected"&&(f+=this.directedSize),d=new Array(f);let h=0;c.push((m,g,y,v,w,b,k)=>{d[h++]=u(m,g,y,v,w,b,k)})}else d=[],c.push((f,h,m,g,y,v,w)=>{d.push(u(f,h,m,g,y,v,w))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((f,h,m,g,y,v,w)=>{u(f,h,m,g,y,v,w)&&d.push(f)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new ye(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new ye(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((h,m,g,y,v,w,b)=>{f=u(f,h,m,g,y,v,w,b)}),this[s].apply(this,c),f}}function sre(t,e){const{name:n,type:r,direction:i}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return u=l,eF(!0,this,r,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new ue(`Graph.${s}: could not find the "${l}" node in the graph.`);return NE(!0,this.multi,r==="mixed"?this.type:r,i,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new ue(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new ue(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return TE(!0,r,this.multi,i,d,c,u)}throw new ye(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,h,m,g,y,v)=>c(d,f,h,m,g,y,v)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,h,m,g,y,v)=>!c(d,f,h,m,g,y,v)),!this[s].apply(this,l)}}function ore(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return zi.empty();if(!arguments.length)return Zne(this,r);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new ue(`Graph.${s}: could not find the "${o}" node in the graph.`);return ere(r,i,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new ue(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new ue(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return nre(r,i,l,a)}throw new ye(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function are(t){Gne.forEach(e=>{rre(t,e),ire(t,e),sre(t,e),ore(t,e)})}const lre=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function rw(){this.A=null,this.B=null}rw.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};rw.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function hf(t,e,n,r,i){for(const s in r){const o=r[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=i(c.key,c.attributes);if(t&&u)return c.key}}function ME(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return hf(t,null,r,r.undirected,i);if(typeof n=="string")return hf(t,null,r,r[n],i)}const s=new rw;let o;if(e!=="undirected"){if(n!=="out"){if(o=hf(t,null,r,r.in,i),t&&o)return o;s.wrap(r.in)}if(n!=="in"){if(o=hf(t,s,r,r.out,i),t&&o)return o;s.wrap(r.out)}}if(e!=="directed"&&(o=hf(t,s,r,r.undirected,i),t&&o))return o}function cre(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const r=[];return ME(!1,t,e,n,function(i){r.push(i)}),r}function pf(t,e,n){const r=Object.keys(n),i=r.length;let s=0;return new zi(function(){let a=null;do{if(s>=i)return t&&t.wrap(n),{done:!0};const l=n[r[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function ure(t,e,n){if(t!=="mixed"){if(t==="undirected")return pf(null,n,n.undirected);if(typeof e=="string")return pf(null,n,n[e])}let r=zi.empty();const i=new rw;return t!=="undirected"&&(e!=="out"&&(r=Io(r,pf(i,n,n.in))),e!=="in"&&(r=Io(r,pf(i,n,n.out)))),t!=="directed"&&(r=Io(r,pf(i,n,n.undirected))),r}function dre(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new ue(`Graph.${n}: could not find the "${s}" node in the graph.`);return cre(r==="mixed"?this.type:r,i,o)}}function fre(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new ue(`Graph.${s}: could not find the "${c}" node in the graph.`);ME(!1,r==="mixed"?this.type:r,i,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(f,h)=>{d.push(u(f,h))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(f,h)=>{u(f,h)&&d.push(f)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new ye(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[s](c,(h,m)=>{f=u(f,h,m)}),f}}function hre(t,e){const{name:n,type:r,direction:i}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new ue(`Graph.${o}: could not find the "${c}" node in the graph.`);return ME(!0,r==="mixed"?this.type:r,i,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(f,h)=>!u(f,h))}}function pre(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return zi.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new ue(`Graph.${s}: could not find the "${o}" node in the graph.`);return ure(r==="mixed"?this.type:r,i,a)}}function mre(t){lre.forEach(e=>{dre(t,e),fre(t,e),hre(t,e),pre(t,e)})}function sg(t,e,n,r,i){const s=r._nodes.values(),o=r.type;let a,l,c,u,d,f;for(;a=s.next(),a.done!==!0;){let h=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do f=d.target,h=!0,i(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do f=d.target,f.key!==c&&(f=d.source),h=!0,i(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!h&&i(l.key,null,l.attributes,null,null,null,null)}}function gre(t,e){const n={key:t};return K$(e.attributes)||(n.attributes=wn({},e.attributes)),n}function vre(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return K$(n.attributes)||(r.attributes=wn({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function yre(t){if(!zn(t))throw new ye('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new ye("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!zn(t.attributes)||t.attributes===null))throw new ye("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function wre(t){if(!zn(t))throw new ye('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new ye("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new ye("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!zn(t.attributes)||t.attributes===null))throw new ye("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new ye("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const bre=Sne(),xre=new Set(["directed","undirected","mixed"]),QM=new Set(["domain","_events","_eventsCount","_maxListeners"]),Sre=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],kre={allowSelfLoops:!0,multi:!1,type:"mixed"};function _re(t,e,n){if(n&&!zn(n))throw new ye(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new $e(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function eR(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function tF(t,e,n,r,i,s,o,a){if(!r&&t.type==="undirected")throw new $e(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new $e(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!zn(a))throw new ye(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new $e(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new ue(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new ue(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new $e(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new $e(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new jd(r,i,l,c,a);t._edges.set(i,d);const f=s===o;return r?(l.undirectedDegree++,c.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),r?t._undirectedSize++:t._directedSize++,u.key=i,t.emit("edgeAdded",u),i}function Cre(t,e,n,r,i,s,o,a,l){if(!r&&t.type==="undirected")throw new $e(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new $e(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new ye(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!zn(a))throw new ye(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new $e(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),f,h;if(!n&&(f=t._edges.get(i),f)){if((f.source.key!==s||f.target.key!==o)&&(!r||f.source.key!==o||f.target.key!==s))throw new $e(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${s}" source & "${o}" target vs. ("${f.source.key}", "${f.target.key}").`);h=f}if(!h&&!t.multi&&u&&(h=r?u.undirected[o]:u.out[o]),h){const w=[h.key,!1,!1,!1];if(l?!c:!a)return w;if(l){const b=h.attributes;h.attributes=c(b),t.emit("edgeAttributesUpdated",{type:"replace",key:h.key,attributes:h.attributes})}else wn(h.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:h.key,attributes:h.attributes,data:a});return w}a=a||{},l&&c&&(a=c(a));const m={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new $e(`Graph.${e}: the "${i}" edge already exists in the graph.`);let g=!1,y=!1;u||(u=eR(t,s,{}),g=!0,s===o&&(d=u,y=!0)),d||(d=eR(t,o,{}),y=!0),f=new jd(r,i,u,d,a),t._edges.set(i,f);const v=s===o;return r?(u.undirectedDegree++,d.undirectedDegree++,v&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,v&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),r?t._undirectedSize++:t._directedSize++,m.key=i,t.emit("edgeAdded",m),[i,!0,g,y]}function Jc(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,s=e.undirected,o=n===r;s?(n.undirectedDegree--,r.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:s})}class Et extends dne.EventEmitter{constructor(e){if(super(),e=wn({},kre,e),typeof e.multi!="boolean")throw new ye(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!xre.has(e.type))throw new ye(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new ye(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?X$:e.type==="directed"?Y$:q$;gi(this,"NodeDataClass",n);const r="geid_"+bre()+"_";let i=0;const s=()=>{let o;do o=r+i++;while(this._edges.has(o));return o};gi(this,"_attributes",{}),gi(this,"_nodes",new Map),gi(this,"_edges",new Map),gi(this,"_directedSize",0),gi(this,"_undirectedSize",0),gi(this,"_directedSelfLoopCount",0),gi(this,"_undirectedSelfLoopCount",0),gi(this,"_edgeKeyGenerator",s),gi(this,"_options",e),QM.forEach(o=>gi(this,o,this[o])),Wi(this,"order",()=>this._nodes.size),Wi(this,"size",()=>this._edges.size),Wi(this,"directedSize",()=>this._directedSize),Wi(this,"undirectedSize",()=>this._undirectedSize),Wi(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Wi(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Wi(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Wi(this,"multi",this._options.multi),Wi(this,"type",this._options.type),Wi(this,"allowSelfLoops",this._options.allowSelfLoops),Wi(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new ye(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new ye(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new ye(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new $e("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new ue(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ue(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new $e("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new ue(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ue(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new $e("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ue(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const r=this._edges.get(n);if(!r)throw new ue(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,s=r.target.key;if(e===i)return s;if(e===s)return i;throw new ue(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const r=this._edges.get(e);if(!r)throw new ue(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return _re(this,e,n).key}mergeNode(e,n){if(n&&!zn(n))throw new ye(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&(wn(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new ye(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){const s=r.attributes;r.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do Jc(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do Jc(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do Jc(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=Di(this,r,i,this.type),!n)throw new ue(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new ue(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Jc(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new $e("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new $e("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const r=Di(this,e,n,"directed");if(!r)throw new ue(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Jc(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new $e("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new $e("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Di(this,e,n,"undirected");if(!r)throw new ue(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Jc(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new ye("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!zn(e))throw new ye("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!zn(e))throw new ye("Graph.mergeAttributes: provided attributes are not a plain object.");return wn(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new ye("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new ye("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!ZM(n))throw new ye("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new ye("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!ZM(n))throw new ye("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,s,o,a;for(;i=r.next(),i.done!==!0;)s=i.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new ye("Graph.forEachAdjacencyEntry: expecting a callback.");sg(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ye("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");sg(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new ye("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");sg(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ye("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");sg(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):G$(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new ye("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new ye("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new ye("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const s=new Array(this.order);let o=0;for(;r=n.next(),r.done!==!0;)i=r.value,s[o++]=e(i.key,i.attributes);return s}someNode(e){if(typeof e!="function")throw new ye("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new ye("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new ye("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const s=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&s.push(i.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new ye("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ye("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let s,o;for(;s=i.next(),s.done!==!0;)o=s.value,r=e(r,o.key,o.attributes);return r}nodeEntries(){const e=this._nodes.values();return new zi(()=>{const n=e.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,s)=>{e[n++]=gre(s,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,s)=>{r[n++]=vre(this.type,s,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof Et)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,f,h,m)=>{n?m?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):m?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!zn(e))throw new ye("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!zn(e.attributes))throw new ye("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new ye("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=s.length;r<i;r++){o=s[r],yre(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new ye("Graph.import: invalid edges. Expecting an array.");for(r=0,i=s.length;r<i;r++){a=s[r],wre(a);const{source:c,target:u,attributes:d,undirected:f=l}=a;let h;"key"in a?(h=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,h.call(this,a.key,c,u,d)):(h=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,h.call(this,c,u,d))}}return this}nullCopy(e){const n=new Et(wn({},this._options,e));return n.replaceAttributes(wn({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const s=wn({},r.attributes);r=new n.NodeDataClass(i,s),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new $e(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new $e("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new $e("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),r=this._edges.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,tF(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,wn({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},r={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const f=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof r[f]>"u"?r[f]=0:r[f]++,l+=`${r[f]}. `):l+=`[${o}]: `,l+=f,n[l]=s.attributes});const i={};for(const s in this)this.hasOwnProperty(s)&&!QM.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(i[s]=this[s]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,gi(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(Et.prototype[Symbol.for("nodejs.util.inspect.custom")]=Et.prototype.inspect);Sre.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),r=e==="add"?tF:Cre;t.generateKey?Et.prototype[n]=function(i,s,o){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,s,o,e==="update")}:Et.prototype[n]=function(i,s,o,a){return r(this,n,!1,(t.type||this.type)==="undirected",i,s,o,a,e==="update")}})});Ine(Et);Wne(Et);are(Et);mre(Et);class nF extends Et{constructor(e){const n=wn({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new ye("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new ye('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class RE extends Et{constructor(e){const n=wn({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new ye("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new ye('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class rF extends Et{constructor(e){const n=wn({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ye("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class iF extends Et{constructor(e){const n=wn({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ye("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new ye('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class sF extends Et{constructor(e){const n=wn({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ye("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new ye('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function $d(t){t.from=function(e,n){const r=wn({},e.options,n),i=new t(r);return i.import(e),i}}$d(Et);$d(nF);$d(RE);$d(rF);$d(iF);$d(sF);Et.Graph=Et;Et.DirectedGraph=nF;Et.UndirectedGraph=RE;Et.MultiGraph=rF;Et.MultiDirectedGraph=iF;Et.MultiUndirectedGraph=sF;Et.InvalidArgumentsGraphError=ye;Et.NotFoundGraphError=ue;Et.UsageGraphError=$e;var Ere=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},oF=nw,Are=oF.ARRAY_BUFFER_SUPPORT,Pre=oF.SYMBOL_SUPPORT,Nre=function(e,n){var r,i,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||Are&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(Pre&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(r=e,s=0;a=r.next(),a.done!==!0;)n(a.value,s),s++;return}for(i in e)e.hasOwnProperty(i)&&n(e[i],i)},aF=tw,Tre=Nre;function hn(){this.clear()}hn.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};hn.prototype.enqueue=function(t){return this.items.push(t),++this.size};hn.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};hn.prototype.peek=function(){if(this.size)return this.items[this.offset]};hn.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,r=0,i=this.items.length;n<i;n++,r++)t.call(e,this.items[n],r,this)};hn.prototype.toArray=function(){return this.items.slice(this.offset)};hn.prototype.values=function(){var t=this.items,e=this.offset;return new aF(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};hn.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new aF(function(){if(e>=t.length)return{done:!0};var r=t[e];return e++,{value:[n++,r],done:!1}})};typeof Symbol<"u"&&(hn.prototype[Symbol.iterator]=hn.prototype.values);hn.prototype.toString=function(){return this.toArray().join(",")};hn.prototype.toJSON=function(){return this.toArray()};hn.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:hn,enumerable:!1}),t};typeof Symbol<"u"&&(hn.prototype[Symbol.for("nodejs.util.inspect.custom")]=hn.prototype.inspect);hn.from=function(t){var e=new hn;return Tre(t,function(n){e.enqueue(n)}),e};hn.of=function(){return hn.from(arguments)};var Mre=function(e,n){var r=n.length;if(r!==0){var i=e.length;e.length+=r;for(var s=0;s<r;s++)e[i+s]=n[s]}},lF=Ere,Rre=Mre;function Ore(t,e,n){if(!lF(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var r=t.inboundNeighbors.bind(t),i=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,f,h,m,g,y,v=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],h=0,g=c.length;h<g;h++)for(u=c[h],d=i(u),m=0,y=d.length;m<y;m++)if(f=d[m],f in s||(a.push(f),s[f]=u),f in o){v=!0;break e}}else for(c=l,l=[],h=0,g=c.length;h<g;h++)for(u=c[h],d=r(u),m=0,y=d.length;m<y;m++)if(f=d[m],f in o||(l.push(f),o[f]=u),f in s){v=!0;break e}if(!v)return null;for(var w=[];f;)w.unshift(f),f=s[f];for(f=o[w[w.length-1]];f;)w.push(f),f=o[f];return w.length?w:null}function cF(t,e,n){if(!lF(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var r=new Set,i={},s=0;i[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!r.has(c)&&(r.add(c),Rre(u,e[t](c)),i[c]=s);s++,o=u}return i}cF.bind(null,"outboundNeighbors");cF.bind(null,"neighbors");var Ire=Ore;const Y=new RE({allowSelfLoops:!1});Y.addNode("MBR",{position:[620,250]});Y.addNode("AX",{position:[455,45]});Y.addNode("BX",{position:[455,85]});Y.addNode("CX",{position:[455,125]});Y.addNode("DX",{position:[455,165]});Y.addNode("id",{position:[451,205]});Y.addNode("SP",{position:[451,309]});Y.addNode("IP",{position:[451,349]});Y.addNode("ri",{position:[451,388]});Y.addNode("MAR",{position:[698,349]});Y.addNode("result",{position:[272,115]});Y.addNode("ALUresult",{position:[370,115]});Y.addNode("FLAGS",{position:[250,225]});Y.addNode("IR",{position:[205,272]});Y.addNode("left",{position:[130,85]});Y.addNode("right",{position:[125,145]});Y.addNode("rmbr",{position:[250,390]});Y.addNode("bleft1",{position:[550,16]});Y.addNode("bleft2",{position:[90,16]});Y.addNode("bleft3",{position:[90,85]});Y.addNode("AX join",{position:[425,45]});Y.addNode("BX join",{position:[425,85]});Y.addNode("CX join",{position:[425,125]});Y.addNode("DX join",{position:[425,165]});Y.addNode("id join",{position:[421,205]});Y.addNode("data mbr join",{position:[421,250]});Y.addNode("SP join",{position:[421,309]});Y.addNode("IP join",{position:[421,349]});Y.addNode("ri join",{position:[421,388]});Y.addNode("MAR join1",{position:[550,388]});Y.addNode("MAR join2",{position:[550,349]});Y.addNode("addresses mbr join",{position:[421,250]});Y.addNode("result mbr join",{position:[370,250]});Y.addNode("FLAGS mbr join",{position:[250,250]});Y.addNode("IR mbr join",{position:[205,250]});Y.addNode("left join",{position:[30,85]});Y.addNode("right join",{position:[90,145]});Y.addNode("operands mbr join",{position:[90,250]});Y.addNode("outr mbr join",{position:[550,250]});Y.addNode("mbr reg join",{position:[421,250]});Y.addNode("AX out",{position:[465,45]});Y.addNode("BX out",{position:[465,85]});Y.addNode("CX out",{position:[465,125]});Y.addNode("DX out",{position:[465,165]});Y.addNode("id out",{position:[460,205]});Y.addNode("SP out",{position:[510,309]});Y.addNode("IP out",{position:[510,349]});Y.addNode("AX out join",{position:[550,45]});Y.addNode("BX out join",{position:[550,85]});Y.addNode("CX out join",{position:[550,125]});Y.addNode("DX out join",{position:[550,165]});Y.addNode("id out join",{position:[550,205]});Y.addNode("SP out join",{position:[550,309]});Y.addNode("IP out join",{position:[550,349]});Y.addNode("ri out join",{position:[550,388]});Y.addUndirectedEdge("AX","AX out");Y.addUndirectedEdge("BX","BX out");Y.addUndirectedEdge("CX","CX out");Y.addUndirectedEdge("DX","DX out");Y.addUndirectedEdge("id","id out");Y.addUndirectedEdge("IP","IP out");Y.addUndirectedEdge("SP","SP out");Y.addUndirectedEdge("AX out","AX out join");Y.addUndirectedEdge("BX out","BX out join");Y.addUndirectedEdge("CX out","CX out join");Y.addUndirectedEdge("DX out","DX out join");Y.addUndirectedEdge("id out","id out join");Y.addUndirectedEdge("AX out join","outr mbr join");Y.addUndirectedEdge("BX out join","outr mbr join");Y.addUndirectedEdge("CX out join","outr mbr join");Y.addUndirectedEdge("DX out join","outr mbr join");Y.addUndirectedEdge("id out join","outr mbr join");Y.addUndirectedEdge("AX out join","bleft1");Y.addUndirectedEdge("BX out join","bleft1");Y.addUndirectedEdge("CX out join","bleft1");Y.addUndirectedEdge("DX out join","bleft1");Y.addUndirectedEdge("id out join","bleft1");Y.addUndirectedEdge("bleft1","bleft2");Y.addUndirectedEdge("bleft2","bleft3");Y.addUndirectedEdge("bleft3","left");Y.addUndirectedEdge("IP out join","outr mbr join");Y.addUndirectedEdge("ri out join","outr mbr join");Y.addUndirectedEdge("SP out join","outr mbr join");Y.addUndirectedEdge("SP out join","MAR join2");Y.addUndirectedEdge("outr mbr join","mbr reg join");Y.addUndirectedEdge("MBR","outr mbr join");Y.addUndirectedEdge("mbr reg join","AX join");Y.addUndirectedEdge("mbr reg join","BX join");Y.addUndirectedEdge("mbr reg join","CX join");Y.addUndirectedEdge("mbr reg join","DX join");Y.addUndirectedEdge("mbr reg join","id join");Y.addUndirectedEdge("outr mbr join","operands mbr join");Y.addUndirectedEdge("AX join","AX");Y.addUndirectedEdge("BX join","BX");Y.addUndirectedEdge("CX join","CX");Y.addUndirectedEdge("DX join","DX");Y.addUndirectedEdge("id join","data mbr join");Y.addUndirectedEdge("MBR","data mbr join");Y.addUndirectedEdge("IP","IP join");Y.addUndirectedEdge("SP","SP join");Y.addUndirectedEdge("ri","ri join");Y.addUndirectedEdge("MAR join1","ri");Y.addUndirectedEdge("MAR join2","MAR join1");Y.addUndirectedEdge("MAR","MAR join2");Y.addUndirectedEdge("IP join","SP join");Y.addUndirectedEdge("SP join","ri join");Y.addUndirectedEdge("IP join","addresses mbr join");Y.addUndirectedEdge("addresses mbr join","data mbr join");Y.addUndirectedEdge("result","ALUresult");Y.addUndirectedEdge("ALUresult","result mbr join");Y.addUndirectedEdge("result mbr join","addresses mbr join");Y.addUndirectedEdge("FLAGS","FLAGS mbr join");Y.addUndirectedEdge("FLAGS mbr join","result mbr join");Y.addUndirectedEdge("IR","IR mbr join");Y.addUndirectedEdge("IR mbr join","FLAGS mbr join");Y.addUndirectedEdge("left","left join");Y.addUndirectedEdge("right","right join");Y.addUndirectedEdge("left join","right join");Y.addUndirectedEdge("right join","operands mbr join");function Dre(t,e,n,r){const i=f=>f.replace(/\.(l|h)$/,""),s=i(t),o=i(e);if(console.log("from:",t,"normalized:",s),console.log("to:",e,"normalized:",o),!Y.hasNode(s))return console.warn(`Nodo origen '${s}' no existe en el grafo`),"";if(!Y.hasNode(o))return console.warn(`Nodo destino '${o}' no existe en el grafo`),"";const a=(f,h)=>h==="left"?[f,"bleft1","bleft2","bleft3","left",`${f} out`,`${f} out join`,"outr mbr join","mbr reg join",`${h} join`,h]:[f,`${f} out`,`${f} out join`,"outr mbr join","mbr reg join",`${h} join`,h];let l=[];const c=["AX","BX","CX","DX","id"];if(s==="MBR"&&o==="left")l=["MBR","outr mbr join","bleft1","bleft2","bleft3","left"];else if(s==="MBR"&&o==="ri")l=["MBR","outr mbr join","SP out join","MAR join2","MAR"];else if(s==="MBR"&&c.includes(o))l=["MBR","mbr reg join",`${o} join`,o];else if(c.includes(s)&&c.includes(o))l=a(s,o);else if(s==="IP"&&o==="id")l=["IP out","IP out join","outr mbr join","mbr reg join","id join","id"];else if(s==="id"&&o==="ri")l=["id out","id out join","outr mbr join","MAR join2","MAR"];else if(s==="BX"&&o==="ri")l=["BX out","BX out join","outr mbr join","MAR join2","MAR"];else if(s==="id"&&o==="MBR")l=["id out","id out join","outr mbr join","MBR"];else if(s==="id"&&o==="IP"&&n==="RET")l=["MBR","mbr reg join","IP join","IP"];else try{l=Ire(Y,s,o)||[]}catch(f){return console.warn(`Error calculando ruta de ${s} a ${o}:`,f),""}if(s==="ri"&&o==="IP"&&(l=["MBR","mbr reg join","IP join","IP"]),s==="ri"&&o==="IP"&&n==="CALL"&&(l=["ri","ri out join","outr mbr join","mbr reg join","IP join","IP"]),s==="MBR"&&o==="ri"&&["JMP","JZ","JC"].includes(n??""))return"";if(s==="MBR"&&o==="ri"&&n==="CALL"&&(l=["MBR","mbr reg join","ri join","ri"]),s==="MBR"&&o==="ri"&&(n==="MOV"||n==="INT")&&r==="mem<-imd"&&(l=["MBR","mbr reg join","ri join","ri"]),s==="IP"&&o==="MBR"&&(n==="INT"||n==="CALL"))return"M 510 349 H 550 V 250 H 620";if(s==="MBR"&&o==="ri"&&r==="mem<-imd"&&(n==="ADD"||n==="SUB")&&(l=["MBR","mbr reg join","ri join","ri"]),l.length===0)return console.warn(`No se encontr ruta de ${s} a ${o}`),"";const u=Y.getNodeAttribute(l[0],"position");let d=`M ${u[0]} ${u[1]}`;for(let f=1;f<l.length;f++){const[h,m]=Y.getNodeAttribute(l[f],"position");d+=` L ${h} ${m}`}return d}function Lre({showSP:t,showid:e,showri:n}){const{path:r,...i}=pt("cpu.internalBus.data");return p.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[p.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 630","M 90 145 H 90","M 272 115 H 370 V 250","M 250 225 V 250","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 430 349 H 421","V 250","M 451 349 H 421",t?"M 451 309 H 421":"M 451 309",n?"M 470 388 H 421 V 300":"","M 455 45 H 425","V 250","M 455 85 H 425","M 455 125 H 425","M 455 165 H 425",e?"M 455 205 H 425":"","M 550 45 H 465","M 550 85 H 465","M 550 125 H 465","M 550 165 H 465",e?"M 550 205 H 460":"",n?"M 550 388 H 480":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220"].join(" ")}),p.jsx(on.path,{d:r,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}const tR=(t,e,n,r)=>{try{const i=Dre(t,e,n,r);return i?Ge([{key:"cpu.internalBus.data.path",from:i},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}):Promise.resolve()}catch(i){return console.warn("Error en drawDataPath:",i),Promise.resolve()}},nR=()=>Ge({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});let $l="",cx="",ux=!1,og=!1,ag=0;async function jre(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await Ge([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),B.set(k5,t.operation),await Promise.all([Ge({key:"cpu.alu.operation.backgroundColor",to:en.mantis[400]},{duration:1,easing:"easeOutQuart"}),Ge({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([Ge({key:"cpu.alu.operation.backgroundColor",to:en.stone[800]},{duration:1,easing:"easeOutQuart"}),Ge([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([ei("cpu.result"),ei("cpu.FLAGS")]),B.set(Pe.FLAGS,t.flags),B.set(Pe.result,t.result),await Promise.all([Ci("cpu.result"),Ci("cpu.FLAGS")]),await Ge([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{B.set(Qi,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await Ge([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{$l=t.instruction.name,cx=t.instruction.willUse.ri?"mem<-imd":"",ux=!!(t.instruction.willUse.ri&&$l==="MOV"),og=!!(t.instruction.willUse.ri&&($l==="ADD"||$l==="SUB"||$l==="INT")),ag=0,Jj(t.instruction.position.start),B.set(Qi,{phase:"fetching",metadata:t.instruction}),await Ge([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{B.set(Qi,e=>"metadata"in e?{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase}:e);return}case"cpu:decode":{await Ge([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await Ge([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await Ge([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{B.set(Qi,{phase:"stopped",error:t.error}),Rc(t.error);return}case"cpu:halt":case"cpu:int.0":{B.set(Qi,{phase:"stopped"}),Rc();return}case"cpu:int.3":{Pn();return}case"cpu:int.6":{B.set(Qi,{phase:"int6"});return}case"cpu:int.7":{B.set(Qi,{phase:"int7"});return}case"cpu:inta.off":{await nr("bus.inta");return}case"cpu:inta.on":{await Br("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await Br(`bus.${e}`,10);return}case"cpu:iom.on":{await Br("bus.iom",15);return}case"cpu:mar.set":{ag++,console.log("countersetMAR",ag),ag===4&&og&&(ux=!0,og=!1),await Ge([{key:"cpu.internalBus.address.path",from:rne(t.register,ux,og)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await ei("cpu.MAR",en.blue[500]),B.set(x5,B.get(Pe[t.register])),await Promise.all([Ci("cpu.MAR"),Ge({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const e=t.register.replace(/\.(l|h)$/,"");await tR("MBR",e,$l,cx),B.set(Pe[t.register],B.get(qh)),e==="IR"?await pv(`cpu.${e}`):(await ei(`cpu.${e}`),await Ci(`cpu.${e}`)),await nR();return}case"cpu:mbr.set":{const e=t.register.replace(/\.(l|h)$/,"");await ei("cpu.MBR"),await tR(e,"MBR",$l,cx),await ei("cpu.MBR"),B.set(qh,B.get(Pe[t.register])),await Promise.all([Ci("cpu.MBR"),nR()]);return}case"cpu:register.copy":{await ei(`cpu.${t.dest}`),B.set(Pe[t.dest],B.get(Pe[t.src])),await Ci(`cpu.${t.dest}`);return}case"cpu:register.update":{const[e]=jS(t.register),n=e==="ri"?"cpu.ri":`cpu.${e}`;e==="IP"?await Promise.all([pv(n),new Promise(r=>{window.dispatchEvent(new CustomEvent("ip-register-update")),r()})]):await pv(n),B.set(Pe[t.register],t.value);return}default:return t}}async function $re(t){switch(t.type){case"f10:press":await Br("bus.int0",2),await nr("bus.int0");return;default:return t.type}}const OE=ce(F.zero(8)),IE=ce(F.zero(8));function Fre(t){t.io.handshake&&(B.set(OE,F.fromUnsigned(t.io.handshake.DATA,8)),B.set(IE,F.fromUnsigned(t.io.handshake.STATE,8)))}async function Bre(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await vp(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await ei(`handshake.${t.register}`),t.register){case"DATA":{B.set(OE,t.value);break}case"STATE":{B.set(IE,t.value);break}default:return t.register}await Ci(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await nr("bus.int2");return}case"handshake:int.on":{await Br("bus.int2",10);return}default:return t}}async function zre(t){switch(t.type){case"keyboard:listen-key":{B.set(an,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{B.sub(an,()=>{const n=B.get(an);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const DE=ce(F.zero(8));function Ure(t){t.io.leds!==null&&B.set(DE,F.fromUnsigned(t.io.leds,8))}async function Hre(t){switch(t.type){case"leds:update":{await Br("bus.pio->leds",2),B.set(DE,t.state),await nr("bus.pio->leds");return}default:return t.type}}function Vre(t){return t==="memory-to-mbr"?"M 800 249 L 629 249":"M 629 249 L 800 249"}const rR=t=>{try{const e=Vre(t);return e?Ge([{key:"bus.data.path",from:e},{key:"bus.data.opacity",from:1},{key:"bus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}):Promise.resolve()}catch(e){return console.warn("Error en drawExternalDataPath:",e),Promise.resolve()}},iR=()=>Ge({key:"bus.data.opacity",to:0},{duration:1,easing:"easeInSine"});function Wre(){return"M 659 349 H 800"}const sR=()=>{try{const t=Wre();return Ge([{key:"bus.address.path",from:t},{key:"bus.address.opacity",from:1},{key:"bus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawExternalAddressPath:",t),Promise.resolve()}},oR=()=>Ge({key:"bus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),Gre=()=>{try{return Ge([{key:"bus.rd.path",from:"M 380 420 H 800"},{key:"bus.rd.opacity",from:1},{key:"bus.rd.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawRDControlPath:",t),Promise.resolve()}},Kre=()=>{try{return Ge([{key:"bus.wr.path",from:"M 380 440 H 800"},{key:"bus.wr.opacity",from:1},{key:"bus.wr.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawWRControlPath:",t),Promise.resolve()}},aR=()=>Ge({key:"bus.rd.opacity",to:0},{duration:1,easing:"easeInSine"}),lR=()=>Ge({key:"bus.wr.opacity",to:0},{duration:1,easing:"easeInSine"});async function Xre(t){switch(t.type){case"memory:read":{await sR(),Jte(),await Gre(),Zte();return}case"memory:read.ok":{B.set(Jh,Se.from(t.address)),await Ge({key:"memory.operating-cell.color",to:en.mantis[400]},{duration:1,easing:"easeOutQuart"}),await rR("memory-to-mbr"),B.set(qh,t.value),await pv("cpu.MBR"),await Promise.all([Ge({key:"memory.operating-cell.color",to:en.white},{duration:1,easing:"easeOutQuart"}),iR(),oR(),aR(),lR()]);return}case"memory:write":{await sR(),Qte(),await Kre(),ene();return}case"memory:write.ok":{B.set(Jh,Se.from(t.address)),await ei("cpu.MBR"),await rR("mbr-to-memory"),await Ge({key:"memory.operating-cell.color",to:en.mantis[400]},{duration:1,easing:"easeOutQuart"}),B.set(fy,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Promise.all([Ci("cpu.MBR"),Ge({key:"memory.operating-cell.color",to:en.white},{duration:1,easing:"easeOutQuart"}),iR(),oR(),aR(),lR()]);return}case"memory:read.error":case"memory:write.error":{Rc(t.error);return}case"memory:write.warning":{Qr({title:"Advertencia de Memoria",description:`${t.warning}`,variant:"info"});return}default:return t}}const LE=ce(F.fromUnsigned(255,8)),jE=ce(F.fromUnsigned(0,8)),$E=ce(F.fromUnsigned(0,8)),Oy=[ce(F.zero(8)),ce(F.zero(8)),ce(F.zero(8)),ce(F.zero(8)),ce(F.zero(8)),ce(F.zero(8)),ce(F.zero(8)),ce(F.zero(8))];function Yre(t){if(t.io.pic){B.set(LE,F.fromUnsigned(t.io.pic.IMR,8)),B.set(jE,F.fromUnsigned(t.io.pic.IRR,8)),B.set($E,F.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<Oy.length;e++)B.set(Oy[e],F.fromUnsigned(t.io.pic.lines[e],8))}}async function qre(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await vp(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await ei(`pic.${t.register}`),t.register){case"IMR":{B.set(LE,t.value);break}case"IRR":{B.set(jE,t.value);break}case"ISR":{B.set($E,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));B.set(Oy[e],t.value);break}default:return t}await Ci(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await nr("bus.intr");return}case"pic:intr.on":{await Br("bus.intr",10);return}case"pic:int.send":{await vp(t.number);return}default:return t}}const FE=ce(F.zero(8)),BE=ce(F.zero(8)),zE=ce(F.zero(8)),UE=ce(F.zero(8));function Jre(t){t.io.pio&&(B.set(FE,F.fromUnsigned(t.io.pio.PA,8)),B.set(BE,F.fromUnsigned(t.io.pio.PB,8)),B.set(zE,F.fromUnsigned(t.io.pio.CA,8)),B.set(UE,F.fromUnsigned(t.io.pio.CB,8)))}async function Zre(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await vp(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await ei(`pio.${t.register}`),t.register){case"PA":{B.set(FE,t.value);break}case"PB":{B.set(BE,t.value);break}case"CA":{B.set(zE,t.value);break}case"CB":{B.set(UE,t.value);break}default:return t.register}await Ci(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const Iy=ce([]),Dy=ce("");function Qre(t){t.io.printer&&(B.set(Iy,t.io.printer.buffer.map(e=>F.fromUnsigned(e,8))),B.set(Dy,t.io.printer.paper))}async function eie(t){switch(t.type){case"printer:buffer.add":{B.set(Iy,e=>[...e,t.char]);return}case"printer:buffer.pop":{B.set(Iy,e=>e.slice(1));return}case"printer:busy.off":{await nr("bus.printer.busy");return}case"printer:busy.on":{await Br("bus.printer.busy",15);return}case"printer:data.read":{await Br("bus.printer.data",15),await nr("bus.printer.data");return}case"printer:paper.print":{B.set(Dy,e=>e+t.char);return}case"printer:paper.replace":{B.set(Dy,"");return}case"printer:strobe.off":{await nr("bus.printer.strobe");return}case"printer:strobe.on":{await Br("bus.printer.strobe",15);return}default:return t}}const HE=ce("");function tie(t){"screen"in t.io&&t.io.screen!==null&&B.set(HE,t.io.screen)}async function nie(t){switch(t.type){case"screen:send-char":{B.set(HE,t.output);return}default:return t.type}}const iw=ce(F.zero(8));function rie(t){t.io.switches!==null&&B.set(iw,F.fromUnsigned(t.io.switches,8))}async function iie(t){switch(t.type){case"switches:toggle":{B.set(iw,e=>e.withBit(t.index,!e.bit(t.index))),await Br("bus.switches->pio",2),await nr("bus.switches->pio");return}default:return t}}const Ly=ce(F.zero(8)),VE=ce(F.zero(8));function sie(t){t.io.timer&&(B.set(Ly,F.fromUnsigned(t.io.timer.CONT,8)),B.set(VE,F.fromUnsigned(t.io.timer.COMP,8)))}async function oie(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await vp(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await ei(`timer.${t.register}`),t.register){case"CONT":{B.set(Ly,t.value);break}case"COMP":{B.set(VE,t.value);break}default:return t.register}await Ci(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await nr("bus.int1");return}case"timer:int.on":{await Br("bus.int1",10);return}case"timer:tick":{B.set(Ly,t.cont),await Br("bus.int1",2),await nr("bus.int1");return}default:return t}}const Lk=new Set;async function uF(t){lie(t);const[e]=t.type.split(":",2);switch(Lk.add(t.type),e){case"bus":{await tne(t);break}case"clock":{await nne(t);break}case"cpu":{await jre(t);break}case"f10":{await $re(t);break}case"handshake":{await Bre(t);break}case"keyboard":{await zre(t);break}case"leds":{await Hre(t);break}case"memory":{await Xre(t);break}case"pic":{await qre(t);break}case"pio":{await Zre(t);break}case"printer":{await eie(t);break}case"screen":{await nie(t);break}case"switches":{await iie(t);break}case"timer":{await oie(t);break}default:return e}Lk.delete(t.type)}function cR(...t){for(const e of t)if(Lk.has(e))return!0;return!1}const aie={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function lie(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${aie[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const r in t)if(r!=="type"&&Object.prototype.hasOwnProperty.call(t,r)){const i=t[r];i instanceof F?console.log(`${r}: %c${i.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):i instanceof Se?console.log(`${r}: %c${i.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):i instanceof di?console.log(`${r}: %c${i.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof i=="number"?console.log(`${r}: %c${i.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof i=="string"?console.log(`${r}: %c"${i}" %c(string)`,"color: #f97316;","color: #737373;"):typeof i=="boolean"?console.log(`${r}: %c${i}`,"color: #06b6d4;"):i===null?console.log(`${r}: %cnull`,"color: #b91c1c;"):console.log(`${r}:`,i)}console.groupEnd()}const ln=new Nq,an=ce({type:"stopped"});function cie(t){const e=t.translate(Tn().language);Qr({title:e,variant:"error"})}function Rc(t){if(t&&(cie(t),t.code==="no-instruction")){B.set(an,{type:"paused"});return}Jj(null),PQ(!1),B.set(an,{type:"stopped",error:t}),B.set(Qi,{phase:"stopped",error:t}),I$()}function Pn(){B.set(an,{type:"paused"}),Kte()}function uie(){Qr({title:W0(Tn().language,"messages.assemble-error"),variant:"error"})}function Zc(){Qr({title:W0(Tn().language,"messages.invalid-action"),variant:"error"})}function uR(t,e=!1){Oq(t,e),Lq(t,e),Fre(t),Yre(t),Jre(t),sie(t),Ure(t),Qre(t),tie(t),rie(t),mn=0,fc=0,B.set(Cc,mn),B.set(F0,fc),B.set(ft,""),e&&B.set(dy,[])}let pe=null,Fl=0,Je=0,Bl="",ao=!0,dx=!1,Cn=!1,mn=0,fc=0,zl="",dR="",fR="",mf=!1,lg=!1,cg="",hR="";async function Ql(t){try{for(;;){const e=B.get(an);if(B.get(xy)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),B.set(xy,!1),Rc();break}if(e.type==="stopped"){Fl=0,Je=0,Bl="";break}if(e.type==="paused"){await new Promise(s=>{const o=B.sub(an,()=>{o(),s()})});continue}const r=t.next();if(r.done)break;if(r.value&&typeof r.value<"u")await uF(r.value);else continue;if(r.value.type==="cpu:cycle.start"&&(pe=r.value.instruction.name,dx=!!r.value.instruction.willUse.id,Cn=!!r.value.instruction.willUse.ri,B.set(Rq,Cn),mf=!1,lg=!1,cg=""),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(r.value.type==="cpu:cycle.end"||r.value.type==="cpu:halt"){Fl=0,Je=0,ao=!0,Bl="",fc++,console.log(`Instrucciones: ${fc}`),B.set(F0,fc),r.value.type==="cpu:halt"?(mn++,B.set(Cc,mn),B.set(ft,"Ejecucin: Detenido")):(e.until==="cycle-change"||e.until==="end-of-instruction")&&Pn();continue}else r.value.type==="cpu:int.6"?B.set(ft,"Interrupcin: Rutina leer caracter del teclado"):r.value.type==="cpu:int.7"&&(B.set(ft,"Interrupcin: Rutina mostrar por pantalla"),e.until==="cycle-change"&&Pn());if(Fl<3)r.value.type==="cpu:mar.set"?(r.value.register==="SP"?(Fl=3,Je=3,B.set(ft,"Ejecucin: MAR  SP")):(B.set(ft,"Captacin: MAR  IP"),Je++),e.until==="cycle-change"&&Pn(),Fl++,mn++):r.value.type==="cpu:register.update"?(B.set(ft,"Captacin: MBR  read(Memoria[MAR]); IP  IP + 1"),e.until==="cycle-change"&&Pn(),Je++,Fl++,mn++):r.value.type==="cpu:mbr.get"&&(B.set(ft,"Captacin: IR  MBR"),e.until==="cycle-change"&&Pn(),Fl++,mn++);else if(r.value.type==="cpu:rd.on"&&Je>1?Bl="Ejecucin: MBR  read(Memoria[MAR])":r.value.type==="cpu:wr.on"?Bl="Ejecucin: write(Memoria[MAR])  MBR":r.value.type==="pio:write.ok"&&(B.set(ft,"Ejecucin: write(PIO[MAR])  MBR"),Je++,mn++),r.value.type==="cpu:mar.set"){const s=r.value.register,o=s==="ri"?"MBR":s;let a=!1,l=!1;Cn&&Je===5&&(pe==="ADD"||pe==="SUB")&&(a=!0),Cn&&Je===9&&(a=!0),Cn&&Je===2&&(pe==="ADD"||pe==="SUB")&&(l=!0),console.log("executeStageCounter:",Je),console.log("mbridirmar:",mf),console.log("resultmbrimar:",lg),console.log("displayMessageresultmbr:",cg),console.log("shouldDisplayMessage:",ao),(ao||s==="SP")&&(lg?B.set(ft,cg):a?B.set(ft,`Ejecucin: MAR  ${s}`):l?B.set(ft,"Ejecucin: ri  MBR; MAR  MBR"):Je===2&&Cn&&pe==="MOV"?B.set(ft,"Ejecucin: ri  MBR; MAR  IP"):Je===4&&Cn&&pe==="MOV"?B.set(ft,`Ejecucin: MAR  ${s}`):mf?B.set(ft,"Ejecucin: id  MBR; MAR  IP"):Je===2&&Cn&&pe==="INT"?B.set(ft,"Ejecucin: ri  MBR; MAR  SP"):B.set(ft,`Ejecucin: MAR  ${o}`)),e.until==="cycle-change"&&Pn(),Je++,mn++}else if(r.value.type==="cpu:register.update"){const s=r.value.register;let o="";ao=!0;let a=!0;s==="SP"?(Cn&&Je===4&&pe==="INT"&&(a=!1,ao=!1),pe==="PUSH"&&(o="Ejecucin: SP = SP - 1"),(pe==="RET"||pe==="IRET")&&(o="Ejecucin: SP = SP + 1"),Je===3&&pe==="POP"&&(o=hR+"; SP = SP + 1")):s==="FLAGS"?(o="Ejecucin: IF = 0",Cn&&Je===5&&pe==="INT"&&(o="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1; IF = 0")):s==="DL"&&pe==="INT"?o="Interrupcin: AL  ASCII":s==="right.l"&&pe==="INT"?o="Interrupcin: SUB AL, 1":s==="right"&&pe==="INT"?o="Interrupcin: ADD BL, 1":s==="ri.l"&&pe==="INT"?(o="Interrupcin: MAR  (video)",ao=!1):Cn&&Je===3&&pe==="MOV"?(o="Ejecucin: MBR  read(Memoria[MAR]); IP  IP + 1; MAR  ri",a=!1,ao=!1):Je===4&&pe==="CALL"?a=!1:o=s==="IP"?"Ejecucin: MBR  read(Memoria[MAR]); IP  IP + 1":`Ejecucin: MBR  ${s}`,Cn&&Je===8&&pe==="INT"&&(o="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1"),Je===2&&pe==="CALL"&&(o="Ejecucin: ri  MBR; SP  SP - 1"),Je===4&&pe==="CALL"&&(o="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1"),console.log("displayMessage:",o),console.log("currentInstructionName:",pe),console.log("currentInstructionModeri:",Cn),console.log("executeStageCounter:",Je),console.log("pause:",a),Je++,pe!=="DEC"&&pe!=="INC"&&pe!=="NOT"&&pe!=="NEG"&&!(pe==="INT"&&Je===5)&&(B.set(ft,o),mn++),o!=="Interrupcin: MAR  (video)"&&e.until==="cycle-change"&&pe!=="DEC"&&pe!=="INC"&&pe!=="NOT"&&pe!=="NEG"&&a&&Pn()}else if(r.value.type==="cpu:alu.execute")pe==="CMP"&&(B.set(ft,`Ejecucin: ${dR} ${pe} ${zl} ; write(FLAGS)`),mn++,e.until==="cycle-change"&&Pn());else if(r.value.type==="cpu:mbr.get"){const s=r.value.register==="id.l"?"id":r.value.register==="IP.l"?"IP":r.value.register==="FLAGS.l"?"FLAGS":r.value.register;(String(s)==="right.l"||String(s)==="left.l")&&(zl="MBR"),(Cn&&Je===3&&(pe==="ADD"||pe==="SUB"||pe==="CMP")||Je===3&&pe==="POP")&&(mf=!0),pe==="POP"&&Je===3&&(hR=`Ejecucin: ${s}  MBR`),mf||String(s)!=="ri.l"&&String(s)!=="right.l"&&String(s)!=="left.l"&&(B.set(ft,`Ejecucin: ${s}  MBR`),mn++,e.until==="cycle-change"&&Pn())}else if(r.value.type==="cpu:register.copy"){const s=r.value.src.replace(/\.l$/,""),o=r.value.dest.replace(/\.l$/,"");let a="";pe==="DEC"||pe==="INC"||pe==="NOT"||pe==="NEG"?a=s==="result"?`${pe} ${zl}`:s:(a=s==="result"?`${o} ${pe} ${zl}`:s,fR=`${s} ${pe} ${zl}; write(FLAGS)`),pe==="CMP"&&String(o)==="right"&&(zl=s),pe==="CMP"&&String(o)==="left"&&(dR=s);let l=`Ejecucin: ${o}  ${a}`;(pe==="ADD"||pe==="SUB"||pe==="CMP")&&(l+="; write(FLAGS)"),s==="ri"&&o==="IP"?(l="Ejecucin: IP  MBR",pe==="CALL"&&(l="Ejecucin: IP  ri"),B.set(ft,l),e.until==="cycle-change"&&Pn()):o==="left"&&pe==="INT"?l="ADD BL, 1":s==="result"&&pe==="INT"?e.until==="cycle-change"&&Pn():s==="IP"&&o==="id"?(l="Ejecucin: id  IP",B.set(ft,l),e.until==="cycle-change"&&Pn()):s==="id"&&o==="ri"?(l="Ejecucin: MAR  id",ao=!1,B.set(ft,l)):s==="MBR"&&o==="ri"?(l="Ejecucin: MAR  MBR",B.set(ft,l)):s==="id"&&o==="IP"?(l="Ejecucin: IP  MBR",B.set(ft,l),e.until==="cycle-change"&&Pn()):s==="BL"&&o==="ri"||s==="BX"&&o==="ri"?(l="Ejecucin: MAR  BL",B.set(ft,l),ao=!1,Je++):String(s)==="right.l"&&(zl=s),(o!=="result"&&o!=="left"&&o!=="right"&&s!=="result"&&s!=="left"&&s!=="right"||s==="result"&&o!=="MBR")&&(B.set(ft,l),mn++)}else if(r.value.type==="bus:reset"&&Je>1&&(pe==="MOV"||pe==="ADD"||pe==="SUB"||pe==="CMP"||pe==="CALL"||pe==="INT"||pe==="PUSH"||pe==="POP"||pe==="IN"||pe==="RET")){pe==="RET"&&(Bl="Ejecucin: MBR  read(Memoria[MAR])"),pe==="IN"&&(Bl="Ejecucin: MBR  read(PIO[MAR])");let s=!1;(Cn&&(Je===4||Je===8)&&pe==="INT"||Cn&&Je===3&&pe==="MOV"||dx&&Je===4&&(pe==="CALL"||pe==="ADD"||pe==="SUB"||pe==="CMP"))&&(s=!0),console.log("executeStageCounter:",Je),s||(B.set(ft,Bl),mn++,e.until==="cycle-change"&&Pn())}else if(r.value.type==="cpu:mbr.set"){const s=r.value.register==="id.l"?"id":r.value.register==="FLAGS.l"?"FLAGS":r.value.register==="IP.l"?"IP":r.value.register==="result.l"?fR:r.value.register;Cn&&Je===5&&(pe==="ADD"||pe==="SUB")?(lg=!0,cg=`Ejecucin: MBR  ${s} ; MAR  ri`):(B.set(ft,`Ejecucin: MBR  ${s}`),e.until==="cycle-change"&&Pn(),Je++,mn++)}}else B.set(ft,"");console.log(`Ciclos ejecutados: ${mn}`),B.set(Cc,mn);const i=new CustomEvent("instructionChange",{detail:{instruction:pe,modeid:dx,moderi:Cn}});window.dispatchEvent(i),r.value.type==="cpu:cycle.update"||r.value.type==="cpu:cycle.interrupt"?e.until:r.value.type==="cpu:cycle.end"&&(e.until==="cycle-change"||e.until==="end-of-instruction")&&Pn()}t.return()}catch(e){const n=Gt.from(e);Rc(n)}}async function die(...t){const e=t[0],n=B.get(an);switch(e){case"cpu.run":{if(n.type==="running")return Zc();const r=t[1];if(n.type==="stopped"){if(!window.codemirror)return;mn=0,fc=0,B.set(Cc,mn),B.set(F0,fc),B.set(dy,[]);const i=window.codemirror.state.doc.toString(),s=p5(i);if(!s.success)return uie();const o=s.instructions.map(b=>b.instruction),a=o.some(b=>["CALL","RET","INT","IRET","POP","PUSH"].includes(b));B.set(YC,a);const l=o.includes("INT");B.set($S,l);const c=s.instructions.some(b=>b.instruction==="INT"?b.operands.some(k=>k.type==="number-expression"&&typeof k.value.value=="number"?k.value.value===6||k.value.value===7:!1):!1),u=s.instructions.some(b=>b.instruction==="IN"||b.instruction==="OUT"?b.operands.some(k=>k.type==="number-expression"&&typeof k.value.value=="number"?k.value.value===48||k.value.value===50:!1):!1),d=s.instructions.some(b=>b.instruction==="IN"||b.instruction==="OUT"?b.operands.some(k=>{if(k.type==="number-expression"){if(typeof k.value.value=="number")return k.value.value>=32&&k.value.value<=43;try{if(k.value&&typeof k.value.resolve=="function"){const _=k.value.resolve();if(typeof _=="number")return _>=32&&_<=43}}catch(_){console.warn("No se pudo resolver operando PIC:",_)}}return!1}):!1),f=s.instructions.some(b=>b.instruction==="IN"||b.instruction==="OUT"?b.operands.some(k=>{if(k.type==="number-expression"){if(typeof k.value.value=="number")return k.value.value===64||k.value.value===65;try{if(k.value&&typeof k.value.resolve=="function"){const _=k.value.resolve();if(typeof _=="number")return _===64||_===65}}catch(_){console.warn("No se pudo resolver operando Handshake:",_)}}return!1}):!1),h=s.instructions.some(b=>b.instruction==="IN"||b.instruction==="OUT"?b.operands.some(k=>{if(k.type==="number-expression"){if(typeof k.value.value=="number")return k.value.value===16||k.value.value===17;try{if(k.value&&typeof k.value.resolve=="function"){const _=k.value.resolve();if(typeof _=="number")return _===16||_===17}}catch(_){console.warn("No se pudo resolver operando Timer:",_)}}return!1}):!1),m=Tn();B.set(Hi,b=>({...b,devices:{...b.devices,keyboardAndScreen:c,pio:u?"switches-and-leds":f?"printer":b.devices.pio,handshake:f?"printer":b.devices.handshake,pic:d||b.devices.pic,"switches-and-leds":u}})),B.set(S5,c);const g=l||d||f||h||c;B.set($S,g),console.log("Detectado - PIC:",d,"Handshake:",f,"Timer:",h,"INT:",l),console.log("Habilitando vector de interrupciones:",g),ln.loadProgram({program:s,data:m.dataOnLoad,devices:{keyboardAndScreen:Tn().devices.keyboardAndScreen??!1,pic:Tn().devices.pic??!1,pio:Tn().devices.pio??null,handshake:Tn().devices.handshake??null},hasORG:s.hasORG}),console.log("result:",s);const y=s.instructions.filter(b=>b.type==="instruction").flatMap(b=>{const k=b.operands.map(C=>{if(C.type==="register")return C.value;if(C.type==="number-expression"){const P=C.value;if(P.isNumberLiteral())return P.value.toString(16)+"h";if(P.isLabel())return P.value}else{if(C.type==="indirect-address")return"[BL]";if(C.type==="direct-address"){const P=C.value;if(P.isNumberLiteral())return P.value.toString(16)+"h"}}return""}).join(", "),_=`${b.instruction} ${k}`.trim(),E=[{address:b.start.value,name:_,length:b.length.toString().trim()}];if(b.operands.some(C=>C.type==="number-expression"||C.type==="direct-address")){const C=b.start.value+1,P=b.operands.filter((M,O)=>b.length===3?O===0&&M.type==="number-expression":M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const O=M.value;if(O.isNumberLiteral())return O.value.toString(16)+"h";if(O.isLabel())return O.value}else if(M.type==="direct-address"){const O=M.value;if(O.isNumberLiteral())return O.value.toString(16)+"h"}return""}).join(", ");E.push({address:C,name:P,length:""})}if(b.length===3){const C=b.start.value+2,P=b.operands.filter(M=>M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const O=M.value;if(O.isNumberLiteral())return O.value.toString(16)+"h"}return""}).join(" ");E.push({address:C,name:P,length:""})}return E}),v=s.data.filter(b=>b.type==="data-directive").flatMap(b=>{const k=b.start.value;return b.getValues().map(E=>typeof E=="object"&&E!==null&&"toNumber"in E&&typeof E.toNumber=="function"?E.toNumber():typeof E=="number"?E:0).map((E,C)=>({address:k+C,label:C===0&&b.label||null,value:E}))});console.log("Direcciones de las instrucciones:",y),console.log("Direcciones de los datos:",v),B.set(_5,y),B.set(C5,v.map(b=>({...b,length:""}))),uR(ln.getComputerState());const w=["Start CPU",{until:r,devices:Tn().devices,language:Tn().language,animations:Tn().animations?"yes":"no"}];s$.capture(...w),B.set(an,{type:"running",until:r,waitingForInput:!1}),Ql(ln.startCPU()),fie(),hie()}else B.set(an,{type:"running",until:r,waitingForInput:!1}),Xte();return}case"cpu.stop":{const r=t[1];r?(Rc(),uR(ln.getComputerState(),r)):Pn();return}case"f10.press":{if(!ln.devices.f10.connected()||n.type!=="running")return Zc();if(cR("f10:press"))return;Ql(ln.devices.f10.press());return}case"switch.toggle":{if(!ln.devices.switches.connected())return Zc();if(cR("switches:toggle"))return;const r=t[1];n.type==="running"?Ql(ln.devices.switches.toggle(r)):B.set(iw,i=>i.withBit(r,!i.bit(r)));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return Zc();ln.devices.keyboard.readChar(F.fromChar(t[1])),B.set(an,{...n,waitingForInput:!1});return}case"screen.clean":{if(!ln.devices.screen.connected())return Zc();Ql(ln.devices.screen.clear());return}case"printer.clean":{if(!ln.devices.printer.connected())return Zc();Ql(ln.devices.printer.clear());return}default:return e}}async function fie(){if(ln.devices.clock.connected())for(;B.get(an).type!=="stopped";){const t=Tn().clockSpeed;await Ge({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),Ql(ln.devices.clock.tick())}}async function hie(){if(ln.devices.printer.connected()){for(;B.get(an).type!=="stopped";){const t=Tn().printerSpeed;await Ge([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Ge({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),await Ql(ln.devices.printer.print())}if(B.get(an).type==="stopped"&&ln.devices.printer.hasPending())for(;B.get(an).type!=="stopped"||ln.devices.printer.hasPending();){const t=Tn().printerSpeed;await Ge([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Ge({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"});const e=ln.devices.printer.print();let n=e.next();for(;!n.done;)n.value&&typeof n.value<"u"&&await uF(n.value),n=e.next()}}}function kn(){const t=nt(an),e=r$(),n=x.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:die,devices:n}}function pie({className:t}){const e=Tt(),{status:n,dispatch:r}=kn(),i=x.useCallback(()=>{n.type!=="running"&&r("cpu.run","cycle-change")},[n.type,r]);Ao("F7",d=>{d.preventDefault(),i()},void 0,[i]);const s=x.useCallback(()=>{n.type!=="running"&&r("cpu.run","end-of-instruction")},[n.type,r]);Ao("F8",d=>{d.preventDefault(),s()},void 0,[s]);const o=x.useCallback(()=>{n.type!=="running"&&r("cpu.run","infinity")},[n.type,r]);Ao("F4",d=>{d.preventDefault(),o()},void 0,[o]);const a=x.useCallback(()=>{n.type==="running"&&r("cpu.stop",!1)},[n.type,r]),l=x.useCallback(()=>{n.type!=="running"&&r("cpu.stop",!0)},[n.type,r]);Ao("F9",d=>{d.preventDefault(),l()},void 0,[l]),Ao(" ",d=>{const f=d.target;f.tagName==="INPUT"||f.tagName==="TEXTAREA"||f.contentEditable==="true"||(d.preventDefault(),n.type==="running"&&a())},{event:"keydown"},[n.type,a]);const[c,u]=x.useState(!1);return x.useEffect(()=>{const d=()=>{u(window.innerWidth<=600||window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches)};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),p.jsxs("div",{"data-testid":"controls-container",className:ve("flex items-center justify-center gap-6 rounded-xl border border-stone-700 bg-stone-900/80 px-4 py-1 shadow-lg",t),children:[p.jsxs("button",{"data-testid":"cycle-button",disabled:n.type==="running",onClick:i,title:e("control.action.run.cycle-change"),className:"group relative flex flex-col items-center rounded-lg px-2 py-1 transition hover:bg-mantis-600/20 focus-visible:ring-2 focus-visible:ring-mantis-400 disabled:opacity-50",children:[p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsx(Vt,{icon:oY,size:"lg",className:"text-mantis-400 transition group-hover:scale-110"}),!c&&p.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F7"})]}),!c&&p.jsx("span",{className:"mt-1 text-xs",children:e("control.action.run.cycle-change")})]}),p.jsxs("button",{"data-testid":"new-button",disabled:n.type==="running",onClick:s,title:e("control.action.run.end-of-instruction"),className:"group relative flex flex-col items-center rounded-lg px-2 py-1 transition hover:bg-blue-600/20 focus-visible:ring-2 focus-visible:ring-blue-400 disabled:opacity-50",children:[p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsx(Vt,{icon:YX,size:"lg",className:"text-blue-400 transition group-hover:scale-110"}),!c&&p.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F8"})]}),!c&&p.jsx("span",{className:"mt-1 text-xs",children:e("control.action.run.end-of-instruction")})]}),p.jsxs("button",{"data-testid":"open-button",disabled:n.type==="running",onClick:o,title:e("control.action.run.infinity"),className:"group relative flex flex-col items-center rounded-lg px-2 py-1 transition hover:bg-orange-600/20 focus-visible:ring-2 focus-visible:ring-orange-400 disabled:opacity-50",children:[p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsx(Vt,{icon:uY,size:"lg",className:"text-orange-400 transition group-hover:scale-110"}),!c&&p.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F4"})]}),!c&&p.jsx("span",{className:"mt-1 text-xs",children:e("control.action.run.infinity")})]}),n.type==="running"?p.jsxs("button",{"data-testid":"save-button",onClick:a,title:e("control.action.pause"),className:"group relative flex flex-col items-center rounded-lg px-2 py-1 transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400",children:[p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsx(Vt,{icon:QX,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),!c&&p.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),!c&&p.jsx("span",{className:"mt-1 text-xs",children:e("control.action.pause")})]}):p.jsxs("button",{"data-testid":"assemble-button",onClick:l,disabled:n.type==="stopped",title:e("control.action.reset"),className:"group relative flex flex-col items-center rounded-lg px-2 py-1 transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400 disabled:opacity-50",children:[p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsx(Vt,{icon:rY,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),!c&&p.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),!c&&p.jsx("span",{className:"mt-1 text-xs",children:e("control.action.reset")})]})]})}const mie=()=>{const[t,e]=x.useState([]),[n,r]=x.useState(!1);x.useEffect(()=>{const c=localStorage.getItem("vonsim8-notifications");if(c)try{const d=JSON.parse(c);if(Array.isArray(d)){const f=d.filter(h=>h&&typeof h=="object"&&"id"in h&&"type"in h&&"title"in h&&"message"in h&&"timestamp"in h&&"read"in h).map(h=>({id:String(h.id),type:h.type,title:String(h.title),message:String(h.message),timestamp:new Date(h.timestamp),read:!!h.read}));e(f)}}catch{e([])}if(!localStorage.getItem("vonsim8-welcome-notification")){const d={id:"welcome",type:"info",title:"Bienvenido a VonSim8!",message:"Gracias por usar nuestro simulador. Aqu encontrars notificaciones importantes sobre el funcionamiento de la aplicacin.",timestamp:new Date,read:!1};e(f=>[d,...f]),localStorage.setItem("vonsim8-welcome-notification","true")}},[]),x.useEffect(()=>{localStorage.setItem("vonsim8-notifications",JSON.stringify(t))},[t]);const i=x.useCallback(c=>{const u={...c,id:Date.now().toString(),timestamp:new Date,read:!1};e(d=>[u,...d])},[]),s=x.useCallback(c=>{e(u=>u.map(d=>d.id===c?{...d,read:!0}:d))},[]),o=x.useCallback(()=>{e(c=>c.map(u=>({...u,read:!0})))},[]),a=x.useCallback(c=>{e(u=>u.filter(d=>d.id!==c))},[]),l=x.useCallback(()=>{e([])},[]);return{notifications:t,isOpen:n,setIsOpen:r,addNotification:i,markAsRead:s,markAllAsRead:o,deleteNotification:a,clearAll:l}},gie=t=>x.useMemo(()=>{const e=t.length,n=t.filter(i=>!i.read).length,r=t.reduce((i,s)=>(i[s.type]=(i[s.type]||0)+1,i),{});return{total:e,unread:n,byType:r}},[t]),dF=x.memo(({type:t})=>{const e=x.useMemo(()=>{switch(t){case"info":return{icon:QN,className:"text-blue-400"};case"success":return{icon:dY,className:"text-green-400"};case"warning":return{icon:DS,className:"text-yellow-400"};case"error":return{icon:DS,className:"text-red-400"};default:return{icon:QN,className:"text-blue-400"}}},[t]);return p.jsx(Vt,{icon:e.icon,className:ve("size-4",e.className)})});dF.displayName="NotificationIcon";const jk=x.memo(({notification:t,onMarkAsRead:e,onDelete:n})=>{const r=x.useCallback(i=>{const o=new Date().getTime()-i.getTime(),a=Math.floor(o/6e4),l=Math.floor(o/36e5),c=Math.floor(o/864e5);return c>0?`${c}d`:l>0?`${l}h`:a>0?`${a}m`:"Ahora"},[]);return p.jsx("div",{className:ve("rounded-lg border p-3 transition-colors",t.read?"border-stone-600 bg-stone-800":"border-mantis-500 bg-stone-800/80"),children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(dF,{type:t.type}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsx("h4",{className:"font-medium text-white",children:t.title}),p.jsx("button",{onClick:()=>n(t.id),className:"ml-2 rounded p-1 text-stone-400 hover:text-white transition-colors",children:p.jsx(Vt,{icon:UC,size:"sm"})})]}),p.jsx("p",{className:"mt-1 text-sm text-stone-300",children:t.message}),p.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[p.jsx("span",{className:"text-xs text-stone-500",children:r(t.timestamp)}),!t.read&&p.jsx("button",{onClick:()=>e(t.id),className:"text-xs text-mantis-400 hover:text-mantis-300 transition-colors",children:"Marcar como leda"})]})]})]})})});jk.displayName="NotificationItem";const fF=x.memo(()=>{const{notifications:t,isOpen:e,setIsOpen:n,markAsRead:r,markAllAsRead:i,deleteNotification:s,clearAll:o}=mie(),{total:a,unread:l}=gie(t),c=x.useCallback(()=>{n(f=>!f)},[n]),u=x.useMemo(()=>t.filter(f=>!f.read),[t]),d=x.useMemo(()=>t.filter(f=>f.read),[t]);return e?p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[p.jsx(Vt,{icon:eT,className:"size-4"}),l>0&&p.jsx("span",{className:"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]}),p.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[p.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[p.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Notificaciones (",a,")"]}),p.jsxs("div",{className:"flex gap-2",children:[l>0&&p.jsx(Ds,{variant:"ghost",size:"sm",onClick:i,className:"text-xs text-stone-400 hover:text-white",children:"Marcar todas"}),a>0&&p.jsx(Ds,{variant:"ghost",size:"sm",onClick:o,className:"text-xs text-red-400 hover:text-red-300",children:"Limpiar"})]})]}),p.jsx("div",{className:"max-h-96 space-y-3 overflow-y-auto",children:t.length===0?p.jsx("p",{className:"text-center text-sm text-stone-500",children:"No hay notificaciones"}):p.jsxs(p.Fragment,{children:[u.length>0&&p.jsx("div",{className:"space-y-2",children:u.map(f=>p.jsx(jk,{notification:f,onMarkAsRead:r,onDelete:s},f.id))}),d.length>0&&u.length>0&&p.jsx("hr",{className:"border-stone-600"}),d.length>0&&p.jsx("div",{className:"space-y-2",children:d.map(f=>p.jsx(jk,{notification:f,onMarkAsRead:r,onDelete:s},f.id))})]})})]})]}):p.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[p.jsx(Vt,{icon:eT,className:"size-4"}),l>0&&p.jsx("span",{className:"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]})});fF.displayName="NotificationCenter";function jy(t,[e,n]){return Math.min(n,Math.max(e,t))}function vie(t,e=globalThis==null?void 0:globalThis.document){const n=zr(t);x.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var yie="DismissableLayer",$k="dismissableLayer.update",wie="dismissableLayer.pointerDownOutside",bie="dismissableLayer.focusOutside",pR,hF=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Kp=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=x.useContext(hF),[u,d]=x.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=x.useState({}),m=it(e,C=>d(C)),g=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(y),w=u?g.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,k=w>=v,_=Sie(C=>{const P=C.target,M=[...c.branches].some(O=>O.contains(P));!k||M||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),E=kie(C=>{const P=C.target;[...c.branches].some(O=>O.contains(P))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return vie(C=>{w===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),x.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(pR=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),mR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=pR)}},[u,f,n,c]),x.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),mR())},[u,c]),x.useEffect(()=>{const C=()=>h({});return document.addEventListener($k,C),()=>document.removeEventListener($k,C)},[]),p.jsx(ze.div,{...l,ref:m,style:{pointerEvents:b?k?"auto":"none":void 0,...t.style},onFocusCapture:ge(t.onFocusCapture,E.onFocusCapture),onBlurCapture:ge(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ge(t.onPointerDownCapture,_.onPointerDownCapture)})});Kp.displayName=yie;var xie="DismissableLayerBranch",pF=x.forwardRef((t,e)=>{const n=x.useContext(hF),r=x.useRef(null),i=it(e,r);return x.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(ze.div,{...t,ref:i})});pF.displayName=xie;function Sie(t,e=globalThis==null?void 0:globalThis.document){const n=zr(t),r=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){mF(wie,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function kie(t,e=globalThis==null?void 0:globalThis.document){const n=zr(t),r=x.useRef(!1);return x.useEffect(()=>{const i=s=>{s.target&&!r.current&&mF(bie,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function mR(){const t=new CustomEvent($k);document.dispatchEvent(t)}function mF(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?EC(i,s):i.dispatchEvent(s)}var _ie=Kp,Cie=pF,fx=0;function WE(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??gR()),document.body.insertAdjacentElement("beforeend",t[1]??gR()),fx++,()=>{fx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),fx--}},[])}function gR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var hx="focusScope.autoFocusOnMount",px="focusScope.autoFocusOnUnmount",vR={bubbles:!1,cancelable:!0},Eie="FocusScope",sw=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=x.useState(null),c=zr(i),u=zr(s),d=x.useRef(null),f=it(e,g=>l(g)),h=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let g=function(b){if(h.paused||!a)return;const k=b.target;a.contains(k)?d.current=k:la(d.current,{select:!0})},y=function(b){if(h.paused||!a)return;const k=b.relatedTarget;k!==null&&(a.contains(k)||la(d.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const _ of b)_.removedNodes.length>0&&la(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const w=new MutationObserver(v);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),w.disconnect()}}},[r,a,h.paused]),x.useEffect(()=>{if(a){wR.add(h);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent(hx,vR);a.addEventListener(hx,c),a.dispatchEvent(v),v.defaultPrevented||(Aie(Rie(gF(a)),{select:!0}),document.activeElement===g&&la(a))}return()=>{a.removeEventListener(hx,c),setTimeout(()=>{const v=new CustomEvent(px,vR);a.addEventListener(px,u),a.dispatchEvent(v),v.defaultPrevented||la(g??document.body,{select:!0}),a.removeEventListener(px,u),wR.remove(h)},0)}}},[a,c,u,h]);const m=x.useCallback(g=>{if(!n&&!r||h.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(y&&v){const w=g.currentTarget,[b,k]=Pie(w);b&&k?!g.shiftKey&&v===k?(g.preventDefault(),n&&la(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),n&&la(k,{select:!0})):v===w&&g.preventDefault()}},[n,r,h.paused]);return p.jsx(ze.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});sw.displayName=Eie;function Aie(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(la(r,{select:e}),document.activeElement!==n)return}function Pie(t){const e=gF(t),n=yR(e,t),r=yR(e.reverse(),t);return[n,r]}function gF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function yR(t,e){for(const n of t)if(!Nie(n,{upTo:e}))return n}function Nie(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Tie(t){return t instanceof HTMLInputElement&&"select"in t}function la(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Tie(t)&&e&&t.select()}}var wR=Mie();function Mie(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=bR(t,e),t.unshift(e)},remove(e){var n;t=bR(t,e),(n=t[0])==null||n.resume()}}}function bR(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Rie(t){return t.filter(e=>e.tagName!=="A")}const Oie=["top","right","bottom","left"],hl=Math.min,ti=Math.max,$y=Math.round,ug=Math.floor,Zs=t=>({x:t,y:t}),Iie={left:"right",right:"left",bottom:"top",top:"bottom"},Die={start:"end",end:"start"};function Fk(t,e,n){return ti(t,hl(e,n))}function Vo(t,e){return typeof t=="function"?t(e):t}function Wo(t){return t.split("-")[0]}function Fd(t){return t.split("-")[1]}function GE(t){return t==="x"?"y":"x"}function KE(t){return t==="y"?"height":"width"}const Lie=new Set(["top","bottom"]);function Hs(t){return Lie.has(Wo(t))?"y":"x"}function XE(t){return GE(Hs(t))}function jie(t,e,n){n===void 0&&(n=!1);const r=Fd(t),i=XE(t),s=KE(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Fy(o)),[o,Fy(o)]}function $ie(t){const e=Fy(t);return[Bk(t),e,Bk(e)]}function Bk(t){return t.replace(/start|end/g,e=>Die[e])}const xR=["left","right"],SR=["right","left"],Fie=["top","bottom"],Bie=["bottom","top"];function zie(t,e,n){switch(t){case"top":case"bottom":return n?e?SR:xR:e?xR:SR;case"left":case"right":return e?Fie:Bie;default:return[]}}function Uie(t,e,n,r){const i=Fd(t);let s=zie(Wo(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Bk)))),s}function Fy(t){return t.replace(/left|right|bottom|top/g,e=>Iie[e])}function Hie(t){return{top:0,right:0,bottom:0,left:0,...t}}function vF(t){return typeof t!="number"?Hie(t):{top:t,right:t,bottom:t,left:t}}function By(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function kR(t,e,n){let{reference:r,floating:i}=t;const s=Hs(e),o=XE(e),a=KE(o),l=Wo(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Fd(e)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const Vie=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=kR(c,r,l),f=r,h={},m=0;for(let g=0;g<a.length;g++){const{name:y,fn:v}=a[g],{x:w,y:b,data:k,reset:_}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:e}});u=w??u,d=b??d,h={...h,[y]:{...h[y],...k}},_&&m<=50&&(m++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):_.rects),{x:u,y:d}=kR(c,f,l)),g=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};async function yp(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Vo(e,t),m=vF(h),y=a[f?d==="floating"?"reference":"floating":d],v=By(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},_=By(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:b,strategy:l}):w);return{top:(v.top-_.top+m.top)/k.y,bottom:(_.bottom-v.bottom+m.bottom)/k.y,left:(v.left-_.left+m.left)/k.x,right:(_.right-v.right+m.right)/k.x}}const Wie=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Vo(t,e)||{};if(c==null)return{};const d=vF(u),f={x:n,y:r},h=XE(i),m=KE(h),g=await o.getDimensions(c),y=h==="y",v=y?"top":"left",w=y?"bottom":"right",b=y?"clientHeight":"clientWidth",k=s.reference[m]+s.reference[h]-f[h]-s.floating[m],_=f[h]-s.reference[h],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=E?E[b]:0;(!C||!await(o.isElement==null?void 0:o.isElement(E)))&&(C=a.floating[b]||s.floating[m]);const P=k/2-_/2,M=C/2-g[m]/2-1,O=hl(d[v],M),I=hl(d[w],M),D=O,G=C-g[m]-I,U=C/2-g[m]/2+P,X=Fk(D,U,G),Z=!l.arrow&&Fd(i)!=null&&U!==X&&s.reference[m]/2-(U<D?O:I)-g[m]/2<0,te=Z?U<D?U-D:U-G:0;return{[h]:f[h]+te,data:{[h]:X,centerOffset:U-X-te,...Z&&{alignmentOffset:te}},reset:Z}}}),Gie=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...y}=Vo(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Wo(i),w=Hs(a),b=Wo(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=f||(b||!g?[Fy(a)]:$ie(a)),E=m!=="none";!f&&E&&_.push(...Uie(a,g,m,k));const C=[a,..._],P=await yp(e,y),M=[];let O=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&M.push(P[v]),d){const U=jie(i,o,k);M.push(P[U[0]],P[U[1]])}if(O=[...O,{placement:i,overflows:M}],!M.every(U=>U<=0)){var I,D;const U=(((I=s.flip)==null?void 0:I.index)||0)+1,X=C[U];if(X&&(!(d==="alignment"?w!==Hs(X):!1)||O.every(H=>H.overflows[0]>0&&Hs(H.placement)===w)))return{data:{index:U,overflows:O},reset:{placement:X}};let Z=(D=O.filter(te=>te.overflows[0]<=0).sort((te,H)=>te.overflows[1]-H.overflows[1])[0])==null?void 0:D.placement;if(!Z)switch(h){case"bestFit":{var G;const te=(G=O.filter(H=>{if(E){const $=Hs(H.placement);return $===w||$==="y"}return!0}).map(H=>[H.placement,H.overflows.filter($=>$>0).reduce(($,ne)=>$+ne,0)]).sort((H,$)=>H[1]-$[1])[0])==null?void 0:G[0];te&&(Z=te);break}case"initialPlacement":Z=a;break}if(i!==Z)return{reset:{placement:Z}}}return{}}}};function _R(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function CR(t){return Oie.some(e=>t[e]>=0)}const Kie=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Vo(t,e);switch(r){case"referenceHidden":{const s=await yp(e,{...i,elementContext:"reference"}),o=_R(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:CR(o)}}}case"escaped":{const s=await yp(e,{...i,altBoundary:!0}),o=_R(s,n.floating);return{data:{escapedOffsets:o,escaped:CR(o)}}}default:return{}}}}},yF=new Set(["left","top"]);async function Xie(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Wo(n),a=Fd(n),l=Hs(n)==="y",c=yF.has(o)?-1:1,u=s&&l?-1:1,d=Vo(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const Yie=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await Xie(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},qie=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:v,y:w}=y;return{x:v,y:w}}},...l}=Vo(t,e),c={x:n,y:r},u=await yp(e,l),d=Hs(Wo(i)),f=GE(d);let h=c[f],m=c[d];if(s){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",w=h+u[y],b=h-u[v];h=Fk(w,h,b)}if(o){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",w=m+u[y],b=m-u[v];m=Fk(w,m,b)}const g=a.fn({...e,[f]:h,[d]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:s,[d]:o}}}}}},Jie=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Vo(t,e),u={x:n,y:r},d=Hs(i),f=GE(d);let h=u[f],m=u[d];const g=Vo(a,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const b=f==="y"?"height":"width",k=s.reference[f]-s.floating[b]+y.mainAxis,_=s.reference[f]+s.reference[b]-y.mainAxis;h<k?h=k:h>_&&(h=_)}if(c){var v,w;const b=f==="y"?"width":"height",k=yF.has(Wo(i)),_=s.reference[d]-s.floating[b]+(k&&((v=o.offset)==null?void 0:v[d])||0)+(k?0:y.crossAxis),E=s.reference[d]+s.reference[b]+(k?0:((w=o.offset)==null?void 0:w[d])||0)-(k?y.crossAxis:0);m<_?m=_:m>E&&(m=E)}return{[f]:h,[d]:m}}}},Zie=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Vo(t,e),u=await yp(e,c),d=Wo(i),f=Fd(i),h=Hs(i)==="y",{width:m,height:g}=s.floating;let y,v;d==="top"||d==="bottom"?(y=d,v=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,y=f==="end"?"top":"bottom");const w=g-u.top-u.bottom,b=m-u.left-u.right,k=hl(g-u[y],w),_=hl(m-u[v],b),E=!e.middlewareData.shift;let C=k,P=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=w),E&&!f){const O=ti(u.left,0),I=ti(u.right,0),D=ti(u.top,0),G=ti(u.bottom,0);h?P=m-2*(O!==0||I!==0?O+I:ti(u.left,u.right)):C=g-2*(D!==0||G!==0?D+G:ti(u.top,u.bottom))}await l({...e,availableWidth:P,availableHeight:C});const M=await o.getDimensions(a.floating);return m!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function ow(){return typeof window<"u"}function Bd(t){return wF(t)?(t.nodeName||"").toLowerCase():"#document"}function ci(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function so(t){var e;return(e=(wF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function wF(t){return ow()?t instanceof Node||t instanceof ci(t).Node:!1}function hs(t){return ow()?t instanceof Element||t instanceof ci(t).Element:!1}function ro(t){return ow()?t instanceof HTMLElement||t instanceof ci(t).HTMLElement:!1}function ER(t){return!ow()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ci(t).ShadowRoot}const Qie=new Set(["inline","contents"]);function Xp(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=ps(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Qie.has(i)}const ese=new Set(["table","td","th"]);function tse(t){return ese.has(Bd(t))}const nse=[":popover-open",":modal"];function aw(t){return nse.some(e=>{try{return t.matches(e)}catch{return!1}})}const rse=["transform","translate","scale","rotate","perspective"],ise=["transform","translate","scale","rotate","perspective","filter"],sse=["paint","layout","strict","content"];function YE(t){const e=qE(),n=hs(t)?ps(t):t;return rse.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||ise.some(r=>(n.willChange||"").includes(r))||sse.some(r=>(n.contain||"").includes(r))}function ose(t){let e=pl(t);for(;ro(e)&&!Ad(e);){if(YE(e))return e;if(aw(e))return null;e=pl(e)}return null}function qE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ase=new Set(["html","body","#document"]);function Ad(t){return ase.has(Bd(t))}function ps(t){return ci(t).getComputedStyle(t)}function lw(t){return hs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function pl(t){if(Bd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ER(t)&&t.host||so(t);return ER(e)?e.host:e}function bF(t){const e=pl(t);return Ad(e)?t.ownerDocument?t.ownerDocument.body:t.body:ro(e)&&Xp(e)?e:bF(e)}function wp(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=bF(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=ci(i);if(s){const a=zk(o);return e.concat(o,o.visualViewport||[],Xp(i)?i:[],a&&n?wp(a):[])}return e.concat(i,wp(i,[],n))}function zk(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function xF(t){const e=ps(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ro(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=$y(n)!==s||$y(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function JE(t){return hs(t)?t:t.contextElement}function Gu(t){const e=JE(t);if(!ro(e))return Zs(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=xF(e);let o=(s?$y(n.width):n.width)/r,a=(s?$y(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const lse=Zs(0);function SF(t){const e=ci(t);return!qE()||!e.visualViewport?lse:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function cse(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ci(t)?!1:e}function Oc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=JE(t);let o=Zs(1);e&&(r?hs(r)&&(o=Gu(r)):o=Gu(t));const a=cse(s,n,r)?SF(s):Zs(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const f=ci(s),h=r&&hs(r)?ci(r):r;let m=f,g=zk(m);for(;g&&r&&h!==m;){const y=Gu(g),v=g.getBoundingClientRect(),w=ps(g),b=v.left+(g.clientLeft+parseFloat(w.paddingLeft))*y.x,k=v.top+(g.clientTop+parseFloat(w.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,d*=y.y,l+=b,c+=k,m=ci(g),g=zk(m)}}return By({width:u,height:d,x:l,y:c})}function ZE(t,e){const n=lw(t).scrollLeft;return e?e.left+n:Oc(so(t)).left+n}function kF(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:ZE(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function use(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=so(r),a=e?aw(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Zs(1);const u=Zs(0),d=ro(r);if((d||!d&&!s)&&((Bd(r)!=="body"||Xp(o))&&(l=lw(r)),ro(r))){const h=Oc(r);c=Gu(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const f=o&&!d&&!s?kF(o,l,!0):Zs(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function dse(t){return Array.from(t.getClientRects())}function fse(t){const e=so(t),n=lw(t),r=t.ownerDocument.body,i=ti(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ti(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+ZE(t);const a=-n.scrollTop;return ps(r).direction==="rtl"&&(o+=ti(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function hse(t,e){const n=ci(t),r=so(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=qE();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}const pse=new Set(["absolute","fixed"]);function mse(t,e){const n=Oc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=ro(t)?Gu(t):Zs(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function AR(t,e,n){let r;if(e==="viewport")r=hse(t,n);else if(e==="document")r=fse(so(t));else if(hs(e))r=mse(e,n);else{const i=SF(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return By(r)}function _F(t,e){const n=pl(t);return n===e||!hs(n)||Ad(n)?!1:ps(n).position==="fixed"||_F(n,e)}function gse(t,e){const n=e.get(t);if(n)return n;let r=wp(t,[],!1).filter(a=>hs(a)&&Bd(a)!=="body"),i=null;const s=ps(t).position==="fixed";let o=s?pl(t):t;for(;hs(o)&&!Ad(o);){const a=ps(o),l=YE(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&pse.has(i.position)||Xp(o)&&!l&&_F(t,o))?r=r.filter(u=>u!==o):i=a,o=pl(o)}return e.set(t,r),r}function vse(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?aw(e)?[]:gse(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=AR(e,u,i);return c.top=ti(d.top,c.top),c.right=hl(d.right,c.right),c.bottom=hl(d.bottom,c.bottom),c.left=ti(d.left,c.left),c},AR(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function yse(t){const{width:e,height:n}=xF(t);return{width:e,height:n}}function wse(t,e,n){const r=ro(e),i=so(e),s=n==="fixed",o=Oc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Zs(0);function c(){l.x=ZE(i)}if(r||!r&&!s)if((Bd(e)!=="body"||Xp(i))&&(a=lw(e)),r){const h=Oc(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?kF(i,a):Zs(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function mx(t){return ps(t).position==="static"}function PR(t,e){if(!ro(t)||ps(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return so(t)===n&&(n=n.ownerDocument.body),n}function CF(t,e){const n=ci(t);if(aw(t))return n;if(!ro(t)){let i=pl(t);for(;i&&!Ad(i);){if(hs(i)&&!mx(i))return i;i=pl(i)}return n}let r=PR(t,e);for(;r&&tse(r)&&mx(r);)r=PR(r,e);return r&&Ad(r)&&mx(r)&&!YE(r)?n:r||ose(t)||n}const bse=async function(t){const e=this.getOffsetParent||CF,n=this.getDimensions,r=await n(t.floating);return{reference:wse(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function xse(t){return ps(t).direction==="rtl"}const Sse={convertOffsetParentRelativeRectToViewportRelativeRect:use,getDocumentElement:so,getClippingRect:vse,getOffsetParent:CF,getElementRects:bse,getClientRects:dse,getDimensions:yse,getScale:Gu,isElement:hs,isRTL:xse};function EF(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function kse(t,e){let n=null,r;const i=so(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||e(),!f||!h)return;const m=ug(d),g=ug(i.clientWidth-(u+f)),y=ug(i.clientHeight-(d+h)),v=ug(u),b={rootMargin:-m+"px "+-g+"px "+-y+"px "+-v+"px",threshold:ti(0,hl(1,l))||1};let k=!0;function _(E){const C=E[0].intersectionRatio;if(C!==l){if(!k)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!EF(c,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(_,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(_,b)}n.observe(t)}return o(!0),s}function _se(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=JE(t),u=i||s?[...c?wp(c):[],...wp(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=c&&a?kse(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(v=>{let[w]=v;w&&w.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let m,g=l?Oc(t):null;l&&y();function y(){const v=Oc(t);g&&!EF(g,v)&&n(),g=v,m=requestAnimationFrame(y)}return n(),()=>{var v;u.forEach(w=>{i&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d==null||d(),(v=h)==null||v.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const Cse=Yie,Ese=qie,Ase=Gie,Pse=Zie,Nse=Kie,NR=Wie,Tse=Jie,Mse=(t,e,n)=>{const r=new Map,i={platform:Sse,...n},s={...i.platform,_c:r};return Vie(t,e,{...i,platform:s})};var Rse=typeof document<"u",Ose=function(){},gv=Rse?x.useLayoutEffect:Ose;function zy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!zy(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!zy(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function AF(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function TR(t,e){const n=AF(t);return Math.round(e*n)/n}function gx(t){const e=x.useRef(t);return gv(()=>{e.current=t}),e}function Ise(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=x.useState(r);zy(f,r)||h(r);const[m,g]=x.useState(null),[y,v]=x.useState(null),w=x.useCallback(H=>{H!==E.current&&(E.current=H,g(H))},[]),b=x.useCallback(H=>{H!==C.current&&(C.current=H,v(H))},[]),k=s||m,_=o||y,E=x.useRef(null),C=x.useRef(null),P=x.useRef(u),M=l!=null,O=gx(l),I=gx(i),D=gx(c),G=x.useCallback(()=>{if(!E.current||!C.current)return;const H={placement:e,strategy:n,middleware:f};I.current&&(H.platform=I.current),Mse(E.current,C.current,H).then($=>{const ne={...$,isPositioned:D.current!==!1};U.current&&!zy(P.current,ne)&&(P.current=ne,xl.flushSync(()=>{d(ne)}))})},[f,e,n,I,D]);gv(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,d(H=>({...H,isPositioned:!1})))},[c]);const U=x.useRef(!1);gv(()=>(U.current=!0,()=>{U.current=!1}),[]),gv(()=>{if(k&&(E.current=k),_&&(C.current=_),k&&_){if(O.current)return O.current(k,_,G);G()}},[k,_,G,O,M]);const X=x.useMemo(()=>({reference:E,floating:C,setReference:w,setFloating:b}),[w,b]),Z=x.useMemo(()=>({reference:k,floating:_}),[k,_]),te=x.useMemo(()=>{const H={position:n,left:0,top:0};if(!Z.floating)return H;const $=TR(Z.floating,u.x),ne=TR(Z.floating,u.y);return a?{...H,transform:"translate("+$+"px, "+ne+"px)",...AF(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:ne}},[n,a,Z.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:G,refs:X,elements:Z,floatingStyles:te}),[u,G,X,Z,te])}const Dse=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?NR({element:r.current,padding:i}).fn(n):{}:r?NR({element:r,padding:i}).fn(n):{}}}},Lse=(t,e)=>({...Cse(t),options:[t,e]}),jse=(t,e)=>({...Ese(t),options:[t,e]}),$se=(t,e)=>({...Tse(t),options:[t,e]}),Fse=(t,e)=>({...Ase(t),options:[t,e]}),Bse=(t,e)=>({...Pse(t),options:[t,e]}),zse=(t,e)=>({...Nse(t),options:[t,e]}),Use=(t,e)=>({...Dse(t),options:[t,e]});var Hse="Arrow",PF=x.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return p.jsx(ze.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});PF.displayName=Hse;var Vse=PF;function QE(t){const[e,n]=x.useState(void 0);return Gn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var e2="Popper",[NF,zd]=ms(e2),[Wse,TF]=NF(e2),MF=t=>{const{__scopePopper:e,children:n}=t,[r,i]=x.useState(null);return p.jsx(Wse,{scope:e,anchor:r,onAnchorChange:i,children:n})};MF.displayName=e2;var RF="PopperAnchor",OF=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=TF(RF,n),o=x.useRef(null),a=it(e,o);return x.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:p.jsx(ze.div,{...i,ref:a})});OF.displayName=RF;var t2="PopperContent",[Gse,Kse]=NF(t2),IF=x.forwardRef((t,e)=>{var S,N,R,T,K,V;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:m,...g}=t,y=TF(t2,n),[v,w]=x.useState(null),b=it(e,ee=>w(ee)),[k,_]=x.useState(null),E=QE(k),C=(E==null?void 0:E.width)??0,P=(E==null?void 0:E.height)??0,M=r+(s!=="center"?"-"+s:""),O=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},I=Array.isArray(c)?c:[c],D=I.length>0,G={padding:O,boundary:I.filter(Yse),altBoundary:D},{refs:U,floatingStyles:X,placement:Z,isPositioned:te,middlewareData:H}=Ise({strategy:"fixed",placement:M,whileElementsMounted:(...ee)=>_se(...ee,{animationFrame:h==="always"}),elements:{reference:y.anchor},middleware:[Lse({mainAxis:i+P,alignmentAxis:o}),l&&jse({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?$se():void 0,...G}),l&&Fse({...G}),Bse({...G,apply:({elements:ee,rects:q,availableWidth:Te,availableHeight:je})=>{const{width:Fe,height:Le}=q.reference,We=ee.floating.style;We.setProperty("--radix-popper-available-width",`${Te}px`),We.setProperty("--radix-popper-available-height",`${je}px`),We.setProperty("--radix-popper-anchor-width",`${Fe}px`),We.setProperty("--radix-popper-anchor-height",`${Le}px`)}}),k&&Use({element:k,padding:a}),qse({arrowWidth:C,arrowHeight:P}),f&&zse({strategy:"referenceHidden",...G})]}),[$,ne]=jF(Z),ke=zr(m);Gn(()=>{te&&(ke==null||ke())},[te,ke]);const J=(S=H.arrow)==null?void 0:S.x,ae=(N=H.arrow)==null?void 0:N.y,j=((R=H.arrow)==null?void 0:R.centerOffset)!==0,[L,z]=x.useState();return Gn(()=>{v&&z(window.getComputedStyle(v).zIndex)},[v]),p.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:te?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:L,"--radix-popper-transform-origin":[(T=H.transformOrigin)==null?void 0:T.x,(K=H.transformOrigin)==null?void 0:K.y].join(" "),...((V=H.hide)==null?void 0:V.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(Gse,{scope:n,placedSide:$,onArrowChange:_,arrowX:J,arrowY:ae,shouldHideArrow:j,children:p.jsx(ze.div,{"data-side":$,"data-align":ne,...g,ref:b,style:{...g.style,animation:te?void 0:"none"}})})})});IF.displayName=t2;var DF="PopperArrow",Xse={top:"bottom",right:"left",bottom:"top",left:"right"},LF=x.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=Kse(DF,r),o=Xse[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(Vse,{...i,ref:n,style:{...i.style,display:"block"}})})});LF.displayName=DF;function Yse(t){return t!==null}var qse=t=>({name:"transformOrigin",options:t,fn(e){var y,v,w;const{placement:n,rects:r,middlewareData:i}=e,o=((y=i.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=jF(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((v=i.arrow)==null?void 0:v.x)??0)+a/2,h=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let m="",g="";return c==="bottom"?(m=o?d:`${f}px`,g=`${-l}px`):c==="top"?(m=o?d:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(m=`${-l}px`,g=o?d:`${h}px`):c==="left"&&(m=`${r.floating.width+l}px`,g=o?d:`${h}px`),{data:{x:m,y:g}}}});function jF(t){const[e,n="center"]=t.split("-");return[e,n]}var n2=MF,cw=OF,r2=IF,i2=LF,Jse="Portal",Yp=x.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=x.useState(!1);Gn(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?hW.createPortal(p.jsx(ze.div,{...r,ref:e}),o):null});Yp.displayName=Jse;function s2(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var $F=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Zse="VisuallyHidden",o2=x.forwardRef((t,e)=>p.jsx(ze.span,{...t,ref:e,style:{...$F,...t.style}}));o2.displayName=Zse;var Qse=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Qc=new WeakMap,dg=new WeakMap,fg={},vx=0,FF=function(t){return t&&(t.host||FF(t.parentNode))},eoe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=FF(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},toe=function(t,e,n,r){var i=eoe(e,Array.isArray(t)?t:[t]);fg[n]||(fg[n]=new WeakMap);var s=fg[n],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(r),m=h!==null&&h!=="false",g=(Qc.get(f)||0)+1,y=(s.get(f)||0)+1;Qc.set(f,g),s.set(f,y),o.push(f),g===1&&m&&dg.set(f,!0),y===1&&f.setAttribute(n,"true"),m||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(e),a.clear(),vx++,function(){o.forEach(function(d){var f=Qc.get(d)-1,h=s.get(d)-1;Qc.set(d,f),s.set(d,h),f||(dg.has(d)||d.removeAttribute(r),dg.delete(d)),h||d.removeAttribute(n)}),vx--,vx||(Qc=new WeakMap,Qc=new WeakMap,dg=new WeakMap,fg={})}},BF=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Qse(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),toe(r,i,n,"aria-hidden")):function(){return null}},vv="right-scroll-bar-position",yv="width-before-scroll-bar",noe="with-scroll-bars-hidden",roe="--removed-body-scroll-bar-size";function yx(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function ioe(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var soe=typeof window<"u"?x.useLayoutEffect:x.useEffect,MR=new WeakMap;function ooe(t,e){var n=ioe(null,function(r){return t.forEach(function(i){return yx(i,r)})});return soe(function(){var r=MR.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||yx(a,null)}),s.forEach(function(a){i.has(a)||yx(a,o)})}MR.set(n,t)},[t]),n}function aoe(t){return t}function loe(t,e){e===void 0&&(e=aoe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function coe(t){t===void 0&&(t={});var e=loe(null);return e.options=Is({async:!0,ssr:!1},t),e}var zF=function(t){var e=t.sideCar,n=m3(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,Is({},n))};zF.isSideCarExport=!0;function uoe(t,e){return t.useMedium(e),zF}var UF=coe(),wx=function(){},uw=x.forwardRef(function(t,e){var n=x.useRef(null),r=x.useState({onScrollCapture:wx,onWheelCapture:wx,onTouchMoveCapture:wx}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,h=t.noRelative,m=t.noIsolation,g=t.inert,y=t.allowPinchZoom,v=t.as,w=v===void 0?"div":v,b=t.gapMode,k=m3(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,E=ooe([n,e]),C=Is(Is({},k),i);return x.createElement(x.Fragment,null,u&&x.createElement(_,{sideCar:UF,removeScrollBar:c,shards:d,noRelative:h,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!y,lockRef:n,gapMode:b}),o?x.cloneElement(x.Children.only(a),Is(Is({},C),{ref:E})):x.createElement(w,Is({},C,{className:l,ref:E}),a))});uw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};uw.classNames={fullWidth:yv,zeroRight:vv};var doe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function foe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=doe();return e&&t.setAttribute("nonce",e),t}function hoe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function poe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var moe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=foe())&&(hoe(e,n),poe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},goe=function(){var t=moe();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},HF=function(){var t=goe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},voe={left:0,top:0,right:0,gap:0},bx=function(t){return parseInt(t||"",10)||0},yoe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[bx(n),bx(r),bx(i)]},woe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return voe;var e=yoe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},boe=HF(),Ku="data-scroll-locked",xoe=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(noe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Ku,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vv,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(yv,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(vv," .").concat(vv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(yv," .").concat(yv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ku,`] {
    `).concat(roe,": ").concat(a,`px;
  }
`)},RR=function(){var t=parseInt(document.body.getAttribute(Ku)||"0",10);return isFinite(t)?t:0},Soe=function(){x.useEffect(function(){return document.body.setAttribute(Ku,(RR()+1).toString()),function(){var t=RR()-1;t<=0?document.body.removeAttribute(Ku):document.body.setAttribute(Ku,t.toString())}},[])},koe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;Soe();var s=x.useMemo(function(){return woe(i)},[i]);return x.createElement(boe,{styles:xoe(s,!e,i,n?"":"!important")})},Uk=!1;if(typeof window<"u")try{var hg=Object.defineProperty({},"passive",{get:function(){return Uk=!0,!0}});window.addEventListener("test",hg,hg),window.removeEventListener("test",hg,hg)}catch{Uk=!1}var eu=Uk?{passive:!1}:!1,_oe=function(t){return t.tagName==="TEXTAREA"},VF=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!_oe(t)&&n[e]==="visible")},Coe=function(t){return VF(t,"overflowY")},Eoe=function(t){return VF(t,"overflowX")},OR=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=WF(t,r);if(i){var s=GF(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Aoe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Poe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},WF=function(t,e){return t==="v"?Coe(e):Eoe(e)},GF=function(t,e){return t==="v"?Aoe(e):Poe(e)},Noe=function(t,e){return t==="h"&&e==="rtl"?-1:1},Toe=function(t,e,n,r,i){var s=Noe(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{if(!a)break;var h=GF(t,a),m=h[0],g=h[1],y=h[2],v=g-y-s*m;(m||v)&&WF(t,a)&&(d+=v,f+=m);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},pg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},IR=function(t){return[t.deltaX,t.deltaY]},DR=function(t){return t&&"current"in t?t.current:t},Moe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Roe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Ooe=0,tu=[];function Ioe(t){var e=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),i=x.useState(Ooe++)[0],s=x.useState(HF)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=bG([t.lockRef.current],(t.shards||[]).map(DR),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=x.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=pg(g),w=n.current,b="deltaX"in g?g.deltaX:w[0]-v[0],k="deltaY"in g?g.deltaY:w[1]-v[1],_,E=g.target,C=Math.abs(b)>Math.abs(k)?"h":"v";if("touches"in g&&C==="h"&&E.type==="range")return!1;var P=OR(C,E);if(!P)return!0;if(P?_=C:(_=C==="v"?"h":"v",P=OR(C,E)),!P)return!1;if(!r.current&&"changedTouches"in g&&(b||k)&&(r.current=_),!_)return!0;var M=r.current||_;return Toe(M,y,g,M==="h"?b:k)},[]),l=x.useCallback(function(g){var y=g;if(!(!tu.length||tu[tu.length-1]!==s)){var v="deltaY"in y?IR(y):pg(y),w=e.current.filter(function(_){return _.name===y.type&&(_.target===y.target||y.target===_.shadowParent)&&Moe(_.delta,v)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var b=(o.current.shards||[]).map(DR).filter(Boolean).filter(function(_){return _.contains(y.target)}),k=b.length>0?a(y,b[0]):!o.current.noIsolation;k&&y.cancelable&&y.preventDefault()}}},[]),c=x.useCallback(function(g,y,v,w){var b={name:g,delta:y,target:v,should:w,shadowParent:Doe(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(k){return k!==b})},1)},[]),u=x.useCallback(function(g){n.current=pg(g),r.current=void 0},[]),d=x.useCallback(function(g){c(g.type,IR(g),g.target,a(g,t.lockRef.current))},[]),f=x.useCallback(function(g){c(g.type,pg(g),g.target,a(g,t.lockRef.current))},[]);x.useEffect(function(){return tu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,eu),document.addEventListener("touchmove",l,eu),document.addEventListener("touchstart",u,eu),function(){tu=tu.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,eu),document.removeEventListener("touchmove",l,eu),document.removeEventListener("touchstart",u,eu)}},[]);var h=t.removeScrollBar,m=t.inert;return x.createElement(x.Fragment,null,m?x.createElement(s,{styles:Roe(i)}):null,h?x.createElement(koe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Doe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Loe=uoe(UF,Ioe);var dw=x.forwardRef(function(t,e){return x.createElement(uw,Is({},t,{ref:e,sideCar:Loe}))});dw.classNames=uw.classNames;var joe=[" ","Enter","ArrowUp","ArrowDown"],$oe=[" ","Enter"],Ic="Select",[fw,hw,Foe]=Rp(Ic),[Ud,$me]=ms(Ic,[Foe,zd]),pw=zd(),[Boe,_l]=Ud(Ic),[zoe,Uoe]=Ud(Ic),KF=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:h,form:m}=t,g=pw(e),[y,v]=x.useState(null),[w,b]=x.useState(null),[k,_]=x.useState(!1),E=Op(c),[C,P]=Fo({prop:r,defaultProp:i??!1,onChange:s,caller:Ic}),[M,O]=Fo({prop:o,defaultProp:a,onChange:l,caller:Ic}),I=x.useRef(null),D=y?m||!!y.closest("form"):!0,[G,U]=x.useState(new Set),X=Array.from(G).map(Z=>Z.props.value).join(";");return p.jsx(n2,{...g,children:p.jsxs(Boe,{required:h,scope:e,trigger:y,onTriggerChange:v,valueNode:w,onValueNodeChange:b,valueNodeHasChildren:k,onValueNodeHasChildrenChange:_,contentId:tl(),value:M,onValueChange:O,open:C,onOpenChange:P,dir:E,triggerPointerDownPosRef:I,disabled:f,children:[p.jsx(fw.Provider,{scope:e,children:p.jsx(zoe,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(Z=>{U(te=>new Set(te).add(Z))},[]),onNativeOptionRemove:x.useCallback(Z=>{U(te=>{const H=new Set(te);return H.delete(Z),H})},[]),children:n})}),D?p.jsxs(f8,{"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:d,value:M,onChange:Z=>O(Z.target.value),disabled:f,form:m,children:[M===void 0?p.jsx("option",{value:""}):null,Array.from(G)]},X):null]})})};KF.displayName=Ic;var XF="SelectTrigger",YF=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=pw(n),o=_l(XF,n),a=o.disabled||r,l=it(e,o.onTriggerChange),c=hw(n),u=x.useRef("touch"),[d,f,h]=p8(g=>{const y=c().filter(b=>!b.disabled),v=y.find(b=>b.value===o.value),w=m8(y,g,v);w!==void 0&&o.onValueChange(w.value)}),m=g=>{a||(o.onOpenChange(!0),h()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return p.jsx(cw,{asChild:!0,...s,children:p.jsx(ze.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":h8(o.value)?"":void 0,...i,ref:l,onClick:ge(i.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&m(g)}),onPointerDown:ge(i.onPointerDown,g=>{u.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:ge(i.onKeyDown,g=>{const y=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(y&&g.key===" ")&&joe.includes(g.key)&&(m(),g.preventDefault())})})})});YF.displayName=XF;var qF="SelectValue",JF=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=_l(qF,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=it(e,l.onValueNodeChange);return Gn(()=>{c(u)},[c,u]),p.jsx(ze.span,{...a,ref:d,style:{pointerEvents:"none"},children:h8(l.value)?p.jsx(p.Fragment,{children:o}):s})});JF.displayName=qF;var Hoe="SelectIcon",ZF=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return p.jsx(ze.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});ZF.displayName=Hoe;var Voe="SelectPortal",QF=t=>p.jsx(Yp,{asChild:!0,...t});QF.displayName=Voe;var Dc="SelectContent",e8=x.forwardRef((t,e)=>{const n=_l(Dc,t.__scopeSelect),[r,i]=x.useState();if(Gn(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?xl.createPortal(p.jsx(t8,{scope:t.__scopeSelect,children:p.jsx(fw.Slot,{scope:t.__scopeSelect,children:p.jsx("div",{children:t.children})})}),s):null}return p.jsx(n8,{...t,ref:e})});e8.displayName=Dc;var Gi=10,[t8,Cl]=Ud(Dc),Woe="SelectContentImpl",Goe=pd("SelectContent.RemoveScroll"),n8=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:m,hideWhenDetached:g,avoidCollisions:y,...v}=t,w=_l(Dc,n),[b,k]=x.useState(null),[_,E]=x.useState(null),C=it(e,S=>k(S)),[P,M]=x.useState(null),[O,I]=x.useState(null),D=hw(n),[G,U]=x.useState(!1),X=x.useRef(!1);x.useEffect(()=>{if(b)return BF(b)},[b]),WE();const Z=x.useCallback(S=>{const[N,...R]=D().map(V=>V.ref.current),[T]=R.slice(-1),K=document.activeElement;for(const V of S)if(V===K||(V==null||V.scrollIntoView({block:"nearest"}),V===N&&_&&(_.scrollTop=0),V===T&&_&&(_.scrollTop=_.scrollHeight),V==null||V.focus(),document.activeElement!==K))return},[D,_]),te=x.useCallback(()=>Z([P,b]),[Z,P,b]);x.useEffect(()=>{G&&te()},[G,te]);const{onOpenChange:H,triggerPointerDownPosRef:$}=w;x.useEffect(()=>{if(b){let S={x:0,y:0};const N=T=>{var K,V;S={x:Math.abs(Math.round(T.pageX)-(((K=$.current)==null?void 0:K.x)??0)),y:Math.abs(Math.round(T.pageY)-(((V=$.current)==null?void 0:V.y)??0))}},R=T=>{S.x<=10&&S.y<=10?T.preventDefault():b.contains(T.target)||H(!1),document.removeEventListener("pointermove",N),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",N),document.addEventListener("pointerup",R,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",N),document.removeEventListener("pointerup",R,{capture:!0})}}},[b,H,$]),x.useEffect(()=>{const S=()=>H(!1);return window.addEventListener("blur",S),window.addEventListener("resize",S),()=>{window.removeEventListener("blur",S),window.removeEventListener("resize",S)}},[H]);const[ne,ke]=p8(S=>{const N=D().filter(K=>!K.disabled),R=N.find(K=>K.ref.current===document.activeElement),T=m8(N,S,R);T&&setTimeout(()=>T.ref.current.focus())}),J=x.useCallback((S,N,R)=>{const T=!X.current&&!R;(w.value!==void 0&&w.value===N||T)&&(M(S),T&&(X.current=!0))},[w.value]),ae=x.useCallback(()=>b==null?void 0:b.focus(),[b]),j=x.useCallback((S,N,R)=>{const T=!X.current&&!R;(w.value!==void 0&&w.value===N||T)&&I(S)},[w.value]),L=r==="popper"?Hk:r8,z=L===Hk?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:m,hideWhenDetached:g,avoidCollisions:y}:{};return p.jsx(t8,{scope:n,content:b,viewport:_,onViewportChange:E,itemRefCallback:J,selectedItem:P,onItemLeave:ae,itemTextRefCallback:j,focusSelectedItem:te,selectedItemText:O,position:r,isPositioned:G,searchRef:ne,children:p.jsx(dw,{as:Goe,allowPinchZoom:!0,children:p.jsx(sw,{asChild:!0,trapped:w.open,onMountAutoFocus:S=>{S.preventDefault()},onUnmountAutoFocus:ge(i,S=>{var N;(N=w.trigger)==null||N.focus({preventScroll:!0}),S.preventDefault()}),children:p.jsx(Kp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:S=>S.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:p.jsx(L,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:S=>S.preventDefault(),...v,...z,onPlaced:()=>U(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ge(v.onKeyDown,S=>{const N=S.ctrlKey||S.altKey||S.metaKey;if(S.key==="Tab"&&S.preventDefault(),!N&&S.key.length===1&&ke(S.key),["ArrowUp","ArrowDown","Home","End"].includes(S.key)){let T=D().filter(K=>!K.disabled).map(K=>K.ref.current);if(["ArrowUp","End"].includes(S.key)&&(T=T.slice().reverse()),["ArrowUp","ArrowDown"].includes(S.key)){const K=S.target,V=T.indexOf(K);T=T.slice(V+1)}setTimeout(()=>Z(T)),S.preventDefault()}})})})})})})});n8.displayName=Woe;var Koe="SelectItemAlignedPosition",r8=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=_l(Dc,n),o=Cl(Dc,n),[a,l]=x.useState(null),[c,u]=x.useState(null),d=it(e,C=>u(C)),f=hw(n),h=x.useRef(!1),m=x.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:v,focusSelectedItem:w}=o,b=x.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&g&&y&&v){const C=s.trigger.getBoundingClientRect(),P=c.getBoundingClientRect(),M=s.valueNode.getBoundingClientRect(),O=v.getBoundingClientRect();if(s.dir!=="rtl"){const K=O.left-P.left,V=M.left-K,ee=C.left-V,q=C.width+ee,Te=Math.max(q,P.width),je=window.innerWidth-Gi,Fe=jy(V,[Gi,Math.max(Gi,je-Te)]);a.style.minWidth=q+"px",a.style.left=Fe+"px"}else{const K=P.right-O.right,V=window.innerWidth-M.right-K,ee=window.innerWidth-C.right-V,q=C.width+ee,Te=Math.max(q,P.width),je=window.innerWidth-Gi,Fe=jy(V,[Gi,Math.max(Gi,je-Te)]);a.style.minWidth=q+"px",a.style.right=Fe+"px"}const I=f(),D=window.innerHeight-Gi*2,G=g.scrollHeight,U=window.getComputedStyle(c),X=parseInt(U.borderTopWidth,10),Z=parseInt(U.paddingTop,10),te=parseInt(U.borderBottomWidth,10),H=parseInt(U.paddingBottom,10),$=X+Z+G+H+te,ne=Math.min(y.offsetHeight*5,$),ke=window.getComputedStyle(g),J=parseInt(ke.paddingTop,10),ae=parseInt(ke.paddingBottom,10),j=C.top+C.height/2-Gi,L=D-j,z=y.offsetHeight/2,S=y.offsetTop+z,N=X+Z+S,R=$-N;if(N<=j){const K=I.length>0&&y===I[I.length-1].ref.current;a.style.bottom="0px";const V=c.clientHeight-g.offsetTop-g.offsetHeight,ee=Math.max(L,z+(K?ae:0)+V+te),q=N+ee;a.style.height=q+"px"}else{const K=I.length>0&&y===I[0].ref.current;a.style.top="0px";const ee=Math.max(j,X+g.offsetTop+(K?J:0)+z)+R;a.style.height=ee+"px",g.scrollTop=N-j+g.offsetTop}a.style.margin=`${Gi}px 0`,a.style.minHeight=ne+"px",a.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[f,s.trigger,s.valueNode,a,c,g,y,v,s.dir,r]);Gn(()=>b(),[b]);const[k,_]=x.useState();Gn(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const E=x.useCallback(C=>{C&&m.current===!0&&(b(),w==null||w(),m.current=!1)},[b,w]);return p.jsx(Yoe,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:h,onScrollButtonChange:E,children:p.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:p.jsx(ze.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});r8.displayName=Koe;var Xoe="SelectPopperPosition",Hk=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Gi,...s}=t,o=pw(n);return p.jsx(r2,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Hk.displayName=Xoe;var[Yoe,a2]=Ud(Dc,{}),Vk="SelectViewport",i8=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=Cl(Vk,n),o=a2(Vk,n),a=it(e,s.onViewportChange),l=x.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(fw.Slot,{scope:n,children:p.jsx(ze.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ge(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const h=Math.abs(l.current-u.scrollTop);if(h>0){const m=window.innerHeight-Gi*2,g=parseFloat(d.style.minHeight),y=parseFloat(d.style.height),v=Math.max(g,y);if(v<m){const w=v+h,b=Math.min(m,w),k=w-b;d.style.height=b+"px",d.style.bottom==="0px"&&(u.scrollTop=k>0?k:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});i8.displayName=Vk;var s8="SelectGroup",[qoe,Joe]=Ud(s8),Zoe=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=tl();return p.jsx(qoe,{scope:n,id:i,children:p.jsx(ze.div,{role:"group","aria-labelledby":i,...r,ref:e})})});Zoe.displayName=s8;var o8="SelectLabel",Qoe=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Joe(o8,n);return p.jsx(ze.div,{id:i.id,...r,ref:e})});Qoe.displayName=o8;var Uy="SelectItem",[eae,a8]=Ud(Uy),l8=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=_l(Uy,n),l=Cl(Uy,n),c=a.value===r,[u,d]=x.useState(s??""),[f,h]=x.useState(!1),m=it(e,w=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,w,r,i)}),g=tl(),y=x.useRef("touch"),v=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(eae,{scope:n,value:r,disabled:i,textId:g,isSelected:c,onItemTextChange:x.useCallback(w=>{d(b=>b||((w==null?void 0:w.textContent)??"").trim())},[]),children:p.jsx(fw.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:p.jsx(ze.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:m,onFocus:ge(o.onFocus,()=>h(!0)),onBlur:ge(o.onBlur,()=>h(!1)),onClick:ge(o.onClick,()=>{y.current!=="mouse"&&v()}),onPointerUp:ge(o.onPointerUp,()=>{y.current==="mouse"&&v()}),onPointerDown:ge(o.onPointerDown,w=>{y.current=w.pointerType}),onPointerMove:ge(o.onPointerMove,w=>{var b;y.current=w.pointerType,i?(b=l.onItemLeave)==null||b.call(l):y.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ge(o.onPointerLeave,w=>{var b;w.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:ge(o.onKeyDown,w=>{var k;((k=l.searchRef)==null?void 0:k.current)!==""&&w.key===" "||($oe.includes(w.key)&&v(),w.key===" "&&w.preventDefault())})})})})});l8.displayName=Uy;var Hf="SelectItemText",c8=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=_l(Hf,n),a=Cl(Hf,n),l=a8(Hf,n),c=Uoe(Hf,n),[u,d]=x.useState(null),f=it(e,v=>d(v),l.onItemTextChange,v=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,v,l.value,l.disabled)}),h=u==null?void 0:u.textContent,m=x.useMemo(()=>p.jsx("option",{value:l.value,disabled:l.disabled,children:h},l.value),[l.disabled,l.value,h]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=c;return Gn(()=>(g(m),()=>y(m)),[g,y,m]),p.jsxs(p.Fragment,{children:[p.jsx(ze.span,{id:l.textId,...s,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?xl.createPortal(s.children,o.valueNode):null]})});c8.displayName=Hf;var u8="SelectItemIndicator",tae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a8(u8,n).isSelected?p.jsx(ze.span,{"aria-hidden":!0,...r,ref:e}):null});tae.displayName=u8;var Wk="SelectScrollUpButton",nae=x.forwardRef((t,e)=>{const n=Cl(Wk,t.__scopeSelect),r=a2(Wk,t.__scopeSelect),[i,s]=x.useState(!1),o=it(e,r.onScrollButtonChange);return Gn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?p.jsx(d8,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});nae.displayName=Wk;var Gk="SelectScrollDownButton",rae=x.forwardRef((t,e)=>{const n=Cl(Gk,t.__scopeSelect),r=a2(Gk,t.__scopeSelect),[i,s]=x.useState(!1),o=it(e,r.onScrollButtonChange);return Gn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?p.jsx(d8,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});rae.displayName=Gk;var d8=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=Cl("SelectScrollButton",n),o=x.useRef(null),a=hw(n),l=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),Gn(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),p.jsx(ze.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:ge(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ge(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ge(i.onPointerLeave,()=>{l()})})}),iae="SelectSeparator",sae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return p.jsx(ze.div,{"aria-hidden":!0,...r,ref:e})});sae.displayName=iae;var Kk="SelectArrow",oae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=pw(n),s=_l(Kk,n),o=Cl(Kk,n);return s.open&&o.position==="popper"?p.jsx(i2,{...i,...r,ref:e}):null});oae.displayName=Kk;var aae="SelectBubbleInput",f8=x.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=x.useRef(null),s=it(r,i),o=s2(e);return x.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),p.jsx(ze.select,{...n,style:{...$F,...n.style},ref:s,defaultValue:e})});f8.displayName=aae;function h8(t){return t===""||t===void 0}function p8(t){const e=zr(t),n=x.useRef(""),r=x.useRef(0),i=x.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function m8(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=lae(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function lae(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var cae=KF,g8=YF,uae=JF,dae=ZF,fae=QF,v8=e8,hae=i8,y8=l8,pae=c8;const mg=cae,gg=uae,Vf=x.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(g8,{ref:r,className:ve("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,p.jsx(dae,{asChild:!0,children:p.jsx("span",{className:"icon-[lucide--chevron-down] size-4 opacity-50"})})]}));Vf.displayName=g8.displayName;const Wf=x.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>p.jsx(fae,{children:p.jsx(v8,{ref:i,className:ve("relative z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...r,children:p.jsx(hae,{className:"p-1",children:e})})}));Wf.displayName=v8.displayName;const Kl=x.forwardRef(({className:t,children:e,...n},r)=>p.jsx(y8,{ref:r,className:ve("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:p.jsx(pae,{children:e})}));Kl.displayName=y8.displayName;var w8=["PageUp","PageDown"],b8=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],x8={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Hd="Slider",[Xk,mae,gae]=Rp(Hd),[S8,Fme]=ms(Hd,[gae]),[vae,mw]=S8(Hd),k8=x.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:h=!1,form:m,...g}=t,y=x.useRef(new Set),v=x.useRef(0),b=o==="horizontal"?yae:wae,[k=[],_]=Fo({prop:u,defaultProp:c,onChange:I=>{var G;(G=[...y.current][v.current])==null||G.focus(),d(I)}}),E=x.useRef(k);function C(I){const D=_ae(k,I);O(I,D)}function P(I){O(I,v.current)}function M(){const I=E.current[v.current];k[v.current]!==I&&f(k)}function O(I,D,{commit:G}={commit:!1}){const U=Pae(s),X=Nae(Math.round((I-r)/s)*s+r,U),Z=jy(X,[r,i]);_((te=[])=>{const H=Sae(te,Z,D);if(Aae(H,l*s)){v.current=H.indexOf(Z);const $=String(H)!==String(te);return $&&G&&f(H),$?H:te}else return te})}return p.jsx(vae,{scope:t.__scopeSlider,name:n,disabled:a,min:r,max:i,valueIndexToChangeRef:v,thumbs:y.current,values:k,orientation:o,form:m,children:p.jsx(Xk.Provider,{scope:t.__scopeSlider,children:p.jsx(Xk.Slot,{scope:t.__scopeSlider,children:p.jsx(b,{"aria-disabled":a,"data-disabled":a?"":void 0,...g,ref:e,onPointerDown:ge(g.onPointerDown,()=>{a||(E.current=k)}),min:r,max:i,inverted:h,onSlideStart:a?void 0:C,onSlideMove:a?void 0:P,onSlideEnd:a?void 0:M,onHomeKeyDown:()=>!a&&O(r,0,{commit:!0}),onEndKeyDown:()=>!a&&O(i,k.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:D})=>{if(!a){const X=w8.includes(I.key)||I.shiftKey&&b8.includes(I.key)?10:1,Z=v.current,te=k[Z],H=s*X*D;O(te+H,Z,{commit:!0})}}})})})})});k8.displayName=Hd;var[_8,C8]=S8(Hd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),yae=x.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=x.useState(null),h=it(e,b=>f(b)),m=x.useRef(void 0),g=Op(i),y=g==="ltr",v=y&&!s||!y&&s;function w(b){const k=m.current||d.getBoundingClientRect(),_=[0,k.width],C=l2(_,v?[n,r]:[r,n]);return m.current=k,C(b-k.left)}return p.jsx(_8,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:p.jsx(E8,{dir:g,"data-orientation":"horizontal",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const k=w(b.clientX);o==null||o(k)},onSlideMove:b=>{const k=w(b.clientX);a==null||a(k)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:b=>{const _=x8[v?"from-left":"from-right"].includes(b.key);c==null||c({event:b,direction:_?-1:1})}})})}),wae=x.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=x.useRef(null),d=it(e,u),f=x.useRef(void 0),h=!i;function m(g){const y=f.current||u.current.getBoundingClientRect(),v=[0,y.height],b=l2(v,h?[r,n]:[n,r]);return f.current=y,b(g-y.top)}return p.jsx(_8,{scope:t.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1,children:p.jsx(E8,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const y=m(g.clientY);s==null||s(y)},onSlideMove:g=>{const y=m(g.clientY);o==null||o(y)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:g=>{const v=x8[h?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:v?-1:1})}})})}),E8=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=mw(Hd,n);return p.jsx(ze.span,{...c,ref:e,onKeyDown:ge(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):w8.concat(b8).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ge(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():r(d)}),onPointerMove:ge(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:ge(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})})}),A8="SliderTrack",P8=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=mw(A8,n);return p.jsx(ze.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});P8.displayName=A8;var Yk="SliderRange",N8=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=mw(Yk,n),s=C8(Yk,n),o=x.useRef(null),a=it(e,o),l=i.values.length,c=i.values.map(f=>R8(f,i.min,i.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return p.jsx(ze.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});N8.displayName=Yk;var qk="SliderThumb",T8=x.forwardRef((t,e)=>{const n=mae(t.__scopeSlider),[r,i]=x.useState(null),s=it(e,a=>i(a)),o=x.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return p.jsx(bae,{...t,ref:s,index:o})}),bae=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...s}=t,o=mw(qk,n),a=C8(qk,n),[l,c]=x.useState(null),u=it(e,w=>c(w)),d=l?o.form||!!l.closest("form"):!0,f=QE(l),h=o.values[r],m=h===void 0?0:R8(h,o.min,o.max),g=kae(r,o.values.length),y=f==null?void 0:f[a.size],v=y?Cae(y,m,a.direction):0;return x.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),p.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${m}% + ${v}px)`},children:[p.jsx(Xk.ItemSlot,{scope:t.__scopeSlider,children:p.jsx(ze.span,{role:"slider","aria-label":t["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":h,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:h===void 0?{display:"none"}:t.style,onFocus:ge(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),d&&p.jsx(M8,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:h},r)]})});T8.displayName=qk;var xae="RadioBubbleInput",M8=x.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const i=x.useRef(null),s=it(i,r),o=s2(e);return x.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),p.jsx(ze.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});M8.displayName=xae;function Sae(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function R8(t,e,n){const s=100/(n-e)*(t-e);return jy(s,[0,100])}function kae(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function _ae(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function Cae(t,e,n){const r=t/2,s=l2([0,50],[0,r]);return(r-s(e)*n)*n}function Eae(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Aae(t,e){if(e>0){const n=Eae(t);return Math.min(...n)>=e}return!0}function l2(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Pae(t){return(String(t).split(".")[1]||"").length}function Nae(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var O8=k8,Tae=P8,Mae=N8,Rae=T8;const Xl=x.forwardRef(({className:t,...e},n)=>p.jsxs(O8,{ref:n,className:ve("relative flex touch-none select-none items-center",t),...e,children:[p.jsx(Tae,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:p.jsx(Mae,{className:"absolute h-full bg-mantis-400"})}),p.jsx(Rae,{className:"block size-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Xl.displayName=O8.displayName;var gw="Switch",[Oae,Bme]=ms(gw),[Iae,Dae]=Oae(gw),I8=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,h]=x.useState(null),m=it(e,b=>h(b)),g=x.useRef(!1),y=f?u||!!f.closest("form"):!0,[v,w]=Fo({prop:i,defaultProp:s??!1,onChange:c,caller:gw});return p.jsxs(Iae,{scope:n,checked:v,disabled:a,children:[p.jsx(ze.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":$8(v),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:m,onClick:ge(t.onClick,b=>{w(k=>!k),y&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),y&&p.jsx(j8,{control:f,bubbles:!g.current,name:r,value:l,checked:v,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});I8.displayName=gw;var D8="SwitchThumb",L8=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=Dae(D8,n);return p.jsx(ze.span,{"data-state":$8(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});L8.displayName=D8;var Lae="SwitchBubbleInput",j8=x.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const o=x.useRef(null),a=it(o,s),l=s2(n),c=QE(e);return x.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&h){const m=new Event("click",{bubbles:r});h.call(u,n),u.dispatchEvent(m)}},[l,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});j8.displayName=Lae;function $8(t){return t?"checked":"unchecked"}var F8=I8,jae=L8;const fa=x.forwardRef(({className:t,...e},n)=>p.jsx(F8,{className:ve("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:p.jsx(jae,{className:ve("pointer-events-none block size-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));fa.displayName=F8.displayName;const vw=ce(!1);function B8({className:t}){const e=Tt(),[n,r]=V0(),{status:i}=kn();return p.jsxs("div",{className:ve("overflow-auto scrollbar-stone-700",t),children:[p.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[p.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),p.jsxs(or,{children:[p.jsxs(ar,{children:[p.jsxs(lr,{children:[p.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),p.jsx(gf,{children:e("settings.animations.description")})]}),p.jsx(fa,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{r(o=>({...o,animations:s})),s===!1&&I$()}})]}),p.jsxs(or,{children:[p.jsx(ar,{children:p.jsxs(lr,{children:[p.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),p.jsx(Xl,{className:"w-44",...xx({value:n.executionUnit,onValueChange:s=>r(o=>({...o,executionUnit:s})),min:500,max:1})})]}),p.jsx("hr",{className:"border-stone-600"}),p.jsxs(or,{children:[p.jsx(ar,{children:p.jsx(lr,{children:e("settings.instructionCycle.label")})}),p.jsx(fa,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>r(o=>({...o,showInstructionCycle:s}))})]}),p.jsxs(or,{children:[p.jsx(ar,{children:p.jsx(lr,{children:e("settings.statsCPU.label")})}),p.jsx(fa,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>r(o=>({...o,showStatsCPU:s}))})]}),p.jsx("hr",{className:"border-stone-600"}),p.jsx(or,{children:p.jsxs(ar,{children:[p.jsxs(lr,{children:[p.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),p.jsx(gf,{children:e("settings.devices.description")})]})}),p.jsxs(or,{children:[p.jsx(ar,{children:p.jsx(lr,{children:e("settings.devices.keyboard-and-screen")})}),p.jsx(fa,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>r(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),p.jsxs(or,{children:[p.jsxs(ar,{children:[p.jsx(lr,{children:e("settings.devices.pic.label")}),p.jsx(gf,{children:e("settings.devices.pic.description")})]}),p.jsx(fa,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>r(o=>({...o,devices:{...o.devices,pic:s}}))})]}),p.jsxs(or,{children:[p.jsx(ar,{children:p.jsxs(lr,{children:[p.jsx("span",{className:"icon-[lucide--clock] size-6"}),e("settings.speeds.clockSpeed")]})}),p.jsx(Xl,{className:"w-44",...xx({value:n.clockSpeed,onValueChange:s=>r(o=>({...o,clockSpeed:s})),min:3e3,max:100})})]}),p.jsxs(or,{children:[p.jsx(ar,{children:p.jsx(lr,{children:e("settings.devices.pio.label")})}),p.jsxs(mg,{value:n.devices.pio??"null",onValueChange:s=>r(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[p.jsx(Vf,{className:"w-52 min-w-[theme(width.52)]",children:p.jsx(gg,{})}),p.jsx(Wf,{children:aee.map(s=>p.jsx(Kl,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),p.jsxs(or,{children:[p.jsx(ar,{children:p.jsx(lr,{children:e("settings.devices.handshake.label")})}),p.jsxs(mg,{value:n.devices.handshake??"null",onValueChange:s=>r(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:i.type!=="stopped",children:[p.jsx(Vf,{className:"w-52 min-w-[theme(width.52)]",children:p.jsx(gg,{})}),p.jsx(Wf,{children:lee.map(s=>p.jsx(Kl,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),p.jsxs(or,{children:[p.jsx(ar,{children:p.jsxs(lr,{children:[p.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),p.jsx(Xl,{className:"w-44",...xx({value:n.printerSpeed,onValueChange:s=>r(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),p.jsx("hr",{className:"border-stone-600"}),p.jsxs(or,{children:[p.jsxs(ar,{children:[p.jsxs(lr,{children:[p.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),p.jsx(gf,{children:e("settings.flags.description")})]}),p.jsxs(mg,{value:n.flagsVisibility,onValueChange:s=>r(o=>({...o,flagsVisibility:s})),children:[p.jsx(Vf,{className:"w-32",children:p.jsx(gg,{})}),p.jsxs(Wf,{children:[p.jsx(Kl,{value:"CF_ZF",children:"C Z"}),p.jsx(Kl,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),p.jsx("hr",{className:"border-stone-600"}),p.jsxs(or,{children:[p.jsx(ar,{children:p.jsxs(lr,{children:[p.jsx("span",{className:"icon-[lucide--languages] size-6"}),e("settings.language.label")]})}),p.jsxs(mg,{value:n.language,onValueChange:s=>r(o=>({...o,language:s})),children:[p.jsx(Vf,{className:"w-32",children:p.jsx(gg,{})}),p.jsxs(Wf,{children:[p.jsx(Kl,{value:"en",children:p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx("span",{className:"icon-[circle-flags--uk] size-4"})," English"]})}),p.jsx(Kl,{value:"es",children:p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx("span",{className:"icon-[circle-flags--ar] size-4"})," Espaol"]})})]})]})]}),p.jsxs(or,{children:[p.jsx(ar,{children:p.jsxs(lr,{children:[p.jsx("span",{className:"icon-[lucide--pilcrow-square] size-6"}),e("settings.editorFontSize.label")]})}),p.jsxs("div",{className:"flex items-center rounded-lg border border-stone-600 bg-stone-900",children:[p.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize<=8,onClick:()=>r(s=>({...s,editorFontSize:s.editorFontSize-1})),title:e("settings.editorFontSize.decrease"),children:p.jsx("span",{className:"icon-[lucide--minus] size-4"})}),p.jsx("span",{className:"w-8 text-center text-sm font-normal",children:n.editorFontSize}),p.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize>=64,onClick:()=>r(s=>({...s,editorFontSize:s.editorFontSize+1})),title:e("settings.editorFontSize.increase"),children:p.jsx("span",{className:"icon-[lucide--plus] size-4"})})]})]}),p.jsx("hr",{className:"border-stone-600"}),p.jsxs(or,{children:[p.jsxs(ar,{children:[p.jsxs(lr,{children:[p.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),p.jsxs(gf,{children:[e("settings.filters.description"),p.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>r(s=>({...s,filterBightness:au.filterBightness,filterContrast:au.filterContrast,filterInvert:au.filterInvert,filterSaturation:au.filterSaturation})),children:e("settings.filters.revert")})]})]}),p.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[p.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),p.jsx(Xl,{value:[n.filterBightness],onValueChange:([s])=>r(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),p.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),p.jsx(Xl,{value:[n.filterContrast],onValueChange:([s])=>r(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),p.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),p.jsx(fa,{checked:n.filterInvert,onCheckedChange:s=>r(o=>({...o,filterInvert:s}))}),p.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),p.jsx(Xl,{value:[n.filterSaturation],onValueChange:([s])=>r(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),p.jsx("hr",{className:"border-stone-600"}),p.jsx("div",{className:"flex justify-end p-4",children:p.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>r(s=>({...au,language:s.language,devices:s.devices})),children:[p.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function or({children:t}){return p.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function ar({children:t}){return p.jsx("div",{className:"grow",children:t})}function lr({children:t}){return p.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function gf({children:t}){return p.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function xx({value:t,onValueChange:e,min:n,max:r}){const i=Math.log(n),o=(Math.log(r)-i)/100;return{value:[(Math.log(t)-i)/o],onValueChange:a=>e(Math.exp(i+o*a[0])),min:0,max:100}}const $ae=()=>({handleShowTour:x.useCallback(()=>{window.startWelcomeTour?window.startWelcomeTour():(localStorage.removeItem("vonsim8-tour-completed"),window.location.reload())},[])}),z8=x.memo(({status:t})=>{const e=x.useMemo(()=>t.type==="running"?"Ejecutando":"Detenido",[t.type]),n=x.useMemo(()=>t.type==="running"?"bg-green-600":"bg-stone-600",[t.type]);return p.jsx("div",{className:"flex items-center gap-2 text-xs",children:p.jsxs("div",{className:ve("flex items-center gap-2 rounded-full px-3 py-1.5 text-white font-medium",n,t.type==="running"&&"animate-pulse-glow"),children:[p.jsx("div",{className:ve("size-2 rounded-full",t.type==="running"?"bg-green-300":"bg-stone-300")}),e]})})});z8.displayName="SimulationStatus";const U8=x.memo(({onShowTour:t,onToggleSettings:e,settingsOpen:n})=>{const r=Tt();return p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(fF,{}),p.jsx(Kh,{content:"Mostrar tour de bienvenida",position:"bottom",children:p.jsx(LS,{icon:p.jsx(Vt,{icon:tY,className:"size-4"}),onClick:t,variant:"ghost",size:"md","aria-label":"Mostrar tour de bienvenida",className:"hover-lift"})}),p.jsx(Kh,{content:r("settings.title"),position:"bottom",children:p.jsx(LS,{icon:p.jsx("span",{className:"icon-[lucide--settings] block size-5"}),onClick:e,variant:n?"secondary":"ghost",size:"md","aria-label":r("settings.title"),className:ve("hover-lift",n&&"animate-pulse-glow"),"data-testid":"settings-button"})})]})});U8.displayName="ActionButtons";const H8=x.memo(()=>{const[t,e]=Dp(vw),{status:n}=kn(),{handleShowTour:r}=$ae(),i=x.useCallback(()=>{e(o=>!o)},[e]),s=x.useMemo(()=>p.jsxs("div",{className:"flex select-none items-center justify-center hover-scale",children:[p.jsx("img",{src:"/VonSim8/favicon.svg",className:"mr-3 size-10",style:{filter:"none",opacity:1},draggable:!1,alt:"VonSim8 Logo"}),p.jsxs("div",{className:"flex flex-col",children:[p.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",p.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]}),p.jsx("span",{className:"text-xs text-stone-400 max-sm:hidden",children:"Simulador de 8 bits"})]})]}),[]);return p.jsx("header",{className:"relative p-3 text-sm text-white bg-black","data-testid":"header",children:p.jsxs("div",{className:"grid grid-cols-3 items-center",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[s,p.jsx(z8,{status:n})]}),p.jsx("div",{className:"flex justify-center",children:p.jsx(pie,{})}),p.jsx("div",{className:"flex justify-end",children:p.jsx(U8,{onShowTour:r,onToggleSettings:i,settingsOpen:t})})]})})});H8.displayName="Header";const Fae=[{key:"F7",description:"Ejecutar un ciclo",category:"Simulacin"},{key:"F8",description:"Ejecutar una instruccin completa",category:"Simulacin"},{key:"F4",description:"Ejecucin infinita",category:"Simulacin"},{key:"F9",description:"Resetear simulacin",category:"Simulacin"},{key:"Espacio",description:"Pausar/Reanudar (cuando est ejecutando)",category:"Simulacin"},{key:"Ctrl+S",description:"Guardar archivo",category:"Editor"},{key:"Ctrl+O",description:"Abrir archivo",category:"Editor"},{key:"Ctrl+N",description:"Nuevo archivo",category:"Editor"},{key:"Ctrl+Z",description:"Deshacer",category:"Editor"},{key:"Ctrl+Y",description:"Rehacer",category:"Editor"},{key:"Ctrl+F",description:"Buscar",category:"Editor"},{key:"Ctrl+H",description:"Reemplazar",category:"Editor"},{key:"Tab",description:"Indentar",category:"Editor"},{key:"Shift+Tab",description:"Desindentar",category:"Editor"},{key:"F1",description:"Mostrar atajos de teclado",category:"Navegacin"},{key:"F2",description:"Abrir configuracin",category:"Navegacin"},{key:"F3",description:"Buscar en el cdigo",category:"Navegacin"},{key:"F5",description:"Actualizar pgina",category:"Navegacin"},{key:"F6",description:"Cambiar foco al editor",category:"Navegacin"},{key:"Escape",description:"Cerrar dilogos",category:"Interfaz"},{key:"Ctrl+Shift+P",description:"Paleta de comandos",category:"Interfaz"},{key:"Ctrl+B",description:"Mostrar/ocultar barra lateral",category:"Interfaz"},{key:"Ctrl+J",description:"Mostrar/ocultar terminal",category:"Interfaz"},{key:"Ctrl++",description:"Zoom in",category:"Vista"},{key:"Ctrl+-",description:"Zoom out",category:"Vista"},{key:"Ctrl+0",description:"Resetear zoom",category:"Vista"},{key:"Ctrl+Shift+Z",description:"Zoom a la seleccin",category:"Vista"},{key:"F12",description:"Herramientas de desarrollador",category:"Desarrollo"},{key:"Ctrl+Shift+I",description:"Inspeccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+C",description:"Seleccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+J",description:"Consola",category:"Desarrollo"},{key:"Ctrl+Shift+M",description:"Vista mvil",category:"Desarrollo"}],Bae=()=>{const[t,e]=x.useState(!1),n=x.useCallback(()=>{e(!0)},[]),r=x.useCallback(()=>{e(!1)},[]);return x.useEffect(()=>{const i=s=>{s.key==="F1"&&(s.preventDefault(),n())};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[n]),{isOpen:t,openModal:n,closeModal:r}},zae=()=>x.useMemo(()=>{const t=Fae.reduce((e,n)=>(e[n.category]||(e[n.category]=[]),e[n.category].push(n),e),{});return Object.entries(t).sort(([e],[n])=>e.localeCompare(n))},[]),V8=x.memo(({shortcut:t})=>p.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-stone-800 p-3 hover:bg-stone-700 transition-colors",children:[p.jsx("span",{className:"text-sm text-stone-300",children:t.description}),p.jsx("kbd",{className:"rounded bg-stone-700 px-2 py-1 text-xs font-mono text-white border border-stone-600",children:t.key})]}));V8.displayName="ShortcutItem";const W8=x.memo(({category:t,shortcuts:e})=>p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-semibold text-mantis-400 border-b border-stone-600 pb-2",children:t}),p.jsx("div",{className:"space-y-2",children:e.map((n,r)=>p.jsx(V8,{shortcut:n},`${t}-${r}`))})]}));W8.displayName="ShortcutCategory";const G8=x.memo(()=>{const{isOpen:t,closeModal:e}=Bae(),n=zae(),r=x.useCallback(s=>{s.target===s.currentTarget&&e()},[e]),i=x.useCallback(s=>{s.key==="Escape"&&e()},[e]);return x.useEffect(()=>{if(t)return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[t,i]),t?p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:r,children:p.jsxs("div",{className:"w-full max-w-4xl max-h-[80vh] rounded-lg border border-stone-600 bg-stone-900 shadow-xl overflow-hidden",children:[p.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"icon-[lucide--keyboard] size-6 text-mantis-400"}),p.jsx("h2",{className:"text-xl font-semibold text-white",children:"Atajos de Teclado"})]}),p.jsx("button",{onClick:e,className:"rounded p-2 text-stone-400 hover:text-white transition-colors",children:p.jsx(Vt,{icon:UC,size:"lg"})})]}),p.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(80vh-80px)]",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(([s,o])=>p.jsx(W8,{category:s,shortcuts:o},s))})}),p.jsx("div",{className:"border-t border-stone-600 p-4 bg-stone-800",children:p.jsxs("div",{className:"flex items-center justify-between text-sm text-stone-400",children:[p.jsxs("span",{children:["Presiona ",p.jsx("kbd",{className:"rounded bg-stone-700 px-1 py-0.5 text-xs font-mono border border-stone-600",children:"F1"})," para abrir este dilogo"]}),p.jsx(Ds,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"Cerrar"})]})})]})}):null});G8.displayName="KeyboardShortcuts";ce(!1);const vh=[{id:"welcome",target:"app-container",title:"Bienvenido a VonSim8!",content:"Te acompaar en un recorrido por las funciones principales de la plataforma. VonSim8 es un simulador de computadora de 8 bits que te permite programar en lenguaje ensamblador y ver cmo funciona internamente una computadora.",icon:qX,position:"top"},{id:"header",target:"header",title:"Barra de Navegacin",content:"Aqu encontrars el logo, el estado de la simulacin, los controles principales y acceso a notificaciones, tour de ayuda y configuracin.",icon:"icon-[lucide--navigation]",position:"bottom"},{id:"controls",target:"controls-container",title:"Controles de Simulacin",content:"Controla la simulacin: F7 (ejecutar ciclo), F8 (ejecutar instruccin), F4 (ejecucin infinita), F9 (resetear). Tambin puedes usar los botones visuales.",icon:"icon-[lucide--cpu]",position:"bottom"},{id:"editor-buttons",target:"panel-editor",title:"Editor de Cdigo",content:"Aqu es donde escribirs tu cdigo ensamblador. El editor tiene resaltado de sintaxis, autocompletado y validacin en tiempo real. Usa los botones de arriba para crear, abrir, guardar y ensamblar tu programa.",icon:"icon-[lucide--file-terminal]",position:"right"},{id:"computer-view",target:"panel-computer",title:"Simulador de Computadora",content:"Aqu vers la computadora virtual con CPU, memoria RAM, registros, ALU, buses de datos y control, y todos los perifricos como pantalla, teclado, LEDs y switches.",icon:"icon-[lucide--monitor]",position:"left"},{id:"cpu-architecture",target:"cpu-component",title:"Arquitectura CPU",content:"Observa cmo la CPU ejecuta instrucciones paso a paso: fetch, decode, execute. Ve los valores en los registros, el contador de programa y el estado de las banderas.",icon:"icon-[lucide--microchip]",position:"left"},{id:"memory-ram",target:"memory-component",title:"Memoria RAM",content:"Explora la memoria RAM de 256 bytes. Ve cmo se almacenan datos e instrucciones, y cmo la CPU accede a diferentes direcciones de memoria. Cada celda muestra su direccin y valor en hexadecimal.",icon:"icon-[lucide--database]",position:"left"},{id:"settings-button",target:"settings-button",title:"Botn de Configuracin",content:"Haz clic en este engranaje para acceder a las configuraciones avanzadas. Aqu podrs ajustar la velocidad de simulacin, cambiar el tema visual, seleccionar el idioma y personalizar atajos de teclado.",icon:"icon-[lucide--settings]",position:"bottom"},{id:"settings-panel",target:"panel-settings",title:"Panel de Configuracin",content:"En este panel encontrars todas las opciones de configuracin organizadas por categoras: simulacin, interfaz, idioma y atajos de teclado. Los cambios se aplican automticamente.",icon:"icon-[lucide--settings]",position:"left"},{id:"footer",target:"footer-links",title:"Recursos y Soporte",content:"Encuentra documentacin completa, cdigo fuente en GitHub, reporta bugs y accede a recursos de aprendizaje para dominar la programacin en ensamblador.",icon:"icon-[lucide--help-circle]",position:"top"},{id:"final",target:"cycle-button",title:"Listo para Programar!",content:"Ya conoces las funciones principales de VonSim8. Comienza escribiendo cdigo en el editor, ejecuta la simulacin paso a paso con el botn 'Por Ciclo' y observa cmo funciona tu programa en la computadora virtual. Disfruta programando!",icon:"icon-[lucide--rocket]",position:"bottom"}],Uae=()=>{const[t,e]=x.useState(0),[n,r]=x.useState(!1),[i,s]=x.useState(!0),[,o]=Dp(vw),a=x.useMemo(()=>t===vh.length-1,[t]),l=x.useMemo(()=>t===0,[t]),c=x.useCallback(()=>{r(!1),localStorage.setItem("vonsim8-tour-completed","true")},[]),u=x.useCallback(()=>{e(m=>Math.min(m+1,vh.length-1))},[]),d=x.useCallback(()=>{e(m=>Math.max(m-1,0))},[]),f=x.useCallback(()=>{c()},[c]),h=x.useCallback(()=>{r(!0),e(0)},[]);return x.useEffect(()=>{},[]),x.useEffect(()=>{const m=vh[t],g=document.querySelector(`[data-testid="${m.target}"]`);s(!!g),m.id==="settings-button"?o(!0):m.id!=="settings-panel"&&m.id!=="settings-button"&&o(!1)},[t,o]),{currentStep:t,isVisible:n,isLastStep:a,isFirstStep:l,handleNext:u,handlePrev:d,handleSkip:f,completeTour:c,startTour:h,targetFound:i}},Hae=t=>x.useMemo(()=>{const e=document.querySelector(`[data-testid="${t.target}"]`);if(!e)return null;const n=e.getBoundingClientRect(),r=window.innerWidth,i=window.innerHeight;if(t.id==="welcome"&&t.position==="top")return{positionStyles:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},highlightStyles:{top:0,left:0,width:"100vw",height:"100vh"}};if(t.id==="footer"){let m=n.top-200-60,g=n.right+20;const y="translateX(0)";m<40&&(m=40),m+200>i-100&&(m=Math.max(40,i/2-200/2)),g+320>r&&(g=r-320-20);const v={top:m,left:g,transform:y},w={top:n.top-2,left:n.left-2,width:n.width+4,height:n.height+4};return{positionStyles:v,highlightStyles:w}}let s,o,a;switch(t.position){case"top":s=n.top-20,o=n.left+n.width/2,a="translateX(-50%)";break;case"bottom":s=n.bottom+20,o=n.left+n.width/2,a="translateX(-50%)";break;case"left":s=n.top+n.height/2,o=n.left-20,a="translateY(-50%)";break;case"right":s=n.top+n.height/2,o=n.right+20,a="translateY(-50%)";break}const l=320,c=200;o+l/2>r?o=r-l/2-20:o-l/2<0&&(o=l/2+20),s+c>i?s=i-c-20:s<0&&(s=20);const u={top:s,left:o,transform:a},d={top:n.top-8,left:n.left-8,width:n.width+16,height:n.height+16};return{positionStyles:u,highlightStyles:d}},[t]),K8=x.memo(({current:t,total:e})=>p.jsx("div",{className:"mb-2 w-full h-2 bg-stone-700 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-mantis-500 transition-all duration-300",style:{width:`${(t+1)/e*100}%`}})}));K8.displayName="ProgressBar";const X8=x.memo(({step:t,currentStep:e,isLastStep:n,isFirstStep:r,onNext:i,onPrev:s,onSkip:o,onFinish:a,totalSteps:l,targetFound:c})=>{const u=Hae(t),d=x.useRef(null);x.useEffect(()=>{var g;(g=d.current)==null||g.focus()},[e]);const f="animate-fade-in";if(!c||!u)return p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:p.jsxs("div",{className:"rounded-lg bg-stone-900 p-8 text-center shadow-2xl border-2 border-mantis-400 max-w-sm",children:[p.jsx(Vt,{icon:DS,className:"mb-4 text-4xl text-yellow-400"}),p.jsx("h3",{className:"mb-2 text-lg font-semibold text-mantis-400",children:"Elemento no encontrado"}),p.jsx("p",{className:"mb-4 text-stone-300",children:"No se pudo encontrar el elemento de la interfaz para este paso del tour."}),p.jsx(Ds,{onClick:o,className:"bg-mantis-600 hover:bg-mantis-700",children:"Saltar tour"})]})});const{positionStyles:h,highlightStyles:m}=u;return p.jsx("div",{className:"fixed inset-0 z-50 bg-black/50",children:p.jsxs("div",{className:"relative size-full",children:[p.jsx("div",{className:"absolute rounded-lg border-2 border-mantis-400 bg-transparent shadow-2xl transition-all duration-300",style:m}),p.jsxs("div",{ref:d,tabIndex:-1,role:"dialog","aria-modal":"true",className:`absolute max-w-sm rounded-lg bg-stone-900 p-6 text-white shadow-xl border border-mantis-400 focus:outline-none ${f}`,style:h,children:[p.jsx(K8,{current:e,total:l}),p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.icon&&(typeof t.icon=="string"?p.jsx("span",{className:`${t.icon} text-2xl text-mantis-400`}):p.jsx(Vt,{icon:t.icon,className:"text-2xl text-mantis-400"})),p.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:t.title})]}),p.jsx("p",{className:"mb-4 text-sm text-stone-300",children:t.content}),p.jsxs("div",{className:"flex items-center justify-between mt-4 gap-2",children:[p.jsx(Ds,{variant:"ghost",size:"sm",onClick:o,className:"text-stone-400 hover:text-white","aria-label":"Saltar tour",children:"Saltar"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(Ds,{variant:"outline",size:"sm",onClick:s,disabled:r,className:"flex items-center gap-1","aria-label":"Anterior",children:[p.jsx(Vt,{icon:lY}),"Anterior"]}),n?p.jsxs(Ds,{size:"sm",onClick:a,className:"bg-mantis-600 hover:bg-mantis-700 flex items-center gap-1","aria-label":"Finalizar",children:["Finalizar",p.jsx(Vt,{icon:ZX})]}):p.jsxs(Ds,{size:"sm",onClick:i,className:"bg-mantis-600 hover:bg-mantis-700 flex items-center gap-1","aria-label":"Siguiente",children:["Siguiente",p.jsx(Vt,{icon:cY})]})]})]}),p.jsxs("div",{className:"mt-2 text-xs text-stone-500 text-right",children:["Paso ",e+1," de ",l]}),p.jsx("button",{onClick:o,className:"absolute top-2 right-2 rounded p-1 text-stone-400 hover:text-white focus:outline-none","aria-label":"Cerrar",children:p.jsx(Vt,{icon:UC,size:"sm"})})]})]})})});X8.displayName="TourTooltip";const Y8=x.memo(()=>{const{currentStep:t,isVisible:e,isLastStep:n,isFirstStep:r,handleNext:i,handlePrev:s,handleSkip:o,completeTour:a,startTour:l,targetFound:c}=Uae();x.useEffect(()=>(window.startWelcomeTour=l,()=>{delete window.startWelcomeTour}),[l]);const u=x.useMemo(()=>vh[t],[t]);return x.useEffect(()=>{if(!e)return;const d=f=>{f.key==="Escape"&&o(),f.key==="ArrowRight"&&i(),f.key==="ArrowLeft"&&s()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[e,o,i,s]),!e||!u?null:p.jsx(X8,{step:u,currentStep:t,isLastStep:n,isFirstStep:r,onNext:i,onPrev:s,onSkip:o,onFinish:a,totalSteps:vh.length,targetFound:c})});Y8.displayName="WelcomeTour";var Pi=function(t,e){return Number(t.toFixed(e))},Vae=function(t,e){return e},Ft=function(t,e,n){n&&typeof n=="function"&&n(t,e)},Wae=function(t){return-Math.cos(t*Math.PI)/2+.5},Gae=function(t){return t},Kae=function(t){return t*t},Xae=function(t){return t*(2-t)},Yae=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},qae=function(t){return t*t*t},Jae=function(t){return--t*t*t+1},Zae=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},Qae=function(t){return t*t*t*t},ele=function(t){return 1- --t*t*t*t},tle=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},nle=function(t){return t*t*t*t*t},rle=function(t){return 1+--t*t*t*t*t},ile=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},q8={easeOut:Wae,linear:Gae,easeInQuad:Kae,easeOutQuad:Xae,easeInOutQuad:Yae,easeInCubic:qae,easeOutCubic:Jae,easeInOutCubic:Zae,easeInQuart:Qae,easeOutQuart:ele,easeInOutQuart:tle,easeInQuint:nle,easeOutQuint:rle,easeInOutQuint:ile},J8=function(t){typeof t=="number"&&cancelAnimationFrame(t)},ns=function(t){t.mounted&&(J8(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function Z8(t,e,n,r){if(t.mounted){var i=new Date().getTime(),s=1;ns(t),t.animation=function(){if(!t.mounted)return J8(t.animation);var o=new Date().getTime()-i,a=o/n,l=q8[e],c=l(a);o>=n?(r(s),t.animation=null):t.animation&&(r(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function sle(t){var e=t.scale,n=t.positionX,r=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(r))}function El(t,e,n,r){var i=sle(e);if(!(!t.mounted||!i)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,f=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):Z8(t,r,n,function(h){var m=a+u*h,g=l+d*h,y=c+f*h;s(m,g,y)})}}function ole(t,e,n){var r=t.offsetWidth,i=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=r-a,u=i-l;return{wrapperWidth:r,wrapperHeight:i,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var ale=function(t,e,n,r,i,s,o){var a=t>e?n*(o?1:.5):0,l=r>i?s*(o?1:.5):0,c=t-e-a,u=a,d=r-i-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},c2=function(t,e){var n=t.wrapperComponent,r=t.contentComponent,i=t.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var s=ole(n,r,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,f=ale(o,l,c,a,u,d,!!i);return f},Jk=function(t,e,n,r){return r?t<e?Pi(e,2):t>n?Pi(n,2):Pi(t,2):Pi(t,2)},hc=function(t,e){var n=c2(t,e);return t.bounds=n,n};function qp(t,e,n,r,i,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;o&&(d=i,f=s);var h=Jk(t,a-d,c+d,r),m=Jk(e,l-f,u+f,r);return{x:h,y:m}}function yw(t,e,n,r,i,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=r-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,f=c-n*u,h=qp(d,f,i,s,0,0,null);return h}function Jp(t,e,n,r,i){var s=i?r:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var LR=function(t,e){var n=t.setup.panning.excluded,r=t.isInitialized,i=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(u){return u instanceof Element?i==null?void 0:i.contains(u):!1}):i==null?void 0:i.contains(s),l=r&&s&&a;if(!l)return!1;var c=ww(s,n);return!c},jR=function(t){var e=t.isInitialized,n=t.isPanning,r=t.setup,i=r.panning.disabled,s=e&&n&&!i;return!!s},lle=function(t,e){var n=t.transformState,r=n.positionX,i=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-r,y:o-i}},cle=function(t,e){var n=e.touches,r=t.transformState,i=r.positionX,s=r.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-i,y:l-s}}};function ule(t){var e=t.transformState,n=e.positionX,r=e.positionY,i=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,f=u.minPositionX,h=u.maxPositionY,m=u.minPositionY,g=n>d||n<f,y=r>h||r<m,v=n>d?c.offsetWidth:t.setup.minPositionX||0,w=r>h?c.offsetHeight:t.setup.minPositionY||0,b=yw(t,v,w,i,t.bounds,a||l),k=b.x,_=b.y;return{scale:i,positionX:g?k:n,positionY:y?_:r}}}function Q8(t,e,n,r,i){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var f=qp(e,n,a,s,r,i,o),h=f.x,m=f.y;t.setTransformState(c,h,m)}}var dle=function(t,e,n){var r=t.startCoords,i=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=i.positionX,c=i.positionY;if(!r)return{x:l,y:c};var u=e-r.x,d=n-r.y,f=o?l:u,h=a?c:d;return{x:f,y:h}},ml=function(t,e){var n=t.setup,r=t.transformState,i=r.scale,s=n.minScale,o=n.disablePadding;return e>0&&i>=s&&!o?e:0},fle=function(t){var e=t.mounted,n=t.setup,r=n.disabled,i=n.velocityAnimation,s=t.transformState.scale,o=i.disabled,a=!o||s>1||!r||e;return!!a},hle=function(t){var e=t.mounted,n=t.velocity,r=t.bounds,i=t.setup,s=i.disabled,o=i.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!r)};function ple(t,e){var n=t.setup.velocityAnimation,r=n.equalToMove,i=n.animationTime,s=n.sensitivity;return r?i*e*s:i}function $R(t,e,n,r,i,s,o,a,l,c){if(i){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return r?e:Jk(t,s,o,i)}function mle(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function gle(t,e){var n=fle(t);if(n){var r=t.lastMousePosition,i=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(r&&i&&o){var c=mle(o,a),u=e.x-r.x,d=e.y-r.y,f=u/c,h=d/c,m=l-i,g=u*u+d*d,y=Math.sqrt(g)/m;t.velocity={velocityX:f,velocityY:h,total:y}}t.lastMousePosition=e,t.velocityTime=l}}function vle(t){var e=t.velocity,n=t.bounds,r=t.setup,i=t.wrapperComponent,s=hle(t);if(!(!s||!e||!n||!i)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,h=r.limitToBounds,m=r.alignmentAnimation,g=r.zoomAnimation,y=r.panning,v=y.lockAxisY,w=y.lockAxisX,b=g.animationType,k=m.sizeX,_=m.sizeY,E=m.velocityAlignmentTime,C=E,P=ple(t,l),M=Math.max(P,C),O=ml(t,k),I=ml(t,_),D=O*i.offsetWidth/100,G=I*i.offsetHeight/100,U=c+D,X=u-D,Z=d+G,te=f-G,H=t.transformState,$=new Date().getTime();Z8(t,b,M,function(ne){var ke=t.transformState,J=ke.scale,ae=ke.positionX,j=ke.positionY,L=new Date().getTime()-$,z=L/C,S=q8[m.animationType],N=1-S(Math.min(1,z)),R=1-ne,T=ae+o*R,K=j+a*R,V=$R(T,H.positionX,ae,w,h,u,c,X,U,N),ee=$R(K,H.positionY,j,v,h,f,d,te,Z,N);(ae!==T||j!==K)&&t.setTransformState(J,V,ee)})}}function FR(t,e){var n=t.transformState.scale;ns(t),hc(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?cle(t,e):lle(t,e)}function u2(t,e){var n=t.transformState.scale,r=t.setup,i=r.minScale,s=r.alignmentAnimation,o=s.disabled,a=s.sizeX,l=s.sizeY,c=s.animationTime,u=s.animationType,d=o||n<i||!a&&!l;if(!d){var f=ule(t);f&&El(t,f,e??c,u)}}function BR(t,e,n){var r=t.startCoords,i=t.setup,s=i.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(r){var l=dle(t,e,n),c=l.x,u=l.y,d=ml(t,o),f=ml(t,a);gle(t,{x:c,y:u}),Q8(t,c,u,d,f)}}function yle(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,r=t.wrapperComponent,i=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=r==null?void 0:r.getBoundingClientRect(),o=i==null?void 0:i.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,f=!e&&n&&(n==null?void 0:n.total)>.1&&d;f?vle(t):u2(t)}}function d2(t,e,n,r){var i=t.setup,s=i.minScale,o=i.maxScale,a=i.limitToBounds,l=Jp(Pi(e,2),s,o,0,!1),c=hc(t,l),u=yw(t,n,r,l,c,a),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function e6(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||r>=o;if((r>=1||a)&&u2(t),!(f||!i||!t.mounted)){var h=e||i.offsetWidth/2,m=n||i.offsetHeight/2,g=d2(t,o,h,m);g&&El(t,g,u,d)}}var qa=function(){return qa=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qa.apply(this,arguments)};function zR(t,e,n){for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var vg={scale:1,positionX:0,positionY:0},vf={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},Zk={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},t6=function(t){var e,n,r,i;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:vg.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:vg.scale,positionX:(r=t.initialPositionX)!==null&&r!==void 0?r:vg.positionX,positionY:(i=t.initialPositionY)!==null&&i!==void 0?i:vg.positionY}},UR=function(t){var e=qa({},vf);return Object.keys(t).forEach(function(n){var r=typeof t[n]<"u",i=typeof vf[n]<"u";if(i&&r){var s=Object.prototype.toString.call(vf[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=qa(qa({},vf[n]),t[n]):a?e[n]=zR(zR([],vf[n],!0),t[n]):e[n]=t[n]}}),e},n6=function(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!i)throw new Error("Wrapper is not mounted");var d=c?r*Math.exp(e*n):r+e*n,f=Jp(Pi(d,3),a,o,u,!1);return f};function r6(t,e,n,r,i){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,f=(u/2-l)/a,h=(d/2-c)/a,m=n6(t,e,n),g=d2(t,m,f,h);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");El(t,g,r,i)}function i6(t,e,n,r){var i=t.setup,s=t.wrapperComponent,o=i.limitToBounds,a=t6(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var f=c2(t,a.scale),h=qp(a.positionX,a.positionY,f,o,0,0,s),m={scale:a.scale,positionX:h.x,positionY:h.y};c===a.scale&&u===a.positionX&&d===a.positionY||(r==null||r(),El(t,m,e,n))}}function wle(t,e,n,r){var i=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*r.scale,l=s.y*r.scale;return{x:(i.x-o.x+a)/r.scale,y:(i.y-o.y+l)/r.scale}}function ble(t,e,n){var r=t.wrapperComponent,i=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!r||!i)return s;var u=r.getBoundingClientRect(),d=e.getBoundingClientRect(),f=wle(e,r,i,s),h=f.x,m=f.y,g=d.width/s.scale,y=d.height/s.scale,v=r.offsetWidth/g,w=r.offsetHeight/y,b=Jp(n||Math.min(v,w),l,c,0,!1),k=(u.width-g*b)/2,_=(u.height-y*b)/2,E=(u.left-h)*b+k,C=(u.top-m)*b+_,P=c2(t,b),M=qp(E,C,P,a,0,0,r),O=M.x,I=M.y;return{positionX:O,positionY:I,scale:b}}var xle=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),r6(t,1,e,n,r)}},Sle=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),r6(t,-1,e,n,r)}},kle=function(t){return function(e,n,r,i,s){i===void 0&&(i=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!u||!d)){var h={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(r)?c:r};El(t,h,i,s)}}},_le=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),i6(t,e,n)}},Cle=function(t){return function(e,n,r){n===void 0&&(n=200),r===void 0&&(r="easeOut");var i=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=s6(e||i.scale,s,o);El(t,a,n,r)}}},Ele=function(t){return function(e,n,r,i){r===void 0&&(r=600),i===void 0&&(i="easeOut"),ns(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=ble(t,o,n);El(t,a,r,i)}}},Qk=function(t){return{instance:t,zoomIn:xle(t),zoomOut:Sle(t),setTransform:kle(t),resetTransform:_le(t),centerView:Cle(t),zoomToElement:Ele(t)}},Ale=function(t){return{instance:t,state:t.transformState}},Pt=function(t){var e={};return Object.assign(e,Ale(t)),Object.assign(e,Qk(t)),e},Sx=!1;function kx(){try{var t={get passive(){return Sx=!0,!1}};return t}catch{return Sx=!1,Sx}}var yg=".".concat(Zk.wrapperClass),ww=function(t,e){return e.some(function(n){return t.matches("".concat(yg," ").concat(n,", ").concat(yg," .").concat(n,", ").concat(yg," ").concat(n," *, ").concat(yg," .").concat(n," *"))})},e_=function(t){t&&clearTimeout(t)},Ple=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},s6=function(t,e,n){var r=n.offsetWidth*t,i=n.offsetHeight*t,s=(e.offsetWidth-r)/2,o=(e.offsetHeight-i)/2;return{scale:t,positionX:s,positionY:o}};function Nle(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Tle=function(t,e){var n=t.setup.wheel,r=n.disabled,i=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!r&&c;if(!u||i&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=ww(c,o);return!d},Mle=function(t){return t?t.deltaY<0?1:-1:0};function Rle(t,e){var n=Mle(t),r=Vae(e,n);return r}function o6(t,e,n){var r=e.getBoundingClientRect(),i=0,s=0;if("clientX"in t)i=(t.clientX-r.left)/n,s=(t.clientY-r.top)/n;else{var o=t.touches[0];i=(o.clientX-r.left)/n,s=(o.clientY-r.top)/n}return(Number.isNaN(i)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:i,y:s}}var Ole=function(t,e,n,r,i){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,f=u.size,h=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var m=s+e*n,g=r?!1:!h,y=Jp(Pi(m,3),c,l,f,g&&!d);return y},Ile=function(t,e){var n=t.previousWheelEvent,r=t.transformState.scale,i=t.setup,s=i.maxScale,o=i.minScale;return n?r<s||r>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},Dle=function(t,e){var n=t.setup.pinch,r=n.disabled,i=n.excluded,s=t.isInitialized,o=e.target,a=s&&!r&&o;if(!a)return!1;var l=ww(o,i);return!l},Lle=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,r=t.pinchStartDistance,i=n&&!e&&r;return!!i},jle=function(t,e,n){var r=n.getBoundingClientRect(),i=t.touches,s=Pi(i[0].clientX-r.left,5),o=Pi(i[0].clientY-r.top,5),a=Pi(i[1].clientX-r.left,5),l=Pi(i[1].clientY-r.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},a6=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},$le=function(t,e){var n=t.pinchStartScale,r=t.pinchStartDistance,i=t.setup,s=i.maxScale,o=i.minScale,a=i.zoomAnimation,l=i.disablePadding,c=a.size,u=a.disabled;if(!n||r===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/r,f=d*n;return Jp(Pi(f,2),o,s,c,!u&&!l)},Fle=160,Ble=100,zle=function(t,e){var n=t.props,r=n.onWheelStart,i=n.onZoomStart;t.wheelStopEventTimer||(ns(t),Ft(Pt(t),e,r),Ft(Pt(t),e,i))},Ule=function(t,e){var n=t.props,r=n.onWheel,i=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,h=o.disablePadding,m=o.smooth,g=d.size,y=d.disabled,v=f.step,w=f.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var b=Rle(e,null),k=m?w*Math.abs(e.deltaY):v,_=Ole(t,b,k,!e.ctrlKey);if(l!==_){var E=hc(t,_),C=o6(e,s,l),P=y||g===0||u||h,M=c&&P,O=yw(t,C.x,C.y,_,E,M),I=O.x,D=O.y;t.previousWheelEvent=e,t.setTransformState(_,I,D),Ft(Pt(t),e,r),Ft(Pt(t),e,i)}},Hle=function(t,e){var n=t.props,r=n.onWheelStop,i=n.onZoomStop;e_(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(e6(t,e.x,e.y),t.wheelAnimationTimer=null)},Ble);var s=Ile(t,e);s&&(e_(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Ft(Pt(t),e,r),Ft(Pt(t),e,i))},Fle))},l6=function(t){for(var e=0,n=0,r=0;r<2;r+=1)e+=t.touches[r].clientX,n+=t.touches[r].clientY;var i=e/2,s=n/2;return{x:i,y:s}},Vle=function(t,e){var n=a6(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var r=l6(e);t.pinchLastCenterX=r.x,t.pinchLastCenterY=r.y,ns(t)},Wle=function(t,e){var n=t.contentComponent,r=t.pinchStartDistance,i=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,c=o.zoomAnimation,u=o.alignmentAnimation,d=c.disabled,f=c.size;if(!(r===null||!n)){var h=jle(e,s,n);if(!(!Number.isFinite(h.x)||!Number.isFinite(h.y))){var m=a6(e),g=$le(t,m),y=l6(e),v=y.x-(t.pinchLastCenterX||0),w=y.y-(t.pinchLastCenterY||0);if(!(g===s&&v===0&&w===0)){t.pinchLastCenterX=y.x,t.pinchLastCenterY=y.y;var b=hc(t,g),k=d||f===0||l,_=a&&k,E=yw(t,h.x,h.y,g,b,_),C=E.x,P=E.y;t.pinchMidpoint=h,t.lastDistance=m;var M=u.sizeX,O=u.sizeY,I=ml(t,M),D=ml(t,O),G=C+v,U=P+w,X=qp(G,U,b,a,I,D,i),Z=X.x,te=X.y;t.setTransformState(g,Z,te)}}}},Gle=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,e6(t,e==null?void 0:e.x,e==null?void 0:e.y)},c6=function(t,e){var n=t.props.onZoomStop,r=t.setup.doubleClick.animationTime;e_(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Ft(Pt(t),e,n)},r)},Kle=function(t,e){var n=t.props,r=n.onZoomStart,i=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Ft(Pt(t),e,r),i6(t,o,a,function(){return Ft(Pt(t),e,i)}),c6(t,e)};function Xle(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function Yle(t,e){var n=t.setup,r=t.doubleClickStopEventTimer,i=t.transformState,s=t.contentComponent,o=i.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,h=u.step,m=u.animationTime,g=u.animationType;if(!d&&!r){if(f==="reset")return Kle(t,e);if(!s)return console.error("No ContentComponent found");var y=Xle(f,t.transformState.scale),v=n6(t,y,h);if(o!==v){Ft(Pt(t),e,l);var w=o6(e,s,o),b=d2(t,v,w.x,w.y);if(!b)return console.error("Error during zoom event. New transformation state was not calculated.");Ft(Pt(t),e,c),El(t,b,m,g),c6(t,e)}}}var qle=function(t,e){var n=t.isInitialized,r=t.setup,i=t.wrapperComponent,s=r.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=i==null?void 0:i.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=ww(l,a);return!d},Jle=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(r){n.props=r,hc(n,n.transformState.scale),n.setup=UR(r)},this.initializeWindowEvents=function(){var r,i,s=kx(),o=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=o==null?void 0:o.defaultView;(i=n.wrapperComponent)===null||i===void 0||i.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var r,i,s=kx(),o=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),ns(n),(i=n.observer)===null||i===void 0||i.disconnect()},this.handleInitializeWrapperEvents=function(r){var i=kx();r.addEventListener("wheel",n.onWheelZoom,i),r.addEventListener("dblclick",n.onDoubleClick,i),r.addEventListener("touchstart",n.onTouchPanningStart,i),r.addEventListener("touchmove",n.onTouchPanning,i),r.addEventListener("touchend",n.onTouchPanningStop,i)},this.handleInitialize=function(r,i){var s=!1,o=n.setup.centerOnInit,a=function(l,c){for(var u=0,d=l;u<d.length;u++){var f=d[u];if(f.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(l){l(Pt(n))}),n.observer=new ResizeObserver(function(l){if(a(l,r)||a(l,i))if(o&&!s){var c=i.offsetWidth,u=i.offsetHeight;(c>0||u>0)&&(s=!0,n.setCenter())}else ns(n),hc(n,n.transformState.scale),u2(n,0)}),n.observer.observe(r),n.observer.observe(i)},this.onWheelZoom=function(r){var i=n.setup.disabled;if(!i){var s=Tle(n,r);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(zle(n,r),Ule(n,r),Hle(n,r))}}},this.onWheelPanning=function(r){var i=n.setup,s=i.disabled,o=i.wheel,a=i.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||r.ctrlKey)){r.preventDefault(),r.stopPropagation();var l=n.transformState,c=l.positionX,u=l.positionY,d=c-r.deltaX,f=u-r.deltaY,h=a.lockAxisX?c:d,m=a.lockAxisY?u:f,g=n.setup.alignmentAnimation,y=g.sizeX,v=g.sizeY,w=ml(n,y),b=ml(n,v);h===c&&m===u||Q8(n,h,m,w,b)}},this.onPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=LR(n,r);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.button===0&&!n.setup.panning.allowLeftClickPan||r.button===1&&!n.setup.panning.allowMiddleClickPan||r.button===2&&!n.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),ns(n),FR(n,r),Ft(Pt(n),r,s)))}}},this.onPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(!i){var o=jR(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.preventDefault(),r.stopPropagation(),BR(n,r.clientX,r.clientY),Ft(Pt(n),r,s))}}},this.onPanningStop=function(r){var i=n.props.onPanningStop;n.isPanning&&(yle(n),Ft(Pt(n),r,i))},this.onPinchStart=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!i){var l=Dle(n,r);l&&(Vle(n,r),ns(n),Ft(Pt(n),r,o),Ft(Pt(n),r,a))}},this.onPinch=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!i){var l=Lle(n);l&&(r.preventDefault(),r.stopPropagation(),Wle(n,r),Ft(Pt(n),r,o),Ft(Pt(n),r,a))}},this.onPinchStop=function(r){var i=n.props,s=i.onPinchingStop,o=i.onZoomStop;n.pinchStartScale&&(Gle(n),Ft(Pt(n),r,s),Ft(Pt(n),r,o))},this.onTouchPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=LR(n,r);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200&&r.touches.length===1;if(!a){n.lastTouch=+new Date,ns(n);var l=r.touches,c=l.length===1,u=l.length===2;c&&(ns(n),FR(n,r),Ft(Pt(n),r,s)),u&&n.onPinchStart(r)}}}},this.onTouchPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&r.touches.length===1){if(i)return;var o=jR(n);if(!o)return;r.preventDefault(),r.stopPropagation();var a=r.touches[0];BR(n,a.clientX,a.clientY),Ft(Pt(n),r,s)}else r.touches.length>1&&n.onPinch(r)},this.onTouchPanningStop=function(r){n.onPanningStop(r),n.onPinchStop(r)},this.onDoubleClick=function(r){var i=n.setup.disabled;if(!i){var s=qle(n,r);s&&Yle(n,r)}},this.clearPanning=function(r){n.isPanning&&n.onPanningStop(r)},this.setKeyPressed=function(r){n.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){n.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(i){return n.pressedKeys[i]}):!0},this.setTransformState=function(r,i,s){var o=n.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(s)){r!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=r),n.transformState.positionX=i,n.transformState.positionY=s,n.applyTransformation();var a=Pt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Ft(a,{scale:r,positionX:i,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var r=s6(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,i,s){return n.props.customTransform?n.props.customTransform(r,i,s):Ple(r,i,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var r=n.transformState,i=r.scale,s=r.positionX,o=r.positionY,a=n.handleTransformStyles(s,o,i);n.contentComponent.style.transform=a}},this.getContext=function(){return Pt(n)},this.onChange=function(r){return n.onChangeCallbacks.has(r)||n.onChangeCallbacks.add(r),function(){n.onChangeCallbacks.delete(r)}},this.onInit=function(r){return n.onInitCallbacks.has(r)||n.onInitCallbacks.add(r),function(){n.onInitCallbacks.delete(r)}},this.init=function(r,i){n.cleanupWindowEvents(),n.wrapperComponent=r,n.contentComponent=i,hc(n,n.transformState.scale),n.handleInitializeWrapperEvents(r),n.handleInitialize(r,i),n.initializeWindowEvents(),n.isInitialized=!0;var s=Pt(n);Ft(s,void 0,n.props.onInit)},this.props=e,this.setup=UR(this.props),this.transformState=t6(this.props)}return t}(),f2=Ot.createContext(null),Zle=function(t,e){return typeof t=="function"?t(e):t},Qle=Ot.forwardRef(function(t,e){var n=x.useRef(new Jle(t)).current,r=Zle(t.children,Qk(n));return x.useImperativeHandle(e,function(){return Qk(n)},[n]),x.useEffect(function(){n.update(t)},[n,t]),Ot.createElement(f2.Provider,{value:n},r)});Ot.forwardRef(function(t,e){var n=x.useRef(null),r=x.useContext(f2);return x.useEffect(function(){return r.onChange(function(i){if(n.current){var s=0,o=0;n.current.style.transform=r.handleTransformStyles(s,o,1/i.instance.transformState.scale)}})},[r]),Ot.createElement("div",qa({},t,{ref:Nle([n,e])}))});function ece(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var tce=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,HR={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};ece(tce);var nce=function(t){var e=t.children,n=t.wrapperClass,r=n===void 0?"":n,i=t.contentClass,s=i===void 0?"":i,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,f=x.useContext(f2),h=f.init,m=f.cleanupWindowEvents,g=x.useRef(null),y=x.useRef(null);return x.useEffect(function(){var v=g.current,w=y.current;return v!==null&&w!==null&&h&&(h==null||h(v,w)),function(){m==null||m()}},[]),Ot.createElement("div",qa({},c,{ref:g,className:"".concat(Zk.wrapperClass," ").concat(HR.wrapper," ").concat(r),style:o}),Ot.createElement("div",qa({},d,{ref:y,className:"".concat(Zk.contentClass," ").concat(HR.content," ").concat(s),style:a}),e))};function rce({wrapperRef:t}){const e=Tt();return p.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[p.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:p.jsx("span",{className:"size-4",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),p.jsx("hr",{className:"border-stone-600"}),p.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:p.jsx("span",{className:"size-4",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function ice(){const t=Tt(),e=nt(ft),n=nt(dy),r=nt(an),i=nt(xy),[s]=V0(),o=x.useRef(null),a=(l,c)=>{const[u,...d]=l.split(":"),f=d.join(":").trim();return{cycle:c,stage:u.trim(),action:f}};return x.useEffect(()=>{if(e){const l=B.get(Cc),c=a(e,l);B.set(dy,u=>[...u,c])}},[e]),x.useEffect(()=>{r.type==="running"&&i&&Qr({title:"El programa ha sido modificado",description:"La ejecucin se reiniciar desde el principio para aplicar los cambios.",variant:"info"})},[r,i]),x.useEffect(()=>{const l=o.current;l&&(l.scrollTop=l.scrollHeight)},[n]),s.showInstructionCycle?p.jsxs("div",{className:"absolute left-[120px] top-[520px] z-10 h-min w-[300px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"mb-2 block h-min w-full cursor-move rounded-br-lg rounded-tl-lg border-b border-stone-600 bg-purple-500 px-2 py-1 text-lg text-white",children:t("computer.cpu.instruction-cycle")}),p.jsx("hr",{className:"border-stone-600"}),p.jsx("div",{ref:o,className:"flex max-h-[300px] w-full flex-col overflow-y-auto p-2",children:n.map((l,c)=>{const u=c===0||n[c-1].stage!==l.stage;return p.jsxs("div",{children:[u&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:`mb-2 ${l.stage==="Captacin"?"font-serif text-lg text-blue-400":l.stage==="Ejecucin"?"font-sans text-lg text-green-400":l.stage==="Interrupcin"?"font-mono text-lg text-red-400":"text-sm font-bold text-white"}`,children:["Etapa: ",l.stage]}),l.stage!=="Interrupcin"&&p.jsxs("div",{className:"mb-2 flex font-serif text-sm font-bold text-white",children:[p.jsx("div",{className:"w-1/4 text-center",children:"Ciclo"}),p.jsx("div",{className:"w-3/4 text-left",children:"Accin"})]})]}),l.stage==="Interrupcin"?p.jsx("div",{className:"mb-1 text-sm text-white",children:l.action}):p.jsxs("div",{className:"mb-1 flex text-sm text-white",children:[p.jsx("div",{className:"w-1/4 text-center",children:l.cycle}),p.jsx("div",{className:"w-3/4 text-left",children:l.action})]})]},c)})})]}):null}function sce(){const t=Tt(),{devices:e}=kn();return e.hasIOBus?p.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:p.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function oce(){const{devices:t}=kn(),e=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),n=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),r="M 750 545 H 800",{path:i,strokeDashoffset:s,opacity:o}=pt("bus.rd"),{path:a,strokeDashoffset:l,opacity:c}=pt("bus.wr");return p.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[p.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:e}),p.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:e}),p.jsx(on.path,{d:i,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:s,opacity:o}}),p.jsx(on.text,{x:"590",y:"410",className:"pointer-events-none fill-red-500 font-mono text-xs font-bold",textAnchor:"middle",style:{opacity:o},children:"Read"}),p.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),p.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:n}),p.jsx(on.path,{d:a,className:"fill-none stroke-blue-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:l,opacity:c}}),p.jsx(on.text,{x:"590",y:"455",className:"pointer-events-none fill-blue-500 font-mono text-xs font-bold",textAnchor:"middle",style:{opacity:c},children:"Write"}),t.hasIOBus&&p.jsxs(p.Fragment,{children:[p.jsx(En,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),p.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:r}),p.jsx(on.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:r,style:pt("bus.mem")})]}),t.pic&&p.jsx(En,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&p.jsx(En,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&p.jsx(En,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&p.jsx(En,{springs:"bus.handshake",d:"M 710 595 V 950 H 900"}),t.pic&&p.jsxs(p.Fragment,{children:[p.jsx(En,{springs:"bus.intr",d:"M 110 700 V 470"}),p.jsx(En,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&p.jsx(En,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&p.jsx(En,{springs:"bus.int1",d:"M 475 955 H 400 V 900"}),t.pic&&t.handshake&&p.jsx(En,{springs:"bus.int2",d:"M 900 1075 H 300 V 900"}),t.pio==="switches-and-leds"&&p.jsxs(p.Fragment,{children:[p.jsx(En,{springs:"bus.switches->pio",d:"M 1300 758 H 1120"}),p.jsx(En,{springs:"bus.pio->leds",d:"M 1120 868 H 1300"})]}),t.pio==="printer"&&p.jsxs(p.Fragment,{children:[p.jsx(En,{springs:"bus.printer.strobe",d:"M 1120 770 H 1225 V 992 H 1300"}),p.jsx(En,{springs:"bus.printer.busy",d:"M 1300 1007 H 1210 V 782 H 1120"}),p.jsx(En,{springs:"bus.printer.data",d:"M 1120 850 H 1175 V 1062 H 1300"})]}),t.handshake==="printer"&&p.jsxs(p.Fragment,{children:[p.jsx(En,{springs:"bus.printer.strobe",d:"M 1120 992 H 1300"}),p.jsx(En,{springs:"bus.printer.busy",d:"M 1300 1007 H 1120"}),p.jsx(En,{springs:"bus.printer.data",d:"M 1120 1062 H 1300"})]})]})}function En({d:t,springs:e}){return p.jsxs(p.Fragment,{children:[p.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),p.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),p.jsx(on.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:pt(e)})]})}function ace(){const t=Tt(),{devices:e}=kn();return p.jsxs(p.Fragment,{children:[p.jsx(Hr,{className:"left-[384px] top-[403px]",children:"rd"}),p.jsx(Hr,{className:"left-[384px] top-[423px]",children:"wr"}),e.hasIOBus&&p.jsxs(p.Fragment,{children:[p.jsx(Hr,{className:"left-[384px] top-[443px]",children:"io/m"}),p.jsx(Hr,{className:"left-[715px] top-[538px]",children:t("computer.chip-select.mem")})]}),e.pic&&p.jsx(Hr,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")}),e.timer&&p.jsx(Hr,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")}),e.pio&&p.jsx(Hr,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")}),e.handshake&&p.jsx(Hr,{className:"left-[675px] top-[573px]",children:t("computer.chip-select.handshake")}),e.pic&&p.jsxs(p.Fragment,{children:[p.jsx(Hr,{className:"left-[75px] top-[478px]",children:"intr"}),p.jsx(Hr,{className:"left-[125px] top-[478px]",children:"inta"})]}),e.printer&&p.jsxs(p.Fragment,{children:[p.jsx(Hr,{className:"left-[1310px] top-[983px]",children:"strobe"}),p.jsx(Hr,{className:"left-[1310px] top-[998px]",children:"busy"}),p.jsx(Hr,{className:"left-[1310px] top-[1053px]",children:"data"})]})]})}function Hr({className:t,children:e}){return p.jsx("span",{className:ve("pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",t),children:e})}function lce(){const{devices:t}=kn(),e=["M 659 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 629 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" "),{path:r,strokeDashoffset:i,opacity:s}=pt("bus.data"),{path:o,strokeDashoffset:a,opacity:l}=pt("bus.address");return p.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] size-full",children:[p.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),p.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:n}),p.jsx(on.path,{d:r,className:"fill-none stroke-mantis-400 stroke-[12px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:i,opacity:s}}),p.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),p.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:e}),p.jsx(on.path,{d:o,className:"fill-none stroke-blue-400 stroke-[12px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}})]})}function cce(){return p.jsxs(p.Fragment,{children:[p.jsx(lce,{}),p.jsx(oce,{}),p.jsx(ace,{}),p.jsx(sce,{})]})}function uce(){const{devices:t}=kn();if(!t.clock)return null;const e=pt("clock.angle");return p.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:p.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx(on.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}var bw="Popover",[u6,zme]=ms(bw,[zd]),Zp=zd(),[dce,Al]=u6(bw),d6=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=Zp(e),l=x.useRef(null),[c,u]=x.useState(!1),[d,f]=Fo({prop:r,defaultProp:i??!1,onChange:s,caller:bw});return p.jsx(n2,{...a,children:p.jsx(dce,{scope:e,contentId:tl(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:x.useCallback(()=>u(!0),[]),onCustomAnchorRemove:x.useCallback(()=>u(!1),[]),modal:o,children:n})})};d6.displayName=bw;var f6="PopoverAnchor",fce=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Al(f6,n),s=Zp(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return x.useEffect(()=>(o(),()=>a()),[o,a]),p.jsx(cw,{...s,...r,ref:e})});fce.displayName=f6;var h6="PopoverTrigger",p6=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Al(h6,n),s=Zp(n),o=it(e,i.triggerRef),a=p.jsx(ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":w6(i.open),...r,ref:o,onClick:ge(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:p.jsx(cw,{asChild:!0,...s,children:a})});p6.displayName=h6;var h2="PopoverPortal",[hce,pce]=u6(h2,{forceMount:void 0}),m6=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=Al(h2,e);return p.jsx(hce,{scope:e,forceMount:n,children:p.jsx(Ko,{present:n||s.open,children:p.jsx(Yp,{asChild:!0,container:i,children:r})})})};m6.displayName=h2;var Pd="PopoverContent",g6=x.forwardRef((t,e)=>{const n=pce(Pd,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=Al(Pd,t.__scopePopover);return p.jsx(Ko,{present:r||s.open,children:s.modal?p.jsx(gce,{...i,ref:e}):p.jsx(vce,{...i,ref:e})})});g6.displayName=Pd;var mce=pd("PopoverContent.RemoveScroll"),gce=x.forwardRef((t,e)=>{const n=Al(Pd,t.__scopePopover),r=x.useRef(null),i=it(e,r),s=x.useRef(!1);return x.useEffect(()=>{const o=r.current;if(o)return BF(o)},[]),p.jsx(dw,{as:mce,allowPinchZoom:!0,children:p.jsx(v6,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ge(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ge(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),vce=x.forwardRef((t,e)=>{const n=Al(Pd,t.__scopePopover),r=x.useRef(!1),i=x.useRef(!1);return p.jsx(v6,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),v6=x.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=Al(Pd,n),h=Zp(n);return WE(),p.jsx(sw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(Kp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:p.jsx(r2,{"data-state":w6(f.open),role:"dialog",id:f.contentId,...h,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),y6="PopoverClose",yce=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Al(y6,n);return p.jsx(ze.button,{type:"button",...r,ref:e,onClick:ge(t.onClick,()=>i.onOpenChange(!1))})});yce.displayName=y6;var wce="PopoverArrow",bce=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Zp(n);return p.jsx(i2,{...i,...r,ref:e})});bce.displayName=wce;function w6(t){return t?"open":"closed"}var xce=d6,Sce=p6,kce=m6,b6=g6;const x6=xce,S6=Sce,p2=x.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>p.jsx(kce,{children:p.jsx(b6,{ref:i,align:e,sideOffset:n,className:ve("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...r})}));p2.displayName=b6.displayName;function oi({name:t,valueAtom:e,springs:n,emphasis:r=!1,className:i}){const s=Tt(),o=nt(e),a=o.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t,u=["AX","BX","CX","DX"].includes(t),d=t==="IP",f=t==="SP",h=t==="MBR",m=t==="MAR",g=t==="IR",y=["id","ri"].includes(t),v=c==="FLAGS";return p.jsxs(x6,{children:[p.jsx(S6,{asChild:!0,children:p.jsxs(on.button,{title:c!=="left"&&c!=="right"?`Registro ${c}`:c,className:ve("flex cursor-pointer items-center font-mono leading-none transition-opacity",u||d||f||h||m||g||y?"size-10 justify-center rounded border-2 text-lg font-bold shadow-[0_2px_8px_0_rgba(60,180,120,0.10)] transition-all duration-200 hover:scale-110 hover:shadow-xl":v?"min-h-[32px] min-w-[90px] gap-2 rounded border-2 border-yellow-400 bg-gradient-to-br from-yellow-900 via-yellow-800 to-stone-900 px-2.5 py-0.5 font-bold text-yellow-200 shadow-[0_2px_8px_0_rgba(250,204,21,0.10)]":"rounded-md border bg-stone-800 px-2 py-1",u?"border-mantis-500 bg-stone-800 text-mantis-300":d?"border-red-500 bg-stone-800 text-red-300":f?"border-yellow-400 bg-stone-800 text-yellow-300":h||m||g?"border-indigo-400 bg-stone-800 text-indigo-300":y?"border-cyan-400 bg-stone-800 text-cyan-300":v?"":r?"border-mantis-400 text-lg":"border-stone-600 text-base",i),style:c==="left"||c==="right"?{backgroundColor:"transparent"}:pt(n),children:[u||d||f||h||m||g||y?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:ve("pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[8px] font-bold",u?"text-mantis-400":d?"text-red-400":f?"text-yellow-400":y?"text-cyan-400":"text-indigo-400"),children:c}),p.jsx("span",{className:"mt-2 font-mono text-base font-bold",children:a.toString("hex")})]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:ve("mr-2 font-extrabold tracking-wide",u&&"text-mantis-300 drop-shadow",v&&"text-yellow-200",y&&"text-cyan-300",(c==="left"||c==="right")&&"text-xs"),children:c}),p.jsx("span",{className:ve("rounded px-1 py-0.5 font-light",u?"border border-mantis-400 bg-stone-950 text-mantis-300":v?"border border-yellow-400 bg-yellow-950 text-yellow-200":y?"border border-cyan-400 bg-cyan-950 text-cyan-200":"border border-stone-600 bg-stone-900 text-white"),children:a.toString("hex")})]}),v&&p.jsxs("span",{className:"ml-2 flex gap-1",children:[p.jsx("span",{className:ve("rounded border px-1 text-xs font-bold",Number(a)&2?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"Z"}),p.jsx("span",{className:ve("rounded border px-1 text-xs font-bold",Number(a)&1?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"C"})]})]})}),p.jsxs(p2,{className:"w-60",children:[p.jsx("p",{className:"px-4 py-2 font-medium text-white",children:c!=="left"&&c!=="right"?`Registro ${c}`:c}),p.jsx("hr",{className:"border-stone-600"}),p.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(w=>p.jsxs("li",{children:[p.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${w}`)}),":"," ",p.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(w)})]},w))})]})]})}function _ce(){const t=nt(Pe.FLAGS),e=nt(k5),[n,r]=x.useState(!1),i=nt(S5),[s]=V0();x.useEffect(()=>{const d=h=>{r(h==="ADD"||h==="SUB"||h==="CMP"||h==="AND"||h==="OR"||h==="XOR"||h==="NOT"||h==="NEG"||h==="DEC"||h==="INC")},f=h=>{d(h.detail.instruction)};return window.addEventListener("instructionChange",f),()=>{window.removeEventListener("instructionChange",f)}},[]);const o=t.bit(1),a=t.bit(0),l=t.bit(3),c=t.bit(4),u=t.bit(2);return p.jsxs(p.Fragment,{children:[p.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[p.jsx(on.path,{className:"fill-none stroke-mantis-400 stroke-bus drop-shadow-[0_0_4px_rgba(60,180,120,0.4)]",strokeLinejoin:"round",d:"M 120 85 H 220",pathLength:1,strokeDasharray:1,style:pt("cpu.alu.operands")}),p.jsx(on.path,{className:"fill-none stroke-mantis-400 stroke-bus drop-shadow-[0_0_4px_rgba(60,180,120,0.4)]",strokeLinejoin:"round",d:"M 120 145 H 220",pathLength:1,strokeDasharray:1,style:pt("cpu.alu.operands")}),p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"aluGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:"#374151"}),p.jsx("stop",{offset:"50%",stopColor:"#4B5563"}),p.jsx("stop",{offset:"100%",stopColor:"#1F2937"})]}),p.jsx("filter",{id:"aluShadow",children:p.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"rgba(0,0,0,0.3)"})})]}),p.jsx("path",{d:"M 220 60 v 50 l 20 12 l -20 12 v 50 l 60 -36 v -52 Z",fill:"url(#aluGradient)",stroke:"#6B7280",strokeWidth:"2",strokeLinejoin:"round",filter:"url(#aluShadow)"}),p.jsx("text",{x:"250",y:"105",fill:"#E5E7EB",fontSize:"12",fontWeight:"bold",textAnchor:"middle",children:"ALU"})]}),p.jsx(on.span,{className:"icon-[lucide--settings] absolute left-[244px] top-[120px] block size-5 text-stone-300",style:{transform:pt("cpu.alu.cog").rot.to(d=>`rotate(${d*60}deg)`)}}),n&&p.jsx(on.span,{className:"absolute left-[244px] top-[40px] z-30 flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:pt("cpu.alu.operation"),children:e}),p.jsxs(on.div,{className:ve("absolute flex min-h-[30px] w-min min-w-[38px] items-center gap-0.5 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 px-0.5 py-1 font-bold text-stone-200 shadow-lg ring-1 ring-stone-300",s.flagsVisibility==="SF_OF_CF_ZF"?"left-[210px] top-[190px]":"left-[230px] top-[190px]"),style:pt("cpu.FLAGS"),children:[p.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"FLAGS"}),p.jsxs("div",{className:"mt-2 flex items-center gap-0.5",children:[i&&p.jsx("span",{className:ve("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",c?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"I"}),s.flagsVisibility==="SF_OF_CF_ZF"&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:ve("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",l?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"S"}),p.jsx("span",{className:ve("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",u?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"O"})]}),p.jsx("span",{className:ve("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",o?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"C"}),p.jsx("span",{className:ve("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",a?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"Z"})]})]})]})}function Cce(){const t=Tt(),e=nt(Cc),{status:n}=kn(),r=nt(Qi),i=nt(ft),s=x.useMemo(()=>{if(!("metadata"in r)||r.metadata.operands.length===0)return"";if(r.phase==="fetching-operands"){let a=" __";for(let l=1;l<r.metadata.operands.length;l++)a+=", __";return a}else return" "+r.metadata.operands.join(", ")},[r]),o=x.useMemo(()=>n.type==="running"&&n.waitingForInput?"waiting-for-input":n.type==="stopped"?n.error?"stopped-error":"stopped":r.phase==="stopped"&&r.error?"stopped-error":r.phase,[n,r]);return p.jsxs(p.Fragment,{children:[p.jsx("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:p.jsx(on.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 310 V 320",pathLength:1,strokeDasharray:1,style:pt("cpu.decoder.path")})}),p.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:p.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:t("computer.cpu.control-unit")})}),p.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[p.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[p.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),p.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:p.jsx(on.div,{className:"h-full bg-mantis-400",style:{width:pt("cpu.decoder.progress.progress").to(a=>`${a*100}%`),opacity:pt("cpu.decoder.progress.opacity")}})})]}),p.jsx("span",{className:ve("mt-4 w-full rounded-lg border border-stone-600 py-2 text-center text-sm leading-none transition-colors",o==="stopped-error"?"bg-red-500":o==="waiting-for-input"?"bg-amber-600":o==="int6"||o==="int7"?"bg-blue-600":"bg-stone-900"),children:o==="int6"||o==="int7"?p.jsxs(p.Fragment,{children:[t(`computer.cpu.status.${o}`),p.jsx("div",{children:i})]}):o==="stopped-error"||o==="waiting-for-input"?p.jsx(p.Fragment,{children:t(`computer.cpu.status.${o}`)}):i?p.jsx("div",{children:i}):t(`computer.cpu.status.${o}`)}),p.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:p.jsx("p",{className:"text-center font-mono",children:!("metadata"in r)||r.phase==="fetching"||n.type==="stopped"?r.phase==="stopped"&&o!=="stopped-error"&&o==="stopped"&&e!==0?p.jsx("span",{className:"text-mantis-400",children:"HLT"}):p.jsx("span",{className:"italic text-stone-400",children:"???"}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-mantis-400",children:r.metadata.name}),p.jsx("span",{className:"text-white",children:s})]})})})]})]})}function Ece(){const[t,e]=x.useState(!1),[n,r]=x.useState(0);return x.useEffect(()=>{const i=()=>{e(!0),r(s=>s+1),setTimeout(()=>{e(!1)},3e3)};return window.addEventListener("ip-register-update",i),()=>{window.removeEventListener("ip-register-update",i)}},[]),t?p.jsxs(p.Fragment,{children:[p.jsx("style",{children:`
        @keyframes slideUpAndFade {
          0% {
            opacity: 1;
            transform: translateY(0px);
          }
          30% {
            opacity: 1;
            transform: translateY(-30px);
          }
          70% {
            opacity: 1;
            transform: translateY(-30px);
          }
          100% {
            opacity: 0;
            transform: translateY(-50px);
          }
        }
      `}),p.jsx("div",{className:ve("pointer-events-none absolute left-[425px] top-[342px]","font-mono text-lg font-bold"),style:{color:"#ff6347",animation:"slideUpAndFade 3s ease-out forwards"},children:"+1"},n)]}):null}function Ace(){const t=Tt(),e=nt(YC),[n,r]=x.useState(!1),[i,s]=x.useState(!1),[o,a]=x.useState(!1);return x.useEffect(()=>{const l=(u,d,f)=>{a(u==="ADD"||u==="SUB"||u==="CMP"||u==="AND"||u==="OR"||u==="XOR"||u==="NOT"||u==="NEG"||u==="DEC"||u==="INC"),r(!!(u==="IRET"||d)),s(!!f)},c=u=>{const d=u;l(d.detail.instruction,d.detail.modeid,d.detail.moderi)};return window.addEventListener("instructionChange",c),()=>{window.removeEventListener("instructionChange",c)}},[]),p.jsxs("div",{"data-testid":"cpu-component",className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),p.jsx(ine,{showSP:e,showri:i}),p.jsx(Lre,{showSP:e,showid:n,showri:i}),o&&p.jsxs(p.Fragment,{children:[p.jsx(Vr,{name:"left",className:ve("left-[96px] top-[49px]","border-transparent","bg-transparent")}),p.jsx(Vr,{name:"right",className:ve("left-[96px] top-[150px]","border-transparent","bg-transparent")})]}),p.jsx(_ce,{}),p.jsx(Vr,{name:"AX",emphasis:!0,className:"left-[450px] top-[30px]"}),p.jsx(Vr,{name:"BX",emphasis:!0,className:"left-[450px] top-[70px]"}),p.jsx(Vr,{name:"CX",emphasis:!0,className:"left-[450px] top-[110px]"}),p.jsx(Vr,{name:"DX",emphasis:!0,className:"left-[450px] top-[150px]"}),n&&p.jsx(Vr,{name:"id",className:ve("left-[450px] top-[190px]","border-cyan-400")}),p.jsx(Vr,{name:"MBR",className:ve("right-[-11px] top-[233px]","border-indigo-400")}),p.jsx(Vr,{name:"IR",className:ve("left-[185px] top-[270px]","border-indigo-400")}),p.jsx(Cce,{}),e&&p.jsx(Vr,{name:"SP",emphasis:!0,className:ve("left-[450px] top-[292px]","border-yellow-400")}),p.jsx(Vr,{name:"IP",emphasis:!0,className:ve("left-[450px] top-[332px]","border-red-color")}),i&&p.jsx(Vr,{name:"ri",emphasis:!0,className:ve("left-[470px] top-[372px]","border-cyan-400")}),p.jsx(Vr,{name:"MAR",className:ve("right-[-11px] top-[333px]","border-indigo-400")}),p.jsx(Ece,{})]})}function Vr({name:t,emphasis:e,className:n}){return p.jsx(oi,{name:t,valueAtom:Pe[t],springs:`cpu.${t}`,emphasis:e,className:ve("absolute",n)})}function Pce(){const t=Tt(),e=nt(Cc),n=nt(F0),[r]=V0();return r.showStatsCPU?p.jsxs("div",{className:"absolute left-[120px] top-[-120px] z-10 h-min w-[300px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"mb-2 block h-min w-full cursor-move rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-blue-500 px-2 py-1 text-lg text-white",children:t("computer.cpu.stats")}),p.jsx("hr",{className:"border-stone-600"}),p.jsx("div",{className:"flex w-full flex-col items-start p-2",children:p.jsxs("div",{className:"pl-1 text-left text-sm text-white",children:[p.jsxs("div",{className:"mb-1",children:["Total de ciclos: ",e]}),p.jsxs("div",{children:["Recuento de instrucciones: ",n]})]})})]}):null}const Nce="_pushable_1q0ek_2",Tce="_front_1q0ek_15",Mce="_shadow_1q0ek_20",Rce="_edge_1q0ek_52",wg={pushable:Nce,front:Tce,shadow:Mce,edge:Rce};function Oce(){const t=Tt(),{status:e,dispatch:n,devices:r}=kn();return Ao("F10",i=>{i.preventDefault(),r.f10&&n("f10.press")},void 0,[n,r.f10]),r.f10?p.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:p.jsxs("button",{className:wg.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[p.jsx("div",{className:wg.shadow}),p.jsx("div",{className:wg.edge}),p.jsx("span",{className:wg.front,children:t("computer.f10")})]})}):null}function Ice(){const t=Tt(),{devices:e}=kn();return e.handshake?p.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),p.jsx(oi,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:IE,springs:"handshake.STATE",className:"mx-auto my-4"}),p.jsx("hr",{className:"border-stone-600"}),p.jsx(oi,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:OE,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var k6={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.89 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,r){t.exports=r(x)})(m9,function(n){return function(){var r={442:function(a){a.exports=n},651:function(a){a.exports=function(){var l={d:function(j,L){for(var z in L)l.o(L,z)&&!l.o(j,z)&&Object.defineProperty(j,z,{enumerable:!0,get:L[z]})},o:function(j,L){return Object.prototype.hasOwnProperty.call(j,L)},r:function(j){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})}},c={};function u(j){return function(L){if(Array.isArray(L))return f(L)}(j)||function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}(j)||d(j)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(j,L){if(j){if(typeof j=="string")return f(j,L);var z={}.toString.call(j).slice(8,-1);return z==="Object"&&j.constructor&&(z=j.constructor.name),z==="Map"||z==="Set"?Array.from(j):z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?f(j,L):void 0}}function f(j,L){(L==null||L>j.length)&&(L=j.length);for(var z=0,S=Array(L);z<L;z++)S[z]=j[z];return S}function h(j){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},h(j)}function m(j,L){for(var z=0;z<L.length;z++){var S=L[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,y(S.key),S)}}function g(j,L,z){return(L=y(L))in j?Object.defineProperty(j,L,{value:z,enumerable:!0,configurable:!0,writable:!0}):j[L]=z,j}function y(j){var L=function(z,S){if(h(z)!="object"||!z)return z;var N=z[Symbol.toPrimitive];if(N!==void 0){var R=N.call(z,S);if(h(R)!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(j,"string");return h(L)=="symbol"?L:L+""}l.r(c),l.d(c,{SimpleKeyboard:function(){return J},default:function(){return ae}});var v=function(){return j=function S(N){var R=N.getOptions,T=N.getCaretPosition,K=N.getCaretPositionEnd,V=N.dispatch;(function(ee,q){if(!(ee instanceof q))throw new TypeError("Cannot call a class as a function")})(this,S),g(this,"getOptions",void 0),g(this,"getCaretPosition",void 0),g(this,"getCaretPositionEnd",void 0),g(this,"dispatch",void 0),g(this,"maxLengthReached",void 0),g(this,"isStandardButton",function(ee){return ee&&!(ee[0]==="{"&&ee[ee.length-1]==="}")}),this.getOptions=R,this.getCaretPosition=T,this.getCaretPositionEnd=K,this.dispatch=V,S.bindMethods(S,this)},L=[{key:"getButtonType",value:function(S){return S.includes("{")&&S.includes("}")&&S!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(S){var N=this.getButtonType(S),R=S.replace("{","").replace("}",""),T="";return N!=="standardBtn"&&(T=" hg-button-".concat(R)),"hg-".concat(N).concat(T)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"","{arrowleft}":"","{arrowdown}":"","{arrowright}":"","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(S,N){return(N=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),N):N||this.getDefaultDiplay())[S]||S}},{key:"getUpdatedInput",value:function(S,N,R){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:R,K=arguments.length>4&&arguments[4]!==void 0&&arguments[4],V=this.getOptions(),ee=[R,T,K],q=N;return(S==="{bksp}"||S==="{backspace}")&&q.length>0?q=this.removeAt.apply(this,[q].concat(ee)):(S==="{delete}"||S==="{forwarddelete}")&&q.length>0?q=this.removeForwardsAt.apply(this,[q].concat(ee)):S==="{space}"?q=this.addStringAt.apply(this,[q," "].concat(ee)):S!=="{tab}"||typeof V.tabCharOnTab=="boolean"&&V.tabCharOnTab===!1?S!=="{enter}"&&S!=="{numpadenter}"||!V.newLineOnEnter?S.includes("numpad")&&Number.isInteger(Number(S[S.length-2]))?q=this.addStringAt.apply(this,[q,S[S.length-2]].concat(ee)):S==="{numpaddivide}"?q=this.addStringAt.apply(this,[q,"/"].concat(ee)):S==="{numpadmultiply}"?q=this.addStringAt.apply(this,[q,"*"].concat(ee)):S==="{numpadsubtract}"?q=this.addStringAt.apply(this,[q,"-"].concat(ee)):S==="{numpadadd}"?q=this.addStringAt.apply(this,[q,"+"].concat(ee)):S==="{numpaddecimal}"?q=this.addStringAt.apply(this,[q,"."].concat(ee)):S==="{"||S==="}"?q=this.addStringAt.apply(this,[q,S].concat(ee)):S.includes("{")||S.includes("}")||(q=this.addStringAt.apply(this,[q,S].concat(ee))):q=this.addStringAt.apply(this,[q,`
`].concat(ee)):q=this.addStringAt.apply(this,[q,"	"].concat(ee)),V.debug&&console.log("Input will be: "+q),q}},{key:"updateCaretPos",value:function(S){var N=arguments.length>1&&arguments[1]!==void 0&&arguments[1],R=this.updateCaretPosAction(S,N);this.dispatch(function(T){T.setCaretPosition(R)})}},{key:"updateCaretPosAction",value:function(S){var N=arguments.length>1&&arguments[1]!==void 0&&arguments[1],R=this.getOptions(),T=this.getCaretPosition();return T!=null&&(N?T>0&&(T-=S):T+=S),R.debug&&console.log("Caret at:",T),T}},{key:"addStringAt",value:function(S,N){var R,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:S.length,V=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return T||T===0?(R=[S.slice(0,T),N,S.slice(K)].join(""),this.isMaxLengthReached()||V&&this.updateCaretPos(N.length)):R=S+N,R}},{key:"removeAt",value:function(S){var N,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,K=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(R===0&&T===0)return S;if(R===T){var V=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;R&&R>=0?S.substring(R-2,R).match(V)?(N=S.substr(0,R-2)+S.substr(R),K&&this.updateCaretPos(2,!0)):(N=S.substr(0,R-1)+S.substr(R),K&&this.updateCaretPos(1,!0)):S.slice(-2).match(V)?(N=S.slice(0,-2),K&&this.updateCaretPos(2,!0)):(N=S.slice(0,-1),K&&this.updateCaretPos(1,!0))}else N=S.slice(0,R)+S.slice(T),K&&this.dispatch(function(ee){ee.setCaretPosition(R)});return N}},{key:"removeForwardsAt",value:function(S){var N,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,K=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return S!=null&&S.length&&R!==null?(R===T?N=S.substring(R,R+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?S.substr(0,R)+S.substr(R+2):S.substr(0,R)+S.substr(R+1):(N=S.slice(0,R)+S.slice(T),K&&this.dispatch(function(V){V.setCaretPosition(R)})),N):S}},{key:"handleMaxLength",value:function(S,N){var R=this.getOptions(),T=R.maxLength,K=S[R.inputName||"default"],V=N.length-1>=T;if(N.length<=K.length)return!1;if(Number.isInteger(T))return R.debug&&console.log("maxLength (num) reached:",V),V?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(h(T)==="object"){var ee=N.length-1>=T[R.inputName||"default"];return R.debug&&console.log("maxLength (obj) reached:",ee),ee?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(S){return S?S.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(N,R){return R.length?N+R[0].toUpperCase()+R.slice(1):N}):""}},{key:"chunkArray",value:function(S,N){return u(Array(Math.ceil(S.length/N))).map(function(R,T){return S.slice(N*T,N+N*T)})}},{key:"escapeRegex",value:function(S){return S.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(S,N){var R=S,T=N.indexOf("");return T<S&&T!=-1&&R--,N.indexOf("")<S&&T!=-1&&R--,R<0?0:R}},{key:"isConstructor",value:function(S){try{Reflect.construct(String,[],S)}catch{return!1}return!0}}],z=[{key:"bindMethods",value:function(S,N){var R,T=function(V,ee){var q=typeof Symbol<"u"&&V[Symbol.iterator]||V["@@iterator"];if(!q){if(Array.isArray(V)||(q=d(V))||ee){q&&(V=q);var Te=0,je=function(){};return{s:je,n:function(){return Te>=V.length?{done:!0}:{done:!1,value:V[Te++]}},e:function(he){throw he},f:je}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fe,Le=!0,We=!1;return{s:function(){q=q.call(V)},n:function(){var he=q.next();return Le=he.done,he},e:function(he){We=!0,Fe=he},f:function(){try{Le||q.return==null||q.return()}finally{if(We)throw Fe}}}}(Object.getOwnPropertyNames(S.prototype));try{for(T.s();!(R=T.n()).done;){var K=R.value;K==="constructor"||K==="bindMethods"||(N[K]=N[K].bind(N))}}catch(V){T.e(V)}finally{T.f()}}}],L&&m(j.prototype,L),z&&m(j,z),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,z}();g(v,"noop",function(){});var w=v;function b(j){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},b(j)}function k(j,L){for(var z=0;z<L.length;z++){var S=L[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,E(S.key),S)}}function _(j,L,z){return(L=E(L))in j?Object.defineProperty(j,L,{value:z,enumerable:!0,configurable:!0,writable:!0}):j[L]=z,j}function E(j){var L=function(z,S){if(b(z)!="object"||!z)return z;var N=z[Symbol.toPrimitive];if(N!==void 0){var R=N.call(z,S);if(b(R)!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(j,"string");return b(L)=="symbol"?L:L+""}var C=function(){return j=function S(N){var R=this,T=N.dispatch,K=N.getOptions;(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,S),_(this,"getOptions",void 0),_(this,"dispatch",void 0),_(this,"isModifierKey",function(V){return V.altKey||V.ctrlKey||V.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(V.code||V.key||R.keyCodeToKey(V==null?void 0:V.keyCode))}),this.dispatch=T,this.getOptions=K,w.bindMethods(S,this)},L=[{key:"handleHighlightKeyDown",value:function(S){var N=this.getOptions();N.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var R=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(T){var K,V,ee=T.getButtonElement(R),q=T.getButtonElement("{".concat(R,"}"));if(ee)K=ee,V=R;else{if(!q)return;K=q,V="{".concat(R,"}")}var Te,je,Fe,Le,We=function(yt){yt.style.background=N.physicalKeyboardHighlightBgColor||"#dadce4",yt.style.color=N.physicalKeyboardHighlightTextColor||"black"};if(K)if(Array.isArray(K)){if(K.forEach(function(yt){return We(yt)}),N.physicalKeyboardHighlightPress)if(N.physicalKeyboardHighlightPressUsePointerEvents)(Te=K[0])===null||Te===void 0||(je=Te.onpointerdown)===null||je===void 0||je.call(Te,S);else if(N.physicalKeyboardHighlightPressUseClick){var he;(he=K[0])===null||he===void 0||he.click()}else T.handleButtonClicked(V,S)}else We(K),N.physicalKeyboardHighlightPress&&(N.physicalKeyboardHighlightPressUsePointerEvents?(Fe=K)===null||Fe===void 0||(Le=Fe.onpointerdown)===null||Le===void 0||Le.call(Fe,S):N.physicalKeyboardHighlightPressUseClick?K.click():T.handleButtonClicked(V,S))})}},{key:"handleHighlightKeyUp",value:function(S){var N=this.getOptions();N.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var R=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(T){var K,V,ee,q=T.getButtonElement(R)||T.getButtonElement("{".concat(R,"}")),Te=function(je){je.removeAttribute&&je.removeAttribute("style")};q&&(Array.isArray(q)?(q.forEach(function(je){return Te(je)}),N.physicalKeyboardHighlightPressUsePointerEvents&&((K=q[0])===null||K===void 0||(V=K.onpointerup)===null||V===void 0||V.call(K,S))):(Te(q),N.physicalKeyboardHighlightPressUsePointerEvents&&(q==null||(ee=q.onpointerup)===null||ee===void 0||ee.call(q,S))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(S){var N,R="",T=S.code||S.key||this.keyCodeToKey(S==null?void 0:S.keyCode);return(R=T!=null&&T.includes("Numpad")||T!=null&&T.includes("Shift")||T!=null&&T.includes("Space")||T!=null&&T.includes("Backspace")||T!=null&&T.includes("Control")||T!=null&&T.includes("Alt")||T!=null&&T.includes("Meta")?S.code||"":S.key||this.keyCodeToKey(S==null?void 0:S.keyCode)||"").length>1?(N=R)===null||N===void 0?void 0:N.toLowerCase():R}},{key:"keyCodeToKey",value:function(S){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[S]||""}}],L&&k(j.prototype,L),z&&k(j,z),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,z}();function P(j){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},P(j)}function M(j,L){for(var z=0;z<L.length;z++){var S=L[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,I(S.key),S)}}function O(j,L,z){return(L=I(L))in j?Object.defineProperty(j,L,{value:z,enumerable:!0,configurable:!0,writable:!0}):j[L]=z,j}function I(j){var L=function(z,S){if(P(z)!="object"||!z)return z;var N=z[Symbol.toPrimitive];if(N!==void 0){var R=N.call(z,S);if(P(R)!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(j,"string");return P(L)=="symbol"?L:L+""}var D=function(){return j=function S(N){var R=N.utilities,T=N.options;(function(K,V){if(!(K instanceof V))throw new TypeError("Cannot call a class as a function")})(this,S),O(this,"utilities",void 0),O(this,"options",void 0),O(this,"candidateBoxElement",void 0),O(this,"pageIndex",0),O(this,"pageSize",void 0),this.utilities=R,this.options=T,w.bindMethods(S,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},L=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(S){var N=this,R=S.candidateValue,T=S.targetElement,K=S.onSelect;if(R&&R.length){var V=this.utilities.chunkArray(R.split(" "),this.pageSize);this.renderPage({candidateListPages:V,targetElement:T,pageIndex:this.pageIndex,nbPages:V.length,onItemSelected:function(ee,q){K(ee,q),N.destroy()}})}}},{key:"renderPage",value:function(S){var N,R=this,T=S.candidateListPages,K=S.targetElement,V=S.pageIndex,ee=S.nbPages,q=S.onItemSelected;(N=this.candidateBoxElement)===null||N===void 0||N.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Te=document.createElement("ul");Te.className="hg-candidate-box-list",T[V].forEach(function(pn){var Ml,vs=document.createElement("li"),Zo=function(){var Qo=new(R.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(Qo,"target",{value:vs}),Qo};vs.className="hg-candidate-box-list-item",vs.innerHTML=((Ml=R.options.display)===null||Ml===void 0?void 0:Ml[pn])||pn,R.options.useTouchEvents?vs.ontouchstart=function(Qo){return q(pn,Qo||Zo())}:vs.onclick=function(){var Qo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Zo();return q(pn,Qo)},Te.appendChild(vs)});var je=V>0,Fe=document.createElement("div");Fe.classList.add("hg-candidate-box-prev"),je&&Fe.classList.add("hg-candidate-box-btn-active");var Le=function(){je&&R.renderPage({candidateListPages:T,targetElement:K,pageIndex:V-1,nbPages:ee,onItemSelected:q})};this.options.useTouchEvents?Fe.ontouchstart=Le:Fe.onclick=Le,this.candidateBoxElement.appendChild(Fe),this.candidateBoxElement.appendChild(Te);var We=V<ee-1,he=document.createElement("div");he.classList.add("hg-candidate-box-next"),We&&he.classList.add("hg-candidate-box-btn-active");var yt=function(){We&&R.renderPage({candidateListPages:T,targetElement:K,pageIndex:V+1,nbPages:ee,onItemSelected:q})};this.options.useTouchEvents?he.ontouchstart=yt:he.onclick=yt,this.candidateBoxElement.appendChild(he),K.prepend(this.candidateBoxElement)}}],L&&M(j.prototype,L),z&&M(j,z),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,z}(),G=D;function U(j){return function(L){if(Array.isArray(L))return X(L)}(j)||function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}(j)||function(L,z){if(L){if(typeof L=="string")return X(L,z);var S={}.toString.call(L).slice(8,-1);return S==="Object"&&L.constructor&&(S=L.constructor.name),S==="Map"||S==="Set"?Array.from(L):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?X(L,z):void 0}}(j)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function X(j,L){(L==null||L>j.length)&&(L=j.length);for(var z=0,S=Array(L);z<L;z++)S[z]=j[z];return S}function Z(j){return Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},Z(j)}function te(j,L){var z=Object.keys(j);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(j);L&&(S=S.filter(function(N){return Object.getOwnPropertyDescriptor(j,N).enumerable})),z.push.apply(z,S)}return z}function H(j,L){for(var z=0;z<L.length;z++){var S=L[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,ne(S.key),S)}}function $(j,L,z){return(L=ne(L))in j?Object.defineProperty(j,L,{value:z,enumerable:!0,configurable:!0,writable:!0}):j[L]=z,j}function ne(j){var L=function(z,S){if(Z(z)!="object"||!z)return z;var N=z[Symbol.toPrimitive];if(N!==void 0){var R=N.call(z,S);if(Z(R)!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(j,"string");return Z(L)=="symbol"?L:L+""}var ke=function(){return j=function S(N,R){var T=this;if(function(Le,We){if(!(Le instanceof We))throw new TypeError("Cannot call a class as a function")}(this,S),$(this,"input",void 0),$(this,"options",void 0),$(this,"utilities",void 0),$(this,"caretPosition",void 0),$(this,"caretPositionEnd",void 0),$(this,"keyboardDOM",void 0),$(this,"keyboardPluginClasses",void 0),$(this,"keyboardDOMClass",void 0),$(this,"buttonElements",void 0),$(this,"currentInstanceName",void 0),$(this,"allKeyboardInstances",void 0),$(this,"keyboardInstanceNames",void 0),$(this,"isFirstKeyboardInstance",void 0),$(this,"physicalKeyboard",void 0),$(this,"modules",void 0),$(this,"activeButtonClass",void 0),$(this,"holdInteractionTimeout",void 0),$(this,"holdTimeout",void 0),$(this,"isMouseHold",void 0),$(this,"initialized",void 0),$(this,"candidateBox",void 0),$(this,"keyboardRowsDOM",void 0),$(this,"defaultName","default"),$(this,"activeInputElement",null),$(this,"handleParams",function(Le,We){var he,yt,pn;if(typeof Le=="string")he=Le.split(".").join(""),yt=document.querySelector(".".concat(he)),pn=We;else if(Le instanceof HTMLDivElement){if(!Le.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");he=Le.className.split(" ")[0],yt=Le,pn=We}else he="simple-keyboard",yt=document.querySelector(".".concat(he)),pn=Le;return{keyboardDOMClass:he,keyboardDOM:yt,options:pn}}),$(this,"getOptions",function(){return T.options}),$(this,"getCaretPosition",function(){return T.caretPosition}),$(this,"getCaretPositionEnd",function(){return T.caretPositionEnd}),$(this,"registerModule",function(Le,We){T.modules[Le]||(T.modules[Le]={}),We(T.modules[Le])}),$(this,"getKeyboardClassString",function(){for(var Le=arguments.length,We=new Array(Le),he=0;he<Le;he++)We[he]=arguments[he];return[T.keyboardDOMClass].concat(We).filter(function(yt){return!!yt}).join(" ")}),typeof window<"u"){var K=this.handleParams(N,R),V=K.keyboardDOMClass,ee=K.keyboardDOM,q=K.options,Te=q===void 0?{}:q;this.utilities=new w({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=ee,this.options=function(Le){for(var We=1;We<arguments.length;We++){var he=arguments[We]!=null?arguments[We]:{};We%2?te(Object(he),!0).forEach(function(yt){$(Le,yt,he[yt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Le,Object.getOwnPropertyDescriptors(he)):te(Object(he)).forEach(function(yt){Object.defineProperty(Le,yt,Object.getOwnPropertyDescriptor(he,yt))})}return Le}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Te),this.keyboardPluginClasses="",w.bindMethods(S,this);var je=this.options.inputName,Fe=je===void 0?this.defaultName:je;if(this.input={},this.input[Fe]="",this.keyboardDOMClass=V,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new C({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new G({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(V,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},L=[{key:"setCaretPosition",value:function(S){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S;this.caretPosition=S,this.caretPositionEnd=N}},{key:"getInputCandidates",value:function(S){var N=this,R=this.options,T=R.layoutCandidates,K=R.layoutCandidatesCaseSensitiveMatch;if(!T||Z(T)!=="object")return{};var V=Object.keys(T).filter(function(Te){var je=S.substring(0,N.getCaretPositionEnd()||0)||S,Fe=new RegExp("".concat(N.utilities.escapeRegex(Te),"$"),K?"g":"gi");return!!U(je.matchAll(Fe)).length});if(V.length>1){var ee=V.sort(function(Te,je){return je.length-Te.length})[0];return{candidateKey:ee,candidateValue:T[ee]}}if(V.length){var q=V[0];return{candidateKey:q,candidateValue:T[q]}}return{}}},{key:"showCandidatesBox",value:function(S,N,R){var T=this;this.candidateBox&&this.candidateBox.show({candidateValue:N,targetElement:R,onSelect:function(K,V){var ee=T.options,q=ee.layoutCandidatesCaseSensitiveMatch,Te=ee.disableCandidateNormalization,je=ee.enableLayoutCandidatesKeyPress,Fe=K;Te||(Fe=K.normalize("NFD")),typeof T.options.beforeInputUpdate=="function"&&T.options.beforeInputUpdate(T);var Le=T.getInput(T.options.inputName,!0),We=T.getCaretPositionEnd()||0,he=Le.substring(0,We||0)||Le,yt=new RegExp("".concat(T.utilities.escapeRegex(S),"$"),q?"g":"gi"),pn=he.replace(yt,Fe),Ml=Le.replace(he,pn),vs=pn.length-he.length,Zo=(We||Le.length)+vs;Zo<0&&(Zo=0),T.setInput(Ml,T.options.inputName,!0),T.setCaretPosition(Zo),je&&typeof T.options.onKeyPress=="function"&&T.options.onKeyPress(K,V),typeof T.options.onChange=="function"&&T.options.onChange(T.getInput(T.options.inputName,!0),V),typeof T.options.onChangeAll=="function"&&T.options.onChangeAll(T.getAllInputs(),V)}})}},{key:"handleButtonClicked",value:function(S,N){var R=this.options,T=R.inputName,K=T===void 0?this.defaultName:T,V=R.debug;if(S!=="{//}"){this.input[K]||(this.input[K]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var ee=this.utilities.getUpdatedInput(S,this.input[K],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(S)&&this.activeInputElement&&this.input[K]&&this.input[K]===ee&&this.caretPosition===0&&this.caretPositionEnd===ee.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(S,N);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(S,N),this.input[K]!==ee&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(ee))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,ee))return;var q=this.utilities.getUpdatedInput(S,this.input[K],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(q,this.options.inputName,!0),V&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),N==null?void 0:N.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),N),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),N),N!=null&&N.target&&this.options.enableLayoutCandidates){var Te,je=this.getInputCandidates(ee),Fe=je.candidateKey,Le=je.candidateValue;Fe&&Le?this.showCandidatesBox(Fe,Le,this.keyboardDOM):(Te=this.candidateBox)===null||Te===void 0||Te.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),V&&console.log("Key pressed:",S)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(S){this.options.syncInstanceInputs?this.dispatch(function(N){N.isMouseHold=S}):this.isMouseHold=S}},{key:"handleButtonMouseDown",value:function(S,N){var R=this;N&&(this.options.preventMouseDownDefault&&N.preventDefault(),this.options.stopMouseDownPropagation&&N.stopPropagation(),N.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(R.getMouseHold()&&(!S.includes("{")&&!S.includes("}")||S==="{delete}"||S==="{backspace}"||S==="{bksp}"||S==="{space}"||S==="{tab}")||S==="{arrowright}"||S==="{arrowleft}"||S==="{arrowup}"||S==="{arrowdown}")&&(R.options.debug&&console.log("Button held:",S),R.handleButtonHold(S)),clearTimeout(R.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(S,N){var R=this;N&&(this.options.preventMouseUpDefault&&N.preventDefault&&N.preventDefault(),this.options.stopMouseUpPropagation&&N.stopPropagation&&N.stopPropagation(),!(N.target===this.keyboardDOM||N.target&&this.keyboardDOM.contains(N.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(N.target===this.candidateBox.candidateBoxElement||N.target&&this.candidateBox.candidateBoxElement.contains(N.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(T){T.classList.remove(R.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),S&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(S,N)}},{key:"handleKeyboardContainerMouseDown",value:function(S){this.options.preventMouseDownDefault&&S.preventDefault()}},{key:"handleButtonHold",value:function(S){var N=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){N.getMouseHold()?(N.handleButtonClicked(S),N.handleButtonHold(S)):clearTimeout(N.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var S=this;this.dispatch(function(N){N.replaceInput(S.input),N.setCaretPosition(S.caretPosition,S.caretPositionEnd)})}},{key:"clearInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[S]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,N=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!N&&this.syncInstanceInputs(),this.options.rtl?""+this.input[S].replace("","").replace("","")+"":this.input[S]}},{key:"getAllInputs",value:function(){var S=this,N={};return Object.keys(this.input).forEach(function(R){N[R]=S.getInput(R,!0)}),N}},{key:"setInput",value:function(S){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,R=arguments.length>2?arguments[2]:void 0;this.input[N]=S,!R&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(S){this.input=S}},{key:"setOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N=this.changedOptions(S);this.options=Object.assign(this.options,S),N.length&&(this.options.debug&&console.log("changedOptions",N),this.onSetOptions(N),this.render())}},{key:"changedOptions",value:function(S){var N=this;return Object.keys(S).filter(function(R){return JSON.stringify(S[R])!==JSON.stringify(N.options[R])})}},{key:"onSetOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];S.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(S.includes("layoutCandidatesPageSize")||S.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new G({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(S){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(N){S(window.SimpleKeyboardInstances[N],N)})}},{key:"addButtonTheme",value:function(S,N){var R=this;N&&S&&(S.split(" ").forEach(function(T){N.split(" ").forEach(function(K){R.options.buttonTheme||(R.options.buttonTheme=[]);var V=!1;R.options.buttonTheme.map(function(ee){if(ee!=null&&ee.class.split(" ").includes(K)){V=!0;var q=ee.buttons.split(" ");q.includes(T)||(V=!0,q.push(T),ee.buttons=q.join(" "))}return ee}),V||R.options.buttonTheme.push({class:K,buttons:S})})}),this.render())}},{key:"removeButtonTheme",value:function(S,N){var R=this;if(!S&&!N)return this.options.buttonTheme=[],void this.render();S&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(S.split(" ").forEach(function(T){var K;(K=R.options)===null||K===void 0||(K=K.buttonTheme)===null||K===void 0||K.map(function(V,ee){if(V&&N&&N.includes(V.class)||!N){var q,Te,je=(q=V)===null||q===void 0?void 0:q.buttons.split(" ").filter(function(Fe){return Fe!==T});V&&je!=null&&je.length?V.buttons=je.join(" "):((Te=R.options.buttonTheme)===null||Te===void 0||Te.splice(ee,1),V=null)}return V})}),this.render())}},{key:"getButtonElement",value:function(S){var N,R=this.buttonElements[S];return R&&(N=R.length>1?R:R[0]),N}},{key:"inputPatternIsValid",value:function(S){var N,R=this.options.inputPattern;if((N=R instanceof RegExp?R:R[this.options.inputName||this.defaultName])&&S){var T=N.test(S);return this.options.debug&&console.log('inputPattern ("'.concat(N,'"): ').concat(T?"passed":"did not pass!")),T}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var S=this.options.physicalKeyboardHighlightPreventDefault,N=S!==void 0&&S;document.addEventListener("keyup",this.handleKeyUp,N),document.addEventListener("keydown",this.handleKeyDown,N),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(S){this.caretEventHandler(S),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(S)}},{key:"handleKeyDown",value:function(S){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(S)}},{key:"handleMouseUp",value:function(S){this.caretEventHandler(S)}},{key:"handleTouchEnd",value:function(S){this.caretEventHandler(S)}},{key:"handleSelect",value:function(S){this.caretEventHandler(S)}},{key:"handleSelectionChange",value:function(S){navigator.userAgent.includes("Firefox")||this.caretEventHandler(S)}},{key:"caretEventHandler",value:function(S){var N,R=this;S.target.tagName&&(N=S.target.tagName.toLowerCase()),this.dispatch(function(T){var K=S.target===T.keyboardDOM||S.target&&T.keyboardDOM.contains(S.target);if(R.options.syncInstanceInputs&&Array.isArray(S.path)&&(K=S.path.some(function(q){var Te;return q==null||(Te=q.hasAttribute)===null||Te===void 0?void 0:Te.call(q,"data-skInstance")})),(N==="textarea"||N==="input"&&["text","search","url","tel","password"].includes(S.target.type))&&!T.options.disableCaretPositioning){var V=S.target.selectionStart,ee=S.target.selectionEnd;T.options.rtl&&(V=T.utilities.getRtlOffset(V,T.getInput()),ee=T.utilities.getRtlOffset(ee,T.getInput())),T.setCaretPosition(V,ee),T.activeInputElement=S.target,T.options.debug&&console.log("Caret at: ",T.getCaretPosition(),T.getCaretPositionEnd(),S&&S.target.tagName.toLowerCase(),"(".concat(T.keyboardDOMClass,")"),S==null?void 0:S.type)}else!T.options.disableCaretPositioning&&K||(S==null?void 0:S.type)==="selectionchange"||(T.setCaretPosition(null),T.activeInputElement=null,T.options.debug&&console.log('Caret position reset due to "'.concat(S==null?void 0:S.type,'" event'),S))})}},{key:"recurseButtons",value:function(S){var N=this;S&&Object.keys(this.buttonElements).forEach(function(R){return N.buttonElements[R].forEach(S)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var S=this.options.physicalKeyboardHighlightPreventDefault,N=S!==void 0&&S;document.removeEventListener("keyup",this.handleKeyUp,N),document.removeEventListener("keydown",this.handleKeyDown,N),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(R){R&&(R.onpointerdown=null,R.onpointerup=null,R.onpointercancel=null,R.ontouchstart=null,R.ontouchend=null,R.ontouchcancel=null,R.onclick=null,R.onmousedown=null,R.onmouseup=null,R.remove(),R=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(S){var N=this.options.buttonTheme,R=[];return Array.isArray(N)&&N.forEach(function(T){if(T&&T.class&&typeof T.class=="string"&&T.buttons&&typeof T.buttons=="string"){var K=T.class.split(" ");T.buttons.split(" ").includes(S)&&(R=[].concat(U(R),U(K)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',T)}),R}},{key:"setDOMButtonAttributes",value:function(S,N){var R=this.options.buttonAttributes;Array.isArray(R)&&R.forEach(function(T){T.attribute&&typeof T.attribute=="string"&&T.value&&typeof T.value=="string"&&T.buttons&&typeof T.buttons=="string"?T.buttons.split(" ").includes(S)&&N(T.attribute,T.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',T)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(S){var N;if((N=S.target.classList)!==null&&N!==void 0&&N.contains("hg-button"))return S.preventDefault(),S.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var S=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(N){var R=S.utilities.isConstructor(N)?new N(S):N(S);R.init&&R.init(S)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(S,N){return!!this.modules[S]&&this.modules[S][N]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(S,N,R,T){var K=this,V=Array.from(S.children),ee=0;return V.length&&R.forEach(function(q,Te){var je=T[Te];if(!(je&&je>q))return!1;var Fe=q-ee,Le=je-ee,We=document.createElement("div");We.className+="hg-button-container";var he="".concat(K.options.layoutName,"-r").concat(N,"c").concat(Te);We.setAttribute("data-skUID",he);var yt=V.splice(Fe,Le-Fe+1);ee+=Le-Fe,yt.forEach(function(pn){return We.appendChild(pn)}),V.splice(Fe,0,We),S.innerHTML="",V.forEach(function(pn){return S.appendChild(pn)}),K.options.debug&&console.log("rowDOMContainer",yt,Fe,Le,ee+1)}),S}},{key:"render",value:function(){var S=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var N="hg-layout-".concat(this.options.layoutName),R=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},T=this.options.useTouchEvents||!1,K=T?"hg-touch-events":"",V=this.options.useMouseEvents||!1,ee=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,N,this.keyboardPluginClasses,K),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",R[this.options.layoutName||this.defaultName].forEach(function(q,Te){var je=q.split(" ");S.options.excludeFromLayout&&S.options.excludeFromLayout[S.options.layoutName||S.defaultName]&&(je=je.filter(function(he){return S.options.excludeFromLayout&&!S.options.excludeFromLayout[S.options.layoutName||S.defaultName].includes(he)}));var Fe=document.createElement("div");Fe.className+="hg-row";var Le=[],We=[];je.forEach(function(he,yt){var pn,Ml=!ee&&typeof he=="string"&&he.length>1&&he.indexOf("[")===0,vs=!ee&&typeof he=="string"&&he.length>1&&he.indexOf("]")===he.length-1;Ml&&(Le.push(yt),he=he.replace(/\[/g,"")),vs&&(We.push(yt),he=he.replace(/\]/g,""));var Zo=S.utilities.getButtonClass(he),Qo=S.utilities.getButtonDisplayName(he,S.options.display,S.options.mergeDisplay),c9=S.options.useButtonTag?"button":"div",On=document.createElement(c9);On.className+="hg-button ".concat(Zo),(pn=On.classList).add.apply(pn,U(S.getButtonThemeClasses(he))),S.setDOMButtonAttributes(he,function(qt,d9){On.setAttribute(qt,d9)}),S.activeButtonClass="hg-activeButton",!S.utilities.pointerEventsSupported()||T||V?T?(On.ontouchstart=function(qt){S.handleButtonClicked(he,qt),S.handleButtonMouseDown(he,qt)},On.ontouchend=function(qt){S.handleButtonMouseUp(he,qt)},On.ontouchcancel=function(qt){S.handleButtonMouseUp(he,qt)}):(On.onclick=function(qt){S.setMouseHold(!1),typeof S.options.onKeyReleased=="function"||S.options.useMouseEvents&&S.options.clickOnMouseDown||S.handleButtonClicked(he,qt)},On.onmousedown=function(qt){(typeof S.options.onKeyReleased=="function"||S.options.useMouseEvents&&S.options.clickOnMouseDown)&&!S.isMouseHold&&S.handleButtonClicked(he,qt),S.handleButtonMouseDown(he,qt)},On.onmouseup=function(qt){S.handleButtonMouseUp(he,qt)}):(On.onpointerdown=function(qt){S.handleButtonClicked(he,qt),S.handleButtonMouseDown(he,qt)},On.onpointerup=function(qt){S.handleButtonMouseUp(he,qt)},On.onpointercancel=function(qt){S.handleButtonMouseUp(he,qt)}),On.setAttribute("data-skBtn",he);var u9="".concat(S.options.layoutName,"-r").concat(Te,"b").concat(yt);On.setAttribute("data-skBtnUID",u9);var K2=document.createElement("span");K2.innerHTML=Qo,On.appendChild(K2),S.buttonElements[he]||(S.buttonElements[he]=[]),S.buttonElements[he].push(On),Fe.appendChild(On)}),Fe=S.parseRowDOMContainers(Fe,Te,Le,We),S.keyboardRowsDOM.appendChild(Fe)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||T||V?T?(document.ontouchend=function(q){return S.handleButtonMouseUp(void 0,q)},document.ontouchcancel=function(q){return S.handleButtonMouseUp(void 0,q)},this.keyboardDOM.ontouchstart=function(q){return S.handleKeyboardContainerMouseDown(q)}):T||(document.onmouseup=function(q){return S.handleButtonMouseUp(void 0,q)},this.keyboardDOM.onmousedown=function(q){return S.handleKeyboardContainerMouseDown(q)}):(document.onpointerup=function(q){return S.handleButtonMouseUp(void 0,q)},this.keyboardDOM.onpointerdown=function(q){return S.handleKeyboardContainerMouseDown(q)}),this.onInit())}}],L&&H(j.prototype,L),z&&H(j,z),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,z}(),J=ke,ae=J;return c}()}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var c=i[a]={exports:{}};return r[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return g},default:function(){return y}});var a=s(442);function l(v){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},l(v)}function c(v,w){var b=Object.keys(v);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(v);w&&(k=k.filter(function(_){return Object.getOwnPropertyDescriptor(v,_).enumerable})),b.push.apply(b,k)}return b}function u(v){for(var w=1;w<arguments.length;w++){var b=arguments[w]!=null?arguments[w]:{};w%2?c(Object(b),!0).forEach(function(k){d(v,k,b[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(b)):c(Object(b)).forEach(function(k){Object.defineProperty(v,k,Object.getOwnPropertyDescriptor(b,k))})}return v}function d(v,w,b){return(w=function(k){var _=function(E,C){if(l(E)!="object"||!E)return E;var P=E[Symbol.toPrimitive];if(P!==void 0){var M=P.call(E,C);if(l(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(E)}(k,"string");return l(_)=="symbol"?_:_+""}(w))in v?Object.defineProperty(v,w,{value:b,enumerable:!0,configurable:!0,writable:!0}):v[w]=b,v}var f=function(v){return u(u({},v),{},{keyboardRef:null})},h=s(651),m=s.n(h),g=function(v){var w=v.baseClass||"react-simple-keyboard",b=a.useRef(null),k=a.useRef(null),_=a.useRef(null),E=a.useRef(v);return a.useEffect(function(){return function(){_.current&&_.current.destroy(),b.current=!1}},[]),a.useEffect(function(){var C=function(D){return u(u({},D),{},{theme:"simple-keyboard ".concat(D.theme||"hg-theme-default")})}(v);if(!b.current){b.current=!0,C.debug&&console.log("ReactSimpleKeyboard: Init");var P=k.current,M=".".concat(w);_.current=new(m())(P||M,C),C.keyboardRef&&C.keyboardRef(_.current)}var O=function(D,G){var U=f(G),X=f(D);return Object.keys(U).filter(function(Z){return U[Z]!==X[Z]})}(E.current,C);if(O.length){var I=_.current;E.current=C,I==null||I.setOptions(C),C.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",O)}},[b,w,E,v]),a.createElement("div",{className:w,ref:k})},y=g}(),o}()})})(k6);var Dce=k6.exports;const Lce=jc(Dce),jce={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w  r t y    p  +","{lock}  s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W  R T Y    P  *","{lock}  S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y  i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y  I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},$ce={en:{"{bksp}":"Backspace ","{enter}":"Enter ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Caps Lock ","{space}":"Space"},es:{"{bksp}":"","{enter}":"Intro ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Bloq Mays ","{space}":"Espacio"}},VR="          ",WR="  ";function Fce(){const t=pE(),e=Tt(),{status:n,dispatch:r,devices:i}=kn(),[s,o]=x.useState("none"),[a,l]=x.useState(!1),[c,u]=x.useState(!1),d=x.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),f=x.useCallback(h=>{i.keyboard&&n.type==="running"&&n.waitingForInput&&r("keyboard.sendChar",h)},[n,r,i.keyboard]);return i.keyboard?p.jsxs("div",{className:"absolute left-[1600px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),p.jsx(Lce,{theme:ve("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:jce,display:$ce[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:VR},{class:"hg-diaeresisDeadKeyButton",buttons:WR}],disableButtonHold:!0,onKeyPress:h=>{if(h==="{shiftleft}"||h==="{shiftright}"){o(m=>m==="none"?"once":"none");return}if(h==="{lock}"){o(m=>m==="none"?"lock":"none");return}if(t==="es"){if(a){VR.includes(h)&&(l(!1),s==="once"&&o("none"),f(h));return}else if(h===""){l(!0);return}if(c){WR.includes(h)&&(u(!1),s==="once"&&o("none"),f(h));return}else if(h===""){u(!0);return}}s==="once"&&o("none"),f(h==="{bksp}"?"\b":h==="{enter}"?`
`:h==="{tab}"?"	":h==="{space}"?" ":h)}})]}):null}function Bce(){const t=Tt(),{devices:e}=kn(),n=nt(DE).toArray();return e.leds?p.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),p.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((r,i)=>p.jsxs("div",{className:"flex w-7 flex-col items-center",children:[p.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:i}),p.jsx("div",{className:ve("relative size-7 rounded-full transition",r?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:p.jsx("div",{className:ve("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",r?"opacity-100":"opacity-0")})})]},i))})]}):null}function zce(){const t=Tt(),e=nt(Dq),n=nt(Pe.IP),r=nt(_5),i=nt(C5),s=nt(Pe.SP),o=nt(YC),a=nt($S),l=r$(),c=a||l.pic||l.handshake!==null,u=()=>{const d=[];for(let f=0;f<256;f+=16){const h=e.slice(f,f+16);d.push(h)}return d};return p.jsxs("div",{className:"absolute left-[800px] top-0 z-10 size-auto rounded-lg border border-stone-600 bg-stone-900 shadow-2xl [&_*]:z-20","data-testid":"memory-component",children:[p.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white shadow",children:t("computer.memory.name")}),p.jsx("div",{className:"m-4 overflow-x-auto",children:p.jsxs("table",{className:"mx-auto w-auto min-w-[600px] border-separate text-center font-mono text-base",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{}),Array.from({length:16}).map((d,f)=>p.jsx("th",{className:ve("size-10 border border-gray-500 bg-mantis-500",f%4===0&&f!==0?"border-l-4 border-mantis-600":""),children:f.toString(16).toUpperCase()},f))]})}),p.jsx("tbody",{children:u().map((d,f)=>p.jsxs("tr",{className:f%4===0&&f!==0?"border-t-4 border-mantis-600":"",children:[p.jsx("th",{className:"size-10 border border-gray-500 bg-mantis-500",children:f.toString(16).toUpperCase()}),d.map((h,m)=>{var g,y,v;return p.jsx("td",{className:ve("size-10 border border-gray-500 p-0 transition-shadow duration-200",m%4===0&&m!==0?"border-l-4 border-mantis-600":""),children:p.jsx(Uce,{address:h.address,value:h.value,isIP:h.address.valueOf()===n.valueOf(),isSP:o&&h.address.valueOf()===s.valueOf(),isStackData:o&&h.address.valueOf()>s.valueOf(),isProgramAddress:!!r.find(w=>w.address===h.address.value),isDataAddress:!!i.find(w=>w.address===h.address.value),isInterruptVector:c&&h.address.valueOf()>=0&&h.address.valueOf()<=7,label:((g=r.find(w=>w.address===h.address.value))==null?void 0:g.name)||((y=i.find(w=>w.address===h.address.value))==null?void 0:y.label)||null,length:((v=r.find(w=>w.address===h.address.value))==null?void 0:v.length)??null})},m)})]},f))})]})})]})}function Uce({address:t,value:e,isIP:n,isSP:r,isStackData:i,isProgramAddress:s,isDataAddress:o,isInterruptVector:a,label:l,length:c}){const u=Tt(),d=nt(Jh),[f,h]=x.useState(!1),m=x.useRef(e);x.useEffect(()=>{m.current!==e&&(h(!0),setTimeout(()=>h(!1),300),m.current=e)},[e]);const g=u("computer.memory.cell",t);return p.jsxs(x6,{children:[p.jsx(S6,{asChild:!0,children:p.jsxs(on.div,{title:g,className:ve("relative flex size-10 cursor-pointer select-none items-center justify-center border font-mono text-base transition-all duration-200",n?"z-10 shadow-lg shadow-red-500/50 outline outline-2 outline-red-500 ring-2 ring-red-500 ring-offset-2":r?"z-10 shadow-lg shadow-yellow-400/50 outline outline-2 outline-yellow-400 ring-2 ring-yellow-400 ring-offset-2":"","bg-stone-800",a&&!r&&!i?"border-l-4 border-purple-500":"",s&&!r&&!i&&!a?"border-l-4 border-blue-500":"",o&&!r&&!i&&!s&&!a?"border-l-4 border-green-500":"",i&&!r?"border-l-4 border-yellow-500":"",r?"border-l-4 border-yellow-400":"","text-stone-100","hover:z-20 hover:scale-110 hover:shadow-xl",f&&"animate-pulse"),style:t.value===d.value?pt("memory.operating-cell"):void 0,children:[a&&!r&&!i&&p.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-purple-400",title:"Vector de interrupcin",style:{lineHeight:1},children:""}),s&&!r&&!i&&!a&&p.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-blue-400",title:"Instruccin",style:{lineHeight:1},children:""}),o&&!r&&!i&&!s&&!a&&p.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-green-400",title:"Dato",style:{lineHeight:1},children:""}),i&&!r&&p.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-400",title:"Dato de la pila",style:{lineHeight:1},children:""}),r&&p.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-300",title:"Stack Pointer",style:{lineHeight:1},children:""}),p.jsx("span",{className:"z-10 mt-3 block font-mono text-lg font-bold",children:e.toString("hex")}),n&&p.jsx("span",{className:"absolute right-0 top-0 text-xs text-red-500",title:"IP",style:{lineHeight:1},children:""}),r&&p.jsx("span",{className:"absolute right-0 top-0 text-xs text-yellow-500",title:"SP",style:{lineHeight:1},children:""})]})}),p.jsxs(p2,{className:"w-60",children:[p.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[g," ",l?p.jsxs("span",{className:"font-bold text-mantis-400",children:["(",l,")",c!==null&&c!==""&&p.jsxs("span",{className:"text-xs font-normal text-white",children:[" Bytes: ",c]})]}):""]}),p.jsx("hr",{className:"border-stone-600"}),p.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(y=>p.jsxs("li",{children:[p.jsx("b",{className:"font-medium",children:u(`generics.byte-representation.${y}`)}),":"," ",p.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(y)})]},y))})]})]})}function Hce(){const t=Tt(),{devices:e}=kn();return e.pic?p.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsxs("div",{className:"flex items-start",children:[p.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),p.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[p.jsx(oi,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:LE,springs:"pic.IMR",emphasis:!0}),p.jsx(oi,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:jE,springs:"pic.IRR",emphasis:!0}),p.jsx(oi,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:$E,springs:"pic.ISR",emphasis:!0})]})]}),p.jsx("hr",{className:"mb-2 border-stone-600"}),p.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:Oy.map((n,r)=>p.jsx(oi,{name:`INT${r}`,title:t("generics.io-register",`INT${r}`,36+r),valueAtom:n,springs:`pic.INT${r}`,className:"mx-auto"},r))})]}):null}function Vce(){const t=Tt(),{devices:e}=kn();return e.pio?p.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"mb-2 block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),p.jsx("hr",{className:"border-stone-600"}),p.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[p.jsx(oi,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:FE,springs:"pio.PA"}),p.jsx(oi,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:zE,springs:"pio.CA"})]}),p.jsx("hr",{className:"border-stone-600"}),p.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[p.jsx(oi,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:BE,springs:"pio.PB"}),p.jsx(oi,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:UE,springs:"pio.CB"})]})]}):null}const Wce="_printer_fbkny_2",Gce="_shadow_fbkny_6",Kce="_sides_fbkny_11",Xce="_front_fbkny_22",Yce="_trailContainer_fbkny_27",qce="_trail_fbkny_27",Jce="_paper_fbkny_33",Ul={printer:Wce,shadow:Gce,sides:Kce,front:Xce,trailContainer:Yce,trail:qce,paper:Jce},Zce=Array.from({length:5},(t,e)=>e);function Qce(){const t=Tt(),{devices:e}=kn(),n=nt(Iy),r=nt(Dy);return e.printer?p.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:p.jsxs("div",{className:Ul.printer,title:t("computer.printer.name"),children:[p.jsx("div",{className:Ul.shadow}),p.jsx("div",{className:Ul.sides}),p.jsxs("div",{className:Ul.front,children:[p.jsx("div",{className:Ul.trailContainer,children:p.jsx("div",{className:Ul.trail,children:p.jsx("pre",{className:Ul.paper,children:r})})}),p.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:Zce.map(i=>{const s=n[i]?d5(n[i].unsigned):null;return p.jsx("span",{className:ve("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},i)})}),p.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:p.jsx(on.div,{className:"h-full bg-mantis-400",style:{width:pt("printer.printing.progress").to(i=>`${i*100}%`),opacity:pt("printer.printing.opacity")}})})]})]})}):null}const eue="_container_6nvz7_2",tue="_text_6nvz7_22",GR={container:eue,text:tue};function nue(){const t=Tt(),{devices:e}=kn(),n=nt(HE);return e.screen?p.jsxs("div",{className:"absolute left-[1600px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),p.jsx("div",{className:GR.container,children:p.jsx("pre",{className:GR.text,children:n})})]}):null}function rue(){const t=Tt(),{dispatch:e,devices:n}=kn(),r=nt(iw).toArray();return n.switches?p.jsxs("div",{className:"absolute left-[1300px] top-[680px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),p.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:r.map((i,s)=>p.jsxs("div",{className:"flex w-8 flex-col items-center",children:[p.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:s}),p.jsx(fa,{checked:i,onCheckedChange:()=>e("switch.toggle",s),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800"})]},s))})]}):null}function iue(){const t=Tt(),{devices:e}=kn();return e.timer?p.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[p.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),p.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[p.jsx(oi,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:Ly,springs:"timer.CONT"}),p.jsx(oi,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:VE,springs:"timer.COMP"})]})]}):null}function _6(){const t=x.useRef(null);return x.useEffect(()=>{qte()},[]),p.jsx("div",{className:"relative size-full",children:p.jsxs(Qle,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[p.jsx(nce,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:p.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[p.jsx(cce,{}),p.jsx(Pce,{}),p.jsx(Ace,{}),p.jsx(ice,{}),p.jsx(zce,{}),p.jsx(Ice,{}),p.jsx(Hce,{}),p.jsx(Vce,{}),p.jsx(iue,{}),p.jsx(uce,{}),p.jsx(Oce,{}),p.jsx(Fce,{}),p.jsx(Bce,{}),p.jsx(Qce,{}),p.jsx(rue,{}),p.jsx(nue,{})]})}),p.jsx(rce,{wrapperRef:t})]})})}const sue=1024;let oue=0;class _x{constructor(e,n){this.from=e,this.to=n}}class lt{constructor(e={}){this.id=oue++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ur.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}lt.closedBy=new lt({deserialize:t=>t.split(" ")});lt.openedBy=new lt({deserialize:t=>t.split(" ")});lt.group=new lt({deserialize:t=>t.split(" ")});lt.isolate=new lt({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});lt.contextHash=new lt({perNode:!0});lt.lookAhead=new lt({perNode:!0});lt.mounted=new lt({perNode:!0});class Hy{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[lt.mounted.id]}}const aue=Object.create(null);class Ur{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):aue,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Ur(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(lt.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(lt.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}Ur.none=new Ur("",Object.create(null),0,8);class m2{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}n.push(i?new Ur(r.name,i,r.id,r.flags):r)}return new m2(n)}}const bg=new WeakMap,KR=new WeakMap;var Fn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Fn||(Fn={}));class Kt{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Hy.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new n_(this.topNode,e)}cursorAt(e,n=0,r=0){let i=bg.get(this)||this.topNode,s=new n_(i);return s.moveTo(e,n),bg.set(this,s._tree),s}get topNode(){return new Li(this,0,0,null)}resolve(e,n=0){let r=bp(bg.get(this)||this.topNode,e,n,!1);return bg.set(this,r),r}resolveInner(e,n=0){let r=bp(KR.get(this)||this.topNode,e,n,!0);return KR.set(this,r),r}resolveStack(e,n=0){return uue(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&Fn.IncludeAnonymous)>0;for(let l=this.cursor(o|Fn.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:y2(Ur.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new Kt(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new Kt(Ur.none,n,r,i)))}static build(e){return due(e)}}Kt.empty=new Kt(Ur.none,[],[],0);class g2{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new g2(this.buffer,this.index)}}class gl{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return Ur.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(C6(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let c=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,c)}return new gl(s,o,this.set)}}function C6(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function bp(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof Li&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:Fn.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Li&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class E6{cursor(e=0){return new n_(this,e)}getChild(e,n=null,r=null){let i=XR(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return XR(this,e,n,r)}resolve(e,n=0){return bp(this,e,n,!1)}resolveInner(e,n=0){return bp(this,e,n,!0)}matchContext(e){return t_(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Li extends E6{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(C6(i,r,d,d+u.length)){if(u instanceof gl){if(s&Fn.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,n,r-d,i);if(f>-1)return new Da(new lue(o,u,e,d),null,f)}else if(s&Fn.IncludeAnonymous||!u.type.isAnonymous||v2(u)){let f;if(!(s&Fn.IgnoreMounts)&&(f=Hy.get(u))&&!f.overlay)return new Li(f.tree,d,e,o);let h=new Li(u,d,e,o);return s&Fn.IncludeAnonymous||!h.type.isAnonymous?h:h.nextChild(n<0?u.children.length-1:0,n,r,i)}}}if(s&Fn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Fn.IgnoreOverlays)&&(i=Hy.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Li(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function XR(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function t_(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class lue{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Da extends E6{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new Da(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Fn.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Da(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Da(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Da(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new Kt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function A6(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let r=n instanceof Li&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new cue(i,n)}class cue{constructor(e,n){this.heads=e,this.node=n}get next(){return A6(this.heads)}}function uue(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Li?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,n)),s=o}else{let o=Hy.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Li(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(bp(a,e,n,!1))}}return i?A6(i):r}class n_{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Li)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Li?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Fn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Fn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Fn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&Fn.IncludeAnonymous||a instanceof gl||!a.type.isAnonymous||v2(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Da(this.buffer,n,this.stack[i]);return this.bufferNode=new Da(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return t_(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return t_(this._tree,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function v2(t){return t.children.some(e=>e instanceof gl||!e.type.isAnonymous||v2(e))}function due(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=sue,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new g2(n,n.length):n,l=r.types,c=0,u=0;function d(_,E,C,P,M,O){let{id:I,start:D,end:G,size:U}=a,X=u,Z=c;for(;U<0;)if(a.next(),U==-1){let ke=s[I];C.push(ke),P.push(D-_);return}else if(U==-3){c=I;return}else if(U==-4){u=I;return}else throw new RangeError(`Unrecognized record size: ${U}`);let te=l[I],H,$,ne=D-_;if(G-D<=i&&($=y(a.pos-E,M))){let ke=new Uint16Array($.size-$.skip),J=a.pos-$.size,ae=ke.length;for(;a.pos>J;)ae=v($.start,ke,ae);H=new gl(ke,G-$.start,r),ne=$.start-_}else{let ke=a.pos-U;a.next();let J=[],ae=[],j=I>=o?I:-1,L=0,z=G;for(;a.pos>ke;)j>=0&&a.id==j&&a.size>=0?(a.end<=z-i&&(m(J,ae,D,L,a.end,z,j,X,Z),L=J.length,z=a.end),a.next()):O>2500?f(D,ke,J,ae):d(D,ke,J,ae,j,O+1);if(j>=0&&L>0&&L<J.length&&m(J,ae,D,L,D,z,j,X,Z),J.reverse(),ae.reverse(),j>-1&&L>0){let S=h(te,Z);H=y2(te,J,ae,0,J.length,0,G-D,S,S)}else H=g(te,J,ae,G-D,X-G,Z)}C.push(H),P.push(ne)}function f(_,E,C,P){let M=[],O=0,I=-1;for(;a.pos>E;){let{id:D,start:G,end:U,size:X}=a;if(X>4)a.next();else{if(I>-1&&G<I)break;I<0&&(I=U-i),M.push(D,G,U),O++,a.next()}}if(O){let D=new Uint16Array(O*4),G=M[M.length-2];for(let U=M.length-3,X=0;U>=0;U-=3)D[X++]=M[U],D[X++]=M[U+1]-G,D[X++]=M[U+2]-G,D[X++]=X;C.push(new gl(D,M[2]-G,r)),P.push(G-_)}}function h(_,E){return(C,P,M)=>{let O=0,I=C.length-1,D,G;if(I>=0&&(D=C[I])instanceof Kt){if(!I&&D.type==_&&D.length==M)return D;(G=D.prop(lt.lookAhead))&&(O=P[I]+D.length+G)}return g(_,C,P,M,O,E)}}function m(_,E,C,P,M,O,I,D,G){let U=[],X=[];for(;_.length>P;)U.push(_.pop()),X.push(E.pop()+C-M);_.push(g(r.types[I],U,X,O-M,D-O,G)),E.push(M-C)}function g(_,E,C,P,M,O,I){if(O){let D=[lt.contextHash,O];I=I?[D].concat(I):[D]}if(M>25){let D=[lt.lookAhead,M];I=I?[D].concat(I):[D]}return new Kt(_,E,C,P,I)}function y(_,E){let C=a.fork(),P=0,M=0,O=0,I=C.end-i,D={size:0,start:0,skip:0};e:for(let G=C.pos-_;C.pos>G;){let U=C.size;if(C.id==E&&U>=0){D.size=P,D.start=M,D.skip=O,O+=4,P+=4,C.next();continue}let X=C.pos-U;if(U<0||X<G||C.start<I)break;let Z=C.id>=o?4:0,te=C.start;for(C.next();C.pos>X;){if(C.size<0)if(C.size==-3)Z+=4;else break e;else C.id>=o&&(Z+=4);C.next()}M=te,P+=U,O+=Z}return(E<0||P==_)&&(D.size=P,D.start=M,D.skip=O),D.size>4?D:void 0}function v(_,E,C){let{id:P,start:M,end:O,size:I}=a;if(a.next(),I>=0&&P<o){let D=C;if(I>4){let G=a.pos-(I-4);for(;a.pos>G;)C=v(_,E,C)}E[--C]=D,E[--C]=O-_,E[--C]=M-_,E[--C]=P}else I==-3?c=P:I==-4&&(u=P);return C}let w=[],b=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,w,b,-1,0);let k=(e=t.length)!==null&&e!==void 0?e:w.length?b[0]+w[0].length:0;return new Kt(l[t.topID],w.reverse(),b.reverse(),k)}const YR=new WeakMap;function wv(t,e){if(!t.isAnonymous||e instanceof gl||e.type!=t)return 1;let n=YR.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Kt)){n=1;break}n+=wv(t,r)}YR.set(e,n)}return n}function y2(t,e,n,r,i,s,o,a,l){let c=0;for(let m=r;m<i;m++)c+=wv(t,e[m]);let u=Math.ceil(c*1.5/8),d=[],f=[];function h(m,g,y,v,w){for(let b=y;b<v;){let k=b,_=g[b],E=wv(t,m[b]);for(b++;b<v;b++){let C=wv(t,m[b]);if(E+C>=u)break;E+=C}if(b==k+1){if(E>u){let C=m[k];h(C.children,C.positions,0,C.children.length,g[k]+w);continue}d.push(m[k])}else{let C=g[b-1]+m[b-1].length-_;d.push(y2(t,m,g,k,b,_,C,null,l))}f.push(_+w-s)}}return h(e,n,r,i,0),(a||l)(d,f,o)}class pc{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new pc(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=r)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let h=Math.max(f.from,l)-c,m=Math.min(f.to,d)-c;f=h>=m?null:new pc(h,m,f.tree,f.offset+c,a>0,!!u)}if(f&&i.push(f),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}class P6{startParse(e,n,r){return typeof e=="string"&&(e=new fue(e)),r=r?r.length?r.map(i=>new _x(i.from,i.to)):[new _x(0,0)]:[new _x(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class fue{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new lt({perNode:!0});let hue=0;class bn{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=hue++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof bn&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new bn(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new Vy(e);return r=>r.modified.indexOf(n)>-1?r:Vy.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let pue=0;class Vy{constructor(e){this.name=e,this.instances=[],this.id=pue++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&mue(n,a.modified));if(r)return r;let i=[],s=new bn(e.name,i,e,n);for(let a of n)a.instances.push(s);let o=gue(n);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(Vy.get(a,l));return s}}function mue(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function gue(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function vue(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let d=0;;){if(a=="..."&&d>0&&d+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==i.length)break;let h=i[d++];if(d==i.length&&h=="!"){o=0;break}if(h!="/")throw new RangeError("Invalid path: "+i);a=i.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new Wy(r,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return N6.add(e)}const N6=new lt;class Wy{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Wy.empty=new Wy([],2,null);function T6(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function yue(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function wue(t,e,n,r=0,i=t.length){let s=new bue(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class bue{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(h=>!h.scope||h.scope(o)));let c=i,u=xue(e)||Wy.empty,d=yue(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(lt.mounted);if(f&&f.overlay){let h=e.node.enter(f.overlay[0].from+a,1),m=this.highlighters.filter(y=>!y.scope||y.scope(f.tree.type)),g=e.firstChild();for(let y=0,v=a;;y++){let w=y<f.overlay.length?f.overlay[y]:null,b=w?w.from+a:l,k=Math.max(n,v),_=Math.min(r,b);if(k<_&&g)for(;e.from<_&&(this.highlightRange(e,k,_,i,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=b||!e.nextSibling())););if(!w||b>r)break;v=w.to+a,v>n&&(this.highlightRange(h.cursor(),Math.max(n,w.from+a),Math.min(r,v),"",m),this.startSpan(Math.min(r,v),c))}g&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function xue(t){let e=t.type.prop(N6);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const fe=bn.define,xg=fe(),ha=fe(),qR=fe(ha),JR=fe(ha),pa=fe(),Sg=fe(pa),Cx=fe(pa),ks=fe(),Hl=fe(ks),bs=fe(),xs=fe(),r_=fe(),yf=fe(r_),kg=fe(),Be={comment:xg,lineComment:fe(xg),blockComment:fe(xg),docComment:fe(xg),name:ha,variableName:fe(ha),typeName:qR,tagName:fe(qR),propertyName:JR,attributeName:fe(JR),className:fe(ha),labelName:fe(ha),namespace:fe(ha),macroName:fe(ha),literal:pa,string:Sg,docString:fe(Sg),character:fe(Sg),attributeValue:fe(Sg),number:Cx,integer:fe(Cx),float:fe(Cx),bool:fe(pa),regexp:fe(pa),escape:fe(pa),color:fe(pa),url:fe(pa),keyword:bs,self:fe(bs),null:fe(bs),atom:fe(bs),unit:fe(bs),modifier:fe(bs),operatorKeyword:fe(bs),controlKeyword:fe(bs),definitionKeyword:fe(bs),moduleKeyword:fe(bs),operator:xs,derefOperator:fe(xs),arithmeticOperator:fe(xs),logicOperator:fe(xs),bitwiseOperator:fe(xs),compareOperator:fe(xs),updateOperator:fe(xs),definitionOperator:fe(xs),typeOperator:fe(xs),controlOperator:fe(xs),punctuation:r_,separator:fe(r_),bracket:yf,angleBracket:fe(yf),squareBracket:fe(yf),paren:fe(yf),brace:fe(yf),content:ks,heading:Hl,heading1:fe(Hl),heading2:fe(Hl),heading3:fe(Hl),heading4:fe(Hl),heading5:fe(Hl),heading6:fe(Hl),contentSeparator:fe(ks),list:fe(ks),quote:fe(ks),emphasis:fe(ks),strong:fe(ks),link:fe(ks),monospace:fe(ks),strikethrough:fe(ks),inserted:fe(),deleted:fe(),changed:fe(),invalid:fe(),meta:kg,documentMeta:fe(kg),annotation:fe(kg),processingInstruction:fe(kg),definition:bn.defineModifier("definition"),constant:bn.defineModifier("constant"),function:bn.defineModifier("function"),standard:bn.defineModifier("standard"),local:bn.defineModifier("local"),special:bn.defineModifier("special")};for(let t in Be){let e=Be[t];e instanceof bn&&(e.name=t)}T6([{tag:Be.link,class:"tok-link"},{tag:Be.heading,class:"tok-heading"},{tag:Be.emphasis,class:"tok-emphasis"},{tag:Be.strong,class:"tok-strong"},{tag:Be.keyword,class:"tok-keyword"},{tag:Be.atom,class:"tok-atom"},{tag:Be.bool,class:"tok-bool"},{tag:Be.url,class:"tok-url"},{tag:Be.labelName,class:"tok-labelName"},{tag:Be.inserted,class:"tok-inserted"},{tag:Be.deleted,class:"tok-deleted"},{tag:Be.literal,class:"tok-literal"},{tag:Be.string,class:"tok-string"},{tag:Be.number,class:"tok-number"},{tag:[Be.regexp,Be.escape,Be.special(Be.string)],class:"tok-string2"},{tag:Be.variableName,class:"tok-variableName"},{tag:Be.local(Be.variableName),class:"tok-variableName tok-local"},{tag:Be.definition(Be.variableName),class:"tok-variableName tok-definition"},{tag:Be.special(Be.variableName),class:"tok-variableName2"},{tag:Be.definition(Be.propertyName),class:"tok-propertyName tok-definition"},{tag:Be.typeName,class:"tok-typeName"},{tag:Be.namespace,class:"tok-namespace"},{tag:Be.className,class:"tok-className"},{tag:Be.macroName,class:"tok-macroName"},{tag:Be.propertyName,class:"tok-propertyName"},{tag:Be.operator,class:"tok-operator"},{tag:Be.comment,class:"tok-comment"},{tag:Be.meta,class:"tok-meta"},{tag:Be.invalid,class:"tok-invalid"},{tag:Be.punctuation,class:"tok-punctuation"}]);var Ex;const Tu=new lt;function Sue(t){return Ee.define({combine:t?e=>e.concat(t):void 0})}const kue=new lt;class ss{constructor(e,n,r=[],i=""){this.data=e,this.name=i,st.prototype.hasOwnProperty("tree")||Object.defineProperty(st.prototype,"tree",{get(){return io(this)}}),this.parser=n,this.extension=[Md.of(this),st.languageData.of((s,o,a)=>{let l=ZR(s,o,a),c=l.type.prop(Tu);if(!c)return[];let u=s.facet(c),d=l.type.prop(kue);if(d){let f=l.resolve(o-l.from,a);for(let h of d)if(h.test(f,s)){let m=s.facet(h.facet);return h.type=="replace"?m:m.concat(u)}}return u})].concat(r)}isActiveAt(e,n,r=-1){return ZR(e,n,r).type.prop(Tu)==this.data}findRegions(e){let n=e.facet(Md);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Tu)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(lt.mounted);if(a){if(a.tree.prop(Tu)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof Kt&&i(c,s.positions[l]+o)}};return i(io(e),0),r}get allowsNesting(){return!0}}ss.setState=qe.define();function ZR(t,e,n){let r=t.facet(Md),i=io(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Fn.ExcludeBuffers))s.type.isTop&&(i=s);return i}function io(t){let e=t.field(ss.state,!1);return e?e.tree:Kt.empty}class _ue{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let wf=null;class Nd{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new Nd(e,n,[],Kt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new _ue(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Kt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(pc.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(pc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=wf;wf=this;try{return e()}finally{wf=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=QR(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),r=pc.applyChanges(r,l),i=Kt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new Nd(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=QR(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends P6{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=wf;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Kt(Ur.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return wf}}function QR(t,e,n){return pc.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Td{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Td(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Nd.create(e.facet(Md).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Td(r)}}ss.state=br.define({create:Td.init,update(t,e){for(let n of e.effects)if(n.is(ss.setState))return n.value;return e.startState.facet(Md)!=e.state.facet(Md)?Td.init(e.state):t.apply(e)}});let M6=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(M6=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Ax=typeof navigator<"u"&&(!((Ex=navigator.scheduling)===null||Ex===void 0)&&Ex.isInputPending)?()=>navigator.scheduling.isInputPending():null,Cue=Kn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(ss.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(ss.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=M6(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(ss.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Ax?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>Ax&&Ax()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ss.setState.of(new Td(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>si(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Md=Ee.define({combine(t){return t.length?t[0]:null},enables:t=>[ss.state,Cue,Re.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class Eue{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const Aue=Ee.define(),w2=Ee.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Lc(t){let e=t.facet(w2);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function i_(t,e){let n="",r=t.tabSize,i=t.facet(w2)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function Pue(t,e){t instanceof st&&(t=new b2(t));for(let r of t.state.facet(Aue)){let i=r(t,e);if(i!==void 0)return i}let n=io(t.state);return n.length>=e?Nue(t,n,e):null}class b2{constructor(e,n={}){this.state=e,this.options=n,this.unit=Lc(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Bp(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const R6=new lt;function Nue(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from<r.node.from||o.to>r.node.to||o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return O6(r,t,n)}function O6(t,e,n){for(let r=t;r;r=r.next){let i=Mue(r.node);if(i)return i(x2.create(e,n,r))}return 0}function Tue(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Mue(t){let e=t.type.prop(R6);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(lt.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>Due(o,!0,1,void 0,s&&!Tue(o)?i.from:void 0)}return t.parent==null?Rue:null}function Rue(){return 0}class x2 extends b2{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new x2(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(Oue(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return O6(this.context.next,this.base,this.pos)}}function Oue(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Iue(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function Due(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=Iue(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const Lue=Ee.define(),jue=new lt;function $ue(t,e,n){let r=io(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(jue);if(l&&(a.to<r.length-50||r.length==t.doc.length||!Fue(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function Fue(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function I6(t,e,n){for(let r of t.facet(Lue)){let i=r(t,e,n);if(i)return i}return $ue(t,e,n)}function D6(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const S2=qe.define({map:D6}),xw=qe.define({map:D6});function L6(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const Qp=br.define({create(){return Qe.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=eO(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(S2)&&!Bue(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(B6),i=r?Qe.replace({widget:new Kue(r(e.state,n.value))}):tO;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(xw)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=eO(t,e.selection.main.head)),t},provide:t=>Re.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(tO.range(r,i))}return Qe.set(e,!0)}});function eO(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function j6(t,e,n){var r;let i=null;return(r=t.field(Qp,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function Bue(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}function $6(t,e){return t.field(Qp,!1)?e:e.concat(qe.appendConfig.of(Gue()))}const zue=t=>{for(let e of L6(t)){let n=I6(t.state,e.from,e.to);if(n)return t.dispatch({effects:$6(t.state,[S2.of(n),F6(t,n)])}),!0}return!1},Uue=t=>{if(!t.state.field(Qp,!1))return!1;let e=[];for(let n of L6(t)){let r=j6(t.state,n.from,n.to);r&&e.push(xw.of(r),F6(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function F6(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return Re.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const Hue=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),s=I6(e,i.from,i.to);s&&n.push(S2.of(s)),r=(s?t.lineBlockAt(s.to):i).to+1}return n.length&&t.dispatch({effects:$6(t.state,n)}),!!n.length},Vue=t=>{let e=t.state.field(Qp,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(xw.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},Wue={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},B6=Ee.define({combine(t){return Sl(t,Wue)}});function Gue(t){return[Qp,Xue]}function z6(t,e){let{state:n}=t,r=n.facet(B6),i=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=j6(t.state,a.from,a.to);l&&t.dispatch({effects:xw.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const tO=Qe.replace({widget:new class extends kl{toDOM(t){return z6(t,null)}}});class Kue extends kl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return z6(e,this.value)}}const Xue=Re.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Sw{constructor(e,n){this.specs=e;let r;function i(a){let l=ol.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof ss?a=>a.prop(Tu)==o.data:o?a=>a==o:void 0,this.style=T6(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new ol(r):null,this.themeType=n.themeType}static define(e,n){return new Sw(e,n||{})}}const s_=Ee.define(),Yue=Ee.define({combine(t){return t.length?[t[0]]:null}});function Px(t){let e=t.facet(s_);return e.length?e:t.facet(Yue)}function que(t,e){let n=[Zue],r;return t instanceof Sw&&(t.module&&n.push(Re.styleModule.of(t.module)),r=t.themeType),r?n.push(s_.computeN([Re.darkTheme],i=>i.facet(Re.darkTheme)==(r=="dark")?[t]:[])):n.push(s_.of(t)),n}class Jue{constructor(e){this.markCache=Object.create(null),this.tree=io(e.state),this.decorations=this.buildDeco(e,Px(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=io(e.state),r=Px(e.state),i=r!=Px(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return Qe.none;let r=new sl;for(let{from:i,to:s}of e.visibleRanges)wue(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Qe.mark({class:l})))},i,s);return r.finish()}}const Zue=$p.high(Kn.fromClass(Jue,{decorations:t=>t.decorations})),Que=1e4,ede="()[]{}",tde=new lt;function o_(t,e,n){let r=t.prop(e<0?lt.openedBy:lt.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function a_(t){let e=t.type.prop(tde);return e?e(t.node):t}function _g(t,e,n,r={}){let i=r.maxScanDistance||Que,s=r.brackets||ede,o=io(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=o_(l.type,n,s);if(c&&l.from<l.to){let u=a_(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return nde(t,e,n,l,u,c,s)}}return rde(t,e,n,o,a.type,i,s)}function nde(t,e,n,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do if(n<0?u.to<=r.from:u.from>=r.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=a_(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(o_(u.type,n,o))c++;else if(o_(u.type,-n,o)){if(c==0){let d=a_(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function rde(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let f=0;!u.next().done&&f<=s;){let h=u.value;n<0&&(f+=h.length);let m=e+f*n;for(let g=n>0?0:h.length-1,y=n>0?h.length:-1;g!=y;g+=n){let v=o.indexOf(h[g]);if(!(v<0||r.resolveInner(m+g,1).type!=i))if(v%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:m+g,to:m+g+1},matched:v>>1==l>>1};d--}}n>0&&(f+=h.length)}return u.done?{start:c,matched:!1}:null}function nO(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let o=r;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class U6{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=nO(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:nO(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=o=>r?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function ide(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||sde,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||C2,mergeTokens:t.mergeTokens!==!1}}function sde(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const rO=new WeakMap;class k2 extends ss{constructor(e){let n=Sue(e.languageData),r=ide(e),i,s=new class extends P6{createParse(o,a,l){return new ade(i,o,a,l)}};super(n,s,[],e.name),this.topNode=ude(n,this),i=this,this.streamParser=r,this.stateAfter=new lt({perNode:!0}),this.tokenTable=e.tokenTable?new G6(r.tokenTable):cde}static define(e){return new k2(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=rO.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=_2(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,o;if(i?(o=i.state,s=i.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),c=Math.min(e.pos,l.to);if(l.length){let u=r?r(l.from):-1,d=new U6(l.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;d.pos<c-l.from;)V6(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return r&&n==null&&rO.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function _2(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof Kt&&l<i&&_2(t,a,l,r,i);if(c)return c}return null}function H6(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<r&&a instanceof Kt){if(!(l=H6(t,a,n-o,r-o,i)))break;return i?new Kt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function ode(t,e,n,r,i){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&_2(t,s.tree,0-s.offset,n,a),c;if(l&&l.pos<=r&&(c=H6(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:c}}return{state:t.streamParser.startState(i?Lc(i):4),tree:Kt.empty}}class ade{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=Nd.get(),o=i[0].from,{state:a,tree:l}=ode(e,r,o,this.to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Lc(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Nd.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+2048);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,a=this.lineAfter(o);n+=a,r=o+a.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let a=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,o=new U6(n,e?e.state.tabSize:4,e?Lc(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=V6(s.token,o,this.state);if(a&&(i=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,i)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Kt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:lde,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Kt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Kt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function V6(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const C2=Object.create(null),xp=[Ur.none],lde=new m2(xp),iO=[],sO=Object.create(null),W6=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])W6[t]=K6(C2,e);class G6{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),W6)}resolve(e){return e?this.table[e]||(this.table[e]=K6(this.extra,e)):0}}const cde=new G6(C2);function Nx(t,e){iO.indexOf(t)>-1||(iO.push(t),console.warn(e))}function K6(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Be[c];u?typeof u=="function"?l.length?l=l.map(u):Nx(c,`Modifier ${c} used at start of tag`):l.length?Nx(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:Nx(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(a=>a.id),s=sO[i];if(s)return s.id;let o=sO[i]=Ur.define({id:xp.length,name:r,props:[vue({[r]:n})]});return xp.push(o),o.id}function ude(t,e){let n=Ur.define({id:xp.length,name:"Document",props:[Tu.add(()=>t),R6.add(()=>r=>e.getIndent(r))],top:!0});return xp.push(n),n}jt.RTL,jt.LTR;const dde=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=E2(t.state,n.from);return r.line?fde(t):r.block?gde(t):!1};function em(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const fde=em(A2,0),hde=em(A2,1),pde=em(A2,2),mde=em(X6,0),gde=em((t,e)=>X6(t,e,yde(e)),0);function E2(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const bf=50;function vde(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-bf,r),o=t.sliceDoc(i,i+bf),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let u,d;i-r<=2*bf?u=d=t.sliceDoc(r,i):(u=t.sliceDoc(r,r+bf),d=t.sliceDoc(i-bf,i));let f=/^\s*/.exec(u)[0].length,h=/\s*$/.exec(d)[0].length,m=d.length-h-n.length;return u.slice(f,f+e.length)==e&&d.slice(m,m+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:i-h-n.length,margin:/\s/.test(d.charAt(m-1))?1:0}}:null}function yde(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function X6(t,e,n=e.selection.ranges){let r=n.map(s=>E2(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>vde(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function A2(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,l=1e9,c=E2(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>i&&(s==o||o>d.from)){i=d.from;let f=/^\s*/.exec(d.text)[0].length,h=f==d.length,m=d.text.slice(f,f+c.length)==c?f:-1;f<d.text.length&&f<l&&(l=f),r.push({line:d,comment:m,token:c,indent:f,empty:h,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of r)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const l_=qo.define(),wde=qo.define(),bde=Ee.define(),Y6=Ee.define({combine(t){return Sl(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),q6=br.define({create(){return Vs.empty},update(t,e){let n=e.state.facet(Y6),r=e.annotation(l_);if(r){let l=Lr.fromTransaction(e,r.selection),c=r.side,u=c==0?t.undone:t.done;return l?u=Gy(u,u.length,n.minDepth,l):u=Q6(u,e.startState.selection),new Vs(c==0?r.rest:u,c==0?u:r.rest)}let i=e.annotation(wde);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(Sn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Lr.fromTransaction(e),o=e.annotation(Sn.time),a=e.annotation(Sn.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Vs(t.done.map(Lr.fromJSON),t.undone.map(Lr.fromJSON))}});function xde(t={}){return[q6,Y6.of(t),Re.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?J6:e.inputType=="historyRedo"?c_:null;return r?(e.preventDefault(),r(n)):!1}})]}function P2(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(q6,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const J6=P2(0,!1),c_=P2(1,!1),Sde=P2(0,!0);class Lr{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Lr(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Lr(e.changes&&yn.fromJSON(e.changes),[],e.mapped&&qs.fromJSON(e.mapped),e.startSelection&&re.fromJSON(e.startSelection),e.selectionsAfter.map(re.fromJSON))}static fromTransaction(e,n){let r=Ni;for(let i of e.startState.facet(bde)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Lr(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Ni)}static selection(e){return new Lr(void 0,Ni,void 0,void 0,e)}}function Gy(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function kde(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(r=!0)}}),r}function _de(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function Z6(t,e){return t.length?e.length?t.concat(e):t:e}const Ni=[],Cde=200;function Q6(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Cde));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),Gy(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Lr.selection([e])]}function Ede(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Tx(t,e){if(!t.length)return t;let n=t.length,r=Ni;for(;n;){let i=Ade(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Lr.selection(r)]:Ni}function Ade(t,e,n){let r=Z6(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Ni,n);if(!t.changes)return Lr.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Lr(i,qe.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const Pde=/^(input\.type|delete)($|\.)/;class Vs{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Vs(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||Pde.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,kde(a.changes,e.changes))||r=="input.type.compose")?o=Gy(o,o.length-1,i.minDepth,new Lr(e.changes.compose(a.changes),Z6(qe.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Ni)):o=Gy(o,o.length,i.minDepth,e),new Vs(o,Ni,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Ni;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&_de(s[s.length-1],e)?this:new Vs(Q6(this.done,e),this.undone,n,r)}addMapping(e){return new Vs(Tx(this.done,e),Tx(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:l_.of({side:e,rest:Ede(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?Ni:i.slice(0,i.length-1);return s.mapped&&(a=Tx(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:l_.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Vs.empty=new Vs(Ni,Ni);function tm(t,e){return re.create(t.ranges.map(e),t.mainIndex)}function Pl(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function zc({state:t,dispatch:e},n){let r=tm(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Pl(t,r)),!0)}function kw(t,e){return re.cursor(e?t.to:t.from)}function eB(t,e){return zc(t,n=>n.empty?t.moveByChar(n,e):kw(n,e))}function Nl(t){return t.textDirectionAt(t.state.selection.main.head)==jt.LTR}const oO=t=>eB(t,!Nl(t)),aO=t=>eB(t,Nl(t));function tB(t,e){return zc(t,n=>n.empty?t.moveByGroup(n,e):kw(n,e))}const Nde=t=>tB(t,!Nl(t)),Tde=t=>tB(t,Nl(t));function nB(t,e){return zc(t,n=>{if(!n.empty)return kw(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const lO=t=>nB(t,!1),cO=t=>nB(t,!0);function rB(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(Re.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function iB(t,e){let n=rB(t),{state:r}=t,i=tm(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):kw(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=Re.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Pl(r,i),{effects:s}),!0}const Mx=t=>iB(t,!1),Rx=t=>iB(t,!0);function _w(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=re.cursor(r.from+s))}return i}const uO=t=>zc(t,e=>_w(t,e,!0)),dO=t=>zc(t,e=>_w(t,e,!1)),Mde=t=>zc(t,e=>re.cursor(t.lineBlockAt(e.head).from,1)),Rde=t=>zc(t,e=>re.cursor(t.lineBlockAt(e.head).to,-1));function Ode(t,e,n){let r=!1,i=tm(t.selection,s=>{let o=_g(t,s.head,-1)||_g(t,s.head,1)||s.head>0&&_g(t,s.head-1,1)||s.head<t.doc.length&&_g(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return re.cursor(a)});return r?(e(Pl(t,i)),!0):!1}const Ide=({state:t,dispatch:e})=>Ode(t,e);function Tl(t,e){let n=tm(t.state.selection,r=>{let i=e(r);return re.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Pl(t.state,n)),!0)}function sB(t,e){return Tl(t,n=>t.moveByChar(n,e))}const fO=t=>sB(t,!Nl(t)),hO=t=>sB(t,Nl(t));function oB(t,e){return Tl(t,n=>t.moveByGroup(n,e))}const Dde=t=>oB(t,!Nl(t)),Lde=t=>oB(t,Nl(t));function aB(t,e){return Tl(t,n=>t.moveVertically(n,e))}const pO=t=>aB(t,!1),mO=t=>aB(t,!0);function lB(t,e){return Tl(t,n=>t.moveVertically(n,e,rB(t).height))}const gO=t=>lB(t,!1),vO=t=>lB(t,!0),yO=t=>Tl(t,e=>_w(t,e,!0)),wO=t=>Tl(t,e=>_w(t,e,!1)),jde=t=>Tl(t,e=>re.cursor(t.lineBlockAt(e.head).from)),$de=t=>Tl(t,e=>re.cursor(t.lineBlockAt(e.head).to)),bO=({state:t,dispatch:e})=>(e(Pl(t,{anchor:0})),!0),xO=({state:t,dispatch:e})=>(e(Pl(t,{anchor:t.doc.length})),!0),SO=({state:t,dispatch:e})=>(e(Pl(t,{anchor:t.selection.main.anchor,head:0})),!0),kO=({state:t,dispatch:e})=>(e(Pl(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Fde=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Bde=({state:t,dispatch:e})=>{let n=Ew(t).map(({from:r,to:i})=>re.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:re.create(n),userEvent:"select"})),!0};function Cw(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=Cg(t,l,!1)):l>o&&(n="delete.forward",l=Cg(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Cg(t,o,!1),a=Cg(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:re.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Re.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Cg(t,e,n){if(t instanceof Re)for(let r of t.state.facet(Re.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const cB=(t,e,n)=>Cw(t,r=>{let i=r.from,{state:s}=t,o=s.doc.lineAt(i),a,l;if(n&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let c=Bp(a,s.tabSize),u=c%Lc(s)||Lc(s);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)i--;l=i}else l=Un(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=Un(o.text,l-o.from,!1,!1)+o.from);return l}),Ox=t=>cB(t,!1,!0),_O=t=>cB(t,!0,!1),uB=(t,e)=>Cw(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Un(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||r!=n.head)&&(a=u),r=l}return r}),CO=t=>uB(t,!1),zde=t=>uB(t,!0),EO=t=>Cw(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Ude=t=>Cw(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),Hde=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:ct.of(["",""])},range:re.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Vde=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:Un(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Un(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:re.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ew(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function dB(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of Ew(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(re.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(re.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:re.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Wde=({state:t,dispatch:e})=>dB(t,e,!1),Gde=({state:t,dispatch:e})=>dB(t,e,!0);function fB(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of Ew(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Kde=({state:t,dispatch:e})=>fB(t,e,!1),Xde=({state:t,dispatch:e})=>fB(t,e,!0),Yde=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Ew(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=tm(e.selection,i=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(i.head),a=t.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function qde(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=io(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(lt.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const AO=Jde(!1);function Jde(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&qde(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new b2(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=Pue(c,s);for(u==null&&(u=Bp(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",i_(e,u)];return l&&d.push(i_(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:ct.of(d)},range:re.cursor(s+1+d[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function hB(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:re.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const u_=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(hB(t,(n,r)=>{r.push({from:n.from,insert:t.facet(w2)})}),{userEvent:"input.indent"})),!0),PO=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(hB(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=Bp(i,t.tabSize),o=0,a=i_(t,Math.max(0,s-Lc(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),NO=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Sp{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(NO(a)):NO,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ki(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=qC(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Po(e);let i=this.normalize(n);if(i.length)for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Sp.prototype[Symbol.iterator]=function(){return this});const pB={from:-1,to:-1,match:/.*/.exec("")},N2="gm"+(/x/.unicode==null?"":"u");class mB{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=pB,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new gB(e,n,r,i,s);this.re=new RegExp(n,N2+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Ky(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Ky(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Ix=new WeakMap;class Xu{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=Ix.get(e);if(!i||i.from>=r||i.to<=n){let a=new Xu(n,e.sliceString(n,r));return Ix.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),Ix.set(e,new Xu(o,s)),new Xu(n,s.slice(n-o,r-o))}}class gB{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=pB,this.matchPos=Ky(e,i),this.re=new RegExp(n,N2+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Xu.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Ky(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Xu.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(mB.prototype[Symbol.iterator]=gB.prototype[Symbol.iterator]=function(){return this});function Zde(t){try{return new RegExp(t,N2),!0}catch{return!1}}function Ky(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function d_(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=kt("input",{class:"cm-textfield",name:"line",value:e}),r=kt("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:yh.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},kt("label",t.state.phrase("Go to line"),": ",n)," ",kt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),kt("button",{name:"close",onclick:()=>{t.dispatch({effects:yh.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,f=u?+u.slice(1):0,h=c?+c:a.number;if(c&&d){let y=h/100;l&&(y=y*(l=="-"?-1:1)+a.number/o.doc.lines),h=Math.round(o.doc.lines*y)}else c&&l&&(h=h*(l=="-"?-1:1)+a.number);let m=o.doc.line(Math.max(1,Math.min(o.doc.lines,h))),g=re.cursor(m.from+Math.max(0,Math.min(f,m.length)));t.dispatch({effects:[yh.of(!1),Re.scrollIntoView(g.from,{y:"center"})],selection:g}),t.focus()}return{dom:r}}const yh=qe.define(),TO=br.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(yh)&&(t=n.value);return t},provide:t=>op.from(t,e=>e?d_:null)}),Qde=t=>{let e=sp(t,d_);if(!e){let n=[yh.of(!0)];t.state.field(TO,!1)==null&&n.push(qe.appendConfig.of([TO,efe])),t.dispatch({effects:n}),e=sp(t,d_)}return e&&e.dom.querySelector("input").select(),!0},efe=Re.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),tfe=({state:t,dispatch:e})=>{let{selection:n}=t,r=re.create(n.ranges.map(i=>t.wordAt(i.head)||re.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function nfe(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new Sp(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Sp(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const rfe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return tfe({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=nfe(t,r);return i?(e(t.update({selection:t.selection.addRange(re.range(i.from,i.to),!1),effects:Re.scrollIntoView(i.to)})),!0):!1},Vd=Ee.define({combine(t){return Sl(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new ffe(e),scrollToMatch:e=>Re.scrollIntoView(e)})}});class vB{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Zde(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new afe(this):new sfe(this)}getCursor(e,n=0,r){let i=e.doc?e:st.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?cu(this,i,n,r):lu(this,i,n,r)}}class yB{constructor(e){this.spec=e}}function lu(t,e,n,r){return new Sp(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?ife(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function ife(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Xy(i,n-s))!=Hn.Word||e(Yy(i,n-s))!=Hn.Word)&&(e(Yy(i,r-s))!=Hn.Word||e(Xy(i,r-s))!=Hn.Word))}class sfe extends yB{constructor(e){super(e)}nextMatch(e,n,r){let i=lu(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=lu(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=lu(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=lu(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=lu(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function cu(t,e,n,r){return new mB(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?ofe(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Xy(t,e){return t.slice(Un(t,e,!1),e)}function Yy(t,e){return t.slice(e,Un(t,e))}function ofe(t){return(e,n,r)=>!r[0].length||(t(Xy(r.input,r.index))!=Hn.Word||t(Yy(r.input,r.index))!=Hn.Word)&&(t(Yy(r.input,r.index+r[0].length))!=Hn.Word||t(Xy(r.input,r.index+r[0].length))!=Hn.Word)}class afe extends yB{nextMatch(e,n,r){let i=cu(this.spec,e,r,e.doc.length).next();return i.done&&(i=cu(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=cu(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=cu(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=cu(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const kp=qe.define(),T2=qe.define(),Ja=br.define({create(t){return new Dx(f_(t).create(),null)},update(t,e){for(let n of e.effects)n.is(kp)?t=new Dx(n.value.create(),t.panel):n.is(T2)&&(t=new Dx(t.query,n.value?M2:null));return t},provide:t=>op.from(t,e=>e.panel)});class Dx{constructor(e,n){this.query=e,this.panel=n}}const lfe=Qe.mark({class:"cm-searchMatch"}),cfe=Qe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),ufe=Kn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Ja))}update(t){let e=t.state.field(Ja);(e!=t.startState.field(Ja)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Qe.none;let{view:n}=this,r=new sl;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(f=>f.from==c&&f.to==u);r.add(c,u,d?cfe:lfe)})}return r.finish()}},{decorations:t=>t.decorations});function nm(t){return e=>{let n=e.state.field(Ja,!1);return n&&n.query.spec.valid?t(e,n):kB(e)}}const MO=nm((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=re.single(r.from,r.to),s=t.state.facet(Vd);return t.dispatch({selection:i,effects:[R2(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),SB(t),!0}),RO=nm((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=re.single(i.from,i.to),o=t.state.facet(Vd);return t.dispatch({selection:s,effects:[R2(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),SB(t),!0}),wB=nm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:re.create(n.map(r=>re.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),dfe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new Sp(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(re.range(a.value.from,a.value.to))}return e(t.update({selection:re.create(s,o),userEvent:"select.search.matches"})),!0},OO=nm((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=s,a=[],l,c,u=[];o.from==r&&o.to==i&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(Re.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let d=t.state.changes(a);return o&&(l=re.single(o.from,o.to).map(d),u.push(R2(t,o)),u.push(n.facet(Vd).scrollToMatch(l.main,t))),t.dispatch({changes:d,selection:l,effects:u,userEvent:"input.replace"}),!0}),bB=nm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Re.announce.of(r),userEvent:"input.replace.all"}),!0});function M2(t){return t.state.facet(Vd).createPanel(t)}function f_(t,e){var n,r,i,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(Vd);return new vB({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function xB(t){let e=sp(t,M2);return e&&e.dom.querySelector("[main-field]")}function SB(t){let e=xB(t);e&&e==t.root.activeElement&&e.select()}const kB=t=>{let e=t.state.field(Ja,!1);if(e&&e.panel){let n=xB(t);if(n&&n!=t.root.activeElement){let r=f_(t.state,e.query.spec);r.valid&&t.dispatch({effects:kp.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[T2.of(!0),e?kp.of(f_(t.state,e.query.spec)):qe.appendConfig.of(pfe)]});return!0},_B=t=>{let e=t.state.field(Ja,!1);if(!e||!e.panel)return!1;let n=sp(t,M2);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:T2.of(!1)}),!0};class ffe{constructor(e){this.view=e;let n=this.query=e.state.field(Ja).query.spec;this.commit=this.commit.bind(this),this.searchField=kt("input",{value:n.search,placeholder:Wr(e,"Find"),"aria-label":Wr(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=kt("input",{value:n.replace,placeholder:Wr(e,"Replace"),"aria-label":Wr(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=kt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=kt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=kt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return kt("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=kt("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>MO(e),[Wr(e,"next")]),r("prev",()=>RO(e),[Wr(e,"previous")]),r("select",()=>wB(e),[Wr(e,"all")]),kt("label",null,[this.caseField,Wr(e,"match case")]),kt("label",null,[this.reField,Wr(e,"regexp")]),kt("label",null,[this.wordField,Wr(e,"by word")]),...e.state.readOnly?[]:[kt("br"),this.replaceField,r("replace",()=>OO(e),[Wr(e,"replace")]),r("replaceAll",()=>bB(e),[Wr(e,"replace all")])],kt("button",{name:"close",onclick:()=>_B(e),"aria-label":Wr(e,"close"),type:"button"},[""])])}commit(){let e=new vB({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:kp.of(e)}))}keydown(e){LZ(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?RO:MO)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),OO(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(kp)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Vd).top}}function Wr(t,e){return t.state.phrase(e)}const Eg=30,Ag=/[\s\.,:;?!]/;function R2(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Eg),o=Math.min(i,n+Eg),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<Eg;l++)if(!Ag.test(a[l+1])&&Ag.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-Eg;l--)if(!Ag.test(a[l-1])&&Ag.test(a[l])){a=a.slice(0,l);break}}return Re.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const hfe=Re.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),pfe=[Ja,$p.low(ufe),hfe];class mfe{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=io(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(CB(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function IO(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function gfe(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=IO(e)+IO(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function vfe(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:gfe(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}class DO{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function wh(t){return t.selection.main.from}function CB(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const EB=qo.define();function yfe(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:l},range:re.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const LO=new WeakMap;function wfe(t){if(!Array.isArray(t))return t;let e=LO.get(t);return e||LO.set(t,e=vfe(t)),e}const AB=qe.define(),O2=qe.define();class bfe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=ki(e,n),i=Po(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(ki(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let w=ki(e,0),b=Po(w),k=b==e.length?0:-100;if(w!=n[0])if(w==r[0])k+=-200;else return null;return this.ret(k,[0,b])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let w=0,b=Math.min(e.length,200);w<b&&c<l;){let k=ki(e,w);(k==n[c]||k==r[c])&&(i[c++]=w),w+=Po(k)}if(c<l)return null}let u=0,d=0,f=!1,h=0,m=-1,g=-1,y=/[a-z]/.test(e),v=!0;for(let w=0,b=Math.min(e.length,200),k=0;w<b&&d<l;){let _=ki(e,w);a<0&&(u<l&&_==n[u]&&(s[u++]=w),h<l&&(_==n[h]||_==r[h]?(h==0&&(m=w),g=w+1,h++):h=0));let E,C=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(E=qC(_))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!w||C==1&&y||k==0&&C!=0)&&(n[d]==_||r[d]==_&&(f=!0)?o[d++]=w:o.length&&(v=!1)),k=C,w+=Po(_)}return d==l&&o[0]==0&&v?this.result(-100+(f?-200:0),o,e):h==l&&m==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):h==l?this.ret(-900-e.length,[m,g]):d==l?this.result(-100+(f?-200:0)+-700+(v?0:-1100),o,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?Po(ki(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}class xfe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const $s=Ee.define({combine(t){return Sl(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Sfe,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>jO(e(r),n(r)),optionClass:(e,n)=>r=>jO(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function jO(t,e){return t?e?t+" "+e:t:e}function Sfe(t,e,n,r,i,s){let o=t.textDirection==jt.RTL,a=o,l=!1,c="top",u,d,f=e.left-i.left,h=i.right-e.right,m=r.right-r.left,g=r.bottom-r.top;if(a&&f<Math.min(m,h)?a=!1:!a&&h<Math.min(m,f)&&(a=!0),m<=(a?f:h))u=Math.max(i.top,Math.min(n.top,i.bottom-g))-e.top,d=Math.min(400,a?f:h);else{l=!0,d=Math.min(400,(o?e.right:i.right-e.left)-30);let w=i.bottom-e.bottom;w>=g||w>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let y=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/y}px; max-width: ${d/v}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function kfe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function Lx(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class _fe{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet($s);this.optionContent=kfe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=Lx(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet($s).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:O2.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=Lx(s.length,o,e.state.facet($s).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=Lx(n.options.length,n.selected,this.view.state.facet($s).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>si(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&Efe(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet($s).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>r.from||r.from==0))if(s=f,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let h=i.appendChild(document.createElement("completion-section"));h.textContent=f}}const u=i.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let f of this.optionContent){let h=f(a,this.view.state,this.view,l);h&&u.appendChild(h)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Cfe(t,e){return n=>new _fe(n,t,e)}function Efe(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function $O(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function Afe(t,e){let n=[],r=null,i=c=>{n.push(c);let{section:u}=c.completion;if(u){r||(r=[]);let d=typeof u=="string"?u:u.name;r.some(f=>f.name==d)||r.push(typeof u=="string"?{name:d}:u)}},s=e.facet($s);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)i(new DO(d,c.source,u?u(d):[],1e9-n.length));else{let d=e.sliceDoc(c.from,c.to),f,h=s.filterStrict?new xfe(d):new bfe(d);for(let m of c.result.options)if(f=h.match(m.label)){let g=m.displayLabel?u?u(m,f.matched):[]:f.matched;i(new DO(m,c.source,g,f.score+(m.boost||0)))}}}if(r){let c=Object.create(null),u=0,d=(f,h)=>{var m,g;return((m=f.rank)!==null&&m!==void 0?m:1e9)-((g=h.rank)!==null&&g!==void 0?g:1e9)||(f.name<h.name?-1:1)};for(let f of r.sort(d))u-=1e5,c[f.name]=u;for(let f of n){let{section:h}=f.completion;h&&(f.score+=c[typeof h=="string"?h:h.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of n.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):$O(c.completion)>$O(a)&&(o[o.length-1]=c),a=c.completion}return o}class Mu{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Mu(this.options,FO(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s,o){if(i&&!o&&e.some(c=>c.isPending))return i.setDisabled();let a=Afe(e,n);if(!a.length)return i&&e.some(c=>c.isPending)?i.setDisabled():null;let l=n.facet($s).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let c=i.options[i.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new Mu(a,FO(r,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:Ife,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new Mu(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Mu(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class qy{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new qy(Mfe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet($s),s=(r.override||n.languageDataAt("autocomplete",wh(n)).map(wfe)).map(l=>(this.active.find(u=>u.source==l)||new os(l,this.active.some(u=>u.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(PB));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Pfe(s,this.active)||a?o=Mu.build(s,n,this.id,o,r,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new os(l.source,0):l));for(let l of e.effects)l.is(NB)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new qy(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Nfe:Tfe}}function Pfe(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const Nfe={"aria-autocomplete":"list"},Tfe={};function FO(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Mfe=[];function Rfe(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(EB);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class os{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=Rfe(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new os(i.source,0)),r&4&&i.state==0&&(i=new os(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(AB))i=new os(i.source,1,s.value);else if(s.is(O2))i=new os(i.source,0);else if(s.is(PB))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(wh(e.state))}}class bh extends os{constructor(e,n,r,i,s,o){super(e,3,n),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=wh(e.state);if(a>o||!i||n&2&&(wh(e.startState)==this.from||a<this.limit))return new os(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return Ofe(i.validFor,e.state,s,o)?new bh(this.source,this.explicit,l,i,s,o):i.update&&(i=i.update(i,s,o,new mfe(e.state,a,!1)))?new bh(this.source,this.explicit,l,i,i.from,(r=i.to)!==null&&r!==void 0?r:wh(e.state)):new os(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new bh(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new os(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Ofe(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):CB(t,!0).test(i)}const PB=qe.define({map(t,e){return t.map(n=>n.map(e))}}),NB=qe.define(),Wd=br.define({create(){return qy.start()},update(t,e){return t.update(e)},provide:t=>[dE.from(t,e=>e.tooltip),Re.contentAttributes.from(t,e=>e.attrs)]});function TB(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(Wd).active.find(i=>i.source==e.source);return r instanceof bh?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},yfe(t.state,n,r.from,r.to)),{annotations:EB.of(e.completion)})):n(t,e.completion,r.from,r.to),!0):!1}const Ife=Cfe(Wd,TB);function Pg(t,e="option"){return n=>{let r=n.state.field(Wd,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet($s).interactionDelay)return!1;let i=1,s;e=="page"&&(s=pQ(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:NB.of(a)}),!0}}const BO=t=>{let e=t.state.field(Wd,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet($s).interactionDelay?!1:TB(t,e.open.options[e.open.selected])},Dfe=t=>t.state.field(Wd,!1)?(t.dispatch({effects:AB.of(!0)}),!0):!1,Lfe=t=>{let e=t.state.field(Wd,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:O2.of(null)}),!0)},MB={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},RB=new class extends Ec{};RB.startSide=1;RB.endSide=-1;const jx="()[]{}<>";function jfe(t){for(let e=0;e<jx.length;e+=2)if(jx.charCodeAt(e)==t)return jx.charAt(e+1);return qC(t<128?t:t+1)}function $fe(t,e){return t.languageDataAt("closeBrackets",e)[0]||MB}const Ffe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=$fe(t,t.selection.main.head).brackets||MB.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=zfe(t.doc,o.head);for(let l of r)if(l==a&&Bfe(t.doc,o.head)==jfe(ki(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:re.cursor(o.head-l.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i};function Bfe(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Po(ki(n,0)))}function zfe(t,e){let n=t.sliceString(e-2,e);return Po(ki(n,0))==n.length?n:n.slice(1)}class zO{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class ec{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=r.facet(Ws).markerFilter;i&&(e=i(e,r));let s=e.slice().sort((u,d)=>u.from-d.from||u.to-d.to),o=new sl,a=[],l=0;for(let u=0;;){let d=u==s.length?null:s[u];if(!d&&!a.length)break;let f,h;for(a.length?(f=l,h=a.reduce((g,y)=>Math.min(g,y.to),d&&d.from>f?d.from:1e8)):(f=d.from,h=d.to,a.push(d),u++);u<s.length;){let g=s[u];if(g.from==f&&(g.to>g.from||g.to==f))a.push(g),u++,h=Math.min(g.to,h);else{h=Math.min(g.from,h);break}}let m=nhe(a);if(a.some(g=>g.from==g.to||g.from==g.to-1&&r.doc.lineAt(g.from).to==g.from))o.add(f,f,Qe.widget({widget:new Zfe(m),diagnostics:a.slice()}));else{let g=a.reduce((y,v)=>v.markClass?y+" "+v.markClass:y,"");o.add(f,h,Qe.mark({class:"cm-lintRange cm-lintRange-"+m+g,diagnostics:a.slice(),inclusiveEnd:a.some(y=>y.to>h)}))}l=h;for(let g=0;g<a.length;g++)a[g].to<=l&&a.splice(g--,1)}let c=o.finish();return new ec(c,n,Rd(c))}}function Rd(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new zO(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new zO(r.from,s,r.diagnostic)}}),r}function Ufe(t,e){let n=e.pos,r=e.end||n,i=t.state.facet(Ws).hideOn(t,n,r);if(i!=null)return i;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(I2))||t.changes.touchesRange(s.from,Math.max(s.to,r)))}function OB(t,e){return t.field(ai,!1)?e:e.concat(qe.appendConfig.of(jB))}function Hfe(t,e){return{effects:OB(t,[I2.of(e)])}}const I2=qe.define(),D2=qe.define(),IB=qe.define(),ai=br.define({create(){return new ec(Qe.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),r=null,i=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);r=Rd(n,t.selected.diagnostic,s)||Rd(n,null,s)}!n.size&&i&&e.state.facet(Ws).autoPanel&&(i=null),t=new ec(n,i,r)}for(let n of e.effects)if(n.is(I2)){let r=e.state.facet(Ws).autoPanel?n.value.length?_p.open:null:t.panel;t=ec.init(n.value,r,e.state)}else n.is(D2)?t=new ec(t.diagnostics,n.value?_p.open:null,t.selected):n.is(IB)&&(t=new ec(t.diagnostics,t.panel,n.value));return t},provide:t=>[op.from(t,e=>e.panel),Re.decorations.from(t,e=>e.diagnostics)]}),Vfe=Qe.mark({class:"cm-lintRange cm-lintRange-active"});function Wfe(t,e,n){let{diagnostics:r}=t.state.field(ai),i,s=-1,o=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0)))return i=u.diagnostics,s=l,o=c,!1});let a=t.state.facet(Ws).tooltipFilter;return i&&a&&(i=a(i,t.state)),i?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Gfe(t,i)}}}:null}function Gfe(t,e){return kt("ul",{class:"cm-tooltip-lint"},e.map(n=>LB(t,n,!1)))}const Kfe=t=>{let e=t.state.field(ai,!1);(!e||!e.panel)&&t.dispatch({effects:OB(t.state,[D2.of(!0)])});let n=sp(t,_p.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},UO=t=>{let e=t.state.field(ai,!1);return!e||!e.panel?!1:(t.dispatch({effects:D2.of(!1)}),!0)},Xfe=t=>{let e=t.state.field(ai,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},Yfe=Kn.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Ws);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Ws);n.length&&qfe(n.map(r=>Promise.resolve(r(this.view))),r=>{this.view.state.doc==e.doc&&this.view.dispatch(Hfe(this.view.state,r.reduce((i,s)=>i.concat(s))))},r=>{si(this.view.state,r)})}}update(t){let e=t.state.facet(Ws);(t.docChanged||e!=t.startState.facet(Ws)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function qfe(t,e,n){let r=[],i=-1;for(let s of t)s.then(o=>{r.push(o),clearTimeout(i),r.length==t.length?e(r):i=setTimeout(()=>e(r),200)},n)}const Ws=Ee.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Sl(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n}))}});function Jfe(t,e={}){return[Ws.of({source:t,config:e}),Yfe,jB]}function DB(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function LB(t,e,n){var r;let i=n?DB(e.actions):[];return kt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},kt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let h=Rd(t.state.field(ai).diagnostics,e);h&&s.apply(t,h.from,h.to)},{name:c}=s,u=i[o]?c.indexOf(i[o]):-1,d=u<0?c:[c.slice(0,u),kt("u",c.slice(u,u+1)),c.slice(u+1)];return kt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&kt("div",{class:"cm-diagnosticSource"},e.source))}class Zfe extends kl{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return kt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class HO{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=LB(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class _p{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)UO(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=DB(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Rd(this.view.state.field(ai).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=kt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=kt("div",{class:"cm-panel-lint"},this.list,kt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>UO(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(ai).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(ai),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,f;for(let h=r;h<this.items.length;h++)if(this.items[h].diagnostic==u){d=h;break}d<0?(f=new HO(this.view,u),this.items.splice(r,0,f),i=!0):(f=this.items[d],d>r&&(this.items.splice(r,d-r),i=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new HO(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(ai),r=Rd(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:IB.of(r)})}static open(e){return new _p(e)}}function Qfe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Ng(t){return Qfe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const ehe=Re.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ng("#d11")},".cm-lintRange-warning":{backgroundImage:Ng("orange")},".cm-lintRange-info":{backgroundImage:Ng("#999")},".cm-lintRange-hint":{backgroundImage:Ng("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function the(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function nhe(t){let e="hint",n=1;for(let r of t){let i=the(r.severity);i>n&&(n=i,e=r.severity)}return e}const jB=[ai,Re.decorations.compute([ai],t=>{let{selected:e,panel:n}=t.field(ai);return!e||!n||e.from==e.to?Qe.none:Qe.set([Vfe.range(e.from,e.to)])}),hQ(Wfe,{hideOn:Ufe}),ehe],$B=t=>e=>{const n=t==="down";let r=e.state.selection;for(const i of r.ranges)r=r.addRange(e.moveVertically(i,n));return e.dispatch({selection:r}),!0},rhe=$B("up"),ihe=$B("down"),she=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let r=n.from;r<=n.to;){const i=t.state.doc.lineAt(r),s=Math.min(i.to,n.to);e?e=e.addRange(re.range(s,s)):e=re.single(s),r=i.to+1}return e?(t.dispatch({selection:e}),!0):!1},ohe=[{key:"Ctrl-Space",run:Dfe},{key:"Escape",run:Lfe},{key:"ArrowDown",run:Pg(!0)},{key:"ArrowUp",run:Pg(!1)},{key:"PageDown",run:Pg(!0,"page")},{key:"PageUp",run:Pg(!1,"page")},{key:"Enter",run:BO},{key:"Tab",run:BO},{key:"Mod-f",run:kB,scope:"editor search-panel"},{key:"Escape",run:_B,scope:"editor search-panel"},{key:"Alt-Enter",run:wB,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:bB,scope:"editor search-panel"},{key:"Ctrl-g",run:Qde},{key:"Mod-d",run:rfe,preventDefault:!0},{key:"Shift-Mod-l",run:dfe},{key:"Enter",run:AO,shift:AO},{key:"ArrowLeft",run:oO,shift:fO,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Nde,shift:Dde},{key:"ArrowRight",run:aO,shift:hO,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Tde,shift:Lde},{key:"ArrowUp",run:lO,shift:pO,preventDefault:!0},{key:"ArrowDown",run:cO,shift:mO,preventDefault:!0},{key:"Home",run:dO,shift:wO},{mac:"Cmd-ArrowLeft",run:dO,shift:wO},{key:"Mod-Home",run:bO,shift:SO},{mac:"Cmd-ArrowUp",run:bO,shift:SO},{key:"PageUp",run:Mx,shift:gO},{mac:"Ctrl-ArrowUp",run:Mx,shift:gO},{key:"PageDown",run:Rx,shift:vO},{mac:"Ctrl-ArrowDown",run:Rx,shift:vO},{key:"End",run:uO,shift:yO},{mac:"Cmd-ArrowRight",run:uO,shift:yO},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:rhe,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:ihe,preventDefault:!0},{key:"Shift-Alt-i",run:she},{key:"Mod-End",run:xO,shift:kO},{mac:"Cmd-ArrowDown",run:xO,shift:kO},{key:"Mod-a",run:Fde},{key:"Backspace",run:Ffe},{key:"Backspace",run:Ox,shift:Ox},{key:"Delete",run:_O},{key:"Mod-Backspace",mac:"Alt-Backspace",run:CO},{key:"Mod-Delete",mac:"Alt-Delete",run:zde},{mac:"Mod-Backspace",run:Ude},{mac:"Mod-Delete",run:EO},{mac:"Ctrl-b",run:oO,shift:fO,preventDefault:!0},{mac:"Ctrl-f",run:aO,shift:hO},{mac:"Ctrl-p",run:lO,shift:pO},{mac:"Ctrl-n",run:cO,shift:mO},{mac:"Ctrl-a",run:Mde,shift:jde},{mac:"Ctrl-e",run:Rde,shift:$de},{mac:"Ctrl-d",run:_O},{mac:"Ctrl-h",run:Ox},{mac:"Ctrl-k",run:EO},{mac:"Ctrl-Alt-h",run:CO},{mac:"Ctrl-o",run:Hde},{mac:"Ctrl-t",run:Vde},{mac:"Ctrl-v",run:Rx},{mac:"Alt-v",run:Mx},{key:"Shift-Mod-k",run:Yde},{key:"Alt-ArrowDown",run:Gde},{key:"Alt-ArrowUp",run:Wde},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:Xde},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Kde},{key:"Mod-l",run:Bde,preventDefault:!0},{key:"Shift-Mod-\\",run:Ide},{key:"Tab",run:u_,shift:PO,preventDefault:!0},{key:"Mod-[",run:PO},{key:"Mod-]",run:u_},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:zue},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Uue},{key:"Mod-k Mod-0",run:Hue},{key:"Mod-k Mod-j",run:Vue},{key:"Mod-k Mod-c",run:hde},{key:"Mod-k Mod-u",run:pde},{key:"Mod-/",run:dde},{key:"Shift-Alt-a",run:mde},{key:"Mod-z",run:J6,preventDefault:!0},{key:"Mod-y",run:c_,preventDefault:!0},{key:"Mod-Shift-z",run:c_,preventDefault:!0},{key:"Mod-u",run:Sde,preventDefault:!0},{key:"Mod-Shift-m",run:Kfe},{key:"F8",run:Xfe}];var ahe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},nu=new WeakMap,Tg=new WeakMap,Mg={},$x=0,FB=function(t){return t&&(t.host||FB(t.parentNode))},lhe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=FB(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},che=function(t,e,n,r){var i=lhe(e,Array.isArray(t)?t:[t]);Mg[n]||(Mg[n]=new WeakMap);var s=Mg[n],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(r),m=h!==null&&h!=="false",g=(nu.get(f)||0)+1,y=(s.get(f)||0)+1;nu.set(f,g),s.set(f,y),o.push(f),g===1&&m&&Tg.set(f,!0),y===1&&f.setAttribute(n,"true"),m||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(e),a.clear(),$x++,function(){o.forEach(function(d){var f=nu.get(d)-1,h=s.get(d)-1;nu.set(d,f),s.set(d,h),f||(Tg.has(d)||d.removeAttribute(r),Tg.delete(d)),h||d.removeAttribute(n)}),$x--,$x||(nu=new WeakMap,nu=new WeakMap,Tg=new WeakMap,Mg={})}},uhe=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=ahe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),che(r,i,n,"aria-hidden")):function(){return null}},h_=["Enter"," "],dhe=["ArrowDown","PageUp","Home"],BB=["ArrowUp","PageDown","End"],fhe=[...dhe,...BB],hhe={ltr:[...h_,"ArrowRight"],rtl:[...h_,"ArrowLeft"]},phe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},rm="Menu",[Cp,mhe,ghe]=Rp(rm),[Uc,zB]=ms(rm,[ghe,zd,A0]),Aw=zd(),UB=A0(),[vhe,Hc]=Uc(rm),[yhe,im]=Uc(rm),HB=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=Aw(e),[l,c]=x.useState(null),u=x.useRef(!1),d=zr(s),f=Op(i);return x.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),p.jsx(n2,{...a,children:p.jsx(vhe,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:p.jsx(yhe,{scope:e,onClose:x.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o,children:r})})})};HB.displayName=rm;var whe="MenuAnchor",L2=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Aw(n);return p.jsx(cw,{...i,...r,ref:e})});L2.displayName=whe;var j2="MenuPortal",[bhe,VB]=Uc(j2,{forceMount:void 0}),WB=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=Hc(j2,e);return p.jsx(bhe,{scope:e,forceMount:n,children:p.jsx(Ko,{present:n||s.open,children:p.jsx(Yp,{asChild:!0,container:i,children:r})})})};WB.displayName=j2;var ji="MenuContent",[xhe,$2]=Uc(ji),GB=x.forwardRef((t,e)=>{const n=VB(ji,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Hc(ji,t.__scopeMenu),o=im(ji,t.__scopeMenu);return p.jsx(Cp.Provider,{scope:t.__scopeMenu,children:p.jsx(Ko,{present:r||s.open,children:p.jsx(Cp.Slot,{scope:t.__scopeMenu,children:o.modal?p.jsx(She,{...i,ref:e}):p.jsx(khe,{...i,ref:e})})})})}),She=x.forwardRef((t,e)=>{const n=Hc(ji,t.__scopeMenu),r=x.useRef(null),i=it(e,r);return x.useEffect(()=>{const s=r.current;if(s)return uhe(s)},[]),p.jsx(F2,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ge(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),khe=x.forwardRef((t,e)=>{const n=Hc(ji,t.__scopeMenu);return p.jsx(F2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),_he=pd("MenuContent.ScrollLock"),F2=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,disableOutsideScroll:m,...g}=t,y=Hc(ji,n),v=im(ji,n),w=Aw(n),b=UB(n),k=mhe(n),[_,E]=x.useState(null),C=x.useRef(null),P=it(e,C,y.onContentChange),M=x.useRef(0),O=x.useRef(""),I=x.useRef(0),D=x.useRef(null),G=x.useRef("right"),U=x.useRef(0),X=m?dw:x.Fragment,Z=m?{as:_he,allowPinchZoom:!0}:void 0,te=$=>{var S,N;const ne=O.current+$,ke=k().filter(R=>!R.disabled),J=document.activeElement,ae=(S=ke.find(R=>R.ref.current===J))==null?void 0:S.textValue,j=ke.map(R=>R.textValue),L=Lhe(j,ne,ae),z=(N=ke.find(R=>R.textValue===L))==null?void 0:N.ref.current;(function R(T){O.current=T,window.clearTimeout(M.current),T!==""&&(M.current=window.setTimeout(()=>R(""),1e3))})(ne),z&&setTimeout(()=>z.focus())};x.useEffect(()=>()=>window.clearTimeout(M.current),[]),WE();const H=x.useCallback($=>{var ke,J;return G.current===((ke=D.current)==null?void 0:ke.side)&&$he($,(J=D.current)==null?void 0:J.area)},[]);return p.jsx(xhe,{scope:n,searchRef:O,onItemEnter:x.useCallback($=>{H($)&&$.preventDefault()},[H]),onItemLeave:x.useCallback($=>{var ne;H($)||((ne=C.current)==null||ne.focus(),E(null))},[H]),onTriggerLeave:x.useCallback($=>{H($)&&$.preventDefault()},[H]),pointerGraceTimerRef:I,onPointerGraceIntentChange:x.useCallback($=>{D.current=$},[]),children:p.jsx(X,{...Z,children:p.jsx(sw,{asChild:!0,trapped:i,onMountAutoFocus:ge(s,$=>{var ne;$.preventDefault(),(ne=C.current)==null||ne.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:p.jsx(Kp,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,children:p.jsx(L4,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:_,onCurrentTabStopIdChange:E,onEntryFocus:ge(l,$=>{v.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(r2,{role:"menu","aria-orientation":"vertical","data-state":lz(y.open),"data-radix-menu-content":"",dir:v.dir,...w,...g,ref:P,style:{outline:"none",...g.style},onKeyDown:ge(g.onKeyDown,$=>{const ke=$.target.closest("[data-radix-menu-content]")===$.currentTarget,J=$.ctrlKey||$.altKey||$.metaKey,ae=$.key.length===1;ke&&($.key==="Tab"&&$.preventDefault(),!J&&ae&&te($.key));const j=C.current;if($.target!==j||!fhe.includes($.key))return;$.preventDefault();const z=k().filter(S=>!S.disabled).map(S=>S.ref.current);BB.includes($.key)&&z.reverse(),Ihe(z)}),onBlur:ge(t.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(M.current),O.current="")}),onPointerMove:ge(t.onPointerMove,Ep($=>{const ne=$.target,ke=U.current!==$.clientX;if($.currentTarget.contains(ne)&&ke){const J=$.clientX>U.current?"right":"left";G.current=J,U.current=$.clientX}}))})})})})})})});GB.displayName=ji;var Che="MenuGroup",B2=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(ze.div,{role:"group",...r,ref:e})});B2.displayName=Che;var Ehe="MenuLabel",KB=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(ze.div,{...r,ref:e})});KB.displayName=Ehe;var Jy="MenuItem",VO="menu.itemSelect",Pw=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=x.useRef(null),o=im(Jy,t.__scopeMenu),a=$2(Jy,t.__scopeMenu),l=it(e,s),c=x.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(VO,{bubbles:!0,cancelable:!0});d.addEventListener(VO,h=>r==null?void 0:r(h),{once:!0}),EC(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return p.jsx(XB,{...i,ref:l,disabled:n,onClick:ge(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:ge(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:ge(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||h_.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Pw.displayName=Jy;var XB=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=$2(Jy,n),a=UB(n),l=x.useRef(null),c=it(e,l),[u,d]=x.useState(!1),[f,h]=x.useState("");return x.useEffect(()=>{const m=l.current;m&&h((m.textContent??"").trim())},[s.children]),p.jsx(Cp.ItemSlot,{scope:n,disabled:r,textValue:i??f,children:p.jsx(j4,{asChild:!0,...a,focusable:!r,children:p.jsx(ze.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:ge(t.onPointerMove,Ep(m=>{r?o.onItemLeave(m):(o.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ge(t.onPointerLeave,Ep(m=>o.onItemLeave(m))),onFocus:ge(t.onFocus,()=>d(!0)),onBlur:ge(t.onBlur,()=>d(!1))})})})}),Ahe="MenuCheckboxItem",YB=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return p.jsx(ez,{scope:t.__scopeMenu,checked:n,children:p.jsx(Pw,{role:"menuitemcheckbox","aria-checked":Zy(n)?"mixed":n,...i,ref:e,"data-state":U2(n),onSelect:ge(i.onSelect,()=>r==null?void 0:r(Zy(n)?!0:!n),{checkForDefaultPrevented:!1})})})});YB.displayName=Ahe;var qB="MenuRadioGroup",[Phe,Nhe]=Uc(qB,{value:void 0,onValueChange:()=>{}}),JB=x.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=zr(r);return p.jsx(Phe,{scope:t.__scopeMenu,value:n,onValueChange:s,children:p.jsx(B2,{...i,ref:e})})});JB.displayName=qB;var ZB="MenuRadioItem",QB=x.forwardRef((t,e)=>{const{value:n,...r}=t,i=Nhe(ZB,t.__scopeMenu),s=n===i.value;return p.jsx(ez,{scope:t.__scopeMenu,checked:s,children:p.jsx(Pw,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":U2(s),onSelect:ge(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});QB.displayName=ZB;var z2="MenuItemIndicator",[ez,The]=Uc(z2,{checked:!1}),tz=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=The(z2,n);return p.jsx(Ko,{present:r||Zy(s.checked)||s.checked===!0,children:p.jsx(ze.span,{...i,ref:e,"data-state":U2(s.checked)})})});tz.displayName=z2;var Mhe="MenuSeparator",nz=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(ze.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});nz.displayName=Mhe;var Rhe="MenuArrow",rz=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Aw(n);return p.jsx(i2,{...i,...r,ref:e})});rz.displayName=Rhe;var Ohe="MenuSub",[Hme,iz]=Uc(Ohe),Gf="MenuSubTrigger",sz=x.forwardRef((t,e)=>{const n=Hc(Gf,t.__scopeMenu),r=im(Gf,t.__scopeMenu),i=iz(Gf,t.__scopeMenu),s=$2(Gf,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>u,[u]),x.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),p.jsx(L2,{asChild:!0,...c,children:p.jsx(XB,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":lz(n.open),...t,ref:E0(e,i.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ge(t.onPointerMove,Ep(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ge(t.onPointerLeave,Ep(d=>{var h,m;u();const f=(h=n.content)==null?void 0:h.getBoundingClientRect();if(f){const g=(m=n.content)==null?void 0:m.dataset.side,y=g==="right",v=y?-5:5,w=f[y?"left":"right"],b=f[y?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:w,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:w,y:f.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ge(t.onKeyDown,d=>{var h;const f=s.searchRef.current!=="";t.disabled||f&&d.key===" "||hhe[r.dir].includes(d.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),d.preventDefault())})})})});sz.displayName=Gf;var oz="MenuSubContent",az=x.forwardRef((t,e)=>{const n=VB(ji,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Hc(ji,t.__scopeMenu),o=im(ji,t.__scopeMenu),a=iz(oz,t.__scopeMenu),l=x.useRef(null),c=it(e,l);return p.jsx(Cp.Provider,{scope:t.__scopeMenu,children:p.jsx(Ko,{present:r||s.open,children:p.jsx(Cp.Slot,{scope:t.__scopeMenu,children:p.jsx(F2,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ge(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ge(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ge(t.onKeyDown,u=>{var h;const d=u.currentTarget.contains(u.target),f=phe[o.dir].includes(u.key);d&&f&&(s.onOpenChange(!1),(h=a.trigger)==null||h.focus(),u.preventDefault())})})})})})});az.displayName=oz;function lz(t){return t?"open":"closed"}function Zy(t){return t==="indeterminate"}function U2(t){return Zy(t)?"indeterminate":t?"checked":"unchecked"}function Ihe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Dhe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Lhe(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Dhe(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function jhe(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>r!=f>r&&n<(d-c)*(r-u)/(f-u)+c&&(i=!i)}return i}function $he(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return jhe(n,e)}function Ep(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Fhe=HB,Bhe=L2,zhe=WB,Uhe=GB,Hhe=B2,Vhe=KB,Whe=Pw,Ghe=YB,Khe=JB,Xhe=QB,Yhe=tz,qhe=nz,Jhe=rz,Zhe=sz,Qhe=az,Nw="DropdownMenu",[epe,Vme]=ms(Nw,[zB]),xr=zB(),[tpe,cz]=epe(Nw),uz=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=xr(e),c=x.useRef(null),[u,d]=Fo({prop:i,defaultProp:s??!1,onChange:o,caller:Nw});return p.jsx(tpe,{scope:e,triggerId:tl(),triggerRef:c,contentId:tl(),open:u,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(f=>!f),[d]),modal:a,children:p.jsx(Fhe,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};uz.displayName=Nw;var dz="DropdownMenuTrigger",fz=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=cz(dz,n),o=xr(n);return p.jsx(Bhe,{asChild:!0,...o,children:p.jsx(ze.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:E0(e,s.triggerRef),onPointerDown:ge(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ge(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});fz.displayName=dz;var npe="DropdownMenuPortal",hz=t=>{const{__scopeDropdownMenu:e,...n}=t,r=xr(e);return p.jsx(zhe,{...r,...n})};hz.displayName=npe;var pz="DropdownMenuContent",mz=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=cz(pz,n),s=xr(n),o=x.useRef(!1);return p.jsx(Uhe,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:ge(t.onCloseAutoFocus,a=>{var l;o.current||(l=i.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ge(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});mz.displayName=pz;var rpe="DropdownMenuGroup",ipe=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=xr(n);return p.jsx(Hhe,{...i,...r,ref:e})});ipe.displayName=rpe;var spe="DropdownMenuLabel",gz=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=xr(n);return p.jsx(Vhe,{...i,...r,ref:e})});gz.displayName=spe;var ope="DropdownMenuItem",vz=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=xr(n);return p.jsx(Whe,{...i,...r,ref:e})});vz.displayName=ope;var ape="DropdownMenuCheckboxItem",yz=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=xr(n);return p.jsx(Ghe,{...i,...r,ref:e})});yz.displayName=ape;var lpe="DropdownMenuRadioGroup",cpe=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=xr(n);return p.jsx(Khe,{...i,...r,ref:e})});cpe.displayName=lpe;var upe="DropdownMenuRadioItem",wz=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=xr(n);return p.jsx(Xhe,{...i,...r,ref:e})});wz.displayName=upe;var dpe="DropdownMenuItemIndicator",bz=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=xr(n);return p.jsx(Yhe,{...i,...r,ref:e})});bz.displayName=dpe;var fpe="DropdownMenuSeparator",xz=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=xr(n);return p.jsx(qhe,{...i,...r,ref:e})});xz.displayName=fpe;var hpe="DropdownMenuArrow",ppe=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=xr(n);return p.jsx(Jhe,{...i,...r,ref:e})});ppe.displayName=hpe;var mpe="DropdownMenuSubTrigger",Sz=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=xr(n);return p.jsx(Zhe,{...i,...r,ref:e})});Sz.displayName=mpe;var gpe="DropdownMenuSubContent",kz=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=xr(n);return p.jsx(Qhe,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});kz.displayName=gpe;var vpe=uz,ype=fz,wpe=hz,_z=mz,Cz=gz,Ez=vz,Az=yz,Pz=wz,Nz=bz,Tz=xz,Mz=Sz,Rz=kz;const bpe=vpe,xpe=ype,Spe=x.forwardRef(({className:t,inset:e,children:n,...r},i)=>p.jsxs(Mz,{ref:i,className:ve("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...r,children:[n,p.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block size-4"})]}));Spe.displayName=Mz.displayName;const kpe=x.forwardRef(({className:t,...e},n)=>p.jsx(Rz,{ref:n,className:ve("z-50 min-w-32 overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));kpe.displayName=Rz.displayName;const Oz=x.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(wpe,{children:p.jsx(_z,{ref:r,sideOffset:e,className:ve("z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));Oz.displayName=_z.displayName;const Kf=x.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(Ez,{ref:r,className:ve("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Kf.displayName=Ez.displayName;const _pe=x.forwardRef(({className:t,children:e,checked:n,...r},i)=>p.jsxs(Az,{ref:i,className:ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[p.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:p.jsx(Nz,{children:p.jsx("span",{className:"icon-[lucide--check] size-4"})})}),e]}));_pe.displayName=Az.displayName;const Cpe=x.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(Pz,{ref:r,className:ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[p.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:p.jsx(Nz,{children:p.jsx("span",{className:"icon-[lucide--circle-dot] block size-4"})})}),e]}));Cpe.displayName=Pz.displayName;const Epe=x.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(Cz,{ref:r,className:ve("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Epe.displayName=Cz.displayName;const Ape=x.forwardRef(({className:t,...e},n)=>p.jsx(Tz,{ref:n,className:ve("-mx-1 my-1 h-px bg-stone-600",t),...e}));Ape.displayName=Tz.displayName;const H2=Qj("vonsim-program",W0(Tn().language,"editor.example"),void 0,{getOnInit:!0}),Ppe=()=>{const t=B.get(H2);return typeof t=="string"?t:""},Npe=Kn.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(B.set(H2,this.view.state.doc.toString()),B.set(xy,!0))}}),xf="showSaveFilePicker"in window,WO=ce(null),GO=ce(t=>t(WO),(t,e,n)=>{e(WO,n)}),Iz=ce(""),Tpe=ce(t=>t(Iz)!==t(H2));function Mpe(){const t=Tt();function e(){}const n=nt(GO),r=hS(GO),i=nt(Tpe),s=hS(Iz),o=n&&i,a=x.useCallback(async()=>{if(!xf){Qr({title:t("editor.files.unsupported"),variant:"error"});return}if(!(o&&!confirm(t("editor.files.unsaved"))))try{const[f]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});await f.requestPermission({mode:"readwrite"})==="granted"&&r(f);const g=await(await f.getFile()).text();s(g),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:g}})}catch(f){console.error(f),Qr({title:t("editor.files.open-error"),variant:"error"})}},[t,o,r,s]);Ao(f=>f.ctrlKey&&f.key==="o",f=>{f.preventDefault(),a()},void 0,[a]);const l=x.useCallback(async f=>{var m,g;if(f.stopPropagation(),f.preventDefault(),!xf){Qr({title:t("editor.files.unsupported"),variant:"error"});return}const h=(g=(m=f.dataTransfer)==null?void 0:m.items)==null?void 0:g[0];if(!(!h||h.kind!=="file")&&!(o&&!confirm(t("editor.files.unsaved"))))try{const y=await h.getAsFileSystemHandle();if(!y)throw new Error("File handle not found");await y.requestPermission({mode:"readwrite"})==="granted"&&r(y);const b=await(await y.getFile()).text();s(b),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:b}})}catch(y){console.error(y),Qr({title:t("editor.files.open-error"),variant:"error"})}},[r,s,t,o]);Jg("drop",l,window),Jg("dragover",f=>{f.preventDefault(),f.stopPropagation()},window);const c=x.useCallback(async()=>{if(!xf){Qr({title:t("editor.files.unsupported"),variant:"error"});return}if(o)try{const f=window.codemirror.state.doc.toString(),h=await n.createWritable({keepExistingData:!1});await h.write(f),await h.close(),s(f)}catch(f){console.error(f),Qr({title:t("editor.files.save-error"),variant:"error"})}},[t,o,n,s]),u=x.useCallback(async()=>{const f=window.codemirror.state.doc.toString(),h=(n==null?void 0:n.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(xf)try{const m=await window.showSaveFilePicker({suggestedName:h,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]}),g=await m.requestPermission({mode:"readwrite"});if(g!=="granted")throw new Error(`Permission denied: ${g}`);r(m);const y=await m.createWritable({keepExistingData:!1});await y.write(f),await y.close(),s(f)}catch(m){console.error(m),Qr({title:t("editor.files.save-error"),variant:"error"})}else{const m=new Blob([f],{type:"text/plain"}),g=URL.createObjectURL(m),y=document.createElement("a");y.style.display="none",y.href=g,y.download=h,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(g)}},[t,n,r,s]);Ao(f=>f.ctrlKey&&f.key==="s",f=>{f.preventDefault(),xf&&(n?c():u())},void 0,[n,c,u]),Ao(f=>f.ctrlKey&&f.shiftKey&&f.key==="S",f=>{f.preventDefault(),u()},void 0,[u]);const d=x.useCallback(f=>{o&&(f.preventDefault(),f.returnValue=t("editor.files.unsaved"))},[t,o]);return Jg("beforeunload",d,window),p.jsxs(bpe,{children:[p.jsx(xpe,{asChild:!0,children:p.jsxs("button",{className:ve("flex items-center transition-colors hover:text-white",n&&"text-white"),"data-testid":"new-button",children:[n?n.name:t("editor.files.no-file"),o&&p.jsx("span",{className:"ml-1 size-2 rounded-full bg-current"})]})}),p.jsxs(Oz,{className:"w-64",align:"start",children:[p.jsxs(Kf,{onClick:a,"data-testid":"open-button",children:[p.jsx("span",{className:"icon-[lucide--file-search-2] mr-2 size-4"}),t("editor.files.open"),p.jsx("div",{className:"grow"}),p.jsx("kbd",{className:"text-stone-600",children:"Ctrl+O"})]}),p.jsxs(Kf,{disabled:!o,onClick:c,"data-testid":"save-button",children:[p.jsx("span",{className:"icon-[lucide--save] mr-2 size-4"}),t("editor.files.save"),p.jsx("div",{className:"grow"}),p.jsx("kbd",{className:"text-stone-600",children:"Ctrl+S"})]}),p.jsxs(Kf,{onClick:u,"data-testid":"save-as-button",children:[p.jsx("span",{className:"icon-[lucide--save-all] mr-2 size-4"}),t("editor.files.save-as"),p.jsx("div",{className:"grow"}),p.jsx("kbd",{className:"text-stone-600",children:"Ctrl+Shift+S"})]}),p.jsxs(Kf,{onClick:e,"data-testid":"assemble-button",children:[p.jsx("span",{className:"icon-[lucide--hammer] mr-2 size-4"}),"Ensamblar"]})]})]})}const p_=ce(0);function Rpe(){const t=Tt(),e=nt(p_);return p.jsxs("div",{className:"flex items-center justify-between border-t border-stone-600 bg-stone-800 px-3 font-sans text-xs tracking-wider text-stone-400",children:[p.jsx(Mpe,{}),p.jsx("span",{className:ve(e>0&&"font-semibold text-red-400"),children:t("editor.lintSummary",e)})]})}const kr={character:Be.character,comment:Be.comment,"data-directive":bn.define(),identifier:Be.variableName,instruction:bn.define(),label:Be.labelName,number:Be.number,operator:Be.operator,offset:bn.define(),"ptr-size":bn.define(),punctuation:Be.punctuation,register:bn.define(),special:bn.define(),string:Be.string,unassigned:bn.define()},Ope=k2.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":GC.includes(e)?"data-directive":KC.includes(e)?"instruction":cy.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:kr}),Ipe=que(Sw.define([{tag:kr.character,class:"text-orange-300"},{tag:kr.comment,class:"text-stone-500 italic"},{tag:kr["data-directive"],class:"text-rose-400/80"},{tag:kr.instruction,class:"text-mantis-400"},{tag:kr.number,class:"text-cyan-300/60"},{tag:kr.operator,class:"text-rose-300"},{tag:kr.offset,class:"text-rose-400/80 italic"},{tag:kr["ptr-size"],class:"text-rose-400/80 italic"},{tag:kr.punctuation,class:"text-stone-600"},{tag:kr.register,class:"text-emerald-400/80"},{tag:kr.special,class:"text-yellow-300/80"},{tag:kr.string,class:"text-orange-300"},{tag:kr.unassigned,class:"text-rose-400/80"}])),Dpe=Jfe(t=>{const e=t.state.doc.toString(),n=p5(e);if(n.success)return B.set(p_,0),[];const r=n,i=Tn().language,s=r.errors.map(o=>{var c,u;const a=((c=o.position)==null?void 0:c.start)??0,l=((u=o.position)==null?void 0:u.end)??e.length;return{message:o.translate(i),severity:"error",from:a,to:l}});return B.set(p_,s.length),s},{delay:200});function Lpe(){return new Eue(Ope,[Ipe,Dpe])}function Dz({className:t}){const[e,n]=x.useState(),r=fee(),i=x.useCallback(s=>{s&&n(s)},[]);return x.useEffect(()=>{if(e)return window.codemirror=new Re({state:st.create({doc:Ppe()||"",extensions:[st.tabSize.of(2),qj.of(st.readOnly.of(!1)),Npe,_Q(),NQ,AQ(),JZ(),xde(),UZ(),Re.domEventHandlers({drop:s=>s.preventDefault()}),st.allowMultipleSelections.of(!0),rQ(),zj.of([{key:"Escape",run:s=>(s.dispatch({selection:re.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?u_(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...ohe]),Lpe()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),p.jsxs("div",{className:ve("flex flex-col",t),children:[p.jsx("div",{ref:i,className:"grow overflow-auto font-mono",style:{fontSize:`${r}px`,lineHeight:1.25}}),p.jsx(Rpe,{})]})}const Lz=x.memo(()=>{const t=pE(),e=mee(),n=AG("(max-width: 640px)"),r=x.useMemo(()=>({filter:e}),[e]);return p.jsxs("div",{"data-testid":"app-container",className:"flex h-screen w-screen flex-col bg-black text-white",lang:t,style:r,children:[p.jsx(H8,{"data-testid":"header"}),n?p.jsx($z,{}):p.jsx(jz,{}),p.jsx(l5,{"data-testid":"footer"}),p.jsx(Y8,{}),p.jsx(G8,{})]})});Lz.displayName="App";const jz=x.memo(()=>{const[t]=Dp(vw);return p.jsxs(p3,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[p.jsx(qg,{id:"panel-editor",order:1,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-black","data-testid":"panel-editor",children:p.jsx(Dz,{className:"size-full"})}),p.jsx(mS,{className:"w-2"}),p.jsx(qg,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"computer-background rounded-lg border border-stone-600","data-testid":"panel-computer",children:p.jsx(_6,{})}),t&&p.jsxs(p.Fragment,{children:[p.jsx(mS,{className:"w-2"}),p.jsx(qg,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800","data-testid":"panel-settings",children:p.jsx(B8,{className:"size-full"})})]})]})});jz.displayName="DesktopLayout";const $z=x.memo(()=>{const t=Tt(),[e,n]=x.useState("editor"),[r,i]=Dp(vw),s=nt(Qi),o=x.useMemo(()=>"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),a=x.useMemo(()=>r?"settings":e,[r,e]),l=x.useCallback(u=>{r&&i(!1),n(u)},[r,i]),c=x.useMemo(()=>{switch(a){case"editor":return"Editor";case"computer":return"Computadora";case"settings":return"Configuracin";default:return""}},[a]);return p.jsx(F4,{value:a,onValueChange:l,asChild:!0,children:p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"sticky top-0 z-30 w-full border-b border-stone-700 bg-stone-900 px-4 py-2",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-xs text-stone-500",children:"Pestaa:"}),p.jsx("span",{className:"text-sm font-medium text-white",children:c})]}),a==="computer"&&p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-xs text-stone-500",children:"Instruccin actual:"}),p.jsx("div",{className:"font-mono text-sm text-mantis-400",children:o||p.jsx("span",{className:"italic text-stone-400",children:"Sin instruccin"})})]})]})}),p.jsx(Yg,{value:"editor",asChild:!0,children:p.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-black data-[state=inactive]:hidden","data-testid":"panel-editor",children:p.jsx(Dz,{className:"size-full"})})}),p.jsx(Yg,{value:"computer",asChild:!0,children:p.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-computer",children:p.jsx(_6,{})})}),p.jsx(Yg,{value:"settings",asChild:!0,children:p.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-settings",children:p.jsx(B8,{className:"size-full"})})}),p.jsx("div",{className:"border-t border-stone-700 bg-stone-900 p-2",children:p.jsxs(z4,{className:"grid grid-cols-3 gap-2",children:[p.jsxs(Xg,{value:"editor",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[p.jsx("span",{className:"icon-[lucide--file-terminal] mb-1 size-5"}),t("control.tabs.editor")]}),p.jsxs(Xg,{value:"computer",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[p.jsx("span",{className:"icon-[lucide--computer] mb-1 size-5"}),t("control.tabs.computer")]}),p.jsxs(Xg,{value:"settings",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[p.jsx("span",{className:"icon-[lucide--settings] mb-1 size-5"}),"Configuracin"]})]})})]})})});$z.displayName="MobileLayout";var V2="ToastProvider",[W2,jpe,$pe]=Rp("Toast"),[Fz,Wme]=ms("Toast",[$pe]),[Fpe,Tw]=Fz(V2),Bz=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=x.useState(null),[c,u]=x.useState(0),d=x.useRef(!1),f=x.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${V2}\`. Expected non-empty \`string\`.`),p.jsx(W2.Provider,{scope:e,children:p.jsx(Fpe,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:x.useCallback(()=>u(h=>h+1),[]),onToastRemove:x.useCallback(()=>u(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};Bz.displayName=V2;var zz="ToastViewport",Bpe=["F8"],m_="toast.viewportPause",g_="toast.viewportResume",Uz=x.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Bpe,label:i="Notifications ({hotkey})",...s}=t,o=Tw(zz,n),a=jpe(n),l=x.useRef(null),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),f=it(e,d,o.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=o.toastCount>0;x.useEffect(()=>{const y=v=>{var b;r.length!==0&&r.every(k=>v[k]||v.code===k)&&((b=d.current)==null||b.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),x.useEffect(()=>{const y=l.current,v=d.current;if(m&&y&&v){const w=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(m_);v.dispatchEvent(E),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(g_);v.dispatchEvent(E),o.isClosePausedRef.current=!1}},k=E=>{!y.contains(E.relatedTarget)&&b()},_=()=>{y.contains(document.activeElement)||b()};return y.addEventListener("focusin",w),y.addEventListener("focusout",k),y.addEventListener("pointermove",w),y.addEventListener("pointerleave",_),window.addEventListener("blur",w),window.addEventListener("focus",b),()=>{y.removeEventListener("focusin",w),y.removeEventListener("focusout",k),y.removeEventListener("pointermove",w),y.removeEventListener("pointerleave",_),window.removeEventListener("blur",w),window.removeEventListener("focus",b)}}},[m,o.isClosePausedRef]);const g=x.useCallback(({tabbingDirection:y})=>{const w=a().map(b=>{const k=b.ref.current,_=[k,...Qpe(k)];return y==="forwards"?_:_.reverse()});return(y==="forwards"?w.reverse():w).flat()},[a]);return x.useEffect(()=>{const y=d.current;if(y){const v=w=>{var _,E,C;const b=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!b){const P=document.activeElement,M=w.shiftKey;if(w.target===y&&M){(_=c.current)==null||_.focus();return}const D=g({tabbingDirection:M?"backwards":"forwards"}),G=D.findIndex(U=>U===P);Fx(D.slice(G+1))?w.preventDefault():M?(E=c.current)==null||E.focus():(C=u.current)==null||C.focus()}};return y.addEventListener("keydown",v),()=>y.removeEventListener("keydown",v)}},[a,g]),p.jsxs(Cie,{ref:l,role:"region","aria-label":i.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&p.jsx(v_,{ref:c,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});Fx(y)}}),p.jsx(W2.Slot,{scope:n,children:p.jsx(ze.ol,{tabIndex:-1,...s,ref:f})}),m&&p.jsx(v_,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});Fx(y)}})]})});Uz.displayName=zz;var Hz="ToastFocusProxy",v_=x.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=Tw(Hz,n);return p.jsx(o2,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});v_.displayName=Hz;var sm="Toast",zpe="toast.swipeStart",Upe="toast.swipeMove",Hpe="toast.swipeCancel",Vpe="toast.swipeEnd",Vz=x.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a,l]=Fo({prop:r,defaultProp:i??!0,onChange:s,caller:sm});return p.jsx(Ko,{present:n||a,children:p.jsx(Kpe,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:zr(t.onPause),onResume:zr(t.onResume),onSwipeStart:ge(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ge(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ge(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ge(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});Vz.displayName=sm;var[Wpe,Gpe]=Fz(sm,{onClose(){}}),Kpe=x.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:h,...m}=t,g=Tw(sm,n),[y,v]=x.useState(null),w=it(e,U=>v(U)),b=x.useRef(null),k=x.useRef(null),_=i||g.duration,E=x.useRef(0),C=x.useRef(_),P=x.useRef(0),{onToastAdd:M,onToastRemove:O}=g,I=zr(()=>{var X;(y==null?void 0:y.contains(document.activeElement))&&((X=g.viewport)==null||X.focus()),o()}),D=x.useCallback(U=>{!U||U===1/0||(window.clearTimeout(P.current),E.current=new Date().getTime(),P.current=window.setTimeout(I,U))},[I]);x.useEffect(()=>{const U=g.viewport;if(U){const X=()=>{D(C.current),c==null||c()},Z=()=>{const te=new Date().getTime()-E.current;C.current=C.current-te,window.clearTimeout(P.current),l==null||l()};return U.addEventListener(m_,Z),U.addEventListener(g_,X),()=>{U.removeEventListener(m_,Z),U.removeEventListener(g_,X)}}},[g.viewport,_,l,c,D]),x.useEffect(()=>{s&&!g.isClosePausedRef.current&&D(_)},[s,_,g.isClosePausedRef,D]),x.useEffect(()=>(M(),()=>O()),[M,O]);const G=x.useMemo(()=>y?Jz(y):null,[y]);return g.viewport?p.jsxs(p.Fragment,{children:[G&&p.jsx(Xpe,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),p.jsx(Wpe,{scope:n,onClose:I,children:xl.createPortal(p.jsx(W2.ItemSlot,{scope:n,children:p.jsx(_ie,{asChild:!0,onEscapeKeyDown:ge(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||I(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(ze.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":g.swipeDirection,...m,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ge(t.onKeyDown,U=>{U.key==="Escape"&&(a==null||a(U.nativeEvent),U.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:ge(t.onPointerDown,U=>{U.button===0&&(b.current={x:U.clientX,y:U.clientY})}),onPointerMove:ge(t.onPointerMove,U=>{if(!b.current)return;const X=U.clientX-b.current.x,Z=U.clientY-b.current.y,te=!!k.current,H=["left","right"].includes(g.swipeDirection),$=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,ne=H?$(0,X):0,ke=H?0:$(0,Z),J=U.pointerType==="touch"?10:2,ae={x:ne,y:ke},j={originalEvent:U,delta:ae};te?(k.current=ae,Rg(Upe,d,j,{discrete:!1})):KO(ae,g.swipeDirection,J)?(k.current=ae,Rg(zpe,u,j,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(X)>J||Math.abs(Z)>J)&&(b.current=null)}),onPointerUp:ge(t.onPointerUp,U=>{const X=k.current,Z=U.target;if(Z.hasPointerCapture(U.pointerId)&&Z.releasePointerCapture(U.pointerId),k.current=null,b.current=null,X){const te=U.currentTarget,H={originalEvent:U,delta:X};KO(X,g.swipeDirection,g.swipeThreshold)?Rg(Vpe,h,H,{discrete:!0}):Rg(Hpe,f,H,{discrete:!0}),te.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Xpe=t=>{const{__scopeToast:e,children:n,...r}=t,i=Tw(sm,e),[s,o]=x.useState(!1),[a,l]=x.useState(!1);return Jpe(()=>o(!0)),x.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:p.jsx(Yp,{asChild:!0,children:p.jsx(o2,{...r,children:s&&p.jsxs(p.Fragment,{children:[i.label," ",n]})})})},Ype="ToastTitle",Wz=x.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(ze.div,{...r,ref:e})});Wz.displayName=Ype;var qpe="ToastDescription",Gz=x.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(ze.div,{...r,ref:e})});Gz.displayName=qpe;var Kz="ToastAction",Xz=x.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?p.jsx(qz,{altText:n,asChild:!0,children:p.jsx(G2,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Kz}\`. Expected non-empty \`string\`.`),null)});Xz.displayName=Kz;var Yz="ToastClose",G2=x.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=Gpe(Yz,n);return p.jsx(qz,{asChild:!0,children:p.jsx(ze.button,{type:"button",...r,ref:e,onClick:ge(t.onClick,i.onClose)})})});G2.displayName=Yz;var qz=x.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return p.jsx(ze.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function Jz(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Zpe(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Jz(r))}}),e}function Rg(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?EC(i,s):i.dispatchEvent(s)}var KO=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function Jpe(t=()=>{}){const e=zr(t);Gn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Zpe(t){return t.nodeType===t.ELEMENT_NODE}function Qpe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Fx(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var eme=Bz,Zz=Uz,Qz=Vz,e9=Wz,t9=Gz,n9=Xz,r9=G2;const tme=eme,i9=x.forwardRef(({className:t,...e},n)=>p.jsx(Zz,{ref:n,className:ve("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));i9.displayName=Zz.displayName;const s9=x.forwardRef(({className:t,variant:e="default",...n},r)=>p.jsx(Qz,{ref:r,"data-variant":e,className:ve("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"border border-red-600 bg-red-900 text-red-50",e==="info"&&"border border-green-500 bg-stone-900 text-white",t),...n}));s9.displayName=Qz.displayName;const nme=x.forwardRef(({className:t,...e},n)=>p.jsx(n9,{ref:n,className:ve("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));nme.displayName=n9.displayName;const o9=x.forwardRef(({className:t,...e},n)=>p.jsx(r9,{ref:n,className:ve("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100",t),"toast-close":"",...e,children:p.jsx("span",{className:"block size-4",children:""})}));o9.displayName=r9.displayName;const a9=x.forwardRef(({className:t,...e},n)=>p.jsx(e9,{ref:n,className:ve("text-sm font-semibold",t),...e}));a9.displayName=e9.displayName;const l9=x.forwardRef(({className:t,...e},n)=>p.jsx(t9,{ref:n,className:ve("text-sm opacity-90",t),...e}));l9.displayName=t9.displayName;function rme(){const{toastList:t}=Eee();return p.jsxs(tme,{children:[t.map(({id:e,title:n,description:r,action:i,variant:s,otherProps:o})=>p.jsxs(s9,{...o,variant:s,children:[p.jsxs("div",{className:"grid gap-1",children:[n&&p.jsx(a9,{children:n}),r&&p.jsx(l9,{children:r})]}),i,p.jsx(o9,{})]},e)),p.jsx(i9,{})]})}window.codemirror=null;const ime=T4(document.getElementById("root"));ime.render(p.jsx(x.StrictMode,{children:p.jsxs(sH,{client:s$,children:[p.jsx(Tq,{children:p.jsx(Lz,{})}),p.jsx(rme,{})]})}));
