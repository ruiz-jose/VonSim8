var iU=Object.defineProperty;var YA=t=>{throw TypeError(t)};var rU=(t,e,n)=>e in t?iU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var me=(t,e,n)=>rU(t,typeof e!="symbol"?e+"":e,n),dw=(t,e,n)=>e.has(t)||YA("Cannot "+n);var A=(t,e,n)=>(dw(t,e,"read from private field"),n?n.call(t):e.get(t)),$e=(t,e,n)=>e.has(t)?YA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ne=(t,e,n,i)=>(dw(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Ot=(t,e,n)=>(dw(t,e,"access private method"),n);function sU(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var oU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yO={exports:{}},Dy={},bO={exports:{}},ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om=Symbol.for("react.element"),aU=Symbol.for("react.portal"),lU=Symbol.for("react.fragment"),cU=Symbol.for("react.strict_mode"),uU=Symbol.for("react.profiler"),dU=Symbol.for("react.provider"),fU=Symbol.for("react.context"),hU=Symbol.for("react.forward_ref"),pU=Symbol.for("react.suspense"),mU=Symbol.for("react.memo"),gU=Symbol.for("react.lazy"),XA=Symbol.iterator;function vU(t){return t===null||typeof t!="object"?null:(t=XA&&t[XA]||t["@@iterator"],typeof t=="function"?t:null)}var wO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xO=Object.assign,SO={};function lf(t,e,n){this.props=t,this.context=e,this.refs=SO,this.updater=n||wO}lf.prototype.isReactComponent={};lf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};lf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function kO(){}kO.prototype=lf.prototype;function u_(t,e,n){this.props=t,this.context=e,this.refs=SO,this.updater=n||wO}var d_=u_.prototype=new kO;d_.constructor=u_;xO(d_,lf.prototype);d_.isPureReactComponent=!0;var JA=Array.isArray,_O=Object.prototype.hasOwnProperty,f_={current:null},CO={key:!0,ref:!0,__self:!0,__source:!0};function EO(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)_O.call(e,i)&&!CO.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:om,type:t,key:s,ref:o,props:r,_owner:f_.current}}function yU(t,e){return{$$typeof:om,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function h_(t){return typeof t=="object"&&t!==null&&t.$$typeof===om}function bU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ZA=/\/+/g;function fw(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bU(""+t.key):e.toString(36)}function d0(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case om:case aU:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+fw(o,0):i,JA(r)?(n="",t!=null&&(n=t.replace(ZA,"$&/")+"/"),d0(r,e,n,"",function(c){return c})):r!=null&&(h_(r)&&(r=yU(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(ZA,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",JA(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+fw(s,a);o+=d0(s,e,n,l,r)}else if(l=vU(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+fw(s,a++),o+=d0(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bm(t,e,n){if(t==null)return t;var i=[],r=0;return d0(t,i,"","",function(s){return e.call(n,s,r++)}),i}function wU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ai={current:null},f0={transition:null},xU={ReactCurrentDispatcher:Ai,ReactCurrentBatchConfig:f0,ReactCurrentOwner:f_};function AO(){throw Error("act(...) is not supported in production builds of React.")}ft.Children={map:Bm,forEach:function(t,e,n){Bm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bm(t,function(){e++}),e},toArray:function(t){return Bm(t,function(e){return e})||[]},only:function(t){if(!h_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ft.Component=lf;ft.Fragment=lU;ft.Profiler=uU;ft.PureComponent=u_;ft.StrictMode=cU;ft.Suspense=pU;ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xU;ft.act=AO;ft.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=xO({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=f_.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)_O.call(e,l)&&!CO.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:om,type:t.type,key:r,ref:s,props:i,_owner:o}};ft.createContext=function(t){return t={$$typeof:fU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dU,_context:t},t.Consumer=t};ft.createElement=EO;ft.createFactory=function(t){var e=EO.bind(null,t);return e.type=t,e};ft.createRef=function(){return{current:null}};ft.forwardRef=function(t){return{$$typeof:hU,render:t}};ft.isValidElement=h_;ft.lazy=function(t){return{$$typeof:gU,_payload:{_status:-1,_result:t},_init:wU}};ft.memo=function(t,e){return{$$typeof:mU,type:t,compare:e===void 0?null:e}};ft.startTransition=function(t){var e=f0.transition;f0.transition={};try{t()}finally{f0.transition=e}};ft.unstable_act=AO;ft.useCallback=function(t,e){return Ai.current.useCallback(t,e)};ft.useContext=function(t){return Ai.current.useContext(t)};ft.useDebugValue=function(){};ft.useDeferredValue=function(t){return Ai.current.useDeferredValue(t)};ft.useEffect=function(t,e){return Ai.current.useEffect(t,e)};ft.useId=function(){return Ai.current.useId()};ft.useImperativeHandle=function(t,e,n){return Ai.current.useImperativeHandle(t,e,n)};ft.useInsertionEffect=function(t,e){return Ai.current.useInsertionEffect(t,e)};ft.useLayoutEffect=function(t,e){return Ai.current.useLayoutEffect(t,e)};ft.useMemo=function(t,e){return Ai.current.useMemo(t,e)};ft.useReducer=function(t,e,n){return Ai.current.useReducer(t,e,n)};ft.useRef=function(t){return Ai.current.useRef(t)};ft.useState=function(t){return Ai.current.useState(t)};ft.useSyncExternalStore=function(t,e,n){return Ai.current.useSyncExternalStore(t,e,n)};ft.useTransition=function(){return Ai.current.useTransition()};ft.version="18.3.1";bO.exports=ft;var b=bO.exports;const Vt=iu(b),Ly=sU({__proto__:null,default:Vt},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SU=b,kU=Symbol.for("react.element"),_U=Symbol.for("react.fragment"),CU=Object.prototype.hasOwnProperty,EU=SU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AU={key:!0,ref:!0,__self:!0,__source:!0};function NO(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)CU.call(e,i)&&!AU.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:kU,type:t,key:s,ref:o,props:r,_owner:EU.current}}Dy.Fragment=_U;Dy.jsx=NO;Dy.jsxs=NO;yO.exports=Dy;var h=yO.exports,Y=typeof window<"u"?window:void 0,Gi=typeof globalThis<"u"?globalThis:Y,PO=Array.prototype,QA=PO.forEach,eN=PO.indexOf,hr=Gi==null?void 0:Gi.navigator,Ae=Gi==null?void 0:Gi.document,Ui=Gi==null?void 0:Gi.location,k1=Gi==null?void 0:Gi.fetch,_1=Gi!=null&&Gi.XMLHttpRequest&&"withCredentials"in new Gi.XMLHttpRequest?Gi.XMLHttpRequest:void 0,tN=Gi==null?void 0:Gi.AbortController,Bi=hr==null?void 0:hr.userAgent,Je=Y??{},Io={DEBUG:!1,LIB_VERSION:"1.256.2"},hw="$copy_autocapture",NU=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],Ko=function(t){return t.GZipJS="gzip-js",t.Base64="base64",t}({}),PU=["fatal","error","warning","log","info","debug"];function dt(t,e){return t.indexOf(e)!==-1}var $y=function(t){return t.trim()},C1=function(t){return t.replace(/^\$/,"")},MU=Array.isArray,MO=Object.prototype,RO=MO.hasOwnProperty,By=MO.toString,Qt=MU||function(t){return By.call(t)==="[object Array]"},Wr=t=>typeof t=="function",mn=t=>t===Object(t)&&!Qt(t),Iu=t=>{if(mn(t)){for(var e in t)if(RO.call(t,e))return!1;return!0}return!1},ye=t=>t===void 0,gn=t=>By.call(t)=="[object String]",E1=t=>gn(t)&&t.trim().length===0,Ll=t=>t===null,At=t=>ye(t)||Ll(t),di=t=>By.call(t)=="[object Number]",ro=t=>By.call(t)==="[object Boolean]",RU=t=>t instanceof FormData,TU=t=>dt(NU,t),TO=t=>{var e={t:function(n){if(Y&&(Io.DEBUG||Je.POSTHOG_DEBUG)&&!ye(Y.console)&&Y.console){for(var i=("__rrweb_original__"in Y.console[n])?Y.console[n].__rrweb_original__:Y.console[n],r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];i(t,...s)}},info:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("log",...i)},warn:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("warn",...i)},error:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("error",...i)},critical:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console.error(t,...i)},uninitializedWarning:n=>{e.error("You must initialize PostHog before calling "+n)},createLogger:n=>TO(t+" "+n)};return e},Pe=TO("[PostHog.js]"),Bn=Pe.createLogger,OU=Bn("[ExternalScriptsLoader]"),nN=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return OU.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var i=Ae==null?void 0:Ae.querySelectorAll("script");if(i){for(var r=0;r<i.length;r++)if(i[r].src===e)return n()}var s=()=>{if(!Ae)return n("document not found");var o=Ae.createElement("script");if(o.type="text/javascript",o.crossOrigin="anonymous",o.src=e,o.onload=c=>n(void 0,c),o.onerror=c=>n(c),t.config.prepare_external_dependency_script&&(o=t.config.prepare_external_dependency_script(o)),!o)return n("prepare_external_dependency_script returned null");var a,l=Ae.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(o,l[0]):Ae.body.appendChild(o)};Ae!=null&&Ae.body?s():Ae==null||Ae.addEventListener("DOMContentLoaded",s)};function _e(){return _e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_e.apply(null,arguments)}function OO(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}Je.__PosthogExtensions__=Je.__PosthogExtensions__||{},Je.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var i="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(i="/array/"+t.config.token+"/config.js"),e==="toolbar"){var r=3e5;i=i+"&t="+Math.floor(Date.now()/r)*r}var s=t.requestRouter.endpointFor("assets",i);nN(t,s,n)},Je.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var i=t.requestRouter.endpointFor("api",e);nN(t,i,n)};var J0={};function sl(t,e,n){if(Qt(t)){if(QA&&t.forEach===QA)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===J0)return}}}function Rt(t,e,n){if(!At(t)){if(Qt(t))return sl(t,e,n);if(RU(t)){for(var i of t.entries())if(e.call(n,i[1],i[0])===J0)return}else for(var r in t)if(RO.call(t,r)&&e.call(n,t[r],r)===J0)return}}var bn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return sl(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t},Fy=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return sl(n,function(r){sl(r,function(s){t.push(s)})}),t};function h0(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var iN=function(t){try{return t()}catch{return}},IU=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){Pe.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Pe.critical(r)}}},p_=function(t){var e={};return Rt(t,function(n,i){(gn(n)&&n.length>0||di(n))&&(e[i]=n)}),e};function jU(t,e){return n=t,i=s=>gn(s)&&!Ll(e)?s.slice(0,e):s,r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),Qt(o)?(l=[],sl(o,c=>{l.push(s(c))})):(l={},Rt(o,(c,u)=>{r.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,i,r}var DU=["herokuapp.com","vercel.app","netlify.app"];function LU(t){var e=t==null?void 0:t.hostname;if(!gn(e))return!1;var n=e.split(".").slice(-2).join(".");for(var i of DU)if(n===i)return!1;return!0}function IO(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function an(t,e,n,i){var{capture:r=!1,passive:s=!0}=i??{};t==null||t.addEventListener(e,n,{capture:r,passive:s})}var jO="$people_distinct_id",Yf="__alias",Xf="__timers",rN="$autocapture_disabled_server_side",A1="$heatmaps_enabled_server_side",sN="$exception_capture_enabled_server_side",N1="$error_tracking_suppression_rules",oN="$web_vitals_enabled_server_side",DO="$dead_clicks_enabled_server_side",aN="$web_vitals_allowed_metrics",P1="$session_recording_enabled_server_side",lN="$console_log_recording_enabled_server_side",cN="$session_recording_network_payload_capture",uN="$session_recording_masking",dN="$session_recording_canvas_recording",fN="$replay_sample_rate",hN="$replay_minimum_duration",pN="$replay_script_config",Z0="$sesid",Jf="$session_is_sampled",M1="$session_recording_url_trigger_activated_session",R1="$session_recording_event_trigger_activated_session",ju="$enabled_feature_flags",p0="$early_access_features",T1="$feature_flag_details",Zf="$stored_person_properties",lc="$stored_group_properties",O1="$surveys",Fm="$surveys_activated",Q0="$flag_call_reported",Mo="$user_state",I1="$client_session_props",j1="$capture_rate_limit",D1="$initial_campaign_params",L1="$initial_referrer_info",ev="$initial_person_info",tv="$epp",LO="__POSTHOG_TOOLBAR__",zm="$posthog_cookieless",$U=[jO,Yf,"__cmpns",Xf,P1,A1,Z0,ju,N1,Mo,p0,T1,lc,Zf,O1,Q0,I1,j1,D1,L1,tv,ev];function mN(t){return t instanceof Element&&(t.id===LO||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function zy(t){return!!t&&t.nodeType===1}function ol(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function $O(t){return!!t&&t.nodeType===3}function BO(t){return!!t&&t.nodeType===11}function m_(t){return t?$y(t).split(/\s+/):[]}function gN(t){var e=Y==null?void 0:Y.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function nv(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return m_(e)}function FO(t){return At(t)?null:$y(t).split(/(\s+)/).filter(e=>Pd(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Uy(t){var e="";return B1(t)&&!VO(t)&&t.childNodes&&t.childNodes.length&&Rt(t.childNodes,function(n){var i;$O(n)&&n.textContent&&(e+=(i=FO(n.textContent))!==null&&i!==void 0?i:"")}),$y(e)}function zO(t){return ye(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var $1=["a","button","form","input","select","textarea","label"];function UO(t){var e=t.parentNode;return!(!e||!zy(e))&&e}function BU(t,e,n,i,r){var s,o,a;if(n===void 0&&(n=void 0),!Y||!t||ol(t,"html")||!zy(t)||(s=n)!=null&&s.url_allowlist&&!gN(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&gN(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(v=>e.type===v))return!1}for(var c=!1,u=[t],d=!0,f=t;f.parentNode&&!ol(f,"body");)if(BO(f.parentNode))u.push(f.parentNode.host),f=f.parentNode.host;else{if(!(d=UO(f)))break;if(i||$1.indexOf(d.tagName.toLowerCase())>-1)c=!0;else{var p=Y.getComputedStyle(d);p&&p.getPropertyValue("cursor")==="pointer"&&(c=!0)}u.push(d),f=d}if(!function(v,y){var w=y==null?void 0:y.element_allowlist;if(ye(w))return!0;var x,S=function(E){if(w.some(C=>E.tagName.toLowerCase()===C))return{v:!0}};for(var _ of v)if(x=S(_))return x.v;return!1}(u,n)||!function(v,y){var w=y==null?void 0:y.css_selector_allowlist;if(ye(w))return!0;var x,S=function(E){if(w.some(C=>E.matches(C)))return{v:!0}};for(var _ of v)if(x=S(_))return x.v;return!1}(u,n))return!1;var g=Y.getComputedStyle(t);if(g&&g.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var m=t.tagName.toLowerCase();switch(m){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return c?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&($1.indexOf(m)>-1||t.getAttribute("contenteditable")==="true")}}function B1(t){for(var e=t;e.parentNode&&!ol(e,"body");e=e.parentNode){var n=nv(e);if(dt(n,"ph-sensitive")||dt(n,"ph-no-capture"))return!1}if(dt(nv(t),"ph-include"))return!0;var i=t.type||"";if(gn(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(gn(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function VO(t){return!!(ol(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||ol(t,"select")||ol(t,"textarea")||t.getAttribute("contenteditable")==="true")}var HO="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",FU=new RegExp("^(?:"+HO+")$"),zU=new RegExp(HO),WO="\\d{3}-?\\d{2}-?\\d{4}",UU=new RegExp("^("+WO+")$"),VU=new RegExp("("+WO+")");function Pd(t,e){return e===void 0&&(e=!0),!(At(t)||gn(t)&&(t=$y(t),(e?FU:zU).test((t||"").replace(/[- ]/g,""))||(e?UU:VU).test(t)))}function GO(t){var e=Uy(t);return Pd(e=(e+" "+KO(t)).trim())?e:""}function KO(t){var e="";return t&&t.childNodes&&t.childNodes.length&&Rt(t.childNodes,function(n){var i;if(n&&((i=n.tagName)==null?void 0:i.toLowerCase())==="span")try{var r=Uy(n);e=(e+" "+r).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+KO(n)).trim())}catch(s){Pe.error("[AutoCapture]",s)}}),e}function HU(t){return function(e){var n=e.map(i=>{var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class)for(var a of(i.attr_class.sort(),i.attr_class))o+="."+a.replace(/"/g,"");var l=_e({},i.text?{text:i.text}:{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{},i.attr_id?{attr_id:i.attr_id}:{},i.attributes),c={};return h0(l).sort((u,d)=>{var[f]=u,[p]=d;return f.localeCompare(p)}).forEach(u=>{var[d,f]=u;return c[vN(d.toString())]=vN(f.toString())}),o+=":",o+=h0(c).map(u=>{var[d,f]=u;return d+'="'+f+'"'}).join("")});return n.join(";")}(function(e){return e.map(n=>{var i,r,s={text:(i=n.$el_text)==null?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)==null?void 0:r.slice(0,2048),attr_class:WU(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return h0(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function vN(t){return t.replace(/"|\\"/g,'\\"')}function WU(t){var e=t.attr__class;return e?Qt(e)?e:m_(e):void 0}let qO=class{constructor(){this.clicks=[]}isRageClick(e,n,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}};var GU=["localhost","127.0.0.1"],Md=t=>{var e=Ae==null?void 0:Ae.createElement("a");return ye(e)?null:(e.href=t,e)},KU=function(t,e){var n,i;e===void 0&&(e="&");var r=[];return Rt(t,function(s,o){ye(s)||ye(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),i=encodeURIComponent(o),r[r.length]=i+"="+n)}),r.join(e)},iv=function(t,e){for(var n,i=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!Qt(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{Pe.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},g_=function(t,e,n){if(!t||!e||!e.length)return t;for(var i=t.split("#"),r=i[0]||"",s=i[1],o=r.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),u=[],d=0;d<c.length;d++){var f=c[d].split("=");Qt(f)&&(e.includes(f[0])?u.push(f[0]+"="+n):u.push(c[d]))}var p=l;return a!=null&&(p+="?"+u.join("&")),s!=null&&(p+="#"+s),p},rv=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},yN=Bn("[AutoCapture]");function pw(t,e){return e.length>t?e.slice(0,t)+"...":e}function qU(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!zy(e));return e}function YU(t,e,n,i){var r=t.tagName.toLowerCase(),s={tag_name:r};$1.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=pw(1024,GO(t)):s.$el_text=pw(1024,Uy(t)));var o=nv(t);o.length>0&&(s.classes=o.filter(function(u){return u!==""})),Rt(t.attributes,function(u){var d;if((!VO(t)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(i==null||!i.includes(u.name))&&!e&&Pd(u.value)&&(d=u.name,!gn(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var f=u.value;u.name==="class"&&(f=m_(f).join(" ")),s["attr__"+u.name]=pw(1024,f)}});for(var a=1,l=1,c=t;c=qU(c);)a++,c.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function XU(t,e){for(var n,i,{e:r,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,c=[t],u=t;u.parentNode&&!ol(u,"body");)BO(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,f=[],p={},g=!1,m=!1;if(Rt(c,S=>{var _=B1(S);S.tagName.toLowerCase()==="a"&&(g=S.getAttribute("href"),g=_&&g&&Pd(g)&&g),dt(nv(S),"ph-no-capture")&&(m=!0),f.push(YU(S,s,o,a));var E=function(C){if(!B1(C))return{};var N={};return Rt(C.attributes,function(R){if(R.name&&R.name.indexOf("data-ph-capture-attribute")===0){var O=R.name.replace("data-ph-capture-attribute-",""),D=R.value;O&&D&&Pd(D)&&(N[O]=D)}}),N}(S);bn(p,E)}),m)return{props:{},explicitNoCapture:m};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?f[0].$el_text=GO(t):f[0].$el_text=Uy(t)),g){var v,y;f[0].attr__href=g;var w=(v=Md(g))==null?void 0:v.host,x=Y==null||(y=Y.location)==null?void 0:y.host;w&&x&&w!==x&&(d=g)}return{props:bn({$event_type:r.type,$ce_version:1},l?{}:{$elements:f},{$elements_chain:HU(f)},(n=f[0])!=null&&n.$el_text?{$el_text:(i=f[0])==null?void 0:i.$el_text}:{},d&&r.type==="click"?{$external_click_url:d}:{},p)}}let JU=class{constructor(e){this.i=!1,this.o=null,this.rageclicks=new qO,this.h=!1,this.instance=e,this.m=null}get S(){var e,n,i=mn(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=(e=i.url_allowlist)==null?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=(n=i.url_ignorelist)==null?void 0:n.map(r=>new RegExp(r)),i}$(){if(this.isBrowserSupported()){if(Y&&Ae){var e=i=>{i=i||(Y==null?void 0:Y.event);try{this.k(i)}catch(r){yN.error("Failed to capture event",r)}};if(an(Ae,"submit",e,{capture:!0}),an(Ae,"change",e,{capture:!0}),an(Ae,"click",e,{capture:!0}),this.S.capture_copied_text){var n=i=>{i=i||(Y==null?void 0:Y.event),this.k(i,hw)};an(Ae,"copy",n,{capture:!0}),an(Ae,"cut",n,{capture:!0})}}}else yN.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[rN]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var n,i=[];return(n=this.m)==null||n.forEach(r=>{var s=Ae==null?void 0:Ae.querySelectorAll(r);s==null||s.forEach(o=>{e===o&&i.push(r)})}),i}get isEnabled(){var e,n,i=(e=this.instance.persistence)==null?void 0:e.props[rN],r=this.o;if(Ll(r)&&!ro(i)&&!this.instance.I())return!1;var s=(n=this.o)!==null&&n!==void 0?n:!!i;return!!this.instance.config.autocapture&&!s}k(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var i,r=zO(e);$O(r)&&(r=r.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.k(e,"$rageclick");var s=n===hw;if(r&&BU(r,e,this.S,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=XU(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(o.$element_selectors=l),n===hw){var c,u=FO(Y==null||(c=Y.getSelection())==null?void 0:c.toString()),d=e.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Wr(Ae==null?void 0:Ae.querySelectorAll)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return di(t)&&isFinite(t)&&Math.floor(t)===t});var bN="0123456789abcdef";let ZU=class F1{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new F1(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+bN.charAt(this.bytes[n]>>>4)+bN.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new F1(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}},QU=class{constructor(){this.P=0,this.R=0,this.T=new eV}generate(){var e=this.generateOrAbort();if(ye(e)){this.P=0;var n=this.generateOrAbort();if(ye(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.P)this.P=e,this.M();else{if(!(e+1e4>this.P))return;this.R++,this.R>4398046511103&&(this.P++,this.M())}return ZU.fromFieldsV7(this.P,Math.trunc(this.R/Math.pow(2,30)),this.R&Math.pow(2,30)-1,this.T.nextUint32())}M(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}};var wN,YO=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};Y&&!ye(Y.crypto)&&crypto.getRandomValues&&(YO=t=>crypto.getRandomValues(t));let eV=class{constructor(){this.C=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.C.length&&(YO(this.C),this.F=0),this.C[this.F++]}};var Ka=()=>tV().toString(),tV=()=>(wN||(wN=new QU)).generate(),kf="",nV=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function iV(t,e){if(e){var n=function(r,s){if(s===void 0&&(s=Ae),kf)return kf;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+Ka();!kf&&a--;){var c=o.slice(a).join("."),u=l+"=1;domain=."+c+";path=/";s.cookie=u+";max-age=3",s.cookie.includes(l)&&(s.cookie=u+";max-age=0",kf=c)}return kf}(t);if(!n){var i=(r=>{var s=r.match(nV);return s?s[0]:""})(t);i!==n&&Pe.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var fo={O:()=>!!Ae,A:function(t){Pe.error("cookieStore error: "+t)},D:function(t){if(Ae){try{for(var e=t+"=",n=Ae.cookie.split(";").filter(s=>s.length),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},L:function(t){var e;try{e=JSON.parse(fo.D(t))||{}}catch{}return e},j:function(t,e,n,i,r){if(Ae)try{var s="",o="",a=iV(Ae.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&Pe.warn("cookieStore warning: large cookie, len="+c.length),Ae.cookie=c,c}catch{return}},N:function(t,e){try{fo.j(t,"",-1,e)}catch{return}}},mw=null,Pn={O:function(){if(!Ll(mw))return mw;var t=!0;if(ye(Y))t=!1;else try{var e="__mplssupport__";Pn.j(e,"xyz"),Pn.D(e)!=='"xyz"'&&(t=!1),Pn.N(e)}catch{t=!1}return t||Pe.error("localStorage unsupported; falling back to cookie store"),mw=t,t},A:function(t){Pe.error("localStorage error: "+t)},D:function(t){try{return Y==null?void 0:Y.localStorage.getItem(t)}catch(e){Pn.A(e)}return null},L:function(t){try{return JSON.parse(Pn.D(t))||{}}catch{}return null},j:function(t,e){try{Y==null||Y.localStorage.setItem(t,JSON.stringify(e))}catch(n){Pn.A(n)}},N:function(t){try{Y==null||Y.localStorage.removeItem(t)}catch(e){Pn.A(e)}}},rV=["distinct_id",Z0,Jf,tv,ev],Um=_e({},Pn,{L:function(t){try{var e={};try{e=fo.L(t)||{}}catch{}var n=bn(e,JSON.parse(Pn.D(t)||"{}"));return Pn.j(t,n),n}catch{}return null},j:function(t,e,n,i,r,s){try{Pn.j(t,e,void 0,void 0,s);var o={};rV.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&fo.j(t,o,n,i,r,s)}catch(a){Pn.A(a)}},N:function(t,e){try{Y==null||Y.localStorage.removeItem(t),fo.N(t,e)}catch(n){Pn.A(n)}}}),Vm={},sV={O:function(){return!0},A:function(t){Pe.error("memoryStorage error: "+t)},D:function(t){return Vm[t]||null},L:function(t){return Vm[t]||null},j:function(t,e){Vm[t]=e},N:function(t){delete Vm[t]}},Zl=null,Gn={O:function(){if(!Ll(Zl))return Zl;if(Zl=!0,ye(Y))Zl=!1;else try{var t="__support__";Gn.j(t,"xyz"),Gn.D(t)!=='"xyz"'&&(Zl=!1),Gn.N(t)}catch{Zl=!1}return Zl},A:function(t){Pe.error("sessionStorage error: ",t)},D:function(t){try{return Y==null?void 0:Y.sessionStorage.getItem(t)}catch(e){Gn.A(e)}return null},L:function(t){try{return JSON.parse(Gn.D(t))||null}catch{}return null},j:function(t,e){try{Y==null||Y.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Gn.A(n)}},N:function(t){try{Y==null||Y.sessionStorage.removeItem(t)}catch(e){Gn.A(e)}}},uu=function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t}({});let oV=class{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.U()?uu.DENIED:this.q}isOptedOut(){return this.consent===uu.DENIED||this.consent===uu.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.B.j(this.H,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:e,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+e}get q(){var e=this.B.D(this.H);return e==="1"?uu.GRANTED:e==="0"?uu.DENIED:uu.PENDING}get B(){if(!this.W){var e=this.S.opt_out_capturing_persistence_type;this.W=e==="localStorage"?Pn:fo;var n=e==="localStorage"?fo:Pn;n.D(this.H)&&(this.W.D(this.H)||this.optInOut(n.D(this.H)==="1"),n.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!IO([hr==null?void 0:hr.doNotTrack,hr==null?void 0:hr.msDoNotTrack,Je.doNotTrack],e=>dt([!0,1,"1","yes"],e))}};var Hm=Bn("[Dead Clicks]"),aV=()=>!0,lV=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property(DO)),i=t.instance.config.capture_dead_clicks;return ro(i)?i:n};let XO=class{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(e,n,i){this.instance=e,this.isEnabled=n,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[DO]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(e){var n,i;(n=Je.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(i=Je.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this.instance,"dead-clicks-autocapture",r=>{r?Hm.error("failed to load script",r):e()})}V(){var e;if(Ae){if(!this.G&&(e=Je.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=mn(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.G=Je.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.G.start(Ae),Hm.info("starting...")}}else Hm.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,Hm.info("stopping..."))}};function pr(t,e,n,i,r){return e>n&&(Pe.warn("min cannot be greater than max."),e=n),di(t)?t>n?(i&&Pe.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(i&&Pe.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):t:(i&&Pe.warn(i+" must be a number. using max or fallback. max: "+n+", fallback: "+r),pr(r||n,e,n,i))}let JO=class{constructor(e){this.K={},this.Y=()=>{Object.keys(this.K).forEach(n=>{var i=this.X(n)+this.Z;i>=this.tt?delete this.K[n]:this.it(n,i)})},this.X=n=>this.K[String(n)],this.it=(n,i)=>{this.K[String(n)]=i},this.consumeRateLimit=n=>{var i,r=(i=this.X(n))!==null&&i!==void 0?i:this.tt;if((r=Math.max(r-1,0))===0)return!0;this.it(n,r);var s,o=r===0;return o&&((s=this.et)==null||s.call(this,n)),o},this.rt=e,this.et=this.rt.et,this.tt=pr(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=pr(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=pr(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}};var Wm=Bn("[ExceptionAutocapture]");let cV=class{constructor(e){var n,i,r;this.nt=()=>{var s;if(Y&&this.isEnabled&&(s=Je.__PosthogExtensions__)!=null&&s.errorWrappingFunctions){var o=Je.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=Je.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=Je.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=o(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=a(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=l(this.captureException.bind(this)))}catch(c){Wm.error("failed to start",c),this.ht()}}},this._instance=e,this.dt=!((n=this._instance.persistence)==null||!n.props[sN]),this.S=this.vt(),this.ct=new JO({refillRate:(i=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&i!==void 0?i:1,bucketSize:(r=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&r!==void 0?r:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return mn(e)?n=_e({},n,e):(ye(e)?this.dt:e)&&(n=_e({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Wm.info("enabled"),this.J(this.nt))}J(e){var n,i;(n=Je.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(i=Je.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"exception-autocapture",r=>{if(r)return Wm.error("failed to load script",r);e()})}ht(){var e,n,i;(e=this.ot)==null||e.call(this),this.ot=void 0,(n=this.lt)==null||n.call(this),this.lt=void 0,(i=this.ut)==null||i.call(this),this.ut=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.dt=!!n||!1,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[sN]:this.dt}),this.startIfEnabled()}captureException(e){var n,i=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=i+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var r=(n=e.$exception_list[0].type)!==null&&n!==void 0?n:"Exception";this.ct.consumeRateLimit(r)?Wm.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}};function ZO(t){return!ye(Event)&&QO(t,Event)}function QO(t,e){try{return t instanceof e}catch{return!1}}function e5(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return QO(t,Error)}}function m0(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function gw(t){return m0(t,"DOMError")}var xN=/\(error: (.*)\)/,SN=50,Du="?";function vw(t,e,n,i){var r={platform:"web:javascript",filename:t,function:e==="<anonymous>"?Du:e,in_app:!0};return ye(n)||(r.lineno=n),ye(i)||(r.colno=i),r}var uV=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,dV=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,fV=/\((\S*)(?::(\d+))(?::(\d+))\)/,hV=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,pV=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,mV=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.sort((r,s)=>r[0]-s[0]).map(r=>r[1]);return function(r,s){s===void 0&&(s=0);for(var o=[],a=r.split(`
`),l=s;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var u=xN.test(c)?c.replace(xN,"$1"):c;if(!u.match(/\S*Error: /)){for(var d of i){var f=d(u);if(f){o.push(f);break}}if(o.length>=SN)break}}}return function(p){if(!p.length)return[];var g=Array.from(p);return g.reverse(),g.slice(0,SN).map(m=>_e({},m,{filename:m.filename||gV(g).filename,function:m.function||Du}))}(o)}}([30,t=>{var e=uV.exec(t);if(e){var[,n,i,r]=e;return vw(n,Du,+i,+r)}var s=dV.exec(t);if(s){if(s[2]&&s[2].indexOf("eval")===0){var o=fV.exec(s[2]);o&&(s[2]=o[1],s[3]=o[2],s[4]=o[3])}var[a,l]=_N(s[1]||Du,s[2]);return vw(l,a,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}}],[50,t=>{var e=hV.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=pV.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var i=e[3],r=e[1]||Du;return[r,i]=_N(r,i),vw(i,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function gV(t){return t[t.length-1]||{}}var Gm,kN,yw,_N=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,i=t.indexOf("safari-web-extension")!==-1;return n||i?[t.indexOf("@")!==-1?t.split("@")[0]:Du,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},vV=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function v_(t,e){e===void 0&&(e=0);var n=t.stacktrace||t.stack||"",i=function(o){return o&&yV.test(o.message)?1:0}(t);try{var r=mV,s=function(o,a){var l=function(c){var u=globalThis._posthogChunkIds;if(!u)return{};var d=Object.keys(u);return yw&&d.length===kN||(kN=d.length,yw=d.reduce((f,p)=>{Gm||(Gm={});var g=Gm[p];if(g)f[g[0]]=g[1];else for(var m=c(p),v=m.length-1;v>=0;v--){var y=m[v],w=y==null?void 0:y.filename,x=u[p];if(w&&x){f[w]=x,Gm[p]=[w,x];break}}return f},{})),yw}(a);return o.forEach(c=>{c.filename&&(c.chunk_id=l[c.filename])}),o}(r(n,i),r);return s.slice(0,s.length-e)}catch{}return[]}var yV=/Minified React error #\d+;/i;function bV(t,e){var n,i,r=v_(t),s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)!==null&&i!==void 0&&i;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(t),stacktrace:{frames:r,type:"raw"},mechanism:{handled:s,synthetic:o}}}function t5(t,e){var n=bV(t,e);return t.cause&&e5(t.cause)&&t.cause!==t?[n,...t5(t.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[n]}function bw(t,e){return{$exception_list:t5(t,e),$exception_level:"error"}}function ww(t,e){var n,i,r,s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,a={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(r=e==null?void 0:e.defaultExceptionType)!==null&&r!==void 0?r:"Error",value:t||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:s,synthetic:o}};if(e!=null&&e.syntheticException){var l=v_(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function wV(t){return gn(t)&&!E1(t)&&PU.indexOf(t)>=0}function xV(t,e){var n,i,r=(n=e==null?void 0:e.handled)===null||n===void 0||n,s=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,o=e!=null&&e.overrideExceptionType?e.overrideExceptionType:ZO(t)?t.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(u,d){d===void 0&&(d=40);var f=Object.keys(u);if(f.sort(),!f.length)return"[object has no keys]";for(var p=f.length;p>0;p--){var g=f.slice(0,p).join(", ");if(!(g.length>d))return p===f.length||g.length<=d?g:g.slice(0,d)+"..."}return""}(t),l={type:o,value:a,mechanism:{handled:r,synthetic:s}};if(e!=null&&e.syntheticException){var c=v_(e==null?void 0:e.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:wV(t.level)?t.level:"error"}}function SV(t,e){var{error:n,event:i}=t,r={$exception_list:[]},s=n||i;if(gw(s)||function(f){return m0(f,"DOMException")}(s)){var o=s;if(function(f){return"stack"in f}(s))r=bw(s,e);else{var a=o.name||(gw(o)?"DOMError":"DOMException"),l=o.message?a+": "+o.message:a;r=ww(l,_e({},e,{overrideExceptionType:gw(o)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in o&&(r.$exception_DOMException_code=""+o.code),r}if(function(f){return m0(f,"ErrorEvent")}(s)&&s.error)return bw(s.error,e);if(e5(s))return bw(s,e);if(function(f){return m0(f,"Object")}(s)||ZO(s))return xV(s,e);if(ye(n)&&gn(i)){var c="Error",u=i,d=i.match(vV);return d&&(c=d[1],u=d[2]),ww(u,_e({},e,{overrideExceptionType:c,defaultExceptionMessage:u}))}return ww(s,e)}function CN(t,e,n){try{if(!(e in t))return()=>{};var i=t[e],r=n(i);return Wr(r)&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=r,()=>{t[e]=i}}catch{return()=>{}}}let kV=class{constructor(e){var n;this._instance=e,this.ft=(Y==null||(n=Y.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(Pe.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.gt&&this.gt(),this.gt=void 0,Pe.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(Y&&Y.history){var i=this;(e=Y.history.pushState)!=null&&e.__posthog_wrapped__||CN(Y.history,"pushState",r=>function(s,o,a){r.call(this,s,o,a),i._t("pushState")}),(n=Y.history.replaceState)!=null&&n.__posthog_wrapped__||CN(Y.history,"replaceState",r=>function(s,o,a){r.call(this,s,o,a),i._t("replaceState")}),this.bt()}}_t(e){try{var n,i=Y==null||(n=Y.location)==null?void 0:n.pathname;if(!i)return;i!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ft=i}catch(r){Pe.error("Error capturing "+e+" pageview",r)}}bt(){if(!this.gt){var e=()=>{this._t("popstate")};an(Y,"popstate",e),this.gt=()=>{Y&&Y.removeEventListener("popstate",e)}}}};function sv(t){var e,n;return((e=JSON.stringify(t,(n=[],function(i,r){if(mn(r)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(r)?"[Circular]":(n.push(r),r)}return r})))==null?void 0:e.length)||0}function z1(t,e){if(e===void 0&&(e=66060288e-1),t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[z1({size:sv(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),z1({size:sv(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var Ro=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(Ro||{}),ls=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(ls||{}),U1="[SessionRecording]",V1="redacted",Km={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},_V=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],CV=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],EV=["/s/","/e/","/i/"];function EN(t,e,n,i){if(At(t))return t;var r=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return gn(r)&&(r=parseInt(r)),r>n?U1+" "+i+" body too large to record ("+r+" bytes)":t}function AN(t,e){if(At(t))return t;var n=t;return Pd(n,!1)||(n=U1+" "+e+" body "+V1),Rt(CV,i=>{var r,s;(r=n)!=null&&r.length&&((s=n)==null?void 0:s.indexOf(i))!==-1&&(n=U1+" "+e+" body "+V1+" as might contain: "+i)}),n}var AV=(t,e)=>{var n,i,r,s={payloadSizeLimitBytes:Km.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...Km.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...Km.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,c=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),f=>(f!=null&&f.requestBody&&(f.requestBody=EN(f.requestBody,f.requestHeaders,r,"Request")),f!=null&&f.responseBody&&(f.responseBody=EN(f.responseBody,f.responseHeaders,r,"Response")),f)),u=f=>{return c(((m,v)=>{var y,w=Md(m.name),x=v.indexOf("http")===0?(y=Md(v))==null?void 0:y.pathname:v;x==="/"&&(x="");var S=w==null?void 0:w.pathname.replace(x||"","");if(!(w&&S&&EV.some(_=>S.indexOf(_)===0)))return m})((g=(p=f).requestHeaders,At(g)||Rt(Object.keys(g??{}),m=>{_V.includes(m.toLowerCase())&&(g[m]=V1)}),p),t.api_host));var p,g},d=Wr(t.session_recording.maskNetworkRequestFn);return d&&Wr(t.session_recording.maskCapturedNetworkRequestFn)&&Pe.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=f=>{var p=t.session_recording.maskNetworkRequestFn({url:f.name});return _e({},f,{name:p==null?void 0:p.url})}),s.maskRequestFn=Wr(t.session_recording.maskCapturedNetworkRequestFn)?f=>{var p,g=u(f);return g&&(p=t.session_recording.maskCapturedNetworkRequestFn==null?void 0:t.session_recording.maskCapturedNetworkRequestFn(g))!==null&&p!==void 0?p:void 0}:f=>function(p){if(!ye(p))return p.requestBody=AN(p.requestBody,"Request"),p.responseBody=AN(p.responseBody,"Response"),p}(u(f)),_e({},Km,s,{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};let NV=class{constructor(e,n){var i,r;n===void 0&&(n={}),this.yt={},this.wt=s=>{if(!this.yt[s]){var o,a;this.yt[s]=!0;var l=this.St(s);(o=(a=this.rt).onBlockedNode)==null||o.call(a,s,l)}},this.$t=s=>{var o=this.St(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[s,o]},this.St=s=>this._rrweb.mirror.getNode(s),this.kt=s=>{var o,a,l,c,u,d,f,p;return((o=(a=s.removes)==null?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(c=s.attributes)==null?void 0:c.length)!==null&&l!==void 0?l:0)+((u=(d=s.texts)==null?void 0:d.length)!==null&&u!==void 0?u:0)+((f=(p=s.adds)==null?void 0:p.length)!==null&&f!==void 0?f:0)},this.throttleMutations=s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.kt(o);o.attributes&&(o.attributes=o.attributes.filter(c=>{var[u]=this.$t(c.id);return!this.ct.consumeRateLimit(u)&&c}));var l=this.kt(o);return l!==0||a===l?s:void 0},this._rrweb=e,this.rt=n,this.ct=new JO({bucketSize:(i=this.rt.bucketSize)!==null&&i!==void 0?i:100,refillRate:(r=this.rt.refillRate)!==null&&r!==void 0?r:10,refillInterval:1e3,et:this.wt})}};var Gr=Uint8Array,Ki=Uint16Array,Rd=Uint32Array,y_=new Gr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),b_=new Gr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),NN=new Gr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),n5=function(t,e){for(var n=new Ki(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new Rd(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},i5=n5(y_,2),PV=i5[0],H1=i5[1];PV[28]=258,H1[258]=28;for(var PN=n5(b_,0)[1],r5=new Ki(32768),Ht=0;Ht<32768;++Ht){var Ql=(43690&Ht)>>>1|(21845&Ht)<<1;Ql=(61680&(Ql=(52428&Ql)>>>2|(13107&Ql)<<2))>>>4|(3855&Ql)<<4,r5[Ht]=((65280&Ql)>>>8|(255&Ql)<<8)>>>1}var kh=function(t,e,n){for(var i=t.length,r=0,s=new Ki(e);r<i;++r)++s[t[r]-1];var o,a=new Ki(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;for(o=new Ki(i),r=0;r<i;++r)o[r]=r5[a[t[r]-1]++]>>>15-t[r];return o},jc=new Gr(288);for(Ht=0;Ht<144;++Ht)jc[Ht]=8;for(Ht=144;Ht<256;++Ht)jc[Ht]=9;for(Ht=256;Ht<280;++Ht)jc[Ht]=7;for(Ht=280;Ht<288;++Ht)jc[Ht]=8;var ov=new Gr(32);for(Ht=0;Ht<32;++Ht)ov[Ht]=5;var MV=kh(jc,9),RV=kh(ov,5),s5=function(t){return(t/8>>0)+(7&t&&1)},o5=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Ki?Ki:t instanceof Rd?Rd:Gr)(n-e);return i.set(t.subarray(e,n)),i},Ao=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},_f=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},xw=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new Gr(0),0];if(r==1){var o=new Gr(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(_,E){return _.f-E.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var f=s[0].s;for(i=1;i<r;++i)s[i].s>f&&(f=s[i].s);var p=new Ki(f+1),g=W1(n[u-1],p,0);if(g>e){i=0;var m=0,v=g-e,y=1<<v;for(s.sort(function(_,E){return p[E.s]-p[_.s]||_.f-E.f});i<r;++i){var w=s[i].s;if(!(p[w]>e))break;m+=y-(1<<g-p[w]),p[w]=e}for(m>>>=v;m>0;){var x=s[i].s;p[x]<e?m-=1<<e-p[x]++-1:++i}for(;i>=0&&m;--i){var S=s[i].s;p[S]==e&&(--p[S],++m)}g=e}return[new Gr(p),g]},W1=function(t,e,n){return t.s==-1?Math.max(W1(t.l,e,n+1),W1(t.r,e,n+1)):e[t.s]=n},MN=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ki(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},Cf=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},G1=function(t,e,n){var i=n.length,r=s5(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},RN=function(t,e,n,i,r,s,o,a,l,c,u){Ao(e,u++,n),++r[256];for(var d=xw(r,15),f=d[0],p=d[1],g=xw(s,15),m=g[0],v=g[1],y=MN(f),w=y[0],x=y[1],S=MN(m),_=S[0],E=S[1],C=new Ki(19),N=0;N<w.length;++N)C[31&w[N]]++;for(N=0;N<_.length;++N)C[31&_[N]]++;for(var R=xw(C,7),O=R[0],D=R[1],j=19;j>4&&!O[NN[j-1]];--j);var q,$,K,J,Q=c+5<<3,V=Cf(r,jc)+Cf(s,ov)+o,F=Cf(r,f)+Cf(s,m)+o+14+3*j+Cf(C,O)+(2*C[16]+3*C[17]+7*C[18]);if(Q<=V&&Q<=F)return G1(e,u,t.subarray(l,l+c));if(Ao(e,u,1+(F<V)),u+=2,F<V){q=kh(f,p),$=f,K=kh(m,v),J=m;var re=kh(O,D);for(Ao(e,u,x-257),Ao(e,u+5,E-1),Ao(e,u+10,j-4),u+=14,N=0;N<j;++N)Ao(e,u+3*N,O[NN[N]]);u+=3*j;for(var pe=[w,_],Z=0;Z<2;++Z){var ce=pe[Z];for(N=0;N<ce.length;++N){var B=31&ce[N];Ao(e,u,re[B]),u+=O[B],B>15&&(Ao(e,u,ce[N]>>>5&127),u+=ce[N]>>>12)}}}else q=MV,$=jc,K=RV,J=ov;for(N=0;N<a;++N)if(i[N]>255){B=i[N]>>>18&31,_f(e,u,q[B+257]),u+=$[B+257],B>7&&(Ao(e,u,i[N]>>>23&31),u+=y_[B]);var L=31&i[N];_f(e,u,K[L]),u+=J[L],L>3&&(_f(e,u,i[N]>>>5&8191),u+=b_[L])}else _f(e,u,q[i[N]]),u+=$[i[N]];return _f(e,u,q[256]),u+$[256]},TV=new Rd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),OV=function(){for(var t=new Rd(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),IV=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=OV[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},jV=function(t,e,n,i,r){return function(s,o,a,l,c,u){var d=s.length,f=new Gr(l+d+5*(1+Math.floor(d/7e3))+c),p=f.subarray(l,f.length-c),g=0;if(!o||d<8)for(var m=0;m<=d;m+=65535){var v=m+65535;v<d?g=G1(p,g,s.subarray(m,v)):(p[m]=u,g=G1(p,g,s.subarray(m,d)))}else{for(var y=TV[o-1],w=y>>>13,x=8191&y,S=(1<<a)-1,_=new Ki(32768),E=new Ki(S+1),C=Math.ceil(a/3),N=2*C,R=function(We){return(s[We]^s[We+1]<<C^s[We+2]<<N)&S},O=new Rd(25e3),D=new Ki(288),j=new Ki(32),q=0,$=0,K=(m=0,0),J=0,Q=0;m<d;++m){var V=R(m),F=32767&m,re=E[V];if(_[F]=re,E[V]=F,J<=m){var pe=d-m;if((q>7e3||K>24576)&&pe>423){g=RN(s,p,0,O,D,j,$,K,Q,m-Q,g),K=q=$=0,Q=m;for(var Z=0;Z<286;++Z)D[Z]=0;for(Z=0;Z<30;++Z)j[Z]=0}var ce=2,B=0,L=x,U=F-re&32767;if(pe>2&&V==R(m-U))for(var k=Math.min(w,pe)-1,P=Math.min(32767,m),I=Math.min(258,pe);U<=P&&--L&&F!=re;){if(s[m+ce]==s[m+ce-U]){for(var T=0;T<I&&s[m+T]==s[m+T-U];++T);if(T>ce){if(ce=T,B=U,T>k)break;var X=Math.min(U,T-2),G=0;for(Z=0;Z<X;++Z){var ie=m-U+Z+32768&32767,ee=ie-_[ie]+32768&32767;ee>G&&(G=ee,re=ie)}}}U+=(F=re)-(re=_[F])+32768&32767}if(B){O[K++]=268435456|H1[ce]<<18|PN[B];var Re=31&H1[ce],Ve=31&PN[B];$+=y_[Re]+b_[Ve],++D[257+Re],++j[Ve],J=m+ce,++q}else O[K++]=s[m],++D[s[m]]}}g=RN(s,p,u,O,D,j,$,K,Q,m-Q,g)}return o5(f,0,l+s5(g)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!0)},K1=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},DV=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&K1(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},LV=function(t){return 10+(t.filename&&t.filename.length+1||0)};function a5(t,e){e===void 0&&(e={});var n=IV(),i=t.length;n.p(t);var r=jV(t,e,LV(e),8),s=r.length;return DV(r,e),K1(r,s-8,n.d()),K1(r,s-4,i),r}function l5(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new Gr(t.length+(t.length>>>1)),r=0,s=function(c){i[r++]=c},o=0;o<n;++o){if(r+5>i.length){var a=new Gr(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return o5(i,0,r)}function $V(t,e){return function(n){for(var i=0,r=0;r<n.length;r++)i=(i<<5)-i+n.charCodeAt(r),i|=0;return Math.abs(i)}(t)%100<pr(100*e,0,100)}var bl="disabled",w_="sampled",av="active",Dc="buffering",x_="paused",S_="trigger",ho=S_+"_activated",pi=S_+"_pending",wo=S_+"_"+bl;function TN(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class c5{constructor(e){this.xt=e}triggerStatus(e){var n=this.xt.map(i=>i.triggerStatus(e));return n.includes(ho)?ho:n.includes(pi)?pi:wo}stop(){this.xt.forEach(e=>e.stop())}}class u5{constructor(e){this.xt=e}triggerStatus(e){var n=new Set;for(var i of this.xt)n.add(i.triggerStatus(e));switch(n.delete(wo),n.size){case 0:return wo;case 1:return Array.from(n)[0];default:return pi}}stop(){this.xt.forEach(e=>e.stop())}}class BV{triggerStatus(){return pi}stop(){}}class FV{constructor(e){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var n,i;this.Et=((n=e.sessionRecording)==null?void 0:n.urlTriggers)||[],this.It=((i=e.sessionRecording)==null?void 0:i.urlBlocklist)||[]}Pt(e){var n;return this.Et.length===0?wo:((n=this._instance)==null?void 0:n.get_property(M1))===e?ho:pi}triggerStatus(e){var n=this.Pt(e),i=n===ho?ho:n===pi?pi:wo;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:i}),i}checkUrlTriggerConditions(e,n,i){if(Y!==void 0&&Y.location.href){var r=Y.location.href,s=this.urlBlocked,o=TN(r,this.It);s&&o||(o&&!s?e():!o&&s&&n(),TN(r,this.Et)&&i("url"))}}stop(){}}class zV{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=e}triggerStatus(){var e=pi;return At(this.linkedFlag)&&(e=wo),this.linkedFlagSeen&&(e=ho),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,n){var i;if(this.linkedFlag=((i=e.sessionRecording)==null?void 0:i.linkedFlag)||null,!At(this.linkedFlag)&&!this.linkedFlagSeen){var r=gn(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,s=gn(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((o,a)=>{var l=!1;if(mn(a)&&r in a){var c=a[r];l=ro(c)?c===!0:s?c===s:!!c}this.linkedFlagSeen=l,l&&n(r,s)})}}stop(){this.Rt()}}let UV=class{constructor(e){this.Tt=[],this._instance=e}onRemoteConfig(e){var n;this.Tt=((n=e.sessionRecording)==null?void 0:n.eventTriggers)||[]}Mt(e){var n;return this.Tt.length===0?wo:((n=this._instance)==null?void 0:n.get_property(R1))===e?ho:pi}triggerStatus(e){var n=this.Mt(e),i=n===ho?ho:n===pi?pi:wo;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:i}),i}stop(){}};function VV(t){return t.isRecordingEnabled?Dc:bl}function HV(t){if(!t.receivedFlags)return Dc;if(!t.isRecordingEnabled)return bl;if(t.urlTriggerMatching.urlBlocked)return x_;var e=t.isSampled===!0,n=new c5([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId);return e?w_:n===ho?av:n===pi?Dc:t.isSampled===!1?bl:av}function WV(t){if(!t.receivedFlags)return Dc;if(!t.isRecordingEnabled)return bl;if(t.urlTriggerMatching.urlBlocked)return x_;var e=new u5([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId),n=e!==wo,i=ro(t.isSampled);return n&&e===pi?Dc:n&&e===wo||i&&!t.isSampled?bl:t.isSampled===!0?w_:av}var Qf="[SessionRecording]",ri=Bn(Qf);function qm(){var t;return Je==null||(t=Je.__PosthogExtensions__)==null||(t=t.rrweb)==null?void 0:t.record}var GV=3e5,KV=[ls.MouseMove,ls.MouseInteraction,ls.Scroll,ls.ViewportResize,ls.Input,ls.TouchMove,ls.MediaInteraction,ls.Drag],ON=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function ec(t){return function(e,n){for(var i="",r=0;r<e.length;){var s=e[r++];i+=String.fromCharCode(s)}return i}(a5(l5(JSON.stringify(t))))}function IN(t){return t.type===Ro.Custom&&t.data.tag==="sessionIdle"}class qV{get sessionId(){return this.Ct}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw new Error(Qf+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var e,n;return this.Lt.triggerStatus(this.sessionId)===pi?6e4:(e=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:GV}get jt(){var e=this._instance.get_property(Jf);return ro(e)?e:null}get Nt(){var e,n,i=(e=this.C)==null?void 0:e.data[((n=this.C)==null?void 0:n.data.length)-1],{sessionStartTimestamp:r}=this.At.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get zt(){var e=!!this._instance.get_property(P1),n=!this._instance.config.disable_session_recording;return Y&&e&&n}get Ut(){var e=!!this._instance.get_property(lN),n=this._instance.config.enable_recording_console_log;return n??e}get qt(){var e,n,i,r,s,o,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(dN),c=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,u=(i=(r=a==null?void 0:a.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&i!==void 0?i:4,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:.4;if(typeof d=="string"){var f=parseFloat(d);d=isNaN(f)?.4:f}return{enabled:c,fps:pr(u,0,12,"canvas recording fps",4),quality:pr(d,0,1,"canvas recording quality",.4)}}get Bt(){var e,n,i=this._instance.get_property(cN),r={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=mn(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(ro(a)?a:i!=null&&i.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get Ht(){var e,n,i,r,s,o,a=this._instance.get_property(uN),l={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(i=this._instance.config.session_recording)==null?void 0:i.blockSelector},c=(r=l==null?void 0:l.maskAllInputs)!==null&&r!==void 0?r:a==null?void 0:a.maskAllInputs,u=(s=l==null?void 0:l.maskTextSelector)!==null&&s!==void 0?s:a==null?void 0:a.maskTextSelector,d=(o=l==null?void 0:l.blockSelector)!==null&&o!==void 0?o:a==null?void 0:a.blockSelector;return ye(c)&&ye(u)&&ye(d)?void 0:{maskAllInputs:c==null||c,maskTextSelector:u,blockSelector:d}}get Wt(){var e=this._instance.get_property(fN);return di(e)?e:null}get Gt(){var e=this._instance.get_property(hN);return di(e)?e:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.jt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):Dc}constructor(e){if(this.Vt=VV,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.Lt=new BV,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(Ae!=null&&Ae.visibilityState){var r="window "+Ae.visibilityState;this.ui(r,{})}},this._instance=e,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw ri.error("started without valid sessionManager"),new Error(Qf+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(Qf+" cannot be used with __preview_experimental_cookieless_mode.");this.Xt=new zV(this._instance),this.Kt=new FV(this._instance),this.Yt=new UV(this._instance);var{sessionId:n,windowId:i}=this.At.checkAndGetSessionAndWindowId();this.Ct=n,this.fi=i,this.C=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&ri.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.zt?(this.gi(e),an(Y,"beforeunload",this.oi),an(Y,"offline",this.li),an(Y,"online",this.hi),an(Y,"visibilitychange",this.di),this.mi(),this.bi(),At(this.ii)&&(this.ii=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var i=n!=null&&n.properties.$current_url?this.yi(n==null?void 0:n.properties.$current_url):"";if(!i)return;this.ui("$pageview",{href:i})}}catch(r){ri.error("Could not add $pageview to rrweb session",r)}})),this.ei||(this.ei=this.At.onSessionId((n,i,r)=>{var s,o;r&&(this.ui("$session_id_change",{sessionId:n,windowId:i,changeReason:r}),(s=this._instance)==null||(s=s.persistence)==null||s.unregister(R1),(o=this._instance)==null||(o=o.persistence)==null||o.unregister(M1))}))):this.stopRecording()}stopRecording(){var e,n,i,r;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,Y==null||Y.removeEventListener("beforeunload",this.oi),Y==null||Y.removeEventListener("offline",this.li),Y==null||Y.removeEventListener("online",this.hi),Y==null||Y.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),(e=this.ii)==null||e.call(this),this.ii=void 0,(n=this.ni)==null||n.call(this),this.ni=void 0,(i=this.ei)==null||i.call(this),this.ei=void 0,(r=this.si)==null||r.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),ri.info("stopped"))}Si(){var e;(e=this._instance.persistence)==null||e.unregister(Jf)}$i(e){var n,i=this.Ct!==e,r=this.Wt;if(di(r)){var s=this.jt,o=i||!ro(s),a=o?$V(e,r):s;o&&(a?this.ki(w_):ri.warn("Sample rate ("+r+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:r,isSampled:a})),(n=this._instance.persistence)==null||n.register({[Jf]:a})}else this.Si()}onRemoteConfig(e){var n,i,r,s;this.ui("$remote_config_received",e),this.xi(e),(n=e.sessionRecording)!=null&&n.endpoint&&(this.vi=(s=e.sessionRecording)==null?void 0:s.endpoint),this.mi(),((i=e.sessionRecording)==null?void 0:i.triggerMatchType)==="any"?(this.Vt=HV,this.Lt=new c5([this.Yt,this.Kt])):(this.Vt=WV,this.Lt=new u5([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(r=e.sessionRecording)==null?void 0:r.triggerMatchType}),this.Kt.onRemoteConfig(e),this.Yt.onRemoteConfig(e),this.Xt.onRemoteConfig(e,(o,a)=>{this.ki("linked_flag_matched",{flag:o,variant:a})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){di(this.Wt)&&At(this.si)&&(this.si=this.At.onSessionId(e=>{this.$i(e)}))}xi(e){if(this._instance.persistence){var n,i=this._instance.persistence,r=()=>{var s,o,a,l,c,u,d,f,p,g=(s=e.sessionRecording)==null?void 0:s.sampleRate,m=At(g)?null:parseFloat(g);At(m)&&this.Si();var v=(o=e.sessionRecording)==null?void 0:o.minimumDurationMilliseconds;i.register({[P1]:!!e.sessionRecording,[lN]:(a=e.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[cN]:_e({capturePerformance:e.capturePerformance},(l=e.sessionRecording)==null?void 0:l.networkPayloadCapture),[uN]:(c=e.sessionRecording)==null?void 0:c.masking,[dN]:{enabled:(u=e.sessionRecording)==null?void 0:u.recordCanvas,fps:(d=e.sessionRecording)==null?void 0:d.canvasFps,quality:(f=e.sessionRecording)==null?void 0:f.canvasQuality},[fN]:m,[hN]:ye(v)?null:v,[pN]:(p=e.sessionRecording)==null?void 0:p.scriptConfig})};r(),(n=this.ri)==null||n.call(this),this.ri=this.At.onSessionId(r)}}log(e,n){var i;n===void 0&&(n="log"),(i=this._instance.sessionRecording)==null||i.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}gi(e){if(!ye(Object.assign)&&!ye(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),qm()?this.Ei():(n=Je.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.Ii,i=>{if(i)return ri.error("could not load recorder",i);this.Ei()}),ri.info("starting"),this.status===av&&this.ki(e||"recording_initialized")}}get Ii(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(pN))==null?void 0:e.script)||"recorder"}Pi(e){var n;return e.type===3&&KV.indexOf((n=e.data)==null?void 0:n.source)!==-1}Ri(e){var n=this.Pi(e);n||this.Zt||e.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.C.data.length,bufferSize:this.C.size}),this.ai());var i=!1;if(n&&(this.ti=e.timestamp,this.Zt)){var r=this.Zt==="unknown";this.Zt=!1,r||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)}if(!this.Zt){var{windowId:s,sessionId:o}=this.At.checkAndGetSessionAndWindowId(!n,e.timestamp),a=this.Ct!==o,l=this.fi!==s;this.fi=s,this.Ct=o,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this.Ti()}}Mi(e){try{return e.rrwebMethod(),!0}catch(n){return this.Qt.length<10?this.Qt.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):ri.warn("could not emit queued rrweb event.",n,e),!1}}ui(e,n){return this.Mi(ON(()=>qm().addCustomEvent(e,n)))}Ci(){return this.Mi(ON(()=>qm().takeFullSnapshot()))}Ei(){var e,n,i,r,s={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},o=this._instance.config.session_recording;for(var[a,l]of Object.entries(o||{}))a in s&&(a==="maskInputOptions"?s.maskInputOptions=_e({password:!0},l):s[a]=l);this.qt&&this.qt.enabled&&(s.recordCanvas=!0,s.sampling={canvas:this.qt.fps},s.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(s.maskAllInputs=(n=this.Ht.maskAllInputs)===null||n===void 0||n,s.maskTextSelector=(i=this.Ht.maskTextSelector)!==null&&i!==void 0?i:void 0,s.blockSelector=(r=this.Ht.blockSelector)!==null&&r!==void 0?r:void 0);var c=qm();if(c){this.Fi=(e=this.Fi)!==null&&e!==void 0?e:new NV(c,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(d,f)=>{var p="Too many mutations on node '"+d+"'. Rate limiting. This could be due to SVG animations or something similar";ri.info(p,{node:f}),this.log(Qf+" "+p,"warn")}});var u=this.Oi();this.ci=c(_e({emit:d=>{this.onRRwebEmit(d)},plugins:u},s)),this.ti=Date.now(),this.Zt=ro(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:s,activePlugins:u.map(d=>d==null?void 0:d.name)}),this.ui("$posthog_config",{config:this._instance.config})}else ri.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),this.Zt!==!0){var e=this.Dt;e&&(this.wi=setInterval(()=>{this.Ci()},e))}}Oi(){var e,n,i=[],r=(e=Je.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;r&&this.Ut&&i.push(r());var s=(n=Je.__PosthogExtensions__)==null||(n=n.rrwebPlugins)==null?void 0:n.getRecordNetworkPlugin;return this.Bt&&Wr(s)&&(!GU.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?i.push(s(AV(this._instance.config,this.Bt))):ri.info("NetworkCapture not started because we are on localhost.")),i}onRRwebEmit(e){var n;if(this.Ai(),e&&mn(e)){if(e.type===Ro.Meta){var i=this.yi(e.data.href);if(this.Di=i,!i)return;e.data.href=i}else this.Li();if(this.Kt.checkUrlTriggerConditions(()=>this.ji(),()=>this.Ni(),f=>this.zi(f)),!this.Kt.urlBlocked||(r=e).type===Ro.Custom&&r.data.tag==="recording paused"){var r;e.type===Ro.FullSnapshot&&this.Ti(),e.type===Ro.FullSnapshot&&this.Jt&&this.Lt.triggerStatus(this.sessionId)===pi&&this.pi();var s=this.Fi?this.Fi.throttleMutations(e):e;if(s){var o=function(f){var p=f;if(p&&mn(p)&&p.type===6&&mn(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var g=[],m=0;m<p.data.payload.payload.length;m++)p.data.payload.payload[m]&&p.data.payload.payload[m].length>2e3?g.push(p.data.payload.payload[m].slice(0,2e3)+"...[truncated]"):g.push(p.data.payload.payload[m]);return p.data.payload.payload=g,f}return f}(s);if(this.Ri(o),this.Zt!==!0||IN(o)){if(IN(o)){var a=o.data.payload;if(a){var l=a.lastActivityTimestamp,c=a.threshold;o.timestamp=l+c}}var u=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(f){if(sv(f)<1024)return f;try{if(f.type===Ro.FullSnapshot)return _e({},f,{data:ec(f.data),cv:"2024-10"});if(f.type===Ro.IncrementalSnapshot&&f.data.source===ls.Mutation)return _e({},f,{cv:"2024-10",data:_e({},f.data,{texts:ec(f.data.texts),attributes:ec(f.data.attributes),removes:ec(f.data.removes),adds:ec(f.data.adds)})});if(f.type===Ro.IncrementalSnapshot&&f.data.source===ls.StyleSheetRule)return _e({},f,{cv:"2024-10",data:_e({},f.data,{adds:f.data.adds?ec(f.data.adds):void 0,removes:f.data.removes?ec(f.data.removes):void 0})})}catch(p){ri.error("could not compress event - will use uncompressed event",p)}return f}(o):o,d={$snapshot_bytes:sv(u),$snapshot_data:u,$session_id:this.Ct,$window_id:this.fi};this.status!==bl?this.Ui(d):this.pi()}}}}}Li(){if(!this._instance.config.capture_pageview&&Y){var e=this.yi(Y.location.href);this.Di!==e&&(this.ui("$url_changed",{href:e}),this.Di=e)}}Ai(){if(this.Qt.length){var e=[...this.Qt];this.Qt=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.Mi(n)})}}yi(e){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))==null?void 0:i.url}return e}pi(){return this.C={size:0,data:[],sessionId:this.Ct,windowId:this.fi},this.C}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var e=this.Gt,n=this.Nt,i=di(n)&&n>=0,r=di(e)&&i&&n<e;return this.status===Dc||this.status===x_||this.status===bl||r?(this.qi=setTimeout(()=>{this.ai()},2e3),this.C):(this.C.data.length>0&&z1(this.C).forEach(s=>{this.Bi({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId,$lib:"web",$lib_version:Io.LIB_VERSION})}),this.pi())}Ui(e){var n,i=2+(((n=this.C)==null?void 0:n.data.length)||0);!this.Zt&&(this.C.size+e.$snapshot_bytes+i>943718.4||this.C.sessionId!==this.Ct)&&(this.C=this.ai()),this.C.size+=e.$snapshot_bytes,this.C.data.push(e.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(e){var n;this.Lt.triggerStatus(this.sessionId)===pi&&((n=this._instance)==null||(n=n.persistence)==null||n.register({[e==="url"?M1:R1]:this.Ct}),this.ai(),this.ki(e+"_trigger_matched"))}ji(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),ri.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Ci(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),ri.info("recording resumed"))}bi(){this.Yt.Tt.length!==0&&At(this.ni)&&(this.ni=this._instance.on("eventCaptured",e=>{try{this.Yt.Tt.includes(e.event)&&this.zi("event")}catch(n){ri.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Ci(),this.ki("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[Jf]:!0}),this.Ci(),this.ki("sampling_overridden")}overrideTrigger(e){this.zi(e)}ki(e,n){this._instance.register_for_session({$session_recording_start_reason:e}),ri.info(e.replace("_"," "),n),dt(["recording_initialized","session_id_changed"],e)||this.ui(e,n)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.C.data.length,$sdk_debug_replay_internal_buffer_size:this.C.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:e}}}var Sw=Bn("[SegmentIntegration]");function YV(t,e){var n=t.config.segment;if(!n)return e();(function(i,r){var s=i.config.segment;if(!s)return r();var o=l=>{var c=()=>l.anonymousId()||Ka();i.config.get_device_id=c,l.id()&&(i.register({distinct_id:l.id(),$device_id:c()}),i.persistence.set_property(Mo,"identified")),r()},a=s.user();"then"in a&&Wr(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((i=>{Promise&&Promise.resolve||Sw.warn("This browser does not have Promise support, and can not use the segment integration");var r=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(Sw.info("No userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(Sw.info("UserId set, identifying with PostHog"),i.identify(s.event.userId));var a=i.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},a,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(t)).then(()=>{e()})})}var d5="posthog-js";function f5(t,e){var{organization:n,projectId:i,prefix:r,severityAllowList:s=["error"]}=e===void 0?{}:e;return o=>{var a,l,c,u,d;if(!(s==="*"||s.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var f=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());o.tags["PostHog Person URL"]=f,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var p=((a=o.exception)==null?void 0:a.values)||[],g=p.map(v=>_e({},v,{stacktrace:v.stacktrace?_e({},v.stacktrace,{type:"raw",frames:(v.stacktrace.frames||[]).map(y=>_e({},y,{platform:"web:javascript"}))}):void 0})),m={$exception_message:((l=p[0])==null?void 0:l.value)||o.message,$exception_type:(c=p[0])==null?void 0:c.type,$exception_personURL:f,$exception_level:o.level,$exception_list:g,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((u=p[0])==null?void 0:u.value)||o.message,$sentry_exception_type:(d=p[0])==null?void 0:d.type,$sentry_tags:o.tags};return n&&i&&(m.$sentry_url=(r||"https://sentry.io/organizations/")+n+"/issues/?project="+i+"&query="+o.event_id),t.exceptions.sendExceptionEvent(m),o}}class XV{constructor(e,n,i,r,s){this.name=d5,this.setupOnce=function(o){o(f5(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}}}var JV=Y!=null&&Y.location?rv(Y.location.hash,"__posthog")||rv(location.hash,"state"):null,jN="_postHogToolbarParams",DN=Bn("[Toolbar]"),Aa=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t}(Aa||{});class ZV{constructor(e){this.instance=e}Hi(e){Je.ph_toolbar_state=e}Wi(){var e;return(e=Je.ph_toolbar_state)!==null&&e!==void 0?e:Aa.UNINITIALIZED}maybeLoadToolbar(e,n,i){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),!Y||!Ae)return!1;e=e??Y.location,i=i??Y.history;try{if(!n){try{Y.localStorage.setItem("test","test"),Y.localStorage.removeItem("test")}catch{return!1}n=Y==null?void 0:Y.localStorage}var r,s=JV||rv(e.hash,"__posthog")||rv(e.hash,"state"),o=s?iN(()=>JSON.parse(atob(decodeURIComponent(s))))||iN(()=>JSON.parse(decodeURIComponent(s))):null;return o&&o.action==="ph_authorize"?((r=o).source="url",r&&Object.keys(r).length>0&&(o.desiredHash?e.hash=o.desiredHash:i?i.replaceState(i.state,"",e.pathname+e.search):e.hash="")):((r=JSON.parse(n.getItem(jN)||"{}")).source="localstorage",delete r.userIntent),!(!r.token||this.instance.config.token!==r.token)&&(this.loadToolbar(r),!0)}catch{return!1}}Gi(e){var n=Je.ph_load_toolbar||Je.ph_load_editor;!At(n)&&Wr(n)?n(e,this.instance):DN.warn("No toolbar load function found")}loadToolbar(e){var n=!(Ae==null||!Ae.getElementById(LO));if(!Y||n)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=_e({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(Y.localStorage.setItem(jN,JSON.stringify(_e({},r,{source:void 0}))),this.Wi()===Aa.LOADED)this.Gi(r);else if(this.Wi()===Aa.UNINITIALIZED){var s;this.Hi(Aa.LOADING),(s=Je.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return DN.error("[Toolbar] Failed to load",o),void this.Hi(Aa.UNINITIALIZED);this.Hi(Aa.LOADED),this.Gi(r)}),an(Y,"turbolinks:load",()=>{this.Hi(Aa.UNINITIALIZED),this.loadToolbar(r)})}return!0}Ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,i){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),this.maybeLoadToolbar(e,n,i)}}var QV=Bn("[TracingHeaders]");class eH{constructor(e){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var n,i;ye(this.Vi)&&((n=Je.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.get_distinct_id(),this._instance.sessionManager)),ye(this.Ki)&&((i=Je.__PosthogExtensions__)==null||(i=i.tracingHeadersPatchFns)==null||i._patchFetch(this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}J(e){var n,i;(n=Je.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(i=Je.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"tracing-headers",r=>{if(r)return QV.error("failed to load script",r);e()})}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.J(this.nt):((e=this.Vi)==null||e.call(this),(n=this.Ki)==null||n.call(this),this.Vi=void 0,this.Ki=void 0)}}var wa=Bn("[Web Vitals]"),LN=9e5;class tH{constructor(e){var n;this.Yi=!1,this.i=!1,this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),this.C.metrics.length!==0&&(this._instance.capture("$web_vitals",this.C.metrics.reduce((i,r)=>_e({},i,{["$web_vitals_"+r.name+"_event"]:_e({},r),["$web_vitals_"+r.name+"_value"]:r.value}),{})),this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=i=>{var r,s=(r=this._instance.sessionManager)==null?void 0:r.checkAndGetSessionAndWindowId(!0);if(ye(s))wa.error("Could not read session ID. Dropping metrics!");else{this.C=this.C||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.te();ye(o)||(At(i==null?void 0:i.name)||At(i==null?void 0:i.value)?wa.error("Invalid metric received",i):this.ie&&i.value>=this.ie?wa.error("Ignoring metric with value >= "+this.ie,i):(this.C.url!==o&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),ye(this.C.url)&&(this.C.url=o),this.C.firstMetricTimestamp=ye(this.C.firstMetricTimestamp)?Date.now():this.C.firstMetricTimestamp,i.attribution&&i.attribution.interactionTargetElement&&(i.attribution.interactionTargetElement=void 0),this.C.metrics.push(_e({},i,{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.C.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var i,r,s,o,a=Je.__PosthogExtensions__;ye(a)||ye(a.postHogWebVitalsCallbacks)||({onLCP:i,onCLS:r,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),i&&r&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&i(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Zi.bind(this)),this.i=!0):wa.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Yi=!((n=this._instance.persistence)==null||!n.props[oN]),this.startIfEnabled()}get allowedMetrics(){var e,n,i=mn(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return ye(i)?((n=this._instance.persistence)==null?void 0:n.props[aN])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(mn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var e=mn(this._instance.config.capture_performance)&&di(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:LN;return 0<e&&e<=6e4?LN:e}get isEnabled(){var e=Ui==null?void 0:Ui.protocol;if(e!=="http:"&&e!=="https:")return wa.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=mn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:ro(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return ro(n)?n:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(wa.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(e){var n=mn(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=mn(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[oN]:n}),this._instance.persistence.register({[aN]:i})),this.Yi=n,this.startIfEnabled()}J(e){var n,i;(n=Je.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&e(),(i=Je.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"web-vitals",r=>{r?wa.error("failed to load script",r):e()})}te(){var e=Y?Y.location.href:void 0;return e||wa.error("Could not determine current URL"),e}}var nH=Bn("[Heatmaps]");function $N(t){return mn(t)&&"clientX"in t&&"clientY"in t&&di(t.clientX)&&di(t.clientY)}class iH{constructor(e){var n;this.rageclicks=new qO,this.Yi=!1,this.i=!1,this.ee=null,this.instance=e,this.Yi=!((n=this.instance.persistence)==null||!n.props[A1])}get flushIntervalMilliseconds(){var e=5e3;return mn(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return ye(this.instance.config.capture_heatmaps)?ye(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;nH.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this.ee)!==null&&e!==void 0?e:void 0),(n=this.ne)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[A1]:n}),this.Yi=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.C;return this.C=void 0,e}oe(e){this.ae(e.originalEvent,"deadclick")}re(){Y&&Ae&&(an(Y,"beforeunload",this.se.bind(this)),an(Ae,"click",e=>this.ae(e||(Y==null?void 0:Y.event)),{capture:!0}),an(Ae,"mousemove",e=>this.le(e||(Y==null?void 0:Y.event)),{capture:!0}),this.ne=new XO(this.instance,aV,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(e,n){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,c){for(var u=a;u&&zy(u)&&!ol(u,"body");){if(u===c)return!1;if(dt(l,Y==null?void 0:Y.getComputedStyle(u).position))return!0;u=UO(u)}return!1}(zO(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:i),target_fixed:o,type:n}}ae(e,n){var i;if(n===void 0&&(n="click"),!mN(e.target)&&$N(e)){var r=this.ue(e,n);(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.he(_e({},r,{type:"rageclick"})),this.he(r)}}le(e){!mN(e.target)&&$N(e)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(e,"mousemove"))},500))}he(e){if(Y){var n=Y.location.href;this.C=this.C||{},this.C[n]||(this.C[n]=[]),this.C[n].push(e)}}se(){this.C&&!Iu(this.C)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class rH{constructor(e){this._instance=e}doPageView(e,n){var i,r=this.ve(e,n);return this.ce={pathname:(i=Y==null?void 0:Y.location.pathname)!==null&&i!==void 0?i:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var n;return this.ve(e,(n=this.ce)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.ce)==null?void 0:e.pageViewId}}ve(e,n){var i=this.ce;if(!i)return{$pageview_id:n};var r={$pageview_id:n,$prev_pageview_id:i.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:u,maxContentY:d}=s;if(!(ye(o)||ye(a)||ye(l)||ye(c)||ye(u)||ye(d))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),d=Math.ceil(d);var f=o<=1?1:pr(a/o,0,1),p=o<=1?1:pr(l/o,0,1),g=c<=1?1:pr(u/c,0,1),m=c<=1?1:pr(d/c,0,1);r=bn(r,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:f,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:g,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:m})}}return i.pathname&&(r.$prev_pageview_pathname=i.pathname),i.timestamp&&(r.$prev_pageview_duration=(e.getTime()-i.timestamp.getTime())/1e3),r}}var sH=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),Ll(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},oH=!!_1||!!k1,BN="text/plain",lv=(t,e)=>{var[n,i]=t.split("?"),r=_e({},e);i==null||i.split("&").forEach(o=>{var[a]=o.split("=");delete r[a]});var s=KU(r);return n+"?"+(s=s?(i?i+"&":"")+s:i)},eh=(t,e)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,e),kw=t=>{var{data:e,compression:n}=t;if(e){if(n===Ko.GZipJS){var i=a5(l5(eh(e)),{mtime:0}),r=new Blob([i],{type:BN});return{contentType:BN,body:r,estimatedSize:r.size}}if(n===Ko.Base64){var s=function(l){var c,u,d,f,p,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m=0,v=0,y="",w=[];if(!l)return l;l=sH(l);do c=(p=l.charCodeAt(m++)<<16|l.charCodeAt(m++)<<8|l.charCodeAt(m++))>>18&63,u=p>>12&63,d=p>>6&63,f=63&p,w[v++]=g.charAt(c)+g.charAt(u)+g.charAt(d)+g.charAt(f);while(m<l.length);switch(y=w.join(""),l.length%3){case 1:y=y.slice(0,-2)+"==";break;case 2:y=y.slice(0,-1)+"="}return y}(eh(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:eh(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=eh(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},_h=[];k1&&_h.push({transport:"fetch",method:t=>{var e,n,{contentType:i,body:r,estimatedSize:s}=(e=kw(t))!==null&&e!==void 0?e:{},o=new Headers;Rt(t.headers,function(u,d){o.append(d,u)}),i&&o.append("Content-Type",i);var a=t.url,l=null;if(tN){var c=new tN;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),t.timeout)}}k1(a,_e({method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:r,signal:(n=l)==null?void 0:n.signal},t.fetchOptions)).then(u=>u.text().then(d=>{var f={statusCode:u.status,text:d};if(u.status===200)try{f.json=JSON.parse(d)}catch(p){Pe.error(p)}t.callback==null||t.callback(f)})).catch(u=>{Pe.error(u),t.callback==null||t.callback({statusCode:0,text:u})}).finally(()=>l?clearTimeout(l.timeout):null)}}),_1&&_h.push({transport:"XHR",method:t=>{var e,n=new _1;n.open(t.method||"GET",t.url,!0);var{contentType:i,body:r}=(e=kw(t))!==null&&e!==void 0?e:{};Rt(t.headers,function(s,o){n.setRequestHeader(o,s)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s={statusCode:n.status,text:n.responseText};if(n.status===200)try{s.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(s)}},n.send(r)}}),hr!=null&&hr.sendBeacon&&_h.push({transport:"sendBeacon",method:t=>{var e=lv(t.url,{beacon:"1"});try{var n,{contentType:i,body:r}=(n=kw(t))!==null&&n!==void 0?n:{},s=typeof r=="string"?new Blob([r],{type:i}):r;hr.sendBeacon(e,s)}catch{}}});var Td=function(t,e){if(!function(n){try{new RegExp(n)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function FN(t,e,n){return eh({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var aH={exact:(t,e)=>e.some(n=>t.some(i=>n===i)),is_not:(t,e)=>e.every(n=>t.every(i=>n!==i)),regex:(t,e)=>e.some(n=>t.some(i=>Td(n,i))),not_regex:(t,e)=>e.every(n=>t.every(i=>!Td(n,i))),icontains:(t,e)=>e.map(Ym).some(n=>t.map(Ym).some(i=>n.includes(i))),not_icontains:(t,e)=>e.map(Ym).every(n=>t.map(Ym).every(i=>!n.includes(i)))},Ym=t=>t.toLowerCase(),lH=Bn("[Error tracking]");class cH{constructor(e){var n,i;this.fe=[],this._instance=e,this.fe=(n=(i=this._instance.persistence)==null?void 0:i.get_property(N1))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,i,r=(n=(i=e.errorTracking)==null?void 0:i.suppressionRules)!==null&&n!==void 0?n:[];this.fe=r,this._instance.persistence&&this._instance.persistence.register({[N1]:this.fe})}sendExceptionEvent(e){this.pe(e)?lH.info("Skipping exception capture because a suppression rule matched"):this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}pe(e){var n=e.$exception_list;if(!n||!Qt(n)||n.length===0)return!1;var i=n.reduce((r,s)=>{var{type:o,value:a}=s;return gn(o)&&o.length>0&&r.$exception_types.push(o),gn(a)&&a.length>0&&r.$exception_values.push(a),r},{$exception_types:[],$exception_values:[]});return this.fe.some(r=>{var s=r.values.map(o=>{var a,l=aH[o.operator],c=Qt(o.value)?o.value:[o.value],u=(a=i[o.key])!==null&&a!==void 0?a:[];return c.length>0&&l(c,u)});return r.type==="OR"?s.some(Boolean):s.every(Boolean)})}}var Kr="Mobile",cv="iOS",so="Android",Jh="Tablet",h5=so+" "+Jh,p5="iPad",m5="Apple",g5=m5+" Watch",Zh="Safari",Od="BlackBerry",v5="Samsung",y5=v5+"Browser",b5=v5+" Internet",Lc="Chrome",uH=Lc+" OS",w5=Lc+" "+cv,k_="Internet Explorer",x5=k_+" "+Kr,__="Opera",dH=__+" Mini",C_="Edge",S5="Microsoft "+C_,id="Firefox",k5=id+" "+cv,Qh="Nintendo",ep="PlayStation",rd="Xbox",_5=so+" "+Kr,C5=Kr+" "+Zh,th="Windows",q1=th+" Phone",zN="Nokia",Y1="Ouya",E5="Generic",fH=E5+" "+Kr.toLowerCase(),A5=E5+" "+Jh.toLowerCase(),X1="Konqueror",vi="(\\d+(\\.\\d+)?)",_w=new RegExp("Version/"+vi),hH=new RegExp(rd,"i"),pH=new RegExp(ep+" \\w+","i"),mH=new RegExp(Qh+" \\w+","i"),E_=new RegExp(Od+"|PlayBook|BB10","i"),gH={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},vH=(t,e)=>e&&dt(e,m5)||function(n){return dt(n,Zh)&&!dt(n,Lc)&&!dt(n,so)}(t),N5=function(t,e){return e=e||"",dt(t," OPR/")&&dt(t,"Mini")?dH:dt(t," OPR/")?__:E_.test(t)?Od:dt(t,"IE"+Kr)||dt(t,"WPDesktop")?x5:dt(t,y5)?b5:dt(t,C_)||dt(t,"Edg/")?S5:dt(t,"FBIOS")?"Facebook "+Kr:dt(t,"UCWEB")||dt(t,"UCBrowser")?"UC Browser":dt(t,"CriOS")?w5:dt(t,"CrMo")||dt(t,Lc)?Lc:dt(t,so)&&dt(t,Zh)?_5:dt(t,"FxiOS")?k5:dt(t.toLowerCase(),X1.toLowerCase())?X1:vH(t,e)?dt(t,Kr)?C5:Zh:dt(t,id)?id:dt(t,"MSIE")||dt(t,"Trident/")?k_:dt(t,"Gecko")?id:""},yH={[x5]:[new RegExp("rv:"+vi)],[S5]:[new RegExp(C_+"?\\/"+vi)],[Lc]:[new RegExp("("+Lc+"|CrMo)\\/"+vi)],[w5]:[new RegExp("CriOS\\/"+vi)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+vi)],[Zh]:[_w],[C5]:[_w],[__]:[new RegExp("(Opera|OPR)\\/"+vi)],[id]:[new RegExp(id+"\\/"+vi)],[k5]:[new RegExp("FxiOS\\/"+vi)],[X1]:[new RegExp("Konqueror[:/]?"+vi,"i")],[Od]:[new RegExp(Od+" "+vi),_w],[_5]:[new RegExp("android\\s"+vi,"i")],[b5]:[new RegExp(y5+"\\/"+vi)],[k_]:[new RegExp("(rv:|MSIE )"+vi)],Mozilla:[new RegExp("rv:"+vi)]},bH=function(t,e){var n=N5(t,e),i=yH[n];if(ye(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},UN=[[new RegExp(rd+"; "+rd+" (.*?)[);]","i"),t=>[rd,t&&t[1]||""]],[new RegExp(Qh,"i"),[Qh,""]],[new RegExp(ep,"i"),[ep,""]],[E_,[Od,""]],[new RegExp(th,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[q1,""];if(new RegExp(Kr).test(e)&&!/IEMobile\b/.test(e))return[th+" "+Kr,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=gH[i]||"";return/arm/i.test(e)&&(r="RT"),[th,r]}return[th,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[cv,e.join(".")]}return[cv,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=ye(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+so+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+so+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[so,e.join(".")]}return[so,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[uH,""]],[/Linux|debian/i,["Linux",""]]],VN=function(t){return mH.test(t)?Qh:pH.test(t)?ep:hH.test(t)?rd:new RegExp(Y1,"i").test(t)?Y1:new RegExp("("+q1+"|WPDesktop)","i").test(t)?q1:/iPad/.test(t)?p5:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?g5:E_.test(t)?Od:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(zN,"i").test(t)?zN:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Kr).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?so:h5:so:new RegExp("(pda|"+Kr+")","i").test(t)?fH:new RegExp(Jh,"i").test(t)&&!new RegExp(Jh+" pc","i").test(t)?A5:""},Xm="https?://(.*)",Vy=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],wH=Fy(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],Vy),A_="<masked>",xH=["li_fat_id"];function P5(t,e,n){if(!Ae)return{};var i,r=e?Fy([],Vy,n||[]):[],s=M5(g_(Ae.URL,r,A_),t),o=(i={},Rt(xH,function(a){var l=fo.D(a);i[a]=l||null}),i);return bn(o,s)}function M5(t,e){var n=wH.concat(e||[]),i={};return Rt(n,function(r){var s=iv(t,r);i[r]=s||null}),i}function R5(t){var e=function(s){return s?s.search(Xm+"google.([^/?]*)")===0?"google":s.search(Xm+"bing.com")===0?"bing":s.search(Xm+"yahoo.com")===0?"yahoo":s.search(Xm+"duckduckgo.com")===0?"duckduckgo":null:null}(t),n=e!="yahoo"?"q":"p",i={};if(!Ll(e)){i.$search_engine=e;var r=Ae?iv(Ae.referrer,n):"";r.length&&(i.ph_keyword=r)}return i}function HN(){return navigator.language||navigator.userLanguage}function T5(){return(Ae==null?void 0:Ae.referrer)||"$direct"}function O5(t,e){var n=t?Fy([],Vy,e||[]):[],i=Ui==null?void 0:Ui.href.substring(0,1e3);return{r:T5().substring(0,1e3),u:i?g_(i,n,A_):void 0}}function I5(t){var e,{r:n,u:i}=t,r={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=Md(n))==null?void 0:e.host};if(i){r.$current_url=i;var s=Md(i);r.$host=s==null?void 0:s.host,r.$pathname=s==null?void 0:s.pathname;var o=M5(i);bn(r,o)}if(n){var a=R5(n);bn(r,a)}return r}function j5(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function SH(){try{return new Date().getTimezoneOffset()}catch{return}}function kH(t,e){if(!Bi)return{};var n,i,r,s=t?Fy([],Vy,e||[]):[],[o,a]=function(l){for(var c=0;c<UN.length;c++){var[u,d]=UN[c],f=u.exec(l),p=f&&(Wr(d)?d(f,l):d);if(p)return p}return["",""]}(Bi);return bn(p_({$os:o,$os_version:a,$browser:N5(Bi,navigator.vendor),$device:VN(Bi),$device_type:(i=Bi,r=VN(i),r===p5||r===h5||r==="Kobo"||r==="Kindle Fire"||r===A5?Jh:r===Qh||r===rd||r===ep||r===Y1?"Console":r===g5?"Wearable":r?Kr:"Desktop"),$timezone:j5(),$timezone_offset:SH()}),{$current_url:g_(Ui==null?void 0:Ui.href,s,A_),$host:Ui==null?void 0:Ui.host,$pathname:Ui==null?void 0:Ui.pathname,$raw_user_agent:Bi.length>1e3?Bi.substring(0,997)+"...":Bi,$browser_version:bH(Bi,navigator.vendor),$browser_language:HN(),$browser_language_prefix:(n=HN(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:Y==null?void 0:Y.screen.height,$screen_width:Y==null?void 0:Y.screen.width,$viewport_height:Y==null?void 0:Y.innerHeight,$viewport_width:Y==null?void 0:Y.innerWidth,$lib:"web",$lib_version:Io.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var Bs=Bn("[FeatureFlags]"),Cw="$active_feature_flags",du="$override_feature_flags",WN="$feature_flag_payloads",Ef="$override_feature_flag_payloads",GN="$feature_flag_request_id",KN=t=>{var e={};for(var[n,i]of h0(t||{}))i&&(e[n]=i);return e},_H=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map(n=>{var i;return[n,(i=e[n].variant)!==null&&i!==void 0?i:e[n].enabled]})),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(n=>e[n].enabled).filter(n=>{var i;return(i=e[n].metadata)==null?void 0:i.payload}).map(n=>{var i;return[n,(i=e[n].metadata)==null?void 0:i.payload]}))):Bs.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},CH=function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t}({}),qN=new Set(["7c6f7b45","66c1f69c","2727f65a","f3287528","8cc9a311","eb9f671b","c0e1c6f9","057989ec","723f4019","7b102104","563359d3","bad973ea","f6f2c4f4","59454a61","89ad1076","4edd0da1","26c52e72","a970bd2e","89cf4454","16e2b4e7","fba0e7b6","301c8488","bc65d69e","fe66a3c5","37926ca6","52a196df","d32a7577","42c4c9ef","6883bd5a","04809ff7","e59430a8","61be3dd8","7fa5500b","bf027177","8cfdba9b","96f6df5f","569798e9","0ebc61a5","1b5d7b92","17ebb0a4","f97ea965","85cc817b","3044dfc1","0c3fe5c3","b1f95fa3","8a6342e8","72365c68","12d34ad9","733853ec","3beeb69a","0645bb64","32de7f98","5dcbee21","3fe85053","ad960278","9466e5dd","7ca97b2d","2ee2a65c","28fde5f2","85c52f49","0ad823f4","f11b6cc9","aacf8af9","ab3e62b3","3a85ff15","8a67d3c4","f5e91ef1","4b873698","c5dae949","5b643d76","9599c892","34377448","2189e408","3be9ad53","1a14ce7c","2a164ded","8d53ea86","53bdb37d","bfc3f590","8df38ede","bdb81e49","38fde5c0","8d707e6d","73cbc496","f9d8a5ef","d3a9f8c4","a980d8cd","5bcfe086","e4818f68","4f11fb39","a13c6ae3","150c7fbb","98f3d658","f84f7377","1924dd9c","1f6b63b3","24748755","7c0f717c","8a87f11b","49f57f22","3c9e9234","3772f65b","dff631b6","cd609d40","f853c7f7","952db5ee","c5aa8a79","2d21b6fd","79b7164c","4110e26c","a7d3b43f","84e1b8f6","75cc0998","07f78e33","10ca9b1a","ce441b18","01eb8256","c0ac4b67","8e8e5216","db7943dd","fa133a95","498a4508","21bbda67","7dbfed69","be3ec24c","fc80b8e2"]);class EH{constructor(e){this.ge=!1,this._e=!1,this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.we=!0;else{var e=!this.$e&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ke({disableFlags:e})}}get hasLoadedFlags(){return this._e}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(T1),n=this._instance.get_property(du),i=this._instance.get_property(Ef);if(!i&&!n)return e||{};var r=bn({},e||{}),s=[...new Set([...Object.keys(i||{}),...Object.keys(n||{})])];for(var o of s){var a,l,c=r[o],u=n==null?void 0:n[o],d=ye(u)?(a=c==null?void 0:c.enabled)!==null&&a!==void 0&&a:!!u,f=ye(u)?c.variant:typeof u=="string"?u:void 0,p=i==null?void 0:i[o],g=_e({},c,{enabled:d,variant:d?f??(c==null?void 0:c.variant):void 0});d!==(c==null?void 0:c.enabled)&&(g.original_enabled=c==null?void 0:c.enabled),f!==(c==null?void 0:c.variant)&&(g.original_variant=c==null?void 0:c.variant),p&&(g.metadata=_e({},c==null?void 0:c.metadata,{payload:p,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),r[o]=g}return this.ge||(Bs.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:i,finalDetails:r}),this.ge=!0),r}getFlagVariants(){var e=this._instance.get_property(ju),n=this._instance.get_property(du);if(!n)return e||{};for(var i=bn({},e),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Bs.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this.ge=!0),i}getFlagPayloads(){var e=this._instance.get_property(WN),n=this._instance.get_property(Ef);if(!n)return e||{};for(var i=bn({},e||{}),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Bs.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:i}),this.ge=!0),i}reloadFeatureFlags(){this.be||this._instance.config.advanced_disable_feature_flags||this.$e||(this.$e=setTimeout(()=>{this.ke()},5))}xe(){clearTimeout(this.$e),this.$e=void 0}ensureFlagsLoaded(){this._e||this.me||this.$e||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.be=e}ke(e){var n;if(this.xe(),!this._instance.I())if(this.me)this.ye=!0;else{var i={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:_e({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(Zf)||{}),group_properties:this._instance.get_property(lc)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0);var r=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config,s=function(l){var c=function(u){for(var d=2166136261,f=0;f<u.length;f++)d^=u.charCodeAt(f),d+=(d<<1)+(d<<4)+(d<<7)+(d<<8)+(d<<24);return("00000000"+(d>>>0).toString(16)).slice(-8)}(l);return qN==null?void 0:qN.has(c)}(this._instance.config.token)?"/decide?v=4":r?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("api",s+o);r&&(i.timezone=j5()),this.me=!0,this._instance.Ee({method:"POST",url:a,data:i,compression:this._instance.config.disable_compression?void 0:Ko.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var c,u,d=!0;if(l.statusCode===200&&(this.ye||(this.$anon_distinct_id=void 0),d=!1),this.me=!1,this.we||(this.we=!0,this._instance.Ie((u=l.json)!==null&&u!==void 0?u:{})),!i.disable_flags||this.ye)if(this.Se=!d,l.json&&(c=l.json.quotaLimited)!=null&&c.includes(CH.FeatureFlags))Bs.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var f;i.disable_flags||this.receivedFeatureFlags((f=l.json)!==null&&f!==void 0?f:{},d),this.ye&&(this.ye=!1,this.ke())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0){var i=this.getFlagVariants()[e],r=""+i,s=this._instance.get_property(GN)||void 0,o=this._instance.get_property(Q0)||{};if((n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(r))){var a,l,c,u,d,f,p,g,m;Qt(o[e])?o[e].push(r):o[e]=[r],(a=this._instance.persistence)==null||a.register({[Q0]:o});var v=this.getFeatureFlagDetails(e),y={$feature_flag:e,$feature_flag_response:i,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[e])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(c=c.featureFlagPayloads)==null?void 0:c[e])||null,$used_bootstrap_value:!this.Se};ye(v==null||(u=v.metadata)==null?void 0:u.version)||(y.$feature_flag_version=v.metadata.version);var w,x=(d=v==null||(f=v.reason)==null?void 0:f.description)!==null&&d!==void 0?d:v==null||(p=v.reason)==null?void 0:p.code;x&&(y.$feature_flag_reason=x),v!=null&&(g=v.metadata)!=null&&g.id&&(y.$feature_flag_id=v.metadata.id),ye(v==null?void 0:v.original_variant)&&ye(v==null?void 0:v.original_enabled)||(y.$feature_flag_original_response=ye(v.original_variant)?v.original_enabled:v.original_variant),v!=null&&(m=v.metadata)!=null&&m.original_payload&&(y.$feature_flag_original_payload=v==null||(w=v.metadata)==null?void 0:w.original_payload),this._instance.capture("$feature_flag_called",y)}return i}Bs.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var i=this._instance.config.token;this._instance.Ee({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:i},compression:this._instance.config.disable_compression?void 0:Ko.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var s,o=(s=r.json)==null?void 0:s.featureFlagPayloads;n((o==null?void 0:o[e])||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);Bs.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this._instance.persistence){this._e=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads(),s=this.getFlagsWithDetails();(function(o,a,l,c,u){l===void 0&&(l={}),c===void 0&&(c={}),u===void 0&&(u={});var d=_H(o),f=d.flags,p=d.featureFlags,g=d.featureFlagPayloads;if(p){var m=o.requestId;if(Qt(p)){Bs.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var v={};if(p)for(var y=0;y<p.length;y++)v[p[y]]=!0;a&&a.register({[Cw]:p,[ju]:v})}else{var w=p,x=g,S=f;o.errorsWhileComputingFlags&&(w=_e({},l,w),x=_e({},c,x),S=_e({},u,S)),a&&a.register(_e({[Cw]:Object.keys(KN(w)),[ju]:w||{},[WN]:x||{},[T1]:S||{}},m?{[GN]:m}:{}))}}})(e,this._instance.persistence,i,r,s),this.Pe(n)}}override(e,n){n===void 0&&(n=!1),Bs.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return Bs.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(du),this._instance.persistence.unregister(Ef),void this.Pe();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,i=e;if(this.ge=!!((n=i.suppressWarning)!==null&&n!==void 0&&n),"flags"in i){if(i.flags===!1)this._instance.persistence.unregister(du);else if(i.flags)if(Qt(i.flags)){for(var r={},s=0;s<i.flags.length;s++)r[i.flags[s]]=!0;this._instance.persistence.register({[du]:r})}else this._instance.persistence.register({[du]:i.flags})}return"payloads"in i&&(i.payloads===!1?this._instance.persistence.unregister(Ef):i.payloads&&this._instance.persistence.register({[Ef]:i.payloads})),void this.Pe()}this.Pe()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._e){var{flags:n,flagVariants:i}=this.Re();e(n,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var i,r=(this._instance.get_property(p0)||[]).find(l=>l.flagKey===e),s={["$feature_enrollment/"+e]:n},o={$feature_flag:e,$feature_enrollment:n,$set:s};r&&(o.$early_access_feature_name=r.name),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(s,!1);var a=_e({},this.getFlagVariants(),{[e]:n});(i=this._instance.persistence)==null||i.register({[Cw]:Object.keys(KN(a)),[ju]:a}),this.Pe()}getEarlyAccessFeatures(e,n,i){n===void 0&&(n=!1);var r=this._instance.get_property(p0),s=i?"&"+i.map(o=>"stage="+o).join("&"):"";if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:o=>{var a;if(o.json){var l=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[p0]:l}),e(l)}}})}Re(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(i=>n[i]),flagVariants:Object.keys(n).filter(i=>n[i]).reduce((i,r)=>(i[r]=n[r],i),{})}}Pe(e){var{flags:n,flagVariants:i}=this.Re();this.featureFlagEventHandlers.forEach(r=>r(n,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(Zf)||{};this._instance.register({[Zf]:_e({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Zf)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(lc)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(r=>{i[r]=_e({},i[r],e[r]),delete e[r]}),this._instance.register({[lc]:_e({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(lc)||{};this._instance.register({[lc]:_e({},n,{[e]:{}})})}else this._instance.unregister(lc)}}var AH=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class Ew{constructor(e){this.S=e,this.props={},this.Te=!1,this.Me=(n=>{var i="";return n.token&&(i=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+i+"_posthog"})(e),this.B=this.Ce(e),this.load(),e.debug&&Pe.info("Persistence loaded",e.persistence,_e({},this.props)),this.update_config(e,e),this.save()}Ce(e){AH.indexOf(e.persistence.toLowerCase())===-1&&(Pe.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&Pn.O()?Pn:n==="localstorage+cookie"&&Um.O()?Um:n==="sessionstorage"&&Gn.O()?Gn:n==="memory"?sV:n==="cookie"?fo:Um.O()?Um:fo}properties(){var e={};return Rt(this.props,function(n,i){if(i===ju&&mn(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/"+r[s]]=n[r[s]];else a=i,l=!1,(Ll(o=$U)?l:eN&&o.indexOf===eN?o.indexOf(a)!=-1:(Rt(o,function(c){if(l||(l=c===a))return J0}),l))||(e[i]=n);var o,a,l}),e}load(){if(!this.Fe){var e=this.B.L(this.Me);e&&(this.props=bn({},e))}}save(){this.Fe||this.B.j(this.Me,this.props,this.Oe,this.Ae,this.De,this.S.debug)}remove(){this.B.N(this.Me,!1),this.B.N(this.Me,!0)}clear(){this.remove(),this.props={}}register_once(e,n,i){if(mn(e)){ye(n)&&(n="None"),this.Oe=ye(i)?this.Le:i;var r=!1;if(Rt(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,n){if(mn(e)){this.Oe=ye(n)?this.Le:n;var i=!1;if(Rt(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Te){var e=P5(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);Iu(p_(e))||this.register(e),this.Te=!0}}update_search_keyword(){var e;this.register((e=Ae==null?void 0:Ae.referrer)?R5(e):{})}update_referrer_info(){var e;this.register_once({$referrer:T5(),$referring_domain:Ae!=null&&Ae.referrer&&((e=Md(Ae.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[D1]||this.props[L1]||this.register_once({[ev]:O5(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};Rt([L1,D1],o=>{var a=this.props[o];a&&Rt(a,function(l,c){e["$initial_"+C1(c)]=l})});var n,i,r=this.props[ev];if(r){var s=(n=I5(r),i={},Rt(n,function(o,a){i["$initial_"+C1(a)]=o}),i);bn(e,s)}return e}safe_merge(e){return Rt(this.props,function(n,i){i in e||(e[i]=n)}),e}update_config(e,n){if(this.Le=this.Oe=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.Ce(e),r=this.props;this.clear(),this.B=i,this.props=r,this.save()}}set_disabled(e){this.Fe=e,this.Fe?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ae&&(this.Ae=e,this.remove(),this.save())}set_secure(e){e!==this.De&&(this.De=e,this.remove(),this.save())}set_event_timer(e,n){var i=this.props[Xf]||{};i[e]=n,this.props[Xf]=i,this.save()}remove_event_timer(e){var n=(this.props[Xf]||{})[e];return ye(n)||(delete this.props[Xf][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}class D5{constructor(){this.je={},this.je={}}on(e,n){return this.je[e]||(this.je[e]=[]),this.je[e].push(n),()=>{this.je[e]=this.je[e].filter(i=>i!==n)}}emit(e,n){for(var i of this.je[e]||[])i(n);for(var r of this.je["*"]||[])r(e,n)}}class hc{constructor(e){this.Ne=new D5,this.ze=(n,i)=>this.Ue(n,i)&&this.qe(n,i)&&this.Be(n,i),this.Ue=(n,i)=>i==null||!i.event||(n==null?void 0:n.event)===(i==null?void 0:i.event),this._instance=e,this.He=new Set,this.We=new Set}init(){var e;if(!ye((e=this._instance)==null?void 0:e.Ge)){var n;(n=this._instance)==null||n.Ge((i,r)=>{this.on(i,r)})}}register(e){var n,i;if(!ye((n=this._instance)==null?void 0:n.Ge)&&(e.forEach(o=>{var a,l;(a=this.We)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var u;(u=this.He)==null||u.add((c==null?void 0:c.event)||"")})}),(i=this._instance)!=null&&i.autocapture)){var r,s=new Set;e.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(r=this._instance)==null||r.autocapture.setElementSelectors(s)}}on(e,n){var i;n!=null&&e.length!=0&&(this.He.has(e)||this.He.has(n==null?void 0:n.event))&&this.We&&((i=this.We)==null?void 0:i.size)>0&&this.We.forEach(r=>{this.Je(n,r)&&this.Ne.emit("actionCaptured",r.name)})}Ve(e){this.onAction("actionCaptured",n=>e(n))}Je(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var i of n.steps)if(this.ze(e,i))return!0;return!1}onAction(e,n){return this.Ne.on(e,n)}qe(e,n){if(n!=null&&n.url){var i,r=e==null||(i=e.properties)==null?void 0:i.$current_url;if(!r||typeof r!="string"||!hc.Ke(r,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static Ke(e,n,i){switch(i){case"regex":return!!Y&&Td(e,n);case"exact":return n===e;case"contains":var r=hc.Ye(n).replace(/_/g,".").replace(/%/g,".*");return Td(e,r);default:return!1}}static Ye(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Be(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.Xe(e).some(s=>!(n!=null&&n.href&&!hc.Ke(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!hc.Ke(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!hc.Ke(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var i,r=e==null||(i=e.properties)==null?void 0:i.$element_selectors;if(!r||!r.includes(n==null?void 0:n.selector))return!1}return!0}Xe(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}var Dn=Bn("[Surveys]"),J1="seenSurvey_",NH=(t,e)=>{var n="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(n="$survey_"+e+"/"+t.id+"/"+t.current_iteration),n};class PH{constructor(e){this._instance=e,this.Qe=new Map,this.Ze=new Map}register(e){var n;ye((n=this._instance)==null?void 0:n.Ge)||(this.tr(e),this.ir(e))}ir(e){var n=e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.actions)&&((s=i.conditions)==null||(s=s.actions)==null||(s=s.values)==null?void 0:s.length)>0});n.length!==0&&(this.er==null&&(this.er=new hc(this._instance),this.er.init(),this.er.Ve(i=>{this.onAction(i)})),n.forEach(i=>{var r,s,o,a,l;i.conditions&&(r=i.conditions)!=null&&r.actions&&(s=i.conditions)!=null&&(s=s.actions)!=null&&s.values&&((o=i.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.er)==null||a.register(i.conditions.actions.values),(l=i.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var u=this.Ze.get(c.name);u&&u.push(i.id),this.Ze.set(c.name,u||[i.id])}}))}))}tr(e){var n;e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.events)&&((s=i.conditions)==null||(s=s.events)==null||(s=s.values)==null?void 0:s.length)>0}).length!==0&&((n=this._instance)==null||n.Ge((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r;(r=i.conditions)==null||(r=r.events)==null||(r=r.values)==null||r.forEach(s=>{if(s&&s.name){var o=this.Qe.get(s.name);o&&o.push(i.id),this.Qe.set(s.name,o||[i.id])}})}))}onEvent(e,n){var i,r=((i=this._instance)==null||(i=i.persistence)==null?void 0:i.props[Fm])||[];if(e==="survey shown"&&n&&r.length>0){var s;Dn.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:n,existingActivatedSurveys:r});var o=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(o){var a=r.indexOf(o);a>=0&&(r.splice(a,1),this.rr(r))}}else this.Qe.has(e)&&(Dn.info("survey event matched, updating activated surveys",{event:e,surveys:this.Qe.get(e)}),this.rr(r.concat(this.Qe.get(e)||[])))}onAction(e){var n,i=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[Fm])||[];this.Ze.has(e)&&this.rr(i.concat(this.Ze.get(e)||[]))}rr(e){var n;(n=this._instance)==null||(n=n.persistence)==null||n.register({[Fm]:[...new Set(e)]})}getSurveys(){var e,n=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[Fm];return n||[]}getEventToSurveys(){return this.Qe}sr(){return this.er}}class MH{constructor(e){this.nr=void 0,this.ar=null,this.lr=!1,this.ur=!1,this.hr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var n=e.surveys;if(At(n))return Dn.warn("Flags not loaded yet. Not loading surveys.");var i=Qt(n);this.nr=i?n.length>0:n,Dn.info("flags response received, isSurveysEnabled: "+this.nr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var i=localStorage.key(n);(i!=null&&i.startsWith(J1)||i!=null&&i.startsWith("inProgressSurvey_"))&&e.push(i)}e.forEach(r=>localStorage.removeItem(r))}loadIfEnabled(){if(!this.ar)if(this.ur)Dn.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Dn.info("Disabled. Not loading surveys.");else{var e=Je==null?void 0:Je.__PosthogExtensions__;if(e){var n=this.nr;if(!ye(n)){this.ur=!0;try{var i=e.generateSurveys;if(i)return void this.dr(i,n);var r=e.loadExternalDependency;if(!r)return void this.vr("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",s=>{s||!e.generateSurveys?this.vr("Could not load surveys script",s):this.dr(e.generateSurveys,n)})}catch(s){throw this.vr("Error initializing surveys",s),s}finally{this.ur=!1}}}else Dn.error("PostHog Extensions not found.")}}dr(e,n){this.ar=e(this._instance,n),this._surveyEventReceiver=new PH(this._instance),Dn.info("Surveys loaded successfully"),this.cr({isLoaded:!0})}vr(e,n){Dn.error(e,n),this.cr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.hr.push(e),this.ar&&this.cr({isLoaded:!0}),()=>{this.hr=this.hr.filter(n=>n!==e)}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return Dn.info("Disabled. Not loading surveys."),e([]);var i=this._instance.get_property(O1);if(i&&!n)return e(i,{isLoaded:!0});if(this.lr)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.lr=!0,this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:r=>{var s;this.lr=!1;var o=r.statusCode;if(o!==200||!r.json){var a="Surveys API could not be loaded, status: "+o;return Dn.error(a),e([],{isLoaded:!1,error:a})}var l,c=r.json.surveys||[],u=c.filter(d=>function(f){return!(!f.start_date||f.end_date)}(d)&&(function(f){var p;return!((p=f.conditions)==null||(p=p.events)==null||(p=p.values)==null||!p.length)}(d)||function(f){var p;return!((p=f.conditions)==null||(p=p.actions)==null||(p=p.values)==null||!p.length)}(d)));return u.length>0&&((l=this._surveyEventReceiver)==null||l.register(u)),(s=this._instance.persistence)==null||s.register({[O1]:c}),e(c,{isLoaded:!0})}})}catch(r){throw this.lr=!1,r}}cr(e){for(var n of this.hr)try{e.isLoaded?this.getSurveys(n):n([],e)}catch(i){Dn.error("Error in survey callback",i)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!At(this.ar))return this.ar.getActiveMatchingSurveys(e,n);Dn.warn("init was not called")}pr(e){var n=null;return this.getSurveys(i=>{var r;n=(r=i.find(s=>s.id===e))!==null&&r!==void 0?r:null}),n}gr(e){if(At(this.ar))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.pr(e):e;return n?this.ar.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(At(this.ar))return Dn.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.gr(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return At(this.ar)?(Dn.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(i=>{this.getSurveys(r=>{var s,o=(s=r.find(l=>l.id===e))!==null&&s!==void 0?s:null;if(o){var a=this.gr(o);i({visible:a.eligible,disabledReason:a.reason})}else i({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(e,n){if(At(this.ar))Dn.warn("init was not called");else{var i=this.pr(e),r=Ae==null?void 0:Ae.querySelector(n);i?r?this.ar.renderSurvey(i,r):Dn.warn("Survey element not found"):Dn.warn("Survey not found")}}}(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t})({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var Aw=function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t}({}),YN=function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t}({}),XN=Bn("[RateLimiter]");let RH=class{constructor(e){var n,i;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=r=>{var s=r.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{XN.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void XN.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:s})}},this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((i=e.config.rate_limiting)==null?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var n,i,r;e===void 0&&(e=!1);var s=new Date().getTime(),o=(n=(i=this.instance.persistence)==null?void 0:i.get_property(j1))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(r=this.instance.persistence)==null||r.set_property(j1,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}};var tc=Bn("[RemoteConfig]");class TH{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=Je._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}_r(e){var n,i;(n=Je.__PosthogExtensions__)!=null&&n.loadExternalDependency?(i=Je.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(tc.error("PostHog Extensions not found. Cannot load remote config."),e())}mr(e){this._instance.Ee({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return tc.info("Using preloaded remote config",this.remoteConfig),void this.Ie(this.remoteConfig);if(this._instance.I())return void tc.warn("Remote config is disabled. Falling back to local config.");this._r(e=>{if(!e)return tc.info("No config found after loading remote JS config. Falling back to JSON."),void this.mr(n=>{this.Ie(n)});this.Ie(e)})}catch(e){tc.error("Error loading remote config",e)}}Ie(e){e?this._instance.config.__preview_remote_config?(this._instance.Ie(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):tc.info("__preview_remote_config is disabled. Logging config instead",e):tc.error("Failed to fetch remote config from PostHog.")}}var Z1=3e3;class OH{constructor(e,n){this.br=!0,this.yr=[],this.wr=pr((n==null?void 0:n.flush_interval_ms)||Z1,250,5e3,"flush interval",Z1),this.Sr=e}enqueue(e){this.yr.push(e),this.$r||this.kr()}unload(){this.Er();var e=this.yr.length>0?this.Ir():{},n=Object.values(e);[...n.filter(i=>i.url.indexOf("/e")===0),...n.filter(i=>i.url.indexOf("/e")!==0)].map(i=>{this.Sr(_e({},i,{transport:"sendBeacon"}))})}enable(){this.br=!1,this.kr()}kr(){var e=this;this.br||(this.$r=setTimeout(()=>{if(this.Er(),this.yr.length>0){var n=this.Ir(),i=function(){var s=n[r],o=new Date().getTime();s.data&&Qt(s.data)&&Rt(s.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),e.Sr(s)};for(var r in n)i()}},this.wr))}Er(){clearTimeout(this.$r),this.$r=void 0}Ir(){var e={};return Rt(this.yr,n=>{var i,r=n,s=(r?r.batchKey:null)||r.url;ye(e[s])&&(e[s]=_e({},r,{data:[]})),(i=e[s].data)==null||i.push(r.data)}),this.yr=[],e}}var IH=["retriesPerformedSoFar"];class jH{constructor(e){this.Pr=!1,this.Rr=3e3,this.yr=[],this._instance=e,this.yr=[],this.Tr=!0,!ye(Y)&&"onLine"in Y.navigator&&(this.Tr=Y.navigator.onLine,an(Y,"online",()=>{this.Tr=!0,this.se()}),an(Y,"offline",()=>{this.Tr=!1}))}get length(){return this.yr.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,i=OO(e,IH);di(n)&&n>0&&(i.url=lv(i.url,{retry_count:n})),this._instance.Ee(_e({},i,{callback:r=>{r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(n??0)<10?this.Mr(_e({retriesPerformedSoFar:n},i)):i.callback==null||i.callback(r)}}))}Mr(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var i=function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),u=(Math.random()-.5)*(c-l);return Math.ceil(c+u)}(n),r=Date.now()+i;this.yr.push({retryAt:r,requestOptions:e});var s="Enqueued failed request for retry in "+i;navigator.onLine||(s+=" (Browser is offline)"),Pe.warn(s),this.Pr||(this.Pr=!0,this.Cr())}Cr(){this.Fr&&clearTimeout(this.Fr),this.Fr=setTimeout(()=>{this.Tr&&this.yr.length>0&&this.se(),this.Cr()},this.Rr)}se(){var e=Date.now(),n=[],i=this.yr.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.yr=n,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.Fr&&(clearTimeout(this.Fr),this.Fr=void 0),this.yr))try{this._instance.Ee(_e({},e,{transport:"sendBeacon"}))}catch(n){Pe.error(n)}this.yr=[]}}class DH{constructor(e){this.Or=()=>{var n,i,r,s;this.Ar||(this.Ar={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+((o==null?void 0:o.clientHeight)||0),u=(o==null?void 0:o.scrollHeight)||0;this.Ar.lastScrollY=Math.ceil(a),this.Ar.maxScrollY=Math.max(a,(n=this.Ar.maxScrollY)!==null&&n!==void 0?n:0),this.Ar.maxScrollHeight=Math.max(l,(i=this.Ar.maxScrollHeight)!==null&&i!==void 0?i:0),this.Ar.lastContentY=c,this.Ar.maxContentY=Math.max(c,(r=this.Ar.maxContentY)!==null&&r!==void 0?r:0),this.Ar.maxContentHeight=Math.max(u,(s=this.Ar.maxContentHeight)!==null&&s!==void 0?s:0)},this._instance=e}getContext(){return this.Ar}resetContext(){var e=this.Ar;return setTimeout(this.Or,0),e}startMeasuringScrollPosition(){an(Y,"scroll",this.Or,{capture:!0}),an(Y,"scrollend",this.Or,{capture:!0}),an(Y,"resize",this.Or)}scrollElement(){if(!this._instance.config.scroll_root_selector)return Y==null?void 0:Y.document.documentElement;var e=Qt(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var i=Y==null?void 0:Y.document.querySelector(n);if(i)return i}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return Y&&(Y.scrollY||Y.pageYOffset||Y.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return Y&&(Y.scrollX||Y.pageXOffset||Y.document.documentElement.scrollLeft)||0}}var LH=t=>O5(t==null?void 0:t.config.mask_personal_data_properties,t==null?void 0:t.config.custom_personal_data_properties);class $H{constructor(e,n,i,r){this.Dr=s=>{var o=this.Lr();if(!o||o.sessionId!==s){var a={sessionId:s,props:this.jr(this._instance)};this.Nr.register({[I1]:a})}},this._instance=e,this.zr=n,this.Nr=i,this.jr=r||LH,this.zr.onSessionId(this.Dr)}Lr(){return this.Nr.props[I1]}getSetOnceProps(){var e,n=(e=this.Lr())==null?void 0:e.props;return n?"r"in n?I5(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return Rt(p_(this.getSetOnceProps()),(n,i)=>{i==="$current_url"&&(i="url"),e["$session_entry_"+C1(i)]=n}),e}}var JN=Bn("[SessionId]");class BH{constructor(e,n,i){var r;if(this.Ur=[],!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Nr=e.persistence,this.fi=void 0,this.Ct=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.qr=n||Ka,this.Br=i||Ka;var s=this.S.persistence_name||this.S.token,o=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*pr(o,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Hr(),this.Wr="ph_"+s+"_window_id",this.Gr="ph_"+s+"_primary_window_exists",this.Jr()){var a=Gn.L(this.Wr),l=Gn.L(this.Gr);a&&!l?this.fi=a:Gn.N(this.Wr),Gn.j(this.Gr,!0)}if((r=this.S.bootstrap)!=null&&r.sessionID)try{var c=(u=>{var d=u.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Vr(this.S.bootstrap.sessionID,new Date().getTime(),c)}catch(u){JN.error("Invalid sessionID in bootstrap",u)}this.Kr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return ye(this.Ur)&&(this.Ur=[]),this.Ur.push(e),this.Ct&&e(this.Ct,this.fi),()=>{this.Ur=this.Ur.filter(n=>n!==e)}}Jr(){return this.S.persistence!=="memory"&&!this.Nr.Fe&&Gn.O()}Yr(e){e!==this.fi&&(this.fi=e,this.Jr()&&Gn.j(this.Wr,e))}Xr(){return this.fi?this.fi:this.Jr()?Gn.L(this.Wr):null}Vr(e,n,i){e===this.Ct&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this.Ct=e,this.Nr.register({[Z0]:[n,e,i]}))}Qr(){if(this.Ct&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ct,this._sessionStartTimestamp];var e=this.Nr.props[Z0];return Qt(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Vr(null,null,null)}Kr(){an(Y,"beforeunload",()=>{this.Jr()&&Gn.N(this.Gr)},{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var i=n||new Date().getTime(),[r,s,o]=this.Qr(),a=this.Xr(),l=di(o)&&o>0&&Math.abs(i-o)>864e5,c=!1,u=!s,d=!e&&Math.abs(i-r)>this.sessionTimeoutMs;u||d||l?(s=this.qr(),a=this.Br(),JN.info("new session ID generated",{sessionId:s,windowId:a,changeReason:{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}}),o=i,c=!0):a||(a=this.Br(),c=!0);var f=r===0||!e||l?i:r,p=o===0?new Date().getTime():o;return this.Yr(a),this.Vr(s,f,p),e||this.Hr(),c&&this.Ur.forEach(g=>g(s,a,c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0)),{sessionId:s,windowId:a,sessionStartTimestamp:p,changeReason:c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:r}}Hr(){clearTimeout(this.Zr),this.Zr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var FH=["$set_once","$set"],xa=Bn("[SiteApps]");class zH{constructor(e){this._instance=e,this.ts=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}es(e,n){if(n){var i=this.globalsForEvent(n);this.ts.push(i),this.ts.length>1e3&&(this.ts=this.ts.slice(10))}}get siteAppLoaders(){var e;return(e=Je._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ge(this.es.bind(this));this.rs=()=>{e(),this.ts=[],this.rs=void 0}}}globalsForEvent(e){var n,i,r,s,o,a,l;if(!e)throw new Error("Event payload is required");var c={},u=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[f,p]of Object.entries(d))c[f]={id:u[f],type:f,properties:p};var{$set_once:g,$set:m}=e;return{event:_e({},OO(e,FH),{properties:_e({},e.properties,m?{$set:_e({},(n=(i=e.properties)==null?void 0:i.$set)!==null&&n!==void 0?n:{},m)}:{},g?{$set_once:_e({},(r=(s=e.properties)==null?void 0:s.$set_once)!==null&&r!==void 0?r:{},g)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var n=this.apps[e.id],i=()=>{var a;!n.errored&&this.ts.length&&(xa.info("Processing "+this.ts.length+" events for site app with id "+e.id),this.ts.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.rs)==null||a.call(this))},r=!1,s=a=>{n.errored=!a,n.loaded=!0,xa.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),r&&i()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{s(a)}});o&&(n.processEvent=o),r=!0}catch(a){xa.error("Error while initializing PostHog app with config id "+e.id,a),s(!1)}if(r&&n.loaded)try{i()}catch(a){xa.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}ss(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var i of e)this.setupSiteApp(i)}ns(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var i of Object.values(this.apps))try{i.processEvent==null||i.processEvent(n)}catch(r){xa.error("Error while processing event "+e.event+" for site app "+i.id,r)}}}onRemoteConfig(e){var n,i,r,s=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.ss(),void this._instance.on("eventCaptured",c=>this.ns(c))):void xa.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((i=this.rs)==null||i.call(this),(r=e.siteApps)!=null&&r.length)if(this.isEnabled){var o=function(c){var u;Je["__$$ph_site_app_"+c]=s._instance,(u=Je.__PosthogExtensions__)==null||u.loadSiteApp==null||u.loadSiteApp(s._instance,l,d=>{if(d)return xa.error("Error while initializing PostHog app with config id "+c,d)})};for(var{id:a,url:l}of e.siteApps)o(a)}else xa.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var UH=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],ZN=function(t,e){if(!t)return!1;var n=t.toLowerCase();return UH.concat(e||[]).some(i=>{var r=i.toLowerCase();return n.indexOf(r)!==-1})},L5=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&ZN(n,e))return!0;try{var i=t==null?void 0:t.userAgentData;if(i!=null&&i.brands&&i.brands.some(r=>ZN(r==null?void 0:r.brand,e)))return!0}catch{}return!!t.webdriver},nh=function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t}({}),QN="i.posthog.com";class VH{constructor(e){this.os={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+QN,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.os[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=nh.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=nh.EU:this.os[this.apiHost]=nh.CUSTOM),this.os[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(this.region===nh.CUSTOM)return this.apiHost+n;var i=QN+n;switch(e){case"assets":return"https://"+this.region+"-assets."+i;case"api":return"https://"+this.region+"."+i}}}var HH={icontains:(t,e)=>!!Y&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!Y&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!Y&&Td(e.href,t),not_regex:(t,e)=>!!Y&&!Td(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};let WH=class yi{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(i){i===void 0&&(i=!1),n.getWebExperiments(r=>{yi.ls("retrieved web experiments from the server"),n.us=new Map,r.forEach(s=>{if(s.feature_flag_key){var o;n.us&&(yi.ls("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n.us)==null||o.set(s.feature_flag_key,s));var a=n._instance.getFeatureFlag(s.feature_flag_key);gn(a)&&s.variants[a]&&n.hs(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var c=s.variants[l];yi.ds(c)&&n.hs(s.name,l,c.transforms)}})},i)},this._instance=e,this._instance.onFeatureFlags(i=>{this.onFeatureFlags(i)})}onFeatureFlags(e){if(this._is_bot())yi.ls("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(At(this.us))return this.us=new Map,this.loadIfEnabled(),void this.previewWebExperiment();yi.ls("applying feature flags",e),e.forEach(n=>{var i;if(this.us&&(i=this.us)!=null&&i.has(n)){var r,s=this._instance.getFeatureFlag(n),o=(r=this.us)==null?void 0:r.get(n);s&&o!=null&&o.variants[s]&&this.hs(o.name,s,o.variants[s].transforms)}})}}previewWebExperiment(){var e=yi.getWindowLocation();if(e!=null&&e.search){var n=iv(e==null?void 0:e.search,"__experiment_id"),i=iv(e==null?void 0:e.search,"__experiment_variant");n&&i&&(yi.ls("previewing web experiments "+n+" && "+i),this.getWebExperiments(r=>{this.vs(parseInt(n),i,r)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,i){if(this._instance.config.disable_web_experiments&&!i)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}vs(e,n,i){var r=i.filter(s=>s.id===e);r&&r.length>0&&(yi.ls("Previewing web experiment ["+r[0].name+"] with variant ["+n+"]"),this.hs(r[0].name,n,r[0].variants[n].transforms))}static ds(e){return!At(e.conditions)&&yi.cs(e)&&yi.fs(e)}static cs(e){var n;if(At(e.conditions)||At((n=e.conditions)==null?void 0:n.url))return!0;var i,r,s,o=yi.getWindowLocation();return!!o&&((i=e.conditions)==null||!i.url||HH[(r=(s=e.conditions)==null?void 0:s.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,o))}static getWindowLocation(){return Y==null?void 0:Y.location}static fs(e){var n;if(At(e.conditions)||At((n=e.conditions)==null?void 0:n.utm))return!0;var i=P5();if(i.utm_source){var r,s,o,a,l,c,u,d,f=(r=e.conditions)==null||(r=r.utm)==null||!r.utm_campaign||((s=e.conditions)==null||(s=s.utm)==null?void 0:s.utm_campaign)==i.utm_campaign,p=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==i.utm_source,g=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=e.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==i.utm_medium,m=(u=e.conditions)==null||(u=u.utm)==null||!u.utm_term||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_term)==i.utm_term;return f&&g&&m&&p}return!1}static ls(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];Pe.info("[WebExperiments] "+e,i)}hs(e,n,i){this._is_bot()?yi.ls("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?i.forEach(r=>{if(r.selector){var s;yi.ls("applying transform of variant "+n+" for experiment "+e+" ",r);var o=(s=document)==null?void 0:s.querySelectorAll(r.selector);o==null||o.forEach(a=>{var l=a;r.html&&(l.innerHTML=r.html),r.css&&l.setAttribute("style",r.css)})}}):yi.ls("Control variants leave the page unmodified.")}_is_bot(){return hr&&this._instance?L5(hr,this._instance.config.custom_blocked_useragents):void 0}};var GH=Bn("[PostHog ExternalIntegrations]"),KH={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};let qH=class{constructor(e){this._instance=e}J(e,n){var i;(i=Je.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,e,r=>{if(r)return GH.error("failed to load script",r);n()})}startIfEnabledOrStop(){var e=this,n=function(o){var a,l,c;!r||(a=Je.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.J(KH[o],()=>{var u;(u=Je.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.start(e._instance)}),!r&&(l=Je.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((c=Je.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.stop())};for(var[i,r]of Object.entries((s=this._instance.config.integrations)!==null&&s!==void 0?s:{})){var s;n(i)}}};var Ch={},Q1=()=>{},Eu="posthog",$5=!oH&&(Bi==null?void 0:Bi.indexOf("MSIE"))===-1&&(Bi==null?void 0:Bi.indexOf("Mozilla"))===-1,eP=t=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:LU(Ae==null?void 0:Ae.location),persistence:"localStorage+cookie",persistence_name:"",loaded:Q1,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:t!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:t??"unset",debug:Ui&&gn(Ui==null?void 0:Ui.search)&&Ui.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(Y==null||(e=Y.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var i="Bad HTTP status: "+n.statusCode+" "+n.text;Pe.error(i)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:Z1},error_tracking:{},_onCapture:Q1}},tP=t=>{var e={};ye(t.process_person)||(e.person_profiles=t.process_person),ye(t.xhr_headers)||(e.request_headers=t.xhr_headers),ye(t.cookie_name)||(e.persistence_name=t.cookie_name),ye(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),ye(t.store_google)||(e.save_campaign_params=t.store_google),ye(t.verbose)||(e.debug=t.verbose);var n=bn({},e,t);return Qt(t.property_blacklist)&&(ye(t.property_denylist)?n.property_denylist=t.property_blacklist:Qt(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:Pe.error("Invalid value for property_denylist config: "+t.property_denylist)),n};let YH=class{constructor(){this.__forceAllowLocalhost=!1}get ps(){return this.__forceAllowLocalhost}set ps(e){Pe.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}},B5=class F5{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new YH,this.gs=!1,this.version=Io.LIB_VERSION,this._s=new D5,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=eP(),this.SentryIntegration=XV,this.sentryIntegration=e=>function(n,i){var r=f5(n,i);return{name:d5,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.bs=!1,this.ys=null,this.ws=null,this.Ss=null,this.featureFlags=new EH(this),this.toolbar=new ZV(this),this.scrollManager=new DH(this),this.pageViewManager=new rH(this),this.surveys=new MH(this),this.experiments=new WH(this),this.exceptions=new cH(this),this.rateLimiter=new RH(this),this.requestRouter=new VH(this),this.consent=new oV(this),this.externalIntegrations=new qH(this),this.people={set:(e,n,i)=>{var r=gn(e)?{[e]:n}:e;this.setPersonProperties(r),i==null||i({})},set_once:(e,n,i)=>{var r=gn(e)?{[e]:n}:e;this.setPersonProperties(void 0,r),i==null||i({})}},this.on("eventCaptured",e=>Pe.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,n,i){if(i&&i!==Eu){var r,s=(r=Ch[i])!==null&&r!==void 0?r:new F5;return s._init(e,n,i),Ch[i]=s,Ch[Eu][i]=s,s}return this._init(e,n,i)}_init(e,n,i){var r,s;if(n===void 0&&(n={}),ye(e)||E1(e))return Pe.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Pe.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.$s=n,this.ks=[],n.person_profiles&&(this.ws=n.person_profiles),this.set_config(bn({},eP(n.defaults),tP(n),{name:i,token:e})),this.config.on_xhr_error&&Pe.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:Ko.GZipJS,this.persistence=new Ew(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Ew(_e({},this.config,{persistence:"sessionStorage"}));var o=_e({},this.persistence.props),a=_e({},this.sessionPersistence.props);if(this.register({$initialization_time:new Date().toISOString()}),this.xs=new OH(y=>this.Es(y),this.config.request_queue_config),this.Is=new jH(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new BH(this),this.sessionPropsManager=new $H(this,this.sessionManager,this.persistence)),new eH(this).startIfEnabledOrStop(),this.siteApps=new zH(this),(r=this.siteApps)==null||r.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new qV(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new JU(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new iH(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new tH(this),this.exceptionObserver=new cV(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new XO(this,lV),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new kV(this),this.historyAutocapture.startIfEnabled(),Io.DEBUG=Io.DEBUG||this.config.debug,Io.DEBUG&&Pe.info("Starting in debug mode",{this:this,config:n,thisC:_e({},this.config),p:o,s:a}),this.Ps(),((s=n.bootstrap)==null?void 0:s.distinctID)!==void 0){var l,c,u=this.config.get_device_id(Ka()),d=(l=n.bootstrap)!=null&&l.isIdentifiedID?u:n.bootstrap.distinctID;this.persistence.set_property(Mo,(c=n.bootstrap)!=null&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:d})}if(this.Rs()){var f,p,g=Object.keys(((f=n.bootstrap)==null?void 0:f.featureFlags)||{}).filter(y=>{var w;return!((w=n.bootstrap)==null||(w=w.featureFlags)==null||!w[y])}).reduce((y,w)=>{var x;return y[w]=((x=n.bootstrap)==null||(x=x.featureFlags)==null?void 0:x[w])||!1,y},{}),m=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(y=>g[y]).reduce((y,w)=>{var x,S;return(x=n.bootstrap)!=null&&(x=x.featureFlagPayloads)!=null&&x[w]&&(y[w]=(S=n.bootstrap)==null||(S=S.featureFlagPayloads)==null?void 0:S[w]),y},{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:m})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:zm,$device_id:null},"");else if(!this.get_distinct_id()){var v=this.config.get_device_id(Ka());this.register_once({distinct_id:v,$device_id:v},""),this.persistence.set_property(Mo,"anonymous")}return an(Y,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?YV(this,()=>this.Ts()):this.Ts(),Wr(this.config._onCapture)&&this.config._onCapture!==Q1&&(Pe.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",y=>this.config._onCapture(y.event,y))),this.config.ip&&Pe.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Ie(e){var n,i,r,s,o,a,l,c;if(!Ae||!Ae.body)return Pe.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Ie(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=dt(e.supportedCompression,Ko.GZipJS)?Ko.GZipJS:dt(e.supportedCompression,Ko.Base64)?Ko.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.ws?this.ws:"identified_only"}),(i=this.siteApps)==null||i.onRemoteConfig(e),(r=this.sessionRecording)==null||r.onRemoteConfig(e),(s=this.autocapture)==null||s.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(e)}Ts(){try{this.config.loaded(this)}catch(e){Pe.critical("`loaded` function failed",e)}this.Ms(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Cs()},1),new TH(this).load(),this.featureFlags.flags()}Ms(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this.xs)==null||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||sl(this.__request_queue,e=>this.Es(e)),this.__request_queue=[],this.Ms()}_handle_unload(){var e,n;this.config.request_batching?(this.Fs()&&this.capture("$pageleave"),(e=this.xs)==null||e.unload(),(n=this.Is)==null||n.unload()):this.Fs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Ee(e){this.__loaded&&($5?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=lv(e.url,{ip:this.config.ip?1:0}),e.headers=_e({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var i,r,s,o=_e({},n);o.timeout=o.timeout||6e4,o.url=lv(o.url,{_:new Date().getTime().toString(),ver:Io.LIB_VERSION,compression:o.compression});var a=(i=o.transport)!==null&&i!==void 0?i:"fetch",l=(r=(s=IO(_h,c=>c.transport===a))==null?void 0:s.method)!==null&&r!==void 0?r:_h[0].method;if(!l)throw new Error("No available transport method");l(o)})(_e({},e,{callback:n=>{var i,r;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((i=(r=this.config).on_request_error)==null||i.call(r,n)),e.callback==null||e.callback(n)}}))))}Es(e){this.Is?this.Is.retriableRequest(e):this.Ee(e)}_execute_array(e){var n,i=[],r=[],s=[];sl(e,a=>{a&&(n=a[0],Qt(n)?s.push(a):Wr(a)?a.call(this):Qt(a)&&n==="alias"?i.push(a):Qt(a)&&n.indexOf("capture")!==-1&&Wr(this[n])?s.push(a):r.push(a))});var o=function(a,l){sl(a,function(c){if(Qt(c[0])){var u=l;Rt(c,function(d){u=u[d[0]].apply(u,d.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(i,this),o(r,this),o(s,this)}Rs(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.xs){if(!this.consent.isOptedOut())if(!ye(e)&&gn(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=i!=null&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){n!=null&&n.$current_url&&!gn(n==null?void 0:n.$current_url)&&(Pe.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(i==null?void 0:i.timestamp)||o,l=Ka(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,n||{},a,l)};s&&(c.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),i!=null&&i.$set&&(c.$set=i==null?void 0:i.$set);var u,d,f=this.Os(i==null?void 0:i.$set_once);if(f&&(c.$set_once=f),(c=jU(c,i!=null&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,ye(i==null?void 0:i.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=o),e===Aw.DISMISSED||e===Aw.SENT){var p=n==null?void 0:n[YN.SURVEY_ID],g=n==null?void 0:n[YN.SURVEY_ITERATION];localStorage.setItem((d=""+J1+(u={id:p,current_iteration:g}).id,u.current_iteration&&u.current_iteration>0&&(d=""+J1+u.id+"_"+u.current_iteration),d),"true"),c.$set=_e({},c.$set,{[NH({id:p,current_iteration:g},e===Aw.SENT?"responded":"dismissed")]:!0})}var m=_e({},c.properties.$set,c.$set);if(Iu(m)||this.setPersonPropertiesForFlags(m),!At(this.config.before_send)){var v=this.As(c);if(!v)return;c=v}this._s.emit("eventCaptured",c);var y={method:"POST",url:(r=i==null?void 0:i._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:i==null?void 0:i._batchKey};return!this.config.request_batching||i&&(i==null||!i._batchKey)||i!=null&&i.send_instantly?this.Es(y):this.xs.enqueue(y),c}Pe.critical("This capture call is ignored due to client rate limiting.")}}else Pe.error("No event name provided to posthog.capture")}else Pe.uninitializedWarning("posthog.capture")}Ge(e){return this.on("eventCaptured",n=>e(n.event,n))}calculateEventProperties(e,n,i,r,s){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;var o=s?void 0:this.persistence.remove_event_timer(e),a=_e({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(a.$cookieless_mode=!0),e==="$snapshot"){var l=_e({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!gn(a.distinct_id)&&!di(a.distinct_id)||E1(a.distinct_id))&&Pe.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,u=kH(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId(s,i.getTime());a.$session_id=d,a.$window_id=f}this.sessionPropsManager&&bn(a,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&bn(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(p=this.Is)==null?void 0:p.length}catch(y){a.$sdk_debug_error_capturing_properties=String(y)}if(this.requestRouter.region===nh.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=e!=="$pageview"||s?e!=="$pageleave"||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(i):this.pageViewManager.doPageView(i,r),a=bn(a,c),e==="$pageview"&&Ae&&(a.title=Ae.title),!ye(o)){var g=i.getTime()-o;a.$duration=parseFloat((g/1e3).toFixed(3))}Bi&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=bn({},u,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),Qt(this.config.property_denylist)?Rt(this.config.property_denylist,function(y){delete a[y]}):Pe.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var m=this.config.sanitize_properties;m&&(Pe.error("sanitize_properties is deprecated. Use before_send instead"),a=m(a,e));var v=this.Ds();return a.$process_person_profile=v,v&&!s&&this.Ls("_calculate_event_properties"),a}Os(e){var n;if(!this.persistence||!this.Ds()||this.gs)return e;var i=this.persistence.get_initial_props(),r=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),s=bn({},i,r||{},e||{}),o=this.config.sanitize_properties;return o&&(Pe.error("sanitize_properties is deprecated. Use before_send instead"),s=o(s,"$set_once")),this.gs=!0,Iu(s)?void 0:s}register(e,n){var i;(i=this.persistence)==null||i.register(e,n)}register_once(e,n,i){var r;(r=this.persistence)==null||r.register_once(e,n,i)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}js(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e,n,i){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,i)}on(e,n){return this._s.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,i;return(n=(i=this.sessionManager)==null?void 0:i.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,i){if(!this.__loaded||!this.persistence)return Pe.uninitializedWarning("posthog.identify");if(di(e)&&(e=e.toString(),Pe.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Pe.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==zm){if(this.Ls("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(Yf)&&(this.unregister(Yf),this.register({distinct_id:e}));var o=(this.persistence.get_property(Mo)||"anonymous")==="anonymous";e!==r&&o?(this.persistence.set_property(Mo,"identified"),this.setPersonPropertiesForFlags(_e({},i||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.Ss=FN(e,n,i),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(Q0))}}else Pe.critical('The string "'+zm+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Pe.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.Ls("posthog.setPersonProperties")){var i=FN(this.get_distinct_id(),e,n);this.Ss!==i?(this.setPersonPropertiesForFlags(_e({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.Ss=i):Pe.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,i){if(e&&n){if(this.Ls("posthog.group")){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:_e({},r,{[e]:n})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===n||i||this.reloadFeatureFlags()}}else Pe.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.Ls("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,i,r,s;if(Pe.info("reset"),!this.__loaded)return Pe.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(i=this.sessionPersistence)==null||i.clear(),this.surveys.reset(),(r=this.persistence)==null||r.set_property(Mo,"anonymous"),(s=this.sessionManager)==null||s.resetSessionId(),this.Ss=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:zm,$device_id:null},"");else{var a=this.config.get_device_id(Ka());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&i){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return r;r+="?t="+Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0)}return r}alias(e,n){return e===this.get_property(jO)?(Pe.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ls("posthog.alias")?(ye(n)&&(n=this.get_distinct_id()),e!==n?(this.js(Yf,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(Pe.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,i,r,s,o,a=_e({},this.config);mn(e)&&(bn(this.config,tP(e)),(n=this.persistence)==null||n.update_config(this.config,a),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Ew(_e({},this.config,{persistence:"sessionStorage"})),Pn.O()&&Pn.D("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(Io.DEBUG=!0,Pe.info("set_config",{config:e,oldConfig:a,newConfig:_e({},this.config)})),(i=this.sessionRecording)==null||i.startIfEnabledOrStop(),(r=this.autocapture)==null||r.startIfEnabled(),(s=this.heatmaps)==null||s.startIfEnabled(),this.surveys.loadIfEnabled(),this.Ps(),(o=this.externalIntegrations)==null||o.startIfEnabledOrStop())}startSessionRecording(e){var n=e===!0,i={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(i).some(Boolean)){var r,s,o,a,l;(r=this.sessionManager)==null||r.checkAndGetSessionAndWindowId(),i.sampling&&((s=this.sessionRecording)==null||s.overrideSampling()),i.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),i.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),i.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var i=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(_e({},SV((r=>r instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:i}),n))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:Eu;return n!==Eu&&(n=Eu+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(Mo))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(Mo))==="identified"}Ds(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Iu(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Yf])&&((n=this.persistence)==null||(n=n.props)==null||!n[tv]))}Fs(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Ds()||this.Ls("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ls(e){return this.config.person_profiles==="never"?(Pe.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.js(tv,!0),!0)}Ps(){var e,n,i,r,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)==null?void 0:e.Fe)!==a&&((i=this.persistence)==null||i.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.Fe)!==a&&((r=this.sessionPersistence)==null||r.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this.Ps(),(ye(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Cs()}opt_out_capturing(){this.consent.optInOut(!1),this.Ps()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Ps()}_is_bot(){return hr?L5(hr,this.config.custom_blocked_useragents):void 0}Cs(){Ae&&(Ae.visibilityState==="visible"?this.bs||(this.bs=!0,this.capture("$pageview",{title:Ae.title},{send_instantly:!0}),this.ys&&(Ae.removeEventListener("visibilitychange",this.ys),this.ys=null)):this.ys||(this.ys=this.Cs.bind(this),an(Ae,"visibilitychange",this.ys)))}debug(e){e===!1?(Y==null||Y.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(Y==null||Y.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var e,n,i,r,s,o,a,l=this.$s||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(Pe.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(i="advanced_disable_decide",r=!1,s=Pe,o=(n="advanced_disable_flags")in(e=l)&&!ye(e[n]),a=i in e&&!ye(e[i]),o?e[n]:a?(s&&s.warn("Config field '"+i+"' is deprecated. Please use '"+n+"' instead. The old field will be removed in a future major version."),e[i]):r)}As(e){if(At(this.config.before_send))return e;var n=Qt(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of n){if(i=r(i),At(i)){var s="Event '"+e.event+"' was rejected in beforeSend function";return TU(e.event)?Pe.warn(s+". This can cause unexpected behavior."):Pe.info(s),null}i.properties&&!Iu(i.properties)||Pe.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return i}getPageViewId(){var e;return(e=this.pageViewManager.ce)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,i){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(i)})}};(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=IU(t.prototype[e[n]])})(B5,["identify"]);var nP,Ba=(nP=Ch[Eu]=new B5,function(){function t(){t.done||(t.done=!0,$5=!1,Rt(Ch,function(e){e._dom_loaded()}))}Ae!=null&&Ae.addEventListener?Ae.readyState==="complete"?t():an(Ae,"DOMContentLoaded",t,{capture:!1}):Y&&Pe.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),nP),z5=b.createContext({client:Ba});function U5(t,e,n){if(n===void 0&&(n=new WeakMap),t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(n.has(t)&&n.get(t)===e)return!0;n.set(t,e);var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var s=0,o=i;s<o.length;s++){var a=o[s];if(!r.includes(a)||!U5(t[a],e[a],n))return!1}return!0}function XH(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=b.useRef(null),o=b.useMemo(function(){return n?(i&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),r&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(i||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),Ba)},[n,i,JSON.stringify(r)]);return b.useEffect(function(){if(!n){var a=s.current;a?(i!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),r&&!U5(r,a.options)&&Ba.set_config(r),s.current={apiKey:i,options:r??{}}):(Ba.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),Ba.init(i,r),s.current={apiKey:i,options:r??{}})}},[n,i,JSON.stringify(r)]),Vt.createElement(z5.Provider,{value:{client:o}},e)}var eS=function(t,e){return eS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},eS(t,e)};function JH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");eS(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Nw=function(t){return typeof t=="function"},ZH={componentStack:null,error:null},QH={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(t){JH(e,t);function e(n){var i=t.call(this,n)||this;return i.state=ZH,i}return e.prototype.componentDidCatch=function(n,i){var r=i.componentStack,s=this.props.additionalProperties;this.setState({error:n,componentStack:r});var o;Nw(s)?o=s(n):typeof s=="object"&&(o=s);var a=this.context.client;a.captureException(n,o)},e.prototype.render=function(){var n=this.props,i=n.children,r=n.fallback,s=this.state;if(s.componentStack==null)return Nw(i)?i():i;var o=Nw(r)?Vt.createElement(r,{error:s.error,componentStack:s.componentStack}):r;return Vt.isValidElement(o)?o:(console.warn(QH.INVALID_FALLBACK),Vt.createElement(Vt.Fragment,null))},e.contextType=z5,e})(Vt.Component);var V5={exports:{}},Ar={},H5={exports:{}},W5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,F){var re=V.length;V.push(F);e:for(;0<re;){var pe=re-1>>>1,Z=V[pe];if(0<r(Z,F))V[pe]=F,V[re]=Z,re=pe;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var F=V[0],re=V.pop();if(re!==F){V[0]=re;e:for(var pe=0,Z=V.length,ce=Z>>>1;pe<ce;){var B=2*(pe+1)-1,L=V[B],U=B+1,k=V[U];if(0>r(L,re))U<Z&&0>r(k,L)?(V[pe]=k,V[U]=re,pe=U):(V[pe]=L,V[B]=re,pe=B);else if(U<Z&&0>r(k,re))V[pe]=k,V[U]=re,pe=U;else break e}}return F}function r(V,F){var re=V.sortIndex-F.sortIndex;return re!==0?re:V.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(V){for(var F=n(c);F!==null;){if(F.callback===null)i(c);else if(F.startTime<=V)i(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function S(V){if(m=!1,x(V),!g)if(n(l)!==null)g=!0,J(_);else{var F=n(c);F!==null&&Q(S,F.startTime-V)}}function _(V,F){g=!1,m&&(m=!1,y(N),N=-1),p=!0;var re=f;try{for(x(F),d=n(l);d!==null&&(!(d.expirationTime>F)||V&&!D());){var pe=d.callback;if(typeof pe=="function"){d.callback=null,f=d.priorityLevel;var Z=pe(d.expirationTime<=F);F=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&i(l),x(F)}else i(l);d=n(l)}if(d!==null)var ce=!0;else{var B=n(c);B!==null&&Q(S,B.startTime-F),ce=!1}return ce}finally{d=null,f=re,p=!1}}var E=!1,C=null,N=-1,R=5,O=-1;function D(){return!(t.unstable_now()-O<R)}function j(){if(C!==null){var V=t.unstable_now();O=V;var F=!0;try{F=C(!0,V)}finally{F?q():(E=!1,C=null)}}else E=!1}var q;if(typeof w=="function")q=function(){w(j)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,K=$.port2;$.port1.onmessage=j,q=function(){K.postMessage(null)}}else q=function(){v(j,0)};function J(V){C=V,E||(E=!0,q())}function Q(V,F){N=v(function(){V(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,J(_))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var re=f;f=F;try{return V()}finally{f=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,F){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var re=f;f=V;try{return F()}finally{f=re}},t.unstable_scheduleCallback=function(V,F,re){var pe=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?pe+re:pe):re=pe,V){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=re+Z,V={id:u++,callback:F,priorityLevel:V,startTime:re,expirationTime:Z,sortIndex:-1},re>pe?(V.sortIndex=re,e(c,V),n(l)===null&&V===n(c)&&(m?(y(N),N=-1):m=!0,Q(S,re-pe))):(V.sortIndex=Z,e(l,V),g||p||(g=!0,J(_))),V},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(V){var F=f;return function(){var re=f;f=F;try{return V.apply(this,arguments)}finally{f=re}}}})(W5);H5.exports=W5;var eW=H5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tW=b,kr=eW;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var G5=new Set,tp={};function ru(t,e){Id(t,e),Id(t+"Capture",e)}function Id(t,e){for(tp[t]=e,t=0;t<e.length;t++)G5.add(e[t])}var ta=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tS=Object.prototype.hasOwnProperty,nW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iP={},rP={};function iW(t){return tS.call(rP,t)?!0:tS.call(iP,t)?!1:nW.test(t)?rP[t]=!0:(iP[t]=!0,!1)}function rW(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sW(t,e,n,i){if(e===null||typeof e>"u"||rW(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ni(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ti={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ti[t]=new Ni(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ti[e]=new Ni(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ti[t]=new Ni(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ti[t]=new Ni(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ti[t]=new Ni(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ti[t]=new Ni(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ti[t]=new Ni(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ti[t]=new Ni(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ti[t]=new Ni(t,5,!1,t.toLowerCase(),null,!1,!1)});var N_=/[\-:]([a-z])/g;function P_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(N_,P_);ti[e]=new Ni(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(N_,P_);ti[e]=new Ni(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(N_,P_);ti[e]=new Ni(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ti[t]=new Ni(t,1,!1,t.toLowerCase(),null,!1,!1)});ti.xlinkHref=new Ni("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ti[t]=new Ni(t,1,!1,t.toLowerCase(),null,!0,!0)});function M_(t,e,n,i){var r=ti.hasOwnProperty(e)?ti[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sW(e,n,r,i)&&(n=null),i||r===null?iW(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var da=tW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jm=Symbol.for("react.element"),Lu=Symbol.for("react.portal"),$u=Symbol.for("react.fragment"),R_=Symbol.for("react.strict_mode"),nS=Symbol.for("react.profiler"),K5=Symbol.for("react.provider"),q5=Symbol.for("react.context"),T_=Symbol.for("react.forward_ref"),iS=Symbol.for("react.suspense"),rS=Symbol.for("react.suspense_list"),O_=Symbol.for("react.memo"),Ma=Symbol.for("react.lazy"),Y5=Symbol.for("react.offscreen"),sP=Symbol.iterator;function Af(t){return t===null||typeof t!="object"?null:(t=sP&&t[sP]||t["@@iterator"],typeof t=="function"?t:null)}var fn=Object.assign,Pw;function ih(t){if(Pw===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pw=e&&e[1]||""}return`
`+Pw+t}var Mw=!1;function Rw(t,e){if(!t||Mw)return"";Mw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Mw=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ih(t):""}function oW(t){switch(t.tag){case 5:return ih(t.type);case 16:return ih("Lazy");case 13:return ih("Suspense");case 19:return ih("SuspenseList");case 0:case 2:case 15:return t=Rw(t.type,!1),t;case 11:return t=Rw(t.type.render,!1),t;case 1:return t=Rw(t.type,!0),t;default:return""}}function sS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $u:return"Fragment";case Lu:return"Portal";case nS:return"Profiler";case R_:return"StrictMode";case iS:return"Suspense";case rS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case q5:return(t.displayName||"Context")+".Consumer";case K5:return(t._context.displayName||"Context")+".Provider";case T_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O_:return e=t.displayName||null,e!==null?e:sS(t.type)||"Memo";case Ma:e=t._payload,t=t._init;try{return sS(t(e))}catch{}}return null}function aW(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sS(e);case 8:return e===R_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function X5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lW(t){var e=X5(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zm(t){t._valueTracker||(t._valueTracker=lW(t))}function J5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=X5(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function uv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function oS(t,e){var n=e.checked;return fn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function oP(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=wl(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Z5(t,e){e=e.checked,e!=null&&M_(t,"checked",e,!1)}function aS(t,e){Z5(t,e);var n=wl(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lS(t,e.type,n):e.hasOwnProperty("defaultValue")&&lS(t,e.type,wl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function aP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lS(t,e,n){(e!=="number"||uv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rh=Array.isArray;function sd(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+wl(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function cS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return fn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(rh(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wl(n)}}function Q5(t,e){var n=wl(e.value),i=wl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function cP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function eI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?eI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qm,tI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qm=Qm||document.createElement("div"),Qm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function np(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Eh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cW=["Webkit","ms","Moz","O"];Object.keys(Eh).forEach(function(t){cW.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Eh[e]=Eh[t]})});function nI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Eh.hasOwnProperty(t)&&Eh[t]?(""+e).trim():e+"px"}function iI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=nI(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var uW=fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dS(t,e){if(e){if(uW[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function fS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hS=null;function I_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pS=null,od=null,ad=null;function uP(t){if(t=cm(t)){if(typeof pS!="function")throw Error(le(280));var e=t.stateNode;e&&(e=qy(e),pS(t.stateNode,t.type,e))}}function rI(t){od?ad?ad.push(t):ad=[t]:od=t}function sI(){if(od){var t=od,e=ad;if(ad=od=null,uP(t),e)for(t=0;t<e.length;t++)uP(e[t])}}function oI(t,e){return t(e)}function aI(){}var Tw=!1;function lI(t,e,n){if(Tw)return t(e,n);Tw=!0;try{return oI(t,e,n)}finally{Tw=!1,(od!==null||ad!==null)&&(aI(),sI())}}function ip(t,e){var n=t.stateNode;if(n===null)return null;var i=qy(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var mS=!1;if(ta)try{var Nf={};Object.defineProperty(Nf,"passive",{get:function(){mS=!0}}),window.addEventListener("test",Nf,Nf),window.removeEventListener("test",Nf,Nf)}catch{mS=!1}function dW(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Ah=!1,dv=null,fv=!1,gS=null,fW={onError:function(t){Ah=!0,dv=t}};function hW(t,e,n,i,r,s,o,a,l){Ah=!1,dv=null,dW.apply(fW,arguments)}function pW(t,e,n,i,r,s,o,a,l){if(hW.apply(this,arguments),Ah){if(Ah){var c=dv;Ah=!1,dv=null}else throw Error(le(198));fv||(fv=!0,gS=c)}}function su(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function cI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dP(t){if(su(t)!==t)throw Error(le(188))}function mW(t){var e=t.alternate;if(!e){if(e=su(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return dP(r),t;if(s===i)return dP(r),e;s=s.sibling}throw Error(le(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==i)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function uI(t){return t=mW(t),t!==null?dI(t):null}function dI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=dI(t);if(e!==null)return e;t=t.sibling}return null}var fI=kr.unstable_scheduleCallback,fP=kr.unstable_cancelCallback,gW=kr.unstable_shouldYield,vW=kr.unstable_requestPaint,wn=kr.unstable_now,yW=kr.unstable_getCurrentPriorityLevel,j_=kr.unstable_ImmediatePriority,hI=kr.unstable_UserBlockingPriority,hv=kr.unstable_NormalPriority,bW=kr.unstable_LowPriority,pI=kr.unstable_IdlePriority,Hy=null,po=null;function wW(t){if(po&&typeof po.onCommitFiberRoot=="function")try{po.onCommitFiberRoot(Hy,t,void 0,(t.current.flags&128)===128)}catch{}}var Ss=Math.clz32?Math.clz32:kW,xW=Math.log,SW=Math.LN2;function kW(t){return t>>>=0,t===0?32:31-(xW(t)/SW|0)|0}var eg=64,tg=4194304;function sh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pv(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=sh(a):(s&=o,s!==0&&(i=sh(s)))}else o=n&~r,o!==0?i=sh(o):s!==0&&(i=sh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ss(e),r=1<<n,i|=t[n],e&=~r;return i}function _W(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CW(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ss(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=_W(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function vS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mI(){var t=eg;return eg<<=1,!(eg&4194240)&&(eg=64),t}function Ow(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function am(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ss(e),t[e]=n}function EW(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ss(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function D_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ss(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Mt=0;function gI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var vI,L_,yI,bI,wI,yS=!1,ng=[],al=null,ll=null,cl=null,rp=new Map,sp=new Map,Fa=[],AW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hP(t,e){switch(t){case"focusin":case"focusout":al=null;break;case"dragenter":case"dragleave":ll=null;break;case"mouseover":case"mouseout":cl=null;break;case"pointerover":case"pointerout":rp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sp.delete(e.pointerId)}}function Pf(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=cm(e),e!==null&&L_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function NW(t,e,n,i,r){switch(e){case"focusin":return al=Pf(al,t,e,n,i,r),!0;case"dragenter":return ll=Pf(ll,t,e,n,i,r),!0;case"mouseover":return cl=Pf(cl,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return rp.set(s,Pf(rp.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,sp.set(s,Pf(sp.get(s)||null,t,e,n,i,r)),!0}return!1}function xI(t){var e=wc(t.target);if(e!==null){var n=su(e);if(n!==null){if(e=n.tag,e===13){if(e=cI(n),e!==null){t.blockedOn=e,wI(t.priority,function(){yI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function g0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);hS=i,n.target.dispatchEvent(i),hS=null}else return e=cm(n),e!==null&&L_(e),t.blockedOn=n,!1;e.shift()}return!0}function pP(t,e,n){g0(t)&&n.delete(e)}function PW(){yS=!1,al!==null&&g0(al)&&(al=null),ll!==null&&g0(ll)&&(ll=null),cl!==null&&g0(cl)&&(cl=null),rp.forEach(pP),sp.forEach(pP)}function Mf(t,e){t.blockedOn===e&&(t.blockedOn=null,yS||(yS=!0,kr.unstable_scheduleCallback(kr.unstable_NormalPriority,PW)))}function op(t){function e(r){return Mf(r,t)}if(0<ng.length){Mf(ng[0],t);for(var n=1;n<ng.length;n++){var i=ng[n];i.blockedOn===t&&(i.blockedOn=null)}}for(al!==null&&Mf(al,t),ll!==null&&Mf(ll,t),cl!==null&&Mf(cl,t),rp.forEach(e),sp.forEach(e),n=0;n<Fa.length;n++)i=Fa[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Fa.length&&(n=Fa[0],n.blockedOn===null);)xI(n),n.blockedOn===null&&Fa.shift()}var ld=da.ReactCurrentBatchConfig,mv=!0;function MW(t,e,n,i){var r=Mt,s=ld.transition;ld.transition=null;try{Mt=1,$_(t,e,n,i)}finally{Mt=r,ld.transition=s}}function RW(t,e,n,i){var r=Mt,s=ld.transition;ld.transition=null;try{Mt=4,$_(t,e,n,i)}finally{Mt=r,ld.transition=s}}function $_(t,e,n,i){if(mv){var r=bS(t,e,n,i);if(r===null)Vw(t,e,i,gv,n),hP(t,i);else if(NW(r,t,e,n,i))i.stopPropagation();else if(hP(t,i),e&4&&-1<AW.indexOf(t)){for(;r!==null;){var s=cm(r);if(s!==null&&vI(s),s=bS(t,e,n,i),s===null&&Vw(t,e,i,gv,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Vw(t,e,i,null,n)}}var gv=null;function bS(t,e,n,i){if(gv=null,t=I_(i),t=wc(t),t!==null)if(e=su(t),e===null)t=null;else if(n=e.tag,n===13){if(t=cI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gv=t,null}function SI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yW()){case j_:return 1;case hI:return 4;case hv:case bW:return 16;case pI:return 536870912;default:return 16}default:return 16}}var qa=null,B_=null,v0=null;function kI(){if(v0)return v0;var t,e=B_,n=e.length,i,r="value"in qa?qa.value:qa.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return v0=r.slice(t,1<i?1-i:void 0)}function y0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ig(){return!0}function mP(){return!1}function Nr(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ig:mP,this.isPropagationStopped=mP,this}return fn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ig)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ig)},persist:function(){},isPersistent:ig}),e}var cf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},F_=Nr(cf),lm=fn({},cf,{view:0,detail:0}),TW=Nr(lm),Iw,jw,Rf,Wy=fn({},lm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:z_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rf&&(Rf&&t.type==="mousemove"?(Iw=t.screenX-Rf.screenX,jw=t.screenY-Rf.screenY):jw=Iw=0,Rf=t),Iw)},movementY:function(t){return"movementY"in t?t.movementY:jw}}),gP=Nr(Wy),OW=fn({},Wy,{dataTransfer:0}),IW=Nr(OW),jW=fn({},lm,{relatedTarget:0}),Dw=Nr(jW),DW=fn({},cf,{animationName:0,elapsedTime:0,pseudoElement:0}),LW=Nr(DW),$W=fn({},cf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BW=Nr($W),FW=fn({},cf,{data:0}),vP=Nr(FW),zW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HW(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VW[t])?!!e[t]:!1}function z_(){return HW}var WW=fn({},lm,{key:function(t){if(t.key){var e=zW[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=y0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UW[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:z_,charCode:function(t){return t.type==="keypress"?y0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?y0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GW=Nr(WW),KW=fn({},Wy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yP=Nr(KW),qW=fn({},lm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:z_}),YW=Nr(qW),XW=fn({},cf,{propertyName:0,elapsedTime:0,pseudoElement:0}),JW=Nr(XW),ZW=fn({},Wy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QW=Nr(ZW),eG=[9,13,27,32],U_=ta&&"CompositionEvent"in window,Nh=null;ta&&"documentMode"in document&&(Nh=document.documentMode);var tG=ta&&"TextEvent"in window&&!Nh,_I=ta&&(!U_||Nh&&8<Nh&&11>=Nh),bP=" ",wP=!1;function CI(t,e){switch(t){case"keyup":return eG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function EI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bu=!1;function nG(t,e){switch(t){case"compositionend":return EI(e);case"keypress":return e.which!==32?null:(wP=!0,bP);case"textInput":return t=e.data,t===bP&&wP?null:t;default:return null}}function iG(t,e){if(Bu)return t==="compositionend"||!U_&&CI(t,e)?(t=kI(),v0=B_=qa=null,Bu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _I&&e.locale!=="ko"?null:e.data;default:return null}}var rG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rG[t.type]:e==="textarea"}function AI(t,e,n,i){rI(i),e=vv(e,"onChange"),0<e.length&&(n=new F_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ph=null,ap=null;function sG(t){$I(t,0)}function Gy(t){var e=Uu(t);if(J5(e))return t}function oG(t,e){if(t==="change")return e}var NI=!1;if(ta){var Lw;if(ta){var $w="oninput"in document;if(!$w){var SP=document.createElement("div");SP.setAttribute("oninput","return;"),$w=typeof SP.oninput=="function"}Lw=$w}else Lw=!1;NI=Lw&&(!document.documentMode||9<document.documentMode)}function kP(){Ph&&(Ph.detachEvent("onpropertychange",PI),ap=Ph=null)}function PI(t){if(t.propertyName==="value"&&Gy(ap)){var e=[];AI(e,ap,t,I_(t)),lI(sG,e)}}function aG(t,e,n){t==="focusin"?(kP(),Ph=e,ap=n,Ph.attachEvent("onpropertychange",PI)):t==="focusout"&&kP()}function lG(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gy(ap)}function cG(t,e){if(t==="click")return Gy(e)}function uG(t,e){if(t==="input"||t==="change")return Gy(e)}function dG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _s=typeof Object.is=="function"?Object.is:dG;function lp(t,e){if(_s(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!tS.call(e,r)||!_s(t[r],e[r]))return!1}return!0}function _P(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function CP(t,e){var n=_P(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_P(n)}}function MI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?MI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function RI(){for(var t=window,e=uv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=uv(t.document)}return e}function V_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fG(t){var e=RI(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&MI(n.ownerDocument.documentElement,n)){if(i!==null&&V_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=CP(n,s);var o=CP(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hG=ta&&"documentMode"in document&&11>=document.documentMode,Fu=null,wS=null,Mh=null,xS=!1;function EP(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xS||Fu==null||Fu!==uv(i)||(i=Fu,"selectionStart"in i&&V_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Mh&&lp(Mh,i)||(Mh=i,i=vv(wS,"onSelect"),0<i.length&&(e=new F_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Fu)))}function rg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zu={animationend:rg("Animation","AnimationEnd"),animationiteration:rg("Animation","AnimationIteration"),animationstart:rg("Animation","AnimationStart"),transitionend:rg("Transition","TransitionEnd")},Bw={},TI={};ta&&(TI=document.createElement("div").style,"AnimationEvent"in window||(delete zu.animationend.animation,delete zu.animationiteration.animation,delete zu.animationstart.animation),"TransitionEvent"in window||delete zu.transitionend.transition);function Ky(t){if(Bw[t])return Bw[t];if(!zu[t])return t;var e=zu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in TI)return Bw[t]=e[n];return t}var OI=Ky("animationend"),II=Ky("animationiteration"),jI=Ky("animationstart"),DI=Ky("transitionend"),LI=new Map,AP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $l(t,e){LI.set(t,e),ru(e,[t])}for(var Fw=0;Fw<AP.length;Fw++){var zw=AP[Fw],pG=zw.toLowerCase(),mG=zw[0].toUpperCase()+zw.slice(1);$l(pG,"on"+mG)}$l(OI,"onAnimationEnd");$l(II,"onAnimationIteration");$l(jI,"onAnimationStart");$l("dblclick","onDoubleClick");$l("focusin","onFocus");$l("focusout","onBlur");$l(DI,"onTransitionEnd");Id("onMouseEnter",["mouseout","mouseover"]);Id("onMouseLeave",["mouseout","mouseover"]);Id("onPointerEnter",["pointerout","pointerover"]);Id("onPointerLeave",["pointerout","pointerover"]);ru("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ru("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ru("onBeforeInput",["compositionend","keypress","textInput","paste"]);ru("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ru("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ru("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gG=new Set("cancel close invalid load scroll toggle".split(" ").concat(oh));function NP(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,pW(i,e,void 0,t),t.currentTarget=null}function $I(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;NP(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;NP(r,a,c),s=l}}}if(fv)throw t=gS,fv=!1,gS=null,t}function zt(t,e){var n=e[ES];n===void 0&&(n=e[ES]=new Set);var i=t+"__bubble";n.has(i)||(BI(e,t,2,!1),n.add(i))}function Uw(t,e,n){var i=0;e&&(i|=4),BI(n,t,i,e)}var sg="_reactListening"+Math.random().toString(36).slice(2);function cp(t){if(!t[sg]){t[sg]=!0,G5.forEach(function(n){n!=="selectionchange"&&(gG.has(n)||Uw(n,!1,t),Uw(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sg]||(e[sg]=!0,Uw("selectionchange",!1,e))}}function BI(t,e,n,i){switch(SI(e)){case 1:var r=MW;break;case 4:r=RW;break;default:r=$_}n=r.bind(null,e,n,t),r=void 0,!mS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Vw(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=wc(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}lI(function(){var c=s,u=I_(n),d=[];e:{var f=LI.get(t);if(f!==void 0){var p=F_,g=t;switch(t){case"keypress":if(y0(n)===0)break e;case"keydown":case"keyup":p=GW;break;case"focusin":g="focus",p=Dw;break;case"focusout":g="blur",p=Dw;break;case"beforeblur":case"afterblur":p=Dw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=gP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=IW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=YW;break;case OI:case II:case jI:p=LW;break;case DI:p=JW;break;case"scroll":p=TW;break;case"wheel":p=QW;break;case"copy":case"cut":case"paste":p=BW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=yP}var m=(e&4)!==0,v=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var w=c,x;w!==null;){x=w;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,y!==null&&(S=ip(w,y),S!=null&&m.push(up(w,S,x)))),v)break;w=w.return}0<m.length&&(f=new p(f,g,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==hS&&(g=n.relatedTarget||n.fromElement)&&(wc(g)||g[na]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?wc(g):null,g!==null&&(v=su(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(m=gP,S="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(m=yP,S="onPointerLeave",y="onPointerEnter",w="pointer"),v=p==null?f:Uu(p),x=g==null?f:Uu(g),f=new m(S,w+"leave",p,n,u),f.target=v,f.relatedTarget=x,S=null,wc(u)===c&&(m=new m(y,w+"enter",g,n,u),m.target=x,m.relatedTarget=v,S=m),v=S,p&&g)t:{for(m=p,y=g,w=0,x=m;x;x=fu(x))w++;for(x=0,S=y;S;S=fu(S))x++;for(;0<w-x;)m=fu(m),w--;for(;0<x-w;)y=fu(y),x--;for(;w--;){if(m===y||y!==null&&m===y.alternate)break t;m=fu(m),y=fu(y)}m=null}else m=null;p!==null&&PP(d,f,p,m,!1),g!==null&&v!==null&&PP(d,v,g,m,!0)}}e:{if(f=c?Uu(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=oG;else if(xP(f))if(NI)_=uG;else{_=lG;var E=aG}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=cG);if(_&&(_=_(t,c))){AI(d,_,n,u);break e}E&&E(t,f,c),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&lS(f,"number",f.value)}switch(E=c?Uu(c):window,t){case"focusin":(xP(E)||E.contentEditable==="true")&&(Fu=E,wS=c,Mh=null);break;case"focusout":Mh=wS=Fu=null;break;case"mousedown":xS=!0;break;case"contextmenu":case"mouseup":case"dragend":xS=!1,EP(d,n,u);break;case"selectionchange":if(hG)break;case"keydown":case"keyup":EP(d,n,u)}var C;if(U_)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Bu?CI(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(_I&&n.locale!=="ko"&&(Bu||N!=="onCompositionStart"?N==="onCompositionEnd"&&Bu&&(C=kI()):(qa=u,B_="value"in qa?qa.value:qa.textContent,Bu=!0)),E=vv(c,N),0<E.length&&(N=new vP(N,t,null,n,u),d.push({event:N,listeners:E}),C?N.data=C:(C=EI(n),C!==null&&(N.data=C)))),(C=tG?nG(t,n):iG(t,n))&&(c=vv(c,"onBeforeInput"),0<c.length&&(u=new vP("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}$I(d,e)})}function up(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vv(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ip(t,n),s!=null&&i.unshift(up(t,s,r)),s=ip(t,e),s!=null&&i.push(up(t,s,r))),t=t.return}return i}function fu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function PP(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=ip(n,s),l!=null&&o.unshift(up(n,l,a))):r||(l=ip(n,s),l!=null&&o.push(up(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var vG=/\r\n?/g,yG=/\u0000|\uFFFD/g;function MP(t){return(typeof t=="string"?t:""+t).replace(vG,`
`).replace(yG,"")}function og(t,e,n){if(e=MP(e),MP(t)!==e&&n)throw Error(le(425))}function yv(){}var SS=null,kS=null;function _S(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var CS=typeof setTimeout=="function"?setTimeout:void 0,bG=typeof clearTimeout=="function"?clearTimeout:void 0,RP=typeof Promise=="function"?Promise:void 0,wG=typeof queueMicrotask=="function"?queueMicrotask:typeof RP<"u"?function(t){return RP.resolve(null).then(t).catch(xG)}:CS;function xG(t){setTimeout(function(){throw t})}function Hw(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),op(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);op(e)}function ul(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function TP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var uf=Math.random().toString(36).slice(2),Qs="__reactFiber$"+uf,dp="__reactProps$"+uf,na="__reactContainer$"+uf,ES="__reactEvents$"+uf,SG="__reactListeners$"+uf,kG="__reactHandles$"+uf;function wc(t){var e=t[Qs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[na]||n[Qs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=TP(t);t!==null;){if(n=t[Qs])return n;t=TP(t)}return e}t=n,n=t.parentNode}return null}function cm(t){return t=t[Qs]||t[na],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Uu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function qy(t){return t[dp]||null}var AS=[],Vu=-1;function Bl(t){return{current:t}}function Wt(t){0>Vu||(t.current=AS[Vu],AS[Vu]=null,Vu--)}function Ft(t,e){Vu++,AS[Vu]=t.current,t.current=e}var xl={},mi=Bl(xl),Xi=Bl(!1),$c=xl;function jd(t,e){var n=t.type.contextTypes;if(!n)return xl;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ji(t){return t=t.childContextTypes,t!=null}function bv(){Wt(Xi),Wt(mi)}function OP(t,e,n){if(mi.current!==xl)throw Error(le(168));Ft(mi,e),Ft(Xi,n)}function FI(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(le(108,aW(t)||"Unknown",r));return fn({},n,i)}function wv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xl,$c=mi.current,Ft(mi,t),Ft(Xi,Xi.current),!0}function IP(t,e,n){var i=t.stateNode;if(!i)throw Error(le(169));n?(t=FI(t,e,$c),i.__reactInternalMemoizedMergedChildContext=t,Wt(Xi),Wt(mi),Ft(mi,t)):Wt(Xi),Ft(Xi,n)}var jo=null,Yy=!1,Ww=!1;function zI(t){jo===null?jo=[t]:jo.push(t)}function _G(t){Yy=!0,zI(t)}function Fl(){if(!Ww&&jo!==null){Ww=!0;var t=0,e=Mt;try{var n=jo;for(Mt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}jo=null,Yy=!1}catch(r){throw jo!==null&&(jo=jo.slice(t+1)),fI(j_,Fl),r}finally{Mt=e,Ww=!1}}return null}var Hu=[],Wu=0,xv=null,Sv=0,Lr=[],$r=0,Bc=null,Xo=1,Jo="";function cc(t,e){Hu[Wu++]=Sv,Hu[Wu++]=xv,xv=t,Sv=e}function UI(t,e,n){Lr[$r++]=Xo,Lr[$r++]=Jo,Lr[$r++]=Bc,Bc=t;var i=Xo;t=Jo;var r=32-Ss(i)-1;i&=~(1<<r),n+=1;var s=32-Ss(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Xo=1<<32-Ss(e)+r|n<<r|i,Jo=s+t}else Xo=1<<s|n<<r|i,Jo=t}function H_(t){t.return!==null&&(cc(t,1),UI(t,1,0))}function W_(t){for(;t===xv;)xv=Hu[--Wu],Hu[Wu]=null,Sv=Hu[--Wu],Hu[Wu]=null;for(;t===Bc;)Bc=Lr[--$r],Lr[$r]=null,Jo=Lr[--$r],Lr[$r]=null,Xo=Lr[--$r],Lr[$r]=null}var wr=null,mr=null,en=!1,ps=null;function VI(t,e){var n=Ur(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function jP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wr=t,mr=ul(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wr=t,mr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bc!==null?{id:Xo,overflow:Jo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ur(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wr=t,mr=null,!0):!1;default:return!1}}function NS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function PS(t){if(en){var e=mr;if(e){var n=e;if(!jP(t,e)){if(NS(t))throw Error(le(418));e=ul(n.nextSibling);var i=wr;e&&jP(t,e)?VI(i,n):(t.flags=t.flags&-4097|2,en=!1,wr=t)}}else{if(NS(t))throw Error(le(418));t.flags=t.flags&-4097|2,en=!1,wr=t}}}function DP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wr=t}function ag(t){if(t!==wr)return!1;if(!en)return DP(t),en=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_S(t.type,t.memoizedProps)),e&&(e=mr)){if(NS(t))throw HI(),Error(le(418));for(;e;)VI(t,e),e=ul(e.nextSibling)}if(DP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mr=ul(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mr=null}}else mr=wr?ul(t.stateNode.nextSibling):null;return!0}function HI(){for(var t=mr;t;)t=ul(t.nextSibling)}function Dd(){mr=wr=null,en=!1}function G_(t){ps===null?ps=[t]:ps.push(t)}var CG=da.ReactCurrentBatchConfig;function Tf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var i=n.stateNode}if(!i)throw Error(le(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function lg(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function LP(t){var e=t._init;return e(t._payload)}function WI(t){function e(y,w){if(t){var x=y.deletions;x===null?(y.deletions=[w],y.flags|=16):x.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function i(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function r(y,w){return y=pl(y,w),y.index=0,y.sibling=null,y}function s(y,w,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<w?(y.flags|=2,w):x):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,x,S){return w===null||w.tag!==6?(w=Zw(x,y.mode,S),w.return=y,w):(w=r(w,x),w.return=y,w)}function l(y,w,x,S){var _=x.type;return _===$u?u(y,w,x.props.children,S,x.key):w!==null&&(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ma&&LP(_)===w.type)?(S=r(w,x.props),S.ref=Tf(y,w,x),S.return=y,S):(S=C0(x.type,x.key,x.props,null,y.mode,S),S.ref=Tf(y,w,x),S.return=y,S)}function c(y,w,x,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=Qw(x,y.mode,S),w.return=y,w):(w=r(w,x.children||[]),w.return=y,w)}function u(y,w,x,S,_){return w===null||w.tag!==7?(w=Mc(x,y.mode,S,_),w.return=y,w):(w=r(w,x),w.return=y,w)}function d(y,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Zw(""+w,y.mode,x),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Jm:return x=C0(w.type,w.key,w.props,null,y.mode,x),x.ref=Tf(y,null,w),x.return=y,x;case Lu:return w=Qw(w,y.mode,x),w.return=y,w;case Ma:var S=w._init;return d(y,S(w._payload),x)}if(rh(w)||Af(w))return w=Mc(w,y.mode,x,null),w.return=y,w;lg(y,w)}return null}function f(y,w,x,S){var _=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(y,w,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Jm:return x.key===_?l(y,w,x,S):null;case Lu:return x.key===_?c(y,w,x,S):null;case Ma:return _=x._init,f(y,w,_(x._payload),S)}if(rh(x)||Af(x))return _!==null?null:u(y,w,x,S,null);lg(y,x)}return null}function p(y,w,x,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(x)||null,a(w,y,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Jm:return y=y.get(S.key===null?x:S.key)||null,l(w,y,S,_);case Lu:return y=y.get(S.key===null?x:S.key)||null,c(w,y,S,_);case Ma:var E=S._init;return p(y,w,x,E(S._payload),_)}if(rh(S)||Af(S))return y=y.get(x)||null,u(w,y,S,_,null);lg(w,S)}return null}function g(y,w,x,S){for(var _=null,E=null,C=w,N=w=0,R=null;C!==null&&N<x.length;N++){C.index>N?(R=C,C=null):R=C.sibling;var O=f(y,C,x[N],S);if(O===null){C===null&&(C=R);break}t&&C&&O.alternate===null&&e(y,C),w=s(O,w,N),E===null?_=O:E.sibling=O,E=O,C=R}if(N===x.length)return n(y,C),en&&cc(y,N),_;if(C===null){for(;N<x.length;N++)C=d(y,x[N],S),C!==null&&(w=s(C,w,N),E===null?_=C:E.sibling=C,E=C);return en&&cc(y,N),_}for(C=i(y,C);N<x.length;N++)R=p(C,y,N,x[N],S),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?N:R.key),w=s(R,w,N),E===null?_=R:E.sibling=R,E=R);return t&&C.forEach(function(D){return e(y,D)}),en&&cc(y,N),_}function m(y,w,x,S){var _=Af(x);if(typeof _!="function")throw Error(le(150));if(x=_.call(x),x==null)throw Error(le(151));for(var E=_=null,C=w,N=w=0,R=null,O=x.next();C!==null&&!O.done;N++,O=x.next()){C.index>N?(R=C,C=null):R=C.sibling;var D=f(y,C,O.value,S);if(D===null){C===null&&(C=R);break}t&&C&&D.alternate===null&&e(y,C),w=s(D,w,N),E===null?_=D:E.sibling=D,E=D,C=R}if(O.done)return n(y,C),en&&cc(y,N),_;if(C===null){for(;!O.done;N++,O=x.next())O=d(y,O.value,S),O!==null&&(w=s(O,w,N),E===null?_=O:E.sibling=O,E=O);return en&&cc(y,N),_}for(C=i(y,C);!O.done;N++,O=x.next())O=p(C,y,N,O.value,S),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?N:O.key),w=s(O,w,N),E===null?_=O:E.sibling=O,E=O);return t&&C.forEach(function(j){return e(y,j)}),en&&cc(y,N),_}function v(y,w,x,S){if(typeof x=="object"&&x!==null&&x.type===$u&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Jm:e:{for(var _=x.key,E=w;E!==null;){if(E.key===_){if(_=x.type,_===$u){if(E.tag===7){n(y,E.sibling),w=r(E,x.props.children),w.return=y,y=w;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ma&&LP(_)===E.type){n(y,E.sibling),w=r(E,x.props),w.ref=Tf(y,E,x),w.return=y,y=w;break e}n(y,E);break}else e(y,E);E=E.sibling}x.type===$u?(w=Mc(x.props.children,y.mode,S,x.key),w.return=y,y=w):(S=C0(x.type,x.key,x.props,null,y.mode,S),S.ref=Tf(y,w,x),S.return=y,y=S)}return o(y);case Lu:e:{for(E=x.key;w!==null;){if(w.key===E)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){n(y,w.sibling),w=r(w,x.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=Qw(x,y.mode,S),w.return=y,y=w}return o(y);case Ma:return E=x._init,v(y,w,E(x._payload),S)}if(rh(x))return g(y,w,x,S);if(Af(x))return m(y,w,x,S);lg(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(n(y,w.sibling),w=r(w,x),w.return=y,y=w):(n(y,w),w=Zw(x,y.mode,S),w.return=y,y=w),o(y)):n(y,w)}return v}var Ld=WI(!0),GI=WI(!1),kv=Bl(null),_v=null,Gu=null,K_=null;function q_(){K_=Gu=_v=null}function Y_(t){var e=kv.current;Wt(kv),t._currentValue=e}function MS(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function cd(t,e){_v=t,K_=Gu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qi=!0),t.firstContext=null)}function Qr(t){var e=t._currentValue;if(K_!==t)if(t={context:t,memoizedValue:e,next:null},Gu===null){if(_v===null)throw Error(le(308));Gu=t,_v.dependencies={lanes:0,firstContext:t}}else Gu=Gu.next=t;return e}var xc=null;function X_(t){xc===null?xc=[t]:xc.push(t)}function KI(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,X_(e)):(n.next=r.next,r.next=n),e.interleaved=n,ia(t,i)}function ia(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ra=!1;function J_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dl(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,xt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ia(t,n)}return r=i.interleaved,r===null?(e.next=e,X_(i)):(e.next=r.next,r.next=e),i.interleaved=e,ia(t,n)}function b0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,D_(t,n)}}function $P(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cv(t,e,n,i){var r=t.updateQueue;Ra=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(f=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=fn({},d,f);break e;case 2:Ra=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);zc|=o,t.lanes=o,t.memoizedState=d}}function BP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(le(191,r));r.call(i)}}}var um={},mo=Bl(um),fp=Bl(um),hp=Bl(um);function Sc(t){if(t===um)throw Error(le(174));return t}function Z_(t,e){switch(Ft(hp,e),Ft(fp,t),Ft(mo,um),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uS(e,t)}Wt(mo),Ft(mo,e)}function $d(){Wt(mo),Wt(fp),Wt(hp)}function YI(t){Sc(hp.current);var e=Sc(mo.current),n=uS(e,t.type);e!==n&&(Ft(fp,t),Ft(mo,n))}function Q_(t){fp.current===t&&(Wt(mo),Wt(fp))}var on=Bl(0);function Ev(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gw=[];function eC(){for(var t=0;t<Gw.length;t++)Gw[t]._workInProgressVersionPrimary=null;Gw.length=0}var w0=da.ReactCurrentDispatcher,Kw=da.ReactCurrentBatchConfig,Fc=0,dn=null,Nn=null,Ln=null,Av=!1,Rh=!1,pp=0,EG=0;function si(){throw Error(le(321))}function tC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_s(t[n],e[n]))return!1;return!0}function nC(t,e,n,i,r,s){if(Fc=s,dn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,w0.current=t===null||t.memoizedState===null?MG:RG,t=n(i,r),Rh){s=0;do{if(Rh=!1,pp=0,25<=s)throw Error(le(301));s+=1,Ln=Nn=null,e.updateQueue=null,w0.current=TG,t=n(i,r)}while(Rh)}if(w0.current=Nv,e=Nn!==null&&Nn.next!==null,Fc=0,Ln=Nn=dn=null,Av=!1,e)throw Error(le(300));return t}function iC(){var t=pp!==0;return pp=0,t}function Us(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?dn.memoizedState=Ln=t:Ln=Ln.next=t,Ln}function es(){if(Nn===null){var t=dn.alternate;t=t!==null?t.memoizedState:null}else t=Nn.next;var e=Ln===null?dn.memoizedState:Ln.next;if(e!==null)Ln=e,Nn=t;else{if(t===null)throw Error(le(310));Nn=t,t={memoizedState:Nn.memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},Ln===null?dn.memoizedState=Ln=t:Ln=Ln.next=t}return Ln}function mp(t,e){return typeof e=="function"?e(t):e}function qw(t){var e=es(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var i=Nn,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Fc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,dn.lanes|=u,zc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,_s(i,e.memoizedState)||(qi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,dn.lanes|=s,zc|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yw(t){var e=es(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);_s(s,e.memoizedState)||(qi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function XI(){}function JI(t,e){var n=dn,i=es(),r=e(),s=!_s(i.memoizedState,r);if(s&&(i.memoizedState=r,qi=!0),i=i.queue,rC(ej.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Ln!==null&&Ln.memoizedState.tag&1){if(n.flags|=2048,gp(9,QI.bind(null,n,i,r,e),void 0,null),$n===null)throw Error(le(349));Fc&30||ZI(n,e,r)}return r}function ZI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=dn.updateQueue,e===null?(e={lastEffect:null,stores:null},dn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QI(t,e,n,i){e.value=n,e.getSnapshot=i,tj(e)&&nj(t)}function ej(t,e,n){return n(function(){tj(e)&&nj(t)})}function tj(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_s(t,n)}catch{return!0}}function nj(t){var e=ia(t,1);e!==null&&ks(e,t,1,-1)}function FP(t){var e=Us();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mp,lastRenderedState:t},e.queue=t,t=t.dispatch=PG.bind(null,dn,t),[e.memoizedState,t]}function gp(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=dn.updateQueue,e===null?(e={lastEffect:null,stores:null},dn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function ij(){return es().memoizedState}function x0(t,e,n,i){var r=Us();dn.flags|=t,r.memoizedState=gp(1|e,n,void 0,i===void 0?null:i)}function Xy(t,e,n,i){var r=es();i=i===void 0?null:i;var s=void 0;if(Nn!==null){var o=Nn.memoizedState;if(s=o.destroy,i!==null&&tC(i,o.deps)){r.memoizedState=gp(e,n,s,i);return}}dn.flags|=t,r.memoizedState=gp(1|e,n,s,i)}function zP(t,e){return x0(8390656,8,t,e)}function rC(t,e){return Xy(2048,8,t,e)}function rj(t,e){return Xy(4,2,t,e)}function sj(t,e){return Xy(4,4,t,e)}function oj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function aj(t,e,n){return n=n!=null?n.concat([t]):null,Xy(4,4,oj.bind(null,e,t),n)}function sC(){}function lj(t,e){var n=es();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&tC(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function cj(t,e){var n=es();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&tC(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function uj(t,e,n){return Fc&21?(_s(n,e)||(n=mI(),dn.lanes|=n,zc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qi=!0),t.memoizedState=n)}function AG(t,e){var n=Mt;Mt=n!==0&&4>n?n:4,t(!0);var i=Kw.transition;Kw.transition={};try{t(!1),e()}finally{Mt=n,Kw.transition=i}}function dj(){return es().memoizedState}function NG(t,e,n){var i=hl(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},fj(t))hj(e,n);else if(n=KI(t,e,n,i),n!==null){var r=ki();ks(n,t,i,r),pj(n,e,i)}}function PG(t,e,n){var i=hl(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(fj(t))hj(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,_s(a,o)){var l=e.interleaved;l===null?(r.next=r,X_(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=KI(t,e,r,i),n!==null&&(r=ki(),ks(n,t,i,r),pj(n,e,i))}}function fj(t){var e=t.alternate;return t===dn||e!==null&&e===dn}function hj(t,e){Rh=Av=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function pj(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,D_(t,n)}}var Nv={readContext:Qr,useCallback:si,useContext:si,useEffect:si,useImperativeHandle:si,useInsertionEffect:si,useLayoutEffect:si,useMemo:si,useReducer:si,useRef:si,useState:si,useDebugValue:si,useDeferredValue:si,useTransition:si,useMutableSource:si,useSyncExternalStore:si,useId:si,unstable_isNewReconciler:!1},MG={readContext:Qr,useCallback:function(t,e){return Us().memoizedState=[t,e===void 0?null:e],t},useContext:Qr,useEffect:zP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,x0(4194308,4,oj.bind(null,e,t),n)},useLayoutEffect:function(t,e){return x0(4194308,4,t,e)},useInsertionEffect:function(t,e){return x0(4,2,t,e)},useMemo:function(t,e){var n=Us();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Us();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=NG.bind(null,dn,t),[i.memoizedState,t]},useRef:function(t){var e=Us();return t={current:t},e.memoizedState=t},useState:FP,useDebugValue:sC,useDeferredValue:function(t){return Us().memoizedState=t},useTransition:function(){var t=FP(!1),e=t[0];return t=AG.bind(null,t[1]),Us().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=dn,r=Us();if(en){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),$n===null)throw Error(le(349));Fc&30||ZI(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,zP(ej.bind(null,i,s,t),[t]),i.flags|=2048,gp(9,QI.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Us(),e=$n.identifierPrefix;if(en){var n=Jo,i=Xo;n=(i&~(1<<32-Ss(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=pp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=EG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},RG={readContext:Qr,useCallback:lj,useContext:Qr,useEffect:rC,useImperativeHandle:aj,useInsertionEffect:rj,useLayoutEffect:sj,useMemo:cj,useReducer:qw,useRef:ij,useState:function(){return qw(mp)},useDebugValue:sC,useDeferredValue:function(t){var e=es();return uj(e,Nn.memoizedState,t)},useTransition:function(){var t=qw(mp)[0],e=es().memoizedState;return[t,e]},useMutableSource:XI,useSyncExternalStore:JI,useId:dj,unstable_isNewReconciler:!1},TG={readContext:Qr,useCallback:lj,useContext:Qr,useEffect:rC,useImperativeHandle:aj,useInsertionEffect:rj,useLayoutEffect:sj,useMemo:cj,useReducer:Yw,useRef:ij,useState:function(){return Yw(mp)},useDebugValue:sC,useDeferredValue:function(t){var e=es();return Nn===null?e.memoizedState=t:uj(e,Nn.memoizedState,t)},useTransition:function(){var t=Yw(mp)[0],e=es().memoizedState;return[t,e]},useMutableSource:XI,useSyncExternalStore:JI,useId:dj,unstable_isNewReconciler:!1};function cs(t,e){if(t&&t.defaultProps){e=fn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function RS(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:fn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jy={isMounted:function(t){return(t=t._reactInternals)?su(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ki(),r=hl(t),s=Zo(i,r);s.payload=e,n!=null&&(s.callback=n),e=dl(t,s,r),e!==null&&(ks(e,t,r,i),b0(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ki(),r=hl(t),s=Zo(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=dl(t,s,r),e!==null&&(ks(e,t,r,i),b0(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ki(),i=hl(t),r=Zo(n,i);r.tag=2,e!=null&&(r.callback=e),e=dl(t,r,i),e!==null&&(ks(e,t,i,n),b0(e,t,i))}};function UP(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!lp(n,i)||!lp(r,s):!0}function mj(t,e,n){var i=!1,r=xl,s=e.contextType;return typeof s=="object"&&s!==null?s=Qr(s):(r=Ji(e)?$c:mi.current,i=e.contextTypes,s=(i=i!=null)?jd(t,r):xl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jy,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function VP(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Jy.enqueueReplaceState(e,e.state,null)}function TS(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},J_(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Qr(s):(s=Ji(e)?$c:mi.current,r.context=jd(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(RS(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Jy.enqueueReplaceState(r,r.state,null),Cv(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Bd(t,e){try{var n="",i=e;do n+=oW(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Xw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function OS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var OG=typeof WeakMap=="function"?WeakMap:Map;function gj(t,e,n){n=Zo(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Mv||(Mv=!0,VS=i),OS(t,e)},n}function vj(t,e,n){n=Zo(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){OS(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){OS(t,e),typeof i!="function"&&(fl===null?fl=new Set([this]):fl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function HP(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new OG;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=KG.bind(null,t,e,n),e.then(t,t))}function WP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function GP(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zo(-1,1),e.tag=2,dl(n,e,1))),n.lanes|=1),t)}var IG=da.ReactCurrentOwner,qi=!1;function Si(t,e,n,i){e.child=t===null?GI(e,null,n,i):Ld(e,t.child,n,i)}function KP(t,e,n,i,r){n=n.render;var s=e.ref;return cd(e,r),i=nC(t,e,n,i,s,r),n=iC(),t!==null&&!qi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ra(t,e,r)):(en&&n&&H_(e),e.flags|=1,Si(t,e,i,r),e.child)}function qP(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!hC(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,yj(t,e,s,i,r)):(t=C0(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:lp,n(o,i)&&t.ref===e.ref)return ra(t,e,r)}return e.flags|=1,t=pl(s,i),t.ref=e.ref,t.return=e,e.child=t}function yj(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(lp(s,i)&&t.ref===e.ref)if(qi=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(qi=!0);else return e.lanes=t.lanes,ra(t,e,r)}return IS(t,e,n,i,r)}function bj(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(qu,cr),cr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ft(qu,cr),cr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Ft(qu,cr),cr|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Ft(qu,cr),cr|=i;return Si(t,e,r,n),e.child}function wj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function IS(t,e,n,i,r){var s=Ji(n)?$c:mi.current;return s=jd(e,s),cd(e,r),n=nC(t,e,n,i,s,r),i=iC(),t!==null&&!qi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ra(t,e,r)):(en&&i&&H_(e),e.flags|=1,Si(t,e,n,r),e.child)}function YP(t,e,n,i,r){if(Ji(n)){var s=!0;wv(e)}else s=!1;if(cd(e,r),e.stateNode===null)S0(t,e),mj(e,n,i),TS(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Qr(c):(c=Ji(n)?$c:mi.current,c=jd(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&VP(e,o,i,c),Ra=!1;var f=e.memoizedState;o.state=f,Cv(e,i,o,r),l=e.memoizedState,a!==i||f!==l||Xi.current||Ra?(typeof u=="function"&&(RS(e,n,u,i),l=e.memoizedState),(a=Ra||UP(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,qI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:cs(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Qr(l):(l=Ji(n)?$c:mi.current,l=jd(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&VP(e,o,i,l),Ra=!1,f=e.memoizedState,o.state=f,Cv(e,i,o,r);var g=e.memoizedState;a!==d||f!==g||Xi.current||Ra?(typeof p=="function"&&(RS(e,n,p,i),g=e.memoizedState),(c=Ra||UP(e,n,c,i,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return jS(t,e,n,i,s,r)}function jS(t,e,n,i,r,s){wj(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&IP(e,n,!1),ra(t,e,s);i=e.stateNode,IG.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Ld(e,t.child,null,s),e.child=Ld(e,null,a,s)):Si(t,e,a,s),e.memoizedState=i.state,r&&IP(e,n,!0),e.child}function xj(t){var e=t.stateNode;e.pendingContext?OP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&OP(t,e.context,!1),Z_(t,e.containerInfo)}function XP(t,e,n,i,r){return Dd(),G_(r),e.flags|=256,Si(t,e,n,i),e.child}var DS={dehydrated:null,treeContext:null,retryLane:0};function LS(t){return{baseLanes:t,cachePool:null,transitions:null}}function Sj(t,e,n){var i=e.pendingProps,r=on.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ft(on,r&1),t===null)return PS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=eb(o,i,0,null),t=Mc(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=LS(n),e.memoizedState=DS,t):oC(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return jG(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=pl(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=pl(a,s):(s=Mc(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?LS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=DS,i}return s=t.child,t=s.sibling,i=pl(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function oC(t,e){return e=eb({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cg(t,e,n,i){return i!==null&&G_(i),Ld(e,t.child,null,n),t=oC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jG(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Xw(Error(le(422))),cg(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=eb({mode:"visible",children:i.children},r,0,null),s=Mc(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Ld(e,t.child,null,o),e.child.memoizedState=LS(o),e.memoizedState=DS,s);if(!(e.mode&1))return cg(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(le(419)),i=Xw(s,i,void 0),cg(t,e,o,i)}if(a=(o&t.childLanes)!==0,qi||a){if(i=$n,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ia(t,r),ks(i,t,r,-1))}return fC(),i=Xw(Error(le(421))),cg(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=qG.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,mr=ul(r.nextSibling),wr=e,en=!0,ps=null,t!==null&&(Lr[$r++]=Xo,Lr[$r++]=Jo,Lr[$r++]=Bc,Xo=t.id,Jo=t.overflow,Bc=e),e=oC(e,i.children),e.flags|=4096,e)}function JP(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),MS(t.return,e,n)}function Jw(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function kj(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Si(t,e,i.children,n),i=on.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&JP(t,n,e);else if(t.tag===19)JP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ft(on,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ev(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Jw(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ev(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Jw(e,!0,n,null,s);break;case"together":Jw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function S0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ra(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=pl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DG(t,e,n){switch(e.tag){case 3:xj(e),Dd();break;case 5:YI(e);break;case 1:Ji(e.type)&&wv(e);break;case 4:Z_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ft(kv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ft(on,on.current&1),e.flags|=128,null):n&e.child.childLanes?Sj(t,e,n):(Ft(on,on.current&1),t=ra(t,e,n),t!==null?t.sibling:null);Ft(on,on.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return kj(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ft(on,on.current),i)break;return null;case 22:case 23:return e.lanes=0,bj(t,e,n)}return ra(t,e,n)}var _j,$S,Cj,Ej;_j=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$S=function(){};Cj=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Sc(mo.current);var s=null;switch(n){case"input":r=oS(t,r),i=oS(t,i),s=[];break;case"select":r=fn({},r,{value:void 0}),i=fn({},i,{value:void 0}),s=[];break;case"textarea":r=cS(t,r),i=cS(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=yv)}dS(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(tp.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(tp.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&zt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Ej=function(t,e,n,i){n!==i&&(e.flags|=4)};function Of(t,e){if(!en)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function oi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function LG(t,e,n){var i=e.pendingProps;switch(W_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oi(e),null;case 1:return Ji(e.type)&&bv(),oi(e),null;case 3:return i=e.stateNode,$d(),Wt(Xi),Wt(mi),eC(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ag(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ps!==null&&(GS(ps),ps=null))),$S(t,e),oi(e),null;case 5:Q_(e);var r=Sc(hp.current);if(n=e.type,t!==null&&e.stateNode!=null)Cj(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(le(166));return oi(e),null}if(t=Sc(mo.current),ag(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Qs]=e,i[dp]=s,t=(e.mode&1)!==0,n){case"dialog":zt("cancel",i),zt("close",i);break;case"iframe":case"object":case"embed":zt("load",i);break;case"video":case"audio":for(r=0;r<oh.length;r++)zt(oh[r],i);break;case"source":zt("error",i);break;case"img":case"image":case"link":zt("error",i),zt("load",i);break;case"details":zt("toggle",i);break;case"input":oP(i,s),zt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},zt("invalid",i);break;case"textarea":lP(i,s),zt("invalid",i)}dS(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&og(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&og(i.textContent,a,t),r=["children",""+a]):tp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&zt("scroll",i)}switch(n){case"input":Zm(i),aP(i,s,!0);break;case"textarea":Zm(i),cP(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=yv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=eI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Qs]=e,t[dp]=i,_j(t,e,!1,!1),e.stateNode=t;e:{switch(o=fS(n,i),n){case"dialog":zt("cancel",t),zt("close",t),r=i;break;case"iframe":case"object":case"embed":zt("load",t),r=i;break;case"video":case"audio":for(r=0;r<oh.length;r++)zt(oh[r],t);r=i;break;case"source":zt("error",t),r=i;break;case"img":case"image":case"link":zt("error",t),zt("load",t),r=i;break;case"details":zt("toggle",t),r=i;break;case"input":oP(t,i),r=oS(t,i),zt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=fn({},i,{value:void 0}),zt("invalid",t);break;case"textarea":lP(t,i),r=cS(t,i),zt("invalid",t);break;default:r=i}dS(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?iI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&tI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&np(t,l):typeof l=="number"&&np(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(tp.hasOwnProperty(s)?l!=null&&s==="onScroll"&&zt("scroll",t):l!=null&&M_(t,s,l,o))}switch(n){case"input":Zm(t),aP(t,i,!1);break;case"textarea":Zm(t),cP(t);break;case"option":i.value!=null&&t.setAttribute("value",""+wl(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?sd(t,!!i.multiple,s,!1):i.defaultValue!=null&&sd(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=yv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return oi(e),null;case 6:if(t&&e.stateNode!=null)Ej(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(le(166));if(n=Sc(hp.current),Sc(mo.current),ag(e)){if(i=e.stateNode,n=e.memoizedProps,i[Qs]=e,(s=i.nodeValue!==n)&&(t=wr,t!==null))switch(t.tag){case 3:og(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&og(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Qs]=e,e.stateNode=i}return oi(e),null;case 13:if(Wt(on),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(en&&mr!==null&&e.mode&1&&!(e.flags&128))HI(),Dd(),e.flags|=98560,s=!1;else if(s=ag(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(le(317));s[Qs]=e}else Dd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;oi(e),s=!1}else ps!==null&&(GS(ps),ps=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||on.current&1?On===0&&(On=3):fC())),e.updateQueue!==null&&(e.flags|=4),oi(e),null);case 4:return $d(),$S(t,e),t===null&&cp(e.stateNode.containerInfo),oi(e),null;case 10:return Y_(e.type._context),oi(e),null;case 17:return Ji(e.type)&&bv(),oi(e),null;case 19:if(Wt(on),s=e.memoizedState,s===null)return oi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Of(s,!1);else{if(On!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ev(t),o!==null){for(e.flags|=128,Of(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ft(on,on.current&1|2),e.child}t=t.sibling}s.tail!==null&&wn()>Fd&&(e.flags|=128,i=!0,Of(s,!1),e.lanes=4194304)}else{if(!i)if(t=Ev(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Of(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!en)return oi(e),null}else 2*wn()-s.renderingStartTime>Fd&&n!==1073741824&&(e.flags|=128,i=!0,Of(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=wn(),e.sibling=null,n=on.current,Ft(on,i?n&1|2:n&1),e):(oi(e),null);case 22:case 23:return dC(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?cr&1073741824&&(oi(e),e.subtreeFlags&6&&(e.flags|=8192)):oi(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function $G(t,e){switch(W_(e),e.tag){case 1:return Ji(e.type)&&bv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $d(),Wt(Xi),Wt(mi),eC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Q_(e),null;case 13:if(Wt(on),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));Dd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Wt(on),null;case 4:return $d(),null;case 10:return Y_(e.type._context),null;case 22:case 23:return dC(),null;case 24:return null;default:return null}}var ug=!1,fi=!1,BG=typeof WeakSet=="function"?WeakSet:Set,Me=null;function Ku(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){pn(t,e,i)}else n.current=null}function BS(t,e,n){try{n()}catch(i){pn(t,e,i)}}var ZP=!1;function FG(t,e){if(SS=mv,t=RI(),V_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(kS={focusedElem:t,selectionRange:n},mv=!1,Me=e;Me!==null;)if(e=Me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Me=t;else for(;Me!==null;){e=Me;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:cs(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(S){pn(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Me=t;break}Me=e.return}return g=ZP,ZP=!1,g}function Th(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&BS(e,n,s)}r=r.next}while(r!==i)}}function Zy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function FS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Aj(t){var e=t.alternate;e!==null&&(t.alternate=null,Aj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qs],delete e[dp],delete e[ES],delete e[SG],delete e[kG])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Nj(t){return t.tag===5||t.tag===3||t.tag===4}function QP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Nj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yv));else if(i!==4&&(t=t.child,t!==null))for(zS(t,e,n),t=t.sibling;t!==null;)zS(t,e,n),t=t.sibling}function US(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(US(t,e,n),t=t.sibling;t!==null;)US(t,e,n),t=t.sibling}var Vn=null,hs=!1;function Sa(t,e,n){for(n=n.child;n!==null;)Pj(t,e,n),n=n.sibling}function Pj(t,e,n){if(po&&typeof po.onCommitFiberUnmount=="function")try{po.onCommitFiberUnmount(Hy,n)}catch{}switch(n.tag){case 5:fi||Ku(n,e);case 6:var i=Vn,r=hs;Vn=null,Sa(t,e,n),Vn=i,hs=r,Vn!==null&&(hs?(t=Vn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vn.removeChild(n.stateNode));break;case 18:Vn!==null&&(hs?(t=Vn,n=n.stateNode,t.nodeType===8?Hw(t.parentNode,n):t.nodeType===1&&Hw(t,n),op(t)):Hw(Vn,n.stateNode));break;case 4:i=Vn,r=hs,Vn=n.stateNode.containerInfo,hs=!0,Sa(t,e,n),Vn=i,hs=r;break;case 0:case 11:case 14:case 15:if(!fi&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&BS(n,e,o),r=r.next}while(r!==i)}Sa(t,e,n);break;case 1:if(!fi&&(Ku(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){pn(n,e,a)}Sa(t,e,n);break;case 21:Sa(t,e,n);break;case 22:n.mode&1?(fi=(i=fi)||n.memoizedState!==null,Sa(t,e,n),fi=i):Sa(t,e,n);break;default:Sa(t,e,n)}}function e4(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new BG),e.forEach(function(i){var r=YG.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ss(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Vn=a.stateNode,hs=!1;break e;case 3:Vn=a.stateNode.containerInfo,hs=!0;break e;case 4:Vn=a.stateNode.containerInfo,hs=!0;break e}a=a.return}if(Vn===null)throw Error(le(160));Pj(s,o,r),Vn=null,hs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){pn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Mj(e,t),e=e.sibling}function Mj(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ss(e,t),Os(t),i&4){try{Th(3,t,t.return),Zy(3,t)}catch(m){pn(t,t.return,m)}try{Th(5,t,t.return)}catch(m){pn(t,t.return,m)}}break;case 1:ss(e,t),Os(t),i&512&&n!==null&&Ku(n,n.return);break;case 5:if(ss(e,t),Os(t),i&512&&n!==null&&Ku(n,n.return),t.flags&32){var r=t.stateNode;try{np(r,"")}catch(m){pn(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Z5(r,s),fS(a,o);var c=fS(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?iI(r,d):u==="dangerouslySetInnerHTML"?tI(r,d):u==="children"?np(r,d):M_(r,u,d,c)}switch(a){case"input":aS(r,s);break;case"textarea":Q5(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?sd(r,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?sd(r,!!s.multiple,s.defaultValue,!0):sd(r,!!s.multiple,s.multiple?[]:"",!1))}r[dp]=s}catch(m){pn(t,t.return,m)}}break;case 6:if(ss(e,t),Os(t),i&4){if(t.stateNode===null)throw Error(le(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){pn(t,t.return,m)}}break;case 3:if(ss(e,t),Os(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{op(e.containerInfo)}catch(m){pn(t,t.return,m)}break;case 4:ss(e,t),Os(t);break;case 13:ss(e,t),Os(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(cC=wn())),i&4&&e4(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(fi=(c=fi)||u,ss(e,t),fi=c):ss(e,t),Os(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Me=t,u=t.child;u!==null;){for(d=Me=u;Me!==null;){switch(f=Me,p=f.child,f.tag){case 0:case 11:case 14:case 15:Th(4,f,f.return);break;case 1:Ku(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){pn(i,n,m)}}break;case 5:Ku(f,f.return);break;case 22:if(f.memoizedState!==null){n4(d);continue}}p!==null?(p.return=f,Me=p):n4(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=nI("display",o))}catch(m){pn(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){pn(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ss(e,t),Os(t),i&4&&e4(t);break;case 21:break;default:ss(e,t),Os(t)}}function Os(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Nj(n)){var i=n;break e}n=n.return}throw Error(le(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(np(r,""),i.flags&=-33);var s=QP(t);US(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=QP(t);zS(t,a,o);break;default:throw Error(le(161))}}catch(l){pn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zG(t,e,n){Me=t,Rj(t)}function Rj(t,e,n){for(var i=(t.mode&1)!==0;Me!==null;){var r=Me,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||ug;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||fi;a=ug;var c=fi;if(ug=o,(fi=l)&&!c)for(Me=r;Me!==null;)o=Me,l=o.child,o.tag===22&&o.memoizedState!==null?i4(r):l!==null?(l.return=o,Me=l):i4(r);for(;s!==null;)Me=s,Rj(s),s=s.sibling;Me=r,ug=a,fi=c}t4(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Me=s):t4(t)}}function t4(t){for(;Me!==null;){var e=Me;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fi||Zy(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!fi)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:cs(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&BP(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}BP(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&op(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}fi||e.flags&512&&FS(e)}catch(f){pn(e,e.return,f)}}if(e===t){Me=null;break}if(n=e.sibling,n!==null){n.return=e.return,Me=n;break}Me=e.return}}function n4(t){for(;Me!==null;){var e=Me;if(e===t){Me=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Me=n;break}Me=e.return}}function i4(t){for(;Me!==null;){var e=Me;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zy(4,e)}catch(l){pn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){pn(e,r,l)}}var s=e.return;try{FS(e)}catch(l){pn(e,s,l)}break;case 5:var o=e.return;try{FS(e)}catch(l){pn(e,o,l)}}}catch(l){pn(e,e.return,l)}if(e===t){Me=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Me=a;break}Me=e.return}}var UG=Math.ceil,Pv=da.ReactCurrentDispatcher,aC=da.ReactCurrentOwner,qr=da.ReactCurrentBatchConfig,xt=0,$n=null,Cn=null,ei=0,cr=0,qu=Bl(0),On=0,vp=null,zc=0,Qy=0,lC=0,Oh=null,Vi=null,cC=0,Fd=1/0,To=null,Mv=!1,VS=null,fl=null,dg=!1,Ya=null,Rv=0,Ih=0,HS=null,k0=-1,_0=0;function ki(){return xt&6?wn():k0!==-1?k0:k0=wn()}function hl(t){return t.mode&1?xt&2&&ei!==0?ei&-ei:CG.transition!==null?(_0===0&&(_0=mI()),_0):(t=Mt,t!==0||(t=window.event,t=t===void 0?16:SI(t.type)),t):1}function ks(t,e,n,i){if(50<Ih)throw Ih=0,HS=null,Error(le(185));am(t,n,i),(!(xt&2)||t!==$n)&&(t===$n&&(!(xt&2)&&(Qy|=n),On===4&&za(t,ei)),Zi(t,i),n===1&&xt===0&&!(e.mode&1)&&(Fd=wn()+500,Yy&&Fl()))}function Zi(t,e){var n=t.callbackNode;CW(t,e);var i=pv(t,t===$n?ei:0);if(i===0)n!==null&&fP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&fP(n),e===1)t.tag===0?_G(r4.bind(null,t)):zI(r4.bind(null,t)),wG(function(){!(xt&6)&&Fl()}),n=null;else{switch(gI(i)){case 1:n=j_;break;case 4:n=hI;break;case 16:n=hv;break;case 536870912:n=pI;break;default:n=hv}n=Bj(n,Tj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Tj(t,e){if(k0=-1,_0=0,xt&6)throw Error(le(327));var n=t.callbackNode;if(ud()&&t.callbackNode!==n)return null;var i=pv(t,t===$n?ei:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Tv(t,i);else{e=i;var r=xt;xt|=2;var s=Ij();($n!==t||ei!==e)&&(To=null,Fd=wn()+500,Pc(t,e));do try{WG();break}catch(a){Oj(t,a)}while(!0);q_(),Pv.current=s,xt=r,Cn!==null?e=0:($n=null,ei=0,e=On)}if(e!==0){if(e===2&&(r=vS(t),r!==0&&(i=r,e=WS(t,r))),e===1)throw n=vp,Pc(t,0),za(t,i),Zi(t,wn()),n;if(e===6)za(t,i);else{if(r=t.current.alternate,!(i&30)&&!VG(r)&&(e=Tv(t,i),e===2&&(s=vS(t),s!==0&&(i=s,e=WS(t,s))),e===1))throw n=vp,Pc(t,0),za(t,i),Zi(t,wn()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(le(345));case 2:uc(t,Vi,To);break;case 3:if(za(t,i),(i&130023424)===i&&(e=cC+500-wn(),10<e)){if(pv(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){ki(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=CS(uc.bind(null,t,Vi,To),e);break}uc(t,Vi,To);break;case 4:if(za(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Ss(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=wn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*UG(i/1960))-i,10<i){t.timeoutHandle=CS(uc.bind(null,t,Vi,To),i);break}uc(t,Vi,To);break;case 5:uc(t,Vi,To);break;default:throw Error(le(329))}}}return Zi(t,wn()),t.callbackNode===n?Tj.bind(null,t):null}function WS(t,e){var n=Oh;return t.current.memoizedState.isDehydrated&&(Pc(t,e).flags|=256),t=Tv(t,e),t!==2&&(e=Vi,Vi=n,e!==null&&GS(e)),t}function GS(t){Vi===null?Vi=t:Vi.push.apply(Vi,t)}function VG(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!_s(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function za(t,e){for(e&=~lC,e&=~Qy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ss(e),i=1<<n;t[n]=-1,e&=~i}}function r4(t){if(xt&6)throw Error(le(327));ud();var e=pv(t,0);if(!(e&1))return Zi(t,wn()),null;var n=Tv(t,e);if(t.tag!==0&&n===2){var i=vS(t);i!==0&&(e=i,n=WS(t,i))}if(n===1)throw n=vp,Pc(t,0),za(t,e),Zi(t,wn()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,uc(t,Vi,To),Zi(t,wn()),null}function uC(t,e){var n=xt;xt|=1;try{return t(e)}finally{xt=n,xt===0&&(Fd=wn()+500,Yy&&Fl())}}function Uc(t){Ya!==null&&Ya.tag===0&&!(xt&6)&&ud();var e=xt;xt|=1;var n=qr.transition,i=Mt;try{if(qr.transition=null,Mt=1,t)return t()}finally{Mt=i,qr.transition=n,xt=e,!(xt&6)&&Fl()}}function dC(){cr=qu.current,Wt(qu)}function Pc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bG(n)),Cn!==null)for(n=Cn.return;n!==null;){var i=n;switch(W_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&bv();break;case 3:$d(),Wt(Xi),Wt(mi),eC();break;case 5:Q_(i);break;case 4:$d();break;case 13:Wt(on);break;case 19:Wt(on);break;case 10:Y_(i.type._context);break;case 22:case 23:dC()}n=n.return}if($n=t,Cn=t=pl(t.current,null),ei=cr=e,On=0,vp=null,lC=Qy=zc=0,Vi=Oh=null,xc!==null){for(e=0;e<xc.length;e++)if(n=xc[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}xc=null}return t}function Oj(t,e){do{var n=Cn;try{if(q_(),w0.current=Nv,Av){for(var i=dn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Av=!1}if(Fc=0,Ln=Nn=dn=null,Rh=!1,pp=0,aC.current=null,n===null||n.return===null){On=1,vp=e,Cn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ei,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=WP(o);if(p!==null){p.flags&=-257,GP(p,o,a,s,e),p.mode&1&&HP(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){HP(s,c,e),fC();break e}l=Error(le(426))}}else if(en&&a.mode&1){var v=WP(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),GP(v,o,a,s,e),G_(Bd(l,a));break e}}s=l=Bd(l,a),On!==4&&(On=2),Oh===null?Oh=[s]:Oh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=gj(s,l,e);$P(s,y);break e;case 1:a=l;var w=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(fl===null||!fl.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=vj(s,a,e);$P(s,S);break e}}s=s.return}while(s!==null)}Dj(n)}catch(_){e=_,Cn===n&&n!==null&&(Cn=n=n.return);continue}break}while(!0)}function Ij(){var t=Pv.current;return Pv.current=Nv,t===null?Nv:t}function fC(){(On===0||On===3||On===2)&&(On=4),$n===null||!(zc&268435455)&&!(Qy&268435455)||za($n,ei)}function Tv(t,e){var n=xt;xt|=2;var i=Ij();($n!==t||ei!==e)&&(To=null,Pc(t,e));do try{HG();break}catch(r){Oj(t,r)}while(!0);if(q_(),xt=n,Pv.current=i,Cn!==null)throw Error(le(261));return $n=null,ei=0,On}function HG(){for(;Cn!==null;)jj(Cn)}function WG(){for(;Cn!==null&&!gW();)jj(Cn)}function jj(t){var e=$j(t.alternate,t,cr);t.memoizedProps=t.pendingProps,e===null?Dj(t):Cn=e,aC.current=null}function Dj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$G(n,e),n!==null){n.flags&=32767,Cn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{On=6,Cn=null;return}}else if(n=LG(n,e,cr),n!==null){Cn=n;return}if(e=e.sibling,e!==null){Cn=e;return}Cn=e=t}while(e!==null);On===0&&(On=5)}function uc(t,e,n){var i=Mt,r=qr.transition;try{qr.transition=null,Mt=1,GG(t,e,n,i)}finally{qr.transition=r,Mt=i}return null}function GG(t,e,n,i){do ud();while(Ya!==null);if(xt&6)throw Error(le(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(EW(t,s),t===$n&&(Cn=$n=null,ei=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dg||(dg=!0,Bj(hv,function(){return ud(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=qr.transition,qr.transition=null;var o=Mt;Mt=1;var a=xt;xt|=4,aC.current=null,FG(t,n),Mj(n,t),fG(kS),mv=!!SS,kS=SS=null,t.current=n,zG(n),vW(),xt=a,Mt=o,qr.transition=s}else t.current=n;if(dg&&(dg=!1,Ya=t,Rv=r),s=t.pendingLanes,s===0&&(fl=null),wW(n.stateNode),Zi(t,wn()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Mv)throw Mv=!1,t=VS,VS=null,t;return Rv&1&&t.tag!==0&&ud(),s=t.pendingLanes,s&1?t===HS?Ih++:(Ih=0,HS=t):Ih=0,Fl(),null}function ud(){if(Ya!==null){var t=gI(Rv),e=qr.transition,n=Mt;try{if(qr.transition=null,Mt=16>t?16:t,Ya===null)var i=!1;else{if(t=Ya,Ya=null,Rv=0,xt&6)throw Error(le(331));var r=xt;for(xt|=4,Me=t.current;Me!==null;){var s=Me,o=s.child;if(Me.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Me=c;Me!==null;){var u=Me;switch(u.tag){case 0:case 11:case 15:Th(8,u,s)}var d=u.child;if(d!==null)d.return=u,Me=d;else for(;Me!==null;){u=Me;var f=u.sibling,p=u.return;if(Aj(u),u===c){Me=null;break}if(f!==null){f.return=p,Me=f;break}Me=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}Me=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Me=o;else e:for(;Me!==null;){if(s=Me,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Th(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Me=y;break e}Me=s.return}}var w=t.current;for(Me=w;Me!==null;){o=Me;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Me=x;else e:for(o=w;Me!==null;){if(a=Me,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zy(9,a)}}catch(_){pn(a,a.return,_)}if(a===o){Me=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Me=S;break e}Me=a.return}}if(xt=r,Fl(),po&&typeof po.onPostCommitFiberRoot=="function")try{po.onPostCommitFiberRoot(Hy,t)}catch{}i=!0}return i}finally{Mt=n,qr.transition=e}}return!1}function s4(t,e,n){e=Bd(n,e),e=gj(t,e,1),t=dl(t,e,1),e=ki(),t!==null&&(am(t,1,e),Zi(t,e))}function pn(t,e,n){if(t.tag===3)s4(t,t,n);else for(;e!==null;){if(e.tag===3){s4(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fl===null||!fl.has(i))){t=Bd(n,t),t=vj(e,t,1),e=dl(e,t,1),t=ki(),e!==null&&(am(e,1,t),Zi(e,t));break}}e=e.return}}function KG(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=ki(),t.pingedLanes|=t.suspendedLanes&n,$n===t&&(ei&n)===n&&(On===4||On===3&&(ei&130023424)===ei&&500>wn()-cC?Pc(t,0):lC|=n),Zi(t,e)}function Lj(t,e){e===0&&(t.mode&1?(e=tg,tg<<=1,!(tg&130023424)&&(tg=4194304)):e=1);var n=ki();t=ia(t,e),t!==null&&(am(t,e,n),Zi(t,n))}function qG(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Lj(t,n)}function YG(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(le(314))}i!==null&&i.delete(e),Lj(t,n)}var $j;$j=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xi.current)qi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qi=!1,DG(t,e,n);qi=!!(t.flags&131072)}else qi=!1,en&&e.flags&1048576&&UI(e,Sv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;S0(t,e),t=e.pendingProps;var r=jd(e,mi.current);cd(e,n),r=nC(null,e,i,t,r,n);var s=iC();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ji(i)?(s=!0,wv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,J_(e),r.updater=Jy,e.stateNode=r,r._reactInternals=e,TS(e,i,t,n),e=jS(null,e,i,!0,s,n)):(e.tag=0,en&&s&&H_(e),Si(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(S0(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=JG(i),t=cs(i,t),r){case 0:e=IS(null,e,i,t,n);break e;case 1:e=YP(null,e,i,t,n);break e;case 11:e=KP(null,e,i,t,n);break e;case 14:e=qP(null,e,i,cs(i.type,t),n);break e}throw Error(le(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cs(i,r),IS(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cs(i,r),YP(t,e,i,r,n);case 3:e:{if(xj(e),t===null)throw Error(le(387));i=e.pendingProps,s=e.memoizedState,r=s.element,qI(t,e),Cv(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Bd(Error(le(423)),e),e=XP(t,e,i,n,r);break e}else if(i!==r){r=Bd(Error(le(424)),e),e=XP(t,e,i,n,r);break e}else for(mr=ul(e.stateNode.containerInfo.firstChild),wr=e,en=!0,ps=null,n=GI(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Dd(),i===r){e=ra(t,e,n);break e}Si(t,e,i,n)}e=e.child}return e;case 5:return YI(e),t===null&&PS(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,_S(i,r)?o=null:s!==null&&_S(i,s)&&(e.flags|=32),wj(t,e),Si(t,e,o,n),e.child;case 6:return t===null&&PS(e),null;case 13:return Sj(t,e,n);case 4:return Z_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ld(e,null,i,n):Si(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cs(i,r),KP(t,e,i,r,n);case 7:return Si(t,e,e.pendingProps,n),e.child;case 8:return Si(t,e,e.pendingProps.children,n),e.child;case 12:return Si(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ft(kv,i._currentValue),i._currentValue=o,s!==null)if(_s(s.value,o)){if(s.children===r.children&&!Xi.current){e=ra(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Zo(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),MS(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(le(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),MS(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Si(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,cd(e,n),r=Qr(r),i=i(r),e.flags|=1,Si(t,e,i,n),e.child;case 14:return i=e.type,r=cs(i,e.pendingProps),r=cs(i.type,r),qP(t,e,i,r,n);case 15:return yj(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cs(i,r),S0(t,e),e.tag=1,Ji(i)?(t=!0,wv(e)):t=!1,cd(e,n),mj(e,i,r),TS(e,i,r,n),jS(null,e,i,!0,t,n);case 19:return kj(t,e,n);case 22:return bj(t,e,n)}throw Error(le(156,e.tag))};function Bj(t,e){return fI(t,e)}function XG(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(t,e,n,i){return new XG(t,e,n,i)}function hC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JG(t){if(typeof t=="function")return hC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===T_)return 11;if(t===O_)return 14}return 2}function pl(t,e){var n=t.alternate;return n===null?(n=Ur(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function C0(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")hC(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $u:return Mc(n.children,r,s,e);case R_:o=8,r|=8;break;case nS:return t=Ur(12,n,e,r|2),t.elementType=nS,t.lanes=s,t;case iS:return t=Ur(13,n,e,r),t.elementType=iS,t.lanes=s,t;case rS:return t=Ur(19,n,e,r),t.elementType=rS,t.lanes=s,t;case Y5:return eb(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K5:o=10;break e;case q5:o=9;break e;case T_:o=11;break e;case O_:o=14;break e;case Ma:o=16,i=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=Ur(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Mc(t,e,n,i){return t=Ur(7,t,i,e),t.lanes=n,t}function eb(t,e,n,i){return t=Ur(22,t,i,e),t.elementType=Y5,t.lanes=n,t.stateNode={isHidden:!1},t}function Zw(t,e,n){return t=Ur(6,t,null,e),t.lanes=n,t}function Qw(t,e,n){return e=Ur(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZG(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ow(0),this.expirationTimes=Ow(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ow(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function pC(t,e,n,i,r,s,o,a,l){return t=new ZG(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ur(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},J_(s),t}function QG(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Fj(t){if(!t)return xl;t=t._reactInternals;e:{if(su(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ji(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(Ji(n))return FI(t,n,e)}return e}function zj(t,e,n,i,r,s,o,a,l){return t=pC(n,i,!0,t,r,s,o,a,l),t.context=Fj(null),n=t.current,i=ki(),r=hl(n),s=Zo(i,r),s.callback=e??null,dl(n,s,r),t.current.lanes=r,am(t,r,i),Zi(t,i),t}function tb(t,e,n,i){var r=e.current,s=ki(),o=hl(r);return n=Fj(n),e.context===null?e.context=n:e.pendingContext=n,e=Zo(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=dl(r,e,o),t!==null&&(ks(t,r,o,s),b0(t,r,o)),o}function Ov(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function o4(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mC(t,e){o4(t,e),(t=t.alternate)&&o4(t,e)}function eK(){return null}var Uj=typeof reportError=="function"?reportError:function(t){console.error(t)};function gC(t){this._internalRoot=t}nb.prototype.render=gC.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));tb(t,e,null,null)};nb.prototype.unmount=gC.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Uc(function(){tb(null,t,null,null)}),e[na]=null}};function nb(t){this._internalRoot=t}nb.prototype.unstable_scheduleHydration=function(t){if(t){var e=bI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fa.length&&e!==0&&e<Fa[n].priority;n++);Fa.splice(n,0,t),n===0&&xI(t)}};function vC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ib(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function a4(){}function tK(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Ov(o);s.call(c)}}var o=zj(e,i,t,0,null,!1,!1,"",a4);return t._reactRootContainer=o,t[na]=o.current,cp(t.nodeType===8?t.parentNode:t),Uc(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Ov(l);a.call(c)}}var l=pC(t,0,!1,null,null,!1,!1,"",a4);return t._reactRootContainer=l,t[na]=l.current,cp(t.nodeType===8?t.parentNode:t),Uc(function(){tb(e,l,n,i)}),l}function rb(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Ov(o);a.call(l)}}tb(e,o,t,r)}else o=tK(n,e,t,r,i);return Ov(o)}vI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=sh(e.pendingLanes);n!==0&&(D_(e,n|1),Zi(e,wn()),!(xt&6)&&(Fd=wn()+500,Fl()))}break;case 13:Uc(function(){var i=ia(t,1);if(i!==null){var r=ki();ks(i,t,1,r)}}),mC(t,1)}};L_=function(t){if(t.tag===13){var e=ia(t,134217728);if(e!==null){var n=ki();ks(e,t,134217728,n)}mC(t,134217728)}};yI=function(t){if(t.tag===13){var e=hl(t),n=ia(t,e);if(n!==null){var i=ki();ks(n,t,e,i)}mC(t,e)}};bI=function(){return Mt};wI=function(t,e){var n=Mt;try{return Mt=t,e()}finally{Mt=n}};pS=function(t,e,n){switch(e){case"input":if(aS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=qy(i);if(!r)throw Error(le(90));J5(i),aS(i,r)}}}break;case"textarea":Q5(t,n);break;case"select":e=n.value,e!=null&&sd(t,!!n.multiple,e,!1)}};oI=uC;aI=Uc;var nK={usingClientEntryPoint:!1,Events:[cm,Uu,qy,rI,sI,uC]},If={findFiberByHostInstance:wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iK={bundleType:If.bundleType,version:If.version,rendererPackageName:If.rendererPackageName,rendererConfig:If.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=uI(t),t===null?null:t.stateNode},findFiberByHostInstance:If.findFiberByHostInstance||eK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fg.isDisabled&&fg.supportsFiber)try{Hy=fg.inject(iK),po=fg}catch{}}Ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nK;Ar.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vC(e))throw Error(le(200));return QG(t,e,null,n)};Ar.createRoot=function(t,e){if(!vC(t))throw Error(le(299));var n=!1,i="",r=Uj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=pC(t,1,!1,null,null,n,!1,i,r),t[na]=e.current,cp(t.nodeType===8?t.parentNode:t),new gC(e)};Ar.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=uI(e),t=t===null?null:t.stateNode,t};Ar.flushSync=function(t){return Uc(t)};Ar.hydrate=function(t,e,n){if(!ib(e))throw Error(le(200));return rb(null,t,e,!0,n)};Ar.hydrateRoot=function(t,e,n){if(!vC(t))throw Error(le(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Uj;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=zj(e,null,t,1,n??null,r,!1,s,o),t[na]=e.current,cp(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new nb(e)};Ar.render=function(t,e,n){if(!ib(e))throw Error(le(200));return rb(null,t,e,!1,n)};Ar.unmountComponentAtNode=function(t){if(!ib(t))throw Error(le(40));return t._reactRootContainer?(Uc(function(){rb(null,null,t,!1,function(){t._reactRootContainer=null,t[na]=null})}),!0):!1};Ar.unstable_batchedUpdates=uC;Ar.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!ib(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return rb(t,e,n,!1,i)};Ar.version="18.3.1-next-f1338f8080-20240426";function Vj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vj)}catch(t){console.error(t)}}Vj(),V5.exports=Ar;var zl=V5.exports;const rK=iu(zl);var Hj,l4=zl;Hj=l4.createRoot,l4.hydrateRoot;function be(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function Ms(t,e=[]){let n=[];function i(s,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=d=>{var y;const{scope:f,children:p,...g}=d,m=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,v=b.useMemo(()=>g,Object.values(g));return h.jsx(m.Provider,{value:v,children:p})};c.displayName=s+"Provider";function u(d,f){var m;const p=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,g=b.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,sK(r,...e)]}function sK(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function c4(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function sb(...t){return e=>{let n=!1;const i=t.map(r=>{const s=c4(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():c4(t[r],null)}}}}function ht(...t){return b.useCallback(sb(...t),t)}function zd(t){const e=oK(t),n=b.forwardRef((i,r)=>{const{children:s,...o}=i,a=b.Children.toArray(s),l=a.find(lK);if(l){const c=l.props.children,u=a.map(d=>d===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:r,children:b.isValidElement(c)?b.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:r,children:s})});return n.displayName=`${t}.Slot`,n}function oK(t){const e=b.forwardRef((n,i)=>{const{children:r,...s}=n;if(b.isValidElement(r)){const o=uK(r),a=cK(s,r.props);return r.type!==b.Fragment&&(a.ref=i?sb(i,o):o),b.cloneElement(r,a)}return b.Children.count(r)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var aK=Symbol("radix.slottable");function lK(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===aK}function cK(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function uK(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function dm(t){const e=t+"CollectionProvider",[n,i]=Ms(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:y}=m,w=Vt.useRef(null),x=Vt.useRef(new Map).current;return h.jsx(r,{scope:v,itemMap:x,collectionRef:w,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=zd(a),c=Vt.forwardRef((m,v)=>{const{scope:y,children:w}=m,x=s(a,y),S=ht(v,x.collectionRef);return h.jsx(l,{ref:S,children:w})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=zd(u),p=Vt.forwardRef((m,v)=>{const{scope:y,children:w,...x}=m,S=Vt.useRef(null),_=ht(v,S),E=s(u,y);return Vt.useEffect(()=>(E.itemMap.set(S,{ref:S,...x}),()=>void E.itemMap.delete(S))),h.jsx(f,{[d]:"",ref:_,children:w})});p.displayName=u;function g(m){const v=s(t+"CollectionConsumer",m);return Vt.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const x=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((E,C)=>x.indexOf(E.ref.current)-x.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},g,i]}var ni=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},dK=Ly[" useId ".trim().toString()]||(()=>{}),fK=0;function df(t){const[e,n]=b.useState(dK());return ni(()=>{n(i=>i??String(fK++))},[t]),e?`radix-${e}`:""}var hK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ye=hK.reduce((t,e)=>{const n=zd(`Primitive.${e}`),i=b.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function yC(t,e){t&&zl.flushSync(()=>t.dispatchEvent(e))}function _r(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}var pK=Ly[" useInsertionEffect ".trim().toString()]||ni;function Sl({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,s,o]=mK({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:r;{const u=b.useRef(t!==void 0);b.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const c=b.useCallback(u=>{var d;if(a){const f=gK(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else s(u)},[a,t,s,o]);return[l,c]}function mK({defaultProp:t,onChange:e}){const[n,i]=b.useState(t),r=b.useRef(n),s=b.useRef(e);return pK(()=>{s.current=e},[e]),b.useEffect(()=>{var o;r.current!==n&&((o=s.current)==null||o.call(s,n),r.current=n)},[n,r]),[n,i,s]}function gK(t){return typeof t=="function"}var vK=b.createContext(void 0);function ob(t){const e=b.useContext(vK);return t||e||"ltr"}var ex="rovingFocusGroup.onEntryFocus",yK={bubbles:!1,cancelable:!0},fm="RovingFocusGroup",[KS,Wj,bK]=dm(fm),[wK,ab]=Ms(fm,[bK]),[xK,SK]=wK(fm),Gj=b.forwardRef((t,e)=>h.jsx(KS.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(KS.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(kK,{...t,ref:e})})}));Gj.displayName=fm;var kK=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=b.useRef(null),p=ht(e,f),g=ob(s),[m,v]=Sl({prop:o,defaultProp:a??null,onChange:l,caller:fm}),[y,w]=b.useState(!1),x=_r(c),S=Wj(n),_=b.useRef(!1),[E,C]=b.useState(0);return b.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(ex,x),()=>N.removeEventListener(ex,x)},[x]),h.jsx(xK,{scope:n,orientation:i,dir:g,loop:r,currentTabStopId:m,onItemFocus:b.useCallback(N=>v(N),[v]),onItemShiftTab:b.useCallback(()=>w(!0),[]),onFocusableItemAdd:b.useCallback(()=>C(N=>N+1),[]),onFocusableItemRemove:b.useCallback(()=>C(N=>N-1),[]),children:h.jsx(Ye.div,{tabIndex:y||E===0?-1:0,"data-orientation":i,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:be(t.onMouseDown,()=>{_.current=!0}),onFocus:be(t.onFocus,N=>{const R=!_.current;if(N.target===N.currentTarget&&R&&!y){const O=new CustomEvent(ex,yK);if(N.currentTarget.dispatchEvent(O),!O.defaultPrevented){const D=S().filter(J=>J.focusable),j=D.find(J=>J.active),q=D.find(J=>J.id===m),K=[j,q,...D].filter(Boolean).map(J=>J.ref.current);Yj(K,u)}}_.current=!1}),onBlur:be(t.onBlur,()=>w(!1))})})}),Kj="RovingFocusGroupItem",qj=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,children:o,...a}=t,l=df(),c=s||l,u=SK(Kj,n),d=u.currentTabStopId===c,f=Wj(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:m}=u;return b.useEffect(()=>{if(i)return p(),()=>g()},[i,p,g]),h.jsx(KS.ItemSlot,{scope:n,id:c,focusable:i,active:r,children:h.jsx(Ye.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:be(t.onMouseDown,v=>{i?u.onItemFocus(c):v.preventDefault()}),onFocus:be(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:be(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=EK(v,u.orientation,u.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let x=f().filter(S=>S.focusable).map(S=>S.ref.current);if(y==="last")x.reverse();else if(y==="prev"||y==="next"){y==="prev"&&x.reverse();const S=x.indexOf(v.currentTarget);x=u.loop?AK(x,S+1):x.slice(S+1)}setTimeout(()=>Yj(x))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:m!=null}):o})})});qj.displayName=Kj;var _K={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function CK(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function EK(t,e,n){const i=CK(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return _K[i]}function Yj(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function AK(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Xj=Gj,Jj=qj;function NK(t,e){return b.useReducer((n,i)=>e[n][i]??n,t)}var fa=t=>{const{present:e,children:n}=t,i=PK(e),r=typeof n=="function"?n({present:i.isPresent}):b.Children.only(n),s=ht(i.ref,MK(r));return typeof n=="function"||i.isPresent?b.cloneElement(r,{ref:s}):null};fa.displayName="Presence";function PK(t){const[e,n]=b.useState(),i=b.useRef(null),r=b.useRef(t),s=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=NK(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=hg(i.current);s.current=a==="mounted"?c:"none"},[a]),ni(()=>{const c=i.current,u=r.current;if(u!==t){const f=s.current,p=hg(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),ni(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const m=hg(i.current).includes(p.animationName);if(p.target===e&&m&&(l("ANIMATION_END"),!r.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(s.current=hg(i.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{i.current=c?getComputedStyle(c):null,n(c)},[])}}function hg(t){return(t==null?void 0:t.animationName)||"none"}function MK(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var lb="Tabs",[RK,Y0e]=Ms(lb,[ab]),Zj=ab(),[TK,bC]=RK(lb),Qj=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=ob(a),[d,f]=Sl({prop:i,onChange:r,defaultProp:s??"",caller:lb});return h.jsx(TK,{scope:n,baseId:df(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:h.jsx(Ye.div,{dir:u,"data-orientation":o,...c,ref:e})})});Qj.displayName=lb;var eD="TabsList",tD=b.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=bC(eD,n),o=Zj(n);return h.jsx(Xj,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:h.jsx(Ye.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});tD.displayName=eD;var nD="TabsTrigger",E0=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=bC(nD,n),a=Zj(n),l=rD(o.baseId,i),c=sD(o.baseId,i),u=i===o.value;return h.jsx(Jj,{asChild:!0,...a,focusable:!r,active:u,children:h.jsx(Ye.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:be(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:be(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:be(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});E0.displayName=nD;var iD="TabsContent",A0=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=bC(iD,n),l=rD(a.baseId,i),c=sD(a.baseId,i),u=i===a.value,d=b.useRef(u);return b.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(fa,{present:r||u,children:({present:f})=>h.jsx(Ye.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});A0.displayName=iD;function rD(t,e){return`${t}-trigger-${e}`}function sD(t,e){return`${t}-content-${e}`}const ah={},u4=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,d4=t=>"init"in t,tx=t=>!!t.write,f4=t=>"v"in t||"e"in t,pg=t=>{if("e"in t)throw t.e;if((ah?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},Iv=new WeakMap,h4=t=>{var e;return jv(t)&&!!((e=Iv.get(t))!=null&&e[0])},OK=t=>{const e=Iv.get(t);e!=null&&e[0]&&(e[0]=!1,e[1].forEach(n=>n()))},oD=(t,e)=>{let n=Iv.get(t);if(!n){n=[!0,new Set],Iv.set(t,n);const i=()=>{n[0]=!1};t.then(i,i)}n[1].add(e)},jv=t=>typeof(t==null?void 0:t.then)=="function",aD=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},nx=(t,e,n)=>{const i=n(t),r="v"in i,s=i.v;if(jv(e))for(const o of i.d.keys())aD(t,e,n(o));i.v=e,delete i.e,(!r||!Object.is(s,i.v))&&(++i.n,jv(s)&&OK(s))},p4=(t,e,n)=>{var i;const r=new Set;for(const s of((i=n.get(t))==null?void 0:i.t)||[])n.has(s)&&r.add(s);for(const s of e.p)r.add(s);return r},IK=()=>{const t=new Set,e=()=>{t.forEach(n=>n())};return e.add=n=>(t.add(n),()=>{t.delete(n)}),e},ix=()=>{const t={},e=new WeakMap,n=i=>{var r,s;(r=e.get(t))==null||r.forEach(o=>o(i)),(s=e.get(i))==null||s.forEach(o=>o())};return n.add=(i,r)=>{const s=i||t,o=(e.has(s)?e:e.set(s,new Set)).get(s);return o.add(r),()=>{o==null||o.delete(r),o.size||e.delete(s)}},n},jK=t=>(t.c||(t.c=ix()),t.m||(t.m=ix()),t.u||(t.u=ix()),t.f||(t.f=IK()),t),DK=Symbol(),LK=(t=new WeakMap,e=new WeakMap,n=new WeakMap,i=new Set,r=new Set,s=new Set,o={},a=(f,...p)=>f.read(...p),l=(f,...p)=>f.write(...p),c=(f,p)=>{var g;return(g=f.unstable_onInit)==null?void 0:g.call(f,p)},u=(f,p)=>{var g;return(g=f.onMount)==null?void 0:g.call(f,p)},...d)=>{const f=d[0]||(C=>{if((ah?"production":void 0)!=="production"&&!C)throw new Error("Atom is undefined or null");let N=t.get(C);return N||(N={d:new Map,p:new Set,n:0},t.set(C,N),c==null||c(C,E)),N}),p=d[1]||(()=>{const C=[],N=R=>{try{R()}catch(O){C.push(O)}};do{o.f&&N(o.f);const R=new Set,O=R.add.bind(R);i.forEach(D=>{var j;return(j=e.get(D))==null?void 0:j.l.forEach(O)}),i.clear(),s.forEach(O),s.clear(),r.forEach(O),r.clear(),R.forEach(N),i.size&&g()}while(i.size||s.size||r.size);if(C.length)throw new AggregateError(C)}),g=d[2]||(()=>{const C=[],N=new WeakSet,R=new WeakSet,O=Array.from(i);for(;O.length;){const D=O[O.length-1],j=f(D);if(R.has(D)){O.pop();continue}if(N.has(D)){if(n.get(D)===j.n)C.push([D,j]);else if((ah?"production":void 0)!=="production"&&n.has(D))throw new Error("[Bug] invalidated atom exists");R.add(D),O.pop();continue}N.add(D);for(const q of p4(D,j,e))N.has(q)||O.push(q)}for(let D=C.length-1;D>=0;--D){const[j,q]=C[D];let $=!1;for(const K of q.d.keys())if(K!==j&&i.has(K)){$=!0;break}$&&(m(j),w(j)),n.delete(j)}}),m=d[3]||(C=>{var N;const R=f(C);if(f4(R)&&(e.has(C)&&n.get(C)!==R.n||Array.from(R.d).every(([Q,V])=>m(Q).n===V)))return R;R.d.clear();let O=!0;const D=()=>{e.has(C)&&(w(C),g(),p())},j=Q=>{var V;if(u4(C,Q)){const re=f(Q);if(!f4(re))if(d4(Q))nx(Q,Q.init,f);else throw new Error("no atom init");return pg(re)}const F=m(Q);try{return pg(F)}finally{R.d.set(Q,F.n),h4(R.v)&&aD(C,R.v,F),(V=e.get(Q))==null||V.t.add(C),O||D()}};let q,$;const K={get signal(){return q||(q=new AbortController),q.signal},get setSelf(){return(ah?"production":void 0)!=="production"&&!tx(C)&&console.warn("setSelf function cannot be used with read-only atom"),!$&&tx(C)&&($=(...Q)=>{if((ah?"production":void 0)!=="production"&&O&&console.warn("setSelf function cannot be called in sync"),!O)try{return y(C,...Q)}finally{g(),p()}}),$}},J=R.n;try{const Q=a(C,j,K);return nx(C,Q,f),jv(Q)&&(oD(Q,()=>q==null?void 0:q.abort()),Q.then(D,D)),R}catch(Q){return delete R.v,R.e=Q,++R.n,R}finally{O=!1,J!==R.n&&n.get(C)===J&&(n.set(C,R.n),i.add(C),(N=o.c)==null||N.call(o,C))}}),v=d[4]||(C=>{const N=[C];for(;N.length;){const R=N.pop(),O=f(R);for(const D of p4(R,O,e)){const j=f(D);n.set(D,j.n),N.push(D)}}}),y=d[5]||((C,...N)=>{let R=!0;const O=j=>pg(m(j)),D=(j,...q)=>{var $;const K=f(j);try{if(u4(C,j)){if(!d4(j))throw new Error("atom not writable");const J=K.n,Q=q[0];nx(j,Q,f),w(j),J!==K.n&&(i.add(j),($=o.c)==null||$.call(o,j),v(j));return}else return y(j,...q)}finally{R||(g(),p())}};try{return l(C,O,D,...N)}finally{R=!1}}),w=d[6]||(C=>{var N;const R=f(C),O=e.get(C);if(O&&!h4(R.v)){for(const[D,j]of R.d)if(!O.d.has(D)){const q=f(D);x(D).t.add(C),O.d.add(D),j!==q.n&&(i.add(D),(N=o.c)==null||N.call(o,D),v(D))}for(const D of O.d||[])if(!R.d.has(D)){O.d.delete(D);const j=S(D);j==null||j.t.delete(C)}}}),x=d[7]||(C=>{var N;const R=f(C);let O=e.get(C);if(!O){m(C);for(const D of R.d.keys())x(D).t.add(C);if(O={l:new Set,d:new Set(R.d.keys()),t:new Set},e.set(C,O),(N=o.m)==null||N.call(o,C),tx(C)){const D=()=>{let j=!0;const q=(...$)=>{try{return y(C,...$)}finally{j||(g(),p())}};try{const $=u(C,q);$&&(O.u=()=>{j=!0;try{$()}finally{j=!1}})}finally{j=!1}};r.add(D)}}return O}),S=d[8]||(C=>{var N;const R=f(C);let O=e.get(C);if(O&&!O.l.size&&!Array.from(O.t).some(D=>{var j;return(j=e.get(D))==null?void 0:j.d.has(C)})){O.u&&s.add(O.u),O=void 0,e.delete(C),(N=o.u)==null||N.call(o,C);for(const D of R.d.keys()){const j=S(D);j==null||j.t.delete(C)}return}return O}),_=[t,e,n,i,r,s,o,a,l,c,u,f,p,g,m,v,y,w,x,S],E={get:C=>pg(m(C)),set:(C,...N)=>{try{return y(C,...N)}finally{g(),p()}},sub:(C,N)=>{const O=x(C).l;return O.add(N),p(),()=>{O.delete(N),S(C),p()}}};return Object.defineProperty(E,DK,{value:_}),E},lD=LK,$K=jK,m4=oD,wC={};let BK=0;function de(t,e){const n=`atom${++BK}`,i={toString(){return(wC?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?i.read=t:(i.init=t,i.read=FK,i.write=zK),e&&(i.write=e),i}function FK(t){return t(this)}function zK(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const UK=()=>{let t=0;const e=$K({}),n=new WeakMap,i=new WeakMap,r=lD(n,i,void 0,void 0,void 0,void 0,e,void 0,(a,l,c,...u)=>t?c(a,...u):a.write(l,c,...u)),s=new Set;return e.m.add(void 0,a=>{s.add(a);const l=n.get(a);l.m=i.get(a)}),e.u.add(void 0,a=>{s.delete(a);const l=n.get(a);delete l.m}),Object.assign(r,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),n),dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:a=>{const l={read:()=>null,write:(c,u)=>{++t;try{for(const[d,f]of a)"init"in d&&u(d,f)}finally{--t}}};r.set(l)}})};function xC(){return(wC?"production":void 0)!=="production"?UK():lD()}let jf;function VK(){return jf||(jf=xC(),(wC?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=jf),globalThis.__JOTAI_DEFAULT_STORE__!==jf&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),jf}const HK={},cD=b.createContext(void 0);function uD(t){return b.useContext(cD)||VK()}function WK({children:t,store:e}){const n=b.useRef(void 0);return!e&&!n.current&&(n.current=xC()),b.createElement(cD.Provider,{value:e||n.current},t)}const qS=t=>typeof(t==null?void 0:t.then)=="function",YS=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},GK=Vt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(YS(t),t)}),rx=new WeakMap,g4=(t,e)=>{let n=rx.get(t);return n||(n=new Promise((i,r)=>{let s=t;const o=c=>u=>{s===c&&i(u)},a=c=>u=>{s===c&&r(u)},l=()=>{try{const c=e();qS(c)?(rx.set(c,n),s=c,c.then(o(c),a(c)),m4(c,l)):i(c)}catch(c){r(c)}};t.then(o(t),a(t)),m4(t,l)}),rx.set(t,n)),n};function st(t,e){const{delay:n,unstable_promiseStatus:i=!Vt.use}={},r=uD(),[[s,o,a],l]=b.useReducer(u=>{const d=r.get(t);return Object.is(u[0],d)&&u[1]===r&&u[2]===t?u:[d,r,t]},void 0,()=>[r.get(t),r,t]);let c=s;if((o!==r||a!==t)&&(l(),c=r.get(t)),b.useEffect(()=>{const u=r.sub(t,()=>{if(i)try{const d=r.get(t);qS(d)&&YS(g4(d,()=>r.get(t)))}catch{}if(typeof n=="number"){setTimeout(l,n);return}l()});return l(),u},[r,t,n,i]),b.useDebugValue(c),qS(c)){const u=g4(c,()=>r.get(t));return i&&YS(u),GK(u)}return c}function yp(t,e){const n=uD();return b.useCallback((...r)=>{if((HK?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function hm(t,e){return[st(t),yp(t)]}const{createElement:Ud,createContext:KK,forwardRef:dD,useCallback:Ii,useContext:fD,useEffect:Rc,useImperativeHandle:hD,useLayoutEffect:qK,useMemo:YK,useRef:dr,useState:Dv}=Ly,v4=Ly.useId,cb=KK(null);cb.displayName="PanelGroupContext";const bp=qK,XK=typeof v4=="function"?v4:()=>null;let JK=0;function SC(t=null){const e=XK(),n=dr(t||e||null);return n.current===null&&(n.current=""+JK++),t??n.current}function pD({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:f,style:p,tagName:g="div",...m}){const v=fD(cb);if(v===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:w,getPanelSize:x,getPanelStyle:S,groupId:_,isPanelCollapsed:E,reevaluatePanelConstraints:C,registerPanel:N,resizePanel:R,unregisterPanel:O}=v,D=SC(o),j=dr({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:D,idIsFromProps:o!==void 0,order:f});dr({didLogMissingDefaultSizeWarning:!1}),bp(()=>{const{callbacks:$,constraints:K}=j.current,J={...K};j.current.id=D,j.current.idIsFromProps=o!==void 0,j.current.order=f,$.onCollapse=c,$.onExpand=u,$.onResize=d,K.collapsedSize=n,K.collapsible=i,K.defaultSize=r,K.maxSize=a,K.minSize=l,(J.collapsedSize!==K.collapsedSize||J.collapsible!==K.collapsible||J.maxSize!==K.maxSize||J.minSize!==K.minSize)&&C(j.current,J)}),bp(()=>{const $=j.current;return N($),()=>{O($)}},[f,D,N,O]),hD(s,()=>({collapse:()=>{y(j.current)},expand:()=>{w(j.current)},getId(){return D},getSize(){return x(j.current)},isCollapsed(){return E(j.current)},isExpanded(){return!E(j.current)},resize:$=>{R(j.current,$)}}),[y,w,x,E,D,R]);const q=S(j.current,r);return Ud(g,{...m,children:t,className:e,style:{...q,...p},"data-panel":"","data-panel-id":D,"data-panel-group-id":_,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const N0=dD((t,e)=>Ud(pD,{...t,forwardedRef:e}));pD.displayName="Panel";N0.displayName="forwardRef(Panel)";function rt(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const mD=10;function wp(t,e,n=mD){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function lr(t,e,n){return wp(t,e,n)===0}function Yu({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];rt(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if(wp(n,a)<0)if(s){const l=(r+a)/2;wp(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(mD)),n}function lh({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(lr(t,0))return e;const s=[...e],[o,a]=i;rt(o!=null),rt(a!=null);let l=0;if(r==="keyboard"){{const u=t<0?a:o,d=n[u];if(rt(d),d.collapsible){const f=e[u];rt(f!=null);const p=n[u];rt(p);const{collapsedSize:g=0,minSize:m=0}=p;if(lr(f,g)){const v=m-f;wp(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}{const u=t<0?o:a,d=n[u];rt(d);const{collapsible:f}=d;if(f){const p=e[u];rt(p!=null);const g=n[u];rt(g);const{collapsedSize:m=0,minSize:v=0}=g;if(lr(p,v)){const y=p-m;wp(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}}{const u=t<0?1:-1;let d=t<0?a:o,f=0;for(;;){const g=e[d];rt(g!=null);const v=Yu({panelConstraints:n,panelIndex:d,size:100})-g;if(f+=v,d+=u,d<0||d>=n.length)break}const p=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-p:p}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(l),p=e[d];rt(p!=null);const g=p-f,m=Yu({panelConstraints:n,panelIndex:d,size:g});if(!lr(p,m)&&(l+=p-m,s[d]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(lr(l,0))return e;{const u=t<0?a:o,d=e[u];rt(d!=null);const f=d+l,p=Yu({panelConstraints:n,panelIndex:u,size:f});if(s[u]=p,!lr(p,f)){let g=f-p,v=t<0?a:o;for(;v>=0&&v<n.length;){const y=s[v];rt(y!=null);const w=y+g,x=Yu({panelConstraints:n,panelIndex:v,size:w});if(lr(y,x)||(g-=x-y,s[v]=x),lr(g,0))break;t>0?v--:v++}}}const c=s.reduce((u,d)=>d+u,0);return lr(c,100)?s:e}function ZK({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];rt(a!=null),e.forEach((d,f)=>{const{constraints:p}=d,{maxSize:g=100,minSize:m=0}=p;f===a?(i=m,r=g):(s+=m,o+=g)});const l=Math.min(r,100-s),c=Math.max(i,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function xp(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function gD(t,e,n=document){const r=xp(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function vD(t,e,n){const i=gD(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function yD(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function ub(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function QK(t,e,n,i=document){var r,s,o,a;const l=ub(e,i),c=xp(t,i),u=l?c.indexOf(l):-1,d=(r=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,f=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,f]}function eq({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){dr({didWarnAboutMissingResizeHandle:!1}),bp(()=>{if(!s)return;const a=xp(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=ZK({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const p=r[l];rt(p),f.setAttribute("aria-controls",p.id),f.setAttribute("aria-valuemax",""+Math.round(c)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),Rc(()=>{if(!s)return;const a=e.current;rt(a);const{panelDataArray:l}=a,c=yD(n,s);rt(c!=null,`No group found for id "${n}"`);const u=xp(n,s);rt(u);const d=u.map(f=>{const p=f.getAttribute("data-panel-resize-handle-id");rt(p);const[g,m]=QK(n,p,l,s);if(g==null||m==null)return()=>{};const v=y=>{if(!y.defaultPrevented)switch(y.key){case"Enter":{y.preventDefault();const w=l.findIndex(x=>x.id===g);if(w>=0){const x=l[w];rt(x);const S=i[w],{collapsedSize:_=0,collapsible:E,minSize:C=0}=x.constraints;if(S!=null&&E){const N=lh({delta:lr(S,_)?C-_:_-S,layout:i,panelConstraints:l.map(R=>R.constraints),pivotIndices:vD(n,p,s),trigger:"keyboard"});i!==N&&o(N)}}break}}};return f.addEventListener("keydown",v),()=>{f.removeEventListener("keydown",v)}});return()=>{d.forEach(f=>f())}},[s,t,e,n,i,r,o])}function y4(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function bD(t){return t.type==="keydown"}function wD(t){return t.type.startsWith("mouse")}function xD(t){return t.type.startsWith("touch")}function SD(t,e){const n=t==="horizontal";if(wD(e))return n?e.clientX:e.clientY;if(xD(e)){const i=e.touches[0];return rt(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function tq(t,e,n,i,r){const s=n==="horizontal",o=ub(e,r);rt(o);const a=o.getAttribute("data-panel-group-id");rt(a);let{initialCursorPosition:l}=i;const c=SD(n,t),u=yD(a,r);rt(u);const d=u.getBoundingClientRect(),f=s?d.width:d.height;return(c-l)/f*100}function nq(t,e,n,i,r,s){if(bD(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:tq(t,e,n,i,s)}function iq({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];rt(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];rt(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,c=r/l;i++,e[s]=c,r-=c}return e}function hu(t,e,n){e.forEach((i,r)=>{const s=t[r];rt(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:f,onExpand:p,onResize:g}=o;g&&g(i,d),u&&(f||p)&&(p&&(d==null||d===c)&&i!==c&&p(),f&&(d==null||d!==c)&&i===c&&f())}})}function mg(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function rq({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let XS=null,kc=null;function kD(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function sq(){kc!==null&&(document.head.removeChild(kc),XS=null,kc=null)}function sx(t){if(XS===t)return;XS=t;const e=kD(t);kc===null&&(kc=document.createElement("style"),document.head.appendChild(kc)),kc.innerHTML=`*{cursor: ${e}!important;}`}function oq(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function b4(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function _D(t){return`react-resizable-panels:${t}`}function CD(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function ED(t,e){try{const n=_D(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function aq(t,e,n){var i,r;const s=(i=ED(t,n))!==null&&i!==void 0?i:{},o=CD(e);return(r=s[o])!==null&&r!==void 0?r:null}function lq(t,e,n,i,r){var s;const o=_D(t),a=CD(e),l=(s=ED(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function w4({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!lr(i,100))for(let s=0;s<e.length;s++){const o=n[s];rt(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];rt(o!=null);const a=Yu({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!lr(r,0))for(let s=0;s<e.length;s++){const o=n[s];rt(o!=null);const a=o+r,l=Yu({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,lr(r,0)))break}return n}const cq=100,ch={getItem:t=>(b4(ch),ch.getItem(t)),setItem:(t,e)=>{b4(ch),ch.setItem(t,e)}},x4={};function AD({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=ch,style:c,tagName:u="div",...d}){const f=SC(s),p=dr(null),[g,m]=Dv(null),[v,y]=Dv([]),w=dr({}),x=dr(new Map),S=dr(0),_=dr({autoSaveId:t,direction:i,dragState:g,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),E=dr({layout:v,panelDataArray:[],panelDataArrayChanged:!1});dr({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),hD(r,()=>({getId:()=>_.current.id,getLayout:()=>{const{layout:Z}=E.current;return Z},setLayout:Z=>{const{onLayout:ce}=_.current,{layout:B,panelDataArray:L}=E.current,U=w4({layout:Z,panelConstraints:L.map(k=>k.constraints)});y4(B,U)||(y(U),E.current.layout=U,ce&&ce(U),hu(L,U,w.current))}}),[]),bp(()=>{_.current.autoSaveId=t,_.current.direction=i,_.current.dragState=g,_.current.id=f,_.current.onLayout=o,_.current.storage=l}),eq({committedValuesRef:_,eagerValuesRef:E,groupId:f,layout:v,panelDataArray:E.current.panelDataArray,setLayout:y,panelGroupElement:p.current}),Rc(()=>{const{panelDataArray:Z}=E.current;if(t){if(v.length===0||v.length!==Z.length)return;let ce=x4[t];ce==null&&(ce=oq(lq,cq),x4[t]=ce);const B=[...Z],L=new Map(x.current);ce(t,B,L,v,l)}},[t,v,l]),Rc(()=>{});const C=Ii(Z=>{const{onLayout:ce}=_.current,{layout:B,panelDataArray:L}=E.current;if(Z.constraints.collapsible){const U=L.map(T=>T.constraints),{collapsedSize:k=0,panelSize:P,pivotIndices:I}=nc(L,Z,B);if(rt(P!=null),P!==k){x.current.set(Z.id,P);const X=Au(L,Z)===L.length-1?P-k:k-P,G=lh({delta:X,layout:B,panelConstraints:U,pivotIndices:I,trigger:"imperative-api"});mg(B,G)||(y(G),E.current.layout=G,ce&&ce(G),hu(L,G,w.current))}}},[]),N=Ii(Z=>{const{onLayout:ce}=_.current,{layout:B,panelDataArray:L}=E.current;if(Z.constraints.collapsible){const U=L.map(X=>X.constraints),{collapsedSize:k=0,panelSize:P,minSize:I=0,pivotIndices:T}=nc(L,Z,B);if(P===k){const X=x.current.get(Z.id),G=X!=null&&X>=I?X:I,ee=Au(L,Z)===L.length-1?P-G:G-P,Re=lh({delta:ee,layout:B,panelConstraints:U,pivotIndices:T,trigger:"imperative-api"});mg(B,Re)||(y(Re),E.current.layout=Re,ce&&ce(Re),hu(L,Re,w.current))}}},[]),R=Ii(Z=>{const{layout:ce,panelDataArray:B}=E.current,{panelSize:L}=nc(B,Z,ce);return rt(L!=null),L},[]),O=Ii((Z,ce)=>{const{panelDataArray:B}=E.current,L=Au(B,Z);return rq({defaultSize:ce,dragState:g,layout:v,panelData:B,panelIndex:L})},[g,v]),D=Ii(Z=>{const{layout:ce,panelDataArray:B}=E.current,{collapsedSize:L=0,collapsible:U,panelSize:k}=nc(B,Z,ce);return U===!0&&k===L},[]),j=Ii(Z=>{const{layout:ce,panelDataArray:B}=E.current,{collapsedSize:L=0,collapsible:U,panelSize:k}=nc(B,Z,ce);return rt(k!=null),!U||k>L},[]),q=Ii(Z=>{const{panelDataArray:ce}=E.current;ce.push(Z),ce.sort((B,L)=>{const U=B.order,k=L.order;return U==null&&k==null?0:U==null?-1:k==null?1:U-k}),E.current.panelDataArrayChanged=!0},[]);bp(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:Z,onLayout:ce,storage:B}=_.current,{layout:L,panelDataArray:U}=E.current;let k=null;if(Z){const I=aq(Z,U,B);I&&(x.current=new Map(Object.entries(I.expandToSizes)),k=I.layout)}k==null&&(k=iq({panelDataArray:U}));const P=w4({layout:k,panelConstraints:U.map(I=>I.constraints)});y4(L,P)||(y(P),E.current.layout=P,ce&&ce(P),hu(U,P,w.current))}});const $=Ii(Z=>function(B){B.preventDefault();const L=p.current;if(!L)return()=>null;const{direction:U,dragState:k,id:P,keyboardResizeBy:I,onLayout:T}=_.current,{layout:X,panelDataArray:G}=E.current,{initialLayout:ie}=k??{},ee=vD(P,Z,L);let Re=nq(B,Z,U,k,I,L);if(Re===0)return;const Ve=U==="horizontal";document.dir==="rtl"&&Ve&&(Re=-Re);const We=G.map(ve=>ve.constraints),Fe=lh({delta:Re,layout:ie??X,panelConstraints:We,pivotIndices:ee,trigger:bD(B)?"keyboard":"mouse-or-touch"}),tt=!mg(X,Fe);(wD(B)||xD(B))&&S.current!=Re&&(S.current=Re,sx(tt?Ve?"horizontal":"vertical":Ve?Re<0?"horizontal-min":"horizontal-max":Re<0?"vertical-min":"vertical-max")),tt&&(y(Fe),E.current.layout=Fe,T&&T(Fe),hu(G,Fe,w.current))},[]),K=Ii((Z,ce)=>{const{onLayout:B}=_.current,{layout:L,panelDataArray:U}=E.current,k=U.map(ie=>ie.constraints),{panelSize:P,pivotIndices:I}=nc(U,Z,L);rt(P!=null);const X=Au(U,Z)===U.length-1?P-ce:ce-P,G=lh({delta:X,layout:L,panelConstraints:k,pivotIndices:I,trigger:"imperative-api"});mg(L,G)||(y(G),E.current.layout=G,B&&B(G),hu(U,G,w.current))},[]),J=Ii((Z,ce)=>{const{layout:B,panelDataArray:L}=E.current,{collapsedSize:U=0,collapsible:k}=ce,{collapsedSize:P=0,collapsible:I,maxSize:T=100,minSize:X=0}=Z.constraints,{panelSize:G}=nc(L,Z,B);rt(G!=null),k&&I&&G===U?U!==P&&K(Z,P):G<X?K(Z,X):G>T&&K(Z,T)},[K]),Q=Ii((Z,ce)=>{const{direction:B}=_.current,{layout:L}=E.current;if(!p.current)return;const U=ub(Z,p.current);rt(U);const k=SD(B,ce);m({dragHandleId:Z,dragHandleRect:U.getBoundingClientRect(),initialCursorPosition:k,initialLayout:L})},[]),V=Ii(()=>{sq(),m(null)},[]),F=Ii(Z=>{const{panelDataArray:ce}=E.current,B=Au(ce,Z);B>=0&&(ce.splice(B,1),delete w.current[Z.id],E.current.panelDataArrayChanged=!0)},[]),re=YK(()=>({collapsePanel:C,direction:i,dragState:g,expandPanel:N,getPanelSize:R,getPanelStyle:O,groupId:f,isPanelCollapsed:D,isPanelExpanded:j,reevaluatePanelConstraints:J,registerPanel:q,registerResizeHandle:$,resizePanel:K,startDragging:Q,stopDragging:V,unregisterPanel:F,panelGroupElement:p.current}),[C,g,i,N,R,O,f,D,j,J,q,$,K,Q,V,F]),pe={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Ud(cb.Provider,{value:re},Ud(u,{...d,children:e,className:n,style:{...pe,...c},ref:p,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":f}))}const ND=dD((t,e)=>Ud(AD,{...t,forwardedRef:e}));AD.displayName="PanelGroup";ND.displayName="forwardRef(PanelGroup)";function Au(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function nc(t,e,n){const i=Au(t,e),s=i===t.length-1?[i-1,i]:[i,i+1],o=n[i];return{...e.constraints,panelSize:o,pivotIndices:s}}function uq({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){Rc(()=>{if(t||n==null||i==null)return;const r=ub(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");rt(a);const l=xp(a,i),c=gD(a,e,i);rt(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function JS({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=dr(null),u=dr({onDragging:r});Rc(()=>{u.current.onDragging=r});const d=fD(cb);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,dragState:p,groupId:g,registerResizeHandle:m,startDragging:v,stopDragging:y,panelGroupElement:w}=d,x=SC(i),S=(p==null?void 0:p.dragHandleId)===x,[_,E]=Dv(!1),[C,N]=Dv(null),R=Ii(()=>{const D=c.current;rt(D),D.blur(),y();const{onDragging:j}=u.current;j&&j(!1)},[y]);Rc(()=>{if(n)N(null);else{const D=m(x);N(()=>D)}},[n,x,m]),Rc(()=>{if(n||C==null||!S)return;const D=K=>{C(K)},j=K=>{C(K)},q=c.current;rt(q);const $=q.ownerDocument;return $.body.addEventListener("contextmenu",R),$.body.addEventListener("mousemove",D),$.body.addEventListener("touchmove",D),$.body.addEventListener("mouseleave",j),window.addEventListener("mouseup",R),window.addEventListener("touchend",R),()=>{$.body.removeEventListener("contextmenu",R),$.body.removeEventListener("mousemove",D),$.body.removeEventListener("touchmove",D),$.body.removeEventListener("mouseleave",j),window.removeEventListener("mouseup",R),window.removeEventListener("touchend",R)}},[f,n,S,C,R]),uq({disabled:n,handleId:x,resizeHandler:C,panelGroupElement:w});const O={cursor:kD(f),touchAction:"none",userSelect:"none"};return Ud(a,{...l,children:t,className:e,onBlur:()=>E(!1),onFocus:()=>E(!0),onMouseDown:D=>{v(x,D.nativeEvent);const j=u.current;rt(j);const{onDragging:q}=j;q&&q(!0)},onMouseUp:R,onTouchCancel:R,onTouchEnd:R,onTouchStart:D=>{v(x,D.nativeEvent);const j=u.current;rt(j);const{onDragging:q}=j;q&&q(!0)},ref:c,role:"separator",style:{...O,...s},tabIndex:o,"data-panel-group-direction":f,"data-panel-group-id":g,"data-resize-handle":"","data-resize-handle-active":S?"pointer":_?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":x})}JS.displayName="PanelResizeHandle";var eo=function(){return eo=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},eo.apply(this,arguments)};function PD(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function dq(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var fq=function(){};function hq(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function pq(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var MD=typeof window<"u",mq=MD?window:null,S4=function(t){return!!t.addEventListener},k4=function(t){return!!t.on},gq=function(t,e,n,i){n===void 0&&(n=mq),b.useEffect(function(){if(e&&n)return S4(n)?hq(n,t,e,i):k4(n)&&n.on(t,e,i),function(){S4(n)?pq(n,t,e,i):k4(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},vq=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},Nu=function(t,e,n,i){e===void 0&&(e=fq),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=b.useMemo(function(){var c=vq(t),u=function(d){if(c(d))return e(d)};return u},i);gq(s,l,o,a)},yq=function(t,e){return MD?window.matchMedia(t).matches:!1},bq=function(t,e){var n=b.useState(yq(t)),i=n[0],r=n[1];return b.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addEventListener("change",a),r(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),i};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const wq={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function xq(t,e,n){return(e=kq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_4(Object(n),!0).forEach(function(i){xq(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_4(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Sq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kq(t){var e=Sq(t,"string");return typeof e=="symbol"?e:e+""}const C4=()=>{};let kC={},RD={},TD=null,OD={mark:C4,measure:C4};try{typeof window<"u"&&(kC=window),typeof document<"u"&&(RD=document),typeof MutationObserver<"u"&&(TD=MutationObserver),typeof performance<"u"&&(OD=performance)}catch{}const{userAgent:E4=""}=kC.navigator||{},kl=kC,Gt=RD,A4=TD,gg=OD;kl.document;const ha=!!Gt.documentElement&&!!Gt.head&&typeof Gt.addEventListener=="function"&&typeof Gt.createElement=="function",ID=~E4.indexOf("MSIE")||~E4.indexOf("Trident/");var _q=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,Cq=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,jD={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},Eq={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},DD=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],gi="classic",db="duotone",Aq="sharp",Nq="sharp-duotone",LD=[gi,db,Aq,Nq],Pq={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},Mq={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},Rq=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),Tq={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},Oq=["fak","fa-kit","fakd","fa-kit-duotone"],N4={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},Iq=["kit"],jq={kit:{"fa-kit":"fak"}},Dq=["fak","fakd"],Lq={kit:{fak:"fa-kit"}},P4={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},vg={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},$q=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Bq=["fak","fa-kit","fakd","fa-kit-duotone"],Fq={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},zq={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},Uq={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},ZS={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},Vq=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],QS=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...$q,...Vq],Hq=["solid","regular","light","thin","duotone","brands"],$D=[1,2,3,4,5,6,7,8,9,10],Wq=$D.concat([11,12,13,14,15,16,17,18,19,20]),Gq=[...Object.keys(Uq),...Hq,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",vg.GROUP,vg.SWAP_OPACITY,vg.PRIMARY,vg.SECONDARY].concat($D.map(t=>"".concat(t,"x"))).concat(Wq.map(t=>"w-".concat(t))),Kq={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const sa="___FONT_AWESOME___",e2=16,BD="fa",FD="svg-inline--fa",Vc="data-fa-i2svg",t2="data-fa-pseudo-element",qq="data-fa-pseudo-element-pending",_C="data-prefix",CC="data-icon",M4="fontawesome-i2svg",Yq="async",Xq=["HTML","HEAD","STYLE","SCRIPT"],zD=(()=>{try{return!0}catch{return!1}})();function pm(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[gi]}})}const UD=ae({},jD);UD[gi]=ae(ae(ae(ae({},{"fa-duotone":"duotone"}),jD[gi]),N4.kit),N4["kit-duotone"]);const Jq=pm(UD),n2=ae({},Tq);n2[gi]=ae(ae(ae(ae({},{duotone:"fad"}),n2[gi]),P4.kit),P4["kit-duotone"]);const R4=pm(n2),i2=ae({},ZS);i2[gi]=ae(ae({},i2[gi]),Lq.kit);const EC=pm(i2),r2=ae({},zq);r2[gi]=ae(ae({},r2[gi]),jq.kit);pm(r2);const Zq=_q,VD="fa-layers-text",Qq=Cq,eY=ae({},Pq);pm(eY);const tY=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],ox=Eq,nY=[...Iq,...Gq],jh=kl.FontAwesomeConfig||{};function iY(t){var e=Gt.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function rY(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}Gt&&typeof Gt.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=rY(iY(n));r!=null&&(jh[i]=r)});const HD={styleDefault:"solid",familyDefault:gi,cssPrefix:BD,replacementClass:FD,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};jh.familyPrefix&&(jh.cssPrefix=jh.familyPrefix);const Vd=ae(ae({},HD),jh);Vd.autoReplaceSvg||(Vd.observeMutations=!1);const Le={};Object.keys(HD).forEach(t=>{Object.defineProperty(Le,t,{enumerable:!0,set:function(e){Vd[t]=e,Dh.forEach(n=>n(Le))},get:function(){return Vd[t]}})});Object.defineProperty(Le,"familyPrefix",{enumerable:!0,set:function(t){Vd.cssPrefix=t,Dh.forEach(e=>e(Le))},get:function(){return Vd.cssPrefix}});kl.FontAwesomeConfig=Le;const Dh=[];function sY(t){return Dh.push(t),()=>{Dh.splice(Dh.indexOf(t),1)}}const ka=e2,oo={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function oY(t){if(!t||!ha)return;const e=Gt.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=Gt.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return Gt.head.insertBefore(e,i),t}const aY="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Sp(){let t=12,e="";for(;t-- >0;)e+=aY[Math.random()*62|0];return e}function ff(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function AC(t){return t.classList?ff(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function WD(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function lY(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(WD(t[n]),'" '),"").trim()}function fb(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function NC(t){return t.size!==oo.size||t.x!==oo.x||t.y!==oo.y||t.rotate!==oo.rotate||t.flipX||t.flipY}function cY(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:c}}function uY(t){let{transform:e,width:n=e2,height:i=e2,startCentered:r=!1}=t,s="";return r&&ID?s+="translate(".concat(e.x/ka-n/2,"em, ").concat(e.y/ka-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/ka,"em), calc(-50% + ").concat(e.y/ka,"em)) "):s+="translate(".concat(e.x/ka,"em, ").concat(e.y/ka,"em) "),s+="scale(".concat(e.size/ka*(e.flipX?-1:1),", ").concat(e.size/ka*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var dY=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function GD(){const t=BD,e=FD,n=Le.cssPrefix,i=Le.replacementClass;let r=dY;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let T4=!1;function ax(){Le.autoAddCss&&!T4&&(oY(GD()),T4=!0)}var fY={mixout(){return{dom:{css:GD,insertCss:ax}}},hooks(){return{beforeDOMElementCreation(){ax()},beforeI2svg(){ax()}}}};const oa=kl||{};oa[sa]||(oa[sa]={});oa[sa].styles||(oa[sa].styles={});oa[sa].hooks||(oa[sa].hooks={});oa[sa].shims||(oa[sa].shims=[]);var ao=oa[sa];const KD=[],qD=function(){Gt.removeEventListener("DOMContentLoaded",qD),Lv=1,KD.map(t=>t())};let Lv=!1;ha&&(Lv=(Gt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Gt.readyState),Lv||Gt.addEventListener("DOMContentLoaded",qD));function hY(t){ha&&(Lv?setTimeout(t,0):KD.push(t))}function mm(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?WD(t):"<".concat(e," ").concat(lY(n),">").concat(i.map(mm).join(""),"</").concat(e,">")}function O4(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var lx=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,c,u;for(i===void 0?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function pY(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function s2(t){const e=pY(t);return e.length===1?e[0].toString(16):null}function mY(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function I4(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function o2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=I4(e);typeof ao.hooks.addPack=="function"&&!i?ao.hooks.addPack(t,I4(e)):ao.styles[t]=ae(ae({},ao.styles[t]||{}),r),t==="fas"&&o2("fa",e)}const{styles:kp,shims:gY}=ao,YD=Object.keys(EC),vY=YD.reduce((t,e)=>(t[e]=Object.keys(EC[e]),t),{});let PC=null,XD={},JD={},ZD={},QD={},eL={};function yY(t){return~nY.indexOf(t)}function bY(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!yY(r)?r:null}const tL=()=>{const t=i=>lx(kp,(r,s,o)=>(r[o]=lx(s,i,{}),r),{});XD=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),JD=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),eL=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in kp||Le.autoFetchSvg,n=lx(gY,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});ZD=n.names,QD=n.unicodes,PC=hb(Le.styleDefault,{family:Le.familyDefault})};sY(t=>{PC=hb(t.styleDefault,{family:Le.familyDefault})});tL();function MC(t,e){return(XD[t]||{})[e]}function wY(t,e){return(JD[t]||{})[e]}function _c(t,e){return(eL[t]||{})[e]}function nL(t){return ZD[t]||{prefix:null,iconName:null}}function xY(t){const e=QD[t],n=MC("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function _l(){return PC}const iL=()=>({prefix:null,iconName:null,rest:[]});function SY(t){let e=gi;const n=YD.reduce((i,r)=>(i[r]="".concat(Le.cssPrefix,"-").concat(r),i),{});return LD.forEach(i=>{(t.includes(n[i])||t.some(r=>vY[i].includes(r)))&&(e=i)}),e}function hb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=gi}=e,i=Jq[n][t];if(n===db&&!t)return"fad";const r=R4[n][t]||R4[n][i],s=t in ao.styles?t:null;return r||s||null}function kY(t){let e=[],n=null;return t.forEach(i=>{const r=bY(Le.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function j4(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function pb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=QS.concat(Bq),s=j4(t.filter(d=>r.includes(d))),o=j4(t.filter(d=>!QS.includes(d))),a=s.filter(d=>(i=d,!DD.includes(d))),[l=null]=a,c=SY(s),u=ae(ae({},kY(o)),{},{prefix:hb(l,{family:c})});return ae(ae(ae({},u),AY({values:t,family:c,styles:kp,config:Le,canonical:u,givenPrefix:i})),_Y(n,i,u))}function _Y(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?nL(r):{},o=_c(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!kp.far&&kp.fas&&!Le.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const CY=LD.filter(t=>t!==gi||t!==db),EY=Object.keys(ZS).filter(t=>t!==gi).map(t=>Object.keys(ZS[t])).flat();function AY(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===db,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||c||u)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&CY.includes(n)&&(Object.keys(s).find(f=>EY.includes(f))||o.autoFetchSvg)){const f=Rq.get(n).defaultShortPrefixId;i.prefix=f,i.iconName=_c(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=_l()||"fas"),i}class NY{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=ae(ae({},this.definitions[s]||{}),r[s]),o2(s,r[s]);const o=EC[gi][s];o&&o2(o,r[s]),tL()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=a)}),e[s][o]=a}),e}}let D4=[],Xu={};const dd={},PY=Object.keys(dd);function MY(t,e){let{mixoutsTo:n}=e;return D4=t,Xu={},Object.keys(dd).forEach(i=>{PY.indexOf(i)===-1&&delete dd[i]}),D4.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{Xu[o]||(Xu[o]=[]),Xu[o].push(s[o])})}i.provides&&i.provides(dd)}),n}function a2(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(Xu[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function Hc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(Xu[t]||[]).forEach(s=>{s.apply(null,n)})}function Cl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return dd[t]?dd[t].apply(null,e):void 0}function l2(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||_l();if(e)return e=_c(n,e)||e,O4(rL.definitions,n,e)||O4(ao.styles,n,e)}const rL=new NY,RY=()=>{Le.autoReplaceSvg=!1,Le.observeMutations=!1,Hc("noAuto")},TY={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ha?(Hc("beforeI2svg",t),Cl("pseudoElements2svg",t),Cl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Le.autoReplaceSvg===!1&&(Le.autoReplaceSvg=!0),Le.observeMutations=!0,hY(()=>{IY({autoReplaceSvgRoot:e}),Hc("watch",t)})}},OY={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:_c(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=hb(t[0]);return{prefix:n,iconName:_c(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Le.cssPrefix,"-"))>-1||t.match(Zq))){const e=pb(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||_l(),iconName:_c(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=_l();return{prefix:e,iconName:_c(e,t)||t}}}},Pr={noAuto:RY,config:Le,dom:TY,parse:OY,library:rL,findIconDefinition:l2,toHtml:mm},IY=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Gt}=t;(Object.keys(ao.styles).length>0||Le.autoFetchSvg)&&ha&&Le.autoReplaceSvg&&Pr.dom.i2svg({node:e})};function mb(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>mm(n))}}),Object.defineProperty(t,"node",{get:function(){if(!ha)return;const n=Gt.createElement("div");return n.innerHTML=t.html,n.children}}),t}function jY(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(NC(o)&&n.found&&!i.found){const{width:a,height:l}=n,c={x:a/l/2,y:.5};r.style=fb(ae(ae({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function DY(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(Le.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ae(ae({},r),{},{id:o}),children:i}]}]}function RC(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:d=!1}=t,{width:f,height:p}=n.found?n:e,g=Dq.includes(i),m=[Le.replacementClass,r?"".concat(Le.cssPrefix,"-").concat(r):""].filter(_=>u.classes.indexOf(_)===-1).filter(_=>_!==""||!!_).concat(u.classes).join(" ");let v={children:[],attributes:ae(ae({},u.attributes),{},{"data-prefix":i,"data-icon":r,class:m,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(p)})};const y=g&&!~u.classes.indexOf("fa-fw")?{width:"".concat(f/p*16*.0625,"em")}:{};d&&(v.attributes[Vc]=""),a&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(c||Sp())},children:[a]}),delete v.attributes.title);const w=ae(ae({},v),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:ae(ae({},y),u.styles)}),{children:x,attributes:S}=n.found&&e.found?Cl("generateAbstractMask",w)||{children:[],attributes:{}}:Cl("generateAbstractIcon",w)||{children:[],attributes:{}};return w.children=x,w.attributes=S,o?DY(w):jY(w)}function L4(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=ae(ae(ae({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Vc]="");const c=ae({},o.styles);NC(r)&&(c.transform=uY({transform:r,startCentered:!0,width:n,height:i}),c["-webkit-transform"]=c.transform);const u=fb(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function LY(t){const{content:e,title:n,extra:i}=t,r=ae(ae(ae({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=fb(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:cx}=ao;function c2(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat(Le.cssPrefix,"-").concat(ox.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Le.cssPrefix,"-").concat(ox.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(Le.cssPrefix,"-").concat(ox.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const $Y={found:!1,width:512,height:512};function BY(t,e){!zD&&!Le.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function u2(t,e){let n=e;return e==="fa"&&Le.styleDefault!==null&&(e=_l()),new Promise((i,r)=>{if(n==="fa"){const s=nL(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&cx[e]&&cx[e][t]){const s=cx[e][t];return i(c2(s))}BY(t,e),i(ae(ae({},$Y),{},{icon:Le.showMissingIcons&&t?Cl("missingIconAbstract")||{}:{}}))})}const $4=()=>{},d2=Le.measurePerformance&&gg&&gg.mark&&gg.measure?gg:{mark:$4,measure:$4},uh='FA "6.7.1"',FY=t=>(d2.mark("".concat(uh," ").concat(t," begins")),()=>sL(t)),sL=t=>{d2.mark("".concat(uh," ").concat(t," ends")),d2.measure("".concat(uh," ").concat(t),"".concat(uh," ").concat(t," begins"),"".concat(uh," ").concat(t," ends"))};var TC={begin:FY,end:sL};const P0=()=>{};function B4(t){return typeof(t.getAttribute?t.getAttribute(Vc):null)=="string"}function zY(t){const e=t.getAttribute?t.getAttribute(_C):null,n=t.getAttribute?t.getAttribute(CC):null;return e&&n}function UY(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Le.replacementClass)}function VY(){return Le.autoReplaceSvg===!0?M0.replace:M0[Le.autoReplaceSvg]||M0.replace}function HY(t){return Gt.createElementNS("http://www.w3.org/2000/svg",t)}function WY(t){return Gt.createElement(t)}function oL(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?HY:WY}=e;if(typeof t=="string")return Gt.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild(oL(s,{ceFn:n}))}),i}function GY(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const M0={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(oL(n),e)}),e.getAttribute(Vc)===null&&Le.keepOriginalSource){let n=Gt.createComment(GY(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~AC(e).indexOf(Le.replacementClass))return M0.replace(t);const i=new RegExp("".concat(Le.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===Le.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>mm(s)).join(`
`);e.setAttribute(Vc,""),e.innerHTML=r}};function F4(t){t()}function aL(t,e){const n=typeof e=="function"?e:P0;if(t.length===0)n();else{let i=F4;Le.mutateApproach===Yq&&(i=kl.requestAnimationFrame||F4),i(()=>{const r=VY(),s=TC.begin("mutate");t.map(r),s(),n()})}}let OC=!1;function lL(){OC=!0}function f2(){OC=!1}let $v=null;function z4(t){if(!A4||!Le.observeMutations)return;const{treeCallback:e=P0,nodeCallback:n=P0,pseudoElementsCallback:i=P0,observeMutationsRoot:r=Gt}=t;$v=new A4(s=>{if(OC)return;const o=_l();ff(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!B4(a.addedNodes[0])&&(Le.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Le.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&B4(a.target)&&~tY.indexOf(a.attributeName))if(a.attributeName==="class"&&zY(a.target)){const{prefix:l,iconName:c}=pb(AC(a.target));a.target.setAttribute(_C,l||o),c&&a.target.setAttribute(CC,c)}else UY(a.target)&&n(a.target)})}),ha&&$v.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function KY(){$v&&$v.disconnect()}function qY(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function YY(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=pb(AC(t));return r.prefix||(r.prefix=_l()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=wY(r.prefix,t.innerText)||MC(r.prefix,s2(t.innerText))),!r.iconName&&Le.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function XY(t){const e=ff(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return Le.autoA11y&&(n?e["aria-labelledby"]="".concat(Le.replacementClass,"-title-").concat(i||Sp()):(e["aria-hidden"]="true",e.focusable="false")),e}function JY(){return{iconName:null,title:null,titleId:null,prefix:null,transform:oo,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function U4(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=YY(t),s=XY(t),o=a2("parseNodeAttributes",{},t);let a=e.styleParser?qY(t):[];return ae({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:oo,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:ZY}=ao;function cL(t){const e=Le.autoReplaceSvg==="nest"?U4(t,{styleParser:!1}):U4(t);return~e.extra.classes.indexOf(VD)?Cl("generateLayersText",t,e):Cl("generateSvgReplacementMutation",t,e)}function QY(){return[...Oq,...QS]}function V4(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!ha)return Promise.resolve();const n=Gt.documentElement.classList,i=u=>n.add("".concat(M4,"-").concat(u)),r=u=>n.remove("".concat(M4,"-").concat(u)),s=Le.autoFetchSvg?QY():DD.concat(Object.keys(ZY));s.includes("fa")||s.push("fa");const o=[".".concat(VD,":not([").concat(Vc,"])")].concat(s.map(u=>".".concat(u,":not([").concat(Vc,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=ff(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=TC.begin("onTree"),c=a.reduce((u,d)=>{try{const f=cL(d);f&&u.push(f)}catch(f){zD||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(f=>{aL(f,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),u()})}).catch(f=>{l(),d(f)})})}function eX(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;cL(t).then(n=>{n&&aL([n],e)})}function tX(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:l2(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:l2(r||{})),t(i,ae(ae({},n),{},{mask:r}))}}const nX=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=oo,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!t)return;const{prefix:d,iconName:f,icon:p}=t;return mb(ae({type:"icon"},t),()=>(Hc("beforeDOMElementCreation",{iconDefinition:t,params:e}),Le.autoA11y&&(o?c["aria-labelledby"]="".concat(Le.replacementClass,"-title-").concat(a||Sp()):(c["aria-hidden"]="true",c.focusable="false")),RC({icons:{main:c2(p),mask:r?c2(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:f,transform:ae(ae({},oo),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var iX={mixout(){return{icon:tX(nX)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=V4,t.nodeCallback=eX,t}}},provides(t){t.i2svg=function(e){const{node:n=Gt,callback:i=()=>{}}=e;return V4(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:d}=n;return new Promise((f,p)=>{Promise.all([u2(i,o),c.iconName?u2(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(g=>{let[m,v]=g;f([e,RC({icons:{main:m,mask:v},prefix:o,iconName:i,transform:a,symbol:l,maskId:u,title:r,titleId:s,extra:d,watchable:!0})])}).catch(p)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=fb(o);a.length>0&&(i.style=a);let l;return NC(s)&&(l=Cl("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},rX={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return mb({type:"layer"},()=>{Hc("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat(Le.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},sX={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return mb({type:"counter",content:t},()=>(Hc("beforeDOMElementCreation",{content:t,params:e}),LY({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat(Le.cssPrefix,"-layers-counter"),...i]}})))}}}},oX={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=oo,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return mb({type:"text",content:t},()=>(Hc("beforeDOMElementCreation",{content:t,params:e}),L4({content:t,transform:ae(ae({},oo),n),title:i,extra:{attributes:s,styles:o,classes:["".concat(Le.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(ID){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return Le.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,L4({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const aX=new RegExp('"',"ug"),H4=[1105920,1112319],W4=ae(ae(ae(ae({},{FontAwesome:{normal:"fas",400:"fas"}}),Mq),Kq),Fq),h2=Object.keys(W4).reduce((t,e)=>(t[e.toLowerCase()]=W4[e],t),{}),lX=Object.keys(h2).reduce((t,e)=>{const n=h2[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function cX(t){const e=t.replace(aX,""),n=mY(e,0),i=n>=H4[0]&&n<=H4[1],r=e.length===2?e[0]===e[1]:!1;return{value:s2(r?e[0]:e),isSecondary:i||r}}function uX(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(h2[n]||{})[r]||lX[n]}function G4(t,e){const n="".concat(qq).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=ff(t.children).filter(f=>f.getAttribute(t2)===e)[0],a=kl.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),c=l.match(Qq),u=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return t.removeChild(o),i();if(c&&d!=="none"&&d!==""){const f=a.getPropertyValue("content");let p=uX(l,u);const{value:g,isSecondary:m}=cX(f),v=c[0].startsWith("FontAwesome");let y=MC(p,g),w=y;if(v){const x=xY(g);x.iconName&&x.prefix&&(y=x.iconName,p=x.prefix)}if(y&&!m&&(!o||o.getAttribute(_C)!==p||o.getAttribute(CC)!==w)){t.setAttribute(n,w),o&&t.removeChild(o);const x=JY(),{extra:S}=x;S.attributes[t2]=e,u2(y,p).then(_=>{const E=RC(ae(ae({},x),{},{icons:{main:_,mask:iL()},prefix:p,iconName:w,extra:S,watchable:!0})),C=Gt.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(C,t.firstChild):t.appendChild(C),C.outerHTML=E.map(N=>mm(N)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function dX(t){return Promise.all([G4(t,"::before"),G4(t,"::after")])}function fX(t){return t.parentNode!==document.head&&!~Xq.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(t2)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function K4(t){if(ha)return new Promise((e,n)=>{const i=ff(t.querySelectorAll("*")).filter(fX).map(dX),r=TC.begin("searchPseudoElements");lL(),Promise.all(i).then(()=>{r(),f2(),e()}).catch(()=>{r(),f2(),n()})})}var hX={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=K4,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=Gt}=e;Le.searchPseudoElements&&K4(n)}}};let q4=!1;var pX={mixout(){return{dom:{unwatch(){lL(),q4=!0}}}},hooks(){return{bootstrap(){z4(a2("mutationObserverCallbacks",{}))},noAuto(){KY()},watch(t){const{observeMutationsRoot:e}=t;q4?f2():z4(a2("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const Y4=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var mX={mixout(){return{parse:{transform:t=>Y4(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=Y4(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),c="rotate(".concat(i.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},d={transform:"translate(".concat(s/2*-1," -256)")},f={outer:o,inner:u,path:d};return{tag:"g",attributes:ae({},f.outer),children:[{tag:"g",attributes:ae({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:ae(ae({},n.icon.attributes),f.path)}]}]}}}};const ux={x:0,y:0,width:"100%",height:"100%"};function X4(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function gX(t){return t.tag==="g"?t.children:[t]}var vX={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?pb(n.split(" ").map(r=>r.trim())):iL();return i.prefix||(i.prefix=_l()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:c}=r,{width:u,icon:d}=s,f=cY({transform:a,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:ae(ae({},ux),{},{fill:"white"})},g=c.children?{children:c.children.map(X4)}:{},m={tag:"g",attributes:ae({},f.inner),children:[X4(ae({tag:c.tag,attributes:ae(ae({},c.attributes),f.path)},g))]},v={tag:"g",attributes:ae({},f.outer),children:[m]},y="mask-".concat(o||Sp()),w="clip-".concat(o||Sp()),x={tag:"mask",attributes:ae(ae({},ux),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},S={tag:"defs",children:[{tag:"clipPath",attributes:{id:w},children:gX(d)},x]};return n.push(S,{tag:"rect",attributes:ae({fill:"currentColor","clip-path":"url(#".concat(w,")"),mask:"url(#".concat(y,")")},ux)}),{children:n,attributes:i}}}},yX={provides(t){let e=!1;kl.matchMedia&&(e=kl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:ae(ae({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=ae(ae({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:ae(ae({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:ae(ae({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ae(ae({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:ae(ae({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:ae(ae({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:ae(ae({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ae(ae({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},bX={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},wX=[fY,iX,rX,sX,oX,hX,pX,mX,vX,yX,bX];MY(wX,{mixoutsTo:Pr});Pr.noAuto;Pr.config;Pr.library;Pr.dom;const p2=Pr.parse;Pr.findIconDefinition;Pr.toHtml;const xX=Pr.icon;Pr.layer;Pr.text;Pr.counter;var uL={exports:{}},SX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kX=SX,_X=kX;function dL(){}function fL(){}fL.resetWarningCache=dL;var CX=function(){function t(i,r,s,o,a,l){if(l!==_X){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:fL,resetWarningCache:dL};return n.PropTypes=n,n};uL.exports=CX();var EX=uL.exports;const ct=iu(EX);function J4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J4(Object(n),!0).forEach(function(i){Ju(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J4(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Bv(t){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bv(t)}function Ju(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AX(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function NX(t,e){if(t==null)return{};var n=AX(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function m2(t){return PX(t)||MX(t)||RX(t)||TX()}function PX(t){if(Array.isArray(t))return g2(t)}function MX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function RX(t,e){if(t){if(typeof t=="string")return g2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g2(t,e)}}function g2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function TX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OX(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,d=t.pulse,f=t.fixedWidth,p=t.inverse,g=t.border,m=t.listItem,v=t.flip,y=t.size,w=t.rotation,x=t.pull,S=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":f,"fa-inverse":p,"fa-border":g,"fa-li":m,"fa-flip":v===!0,"fa-flip-horizontal":v==="horizontal"||v==="both","fa-flip-vertical":v==="vertical"||v==="both"},Ju(e,"fa-".concat(y),typeof y<"u"&&y!==null),Ju(e,"fa-rotate-".concat(w),typeof w<"u"&&w!==null&&w!==0),Ju(e,"fa-pull-".concat(x),typeof x<"u"&&x!==null),Ju(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(S).map(function(_){return S[_]?_:null}).filter(function(_){return _})}function IX(t){return t=t-0,t===t}function hL(t){return IX(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var jX=["style"];function DX(t){return t.charAt(0).toUpperCase()+t.slice(1)}function LX(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=hL(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[DX(r)]=s:e[r]=s,e},{})}function pL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return pL(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=LX(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[hL(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=NX(n,jX);return r.attrs.style=Js(Js({},r.attrs.style),o),t.apply(void 0,[e.tag,Js(Js({},r.attrs),a)].concat(m2(i)))}var mL=!1;try{mL=!0}catch{}function $X(){if(!mL&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function Z4(t){if(t&&Bv(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(p2.icon)return p2.icon(t);if(t===null)return null;if(t&&Bv(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function dx(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Ju({},t,e):{}}var Q4={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Be=Vt.forwardRef(function(t,e){var n=Js(Js({},Q4),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=Z4(i),d=dx("classes",[].concat(m2(OX(n)),m2((o||"").split(" ")))),f=dx("transform",typeof n.transform=="string"?p2.transform(n.transform):n.transform),p=dx("mask",Z4(r)),g=xX(u,Js(Js(Js(Js({},d),f),p),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!g)return $X("Could not find icon",u),null;var m=g.abstract,v={ref:e};return Object.keys(n).forEach(function(y){Q4.hasOwnProperty(y)||(v[y]=n[y])}),BX(m[0],v)});Be.displayName="FontAwesomeIcon";Be.propTypes={beat:ct.bool,border:ct.bool,beatFade:ct.bool,bounce:ct.bool,className:ct.string,fade:ct.bool,flash:ct.bool,mask:ct.oneOfType([ct.object,ct.array,ct.string]),maskId:ct.string,fixedWidth:ct.bool,inverse:ct.bool,flip:ct.oneOf([!0,!1,"horizontal","vertical","both"]),icon:ct.oneOfType([ct.object,ct.array,ct.string]),listItem:ct.bool,pull:ct.oneOf(["right","left"]),pulse:ct.bool,rotation:ct.oneOf([0,90,180,270]),shake:ct.bool,size:ct.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:ct.bool,spinPulse:ct.bool,spinReverse:ct.bool,symbol:ct.oneOfType([ct.bool,ct.string]),title:ct.string,titleId:ct.string,transform:ct.oneOfType([ct.string,ct.object]),swapOpacity:ct.bool};var BX=pL.bind(null,Vt.createElement);function gL(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=gL(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function te(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=gL(t))&&(i&&(i+=" "),i+=e);return i}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const e3={prefix:"fas",iconName:"info",icon:[192,512,[],"f129","M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"]},FX={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},IC=FX,fd={prefix:"fas",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"]},zX={prefix:"fas",iconName:"compress",icon:[448,512,[],"f066","M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"]},UX={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},VX={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},HX={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},WX={prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"]},GX={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},vL=GX,Lh={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},KX={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},qX=KX,YX={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},XX={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},JX=XX,t3={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},ZX={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},yL=ZX,QX={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},bL=QX,eJ={prefix:"fas",iconName:"backward-step",icon:[320,512,["step-backward"],"f048","M267.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-320c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160L64 241 64 96c0-17.7-14.3-32-32-32S0 78.3 0 96L0 416c0 17.7 14.3 32 32 32s32-14.3 32-32l0-145 11.5 9.6 192 160z"]},wL=eJ,tJ={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},n3={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]},_p={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},nJ={prefix:"fas",iconName:"expand",icon:[448,512,[],"f065","M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"]},iJ={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},gm=iJ,jC={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},rJ={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},sJ={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},DC={prefix:"fas",iconName:"trophy",icon:[576,512,[127942],"f091","M400 0L176 0c-26.5 0-48.1 21.8-47.1 48.2c.2 5.3 .4 10.6 .7 15.8L24 64C10.7 64 0 74.7 0 88c0 92.6 33.5 157 78.5 200.7c44.3 43.1 98.3 64.8 138.1 75.8c23.4 6.5 39.4 26 39.4 45.6c0 20.9-17 37.9-37.9 37.9L192 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-26.1 0C337 448 320 431 320 410.1c0-19.6 15.9-39.2 39.4-45.6c39.9-11 93.9-32.7 138.2-75.8C542.5 245 576 180.6 576 88c0-13.3-10.7-24-24-24L446.4 64c.3-5.2 .5-10.4 .7-15.8C448.1 21.8 426.5 0 400 0zM48.9 112l84.4 0c9.1 90.1 29.2 150.3 51.9 190.6c-24.9-11-50.8-26.5-73.2-48.3c-32-31.1-58-76-63-142.3zM464.1 254.3c-22.4 21.8-48.3 37.3-73.2 48.3c22.7-40.3 42.8-100.5 51.9-190.6l84.4 0c-5.1 66.3-31.1 111.2-63 142.3z"]},xL={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},oJ={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},aJ=oJ,lJ={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]},cJ={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M96 0C43 0 0 43 0 96L0 416c0 53 43 96 96 96l288 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64c17.7 0 32-14.3 32-32l0-320c0-17.7-14.3-32-32-32L384 0 96 0zm0 384l256 0 0 64L96 448c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16zm16 48l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},SL={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},uJ={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},v2=uJ,dJ={prefix:"fas",iconName:"database",icon:[448,512,[],"f1c0","M448 80l0 48c0 44.2-100.3 80-224 80S0 172.2 0 128L0 80C0 35.8 100.3 0 224 0S448 35.8 448 80zM393.2 214.7c20.8-7.4 39.9-16.9 54.8-28.6L448 288c0 44.2-100.3 80-224 80S0 332.2 0 288L0 186.1c14.9 11.8 34 21.2 54.8 28.6C99.7 230.7 159.5 240 224 240s124.3-9.3 169.2-25.3zM0 346.1c14.9 11.8 34 21.2 54.8 28.6C99.7 390.7 159.5 400 224 400s124.3-9.3 169.2-25.3c20.8-7.4 39.9-16.9 54.8-28.6l0 85.9c0 44.2-100.3 80-224 80S0 476.2 0 432l0-85.9z"]},vm={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[127891,"mortar-board"],"f19d","M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9l0 28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5l0-24.6c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"]},kL={default:"bg-stone-800 text-white hover:bg-stone-700 focus:ring-stone-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-stone-600 bg-transparent text-white hover:bg-stone-800 focus:ring-stone-500",secondary:"bg-stone-700 text-white hover:bg-stone-600 focus:ring-stone-500",ghost:"bg-transparent text-stone-300 hover:bg-stone-800 hover:text-white focus:ring-stone-500",link:"bg-transparent text-mantis-400 hover:text-mantis-300 hover:underline focus:ring-mantis-500",primary:"bg-mantis-600 text-white hover:bg-mantis-700 focus:ring-mantis-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",error:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},fJ={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg"},bt=b.memo(b.forwardRef(({variant:t="default",size:e="md",isLoading:n=!1,loadingText:i,leftIcon:r,rightIcon:s,disabled:o=!1,fullWidth:a=!1,className:l,children:c,onClick:u,type:d="button","aria-label":f,title:p,...g},m)=>{const v=o||n;return h.jsxs("button",{ref:m,type:d,disabled:v,onClick:u,"aria-label":f,title:p,className:te("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",kL[t],fJ[e],a&&"w-full",l),...g,children:[n&&h.jsx(Be,{icon:xL,className:"animate-spin","aria-hidden":"true"}),!n&&r&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:r}),h.jsx("span",{children:n&&i?i:c}),!n&&s&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:s})]})}));bt.displayName="Button";const R0=b.memo(b.forwardRef(({icon:t,variant:e="ghost",size:n="md",isLoading:i=!1,disabled:r=!1,className:s,onClick:o,"aria-label":a,title:l,...c},u)=>{const d=r||i,f={sm:"size-8",md:"size-10",lg:"size-12",xl:"size-14"};return h.jsx("button",{ref:u,disabled:d,onClick:o,"aria-label":a,title:l,className:te("inline-flex items-center justify-center rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",kL[e],f[n],s),...c,children:i?h.jsx(Be,{icon:xL,className:"animate-spin","aria-hidden":"true"}):h.jsx("span",{className:"flex items-center justify-center","aria-hidden":"true",children:t})})}));R0.displayName="IconButton";const hJ=b.memo(({children:t,orientation:e="horizontal",className:n})=>h.jsx("div",{className:te("inline-flex",e==="horizontal"?"flex-row":"flex-col",n),role:"group",children:t}));hJ.displayName="ButtonGroup";const _L={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2","top-start":"bottom-full left-0 mb-2","top-end":"bottom-full right-0 mb-2","bottom-start":"top-full left-0 mt-2","bottom-end":"top-full right-0 mt-2"},CL={top:"top-full left-1/2 transform -translate-x-1/2 border-t-stone-800",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-b-stone-800",left:"left-full top-1/2 transform -translate-y-1/2 border-l-stone-800",right:"right-full top-1/2 transform -translate-y-1/2 border-r-stone-800","top-start":"top-full left-4 border-t-stone-800","top-end":"top-full right-4 border-t-stone-800","bottom-start":"bottom-full left-4 border-b-stone-800","bottom-end":"bottom-full right-4 border-b-stone-800"},xr=b.memo(({content:t,children:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=b.useState(!1),[u,d]=b.useState(n),f=b.useRef(null),p=b.useRef(null),g=b.useRef(),m=b.useCallback(()=>{a||(document.body.classList.add("tooltip-open"),g.current=setTimeout(()=>{c(!0)},i))},[a,i]),v=b.useCallback(()=>{g.current&&clearTimeout(g.current),document.body.classList.remove("tooltip-open"),c(!1)},[]);return b.useEffect(()=>{if(!l||!p.current||!f.current)return;const y=p.current,x=f.current.getBoundingClientRect(),S=y.getBoundingClientRect();let _=n;x.left+S.width>window.innerWidth&&(n.includes("right")?_="left":n.includes("top")?_="top-end":n.includes("bottom")&&(_="bottom-end")),x.left-S.width<0&&(n.includes("left")?_="right":n.includes("top")?_="top-start":n.includes("bottom")&&(_="bottom-start")),x.top-S.height<0&&n.includes("top")&&(_="bottom"),x.bottom+S.height>window.innerHeight&&n.includes("bottom")&&(_="top"),d(_)},[l,n]),h.jsxs("div",{ref:f,className:te("relative inline-block",r),onMouseEnter:m,onMouseLeave:v,onFocus:m,onBlur:v,children:[e,l&&h.jsxs("div",{ref:p,className:te("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",_L[u]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&h.jsx("div",{className:te("absolute size-0 border-4 border-transparent",CL[u])})]})]})});xr.displayName="Tooltip";const pJ=b.memo(({content:t,className:e,size:n="md"})=>{const i={sm:"size-3",md:"size-4",lg:"size-5"};return h.jsx(xr,{content:t,className:e,children:h.jsx(Be,{icon:bL,className:te("cursor-help text-stone-400 transition-colors hover:text-stone-300",i[n])})})});pJ.displayName="InfoTooltip";const mJ=b.memo(({content:t,trigger:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=b.useState(!1),u=b.useRef(null),d=b.useRef(null),f=b.useRef(),p=b.useCallback(()=>{a||(f.current=setTimeout(()=>{c(!0)},i))},[a,i]),g=b.useCallback(()=>{f.current&&clearTimeout(f.current),c(!1)},[]);return h.jsxs("div",{ref:u,className:te("relative inline-block",r),onMouseEnter:p,onMouseLeave:g,onFocus:p,onBlur:g,children:[e,l&&h.jsxs("div",{ref:d,className:te("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",_L[n]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&h.jsx("div",{className:te("absolute size-0 border-4 border-transparent",CL[n])})]})]})});mJ.displayName="CustomTooltip";function EL(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const AL=["en","es"];function LC(t){return function(n,i,...r){const s=EL(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const $C={},gJ=Symbol(($C?"production":void 0)!=="production"?"RESET":""),NL=t=>typeof(t==null?void 0:t.then)=="function";function vJ(t=()=>{try{return window.localStorage}catch(n){($C?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let i,r;const s={getItem:(l,c)=>{var u,d;const f=g=>{if(g=g||"",i!==g){try{r=JSON.parse(g,e==null?void 0:e.reviver)}catch{return c}i=g}return r},p=(d=(u=t())==null?void 0:u.getItem(l))!=null?d:null;return NL(p)?p.then(f):f(p)},setItem:(l,c)=>{var u;return(u=t())==null?void 0:u.setItem(l,JSON.stringify(c,void 0))},removeItem:l=>{var c;return(c=t())==null?void 0:c.removeItem(l)}},o=l=>(c,u,d)=>l(c,f=>{let p;try{p=JSON.parse(f||"")}catch{p=d}u(p)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,c)=>{if(!(t()instanceof window.Storage))return()=>{};const u=d=>{d.storageArea===t()&&d.key===l&&c(d.newValue)};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}}),a&&(s.subscribe=o(a)),s}const yJ=vJ();function PL(t,e,n=yJ,i){const r=i==null?void 0:i.getOnInit,s=de(r?n.getItem(t,e):e);return($C?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},de(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===gJ?(l(s,e),n.removeItem(t)):NL(u)?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}const M=xC();function bJ(t){return h.jsx(WK,{store:M,children:t.children})}var Ct;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(Ct||(Ct={}));var i3;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(i3||(i3={}));const Te=Ct.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ta=t=>{switch(typeof t){case"undefined":return Te.undefined;case"string":return Te.string;case"number":return Number.isNaN(t)?Te.nan:Te.number;case"boolean":return Te.boolean;case"function":return Te.function;case"bigint":return Te.bigint;case"symbol":return Te.symbol;case"object":return Array.isArray(t)?Te.array:t===null?Te.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Te.promise:typeof Map<"u"&&t instanceof Map?Te.map:typeof Set<"u"&&t instanceof Set?Te.set:typeof Date<"u"&&t instanceof Date?Te.date:Te.object;default:return Te.unknown}},ue=Ct.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class aa extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return r(this),i}static assert(e){if(!(e instanceof aa))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ct.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)if(r.path.length>0){const s=r.path[0];n[s]=n[s]||[],n[s].push(e(r))}else i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}aa.create=t=>new aa(t);const y2=(t,e)=>{let n;switch(t.code){case ue.invalid_type:t.received===Te.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ue.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ct.jsonStringifyReplacer)}`;break;case ue.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ct.joinValues(t.keys,", ")}`;break;case ue.invalid_union:n="Invalid input";break;case ue.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ct.joinValues(t.options)}`;break;case ue.invalid_enum_value:n=`Invalid enum value. Expected ${Ct.joinValues(t.options)}, received '${t.received}'`;break;case ue.invalid_arguments:n="Invalid function arguments";break;case ue.invalid_return_type:n="Invalid function return type";break;case ue.invalid_date:n="Invalid date";break;case ue.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ct.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ue.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ue.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ue.custom:n="Invalid input";break;case ue.invalid_intersection_types:n="Intersection results could not be merged";break;case ue.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ue.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ct.assertNever(t)}return{message:n}};let wJ=y2;function xJ(){return wJ}const SJ=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=i.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}};function ke(t,e){const n=xJ(),i=SJ({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===y2?void 0:y2].filter(r=>!!r)});t.common.issues.push(i)}class Cr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Qe;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return Cr.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Qe;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Qe=Object.freeze({status:"aborted"}),dh=t=>({status:"dirty",value:t}),is=t=>({status:"valid",value:t}),r3=t=>t.status==="aborted",s3=t=>t.status==="dirty",Hd=t=>t.status==="valid",Fv=t=>typeof Promise<"u"&&t instanceof Promise;var Ie;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ie||(Ie={}));class El{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const o3=(t,e)=>{if(Hd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new aa(t.common.issues);return this._error=n,this._error}}};function lt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??i??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:r}}class St{get description(){return this._def.description}_getType(e){return Ta(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ta(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Cr,ctx:{common:e.parent.common,data:e.data,parsedType:Ta(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Fv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ta(e)},r=this._parseSync({data:e,path:i.path,parent:i});return o3(i,r)}"~validate"(e){var i,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ta(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return Hd(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(r=(i=s==null?void 0:s.message)==null?void 0:i.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>Hd(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ta(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(Fv(r)?r:Promise.resolve(r));return o3(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:ue.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new Kd({schema:this,typeName:et.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ml.create(this,this._def)}nullable(){return qd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return go.create(this)}promise(){return Hv.create(this,this._def)}or(e){return Uv.create([this,e],this._def)}and(e){return Vv.create(this,e,this._def)}transform(e){return new Kd({...lt(this._def),schema:this,typeName:et.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new S2({...lt(this._def),innerType:this,defaultValue:n,typeName:et.ZodDefault})}brand(){return new WJ({typeName:et.ZodBranded,type:this,...lt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new k2({...lt(this._def),innerType:this,catchValue:n,typeName:et.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return BC.create(this,e)}readonly(){return _2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const kJ=/^c[^\s-]{8,}$/i,_J=/^[0-9a-z]+$/,CJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,EJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,AJ=/^[a-z0-9_-]{21}$/i,NJ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,PJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,MJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,RJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let fx;const TJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,OJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,IJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,jJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,DJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,LJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ML="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",$J=new RegExp(`^${ML}$`);function RL(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function BJ(t){return new RegExp(`^${RL(t)}$`)}function FJ(t){let e=`${ML}T${RL(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function zJ(t,e){return!!((e==="v4"||!e)&&TJ.test(t)||(e==="v6"||!e)&&IJ.test(t))}function UJ(t,e){if(!NJ.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(i));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function VJ(t,e){return!!((e==="v4"||!e)&&OJ.test(t)||(e==="v6"||!e)&&jJ.test(t))}class Cc extends St{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Te.string){const s=this._getOrReturnCtx(e);return ke(s,{code:ue.invalid_type,expected:Te.string,received:s.parsedType}),Qe}const i=new Cr;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),ke(r,{code:ue.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),ke(r,{code:ue.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?ke(r,{code:ue.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ke(r,{code:ue.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")MJ.test(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{validation:"email",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")fx||(fx=new RegExp(RJ,"u")),fx.test(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{validation:"emoji",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")EJ.test(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{validation:"uuid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")AJ.test(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{validation:"nanoid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")kJ.test(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{validation:"cuid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")_J.test(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{validation:"cuid2",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")CJ.test(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{validation:"ulid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),ke(r,{validation:"url",code:ue.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{validation:"regex",code:ue.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),ke(r,{code:ue.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),ke(r,{code:ue.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),ke(r,{code:ue.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?FJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{code:ue.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?$J.test(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{code:ue.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?BJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{code:ue.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?PJ.test(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{validation:"duration",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?zJ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),ke(r,{validation:"ip",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?UJ(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),ke(r,{validation:"jwt",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?VJ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),ke(r,{validation:"cidr",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?DJ.test(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{validation:"base64",code:ue.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?LJ.test(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{validation:"base64url",code:ue.invalid_string,message:s.message}),i.dirty()):Ct.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:ue.invalid_string,...Ie.errToObj(i)})}_addCheck(e){return new Cc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ie.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ie.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ie.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ie.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ie.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ie.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ie.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ie.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ie.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ie.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ie.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ie.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ie.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ie.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ie.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ie.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ie.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ie.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ie.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ie.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ie.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ie.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ie.errToObj(n)})}nonempty(e){return this.min(1,Ie.errToObj(e))}trim(){return new Cc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Cc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Cc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Cc.create=t=>new Cc({checks:[],typeName:et.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...lt(t)});function HJ(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=Number.parseInt(t.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return s%o/10**r}class Wd extends St{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Te.number){const s=this._getOrReturnCtx(e);return ke(s,{code:ue.invalid_type,expected:Te.number,received:s.parsedType}),Qe}let i;const r=new Cr;for(const s of this._def.checks)s.kind==="int"?Ct.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{code:ue.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),ke(i,{code:ue.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),ke(i,{code:ue.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?HJ(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),ke(i,{code:ue.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{code:ue.not_finite,message:s.message}),r.dirty()):Ct.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ie.toString(n))}setLimit(e,n,i,r){return new Wd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Ie.toString(r)}]})}_addCheck(e){return new Wd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ie.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ie.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ie.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ie.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ct.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Wd.create=t=>new Wd({checks:[],typeName:et.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...lt(t)});class Cp extends St{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Te.bigint)return this._getInvalidInput(e);let i;const r=new Cr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),ke(i,{code:ue.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),ke(i,{code:ue.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),ke(i,{code:ue.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):Ct.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ke(n,{code:ue.invalid_type,expected:Te.bigint,received:n.parsedType}),Qe}gte(e,n){return this.setLimit("min",e,!0,Ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ie.toString(n))}setLimit(e,n,i,r){return new Cp({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Ie.toString(r)}]})}_addCheck(e){return new Cp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Cp.create=t=>new Cp({checks:[],typeName:et.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...lt(t)});class b2 extends St{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Te.boolean){const i=this._getOrReturnCtx(e);return ke(i,{code:ue.invalid_type,expected:Te.boolean,received:i.parsedType}),Qe}return is(e.data)}}b2.create=t=>new b2({typeName:et.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...lt(t)});class zv extends St{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Te.date){const s=this._getOrReturnCtx(e);return ke(s,{code:ue.invalid_type,expected:Te.date,received:s.parsedType}),Qe}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ke(s,{code:ue.invalid_date}),Qe}const i=new Cr;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),ke(r,{code:ue.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),ke(r,{code:ue.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):Ct.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new zv({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ie.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ie.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}zv.create=t=>new zv({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:et.ZodDate,...lt(t)});class a3 extends St{_parse(e){if(this._getType(e)!==Te.symbol){const i=this._getOrReturnCtx(e);return ke(i,{code:ue.invalid_type,expected:Te.symbol,received:i.parsedType}),Qe}return is(e.data)}}a3.create=t=>new a3({typeName:et.ZodSymbol,...lt(t)});class l3 extends St{_parse(e){if(this._getType(e)!==Te.undefined){const i=this._getOrReturnCtx(e);return ke(i,{code:ue.invalid_type,expected:Te.undefined,received:i.parsedType}),Qe}return is(e.data)}}l3.create=t=>new l3({typeName:et.ZodUndefined,...lt(t)});class c3 extends St{_parse(e){if(this._getType(e)!==Te.null){const i=this._getOrReturnCtx(e);return ke(i,{code:ue.invalid_type,expected:Te.null,received:i.parsedType}),Qe}return is(e.data)}}c3.create=t=>new c3({typeName:et.ZodNull,...lt(t)});class u3 extends St{constructor(){super(...arguments),this._any=!0}_parse(e){return is(e.data)}}u3.create=t=>new u3({typeName:et.ZodAny,...lt(t)});class d3 extends St{constructor(){super(...arguments),this._unknown=!0}_parse(e){return is(e.data)}}d3.create=t=>new d3({typeName:et.ZodUnknown,...lt(t)});class Al extends St{_parse(e){const n=this._getOrReturnCtx(e);return ke(n,{code:ue.invalid_type,expected:Te.never,received:n.parsedType}),Qe}}Al.create=t=>new Al({typeName:et.ZodNever,...lt(t)});class f3 extends St{_parse(e){if(this._getType(e)!==Te.undefined){const i=this._getOrReturnCtx(e);return ke(i,{code:ue.invalid_type,expected:Te.void,received:i.parsedType}),Qe}return is(e.data)}}f3.create=t=>new f3({typeName:et.ZodVoid,...lt(t)});class go extends St{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==Te.array)return ke(n,{code:ue.invalid_type,expected:Te.array,received:n.parsedType}),Qe;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(ke(n,{code:o?ue.too_big:ue.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(ke(n,{code:ue.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(ke(n,{code:ue.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new El(n,o,n.path,a)))).then(o=>Cr.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new El(n,o,n.path,a)));return Cr.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new go({...this._def,minLength:{value:e,message:Ie.toString(n)}})}max(e,n){return new go({...this._def,maxLength:{value:e,message:Ie.toString(n)}})}length(e,n){return new go({...this._def,exactLength:{value:e,message:Ie.toString(n)}})}nonempty(e){return this.min(1,e)}}go.create=(t,e)=>new go({type:t,minLength:null,maxLength:null,exactLength:null,typeName:et.ZodArray,...lt(e)});function Pu(t){if(t instanceof kn){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=ml.create(Pu(i))}return new kn({...t._def,shape:()=>e})}else return t instanceof go?new go({...t._def,type:Pu(t.element)}):t instanceof ml?ml.create(Pu(t.unwrap())):t instanceof qd?qd.create(Pu(t.unwrap())):t instanceof Wc?Wc.create(t.items.map(e=>Pu(e))):t}class kn extends St{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ct.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Te.object){const c=this._getOrReturnCtx(e);return ke(c,{code:ue.invalid_type,expected:Te.object,received:c.parsedType}),Qe}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Al&&this._def.unknownKeys==="strip"))for(const c in r.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new El(r,d,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof Al){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")a.length>0&&(ke(r,{code:ue.unrecognized_keys,keys:a}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new El(r,d,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,f=await u.value;c.push({key:d,value:f,alwaysSet:u.alwaysSet})}return c}).then(c=>Cr.mergeObjectSync(i,c)):Cr.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Ie.errToObj,new kn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var s,o;const r=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,i).message)??i.defaultError;return n.code==="unrecognized_keys"?{message:Ie.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new kn({...this._def,unknownKeys:"strip"})}passthrough(){return new kn({...this._def,unknownKeys:"passthrough"})}extend(e){return new kn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new kn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:et.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new kn({...this._def,catchall:e})}pick(e){const n={};for(const i of Ct.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new kn({...this._def,shape:()=>n})}omit(e){const n={};for(const i of Ct.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new kn({...this._def,shape:()=>n})}deepPartial(){return Pu(this)}partial(e){const n={};for(const i of Ct.objectKeys(this.shape)){const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}return new kn({...this._def,shape:()=>n})}required(e){const n={};for(const i of Ct.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof ml;)s=s._def.innerType;n[i]=s}return new kn({...this._def,shape:()=>n})}keyof(){return TL(Ct.objectKeys(this.shape))}}kn.create=(t,e)=>new kn({shape:()=>t,unknownKeys:"strip",catchall:Al.create(),typeName:et.ZodObject,...lt(e)});kn.strictCreate=(t,e)=>new kn({shape:()=>t,unknownKeys:"strict",catchall:Al.create(),typeName:et.ZodObject,...lt(e)});kn.lazycreate=(t,e)=>new kn({shape:t,unknownKeys:"strip",catchall:Al.create(),typeName:et.ZodObject,...lt(e)});class Uv extends St{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new aa(a.ctx.common.issues));return ke(n,{code:ue.invalid_union,unionErrors:o}),Qe}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new aa(l));return ke(n,{code:ue.invalid_union,unionErrors:a}),Qe}}get options(){return this._def.options}}Uv.create=(t,e)=>new Uv({options:t,typeName:et.ZodUnion,...lt(e)});function w2(t,e){const n=Ta(t),i=Ta(e);if(t===e)return{valid:!0,data:t};if(n===Te.object&&i===Te.object){const r=Ct.objectKeys(e),s=Ct.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=w2(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===Te.array&&i===Te.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=w2(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===Te.date&&i===Te.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Vv extends St{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(r3(s)||r3(o))return Qe;const a=w2(s.value,o.value);return a.valid?((s3(s)||s3(o))&&n.dirty(),{status:n.value,value:a.data}):(ke(i,{code:ue.invalid_intersection_types}),Qe)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Vv.create=(t,e,n)=>new Vv({left:t,right:e,typeName:et.ZodIntersection,...lt(n)});class Wc extends St{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Te.array)return ke(i,{code:ue.invalid_type,expected:Te.array,received:i.parsedType}),Qe;if(i.data.length<this._def.items.length)return ke(i,{code:ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Qe;!this._def.rest&&i.data.length>this._def.items.length&&(ke(i,{code:ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new El(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>Cr.mergeArray(n,o)):Cr.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Wc({...this._def,rest:e})}}Wc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Wc({items:t,typeName:et.ZodTuple,rest:null,...lt(e)})};class h3 extends St{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Te.map)return ke(i,{code:ue.invalid_type,expected:Te.map,received:i.parsedType}),Qe;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],c)=>({key:r._parse(new El(i,a,i.path,[c,"key"])),value:s._parse(new El(i,l,i.path,[c,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Qe;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Qe;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}h3.create=(t,e,n)=>new h3({valueType:e,keyType:t,typeName:et.ZodMap,...lt(n)});class Ep extends St{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Te.set)return ke(i,{code:ue.invalid_type,expected:Te.set,received:i.parsedType}),Qe;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(ke(i,{code:ue.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(ke(i,{code:ue.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Qe;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...i.data.values()].map((l,c)=>s._parse(new El(i,l,i.path,c)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Ep({...this._def,minSize:{value:e,message:Ie.toString(n)}})}max(e,n){return new Ep({...this._def,maxSize:{value:e,message:Ie.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ep.create=(t,e)=>new Ep({valueType:t,minSize:null,maxSize:null,typeName:et.ZodSet,...lt(e)});class p3 extends St{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}p3.create=(t,e)=>new p3({getter:t,typeName:et.ZodLazy,...lt(e)});class x2 extends St{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ke(n,{received:n.data,code:ue.invalid_literal,expected:this._def.value}),Qe}return{status:"valid",value:e.data}}get value(){return this._def.value}}x2.create=(t,e)=>new x2({value:t,typeName:et.ZodLiteral,...lt(e)});function TL(t,e){return new Gd({values:t,typeName:et.ZodEnum,...lt(e)})}class Gd extends St{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return ke(n,{expected:Ct.joinValues(i),received:n.parsedType,code:ue.invalid_type}),Qe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return ke(n,{received:n.data,code:ue.invalid_enum_value,options:i}),Qe}return is(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Gd.create(e,{...this._def,...n})}exclude(e,n=this._def){return Gd.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Gd.create=TL;class m3 extends St{_parse(e){const n=Ct.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==Te.string&&i.parsedType!==Te.number){const r=Ct.objectValues(n);return ke(i,{expected:Ct.joinValues(r),received:i.parsedType,code:ue.invalid_type}),Qe}if(this._cache||(this._cache=new Set(Ct.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=Ct.objectValues(n);return ke(i,{received:i.data,code:ue.invalid_enum_value,options:r}),Qe}return is(e.data)}get enum(){return this._def.values}}m3.create=(t,e)=>new m3({values:t,typeName:et.ZodNativeEnum,...lt(e)});class Hv extends St{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.promise&&n.common.async===!1)return ke(n,{code:ue.invalid_type,expected:Te.promise,received:n.parsedType}),Qe;const i=n.parsedType===Te.promise?n.data:Promise.resolve(n.data);return is(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Hv.create=(t,e)=>new Hv({type:t,typeName:et.ZodPromise,...lt(e)});class Kd extends St{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===et.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{ke(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Qe;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?Qe:l.status==="dirty"||n.value==="dirty"?dh(l.value):l});{if(n.value==="aborted")return Qe;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?Qe:a.status==="dirty"||n.value==="dirty"?dh(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Qe:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Qe:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Hd(o))return Qe;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Hd(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):Qe);Ct.assertNever(r)}}Kd.create=(t,e,n)=>new Kd({schema:t,typeName:et.ZodEffects,effect:e,...lt(n)});Kd.createWithPreprocess=(t,e,n)=>new Kd({schema:e,effect:{type:"preprocess",transform:t},typeName:et.ZodEffects,...lt(n)});class ml extends St{_parse(e){return this._getType(e)===Te.undefined?is(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ml.create=(t,e)=>new ml({innerType:t,typeName:et.ZodOptional,...lt(e)});class qd extends St{_parse(e){return this._getType(e)===Te.null?is(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qd.create=(t,e)=>new qd({innerType:t,typeName:et.ZodNullable,...lt(e)});class S2 extends St{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===Te.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}S2.create=(t,e)=>new S2({innerType:t,typeName:et.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...lt(e)});class k2 extends St{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Fv(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new aa(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new aa(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}k2.create=(t,e)=>new k2({innerType:t,typeName:et.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...lt(e)});class g3 extends St{_parse(e){if(this._getType(e)!==Te.nan){const i=this._getOrReturnCtx(e);return ke(i,{code:ue.invalid_type,expected:Te.nan,received:i.parsedType}),Qe}return{status:"valid",value:e.data}}}g3.create=t=>new g3({typeName:et.ZodNaN,...lt(t)});class WJ extends St{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class BC extends St{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Qe:s.status==="dirty"?(n.dirty(),dh(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Qe:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new BC({in:e,out:n,typeName:et.ZodPipeline})}}class _2 extends St{_parse(e){const n=this._def.innerType._parse(e),i=r=>(Hd(r)&&(r.value=Object.freeze(r.value)),r);return Fv(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}_2.create=(t,e)=>new _2({innerType:t,typeName:et.ZodReadonly,...lt(e)});var et;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(et||(et={}));const ic=Wd.create,pu=b2.create;Al.create;go.create;const v3=kn.create,GJ=Uv.create;Vv.create;Wc.create;const yg=x2.create,Df=Gd.create;Hv.create;ml.create;qd.create;const KJ=["randomize","clean","unchanged"],qJ=["switches-and-leds","printer","null"],YJ=["printer","null"],C2=v3({showInstructionCycle:pu().catch(!1),showStatsCPU:pu().catch(!1),language:Df(AL).catch(XJ),editorFontSize:ic().int().min(8).max(64).catch(14),dataOnLoad:Df(KJ).catch("clean"),devices:v3({keyboardAndScreen:pu(),pic:pu(),pio:Df(["switches-and-leds","printer"]).nullable(),handshake:Df(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:pu().catch(!0),executionUnit:ic().min(1).max(500).catch(150),clockSpeed:ic().min(100).max(1e3).catch(1e3),cpuSpeed:GJ([yg(1),yg(2),yg(4),yg(10)]).catch(1),printerSpeed:ic().min(500).max(2e4).catch(5e3),flagsVisibility:Df(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:ic().min(0).catch(1),filterContrast:ic().min(0).catch(1),filterInvert:pu().catch(!1),filterSaturation:ic().min(0).catch(1)}),Mu=C2.parse({});function XJ(){const t=navigator.language.toLowerCase();for(const e of AL)if(t.startsWith(e))return e;return"en"}const rs=PL("vonsim-settings",Mu,{getItem(t,e){try{const n=localStorage.getItem(t);return C2.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=C2.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),Bt=()=>M.get(rs),pa=()=>hm(rs);de(t=>t(rs).showInstructionCycle);de(t=>t(rs).showStatsCPU);const JJ=de(t=>t(rs).language),FC=()=>st(JJ);de(t=>t(rs).flagsVisibility);const ZJ=de(t=>t(rs).editorFontSize),QJ=()=>st(ZJ);de(t=>t(rs).dataOnLoad);const eZ=de(t=>t(rs).devices),OL=()=>st(eZ);de(t=>{const e=t(rs);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});de(t=>{const e=t(rs);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")});function Ap(t){const e=t.charCodeAt(0);return z.fitsUnsigned(e,8)?e:null}function zC(t){return z.fitsUnsigned(t,8)?String.fromCharCode(t):null}function IL(t){return tZ.at(t)??null}const tZ=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","¡","¢","£","¤","¥","¦","§","¨","©","ª","«","¬","SHY","®","¯","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷","ø","ù","ú","û","ü","ý","þ","ÿ"];var Yt,rn;const vt=class vt{constructor(e,n){$e(this,Yt);$e(this,rn);ne(this,Yt,e|0),ne(this,rn,n)}get size(){return A(this,rn)}is8bits(){return A(this,rn)===8}is16bits(){return A(this,rn)===16}get unsigned(){return A(this,Yt)}get signed(){return A(this,Yt)<=vt.maxSignedValue(A(this,rn))?A(this,Yt):A(this,Yt)-(vt.maxValue(A(this,rn))+1)}get low(){return this.is8bits()?this:vt.fromUnsigned(A(this,Yt)&vt.maxValue(8),8)}get high(){return this.is8bits()?new vt(0,8):vt.fromUnsigned(A(this,Yt)>>8&vt.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return vt.fromUnsigned(A(this,Yt)&~vt.maxValue(8)|e.unsigned,A(this,rn))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return vt.fromUnsigned(A(this,Yt)&vt.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,rn))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,rn)}`);return(A(this,Yt)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,rn))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,rn)}`);return n?vt.fromUnsigned(A(this,Yt)|1<<e,A(this,rn)):vt.fromUnsigned(A(this,Yt)&~(1<<e),A(this,rn))}add(e){return e=Number(e),vt.fromUnsigned(A(this,Yt)+e,A(this,rn))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,Yt)===A(e,Yt)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,rn));for(let n=0;n<A(this,rn);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,Yt).toString(16).padStart(A(this,rn)/4,"0").toUpperCase();case"bin":return A(this,Yt).toString(2).padStart(A(this,rn),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,rn)===8?zC(A(this,Yt))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,rn)===8?IL(A(this,Yt))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,Yt)}valueOf(){return A(this,Yt)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=vt.minSignedValue(n)&&e<=vt.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=vt.minValue()&&e<=vt.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=vt.minSignedValue(n)&&e<=vt.maxSignedValue(n)}static fromUnsigned(e,n){if(!vt.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new vt(e,n)}static fromSigned(e,n){if(!vt.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new vt(e+vt.maxValue(n)+1,n):new vt(e,n)}static fromNumber(e,n){return e<0?vt.fromSigned(e,n):vt.fromUnsigned(e,n)}static fromChar(e){const n=Ap(e)??-1;return vt.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*vt.maxValue(e));return new vt(n,e)}static zero(e){return new vt(0,e)}};Yt=new WeakMap,rn=new WeakMap;let z=vt;var Do;const La=class La{constructor(e){$e(this,Do);ne(this,Do,e)}get value(){return A(this,Do).unsigned}get byte(){return A(this,Do)}toString(e=!1){let n=A(this,Do).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,Do).toJSON()}valueOf(){return A(this,Do).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=La.MIN_ADDRESS&&e<=La.MAX_ADDRESS}static from(e){if(e=Number(e),!La.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=z.fromUnsigned(e,16);return new La(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};Do=new WeakMap,me(La,"MIN_ADDRESS",0),me(La,"MAX_ADDRESS",255);let Ce=La;var Lo;const $a=class $a{constructor(e){$e(this,Lo);ne(this,Lo,e)}get value(){return A(this,Lo).unsigned}get byte(){return A(this,Lo)}toString(e=!0){let n=A(this,Lo).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,Lo).toJSON()}valueOf(){return A(this,Lo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=$a.MIN_ADDRESS&&e<=$a.MAX_ADDRESS}static from(e){if(e=Number(e),!$a.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=z.fromUnsigned(e,8);return new $a(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};Lo=new WeakMap,me($a,"MIN_ADDRESS",0),me($a,"MAX_ADDRESS",127);let Er=$a;function y3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function b3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y3(Object(n),!0).forEach(function(i){nZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function nZ(t,e,n){return e=iZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iZ(t){var e=rZ(t,"string");return typeof e=="symbol"?e:String(e)}function rZ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Wv=jL({});function jL(t){return e.withOptions=n=>jL(b3(b3({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n),trimWhitespace:o=!0}=t;let a="";for(let u=0;u<r.length;u++){let d=r[u];s&&(d=d.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),a+=d,u<i.length&&(a+=i[u])}const l=a.split(`
`);let c=null;for(const u of l){const d=u.match(/^(\s+)\S+/);if(d){const f=d[1].length;c?c=Math.min(c,f):c=f}}if(c!==null){const u=c;a=l.map(d=>d[0]===" "||d[0]==="	"?d.slice(u):d).join(`
`)}return o&&(a=a.trim()),s&&(a=a.replace(/\\n/g,`
`)),a}}const sZ=Ce.from(Ce.MAX_ADDRESS).toString(),oZ={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${Er.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!","new-version-available":"There's a new version available in the repository.","local-update":"A new local version has been detected.",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:Wv`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"Cycle","end-of-instruction":"Instruction",infinity:"End"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...","fetching-operands-completed":"Operands fetched",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."},"total-cycles":"Total cycles","instruction-count":"Instruction count",cpi:"Cycles per instruction (CPI)","cpi-help":"Average clock cycles per executed instruction (CPI = total cycles / total instructions)","cpu-time":"CPU time","cpu-time-help":"Total CPU time = total cycles × cycle time (current: {cycleTime} ms)"},memory:{name:"Memory",cell:t=>`Cell ${Ce.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${sZ}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"READ MEMORY","write-memory":"WRITE MEMORY"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Enabling animations."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>Wv`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"e7416a1"}](https://github.com/ruiz-jose/VonSim8/commit/${"e7416a1"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},aZ=Ce.from(Ce.MAX_ADDRESS).toString(),lZ={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${Er.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"¡Hay una nueva versión disponible!","new-version-available":"Hay una nueva versión disponible en el repositorio.","local-update":"Se ha detectado una nueva versión local.",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la “FileSystem API”","no-file":"No hay ningún archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, ¿desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:Wv`
      ; ¡Bienvenido a VonSim 8!
      ; Este es un ejemplo de código que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Ciclo","end-of-instruction":"Instrucción",infinity:"Final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadísticas CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Captación instrucción...","fetching-operands":"Leyendo operandos...","fetching-operands-completed":"Operandos obtenidos",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupción...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."},"total-cycles":"Total de ciclos","instruction-count":"Recuento de instrucciones",cpi:"Ciclos por instrucción (CPI)","cpi-help":"Promedio de ciclos de reloj por instrucción ejecutada (CPI = ciclos totales / instrucciones totales)","cpu-time":"Tiempo de CPU","cpu-time-help":"Tiempo total de CPU = ciclos totales × tiempo de ciclo (actual: {cycleTime} ms)"},memory:{name:"Memoria",cell:t=>`Celda ${Ce.format(t)}`,"fix-address":"Fijar dirección","unfix-address":"Desfijar dirección","address-must-be-integer":"El valor de inicio debe ser un número entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${aZ}.`,"address-increment":"Incrementar dirección (Page Up)","address-decrement":"Decrementar dirección (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"LEER MEMORIA","write-memory":"ESCRIBIR MEMORIA"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuración",instructionCycle:{label:"Ciclo de Instrucción"},statsCPU:{label:"Estadísticas CPU"},flags:{label:"Banderas",description:"Selecciona qué banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamaño de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"También agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Habilitación de animaciones."].join(" ")},speeds:{executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión"},filters:{label:"Filtros",description:"Filtros aplicados a la página. Útil cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturación"},reset:"Restablecer configuración"},footer:{documentation:"Documentación",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>Wv`
        <!-- Por favor, describa el problema que está teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Información extra (POR FAVOR, NO BORRAR)</summary>

          **Versión**: [${"e7416a1"}](https://github.com/ruiz-jose/VonSim8/commit/${"e7416a1"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuración

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},gb=LC({en:oZ,es:lZ});function nn(){const t=FC();return b.useCallback((e,...n)=>gb(t,e,...n),[t])}const cZ=[{name:"Documentación",url:"https://ruiz-jose.github.io/VonSim8/docs/",icon:"icon-[lucide--book-open]"},{name:"GitHub",url:"https://github.com/ruiz-jose/VonSim8",icon:wq}],DL=b.memo(({name:t,url:e,icon:n})=>h.jsx(xr,{content:t,position:"top",children:h.jsx(bt,{variant:"ghost",size:"sm",onClick:()=>window.open(e,"_blank"),className:"hover-lift","aria-label":t,children:typeof n=="string"?h.jsx("span",{className:te(n,"size-4")}):h.jsx(Be,{icon:n,className:"size-4"})})}));DL.displayName="SocialLink";const LL=b.memo(()=>{const t=nn(),[e]=pa(),n=b.useMemo(()=>{var s;const i=((s=window.codemirror)==null?void 0:s.state.doc.toString())||"",r=t("footer.issue.body",e,i);return`https://github.com/ruiz-jose/VonSim8/issues/new?body=${encodeURIComponent(r)}`},[t,e]);return h.jsx("footer",{className:"bg-black px-3 py-1.5 text-xs text-white","data-testid":"footer",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-stone-400",children:["© Copyright 2017-2025 — III-LIDI, FI, UNLP, UNER — v","e7416a1"]}),h.jsxs("div",{className:"flex items-center gap-1","data-testid":"footer-links",children:[cZ.map(i=>h.jsx(DL,{name:i.name,url:i.url,icon:i.icon},i.name)),h.jsx(xr,{content:t("footer.issue.report"),position:"top",children:h.jsx(bt,{variant:"ghost",size:"sm",onClick:()=>window.open(n,"_blank"),className:"hover-lift","aria-label":t("footer.issue.report"),children:h.jsx("span",{className:"icon-[lucide--bug] size-4"})})})]})]})})});LL.displayName="Footer";const uZ="modulepreload",dZ=function(t){return"/VonSim8/"+t},w3={},UC=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=dZ(l),l in w3)return;w3[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":uZ,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function Np(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class yn{constructor(e,n){me(this,"start");me(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new yn(i,r)}toJSON(){return this.range}}const x3=Ce.from(Ce.MAX_ADDRESS).toString(),fZ=Er.from(Er.MAX_ADDRESS).toString(),hZ={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${Ce.format(t)} is out of range (max memory address: ${x3}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":`The program is empty or does not contain executable instructions.

Remember: a valid program must have at least one instruction and end with the END directive.

For example:

    org 1000h
    mov al, 3
    hlt
    end

See the documentation or examples for more help.`,"end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`This instruction would be placed in address ${Ce.format(t)}, which is outside the memory range (max memory address: ${x3}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${fZ}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},S3=Ce.from(Ce.MAX_ADDRESS).toString(),pZ=Er.from(Er.MAX_ADDRESS).toString(),mZ={"address-has-code":t=>`La dirección de memoria ${Ce.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${Ce.format(t)} está fuera de rango (dirección máxima de memoria: ${S3}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":`El programa está vacío o no contiene instrucciones ejecutables.

Recuerda que un programa válido debe tener al menos una instrucción y finalizar con la directiva END.

Por ejemplo:

    org 1000h
    mov al, 3
    hlt
    end

Consulta la documentación o los ejemplos para más ayuda.`,"end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El único registro válido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 16 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${Ce.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${S3}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${pZ}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${Ce.format(t)}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instrucción sería colocada en la dirección ${Ce.format(t)}, la cual ya está reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carácter solo puede contener un carácter.","empty-character":"Los carácter no puede estar vacío.","invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-character":"Carácter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},gZ=LC({en:hZ,es:mZ});class oe extends Error{constructor(n,...i){super();me(this,"code");me(this,"context");me(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof yn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return gZ(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof oe?n:new oe("unexpected-error",n)}}const VC=[[0,z.fromUnsigned(160,8)],[3,z.fromUnsigned(176,8)],[6,z.fromUnsigned(192,8)],[7,z.fromUnsigned(208,8)]],k3=new Set(...VC.map(([t])=>[t]));var Va,Sd;class vZ{constructor(){me(this,"codeMemory",new Set);me(this,"labels",new Map);me(this,"hasORG",!1);$e(this,Va,!1);$e(this,Sd,!1)}loadStatements(e){if(A(this,Va))throw new Error("Tried to load statements twice");ne(this,Va,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new oe("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:Ce.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:Ce.from(0)})}return n}computeAddresses(e){if(A(this,Sd))throw new Error("Tried to compute addresses twice");ne(this,Sd,!0),this.codeMemory.clear();const n=new Set,i=e.some(u=>u.isInstruction()&&u.instruction==="INT");if(this.hasORG=e.some(u=>u.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new oe("missing-org").at(e[0].position);let r=i&&!this.hasORG?8:this.hasORG?32:0,s=null,o=r;const a=[],l=[],c=[];for(const u of e)u.isInstruction()?a.push(u):u.isOriginChange()?l.push(u):u.isDataDirective()&&c.push(u);if(this.hasORG){const u=[],d=[];return Np(e,f=>{if(f.isEnd()||f.isDataDirective()&&f.directive==="EQU")return;if(f.isOriginChange()){r=f.newAddress;return}const p=r;if(p===null)throw new oe("missing-org").at(f);const g=f.length,m=p,v=p+g-1;for(const w of d)if(Math.max(m,w.start)<=Math.min(v,w.end)){u.push(new oe("occupied-address",Ce.from(m)).at(f));return}d.push({start:m,end:v,statement:f});for(let w=0;w<g;w++){if(!Ce.inRange(p+w))throw new oe("instruction-out-of-range",p+w).at(f);const x=Ce.from(p+w);if(n.has(x.value))throw new oe("occupied-address",x).at(f);if(i&&k3.has(x.value))throw new oe("reserved-address",x).at(f);n.add(x.value),f.isInstruction()&&this.codeMemory.add(x.value)}const y=Ce.from(p);f.setStart(y),f.label&&this.labels.set(f.label,{type:f.isInstruction()?"instruction":f.directive,address:y}),(f.isDataDirective()||f.isInstruction())&&(r+=g,o=Math.max(o,r))},oe.from),u}else return Np([...a,...l,...c],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const m=d.newAddress;m<32?s=m:r=m;return}let f;if(d.isDataDirective())s===null&&(s=o),f=s;else if(d.isInstruction())f=r;else throw new oe("missing-org").at(d);const p=d.length;for(let m=0;m<p;m++){if(!Ce.inRange(f+m))throw new oe("instruction-out-of-range",f+m).at(d);const v=Ce.from(f+m);if(n.has(v.value))throw new oe("occupied-address",v).at(d);if(i&&k3.has(v.value))throw new oe("reserved-address",v).at(d);n.add(v.value),d.isInstruction()&&this.codeMemory.add(v.value)}const g=Ce.from(f);if(d.setStart(g),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:g}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=p}else d.isInstruction()&&(r+=p,o=Math.max(o,r))},oe.from)}labelExists(e){if(!A(this,Va))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,Va))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,Va))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,Sd))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof Ce&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}Va=new WeakMap,Sd=new WeakMap;const yZ=["AL","BL","CL","DL","AH","BH","CH","DH"],$L=["AX","BX","CX","DX","SP"],Gv=[...yZ,...$L],HC=["DB","DW","EQU"],WC=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],bZ=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...Gv,...WC,...HC];class wZ{constructor(e,n,i){me(this,"type");me(this,"lexeme");me(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class xZ{constructor(e){me(this,"scanned",!1);me(this,"tokens",[]);me(this,"position",new yn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new yn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new oe("lexer.unterminated-character").at(this.position);if(Ap(this.peek())===null)throw new oe("lexer.only-ascii").at(new yn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new oe("lexer.empty-character").at(this.position);if(n>=2)throw new oe("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new oe("lexer.unterminated-string").at(this.position);if(Ap(this.peek())===null)throw new oe("lexer.only-ascii").at(new yn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()===".")throw new oe("lexer.unexpected-character",".").at(new yn(this.position.end,this.position.end+1));if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new oe("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new oe("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){if(e==="."&&this.isDigit(this.peek()))throw new oe("lexer.unexpected-character",".").at(new yn(this.position.start,this.position.start+1));for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();bZ.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new oe("lexer.unexpected-character",e).at(this.position)}return this.position=new yn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new wZ(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new yn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class Kn{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}me(Kn,"numberLiteral",(...e)=>new SZ(...e)),me(Kn,"label",(...e)=>new kZ(...e)),me(Kn,"unaryOperation",(...e)=>new _Z(...e)),me(Kn,"binaryOperation",(...e)=>new CZ(...e));class SZ extends Kn{constructor(n,i){super(i);me(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let kZ=class extends Kn{constructor(n,i,r){super(r);me(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new oe("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new oe("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new oe("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class _Z extends Kn{constructor(n,i,r){super(r);me(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class CZ extends Kn{constructor(n,i,r,s){super(s);me(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class vb{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var $o;class BL extends vb{constructor(n,i,r){super(r);me(this,"type","data-directive");me(this,"label");me(this,"values");$e(this,$o,null);this.values=n,this.label=i}get start(){if(A(this,$o)===null)throw new Error("Start not set");return A(this,$o)}setStart(n){if(A(this,$o)!==null)throw new Error("Start already set");ne(this,$o,n)}toJSON(){return{...super.toJSON(),...A(this,$o)?{start:A(this,$o).toJSON()}:{},directive:this.directive,label:this.label}}}$o=new WeakMap;var Nc,Ha,kd;class EZ extends BL{constructor(n,i,r){super(n,i,r);me(this,"directive","EQU");$e(this,Nc,"not-processed");$e(this,Ha,null);$e(this,kd,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,kd)??((n=A(this,Ha))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(A(this,Ha))throw new Error("Constant already validated");if(!this.label)throw new oe("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new oe("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new oe("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new oe("cannot-be-unassinged","EQU").at(n);ne(this,Ha,n.value)}evaluateExpressions(n){if(!A(this,Ha))throw new Error("Constant not validated");if(A(this,Nc)==="processed")return A(this,kd);if(A(this,Nc)==="processing")throw new oe("circular-reference").at(this.position);ne(this,Nc,"processed");const i=A(this,Ha).evaluate(n);return ne(this,Nc,"processed"),ne(this,kd,i),i}evaluate(n){return this.evaluateExpressions(n)}}Nc=new WeakMap,Ha=new WeakMap,kd=new WeakMap;const fh=Symbol("unassigned");var Di,us;class AZ extends BL{constructor(n,i,r,s){super(i,r,s);me(this,"size");$e(this,Di,null);$e(this,us,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,Di))throw new Error("Data directive not validated");return A(this,Di).length*(this.size/8)}getValues(){if(!A(this,us))throw new Error("Data directive not evaluated");return A(this,us)}toJSON(){return{...super.toJSON(),values:(A(this,us)??A(this,Di)??this.values).map(n=>n===fh?"?":n.toJSON())}}validate(){if(A(this,Di))throw new Error("Data directive already validated");ne(this,Di,[]);for(const n of this.values)if(n.isUnassigned())A(this,Di).push(fh);else if(n.isString()){if(this.directive!=="DB")throw new oe("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=Ap(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new yn(n.position.start+r,n.position.start+r+1),a=Kn.numberLiteral(s,o);A(this,Di).push(a)}}else A(this,Di).push(n.value);if(A(this,Di).length===0)throw new oe("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,Di))throw new Error("Data directive not validated");if(A(this,us))throw new Error("Data directive already evaluated");ne(this,us,[]);const i=Np(A(this,Di),r=>{if(r===fh)A(this,us).push(fh);else{const s=r.evaluate(n);if(!z.fits(s,this.size))throw new oe("value-out-of-range",s,this.size).at(this);const o=z.fromNumber(s,this.size);A(this,us).push(o)}},oe.from);return i.length>0&&ne(this,us,null),i}}Di=new WeakMap,us=new WeakMap;class GC{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class NZ extends GC{constructor(n,i){super(i);me(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class PZ extends GC{constructor(n){super(n);me(this,"type","unassigned")}}class MZ extends GC{constructor(n){super(n.position);me(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function RZ(t,e,n){const i=yn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new AZ(t.type,e,n,i);case"EQU":return new EZ(e,n,i)}}class hx extends vb{constructor(n){super(n);me(this,"type","end")}}function pc(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var Bo;class ou extends vb{constructor(n,i,r){super(r);me(this,"type","instruction");me(this,"label");me(this,"operands");$e(this,Bo,null);this.operands=n,this.label=i}getOperands(){return this.operands}get start(){if(A(this,Bo)===null)throw new Error("Start not set");return A(this,Bo)}setStart(n){if(A(this,Bo)!==null)throw new Error("Start already set");ne(this,Bo,n)}toJSON(){return{...super.toJSON(),...A(this,Bo)?{start:A(this,Bo).toJSON()}:{},instruction:this.instruction,label:this.label}}}Bo=new WeakMap;var ci,Ir;class TZ extends ou{constructor(n,i,r,s){super(i,r,s);$e(this,ci,null);$e(this,Ir,null);this.instruction=n}get length(){if(!A(this,ci))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=A(this,ci);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!A(this,Ir))throw new Error("Instruction not evaluated");return A(this,Ir)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(pc(r)&3)<<2,o[0]|=(pc(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(pc(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(pc(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(pc(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,Ir)??A(this,ci)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,ci))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new oe("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new oe("size-mismatch",r.size,i.size).at(this);ne(this,ci,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new oe("size-mismatch",r.size,i.size).at(this);ne(this,ci,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new oe("size-mismatch",r.size,i.size).at(this);ne(this,ci,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new oe("size-mismatch",s.size,i.size).at(this);ne(this,ci,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}ne(this,ci,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new oe("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new oe("size-mismatch",s,r.size).at(this);ne(this,ci,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new oe("double-memory-access").at(this);s==="auto"&&(s=8),ne(this,ci,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new oe("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,ci))throw new Error("Instruction not validated");if(A(this,Ir))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=A(this,ci),a=l=>{const c=l.evaluate(n);if(!Ce.inRange(c))throw new oe("address-out-of-range",c).at(l);const u=Ce.from(c);if(n.addressIsReserved(u))throw new oe("address-has-code",u).at(l);return u};switch(i){case"reg<-reg":{ne(this,Ir,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{ne(this,Ir,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!z.fits(l,r))throw new oe("value-out-of-range",l,r).at(o);const c=z.fromNumber(l,r);ne(this,Ir,{mode:i,size:r,out:s,src:c});return}case"mem<-reg":{ne(this,Ir,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!z.fits(l,r))throw new oe("value-out-of-range",l,r).at(o);const c=z.fromNumber(l,r);ne(this,Ir,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return i}}}ci=new WeakMap,Ir=new WeakMap;var Gs,Fo;class OZ extends ou{constructor(n,i,r,s){super(i,r,s);$e(this,Gs,null);$e(this,Fo,null);me(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,Fo))throw new Error("Instruction not evaluated");return A(this,Fo)}toJSON(){return{...super.toJSON(),...A(this,Fo)?{value:A(this,Fo).toJSON()}:A(this,Gs)?{initialValue:A(this,Gs).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Gs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new oe("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new oe("expects-immediate").at(n);ne(this,Gs,n.value)}evaluateExpressions(n){if(!A(this,Gs))throw new Error("Instruction not validated");if(A(this,Fo))throw new Error("Instruction aready evaluated");const i=A(this,Gs).evaluate(n);if(!z.fitsUnsigned(i,8))throw new oe("invalid-interrupt",i).at(A(this,Gs));ne(this,Fo,z.fromUnsigned(i,8))}}Gs=new WeakMap,Fo=new WeakMap;var ds,zo,lO;let IZ=(lO=class extends ou{constructor(n,i,r,s){super(i,r,s);$e(this,ds,null);$e(this,zo,null);this.instruction=n}get length(){if(!A(this,ds))throw new Error("Instruction not validated");return A(this,ds).port==="fixed"?2:1}toBytes(){const n=[],i={IN:216,OUT:220};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,zo)===null)throw new Error("Operation not set");return A(this,zo)}toJSON(){return{...super.toJSON(),...A(this,zo)??A(this,ds)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,ds))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new oe("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new oe("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new oe("expects-dx").at(i);ne(this,ds,{port:"variable",size:r});return}if(i.isNumberExpression()){ne(this,ds,{port:"fixed",size:r,address:i.value});return}throw new oe("expects-immediate").at(i)}evaluateExpressions(n){if(!A(this,ds))throw new Error("Instruction not validated");if(A(this,zo))throw new Error("Instruction aready evaluated");const i=A(this,ds);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!Er.inRange(r))throw new oe("io-address-out-of-range",r).at(this);const s=Er.from(r);ne(this,zo,{port:"fixed",size:i.size,address:s})}else ne(this,zo,{port:"variable",size:i.size})}},ds=new WeakMap,zo=new WeakMap,lO);var Uo,Ks,cO;let jZ=(cO=class extends ou{constructor(n,i,r,s){super(i,r,s);$e(this,Uo,null);$e(this,Ks,null);me(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,Ks)===null)throw new Error("Instruction not evaluated");return A(this,Ks)}toJSON(){return{...super.toJSON(),...A(this,Ks)?{address:A(this,Ks).toJSON()}:A(this,Uo)?{jumpTo:A(this,Uo)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Uo))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new oe("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel()&&!i.value.isNumberLiteral())throw new oe("expects-label").at(i);if(i.value.isLabel()){const r=i.value.value,s=n.getLabelType(r);if(!s)throw new oe("label-not-found",r).at(i);if(s!=="instruction")throw new oe("label-should-be-an-instruction",r).at(i);ne(this,Uo,r)}else if(i.value.isNumberLiteral()){const r=i.value.value;if(!Ce.inRange(r))throw new oe("address-out-of-range",r).at(i);ne(this,Ks,Ce.from(r))}}evaluateExpressions(n){if(!A(this,Ks)&&A(this,Uo)){const i=n.getLabelValue(A(this,Uo));if(!Ce.inRange(i))throw new oe("address-out-of-range",i).at(this);ne(this,Ks,Ce.from(i))}}},Uo=new WeakMap,Ks=new WeakMap,cO);var qs,uO;let DZ=(uO=class extends ou{constructor(n,i,r,s){super(i,r,s);$e(this,qs,null);me(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:208,POP:212}[this.instruction];return i|=pc(this.register),new Uint8Array([i])}get register(){if(!A(this,qs))throw new Error("Instruction not evaluated");return A(this,qs)}toJSON(){return{...super.toJSON(),...A(this,qs)?{register:A(this,qs)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,qs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new oe("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new oe("expects-word-register").at(n);ne(this,qs,n.value)}evaluateExpressions(){if(!A(this,qs))throw new Error("Instruction not validated")}},qs=new WeakMap,uO);var sr,Ys;class LZ extends ou{constructor(n,i,r,s){super(i,r,s);$e(this,sr,null);$e(this,Ys,null);this.instruction=n}get length(){if(!A(this,sr))throw new Error("Instruction not validated");const{mode:n}=A(this,sr);let i=1;return n==="mem-direct"&&(i+=1),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=pc(this.operation.reg);break}case"mem-direct":{const r=this.operation.address.byte;n.push(r.low.unsigned);break}case"mem-indirect":break;default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,Ys))throw new Error("Instruction not evaluated");return A(this,Ys)}toJSON(){return{...super.toJSON(),...A(this,Ys)??A(this,sr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,sr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new oe("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){ne(this,sr,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new oe("unknown-size").at(i);ne(this,sr,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new oe("unknown-size").at(i);ne(this,sr,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){ne(this,sr,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new oe("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!A(this,sr))throw new Error("Instruction not validated");if(A(this,Ys))throw new Error("Instruction aready evaluated");const i=A(this,sr);switch(i.mode){case"reg":{ne(this,Ys,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!Ce.inRange(r))throw new oe("address-out-of-range",r).at(i.address);const s=Ce.from(r);if(n.addressIsReserved(s))throw new oe("address-has-code",s).at(i.address);ne(this,Ys,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{ne(this,Ys,{mode:"mem-indirect",size:i.size});return}default:return i}}}sr=new WeakMap,Ys=new WeakMap;var _d;class $Z extends ou{constructor(n,i,r,s){super(i,r,s);$e(this,_d,!1);me(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,_d))throw new Error("Instruction already validated");if(this.operands.length>0)throw new oe("expects-no-operands").at(this);ne(this,_d,!0)}evaluateExpressions(){if(!A(this,_d))throw new Error("Instruction not validated")}}_d=new WeakMap;class yb{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class BZ extends yb{constructor(n){super(n.position);me(this,"type","register");me(this,"value");this.value=n.type}get size(){return $L.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class FZ extends yb{constructor(n,i){super(i);me(this,"type","indirect-address");me(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class zZ extends yb{constructor(n,i,r){super(r);me(this,"type","direct-address");me(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class Kv extends yb{constructor(n){super(n.position);me(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return Kv.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new oe("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:Kn.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=Kv.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:Kn.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function _3(t,e,n){const i=yn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new $Z(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new TZ(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new LZ(t.type,e,n,i);case"PUSH":case"POP":return new DZ(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new jZ(t.type,e,n,i);case"IN":case"OUT":return new IZ(t.type,e,n,i);case"INT":return new OZ(t.type,e,n,i)}}class UZ extends vb{constructor(n,i){super(i);me(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let VZ=class{constructor(e){me(this,"tokens");me(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new oe("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new oe("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new UZ(i,yn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new oe("end-must-be-the-last-statement").at(e);return new hx(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new hx(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new hx(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...HC);if(e&&!n)throw new oe("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),RZ(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new NZ(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new PZ(e.position)}return new MZ(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...WC);if(e&&!n){const s=this.peek();throw new oe("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return _3(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),_3(n,r,i)}instructionOperand(){if(this.match(...Gv)){const n=this.previous();return new BZ(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new oe("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Gv)){if(!this.check("BX","BL"))throw new oe("parser.indirect-addressing-must-be-bx");const i=this.advance(),r=this.consume("RIGHT_BRACKET",new oe("parser.expected-literal-after-literal","]",i.lexeme));return new FZ(e==null?void 0:e.type,yn.merge(e==null?void 0:e.position,n.position,r.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new oe("parser.expected-literal-after-expression","]"));return new zZ(i,e==null?void 0:e.type,yn.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new oe("parser.expected-literal-after-literal","[","PTR");return new Kv(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new oe("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new oe("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return Kn.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=Ap(i.lexeme.slice(1,-1));return Kn.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new oe("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new oe("parser.expected-label-after-offset").at(this.peek());if(!n)throw new oe("parser.expected-argument").at(this.peek());return Kn.label(n.lexeme.toUpperCase(),e!==null,yn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new oe("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return Kn.unaryOperation(e.type==="PLUS"?"+":"-",n,yn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=Kn.binaryOperation(e,"*",n,yn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=Kn.binaryOperation(e,n.type==="PLUS"?"+":"-",i,yn.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function FL(t){try{const n=new xZ(t).scanTokens(),r=new VZ(n).parse();if(!r.at(-1))throw new oe("empty-program");let o=[];const a=new vZ;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=Np(r,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},oe.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=Np(r,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},oe.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[oe.from(e)]}}}class Rs{constructor(e){me(this,"computer");this.computer=e.computer}}const HZ=t=>Ce.format(t).slice(-2),WZ=HZ(Ce.MAX_ADDRESS),GZ={"address-has-instruction":t=>`Memory address ${Ce.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${Ce.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${Ce.format(t)} is out of range (max memory address: ${WZ}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${Er.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${Ce.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},KZ=Ce.from(Ce.MAX_ADDRESS).toString(),qZ={"address-has-instruction":t=>`La dirección de memoria ${Ce.format(t)} tiene una instrucción, y no se puede escribir.`,"address-is-reserved":t=>`La dirección de memoria ${Ce.format(t)} está reservada, y no se puede escribir.`,"address-out-of-range":t=>`La dirección de memoria ${Ce.format(t)} está fuera de rango (dirección máxima de memoria: ${KZ}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontró ningún módulo conectado a la dirección de memoria E/S ${Er.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${Ce.format(t)} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},YZ=LC({en:GZ,es:qZ});class ln extends Error{constructor(n,...i){super();me(this,"code");me(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return YZ(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof ln?n:new ln("unexpected-error",n)}}class ma{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,i){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new ln("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),i||(yield*e.cpu.getMBR(n))}}var Ty,zL;class XZ extends ma{constructor(){super(...arguments);$e(this,Ty)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ot(this,Ty,zL).call(this),willUse:{id:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct",ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"&&this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="mem<-imd"&&s.mode==="direct"){if(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"id.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.l"),yield*n.cpu.copyByteRegister("id.l","right.l"),yield{type:"cpu:cycle.update",phase:"execute"};const d=n.cpu.getRegister("left.l"),f=n.cpu.getRegister("right.l");let p;const g={};switch(this.name){case"AND":case"OR":case"XOR":{const m=this.name==="AND"?d.signed&f.signed:this.name==="OR"?d.signed|f.signed:d.signed^f.signed;p=z.fromSigned(m,r),g.CF=!1,g.OF=!1;break}case"ADD":case"ADC":{const m=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,v=d.unsigned+f.unsigned+m;v>z.maxValue(r)?(g.CF=!0,p=z.fromUnsigned(v-z.maxValue(r)-1,r)):(g.CF=!1,p=z.fromUnsigned(v,r)),g.OF=d.signed>=0&&f.signed>=0&&p.signed<0||d.signed<0&&f.signed<0&&p.signed>=0;break}case"SUB":case"SBB":case"CMP":{const m=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,v=d.unsigned-f.unsigned-m;v<0?(g.CF=!0,p=z.fromUnsigned(v+z.maxValue(r)+1,r)):(g.CF=!1,p=z.fromUnsigned(v,r)),g.OF=d.signed>=0&&f.signed<0&&p.signed<0||d.signed<0&&f.signed>=0&&p.signed>=0;break}}return g.ZF=p.isZero(),g.SF=p.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,p,g),this.name==="CMP"?!0:(yield{type:"cpu:cycle.update",phase:"writeback"},yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!!(yield*n.cpu.useBus("mem-write")))}if(i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")i!=="reg<-mem"?r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"):(typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!0),typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!1));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(this.operation.mode==="mem<-imd"?yield*n.cpu.getMBR("id.l"):yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}i==="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}i==="mem<-imd"&&(yield*n.cpu.copyByteRegister("id.l","left.l")),yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=z.fromSigned(d,r),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned+l.unsigned+d;f>z.maxValue(r)?(u.CF=!0,c=z.fromUnsigned(f-z.maxValue(r)-1,r)):(u.CF=!1,c=z.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned-l.unsigned-d;f<0?(u.CF=!0,c=z.fromUnsigned(f+z.maxValue(r)+1,r)):(u.CF=!1,c=z.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Ty=new WeakSet,zL=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var Oy,UL;class JZ extends ma{constructor(){super(...arguments);$e(this,Oy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ot(this,Oy,UL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=z.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=z.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===z.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",z.fromSigned(1,16));const o=i.unsigned+1;o>z.maxValue(this.operation.size)?(s.CF=!0,r=z.fromUnsigned(o-z.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=z.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",z.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=z.fromUnsigned(o+z.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=z.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Oy=new WeakSet,UL=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class ZZ extends ma{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var Iy,VL;class QZ extends ma{constructor(){super(...arguments);$e(this,Iy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ot(this,Iy,VL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new ln("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new ln("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new ln("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}Iy=new WeakSet,VL=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class eQ extends ma{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:!1,ri:this.name==="CALL"}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l",!0),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(!(yield*e.cpu.pushToStack("IP.l")))return!1;yield*e.cpu.copyByteRegister("ri.l","IP.l")}else yield*e.cpu.getMBR("ri.l"),yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class tQ extends ma{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"halting"},yield{type:"cpu:halt"},!1;return!0}}function E2(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function px(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var jy,HL;class nQ extends ma{constructor(){super(...arguments);$e(this,jy)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ot(this,jy,HL).call(this),willUse:{id:!1,ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):(this.operation.mode==="mem<-reg"||this.operation.mode==="reg<-mem")&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(yield{type:"cpu:cycle.update",phase:"writeback"},r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"ri.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),i){case"reg<-reg":{if(yield{type:"cpu:cycle.update",phase:"writeback"},r===8)yield{type:"cpu:register.buscopy",src:o,dest:s,size:8};else{const[a,l]=px(o),[c,u]=px(s);yield{type:"cpu:register.buscopy",src:a,dest:c,size:8},l&&u&&(yield{type:"cpu:register.buscopy",src:l,dest:u,size:8})}return!0}case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(yield{type:"cpu:cycle.update",phase:"writeback"},r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=px(o);return yield*n.cpu.setMAR("ri"),yield{type:"cpu:cycle.update",phase:"writeback"},yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"||(yield*n.cpu.copyByteRegister("BL","ri.l")),yield*n.cpu.setMAR("ri"),yield{type:"cpu:cycle.update",phase:"writeback"},!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}jy=new WeakSet,HL=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class iQ extends ma{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class rQ extends ma{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(i)}else{const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(i))}}}function sQ(t){switch(t.instruction){case"MOV":return new nQ(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new XZ(t);case"NOT":case"NEG":case"INC":case"DEC":return new JZ(t);case"IN":case"OUT":return new QZ(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new rQ(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new eQ(t);case"RET":case"IRET":return new iQ(t);case"INT":return new ZZ(t);case"CLI":case"STI":case"NOP":case"HLT":return new tQ(t)}}function oQ(t){for(const[e,n]of VC)if(n.unsigned===t.unsigned)return e;return null}function*aQ(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new ln("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",r=>r.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new ln("device-not-connected","keyboard")},!1;const i=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",i),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new ln("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",z.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(i);else return yield{type:"cpu:error",error:new ln("device-not-connected","screen")},!1;n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",z.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",z.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===z.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var Cd,it,jr,Li,Sn,Ru,Rr,dO;let lQ=(dO=class extends Rs{constructor(n){super(n);$e(this,Sn);$e(this,Cd);$e(this,it);$e(this,jr);$e(this,Li);n.data==="unchanged"?(ne(this,it,A(n.previous.cpu,it)),ne(this,jr,A(n.previous.cpu,jr)),ne(this,Li,A(n.previous.cpu,Li))):(ne(this,it,{AX:z.zero(16),BX:z.zero(16),CX:z.zero(16),DX:z.zero(16),SP:z.zero(16),IP:z.zero(16),IR:z.zero(8),ri:z.zero(16),id:z.zero(16),left:z.zero(16),right:z.zero(16),result:z.zero(16),FLAGS:z.zero(16)}),ne(this,jr,z.zero(16)),ne(this,Li,z.zero(8))),A(this,it).SP=z.fromUnsigned(Ce.MAX_ADDRESS,16);const i=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),r=n.hasORG??!1;let s;r?s=32:i?s=8:s=0,A(this,it).IP=z.fromUnsigned(s,16),A(this,it).ri=z.fromUnsigned(0,16),A(this,it).id=z.fromUnsigned(0,16),Ot(this,Sn,Rr).call(this,"IF",!0),ne(this,Cd,new Map);for(const o of n.program.instructions){const a=sQ(o);A(this,Cd).set(a.start.value,a)}}*run(){var n;for(;;){const i=A(this,it).IP,r=oQ(i);if(r!==null){if(!(yield*aQ(this.computer,r)))return}else{const s=A(this,Cd).get(i.unsigned);if(!s){yield{type:"cpu:error",error:new ln("no-instruction",A(this,it).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",z.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l"))))return!1;const i=z.fromUnsigned(n.unsigned,8);return yield*this.updateByteRegister("ri.l",i),yield*this.copyWordRegister("ri","IP"),yield*this.setMAR("ri"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("IP.l"),!0):!1}toJSON(){return{...Object.entries(A(this,it)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:A(this,jr).toJSON(),MBR:A(this,Li).toJSON()}}getRegister(n){const[i,r]=E2(n);return r==="low"?A(this,it)[i].low:r==="high"?A(this,it)[i].high:A(this,it)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Ot(this,Sn,Ru).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Ot(this,Sn,Ru).call(this,i,r.withHigh(z.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Ot(this,Sn,Ru).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Ot(this,Sn,Ru).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return A(this,it).FLAGS.bit(1);case"ZF":return A(this,it).FLAGS.bit(0);case"SF":return A(this,it).FLAGS.bit(3);case"IF":return A(this,it).FLAGS.bit(4);case"OF":return A(this,it).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Ot(this,Sn,Rr).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Ot(this,Sn,Rr).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Ot(this,Sn,Rr).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Ot(this,Sn,Rr).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Ot(this,Sn,Rr).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,it).FLAGS}}*aluExecute(n,i,r){A(this,it).result=i.is8bits()?A(this,it).result.withLow(i):i,typeof r.CF=="boolean"&&Ot(this,Sn,Rr).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Ot(this,Sn,Rr).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Ot(this,Sn,Rr).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Ot(this,Sn,Rr).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Ot(this,Sn,Rr).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:A(this,it).result,flags:A(this,it).FLAGS}}*setMAR(n){const i=this.getRegister(n);ne(this,jr,i.withHigh(z.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Ot(this,Sn,Ru).call(this,n,A(this,Li)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);ne(this,Li,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(A(this,jr));return i?(ne(this,Li,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,jr),A(this,Li)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,jr).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(ne(this,Li,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,jr).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,A(this,Li))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const i=yield*this.computer.io.pic.handleINTR();return ne(this,Li,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return Ce.inRange(i.unsigned-1)?(i=i.add(-1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?Ce.inRange(i.unsigned-1)?!0:(yield{type:"cpu:error",error:new ln("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new ln("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return Ce.inRange(i)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),i=i.add(1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new ln("stack-underflow")},!1)}},Cd=new WeakMap,it=new WeakMap,jr=new WeakMap,Li=new WeakMap,Sn=new WeakSet,Ru=function(n,i){const[r,s]=E2(n);if(s===null){if(A(this,it)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);A(this,it)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?A(this,it)[r]=A(this,it)[r].withLow(i):A(this,it)[r]=A(this,it)[r].withHigh(i)}},Rr=function(n,i){switch(n){case"CF":A(this,it).FLAGS=A(this,it).FLAGS.withBit(1,i);return;case"ZF":A(this,it).FLAGS=A(this,it).FLAGS.withBit(0,i);return;case"SF":A(this,it).FLAGS=A(this,it).FLAGS.withBit(3,i);return;case"IF":A(this,it).FLAGS=A(this,it).FLAGS.withBit(4,i);return;case"OF":A(this,it).FLAGS=A(this,it).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},dO);var il,or,Vo,Wa;let WL=(il=class extends Rs{constructor(n){super(n);$e(this,or);$e(this,Vo);$e(this,Wa,!1);n.data==="unchanged"&&n.previous.io.printer?(ne(this,or,A(n.previous.io.printer,or)),ne(this,Vo,A(n.previous.io.printer,Vo)),ne(this,Wa,A(n.previous.io.printer,Wa))):(ne(this,or,[]),ne(this,Vo,""),ne(this,Wa,!1))}get busy(){return A(this,or).length>=il.BUFFER_SIZE}*setStrobe(n){const i=A(this,Wa);if(i===n)return;if(ne(this,Wa,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();A(this,or).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){ne(this,Vo,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,or).length===0)return;const[n,...i]=A(this,or);if(ne(this,or,i),yield{type:"printer:buffer.pop",char:n},i.length===il.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=zC(n.unsigned);ne(this,Vo,A(this,Vo)+r),yield{type:"printer:paper.print",char:r}}}get hasPending(){return A(this,or).length>0}toJSON(){return{paper:A(this,Vo),buffer:[...A(this,or).map(n=>n.unsigned)]}}},or=new WeakMap,Vo=new WeakMap,Wa=new WeakMap,me(il,"BUFFER_SIZE",5),il);class bb extends Rs{}let GL=class extends bb{constructor(n){super(n);me(this,"PA");me(this,"PB");me(this,"CA");me(this,"CB");me(this,"leds",null);me(this,"printer",null);me(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=z.random(8),this.PB=z.random(8),this.CA=z.random(8),this.CB=z.random(8)):(this.PA=z.zero(8),this.PB=z.zero(8),this.CA=z.zero(8),this.CB=z.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class C3 extends GL{constructor(e){super(e),this.PA=this.PA.withBit(1,!1);const n=this;this.printer=new class extends WL{*readData(){const i=n.readData();return yield{type:"printer:data.read",char:i},i}*updateBusy(i){i?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*n.updatePort("A")}}(e)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return z.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=z.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var Ho,fO;let cQ=(fO=class extends Rs{constructor(n){super(n);$e(this,Ho);n.data==="unchanged"&&n.previous.io.leds?ne(this,Ho,A(n.previous.io.leds,Ho)):n.data==="randomize"?ne(this,Ho,z.random(8)):ne(this,Ho,z.zero(8))}get state(){return A(this,Ho)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,Ho).toJSON()}},Ho=new WeakMap,fO);var Dr,hO;let uQ=(hO=class extends Rs{constructor(n){super(n);$e(this,Dr);n.data==="unchanged"&&n.previous.io.switches?ne(this,Dr,A(n.previous.io.switches,Dr)):n.data==="randomize"?ne(this,Dr,z.random(8)):ne(this,Dr,z.zero(8))}get state(){return A(this,Dr)}*toggle(n){ne(this,Dr,A(this,Dr).withBit(n,!A(this,Dr).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,Dr).toJSON()}},Dr=new WeakMap,hO);class dQ extends GL{constructor(e){super(e);const n=this;this.leds=new class extends cQ{}(e),this.switches=new class extends uQ{*toggle(i){yield*super.toggle(i),yield*n.updatePort("A")}}(e)}*updatePort(e){if(e==="A"){const n=this.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=z.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.leds.update(z.fromUnsigned(n,8))}}}let fQ=class extends Rs{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},hQ=class extends Rs{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var Ed,pO;let pQ=(pO=class extends Rs{constructor(){super(...arguments);$e(this,Ed,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,Ed);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},ne(this,Ed,null),n}setLastCharRead(n){ne(this,Ed,n)}toJSON(){return null}},Ed=new WeakMap,pO);var ar,mO;let mQ=(mO=class extends Rs{constructor(n){super(n);$e(this,ar);n.data==="unchanged"&&n.previous.io.screen?ne(this,ar,A(n.previous.io.screen,ar)):ne(this,ar,"")}clear(){return this.sendChar(z.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:ne(this,ar,A(this,ar).slice(0,-1));break;case 10:ne(this,ar,A(this,ar)+`
`);break;case 12:ne(this,ar,"");break;default:ne(this,ar,A(this,ar)+zC(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,ar)}}toJSON(){return A(this,ar)}},ar=new WeakMap,mO);var Wo,bi,gO;let gQ=(gO=class extends bb{constructor(n){super(n);$e(this,Wo);$e(this,bi);me(this,"printer");n.data==="randomize"?ne(this,Wo,z.random(8)):ne(this,Wo,z.zero(8)),ne(this,bi,z.zero(8));const i=this;this.printer=new class extends WL{*readData(){const r=A(i,Wo);return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updateBusy(r)}}(n)}get interrupts(){return A(this,bi).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=A(this,Wo);else if(n==="STATE")i=A(this,bi);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")ne(this,Wo,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.printer.busy),ne(this,bi,i),yield{type:"handshake:register.update",register:n,value:i},A(this,bi).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),ne(this,bi,A(this,bi).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,bi)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){ne(this,bi,A(this,bi).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,bi)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,Wo).toJSON(),STATE:A(this,bi).toJSON()}}},Wo=new WeakMap,bi=new WeakMap,gO);var ys,Go,$i,wi,fs,bo,T0,O0;let vQ=(ys=class extends bb{constructor(n){super(n);$e(this,bo);$e(this,Go);$e(this,$i);$e(this,wi);$e(this,fs);ne(this,Go,z.fromUnsigned(255,8)),ne(this,$i,z.fromUnsigned(0,8)),ne(this,wi,z.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?ne(this,fs,A(n.previous.io.pic,fs)):n.data==="randomize"?ne(this,fs,new Array(ys.LINES).fill(z.zero(8)).map(()=>z.random(8))):ne(this,fs,new Array(ys.LINES).fill(z.zero(8)))}chipSelect(n){const r=4+ys.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=z.zero(8);else if(n==="IMR")i=A(this,Go);else if(n==="IRR")i=A(this,$i);else if(n==="ISR")i=A(this,wi);else{const r=Number(n.slice(3));i=A(this,fs)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")A(this,wi).isZero()||(yield{type:"pic:intr.off"},ne(this,wi,z.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,wi)},yield*Ot(this,bo,O0).call(this));else if(n==="IMR")ne(this,Go,i),yield{type:"pic:register.update",register:"IMR",value:A(this,Go)},yield*Ot(this,bo,O0).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));A(this,fs)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=ys.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,$i).bit(n)||(ne(this,$i,A(this,$i).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,$i)},yield*Ot(this,bo,O0).call(this))}isINTRActive(){return A(this,wi).isZero()&&Ot(this,bo,T0).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,wi).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Ot(this,bo,T0).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");ne(this,wi,A(this,wi).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,wi)},ne(this,$i,A(this,$i).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,$i)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=A(this,fs)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:A(this,Go).toJSON(),IRR:A(this,$i).toJSON(),ISR:A(this,wi).toJSON(),lines:A(this,fs).map(n=>n.toJSON())}}},Go=new WeakMap,$i=new WeakMap,wi=new WeakMap,fs=new WeakMap,bo=new WeakSet,T0=function(){for(let n=0;n<ys.LINES;n++)if(A(this,$i).bit(n)&&!A(this,Go).bit(n))return n;return null},O0=function*(){A(this,wi).isZero()&&Ot(this,bo,T0).call(this)!==null&&(yield{type:"pic:intr.on"})},me(ys,"LINES",8),ys);var Xs,Ga,vO;let yQ=(vO=class extends bb{constructor(n){super(n);$e(this,Xs);$e(this,Ga);ne(this,Xs,z.zero(8)),ne(this,Ga,z.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=A(this,Xs);else if(n==="COMP")i=A(this,Ga);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")ne(this,Xs,i);else if(n==="COMP")ne(this,Ga,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=A(this,Xs).unsigned===z.maxValue(8)?z.zero(8):A(this,Xs).add(1);ne(this,Xs,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,Ga).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,Xs).toJSON(),COMP:A(this,Ga).toJSON()}}},Xs=new WeakMap,Ga=new WeakMap,vO);class bQ extends Rs{constructor(n){super(n);me(this,"clock",null);me(this,"f10",null);me(this,"keyboard",null);me(this,"screen",null);me(this,"handshake",null);me(this,"pic",null);me(this,"pio",null);me(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new pQ(n),this.screen=new mQ(n)),n.devices.pic&&(this.clock=new fQ(n),this.f10=new hQ(n),this.timer=new yQ(n),this.pic=new vQ(n)),this.pio=n.devices.pio==="switches-and-leds"?new dQ(n):n.devices.pio==="printer"?new C3(n):null,n.devices.handshake){if(this.pio instanceof C3)throw new ln("io-printer-conflict");this.handshake=new gQ(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,i;return((n=this.pio)==null?void 0:n.printer)??((i=this.handshake)==null?void 0:i.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,c,u;const i=(a=this.handshake)==null?void 0:a.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=(l=this.pic)==null?void 0:l.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=(c=this.pio)==null?void 0:c.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(u=this.timer)==null?void 0:u.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new ln("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return this[i]?yield*this[i].read(r):(yield{type:"bus:io.error",error:new ln("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return this[r]?(yield*this[r].write(s,i),!0):(yield{type:"bus:io.error",error:new ln("device-not-connected",r)},!1)}toJSON(){var n,i,r,s,o,a,l,c,u,d,f;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((i=this.f10)==null?void 0:i.toJSON())??null,keyboard:((r=this.keyboard)==null?void 0:r.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((c=this.handshake)==null?void 0:c.toJSON())??null,pic:((u=this.pic)==null?void 0:u.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((f=this.timer)==null?void 0:f.toJSON())??null}}}var rl,xi,Ad,Nd;let wQ=(rl=class extends Rs{constructor(n){super(n);$e(this,xi);$e(this,Ad);$e(this,Nd);n.data==="unchanged"?ne(this,xi,A(n.previous.memory,xi)):n.data==="randomize"?ne(this,xi,new Uint8Array(rl.SIZE).map(()=>z.random(8).unsigned)):ne(this,xi,new Uint8Array(rl.SIZE).fill(0)),A(this,xi)[255]=1;const i=n.program.instructions.some(r=>r.instruction==="INT");if(ne(this,Nd,new Set),i)for(const[r,s]of VC){const o=r;if(A(this,xi)[o]=s.unsigned,A(this,Nd).add(o),r===6){const a=[208,216,48,18,1,193,193,216,49,212,65,225],l=s.unsigned;for(let c=0;c<a.length;c++)A(this,xi)[l+c]=a[c],A(this,Nd).add(l+c)}}for(const r of n.program.data){let s=r.start.value;for(const o of r.getValues())o!==fh&&A(this,xi).set(o.toUint8Array(),s),s+=r.size/8}ne(this,Ad,new Set);for(const r of n.program.instructions){A(this,xi).set(r.toBytes(),r.start.value);for(let s=0;s<r.length;s++)A(this,Ad).add(r.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!Ce.inRange(n))return yield{type:"memory:read.error",error:new ln("address-out-of-range",n)},null;const i=z.fromUnsigned(A(this,xi).at(n),8);return yield{type:"memory:read.ok",address:Ce.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},Ce.inRange(n)?(A(this,Ad).has(n)&&(yield{type:"memory:write.warning",warning:`Sobrescribiendo instrucción en la dirección ${Ce.format(n)}`},console.warn(`Advertencia: Sobrescribiendo instrucción en la dirección ${Ce.format(n)}`)),A(this,xi).set([i.unsigned],n),yield{type:"memory:write.ok",address:Ce.from(n),value:i},!0):(yield{type:"memory:write.error",error:new ln("address-out-of-range",n)},!1)}toJSON(){return[...A(this,xi)]}},xi=new WeakMap,Ad=new WeakMap,Nd=new WeakMap,me(rl,"SIZE",Ce.MAX_ADDRESS+1),rl);class E3{constructor(e){me(this,"cpu");me(this,"memory");me(this,"io");const n={computer:this,...e};this.cpu=new lQ(n),this.memory=new wQ(n),this.io=new bQ(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var Et;class xQ{constructor(){$e(this,Et,new E3({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){ne(this,Et,new E3({...e,previous:A(this,Et)}))}getComputerState(){var e;return((e=A(this,Et))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,Et))throw new ln("no-program");return A(this,Et).cpu.run()}get devices(){if(!A(this,Et))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,Et).io.clock!==null,tick:()=>{if(A(this,Et).io.clock)return A(this,Et).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,Et).io,press:()=>{if(A(this,Et).io.f10)return A(this,Et).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,Et).io,readChar:e=>{if(A(this,Et).io.keyboard)return A(this,Et).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,Et).io},printer:{connected:()=>A(this,Et).io.printer!==null,clear:()=>{if(A(this,Et).io.printer)return A(this,Et).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,Et).io.printer)return A(this,Et).io.printer.print();console.warn("No printer connected to the computer!")},hasPending:()=>{var e;return((e=A(this,Et).io.printer)==null?void 0:e.hasPending)??!1}},screen:{connected:()=>"screen"in A(this,Et).io,clear:()=>{if(A(this,Et).io.screen)return A(this,Et).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,Et).io,toggle:e=>{if(A(this,Et).io.switches)return A(this,Et).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}Et=new WeakMap;const mx=de(z.zero(16)),gx=de(z.zero(16)),SQ=de(z.zero(8)),vx=de(z.zero(16)),yx=de(z.zero(16)),bx=de(z.zero(16)),wx=de(z.zero(16)),xx=de(z.zero(16)),Sx=de(z.zero(16)),Hs=de(z.zero(16)),Zs=de(z.zero(8)),pt=de(""),Pp=de(0),sn=de(0),KC=de(!1),kQ=de(!1),wb=de(0),mc=de([]),KL=de(!1);de(!0);de(!0);const A2=de(!1),Ec=de({canAnimate:!0,pendingMessage:null}),_a=t=>de(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),Ca=t=>de(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),xe={AL:de(z.zero(8)),BL:de(z.zero(8)),CL:de(z.zero(8)),DL:de(z.zero(8)),SP:mx,"SP.l":_a(mx),"SP.h":Ca(mx),IP:gx,"IP.l":_a(gx),"IP.h":Ca(gx),IR:SQ,ri:vx,"ri.l":_a(vx),"ri.h":Ca(vx),id:yx,"id.l":_a(yx),"id.h":Ca(yx),left:bx,"left.l":_a(bx),"left.h":Ca(bx),right:wx,"right.l":_a(wx),"right.h":Ca(wx),result:xx,"result.l":_a(xx),"result.h":Ca(xx),FLAGS:Sx,"FLAGS.l":_a(Sx),"FLAGS.h":Ca(Sx),MAR:Hs,MBR:Zs},Hn=de({phase:"stopped"}),qL=de("ADD");function _Q(t,e=!1){e?(M.set(xe.AL,z.zero(8)),M.set(xe.BL,z.zero(8)),M.set(xe.CL,z.zero(8)),M.set(xe.DL,z.zero(8)),M.set(xe.SP,z.fromUnsigned(255,16)),M.set(xe.IP,z.zero(16)),M.set(xe.IR,z.zero(8)),M.set(xe.ri,z.zero(16)),M.set(xe.id,z.zero(16)),M.set(xe.left,z.zero(16)),M.set(xe.right,z.zero(16)),M.set(xe.result,z.zero(16)),M.set(xe.FLAGS,z.zero(16)),M.set(xe.MAR,z.zero(16)),M.set(xe.MBR,z.zero(8))):(M.set(xe.AL,z.fromUnsigned(t.cpu.AX&255,8)),M.set(xe.BL,z.fromUnsigned(t.cpu.BX&255,8)),M.set(xe.CL,z.fromUnsigned(t.cpu.CX&255,8)),M.set(xe.DL,z.fromUnsigned(t.cpu.DX&255,8)),M.set(xe.SP,z.fromUnsigned(t.cpu.SP,16)),M.set(xe.IP,z.fromUnsigned(t.cpu.IP,16)),M.set(xe.IR,z.fromUnsigned(t.cpu.IR,8)),M.set(xe.ri,z.fromUnsigned(t.cpu.ri,16)),M.set(xe.id,z.fromUnsigned(t.cpu.id,16)),M.set(xe.left,z.fromUnsigned(t.cpu.left,16)),M.set(xe.right,z.fromUnsigned(t.cpu.right,16)),M.set(xe.result,z.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,M.set(xe.FLAGS,z.fromUnsigned(t.cpu.FLAGS,16)),M.set(xe.MAR,z.fromUnsigned(t.cpu.MAR,16)),M.set(xe.MBR,z.fromUnsigned(t.cpu.MBR,8))),M.set(Hn,{phase:"stopped"})}const YL=de([]),XL=de([]),qv=de(new Array(Ce.MAX_ADDRESS+1).fill(z.zero(8))),Mp=de(Ce.from(32)),CQ=de(null),bg=256,EQ=de(t=>{const e=t(CQ)??t(Mp);let n=e.value-e.value%bg,i=n+bg-1;i>Ce.MAX_ADDRESS&&(i=Ce.MAX_ADDRESS,n=i-bg+1);const r=t(qv),s=[];for(let o=0;o<bg;o++)s.push({address:Ce.from(n+o),value:r[n+o]});return s});function AQ(t,e=!1){e?M.set(qv,new Array(Ce.MAX_ADDRESS+1).fill(z.zero(8))):M.set(qv,t.memory.map(n=>z.fromUnsigned(n,8))),M.set(Mp,Ce.from(32))}let N2=[],JL=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?JL:N2).push(n=n+t[e])})();function NQ(t){if(t<768)return!1;for(let e=0,n=N2.length;;){let i=e+n>>1;if(t<N2[i])n=i;else if(t>=JL[i])e=i+1;else return!0;if(e==n)return!1}}function A3(t){return t>=127462&&t<=127487}const N3=8205;function PQ(t,e,n=!0,i=!0){return(n?ZL:MQ)(t,e,i)}function ZL(t,e,n){if(e==t.length)return e;e&&QL(t.charCodeAt(e))&&e8(t.charCodeAt(e-1))&&e--;let i=kx(t,e);for(e+=P3(i);e<t.length;){let r=kx(t,e);if(i==N3||r==N3||n&&NQ(r))e+=P3(r),i=r;else if(A3(r)){let s=0,o=e-2;for(;o>=0&&A3(kx(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function MQ(t,e,n){for(;e>0;){let i=ZL(t,e-2,n);if(i<e)return i;e--}return 0}function kx(t,e){let n=t.charCodeAt(e);if(!e8(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return QL(i)?(n-55296<<10)+(i-56320)+65536:n}function QL(t){return t>=56320&&t<57344}function e8(t){return t>=55296&&t<56320}function P3(t){return t<65536?1:2}class wt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=Yd(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),to.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Yd(this,e,n);let i=[];return this.decompose(e,n,i,0),to.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new $h(this),s=new $h(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new $h(this,e)}iterRange(e,n=this.length){return new t8(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new n8(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?wt.empty:e.length<=32?new vn(e):to.from(vn.split(e,[]))}}class vn extends wt{constructor(e,n=RQ(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new TQ(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new vn(M3(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=I0(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new vn(a,o.length+s.length));else{let l=a.length>>1;i.push(new vn(a.slice(0,l)),new vn(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof vn))return super.replace(e,n,i);[e,n]=Yd(this,e,n);let r=I0(this.text,I0(i.text,M3(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new vn(r,s):to.from(vn.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=Yd(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new vn(i,r)),i=[],r=-1);return r>-1&&n.push(new vn(i,r)),n}}class to extends wt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?i.push(a):a.decompose(e-o,n-o,i,c)}o=l+1}}replace(e,n,i){if([e,n]=Yd(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[r]=l,new to(u,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=Yd(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof to))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],c=e.children[s];if(l!=c)return i+l.scanIdentical(c,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let g of e)g.flatten(p);return new vn(p,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,c=-1,u=[];function d(p){let g;if(p.lines>s&&p instanceof to)for(let m of p.children)d(m);else p.lines>o&&(l>o||!l)?(f(),a.push(p)):p instanceof vn&&l&&(g=u[u.length-1])instanceof vn&&p.lines+g.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new vn(g.text.concat(p.text),g.length+1+p.length)):(l+p.lines>r&&f(),l+=p.lines,c+=p.length+1,u.push(p))}function f(){l!=0&&(a.push(u.length==1?u[0]:to.from(u,c)),c=-1,l=u.length=0)}for(let p of e)d(p);return f(),a.length==1?a[0]:new to(a,n)}}wt.empty=new vn([""],0);function RQ(t){let e=-1;for(let n of t)e+=n.length+1;return e}function I0(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function M3(t,e,n){return I0(t,[""],e,n)}class $h{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof vn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof vn?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof vn){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof vn?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class t8{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new $h(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class n8{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(wt.prototype[Symbol.iterator]=function(){return this.iter()},$h.prototype[Symbol.iterator]=t8.prototype[Symbol.iterator]=n8.prototype[Symbol.iterator]=function(){return this});class TQ{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function Yd(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Zn(t,e,n=!0,i=!0){return PQ(t,e,n,i)}function OQ(t){return t>=56320&&t<57344}function IQ(t){return t>=55296&&t<56320}function Br(t,e){let n=t.charCodeAt(e);if(!IQ(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return OQ(i)?(n-55296<<10)+(i-56320)+65536:n}function qC(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function qo(t){return t<65536?1:2}const P2=/\r\n?|\n/;var Wi=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Wi||(Wi={}));class vo{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){M2(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new vo(e)}composeDesc(e){return this.empty?e:e.empty?this:i8(this,e)}mapDesc(e,n=!1){return e.empty?this:R2(this,e,n)}mapPos(e,n=-1,i=Wi.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=r+a;if(l<0){if(c>e)return s+(e-r);s+=a}else{if(i!=Wi.Simple&&c>=e&&(i==Wi.TrackDel&&r<e&&c>e||i==Wi.TrackBefore&&r<e||i==Wi.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new vo(e)}static create(e){return new vo(e)}}class Mn extends vo{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return M2(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return R2(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(wt.empty);i.push(o?e.slice(s,s+o):wt.empty)}s+=o}return new Mn(n,i)}compose(e){return this.empty?e:e.empty?this:i8(this,e,!0)}map(e,n=!1){return e.empty?this:R2(this,e,n,!0)}iterChanges(e,n=!1){M2(this,e,n)}get desc(){return vo.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new Rp(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);ui(r,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;ui(n,u,d),d>0&&Xa(i,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);ui(n,u,-1),ui(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new Mn(n,i),filtered:vo.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!r.length)return;o<n&&ui(r,n-o,-1);let d=new Mn(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof Mn){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:f=d,insert:p}=u;if(d>f||d<0||f>n)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${n})`);let g=p?typeof p=="string"?wt.of(p.split(i||P2)):p:wt.empty,m=g.length;if(d==f&&m==0)return;d<o&&l(),d>o&&ui(r,d-o,-1),ui(r,f-d,m),Xa(s,r,g),o=f}}return c(e),l(!a),a}static empty(e){return new Mn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(wt.empty);i[r]=wt.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new Mn(n,i)}static createSet(e,n){return new Mn(e,n)}}function ui(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:r>=0&&e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Xa(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(wt.empty);t.push(n)}}function M2(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let c=r,u=s,d=wt.empty;for(;c+=a,u+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,c,s,u,d),r=c,s=u}}}function R2(t,e,n,i=!1){let r=[],s=i?[]:null,o=new Rp(t),a=new Rp(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);ui(r,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(ui(r,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(ui(r,0,o.ins),s&&Xa(s,r,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;ui(r,c,l<o.i?o.ins:0),s&&l<o.i&&Xa(s,r,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?Mn.createSet(r,s):vo.create(r);throw new Error("Mismatched change set lengths")}}}function i8(t,e,n=!1){let i=[],r=n?[]:null,s=new Rp(t),o=new Rp(e);for(let a=!1;;){if(s.done&&o.done)return r?Mn.createSet(i,r):vo.create(i);if(s.ins==0)ui(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)ui(i,0,o.ins,a),r&&Xa(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;ui(i,l,u,a),r&&u&&Xa(r,i,o.text)}else o.ins==-1?(ui(i,s.off?0:s.len,l,a),r&&Xa(r,i,s.textBit(l))):(ui(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Xa(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>c),s.forward2(l),o.forward(l)}}}}class Rp{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?wt.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?wt.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Ac{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new Ac(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return se.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return se.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return se.range(e.anchor,e.head)}static create(e,n,i){return new Ac(e,n,i)}}class se{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:se.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new se([this.main],0)}addRange(e,n=!0){return se.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,se.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new se(e.ranges.map(n=>Ac.fromJSON(n)),e.main)}static single(e,n=e){return new se([se.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return se.normalized(e.slice(),n);i=s.to}return new se(e,n)}static cursor(e,n=0,i,r){return Ac.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?Ac.create(n,e,48|s):Ac.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?se.range(l,a):se.range(a,l))}}return new se(e,n)}}function r8(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let YC=0;class Ne{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=YC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ne(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:XC),!!e.static,e.enables)}of(e){return new j0([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new j0(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new j0(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function XC(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class j0{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=YC++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||T2(d,u)){let p=i(d);if(a?!R3(p,d.values[o],r):!r(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,f)=>{let p,g=f.config.address[s];if(g!=null){let m=Xv(f,g);if(this.dependencies.every(v=>v instanceof Ne?f.facet(v)===d.facet(v):v instanceof Pi?f.field(v,!1)==d.field(v,!1):!0)||(a?R3(p=i(d),m,r):r(p=i(d),m)))return d.values[o]=m,0}else p=i(d);return d.values[o]=p,1}}}}function R3(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function T2(t,e){let n=!1;for(let i of e)Bh(t,i)&1&&(n=!0);return n}function jQ(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<i.length;u++){let d=Xv(l,i[u]);if(r[u]==2)for(let f of d)c.push(f);else c.push(d)}return e.combine(c)}return{create(l){for(let c of i)Bh(l,c);return l.values[o]=a(l),1},update(l,c){if(!T2(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=T2(l,i),d=c.config.facets[e.id],f=c.facet(e);if(d&&!u&&XC(n,d))return l.values[o]=f,0;let p=a(l);return e.compare(p,f)?(l.values[o]=f,0):(l.values[o]=p,1)}}}const wg=Ne.define({static:!0});class Pi{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new Pi(YC++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(wg).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>{let s=i.facet(wg),o=r.facet(wg),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(i.values[n]=a.create(i),1):r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,wg.of({field:this,create:e})]}get extension(){return this}}const gc={lowest:4,low:3,default:2,high:1,highest:0};function Lf(t){return e=>new s8(e,t)}const ym={highest:Lf(gc.highest),high:Lf(gc.high),default:Lf(gc.default),low:Lf(gc.low),lowest:Lf(gc.lowest)};class s8{constructor(e,n){this.inner=e,this.prec=n}}class bm{of(e){return new O2(this,e)}reconfigure(e){return bm.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class O2{constructor(e,n){this.compartment=e,this.inner=n}}class Yv{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let f of DQ(e,n,o))f instanceof Pi?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of r)a[f.id]=c.length<<1,c.push(p=>f.slot(p));let u=i==null?void 0:i.config.facets;for(let f in s){let p=s[f],g=p[0].facet,m=u&&u[f]||[];if(p.every(v=>v.type==0))if(a[g.id]=l.length<<1|1,XC(m,p))l.push(i.facet(g));else{let v=g.combine(p.map(y=>y.value));l.push(i&&g.compare(v,i.facet(g))?i.facet(g):v)}else{for(let v of p)v.type==0?(a[v.id]=l.length<<1|1,l.push(v.value)):(a[v.id]=c.length<<1,c.push(y=>v.dynamicSlot(y)));a[g.id]=c.length<<1,c.push(v=>jQ(v,g,p))}}let d=c.map(f=>f(a));return new Yv(e,o,d,a,l,s)}}function DQ(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let c=i[l].indexOf(o);c>-1&&i[l].splice(c,1),o instanceof O2&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof O2){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof s8)s(o.inner,o.prec);else if(o instanceof Pi)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof j0)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,gc.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,gc.default),i.reduce((o,a)=>o.concat(a))}function Bh(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function Xv(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const o8=Ne.define(),I2=Ne.define({combine:t=>t.some(e=>e),static:!0}),a8=Ne.define({combine:t=>t.length?t[0]:void 0,static:!0}),l8=Ne.define(),c8=Ne.define(),u8=Ne.define(),d8=Ne.define({combine:t=>t.length?t[0]:!1});class ga{constructor(e,n){this.type=e,this.value=n}static define(){return new LQ}}class LQ{of(e){return new ga(this,e)}}class $Q{constructor(e){this.map=e}of(e){return new ot(this,e)}}class ot{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new ot(this.type,n)}is(e){return this.type==e}static define(e={}){return new $Q(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}ot.reconfigure=ot.define();ot.appendConfig=ot.define();class In{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&r8(i,n.newLength),s.some(a=>a.type==In.time)||(this.annotations=s.concat(In.time.of(Date.now())))}static create(e,n,i,r,s,o){return new In(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(In.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}In.time=ga.define();In.userEvent=ga.define();In.addToHistory=ga.define();In.remote=ga.define();function BQ(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function f8(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=Mn.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:ot.mapEffects(t.effects,r).concat(ot.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function j2(t,e,n){let i=e.selection,r=hd(e.annotations);return e.userEvent&&(r=r.concat(In.userEvent.of(e.userEvent))),{changes:e.changes instanceof Mn?e.changes:Mn.of(e.changes||[],n,t.facet(a8)),selection:i&&(i instanceof se?i:se.single(i.anchor,i.head)),effects:hd(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function h8(t,e,n){let i=j2(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=f8(i,j2(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=In.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return zQ(n?FQ(r):r)}function FQ(t){let e=t.startState,n=!0;for(let r of e.facet(l8)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:BQ(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=Mn.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=In.create(e,r,t.selection&&t.selection.map(s),ot.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(c8);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof In?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof In?t=s[0]:t=h8(e,hd(s),!1)}return t}function zQ(t){let e=t.startState,n=e.facet(u8),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=f8(i,j2(e,s,t.changes.newLength),!0))}return i==t?t:In.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const UQ=[];function hd(t){return t==null?UQ:Array.isArray(t)?t:[t]}var Qn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Qn||(Qn={}));const VQ=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let D2;try{D2=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function HQ(t){if(D2)return D2.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||VQ.test(n)))return!0}return!1}function WQ(t){return e=>{if(!/\S/.test(e))return Qn.Space;if(HQ(e))return Qn.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Qn.Word;return Qn.Other}}class mt{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Bh(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return Bh(this,i),Xv(this,i)}update(...e){return h8(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(bm.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,c)=>r.set(c,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(ot.reconfigure)?(n=null,i=a.value):a.is(ot.appendConfig)&&(n=null,i=hd(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=Yv.resolve(i,r,this),s=new mt(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(I2)?e.newSelection:e.newSelection.asSingle();new mt(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:se.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=hd(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(r);for(let f=0;f<a;f++)s[f]=s[f].map(u);let d=r.mapDesc(c,!0);s.push(l.range.map(d)),r=r.compose(u),o=ot.mapEffects(o,u).concat(ot.mapEffects(hd(l.effects),d))}return{changes:r,selection:se.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Mn?e:Mn.of(e,this.doc.length,this.facet(mt.lineSeparator))}toText(e){return wt.of(e.split(this.facet(mt.lineSeparator)||P2))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Bh(this,n),Xv(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Pi&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return mt.create({doc:e.doc,selection:se.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=Yv.resolve(e.extensions||[],new Map),i=e.doc instanceof wt?e.doc:wt.of((e.doc||"").split(n.staticFacet(mt.lineSeparator)||P2)),r=e.selection?e.selection instanceof se?e.selection:se.single(e.selection.anchor,e.selection.head):se.single(0);return r8(r,i.length),n.staticFacet(I2)||(r=r.asSingle()),new mt(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(mt.tabSize)}get lineBreak(){return this.facet(mt.lineSeparator)||`
`}get readOnly(){return this.facet(d8)}phrase(e,...n){for(let i of this.facet(mt.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(o8))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return WQ(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=Zn(n,o,!1);if(s(n.slice(l,o))!=Qn.Word)break;o=l}for(;a<r;){let l=Zn(n,a);if(s(n.slice(a,l))!=Qn.Word)break;a=l}return o==a?null:se.range(o+i,a+i)}}mt.allowMultipleSelections=I2;mt.tabSize=Ne.define({combine:t=>t.length?t[0]:4});mt.lineSeparator=a8;mt.readOnly=d8;mt.phrases=Ne.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});mt.languageData=o8;mt.changeFilter=l8;mt.transactionFilter=c8;mt.transactionExtender=u8;bm.reconfigure=ot.define();function Ul(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Gc{eq(e){return this==e}range(e,n=e){return L2.create(e,n,this)}}Gc.prototype.startSide=Gc.prototype.endSide=0;Gc.prototype.point=!1;Gc.prototype.mapMode=Wi.TrackDel;let L2=class p8{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new p8(e,n,i)}};function $2(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class JC{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,f,p;if(u==d){let g=n.mapPos(u,c.startSide,c.mapMode);if(g==null||(f=p=g,c.startSide!=c.endSide&&(p=n.mapPos(u,c.endSide),p<f)))continue}else if(f=n.mapPos(u,c.startSide),p=n.mapPos(d,c.endSide),f>p||f==p&&c.startSide>0&&c.endSide<=0)continue;(p-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,p-f)),i.push(c),r.push(f-o),s.push(p-o))}return{mapped:i.length?new JC(r,s,i,a):null,pos:o}}}class Nt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new Nt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort($2)),this.isEmpty)return n.length?Nt.of(n):this;let a=new m8(this,null,-1).goto(0),l=0,c=[],u=new Nl;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(L2.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Nt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new Nt(i,n,s||Nt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Tp.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Tp.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=T3(o,a,i),c=new $f(o,l,s),u=new $f(a,l,s);i.iterGaps((d,f,p)=>O3(c,d,u,f,p,r)),i.empty&&i.length==0&&O3(c,0,u,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=T3(s,o),l=new $f(s,a,0).goto(i),c=new $f(o,a,0).goto(i);for(;;){if(l.to!=c.to||!B2(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>r)return!0;l.next(),c.next()}}static spans(e,n,i,r,s=-1){let o=new $f(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);r.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(r.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new Nl;for(let r of e instanceof L2?[e]:n?GQ(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return Nt.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=Nt.empty;r=r.nextLayer)n=new Nt(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}Nt.empty=new Nt([],[],null,-1);function GQ(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if($2(e,i)>0)return t.slice().sort($2);e=i}return t}Nt.empty.nextLayer=Nt.empty;class Nl{finishChunk(e){this.chunks.push(new JC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new Nl)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(Nt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Nt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function T3(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class m8{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Tp{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new m8(o,n,i,s));return r.length==1?r[0]:new Tp(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)_x(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)_x(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),_x(this.heap,0)}}}function _x(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class $f{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Tp.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){xg(this.active,e),xg(this.activeTo,e),xg(this.activeRank,e),this.minActive=I3(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;Sg(this.active,n,i),Sg(this.activeTo,n,r),Sg(this.activeRank,n,s),e&&Sg(e,n,this.cursor.from),this.minActive=I3(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&xg(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function O3(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let c=t.to+l-n.to,u=c||t.endSide-n.endSide,d=u<0?t.to+l:n.to,f=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&B2(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,f,t.point,n.point):f>a&&!B2(t.active,n.active)&&s.compareRange(a,f,t.active,n.active),d>o)break;(c||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(d),a=d,u<=0&&t.next(),u>=0&&n.next()}}function B2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function xg(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Sg(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function I3(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function wm(t,e,n=t.length){let i=0;for(let r=0;r<n&&r<t.length;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Zn(t,r));return i}function KQ(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=Zn(t,r)}return t.length}const F2="ͼ",j3=typeof Symbol>"u"?"__"+F2:Symbol.for(F2),z2=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),D3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Pl{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let p in a){let g=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(m=>o.map(v=>m.replace(/&/,v))).reduce((m,v)=>m.concat(v)),g,l);else if(g&&typeof g=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(r(p),g,u,f)}else g!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+g+";")}(u.length||f)&&l.push((i&&!d&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=D3[j3]||1;return D3[j3]=e+1,F2+e.toString(36)}static mount(e,n,i){let r=e[z2],s=i&&i.nonce;r?s&&r.setNonce(s):r=new qQ(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let L3=new Map;class qQ{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=L3.get(i);if(s)return e[z2]=s;this.sheet=new r.CSSStyleSheet,L3.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[z2]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let c=0;c<a.rules.length;c++)i.insertRule(a.rules[c],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Ml={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Op={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},YQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),XQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var qn=0;qn<10;qn++)Ml[48+qn]=Ml[96+qn]=String(qn);for(var qn=1;qn<=24;qn++)Ml[qn+111]="F"+qn;for(var qn=65;qn<=90;qn++)Ml[qn]=String.fromCharCode(qn+32),Op[qn]=String.fromCharCode(qn);for(var Cx in Ml)Op.hasOwnProperty(Cx)||(Op[Cx]=Ml[Cx]);function JQ(t){var e=YQ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||XQ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Op:Ml)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function It(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)g8(t,arguments[e]);return t}function g8(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)g8(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Ip(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function U2(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function D0(t,e){if(!e.anchorNode)return!1;try{return U2(t,e.anchorNode)}catch{return!1}}function jp(t){return t.nodeType==3?qc(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Fh(t,e,n,i){return n?$3(t,e,n,i,-1)||$3(t,e,n,i,1):!1}function Kc(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Jv(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function $3(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:xo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Kc(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?xo(t):0}else return!1}}function xo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function xb(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function ZQ(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function v8(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function QQ(t,e,n,i,r,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let f,p=u==l.body,g=1,m=1;if(p)f=ZQ(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let w=u.getBoundingClientRect();({scaleX:g,scaleY:m}=v8(u,w)),f={left:w.left,right:w.left+u.clientWidth*g,top:w.top,bottom:w.top+u.clientHeight*m}}let v=0,y=0;if(r=="nearest")e.top<f.top?(y=e.top-(f.top+o),n>0&&e.bottom>f.bottom+y&&(y=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(y=e.bottom-f.bottom+o,n<0&&e.top-y<f.top&&(y=e.top-(f.top+o)));else{let w=e.bottom-e.top,x=f.bottom-f.top;y=(r=="center"&&w<=x?e.top+w/2-x/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-x+o)-f.top}if(i=="nearest"?e.left<f.left?(v=e.left-(f.left+s),n>0&&e.right>f.right+v&&(v=e.right-f.right+s)):e.right>f.right&&(v=e.right-f.right+s,n<0&&e.left<f.left+v&&(v=e.left-(f.left+s))):v=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,v||y)if(p)c.scrollBy(v,y);else{let w=0,x=0;if(y){let S=u.scrollTop;u.scrollTop+=y/m,x=(u.scrollTop-S)*m}if(v){let S=u.scrollLeft;u.scrollLeft+=v/g,w=(u.scrollLeft-S)*g}e={left:e.left-w,top:e.top-x,right:e.right-w,bottom:e.bottom-x},w&&Math.abs(w-v)<1&&(i="nearest"),x&&Math.abs(x-y)<1&&(r="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function eee(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class tee{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?xo(n):0),i,Math.min(e.focusOffset,i?xo(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let mu=null;function y8(t){if(t.setActive)return t.setActive();if(mu)return t.focus(mu);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(mu==null?{get preventScroll(){return mu={preventScroll:!0},!0}}:void 0),!mu){mu=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let B3;function qc(t,e,n=e){let i=B3||(B3=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function pd(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function nee(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function b8(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function iee(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,xo(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=xo(n))}else{if(n==t)return!0;i=Kc(n),n=n.parentNode}}function w8(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function x8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=xo(n)}else if(n.parentNode&&!Jv(n))i=Kc(n),n=n.parentNode;else return null}}function S8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!Jv(n))i=Kc(n)+1,n=n.parentNode;else return null}}class hi{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new hi(e.parentNode,Kc(e),n)}static after(e,n){return new hi(e.parentNode,Kc(e)+1,n)}}const ZC=[];class Dt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=Dt.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=F3(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=F3(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=xo(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Dt.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,c=i,u=i;l<this.children.length;l++){let d=this.children[l],f=c+d.length;if(c<e&&f>n)return d.domBoundsAround(e,n,c);if(f>=e&&r==-1&&(r=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=ZC){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new k8(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Dt.prototype.breakAfter=0;function F3(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class k8{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function _8(t,e,n,i,r,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,f=d?d.breakAfter:o;if(!(e==i&&u&&!o&&!f&&s.length<2&&u.merge(n,r,s.length?d:null,n==0,a,l))){if(i<c.length){let p=c[i];p&&(r<p.length||p.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(p=p.split(r),r=0),!f&&d&&p.merge(0,r,d,!0,0,l)?s[s.length-1]=p:((r||p.children.length&&!p.children[0].length)&&p.merge(0,r,null,!1,0,l),s.push(p))):p!=null&&p.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function C8(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let f of i)d+=f.length;t.length+=d,_8(t,c,u,a,l,i,0,r,s)}let Hi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},V2=typeof document<"u"?document:{documentElement:{style:{}}};const H2=/Edge\/(\d+)/.exec(Hi.userAgent),E8=/MSIE \d/.test(Hi.userAgent),W2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Hi.userAgent),Sb=!!(E8||W2||H2),z3=!Sb&&/gecko\/(\d+)/i.test(Hi.userAgent),Ex=!Sb&&/Chrome\/(\d+)/.exec(Hi.userAgent),ree="webkitFontSmoothing"in V2.documentElement.style,A8=!Sb&&/Apple Computer/.test(Hi.vendor),U3=A8&&(/Mobile\/\w+/.test(Hi.userAgent)||Hi.maxTouchPoints>2);var Ee={mac:U3||/Mac/.test(Hi.platform),windows:/Win/.test(Hi.platform),linux:/Linux|X11/.test(Hi.platform),ie:Sb,ie_version:E8?V2.documentMode||6:W2?+W2[1]:H2?+H2[1]:0,gecko:z3,gecko_version:z3?+(/Firefox\/(\d+)/.exec(Hi.userAgent)||[0,0])[1]:0,chrome:!!Ex,chrome_version:Ex?+Ex[1]:0,ios:U3,android:/Android\b/.test(Hi.userAgent),safari:A8,webkit_version:ree?+(/\bAppleWebKit\/(\d+)/.exec(Hi.userAgent)||[0,0])[1]:0,tabSize:V2.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const see=256;class Cs extends Dt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof Cs)||this.length-(n-e)+i.length>see||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Cs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new hi(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return oee(this.dom,e,n)}}class la extends Dt{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(b8(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof la&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(C8(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new la(this.mark,n,o)}domAtPos(e){return N8(this,e)}coordsAt(e,n){return M8(this,e,n)}}function oee(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?Ee.chrome||Ee.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=qc(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return Ee.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?xb(l,o<0):l||null}class Ja extends Dt{static create(e,n,i){return new Ja(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=Ja.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Ja)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Ja&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return wt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):wt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?hi.before(this.dom):hi.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return xb(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Xd extends Dt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Xd&&e.side==this.side}split(){return new Xd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?hi.before(this.dom):hi.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return wt.empty}get isHidden(){return!0}}Cs.prototype.children=Ja.prototype.children=Xd.prototype.children=ZC;function N8(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new hi(n,0)}function P8(t,e,n){let i,{children:r}=t;n>0&&e instanceof la&&r.length&&(i=r[r.length-1])instanceof la&&i.mark.eq(e.mark)?P8(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function M8(t,e,n){let i=null,r=-1,s=null,o=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let p=c.children[d],g=f+p.length;g>=u&&(p.children.length?a(p,u-f):(!s||s.isHidden&&(n>0||lee(s,p)))&&(g>u||f==g&&p.getSide()>0)?(s=p,o=u-f):(f<u||f==g&&p.getSide()<0&&!p.isHidden)&&(i=p,r=u-f)),f=g}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):aee(t)}function aee(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=jp(e);return n[n.length-1]||null}function lee(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function G2(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const V3=Object.create(null);function Zv(t,e,n){if(t==e)return!0;t||(t=V3),e||(e=V3);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function K2(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function cee(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Vl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var _i=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(_i||(_i={}));class at extends Gc{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new xm(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Rl(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=R8(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new Rl(e,i,r,n,e.widget||null,!0)}static line(e){return new Sm(e)}static set(e,n=!1){return Nt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}at.none=Nt.empty;class xm extends at{constructor(e){let{start:n,end:i}=R8(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof xm&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Zv(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}xm.prototype.point=!1;class Sm extends at{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Sm&&this.spec.class==e.spec.class&&Zv(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Sm.prototype.mapMode=Wi.TrackBefore;Sm.prototype.point=!0;class Rl extends at{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?Wi.TrackBefore:Wi.TrackAfter:Wi.TrackDel}get type(){return this.startSide!=this.endSide?_i.WidgetRange:this.startSide<=0?_i.WidgetBefore:_i.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Rl&&uee(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Rl.prototype.point=!0;function R8(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function uee(t,e){return t==e||!!(t&&e&&t.compare(e))}function L0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class _n extends Dt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof _n))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),C8(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new _n;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Zv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){P8(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=G2(n,this.attrs||{})),i&&(this.attrs=G2({class:i},this.attrs||{}))}domAtPos(e){return N8(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(b8(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(K2(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Dt.get(r)instanceof la;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Dt.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Ee.ios||!this.children.some(s=>s instanceof Cs))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof Cs)||/[^ -~]/.test(i.text))return null;let r=jp(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=M8(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof _n&&this.children.length==0&&e.children.length==0&&Zv(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof _n)return s;if(o>n)break}r=o+s.breakAfter}return null}}class Qo extends Dt{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof Qo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?hi.before(this.dom):hi.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new Qo(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return ZC}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):wt.empty}domBoundsAround(){return null}become(e){return e instanceof Qo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof q2?null:xb(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class q2 extends Vl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class zh{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Qo&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new _n),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(kg(new Xd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Qo)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(kg(new Cs(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Rl){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof Rl)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Qo(i.widget||Jd.block,a,i));else{let l=Ja.create(i.widget||Jd.inline,a,a?0:i.startSide),c=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),u=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(d.append(kg(new Xd(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(kg(l,r),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new zh(e,n,i,s);return o.openEnd=Nt.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function kg(t,e){for(let n of e)t=new la(n,[t],t.length);return t}class Jd extends Vl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Jd.inline=new Jd("span");Jd.block=new Jd("div");var Kt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Kt||(Kt={}));const Yc=Kt.LTR,QC=Kt.RTL;function T8(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const dee=T8("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),fee=T8("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Y2=Object.create(null),Is=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Y2[e]=n,Y2[n]=-e}function O8(t){return t<=247?dee[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?fee[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const hee=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Za{get dir(){return this.level%2?QC:Yc}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function I8(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!I8(i.inner,r.inner))return!1}return!0}const jt=[];function pee(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let c=o,u=l,d=l;c<a;c++){let f=O8(t.charCodeAt(c));f==512?f=u:f==8&&d==4&&(f=16),jt[c]=f==4?2:f,f&7&&(d=f),u=f}for(let c=o,u=l,d=l;c<a;c++){let f=jt[c];if(f==128)c<a-1&&u==jt[c+1]&&u&24?f=jt[c]=u:jt[c]=256;else if(f==64){let p=c+1;for(;p<a&&jt[p]==64;)p++;let g=c&&u==8||p<n&&jt[p]==8?d==1?1:8:256;for(let m=c;m<p;m++)jt[m]=g;c=p-1}else f==8&&d==1&&(jt[c]=1);u=f,f&7&&(d=f)}}}function mee(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:n;for(let d=c,f,p,g;d<u;d++)if(p=Y2[f=t.charCodeAt(d)])if(p<0){for(let m=a-3;m>=0;m-=3)if(Is[m+1]==-p){let v=Is[m+2],y=v&2?r:v&4?v&1?s:r:0;y&&(jt[d]=jt[Is[m]]=y),a=m;break}}else{if(Is.length==189)break;Is[a++]=d,Is[a++]=f,Is[a++]=l}else if((g=jt[d])==2||g==1){let m=g==r;l=m?0:1;for(let v=a-3;v>=0;v-=3){let y=Is[v+2];if(y&2)break;if(m)Is[v+2]|=2;else{if(y&4)break;Is[v+2]|=4}}}}}function gee(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let c=jt[l];if(c==256){let u=l+1;for(;;)if(u==a){if(r==n.length)break;u=n[r++].to,a=r<n.length?n[r].from:e}else if(jt[u]==256)u++;else break;let d=s==1,f=(u<e?jt[u]:i)==1,p=d==f?d?1:2:i;for(let g=u,m=r,v=m?n[m-1].to:t;g>l;)g==v&&(g=n[--m].from,v=m?n[m-1].to:t),jt[--g]=p;l=u}else s=c,l++}}}function X2(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let m=jt[l];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c<s.length&&g==s[c].from){if(d)break e;let m=s[c];if(!u)for(let v=m.to,y=c+1;;){if(v==n)break e;if(y<s.length&&s[y].from==v)v=s[y++].to;else{if(jt[v]==a)break e;break}}if(c++,f)f.push(m);else{m.from>l&&o.push(new Za(l,m.from,p));let v=m.direction==Yc!=!(p%2);J2(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.to}g=m.to}else{if(g==n||(u?jt[g]!=a:jt[g]==a))break;g++}f?X2(t,l,g,i+1,r,f,o):l<g&&o.push(new Za(l,g,p)),l=g}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let m=jt[l-1];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c&&g==s[c-1].to){if(d)break e;let m=s[--c];if(!u)for(let v=m.from,y=c;;){if(v==e)break e;if(y&&s[y-1].to==v)v=s[--y].from;else{if(jt[v-1]==a)break e;break}}if(f)f.push(m);else{m.to<l&&o.push(new Za(m.to,l,p));let v=m.direction==Yc!=!(p%2);J2(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.from}g=m.from}else{if(g==e||(u?jt[g-1]!=a:jt[g-1]==a))break;g--}f?X2(t,g,l,i+1,r,f,o):g<l&&o.push(new Za(g,l,p)),l=g}}function J2(t,e,n,i,r,s,o){let a=e%2?2:1;pee(t,r,s,i,a),mee(t,r,s,i,a),gee(r,s,i,a),X2(t,r,s,e,n,i,o)}function vee(t,e,n){if(!t)return[new Za(0,0,e==QC?1:0)];if(e==Yc&&!n.length&&!hee.test(t))return j8(t.length);if(n.length)for(;t.length>jt.length;)jt[jt.length]=256;let i=[],r=e==Yc?0:1;return J2(t,r,r,n,0,t.length,i),i}function j8(t){return[new Za(0,t,0)]}let D8="";function yee(t,e,n,i,r){var s;let o=i.head-t.from,a=Za.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],c=l.side(r,n);if(o==c){let f=a+=r?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!r,n),c=l.side(r,n)}let u=Zn(t.text,o,l.forward(r,n));(u<l.from||u>l.to)&&(u=c),D8=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&u==c&&d.level+(r?0:1)<l.level?se.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):se.cursor(u+t.from,l.forward(r,n)?-1:1,l.level)}function bee(t,e,n){for(let i=e;i<n;i++){let r=O8(t.charCodeAt(i));if(r==1)return Yc;if(r==2||r==4)return QC}return Yc}const L8=Ne.define(),$8=Ne.define(),B8=Ne.define(),F8=Ne.define(),Z2=Ne.define(),z8=Ne.define(),U8=Ne.define(),eE=Ne.define(),tE=Ne.define(),V8=Ne.define({combine:t=>t.some(e=>e)}),H8=Ne.define({combine:t=>t.some(e=>e)}),W8=Ne.define();class md{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new md(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new md(se.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const _g=ot.define({map:(t,e)=>t.map(e)}),G8=ot.define();function gr(t,e,n){let i=t.facet(F8);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Yo=Ne.define({combine:t=>t.length?t[0]:!0});let wee=0;const Zu=Ne.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class ii{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Zu.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Zu.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new ii(wee++,e,i,r,a=>{let l=[];return o&&l.push(Dp.of(c=>{let u=c.plugin(a);return u?o(u):at.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return ii.define((i,r)=>new e(i,r),n)}}class Ax{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(gr(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){gr(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){gr(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const K8=Ne.define(),nE=Ne.define(),Dp=Ne.define(),q8=Ne.define(),iE=Ne.define(),Y8=Ne.define();function H3(t,e){let n=t.state.facet(Y8);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return Nt.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=r;for(let f=a.length-1;f>=0;f--,l--){let p=a[f].spec.bidiIsolate,g;if(p==null&&(p=bee(e.text,c,u)),l>0&&d.length&&(g=d[d.length-1]).to==c&&g.direction==p)g.to=u,d=g.inner;else{let m={from:c,to:u,direction:p,inner:[]};d.push(m),d=m.inner}}}}),r}const X8=Ne.define();function rE(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(X8)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const hh=Ne.define();class Yr{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Yr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],f=n[s+1],p=Math.max(a,d),g=Math.min(u,f);if(p<=g&&new Yr(p+c,g+c,p,g).addToSet(i),f>u)break;s+=2}if(!l)return i;new Yr(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class Qv{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Mn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Yr(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new Qv(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class W3 extends Dt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=at.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new _n],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Yr(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!Aee(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?See(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new Yr(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Ee.ie||Ee.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=Cee(o,a,e.changes);return i=Yr.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ee.chrome||Ee.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Qo&&o.widget instanceof q2&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,f,p,g,m;if(i&&i.range.fromB<d&&i.range.toB>u){let S=zh.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),_=zh.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);p=S.breakAtStart,g=S.openStart,m=_.openEnd;let E=this.compositionView(i);_.breakAtStart?E.breakAfter=1:_.content.length&&E.merge(E.length,E.length,_.content[0],!1,_.openStart,0)&&(E.breakAfter=_.content[0].breakAfter,_.content.shift()),S.content.length&&E.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),f=S.content.concat(E).concat(_.content)}else({content:f,breakAtStart:p,openStart:g,openEnd:m}=zh.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:y}=s.findPos(c,1),{i:w,off:x}=s.findPos(l,-1);_8(this,w,x,v,y,f,p,g,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(G8)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new Cs(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new la(r,[n],n.length);let i=new _n;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Dt.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&!(this.view.state.facet(Yo)||this.dom.tabIndex>-1)&&D0(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Ee.gecko&&a.empty&&!this.hasComposition&&xee(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new hi(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Fh(l.node,l.offset,u.anchorNode,u.anchorOffset)||!Fh(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{Ee.android&&Ee.chrome&&this.dom.contains(u.focusNode)&&Eee(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Ip(this.view.root);if(d)if(a.empty){if(Ee.gecko){let f=kee(l.node,l.offset);if(f&&f!=3){let p=(f==1?x8:S8)(l.node,l.offset);p&&(l=new hi(p.node,p.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new hi(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new hi(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Fh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Ip(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=_n.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);i.collapse(u.node,u.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=Dt.get(n.childNodes[r]);s instanceof _n&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=Dt.get(n.childNodes[r]);s instanceof _n&&(i=s.domAtPos(s.length))}return i?new hi(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=Dt.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof _n)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof _n&&!(i instanceof _n&&n>=0)))i=a,r=c;else if(i&&c==e&&l==e&&a instanceof Qo&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=c}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof _n))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof Cs))return null;let s=Zn(r.text,i);if(s==i)return null;let o=qc(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Kt.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],f=c+d.length;if(f>r)break;if(c>=i){let p=d.dom.getBoundingClientRect();if(n.push(p.height),o){let g=d.dom.lastChild,m=g?jp(g):[];if(m.length){let v=m[m.length-1],y=l?v.right-p.left:p.right-v.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Kt.RTL:Kt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof _n){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=jp(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new k8(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(at.replace({widget:new q2(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return at.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Dp).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(q8).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(Nt.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(W8))try{if(c(this.view,e.range,e))return!0}catch(u){gr(this.view.state,u,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=rE(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;QQ(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Kt.LTR)}}function xee(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function J8(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=x8(n.focusNode,n.focusOffset),r=S8(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=Dt.get(r.node);if(!a||a instanceof Cs&&a.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let l=Dt.get(i.node);!l||l instanceof Cs&&l.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function See(t,e,n){let i=J8(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new Yr(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=r.parentNode;;d=d.parentNode){let f=Dt.get(d);if(f instanceof la)u.push({node:d,deco:f.mark});else{if(f instanceof _n||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:r,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new xm({inclusive:!0,attributes:cee(d),tagName:d.tagName.toLowerCase()})});else return null}}}function kee(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let _ee=class{constructor(){this.changes=[]}compareRange(e,n){L0(e,n,this.changes)}comparePoint(e,n){L0(e,n,this.changes)}boundChange(e){L0(e,e,this.changes)}};function Cee(t,e,n){let i=new _ee;return Nt.compare(t,e,n,i),i.changes}function Eee(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function Aee(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function Nee(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return se.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=Zn(r.text,s,!1):a=Zn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let c=Zn(r.text,o,!1);if(i(r.text.slice(c,o))!=l)break;o=c}for(;a<r.length;){let c=Zn(r.text,a);if(i(r.text.slice(a,c))!=l)break;a=c}return se.range(o+r.from,a+r.from)}function Pee(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Mee(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Nx(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function G3(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function K3(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Q2(t,e,n){let i,r,s,o,a=!1,l,c,u,d;for(let g=t.firstChild;g;g=g.nextSibling){let m=jp(g);for(let v=0;v<m.length;v++){let y=m[v];r&&Nx(r,y)&&(y=G3(K3(y,r.bottom),r.top));let w=Pee(e,y),x=Mee(n,y);if(w==0&&x==0)return g.nodeType==3?q3(g,e,n):Q2(g,e,n);(!i||o>x||o==x&&s>w)&&(i=g,r=y,s=w,o=x,a=w?e<y.left?v>0:v<m.length-1:!0),w==0?n>y.bottom&&(!u||u.bottom<y.bottom)?(l=g,u=y):n<y.top&&(!d||d.top>y.top)&&(c=g,d=y):u&&Nx(u,y)?u=K3(u,y.bottom):d&&Nx(d,y)&&(d=G3(d,y.top))}}if(u&&u.bottom>=n?(i=l,r=u):d&&d.top<=n&&(i=c,r=d),!i)return{node:t,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return q3(i,f,n);if(a&&i.contentEditable!="false")return Q2(i,f,n);let p=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:p}}function q3(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=qc(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let f=e>=(u.left+u.right)/2,p=f;if((Ee.chrome||Ee.gecko)&&qc(t,a).getBoundingClientRect().left==u.right&&(p=!f),d<=0)return{node:t,offset:a+(p?1:0)};r=a+(p?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function Z8(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,f=d-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,_=!1;l=t.elementAtHeight(f),l.type!=_i.Text;)for(;f=i>0?l.bottom+S:l.top-S,!(f>=0&&f<=c);){if(_)return n?null:0;_=!0,i=-i}d=a+f;let p=l.from;if(p<t.viewport.from)return t.viewport.from==0?0:n?null:Y3(t,o,l,u,d);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Y3(t,o,l,u,d);let g=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:g,v=m.elementFromPoint(u,d);v&&!t.contentDOM.contains(v)&&(v=null),v||(u=Math.max(o.left+1,Math.min(o.right-1,u)),v=m.elementFromPoint(u,d),v&&!t.contentDOM.contains(v)&&(v=null));let y,w=-1;if(v&&((r=t.docView.nearest(v))===null||r===void 0?void 0:r.isEditable)!=!1){if(g.caretPositionFromPoint){let S=g.caretPositionFromPoint(u,d);S&&({offsetNode:y,offset:w}=S)}else if(g.caretRangeFromPoint){let S=g.caretRangeFromPoint(u,d);S&&({startContainer:y,startOffset:w}=S,(!t.contentDOM.contains(y)||Ee.safari&&Ree(y,w,u)||Ee.chrome&&Tee(y,w,u))&&(y=void 0))}y&&(w=Math.min(xo(y),w))}if(!y||!t.docView.dom.contains(y)){let S=_n.find(t.docView,p);if(!S)return f>l.top+l.height/2?l.to:l.from;({node:y,offset:w}=Q2(S.dom,u,d))}let x=t.docView.nearest(y);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=x.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(y,w)+x.posAtStart}function Y3(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+KQ(o,s,t.state.tabSize)}function Ree(t,e,n){let i,r=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let s=r.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return qc(t,i-1,i).getBoundingClientRect().right>n}function Tee(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():qc(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function ek(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let s of i.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!r||s.type==_i.Text&&(r.type!=s.type||(n<0?s.from<e:s.to>e)))&&(r=s)}}return r||i}return i}function Oee(t,e,n,i){let r=ek(t,e.head,e.assoc||-1),s=!i||r.type!=_i.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==Kt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return se.cursor(l,n?-1:1)}return se.cursor(n?r.to:r.from,n?-1:1)}function X3(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let c=yee(r,s,o,a,n),u=D8;if(!c){if(r.number==(n?t.state.doc.lines:1))return a;u=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),c=t.visualLineSide(r,!n)}if(l){if(!l(u))return a}else{if(!i)return c;l=i(u)}a=c}}function Iee(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Qn.Space&&(r=o),r==o}}function jee(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return se.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-p.from))),a=(s<0?p.top:p.bottom)+u}let d=l.left+o,f=i??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=a+(f+p)*s,m=Z8(t,{x:d,y:g},!1,s);if(g<l.top||g>l.bottom||(s<0?m<r:m>r)){let v=t.docView.coordsForChar(m),y=!v||g<v.top?-1:1;return se.cursor(m,y,void 0,o)}}}function $0(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function Px(t,e,n){let i=$0(t.state.facet(iE).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:se.cursor(i,i<n.from?1:-1)}const ph="￿";class Dee{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(mt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ph}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=Dt.get(r),l=Dt.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Jv(r))||Jv(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Dt.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Lee(e,i.node,i.offset)?n:0))}}function Lee(t,e,n){for(;;){if(!e||n<xo(e))return!1;if(e==t)return!0;n=Kc(e)+1,e=e.parentNode}}class J3{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class $ee{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:zee(e),l=new Dee(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Uee(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!U2(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!U2(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((Ee.ios||Ee.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),f=Math.max(l,c),p=u.from-d,g=u.to-f;(p==0||p==1||d==0)&&(g==0||g==-1||f==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=se.single(c,l)}}}function Q8(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,c=null;(s===8||Ee.android&&e.text.length<a-o)&&(l=r.to,c="end");let u=Fee(t.state.doc.sliceString(o,a,ph),e.text,l-o,c);u&&(Ee.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==ph+ph&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:wt.of(e.text.slice(u.from,u.toB).split(ph))})}else i&&(!t.hasFocus&&t.state.facet(Yo)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(Ee.mac||Ee.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=se.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:wt.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:Ee.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=se.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:wt.of([" "])}),n)return sE(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function sE(t,e,n,i=-1){if(Ee.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(Ee.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&pd(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&pd(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&pd(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=Bee(t,e,n));return t.state.facet(z8).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function Bee(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&J8(t,n.main.head);if(d){let g=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-g}}else u=t.state.doc.lineAt(s.head);let f=s.to-e.to,p=s.to-s.from;i=r.changeByRange(g=>{if(g.from==s.from&&g.to==s.to)return{changes:a,range:l||g.map(a)};let m=g.to-f,v=m-c.length;if(g.to-g.from!=p||t.state.sliceDoc(v,m)!=c||g.to>=u.from&&g.from<=u.to)return{range:g};let y=r.changes({from:v,to:m,insert:e.insert}),w=g.to-s.to;return{changes:y,range:l?se.range(Math.max(0,l.anchor+w),Math.max(0,l.head+w)):g.map(y)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function Fee(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function zee(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new J3(n,i)),(r!=n||s!=i)&&e.push(new J3(r,s))),e}function Uee(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?se.single(n+e,i+e):null}class Vee{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ee.safari&&e.contentDOM.addEventListener("input",()=>null),Ee.gecko&&ste(e.contentDOM.ownerDocument)}handleEvent(e){!Jee(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=Hee(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&t6.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ee.android&&Ee.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Ee.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=e6.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Wee.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,pd(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ee.safari&&!Ee.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Z3(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){gr(n.state,r)}}}function Hee(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec,s=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(Z3(i.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(Z3(i.value,l))}}for(let i in Es)n(i).handlers.push(Es[i]);for(let i in ts)n(i).observers.push(ts[i]);return e}const e6=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Wee="dthko",t6=[16,17,18,20,91,92,224,225],Cg=6;function Eg(t){return Math.max(0,t)*.7+8}function Gee(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Kee{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=eee(e.contentDOM),this.atoms=e.state.facet(iE).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(mt.allowMultipleSelections)&&qee(e,n),this.dragging=Xee(e,n)&&r6(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Gee(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=rE(this.view);e.clientX-l.left<=r+Cg?n=-Eg(r-e.clientX):e.clientX+l.right>=o-Cg&&(n=Eg(e.clientX-o)),e.clientY-l.top<=s+Cg?i=-Eg(s-e.clientY):e.clientY+l.bottom>=a-Cg&&(i=Eg(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=$0(this.atoms,r.from,0);o!=r.from&&(s=se.cursor(o,-1))}else{let o=$0(this.atoms,r.from,-1),a=$0(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=se.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?se.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function qee(t,e){let n=t.state.facet(L8);return n.length?n[0](e):Ee.mac?e.metaKey:e.ctrlKey}function Yee(t,e){let n=t.state.facet($8);return n.length?n[0](e):Ee.mac?!e.altKey:!e.ctrlKey}function Xee(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Ip(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Jee(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Dt.get(n))&&i.ignoreEvent(e))return!1;return!0}const Es=Object.create(null),ts=Object.create(null),n6=Ee.ie&&Ee.ie_version<15||Ee.ios&&Ee.webkit_version<604;function Zee(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),i6(t,n.value)},50)}function kb(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function i6(t,e){e=kb(t.state,eE,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(tk!=null&&n.selection.ranges.every(l=>l.empty)&&tk==s.toString()){let l=-1;i=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:se.cursor(c.from+d.length)}})}else o?i=n.changeByRange(l=>{let c=s.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:se.cursor(l.from+c.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}ts.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Es.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);ts.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};ts.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Es.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(B8))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=tte(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new Kee(t,e,n,i)),i&&t.observer.ignore(()=>{y8(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function Q3(t,e,n,i){if(i==1)return se.cursor(e,n);if(i==2)return Nee(t.state,e,n);{let r=_n.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,se.range(o,a)}}let eM=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function Qee(t,e,n,i){let r=_n.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&eM(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&eM(n,i,a)?1:o&&o.bottom>=i?-1:1}function tM(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Qee(t,n,e.clientX,e.clientY)}}const ete=Ee.ie&&Ee.ie_version<=11;let nM=null,iM=0,rM=0;function r6(t){if(!ete)return t.detail;let e=nM,n=rM;return nM=t,rM=Date.now(),iM=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(iM+1)%3:1}function tte(t,e){let n=tM(t,e),i=r6(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=tM(t,s),c,u=Q3(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=Q3(t,n.pos,n.bias,i),f=Math.min(d.from,u.from),p=Math.max(d.to,u.to);u=f<u.from?se.range(f,p):se.range(p,f)}return o?r.replaceRange(r.main.extend(u.from,u.to)):a&&i==1&&r.ranges.length>1&&(c=nte(r,l.pos))?c:a?r.addRange(u):se.create([u])}}}function nte(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return se.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Es.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=se.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",kb(t.state,tE,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Es.dragend=t=>(t.inputState.draggedContent=null,!1);function sM(t,e,n,i){if(n=kb(t.state,eE,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&Yee(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Es.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&sM(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return sM(t,e,i,!0),!0}return!1};Es.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=n6?null:e.clipboardData;return n?(i6(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(Zee(t),!1)};function ite(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function rte(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:kb(t,tE,e.join(t.lineBreak)),ranges:n,linewise:i}}let tk=null;Es.copy=Es.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=rte(t.state);if(!n&&!r)return!1;tk=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=n6?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(ite(t,n),!1)};const s6=ga.define();function o6(t,e){let n=[];for(let i of t.facet(U8)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:s6.of(!0)}):null}function a6(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=o6(t.state,e);n?t.dispatch(n):t.update([])}},10)}ts.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),a6(t)};ts.blur=t=>{t.observer.clearSelectionRange(),a6(t)};ts.compositionstart=ts.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};ts.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ee.chrome&&Ee.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};ts.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Es.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return sE(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let r;if(Ee.chrome&&Ee.android&&(r=e6.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Ee.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Ee.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>ts.compositionend(t,e),20),!1};const oM=new Set;function ste(t){oM.has(t)||(oM.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const aM=["pre-wrap","normal","pre-line","break-spaces"];let Zd=!1;function lM(){Zd=!1}class ote{constructor(e){this.lineWrapping=e,this.doc=wt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return aM.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=aM.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class ate{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class no{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?_i.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Rl?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new no(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var Ut=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Ut||(Ut={}));const B0=.001;class Ci{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>B0&&(Zd=!0),this.height=e)}replace(e,n,i){return Ci.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=r[a],f=s.lineAt(l,Ut.ByPosNoHeight,i.setDoc(n),0,0),p=f.to>=c?f:s.lineAt(c,Ut.ByPosNoHeight,i,0,0);for(d+=p.to-c,c=p.to;a>0&&f.from<=r[a-1].toA;)l=r[a-1].fromA,u=r[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,Ut.ByPosNoHeight,i,0,0));u+=f.from-l,l=f.from;let g=oE.build(i.setDoc(o),e,u,d);s=ey(s,s.replace(l,c,g))}return s.updateHeight(i,0)}static empty(){return new ur(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new lte(Ci.of(e.slice(0,n)),o,Ci.of(e.slice(i)))}}function ey(t,e){return t==e?t:(t.constructor!=e.constructor&&(Zd=!0),e)}Ci.prototype.size=1;class l6 extends Ci{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new no(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ur extends l6{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new no(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof ur||r instanceof Wn&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Wn?r=new ur(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Ci.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Wn extends Ci{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let c=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=n.doc.lineAt(c),d=a+u.length*l,f=Math.max(i,e-d/2);return new no(u.from,u.length,f,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:u,length:d}=n.doc.line(s+c);return new no(u,d,i+a*c,a,0)}}lineAt(e,n,i,r,s){if(n==Ut.ByHeight)return this.blockAt(e,i,r,s);if(n==Ut.ByPosNoHeight){let{from:p,to:g}=i.doc.lineAt(e);return new no(p,g-p,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),c=i.doc.lineAt(e),u=a+c.length*l,d=c.number-o,f=r+a*d+l*(c.from-s-d);return new no(c.from,c.length,Math.max(r,Math.min(f,r+this.height-u)),u,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,s);for(let u=e,d=r;u<=n;){let f=i.doc.lineAt(u);if(u==e){let g=f.number-a;d+=l*g+c*(e-s-g)}let p=l+c*f.length;o(new no(f.from,f.length,d,p,0)),d+=p,u=f.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Wn?i[i.length-1]=new Wn(s.length+r):i.push(null,new Wn(r-1))}if(e>0){let s=i[0];s instanceof Wn?i[0]=new Wn(e+s.length):i.unshift(new Wn(e-1),null)}return Ci.of(i)}decomposeLeft(e,n){n.push(new Wn(e-1),null)}decomposeRight(e,n){n.push(null,new Wn(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new Wn(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=B0&&(l=-2);let f=new ur(u,d);f.outdated=!1,o.push(f),a+=u+1}a<=s&&o.push(null,new Wn(s-a).updateHeight(e,a));let c=Ci.of(o);return(l<0||Math.abs(c.height-this.height)>=B0||Math.abs(l-this.heightMetrics(e,n).perLine)>=B0)&&(Zd=!0),ey(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class lte extends Ci{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==Ut.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==Ut.ByPosNoHeight?Ut.ByPosNoHeight:Ut.ByPos;return l?c.join(this.right.lineAt(a,u,i,o,a)):this.left.lineAt(a,u,i,r,s).join(c)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let c=this.lineAt(l,Ut.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&cM(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),cM(s,a)}return Ci.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Ci.of(this.break?[e,null,n]:[e,n]):(this.left=ey(this.left,e),this.right=ey(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function cM(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Wn&&(i=t[e+1])instanceof Wn&&t.splice(e-1,3,new Wn(n.length+1+i.length))}const cte=5;class oE{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof ur?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new ur(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new l6(o,r,i)):(o||s||r>=cte)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ur(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Wn(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ur)return e;let n=new ur(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof ur)&&!this.isCovered?this.nodes.push(new ur(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof ur&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new oE(i,e);return Nt.spans(n,i,r,s,0),s.finish(i)}}function ute(t,e,n){let i=new dte;return Nt.compare(t,e,n,i,0),i.changes}class dte{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&L0(e,n,this.changes,5)}}function fte(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(c==t.parentNode?r.innerHeight:l,f.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function hte(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function pte(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Mx{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return at.replace({widget:new mte(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class mte extends Vl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class uM{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=dM,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Kt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(nE).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new ote(n),this.stateDeco=e.facet(Dp).filter(i=>typeof i!="function"),this.heightMap=Ci.empty().applyChanges(this.stateDeco,wt.empty,this.heightOracle.setDoc(e.doc),[new Yr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=at.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Ag(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?dM:new aE(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(mh(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Dp).filter(u=>typeof u!="function");let r=e.changedRanges,s=Yr.extendWithRanges(r,ute(i,this.stateDeco,e?e.changes:Mn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);lM(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Zd)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(H8)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Kt.RTL:Kt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:S,scaleY:_}=v8(n,a);(S>.005&&Math.abs(this.scaleX-S)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=S,this.scaleY=_,c|=16,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=w8(e.scrollDOM);let g=(this.printing?pte:fte)(n,this.paddingTop),m=g.top-this.pixelViewport.top,v=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!hte(e.dom))return 0;let w=a.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let S=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(S)&&(o=!0),o||r.lineWrapping&&Math.abs(w-this.contentDOMWidth)>r.charWidth){let{lineHeight:_,charWidth:E,textHeight:C}=e.docView.measureTextSize();o=_>0&&r.refresh(s,_,E,C,w/E,S),o&&(e.docView.minWidth=0,c|=16)}m>0&&v>0?u=Math.max(m,v):m<0&&v<0&&(u=Math.min(m,v)),lM();for(let _ of this.viewports){let E=_.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?Ci.empty().applyChanges(this.stateDeco,wt.empty,this.heightOracle,[new Yr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new ate(_.from,E))}Zd&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Ag(r.lineAt(o-i*1e3,Ut.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,Ut.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(c,Ut.ByPos,s,0,0),f;n.y=="center"?f=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?f=d.top:f=d.bottom-u,l=new Ag(r.lineAt(f-1e3/2,Ut.ByHeight,s,0,0).from,r.lineAt(f+u+1e3/2,Ut.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Ag(this.heightMap.lineAt(i,Ut.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Ut.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Ut.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,Ut.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new Mx(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Kt.LTR&&!i)return[];let a=[],l=(u,d,f,p)=>{if(d-u<s)return;let g=this.state.selection.main,m=[g.from];g.empty||m.push(g.to);for(let y of m)if(y>u&&y<d){l(u,y-10,f,p),l(y+10,d,f,p);return}let v=vte(e,y=>y.from>=f.from&&y.to<=f.to&&Math.abs(y.from-u)<s&&Math.abs(y.to-d)<s&&!m.some(w=>y.from<w&&y.to>w));if(!v){if(d<f.to&&n&&i&&n.visibleRanges.some(x=>x.from<=d&&x.to>=d)){let x=n.moveToLineBoundary(se.cursor(d),!1,!0).head;x>u&&(d=x)}let y=this.gapSize(f,u,d,p),w=i||y<2e6?y:2e6;v=new Mx(u,d,y,w)}a.push(v)},c=u=>{if(u.length<o||u.type!=_i.Text)return;let d=gte(u.from,u.to,this.stateDeco);if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(i){let m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,y;if(f!=null){let w=Pg(d,f),x=((this.visibleBottom-this.visibleTop)/2+m)/u.height;v=w-x,y=w+x}else v=(this.visibleTop-u.top-m)/u.height,y=(this.visibleBottom-u.top+m)/u.height;p=Ng(d,v),g=Ng(d,y)}else{let m=d.total*this.heightOracle.charWidth,v=r*this.heightOracle.charWidth,y=0;if(m>2e6)for(let E of e)E.from>=u.from&&E.from<u.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=E.size-E.displaySize);let w=this.pixelViewport.left+y,x=this.pixelViewport.right+y,S,_;if(f!=null){let E=Pg(d,f),C=((x-w)/2+v)/m;S=E-C,_=E+C}else S=(w-v)/m,_=(x+v)/m;p=Ng(d,S),g=Ng(d,_)}p>u.from&&l(u.from,p,u,d),g<u.to&&l(g,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,i,r){let s=Pg(r,i)-Pg(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Mx.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=at.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];Nt.spans(n,this.viewport.from,this.viewport.to,{span(s,o){i.push({from:s,to:o})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let o=this.visibleRanges[s],a=i[s];(o.from!=a.from||o.to!=a.to)&&(r|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||mh(this.heightMap.lineAt(e,Ut.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||mh(this.heightMap.lineAt(this.scaler.fromDOM(e),Ut.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return mh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Ag=class{constructor(e,n){this.from=e,this.to=n}};function gte(t,e,n){let i=[],r=t,s=0;return Nt.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Ng({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function Pg(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function vte(t,e){for(let n of t)if(e(n))return n}const dM={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class aE{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let c=n.lineAt(a,Ut.ByPos,e,0,0).top,u=n.lineAt(l,Ut.ByPos,e,0,0).bottom;return r+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof aE?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function mh(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new no(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>mh(r,e)):t._content)}const Mg=Ne.define({combine:t=>t.join(" ")}),nk=Ne.define({combine:t=>t.indexOf(!0)>-1}),ik=Pl.newName(),c6=Pl.newName(),u6=Pl.newName(),d6={"&light":"."+c6,"&dark":"."+u6};function rk(t,e,n){return new Pl(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const yte=rk("."+ik,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},d6),bte={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Rx=Ee.ie&&Ee.ie_version<=11;class wte{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new tee,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(Ee.ie&&Ee.ie_version<=11||Ee.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Ee.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Ee.chrome&&Ee.chrome_version<126)&&(this.editContext=new Ste(e),e.state.facet(Yo)&&(e.contentDOM.editContext=this.editContext.editContext)),Rx&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Yo)?i.root.activeElement!=this.dom:!D0(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Ee.ie&&Ee.ie_version<=11||Ee.android&&Ee.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Fh(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Ip(e.root);if(!n)return!1;let i=Ee.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&xte(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=D0(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&iee(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,bte),Rx&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Rx&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&pd(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&D0(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new $ee(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=Q8(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=fM(n,e.previousSibling||e.target.previousSibling,-1),r=fM(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Yo)!=e.state.facet(Yo)&&(e.view.contentDOM.editContext=e.state.facet(Yo)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function fM(t,e,n){for(;e;){let i=Dt.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function hM(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return Fh(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function xte(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return hM(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?hM(t,n):null}class Ste{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:s,head:o}=r,a=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:wt.of(i.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=se.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));u.main.eq(r)||e.dispatch({selection:u,userEvent:"select"});return}if((Ee.mac||Ee.android)&&c.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:wt.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);sE(e,c,se.single(this.toEditorPos(i.selectionStart,u),this.toEditorPos(i.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(at.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:G8.of(at.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Ip(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(i)return;let u=c.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(c)){r=this.pendingContextChange=null,n+=u,this.to+=u;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Oe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||nee(e.parent)||document,this.viewState=new uM(e.state||mt.create(e)),e.scrollTo&&e.scrollTo.is(_g)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Zu).map(r=>new Ax(r));for(let r of this.plugins)r.update(this);this.observer=new wte(this),this.inputState=new Vee(this),this.inputState.ensureHandlers(this.plugins),this.docView=new W3(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof In?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(s6))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=o6(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(mt.phrases)!=this.state.facet(mt.phrases))return this.setState(s);r=Qv.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;d=new md(p.empty?p:se.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(_g)&&(d=p.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=ty.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(hh)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Mg)!=r.state.facet(Mg)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let f of this.state.facet(Z2))try{f(r)}catch(p){gr(this.state,p,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!Q8(this,u)&&c.force&&pd(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new uM(e),this.plugins=e.facet(Zu).map(i=>new Ax(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new W3(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Zu),i=e.state.facet(Zu);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new Ax(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){gr(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(w8(i))s=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(r);s=p.from,o=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(g){return gr(this.state,g),pM}}),d=Qv.create(this,this.state,[]),f=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d),f&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=pM)try{let g=c[p];g.write&&g.write(u[p],this)}catch(g){gr(this.state,g)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(g>1||g<-1){r=r+g,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(Z2))a(n)}get themeClasses(){return ik+" "+(this.state.facet(nk)?u6:c6)+" "+this.state.facet(Mg)}updateAttrs(){let e=mM(this,K8,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Yo)?"true":"false",class:"cm-content",style:`${Ee.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),mM(this,nE,n);let i=this.observer.ignore(()=>{let r=K2(this.contentDOM,this.contentAttrs,n),s=K2(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Oe.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(hh);let e=this.state.facet(Oe.cspNonce);Pl.mount(this.root,this.styleModules.concat(yte).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return Px(this,e,X3(this,e,n,i))}moveByGroup(e,n){return Px(this,e,X3(this,e,n,i=>Iee(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return se.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return Oee(this,e,n,i)}moveVertically(e,n,i){return Px(this,e,jee(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),Z8(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Za.find(s,e-r.from,-1,n)];return xb(i,o.dir==Kt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(V8)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>kte)return j8(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||I8(s.isolates,i=H3(this,e))))return s.order;i||(i=H3(this,e));let r=vee(e.text,n,i);return this.bidiCache.push(new ty(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ee.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{y8(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return _g.of(new md(typeof e=="number"?se.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return _g.of(new md(se.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ii.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ii.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=Pl.newName(),r=[Mg.of(i),hh.of(rk(`.${i}`,e))];return n&&n.dark&&r.push(nk.of(!0)),r}static baseTheme(e){return ym.lowest(hh.of(rk("."+ik,e,d6)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Dt.get(i)||Dt.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Oe.styleModule=hh;Oe.inputHandler=z8;Oe.clipboardInputFilter=eE;Oe.clipboardOutputFilter=tE;Oe.scrollHandler=W8;Oe.focusChangeEffect=U8;Oe.perLineTextDirection=V8;Oe.exceptionSink=F8;Oe.updateListener=Z2;Oe.editable=Yo;Oe.mouseSelectionStyle=B8;Oe.dragMovesSelection=$8;Oe.clickAddsSelectionRange=L8;Oe.decorations=Dp;Oe.outerDecorations=q8;Oe.atomicRanges=iE;Oe.bidiIsolatedRanges=Y8;Oe.scrollMargins=X8;Oe.darkTheme=nk;Oe.cspNonce=Ne.define({combine:t=>t.length?t[0]:""});Oe.contentAttributes=nE;Oe.editorAttributes=K8;Oe.lineWrapping=Oe.contentAttributes.of({class:"cm-lineWrapping"});Oe.announce=ot.define();const kte=4096,pM={};class ty{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Kt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new ty(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function mM(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&G2(o,n)}return n}const _te=Ee.mac?"mac":Ee.windows?"win":Ee.linux?"linux":"key";function Cte(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Rg(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Ete=ym.default(Oe.domEventHandlers({keydown(t,e){return p6(h6(e.state),t,e,"editor")}})),f6=Ne.define({enables:Ete}),gM=new WeakMap;function h6(t){let e=t.facet(f6),n=gM.get(e);return n||gM.set(e,n=Pte(e.reduce((i,r)=>i.concat(r),[]))),n}function Ate(t,e,n){return p6(h6(t.state),e,t,n)}let Ua=null;const Nte=4e3;function Pte(t,e=_te){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,f;let p=n[o]||(n[o]=Object.create(null)),g=a.split(/ (?!$)/).map(y=>Cte(y,e));for(let y=1;y<g.length;y++){let w=g.slice(0,y).join(" ");r(w,!0),p[w]||(p[w]={preventDefault:!0,stopPropagation:!1,run:[x=>{let S=Ua={view:x,prefix:w,scope:o};return setTimeout(()=>{Ua==S&&(Ua=null)},Nte),!0}]})}let m=g.join(" ");r(m,!1);let v=p[m]||(p[m]={preventDefault:!1,stopPropagation:!1,run:((f=(d=p._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&v.run.push(l),c&&(v.preventDefault=!0),u&&(v.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let f in u)u[f].run.push(p=>d(p,sk))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let sk=null;function p6(t,e,n,i){sk=e;let r=JQ(e),s=Br(r,0),o=qo(s)==r.length&&r!=" ",a="",l=!1,c=!1,u=!1;Ua&&Ua.view==n&&Ua.scope==i&&(a=Ua.prefix+" ",t6.indexOf(e.keyCode)<0&&(c=!0,Ua=null));let d=new Set,f=v=>{if(v){for(let y of v.run)if(!d.has(y)&&(d.add(y),y(n)))return v.stopPropagation&&(u=!0),!0;v.preventDefault&&(v.stopPropagation&&(u=!0),c=!0)}return!1},p=t[i],g,m;return p&&(f(p[a+Rg(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ee.windows&&e.ctrlKey&&e.altKey)&&(g=Ml[e.keyCode])&&g!=r?(f(p[a+Rg(g,e,!0)])||e.shiftKey&&(m=Op[e.keyCode])!=r&&m!=g&&f(p[a+Rg(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(p[a+Rg(r,e,!0)])&&(l=!0),!l&&f(p._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),sk=null,l}class km{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=m6(e);return[new km(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return Mte(e,n,i)}}function m6(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Kt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function vM(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function Mte(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==Kt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=m6(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),p=ek(t,i,1),g=ek(t,r,-1),m=p.type==_i.Text?p:null,v=g.type==_i.Text?g:null;if(m&&(t.lineWrapping||p.widgetLineBreaks)&&(m=vM(t,i,1,m)),v&&(t.lineWrapping||g.widgetLineBreaks)&&(v=vM(t,r,-1,v)),m&&v&&m.from==v.from&&m.to==v.to)return w(x(n.from,n.to,m));{let _=m?x(n.from,null,m):S(p,!1),E=v?x(null,n.to,v):S(g,!0),C=[];return(m||p).to<(v||g).from-(m&&v?1:0)||p.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<E.top?C.push(y(d,_.bottom,f,E.top)):_.bottom<E.top&&t.elementAtHeight((_.bottom+E.top)/2).type==_i.Text&&(_.bottom=E.top=(_.bottom+E.top)/2),w(_).concat(C).concat(w(E))}function y(_,E,C,N){return new km(e,_-l.left,E-l.top,C-_,N-E)}function w({top:_,bottom:E,horizontal:C}){let N=[];for(let R=0;R<C.length;R+=2)N.push(y(C[R],_,C[R+1],E));return N}function x(_,E,C){let N=1e9,R=-1e9,O=[];function D($,K,J,Q,V){let F=t.coordsAtPos($,$==C.to?-2:2),re=t.coordsAtPos(J,J==C.from?2:-2);!F||!re||(N=Math.min(F.top,re.top,N),R=Math.max(F.bottom,re.bottom,R),V==Kt.LTR?O.push(s&&K?d:F.left,s&&Q?f:re.right):O.push(!s&&Q?d:re.left,!s&&K?f:F.right))}let j=_??C.from,q=E??C.to;for(let $ of t.visibleRanges)if($.to>j&&$.from<q)for(let K=Math.max($.from,j),J=Math.min($.to,q);;){let Q=t.state.doc.lineAt(K);for(let V of t.bidiSpans(Q)){let F=V.from+Q.from,re=V.to+Q.from;if(F>=J)break;re>K&&D(Math.max(F,K),_==null&&F<=j,Math.min(re,J),E==null&&re>=q,V.dir)}if(K=Q.to+1,K>=J)break}return O.length==0&&D(j,_==null,q,E==null,t.textDirection),{top:N,bottom:R,horizontal:O}}function S(_,E){let C=a.top+(E?_.top:_.bottom);return{top:C,bottom:C,horizontal:[]}}}function Rte(t,e){return t.constructor==e.constructor&&t.eq(e)}class Tte{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(F0)!=e.state.facet(F0)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(F0);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!Rte(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const F0=Ne.define();function g6(t){return[ii.define(e=>new Tte(e,t)),F0.of(t)]}const Lp=Ne.define({combine(t){return Ul(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Ote(t={}){return[Lp.of(t),Ite,jte,Dte,H8.of(!0)]}function v6(t){return t.startState.facet(Lp)!=t.state.facet(Lp)}const Ite=g6({above:!0,markers(t){let{state:e}=t,n=e.facet(Lp),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:se.cursor(r.head,r.head>r.anchor?-1:1);for(let l of km.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=v6(t);return n&&yM(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){yM(e.state,t)},class:"cm-cursorLayer"});function yM(t,e){e.style.animationDuration=t.facet(Lp).cursorBlinkRate+"ms"}const jte=g6({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:km.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||v6(t)},class:"cm-selectionLayer"}),Dte=ym.highest(Oe.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function bM(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function Lte(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class $te{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,c,u)=>r(u,c,c+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,c,u)=>{let d=i(a,l,c);d&&u(c,c+a[0].length,d)};else if(i)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Nl,i=n.add.bind(n);for(let{from:r,to:s}of Lte(e,this.maxLength))bM(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let f=[],p,g=(m,v,y)=>f.push(y.range(m,v));if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<d-l.from;)this.addMatch(p,e,p.index+l.from,g);else bM(e.state.doc,this.regexp,u,d,(m,v)=>this.addMatch(v,e,m,g));n=n.update({filterFrom:u,filterTo:d,filter:(m,v)=>m<u||v>d,add:f})}}return n}}const ok=/x/.unicode!=null?"gu":"g",Bte=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,ok),Fte={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Tx=null;function zte(){var t;if(Tx==null&&typeof document<"u"&&document.body){let e=document.body.style;Tx=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Tx||!1}const z0=Ne.define({combine(t){let e=Ul(t,{render:null,specialChars:Bte,addSpecialChars:null});return(e.replaceTabs=!zte())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,ok)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,ok)),e}});function Ute(t={}){return[z0.of(t),Vte()]}let wM=null;function Vte(){return wM||(wM=ii.fromClass(class{constructor(t){this.view=t,this.decorations=at.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(z0)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new $te({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=Br(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=wm(o.text,a,i-o.from);return at.replace({widget:new Kte((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=at.replace({widget:new Gte(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(z0);t.startState.facet(z0)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Hte="•";function Wte(t){return t>=32?Hte:t==10?"␤":String.fromCharCode(9216+t)}class Gte extends Vl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=Wte(this.code),i=e.state.phrase("Control character")+" "+(Fte[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Kte extends Vl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function qte(){return Xte}const Yte=at.line({class:"cm-activeLine"}),Xte=ii.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(Yte.range(r.from)),e=r.from)}return at.set(n)}},{decorations:t=>t.decorations}),Bf="-10000px";class y6{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function Jte(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Ox=Ne.define({combine:t=>{var e,n,i;return{position:Ee.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Jte}}}),xM=new WeakMap,lE=ii.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Ox);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new y6(t,cE,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(Ox);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=Bf,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Ee.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Bf&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=rE(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Ox).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],f=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){u.style.top=Bf;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,m=f.right-f.left,v=(e=xM.get(c))!==null&&e!==void 0?e:f.bottom-f.top,y=c.offset||Qte,w=this.view.textDirection==Kt.LTR,x=f.width>i.right-i.left?w?i.left:i.right-f.width:w?Math.max(i.left,Math.min(d.left-(p?14:0)+y.x,i.right-m)):Math.min(Math.max(i.left,d.left-m+(p?14:0)-y.x),i.right-m),S=this.above[a];!l.strictSide&&(S?d.top-v-g-y.y<i.top:d.bottom+v+g+y.y>i.bottom)&&S==i.bottom-d.bottom>d.top-i.top&&(S=this.above[a]=!S);let _=(S?d.top-i.top:i.bottom-d.bottom)-g;if(_<v&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=Bf;continue}xM.set(c,v),u.style.height=(v=_)/s+"px"}else u.style.height&&(u.style.height="");let E=S?d.top-v-g-y.y:d.bottom+g+y.y,C=x+m;if(c.overlap!==!0)for(let N of o)N.left<C&&N.right>x&&N.top<E+v&&N.bottom>E&&(E=S?N.top-v-2-g:N.bottom+g+2);if(this.position=="absolute"?(u.style.top=(E-t.parent.top)/s+"px",SM(u,(x-t.parent.left)/r)):(u.style.top=E/s+"px",SM(u,x/r)),p){let N=d.left+(w?y.x:-y.x)-(x+14-7);p.style.left=N/r+"px"}c.overlap!==!0&&o.push({left:x,top:E,right:C,bottom:E+v}),u.classList.toggle("cm-tooltip-above",S),u.classList.toggle("cm-tooltip-below",!S),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Bf}},{eventObservers:{scroll(){this.maybeMeasure()}}});function SM(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const Zte=Oe.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Qte={x:0,y:0},cE=Ne.define({enables:[lE,Zte]}),ny=Ne.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class _b{static create(e){return new _b(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new y6(e,ny,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const ene=cE.compute([ny],t=>{let e=t.facet(ny);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:_b.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class tne{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof Ja)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),c=l&&l.dir==Kt.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>gr(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(lE),n=e?e.manager.tooltips.findIndex(i=>i.create==_b.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!nne(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!ine(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Tg=4;function nne(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=n-Tg&&e.clientX<=i+Tg&&e.clientY>=r-Tg&&e.clientY<=s+Tg}function ine(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function rne(t,e={}){let n=ot.define(),i=Pi.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,Wi.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(one)&&(r=[]);return r},provide:r=>ny.from(r)});return{active:i,extension:[i,ii.define(r=>new tne(r,t,i,n,e.hoverTime||300)),ene]}}function sne(t,e){let n=t.plugin(lE);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const one=ot.define(),kM=Ne.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function $p(t,e){let n=t.plugin(b6),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const b6=ii.fromClass(class{constructor(t){this.input=t.state.facet(Bp),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(kM);this.top=new Og(t,!0,e.topContainer),this.bottom=new Og(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(kM);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Og(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Og(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Bp);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),r.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Oe.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Og{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=_M(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=_M(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function _M(t){let e=t.nextSibling;return t.remove(),e}const Bp=Ne.define({enables:b6});class Tl extends Gc{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Tl.prototype.elementClass="";Tl.prototype.toDOM=void 0;Tl.prototype.mapMode=Wi.TrackBefore;Tl.prototype.startSide=Tl.prototype.endSide=-1;Tl.prototype.point=!0;const U0=Ne.define(),ane=Ne.define(),V0=Ne.define(),CM=Ne.define({combine:t=>t.some(e=>e)});function lne(t){return[cne]}const cne=ii.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(V0).map(e=>new AM(t,e)),this.fixed=!t.state.facet(CM);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(CM)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=Nt.iter(this.view.state.facet(U0),this.view.viewport.from),i=[],r=this.gutters.map(s=>new une(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==_i.Text&&o){ak(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==_i.Text){ak(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(V0),n=t.state.facet(V0),i=t.docChanged||t.heightChanged||t.viewportChanged||!Nt.eq(t.startState.facet(U0),t.state.facet(U0),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new AM(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Oe.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,r=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Kt.LTR?{left:i,right:r}:{right:i,left:r}})});function EM(t){return Array.isArray(t)?t:[t]}function ak(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class une{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Nt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new w6(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];ak(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(ane)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class AM{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=EM(n.markers(e)),n.initialSpacer&&(this.spacer=new w6(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=EM(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!Nt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class w6{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),dne(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(i+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function dne(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const fne=Ne.define(),hne=Ne.define(),Qu=Ne.define({combine(t){return Ul(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return i}})}});class Ix extends Tl{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function jx(t,e){return t.state.facet(Qu).formatNumber(e,t.state)}const pne=V0.compute([Qu],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(fne)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new Ix(jx(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(hne)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Qu)!=e.state.facet(Qu),initialSpacer(e){return new Ix(jx(e,NM(e.state.doc.lines)))},updateSpacer(e,n){let i=jx(n.view,NM(n.view.state.doc.lines));return i==e.number?e:new Ix(i)},domEventHandlers:t.facet(Qu).domEventHandlers,side:"before"}));function mne(t={}){return[Qu.of(t),lne(),pne]}function NM(t){let e=9;for(;e<t;)e=e*10+9;return e}const gne=new class extends Tl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},vne=U0.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(gne.range(r)))}return Nt.of(e)});function yne(){return vne}const x6=new bm;function bne(t){window.codemirror&&window.codemirror.dispatch({effects:x6.reconfigure(mt.readOnly.of(t))})}const S6=ot.define(),lk=ot.define(),wne=Pi.define({create(){return at.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(S6)&&(n=at.none,i.value!==null&&(n=n.update({add:[xne.range(i.value)]}))),i.is(lk)&&(n=at.none,i.value!==null&&(n=n.update({add:[Sne.range(i.value)]})));return n},provide:t=>Oe.decorations.from(t)}),xne=at.line({class:"!bg-gradient-to-r !from-mantis-500/8 !via-mantis-500/5 !to-transparent !border-l-2 !border-mantis-400/40 !shadow-sm"}),Sne=at.line({class:"cm-current-instruction"});function kne(t){window.codemirror&&window.codemirror.dispatch({effects:S6.of(null)})}function k6(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:lk.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:lk.of(e)})}}const iy=de(!1),_6=Ba.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||Ba,_ne=1,PM=5e3,Vs=new Map,Uh=[];function Cne(){let t=0;for(const e of Vs.keys())e>t&&(t=e);return t+1}function Ene(){let t=1/0;for(const e of Vs.keys())e<t&&(t=e);return t}function Qa(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??PM,s=Number.isFinite(r)?setTimeout(()=>Qa({type:"DISMISS_TOAST",toastId:n}),r):null;Vs.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Qa({type:"DISMISS_TOAST",toastId:n})}}}),Vs.size>_ne&&Qa({type:"DISMISS_TOAST",toastId:Ene()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=Vs.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??PM,o=Number.isFinite(s)?setTimeout(()=>Qa({type:"DISMISS_TOAST",toastId:n}),s):null;Vs.set(n,{...r,...i,timeout:o})}else Vs.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=Vs.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),Vs.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&Uh.length>0){const n=Array.from(Vs.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of Uh)i(n)}}function Fi(t){const e=Cne(),n=r=>Qa({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>Qa({type:"DISMISS_TOAST",toastId:e});return Qa({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function Ane(){const[t,e]=b.useState([]);return b.useEffect(()=>(Uh.push(e),()=>{const n=Uh.indexOf(e);n>-1&&Uh.splice(n,1)}),[]),{toastList:t,toast:Fi,dismiss:n=>Qa({type:"DISMISS_TOAST",toastId:n})}}var uE=Cm(),nt=t=>_m(t,uE),dE=Cm();nt.write=t=>_m(t,dE);var Cb=Cm();nt.onStart=t=>_m(t,Cb);var fE=Cm();nt.onFrame=t=>_m(t,fE);var hE=Cm();nt.onFinish=t=>_m(t,hE);var gd=[];nt.setTimeout=(t,e)=>{const n=nt.now()+e,i=()=>{const s=gd.findIndex(o=>o.cancel==i);~s&&gd.splice(s,1),tl-=~s?1:0},r={time:n,handler:t,cancel:i};return gd.splice(C6(n),0,r),tl+=1,E6(),r};var C6=t=>~(~gd.findIndex(e=>e.time>t)||~gd.length);nt.cancel=t=>{Cb.delete(t),fE.delete(t),hE.delete(t),uE.delete(t),dE.delete(t)};nt.sync=t=>{ck=!0,nt.batchedUpdates(t),ck=!1};nt.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,nt.onStart(n)}return i.handler=t,i.cancel=()=>{Cb.delete(n),e=null},i};var pE=typeof window<"u"?window.requestAnimationFrame:()=>{};nt.use=t=>pE=t;nt.now=typeof performance<"u"?()=>performance.now():Date.now;nt.batchedUpdates=t=>t();nt.catch=console.error;nt.frameLoop="always";nt.advance=()=>{nt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):N6()};var el=-1,tl=0,ck=!1;function _m(t,e){ck?(e.delete(t),t(0)):(e.add(t),E6())}function E6(){el<0&&(el=0,nt.frameLoop!=="demand"&&pE(A6))}function Nne(){el=-1}function A6(){~el&&(pE(A6),nt.batchedUpdates(N6))}function N6(){const t=el;el=nt.now();const e=C6(el);if(e&&(P6(gd.splice(0,e),n=>n.handler()),tl-=e),!tl){Nne();return}Cb.flush(),uE.flush(t?Math.min(64,el-t):16.667),fE.flush(),dE.flush(),hE.flush()}function Cm(){let t=new Set,e=t;return{add(n){tl+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return tl-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,tl-=e.size,P6(e,i=>i(n)&&t.add(i)),tl+=t.size,e=t)}}}function P6(t,e){t.forEach(n=>{try{e(n)}catch(i){nt.catch(i)}})}var Pne=Object.defineProperty,Mne=(t,e)=>{for(var n in e)Pne(t,n,{get:e[n],enumerable:!0})},As={};Mne(As,{assign:()=>Tne,colors:()=>gl,createStringInterpolator:()=>gE,skipAnimation:()=>R6,to:()=>M6,willAdvance:()=>vE});function uk(){}var Rne=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),fe={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Oo(t,e){if(fe.arr(t)){if(!fe.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var gt=(t,e)=>t.forEach(e);function So(t,e,n){if(fe.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var vr=t=>fe.und(t)?[]:fe.arr(t)?t:[t];function Vh(t,e){if(t.size){const n=Array.from(t);t.clear(),gt(n,e)}}var gh=(t,...e)=>Vh(t,n=>n(...e)),mE=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),gE,M6,gl=null,R6=!1,vE=uk,Tne=t=>{t.to&&(M6=t.to),t.now&&(nt.now=t.now),t.colors!==void 0&&(gl=t.colors),t.skipAnimation!=null&&(R6=t.skipAnimation),t.createStringInterpolator&&(gE=t.createStringInterpolator),t.requestAnimationFrame&&nt.use(t.requestAnimationFrame),t.batchedUpdates&&(nt.batchedUpdates=t.batchedUpdates),t.willAdvance&&(vE=t.willAdvance),t.frameLoop&&(nt.frameLoop=t.frameLoop)},Hh=new Set,zr=[],Dx=[],ry=0,Eb={get idle(){return!Hh.size&&!zr.length},start(t){ry>t.priority?(Hh.add(t),nt.onStart(One)):(T6(t),nt(dk))},advance:dk,sort(t){if(ry)nt.onFrame(()=>Eb.sort(t));else{const e=zr.indexOf(t);~e&&(zr.splice(e,1),O6(t))}},clear(){zr=[],Hh.clear()}};function One(){Hh.forEach(T6),Hh.clear(),nt(dk)}function T6(t){zr.includes(t)||O6(t)}function O6(t){zr.splice(Ine(zr,e=>e.priority>t.priority),0,t)}function dk(t){const e=Dx;for(let n=0;n<zr.length;n++){const i=zr[n];ry=i.priority,i.idle||(vE(i),i.advance(t),i.idle||e.push(i))}return ry=0,Dx=zr,Dx.length=0,zr=e,zr.length>0}function Ine(t,e){const n=t.findIndex(e);return n<0?t.length:n}var jne=(t,e,n)=>Math.min(Math.max(n,t),e),Dne={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},bs="[-+]?\\d*\\.?\\d+",sy=bs+"%";function Ab(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Lne=new RegExp("rgb"+Ab(bs,bs,bs)),$ne=new RegExp("rgba"+Ab(bs,bs,bs,bs)),Bne=new RegExp("hsl"+Ab(bs,sy,sy)),Fne=new RegExp("hsla"+Ab(bs,sy,sy,bs)),zne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Une=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Vne=/^#([0-9a-fA-F]{6})$/,Hne=/^#([0-9a-fA-F]{8})$/;function Wne(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Vne.exec(t))?parseInt(e[1]+"ff",16)>>>0:gl&&gl[t]!==void 0?gl[t]:(e=Lne.exec(t))?(gu(e[1])<<24|gu(e[2])<<16|gu(e[3])<<8|255)>>>0:(e=$ne.exec(t))?(gu(e[1])<<24|gu(e[2])<<16|gu(e[3])<<8|TM(e[4]))>>>0:(e=zne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Hne.exec(t))?parseInt(e[1],16)>>>0:(e=Une.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Bne.exec(t))?(MM(RM(e[1]),Ig(e[2]),Ig(e[3]))|255)>>>0:(e=Fne.exec(t))?(MM(RM(e[1]),Ig(e[2]),Ig(e[3]))|TM(e[4]))>>>0:null}function Lx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function MM(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Lx(r,i,t+1/3),o=Lx(r,i,t),a=Lx(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function gu(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function RM(t){return(parseFloat(t)%360+360)%360/360}function TM(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Ig(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function OM(t){let e=Wne(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Fp=(t,e,n)=>{if(fe.fun(t))return t;if(fe.arr(t))return Fp({range:t,output:e,extrapolate:n});if(fe.str(t.output[0]))return gE(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=Kne(c,s);return Gne(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function Gne(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function Kne(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var qne=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return jne(0,1,r/t)},oy=1.70158,jg=oy*1.525,IM=oy+1,jM=2*Math.PI/3,DM=2*Math.PI/4.5,Dg=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,I6={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>IM*t*t*t-oy*t*t,easeOutBack:t=>1+IM*Math.pow(t-1,3)+oy*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((jg+1)*2*t-jg)/2:(Math.pow(2*t-2,2)*((jg+1)*(t*2-2)+jg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*jM),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*jM)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*DM))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*DM)/2+1,easeInBounce:t=>1-Dg(1-t),easeOutBounce:Dg,easeInOutBounce:t=>t<.5?(1-Dg(1-2*t))/2:(1+Dg(2*t-1))/2,steps:qne},zp=Symbol.for("FluidValue.get"),Qd=Symbol.for("FluidValue.observers"),Fr=t=>!!(t&&t[zp]),zi=t=>t&&t[zp]?t[zp]():t,LM=t=>t[Qd]||null;function Yne(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Up(t,e){const n=t[Qd];n&&n.forEach(i=>{Yne(i,e)})}var j6=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Xne(this,t)}},Xne=(t,e)=>D6(t,zp,e);function hf(t,e){if(t[zp]){let n=t[Qd];n||D6(t,Qd,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Vp(t,e){const n=t[Qd];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Qd]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var D6=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),H0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Jne=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,$M=new RegExp(`(${H0.source})(%|[a-z]+)`,"i"),Zne=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Nb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,L6=t=>{const[e,n]=Qne(t);if(!e||mE())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&Nb.test(n))return L6(n);if(n)return n}return t},Qne=t=>{const e=Nb.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},$x,eie=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,$6=t=>{$x||($x=gl?new RegExp(`(${Object.keys(gl).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>zi(s).replace(Nb,L6).replace(Jne,OM).replace($x,OM)),n=e.map(s=>s.match(H0).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Fp({...t,output:s}));return s=>{var l;const o=!$M.test(e[0])&&((l=e.find(c=>$M.test(c)))==null?void 0:l.replace(H0,""));let a=0;return e[0].replace(H0,()=>`${r[a++](s)}${o||""}`).replace(Zne,eie)}},yE="react-spring: ",B6=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${yE}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},tie=B6(console.warn);function nie(){tie(`${yE}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var iie=B6(console.warn);function rie(){iie(`${yE}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Pb(t){return fe.str(t)&&(t[0]=="#"||/\d/.test(t)||!mE()&&Nb.test(t)||t in(gl||{}))}var bE=mE()?b.useEffect:b.useLayoutEffect,sie=()=>{const t=b.useRef(!1);return bE(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function F6(){const t=b.useState()[1],e=sie();return()=>{e.current&&t(Math.random())}}function oie(t,e){const[n]=b.useState(()=>({inputs:e,result:t()})),i=b.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&aie(e,s.inputs)||(s={inputs:e,result:t()}):s=n,b.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function aie(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var z6=t=>b.useEffect(t,lie),lie=[];function BM(t){const e=b.useRef();return b.useEffect(()=>{e.current=t}),e.current}var Hp=Symbol.for("Animated:node"),cie=t=>!!t&&t[Hp]===t,Ws=t=>t&&t[Hp],wE=(t,e)=>Rne(t,Hp,e),Mb=t=>t&&t[Hp]&&t[Hp].getPayload(),U6=class{constructor(){wE(this,this)}getPayload(){return this.payload||[]}},Em=class extends U6{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,fe.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Em(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return fe.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,fe.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Wp=class extends Em{constructor(t){super(0),this._string=null,this._toString=Fp({output:[t,t]})}static create(t){return new Wp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(fe.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Fp({output:[this.getValue(),t]})),this._value=0,super.reset()}},ay={dependencies:null},Rb=class extends U6{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return So(this.source,(n,i)=>{cie(n)?e[i]=n.getValue(t):Fr(n)?e[i]=zi(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&gt(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return So(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){ay.dependencies&&Fr(t)&&ay.dependencies.add(t);const e=Mb(t);e&&gt(e,n=>this.add(n))}},V6=class extends Rb{constructor(t){super(t)}static create(t){return new V6(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(uie)),!0)}};function uie(t){return(Pb(t)?Wp:Em).create(t)}function fk(t){const e=Ws(t);return e?e.constructor:fe.arr(t)?V6:Pb(t)?Wp:Em}var FM=(t,e)=>{const n=!fe.fun(t)||t.prototype&&t.prototype.isReactComponent;return b.forwardRef((i,r)=>{const s=b.useRef(null),o=n&&b.useCallback(g=>{s.current=hie(r,g)},[r]),[a,l]=fie(i,e),c=F6(),u=()=>{const g=s.current;if(n&&!g)return;(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&c()},d=new die(u,l),f=b.useRef();bE(()=>(f.current=d,gt(l,g=>hf(g,d)),()=>{f.current&&(gt(f.current.deps,g=>Vp(g,f.current)),nt.cancel(f.current.update))})),b.useEffect(u,[]),z6(()=>()=>{const g=f.current;gt(g.deps,m=>Vp(m,g))});const p=e.getComponentProps(a.getValue());return b.createElement(t,{...p,ref:o})})},die=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&nt.write(this.update)}};function fie(t,e){const n=new Set;return ay.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Rb(t),ay.dependencies=null,[t,n]}function hie(t,e){return t&&(fe.fun(t)?t(e):t.current=e),e}var zM=Symbol.for("AnimatedComponent"),pie=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new Rb(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=UM(o)||"Anonymous";return fe.str(o)?o=s[o]||(s[o]=FM(o,r)):o=o[zM]||(o[zM]=FM(o,r)),o.displayName=`Animated(${a})`,o};return So(t,(o,a)=>{fe.arr(t)&&(a=UM(o)),s[a]=s(o)}),{animated:s}},UM=t=>fe.str(t)?t:t&&fe.str(t.displayName)?t.displayName:fe.fun(t)&&t.name||null;function vc(t,...e){return fe.fun(t)?t(...e):t}var Wh=(t,e)=>t===!0||!!(e&&t&&(fe.fun(t)?t(e):vr(t).includes(e))),H6=(t,e)=>fe.obj(t)?e&&t[e]:t,W6=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,mie=t=>t,xE=(t,e=mie)=>{let n=gie;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);fe.und(s)||(i[r]=s)}return i},gie=["config","onProps","onStart","onChange","onPause","onResume","onRest"],vie={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function yie(t){const e={};let n=0;if(So(t,(i,r)=>{vie[r]||(e[r]=i,n++)}),n)return e}function G6(t){const e=yie(t);if(e){const n={to:e};return So(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Gp(t){return t=zi(t),fe.arr(t)?t.map(Gp):Pb(t)?As.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function bie(t){for(const e in t)return!0;return!1}function hk(t){return fe.fun(t)||fe.arr(t)&&fe.obj(t[0])}function wie(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function xie(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var Sie={default:{tension:170,friction:26}},pk={...Sie.default,mass:1,damping:1,easing:I6.linear,clamp:!1},kie=class{constructor(){this.velocity=0,Object.assign(this,pk)}};function _ie(t,e,n){n&&(n={...n},VM(n,e),e={...n,...e}),VM(t,e),Object.assign(t,e);for(const o in pk)t[o]==null&&(t[o]=pk[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return fe.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function VM(t,e){if(!fe.und(e.decay))t.duration=void 0;else{const n=!fe.und(e.tension)||!fe.und(e.friction);(n||!fe.und(e.frequency)||!fe.und(e.damping)||!fe.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var HM=[],Cie=class{constructor(){this.changed=!1,this.values=HM,this.toValues=null,this.fromValues=HM,this.config=new kie,this.immediate=!1}};function K6(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,u=Wh(n.cancel??(i==null?void 0:i.cancel),e);if(u)p();else{fe.und(n.pause)||(r.paused=Wh(n.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||Wh(g,e)),l=vc(n.delay||0,e),g?(r.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){r.resumeQueue.add(f),r.timeouts.delete(c),c.cancel(),l=c.time-nt.now()}function f(){l>0&&!As.skipAnimation?(r.delayed=!0,c=nt.setTimeout(p,l),r.pauseQueue.add(d),r.timeouts.add(c)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(c),t<=(r.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(g){a(g)}}})}var SE=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?vd(t.get()):e.every(n=>n.noop)?q6(t.get()):ms(t.get(),e.every(n=>n.finished)),q6=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),ms=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),vd=t=>({value:t,cancelled:!0,finished:!1});function Y6(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=xE(e,(v,y)=>y==="onRest"?void 0:v);let u,d;const f=new Promise((v,y)=>(u=v,d=y)),p=v=>{const y=r<=(n.cancelId||0)&&vd(i)||r!==n.asyncId&&ms(i,!1);if(y)throw v.result=y,d(v),v},g=(v,y)=>{const w=new WM,x=new GM;return(async()=>{if(As.skipAnimation)throw Kp(n),x.result=ms(i,!1),d(x),x;p(w);const S=fe.obj(v)?{...v}:{...y,to:v};S.parentId=r,So(c,(E,C)=>{fe.und(S[C])&&(S[C]=E)});const _=await i.start(S);return p(w),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),_})()};let m;if(As.skipAnimation)return Kp(n),ms(i,!1);try{let v;fe.arr(t)?v=(async y=>{for(const w of y)await g(w)})(t):v=Promise.resolve(t(g,i.stop.bind(i))),await Promise.all([v.then(u),f]),m=ms(i.get(),!0,!1)}catch(v){if(v instanceof WM)m=v.result;else if(v instanceof GM)m=v.result;else throw v}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return fe.fun(o)&&nt.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function Kp(t,e){Vh(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var WM=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},GM=class extends Error{constructor(){super("SkipAnimationSignal")}},mk=t=>t instanceof kE,Eie=1,kE=class extends j6{constructor(){super(...arguments),this.id=Eie++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Ws(this);return t&&t.getValue()}to(...t){return As.to(this,t)}interpolate(...t){return nie(),As.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Up(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||Eb.sort(this),Up(this,{type:"priority",parent:this,priority:t})}},Xc=Symbol.for("SpringPhase"),X6=1,gk=2,vk=4,Bx=t=>(t[Xc]&X6)>0,Ea=t=>(t[Xc]&gk)>0,Ff=t=>(t[Xc]&vk)>0,KM=(t,e)=>e?t[Xc]|=gk|X6:t[Xc]&=~gk,qM=(t,e)=>e?t[Xc]|=vk:t[Xc]&=~vk,Ge=class extends kE{constructor(t,e){if(super(),this.animation=new Cie,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!fe.und(t)||!fe.und(e)){const n=fe.obj(t)?{...t}:{...e,from:t};fe.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ea(this)||this._state.asyncTo)||Ff(this)}get goal(){return zi(this.animation.to)}get velocity(){const t=Ws(this);return t instanceof Em?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Bx(this)}get isAnimating(){return Ea(this)}get isPaused(){return Ff(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=Mb(i.to);!o&&Fr(i.to)&&(r=vr(zi(i.to))),i.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==Wp?1:o?o[u].lastPosition:r[u];let f=i.immediate,p=d;if(!f){if(p=c.lastPosition,s.tension<=0){c.done=!0;return}let g=c.elapsedTime+=t;const m=i.fromValues[u],v=c.v0!=null?c.v0:c.v0=fe.arr(s.velocity)?s.velocity[u]:s.velocity;let y;const w=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(fe.und(s.duration))if(s.decay){const x=s.decay===!0?.998:s.decay,S=Math.exp(-(1-x)*g);p=m+v/(1-x)*(1-S),f=Math.abs(c.lastPosition-p)<=w,y=v*S}else{y=c.lastVelocity==null?v:c.lastVelocity;const x=s.restVelocity||w/10,S=s.clamp?0:s.bounce,_=!fe.und(S),E=m==d?c.v0>0:m<d;let C,N=!1;const R=1,O=Math.ceil(t/R);for(let D=0;D<O&&(C=Math.abs(y)>x,!(!C&&(f=Math.abs(d-p)<=w,f)));++D){_&&(N=p==d||p>d==E,N&&(y=-y*S,p=d));const j=-s.tension*1e-6*(p-d),q=-s.friction*.001*y,$=(j+q)/s.mass;y=y+$*R,p=p+y*R}}else{let x=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,g=c.elapsedTime+=t)),x=(s.progress||0)+g/this._memoizedDuration,x=x>1?1:x<0?0:x,c.durationProgress=x),p=m+s.easing(x)*(d-m),y=(p-c.lastPosition)/t,f=x==1}c.lastVelocity=y,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(p,s.round)&&(n=!0)});const a=Ws(this),l=a.getValue();if(e){const c=zi(i.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return nt.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ea(this)){const{to:t,config:e}=this.animation;nt.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return fe.und(t)?(n=this.queue||[],this.queue=[]):n=[fe.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>SE(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Kp(this._state,t&&this._lastCallId),nt.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=fe.obj(n)?n[e]:n,(n==null||hk(n))&&(n=void 0),i=fe.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return Bx(this)||(t.reverse&&([n,i]=[i,n]),i=zi(i),fe.und(i)?Ws(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,xE(t,(o,a)=>/^on/.test(a)?H6(o,n):o)),XM(this,t,"onProps"),Uf(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return K6(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{Ff(this)||(qM(this,!0),gh(s.pauseQueue),Uf(this,"onPause",ms(this,zf(this,this.animation.to)),this))},resume:()=>{Ff(this)&&(qM(this,!1),Ea(this)&&this._resume(),gh(s.resumeQueue),Uf(this,"onResume",ms(this,zf(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=J6(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(vd(this));const i=!fe.und(t.to),r=!fe.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(vd(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;r&&!i&&(!e.default||fe.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!Oo(d,c);f&&(a.from=d),d=zi(d);const p=!Oo(u,l);p&&this._focus(u);const g=hk(e.to),{config:m}=a,{decay:v,velocity:y}=m;(i||r)&&(m.velocity=0),e.config&&!g&&_ie(m,vc(e.config,s),e.config!==o.config?vc(o.config,s):void 0);let w=Ws(this);if(!w||fe.und(u))return n(ms(this,!0));const x=fe.und(e.reset)?r&&!e.default:!fe.und(d)&&Wh(e.reset,s),S=x?d:this.get(),_=Gp(u),E=fe.num(_)||fe.arr(_)||Pb(_),C=!g&&(!E||Wh(o.immediate||e.immediate,s));if(p){const D=fk(u);if(D!==w.constructor)if(C)w=this._set(_);else throw Error(`Cannot animate between ${w.constructor.name} and ${D.name}, as the "to" prop suggests`)}const N=w.constructor;let R=Fr(u),O=!1;if(!R){const D=x||!Bx(this)&&f;(p||D)&&(O=Oo(Gp(S),_),R=!O),(!Oo(a.immediate,C)&&!C||!Oo(m.decay,v)||!Oo(m.velocity,y))&&(R=!0)}if(O&&Ea(this)&&(a.changed&&!x?R=!0:R||this._stop(l)),!g&&((R||Fr(l))&&(a.values=w.getPayload(),a.toValues=Fr(u)?null:N==Wp?[1]:vr(_)),a.immediate!=C&&(a.immediate=C,!C&&!x&&this._set(l)),R)){const{onRest:D}=a;gt(Nie,q=>XM(this,e,q));const j=ms(this,zf(this,l));gh(this._pendingCalls,j),this._pendingCalls.add(n),a.changed&&nt.batchedUpdates(()=>{var q;a.changed=!x,D==null||D(j,this),x?vc(o.onRest,j):(q=a.onStart)==null||q.call(a,j,this)})}x&&this._set(S),g?n(Y6(e.to,e,this._state,this)):R?this._start():Ea(this)&&!p?this._pendingCalls.add(n):n(q6(S))}_focus(t){const e=this.animation;t!==e.to&&(LM(this)&&this._detach(),e.to=t,LM(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Fr(e)&&(hf(e,this),mk(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Fr(t)&&Vp(t,this)}_set(t,e=!0){const n=zi(t);if(!fe.und(n)){const i=Ws(this);if(!i||!Oo(n,i.getValue())){const r=fk(n);!i||i.constructor!=r?wE(this,r.create(n)):i.setValue(n),i&&nt.batchedUpdates(()=>{this._onChange(n,e)})}}return Ws(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Uf(this,"onStart",ms(this,zf(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),vc(this.animation.onChange,t,this)),vc(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Ws(this).reset(zi(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Ea(this)||(KM(this,!0),Ff(this)||this._resume())}_resume(){As.skipAnimation?this.finish():Eb.start(this)}_stop(t,e){if(Ea(this)){KM(this,!1);const n=this.animation;gt(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Up(this,{type:"idle",parent:this});const i=e?vd(this.get()):ms(this.get(),zf(this,t??n.to));gh(this._pendingCalls,i),n.changed&&(n.changed=!1,Uf(this,"onRest",i,this))}}};function zf(t,e){const n=Gp(e),i=Gp(t.get());return Oo(i,n)}function J6(t,e=t.loop,n=t.to){const i=vc(e);if(i){const r=i!==!0&&G6(i),s=(r||t).reverse,o=!r||r.reset;return qp({...t,loop:e,default:!1,pause:void 0,to:!s||hk(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function qp(t){const{to:e,from:n}=t=G6(t),i=new Set;return fe.obj(e)&&YM(e,i),fe.obj(n)&&YM(n,i),t.keys=i.size?Array.from(i):null,t}function Aie(t){const e=qp(t);return fe.und(e.default)&&(e.default=xE(e)),e}function YM(t,e){So(t,(n,i)=>n!=null&&e.add(i))}var Nie=["onStart","onRest","onChange","onPause","onResume"];function XM(t,e,n){t.animation[n]=e[n]!==W6(e,n)?H6(e[n],t.key):void 0}function Uf(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var Pie=["onStart","onChange","onRest"],Mie=1,Rie=class{constructor(t,e){this.id=Mie++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];fe.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(qp(t)),this}start(t){let{queue:e}=this;return t?e=vr(t).map(qp):this.queue=[],this._flush?this._flush(this,e):(n$(this,e),yk(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;gt(vr(e),i=>n[i].stop(!!t))}else Kp(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(fe.und(t))this.start({pause:!0});else{const e=this.springs;gt(vr(t),n=>e[n].pause())}return this}resume(t){if(fe.und(t))this.start({pause:!1});else{const e=this.springs;gt(vr(t),n=>e[n].resume())}return this}each(t){So(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,Vh(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&Vh(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,Vh(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;nt.onFrame(this._onFrame)}};function yk(t,e){return Promise.all(e.map(n=>Z6(t,n))).then(n=>SE(t,n))}async function Z6(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=fe.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=fe.arr(r)||fe.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):gt(Pie,m=>{const v=e[m];if(fe.fun(v)){const y=t._events[m];e[m]=({finished:w,cancelled:x})=>{const S=y.get(v);S?(w||(S.finished=!1),x&&(S.cancelled=!0)):y.set(v,{value:null,finished:w||!1,cancelled:x||!1})},c&&(c[m]=e[m])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,gh(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const f=(i||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),p=e.cancel===!0||W6(e,"cancel")===!0;(u||p&&d.asyncId)&&f.push(K6(++t._lastAsyncId,{props:e,state:d,actions:{pause:uk,resume:uk,start(m,v){p?(Kp(d,t._lastAsyncId),v(vd(t))):(m.onRest=a,v(Y6(u,m,d,t)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const g=SE(t,await Promise.all(f));if(o&&g.finished&&!(n&&g.noop)){const m=J6(e,o,r);if(m)return n$(t,[m]),Z6(t,m,!0)}return l&&nt.batchedUpdates(()=>l(g,t,t.item)),g}function JM(t,e){const n={...t.springs};return e&&gt(vr(e),i=>{fe.und(i.keys)&&(i=qp(i)),fe.obj(i.to)||(i={...i,to:void 0}),t$(n,i,r=>e$(r))}),Q6(t,n),n}function Q6(t,e){So(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,hf(n,t))})}function e$(t,e){const n=new Ge;return n.key=t,e&&hf(n,e),n}function t$(t,e,n){e.keys&&gt(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function n$(t,e){gt(e,n=>{t$(t.springs,n,i=>e$(i,t))})}var Tb=({children:t,...e})=>{const n=b.useContext(ly),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=oie(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=ly;return b.createElement(s,{value:e},t)},ly=Tie(Tb,{});Tb.Provider=ly.Provider;Tb.Consumer=ly.Consumer;function Tie(t,e){return Object.assign(t,b.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var Oie=()=>{const t=[],e=function(i){rie();const r=[];return gt(t,(s,o)=>{if(fe.und(i))r.push(s.start());else{const a=n(i,s,o);a&&r.push(s.start(a))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return gt(t,i=>i.pause(...arguments)),this},e.resume=function(){return gt(t,i=>i.resume(...arguments)),this},e.set=function(i){gt(t,(r,s)=>{const o=fe.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return gt(t,(s,o)=>{if(fe.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return gt(t,i=>i.stop(...arguments)),this},e.update=function(i){return gt(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return fe.fun(i)?i(s,r):i};return e._getProps=n,e};function Iie(t,e,n){const i=fe.fun(e)&&e;i&&!n&&(n=[]);const r=b.useMemo(()=>i||arguments.length==3?Oie():void 0,[]),s=b.useRef(0),o=F6(),a=b.useMemo(()=>({ctrls:[],queue:[],flush(y,w){const x=JM(y,w);return s.current>0&&!a.queue.length&&!Object.keys(x).some(_=>!y.springs[_])?yk(y,w):new Promise(_=>{Q6(y,x),a.queue.push(()=>{_(yk(y,w))}),o()})}}),[]),l=b.useRef([...a.ctrls]),c=[],u=BM(t)||0;b.useMemo(()=>{gt(l.current.slice(t,u),y=>{wie(y,r),y.stop(!0)}),l.current.length=t,d(u,t)},[t]),b.useMemo(()=>{d(0,Math.min(u,t))},n);function d(y,w){for(let x=y;x<w;x++){const S=l.current[x]||(l.current[x]=new Rie(null,a.flush)),_=i?i(x,S):e[x];_&&(c[x]=Aie(_))}}const f=l.current.map((y,w)=>JM(y,c[w])),p=b.useContext(Tb),g=BM(p),m=p!==g&&bie(p);bE(()=>{s.current++,a.ctrls=l.current;const{queue:y}=a;y.length&&(a.queue=[],gt(y,w=>w())),gt(l.current,(w,x)=>{r==null||r.add(w),m&&w.start({default:p});const S=c[x];S&&(xie(w,S.ref),w.ref?w.queue.push(S):w.start(S))})}),z6(()=>()=>{gt(a.ctrls,y=>y.stop(!0))});const v=f.map(y=>({...y}));return r?[v,r]:v}function Ob(t,e){const n=fe.fun(t),[[i],r]=Iie(1,n?t:[t],n?[]:e);return n||arguments.length==2?[i,r]:i}var jie=class extends kE{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Fp(...e);const n=this._get(),i=fk(n);wE(this,i.create(n))}advance(t){const e=this._get(),n=this.get();Oo(e,n)||(Ws(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&ZM(this._active)&&Fx(this)}_get(){const t=fe.arr(this.source)?this.source.map(zi):vr(zi(this.source));return this.calc(...t)}_start(){this.idle&&!ZM(this._active)&&(this.idle=!1,gt(Mb(this),t=>{t.done=!1}),As.skipAnimation?(nt.batchedUpdates(()=>this.advance()),Fx(this)):Eb.start(this))}_attach(){let t=1;gt(vr(this.source),e=>{Fr(e)&&hf(e,this),mk(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){gt(vr(this.source),t=>{Fr(t)&&Vp(t,this)}),this._active.clear(),Fx(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=vr(this.source).reduce((e,n)=>Math.max(e,(mk(n)?n.priority:0)+1),0))}};function Die(t){return t.idle!==!1}function ZM(t){return!t.size||Array.from(t).every(Die)}function Fx(t){t.idle||(t.idle=!0,gt(Mb(t),e=>{e.done=!0}),Up(t,{type:"idle",parent:t}))}As.assign({createStringInterpolator:$6,to:(t,e)=>new jie(t,e)});var i$=/^--/;function Lie(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!i$.test(t)&&!(Gh.hasOwnProperty(t)&&Gh[t])?e+"px":(""+e).trim()}var QM={};function $ie(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...c}=e,u=Object.values(c),d=Object.keys(c).map(f=>n||t.hasAttribute(f)?f:QM[f]||(QM[f]=f.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));s!==void 0&&(t.textContent=s);for(const f in r)if(r.hasOwnProperty(f)){const p=Lie(f,r[f]);i$.test(f)?t.style.setProperty(f,p):t.style[f]=p}d.forEach((f,p)=>{t.setAttribute(f,u[p])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var Gh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bie=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),Fie=["Webkit","Ms","Moz","O"];Gh=Object.keys(Gh).reduce((t,e)=>(Fie.forEach(n=>t[Bie(n,e)]=t[e]),t),Gh);var zie=/^(matrix|translate|scale|rotate|skew)/,Uie=/^(translate)/,Vie=/^(rotate|skew)/,zx=(t,e)=>fe.num(t)&&t!==0?t+e:t,W0=(t,e)=>fe.arr(t)?t.every(n=>W0(n,e)):fe.num(t)?t===e:parseFloat(t)===e,Hie=class extends Rb{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>zx(a,"px")).join(",")})`,W0(o,0)])),So(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(zie.test(a)){if(delete i[a],fe.und(o))return;const l=Uie.test(a)?"px":Vie.test(a)?"deg":"";r.push(vr(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${zx(f,l)})`,W0(f,0)]:c=>[`${a}(${c.map(u=>zx(u,l)).join(",")})`,W0(c,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new Wie(r,s)),super(i)}},Wie=class extends j6{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return gt(this.inputs,(n,i)=>{const r=zi(n[0]),[s,o]=this.transforms[i](fe.arr(r)?r:n.map(zi));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&gt(this.inputs,e=>gt(e,n=>Fr(n)&&hf(n,this)))}observerRemoved(t){t==0&&gt(this.inputs,e=>gt(e,n=>Fr(n)&&Vp(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Up(this,t)}},Gie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];As.assign({batchedUpdates:zl.unstable_batchedUpdates,createStringInterpolator:$6,colors:Dne});var Kie=pie(Gie,{applyAnimatedValues:$ie,createAnimatedStyle:t=>new Hie(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),qe=Kie.animated;const tn={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},ze=(t=tn.stone[800])=>({backgroundColor:new Ge(t),opacity:new Ge(1)}),jn=()=>({strokeDashoffset:new Ge(1),opacity:new Ge(1)}),Lg=()=>({strokeDashoffset:new Ge(1),opacity:new Ge(1),path:new Ge("")}),cy={bus:{address:Lg(),data:Lg(),rd:Lg(),wr:Lg(),iom:jn(),mem:{stroke:new Ge(tn.red[500])},handshake:jn(),pic:jn(),pio:jn(),timer:jn(),intr:jn(),inta:jn(),int0:jn(),int1:jn(),int2:jn(),"switches->pio":jn(),"pio->leds":jn(),printer:{data:jn(),strobe:jn(),busy:jn()}},clock:{angle:new Ge(0)},controlMemory:{overlay:{opacity:new Ge(0)},container:{opacity:new Ge(0),scale:new Ge(.8)},currentInstruction:{glow:new Ge(0)},microop:{0:{opacity:new Ge(0),translateX:new Ge(-20)},1:{opacity:new Ge(0),translateX:new Ge(-20)},2:{opacity:new Ge(0),translateX:new Ge(-20)},3:{opacity:new Ge(0),translateX:new Ge(-20)},4:{opacity:new Ge(0),translateX:new Ge(-20)}}},sequencer:{overlay:{opacity:new Ge(0)},container:{opacity:new Ge(0),scale:new Ge(.8)}},cpu:{internalBus:{address:{strokeDashoffset:new Ge(1),opacity:new Ge(1),path:new Ge("")},data:{strokeDashoffset:new Ge(1),opacity:new Ge(1),path:new Ge("")}},alu:{operands:jn(),results:jn(),cog:{rot:new Ge(0)},operation:{backgroundColor:new Ge(tn.stone[800])},resultText:{opacity:new Ge(0)},leftText:{opacity:new Ge(0)},rightText:{opacity:new Ge(0)}},decoder:{path:jn(),progress:{progress:new Ge(0),opacity:new Ge(1)}},AX:ze(),BX:ze(),CX:ze(),DX:ze(),AL:ze(),BL:ze(),CL:ze(),DL:ze(),SP:ze(),"SP.l":ze(),"SP.h":ze(),IP:ze(),"IP.l":ze(),"IP.h":ze(),IR:ze(),ri:{...ze(),opacity:new Ge(0)},"ri.l":ze(),"ri.h":ze(),id:{...ze(),opacity:new Ge(0)},"id.l":ze(),"id.h":ze(),left:ze(),"left.l":ze(),"left.h":ze(),right:ze(),"right.l":ze(),"right.h":ze(),result:ze(),"result.l":ze(),"result.h":ze(),FLAGS:ze(),"FLAGS.l":ze(),"FLAGS.h":ze(),MAR:ze(),MBR:ze()},handshake:{DATA:ze(),STATE:ze()},memory:{"operating-cell":{color:new Ge(tn.white)}},pic:{IMR:ze(),IRR:ze(),ISR:ze(),INT0:ze(),INT1:ze(),INT2:ze(),INT3:ze(),INT4:ze(),INT5:ze(),INT6:ze(),INT7:ze()},pio:{PA:ze(),PB:ze(),CA:ze(),CB:ze()},printer:{printing:{progress:new Ge(0),opacity:new Ge(1)}},timer:{CONT:ze(),COMP:ze()}};function De(t){try{return EL(cy,t)}catch{const n=t.split(".");let i=cy;for(const r of n)if(r in i)i=i[r];else return console.warn(`Path not found: ${t}`),{backgroundColor:new Ge(tn.stone[800]),opacity:new Ge(1),stop(){},pause(){},resume(){},start:()=>Promise.resolve(),set(){},get:()=>tn.stone[800],isPaused:!1};return i}}function r$(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof Ge?e[n]=i.get():e[n]=r$(i)}return e}const qie=r$(cy);function s$(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof Ge?i.set(e[n]):s$(t[n],e[n])}}const Yie=()=>s$(cy,qie),Yp=new Set;async function je(t,e){const n=M.get(cn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=M.sub(cn,()=>{M.get(cn).type!=="paused"&&(o(),s())})}),await je(t,e);const i=Bt();if(!i.animations&&!e.forceMs)return null;const r={duration:e.forceMs?e.duration:i.animations?e.duration*i.executionUnit:1,easing:I6[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;try{const l=De(s);if(a===void 0)return l.set(o);{Yp.add(s);const c=await De(s).start({from:o,to:a,config:r});return Yp.delete(s),c}}catch(l){return console.warn(`Error animando la clave ${s}:`,l),null}}))}const o$=()=>Yp.forEach(t=>{try{const e=De(t);e&&typeof e.pause=="function"&&e.pause()}catch(e){console.warn(`Error pausing animation for key ${t}:`,e)}}),a$=()=>Yp.forEach(t=>{try{const e=De(t);e&&typeof e.resume=="function"&&e.resume()}catch(e){console.warn(`Error resuming animation for key ${t}:`,e)}});function _E(){Yp.forEach(t=>{try{const e=De(t);e&&typeof e.stop=="function"&&(e.stop(!0),e.isPaused&&typeof e.resume=="function"&&e.resume())}catch(e){console.warn(`Error stopping animation for key ${t}:`,e)}}),setTimeout(()=>Yie(),10)}const Xie={AX:tn.blue[500],BX:"#4F46E5",CX:"#3B82F6",DX:"#1E40AF",IP:tn.red[500],SP:"#DC2626",MAR:tn.blue[500],MBR:tn.blue[500],IR:tn.blue[500],FLAGS:"#F59E0B",result:"#10B981",id:"#06B6D4",ri:"#06B6D4",left:"#22C55E",right:"#16A34A"};function l$(t){const e=t.replace("cpu.","").split(".")[0];return Xie[e]||tn.stone[600]}async function Jt(t,e){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP||t==="cpu.right.l"||t==="cpu.left.l")return;const n=e||l$(t);await je({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutCubic"}),await je({key:`${t}.backgroundColor`,to:tn.stone[750]},{duration:3,easing:"easeInCubic"});return}catch(n){return console.warn(`No se pudo animar el registro ${t}:`,n),null}}async function Zt(t){try{return t==="cpu.right.l"||t==="cpu.left.l"?void 0:await je({key:`${t}.backgroundColor`,to:tn.stone[800]},{duration:2,easing:"easeInOutQuart"})}catch(e){return console.warn(`No se pudo desactivar el registro ${t}:`,e),null}}async function Xp(t){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP)return;const e=Bt(),n=l$(t);await je({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutQuart"});const i=e.animations?1e3:1;await new Promise(r=>setTimeout(r,i)),await je({key:`${t}.backgroundColor`,to:tn.stone[800]},{duration:2,easing:"easeInQuart"});return}catch(e){return console.warn(`No se pudo actualizar el registro ${t}:`,e),null}}async function ef(t){await Jt("cpu.MBR"),M.set(Zs,t),await Zt("cpu.MBR")}function bk(){setTimeout(()=>{try{const t=De("bus.rd.opacity");t&&t.set(0)}catch{}try{const t=De("bus.wr.opacity");t&&t.set(0)}catch{}},0)}function wk(){try{const t=De("bus.rd.opacity");t&&t.start({to:1})}catch{}}function xk(){try{const t=De("bus.rd.opacity");t&&t.start({to:0})}catch{}}function c$(){try{const t=De("bus.wr.opacity");t&&t.start({to:1})}catch{}}function u$(){try{const t=De("bus.wr.opacity");t&&t.start({to:0})}catch{}}function d$(){try{const t=De("cpu.alu.resultText.opacity");t&&t.start({to:1})}catch{}}function f$(){try{const t=De("cpu.alu.resultText.opacity");t&&t.start({to:0})}catch{}}function Sk(){setTimeout(()=>{try{const t=De("cpu.alu.resultText.opacity");t&&t.set(0)}catch{}},0)}function h$(){try{const t=De("cpu.alu.leftText.opacity");t&&t.start({to:1})}catch{}}function p$(){try{const t=De("cpu.alu.leftText.opacity");t&&t.start({to:0})}catch{}}function kk(){setTimeout(()=>{try{const t=De("cpu.alu.leftText.opacity");t&&t.set(0)}catch{}},0)}function m$(){try{const t=De("cpu.alu.rightText.opacity");t&&t.start({to:1})}catch{}}function g$(){try{const t=De("cpu.alu.rightText.opacity");t&&t.start({to:0})}catch{}}function _k(){setTimeout(()=>{try{const t=De("cpu.alu.rightText.opacity");t&&t.set(0)}catch{}},0)}async function Ei(t,e){return await je([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function Xn(t){return await je({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}const Jie=Object.freeze(Object.defineProperty({__proto__:null,activateRegister:Jt,anim:je,deactivateRegister:Zt,hideALULeftText:p$,hideALULeftTextOnInit:kk,hideALUResultText:f$,hideALUResultTextOnInit:Sk,hideALURightText:g$,hideALURightTextOnInit:_k,hideControlBusTextsOnInit:bk,hideReadControlText:xk,hideWriteControlText:u$,pauseAllAnimations:o$,populateDataBus:ef,resumeAllAnimations:a$,showALULeftText:h$,showALUResultText:d$,showALURightText:m$,showReadControlText:wk,showWriteControlText:c$,stopAllAnimations:_E,turnLineOff:Xn,turnLineOn:Ei,updateRegisterWithGlow:Xp},Symbol.toStringTag,{value:"Module"}));async function eR(t){switch(t.type){case"bus:io.selected":{await Promise.all([je({key:"bus.mem.stroke",to:tn.stone[700]},{duration:1,easing:"easeInSine"}),Ei(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Zc(t.error);return}case"bus:reset":{await Promise.all([je([{key:"bus.address.strokeDashoffset",to:1},{key:"bus.data.strokeDashoffset",to:1},{key:"bus.rd.strokeDashoffset",to:1},{key:"bus.wr.strokeDashoffset",to:1}],{duration:1,easing:"easeInSine"}),je({key:"bus.mem.stroke",to:tn.red[500]},{duration:1,easing:"easeOutSine"}),Xn("bus.iom"),Xn("bus.handshake"),Xn("bus.pio"),Xn("bus.pic"),Xn("bus.timer")]);return}default:return t}}async function Zie(t){switch(t.type){case"clock:tick":return;default:return t.type}}function ed(t,e,n){let i="";switch(t){case"SP":return"M 460 309 H 550 V 348 H 610";case"IP":return"M 460 349 H 610";case"ri":return e||n?i:"";default:throw new Error(`Invalid register ${t}`)}}function Qie({showSP:t,showri:e}){const{path:n,...i}=De("cpu.internalBus.address"),r=[t?"M 400 309 H 550 V 250":"","M 400 349 H 550 V 255",e?"M 420 388 H 550 V 300":"","M 400 349 H 610","M 610 349 H 650","M 390 115 H 250 V 205"];return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-30",children:[r.map((s,o)=>h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:s},o)),h.jsx(qe.path,{d:n,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i}),h.jsx(qe.path,{d:n,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}var CE={exports:{}},yd=typeof Reflect=="object"?Reflect:null,tR=yd&&typeof yd.apply=="function"?yd.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},G0;yd&&typeof yd.ownKeys=="function"?G0=yd.ownKeys:Object.getOwnPropertySymbols?G0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:G0=function(e){return Object.getOwnPropertyNames(e)};function ere(t){console&&console.warn&&console.warn(t)}var v$=Number.isNaN||function(e){return e!==e};function Tt(){Tt.init.call(this)}CE.exports=Tt;CE.exports.once=rre;Tt.EventEmitter=Tt;Tt.prototype._events=void 0;Tt.prototype._eventsCount=0;Tt.prototype._maxListeners=void 0;var nR=10;function Ib(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Tt,"defaultMaxListeners",{enumerable:!0,get:function(){return nR},set:function(t){if(typeof t!="number"||t<0||v$(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");nR=t}});Tt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Tt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||v$(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function y$(t){return t._maxListeners===void 0?Tt.defaultMaxListeners:t._maxListeners}Tt.prototype.getMaxListeners=function(){return y$(this)};Tt.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")tR(l,this,n);else for(var c=l.length,u=k$(l,c),i=0;i<c;++i)tR(u[i],this,n);return!0};function b$(t,e,n,i){var r,s,o;if(Ib(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=y$(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,ere(a)}return t}Tt.prototype.addListener=function(e,n){return b$(this,e,n,!1)};Tt.prototype.on=Tt.prototype.addListener;Tt.prototype.prependListener=function(e,n){return b$(this,e,n,!0)};function tre(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function w$(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=tre.bind(i);return r.listener=n,i.wrapFn=r,r}Tt.prototype.once=function(e,n){return Ib(n),this.on(e,w$(this,e,n)),this};Tt.prototype.prependOnceListener=function(e,n){return Ib(n),this.prependListener(e,w$(this,e,n)),this};Tt.prototype.removeListener=function(e,n){var i,r,s,o,a;if(Ib(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():nre(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Tt.prototype.off=Tt.prototype.removeListener;Tt.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function x$(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?ire(r):k$(r,r.length)}Tt.prototype.listeners=function(e){return x$(this,e,!0)};Tt.prototype.rawListeners=function(e){return x$(this,e,!1)};Tt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):S$.call(t,e)};Tt.prototype.listenerCount=S$;function S$(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Tt.prototype.eventNames=function(){return this._eventsCount>0?G0(this._events):[]};function k$(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function nre(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function ire(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function rre(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}_$(t,e,s,{once:!0}),e!=="error"&&sre(t,r,{once:!0})})}function sre(t,e,n){typeof t.on=="function"&&_$(t,"error",e,n)}function _$(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ore=CE.exports;function ko(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(ko.prototype[Symbol.iterator]=function(){return this});ko.of=function(){var t=arguments,e=t.length,n=0;return new ko(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};ko.empty=function(){var t=new ko(function(){return{done:!0}});return t};ko.fromSequence=function(t){var e=0,n=t.length;return new ko(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};ko.is=function(t){return t instanceof ko?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var jb=ko;const ns=iu(jb);var Db={};Db.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Db.SYMBOL_SUPPORT=typeof Symbol<"u";var are=jb,C$=Db,lre=C$.ARRAY_BUFFER_SUPPORT,cre=C$.SYMBOL_SUPPORT;function ure(t){return typeof t=="string"||Array.isArray(t)||lre&&ArrayBuffer.isView(t)?are.fromSequence(t):typeof t!="object"||t===null?null:cre&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var E$=function(e){var n=ure(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},dre=E$,fre=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=dre(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const A$=iu(fre);var hre=jb,pre=E$,mre=function(){var e=arguments,n=null,i=-1;return new hre(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=pre(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const ea=iu(mre);function gre(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let Rn=gre;typeof Object.assign=="function"&&(Rn=Object.assign);function Xr(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function Jn(t){return typeof t=="object"&&t!==null}function N$(t){let e;for(e in t)return!1;return!0}function Mr(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function os(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function iR(t){return!(!Jn(t)||t.attributes&&!Array.isArray(t.attributes))}function vre(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class EE extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class Se extends EE{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Se.prototype.constructor)}}class he extends EE{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,he.prototype.constructor)}}class He extends EE{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,He.prototype.constructor)}}function P$(t,e){this.key=t,this.attributes=e,this.clear()}P$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function M$(t,e){this.key=t,this.attributes=e,this.clear()}M$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function R$(t,e){this.key=t,this.attributes=e,this.clear()}R$.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function pf(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}pf.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};pf.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};pf.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};pf.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const T$=0,O$=1,yre=2,I$=3;function va(t,e,n,i,r,s,o){let a,l,c,u;if(i=""+i,n===T$){if(a=t._nodes.get(i),!a)throw new he(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,u=s}else if(n===I$){if(r=""+r,l=t._edges.get(r),!l)throw new he(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,f=l.target.key;if(i===d)a=l.target;else if(i===f)a=l.source;else throw new he(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${f}).`);c=s,u=o}else{if(l=t._edges.get(i),!l)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===O$?a=l.source:a=l.target,c=r,u=s}return[a,c,u]}function bre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=va(this,e,n,i,r,s);return o.attributes[a]}}function wre(t,e,n){t.prototype[e]=function(i,r){const[s]=va(this,e,n,i,r);return s.attributes}}function xre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=va(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function Sre(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=va(this,e,n,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function kre(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=va(this,e,n,i,r,s,o);if(typeof c!="function")throw new Se(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function _re(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=va(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function Cre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=va(this,e,n,i,r,s);if(!Jn(a))throw new Se(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Ere(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=va(this,e,n,i,r,s);if(!Jn(a))throw new Se(`Graph.${e}: provided attributes are not a plain object.`);return Rn(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function Are(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=va(this,e,n,i,r,s);if(typeof a!="function")throw new Se(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Nre=[{name:t=>`get${t}Attribute`,attacher:bre},{name:t=>`get${t}Attributes`,attacher:wre},{name:t=>`has${t}Attribute`,attacher:xre},{name:t=>`set${t}Attribute`,attacher:Sre},{name:t=>`update${t}Attribute`,attacher:kre},{name:t=>`remove${t}Attribute`,attacher:_re},{name:t=>`replace${t}Attributes`,attacher:Cre},{name:t=>`merge${t}Attributes`,attacher:Ere},{name:t=>`update${t}Attributes`,attacher:Are}];function Pre(t){Nre.forEach(function({name:e,attacher:n}){n(t,e("Node"),T$),n(t,e("Source"),O$),n(t,e("Target"),yre),n(t,e("Opposite"),I$)})}function Mre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Xr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function Rre(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=Xr(this,s,o,n),!r)throw new he(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function Tre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Xr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function Ore(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Xr(this,a,l,n),!o)throw new he(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Ire(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Xr(this,a,l,n),!o)throw new he(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new Se(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function jre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Xr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function Dre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Xr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Jn(r))throw new Se(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function Lre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Xr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Jn(r))throw new Se(`Graph.${e}: provided attributes are not a plain object.`);return Rn(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function $re(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new He(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new He(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Xr(this,o,a,n),!s)throw new he(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new He(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new he(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new Se(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Bre=[{name:t=>`get${t}Attribute`,attacher:Mre},{name:t=>`get${t}Attributes`,attacher:Rre},{name:t=>`has${t}Attribute`,attacher:Tre},{name:t=>`set${t}Attribute`,attacher:Ore},{name:t=>`update${t}Attribute`,attacher:Ire},{name:t=>`remove${t}Attribute`,attacher:jre},{name:t=>`replace${t}Attributes`,attacher:Dre},{name:t=>`merge${t}Attributes`,attacher:Lre},{name:t=>`update${t}Attributes`,attacher:$re}];function Fre(t){Bre.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const zre=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Ure(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function Vre(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function Ux(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new ns(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function Hre(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function Wre(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function Vx(t,e){let n=t[e];return n.next!==void 0?new ns(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):ns.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function Gre(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):A$(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function j$(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:u,attributes:d,source:f,target:p}=a;if(l=i(u,d,f.key,p.key,f.attributes,p.attributes,a.undirected),t&&l)return u}}function Kre(t,e){if(t.size===0)return ns.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new ns(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function AE(t,e,n,i,r,s){const o=e?Vre:Ure;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function qre(t,e,n,i){const r=[];return AE(!1,t,e,n,i,function(s){r.push(s)}),r}function Yre(t,e,n){let i=ns.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=ea(i,Ux(n.in))),e!=="in"&&typeof n.out<"u"&&(i=ea(i,Ux(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=ea(i,Ux(n.undirected))),i}function NE(t,e,n,i,r,s,o){const a=n?Wre:Hre;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function Xre(t,e,n,i,r){const s=[];return NE(!1,t,e,n,i,r,function(o){s.push(o)}),s}function Jre(t,e,n,i){let r=ns.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=ea(r,Vx(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=ea(r,Vx(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=ea(r,Vx(n.undirected,i))),r}function Zre(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return Gre(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new he(`Graph.${n}: could not find the "${s}" node in the graph.`);return qre(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new he(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new he(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return Xre(i,this.multi,r,a,o)}throw new Se(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Qre(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=c,j$(!1,this,i,d);if(arguments.length===2){c=""+c,d=u;const f=this._nodes.get(c);if(typeof f>"u")throw new he(`Graph.${s}: could not find the "${c}" node in the graph.`);return AE(!1,this.multi,i==="mixed"?this.type:i,r,f,d)}if(arguments.length===3){c=""+c,u=""+u;const f=this._nodes.get(c);if(!f)throw new he(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new he(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return NE(!1,i,this.multi,r,f,u,d)}throw new Se(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let f=0;i!=="directed"&&(f+=this.undirectedSize),i!=="undirected"&&(f+=this.directedSize),d=new Array(f);let p=0;c.push((g,m,v,y,w,x,S)=>{d[p++]=u(g,m,v,y,w,x,S)})}else d=[],c.push((f,p,g,m,v,y,w)=>{d.push(u(f,p,g,m,v,y,w))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((f,p,g,m,v,y,w)=>{u(f,p,g,m,v,y,w)&&d.push(f)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new Se(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new Se(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((p,g,m,v,y,w,x)=>{f=u(f,p,g,m,v,y,w,x)}),this[s].apply(this,c),f}}function ese(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return u=l,j$(!0,this,i,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new he(`Graph.${s}: could not find the "${l}" node in the graph.`);return AE(!0,this.multi,i==="mixed"?this.type:i,r,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new he(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new he(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return NE(!0,i,this.multi,r,d,c,u)}throw new Se(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,g,m,v,y)=>c(d,f,p,g,m,v,y)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,g,m,v,y)=>!c(d,f,p,g,m,v,y)),!this[s].apply(this,l)}}function tse(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return ns.empty();if(!arguments.length)return Kre(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new he(`Graph.${s}: could not find the "${o}" node in the graph.`);return Yre(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new he(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new he(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return Jre(i,r,l,a)}throw new Se(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function nse(t){zre.forEach(e=>{Zre(t,e),Qre(t,e),ese(t,e),tse(t,e)})}const ise=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Lb(){this.A=null,this.B=null}Lb.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Lb.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Vf(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=r(c.key,c.attributes);if(t&&u)return c.key}}function PE(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return Vf(t,null,i,i.undirected,r);if(typeof n=="string")return Vf(t,null,i,i[n],r)}const s=new Lb;let o;if(e!=="undirected"){if(n!=="out"){if(o=Vf(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=Vf(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=Vf(t,s,i,i.undirected,r),t&&o))return o}function rse(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return PE(!1,t,e,n,function(r){i.push(r)}),i}function Hf(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new ns(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function sse(t,e,n){if(t!=="mixed"){if(t==="undirected")return Hf(null,n,n.undirected);if(typeof e=="string")return Hf(null,n,n[e])}let i=ns.empty();const r=new Lb;return t!=="undirected"&&(e!=="out"&&(i=ea(i,Hf(r,n,n.in))),e!=="in"&&(i=ea(i,Hf(r,n,n.out)))),t!=="directed"&&(i=ea(i,Hf(r,n,n.undirected))),i}function ose(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new he(`Graph.${n}: could not find the "${s}" node in the graph.`);return rse(i==="mixed"?this.type:i,r,o)}}function ase(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new he(`Graph.${s}: could not find the "${c}" node in the graph.`);PE(!1,i==="mixed"?this.type:i,r,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(f,p)=>{d.push(u(f,p))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(f,p)=>{u(f,p)&&d.push(f)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new Se(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[s](c,(p,g)=>{f=u(f,p,g)}),f}}function lse(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new he(`Graph.${o}: could not find the "${c}" node in the graph.`);return PE(!0,i==="mixed"?this.type:i,r,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(f,p)=>!u(f,p))}}function cse(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return ns.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new he(`Graph.${s}: could not find the "${o}" node in the graph.`);return sse(i==="mixed"?this.type:i,r,a)}}function use(t){ise.forEach(e=>{ose(t,e),ase(t,e),lse(t,e),cse(t,e)})}function $g(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,u,d,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do f=d.target,p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do f=d.target,f.key!==c&&(f=d.source),p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!p&&r(l.key,null,l.attributes,null,null,null,null)}}function dse(t,e){const n={key:t};return N$(e.attributes)||(n.attributes=Rn({},e.attributes)),n}function fse(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return N$(n.attributes)||(i.attributes=Rn({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function hse(t){if(!Jn(t))throw new Se('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new Se("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Jn(t.attributes)||t.attributes===null))throw new Se("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function pse(t){if(!Jn(t))throw new Se('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new Se("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new Se("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Jn(t.attributes)||t.attributes===null))throw new Se("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new Se("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const mse=vre(),gse=new Set(["directed","undirected","mixed"]),rR=new Set(["domain","_events","_eventsCount","_maxListeners"]),vse=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],yse={allowSelfLoops:!0,multi:!1,type:"mixed"};function bse(t,e,n){if(n&&!Jn(n))throw new Se(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new He(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function sR(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function D$(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new He(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new He(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Jn(a))throw new Se(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new He(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new he(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new he(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new He(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new He(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new pf(i,r,l,c,a);t._edges.set(r,d);const f=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,u.key=r,t.emit("edgeAdded",u),r}function wse(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new He(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new He(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new Se(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Jn(a))throw new Se(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new He(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),f,p;if(!n&&(f=t._edges.get(r),f)){if((f.source.key!==s||f.target.key!==o)&&(!i||f.source.key!==o||f.target.key!==s))throw new He(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${f.source.key}", "${f.target.key}").`);p=f}if(!p&&!t.multi&&u&&(p=i?u.undirected[o]:u.out[o]),p){const w=[p.key,!1,!1,!1];if(l?!c:!a)return w;if(l){const x=p.attributes;p.attributes=c(x),t.emit("edgeAttributesUpdated",{type:"replace",key:p.key,attributes:p.attributes})}else Rn(p.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:p.key,attributes:p.attributes,data:a});return w}a=a||{},l&&c&&(a=c(a));const g={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new He(`Graph.${e}: the "${r}" edge already exists in the graph.`);let m=!1,v=!1;u||(u=sR(t,s,{}),m=!0,s===o&&(d=u,v=!0)),d||(d=sR(t,o,{}),v=!0),f=new pf(i,r,u,d,a),t._edges.set(r,f);const y=s===o;return i?(u.undirectedDegree++,d.undirectedDegree++,y&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,y&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),i?t._undirectedSize++:t._directedSize++,g.key=r,t.emit("edgeAdded",g),[r,!0,m,v]}function vu(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class Lt extends ore.EventEmitter{constructor(e){if(super(),e=Rn({},yse,e),typeof e.multi!="boolean")throw new Se(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!gse.has(e.type))throw new Se(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new Se(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?P$:e.type==="directed"?M$:R$;Mr(this,"NodeDataClass",n);const i="geid_"+mse()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};Mr(this,"_attributes",{}),Mr(this,"_nodes",new Map),Mr(this,"_edges",new Map),Mr(this,"_directedSize",0),Mr(this,"_undirectedSize",0),Mr(this,"_directedSelfLoopCount",0),Mr(this,"_undirectedSelfLoopCount",0),Mr(this,"_edgeKeyGenerator",s),Mr(this,"_options",e),rR.forEach(o=>Mr(this,o,this[o])),os(this,"order",()=>this._nodes.size),os(this,"size",()=>this._edges.size),os(this,"directedSize",()=>this._directedSize),os(this,"undirectedSize",()=>this._undirectedSize),os(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),os(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),os(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),os(this,"multi",this._options.multi),os(this,"type",this._options.type),os(this,"allowSelfLoops",this._options.allowSelfLoops),os(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new Se(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new Se(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new Se(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new He("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new he(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new he(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new He("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new he(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new he(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new He("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new he(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new he(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new he(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new he(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new he(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new he(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return bse(this,e,n).key}mergeNode(e,n){if(n&&!Jn(n))throw new Se(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(Rn(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new Se(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new he(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do vu(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do vu(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do vu(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=Xr(this,i,r,this.type),!n)throw new he(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new he(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return vu(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new He("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new He("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=Xr(this,e,n,"directed");if(!i)throw new he(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return vu(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new He("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new He("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=Xr(this,e,n,"undirected");if(!i)throw new he(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return vu(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new Se("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Jn(e))throw new Se("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Jn(e))throw new Se("Graph.mergeAttributes: provided attributes are not a plain object.");return Rn(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new Se("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new Se("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!iR(n))throw new Se("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new Se("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!iR(n))throw new Se("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new Se("Graph.forEachAdjacencyEntry: expecting a callback.");$g(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Se("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");$g(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new Se("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");$g(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Se("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");$g(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):A$(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new Se("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new Se("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new Se("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new Se("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new Se("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new Se("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new Se("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Se("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new ns(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=dse(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=fse(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof Lt)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,f,p,g)=>{n?g?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):g?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!Jn(e))throw new Se("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Jn(e.attributes))throw new Se("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new Se("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],hse(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new Se("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],pse(a);const{source:c,target:u,attributes:d,undirected:f=l}=a;let p;"key"in a?(p=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,p.call(this,a.key,c,u,d)):(p=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,p.call(this,c,u,d))}}return this}nullCopy(e){const n=new Lt(Rn({},this._options,e));return n.replaceAttributes(Rn({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=Rn({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new He(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new He("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new He("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,D$(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,Rn({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const f=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof i[f]>"u"?i[f]=0:i[f]++,l+=`${i[f]}. `):l+=`[${o}]: `,l+=f,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!rR.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,Mr(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(Lt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Lt.prototype.inspect);vse.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?D$:wse;t.generateKey?Lt.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:Lt.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});Pre(Lt);Fre(Lt);nse(Lt);use(Lt);class L$ extends Lt{constructor(e){const n=Rn({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new Se("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new Se('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class ME extends Lt{constructor(e){const n=Rn({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new Se("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new Se('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class $$ extends Lt{constructor(e){const n=Rn({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new Se("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class B$ extends Lt{constructor(e){const n=Rn({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new Se("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new Se('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class F$ extends Lt{constructor(e){const n=Rn({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new Se("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new Se('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function mf(t){t.from=function(e,n){const i=Rn({},e.options,n),r=new t(i);return r.import(e),r}}mf(Lt);mf(L$);mf(ME);mf($$);mf(B$);mf(F$);Lt.Graph=Lt;Lt.DirectedGraph=L$;Lt.UndirectedGraph=ME;Lt.MultiGraph=$$;Lt.MultiDirectedGraph=B$;Lt.MultiUndirectedGraph=F$;Lt.InvalidArgumentsGraphError=Se;Lt.NotFoundGraphError=he;Lt.UsageGraphError=He;var xse=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},z$=Db,Sse=z$.ARRAY_BUFFER_SUPPORT,kse=z$.SYMBOL_SUPPORT,_se=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||Sse&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(kse&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},U$=jb,Cse=_se;function En(){this.clear()}En.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};En.prototype.enqueue=function(t){return this.items.push(t),++this.size};En.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};En.prototype.peek=function(){if(this.size)return this.items[this.offset]};En.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};En.prototype.toArray=function(){return this.items.slice(this.offset)};En.prototype.values=function(){var t=this.items,e=this.offset;return new U$(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};En.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new U$(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(En.prototype[Symbol.iterator]=En.prototype.values);En.prototype.toString=function(){return this.toArray().join(",")};En.prototype.toJSON=function(){return this.toArray()};En.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:En,enumerable:!1}),t};typeof Symbol<"u"&&(En.prototype[Symbol.for("nodejs.util.inspect.custom")]=En.prototype.inspect);En.from=function(t){var e=new En;return Cse(t,function(n){e.enqueue(n)}),e};En.of=function(){return En.from(arguments)};var Ese=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},V$=xse,Ase=Ese;function Nse(t,e,n){if(!V$(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,f,p,g,m,v,y=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=r(u),g=0,v=d.length;g<v;g++)if(f=d[g],f in s||(a.push(f),s[f]=u),f in o){y=!0;break e}}else for(c=l,l=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=i(u),g=0,v=d.length;g<v;g++)if(f=d[g],f in o||(l.push(f),o[f]=u),f in s){y=!0;break e}if(!y)return null;for(var w=[];f;)w.unshift(f),f=s[f];for(f=o[w[w.length-1]];f;)w.push(f),f=o[f];return w.length?w:null}function H$(t,e,n){if(!V$(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!i.has(c)&&(i.add(c),Ase(u,e[t](c)),r[c]=s);s++,o=u}return r}H$.bind(null,"outboundNeighbors");H$.bind(null,"neighbors");var Pse=Nse;const H=new ME({allowSelfLoops:!1});H.addNode("MBR",{position:[594,249]});H.addNode("AL",{position:[455,45]});H.addNode("BL",{position:[455,85]});H.addNode("CL",{position:[455,125]});H.addNode("DL",{position:[455,165]});H.addNode("id",{position:[451,205]});H.addNode("SP",{position:[451,309]});H.addNode("IP",{position:[455,349]});H.addNode("ri",{position:[455,388]});H.addNode("MAR",{position:[682,349]});H.addNode("result",{position:[272,115]});H.addNode("NodoRegIn",{position:[390,115]});H.addNode("NodoRegOut",{position:[550,115]});H.addNode("FLAGS",{position:[250,225]});H.addNode("IR",{position:[250,275]});H.addNode("IR mbr join",{position:[250,250]});H.addNode("left",{position:[130,85]});H.addNode("right",{position:[125,145]});H.addNode("left end",{position:[220,85]});H.addNode("right end",{position:[220,145]});H.addNode("result start",{position:[280,115]});H.addNode("rmbr",{position:[250,390]});H.addNode("bleft1",{position:[550,16]});H.addNode("bleft2",{position:[90,16]});H.addNode("bleft3",{position:[90,85]});H.addNode("AL join",{position:[425,45]});H.addNode("BL join",{position:[425,85]});H.addNode("CL join",{position:[425,125]});H.addNode("DL join",{position:[425,165]});H.addNode("id join",{position:[250,205]});H.addNode("data mbr join",{position:[390,250]});H.addNode("SP join",{position:[390,309]});H.addNode("IP join",{position:[390,349]});H.addNode("ri join",{position:[390,388]});H.addNode("MAR join1",{position:[550,388]});H.addNode("MAR join2",{position:[550,349]});H.addNode("result mbr join",{position:[370,250]});H.addNode("FLAGS mbr join",{position:[155,250]});H.addNode("left join",{position:[30,85]});H.addNode("right join",{position:[90,145]});H.addNode("operands mbr join",{position:[90,250]});H.addNode("outr mbr join",{position:[550,250]});H.addNode("mbr reg join",{position:[390,250]});H.addNode("AL out",{position:[483,45]});H.addNode("BL out",{position:[483,85]});H.addNode("CL out",{position:[483,125]});H.addNode("DL out",{position:[483,165]});H.addNode("id out",{position:[441,205]});H.addNode("MBR out",{position:[626,249]});H.addNode("MBR out join",{position:[550,250]});H.addNode("SP out",{position:[510,309]});H.addNode("IP out",{position:[510,349]});H.addNode("IP out join",{position:[550,349]});H.addNode("ri out join",{position:[550,388]});H.addNode("SP out join",{position:[550,309]});H.addNode("AL out join",{position:[525,45]});H.addNode("BL out join",{position:[525,85]});H.addNode("CL out join",{position:[525,125]});H.addNode("DL out join",{position:[525,165]});H.addNode("id out join",{position:[521,205]});H.addUndirectedEdge("AL","AL out");H.addUndirectedEdge("BL","BL out");H.addUndirectedEdge("CL","CL out");H.addUndirectedEdge("DL","DL out");H.addUndirectedEdge("id","id out");H.addUndirectedEdge("IP","IP out");H.addUndirectedEdge("SP","SP out");H.addUndirectedEdge("AL out","AL out join");H.addUndirectedEdge("BL out","BL out join");H.addUndirectedEdge("CL out","CL out join");H.addUndirectedEdge("DL out","DL out join");H.addUndirectedEdge("id out","id out join");H.addUndirectedEdge("AL out join","NodoRegOut");H.addUndirectedEdge("BL out join","NodoRegOut");H.addUndirectedEdge("CL out join","NodoRegOut");H.addUndirectedEdge("DL out join","NodoRegOut");H.addUndirectedEdge("id out join","NodoRegOut");H.addUndirectedEdge("NodoRegOut","outr mbr join");H.addUndirectedEdge("NodoRegOut","bleft1");H.addUndirectedEdge("bleft1","bleft2");H.addUndirectedEdge("bleft2","bleft3");H.addUndirectedEdge("bleft3","left");H.addUndirectedEdge("left","left end");H.addUndirectedEdge("IP out join","outr mbr join");H.addUndirectedEdge("ri out join","outr mbr join");H.addUndirectedEdge("SP out join","outr mbr join");H.addUndirectedEdge("SP out join","MAR join2");H.addUndirectedEdge("outr mbr join","mbr reg join");H.addUndirectedEdge("MBR","outr mbr join");H.addUndirectedEdge("MBR","MBR out");H.addUndirectedEdge("MBR out","MBR out join");H.addUndirectedEdge("MBR out join","NodoRegOut");H.addUndirectedEdge("MBR out","outr mbr join");H.addUndirectedEdge("mbr reg join","NodoRegIn");H.addUndirectedEdge("NodoRegIn","AL join");H.addUndirectedEdge("NodoRegIn","BL join");H.addUndirectedEdge("NodoRegIn","CL join");H.addUndirectedEdge("NodoRegIn","DL join");H.addUndirectedEdge("NodoRegIn","id join");H.addUndirectedEdge("outr mbr join","operands mbr join");H.addUndirectedEdge("AL join","AL");H.addUndirectedEdge("BL join","BL");H.addUndirectedEdge("CL join","CL");H.addUndirectedEdge("DL join","DL");H.addUndirectedEdge("id join","id");H.addUndirectedEdge("id join","data mbr join");H.addUndirectedEdge("MBR","data mbr join");H.addUndirectedEdge("data mbr join","NodoRegIn");H.addUndirectedEdge("IP","IP join");H.addUndirectedEdge("SP","SP join");H.addUndirectedEdge("ri","ri join");H.addUndirectedEdge("MAR join1","ri");H.addUndirectedEdge("MAR join2","MAR join1");H.addUndirectedEdge("MAR","MAR join2");H.addUndirectedEdge("IP join","SP join");H.addUndirectedEdge("SP join","ri join");H.addUndirectedEdge("result start","result");H.addUndirectedEdge("result","NodoRegIn");H.addUndirectedEdge("FLAGS","FLAGS mbr join");H.addUndirectedEdge("FLAGS mbr join","data mbr join");H.addUndirectedEdge("IR","IR mbr join");H.addUndirectedEdge("IR mbr join","FLAGS mbr join");H.addUndirectedEdge("left","left join");H.addUndirectedEdge("right","right join");H.addUndirectedEdge("left join","right join");H.addUndirectedEdge("right join","operands mbr join");H.addUndirectedEdge("right","right end");H.addNode("NodoRegOutLeft",{position:[550,90]});H.addUndirectedEdge("MBR out join","NodoRegOutLeft");H.addUndirectedEdge("NodoRegOutLeft","bleft1");H.addNode("NodoRegOutRight",{position:[550,140]});H.addUndirectedEdge("MBR out join","NodoRegOutRight");H.addUndirectedEdge("NodoRegOutRight","outr mbr join");H.addNode("NodoRegOutToRight",{position:[540,115]});H.addUndirectedEdge("NodoRegOut","NodoRegOutToRight");H.addUndirectedEdge("NodoRegOutToRight","outr mbr join");H.addNode("outr mbr join left",{position:[560,250]});H.addNode("NodoRegOutToLeft",{position:[560,115]});H.addUndirectedEdge("outr mbr join left","NodoRegOutToLeft");H.addUndirectedEdge("NodoRegOutToLeft","NodoRegOut");function Mse(t,e,n){const r=(a=>a.replace(/\.(l|h)$/,""))(t);if(!H.hasNode(r))return console.warn(`Nodo origen '${r}' no existe en el grafo`),"";const s=gs(t,"left end",e,n,{separateMBRPaths:!0,direction:"left"}),o=gs(t,"right end",e,n,{separateMBRPaths:!0,direction:"right"});return s&&o?`${s} ${o}`:s||o||""}function gs(t,e,n,i,r){console.log("🔍 generateDataPath llamado con:",{from:t,to:e,instruction:n,mode:i,options:r});const s=f=>f.replace(/\.(l|h)$/,""),o=s(t),a=s(e),l=["AL","BL","CL","DL","id","SP","IP","ri","MAR","MBR","left","right","left end","right end"];let c=[];if(console.log("🔍 Evaluando condición ri → MAR:",{normalizedFrom:o,normalizedTo:a,mode:i,condition:o==="ri"&&a==="MAR"&&i==="mem<-imd"}),o==="ri"&&a==="MAR"&&i==="mem<-imd")return console.log("🎯 Usando ruta especial ri → MAR:","M 455 388 H 550 V 348 H 610"),"M 455 388 H 550 V 348 H 610";if(!H.hasNode(o))return console.warn(`Nodo origen '${o}' no existe en el grafo`),"";if(!H.hasNode(a))return console.warn(`Nodo destino '${a}' no existe en el grafo`),"";if(o==="MAR"||a==="MAR")return"";if(r!=null&&r.separateMBRPaths&&t==="MBR"&&(e==="left"||e==="right"))e==="left"?c=[o,`${o} out`,`${o} out join`,"outr mbr join left","NodoRegOutToLeft","NodoRegOut","bleft1","bleft2","bleft3","left","left end"]:e==="right"&&(c=[o,`${o} out`,`${o} out join`,"outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"]);else if(a==="left")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","bleft1","bleft2","bleft3","left","left end"];else if(a==="right")if(o==="MBR"){const f="MBR_down300";H.hasNode(f)||(H.addNode(f,{position:[620,300]}),H.addUndirectedEdge("MBR",f));const p="MBR_right125_300";H.hasNode(p)||(H.addNode(p,{position:[125,300]}),H.addUndirectedEdge(f,p)),c=["MBR",f,p,"right","right end"]}else c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"];else if(o==="BL"&&a==="ri")c=["BL","BL out","BL out join","NodoRegOut","outr mbr join","MAR join2","MAR"];else if(l.includes(o)&&l.includes(a))["SP","IP","ri"].includes(a)?c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegDir",`${a} join`,a]:c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegIn",`${a} join`,a];else if(o==="MBR"&&a==="id")console.log("🎯 Caso específico MBR → id detectado"),c=["MBR","MBR out","outr mbr join","mbr reg join","NodoRegIn","id join","id"],console.log("🎯 Path definido para MBR → id:",c);else if(l.includes(o)&&a==="MBR")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","MBR"];else if(o==="MBR"&&a==="ri"){if(["JMP","JC","JZ"].includes(n??""))c=["MBR","mbr reg join","IP join","IP"];else if((n==="MOV"||n==="INT")&&i==="mem<-imd")c=["MBR","mbr reg join","ri join","ri"];else if(i==="mem<-imd"&&(n==="ADD"||n==="SUB"))c=["MBR","mbr reg join","ri join","ri"];else return"M 594 249 H 550 V 348 H 610";const f=H.getNodeAttribute(c[0],"position");let p=`M ${f[0]} ${f[1]}`;for(let g=1;g<c.length;g++){const[m,v]=H.getNodeAttribute(c[g],"position");p+=` L ${m} ${v}`}return p}else if(o==="MBR"&&a==="IR"){const f=H.getNodeAttribute("MBR","position"),p=H.getNodeAttribute("IR","position");return`M ${f[0]} ${f[1]} L ${p[0]} ${f[1]} L ${p[0]} ${p[1]}`}else try{c=Pse(H,o,a)||[]}catch(f){return console.warn(`Error calculando ruta de ${o} a ${a}:`,f),""}if(o==="MBR"&&a==="IP"&&["JMP","JZ","JC"].includes(n??"")){const f=H.getNodeAttribute("MBR","position"),p=H.getNodeAttribute("mbr reg join","position"),g=H.getNodeAttribute("IP","position");return`M ${f[0]} ${f[1]} L ${p[0]} ${p[1]} L ${p[0]} ${g[1]} L ${g[0]} ${g[1]}`}if(o==="ri"&&a==="IP")return"M 455 388 H 550 V 349 H 455";if(o==="ri"&&a==="IP"&&(c=["MBR","mbr reg join","NodoRegIn","IP join","IP"]),o==="ri"&&a==="IP"&&n==="CALL"&&(c=["ri","ri out join","NodoRegOut","outr mbr join","mbr reg join","NodoRegIn","IP join","IP"]),o==="MBR"&&a==="ri"&&["JMP","JZ","JC"].includes(n??""))return"";if(o==="MBR"&&a==="ri"&&n==="CALL"&&(c=["MBR","mbr reg join","NodoRegIn","ri join","ri"]),o==="IP"&&a==="MBR"&&(n==="INT"||n==="CALL"))return"M 510 349 H 550 V 250 H 620";if(c.length===0)return console.warn(`No se encontró ruta de ${o} a ${a}`),"";const u=H.getNodeAttribute(c[0],"position");let d=`M ${u[0]} ${u[1]}`;for(let f=1;f<c.length;f++){const[p,g]=H.getNodeAttribute(c[f],"position");d+=` L ${p} ${g}`}return console.log("🎯 generateDataPath retornando:",d),o==="MBR"&&a==="id"&&console.log("🎯 Path SVG generado para MBR → id:",d),d}function Rse({showSP:t,showid:e,showri:n}){const{path:i,...r}=De("cpu.internalBus.data"),{path:s,...o}=De("cpu.internalBus.address"),a=st(Hn),l=(a==null?void 0:a.phase)==="writeback",c=()=>l?"stroke-purple-400 drop-shadow-[0_0_8px_rgba(168,85,247,0.6)]":"stroke-mantis-400 drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",u=()=>l?"stroke-purple-300":"stroke-mantis-300";return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-20",children:[h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 630","M 90 145 H 90","M 272 115 H 390","M 250 225 V 250","M 250 145 v 46","M 250 250 V 272","M 250 300 V 320","M 451 349 H 390 V 250",t?"M 451 309 H 390":"M 451 309",n?"M 455 388 H 390 V 300":"","M 455 45 H 425","M 455 85 H 425","M 455 125 H 425","M 455 165 H 425",e?"M 455 205 H 425":"",n?"M 550 388 H 480":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220","M 390 250 V 115","M 390 115 L 425 45 L 455 45","M 390 115 L 425 85 L 455 85","M 390 115 L 425 125 L 455 125","M 390 115 L 425 165 L 455 165",e?"M 390 115 L 425 205 L 451 205":"","M 550 115 L 525 45 L 445 45","M 550 115 L 525 85 L 445 85","M 550 115 L 525 125 L 445 125","M 550 115 L 525 165 L 445 165",e?"M 550 115 L 521 205 L 441 205":""].join(" ")}),h.jsx("circle",{cx:390,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:250,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:390,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:348,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),n&&h.jsx("circle",{cx:390,cy:349,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx(qe.path,{d:i,className:`fill-none stroke-[3px] ${c()}`,strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),h.jsx(qe.path,{d:i,className:`fill-none stroke-1 opacity-50 ${u()}`,strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),h.jsx(qe.path,{d:s,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o}),h.jsx(qe.path,{d:s,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o})]})}console.log("🔧 generateDataPath importado:",typeof gs);let dc=null,fc=null,Ck=0,Na="";function Tse(t,e){Ck=t,Na=e}let Tr="fetching";const rr=(t,e,n,i)=>{console.log("🎨 drawDataPath llamado con:",{from:t,to:e,instruction:n,mode:i});try{console.log("🔧 Antes de llamar generateDataPath"),console.log("🔧 generateDataPath es:",typeof gs);const r=gs(t,e,n,i);if(console.log("🔧 Después de llamar generateDataPath"),console.log("🎯 Ruta generada en drawDataPath:",r),!r)return console.log("❌ No hay ruta, retornando Promise.resolve()"),Promise.resolve();const s=Bt(),o=s.animations?s.executionUnit:1;return je([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:o,easing:"easeInOutSine"})}catch(r){return console.error("❌ Error en drawDataPath:",r),console.error("❌ Stack trace:",r instanceof Error?r.stack:"No stack trace"),Promise.resolve()}},Ose=(t,e,n)=>{try{const i=Mse(t,e,n);if(!i)return Promise.resolve();const r=Bt(),s=r.animations?r.executionUnit:1;return je([{key:"cpu.internalBus.data.path",from:i},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:s,easing:"easeInOutSine"})}catch(i){return console.warn("Error en drawSimultaneousLeftRightPath:",i),Promise.resolve()}},Or=()=>je({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"}),Ise=async(t,e,n)=>{console.log("🎯 Animación simultánea detectada: left y right desde",t),Tr!=="fetching-operands"&&(console.log("⏳ Esperando fase fetching-operands para animación simultánea..."),await new Promise(i=>{const r=()=>{Tr==="fetching-operands"?i():setTimeout(r,50)};r()}),console.log("✅ Fase fetching-operands alcanzada, procediendo con animación simultánea")),await Ose(t,e,n),await Promise.all([Jt("cpu.left"),Jt("cpu.right")]),M.set(xe.left,M.get(xe[t])),M.set(xe.right,M.get(xe[t])),await Promise.all([Zt("cpu.left"),Zt("cpu.right")]),dc=null,fc=null,await Or()};let Xe="",ut="",Hx=null,vh=null,yh=null,ai=null,js=null;const No=t=>t.replace(/\.(l|h)$/,"");async function oR(){await Promise.all([Xp("cpu.MBR"),Xp("cpu.IP"),new Promise(t=>{window.dispatchEvent(new CustomEvent("ip-register-update")),t()})])}async function jse(){vh&&yh?(console.log("🎯 Ejecutando animaciones simultáneas para modo mem<-imd (MBR→ri + IP→MAR)"),await Promise.all([rr("MBR","ri",vh.instruction,vh.mode),je([{key:"cpu.internalBus.address.path",from:ed("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})]),M.set(xe.ri,M.get(Zs)),M.set(Hs,M.get(xe.IP)),await Promise.all([Jt("cpu.ri"),Jt("cpu.MAR")]),await Promise.all([Zt("cpu.ri"),Zt("cpu.MAR")]),await Promise.all([Or(),je({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),vh=null,yh=null):yh&&(console.log("🎯 Ejecutando animación individual IP→MAR para modo mem<-imd"),await je([{key:"cpu.internalBus.address.path",from:ed("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),M.set(Hs,M.get(xe.IP)),await Jt("cpu.MAR"),await Zt("cpu.MAR"),await je({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),yh=null)}async function Ek(t){switch(console.log("🔍 CPU Event:",t.type,t),window.VONSIM_PARALLEL_ANIMATIONS&&t.type==="cpu:mar.set"&&window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-read-visual")),t.type){case"cpu:alu.execute":{console.log("🚀 Evento cpu:alu.execute recibido, fase actual:",Tr);const e=Bt(),i={duration:e.animations?e.executionUnit:1,easing:"easeInOutSine"};Tr!=="executing"?(console.log("⏳ Esperando fase executing para animación de la ALU..."),await new Promise(r=>{let s=0;const o=200,a=()=>{console.log("🔍 Verificando fase actual:",Tr),s++,Tr==="executing"?r():s>=o?(console.warn("⚠️ Timeout esperando fase executing, procediendo de todas formas"),r()):setTimeout(a,50)};a()}),console.log("✅ Fase executing alcanzada, procediendo con animación de la ALU")):console.log("✅ Ya estamos en fase executing, procediendo directamente"),await Promise.all([(async()=>{h$(),m$(),await je([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],i),p$(),g$()})()]),M.set(qL,t.operation),console.log("⚙️ Iniciando animación del engranaje de la ALU..."),await Promise.all([je({key:"cpu.alu.operation.backgroundColor",to:tn.mantis[400]},{duration:1,easing:"easeOutQuart"}),je({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),console.log("✅ Animación del engranaje completada"),await je({key:"cpu.alu.operation.backgroundColor",to:tn.stone[800]},{duration:1,easing:"easeOutQuart"}),console.log("� Iniciando animación del bus de resultado..."),await je([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],i),await Promise.all([Jt("cpu.result"),Jt("cpu.FLAGS")]),M.set(xe.FLAGS,t.flags),M.set(xe.result,t.result),await Promise.all([Zt("cpu.result"),Zt("cpu.FLAGS")]),console.log("💜 Mostrando texto del resultado después de actualizar FLAGS..."),d$(),await new Promise(r=>setTimeout(r,1e3)),await Promise.all([je({key:"cpu.alu.results.opacity",to:0},{duration:1,easing:"easeInSine"}),(async()=>{f$()})()]),await je({key:"cpu.alu.operands.opacity",to:0},{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":{dc=null,fc=null,ai=null,js=null,Tr="fetching";return}case"cpu:cycle.interrupt":{M.set(Hn,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await je([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{Xe=t.instruction.name,ut=t.instruction.willUse.ri?"mem<-imd":"",console.log("[cpu:cycle.start] instructionName:",Xe,"willUse.ri:",t.instruction.willUse.ri,"mode:",ut,"position:",t.instruction.position),t.instruction.willUse.ri,t.instruction.willUse.ri,dc=null,fc=null,Tr="fetching",k6(t.instruction.position.start),M.set(Hn,{phase:"fetching",metadata:t.instruction}),await je([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{const e=t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":t.next==="halting"?"halting":"fetching";Tr=e,console.log("🔄 Fase del ciclo actualizada:",Tr),M.set(Hn,n=>"metadata"in n?{...n,phase:e}:n);return}case"cpu:decode":{const e=Bt(),n=e.animations?e.executionUnit:1;await je([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:n,easing:"easeInOutSine"}),await je([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:n,easing:"easeInOutSine"}),await je([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{M.set(Hn,{phase:"stopped",error:t.error}),Zc(t.error);return}case"cpu:halt":case"cpu:int.0":{if(t.type==="cpu:halt"){const e=M.get(Hn);"metadata"in e&&(M.set(Hn,{phase:"halting",metadata:e.metadata}),await new Promise(n=>setTimeout(n,1e3)))}M.set(Hn,{phase:"stopped"}),Zc();return}case"cpu:int.6":{M.set(Hn,{phase:"int6"});return}case"cpu:int.7":{M.set(Hn,{phase:"int7"});return}case"cpu:inta.off":{await Xn("bus.inta");return}case"cpu:inta.on":{await Ei("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-write-visual")),await Ei(`bus.${e}`,10);return}case"cpu:iom.on":{await Ei("bus.iom",15);return}case"cpu:mar.set":{const e=No(t.register),n=e==="MBR";if(e==="IP")if(console.log("🔄 Detectando transferencia IP→MAR para animación simultánea"),js={instruction:Xe,mode:ut},console.log(`📝 Guardando pendingIPtoMARFromRegCopy desde cpu:mar.set: ${Xe}, ${ut}`),ai&&ai.instruction===Xe){console.log("🎯 Ejecutando animaciones simultáneas para MBR→ID + IP→MAR desde cpu:mar.set"),await Promise.all([rr("MBR","id",ai.instruction,ai.mode),je([{key:"cpu.internalBus.address.path",from:ed("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})]),M.set(xe.id,M.get(Zs)),M.set(Hs,M.get(xe.IP)),await Promise.all([Jt("cpu.id"),Jt("cpu.MAR")]),await Promise.all([Zt("cpu.id"),Zt("cpu.MAR")]),await Promise.all([Or(),je({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),ai=null,js=null;return}else{M.set(Hs,M.get(xe.IP));return}const i=e==="ri"&&(Na==="ADD"||Na==="SUB"||Na==="CMP"||Na==="AND"||Na==="OR"||Na==="XOR")&&(Ck>=5||Ck===4&&Xe===Na),r=n?"M 594 249 H 550 V 348 H 610":ed(e);if(console.log("[cpu:mar.set] event.register:",t.register,"| Animación especial:",n,"| regNorm:",e,"| mode:",ut,"| instructionName:",Xe,"| isRiToMARSkipAnimation:",i),!(e==="IP"&&ut==="mem<-imd")&&!i?(await je([{key:"cpu.internalBus.address.path",from:r},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await Jt("cpu.MAR",tn.blue[500]),M.set(Hs,M.get(xe[e]))):i&&(console.log("⏭️ Animación de bus y registro MAR omitida para ri → MAR en etapa avanzada"),M.set(Hs,M.get(xe[e]))),e==="ri"&&!i){if(console.log("[cpu:mar.set] ri detectado, mode:",ut,"instructionName:",Xe),ut==="mem<-imd"){console.log("✅ Animando bus especial: ri → MAR (modo mem<-imd)",{instructionName:Xe,mode:ut}),console.log("🔧 Llamando drawDataPath con:",{from:"ri",to:"MAR",instructionName:Xe,mode:ut});const s=await rr("ri","MAR",Xe,ut);console.log("🎯 Ruta generada para ri → MAR:",s),await Or()}else console.log("❌ No es modo mem<-imd, usando lógica alternativa"),await rr(No(Hx||"BL"),"MAR",Xe,ut),await Or();Hx=null}else e==="IP"&&ut==="mem<-imd"?(yh={instruction:Xe,mode:ut},console.log("📝 Marcando animación IP → MAR como pendiente para modo mem<-imd"),await jse()):n||(await rr(e,"MAR",Xe,ut),await Or());!(e==="IP"&&ut==="mem<-imd")&&!i?await Promise.all([Zt("cpu.MAR"),je({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]):i&&console.log("⏭️ Desactivación de registro MAR omitida para ri → MAR en etapa avanzada");return}case"cpu:mbr.get":{const e=No(t.register);console.log("🎯 cpu:mbr.get - evento recibido:",{register:t.register,normalizedRegister:e,instructionName:Xe,mode:ut}),e==="IP"&&(window.__nextTransferMBRtoIP=!0);const i=["ADD","SUB","AND","OR","XOR","CMP"].some(s=>Xe.startsWith(s));let r=!1;if((e==="MAR"||e.startsWith("MAR."))&&!["ADD","SUB","CMP"].some(a=>Xe.startsWith(a))){const a=M.get(xe.IP),l=M.get(Zs);a===l&&(r=!0)}if(e==="IR")await rr("MBR","IR",Xe,ut);else if((e==="MAR"||e.startsWith("MAR."))&&!r)console.log("Animando bus de datos: MBR → MAR",{instructionName:Xe,mode:ut}),await rr("MBR","MAR",Xe,ut);else if(["AL","BL","CL","DL","ri","id"].includes(e)){const o=["ADD","SUB","CMP"].some(a=>Xe.startsWith(a));if(e==="ri"&&ut==="mem<-imd")vh={instruction:Xe,mode:ut},console.log("📝 Marcando animación MBR → ri como pendiente para modo mem<-imd");else if(e==="id")if(console.log("🔄 Detectando transferencia MBR→ID para animación simultánea"),ai={instruction:Xe,mode:ut},console.log(`📝 Guardando pendingMBRtoID desde cpu:mbr.get: ${Xe}, ${ut}`),js&&js.instruction===Xe){console.log("🎯 Ejecutando animaciones simultáneas para MBR→ID + IP→MAR desde cpu:mbr.get"),await Promise.all([rr("MBR","id",ai.instruction,ai.mode),je([{key:"cpu.internalBus.address.path",from:ed("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})]),M.set(xe.id,M.get(Zs)),M.set(Hs,M.get(xe.IP)),await Promise.all([Jt("cpu.id"),Jt("cpu.MAR")]),await Promise.all([Zt("cpu.id"),Zt("cpu.MAR")]),await Promise.all([Or(),je({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),ai=null,js=null;return}else{M.set(xe.id,M.get(Zs));return}else(!i||o)&&await rr("MBR",e,Xe,ut)}if(e==="ri"&&ut==="mem<-imd"||M.set(xe[t.register],M.get(Zs)),e==="IR"?await Xp(`cpu.${e}`):e==="IP"||e==="ri"&&ut==="mem<-imd"||(await Jt(`cpu.${e}`),await Zt(`cpu.${e}`)),e==="ri"&&ut==="mem<-imd"||await Or(),Tr==="fetching-operands"&&e!=="IR"){const s=Xe&&(Xe==="MOV"||Xe==="ADD"||Xe==="SUB"||Xe==="CMP"||Xe==="AND"||Xe==="OR"||Xe==="XOR");(s&&e==="MBR"||!s&&e!=="MBR")&&(Tr="fetching-operands-completed",console.log("✅ Fase 'fetch-operands' completada al escribir en",e),M.set(Hn,a=>"metadata"in a?{...a,phase:"fetching-operands-completed"}:a))}return}case"cpu:mbr.set":{if(No(t.register)==="IP")await oR();else{const n=t.register.replace(/\.(l|h)$/,"");await rr(n,"MBR",Xe,ut),M.set(Zs,M.get(xe[t.register])),await Or()}return}case"cpu:register.copy":{const e=No(t.src),n=No(t.dest);if(console.log(`🔄 cpu:register.copy: ${t.src} → ${t.dest} (normalizado: ${e} → ${n})`),n==="left"||n==="right"){const i={from:e,instruction:Xe,mode:ut};if(n==="left"?dc=i:n==="right"&&(fc=i),dc&&fc&&dc.from===fc.from&&dc.instruction===fc.instruction){await Ise(e,Xe,ut);return}n==="left"?M.set(xe.left,M.get(xe[e])):M.set(xe.right,M.get(xe[e]));return}if(e==="MBR"&&n==="id"||e==="IP"&&n==="MAR"){if(console.log(`🔄 Detectando transferencia para animación simultánea: ${e} → ${n}`),e==="MBR"&&n==="id"?(ai={instruction:Xe,mode:ut},console.log(`📝 Guardando pendingMBRtoID: ${Xe}, ${ut}`)):e==="IP"&&n==="MAR"&&(js={instruction:Xe,mode:ut},console.log(`📝 Guardando pendingIPtoMARFromRegCopy: ${Xe}, ${ut}`)),ai&&js&&ai.instruction===js.instruction){console.log("🎯 Ejecutando animaciones simultáneas para MBR→ID + IP→MAR"),await Promise.all([rr("MBR","id",ai.instruction,ai.mode),je([{key:"cpu.internalBus.address.path",from:ed("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})]),M.set(xe.id,M.get(xe.MBR)),M.set(Hs,M.get(xe.IP)),await Promise.all([Jt("cpu.id"),Jt("cpu.MAR")]),await Promise.all([Zt("cpu.id"),Zt("cpu.MAR")]),await Promise.all([Or(),je({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),ai=null,js=null;return}e==="MBR"&&n==="id"?M.set(xe.id,M.get(xe.MBR)):e==="IP"&&n==="MAR"&&M.set(Hs,M.get(xe.IP));return}e==="ri"&&n==="IP"?console.log("⚠️  Saltando animación para transferencia ri → IP"):(console.log(`🎯 Ejecutando drawDataPath para transferencia normal: ${e} → ${n}`),await rr(e,n,Xe,ut)),await Jt(`cpu.${n}`),M.set(xe[n],M.get(xe[e])),await Zt(`cpu.${n}`),await Or();return}case"cpu:register.update":{const[e]=E2(t.register),n=No(e);n==="IP"||n==="MBR"?await oR():await Xp(n==="ri"?"cpu.ri":`cpu.${n}`),M.set(xe[n],t.value);return}case"cpu:register.buscopy":{const e=No(t.src),n=No(t.dest);n==="ri"&&(Hx=e),e==="ri"&&n.toLowerCase()==="mar"||e==="ri"&&n==="IP"||(await rr(e,n,Xe,ut),await new Promise(i=>setTimeout(i,150))),M.set(xe[n],M.get(xe[e])),await Jt(`cpu.${n}`),await Zt(`cpu.${n}`),n!=="ri"&&await Or();return}default:return t}}const Dse=Object.freeze(Object.defineProperty({__proto__:null,handleCPUEvent:Ek,updateInstructionContext:Tse},Symbol.toStringTag,{value:"Module"}));async function Lse(t){switch(t.type){case"f10:press":await Ei("bus.int0",2),await Xn("bus.int0");return;default:return t.type}}const RE=de(z.zero(8)),TE=de(z.zero(8));function $se(t){t.io.handshake&&(M.set(RE,z.fromUnsigned(t.io.handshake.DATA,8)),M.set(TE,z.fromUnsigned(t.io.handshake.STATE,8)))}async function Bse(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await ef(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await Jt(`handshake.${t.register}`),t.register){case"DATA":{M.set(RE,t.value);break}case"STATE":{M.set(TE,t.value);break}default:return t.register}await Zt(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await Xn("bus.int2");return}case"handshake:int.on":{await Ei("bus.int2",10);return}default:return t}}async function Fse(t){switch(t.type){case"keyboard:listen-key":{M.set(cn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{M.sub(cn,()=>{const n=M.get(cn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const OE=de(z.zero(8));function zse(t){t.io.leds!==null&&M.set(OE,z.fromUnsigned(t.io.leds,8))}async function Use(t){switch(t.type){case"leds:update":{await Ei("bus.pio->leds",2),M.set(OE,t.state),await Xn("bus.pio->leds");return}default:return t.type}}const uy=de(!1),dy=de(!1);function Vse(t){return t==="memory-to-mbr"?"M 800 249 L 635 249":"M 635 249 L 800 249"}const aR=(t,e)=>{try{const n=Vse(t);if(!n)return Promise.resolve();const i=Bt(),r=e??(i.animations?i.executionUnit:1);return je([{key:"bus.data.path",from:n},{key:"bus.data.opacity",from:1},{key:"bus.data.strokeDashoffset",from:1,to:0}],{duration:r,easing:"easeInOutSine"})}catch(n){return console.warn("Error en drawExternalDataPath:",n),Promise.resolve()}},lR=()=>je({key:"bus.data.opacity",to:0},{duration:1,easing:"easeInSine"});function Hse(){return"M 635 349 H 800"}const Wx=t=>{try{const e=Hse(),n=Bt(),i=t??(n.animations?n.executionUnit:1);return je([{key:"bus.address.path",from:e},{key:"bus.address.opacity",from:1},{key:"bus.address.strokeDashoffset",from:1,to:0}],{duration:i,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawExternalAddressPath:",e),Promise.resolve()}},Gx=()=>je({key:"bus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),cR=t=>{try{const e="M 380 420 H 800",n=Bt(),i=t??(n.animations?n.executionUnit:1);return je([{key:"bus.rd.path",from:e},{key:"bus.rd.opacity",from:1},{key:"bus.rd.strokeDashoffset",from:1,to:0}],{duration:i,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawRDControlPath:",e),Promise.resolve()}},Wse=t=>{try{const e="M 380 440 H 800",n=Bt(),i=t??(n.animations?n.executionUnit:1);return je([{key:"bus.wr.path",from:e},{key:"bus.wr.opacity",from:1},{key:"bus.wr.strokeDashoffset",from:1,to:0}],{duration:i,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawWRControlPath:",e),Promise.resolve()}},uR=()=>je({key:"bus.rd.opacity",to:0},{duration:1,easing:"easeInSine"}),dR=()=>je({key:"bus.wr.opacity",to:0},{duration:1,easing:"easeInSine"});async function fR(t){switch(typeof window<"u"&&window.VONSIM_PARALLEL_ANIMATIONS&&window.addEventListener("vonsim:parallel-memory-read-visual",()=>{M.set(uy,!0),je([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{je([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})}),Promise.all([Wx(),(async()=>{wk(),await cR(),xk()})()])}),t.type){case"memory:read":{window.VONSIM_PARALLEL_ANIMATIONS||(M.set(uy,!0),je([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{je([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})}),await Promise.all([Wx(),(async()=>{wk(),await cR(),xk()})()]),await Gx());return}case"memory:read.ok":{M.set(Mp,Ce.from(t.address)),await je({key:"memory.operating-cell.color",to:tn.mantis[400]},{duration:1,easing:"easeOutQuart"}),await aR("memory-to-mbr"),M.set(Zs,t.value),await Promise.all([je({key:"memory.operating-cell.color",to:tn.white},{duration:1,easing:"easeOutQuart"}),lR(),Gx(),uR(),dR()]);return}case"memory:write":{M.set(dy,!0),c$(),await Promise.all([Wx(),Wse()]),u$(),M.set(dy,!1);return}case"memory:write.ok":{M.set(Mp,Ce.from(t.address)),await Jt("cpu.MBR"),await aR("mbr-to-memory"),await je({key:"memory.operating-cell.color",to:tn.mantis[400]},{duration:1,easing:"easeOutQuart"}),M.set(qv,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Promise.all([Zt("cpu.MBR"),je({key:"memory.operating-cell.color",to:tn.white},{duration:1,easing:"easeOutQuart"}),lR(),Gx(),uR(),dR()]);return}case"memory:read.error":case"memory:write.error":{Zc(t.error);return}case"memory:write.warning":{aoe("Advertencia de Memoria",`${t.warning}`);return}default:return t}}const IE=de(z.fromUnsigned(255,8)),jE=de(z.fromUnsigned(0,8)),DE=de(z.fromUnsigned(0,8)),fy=[de(z.zero(8)),de(z.zero(8)),de(z.zero(8)),de(z.zero(8)),de(z.zero(8)),de(z.zero(8)),de(z.zero(8)),de(z.zero(8))];function Gse(t){if(t.io.pic){M.set(IE,z.fromUnsigned(t.io.pic.IMR,8)),M.set(jE,z.fromUnsigned(t.io.pic.IRR,8)),M.set(DE,z.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<fy.length;e++)M.set(fy[e],z.fromUnsigned(t.io.pic.lines[e],8))}}async function Kse(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await ef(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await Jt(`pic.${t.register}`),t.register){case"IMR":{M.set(IE,t.value);break}case"IRR":{M.set(jE,t.value);break}case"ISR":{M.set(DE,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));M.set(fy[e],t.value);break}default:return t}await Zt(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await Xn("bus.intr");return}case"pic:intr.on":{await Ei("bus.intr",10);return}case"pic:int.send":{await ef(t.number);return}default:return t}}const LE=de(z.zero(8)),$E=de(z.zero(8)),BE=de(z.zero(8)),FE=de(z.zero(8));function qse(t){t.io.pio&&(M.set(LE,z.fromUnsigned(t.io.pio.PA,8)),M.set($E,z.fromUnsigned(t.io.pio.PB,8)),M.set(BE,z.fromUnsigned(t.io.pio.CA,8)),M.set(FE,z.fromUnsigned(t.io.pio.CB,8)))}async function Yse(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await ef(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await Jt(`pio.${t.register}`),t.register){case"PA":{M.set(LE,t.value);break}case"PB":{M.set($E,t.value);break}case"CA":{M.set(BE,t.value);break}case"CB":{M.set(FE,t.value);break}default:return t.register}await Zt(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const hy=de([]),py=de("");function Xse(t){t.io.printer&&(M.set(hy,t.io.printer.buffer.map(e=>z.fromUnsigned(e,8))),M.set(py,t.io.printer.paper))}async function Jse(t){switch(t.type){case"printer:buffer.add":{M.set(hy,e=>[...e,t.char]);return}case"printer:buffer.pop":{M.set(hy,e=>e.slice(1));return}case"printer:busy.off":{await Xn("bus.printer.busy");return}case"printer:busy.on":{await Ei("bus.printer.busy",15);return}case"printer:data.read":{await Ei("bus.printer.data",15),await Xn("bus.printer.data");return}case"printer:paper.print":{M.set(py,e=>e+t.char);return}case"printer:paper.replace":{M.set(py,"");return}case"printer:strobe.off":{await Xn("bus.printer.strobe");return}case"printer:strobe.on":{await Ei("bus.printer.strobe",15);return}default:return t}}const zE=de("");function Zse(t){"screen"in t.io&&t.io.screen!==null&&M.set(zE,t.io.screen)}async function Qse(t){switch(t.type){case"screen:send-char":{M.set(zE,t.output);return}default:return t.type}}const $b=de(z.zero(8));function eoe(t){t.io.switches!==null&&M.set($b,z.fromUnsigned(t.io.switches,8))}async function toe(t){switch(t.type){case"switches:toggle":{M.set($b,e=>e.withBit(t.index,!e.bit(t.index))),await Ei("bus.switches->pio",2),await Xn("bus.switches->pio");return}default:return t}}const my=de(z.zero(8)),UE=de(z.zero(8));function noe(t){t.io.timer&&(M.set(my,z.fromUnsigned(t.io.timer.CONT,8)),M.set(UE,z.fromUnsigned(t.io.timer.COMP,8)))}async function ioe(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await ef(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await Jt(`timer.${t.register}`),t.register){case"CONT":{M.set(my,t.value);break}case"COMP":{M.set(UE,t.value);break}default:return t.register}await Zt(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await Xn("bus.int1");return}case"timer:int.on":{await Ei("bus.int1",10);return}case"timer:tick":{M.set(my,t.cont),await Ei("bus.int1",2),await Xn("bus.int1");return}default:return t}}const Ak=new Set;async function Kx(t){M.get(Ec).canAnimate||await new Promise(n=>{const i=M.sub(Ec,()=>{M.get(Ec).canAnimate&&(i(),n())})}),await t()}async function W$(t){soe(t);const[e]=t.type.split(":",2);Ak.add(t.type);const i=["cpu:mar.set","cpu:register.update","cpu:mbr.get","cpu:mbr.set","cpu:register.buscopy","cpu:register.copy","memory:read","memory:write"].includes(t.type);try{switch(e){case"bus":{i?await Kx(()=>eR(t)):await eR(t);break}case"clock":{await Zie(t);break}case"cpu":{i?await Kx(()=>Ek(t)):await Ek(t);break}case"f10":{await Lse(t);break}case"handshake":{await Bse(t);break}case"keyboard":{await Fse(t);break}case"leds":{await Use(t);break}case"memory":{i?await Kx(()=>fR(t)):await fR(t);break}case"pic":{await Kse(t);break}case"pio":{await Yse(t);break}case"printer":{await Jse(t);break}case"screen":{await Qse(t);break}case"switches":{await toe(t);break}case"timer":{await ioe(t);break}default:return e}}finally{Ak.delete(t.type)}}function hR(...t){for(const e of t)if(Ak.has(e))return!0;return!1}const roe={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function soe(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${roe[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof z?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof Ce?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof Er?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const xn=new xQ,cn=de({type:"stopped"});let Jc=null;try{window.VonSimAddNotification&&(Jc=window.VonSimAddNotification)}catch{}function VE(t,e=10){window.VonSimAddNotification?window.VonSimAddNotification(t):e>0&&setTimeout(()=>VE(t,e-1),100)}function ooe(t){const e=t.translate(Bt().language);Fi({title:e,variant:"error"}),Jc?Jc({type:"error",title:"Error de simulación",message:e}):VE({type:"error",title:"Error de simulación",message:e})}function aoe(t,e){Fi({title:t,description:e,variant:"info"}),Jc&&Jc({type:"warning",title:t,message:e})}function Zc(t){if(t&&(ooe(t),t.code==="no-instruction")){M.set(cn,{type:"paused"});return}kne(),k6(null),bne(!1),M.set(cn,{type:"stopped",error:t}),M.set(Hn,{phase:"stopped",error:t}),_E()}function li(){M.set(cn,{type:"paused"}),o$()}function loe(){const t=gb(Bt().language,"messages.assemble-error");Fi({title:t,variant:"error"}),Jc?Jc({type:"error",title:"Error de ensamblado",message:t}):VE({type:"error",title:"Error de ensamblado",message:t})}function yu(){Fi({title:gb(Bt().language,"messages.invalid-action"),variant:"error"})}function pR(t,e=!1){_Q(t,e),AQ(t,e),$se(t),Gse(t),qse(t),noe(t),zse(t),Xse(t),Zse(t),eoe(t),_t=0,Tc=0,M.set(Pp,_t),M.set(wb,Tc),M.set(pt,""),e&&M.set(mc,[])}let W=null,Po=0,Ue=0,Un="",bu=!0,qt=!1,kt=!1,we=[],_t=0,Ze=0,Tc=0,rc="",mR="",gR="",Ds=!1,Bg=!1,Fg="",G$="",wu=!1,sc="",qx=!1;function coe(t){return t.modeId&&t.modeRi?"directo-inmediato":t.modeId?"inmediato":t.modeRi?"directo":"registro"}function zg(t){if(t.length!==2)return!1;const[e,n]=t,i=/^[A-D][LH]$/.test(e)||/^[A-D]X$/.test(e),r=n.startsWith("[")&&n.endsWith("]");return i&&r}function uoe(t,e){const{name:n,modeId:i,modeRi:r,executeStage:s}=e;return n==="MOV"&&i&&r?doe(t,s):n==="MOV"&&r&&!i?foe(t,s):n==="MOV"&&i&&!r?hoe(t):n==="INT"?moe(t,s,r):n==="CALL"?goe(t):["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&r&&!i?poe(t,s):["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function doe(t,e){switch(e){case 2:return{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0};case 4:return{message:"Ejecución: ri ← MBR; MAR ← IP",shouldDisplay:!0,shouldPause:!0};default:return{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}}function foe(t,e){return e===2?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:e===4&&t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function hoe(t){return t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:t==="IP"?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function poe(t,e){return e===2?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:e===4&&t==="ri"?{message:"Ejecución: MAR ← MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function moe(t,e,n){return e===2&&n?{message:"Ejecución: ri ← MBR; MAR ← SP",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function goe(t){return{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function voe(t,e){const{name:n,modeId:i,modeRi:r,executeStage:s}=e;return t==="SP"?yoe(n,s,r):t==="FLAGS"?boe(n,s,r):n==="INT"?woe(t):n==="MOV"&&i&&r?xoe():n==="MOV"&&r&&!i?Soe():["ADD","SUB","CMP","AND","OR","XOR"].includes(n)&&r&&!i?koe():n==="CALL"?_oe(t):t==="IP"&&r&&!i&&s===3?{message:"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function yoe(t,e,n){if(n&&e===4&&t==="INT")return{message:"",shouldDisplay:!1,shouldPause:!1};switch(t){case"PUSH":return{message:"Ejecución: SP = SP - 1",shouldDisplay:!0,shouldPause:!0};case"RET":case"IRET":return{message:"Ejecución: SP = SP + 1",shouldDisplay:!0,shouldPause:!0};case"POP":if(e===3)return{message:`${G$}; SP = SP + 1`,shouldDisplay:!0,shouldPause:!0};break}return{message:"",shouldDisplay:!1,shouldPause:!1}}function boe(t,e,n){return n&&e===5&&t==="INT"?{message:"Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1; IF = 0",shouldDisplay:!0,shouldPause:!0}:{message:"Ejecución: IF = 0",shouldDisplay:!0,shouldPause:!0}}function woe(t){switch(t){case"DL":return{message:"Interrupción: AL ← ASCII",shouldDisplay:!0,shouldPause:!0};case"right.l":return{message:"Interrupción: SUB AL, 1",shouldDisplay:!0,shouldPause:!0};case"right":return{message:"Interrupción: ADD BL, 1",shouldDisplay:!0,shouldPause:!0};case"ri.l":return{message:"Interrupción: MAR ← (video)",shouldDisplay:!1,shouldPause:!0}}return{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function xoe(){return{message:"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function Soe(){return{message:"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function koe(){return{message:"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function _oe(t){return{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function vR(){return{name:W||"",modeId:qt,modeRi:kt,executeStage:Ue,cycleCount:Ze}}function yR(t,e,n,i){const r=coe(n);console.log(`🔍 [${t}] Registro: ${e}`),console.log(`   Instrucción: ${n.name}`),console.log(`   Modo de direccionamiento: ${r}`),console.log(`   Etapa de ejecución: ${n.executeStage}`),console.log(`   Ciclo: ${n.cycleCount}`),console.log(`   Mensaje: ${i.message}`),console.log(`   Mostrar: ${i.shouldDisplay}`),console.log(`   Pausar: ${i.shouldPause}`),console.log("---")}function bR(t){return t.name?t.executeStage<0?(console.warn("⚠️ Etapa de ejecución inválida:",t.executeStage),!1):!0:(console.warn("⚠️ Contexto de instrucción sin nombre"),!1)}async function yc(t){try{for(;;){const e=M.get(cn);if(M.get(iy)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),M.set(iy,!1),Zc();break}if(e.type==="stopped"){Po=0,Ue=0,Un="";break}if(e.type==="paused"){await new Promise(s=>{const o=M.sub(cn,()=>{o(),s()})});continue}const i=t.next();if(i.done)break;if(i.value&&typeof i.value<"u"){const{updateInstructionContext:s}=await UC(async()=>{const{updateInstructionContext:o}=await Promise.resolve().then(()=>Dse);return{updateInstructionContext:o}},void 0);s(Ue,W||""),await W$(i.value)}else continue;if(i.value.type==="cpu:cycle.start"&&(W=i.value.instruction.name,qt=!!i.value.instruction.willUse.id,kt=!!i.value.instruction.willUse.ri,we=i.value.instruction.operands,M.set(kQ,kt),Ze=0,M.set(sn,Ze),console.log("🔄 Nueva instrucción iniciada:",W,"- Contador reiniciado a 0"),console.log("🔍 Detalles de la instrucción:","willUse.id:",i.value.instruction.willUse.id,"willUse.ri:",i.value.instruction.willUse.ri,"modeId:",qt,"modeRi:",kt),console.log("🔍 Instrucción completa:",JSON.stringify(i.value.instruction,null,2)),Ds=!1,Bg=!1,Fg="",wu=!1,sc=""),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(i.value.type==="cpu:cycle.end"||i.value.type==="cpu:halt"){Po=0,Ue=0,bu=!0,Un="",Tc++,console.log(`Instrucciones: ${Tc}`),M.set(wb,Tc),i.value.type==="cpu:halt"?(Ue=4,_t++,Ze++,M.set(sn,Ze),M.set(Pp,_t),M.set(pt,"Ejecución: Detenido"),console.log("🛑 HLT ejecutado - executeStageCounter establecido a 4, cycleCount:",_t)):(e.until==="cycle-change"||e.until==="end-of-instruction")&&li();continue}else i.value.type==="cpu:int.6"?M.set(pt,"Interrupción: Rutina leer caracter del teclado"):i.value.type==="cpu:int.7"&&(M.set(pt,"Interrupción: Rutina mostrar por pantalla"),e.until==="cycle-change"&&li());if(Po<3)i.value.type==="cpu:mar.set"?(i.value.register==="SP"?(Po=3,Ue=3,M.set(pt,"Ejecución: MAR ← SP")):(M.set(pt,"Captación: MAR ← IP"),_t++,Ze++,M.set(sn,Ze),Ue++),e.until==="cycle-change"&&li(),Po++):i.value.type==="cpu:register.update"?(console.log("🔍 Debug: Captación register.update - fetchStageCounter:",Po,"executeStageCounter:",Ue),M.set(pt,"Captación: MBR ← read(Memoria[MAR]); IP ← IP + 1"),_t++,Ze++,M.set(sn,Ze),e.until==="cycle-change"&&li(),Ue++,Po++):i.value.type==="cpu:mbr.get"&&(M.set(pt,"Captación: IR ← MBR"),_t++,Ze++,M.set(sn,Ze),e.until==="cycle-change"&&li(),Po++);else if(i.value.type==="cpu:rd.on"&&Ue>1?Un="Ejecución: MBR ← read(Memoria[MAR])":i.value.type==="cpu:wr.on"?(Un="Ejecución: write(Memoria[MAR]) ← MBR",W==="MOV"&&!zg(we)&&(console.log("🔍 MOV Debug - Escritura en memoria detectada"),console.log("🔍 MOV Debug - Operandos:",we),console.log("🔍 MOV Debug - Es lectura:",zg(we)))):i.value.type==="pio:write.ok"&&(M.set(pt,"Ejecución: write(PIO[MAR]) ← MBR"),_t++,Ze++,M.set(sn,Ze),Ue++),i.value.type==="cpu:mar.set"){const s=i.value.register;console.log("executeStageCounter:",Ue),console.log("mbridirmar:",Ds),console.log("resultmbrimar:",Bg),console.log("displayMessageresultmbr:",Fg),console.log("shouldDisplayMessage:",bu),console.log("🔍 BL/BX Debug - blBxToRiProcessed:",wu),console.log("🔍 BL/BX Debug - blBxRegisterName:",sc);const o=(W==="MOV"||W==="ADD"||W==="SUB")&&s==="ri"&&(Ue===3||wu)&&!qt&&!kt,a=s==="ri"&&(W==="ADD"||W==="SUB"||W==="CMP"||W==="AND"||W==="OR"||W==="XOR")&&Ue>=5&&(Un==="Ejecución: write(Memoria[MAR]) ← MBR"||Ue>=7),l=vR();if(bR(l)){const u=uoe(s,l);yR("MAR.set",s,l,u),s==="IP"&&W==="MOV"&&Ue===4&&(console.log("🔍 Debug MOV IP - Verificando condiciones:"),console.log("   sourceRegister === 'IP':",s==="IP"),console.log("   currentInstructionName === 'MOV':",W==="MOV"),console.log("   currentInstructionModeri:",kt),console.log("   !currentInstructionModeid:",!qt),console.log("   executeStageCounter === 4:",Ue===4),console.log("   currentInstructionOperands:",we),console.log("   currentInstructionOperands.length === 2:",we.length===2),we.length>=2&&(console.log("   Segundo operando:",we[1]),console.log("   !startsWith('['):",!we[1].startsWith("[")),console.log("   !endsWith(']'):",!we[1].endsWith("]")),console.log("   /^\\d+$/.test():",/^\d+$/.test(we[1])),console.log("   /^\\d+h$/i.test():",/^\d+h$/i.test(we[1])),console.log("   Es valor inmediato (decimal o hex):",/^\d+$/.test(we[1])||/^\d+h$/i.test(we[1])))),Bg?M.set(pt,Fg):Ds&&!a?W==="MOV"&&kt&&qt?M.set(pt,"Ejecución: MAR ← IP; MBR→MBR"):s==="ri"&&W==="MOV"&&!kt&&!qt?(_t++,Ze++,M.set(sn,Ze),console.log("🔢 Ciclo incrementado ANTES de mostrar MAR ← BL/BX - cycleCount:",_t,"currentInstructionCycleCount:",Ze),M.set(pt,`Ejecución: MAR ← ${sc}`),Ds=!1,wu=!1,sc=""):s==="ri"&&(W==="ADD"||W==="SUB")&&!kt&&!qt?(_t++,Ze++,M.set(sn,Ze),console.log("🔢 Ciclo incrementado ANTES de mostrar MAR ← BL/BX - cycleCount:",_t,"currentInstructionCycleCount:",Ze),M.set(pt,`Ejecución: MAR ← ${sc}`),Ds=!1,wu=!1,sc=""):qx?(M.set(pt,"Ejecución: id ← MBR; MAR ← ri"),qx=!1):M.set(pt,"Ejecución: id ← MBR; MAR ← IP"):s==="IP"&&(W==="MOV"||W==="ADD"||W==="SUB"||W==="CMP"||W==="AND"||W==="OR"||W==="XOR")&&kt&&qt&&Ue===4&&we.length===2&&!we[1].startsWith("[")&&!we[1].endsWith("]")&&(/^\d+$/.test(we[1])||/^\d+h$/i.test(we[1]))?(console.log(`🎯 CONDICIÓN ESPECIAL DETECTADA - ${W} con direccionamiento directo + valor inmediato`),console.log("🔍 Operandos:",we),console.log("🔍 Segundo operando:",we[1]),console.log("🔍 Es número:",/^\d+$/.test(we[1])),M.set(pt,"Ejecución: MAR ← IP ; ri ← MBR")):s==="ri"&&W==="MOV"&&Ue===4?M.set(pt,"Ejecución: MAR ← MBR"):(bu||s==="SP"||qt&&s==="IP"||u.shouldDisplay)&&(!o&&!a?M.set(pt,u.message):a&&console.log("⏭️ Mensaje NO mostrado para ri → MAR en etapa avanzada (dirección ya en MAR)"))}Ds&&a&&s==="ri"&&(Ds=!1,console.log("🧹 mbridirmar limpiado para ri → MAR omitido en etapa avanzada"));const c=o||a;c?console.log("⏭️ Ciclo NO contabilizado en cpu:mar.set - skipCycleCount:",c,"isIndirectInstruction:",o,"isRiToMARSkipCycle:",a,"(dirección ya almacenada en MAR)"):(_t++,Ze++,M.set(sn,Ze),console.log("🔢 Ciclo contabilizado en cpu:mar.set - cycleCount:",_t,"currentInstructionCycleCount:",Ze)),e.until==="cycle-change"&&!o&&!a&&li(),a?console.log("⏭️ executeStageCounter NO incrementado para ri → MAR en etapa avanzada"):(Ue++,console.log("🔍 cpu:mar.set - executeStageCounter después del incremento:",Ue))}else if(i.value.type==="cpu:register.update"){const s=i.value.register;console.log("🔍 Debug register.update - fetchStageCounter:",Po,"executeStageCounter:",Ue),console.log("🔍 Debug register.update - currentInstructionModeri:",kt,"currentInstructionModeid:",qt);const o=vR();if(bR(o)){const a=voe(s,o);yR("register.update",s,o,a);let l=a.message;bu=a.shouldDisplay;const c=a.shouldPause;kt&&Ue===8&&W==="INT"&&(l="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),Ue===2&&W==="CALL"&&(l="Ejecución: ri ← MBR; SP ← SP - 1"),Ue===4&&W==="CALL"&&(l="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),Ue===3&&s==="IP"&&(W==="MOV"||W==="ADD"||W==="SUB"||W==="CMP"||W==="AND"||W==="OR"||W==="XOR")&&(l="Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1"),Ue===5&&s==="IP"&&kt&&qt&&(W==="ADD"||W==="SUB"||W==="CMP"||W==="AND"||W==="OR"||W==="XOR")&&(l="Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1"),console.log("displayMessage:",l),console.log("currentInstructionName:",W),console.log("currentInstructionModeri:",kt),console.log("executeStageCounter:",Ue),console.log("pause:",c),W!=="DEC"&&W!=="INC"&&W!=="NOT"&&W!=="NEG"&&!(W==="INT"&&Ue===5)&&(M.set(pt,l),_t++,Ze++,M.set(sn,Ze)),Ue++,l!=="Interrupción: MAR ← (video)"&&e.until==="cycle-change"&&W!=="DEC"&&W!=="INC"&&W!=="NOT"&&W!=="NEG"&&c&&li()}}else if(i.value.type==="cpu:alu.execute")W==="CMP"&&(M.set(pt,`Ejecución: ${mR} ${W} ${rc} ; write(FLAGS)`),_t++,Ze++,M.set(sn,Ze),e.until==="cycle-change"&&li());else if(i.value.type==="cpu:mbr.get"){const s=i.value.register,o=i.value.register==="id.l"?"id":i.value.register==="IP.l"?"IP":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="ri.l"?"MBR":i.value.register;if((String(o)==="right.l"||String(o)==="left.l")&&(rc="MBR"),(kt&&Ue===3&&(W==="ADD"||W==="SUB"||W==="CMP")||Ue===3&&(W==="ADD"||W==="SUB"||W==="CMP")&&kt&&we.length>=2&&(we[0].startsWith("[")&&we[0].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(we[0])||we[1].startsWith("[")&&we[1].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(we[1]))||Ue===3&&W==="POP"||kt&&qt&&Ue===4&&W==="MOV"||s==="id.l"&&kt&&qt&&(W==="ADD"||W==="SUB"||W==="CMP"||W==="AND"||W==="OR"||W==="XOR"))&&(s==="id.l"&&kt&&qt&&(W==="ADD"||W==="SUB"||W==="CMP"||W==="AND"||W==="OR"||W==="XOR")&&(qx=!0),Ds=!0),W==="POP"&&Ue===3&&(G$=`Ejecución: ${o} ← MBR`),!Ds&&String(o)!=="MBR"&&String(o)!=="right.l"&&String(o)!=="left.l"){M.set(pt,`Ejecución: ${o} ← MBR`),_t++,Ze++,M.set(sn,Ze);const a=W==="MOV"&&(o==="AL"||o==="AH"||o==="BL"||o==="BH"||o==="CL"||o==="CH"||o==="DL"||o==="DH");e.until==="cycle-change"&&!a&&li()}}else if(i.value.type==="cpu:register.buscopy"){console.log("📋 Evento cpu:register.buscopy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");if(W==="MOV"){const a=`Ejecución: ${o} ← ${s}`;M.set(pt,a),_t++,Ze++,M.set(sn,Ze),console.log("✅ Ciclo contabilizado para MOV register.buscopy - cycleCount:",_t,"currentInstructionCycleCount:",Ze)}}else if(i.value.type==="cpu:register.copy"){console.log("📋 Evento cpu:register.copy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");let a="";W==="DEC"||W==="INC"||W==="NOT"||W==="NEG"?a=s==="result"?`${W} ${rc}`:s:(a=s==="result"?`${o} ${W} ${rc}`:s==="ri"?"MBR":s,gR=`${s} ${W} ${rc}; write(FLAGS)`),W==="CMP"&&String(o)==="right"&&(rc=s),W==="CMP"&&String(o)==="left"&&(mR=s);let l=`Ejecución: ${o==="ri"?"MAR":o} ← ${a}`;if((W==="ADD"||W==="SUB"||W==="CMP")&&o!=="left"&&o!=="right"&&(l+="; write(FLAGS)"),s==="ri"&&o==="IP")l="Ejecución: IP ← MBR",W==="CALL"&&(l="Ejecución: IP ← MBR"),M.set(pt,l),e.until==="cycle-change"&&li();else if(o==="left"&&W==="INT")l="ADD BL, 1";else if(s==="result"&&W==="INT")e.until==="cycle-change"&&li();else if(s==="IP"&&o==="id")l="Ejecución: id ← IP",M.set(pt,l),e.until==="cycle-change"&&li();else if(s==="id"&&o==="ri")l="Ejecución: MAR ← id",bu=!1,M.set(pt,l);else if(s==="MBR"&&o==="ri")l="Ejecución: MAR ← MBR",M.set(pt,l);else if(s==="id"&&o==="IP")l="Ejecución: IP ← MBR",M.set(pt,l),e.until==="cycle-change"&&li();else if(s==="BL"&&o==="ri"||s==="BX"&&o==="ri"){const u=s==="BL"?"BL":"BX";sc=u,l=`Ejecución: MAR ← ${u}`,bu=!1,Ds=!0,wu=!0}else String(s)==="right.l"&&(rc=s);console.log("cpu:register.copy - sourceRegister:",s,"destRegister:",o,"currentInstructionName:",W,"executeStageCounter:",Ue),(W==="MOV"||W==="ADD"||W==="SUB")&&o!=="left"&&o!=="right"?(s==="BL"||s==="BX")&&o==="ri"?console.log(`⏭️ Ciclo NO contabilizado para ${W} register.copy (BL/BX→ri) - se contabilizará en cpu:mar.set`):(M.set(pt,l),_t++,Ze++,M.set(sn,Ze),console.log(`✅ Ciclo contabilizado para ${W} register.copy - cycleCount:`,_t,"currentInstructionCycleCount:",Ze)):(o!=="result"&&s!=="result"||s==="result"&&o!=="MBR")&&!((s==="BL"||s==="BX")&&o==="ri")&&!(o==="left"||o==="right")?(o==="left"||o==="right"||M.set(pt,l),_t++,Ze++,M.set(sn,Ze),console.log("✅ Ciclo contabilizado para register.copy - cycleCount:",_t,"currentInstructionCycleCount:",Ze,"destRegister:",o,"sourceRegister:",s)):console.log("❌ Ciclo NO contabilizado para register.copy - condición no cumplida:","destRegister:",o,"sourceRegister:",s)}else if(i.value.type==="bus:reset"&&Ue>1&&(W==="MOV"||W==="ADD"||W==="SUB"||W==="CMP"||W==="AND"||W==="OR"||W==="XOR"||W==="CALL"||W==="INT"||W==="PUSH"||W==="POP"||W==="IN"||W==="RET")){W==="RET"&&(Un="Ejecución: MBR ← read(Memoria[MAR])"),W==="IN"&&(Un="Ejecución: MBR ← read(PIO[MAR])"),W==="MOV"&&Ue===5&&(console.log("🔍 MOV Debug - Operandos:",we),console.log("🔍 MOV Debug - Es lectura:",zg(we)),zg(we)?Un="Ejecución: MBR ← read(Memoria[MAR])":Un="Ejecución: write(Memoria[MAR]) ← MBR");let s=!1,o=!1;(W==="MOV"||W==="ADD"||W==="SUB")&&Un==="Ejecución: write(Memoria[MAR]) ← MBR"&&(kt&&Ue===6||!kt&&!qt&&Ue===5)&&(o=!0),kt&&(Ue===4||Ue===8)&&W==="INT"||Ue===3&&(W==="MOV"||W==="ADD"||W==="SUB")&&kt||Ue===3&&(W==="MOV"||W==="ADD"||W==="SUB")&&!kt&&!qt&&we.length>=2&&(!we[0].startsWith("[")&&!we[0].endsWith("]")&&!we[1].startsWith("[")&&!we[1].endsWith("]")&&(/^\d+$/.test(we[1])||/^\d+h$/i.test(we[1])||/^[0-9A-F]+h?$/i.test(we[1])||/^\d+$/.test(we[0])||/^\d+h$/i.test(we[0])||/^[0-9A-F]+h?$/i.test(we[0]))||we[0].startsWith("[")&&we[0].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(we[0])||we[1].startsWith("[")&&we[1].endsWith("]")&&/^\[[0-9A-F]+h?\]$/i.test(we[1]))||Ue===3&&(W==="MOV"||W==="ADD"||W==="SUB")&&!kt&&!qt&&we.length>=2&&Un!=="Ejecución: MBR ← read(Memoria[MAR])"&&(we[0].startsWith("[")&&we[0].endsWith("]")&&/^\[[A-Z]+\]$/i.test(we[0])&&(/^\d+$/.test(we[1])||/^\d+h$/i.test(we[1]))||we[1].startsWith("[")&&we[1].endsWith("]")&&/^\[[A-Z]+\]$/i.test(we[1])&&(/^\d+$/.test(we[0])||/^\d+h$/i.test(we[0])))||Ue===5&&(W==="MOV"||W==="ADD"||W==="SUB")&&kt||qt&&Ue===4&&(W==="CALL"||W==="ADD"||W==="SUB"||W==="CMP")||Ue===3&&(W==="ADD"||W==="SUB"||W==="CMP"||W==="AND"||W==="OR"||W==="XOR")&&Un!=="Ejecución: MBR ← read(Memoria[MAR])"?(s=!0,console.log("🔄 ContinuarSinGuardar establecido a true - condición cumplida")):(console.log("🔄 ContinuarSinGuardar mantenido como false - ninguna condición cumplida"),Ue===3&&(W==="MOV"||W==="ADD"||W==="SUB")&&!kt&&!qt&&(console.log(`🔍 Debug ${W} step 3:`),console.log("   Operandos length >= 2:",we.length>=2),console.log("   Operando[0] no tiene []:",!we[0].startsWith("[")&&!we[0].endsWith("]")),console.log("   Operando[1] no tiene []:",!we[1].startsWith("[")&&!we[1].endsWith("]")),console.log("   Test operando[0] es dirección:",/^\d+$/.test(we[0])||/^\d+h$/i.test(we[0])||/^[0-9A-F]+h?$/i.test(we[0])),console.log("   Test operando[1] es inmediato:",/^\d+$/.test(we[1])||/^\d+h$/i.test(we[1])||/^[0-9A-F]+h?$/i.test(we[1])))),console.log("ContinuarSinGuarda:",s),console.log("executeStageCounter:",Ue),console.log("isLastStepBeforeCycleEnd:",o),console.log("🔍 bus:reset Debug - messageReadWrite:",Un),console.log("🔍 bus:reset Debug - currentInstructionModeri:",kt),console.log("🔍 bus:reset Debug - currentInstructionModeid:",qt),console.log("🔍 bus:reset Debug - currentInstructionOperands:",we),console.log("🔍 bus:reset Debug - Operando[0]:",we[0]),console.log("🔍 bus:reset Debug - Operando[1]:",we[1]),console.log("🔍 bus:reset Debug - Condición MOV/ADD/SUB directo step 3:",Ue===3&&(W==="MOV"||W==="ADD"||W==="SUB")&&!kt&&!qt),console.log("🔍 bus:reset Debug - Es lectura de memoria:",Un==="Ejecución: MBR ← read(Memoria[MAR])"),console.log("🔍 bus:reset Debug - MOV/ADD/SUB indirecto debe mostrar:",(W==="MOV"||W==="ADD"||W==="SUB")&&!kt&&!qt&&Ue===5&&Un==="Ejecución: MBR ← read(Memoria[MAR])"),s?o&&(M.set(pt,Un),_t++,Ze++,M.set(sn,Ze)):(M.set(pt,Un),_t++,Ze++,M.set(sn,Ze))}else if(i.value.type==="cpu:mbr.set"){const s=i.value.register==="id.l"?"id":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="IP.l"?"IP":i.value.register==="result.l"?gR:i.value.register;if(kt&&Ue===5&&(W==="ADD"||W==="SUB"))Bg=!0,Fg=`Ejecución: MBR ← ${s} ; MAR ← MBR`;else if(i.value.register==="result.l"){const o=`Ejecución: MBR ← ${s.replace("; write(FLAGS)"," ; update(FLAGS)")}`;M.set(pt,o),_t++,Ze++,M.set(sn,Ze),e.until==="cycle-change"&&li()}else Ue++,_t++,Ze++,M.set(sn,Ze)}}else M.set(pt,"");console.log(`Ciclos ejecutados: ${_t}`),M.set(Pp,_t);const r=new CustomEvent("instructionChange",{detail:{instruction:W,modeid:qt,moderi:kt}});window.dispatchEvent(r),i.value.type==="cpu:cycle.update"||i.value.type==="cpu:cycle.interrupt"?e.until:i.value.type==="cpu:cycle.end"&&(e.until==="end-of-instruction"||e.until==="cycle-change")&&li()}t.return()}catch(e){const n=ln.from(e);Zc(n)}}async function Coe(...t){const e=t[0],n=M.get(cn);switch(e){case"cpu.run":{if(n.type==="running")return yu();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;_t=0,Tc=0,M.set(Pp,_t),M.set(wb,Tc),M.set(mc,[]);const r=window.codemirror.state.doc.toString(),s=FL(r);if(!s.success)return loe();const o=s.instructions.map(x=>x.instruction),a=o.some(x=>["CALL","RET","INT","IRET","POP","PUSH"].includes(x));M.set(KC,a);const l=o.includes("INT");M.set(A2,l);const c=s.instructions.some(x=>x.instruction==="INT"?x.operands.some(S=>S.type==="number-expression"&&typeof S.value.value=="number"?S.value.value===6||S.value.value===7:!1):!1),u=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>S.type==="number-expression"&&typeof S.value.value=="number"?S.value.value===48||S.value.value===50:!1):!1),d=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value>=32&&S.value.value<=43;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _>=32&&_<=43}}catch(_){console.warn("No se pudo resolver operando PIC:",_)}}return!1}):!1),f=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value===64||S.value.value===65;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _===64||_===65}}catch(_){console.warn("No se pudo resolver operando Handshake:",_)}}return!1}):!1),p=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value===16||S.value.value===17;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _===16||_===17}}catch(_){console.warn("No se pudo resolver operando Timer:",_)}}return!1}):!1),g=Bt();M.set(rs,x=>({...x,devices:{...x.devices,keyboardAndScreen:c,pio:u?"switches-and-leds":f?"printer":x.devices.pio,handshake:f?"printer":x.devices.handshake,pic:d||x.devices.pic,"switches-and-leds":u}})),M.set(KL,c);const m=l||d||f||p||c;M.set(A2,m),console.log("Detectado - PIC:",d,"Handshake:",f,"Timer:",p,"INT:",l),console.log("Habilitando vector de interrupciones:",m),xn.loadProgram({program:s,data:g.dataOnLoad,devices:{keyboardAndScreen:Bt().devices.keyboardAndScreen??!1,pic:Bt().devices.pic??!1,pio:Bt().devices.pio??null,handshake:Bt().devices.handshake??null},hasORG:s.hasORG}),console.log("result:",s);const v=s.instructions.filter(x=>x.type==="instruction").flatMap(x=>{const S=x.operands.map(C=>{if(C.type==="register")return C.value;if(C.type==="number-expression"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h";if(N.isLabel())return N.value}else{if(C.type==="indirect-address")return"[BL]";if(C.type==="direct-address"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h"}}return""}).join(", "),_=`${x.instruction} ${S}`.trim(),E=[{address:x.start.value,name:_,length:x.length.toString().trim()}];if(x.operands.some(C=>C.type==="number-expression"||C.type==="direct-address")){const C=x.start.value+1,N=x.operands.filter((R,O)=>x.length===3?O===0&&R.type==="number-expression":R.type==="number-expression").map(R=>{if(R.type==="number-expression"){const O=R.value;if(O.isNumberLiteral())return O.value.toString(16)+"h";if(O.isLabel())return O.value}else if(R.type==="direct-address"){const O=R.value;if(O.isNumberLiteral())return O.value.toString(16)+"h"}return""}).join(", ");E.push({address:C,name:N,length:""})}if(x.length===3){const C=x.start.value+2,N=x.operands.filter(R=>R.type==="number-expression").map(R=>{if(R.type==="number-expression"){const O=R.value;if(O.isNumberLiteral())return O.value.toString(16)+"h"}return""}).join(" ");E.push({address:C,name:N,length:""})}return E}),y=s.data.filter(x=>x.type==="data-directive").flatMap(x=>{const S=x.start.value;return x.getValues().map(E=>typeof E=="object"&&E!==null&&"toNumber"in E&&typeof E.toNumber=="function"?E.toNumber():typeof E=="number"?E:0).map((E,C)=>({address:S+C,label:C===0&&x.label||null,value:E}))});console.log("Direcciones de las instrucciones:",v),console.log("Direcciones de los datos:",y),M.set(YL,v),M.set(XL,y.map(x=>({...x,length:""}))),pR(xn.getComputerState());const w=["Start CPU",{until:i,devices:Bt().devices,language:Bt().language,animations:Bt().animations?"yes":"no"}];_6.capture(...w),M.set(cn,{type:"running",until:i,waitingForInput:!1}),yc(xn.startCPU()),Eoe(),Aoe()}else M.set(cn,{type:"running",until:i,waitingForInput:!1}),a$();return}case"cpu.stop":{const i=t[1];if(i){Zc(),pR(xn.getComputerState(),i);const{anim:r}=await UC(async()=>{const{anim:o}=await Promise.resolve().then(()=>Jie);return{anim:o}},void 0);await Promise.all([r({key:"cpu.internalBus.data.opacity",to:0},{duration:.1,easing:"easeInSine"}),r({key:"cpu.internalBus.address.opacity",to:0},{duration:.1,easing:"easeInSine"})]);const s=new CustomEvent("instructionChange",{detail:{instruction:"",modeid:!1,moderi:!1}});window.dispatchEvent(s)}else li();return}case"f10.press":{if(!xn.devices.f10.connected()||n.type!=="running")return yu();if(hR("f10:press"))return;yc(xn.devices.f10.press());return}case"switch.toggle":{if(!xn.devices.switches.connected())return yu();if(hR("switches:toggle"))return;const i=t[1];n.type==="running"?yc(xn.devices.switches.toggle(i)):M.set($b,r=>r.withBit(i,!r.bit(i)));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return yu();xn.devices.keyboard.readChar(z.fromChar(t[1])),M.set(cn,{...n,waitingForInput:!1});return}case"screen.clean":{if(!xn.devices.screen.connected())return yu();yc(xn.devices.screen.clear());return}case"printer.clean":{if(!xn.devices.printer.connected())return yu();yc(xn.devices.printer.clear());return}default:return e}}async function Eoe(){if(xn.devices.clock.connected())for(;M.get(cn).type!=="stopped";){const t=Bt().clockSpeed;await je({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),yc(xn.devices.clock.tick())}}async function Aoe(){if(xn.devices.printer.connected()){for(;M.get(cn).type!=="stopped";){const t=Bt().printerSpeed;await je([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await je({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),await yc(xn.devices.printer.print())}if(M.get(cn).type==="stopped"&&xn.devices.printer.hasPending())for(;M.get(cn).type!=="stopped"||xn.devices.printer.hasPending();){const t=Bt().printerSpeed;await je([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await je({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"});const e=xn.devices.printer.print();let n=e.next();for(;!n.done;)n.value&&typeof n.value<"u"&&await W$(n.value),n=e.next()}}}function Fn(){const t=st(cn),e=OL(),n=b.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:Coe,devices:n}}function Noe({className:t}){const e=nn(),{status:n,dispatch:i}=Fn(),[r,s]=b.useState(null),[o,a]=b.useState("desktop");b.useEffect(()=>{const m=()=>{const v=window.innerWidth;v<=480?a("mobile"):v<=768?a("compact"):v<=1024?a("tablet"):a("desktop")};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),b.useEffect(()=>{n.type!=="running"&&s(null)},[n.type]);const l=b.useCallback(()=>{n.type!=="running"&&(s("cycle-change"),i("cpu.run","cycle-change"))},[n.type,i]);Nu("F7",m=>{m.preventDefault(),l()},void 0,[l]);const c=b.useCallback(()=>{n.type!=="running"&&(s("end-of-instruction"),i("cpu.run","end-of-instruction"))},[n.type,i]);Nu("F8",m=>{m.preventDefault(),c()},void 0,[c]);const u=b.useCallback(()=>{n.type!=="running"&&(s("infinity"),i("cpu.run","infinity"))},[n.type,i]);Nu("F4",m=>{m.preventDefault(),u()},void 0,[u]);const d=b.useCallback(()=>{n.type==="running"&&i("cpu.stop",!1)},[n.type,i]),f=b.useCallback(()=>{n.type!=="running"&&i("cpu.stop",!0)},[n.type,i]);Nu("F9",m=>{m.preventDefault(),f()},void 0,[f]),Nu(" ",m=>{const v=m.target;v.tagName==="INPUT"||v.tagName==="TEXTAREA"||v.contentEditable==="true"||(m.preventDefault(),n.type==="running"&&d())},{event:"keydown"},[n.type,d]);const p=o==="desktop"||o==="tablet",g=o==="desktop";return h.jsxs("div",{"data-testid":"controls",className:te("flex items-center justify-center gap-4 rounded-xl border border-stone-700 bg-stone-900/80 shadow-lg",o==="mobile"?"gap-2 px-2 py-0.5":o==="compact"?"gap-3 px-2 py-1":"gap-4 px-3 py-1",t),children:[n.type==="running"&&r==="cycle-change"?h.jsxs("button",{"data-testid":"cycle-button",onClick:d,title:e("control.action.pause"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Be,{icon:Lh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"cycle-button",disabled:n.type==="running",onClick:l,title:e("control.action.run.cycle-change"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-mantis-600/20 focus-visible:ring-2 focus-visible:ring-mantis-400 disabled:opacity-50",n.type==="running"&&n.until==="cycle-change"&&"animate-pulse-glow-mantis",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Be,{icon:_p,size:"lg",className:"text-mantis-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F7"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.cycle-change")})]}),n.type==="running"&&r==="end-of-instruction"?h.jsxs("button",{"data-testid":"new-button",onClick:d,title:e("control.action.pause"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Be,{icon:Lh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"new-button",disabled:n.type==="running",onClick:c,title:e("control.action.run.end-of-instruction"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-blue-600/20 focus-visible:ring-2 focus-visible:ring-blue-400 disabled:opacity-50",n.type==="running"&&n.until==="end-of-instruction"&&"animate-pulse-glow-blue",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Be,{icon:IC,size:"lg",className:"text-blue-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F8"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.end-of-instruction")})]}),n.type==="running"&&r==="infinity"?h.jsxs("button",{"data-testid":"open-button",onClick:d,title:e("control.action.pause"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Be,{icon:Lh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"open-button",disabled:n.type==="running",onClick:u,title:e("control.action.run.infinity"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-orange-600/20 focus-visible:ring-2 focus-visible:ring-orange-400 disabled:opacity-50",n.type==="running"&&n.until==="infinity"&&"animate-pulse-glow-orange",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Be,{icon:lJ,size:"lg",className:"text-orange-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F4"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.infinity")})]}),h.jsxs("button",{"data-testid":"assemble-button",onClick:f,disabled:n.type==="stopped"||n.type==="running",title:e("control.action.reset"),className:te("group relative flex flex-col items-center rounded-lg transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400 disabled:opacity-50",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Be,{icon:yL,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.reset")})]})]})}const K$=b.memo(({currentPhase:t="idle",className:e})=>{const[n,i]=b.useState("idle"),[r,s]=b.useState(!1);b.useEffect(()=>{if(t!=="idle"){i(t);const a=setTimeout(()=>i("idle"),1e3);return()=>clearTimeout(a)}},[t]);const o=[{id:"captacion",label:"Captación",color:"text-blue-400",icon:"📥",descripcion:"Captando instrucción desde memoria",pasos:["IP apunta a la dirección de memoria, el MAR recibe la dirección del IP","Se lee el contenido de memoria y se almacena en el MBR, IP se incrementa automáticamente","La instrucción se transfiere al IR"]},{id:"ejecucion",label:"Ejecución",color:"text-green-400",icon:"⚡",descripcion:"Ejecutando instrucción",subfases:[{id:"operandos",label:"Obtención de operandos",color:"text-yellow-400",icon:"🔍",descripcion:"Obteniendo operandos de la instrucción",pasos:["Se identifican y preparan los operandos necesarios para la operación."]},{id:"alu",label:"Procesar en ALU",color:"text-green-400",icon:"⚡",descripcion:"Procesando en la ALU",pasos:["La ALU ejecuta la operación aritmética o lógica con los operandos."]},{id:"escritura",label:"Escribir resultado",color:"text-purple-400",icon:"💾",descripcion:"Escribiendo resultado en registros",pasos:["El resultado de la operación se almacena en el registro destino."]}]}];return h.jsxs("div",{className:te("flex flex-col gap-2 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 p-3 shadow-lg ring-1 ring-stone-300","min-w-[280px] max-w-[320px]",e),children:[h.jsx("div",{className:"mb-2 flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"CICLO CPU"}),h.jsx("button",{onClick:()=>s(!r),className:te("rounded border px-2 py-1 text-[10px] font-bold transition-all duration-200",r?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300 hover:border-stone-400 hover:bg-stone-700"),children:r?"−":"+"})]})}),h.jsx("div",{className:"mt-2 flex items-center justify-center gap-2",children:o.map((a,l)=>h.jsxs("div",{className:"flex items-center",children:[h.jsxs("div",{className:te("flex cursor-pointer flex-col items-center gap-1 rounded border-2 px-2 py-1 transition-all duration-200","hover:border-stone-300 hover:bg-stone-700",t===a.id?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300",n===a.id&&"animate-pulse"),onClick:()=>{var c;if(r)if(a.subfases){let u="";a.subfases.forEach(d=>{u+=`${d.label}
${d.descripcion}
Pasos:
${d.pasos.map((f,p)=>`${p+1}. ${f}`).join(`
`)}`,u+=`

`}),alert(u)}else alert(`${a.label}

${a.descripcion}

Pasos:
${(c=a.pasos)==null?void 0:c.map((u,d)=>`${d+1}. ${u}`).join(`
`)}`)},children:[h.jsx("div",{className:te("text-lg transition-transform duration-300",t===a.id&&"scale-110"),children:a.icon}),h.jsx("span",{className:te("text-[10px] font-bold uppercase tracking-wide transition-colors",t===a.id?"text-stone-950":"text-stone-300"),children:a.label}),h.jsx("span",{className:"max-w-16 text-center text-[9px] leading-tight text-stone-500",children:a.descripcion})]}),l<o.length-1&&h.jsx("div",{className:"mx-1 font-bold text-stone-400",children:"→"})]},a.id))}),r&&h.jsx("div",{className:"mt-2 rounded border-2 border-stone-600 bg-stone-800/80 p-2",children:h.jsxs("div",{className:"text-xs text-stone-300",children:[h.jsx("div",{className:"mb-1 font-bold text-stone-200",children:"Estado actual:"}),t==="fetch"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Leyendo instrucción desde memoria"})]}),t==="decode"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Interpretando código de operación"})]}),t==="execute"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Ejecutando operación en ALU"})]}),t==="idle"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-stone-400"}),h.jsx("span",{children:"CPU en espera de instrucciones"})]})]})}),h.jsx("div",{className:"text-center text-[8px] text-stone-500",children:"Haz clic en las fases para ver detalles"})]})});K$.displayName="ExecutionPhases";const Poe=b.memo(({steps:t,onStepChange:e,onComplete:n,className:i})=>{const[r,s]=b.useState(0),[o,a]=b.useState(!1),[l,c]=b.useState(2e3),u=t[r],d=r===0,f=r===t.length-1,p=b.useCallback(w=>{const x=Math.max(0,Math.min(w,t.length-1));s(x),e==null||e(x)},[t.length,e]),g=b.useCallback(()=>{f?(a(!1),n==null||n()):p(r+1)},[r,f,p,n]),m=b.useCallback(()=>{d||p(r-1)},[r,d,p]),v=b.useCallback(()=>{p(0),a(!1)},[p]),y=b.useCallback(()=>{a(!o)},[o]);return o&&!f&&setTimeout(g,l),h.jsxs("div",{className:te("rounded-lg border border-stone-600 bg-stone-900 p-4",i),children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:"Modo Paso a Paso"}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("span",{className:"text-sm text-stone-400",children:["Paso ",r+1," de ",t.length]})})]}),h.jsx(K$,{currentPhase:u==null?void 0:u.phase,className:"mb-4"}),h.jsxs("div",{className:"mb-4 rounded-lg bg-stone-800 p-4",children:[h.jsx("div",{className:"mb-2 flex items-center gap-2",children:h.jsx("span",{className:"text-sm font-medium text-mantis-400",children:u==null?void 0:u.title})}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:u==null?void 0:u.description}),(u==null?void 0:u.instruction)&&h.jsxs("div",{className:"mb-3 rounded bg-stone-700 p-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Instrucción:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:u.instruction})]}),(u==null?void 0:u.registers)&&h.jsx("div",{className:"mb-3 grid grid-cols-2 gap-4",children:h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Registros:"}),h.jsx("div",{className:"mt-1 space-y-1",children:Object.entries(u.registers).map(([w,x])=>h.jsxs("div",{className:"flex justify-between text-xs",children:[h.jsxs("span",{className:"text-stone-300",children:[w,":"]}),h.jsx("span",{className:"font-mono text-mantis-400",children:x})]},w))})]})}),(u==null?void 0:u.memory)&&h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Memoria:"}),h.jsx("div",{className:"mt-1 grid grid-cols-4 gap-1",children:Object.entries(u.memory).map(([w,x])=>h.jsxs("div",{className:"text-center text-xs",children:[h.jsx("div",{className:"text-stone-500",children:w}),h.jsx("div",{className:"font-mono text-mantis-400",children:x})]},w))})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(bt,{variant:"outline",size:"sm",onClick:v,disabled:d&&!o,className:"flex items-center gap-1",children:[h.jsx(Be,{icon:yL}),"Reiniciar"]})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(bt,{variant:"outline",size:"sm",onClick:m,disabled:d,className:"flex items-center gap-1",children:[h.jsx(Be,{icon:wL}),"Anterior"]}),h.jsxs(bt,{variant:o?"secondary":"default",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx(Be,{icon:o?Lh:_p}),o?"Pausar":"Reproducir"]}),h.jsxs(bt,{variant:"outline",size:"sm",onClick:g,disabled:f,className:"flex items-center gap-1",children:["Siguiente",h.jsx(Be,{icon:IC})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Velocidad:"}),h.jsxs("select",{value:l,onChange:w=>c(Number(w.target.value)),className:"rounded border border-stone-600 bg-stone-800 px-2 py-1 text-xs",children:[h.jsx("option",{value:1e3,children:"Rápida"}),h.jsx("option",{value:2e3,children:"Normal"}),h.jsx("option",{value:4e3,children:"Lenta"})]})]})]}),h.jsx("div",{className:"mt-4",children:h.jsx("div",{className:"h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(r+1)/t.length*100}%`}})})})]})});Poe.displayName="StepByStepMode";const Moe=b.memo(({from:t,to:e,data:n,duration:i,className:r,onComplete:s})=>{const[o,a]=b.useState(!1),[l,c]=b.useState(0),u=pa(),d=i??(u.animations?u.executionUnit*2:1e3);return b.useEffect(()=>{a(!0),c(0);const f=Date.now(),p=()=>{const g=Date.now()-f,m=Math.min(g/d,1);c(m),m<1?requestAnimationFrame(p):setTimeout(()=>{a(!1),s==null||s()},500)};requestAnimationFrame(p)},[t,e,n,d,s]),o?h.jsxs("div",{className:te("pointer-events-none absolute inset-0",r),children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"dataFlowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${t} L ${e}`,stroke:"url(#dataFlowGradient)",strokeWidth:"3",strokeDasharray:"10,5",strokeDashoffset:20-l*20,fill:"none",className:"animate-pulse"})]}),["Read","Write"].includes(n)?(()=>{const[f,p]=t.split(" ").map(Number),[g,m]=e.split(" ").map(Number),v=f+(g-f)*l,y=p+(m-p)*l;return h.jsx("div",{className:`absolute z-[100] select-none text-lg font-extrabold ${n==="Read"?"text-red-500":"text-orange-400"}`,style:{left:v,top:y-32,textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:o?1:0,pointerEvents:"none"},children:n})})():h.jsxs("div",{className:te("absolute rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white","border border-mantis-400 shadow-lg","transition-all duration-300 ease-out"),style:{left:`${l*100}%`,transform:"translateX(-50%)",top:"50%",marginTop:"-12px"},children:[n,h.jsx("div",{className:"absolute -top-1 left-1/2 size-0 -translate-x-1/2 border-x-4 border-b-4 border-transparent border-b-mantis-500"})]})]}):null});Moe.displayName="DataFlowAnimation";const Roe={"fetch-decode-execute":{title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instrucción",steps:[{id:"fetch",title:"Fase Fetch",description:"La CPU lee la instrucción desde memoria",duration:2e3,animation:{type:"flow",targets:["IP","MAR","MBR"],data:{from:"IP",to:"MBR",value:"A1"}}},{id:"decode",title:"Fase Decode",description:"La CPU interpreta la instrucción",duration:2e3,animation:{type:"highlight",targets:["IR"],data:{instruction:"MOV AL, 5"}}},{id:"execute",title:"Fase Execute",description:"La CPU ejecuta la operación",duration:2e3,animation:{type:"transform",targets:["AL"],data:{newValue:"05"}}}]},"memory-access":{title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria RAM",steps:[{id:"address-setup",title:"Configurar Dirección",description:"La CPU coloca la dirección en el MAR",duration:1500,animation:{type:"highlight",targets:["MAR"],data:{address:"A0"}}},{id:"memory-read",title:"Lectura de Memoria",description:"El contenido se transfiere al MBR",duration:1500,animation:{type:"flow",targets:["memory-cell-A0","MBR"],data:{from:"memory",to:"MBR",value:"42"}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se mueven al registro destino",duration:1500,animation:{type:"flow",targets:["MBR","AL"],data:{from:"MBR",to:"AL",value:"42"}}}]},"register-transfer":{title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU",steps:[{id:"source-read",title:"Leer Registro Origen",description:"El valor se lee del registro origen",duration:1e3,animation:{type:"highlight",targets:["AL"],data:{value:"25"}}},{id:"bus-transfer",title:"Transferencia por Bus",description:"Los datos viajan por el bus interno",duration:1500,animation:{type:"flow",targets:["AL","BL"],data:{from:"AL",to:"BL",value:"25"}}},{id:"destination-write",title:"Escribir Registro Destino",description:"El valor se almacena en el registro destino",duration:1e3,animation:{type:"transform",targets:["BL"],data:{newValue:"25"}}}]},"alu-operation":{title:"Operación ALU",description:"Proceso de operación aritmética o lógica",steps:[{id:"operand-load",title:"Cargar Operandos",description:"Los operandos se cargan en la ALU",duration:1500,animation:{type:"highlight",targets:["AL","BL"],data:{operand1:"10",operand2:"05"}}},{id:"operation-execute",title:"Ejecutar Operación",description:"La ALU realiza la operación",duration:2e3,animation:{type:"sequence",targets:["ALU"],data:{operation:"ADD",result:"15"}}},{id:"result-store",title:"Almacenar Resultado",description:"El resultado se guarda en el registro destino",duration:1500,animation:{type:"transform",targets:["AL"],data:{newValue:"15"}}}]},"bus-communication":{title:"Comunicación por Bus",description:"Cómo los componentes se comunican a través del bus",steps:[{id:"bus-request",title:"Solicitud de Bus",description:"Un componente solicita acceso al bus",duration:1e3,animation:{type:"highlight",targets:["CPU"],data:{requesting:!0}}},{id:"bus-grant",title:"Concesión de Bus",description:"El bus se concede al componente solicitante",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{granted:!0}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se transfieren por el bus",duration:2e3,animation:{type:"flow",targets:["data-bus"],data:{data:"A1B2",direction:"CPU-to-Memory"}}},{id:"bus-release",title:"Liberación de Bus",description:"El bus se libera para otros componentes",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{released:!0}}}]}},q$=b.memo(({concept:t,onClose:e,className:n})=>{const[i,r]=b.useState(0),[s,o]=b.useState(!1),[a,l]=b.useState(!1),[c,u]=b.useState(!1),d=Roe[t],f=d.steps[i],p=i===0,g=i===d.steps.length-1;b.useEffect(()=>{if(s){const _=setTimeout(()=>{g?o(!1):r(E=>E+1)},f.duration);return()=>clearTimeout(_)}},[s,i,g,f.duration]);const m=b.useCallback(()=>{g||r(_=>_+1)},[g]),v=b.useCallback(()=>{p||r(_=>_-1)},[p]),y=b.useCallback(()=>{r(0),o(!1)},[]),w=b.useCallback(()=>{o(!s)},[s]),x=b.useCallback(()=>{l(!a)},[a]),S=()=>{const{type:_,targets:E,data:C}=f.animation;switch(_){case"highlight":return h.jsxs("div",{className:"relative",children:[E.map((N,R)=>h.jsx("div",{className:"absolute inset-0 animate-pulse rounded border-2 border-mantis-400 bg-mantis-400/20",style:{animationDelay:`${R*200}ms`}},R)),C&&h.jsx("div",{className:"absolute right-2 top-2 rounded bg-mantis-500 px-2 py-1 text-xs text-white",children:Object.entries(C).map(([N,R])=>h.jsxs("div",{children:[N,": ",String(R)]},N))})]});case"flow":return h.jsxs("div",{className:"relative",children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${"from"in C&&C.from||"0,0"} L ${"to"in C&&C.to||"100,100"}`,stroke:"url(#flowGradient)",strokeWidth:"3",strokeDasharray:"10,5",className:"animate-pulse"})]}),"value"in C&&C.value&&h.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:h.jsx("div",{className:"rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:C.value})})]});case"transform":return h.jsxs("div",{className:"relative",children:[E.map((N,R)=>h.jsx("div",{className:"absolute inset-0 animate-ping rounded bg-mantis-400/30",style:{animationDelay:`${R*300}ms`}},R)),"newValue"in C&&C.newValue&&h.jsxs("div",{className:"absolute left-2 top-2 rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:["Nuevo: ",C.newValue]})]});case"sequence":return h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"rounded-lg bg-mantis-500 px-4 py-2 font-mono text-sm text-white",children:"operation"in C&&C.operation?C.operation:"Operación"})}),"result"in C&&C.result&&h.jsxs("div",{className:"absolute bottom-2 right-2 rounded bg-green-500 px-2 py-1 font-mono text-xs text-white",children:["= ",C.result]})]});default:return null}};return h.jsx("div",{className:te("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",a&&"p-0",n),children:h.jsxs("div",{className:te("rounded-lg border border-stone-600 bg-stone-900 shadow-xl",a?"size-full":"max-h-[90vh] w-full max-w-4xl"),children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:d.title}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(bt,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"text-stone-400 hover:text-mantis-400",children:h.jsx(Be,{icon:bL})}),h.jsx(bt,{variant:"ghost",size:"sm",onClick:x,className:"text-stone-400 hover:text-mantis-400",children:h.jsx(Be,{icon:a?zX:nJ})}),h.jsx(bt,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"×"})]})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm text-stone-400",children:[h.jsxs("span",{children:["Paso ",i+1," de ",d.steps.length]}),h.jsx("span",{children:"•"}),h.jsxs("span",{children:[f.duration/1e3,"s"]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(i+1)/d.steps.length*100}%`}})})]}),h.jsxs("div",{className:"flex-1 p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:f.title}),h.jsx("p",{className:"text-sm text-stone-300",children:f.description})]}),h.jsxs("div",{className:"relative h-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-800",children:[S(),c&&h.jsxs("div",{className:"absolute left-2 top-2 max-w-xs rounded border border-stone-600 bg-stone-900/90 p-3",children:[h.jsx("h4",{className:"mb-2 font-medium text-mantis-400",children:"Información"}),h.jsx("p",{className:"text-xs text-stone-300",children:d.description}),h.jsxs("div",{className:"mt-2 text-xs text-stone-400",children:[h.jsxs("div",{children:["Tipo de animación: ",f.animation.type]}),h.jsxs("div",{children:["Elementos: ",f.animation.targets.join(", ")]})]})]})]})]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(bt,{variant:"outline",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx(Be,{icon:WX}),"Reiniciar"]}),h.jsx(bt,{variant:"outline",size:"sm",onClick:v,disabled:p,className:"flex items-center gap-1",children:"Anterior"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(bt,{variant:"outline",size:"sm",onClick:w,className:"flex items-center gap-1",children:[h.jsx(Be,{icon:s?Lh:_p}),s?"Pausar":"Reproducir"]}),h.jsx(bt,{variant:"outline",size:"sm",onClick:m,disabled:g,className:"flex items-center gap-1",children:"Siguiente"})]})]})})]})})});q$.displayName="ConceptVisualizer";const Toe=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Aprende cómo funciona una CPU y sus componentes principales",difficulty:"beginner",estimatedTime:10,steps:[{id:"intro",title:"Introducción a la CPU",description:"¿Qué es una CPU y para qué sirve?",content:"La CPU (Unidad Central de Procesamiento) es el cerebro de la computadora. Se encarga de ejecutar instrucciones y procesar datos.",type:"explanation",completed:!1},{id:"registers",title:"Registros de la CPU",description:"Los registros son memoria rápida dentro de la CPU",content:"Los registros almacenan datos temporalmente durante la ejecución. Son más rápidos que la RAM pero tienen menos capacidad.",type:"explanation",completed:!1},{id:"program-counter",title:"Puntero de Instrucción",description:"El IP indica la siguiente instrucción a ejecutar",content:"El Puntero de Instrucción (IP) se incrementa automáticamente después de cada instrucción.",type:"explanation",completed:!1}]},{id:"memory-basics",title:"Memoria RAM",description:"Comprende cómo funciona la memoria principal",difficulty:"beginner",estimatedTime:8,steps:[{id:"memory-intro",title:"¿Qué es la Memoria RAM?",description:"La memoria de acceso aleatorio",content:"La RAM almacena programas y datos temporalmente. Cada ubicación tiene una dirección única.",type:"explanation",completed:!1},{id:"memory-access",title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria",content:"La CPU usa el bus de direcciones para especificar qué celda de memoria acceder.",type:"explanation",completed:!1},{id:"memory-quiz",title:"Quiz: Direccionamiento",description:"Pon a prueba tu conocimiento",content:"Responde correctamente para continuar.",type:"quiz",exercise:{question:"¿Cuántas direcciones de memoria tiene VonSim8?",options:["128 bytes","256 bytes","512 bytes","1024 bytes"],correctAnswer:1,explanation:"VonSim8 tiene 256 bytes de memoria (direcciones 00-FF en hexadecimal)."},completed:!1}]},{id:"instruction-cycle",title:"Ciclo de Instrucción",description:"Ciclo básico de ejecución de instrucciones",difficulty:"intermediate",estimatedTime:15,steps:[{id:"cycle-intro",title:"El Ciclo de Instrucción",description:"Las dos fases principales",content:"Cada instrucción pasa por dos fases: Fetch (leer) y Execute (ejecutar). La decodificación está incluida en la ejecución.",type:"explanation",completed:!1},{id:"fetch-phase",title:"Fase Fetch",description:"Leer la instrucción de memoria",content:"La CPU lee la instrucción desde la dirección apuntada por el IP.",type:"explanation",completed:!1},{id:"execute-phase",title:"Fase Execute",description:"Ejecutar la operación",content:"La CPU realiza la operación especificada por la instrucción.",type:"explanation",completed:!1}]}],Y$=b.memo(({tutorial:t,onComplete:e,onClose:n,className:i})=>{var j,q;const[r,s]=b.useState(0),[o,a]=b.useState(t.steps),[l,c]=b.useState(!1),[u,d]=b.useState(!1),[f,p]=b.useState(""),[g,m]=b.useState(null),v=o[r],y=r===0,w=r===o.length-1,S=o.filter($=>$.completed).length/o.length*100,_=b.useCallback(()=>{e==null||e(t.id)},[t.id,e]),E=b.useCallback(()=>{w?_():(s($=>$+1),m(null),p(""))},[w,_]),C=b.useCallback(()=>{y||(s($=>$-1),m(null),p(""))},[y]),N=b.useCallback(()=>{a($=>$.map((K,J)=>J===r?{...K,completed:!0}:K))},[r]),R=b.useCallback(()=>{if(!v.exercise)return;const $=f===v.exercise.correctAnswer.toString();m({correct:$,message:$?"¡Correcto!":`Incorrecto. ${v.exercise.explanation}`}),$&&(N(),setTimeout(()=>{E()},2e3))},[v,f,N,E]);b.useEffect(()=>{if(l&&v.type==="explanation"){const $=setTimeout(()=>{w?c(!1):E()},5e3);return()=>clearTimeout($)}},[l,r,w,v.type,E]);const O=$=>{switch($){case"beginner":return"text-blue-400";case"intermediate":return"text-yellow-400";case"advanced":return"text-purple-400";default:return"text-stone-400"}},D=$=>{switch($){case"beginner":return fd;case"intermediate":return vm;case"advanced":return jC;default:return fd}};return h.jsx("div",{className:te("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",i),children:h.jsxs("div",{className:"max-h-[90vh] w-full max-w-2xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:t.title}),h.jsx(bt,{variant:"ghost",size:"sm",onClick:n,className:"text-stone-400 hover:text-white",children:"×"})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Be,{icon:D(t.difficulty),className:O(t.difficulty)}),h.jsx("span",{className:O(t.difficulty),children:t.difficulty==="beginner"?"Básico":t.difficulty==="intermediate"?"Intermedio":"Avanzado"})]}),h.jsx("span",{className:"text-stone-400",children:"•"}),h.jsxs("span",{className:"text-stone-400",children:[t.estimatedTime," min"]}),h.jsx("span",{className:"text-stone-400",children:"•"}),h.jsxs("span",{className:"text-stone-400",children:["Paso ",r+1," de ",o.length]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${S}%`}})})]}),h.jsxs("div",{className:"max-h-96 overflow-y-auto p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:v.title}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:v.description}),h.jsx("div",{className:"text-sm leading-relaxed text-stone-400",children:v.content})]}),v.type==="exercise"||v.type==="quiz"?h.jsxs("div",{className:"rounded-lg border border-stone-600 bg-stone-800 p-4",children:[h.jsx("h4",{className:"mb-3 font-medium text-white",children:(j=v.exercise)==null?void 0:j.question}),(q=v.exercise)!=null&&q.options?h.jsx("div",{className:"space-y-2",children:v.exercise.options.map(($,K)=>h.jsxs("label",{className:te("flex cursor-pointer items-center gap-3 rounded border p-3 transition-colors",f===K.toString()?"border-mantis-400 bg-mantis-400/20":"border-stone-600 bg-stone-700 hover:bg-stone-600"),children:[h.jsx("input",{type:"radio",name:"answer",value:K,checked:f===K.toString(),onChange:J=>p(J.target.value),className:"text-mantis-400"}),h.jsx("span",{className:"text-stone-300",children:$})]},K))}):h.jsx("input",{type:"text",value:f,onChange:$=>p($.target.value),placeholder:"Escribe tu respuesta...",className:"w-full rounded border border-stone-600 bg-stone-700 p-2 text-white"}),g&&h.jsx("div",{className:te("mt-3 rounded border p-3",g.correct?"border-green-400 bg-green-400/20 text-green-400":"border-red-400 bg-red-400/20 text-red-400"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Be,{icon:g.correct?SL:gm}),g.message]})}),v.hints&&v.hints.length>0&&h.jsxs("div",{className:"mt-3",children:[h.jsxs(bt,{variant:"ghost",size:"sm",onClick:()=>d(!u),className:"text-mantis-400 hover:text-mantis-300",children:[h.jsx(Be,{icon:fd,className:"mr-2"}),u?"Ocultar":"Mostrar"," Pistas"]}),u&&h.jsx("div",{className:"mt-2 rounded border border-stone-600 bg-stone-700 p-3",children:h.jsx("ul",{className:"space-y-1 text-sm text-stone-300",children:v.hints.map(($,K)=>h.jsxs("li",{children:["• ",$]},K))})})]})]}):null]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(bt,{variant:"outline",size:"sm",onClick:C,disabled:y,className:"flex items-center gap-1",children:[h.jsx(Be,{icon:wL}),"Anterior"]})}),h.jsx("div",{className:"flex items-center gap-2",children:v.type==="exercise"||v.type==="quiz"?h.jsx(bt,{size:"sm",onClick:R,disabled:!f,className:"bg-mantis-600 hover:bg-mantis-700",children:"Verificar Respuesta"}):h.jsxs(bt,{size:"sm",onClick:E,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700",children:[w?"Completar Tutorial":"Siguiente",!w&&h.jsx(Be,{icon:IC})]})})]})})]})})});Y$.displayName="InteractiveTutorial";const X$=b.memo(({isOpen:t=!1,onShowProgress:e})=>{const[n,i]=b.useState(!1),[r]=b.useState(!1),[s,o]=b.useState(!1),[a,l]=b.useState(!1),[c,u]=b.useState(null),[d,f]=b.useState(null),p=S=>{console.log("Tutorial seleccionado:",S),u(S),o(!0)},g=S=>{f(S),l(!0)},m=()=>{o(!1),u(null)},v=()=>{l(!1),f(null)},y=[{id:"progress",title:"Progreso Educativo",description:"Ver logros y estadísticas de aprendizaje",icon:DC,color:"text-yellow-400",action:()=>e==null?void 0:e()},{id:"tutorials",title:"Tutoriales Interactivos",description:"Aprende paso a paso con ejercicios",icon:cJ,color:"text-blue-400",action:()=>i(!n)}],w=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Conceptos básicos de CPU y registros",difficulty:"Básico",duration:"10 min"},{id:"memory-basics",title:"Memoria RAM",description:"Funcionamiento de la memoria principal",difficulty:"Básico",duration:"8 min"},{id:"instruction-cycle",title:"Ciclo de Instrucción",description:"Fases fetch-decode-execute",difficulty:"Intermedio",duration:"15 min"}],x=[{id:"fetch-decode-execute",title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instrucción"},{id:"memory-access",title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria RAM"},{id:"register-transfer",title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU"},{id:"alu-operation",title:"Operación ALU",description:"Proceso de operación aritmética o lógica"},{id:"bus-communication",title:"Comunicación por Bus",description:"Cómo los componentes se comunican a través del bus"}];return h.jsxs(h.Fragment,{children:[t&&h.jsx("div",{className:"fixed bottom-12 left-1/2 z-50 -translate-x-1/2",children:h.jsxs("div",{className:"min-w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[h.jsxs("div",{className:"mb-4 text-center",children:[h.jsx("h3",{className:"mb-1 text-lg font-semibold text-mantis-400",children:"Centro de Aprendizaje"}),h.jsx("p",{className:"text-sm text-stone-400",children:"Explora herramientas educativas interactivas"})]}),h.jsx("div",{className:"space-y-2",children:y.map(S=>h.jsx("div",{children:S.id==="tutorials"?h.jsxs("div",{children:[h.jsxs("button",{onClick:S.action,className:te("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Be,{icon:S.icon,className:te("text-lg",S.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:S.title}),h.jsx("div",{className:"text-sm text-stone-400",children:S.description})]}),h.jsx(Be,{icon:_p,className:te("text-sm text-stone-400",n&&"text-blue-400")})]}),n&&h.jsx("div",{className:"ml-8 mt-2 space-y-1",children:w.map(_=>h.jsx("button",{onClick:()=>p(_.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:_.title}),h.jsx("div",{className:"text-xs text-stone-400",children:_.description})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-xs text-blue-400",children:_.difficulty}),h.jsx("div",{className:"text-xs text-stone-500",children:_.duration})]})]})},_.id))})]}):S.id==="visualizations"?h.jsxs("div",{children:[h.jsxs("button",{onClick:S.action,className:te("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Be,{icon:S.icon,className:te("text-lg",S.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:S.title}),h.jsx("div",{className:"text-sm text-stone-400",children:S.description})]}),h.jsx(Be,{icon:t3,className:te("text-sm text-stone-400",r&&"text-green-400")})]}),r&&h.jsx("div",{className:"ml-8 mt-2 space-y-1",children:x.map(_=>h.jsx("button",{onClick:()=>g(_.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:_.title}),h.jsx("div",{className:"text-xs text-stone-400",children:_.description})]})},_.id))})]}):h.jsxs("button",{onClick:S.action,className:te("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Be,{icon:S.icon,className:te("text-lg",S.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:S.title}),h.jsx("div",{className:"text-sm text-stone-400",children:S.description})]})]})},S.id))}),h.jsx("div",{className:"mt-4 border-t border-stone-600 pt-3",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsx("span",{children:"Herramientas educativas"}),h.jsx("span",{children:"VonSim8"})]})})]})}),s&&c&&(()=>{const S=Toe.find(_=>_.id===c);return console.log("Tutorial encontrado:",S),S?h.jsx(Y$,{tutorial:S,onComplete:m,onClose:()=>{console.log("Cerrando tutorial"),o(!1),u(null)}}):(console.error("Tutorial no encontrado:",c),null)})(),a&&d&&h.jsx(q$,{concept:d,onClose:v})]})});X$.displayName="EducationalMenu";const wR=[{id:"first_program",type:"programs_written",title:"Primer Programa",description:"Escribe tu primer programa en ensamblador",icon:fd,requirement:1,current:0,unlocked:!1,points:10},{id:"instruction_master",type:"instructions_executed",title:"Maestro de Instrucciones",description:"Ejecuta 100 instrucciones",icon:HX,requirement:100,current:0,unlocked:!1,points:25},{id:"memory_explorer",type:"concept_mastered",title:"Explorador de Memoria",description:"Comprende el funcionamiento de la memoria RAM",icon:dJ,requirement:1,current:0,unlocked:!1,points:15},{id:"cpu_architect",type:"concept_mastered",title:"Arquitecto de CPU",description:"Domina los conceptos de arquitectura de CPU",icon:aJ,requirement:1,current:0,unlocked:!1,points:30},{id:"persistent_learner",type:"time_spent",title:"Estudiante Persistente",description:"Pasa 30 minutos aprendiendo",icon:vm,requirement:30,current:0,unlocked:!1,points:20},{id:"tutorial_master",type:"tutorials_completed",title:"Maestro de Tutoriales",description:"Completa un tutorial interactivo educativo",icon:DC,requirement:1,current:0,unlocked:!1,points:40}],xR=[{id:"beginner",name:"Principiante",description:"Conceptos básicos de programación y arquitectura",concepts:["register","memory","instruction"],requiredPoints:0,unlocked:!0,completed:!1},{id:"intermediate",name:"Intermedio",description:"Operaciones aritméticas y lógicas",concepts:["alu","bus","program-counter"],requiredPoints:50,unlocked:!1,completed:!1},{id:"advanced",name:"Avanzado",description:"Interrupciones y programación compleja",concepts:["flags","stack","interrupts"],requiredPoints:100,unlocked:!1,completed:!1}],J$=b.memo(({className:t,isVisible:e=!1,onClose:n})=>{const[i,r]=b.useState(wR),[s,o]=b.useState(xR),[a,l]=b.useState(0),[c,u]=b.useState(0);b.useEffect(()=>{const v=localStorage.getItem("vonsim8-educational-progress");if(v)try{const y=JSON.parse(v);r(y.achievements||wR),o(y.levels||xR),l(y.totalPoints||0),u(y.sessionTime||0)}catch{}},[]);const d=b.useCallback(()=>{const v={achievements:i,levels:s,totalPoints:a,sessionTime:c,lastSaved:Date.now()};localStorage.setItem("vonsim8-educational-progress",JSON.stringify(v))},[i,s,a,c]),f=b.useCallback((v,y)=>{r(w=>{const x=w.map(_=>{if(_.type===v){const E=Math.min(_.current+y,_.requirement),C=_.unlocked,N=E>=_.requirement;return!C&&N&&p(_),{..._,current:E,unlocked:N}}return _}),S=x.filter(_=>_.unlocked).reduce((_,E)=>_+E.points,0);return l(S),o(_=>_.map(E=>({...E,unlocked:S>=E.requiredPoints}))),x})},[]),p=v=>{const y=document.createElement("div");y.className=te("fixed right-4 top-4 z-50 rounded-lg border-2 p-4 shadow-lg","animate-slide-in-right bg-mantis-500 text-white"),y.innerHTML=`
      <div class="flex items-center gap-3">
        <FontAwesomeIcon icon="${v.icon}" class="text-2xl" />
        <div>
          <div class="font-bold">¡Logro Desbloqueado!</div>
          <div class="text-sm">${v.title}</div>
        </div>
      </div>
    `,document.body.appendChild(y),setTimeout(()=>{y.remove()},3e3)};if(b.useEffect(()=>{const v=y=>{const{type:w,value:x=1}=y.detail;f(w,x)};return window.addEventListener("educational-progress",v),()=>window.removeEventListener("educational-progress",v)},[f]),b.useEffect(()=>{const v=setInterval(()=>{u(y=>{const w=y+1;return w%60===0&&f("time_spent",1),w})},1e3);return()=>clearInterval(v)},[f]),b.useEffect(()=>{const v=setInterval(d,3e4);return()=>clearInterval(v)},[d]),!e)return null;const g=i.filter(v=>v.unlocked),m=s.filter(v=>v.unlocked);return h.jsxs("div",{className:te("fixed bottom-20 right-4 z-50 h-80 w-96 rounded-lg border border-stone-600 bg-stone-900 shadow-xl",t),children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-3",children:[h.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-mantis-400",children:[h.jsx(Be,{icon:DC}),"Progreso Educativo"]}),h.jsx(bt,{variant:"ghost",size:"sm",onClick:n,className:"text-xs text-stone-400 hover:text-white",children:"×"})]}),h.jsxs("div",{className:"h-64 space-y-3 overflow-y-auto p-3",children:[h.jsxs("div",{className:"rounded-lg bg-stone-800 p-3 text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-mantis-400",children:a}),h.jsx("div",{className:"text-xs text-stone-400",children:"Puntos Totales"})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Be,{icon:vm}),"Niveles de Aprendizaje"]}),h.jsx("div",{className:"space-y-1",children:s.map(v=>h.jsxs("div",{className:te("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10 text-mantis-400":"border-stone-600 bg-stone-800 text-stone-500"),children:[h.jsx("div",{className:"font-medium",children:v.name}),h.jsx("div",{className:"text-stone-400",children:v.description}),!v.unlocked&&h.jsxs("div",{className:"mt-1 text-stone-500",children:["Requiere ",v.requiredPoints," puntos"]})]},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Be,{icon:VX}),"Logros (",g.length,"/",i.length,")"]}),h.jsx("div",{className:"space-y-1",children:i.map(v=>h.jsx("div",{className:te("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10":"border-stone-600 bg-stone-800"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Be,{icon:v.icon,className:v.unlocked?"text-mantis-400":"text-stone-500"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:te("font-medium",v.unlocked?"text-mantis-400":"text-stone-400"),children:v.title}),h.jsx("div",{className:"text-stone-500",children:v.description}),h.jsxs("div",{className:"mt-1",children:[h.jsx("div",{className:"h-1 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-1 rounded-full bg-mantis-400 transition-all duration-300",style:{width:`${v.current/v.requirement*100}%`}})}),h.jsxs("div",{className:"mt-1 text-stone-500",children:[v.current,"/",v.requirement]})]})]})]})},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Be,{icon:YX}),"Estadísticas"]}),h.jsxs("div",{className:"text-xs text-stone-400",children:[h.jsxs("div",{children:["Tiempo de sesión: ",Math.floor(c/60),"m ",c%60,"s"]}),h.jsxs("div",{children:["Niveles completados: ",m.length,"/",s.length]})]})]})]})]})});J$.displayName="EducationalProgress";const Z$=b.createContext(null),HE=()=>{const t=b.useContext(Z$);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},Q$=()=>{const[t,e]=b.useState([]),[n,i]=b.useState(!1);b.useEffect(()=>{const c=localStorage.getItem("vonsim8-notifications");if(c)try{const d=JSON.parse(c);if(Array.isArray(d)){const f=d.filter(p=>p&&typeof p=="object"&&"id"in p&&"type"in p&&"title"in p&&"message"in p&&"timestamp"in p&&"read"in p).map(p=>({id:String(p.id),type:p.type,title:String(p.title),message:String(p.message),timestamp:new Date(p.timestamp),read:!!p.read}));e(f)}}catch{e([])}if(!localStorage.getItem("vonsim8-welcome-notification")){const d={id:"welcome",type:"info",title:"¡Bienvenido a VonSim8!",message:"Gracias por usar nuestro simulador. Aquí encontrarás notificaciones importantes sobre el funcionamiento de la aplicación.",timestamp:new Date,read:!1};e(f=>[d,...f]),localStorage.setItem("vonsim8-welcome-notification","true")}},[]),b.useEffect(()=>{localStorage.setItem("vonsim8-notifications",JSON.stringify(t))},[t]);const r=b.useCallback(c=>{const u={...c,id:Date.now().toString(),timestamp:new Date,read:!1};e(d=>[u,...d])},[]),s=b.useCallback(c=>{e(u=>u.map(d=>d.id===c?{...d,read:!0}:d))},[]),o=b.useCallback(()=>{e(c=>c.map(u=>({...u,read:!0})))},[]),a=b.useCallback(c=>{e(u=>u.filter(d=>d.id!==c))},[]),l=b.useCallback(()=>{e([])},[]);return{notifications:t,isOpen:n,setIsOpen:i,addNotification:r,markAsRead:s,markAllAsRead:o,deleteNotification:a,clearAll:l}},Ooe=t=>b.useMemo(()=>{const e=t.length,n=t.filter(r=>!r.read).length,i=t.reduce((r,s)=>(r[s.type]=(r[s.type]||0)+1,r),{});return{total:e,unread:n,byType:i}},[t]),eB=b.memo(({type:t})=>{const e=b.useMemo(()=>{switch(t){case"info":return{icon:e3,className:"text-blue-400"};case"success":return{icon:SL,className:"text-green-400"};case"warning":return{icon:v2,className:"text-yellow-400"};case"error":return{icon:v2,className:"text-red-400"};default:return{icon:e3,className:"text-blue-400"}}},[t]);return h.jsx(Be,{icon:e.icon,className:te("size-4",e.className)})});eB.displayName="NotificationIcon";const Nk=b.memo(({notification:t,onMarkAsRead:e,onDelete:n})=>{const i=b.useCallback(r=>{const o=new Date().getTime()-r.getTime(),a=Math.floor(o/6e4),l=Math.floor(o/36e5),c=Math.floor(o/864e5);return c>0?`${c}d`:l>0?`${l}h`:a>0?`${a}m`:"Ahora"},[]);return h.jsx("div",{className:te("rounded-lg border p-3 transition-colors",t.read?"border-stone-600 bg-stone-800":"border-mantis-500 bg-stone-800/80"),children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(eB,{type:t.type}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsx("h4",{className:"font-medium text-white",children:t.title}),h.jsx("button",{onClick:()=>n(t.id),className:"ml-2 rounded p-1 text-stone-400 transition-colors hover:text-white",children:h.jsx(Be,{icon:gm,size:"sm"})})]}),h.jsx("p",{className:"mt-1 text-sm text-stone-300",children:t.message}),h.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[h.jsx("span",{className:"text-xs text-stone-500",children:i(t.timestamp)}),h.jsxs("div",{className:"flex gap-2",children:[t.title==="Nueva versión disponible"&&h.jsx("button",{onClick:()=>{window.updateVonSim8&&window.updateVonSim8(),e(t.id)},className:"rounded bg-mantis-600 px-2 py-1 text-xs text-white transition-colors hover:bg-mantis-500",children:"Actualizar"}),!t.read&&h.jsx("button",{onClick:()=>e(t.id),className:"text-xs text-mantis-400 transition-colors hover:text-mantis-300",children:"Marcar como leída"})]})]})]})]})})});Nk.displayName="NotificationItem";const tB=b.memo(()=>{const{notifications:t,isOpen:e,setIsOpen:n,markAsRead:i,markAllAsRead:r,deleteNotification:s,clearAll:o}=Q$(),{total:a,unread:l}=Ooe(t),c=b.useCallback(()=>{n(f=>!f)},[n]),u=b.useMemo(()=>t.filter(f=>!f.read),[t]),d=b.useMemo(()=>t.filter(f=>f.read),[t]);return e?h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[h.jsx(Be,{icon:n3,className:"size-4"}),l>0&&h.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]}),h.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Notificaciones (",a,")"]}),h.jsxs("div",{className:"flex gap-2",children:[l>0&&h.jsx(bt,{variant:"ghost",size:"sm",onClick:r,className:"text-xs text-stone-400 hover:text-white",children:"Marcar todas"}),a>0&&h.jsx(bt,{variant:"ghost",size:"sm",onClick:o,className:"text-xs text-red-400 hover:text-red-300",children:"Limpiar"})]})]}),h.jsx("div",{className:"max-h-96 space-y-3 overflow-y-auto",children:t.length===0?h.jsx("p",{className:"text-center text-sm text-stone-500",children:"No hay notificaciones"}):h.jsxs(h.Fragment,{children:[u.length>0&&h.jsx("div",{className:"space-y-2",children:u.map(f=>h.jsx(Nk,{notification:f,onMarkAsRead:i,onDelete:s},f.id))}),d.length>0&&u.length>0&&h.jsx("hr",{className:"border-stone-600"}),d.length>0&&h.jsx("div",{className:"space-y-2",children:d.map(f=>h.jsx(Nk,{notification:f,onMarkAsRead:i,onDelete:s},f.id))})]})})]})]}):h.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[h.jsx(Be,{icon:n3,className:"size-4"}),l>0&&h.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]})});tB.displayName="NotificationCenter";const Ioe=({children:t})=>{const e=Q$(),n=b.useMemo(()=>({addNotification:e.addNotification,markAsRead:e.markAsRead,markAllAsRead:e.markAllAsRead,deleteNotification:e.deleteNotification,clearAll:e.clearAll,notifications:e.notifications}),[e]);return h.jsx(Z$.Provider,{value:n,children:t})};function gy(t,[e,n]){return Math.min(n,Math.max(e,t))}function joe(t,e=globalThis==null?void 0:globalThis.document){const n=_r(t);b.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var Doe="DismissableLayer",Pk="dismissableLayer.update",Loe="dismissableLayer.pointerDownOutside",$oe="dismissableLayer.focusOutside",SR,nB=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Am=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(nB),[u,d]=b.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=b.useState({}),g=ht(e,C=>d(C)),m=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(v),w=u?m.indexOf(u):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,_=Foe(C=>{const N=C.target,R=[...c.branches].some(O=>O.contains(N));!S||R||(r==null||r(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),E=zoe(C=>{const N=C.target;[...c.branches].some(O=>O.contains(N))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return joe(C=>{w===c.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),b.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(SR=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),kR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=SR)}},[u,f,n,c]),b.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),kR())},[u,c]),b.useEffect(()=>{const C=()=>p({});return document.addEventListener(Pk,C),()=>document.removeEventListener(Pk,C)},[]),h.jsx(Ye.div,{...l,ref:g,style:{pointerEvents:x?S?"auto":"none":void 0,...t.style},onFocusCapture:be(t.onFocusCapture,E.onFocusCapture),onBlurCapture:be(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:be(t.onPointerDownCapture,_.onPointerDownCapture)})});Am.displayName=Doe;var Boe="DismissableLayerBranch",iB=b.forwardRef((t,e)=>{const n=b.useContext(nB),i=b.useRef(null),r=ht(e,i);return b.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),h.jsx(Ye.div,{...t,ref:r})});iB.displayName=Boe;function Foe(t,e=globalThis==null?void 0:globalThis.document){const n=_r(t),i=b.useRef(!1),r=b.useRef(()=>{});return b.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){rB(Loe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function zoe(t,e=globalThis==null?void 0:globalThis.document){const n=_r(t),i=b.useRef(!1);return b.useEffect(()=>{const r=s=>{s.target&&!i.current&&rB($oe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function kR(){const t=new CustomEvent(Pk);document.dispatchEvent(t)}function rB(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?yC(r,s):r.dispatchEvent(s)}var Uoe=Am,Voe=iB,Yx=0;function WE(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??_R()),document.body.insertAdjacentElement("beforeend",t[1]??_R()),Yx++,()=>{Yx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Yx--}},[])}function _R(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Xx="focusScope.autoFocusOnMount",Jx="focusScope.autoFocusOnUnmount",CR={bubbles:!1,cancelable:!0},Hoe="FocusScope",Bb=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=b.useState(null),c=_r(r),u=_r(s),d=b.useRef(null),f=ht(e,m=>l(m)),p=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(i){let m=function(x){if(p.paused||!a)return;const S=x.target;a.contains(S)?d.current=S:Pa(d.current,{select:!0})},v=function(x){if(p.paused||!a)return;const S=x.relatedTarget;S!==null&&(a.contains(S)||Pa(d.current,{select:!0}))},y=function(x){if(document.activeElement===document.body)for(const _ of x)_.removedNodes.length>0&&Pa(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),w.disconnect()}}},[i,a,p.paused]),b.useEffect(()=>{if(a){AR.add(p);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(Xx,CR);a.addEventListener(Xx,c),a.dispatchEvent(y),y.defaultPrevented||(Woe(Xoe(sB(a)),{select:!0}),document.activeElement===m&&Pa(a))}return()=>{a.removeEventListener(Xx,c),setTimeout(()=>{const y=new CustomEvent(Jx,CR);a.addEventListener(Jx,u),a.dispatchEvent(y),y.defaultPrevented||Pa(m??document.body,{select:!0}),a.removeEventListener(Jx,u),AR.remove(p)},0)}}},[a,c,u,p]);const g=b.useCallback(m=>{if(!n&&!i||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(v&&y){const w=m.currentTarget,[x,S]=Goe(w);x&&S?!m.shiftKey&&y===S?(m.preventDefault(),n&&Pa(x,{select:!0})):m.shiftKey&&y===x&&(m.preventDefault(),n&&Pa(S,{select:!0})):y===w&&m.preventDefault()}},[n,i,p.paused]);return h.jsx(Ye.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});Bb.displayName=Hoe;function Woe(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(Pa(i,{select:e}),document.activeElement!==n)return}function Goe(t){const e=sB(t),n=ER(e,t),i=ER(e.reverse(),t);return[n,i]}function sB(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ER(t,e){for(const n of t)if(!Koe(n,{upTo:e}))return n}function Koe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function qoe(t){return t instanceof HTMLInputElement&&"select"in t}function Pa(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&qoe(t)&&e&&t.select()}}var AR=Yoe();function Yoe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=NR(t,e),t.unshift(e)},remove(e){var n;t=NR(t,e),(n=t[0])==null||n.resume()}}}function NR(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function Xoe(t){return t.filter(e=>e.tagName!=="A")}const Joe=["top","right","bottom","left"],Ol=Math.min,fr=Math.max,vy=Math.round,Ug=Math.floor,yo=t=>({x:t,y:t}),Zoe={left:"right",right:"left",bottom:"top",top:"bottom"},Qoe={start:"end",end:"start"};function Mk(t,e,n){return fr(t,Ol(e,n))}function ca(t,e){return typeof t=="function"?t(e):t}function ua(t){return t.split("-")[0]}function gf(t){return t.split("-")[1]}function GE(t){return t==="x"?"y":"x"}function KE(t){return t==="y"?"height":"width"}const eae=new Set(["top","bottom"]);function lo(t){return eae.has(ua(t))?"y":"x"}function qE(t){return GE(lo(t))}function tae(t,e,n){n===void 0&&(n=!1);const i=gf(t),r=qE(t),s=KE(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=yy(o)),[o,yy(o)]}function nae(t){const e=yy(t);return[Rk(t),e,Rk(e)]}function Rk(t){return t.replace(/start|end/g,e=>Qoe[e])}const PR=["left","right"],MR=["right","left"],iae=["top","bottom"],rae=["bottom","top"];function sae(t,e,n){switch(t){case"top":case"bottom":return n?e?MR:PR:e?PR:MR;case"left":case"right":return e?iae:rae;default:return[]}}function oae(t,e,n,i){const r=gf(t);let s=sae(ua(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(Rk)))),s}function yy(t){return t.replace(/left|right|bottom|top/g,e=>Zoe[e])}function aae(t){return{top:0,right:0,bottom:0,left:0,...t}}function oB(t){return typeof t!="number"?aae(t):{top:t,right:t,bottom:t,left:t}}function by(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function RR(t,e,n){let{reference:i,floating:r}=t;const s=lo(e),o=qE(e),a=KE(o),l=ua(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let p;switch(l){case"top":p={x:u,y:i.y-r.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-r.width,y:d};break;default:p={x:i.x,y:i.y}}switch(gf(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const lae=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:d}=RR(c,i,l),f=i,p={},g=0;for(let m=0;m<a.length;m++){const{name:v,fn:y}=a[m],{x:w,y:x,data:S,reset:_}=await y({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=w??u,d=x??d,p={...p,[v]:{...p[v],...S}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:u,y:d}=RR(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:p}};async function Jp(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=ca(e,t),g=oB(p),v=a[f?d==="floating"?"reference":"floating":d],y=by(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},_=by(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:x,strategy:l}):w);return{top:(y.top-_.top+g.top)/S.y,bottom:(_.bottom-y.bottom+g.bottom)/S.y,left:(y.left-_.left+g.left)/S.x,right:(_.right-y.right+g.right)/S.x}}const cae=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=ca(t,e)||{};if(c==null)return{};const d=oB(u),f={x:n,y:i},p=qE(r),g=KE(p),m=await o.getDimensions(c),v=p==="y",y=v?"top":"left",w=v?"bottom":"right",x=v?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[p]-f[p]-s.floating[g],_=f[p]-s.reference[p],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=E?E[x]:0;(!C||!await(o.isElement==null?void 0:o.isElement(E)))&&(C=a.floating[x]||s.floating[g]);const N=S/2-_/2,R=C/2-m[g]/2-1,O=Ol(d[y],R),D=Ol(d[w],R),j=O,q=C-m[g]-D,$=C/2-m[g]/2+N,K=Mk(j,$,q),J=!l.arrow&&gf(r)!=null&&$!==K&&s.reference[g]/2-($<j?O:D)-m[g]/2<0,Q=J?$<j?$-j:$-q:0;return{[p]:f[p]+Q,data:{[p]:K,centerOffset:$-K-Q,...J&&{alignmentOffset:Q}},reset:J}}}),uae=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...v}=ca(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=ua(r),w=lo(a),x=ua(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=f||(x||!m?[yy(a)]:nae(a)),E=g!=="none";!f&&E&&_.push(...oae(a,m,g,S));const C=[a,..._],N=await Jp(e,v),R=[];let O=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&R.push(N[y]),d){const $=tae(r,o,S);R.push(N[$[0]],N[$[1]])}if(O=[...O,{placement:r,overflows:R}],!R.every($=>$<=0)){var D,j;const $=(((D=s.flip)==null?void 0:D.index)||0)+1,K=C[$];if(K&&(!(d==="alignment"?w!==lo(K):!1)||O.every(V=>V.overflows[0]>0&&lo(V.placement)===w)))return{data:{index:$,overflows:O},reset:{placement:K}};let J=(j=O.filter(Q=>Q.overflows[0]<=0).sort((Q,V)=>Q.overflows[1]-V.overflows[1])[0])==null?void 0:j.placement;if(!J)switch(p){case"bestFit":{var q;const Q=(q=O.filter(V=>{if(E){const F=lo(V.placement);return F===w||F==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(F=>F>0).reduce((F,re)=>F+re,0)]).sort((V,F)=>V[1]-F[1])[0])==null?void 0:q[0];Q&&(J=Q);break}case"initialPlacement":J=a;break}if(r!==J)return{reset:{placement:J}}}return{}}}};function TR(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function OR(t){return Joe.some(e=>t[e]>=0)}const dae=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=ca(t,e);switch(i){case"referenceHidden":{const s=await Jp(e,{...r,elementContext:"reference"}),o=TR(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:OR(o)}}}case"escaped":{const s=await Jp(e,{...r,altBoundary:!0}),o=TR(s,n.floating);return{data:{escapedOffsets:o,escaped:OR(o)}}}default:return{}}}}},aB=new Set(["left","top"]);async function fae(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=ua(n),a=gf(n),l=lo(n)==="y",c=aB.has(o)?-1:1,u=s&&l?-1:1,d=ca(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const hae=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await fae(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},pae=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:y,y:w}=v;return{x:y,y:w}}},...l}=ca(t,e),c={x:n,y:i},u=await Jp(e,l),d=lo(ua(r)),f=GE(d);let p=c[f],g=c[d];if(s){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",w=p+u[v],x=p-u[y];p=Mk(w,p,x)}if(o){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",w=g+u[v],x=g-u[y];g=Mk(w,g,x)}const m=a.fn({...e,[f]:p,[d]:g});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[f]:s,[d]:o}}}}}},mae=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ca(t,e),u={x:n,y:i},d=lo(r),f=GE(d);let p=u[f],g=u[d];const m=ca(a,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const x=f==="y"?"height":"width",S=s.reference[f]-s.floating[x]+v.mainAxis,_=s.reference[f]+s.reference[x]-v.mainAxis;p<S?p=S:p>_&&(p=_)}if(c){var y,w;const x=f==="y"?"width":"height",S=aB.has(ua(r)),_=s.reference[d]-s.floating[x]+(S&&((y=o.offset)==null?void 0:y[d])||0)+(S?0:v.crossAxis),E=s.reference[d]+s.reference[x]+(S?0:((w=o.offset)==null?void 0:w[d])||0)-(S?v.crossAxis:0);g<_?g=_:g>E&&(g=E)}return{[f]:p,[d]:g}}}},gae=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ca(t,e),u=await Jp(e,c),d=ua(r),f=gf(r),p=lo(r)==="y",{width:g,height:m}=s.floating;let v,y;d==="top"||d==="bottom"?(v=d,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,v=f==="end"?"top":"bottom");const w=m-u.top-u.bottom,x=g-u.left-u.right,S=Ol(m-u[v],w),_=Ol(g-u[y],x),E=!e.middlewareData.shift;let C=S,N=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=x),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(C=w),E&&!f){const O=fr(u.left,0),D=fr(u.right,0),j=fr(u.top,0),q=fr(u.bottom,0);p?N=g-2*(O!==0||D!==0?O+D:fr(u.left,u.right)):C=m-2*(j!==0||q!==0?j+q:fr(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:C});const R=await o.getDimensions(a.floating);return g!==R.width||m!==R.height?{reset:{rects:!0}}:{}}}};function Fb(){return typeof window<"u"}function vf(t){return lB(t)?(t.nodeName||"").toLowerCase():"#document"}function Sr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Eo(t){var e;return(e=(lB(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function lB(t){return Fb()?t instanceof Node||t instanceof Sr(t).Node:!1}function Ns(t){return Fb()?t instanceof Element||t instanceof Sr(t).Element:!1}function _o(t){return Fb()?t instanceof HTMLElement||t instanceof Sr(t).HTMLElement:!1}function IR(t){return!Fb()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Sr(t).ShadowRoot}const vae=new Set(["inline","contents"]);function Nm(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Ps(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!vae.has(r)}const yae=new Set(["table","td","th"]);function bae(t){return yae.has(vf(t))}const wae=[":popover-open",":modal"];function zb(t){return wae.some(e=>{try{return t.matches(e)}catch{return!1}})}const xae=["transform","translate","scale","rotate","perspective"],Sae=["transform","translate","scale","rotate","perspective","filter"],kae=["paint","layout","strict","content"];function YE(t){const e=XE(),n=Ns(t)?Ps(t):t;return xae.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Sae.some(i=>(n.willChange||"").includes(i))||kae.some(i=>(n.contain||"").includes(i))}function _ae(t){let e=Il(t);for(;_o(e)&&!tf(e);){if(YE(e))return e;if(zb(e))return null;e=Il(e)}return null}function XE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Cae=new Set(["html","body","#document"]);function tf(t){return Cae.has(vf(t))}function Ps(t){return Sr(t).getComputedStyle(t)}function Ub(t){return Ns(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Il(t){if(vf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||IR(t)&&t.host||Eo(t);return IR(e)?e.host:e}function cB(t){const e=Il(t);return tf(e)?t.ownerDocument?t.ownerDocument.body:t.body:_o(e)&&Nm(e)?e:cB(e)}function Zp(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=cB(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=Sr(r);if(s){const a=Tk(o);return e.concat(o,o.visualViewport||[],Nm(r)?r:[],a&&n?Zp(a):[])}return e.concat(r,Zp(r,[],n))}function Tk(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function uB(t){const e=Ps(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=_o(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=vy(n)!==s||vy(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function JE(t){return Ns(t)?t:t.contextElement}function bd(t){const e=JE(t);if(!_o(e))return yo(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=uB(e);let o=(s?vy(n.width):n.width)/i,a=(s?vy(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Eae=yo(0);function dB(t){const e=Sr(t);return!XE()||!e.visualViewport?Eae:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Aae(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Sr(t)?!1:e}function Qc(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=JE(t);let o=yo(1);e&&(i?Ns(i)&&(o=bd(i)):o=bd(t));const a=Aae(s,n,i)?dB(s):yo(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=Sr(s),p=i&&Ns(i)?Sr(i):i;let g=f,m=Tk(g);for(;m&&i&&p!==g;){const v=bd(m),y=m.getBoundingClientRect(),w=Ps(m),x=y.left+(m.clientLeft+parseFloat(w.paddingLeft))*v.x,S=y.top+(m.clientTop+parseFloat(w.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=x,c+=S,g=Sr(m),m=Tk(g)}}return by({width:u,height:d,x:l,y:c})}function ZE(t,e){const n=Ub(t).scrollLeft;return e?e.left+n:Qc(Eo(t)).left+n}function fB(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:ZE(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function Nae(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=Eo(i),a=e?zb(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=yo(1);const u=yo(0),d=_o(i);if((d||!d&&!s)&&((vf(i)!=="body"||Nm(o))&&(l=Ub(i)),_o(i))){const p=Qc(i);c=bd(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}const f=o&&!d&&!s?fB(o,l,!0):yo(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function Pae(t){return Array.from(t.getClientRects())}function Mae(t){const e=Eo(t),n=Ub(t),i=t.ownerDocument.body,r=fr(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=fr(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+ZE(t);const a=-n.scrollTop;return Ps(i).direction==="rtl"&&(o+=fr(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function Rae(t,e){const n=Sr(t),i=Eo(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=XE();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}const Tae=new Set(["absolute","fixed"]);function Oae(t,e){const n=Qc(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=_o(t)?bd(t):yo(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function jR(t,e,n){let i;if(e==="viewport")i=Rae(t,n);else if(e==="document")i=Mae(Eo(t));else if(Ns(e))i=Oae(e,n);else{const r=dB(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return by(i)}function hB(t,e){const n=Il(t);return n===e||!Ns(n)||tf(n)?!1:Ps(n).position==="fixed"||hB(n,e)}function Iae(t,e){const n=e.get(t);if(n)return n;let i=Zp(t,[],!1).filter(a=>Ns(a)&&vf(a)!=="body"),r=null;const s=Ps(t).position==="fixed";let o=s?Il(t):t;for(;Ns(o)&&!tf(o);){const a=Ps(o),l=YE(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&Tae.has(r.position)||Nm(o)&&!l&&hB(t,o))?i=i.filter(u=>u!==o):r=a,o=Il(o)}return e.set(t,i),i}function jae(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?zb(e)?[]:Iae(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=jR(e,u,r);return c.top=fr(d.top,c.top),c.right=Ol(d.right,c.right),c.bottom=Ol(d.bottom,c.bottom),c.left=fr(d.left,c.left),c},jR(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Dae(t){const{width:e,height:n}=uB(t);return{width:e,height:n}}function Lae(t,e,n){const i=_o(e),r=Eo(e),s=n==="fixed",o=Qc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=yo(0);function c(){l.x=ZE(r)}if(i||!i&&!s)if((vf(e)!=="body"||Nm(r))&&(a=Ub(e)),i){const p=Qc(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&c();s&&!i&&r&&c();const u=r&&!i&&!s?fB(r,a):yo(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function Zx(t){return Ps(t).position==="static"}function DR(t,e){if(!_o(t)||Ps(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Eo(t)===n&&(n=n.ownerDocument.body),n}function pB(t,e){const n=Sr(t);if(zb(t))return n;if(!_o(t)){let r=Il(t);for(;r&&!tf(r);){if(Ns(r)&&!Zx(r))return r;r=Il(r)}return n}let i=DR(t,e);for(;i&&bae(i)&&Zx(i);)i=DR(i,e);return i&&tf(i)&&Zx(i)&&!YE(i)?n:i||_ae(t)||n}const $ae=async function(t){const e=this.getOffsetParent||pB,n=this.getDimensions,i=await n(t.floating);return{reference:Lae(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Bae(t){return Ps(t).direction==="rtl"}const Fae={convertOffsetParentRelativeRectToViewportRelativeRect:Nae,getDocumentElement:Eo,getClippingRect:jae,getOffsetParent:pB,getElementRects:$ae,getClientRects:Pae,getDimensions:Dae,getScale:bd,isElement:Ns,isRTL:Bae};function mB(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function zae(t,e){let n=null,i;const r=Eo(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=c;if(a||e(),!f||!p)return;const g=Ug(d),m=Ug(r.clientWidth-(u+f)),v=Ug(r.clientHeight-(d+p)),y=Ug(u),x={rootMargin:-g+"px "+-m+"px "+-v+"px "+-y+"px",threshold:fr(0,Ol(1,l))||1};let S=!0;function _(E){const C=E[0].intersectionRatio;if(C!==l){if(!S)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!mB(c,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(_,{...x,root:r.ownerDocument})}catch{n=new IntersectionObserver(_,x)}n.observe(t)}return o(!0),s}function Uae(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=JE(t),u=r||s?[...c?Zp(c):[],...Zp(e)]:[];u.forEach(y=>{r&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=c&&a?zae(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[w]=y;w&&w.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=p)==null||x.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let g,m=l?Qc(t):null;l&&v();function v(){const y=Qc(t);m&&!mB(m,y)&&n(),m=y,g=requestAnimationFrame(v)}return n(),()=>{var y;u.forEach(w=>{r&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d==null||d(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const Vae=hae,Hae=pae,Wae=uae,Gae=gae,Kae=dae,LR=cae,qae=mae,Yae=(t,e,n)=>{const i=new Map,r={platform:Fae,...n},s={...r.platform,_c:i};return lae(t,e,{...r,platform:s})};var Xae=typeof document<"u",Jae=function(){},K0=Xae?b.useLayoutEffect:Jae;function wy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!wy(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!wy(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function gB(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function $R(t,e){const n=gB(t);return Math.round(e*n)/n}function Qx(t){const e=b.useRef(t);return K0(()=>{e.current=t}),e}function Zae(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=b.useState(i);wy(f,i)||p(i);const[g,m]=b.useState(null),[v,y]=b.useState(null),w=b.useCallback(V=>{V!==E.current&&(E.current=V,m(V))},[]),x=b.useCallback(V=>{V!==C.current&&(C.current=V,y(V))},[]),S=s||g,_=o||v,E=b.useRef(null),C=b.useRef(null),N=b.useRef(u),R=l!=null,O=Qx(l),D=Qx(r),j=Qx(c),q=b.useCallback(()=>{if(!E.current||!C.current)return;const V={placement:e,strategy:n,middleware:f};D.current&&(V.platform=D.current),Yae(E.current,C.current,V).then(F=>{const re={...F,isPositioned:j.current!==!1};$.current&&!wy(N.current,re)&&(N.current=re,zl.flushSync(()=>{d(re)}))})},[f,e,n,D,j]);K0(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(V=>({...V,isPositioned:!1})))},[c]);const $=b.useRef(!1);K0(()=>($.current=!0,()=>{$.current=!1}),[]),K0(()=>{if(S&&(E.current=S),_&&(C.current=_),S&&_){if(O.current)return O.current(S,_,q);q()}},[S,_,q,O,R]);const K=b.useMemo(()=>({reference:E,floating:C,setReference:w,setFloating:x}),[w,x]),J=b.useMemo(()=>({reference:S,floating:_}),[S,_]),Q=b.useMemo(()=>{const V={position:n,left:0,top:0};if(!J.floating)return V;const F=$R(J.floating,u.x),re=$R(J.floating,u.y);return a?{...V,transform:"translate("+F+"px, "+re+"px)",...gB(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:re}},[n,a,J.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:q,refs:K,elements:J,floatingStyles:Q}),[u,q,K,J,Q])}const Qae=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?LR({element:i.current,padding:r}).fn(n):{}:i?LR({element:i,padding:r}).fn(n):{}}}},ele=(t,e)=>({...Vae(t),options:[t,e]}),tle=(t,e)=>({...Hae(t),options:[t,e]}),nle=(t,e)=>({...qae(t),options:[t,e]}),ile=(t,e)=>({...Wae(t),options:[t,e]}),rle=(t,e)=>({...Gae(t),options:[t,e]}),sle=(t,e)=>({...Kae(t),options:[t,e]}),ole=(t,e)=>({...Qae(t),options:[t,e]});var ale="Arrow",vB=b.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return h.jsx(Ye.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});vB.displayName=ale;var lle=vB;function QE(t){const[e,n]=b.useState(void 0);return ni(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var eA="Popper",[yB,yf]=Ms(eA),[cle,bB]=yB(eA),wB=t=>{const{__scopePopper:e,children:n}=t,[i,r]=b.useState(null);return h.jsx(cle,{scope:e,anchor:i,onAnchorChange:r,children:n})};wB.displayName=eA;var xB="PopperAnchor",SB=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=bB(xB,n),o=b.useRef(null),a=ht(e,o);return b.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:h.jsx(Ye.div,{...r,ref:a})});SB.displayName=xB;var tA="PopperContent",[ule,dle]=yB(tA),kB=b.forwardRef((t,e)=>{var k,P,I,T,X,G;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=t,v=bB(tA,n),[y,w]=b.useState(null),x=ht(e,ie=>w(ie)),[S,_]=b.useState(null),E=QE(S),C=(E==null?void 0:E.width)??0,N=(E==null?void 0:E.height)??0,R=i+(s!=="center"?"-"+s:""),O=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(c)?c:[c],j=D.length>0,q={padding:O,boundary:D.filter(hle),altBoundary:j},{refs:$,floatingStyles:K,placement:J,isPositioned:Q,middlewareData:V}=Zae({strategy:"fixed",placement:R,whileElementsMounted:(...ie)=>Uae(...ie,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[ele({mainAxis:r+N,alignmentAxis:o}),l&&tle({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?nle():void 0,...q}),l&&ile({...q}),rle({...q,apply:({elements:ie,rects:ee,availableWidth:Re,availableHeight:Ve})=>{const{width:We,height:Fe}=ee.reference,tt=ie.floating.style;tt.setProperty("--radix-popper-available-width",`${Re}px`),tt.setProperty("--radix-popper-available-height",`${Ve}px`),tt.setProperty("--radix-popper-anchor-width",`${We}px`),tt.setProperty("--radix-popper-anchor-height",`${Fe}px`)}}),S&&ole({element:S,padding:a}),ple({arrowWidth:C,arrowHeight:N}),f&&sle({strategy:"referenceHidden",...q})]}),[F,re]=EB(J),pe=_r(g);ni(()=>{Q&&(pe==null||pe())},[Q,pe]);const Z=(k=V.arrow)==null?void 0:k.x,ce=(P=V.arrow)==null?void 0:P.y,B=((I=V.arrow)==null?void 0:I.centerOffset)!==0,[L,U]=b.useState();return ni(()=>{y&&U(window.getComputedStyle(y).zIndex)},[y]),h.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:Q?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:L,"--radix-popper-transform-origin":[(T=V.transformOrigin)==null?void 0:T.x,(X=V.transformOrigin)==null?void 0:X.y].join(" "),...((G=V.hide)==null?void 0:G.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(ule,{scope:n,placedSide:F,onArrowChange:_,arrowX:Z,arrowY:ce,shouldHideArrow:B,children:h.jsx(Ye.div,{"data-side":F,"data-align":re,...m,ref:x,style:{...m.style,animation:Q?void 0:"none"}})})})});kB.displayName=tA;var _B="PopperArrow",fle={top:"bottom",right:"left",bottom:"top",left:"right"},CB=b.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=dle(_B,i),o=fle[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(lle,{...r,ref:n,style:{...r.style,display:"block"}})})});CB.displayName=_B;function hle(t){return t!==null}var ple=t=>({name:"transformOrigin",options:t,fn(e){var v,y,w;const{placement:n,rects:i,middlewareData:r}=e,o=((v=r.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=EB(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=r.arrow)==null?void 0:y.x)??0)+a/2,p=(((w=r.arrow)==null?void 0:w.y)??0)+l/2;let g="",m="";return c==="bottom"?(g=o?d:`${f}px`,m=`${-l}px`):c==="top"?(g=o?d:`${f}px`,m=`${i.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=o?d:`${p}px`):c==="left"&&(g=`${i.floating.width+l}px`,m=o?d:`${p}px`),{data:{x:g,y:m}}}});function EB(t){const[e,n="center"]=t.split("-");return[e,n]}var AB=wB,Vb=SB,nA=kB,iA=CB,mle="Portal",Pm=b.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=b.useState(!1);ni(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?rK.createPortal(h.jsx(Ye.div,{...i,ref:e}),o):null});Pm.displayName=mle;function rA(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var NB=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),gle="VisuallyHidden",sA=b.forwardRef((t,e)=>h.jsx(Ye.span,{...t,ref:e,style:{...NB,...t.style}}));sA.displayName=gle;var vle=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},xu=new WeakMap,Vg=new WeakMap,Hg={},e1=0,PB=function(t){return t&&(t.host||PB(t.parentNode))},yle=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=PB(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},ble=function(t,e,n,i){var r=yle(e,Array.isArray(t)?t:[t]);Hg[n]||(Hg[n]=new WeakMap);var s=Hg[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),g=p!==null&&p!=="false",m=(xu.get(f)||0)+1,v=(s.get(f)||0)+1;xu.set(f,m),s.set(f,v),o.push(f),m===1&&g&&Vg.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),e1++,function(){o.forEach(function(d){var f=xu.get(d)-1,p=s.get(d)-1;xu.set(d,f),s.set(d,p),f||(Vg.has(d)||d.removeAttribute(i),Vg.delete(d)),p||d.removeAttribute(n)}),e1--,e1||(xu=new WeakMap,xu=new WeakMap,Vg=new WeakMap,Hg={})}},MB=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=vle(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),ble(i,r,n,"aria-hidden")):function(){return null}},q0="right-scroll-bar-position",Y0="width-before-scroll-bar",wle="with-scroll-bars-hidden",xle="--removed-body-scroll-bar-size";function t1(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Sle(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var kle=typeof window<"u"?b.useLayoutEffect:b.useEffect,BR=new WeakMap;function _le(t,e){var n=Sle(null,function(i){return t.forEach(function(r){return t1(r,i)})});return kle(function(){var i=BR.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||t1(a,null)}),s.forEach(function(a){r.has(a)||t1(a,o)})}BR.set(n,t)},[t]),n}function Cle(t){return t}function Ele(t,e){e===void 0&&(e=Cle);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function Ale(t){t===void 0&&(t={});var e=Ele(null);return e.options=eo({async:!0,ssr:!1},t),e}var RB=function(t){var e=t.sideCar,n=PD(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return b.createElement(i,eo({},n))};RB.isSideCarExport=!0;function Nle(t,e){return t.useMedium(e),RB}var TB=Ale(),n1=function(){},Hb=b.forwardRef(function(t,e){var n=b.useRef(null),i=b.useState({onScrollCapture:n1,onWheelCapture:n1,onTouchMoveCapture:n1}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noRelative,g=t.noIsolation,m=t.inert,v=t.allowPinchZoom,y=t.as,w=y===void 0?"div":y,x=t.gapMode,S=PD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,E=_le([n,e]),C=eo(eo({},S),r);return b.createElement(b.Fragment,null,u&&b.createElement(_,{sideCar:TB,removeScrollBar:c,shards:d,noRelative:p,noIsolation:g,inert:m,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:x}),o?b.cloneElement(b.Children.only(a),eo(eo({},C),{ref:E})):b.createElement(w,eo({},C,{className:l,ref:E}),a))});Hb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hb.classNames={fullWidth:Y0,zeroRight:q0};var Ple=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Mle(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Ple();return e&&t.setAttribute("nonce",e),t}function Rle(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Tle(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Ole=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Mle())&&(Rle(e,n),Tle(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Ile=function(){var t=Ole();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},OB=function(){var t=Ile(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},jle={left:0,top:0,right:0,gap:0},i1=function(t){return parseInt(t||"",10)||0},Dle=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[i1(n),i1(i),i1(r)]},Lle=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return jle;var e=Dle(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},$le=OB(),wd="data-scroll-locked",Ble=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(wle,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(wd,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(q0,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(Y0,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(q0," .").concat(q0,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Y0," .").concat(Y0,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(wd,`] {
    `).concat(xle,": ").concat(a,`px;
  }
`)},FR=function(){var t=parseInt(document.body.getAttribute(wd)||"0",10);return isFinite(t)?t:0},Fle=function(){b.useEffect(function(){return document.body.setAttribute(wd,(FR()+1).toString()),function(){var t=FR()-1;t<=0?document.body.removeAttribute(wd):document.body.setAttribute(wd,t.toString())}},[])},zle=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;Fle();var s=b.useMemo(function(){return Lle(r)},[r]);return b.createElement($le,{styles:Ble(s,!e,r,n?"":"!important")})},Ok=!1;if(typeof window<"u")try{var Wg=Object.defineProperty({},"passive",{get:function(){return Ok=!0,!0}});window.addEventListener("test",Wg,Wg),window.removeEventListener("test",Wg,Wg)}catch{Ok=!1}var Su=Ok?{passive:!1}:!1,Ule=function(t){return t.tagName==="TEXTAREA"},IB=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Ule(t)&&n[e]==="visible")},Vle=function(t){return IB(t,"overflowY")},Hle=function(t){return IB(t,"overflowX")},zR=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=jB(t,i);if(r){var s=DB(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},Wle=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},Gle=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},jB=function(t,e){return t==="v"?Vle(e):Hle(e)},DB=function(t,e){return t==="v"?Wle(e):Gle(e)},Kle=function(t,e){return t==="h"&&e==="rtl"?-1:1},qle=function(t,e,n,i,r){var s=Kle(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{if(!a)break;var p=DB(t,a),g=p[0],m=p[1],v=p[2],y=m-v-s*g;(g||y)&&jB(t,a)&&(d+=y,f+=g);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},Gg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},UR=function(t){return[t.deltaX,t.deltaY]},VR=function(t){return t&&"current"in t?t.current:t},Yle=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Xle=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Jle=0,ku=[];function Zle(t){var e=b.useRef([]),n=b.useRef([0,0]),i=b.useRef(),r=b.useState(Jle++)[0],s=b.useState(OB)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var m=dq([t.lockRef.current],(t.shards||[]).map(VR),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var y=Gg(m),w=n.current,x="deltaX"in m?m.deltaX:w[0]-y[0],S="deltaY"in m?m.deltaY:w[1]-y[1],_,E=m.target,C=Math.abs(x)>Math.abs(S)?"h":"v";if("touches"in m&&C==="h"&&E.type==="range")return!1;var N=zR(C,E);if(!N)return!0;if(N?_=C:(_=C==="v"?"h":"v",N=zR(C,E)),!N)return!1;if(!i.current&&"changedTouches"in m&&(x||S)&&(i.current=_),!_)return!0;var R=i.current||_;return qle(R,v,m,R==="h"?x:S)},[]),l=b.useCallback(function(m){var v=m;if(!(!ku.length||ku[ku.length-1]!==s)){var y="deltaY"in v?UR(v):Gg(v),w=e.current.filter(function(_){return _.name===v.type&&(_.target===v.target||v.target===_.shadowParent)&&Yle(_.delta,y)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var x=(o.current.shards||[]).map(VR).filter(Boolean).filter(function(_){return _.contains(v.target)}),S=x.length>0?a(v,x[0]):!o.current.noIsolation;S&&v.cancelable&&v.preventDefault()}}},[]),c=b.useCallback(function(m,v,y,w){var x={name:m,delta:v,target:y,should:w,shadowParent:Qle(y)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(S){return S!==x})},1)},[]),u=b.useCallback(function(m){n.current=Gg(m),i.current=void 0},[]),d=b.useCallback(function(m){c(m.type,UR(m),m.target,a(m,t.lockRef.current))},[]),f=b.useCallback(function(m){c(m.type,Gg(m),m.target,a(m,t.lockRef.current))},[]);b.useEffect(function(){return ku.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Su),document.addEventListener("touchmove",l,Su),document.addEventListener("touchstart",u,Su),function(){ku=ku.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,Su),document.removeEventListener("touchmove",l,Su),document.removeEventListener("touchstart",u,Su)}},[]);var p=t.removeScrollBar,g=t.inert;return b.createElement(b.Fragment,null,g?b.createElement(s,{styles:Xle(r)}):null,p?b.createElement(zle,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Qle(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const ece=Nle(TB,Zle);var Wb=b.forwardRef(function(t,e){return b.createElement(Hb,eo({},t,{ref:e,sideCar:ece}))});Wb.classNames=Hb.classNames;var tce=[" ","Enter","ArrowUp","ArrowDown"],nce=[" ","Enter"],eu="Select",[Gb,Kb,ice]=dm(eu),[bf,hve]=Ms(eu,[ice,yf]),qb=yf(),[rce,Hl]=bf(eu),[sce,oce]=bf(eu),LB=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:p,form:g}=t,m=qb(e),[v,y]=b.useState(null),[w,x]=b.useState(null),[S,_]=b.useState(!1),E=ob(c),[C,N]=Sl({prop:i,defaultProp:r??!1,onChange:s,caller:eu}),[R,O]=Sl({prop:o,defaultProp:a,onChange:l,caller:eu}),D=b.useRef(null),j=v?g||!!v.closest("form"):!0,[q,$]=b.useState(new Set),K=Array.from(q).map(J=>J.props.value).join(";");return h.jsx(AB,{...m,children:h.jsxs(rce,{required:p,scope:e,trigger:v,onTriggerChange:y,valueNode:w,onValueNodeChange:x,valueNodeHasChildren:S,onValueNodeHasChildrenChange:_,contentId:df(),value:R,onValueChange:O,open:C,onOpenChange:N,dir:E,triggerPointerDownPosRef:D,disabled:f,children:[h.jsx(Gb.Provider,{scope:e,children:h.jsx(sce,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(J=>{$(Q=>new Set(Q).add(J))},[]),onNativeOptionRemove:b.useCallback(J=>{$(Q=>{const V=new Set(Q);return V.delete(J),V})},[]),children:n})}),j?h.jsxs(nF,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:R,onChange:J=>O(J.target.value),disabled:f,form:g,children:[R===void 0?h.jsx("option",{value:""}):null,Array.from(q)]},K):null]})})};LB.displayName=eu;var $B="SelectTrigger",BB=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=qb(n),o=Hl($B,n),a=o.disabled||i,l=ht(e,o.onTriggerChange),c=Kb(n),u=b.useRef("touch"),[d,f,p]=rF(m=>{const v=c().filter(x=>!x.disabled),y=v.find(x=>x.value===o.value),w=sF(v,m,y);w!==void 0&&o.onValueChange(w.value)}),g=m=>{a||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx(Vb,{asChild:!0,...s,children:h.jsx(Ye.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":iF(o.value)?"":void 0,...r,ref:l,onClick:be(r.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:be(r.onPointerDown,m=>{u.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:be(r.onKeyDown,m=>{const v=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(v&&m.key===" ")&&tce.includes(m.key)&&(g(),m.preventDefault())})})})});BB.displayName=$B;var FB="SelectValue",zB=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=Hl(FB,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=ht(e,l.onValueNodeChange);return ni(()=>{c(u)},[c,u]),h.jsx(Ye.span,{...a,ref:d,style:{pointerEvents:"none"},children:iF(l.value)?h.jsx(h.Fragment,{children:o}):s})});zB.displayName=FB;var ace="SelectIcon",UB=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return h.jsx(Ye.span,{"aria-hidden":!0,...r,ref:e,children:i||"▼"})});UB.displayName=ace;var lce="SelectPortal",VB=t=>h.jsx(Pm,{asChild:!0,...t});VB.displayName=lce;var tu="SelectContent",HB=b.forwardRef((t,e)=>{const n=Hl(tu,t.__scopeSelect),[i,r]=b.useState();if(ni(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?zl.createPortal(h.jsx(WB,{scope:t.__scopeSelect,children:h.jsx(Gb.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),s):null}return h.jsx(GB,{...t,ref:e})});HB.displayName=tu;var as=10,[WB,Wl]=bf(tu),cce="SelectContentImpl",uce=zd("SelectContent.RemoveScroll"),GB=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v,...y}=t,w=Hl(tu,n),[x,S]=b.useState(null),[_,E]=b.useState(null),C=ht(e,k=>S(k)),[N,R]=b.useState(null),[O,D]=b.useState(null),j=Kb(n),[q,$]=b.useState(!1),K=b.useRef(!1);b.useEffect(()=>{if(x)return MB(x)},[x]),WE();const J=b.useCallback(k=>{const[P,...I]=j().map(G=>G.ref.current),[T]=I.slice(-1),X=document.activeElement;for(const G of k)if(G===X||(G==null||G.scrollIntoView({block:"nearest"}),G===P&&_&&(_.scrollTop=0),G===T&&_&&(_.scrollTop=_.scrollHeight),G==null||G.focus(),document.activeElement!==X))return},[j,_]),Q=b.useCallback(()=>J([N,x]),[J,N,x]);b.useEffect(()=>{q&&Q()},[q,Q]);const{onOpenChange:V,triggerPointerDownPosRef:F}=w;b.useEffect(()=>{if(x){let k={x:0,y:0};const P=T=>{var X,G;k={x:Math.abs(Math.round(T.pageX)-(((X=F.current)==null?void 0:X.x)??0)),y:Math.abs(Math.round(T.pageY)-(((G=F.current)==null?void 0:G.y)??0))}},I=T=>{k.x<=10&&k.y<=10?T.preventDefault():x.contains(T.target)||V(!1),document.removeEventListener("pointermove",P),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",I,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",I,{capture:!0})}}},[x,V,F]),b.useEffect(()=>{const k=()=>V(!1);return window.addEventListener("blur",k),window.addEventListener("resize",k),()=>{window.removeEventListener("blur",k),window.removeEventListener("resize",k)}},[V]);const[re,pe]=rF(k=>{const P=j().filter(X=>!X.disabled),I=P.find(X=>X.ref.current===document.activeElement),T=sF(P,k,I);T&&setTimeout(()=>T.ref.current.focus())}),Z=b.useCallback((k,P,I)=>{const T=!K.current&&!I;(w.value!==void 0&&w.value===P||T)&&(R(k),T&&(K.current=!0))},[w.value]),ce=b.useCallback(()=>x==null?void 0:x.focus(),[x]),B=b.useCallback((k,P,I)=>{const T=!K.current&&!I;(w.value!==void 0&&w.value===P||T)&&D(k)},[w.value]),L=i==="popper"?Ik:KB,U=L===Ik?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v}:{};return h.jsx(WB,{scope:n,content:x,viewport:_,onViewportChange:E,itemRefCallback:Z,selectedItem:N,onItemLeave:ce,itemTextRefCallback:B,focusSelectedItem:Q,selectedItemText:O,position:i,isPositioned:q,searchRef:re,children:h.jsx(Wb,{as:uce,allowPinchZoom:!0,children:h.jsx(Bb,{asChild:!0,trapped:w.open,onMountAutoFocus:k=>{k.preventDefault()},onUnmountAutoFocus:be(r,k=>{var P;(P=w.trigger)==null||P.focus({preventScroll:!0}),k.preventDefault()}),children:h.jsx(Am,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:k=>k.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:h.jsx(L,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:k=>k.preventDefault(),...y,...U,onPlaced:()=>$(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:be(y.onKeyDown,k=>{const P=k.ctrlKey||k.altKey||k.metaKey;if(k.key==="Tab"&&k.preventDefault(),!P&&k.key.length===1&&pe(k.key),["ArrowUp","ArrowDown","Home","End"].includes(k.key)){let T=j().filter(X=>!X.disabled).map(X=>X.ref.current);if(["ArrowUp","End"].includes(k.key)&&(T=T.slice().reverse()),["ArrowUp","ArrowDown"].includes(k.key)){const X=k.target,G=T.indexOf(X);T=T.slice(G+1)}setTimeout(()=>J(T)),k.preventDefault()}})})})})})})});GB.displayName=cce;var dce="SelectItemAlignedPosition",KB=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=Hl(tu,n),o=Wl(tu,n),[a,l]=b.useState(null),[c,u]=b.useState(null),d=ht(e,C=>u(C)),f=Kb(n),p=b.useRef(!1),g=b.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:y,focusSelectedItem:w}=o,x=b.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&v&&y){const C=s.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),R=s.valueNode.getBoundingClientRect(),O=y.getBoundingClientRect();if(s.dir!=="rtl"){const X=O.left-N.left,G=R.left-X,ie=C.left-G,ee=C.width+ie,Re=Math.max(ee,N.width),Ve=window.innerWidth-as,We=gy(G,[as,Math.max(as,Ve-Re)]);a.style.minWidth=ee+"px",a.style.left=We+"px"}else{const X=N.right-O.right,G=window.innerWidth-R.right-X,ie=window.innerWidth-C.right-G,ee=C.width+ie,Re=Math.max(ee,N.width),Ve=window.innerWidth-as,We=gy(G,[as,Math.max(as,Ve-Re)]);a.style.minWidth=ee+"px",a.style.right=We+"px"}const D=f(),j=window.innerHeight-as*2,q=m.scrollHeight,$=window.getComputedStyle(c),K=parseInt($.borderTopWidth,10),J=parseInt($.paddingTop,10),Q=parseInt($.borderBottomWidth,10),V=parseInt($.paddingBottom,10),F=K+J+q+V+Q,re=Math.min(v.offsetHeight*5,F),pe=window.getComputedStyle(m),Z=parseInt(pe.paddingTop,10),ce=parseInt(pe.paddingBottom,10),B=C.top+C.height/2-as,L=j-B,U=v.offsetHeight/2,k=v.offsetTop+U,P=K+J+k,I=F-P;if(P<=B){const X=D.length>0&&v===D[D.length-1].ref.current;a.style.bottom="0px";const G=c.clientHeight-m.offsetTop-m.offsetHeight,ie=Math.max(L,U+(X?ce:0)+G+Q),ee=P+ie;a.style.height=ee+"px"}else{const X=D.length>0&&v===D[0].ref.current;a.style.top="0px";const ie=Math.max(B,K+m.offsetTop+(X?Z:0)+U)+I;a.style.height=ie+"px",m.scrollTop=P-B+m.offsetTop}a.style.margin=`${as}px 0`,a.style.minHeight=re+"px",a.style.maxHeight=j+"px",i==null||i(),requestAnimationFrame(()=>p.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,v,y,s.dir,i]);ni(()=>x(),[x]);const[S,_]=b.useState();ni(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const E=b.useCallback(C=>{C&&g.current===!0&&(x(),w==null||w(),g.current=!1)},[x,w]);return h.jsx(hce,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:h.jsx(Ye.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});KB.displayName=dce;var fce="SelectPopperPosition",Ik=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=as,...s}=t,o=qb(n);return h.jsx(nA,{...o,...s,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ik.displayName=fce;var[hce,oA]=bf(tu,{}),jk="SelectViewport",qB=b.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,s=Wl(jk,n),o=oA(jk,n),a=ht(e,s.onViewportChange),l=b.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),h.jsx(Gb.Slot,{scope:n,children:h.jsx(Ye.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:be(r.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const g=window.innerHeight-as*2,m=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),y=Math.max(m,v);if(y<g){const w=y+p,x=Math.min(g,w),S=w-x;d.style.height=x+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});qB.displayName=jk;var YB="SelectGroup",[pce,mce]=bf(YB),gce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=df();return h.jsx(pce,{scope:n,id:r,children:h.jsx(Ye.div,{role:"group","aria-labelledby":r,...i,ref:e})})});gce.displayName=YB;var XB="SelectLabel",vce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=mce(XB,n);return h.jsx(Ye.div,{id:r.id,...i,ref:e})});vce.displayName=XB;var xy="SelectItem",[yce,JB]=bf(xy),ZB=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=Hl(xy,n),l=Wl(xy,n),c=a.value===i,[u,d]=b.useState(s??""),[f,p]=b.useState(!1),g=ht(e,w=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,w,i,r)}),m=df(),v=b.useRef("touch"),y=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(yce,{scope:n,value:i,disabled:r,textId:m,isSelected:c,onItemTextChange:b.useCallback(w=>{d(x=>x||((w==null?void 0:w.textContent)??"").trim())},[]),children:h.jsx(Gb.ItemSlot,{scope:n,value:i,disabled:r,textValue:u,children:h.jsx(Ye.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:g,onFocus:be(o.onFocus,()=>p(!0)),onBlur:be(o.onBlur,()=>p(!1)),onClick:be(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:be(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:be(o.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:be(o.onPointerMove,w=>{var x;v.current=w.pointerType,r?(x=l.onItemLeave)==null||x.call(l):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:be(o.onPointerLeave,w=>{var x;w.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:be(o.onKeyDown,w=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&w.key===" "||(nce.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});ZB.displayName=xy;var bh="SelectItemText",QB=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=Hl(bh,n),a=Wl(bh,n),l=JB(bh,n),c=oce(bh,n),[u,d]=b.useState(null),f=ht(e,y=>d(y),l.onItemTextChange,y=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,y,l.value,l.disabled)}),p=u==null?void 0:u.textContent,g=b.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=c;return ni(()=>(m(g),()=>v(g)),[m,v,g]),h.jsxs(h.Fragment,{children:[h.jsx(Ye.span,{id:l.textId,...s,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?zl.createPortal(s.children,o.valueNode):null]})});QB.displayName=bh;var eF="SelectItemIndicator",bce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return JB(eF,n).isSelected?h.jsx(Ye.span,{"aria-hidden":!0,...i,ref:e}):null});bce.displayName=eF;var Dk="SelectScrollUpButton",wce=b.forwardRef((t,e)=>{const n=Wl(Dk,t.__scopeSelect),i=oA(Dk,t.__scopeSelect),[r,s]=b.useState(!1),o=ht(e,i.onScrollButtonChange);return ni(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(tF,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});wce.displayName=Dk;var Lk="SelectScrollDownButton",xce=b.forwardRef((t,e)=>{const n=Wl(Lk,t.__scopeSelect),i=oA(Lk,t.__scopeSelect),[r,s]=b.useState(!1),o=ht(e,i.onScrollButtonChange);return ni(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(tF,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});xce.displayName=Lk;var tF=b.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,s=Wl("SelectScrollButton",n),o=b.useRef(null),a=Kb(n),l=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>l(),[l]),ni(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(Ye.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:be(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:be(r.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:be(r.onPointerLeave,()=>{l()})})}),Sce="SelectSeparator",kce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return h.jsx(Ye.div,{"aria-hidden":!0,...i,ref:e})});kce.displayName=Sce;var $k="SelectArrow",_ce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=qb(n),s=Hl($k,n),o=Wl($k,n);return s.open&&o.position==="popper"?h.jsx(iA,{...r,...i,ref:e}):null});_ce.displayName=$k;var Cce="SelectBubbleInput",nF=b.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const r=b.useRef(null),s=ht(i,r),o=rA(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(Ye.select,{...n,style:{...NB,...n.style},ref:s,defaultValue:e})});nF.displayName=Cce;function iF(t){return t===""||t===void 0}function rF(t){const e=_r(t),n=b.useRef(""),i=b.useRef(0),r=b.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=b.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function sF(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Ece(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Ece(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Ace=LB,oF=BB,Nce=zB,Pce=UB,Mce=VB,aF=HB,Rce=qB,lF=ZB,Tce=QB;const Kg=Ace,qg=Nce,wh=b.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(oF,{ref:i,className:te("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,h.jsx(Pce,{asChild:!0,children:h.jsx("span",{className:"icon-[lucide--chevron-down] size-4 opacity-50"})})]}));wh.displayName=oF.displayName;const xh=b.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>h.jsx(Mce,{children:h.jsx(aF,{ref:r,className:te("relative z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:h.jsx(Rce,{className:"p-1",children:e})})}));xh.displayName=aF.displayName;const Fs=b.forwardRef(({className:t,children:e,...n},i)=>h.jsx(lF,{ref:i,className:te("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:h.jsx(Tce,{children:e})}));Fs.displayName=lF.displayName;var cF=["PageUp","PageDown"],uF=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],dF={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},wf="Slider",[Bk,Oce,Ice]=dm(wf),[fF,pve]=Ms(wf,[Ice]),[jce,Yb]=fF(wf),hF=b.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[i],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:g,...m}=t,v=b.useRef(new Set),y=b.useRef(0),x=o==="horizontal"?Dce:Lce,[S=[],_]=Sl({prop:u,defaultProp:c,onChange:D=>{var q;(q=[...v.current][y.current])==null||q.focus(),d(D)}}),E=b.useRef(S);function C(D){const j=Uce(S,D);O(D,j)}function N(D){O(D,y.current)}function R(){const D=E.current[y.current];S[y.current]!==D&&f(S)}function O(D,j,{commit:q}={commit:!1}){const $=Gce(s),K=Kce(Math.round((D-i)/s)*s+i,$),J=gy(K,[i,r]);_((Q=[])=>{const V=Fce(Q,J,j);if(Wce(V,l*s)){y.current=V.indexOf(J);const F=String(V)!==String(Q);return F&&q&&f(V),F?V:Q}else return Q})}return h.jsx(jce,{scope:t.__scopeSlider,name:n,disabled:a,min:i,max:r,valueIndexToChangeRef:y,thumbs:v.current,values:S,orientation:o,form:g,children:h.jsx(Bk.Provider,{scope:t.__scopeSlider,children:h.jsx(Bk.Slot,{scope:t.__scopeSlider,children:h.jsx(x,{"aria-disabled":a,"data-disabled":a?"":void 0,...m,ref:e,onPointerDown:be(m.onPointerDown,()=>{a||(E.current=S)}),min:i,max:r,inverted:p,onSlideStart:a?void 0:C,onSlideMove:a?void 0:N,onSlideEnd:a?void 0:R,onHomeKeyDown:()=>!a&&O(i,0,{commit:!0}),onEndKeyDown:()=>!a&&O(r,S.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:j})=>{if(!a){const K=cF.includes(D.key)||D.shiftKey&&uF.includes(D.key)?10:1,J=y.current,Q=S[J],V=s*K*j;O(Q+V,J,{commit:!0})}}})})})})});hF.displayName=wf;var[pF,mF]=fF(wf,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Dce=b.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=b.useState(null),p=ht(e,x=>f(x)),g=b.useRef(void 0),m=ob(r),v=m==="ltr",y=v&&!s||!v&&s;function w(x){const S=g.current||d.getBoundingClientRect(),_=[0,S.width],C=aA(_,y?[n,i]:[i,n]);return g.current=S,C(x-S.left)}return h.jsx(pF,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:h.jsx(gF,{dir:m,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const S=w(x.clientX);o==null||o(S)},onSlideMove:x=>{const S=w(x.clientX);a==null||a(S)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:x=>{const _=dF[y?"from-left":"from-right"].includes(x.key);c==null||c({event:x,direction:_?-1:1})}})})}),Lce=b.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=b.useRef(null),d=ht(e,u),f=b.useRef(void 0),p=!r;function g(m){const v=f.current||u.current.getBoundingClientRect(),y=[0,v.height],x=aA(y,p?[i,n]:[n,i]);return f.current=v,x(m-v.top)}return h.jsx(pF,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:h.jsx(gF,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const v=g(m.clientY);s==null||s(v)},onSlideMove:m=>{const v=g(m.clientY);o==null||o(v)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:m=>{const y=dF[p?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:y?-1:1})}})})}),gF=b.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=Yb(wf,n);return h.jsx(Ye.span,{...c,ref:e,onKeyDown:be(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):cF.concat(uF).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:be(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():i(d)}),onPointerMove:be(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:be(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})})}),vF="SliderTrack",yF=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Yb(vF,n);return h.jsx(Ye.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});yF.displayName=vF;var Fk="SliderRange",bF=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Yb(Fk,n),s=mF(Fk,n),o=b.useRef(null),a=ht(e,o),l=r.values.length,c=r.values.map(f=>SF(f,r.min,r.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return h.jsx(Ye.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});bF.displayName=Fk;var zk="SliderThumb",wF=b.forwardRef((t,e)=>{const n=Oce(t.__scopeSlider),[i,r]=b.useState(null),s=ht(e,a=>r(a)),o=b.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return h.jsx($ce,{...t,ref:s,index:o})}),$ce=b.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,name:r,...s}=t,o=Yb(zk,n),a=mF(zk,n),[l,c]=b.useState(null),u=ht(e,w=>c(w)),d=l?o.form||!!l.closest("form"):!0,f=QE(l),p=o.values[i],g=p===void 0?0:SF(p,o.min,o.max),m=zce(i,o.values.length),v=f==null?void 0:f[a.size],y=v?Vce(v,g,a.direction):0;return b.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${g}% + ${y}px)`},children:[h.jsx(Bk.ItemSlot,{scope:t.__scopeSlider,children:h.jsx(Ye.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:be(t.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),d&&h.jsx(xF,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},i)]})});wF.displayName=zk;var Bce="RadioBubbleInput",xF=b.forwardRef(({__scopeSlider:t,value:e,...n},i)=>{const r=b.useRef(null),s=ht(r,i),o=rA(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(Ye.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});xF.displayName=Bce;function Fce(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function SF(t,e,n){const s=100/(n-e)*(t-e);return gy(s,[0,100])}function zce(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Uce(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function Vce(t,e,n){const i=t/2,s=aA([0,50],[0,i]);return(i-s(e)*n)*n}function Hce(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Wce(t,e){if(e>0){const n=Hce(t);return Math.min(...n)>=e}return!0}function aA(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function Gce(t){return(String(t).split(".")[1]||"").length}function Kce(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var kF=hF,qce=yF,Yce=bF,Xce=wF;const Oa=b.forwardRef(({className:t,...e},n)=>h.jsxs(kF,{ref:n,className:te("relative flex touch-none select-none items-center",t),...e,children:[h.jsx(qce,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:h.jsx(Yce,{className:"absolute h-full bg-mantis-400"})}),h.jsx(Xce,{className:"block size-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Oa.displayName=kF.displayName;var Xb="Switch",[Jce,mve]=Ms(Xb),[Zce,Qce]=Jce(Xb),_F=b.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,p]=b.useState(null),g=ht(e,x=>p(x)),m=b.useRef(!1),v=f?u||!!f.closest("form"):!0,[y,w]=Sl({prop:r,defaultProp:s??!1,onChange:c,caller:Xb});return h.jsxs(Zce,{scope:n,checked:y,disabled:a,children:[h.jsx(Ye.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":NF(y),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:g,onClick:be(t.onClick,x=>{w(S=>!S),v&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})}),v&&h.jsx(AF,{control:f,bubbles:!m.current,name:i,value:l,checked:y,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});_F.displayName=Xb;var CF="SwitchThumb",EF=b.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=Qce(CF,n);return h.jsx(Ye.span,{"data-state":NF(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})});EF.displayName=CF;var eue="SwitchBubbleInput",AF=b.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:i=!0,...r},s)=>{const o=b.useRef(null),a=ht(o,s),l=rA(n),c=QE(e);return b.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&p){const g=new Event("click",{bubbles:i});p.call(u,n),u.dispatchEvent(g)}},[l,n,i]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:a,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});AF.displayName=eue;function NF(t){return t?"checked":"unchecked"}var PF=_F,tue=EF;const Ia=b.forwardRef(({className:t,...e},n)=>h.jsx(PF,{className:te("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:h.jsx(tue,{className:te("pointer-events-none block size-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ia.displayName=PF.displayName;const Jb=de(!1);function nue(t){return(1e3/t).toFixed(1)}function MF({className:t}){const e=nn(),[n,i]=pa(),{status:r}=Fn();return h.jsxs("div",{className:te("overflow-auto scrollbar-stone-700",t),children:[h.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[h.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),h.jsxs(Mi,{children:[h.jsxs(Ri,{children:[h.jsxs(Ti,{children:[h.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),h.jsx(_u,{children:e("settings.animations.description")})]}),h.jsx(Ia,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&_E()}})]}),h.jsxs(Mi,{children:[h.jsx(Ri,{children:h.jsxs(Ti,{children:[h.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),h.jsx(Oa,{className:"w-44",...HR({value:n.executionUnit,onValueChange:s=>i(o=>({...o,executionUnit:s})),min:500,max:1})})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(Mi,{children:[h.jsx(Ri,{children:h.jsx(Ti,{children:e("settings.instructionCycle.label")})}),h.jsx(Ia,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>i(o=>({...o,showInstructionCycle:s}))})]}),h.jsxs(Mi,{children:[h.jsx(Ri,{children:h.jsx(Ti,{children:e("settings.statsCPU.label")})}),h.jsx(Ia,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>i(o=>({...o,showStatsCPU:s}))})]}),h.jsxs(Mi,{children:[h.jsxs(Ri,{children:[h.jsxs(Ti,{children:[h.jsx("span",{className:"icon-[lucide--cpu] size-6"}),"Velocidad CPU (Hz)"]}),h.jsxs(_u,{children:[h.jsxs("span",{className:"font-medium text-stone-300",children:[n.cpuSpeed," Hz"]})," (",(1/n.cpuSpeed).toFixed(2),"s por ciclo)",n.cpuSpeed===1&&" - Muy lenta",n.cpuSpeed===2&&" - Lenta",n.cpuSpeed===4&&" - Normal",n.cpuSpeed===10&&" - Rápida"]})]}),h.jsxs("div",{className:"flex flex-col items-end gap-2",children:[h.jsx(Oa,{className:"w-44",value:[n.cpuSpeed===1?0:n.cpuSpeed===2?1:n.cpuSpeed===4?2:3],onValueChange:([s])=>{const o=[1,2,4,10];i(a=>({...a,cpuSpeed:o[s]}))},min:0,max:3,step:1}),h.jsxs("div",{className:"flex w-44 justify-between text-xs text-stone-500",children:[h.jsx("span",{children:"1 Hz"}),h.jsx("span",{children:"2 Hz"}),h.jsx("span",{children:"4 Hz"}),h.jsx("span",{children:"10 Hz"})]})]})]}),h.jsxs(Mi,{children:[h.jsxs(Ri,{children:[h.jsxs(Ti,{children:[h.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),h.jsx(_u,{children:e("settings.flags.description")})]}),h.jsxs(Kg,{value:n.flagsVisibility,onValueChange:s=>i(o=>({...o,flagsVisibility:s})),children:[h.jsx(wh,{className:"w-32",children:h.jsx(qg,{})}),h.jsxs(xh,{children:[h.jsx(Fs,{value:"CF_ZF",children:"C Z"}),h.jsx(Fs,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(Mi,{children:h.jsxs(Ri,{children:[h.jsxs(Ti,{children:[h.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),h.jsx(_u,{children:e("settings.devices.description")})]})}),h.jsxs(Mi,{children:[h.jsx(Ri,{children:h.jsx(Ti,{children:e("settings.devices.keyboard-and-screen")})}),h.jsx(Ia,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),h.jsxs(Mi,{children:[h.jsxs(Ri,{children:[h.jsx(Ti,{children:e("settings.devices.pic.label")}),h.jsx(_u,{children:e("settings.devices.pic.description")})]}),h.jsx(Ia,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,pic:s}}))})]}),h.jsxs(Mi,{children:[h.jsx(Ri,{children:h.jsx(Ti,{children:e("settings.devices.pio.label")})}),h.jsxs(Kg,{value:n.devices.pio??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[h.jsx(wh,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(qg,{})}),h.jsx(xh,{children:qJ.map(s=>h.jsx(Fs,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),h.jsxs(Mi,{children:[h.jsx(Ri,{children:h.jsx(Ti,{children:e("settings.devices.handshake.label")})}),h.jsxs(Kg,{value:n.devices.handshake??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:r.type!=="stopped",children:[h.jsx(wh,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(qg,{})}),h.jsx(xh,{children:YJ.map(s=>h.jsx(Fs,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),(n.devices.pio==="printer"||n.devices.handshake==="printer")&&h.jsxs(Mi,{children:[h.jsx(Ri,{children:h.jsxs(Ti,{children:[h.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),h.jsx(Oa,{className:"w-44",...HR({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),n.devices.pic&&h.jsxs(Mi,{children:[h.jsx(Ri,{children:h.jsxs(Ti,{children:[h.jsx("span",{className:"icon-[lucide--timer] size-6"}),"Frecuencia del Timer"]})}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs(Kg,{value:n.clockSpeed.toString(),onValueChange:s=>i(o=>({...o,clockSpeed:parseInt(s)})),children:[h.jsx(wh,{className:"w-40",children:h.jsx(qg,{})}),h.jsxs(xh,{children:[h.jsx(Fs,{value:"100",title:"Timer muy frecuente - Interrupciones cada 0.1 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Muy Frecuente"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.1s"})]})}),h.jsx(Fs,{value:"400",title:"Timer frecuente - Interrupciones cada 0.4 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Frecuente"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.4s"})]})}),h.jsx(Fs,{value:"600",title:"Timer normal - Interrupciones cada 0.6 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Normal"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.6s"})]})}),h.jsx(Fs,{value:"800",title:"Timer lento - Interrupciones cada 0.8 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Lento"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.8s"})]})}),h.jsx(Fs,{value:"1000",title:"Timer muy lento - Interrupciones cada 1 segundo",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Muy Lento"}),h.jsx("span",{className:"text-xs text-stone-400",children:"1.0s"})]})})]})]}),h.jsxs("div",{className:"flex items-center gap-1 text-xs text-stone-400",children:[h.jsx("span",{className:"icon-[lucide--info] size-4"}),h.jsxs("span",{children:["Frecuencia: ",nue(n.clockSpeed)," Hz"]})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(Mi,{children:[h.jsxs(Ri,{children:[h.jsxs(Ti,{children:[h.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),h.jsxs(_u,{children:[e("settings.filters.description"),h.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:Mu.filterBightness,filterContrast:Mu.filterContrast,filterInvert:Mu.filterInvert,filterSaturation:Mu.filterSaturation})),children:e("settings.filters.revert")})]})]}),h.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[h.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),h.jsx(Oa,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),h.jsx(Oa,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),h.jsx(Ia,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),h.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),h.jsx(Oa,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("div",{className:"flex justify-end p-4",children:h.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...Mu,language:s.language,devices:s.devices})),children:[h.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function Mi({children:t}){return h.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Ri({children:t}){return h.jsx("div",{className:"grow",children:t})}function Ti({children:t}){return h.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function _u({children:t}){return h.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function HR({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}const iue=()=>({handleShowTour:b.useCallback(()=>{window.startWelcomeTour?window.startWelcomeTour():(localStorage.removeItem("vonsim8-tour-completed"),window.location.reload())},[])}),Uk=b.memo(({status:t,isMobile:e,isCompact:n})=>{const i=st(Hn),[r,s]=b.useState(null),[o,a]=b.useState(!1),l=b.useMemo(()=>{switch(t.type){case"running":return"Ejecutando";case"paused":return"Pausado";default:return"Detenido"}},[t.type]),c=b.useMemo(()=>{switch(t.type){case"running":return"bg-green-600";case"paused":return"bg-yellow-600";default:return"bg-stone-600"}},[t.type]);b.useEffect(()=>{if(i&&i.phase&&i.phase!==r){s(i.phase),a(!0);const p=setTimeout(()=>{a(!1)},800);return()=>clearTimeout(p)}},[i,r]);const u=b.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"Captación";case"fetching-operands":return"Obtención de operandos";case"fetching-operands-completed":return"Operandos obtenidos";case"executing":return"Ejecución";case"writeback":return"Escritura";case"interrupt":return"Interrupción";case"int6":case"int7":return"Interrupción";case"halting":return"Detener CPU";default:return""}},[i,t.type]),d=b.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"fetching-operands":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"fetching-operands-completed":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"executing":return"bg-green-500/20 text-green-400 border-green-500/30";case"writeback":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"interrupt":return"bg-red-500/20 text-red-400 border-red-500/30";case"int6":case"int7":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"halting":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-stone-500/20 text-stone-400 border-stone-500/30"}},[i,t.type]),f=b.useMemo(()=>{if(!o||!i)return"";switch(i.phase){case"fetching":return"animate-phase-pulse-blue";case"fetching-operands":return"animate-phase-pulse-yellow";case"fetching-operands-completed":return"animate-phase-pulse-yellow";case"executing":return"animate-phase-pulse-green";case"writeback":return"animate-phase-pulse-purple";case"interrupt":return"animate-phase-pulse-red";case"int6":case"int7":return"animate-phase-pulse-orange";case"halting":return"animate-phase-pulse-red";default:return"animate-phase-pulse-stone"}},[o,i]);return h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:te("flex items-center gap-1.5 rounded-full px-2 py-1 font-medium text-white",c,t.type==="running"&&"animate-pulse-glow",e&&"px-1.5 py-0.5",n&&"px-1 py-0.5"),children:[h.jsx("div",{className:te("size-2 rounded-full",t.type==="running"?"bg-green-300":t.type==="paused"?"bg-yellow-300":"bg-stone-300")}),!e&&!n&&l]}),(t.type==="running"||i&&i.phase==="halting")&&u&&h.jsxs("div",{className:te("rounded-xl border text-[10px] font-semibold uppercase tracking-wider backdrop-blur-sm transition-all duration-200 ease-in-out",d,f,e?"flex min-h-[20px] items-center justify-center whitespace-nowrap px-2 py-0.5 text-[8px]":n?"flex min-h-[18px] items-center justify-center whitespace-nowrap px-1.5 py-0.5 text-[8px]":"px-2 py-1"),children:[u," "]})]})});Uk.displayName="SimulationStatus";const RF=b.memo(({onShowTour:t,onToggleSettings:e,settingsOpen:n,onToggleEducational:i,educationalOpen:r})=>{const s=nn();return h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(tB,{}),h.jsx(xr,{content:"Centro de aprendizaje",position:"bottom",children:h.jsx(R0,{icon:h.jsx(Be,{icon:vm,className:"size-4"}),onClick:i,variant:r?"secondary":"ghost",size:"md","aria-label":"Centro de aprendizaje",className:te("hover-lift",r&&"animate-pulse-glow"),"data-testid":"educational-button"})}),h.jsx(xr,{content:"Mostrar tour de bienvenida",position:"bottom",children:h.jsx(R0,{icon:h.jsx(Be,{icon:JX,className:"size-4"}),onClick:t,variant:"ghost",size:"md","aria-label":"Mostrar tour de bienvenida",className:"hover-lift"})}),h.jsx(xr,{content:s("settings.title"),position:"bottom",children:h.jsx(R0,{icon:h.jsx("span",{className:"icon-[lucide--settings] block size-5"}),onClick:e,variant:n?"secondary":"ghost",size:"md","aria-label":s("settings.title"),className:te("hover-lift",n&&"animate-pulse-glow"),"data-testid":"settings-button"})})]})});RF.displayName="ActionButtons";const TF=b.memo(()=>{const[t,e]=hm(Jb),[n,i]=b.useState(!1),[r,s]=b.useState(!1),{status:o}=Fn(),{handleShowTour:a}=iue(),[l,c]=b.useState("desktop");b.useEffect(()=>{const v=()=>{const y=window.innerWidth;y<=480?c("mobile"):y<=768?c("compact"):y<=1024?c("tablet"):c("desktop")};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const u=b.useCallback(()=>{e(v=>!v)},[e]),d=b.useCallback(()=>{i(v=>!v)},[]),f=b.useCallback(()=>{s(v=>!v)},[]),p=b.useMemo(()=>h.jsxs("div",{className:"hover-scale flex select-none items-center justify-center",children:[h.jsxs("div",{className:"group relative flex size-10 items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-mantis-500 to-mantis-600 shadow-lg hover:scale-105",children:[h.jsx("div",{className:"absolute inset-0 opacity-10",children:h.jsx("div",{className:"size-full bg-[radial-gradient(circle_at_30%_30%,rgba(255,255,255,0.1)_1px,transparent_1px),radial-gradient(circle_at_70%_70%,rgba(255,255,255,0.1)_1px,transparent_1px)] bg-[length:8px_8px]"})}),h.jsx("div",{className:"relative z-10 flex items-center justify-center",children:h.jsx("span",{className:"text-lg font-bold tracking-tight text-white",children:"V8"})}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/10 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),h.jsx("div",{className:"absolute -right-0.5 -top-0.5 size-2 animate-pulse rounded-full bg-mantis-300"})]}),h.jsxs("div",{className:"ml-3 flex flex-col",children:[h.jsxs("h1",{className:"text-lg font-bold max-sm:hidden",children:["Von",h.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]}),h.jsx("span",{className:"text-xs text-stone-400 max-sm:hidden",children:"Simulador CPU 8-bit"})]})]}),[]),m=(()=>{switch(l){case"mobile":return{gridCols:"grid-cols-2",showStatusLeft:!0,showStatusCenter:!1,showActionButtons:!1,isCompact:!0,isMobile:!0};case"compact":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!1,isCompact:!0,isMobile:!1};case"tablet":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1};case"desktop":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1}}})();return h.jsxs(h.Fragment,{children:[h.jsx("header",{className:te("relative bg-black text-sm text-white",l==="mobile"?"header-mobile p-2":l==="compact"?"header-compact p-2":l==="tablet"?"header-tablet p-2":"p-2"),"data-testid":"header",children:h.jsxs("div",{className:te("grid items-center",m.gridCols),children:[h.jsxs("div",{className:"flex items-center gap-3",children:[p,m.showStatusLeft&&h.jsx(Uk,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})]}),m.showStatusCenter&&h.jsx("div",{className:"flex justify-center",children:h.jsx(Uk,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})}),h.jsxs("div",{className:"flex items-center justify-end gap-6",children:[h.jsx("div",{className:"flex justify-end",children:h.jsx(Noe,{})}),m.showActionButtons&&h.jsx(RF,{onShowTour:a,onToggleSettings:u,settingsOpen:t,onToggleEducational:d,educationalOpen:n})]})]})}),!m.isMobile&&n&&h.jsx(X$,{isOpen:n,onClose:()=>i(!1),onShowProgress:f}),!m.isMobile&&r&&h.jsx(J$,{isVisible:r,onClose:()=>s(!1)})]})});TF.displayName="Header";const rue=[{key:"F7",description:"Ejecutar un ciclo",category:"Simulación"},{key:"F8",description:"Ejecutar una instrucción completa",category:"Simulación"},{key:"F4",description:"Ejecución infinita",category:"Simulación"},{key:"F9",description:"Resetear simulación",category:"Simulación"},{key:"Espacio",description:"Pausar/Reanudar (cuando está ejecutando)",category:"Simulación"},{key:"Ctrl+S",description:"Guardar archivo",category:"Editor"},{key:"Ctrl+O",description:"Abrir archivo",category:"Editor"},{key:"Ctrl+N",description:"Nuevo archivo",category:"Editor"},{key:"Ctrl+Z",description:"Deshacer",category:"Editor"},{key:"Ctrl+Y",description:"Rehacer",category:"Editor"},{key:"Ctrl+F",description:"Buscar",category:"Editor"},{key:"Ctrl+H",description:"Reemplazar",category:"Editor"},{key:"Tab",description:"Indentar",category:"Editor"},{key:"Shift+Tab",description:"Desindentar",category:"Editor"},{key:"F1",description:"Mostrar atajos de teclado",category:"Navegación"},{key:"F2",description:"Abrir configuración",category:"Navegación"},{key:"F3",description:"Buscar en el código",category:"Navegación"},{key:"F5",description:"Actualizar página",category:"Navegación"},{key:"F6",description:"Cambiar foco al editor",category:"Navegación"},{key:"Escape",description:"Cerrar diálogos",category:"Interfaz"},{key:"Ctrl+Shift+P",description:"Paleta de comandos",category:"Interfaz"},{key:"Ctrl+B",description:"Mostrar/ocultar barra lateral",category:"Interfaz"},{key:"Ctrl+J",description:"Mostrar/ocultar terminal",category:"Interfaz"},{key:"Ctrl++",description:"Zoom in",category:"Vista"},{key:"Ctrl+-",description:"Zoom out",category:"Vista"},{key:"Ctrl+0",description:"Resetear zoom",category:"Vista"},{key:"Ctrl+Shift+Z",description:"Zoom a la selección",category:"Vista"},{key:"F12",description:"Herramientas de desarrollador",category:"Desarrollo"},{key:"Ctrl+Shift+I",description:"Inspeccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+C",description:"Seleccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+J",description:"Consola",category:"Desarrollo"},{key:"Ctrl+Shift+M",description:"Vista móvil",category:"Desarrollo"}],sue=()=>{const[t,e]=b.useState(!1),n=b.useCallback(()=>{e(!0)},[]),i=b.useCallback(()=>{e(!1)},[]);return b.useEffect(()=>{const r=s=>{s.key==="F1"&&(s.preventDefault(),n())};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n]),{isOpen:t,openModal:n,closeModal:i}},oue=()=>b.useMemo(()=>{const t=rue.reduce((e,n)=>(e[n.category]||(e[n.category]=[]),e[n.category].push(n),e),{});return Object.entries(t).sort(([e],[n])=>e.localeCompare(n))},[]),OF=b.memo(({shortcut:t})=>h.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-stone-800 p-3 transition-colors hover:bg-stone-700",children:[h.jsx("span",{className:"text-sm text-stone-300",children:t.description}),h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-2 py-1 font-mono text-xs text-white",children:t.key})]}));OF.displayName="ShortcutItem";const IF=b.memo(({category:t,shortcuts:e})=>h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"border-b border-stone-600 pb-2 text-lg font-semibold text-mantis-400",children:t}),h.jsx("div",{className:"space-y-2",children:e.map((n,i)=>h.jsx(OF,{shortcut:n},`${t}-${i}`))})]}));IF.displayName="ShortcutCategory";const jF=b.memo(()=>{const{isOpen:t,closeModal:e}=sue(),n=oue(),i=b.useCallback(s=>{s.target===s.currentTarget&&e()},[e]),r=b.useCallback(s=>{s.key==="Escape"&&e()},[e]);return b.useEffect(()=>{if(t)return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t,r]),t?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:i,children:h.jsxs("div",{className:"max-h-[80vh] w-full max-w-4xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"icon-[lucide--keyboard] size-6 text-mantis-400"}),h.jsx("h2",{className:"text-xl font-semibold text-white",children:"Atajos de Teclado"})]}),h.jsx("button",{onClick:e,className:"rounded p-2 text-stone-400 transition-colors hover:text-white",children:h.jsx(Be,{icon:gm,size:"lg"})})]}),h.jsx("div",{className:"max-h-[calc(80vh-80px)] overflow-y-auto p-4",children:h.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:n.map(([s,o])=>h.jsx(IF,{category:s,shortcuts:o},s))})}),h.jsx("div",{className:"border-t border-stone-600 bg-stone-800 p-4",children:h.jsxs("div",{className:"flex items-center justify-between text-sm text-stone-400",children:[h.jsxs("span",{children:["Presiona"," ",h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-1 py-0.5 font-mono text-xs",children:"F1"})," ","para abrir este diálogo"]}),h.jsx(bt,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"Cerrar"})]})})]})}):null});jF.displayName="KeyboardShortcuts";function aue(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await UC(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:e}).then(d=>{s?s("/VonSim8/sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const DF=()=>{const t=HE(),e=b.useMemo(()=>(t==null?void 0:t.addNotification)||(()=>{}),[t==null?void 0:t.addNotification]),[n,i]=b.useState({available:!1,updating:!1,lastUpdate:null}),r=b.useRef(null);return b.useEffect(()=>{const s=aue({onNeedRefresh(){i(c=>({...c,available:!0})),e({type:"info",title:"Nueva versión disponible",message:"Hay una nueva versión de VonSim8 disponible. Haz clic en 'Actualizar' para aplicar los cambios."}),typeof window<"u"&&window.VonSimAddNotification&&window.VonSimAddNotification({type:"info",title:"Actualización disponible",message:"Una nueva versión está lista para instalar."})},onOfflineReady(){e({type:"success",title:"Modo offline disponible",message:"VonSim8 ahora está disponible para uso offline."})},onRegistered(c){console.log("Service Worker registrado:",c),c.waiting&&i(u=>({...u,available:!0}))},onRegisterError(c){console.error("Error al registrar Service Worker:",c),e({type:"error",title:"Error de actualización",message:"No se pudo configurar la actualización automática. Algunas funciones pueden no estar disponibles."})}});r.current=s;const o=async()=>{if(r.current){i(c=>({...c,updating:!0}));try{r.current(),i(c=>({...c,available:!1,updating:!1,lastUpdate:new Date})),e({type:"success",title:"Actualización aplicada",message:"La nueva versión se ha aplicado correctamente."})}catch(c){console.error("Error al actualizar:",c),i(u=>({...u,updating:!1})),e({type:"error",title:"Error al actualizar",message:"No se pudo aplicar la actualización. Inténtalo de nuevo."})}}};window.updateVonSim8=o;const a=()=>{r.current&&r.current()};window.checkVonSim8Updates=a;const l=setInterval(a,5*60*1e3);return()=>{delete window.updateVonSim8,delete window.checkVonSim8Updates,clearInterval(l)}},[e]),{updateInfo:n,updateApp:()=>{r.current&&r.current()},checkForUpdates:()=>{r.current&&r.current()}}},WR="vonsim8-commit-hash",lue=5*60*1e3,LF=()=>{const t=HE(),e=b.useMemo(()=>(t==null?void 0:t.addNotification)||(()=>{}),[t==null?void 0:t.addNotification]),[n,i]=b.useState({currentHash:"e7416a1",lastKnownHash:null,hasUpdate:!1,lastCheck:null}),r=b.useCallback(()=>{try{const a=localStorage.getItem(WR),l="e7416a1";return i(c=>({...c,currentHash:l,lastKnownHash:a,lastCheck:new Date})),a&&a!==l?(i(c=>({...c,hasUpdate:!0})),e({type:"info",title:"Nueva versión detectada",message:`Se ha detectado una nueva versión de VonSim8 (${l.substring(0,7)}). Recarga la página para actualizar.`}),!0):!1}catch(a){return console.warn("Error checking version update:",a),!1}},[e]),s=b.useCallback(()=>{try{localStorage.setItem(WR,"e7416a1")}catch(a){console.warn("Error saving version hash before reload:",a)}window.location.reload()},[]),o=b.useCallback(()=>{i(a=>({...a,hasUpdate:!1}))},[]);return b.useEffect(()=>{r()},[r]),b.useEffect(()=>{const a=setInterval(r,lue);return()=>clearInterval(a)},[r]),b.useEffect(()=>{const a=()=>{document.hidden||r()};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a)}},[r]),b.useEffect(()=>{const a=()=>{r()};return window.addEventListener("online",a),()=>{window.removeEventListener("online",a)}},[r]),{versionInfo:n,checkForVersionUpdate:r,updateToNewVersion:s,dismissUpdate:o}},$F=b.memo(()=>{const{updateInfo:t,updateApp:e}=DF(),{versionInfo:n,updateToNewVersion:i}=LF(),[r,s]=b.useState(!0),[o,a]=b.useState(!1),[l,c]=b.useState(!1),u=t.available||n.hasUpdate,d=b.useCallback(async()=>{a(!0);try{t.available?await e():n.hasUpdate&&i(),s(!1)}catch(p){console.error("Error al actualizar:",p)}finally{a(!1)}},[e,t.available,i,n.hasUpdate]),f=b.useCallback(()=>{c(!0),setTimeout(()=>{s(!1)},300)},[]);return!u||!r?null:h.jsxs("div",{className:te("fixed inset-x-0 top-0 z-50 transition-all duration-300 ease-out",l?"-translate-y-full opacity-0":"translate-y-0 opacity-100"),children:[h.jsx("div",{className:"border-b border-stone-700/50 bg-gradient-to-r from-stone-900/95 via-stone-800/95 to-stone-900/95 shadow-2xl backdrop-blur-md",children:h.jsx("div",{className:"mx-auto max-w-7xl p-4",children:h.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"relative shrink-0",children:[h.jsx("div",{className:"absolute inset-0 animate-ping rounded-full bg-mantis-500/20"}),h.jsx("div",{className:"relative rounded-full bg-gradient-to-br from-mantis-500 to-mantis-600 p-2 shadow-lg sm:p-3",children:h.jsx(Be,{icon:jC,className:"size-4 animate-bounce text-white sm:size-5"})})]}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"mb-1 flex flex-col space-y-1 sm:flex-row sm:items-center sm:space-x-2 sm:space-y-0",children:[h.jsx("h3",{className:"text-base font-bold text-white sm:text-lg",children:"Nueva versión disponible"}),h.jsxs("div",{className:"flex w-fit items-center space-x-1 rounded-full bg-mantis-500/20 px-2 py-1",children:[h.jsx(Be,{icon:vL,className:"size-3 text-mantis-400"}),h.jsx("span",{className:"text-xs font-medium text-mantis-300",children:"Actualización"})]})]}),h.jsx("p",{className:"text-xs leading-relaxed text-stone-300 sm:text-sm",children:"Hay una nueva versión de VonSim8 con mejoras y correcciones. Te recomendamos actualizar para obtener la mejor experiencia."})]})]}),h.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[h.jsx(bt,{onClick:d,disabled:o,variant:"primary",size:"sm",className:te("relative overflow-hidden transition-all duration-300","bg-gradient-to-r from-mantis-600 to-mantis-700","hover:from-mantis-700 hover:to-mantis-800","shadow-lg hover:shadow-xl","border border-mantis-500/30","text-xs sm:text-sm",o&&"animate-pulse"),leftIcon:h.jsx(Be,{icon:o?qX:tJ,className:te("size-3 transition-transform duration-200 sm:size-4",o&&"animate-spin")}),children:o?"Actualizando...":"Actualizar ahora"}),h.jsx(bt,{onClick:f,variant:"ghost",size:"sm",className:"shrink-0 text-stone-400 transition-all duration-200 hover:bg-stone-700/50 hover:text-white","aria-label":"Cerrar banner de actualización",children:h.jsx(Be,{icon:gm,className:"size-3 sm:size-4"})})]})]})})}),o&&h.jsx("div",{className:"h-1 animate-pulse bg-gradient-to-r from-mantis-500 to-mantis-600",children:h.jsx("div",{className:"animate-shimmer h-full bg-white/30"})})]})});$F.displayName="UpdateBanner";de(!1);const Kh=[{id:"welcome",target:"app-container",title:"¡Bienvenido a VonSim8!",content:"Te acompañaré en un recorrido por las funciones principales de la plataforma. VonSim8 es un simulador de computadora de 8 bits que te permite programar en lenguaje ensamblador y ver cómo funciona internamente una computadora.",icon:UX,position:"top"},{id:"header",target:"header",title:"Barra de Navegación",content:"Aquí encontrarás el logo, el estado de la simulación, los controles principales y acceso a notificaciones, tour de ayuda y configuración.",icon:"icon-[lucide--navigation]",position:"bottom"},{id:"controls",target:"controls-container",title:"Controles de Simulación",content:"Controla la simulación: F7 (ejecutar ciclo), F8 (ejecutar instrucción), F4 (ejecución infinita), F9 (resetear). También puedes usar los botones visuales.",icon:"icon-[lucide--cpu]",position:"bottom"},{id:"editor-buttons",target:"panel-editor",title:"Editor de Código",content:"Aquí es donde escribirás tu código ensamblador. El editor tiene resaltado de sintaxis, autocompletado y validación en tiempo real. Usa los botones de arriba para crear, abrir, guardar y ensamblar tu programa.",icon:"icon-[lucide--file-terminal]",position:"right"},{id:"computer-view",target:"panel-computer",title:"Simulador de Computadora",content:"Aquí verás la computadora virtual con CPU, memoria RAM, registros, ALU, buses de datos y control, y todos los periféricos como pantalla, teclado, LEDs y switches.",icon:"icon-[lucide--monitor]",position:"left"},{id:"cpu-architecture",target:"cpu-component",title:"Arquitectura CPU",content:"Observa cómo la CPU ejecuta instrucciones paso a paso: fetch, decode, execute. Ve los valores en los registros, el contador de programa y el estado de las banderas.",icon:"icon-[lucide--microchip]",position:"left"},{id:"memory-ram",target:"memory-component",title:"Memoria RAM",content:"Explora la memoria RAM de 256 bytes. Ve cómo se almacenan datos e instrucciones, y cómo la CPU accede a diferentes direcciones de memoria. Cada celda muestra su dirección y valor en hexadecimal.",icon:"icon-[lucide--database]",position:"left"},{id:"settings-button",target:"settings-button",title:"Botón de Configuración",content:"Haz clic en este engranaje para acceder a las configuraciones avanzadas. Aquí podrás ajustar la velocidad de simulación, cambiar el tema visual, seleccionar el idioma y personalizar atajos de teclado.",icon:"icon-[lucide--settings]",position:"bottom"},{id:"settings-panel",target:"panel-settings",title:"Panel de Configuración",content:"En este panel encontrarás todas las opciones de configuración organizadas por categorías: simulación, interfaz, idioma y atajos de teclado. Los cambios se aplican automáticamente.",icon:"icon-[lucide--settings]",position:"left"},{id:"footer",target:"footer-links",title:"Recursos y Soporte",content:"Encuentra documentación completa, código fuente en GitHub, reporta bugs y accede a recursos de aprendizaje para dominar la programación en ensamblador.",icon:"icon-[lucide--help-circle]",position:"top"},{id:"final",target:"cycle-button",title:"¡Listo para Programar!",content:"Ya conoces las funciones principales de VonSim8. Comienza escribiendo código en el editor, ejecuta la simulación paso a paso con el botón 'Por Ciclo' y observa cómo funciona tu programa en la computadora virtual. ¡Disfruta programando!",icon:"icon-[lucide--rocket]",position:"bottom"}],cue=()=>{const[t,e]=b.useState(0),[n,i]=b.useState(!1),[r,s]=b.useState(!0),[,o]=hm(Jb),a=b.useMemo(()=>t===Kh.length-1,[t]),l=b.useMemo(()=>t===0,[t]),c=b.useCallback(()=>{i(!1),localStorage.setItem("vonsim8-tour-completed","true")},[]),u=b.useCallback(()=>{e(g=>Math.min(g+1,Kh.length-1))},[]),d=b.useCallback(()=>{e(g=>Math.max(g-1,0))},[]),f=b.useCallback(()=>{c()},[c]),p=b.useCallback(()=>{i(!0),e(0)},[]);return b.useEffect(()=>{},[]),b.useEffect(()=>{const g=Kh[t],m=document.querySelector(`[data-testid="${g.target}"]`);s(!!m),g.id==="settings-button"?o(!0):g.id!=="settings-panel"&&g.id!=="settings-button"&&o(!1)},[t,o]),{currentStep:t,isVisible:n,isLastStep:a,isFirstStep:l,handleNext:u,handlePrev:d,handleSkip:f,completeTour:c,startTour:p,targetFound:r}},uue=t=>b.useMemo(()=>{const e=document.querySelector(`[data-testid="${t.target}"]`);if(!e)return null;const n=e.getBoundingClientRect(),i=window.innerWidth,r=window.innerHeight;if(t.id==="welcome"&&t.position==="top")return{positionStyles:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},highlightStyles:{top:0,left:0,width:"100vw",height:"100vh"}};if(t.id==="footer"){let g=n.top-200-60,m=n.right+20;const v="translateX(0)";g<40&&(g=40),g+200>r-100&&(g=Math.max(40,r/2-200/2)),m+320>i&&(m=i-320-20);const y={top:g,left:m,transform:v},w={top:n.top-2,left:n.left-2,width:n.width+4,height:n.height+4};return{positionStyles:y,highlightStyles:w}}let s,o,a;switch(t.position){case"top":s=n.top-20,o=n.left+n.width/2,a="translateX(-50%)";break;case"bottom":s=n.bottom+20,o=n.left+n.width/2,a="translateX(-50%)";break;case"left":s=n.top+n.height/2,o=n.left-20,a="translateY(-50%)";break;case"right":s=n.top+n.height/2,o=n.right+20,a="translateY(-50%)";break}const l=320,c=200;o+l/2>i?o=i-l/2-20:o-l/2<0&&(o=l/2+20),s+c>r?s=r-c-20:s<0&&(s=20);const u={top:s,left:o,transform:a},d={top:n.top-8,left:n.left-8,width:n.width+16,height:n.height+16};return{positionStyles:u,highlightStyles:d}},[t]),BF=b.memo(({current:t,total:e})=>h.jsx("div",{className:"mb-2 h-2 w-full overflow-hidden rounded-full bg-stone-700",children:h.jsx("div",{className:"h-full bg-mantis-500 transition-all duration-300",style:{width:`${(t+1)/e*100}%`}})}));BF.displayName="ProgressBar";const FF=b.memo(({step:t,currentStep:e,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:l,targetFound:c})=>{const u=uue(t),d=b.useRef(null);b.useEffect(()=>{var m;(m=d.current)==null||m.focus()},[e]);const f="animate-fade-in";if(!c||!u)return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:h.jsxs("div",{className:"max-w-sm rounded-lg border-2 border-mantis-400 bg-stone-900 p-8 text-center shadow-2xl",children:[h.jsx(Be,{icon:v2,className:"mb-4 text-4xl text-yellow-400"}),h.jsx("h3",{className:"mb-2 text-lg font-semibold text-mantis-400",children:"Elemento no encontrado"}),h.jsx("p",{className:"mb-4 text-stone-300",children:"No se pudo encontrar el elemento de la interfaz para este paso del tour."}),h.jsx(bt,{onClick:o,className:"bg-mantis-600 hover:bg-mantis-700",children:"Saltar tour"})]})});const{positionStyles:p,highlightStyles:g}=u;return h.jsx("div",{className:"fixed inset-0 z-50 bg-black/50",children:h.jsxs("div",{className:"relative size-full",children:[h.jsx("div",{className:"absolute rounded-lg border-2 border-mantis-400 bg-transparent shadow-2xl transition-all duration-300",style:g}),h.jsxs("div",{ref:d,tabIndex:-1,role:"dialog","aria-modal":"true",className:`absolute max-w-sm rounded-lg border border-mantis-400 bg-stone-900 p-6 text-white shadow-xl focus:outline-none ${f}`,style:p,children:[h.jsx(BF,{current:e,total:l}),h.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[t.icon&&(typeof t.icon=="string"?h.jsx("span",{className:`${t.icon} text-2xl text-mantis-400`}):h.jsx(Be,{icon:t.icon,className:"text-2xl text-mantis-400"})),h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:t.title})]}),h.jsx("p",{className:"mb-4 text-sm text-stone-300",children:t.content}),h.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[h.jsx(bt,{variant:"ghost",size:"sm",onClick:o,className:"text-stone-400 hover:text-white","aria-label":"Saltar tour",children:"Saltar"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(bt,{variant:"outline",size:"sm",onClick:s,disabled:i,className:"flex items-center gap-1","aria-label":"Anterior",children:[h.jsx(Be,{icon:rJ}),"Anterior"]}),n?h.jsxs(bt,{size:"sm",onClick:a,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Finalizar",children:["Finalizar",h.jsx(Be,{icon:vL})]}):h.jsxs(bt,{size:"sm",onClick:r,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Siguiente",children:["Siguiente",h.jsx(Be,{icon:sJ})]})]})]}),h.jsxs("div",{className:"mt-2 text-right text-xs text-stone-500",children:["Paso ",e+1," de ",l]}),h.jsx("button",{onClick:o,className:"absolute right-2 top-2 rounded p-1 text-stone-400 hover:text-white focus:outline-none","aria-label":"Cerrar",children:h.jsx(Be,{icon:gm,size:"sm"})})]})]})})});FF.displayName="TourTooltip";const zF=b.memo(()=>{const{currentStep:t,isVisible:e,isLastStep:n,isFirstStep:i,handleNext:r,handlePrev:s,handleSkip:o,completeTour:a,startTour:l,targetFound:c}=cue();b.useEffect(()=>(window.startWelcomeTour=l,()=>{delete window.startWelcomeTour}),[l]);const u=b.useMemo(()=>Kh[t],[t]);return b.useEffect(()=>{if(!e)return;const d=f=>{f.key==="Escape"&&o(),f.key==="ArrowRight"&&r(),f.key==="ArrowLeft"&&s()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[e,o,r,s]),!e||!u?null:h.jsx(FF,{step:u,currentStep:t,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:Kh.length,targetFound:c})});zF.displayName="WelcomeTour";var Vr=function(t,e){return Number(t.toFixed(e))},due=function(t,e){return e},Xt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},fue=function(t){return-Math.cos(t*Math.PI)/2+.5},hue=function(t){return t},pue=function(t){return t*t},mue=function(t){return t*(2-t)},gue=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},vue=function(t){return t*t*t},yue=function(t){return--t*t*t+1},bue=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},wue=function(t){return t*t*t*t},xue=function(t){return 1- --t*t*t*t},Sue=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},kue=function(t){return t*t*t*t*t},_ue=function(t){return 1+--t*t*t*t*t},Cue=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},UF={easeOut:fue,linear:hue,easeInQuad:pue,easeOutQuad:mue,easeInOutQuad:gue,easeInCubic:vue,easeOutCubic:yue,easeInOutCubic:bue,easeInQuart:wue,easeOutQuart:xue,easeInOutQuart:Sue,easeInQuint:kue,easeOutQuint:_ue,easeInOutQuint:Cue},VF=function(t){typeof t=="number"&&cancelAnimationFrame(t)},vs=function(t){t.mounted&&(VF(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function HF(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;vs(t),t.animation=function(){if(!t.mounted)return VF(t.animation);var o=new Date().getTime()-r,a=o/n,l=UF[e],c=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function Eue(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function Gl(t,e,n,i){var r=Eue(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,f=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):HF(t,i,n,function(p){var g=a+u*p,m=l+d*p,v=c+f*p;s(g,m,v)})}}function Aue(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=i-a,u=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var Nue=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,c=t-e-a,u=a,d=i-r-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},lA=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=Aue(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,f=Nue(o,l,c,a,u,d,!!r);return f},Vk=function(t,e,n,i){return i?t<e?Vr(e,2):t>n?Vr(n,2):Vr(t,2):Vr(t,2)},Oc=function(t,e){var n=lA(t,e);return t.bounds=n,n};function Mm(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;o&&(d=r,f=s);var p=Vk(t,a-d,c+d,i),g=Vk(e,l-f,u+f,i);return{x:p,y:g}}function Zb(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,f=c-n*u,p=Mm(d,f,r,s,0,0,null);return p}function Rm(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var GR=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(u){return u instanceof Element?r==null?void 0:r.contains(u):!1}):r==null?void 0:r.contains(s),l=i&&s&&a;if(!l)return!1;var c=Qb(s,n);return!c},KR=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},Pue=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},Mue=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function Rue(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,f=u.minPositionX,p=u.maxPositionY,g=u.minPositionY,m=n>d||n<f,v=i>p||i<g,y=n>d?c.offsetWidth:t.setup.minPositionX||0,w=i>p?c.offsetHeight:t.setup.minPositionY||0,x=Zb(t,y,w,r,t.bounds,a||l),S=x.x,_=x.y;return{scale:r,positionX:m?S:n,positionY:v?_:i}}}function WF(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var f=Mm(e,n,a,s,i,r,o),p=f.x,g=f.y;t.setTransformState(c,p,g)}}var Tue=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,c=r.positionY;if(!i)return{x:l,y:c};var u=e-i.x,d=n-i.y,f=o?l:u,p=a?c:d;return{x:f,y:p}},jl=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},Oue=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},Iue=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!i)};function jue(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function qR(t,e,n,i,r,s,o,a,l,c){if(r){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return i?e:Vk(t,s,o,r)}function Due(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function Lue(t,e){var n=Oue(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var c=Due(o,a),u=e.x-i.x,d=e.y-i.y,f=u/c,p=d/c,g=l-r,m=u*u+d*d,v=Math.sqrt(m)/g;t.velocity={velocityX:f,velocityY:p,total:v}}t.lastMousePosition=e,t.velocityTime=l}}function $ue(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=Iue(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,p=i.limitToBounds,g=i.alignmentAnimation,m=i.zoomAnimation,v=i.panning,y=v.lockAxisY,w=v.lockAxisX,x=m.animationType,S=g.sizeX,_=g.sizeY,E=g.velocityAlignmentTime,C=E,N=jue(t,l),R=Math.max(N,C),O=jl(t,S),D=jl(t,_),j=O*r.offsetWidth/100,q=D*r.offsetHeight/100,$=c+j,K=u-j,J=d+q,Q=f-q,V=t.transformState,F=new Date().getTime();HF(t,x,R,function(re){var pe=t.transformState,Z=pe.scale,ce=pe.positionX,B=pe.positionY,L=new Date().getTime()-F,U=L/C,k=UF[g.animationType],P=1-k(Math.min(1,U)),I=1-re,T=ce+o*I,X=B+a*I,G=qR(T,V.positionX,ce,w,p,u,c,K,$,P),ie=qR(X,V.positionY,B,y,p,f,d,Q,J,P);(ce!==T||B!==X)&&t.setTransformState(Z,G,ie)})}}function YR(t,e){var n=t.transformState.scale;vs(t),Oc(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?Mue(t,e):Pue(t,e)}function cA(t,e){var n=t.transformState.scale,i=t.setup,r=i.minScale,s=i.alignmentAnimation,o=s.disabled,a=s.sizeX,l=s.sizeY,c=s.animationTime,u=s.animationType,d=o||n<r||!a&&!l;if(!d){var f=Rue(t);f&&Gl(t,f,e??c,u)}}function XR(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=Tue(t,e,n),c=l.x,u=l.y,d=jl(t,o),f=jl(t,a);Lue(t,{x:c,y:u}),WF(t,c,u,d,f)}}function Bue(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,f=!e&&n&&(n==null?void 0:n.total)>.1&&d;f?$ue(t):cA(t)}}function uA(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=Rm(Vr(e,2),s,o,0,!1),c=Oc(t,l),u=Zb(t,n,i,l,c,a),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function GF(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||i>=o;if((i>=1||a)&&cA(t),!(f||!r||!t.mounted)){var p=e||r.offsetWidth/2,g=n||r.offsetHeight/2,m=uA(t,o,p,g);m&&Gl(t,m,u,d)}}var vl=function(){return vl=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vl.apply(this,arguments)};function JR(t,e,n){for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var Yg={scale:1,positionX:0,positionY:0},Wf={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},Hk={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},KF=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Yg.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:Yg.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:Yg.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:Yg.positionY}},ZR=function(t){var e=vl({},Wf);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof Wf[n]<"u";if(r&&i){var s=Object.prototype.toString.call(Wf[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=vl(vl({},Wf[n]),t[n]):a?e[n]=JR(JR([],Wf[n],!0),t[n]):e[n]=t[n]}}),e},qF=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=c?i*Math.exp(e*n):i+e*n,f=Rm(Vr(d,3),a,o,u,!1);return f};function YF(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,f=(u/2-l)/a,p=(d/2-c)/a,g=qF(t,e,n),m=uA(t,g,f,p);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");Gl(t,m,i,r)}function XF(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=KF(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var f=lA(t,a.scale),p=Mm(a.positionX,a.positionY,f,o,0,0,s),g={scale:a.scale,positionX:p.x,positionY:p.y};c===a.scale&&u===a.positionX&&d===a.positionY||(i==null||i(),Gl(t,g,e,n))}}function Fue(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function zue(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!i||!r)return s;var u=i.getBoundingClientRect(),d=e.getBoundingClientRect(),f=Fue(e,i,r,s),p=f.x,g=f.y,m=d.width/s.scale,v=d.height/s.scale,y=i.offsetWidth/m,w=i.offsetHeight/v,x=Rm(n||Math.min(y,w),l,c,0,!1),S=(u.width-m*x)/2,_=(u.height-v*x)/2,E=(u.left-p)*x+S,C=(u.top-g)*x+_,N=lA(t,x),R=Mm(E,C,N,a,0,0,i),O=R.x,D=R.y;return{positionX:O,positionY:D,scale:x}}var Uue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),YF(t,1,e,n,i)}},Vue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),YF(t,-1,e,n,i)}},Hue=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!u||!d)){var p={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?c:i};Gl(t,p,r,s)}}},Wue=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),XF(t,e,n)}},Gue=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=JF(e||r.scale,s,o);Gl(t,a,n,i)}}},Kue=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),vs(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=zue(t,o,n);Gl(t,a,i,r)}}},Wk=function(t){return{instance:t,zoomIn:Uue(t),zoomOut:Vue(t),setTransform:Hue(t),resetTransform:Wue(t),centerView:Gue(t),zoomToElement:Kue(t)}},que=function(t){return{instance:t,state:t.transformState}},$t=function(t){var e={};return Object.assign(e,que(t)),Object.assign(e,Wk(t)),e},r1=!1;function s1(){try{var t={get passive(){return r1=!0,!1}};return t}catch{return r1=!1,r1}}var Xg=".".concat(Hk.wrapperClass),Qb=function(t,e){return e.some(function(n){return t.matches("".concat(Xg," ").concat(n,", ").concat(Xg," .").concat(n,", ").concat(Xg," ").concat(n," *, ").concat(Xg," .").concat(n," *"))})},Gk=function(t){t&&clearTimeout(t)},Yue=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},JF=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function Xue(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Jue=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!i&&c;if(!u||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Qb(c,o);return!d},Zue=function(t){return t?t.deltaY<0?1:-1:0};function Que(t,e){var n=Zue(t),i=due(e,n);return i}function ZF(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var ede=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,f=u.size,p=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var g=s+e*n,m=i?!1:!p,v=Rm(Vr(g,3),c,l,f,m&&!d);return v},tde=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},nde=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=Qb(o,r);return!l},ide=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},rde=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Vr(r[0].clientX-i.left,5),o=Vr(r[0].clientY-i.top,5),a=Vr(r[1].clientX-i.left,5),l=Vr(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},QF=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},sde=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,c=a.size,u=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,f=d*n;return Rm(Vr(f,2),o,s,c,!u&&!l)},ode=160,ade=100,lde=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(vs(t),Xt($t(t),e,i),Xt($t(t),e,r))},cde=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,p=o.disablePadding,g=o.smooth,m=d.size,v=d.disabled,y=f.step,w=f.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var x=Que(e,null),S=g?w*Math.abs(e.deltaY):y,_=ede(t,x,S,!e.ctrlKey);if(l!==_){var E=Oc(t,_),C=ZF(e,s,l),N=v||m===0||u||p,R=c&&N,O=Zb(t,C.x,C.y,_,E,R),D=O.x,j=O.y;t.previousWheelEvent=e,t.setTransformState(_,D,j),Xt($t(t),e,i),Xt($t(t),e,r)}},ude=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;Gk(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(GF(t,e.x,e.y),t.wheelAnimationTimer=null)},ade);var s=tde(t,e);s&&(Gk(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Xt($t(t),e,i),Xt($t(t),e,r))},ode))},e9=function(t){for(var e=0,n=0,i=0;i<2;i+=1)e+=t.touches[i].clientX,n+=t.touches[i].clientY;var r=e/2,s=n/2;return{x:r,y:s}},dde=function(t,e){var n=QF(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var i=e9(e);t.pinchLastCenterX=i.x,t.pinchLastCenterY=i.y,vs(t)},fde=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,c=o.zoomAnimation,u=o.alignmentAnimation,d=c.disabled,f=c.size;if(!(i===null||!n)){var p=rde(e,s,n);if(!(!Number.isFinite(p.x)||!Number.isFinite(p.y))){var g=QF(e),m=sde(t,g),v=e9(e),y=v.x-(t.pinchLastCenterX||0),w=v.y-(t.pinchLastCenterY||0);if(!(m===s&&y===0&&w===0)){t.pinchLastCenterX=v.x,t.pinchLastCenterY=v.y;var x=Oc(t,m),S=d||f===0||l,_=a&&S,E=Zb(t,p.x,p.y,m,x,_),C=E.x,N=E.y;t.pinchMidpoint=p,t.lastDistance=g;var R=u.sizeX,O=u.sizeY,D=jl(t,R),j=jl(t,O),q=C+y,$=N+w,K=Mm(q,$,x,a,D,j,r),J=K.x,Q=K.y;t.setTransformState(m,J,Q)}}}},hde=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,GF(t,e==null?void 0:e.x,e==null?void 0:e.y)},t9=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;Gk(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Xt($t(t),e,n)},i)},pde=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Xt($t(t),e,i),XF(t,o,a,function(){return Xt($t(t),e,r)}),t9(t,e)};function mde(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function gde(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,p=u.step,g=u.animationTime,m=u.animationType;if(!d&&!i){if(f==="reset")return pde(t,e);if(!s)return console.error("No ContentComponent found");var v=mde(f,t.transformState.scale),y=qF(t,v,p);if(o!==y){Xt($t(t),e,l);var w=ZF(e,s,o),x=uA(t,y,w.x,w.y);if(!x)return console.error("Error during zoom event. New transformation state was not calculated.");Xt($t(t),e,c),Gl(t,x,g,m),t9(t,e)}}}var vde=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=r==null?void 0:r.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=Qb(l,a);return!d},yde=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){n.props=i,Oc(n,n.transformState.scale),n.setup=ZR(i)},this.initializeWindowEvents=function(){var i,r,s=s1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;(r=n.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var i,r,s=s1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),vs(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=s1();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i,r){var s=!1,o=n.setup.centerOnInit,a=function(l,c){for(var u=0,d=l;u<d.length;u++){var f=d[u];if(f.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(l){l($t(n))}),n.observer=new ResizeObserver(function(l){if(a(l,i)||a(l,r))if(o&&!s){var c=r.offsetWidth,u=r.offsetHeight;(c>0||u>0)&&(s=!0,n.setCenter())}else vs(n),Oc(n,n.transformState.scale),cA(n,0)}),n.observer.observe(i),n.observer.observe(r)},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=Jue(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(lde(n,i),cde(n,i),ude(n,i))}}},this.onWheelPanning=function(i){var r=n.setup,s=r.disabled,o=r.wheel,a=r.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var l=n.transformState,c=l.positionX,u=l.positionY,d=c-i.deltaX,f=u-i.deltaY,p=a.lockAxisX?c:d,g=a.lockAxisY?u:f,m=n.setup.alignmentAnimation,v=m.sizeX,y=m.sizeY,w=jl(n,v),x=jl(n,y);p===c&&g===u||WF(n,p,g,w,x)}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=GR(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),vs(n),YR(n,i),Xt($t(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=KR(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),XR(n,i.clientX,i.clientY),Xt($t(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(Bue(n),Xt($t(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=nde(n,i);l&&(dde(n,i),vs(n),Xt($t(n),i,o),Xt($t(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=ide(n);l&&(i.preventDefault(),i.stopPropagation(),fde(n,i),Xt($t(n),i,o),Xt($t(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(hde(n),Xt($t(n),i,s),Xt($t(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=GR(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200&&i.touches.length===1;if(!a){n.lastTouch=+new Date,vs(n);var l=i.touches,c=l.length===1,u=l.length===2;c&&(vs(n),YR(n,i),Xt($t(n),i,s)),u&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=KR(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];XR(n,a.clientX,a.clientY),Xt($t(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=vde(n,i);s&&gde(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=$t(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Xt(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=JF(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):Yue(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return $t(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Oc(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(i,r),n.initializeWindowEvents(),n.isInitialized=!0;var s=$t(n);Xt(s,void 0,n.props.onInit)},this.props=e,this.setup=ZR(this.props),this.transformState=KF(this.props)}return t}(),dA=Vt.createContext(null),bde=function(t,e){return typeof t=="function"?t(e):t},wde=Vt.forwardRef(function(t,e){var n=b.useRef(new yde(t)).current,i=bde(t.children,Wk(n));return b.useImperativeHandle(e,function(){return Wk(n)},[n]),b.useEffect(function(){n.update(t)},[n,t]),Vt.createElement(dA.Provider,{value:n},i)});Vt.forwardRef(function(t,e){var n=b.useRef(null),i=b.useContext(dA);return b.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),Vt.createElement("div",vl({},t,{ref:Xue([n,e])}))});function xde(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var Sde=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,QR={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};xde(Sde);var kde=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,f=b.useContext(dA),p=f.init,g=f.cleanupWindowEvents,m=b.useRef(null),v=b.useRef(null);return b.useEffect(function(){var y=m.current,w=v.current;return y!==null&&w!==null&&p&&(p==null||p(y,w)),function(){g==null||g()}},[]),Vt.createElement("div",vl({},c,{ref:m,className:"".concat(Hk.wrapperClass," ").concat(QR.wrapper," ").concat(i),style:o}),Vt.createElement("div",vl({},d,{ref:v,className:"".concat(Hk.contentClass," ").concat(QR.content," ").concat(s),style:a}),e))};function _de({wrapperRef:t}){const e=nn();return h.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function eT(t){switch(t){case"Captación":return"text-blue-300 bg-gradient-to-r from-blue-500/10 to-cyan-500/10";case"Obtención de operandos":return"text-yellow-300 bg-gradient-to-r from-yellow-500/10 to-orange-500/10";case"Ejecución":return"text-green-300 bg-gradient-to-r from-green-500/10 to-emerald-500/10";case"Escritura":return"text-purple-300 bg-gradient-to-r from-purple-500/10 to-violet-500/10";default:return"text-stone-300 bg-gradient-to-r from-stone-500/10 to-gray-500/10"}}function Cde(t,e){if(t==="Ejecución")return/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-300 bg-yellow-500/5 border-yellow-400/30 shadow-yellow-400/20":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-300 bg-purple-500/5 border-purple-400/30 shadow-purple-400/20":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-300 bg-green-500/5 border-green-400/30 shadow-green-400/20");switch(t){case"Captación":return"text-blue-300 bg-blue-500/5 border-blue-400/30 shadow-blue-400/20";case"Obtención de operandos":return"text-yellow-300 bg-yellow-500/5 border-yellow-400/30 shadow-yellow-400/20";case"Escritura":return"text-purple-300 bg-purple-500/5 border-purple-400/30 shadow-purple-400/20";default:return"text-stone-300 bg-stone-500/5 border-stone-400/30 shadow-stone-400/20"}}function Ede(t,e=!1){const n=(()=>{switch(t){case"Captación":return"📥";case"Obtención de operandos":return"🔍";case"Ejecución":return"⚡";case"Escritura":return"💾";case"Interrupción":return"🚨";default:return"⚙️"}})();return e?h.jsx("span",{className:"inline-block animate-bounce",children:n}):n}function Ade(t){return/obten/i.test(t)||/operando/i.test(t)||/leer/i.test(t)||/cargar/i.test(t)?"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-yellow-400/30 shadow-lg shadow-yellow-400/10":/escrib/i.test(t)||/guardar/i.test(t)||/almacenar/i.test(t)||/resultado/i.test(t)?"bg-gradient-to-r from-purple-500/10 to-violet-500/10 border-purple-400/30 shadow-lg shadow-purple-400/10":(/procesar/i.test(t)||/alu/i.test(t)||/calcular/i.test(t)||/operar/i.test(t)||/ejecut/i.test(t),"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-400/30 shadow-lg shadow-green-400/10")}function tT(t,e){if(!t)return"";switch(e){case"Captación":return"ring-2 ring-blue-400/50 ring-offset-2 ring-offset-stone-800";case"Obtención de operandos":return"ring-2 ring-yellow-400/50 ring-offset-2 ring-offset-stone-800";case"Ejecución":return"ring-2 ring-green-400/50 ring-offset-2 ring-offset-stone-800";case"Escritura":return"ring-2 ring-purple-400/50 ring-offset-2 ring-offset-stone-800";default:return"ring-2 ring-stone-400/50 ring-offset-2 ring-offset-stone-800"}}function Nde(t,e){return t==="Captación"?"text-blue-400":t==="Ejecución"?/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-400":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-400":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-400"):t==="Escritura"?"text-purple-400":t==="Obtención de operandos"?"text-yellow-400":"text-stone-400"}function Pde(){const t=st(pt),e=st(mc),n=st(cn),i=st(iy),[r]=pa(),s=b.useRef(null),o=(a,l)=>{const[c,...u]=a.split(":"),d=u.join(":").trim();return{cycle:l,stage:c.trim(),action:d}};return b.useEffect(()=>{if(t){const a=M.get(sn),l=o(t,a);M.set(mc,c=>{const u=c[c.length-1];return u&&u.cycle===a&&u.action===l.action?c:[...c,l]})}},[t]),b.useEffect(()=>{const a=M.sub(sn,()=>{const l=M.get(sn),c=M.get(pt);if(c&&l>0){const u=o(c,l);M.set(Ec,{canAnimate:!1,pendingMessage:c}),M.set(mc,d=>{const f=d[d.length-1];return f&&f.cycle===l&&f.action===u.action?d:[...d,u]}),setTimeout(()=>{M.set(Ec,{canAnimate:!0,pendingMessage:null})},100)}l===0&&(M.set(mc,[]),M.set(Ec,{canAnimate:!0,pendingMessage:null}))});return()=>{a()}},[]),b.useEffect(()=>{const a=M.sub(cn,()=>{M.get(cn).type==="stopped"&&(M.set(mc,[]),M.set(Ec,{canAnimate:!0,pendingMessage:null}))});return()=>{a()}},[]),b.useEffect(()=>{n.type==="running"&&i&&Fi({title:"El programa ha sido modificado",description:"La ejecución se reiniciará desde el principio para aplicar los cambios.",variant:"info"})},[n,i]),b.useEffect(()=>{const a=s.current;a&&(a.scrollTop=a.scrollHeight)},[e]),r.showInstructionCycle?h.jsx("div",{className:"absolute left-[120px] top-[520px] z-10 h-min w-[420px]",children:h.jsxs("div",{className:"rounded-xl border-2 border-stone-400/50 bg-gradient-to-br from-stone-800 to-stone-900 shadow-2xl backdrop-blur-sm",children:[h.jsx("div",{className:"rounded-t-xl border-b-2 border-stone-600/50 bg-gradient-to-r from-stone-700 to-stone-800 px-4 py-3",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"relative",children:[h.jsx("span",{className:"animate-spin-slow text-xl",children:"🔄"}),h.jsx("div",{className:"absolute -right-1 -top-1 size-2 rounded-full bg-green-400"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"bg-gradient-to-r from-stone-200 to-stone-300 bg-clip-text text-sm font-bold text-transparent",children:"Ciclo de Instrucción"}),h.jsx("p",{className:"text-xs text-stone-400",children:"Seguimiento paso a paso"})]})]}),h.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-green-400/30 bg-gradient-to-r from-green-500/20 to-emerald-500/20 px-3 py-1.5",children:[h.jsx("div",{className:"size-2 rounded-full bg-green-400 shadow-lg shadow-green-400/50"}),h.jsx("span",{className:"text-xs font-medium text-green-300",children:"Activo"})]})]})}),h.jsxs("div",{ref:s,className:"scrollbar-thin max-h-80 overflow-y-auto p-4",children:[e.map((a,l)=>{const c=l===0||e[l-1].stage!==a.stage,u=l===e.length-1;return h.jsxs("div",{className:"mb-3 transition-all duration-300 ease-in-out",children:[c&&h.jsx("div",{className:"animate-fade-in mb-3",children:h.jsxs("div",{className:`flex items-center gap-3 rounded-xl border border-stone-600/50 bg-gradient-to-r from-stone-700/80 to-stone-800/80 p-4 shadow-lg ${eT(a.stage)}`,children:[h.jsxs("div",{className:"relative",children:[h.jsx("span",{className:"text-xl",children:Ede(a.stage,u)}),u&&h.jsx("div",{className:"absolute -right-1 -top-1 size-3 rounded-full bg-green-400"})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:`text-sm font-bold ${eT(a.stage).split(" ")[0]}`,children:a.stage}),h.jsxs("p",{className:"text-xs text-stone-400",children:[a.stage==="Captación"&&"Leer instrucción",a.stage==="Obtención de operandos"&&"Preparar datos",a.stage==="Ejecución"&&"Procesar instrucción",a.stage==="Escritura"&&"Guardar resultado",a.stage==="Interrupción"&&"Manejar interrupción"]})]})]})}),a.stage==="Interrupción"?h.jsx("div",{className:`rounded-xl border-l-4 border-red-400 bg-gradient-to-r from-red-900/30 to-red-800/20 p-4 shadow-lg transition-all duration-300 ${u?"ring-2 ring-red-400/50 ring-offset-2 ring-offset-stone-800":""}`,children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-lg",children:"🚨"}),h.jsx("span",{className:"text-sm font-medium text-red-300",children:a.action})]})}):h.jsxs("div",{className:`flex items-center gap-3 rounded-xl border p-4 transition-all duration-300 hover:scale-[1.02] ${a.stage==="Ejecución"?`${Ade(a.action)} ${u?tT(u,a.stage):""}`:`border-stone-600/50 bg-gradient-to-r from-stone-800/80 to-stone-900/80 ${u?"bg-stone-700/80 "+tT(u,a.stage):""}`}`,children:[h.jsx("div",{className:`flex size-8 items-center justify-center rounded-full text-sm font-bold transition-all duration-300 ${u?"scale-110 bg-gradient-to-r from-green-600 to-emerald-700 shadow-lg shadow-green-400/30 ring-2 ring-green-400/50":"bg-stone-700"} ${u?"text-white":Nde(a.stage,a.action)}`,children:a.cycle}),h.jsx("div",{className:"flex-1",children:h.jsx("span",{className:`text-sm font-medium transition-all duration-200 ${Cde(a.stage,a.action).split(" ")[0]}`,children:a.action})}),u&&h.jsx("div",{className:"flex items-center gap-1",children:h.jsx("div",{className:"size-2 rounded-full bg-green-400 shadow-lg shadow-green-400/50"})})]})]},l)}),e.length===0&&h.jsx("div",{className:"animate-fade-in flex items-center justify-center py-12",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"mb-4 text-5xl",children:"⏳"}),h.jsx("h4",{className:"mb-2 bg-gradient-to-r from-stone-300 to-stone-400 bg-clip-text text-sm font-bold text-transparent",children:"Esperando instrucciones"}),h.jsx("p",{className:"text-xs text-stone-500",children:"Ejecuta un programa para ver el ciclo"})]})})]}),h.jsx("div",{className:"rounded-b-xl border-t border-stone-600/50 bg-gradient-to-r from-stone-800/80 to-stone-900/80 px-4 py-3",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-blue-400"}),"Ciclos: ",M.get(sn)]}),h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-green-400"}),"Monitor en tiempo real"]})]})})]})}):null}function Mde(){const t=nn(),{devices:e}=Fn();return e.hasIOBus?h.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function Rde(){const{devices:t}=Fn(),e=st(uy),n=st(dy),i=b.useRef(null),r=b.useRef(null),s=b.useRef(null),o=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),a=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),l="M 750 545 H 800",{path:c,strokeDashoffset:u,opacity:d}=De("bus.rd"),{path:f,strokeDashoffset:p,opacity:g}=De("bus.wr");return h.jsxs(h.Fragment,{children:[e&&h.jsx(Ode,{pathRef:r}),n&&h.jsx(Ide,{pathRef:s}),h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[h.jsx("path",{ref:i,className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:o}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:o}),e&&h.jsx(qe.path,{ref:r,d:c||o,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),e&&h.jsx(qe.path,{d:c||o,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:a}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:a}),n&&h.jsx(qe.path,{ref:s,d:f||a,className:"fill-none stroke-orange-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,146,60,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),n&&h.jsx(qe.path,{d:f||a,className:"fill-none stroke-orange-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),t.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(tr,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:l}),h.jsx(qe.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:l,style:De("bus.mem")})]}),t.pic&&h.jsxs(h.Fragment,{children:[h.jsx(tr,{springs:"bus.intr",d:"M 450 805 V 1015 H 900"}),h.jsx(tr,{springs:"bus.inta",d:"M 470 805 V 1015 H 900"})]}),t.pio&&h.jsxs(h.Fragment,{children:[h.jsx(tr,{springs:"bus.int0",d:"M 900 815 V 1015 H 900"}),h.jsx(tr,{springs:"bus.int1",d:"M 920 815 V 1015 H 900"}),h.jsx(tr,{springs:"bus.int2",d:"M 940 815 V 1015 H 900"})]}),t.timer&&h.jsx(tr,{springs:"bus.int0",d:"M 583 875 V 1015 H 900"}),t.handshake&&h.jsx(tr,{springs:"bus.int0",d:"M 900 1015 H 900"}),t.printer&&h.jsxs(h.Fragment,{children:[h.jsx(tr,{springs:"bus.printer.strobe",d:"M 900 1015 H 900"}),h.jsx(tr,{springs:"bus.printer.busy",d:"M 920 1015 H 900"}),h.jsx(tr,{springs:"bus.printer.data",d:"M 940 1015 H 900"})]}),t.pio&&t.switches&&h.jsx(tr,{springs:"bus.switches->pio",d:"M 900 815 V 1015 H 900"}),t.pio&&t.leds&&h.jsx(tr,{springs:"bus.pio->leds",d:"M 900 815 V 1015 H 900"})]})]})}function tr({d:t,springs:e}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[3px]",strokeLinejoin:"round",d:t}),h.jsx(qe.path,{d:t,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:De(e)}),h.jsx(qe.path,{d:t,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:De(e)})]})}function Tde(){const t=nn(),{devices:e}=Fn();return h.jsxs(h.Fragment,{children:[h.jsx(nr,{style:{left:385,top:405},children:"rd"}),h.jsx(nr,{style:{left:385,top:425},children:"wr"}),e.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(nr,{children:"io/m"}),h.jsx(nr,{children:t("computer.chip-select.mem")})]}),e.pic&&h.jsx(nr,{children:t("computer.chip-select.pic")}),e.timer&&h.jsx(nr,{children:t("computer.chip-select.timer")}),e.pio&&h.jsx(nr,{children:t("computer.chip-select.pio")}),e.handshake&&h.jsx(nr,{children:t("computer.chip-select.handshake")}),e.pic&&h.jsxs(h.Fragment,{children:[h.jsx(nr,{children:"intr"}),h.jsx(nr,{children:"inta"})]}),e.printer&&h.jsxs(h.Fragment,{children:[h.jsx(nr,{children:"strobe"}),h.jsx(nr,{children:"busy"}),h.jsx(nr,{children:"data"})]})]})}function nr({children:t,style:e}){return h.jsx("span",{className:"pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",style:e,children:t})}function Ode({pathRef:t}){const[e,n]=b.useState(!0),i=yp(uy),[r,s]=b.useState(!1),[o,a]=b.useState(0),l=pa();if(b.useEffect(()=>{if(e&&r){const p=Date.now(),g=l.animations?l.executionUnit*2:100,m=()=>{const v=Date.now()-p,y=Math.min(v/g,1);a(y),y<1?requestAnimationFrame(m):(n(!1),setTimeout(()=>i(!1),100))};m()}},[e,r,i,l.animations,l.executionUnit]),b.useEffect(()=>{let p=0;const g=50,m=()=>{if(t.current){s(!0);return}p++,p<g?setTimeout(m,10):s(!1)};m()},[t]),!e||!r)return null;const c=380,u=800,d=420,f=c+(u-c)*o;return h.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:f,top:d-32,color:"#ef4444",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:e?1:0},children:"Read"})}function Ide({pathRef:t}){const[e,n]=b.useState(!0),i=yp(dy),[r,s]=b.useState(!1),[o,a]=b.useState(0),l=pa();if(b.useEffect(()=>{if(e&&r){const p=Date.now(),g=l.animations?l.executionUnit*2:100,m=()=>{const v=Date.now()-p,y=Math.min(v/g,1);a(y),y<1?requestAnimationFrame(m):(n(!1),setTimeout(()=>i(!1),100))};m()}},[e,r,i,l.animations,l.executionUnit]),b.useEffect(()=>{let p=0;const g=50,m=()=>{if(t.current){s(!0);return}p++,p<g?setTimeout(m,10):s(!1)};m()},[t]),!e||!r)return null;const c=380,u=800,d=440,f=c+(u-c)*o;return h.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:f,top:d+12,color:"#f59e42",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:e?1:0},children:"Write"})}function jde(){const{devices:t}=Fn(),e=["M 645 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 635 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" "),{path:i,strokeDashoffset:r,opacity:s}=De("bus.data"),{path:o,strokeDashoffset:a,opacity:l}=De("bus.address");return h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[25] size-full",children:[h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:n}),h.jsx(qe.path,{d:i,className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx(qe.path,{d:i,className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:e}),h.jsx(qe.path,{d:o,className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}}),h.jsx(qe.path,{d:o,className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}})]})}function Dde(){return h.jsxs(h.Fragment,{children:[h.jsx(jde,{}),h.jsx(Rde,{}),h.jsx(Tde,{}),h.jsx(Mde,{})]})}function Lde(){const{devices:t}=Fn();if(!t.clock)return null;const e=De("clock.angle");return h.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:h.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx(qe.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}const $de={register:{beginner:"Un registro es como una caja pequeña donde la CPU guarda datos temporalmente. Es muy rápido de acceder.",intermediate:"Los registros son memoria de acceso rápido dentro de la CPU. Son más rápidos que la RAM pero tienen menos capacidad.",advanced:"Registros de propósito general (AL, BL, CL, DL) para operaciones aritméticas. Cada uno puede almacenar 8 bits."},memory:{beginner:"La memoria RAM es como un gran almacén donde se guardan programas y datos. Cada ubicación tiene una dirección única.",intermediate:"Memoria de acceso aleatorio (RAM) de 256 bytes. La CPU puede leer y escribir en cualquier dirección.",advanced:"Memoria principal de 256 bytes con direccionamiento de 8 bits (00-FF). Organizada en celdas de 8 bits cada una."},alu:{beginner:'La ALU (Unidad Aritmético-Lógica) es el "cerebro matemático" de la CPU. Realiza sumas, restas y comparaciones.',intermediate:"Arithmetic Logic Unit procesa operaciones matemáticas y lógicas. Recibe operandos y devuelve resultados.",advanced:"ALU de 8 bits que ejecuta operaciones: ADD, SUB, AND, OR, XOR, NOT, CMP. Incluye flags de estado (Z, N, C)."},bus:{beginner:'Los buses son como "carreteras" por donde viajan los datos entre los componentes de la computadora.',intermediate:"Buses de datos y control conectan CPU, memoria y periféricos. El bus de datos transporta información.",advanced:"Bus de datos de 8 bits bidireccional, bus de direcciones de 8 bits, y líneas de control para sincronización."},instruction:{beginner:"Una instrucción es un comando que le dice a la CPU qué operación realizar, como sumar dos números.",intermediate:"Cada instrucción tiene un código de operación (opcode) y operandos. La CPU las ejecuta secuencialmente.",advanced:"Formato de instrucción: opcode (1 byte) + operandos. Ejemplos: MOV, ADD, JMP, CALL. Ciclo fetch-decode-execute."},"program-counter":{beginner:"El contador de programa (IP) indica qué instrucción ejecutar a continuación. Se incrementa automáticamente.",intermediate:"Program Counter (IP) contiene la dirección de la siguiente instrucción. Se actualiza en cada ciclo.",advanced:"Instruction Pointer (IP) de 8 bits. Incrementa en 1-2 bytes según el tamaño de la instrucción actual."},flags:{beginner:"Las banderas son indicadores que muestran el resultado de operaciones, como si el resultado fue cero.",intermediate:"Flags de estado: Zero (Z), Negative (N), Carry (C). Se actualizan automáticamente en operaciones.",advanced:"Flags de 1 bit: Z (resultado cero), N (resultado negativo), C (acarreo/overflow). Controlan saltos condicionales."},stack:{beginner:"La pila es como una pila de platos. Solo puedes agregar o quitar del tope. Útil para guardar direcciones de retorno.",intermediate:"Stack Pointer (SP) apunta al tope de la pila. PUSH agrega datos, POP los retira. LIFO (Last In, First Out).",advanced:"Pila de 256 bytes con SP de 8 bits. PUSH decrementa SP, POP lo incrementa. Usada para CALL/RET y variables locales."},interrupt:{beginner:"Una interrupción es como un timbre que interrumpe lo que está haciendo la CPU para atender algo urgente.",intermediate:"Las interrupciones permiten que dispositivos externos notifiquen a la CPU eventos importantes.",advanced:"Sistema de interrupciones con PIC (Programmable Interrupt Controller). IRET retorna de la rutina de interrupción."},peripheral:{beginner:"Los periféricos son dispositivos externos como teclado, pantalla y LEDs que se conectan a la computadora.",intermediate:"Periféricos se comunican con la CPU a través de puertos de entrada/salida (I/O).",advanced:"Sistema de I/O con PIO (Programmable I/O) y módulos específicos para cada periférico."},assembly:{beginner:"El lenguaje ensamblador es un lenguaje de programación que usa palabras en lugar de números para las instrucciones.",intermediate:"Cada instrucción de ensamblador se traduce a código de máquina. El ensamblador hace esta traducción.",advanced:"Sintaxis: etiqueta, mnemónico, operandos, comentarios. Directivas como ORG, DB, DW para datos."},addressing:{beginner:"El direccionamiento es cómo la CPU encuentra los datos que necesita en la memoria.",intermediate:"Modos de direccionamiento: inmediato, directo, indirecto. Cada uno accede a datos de forma diferente.",advanced:"Direccionamiento inmediato (valor en instrucción), directo (dirección en instrucción), indirecto (dirección en registro)."}},Bde={beginner:fd,intermediate:vm,advanced:jC},nT={beginner:"text-blue-400",intermediate:"text-yellow-400",advanced:"text-purple-400"},n9=b.memo(({concept:t,level:e="beginner",children:n,className:i})=>{const[r,s]=b.useState(e),o=$de[t];if(!o)return console.warn(`No educational content found for concept: ${t}`),h.jsx(h.Fragment,{children:n});const a=o[r],l=Bde[r],c=h.jsxs("div",{className:"max-w-xs p-3",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx(Be,{icon:l,className:te("text-sm",nT[r])}),h.jsxs("span",{className:te("text-sm font-medium",nT[r]),children:["Nivel"," ",r==="beginner"?"Básico":r==="intermediate"?"Intermedio":"Avanzado"]})]}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:a}),h.jsx("div",{className:"flex gap-1",children:["beginner","intermediate","advanced"].map(u=>h.jsx("button",{onClick:d=>{d.stopPropagation(),s(u)},className:te("rounded px-2 py-1 text-xs transition-colors",r===u?"bg-mantis-600 text-white":"bg-stone-700 text-stone-400 hover:bg-stone-600"),children:u==="beginner"?"B":u==="intermediate"?"I":"A"},u))})]});return h.jsx(xr,{content:c,position:"top",children:h.jsxs("span",{className:te("inline-flex cursor-help items-center gap-1",i),children:[n,h.jsx(Be,{icon:fd,className:"text-xs text-mantis-400 opacity-70 transition-opacity hover:opacity-100"})]})})});n9.displayName="EducationalTooltip";var ew="Popover",[i9,gve]=Ms(ew,[yf]),Tm=yf(),[Fde,Kl]=i9(ew),r9=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=Tm(e),l=b.useRef(null),[c,u]=b.useState(!1),[d,f]=Sl({prop:i,defaultProp:r??!1,onChange:s,caller:ew});return h.jsx(AB,{...a,children:h.jsx(Fde,{scope:e,contentId:df(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:b.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:c,onCustomAnchorAdd:b.useCallback(()=>u(!0),[]),onCustomAnchorRemove:b.useCallback(()=>u(!1),[]),modal:o,children:n})})};r9.displayName=ew;var s9="PopoverAnchor",zde=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Kl(s9,n),s=Tm(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return b.useEffect(()=>(o(),()=>a()),[o,a]),h.jsx(Vb,{...s,...i,ref:e})});zde.displayName=s9;var o9="PopoverTrigger",a9=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Kl(o9,n),s=Tm(n),o=ht(e,r.triggerRef),a=h.jsx(Ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":f9(r.open),...i,ref:o,onClick:be(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:h.jsx(Vb,{asChild:!0,...s,children:a})});a9.displayName=o9;var fA="PopoverPortal",[Ude,Vde]=i9(fA,{forceMount:void 0}),l9=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=Kl(fA,e);return h.jsx(Ude,{scope:e,forceMount:n,children:h.jsx(fa,{present:n||s.open,children:h.jsx(Pm,{asChild:!0,container:r,children:i})})})};l9.displayName=fA;var nf="PopoverContent",c9=b.forwardRef((t,e)=>{const n=Vde(nf,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=Kl(nf,t.__scopePopover);return h.jsx(fa,{present:i||s.open,children:s.modal?h.jsx(Wde,{...r,ref:e}):h.jsx(Gde,{...r,ref:e})})});c9.displayName=nf;var Hde=zd("PopoverContent.RemoveScroll"),Wde=b.forwardRef((t,e)=>{const n=Kl(nf,t.__scopePopover),i=b.useRef(null),r=ht(e,i),s=b.useRef(!1);return b.useEffect(()=>{const o=i.current;if(o)return MB(o)},[]),h.jsx(Wb,{as:Hde,allowPinchZoom:!0,children:h.jsx(u9,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:be(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:be(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:be(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Gde=b.forwardRef((t,e)=>{const n=Kl(nf,t.__scopePopover),i=b.useRef(!1),r=b.useRef(!1);return h.jsx(u9,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),u9=b.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=Kl(nf,n),p=Tm(n);return WE(),h.jsx(Bb,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:h.jsx(Am,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(nA,{"data-state":f9(f.open),role:"dialog",id:f.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),d9="PopoverClose",Kde=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Kl(d9,n);return h.jsx(Ye.button,{type:"button",...i,ref:e,onClick:be(t.onClick,()=>r.onOpenChange(!1))})});Kde.displayName=d9;var qde="PopoverArrow",Yde=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Tm(n);return h.jsx(iA,{...r,...i,ref:e})});Yde.displayName=qde;function f9(t){return t?"open":"closed"}var Xde=r9,Jde=a9,Zde=l9,h9=c9;const hA=Xde,pA=Jde,tw=b.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>h.jsx(Zde,{children:h.jsx(h9,{ref:r,align:e,sideOffset:n,className:te("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));tw.displayName=h9.displayName;function yr({name:t,valueAtom:e,springs:n,emphasis:i=!1,className:r}){const s=nn(),o=st(e),a=o.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t,u=["AL","BL","CL","DL"].includes(t),d=t==="IP",f=t==="SP",p=t==="MBR",g=t==="MAR",m=t==="IR",v=["id","ri"].includes(t),y=c==="FLAGS";return h.jsxs(hA,{children:[h.jsx(pA,{asChild:!0,children:h.jsxs(qe.button,{title:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c,className:te("flex cursor-pointer items-center font-mono leading-none transition-opacity",u||d||f||p||g||m||v?"size-10 justify-center rounded border-2 text-lg font-bold shadow-[0_2px_8px_0_rgba(60,180,120,0.10)] transition-all duration-200 hover:scale-110 hover:shadow-xl":y?"min-h-[32px] min-w-[90px] gap-2 rounded border-2 border-yellow-400 bg-gradient-to-br from-yellow-900 via-yellow-800 to-stone-900 px-2.5 py-0.5 font-bold text-yellow-200 shadow-[0_2px_8px_0_rgba(250,204,21,0.10)]":"rounded-md border bg-stone-800 px-2 py-1",u?"border-mantis-500 bg-stone-800 text-mantis-300":d?"border-red-500 bg-stone-800 text-red-300":f?"border-yellow-400 bg-stone-800 text-yellow-300":p||g||m?"border-indigo-400 bg-stone-800 text-indigo-300":v?"border-cyan-400 bg-stone-800 text-cyan-300":y?"":i?"border-mantis-400 text-lg":"border-stone-600 text-base",r),style:c==="left"||c==="right"||c==="result"?{backgroundColor:"transparent"}:De(n),children:[u||f||p||g||m||v?h.jsx(h.Fragment,{children:h.jsx("span",{className:te(u||v||m||g||p?"mt-4":"mt-2","font-mono text-base font-bold"),children:a.toString("hex")})}):d?h.jsx(h.Fragment,{children:h.jsx("span",{className:te("mt-4 font-mono text-base font-bold text-red-300"),children:a.toString("hex")})}):c==="left"?h.jsx("span",{className:"opacity-0"}):c==="right"?h.jsx("span",{className:"opacity-0"}):c==="result"?h.jsx("span",{className:"opacity-0"}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:te("mr-2 font-extrabold tracking-wide",u&&"text-mantis-300 drop-shadow",y&&"text-yellow-200",v&&"text-cyan-300",(c==="left"||c==="right")&&"text-xs"),children:c}),h.jsx("span",{className:te("rounded px-1 py-0.5 font-light",u?"border border-mantis-400 bg-stone-950 text-mantis-300":y?"border border-yellow-400 bg-yellow-950 text-yellow-200":v?"border border-cyan-400 bg-cyan-950 text-cyan-200":"border border-stone-600 bg-stone-900 text-white"),children:a.toString("hex")})]}),y&&h.jsxs("span",{className:"ml-2 flex gap-1",children:[h.jsx("span",{className:te("rounded border px-1 text-xs font-bold",Number(a)&2?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"Z"}),h.jsx("span",{className:te("rounded border px-1 text-xs font-bold",Number(a)&1?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"C"})]})]})}),h.jsxs(tw,{className:"w-60",children:[h.jsx("div",{className:"px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"font-medium text-white",children:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c}),c!=="left"&&c!=="right"&&c!=="result"&&h.jsx(n9,{concept:"register",level:"beginner",children:h.jsx("span",{className:"text-xs text-mantis-400",children:"💡"})})]})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(w=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${w}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(w)})]},w))})]})]})}function Qde(){const t=st(xe.FLAGS),e=st(xe.result),n=st(xe.left),i=st(xe.right),r=st(qL),s=st(Hn),[o,a]=b.useState(!1),[l,c]=b.useState(""),[u,d]=b.useState(""),[f,p]=b.useState(""),[g,m]=b.useState(""),[v,y]=b.useState(""),[w,x]=b.useState(""),S=st(KL),[_]=pa(),E=b.useCallback(()=>s&&"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),C=$=>["ADD","SUB","CMP","AND","OR","XOR"].some(J=>$.startsWith(J)),N=$=>{let K="AL",J="BL",Q="AL";const V=[/ADD\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/SUB\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/CMP\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/AND\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/OR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/XOR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/];for(const re of V){const pe=$.match(re);if(pe){K=pe[1],J=pe[2],/\[.*\]/.test(K)&&(K="MBR"),/\[.*\]/.test(J)&&(J="MBR"),Q=pe[1];break}}const F=["AL","BL","CL","DL","MBR"];return F.includes(K)||(K="AL"),F.includes(J)||(J="BL"),F.includes(Q)||(Q="AL"),{left:K,right:J,destination:Q}};b.useEffect(()=>{const $=Q=>{console.log("🎯 handleInstruction llamado con:",Q);const F=E()||Q;if(console.log("🎯 Instrucción completa a usar:",F),Q)if(C(F)){a(!0);const{left:pe,right:Z,destination:ce}=N(F);console.log("🎯 Registros detectados:",{left:pe,right:Z,destination:ce}),m(pe),y(Z),x(ce);let B,L;pe==="MBR"&&Z!=="MBR"?(B=gs(pe,"left",Q,void 0,{separateMBRPaths:!0,direction:"left"}),L=gs(Z,"right",Q)):Z==="MBR"&&pe!=="MBR"?(B=gs(pe,"left",Q),L=gs(Z,"right",Q,void 0,{separateMBRPaths:!0,direction:"right"})):(B=gs(pe,"left",Q),L=gs(Z,"right",Q));const U="M 455 45 L 465 45 L 550 45 L 550 16 L 90 16 L 90 85 L 130 85 L 220 85",k="M 455 85 L 465 85 L 550 85 L 550 250 L 90 250 L 90 145 L 125 145 L 220 145";c(B||U),d(L||k),p("")}else a(!1),c(""),d(""),p(""),m(""),y(""),x("");else a(!1),c(""),d(""),p(""),m(""),y(""),x("")},K=Q=>{const V=Q,F=E();$(F||V.detail.instruction)},J=Q=>{const V=Q;if(V.detail&&V.detail.instruction){const F=E();$(F||V.detail.instruction)}};return window.addEventListener("instructionChange",K),window.addEventListener("cpu:alu.execute",J),()=>{window.removeEventListener("instructionChange",K),window.removeEventListener("cpu:alu.execute",J)}},[s,E]);const R=t.bit(1),O=t.bit(0),D=t.bit(3),j=t.bit(4),q=t.bit(2);return h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[l&&h.jsx(qe.path,{className:"fill-none stroke-green-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",d:l,pathLength:1,strokeDasharray:1,style:De("cpu.alu.operands")}),u&&h.jsx(qe.path,{className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",d:u,pathLength:1,strokeDasharray:1,style:De("cpu.alu.operands")}),f&&h.jsx(qe.path,{className:"fill-none stroke-amber-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,191,36,0.6)]",strokeLinejoin:"round",d:f,pathLength:1,strokeDasharray:1,style:De("cpu.alu.results")}),l&&h.jsx(qe.path,{className:"fill-none stroke-green-300 stroke-1 opacity-50",strokeLinejoin:"round",d:l,pathLength:1,strokeDasharray:1,style:De("cpu.alu.operands")}),u&&h.jsx(qe.path,{className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",d:u,pathLength:1,strokeDasharray:1,style:De("cpu.alu.operands")}),f&&h.jsx(qe.path,{className:"fill-none stroke-amber-300 stroke-1 opacity-50",strokeLinejoin:"round",d:f,pathLength:1,strokeDasharray:1,style:De("cpu.alu.results")}),g&&v&&o&&l&&u&&h.jsxs(qe.text,{x:"125",y:"65",fill:"#34D399",fontSize:"12",fontWeight:"bold",style:{opacity:De("cpu.alu.leftText").opacity},children:[g," = ",n.low.toString("hex")]}),g&&v&&o&&l&&u&&h.jsxs(qe.text,{x:"125",y:"168",fill:"#60A5FA",fontSize:"12",fontWeight:"bold",style:{opacity:De("cpu.alu.rightText").opacity},children:[v," = ",i.low.toString("hex")]}),w&&o&&h.jsxs(qe.text,{x:"310",y:"95",fill:"#A855F7",fontSize:"12",fontWeight:"bold",style:{...De("cpu.alu.cog"),opacity:De("cpu.alu.resultText").opacity},children:[w," = ",e.low.toString("hex")]}),h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"aluGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#374151"}),h.jsx("stop",{offset:"50%",stopColor:"#4B5563"}),h.jsx("stop",{offset:"100%",stopColor:"#1F2937"})]}),h.jsx("filter",{id:"aluShadow",children:h.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"rgba(0,0,0,0.3)"})})]}),h.jsx("path",{d:"M 220 60 v 50 l 20 12 l -20 12 v 50 l 60 -36 v -52 Z",fill:"url(#aluGradient)",stroke:"#6B7280",strokeWidth:"2",strokeLinejoin:"round",filter:"url(#aluShadow)"}),h.jsx("text",{x:"250",y:"105",fill:"#E5E7EB",fontSize:"12",fontWeight:"bold",textAnchor:"middle",children:"ALU"})]}),h.jsx(qe.span,{className:"icon-[lucide--settings] absolute left-[244px] top-[120px] block size-5 text-stone-300",style:{transform:De("cpu.alu.cog").rot.to($=>`rotate(${$*60}deg)`)}}),o&&h.jsx(qe.span,{className:"absolute left-[244px] top-[40px] z-30 flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:De("cpu.alu.operation"),children:r}),h.jsxs(qe.div,{className:te("absolute flex items-center justify-center gap-0.5 rounded border-2 border-amber-400 bg-transparent font-bold text-stone-200 shadow-lg ring-1 ring-amber-300",_.flagsVisibility==="SF_OF_CF_ZF"?"left-[210px] top-[190px] min-h-[40px] min-w-[60px] px-2":"left-[230px] top-[190px] min-h-[40px] min-w-[40px] px-1"),style:De("cpu.FLAGS"),children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[7px] font-bold text-stone-300",children:"FLAGS"}),h.jsxs("div",{className:"mt-3 flex items-center gap-0.5",children:[S&&h.jsx("span",{className:te("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",j?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"I"}),_.flagsVisibility==="SF_OF_CF_ZF"&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:te("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",D?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"S"}),h.jsx("span",{className:te("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",q?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"O"})]}),h.jsx("span",{className:te("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",R?"border-amber-400 bg-amber-400 text-stone-950 shadow-[0_0_4px_rgba(251,191,36,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"C"}),h.jsx("span",{className:te("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",O?"border-yellow-400 bg-yellow-400 text-stone-950 shadow-[0_0_4px_rgba(250,204,21,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"Z"})]})]})]})}function efe({progress:t,resetAnimations:e,returnToOriginal:n}){const{opacity:r,filterIntensity:s}=Ob({opacity:t.to(o=>n||e||o===0||o>0&&o<1?.4:o===1?1:.4),filterIntensity:t.to(o=>n||e||o===0||o>0&&o<1?.25:o===1?.6:.25),config:{tension:280,friction:60,duration:300}});return h.jsx(qe.div,{style:{opacity:r,filter:s.to(o=>`drop-shadow(0 0 ${8*o}px rgba(56,189,248,${o}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:h.jsxs("svg",{width:"90",height:"42",viewBox:"0 0 90 42",children:[h.jsx("rect",{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"#0369a1",stroke:"#38bdf8",strokeWidth:"2.5"}),Array.from({length:4}).map((o,a)=>h.jsx("rect",{x:2,y:10+a*5,width:8,height:2.5,rx:1.2,fill:"#38bdf8"},a)),Array.from({length:8}).map((o,a)=>h.jsx(qe.rect,{x:60,y:8+a*3.2,width:24,height:2.5,rx:1.2,fill:t.to(l=>n||e||l>0&&l<1?"#0ea5e9":l===1?"#7dd3fc":"#0ea5e9"),style:{filter:t.to(l=>n||e||l>0&&l<1?"none":l===1?"drop-shadow(0 0 8px #38bdf8)":"none")}},a)),Array.from({length:5}).map((o,a)=>h.jsx(qe.rect,{x:15,y:t.to(()=>12+a*3.5),width:40,height:2.8,rx:1.4,fill:t.to(l=>n||e||l===0||l>0&&l<1?"#0c4a6e":l===1?"#7dd3fc":"#0c4a6e"),style:{filter:t.to(l=>n||e||l===0||l>0&&l<1?"none":l===1?"drop-shadow(0 0 6px #38bdf8)":"none"),transition:"fill 0.7s, filter 0.7s"}},a)),h.jsx(qe.rect,{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"none",stroke:"#7dd3fc",strokeWidth:"2.5",strokeDasharray:"160",strokeDashoffset:t.to(o=>n||e||o>0&&o<1?160:o===1?0:160),style:{opacity:t.to(o=>n||e||o>0&&o<1?0:o===1?.8:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})})}function tfe({progress:t,phase:e,resetAnimations:n,returnToOriginal:i}){return h.jsxs(h.Fragment,{children:[Array.from({length:5}).map((s,o)=>h.jsx(qe.rect,{x:16,y:t.to(()=>10+o*4),width:38,height:3,rx:1,fill:t.to(a=>i||n||e==="fetching"&&a===0||a===0?"#581c87":a>=(o+1)/5?"#f0abfc":Math.floor(a*5)===o&&a>0&&a<1?"#fff1fb":"#581c87"),style:{filter:t.to(a=>i||n||e==="fetching"&&a===0||a===0?"none":a>=(o+1)/5?"drop-shadow(0 0 6px #e879f9)":Math.floor(a*5)===o&&a>0&&a<1?"drop-shadow(0 0 12px #e879f9)":"none"),transition:"fill 0.7s, filter 0.7s"}},o)),h.jsx(qe.rect,{x:15,y:t.to(s=>10+Math.floor(s*5)*4-.5),width:40,height:3.5,rx:1.5,fill:"#e879f9",style:{opacity:t.to(s=>i||n?0:s>0&&s<1?.25+.25*Math.sin(s*Math.PI):0),transition:"y 0.3s, opacity 0.2s"}}),h.jsx(qe.rect,{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"none",stroke:"#f0abfc",strokeWidth:"2",strokeDasharray:"160",strokeDashoffset:t.to(s=>i||n||e==="fetching"&&s===0||s===0?160:160-160*s),style:{opacity:t.to(s=>i||n?0:s>0&&s<1&&e==="fetching-operands"?.7:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})}function nfe({progress:t,showControlMem:e,returnToOriginal:n}){const{opacity:i,pulseActive:r}=Ob({opacity:t.to(s=>n||s===0?.4:s>0&&s<1?1:.4),pulseActive:t.to(s=>n?!1:e&&s>0&&s<1),config:{tension:280,friction:60,duration:300}});return h.jsx(qe.span,{className:"flex size-4 items-center justify-center rounded-full bg-fuchsia-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(232,121,249,0.6)]",style:{opacity:i,fontVariantNumeric:"tabular-nums",fontFamily:"monospace",transition:"opacity 0.3s ease-out"},title:"Lectura de microinstrucciones",children:h.jsx(qe.span,{style:{animation:r.to(s=>s?"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite":"none")},children:"1"})})}function ife({progress:t,showControlMem:e,returnToOriginal:n}){const{opacity:i,pulseActive:r}=Ob({opacity:t.to(s=>n||s===0||s>0&&s<1?.4:s===1?1:.4),pulseActive:t.to(s=>n?!1:e&&s===1),config:{tension:280,friction:60,duration:300}});return h.jsx(qe.span,{className:"flex size-4 items-center justify-center rounded-full bg-sky-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(56,189,248,0.6)]",style:{opacity:i,fontVariantNumeric:"tabular-nums",fontFamily:"monospace",transition:"opacity 0.3s ease-out"},title:"Envío de señales de control",children:h.jsx(qe.span,{style:{animation:r.to(s=>s?"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite":"none")},children:"2"})})}function rfe({progress:t,phase:e,memAnimKey:n,resetAnimations:i,returnToOriginal:r}){const{opacity:s,filterIntensity:o}=Ob({opacity:t.to(a=>r||a===0?.4:a>0&&a<1?1:.4),filterIntensity:t.to(a=>r||a===0?.25:a>0&&a<1?.6:.25),config:{tension:280,friction:60,duration:300}});return h.jsx(qe.div,{style:{opacity:s,filter:o.to(a=>`drop-shadow(0 0 ${8*a}px rgba(232,121,249,${a}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:h.jsxs("svg",{width:"70",height:"38",viewBox:"0 0 70 38",className:"mb-0.5",children:[h.jsx("rect",{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"#a21caf",stroke:"#e879f9",strokeWidth:"2"}),Array.from({length:4}).map((a,l)=>h.jsx("rect",{x:2,y:9+l*6,width:6,height:2,rx:1,fill:"#e879f9"},l)),Array.from({length:4}).map((a,l)=>h.jsx("rect",{x:62,y:9+l*6,width:6,height:2,rx:1,fill:"#e879f9"},l)),h.jsx(tfe,{progress:t,phase:e,resetAnimations:i,returnToOriginal:r},n)]})})}function sfe(){const[t,e]=b.useState(0),[n,i]=b.useState(!1),[r,s]=b.useState(!1);b.useEffect(()=>{let d=0;const f=De("cpu.decoder.progress.progress").to(p=>{d===0&&p>0&&(e(g=>g+1),i(!1),s(!1)),d>0&&p===0&&(e(g=>g+1),i(!0),setTimeout(()=>{s(!0)},100),setTimeout(()=>i(!1),100)),d=p});return()=>{typeof f=="function"&&f()}},[]);const o=nn(),a=st(Hn),[l,c]=b.useState(!1),[,u]=b.useState(!1);return b.useEffect(()=>{let d=null;u(!1);let f;return l?f=De("cpu.decoder.progress.progress").to(p=>{p===1?d=setTimeout(()=>{u(!0)},1500):(d&&clearTimeout(d),u(!1))}):u(!1),()=>{d&&clearTimeout(d),typeof f=="function"&&f()}},[l]),h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[h.jsx(qe.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:De("cpu.decoder.path")}),h.jsx(qe.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:De("cpu.decoder.path")})]}),h.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:o("computer.cpu.control-unit")})}),h.jsxs("div",{className:"absolute bottom-[17px] left-[30px] flex h-[160px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[h.jsx("div",{className:"min-w-[180px] overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-3 py-1",children:h.jsxs("div",{style:{position:"relative",left:0},children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{style:{position:"relative",left:0,display:"flex",alignItems:"center"},children:[h.jsx("span",{className:"text-sm leading-none",children:o("computer.cpu.decoder")}),h.jsx("button",{type:"button","aria-label":l?"Ocultar memoria de control":"Mostrar memoria de control",className:"ml-2 flex size-6 items-center justify-center rounded-lg bg-gradient-to-r from-mantis-600 to-mantis-500 text-white shadow-lg transition-all duration-300 hover:from-mantis-500 hover:to-mantis-400 focus:outline-none focus:ring-2 focus:ring-mantis-400",style:{fontSize:"1.2em",lineHeight:1,padding:0,minWidth:0,minHeight:0,transform:l?"rotate(180deg)":"rotate(0deg)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:l?"0 4px 12px rgba(34,197,94,0.4)":"0 2px 8px rgba(34,197,94,0.2)"},onClick:()=>c(d=>!d),children:h.jsx("span",{style:{fontWeight:"bold",transform:l?"scale(0.8)":"scale(1)",transition:"transform 0.2s ease-out"},children:l?"−":"+"})})]})}),h.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:h.jsx(qe.div,{className:"h-full bg-mantis-400",style:{width:De("cpu.decoder.progress.progress").to(d=>`${d*100}%`),opacity:De("cpu.decoder.progress.opacity")}})}),h.jsx("div",{className:"flex w-full justify-center",children:l&&h.jsx("div",{className:"flex min-w-[120px] flex-col items-center",children:h.jsxs("div",{className:"flex flex-row items-start gap-4",children:[h.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[h.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-fuchsia-100 drop-shadow-[0_0_6px_rgba(232,121,249,0.6)]",style:{minHeight:"18px"},children:[h.jsx(nfe,{progress:De("cpu.decoder.progress.progress"),showControlMem:l,returnToOriginal:r}),"Memoria de control"]}),h.jsx(rfe,{progress:De("cpu.decoder.progress.progress"),phase:a==null?void 0:a.phase,memAnimKey:t,resetAnimations:n,returnToOriginal:r})]}),h.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[h.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-sky-100 drop-shadow-[0_0_6px_rgba(56,189,248,0.6)]",style:{minHeight:"18px"},children:[h.jsx(ife,{progress:De("cpu.decoder.progress.progress"),showControlMem:l,returnToOriginal:r}),"Secuenciador"]}),h.jsx(efe,{progress:De("cpu.decoder.progress.progress"),phase:a==null?void 0:a.phase,memAnimKey:t,resetAnimations:n,returnToOriginal:r})]})]})})}),h.jsx("div",{className:"flex w-full justify-center",style:{maxHeight:l?90:0,opacity:l?1:0,transform:l?"translateY(0)":"translateY(-10px)",transition:"max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease-out, transform 0.5s ease-out",overflow:"hidden"}})]})}),h.jsx("div",{className:"flex w-full flex-1 items-start justify-center p-1",children:h.jsxs("div",{className:"w-[220px] max-w-[220px]",children:[h.jsx("div",{className:"mb-1 flex items-center justify-between",children:h.jsx("span",{className:"w-16 whitespace-nowrap text-xs font-bold uppercase tracking-wide text-mantis-400",children:"Instrucción"})}),h.jsx("div",{className:"mb-0.5 rounded border border-stone-600 bg-stone-900/80 p-0.5",children:h.jsx("div",{className:"min-w-0 flex-1 text-center",children:a&&"metadata"in a&&a.metadata?h.jsxs("div",{className:"truncate text-xs text-stone-300",children:[h.jsx("span",{className:"font-mono text-mantis-300",children:a.metadata.name}),a.metadata.operands.length>0&&h.jsxs("span",{className:"text-white",children:[" ",a.metadata.operands.join(", ")]})]}):h.jsx("div",{className:"text-xs text-stone-500",children:(a==null?void 0:a.phase)==="stopped"?"CPU detenida":"Esperando..."})})})]})})]})]})}function ofe(){const[t,e]=b.useState(!1),[n,i]=b.useState(0);return b.useEffect(()=>{const r=()=>{e(!0),i(s=>s+1),setTimeout(()=>{e(!1)},3e3)};return window.addEventListener("ip-register-update",r),()=>{window.removeEventListener("ip-register-update",r)}},[]),t?h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
        @keyframes slideUpAndFade {
          0% {
            opacity: 1;
            transform: translateY(0px);
          }
          30% {
            opacity: 1;
            transform: translateY(-30px);
          }
          70% {
            opacity: 1;
            transform: translateY(-30px);
          }
          100% {
            opacity: 0;
            transform: translateY(-50px);
          }
        }
      `}),h.jsx("div",{className:te("pointer-events-none absolute left-[425px] top-[342px]","font-mono text-lg font-bold"),style:{color:"#ff6347",animation:"slideUpAndFade 3s ease-out forwards"},children:"+1"},n)]}):null}function afe(){const t=nn(),e=st(KC),[n,i]=b.useState(!1),[r,s]=b.useState(!1),[o,a]=b.useState(!1);return b.useEffect(()=>{const l=(u,d,f)=>{a(u==="ADD"||u==="SUB"||u==="CMP"||u==="AND"||u==="OR"||u==="XOR"||u==="NOT"||u==="NEG"||u==="DEC"||u==="INC"),i(!!(u==="IRET"||d)),s(!!f)},c=u=>{const d=u;l(d.detail.instruction,d.detail.modeid,d.detail.moderi)};return window.addEventListener("instructionChange",c),()=>{window.removeEventListener("instructionChange",c)}},[]),h.jsxs("div",{"data-testid":"cpu-component",className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),h.jsx(Qie,{showSP:e,showri:r}),h.jsx(Rse,{showSP:e,showid:n,showri:r}),o&&h.jsxs(h.Fragment,{children:[h.jsx(Oi,{name:"left",className:te("left-[96px] top-[49px]","border-transparent","bg-transparent")}),h.jsx(Oi,{name:"right",className:te("left-[96px] top-[150px]","border-transparent","bg-transparent")}),h.jsx(Oi,{name:"result",className:te("left-[280px] top-[79px]","border-transparent","bg-transparent")})]}),h.jsx(Qde,{}),h.jsxs("div",{className:"absolute left-[450px] top-[30px] z-10",children:[h.jsx(Oi,{name:"AL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"AL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[70px] z-10",children:[h.jsx(Oi,{name:"BL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"BL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[110px] z-10",children:[h.jsx(Oi,{name:"CL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"CL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[150px] z-10",children:[h.jsx(Oi,{name:"DL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"DL"})]}),n&&h.jsxs("div",{className:"absolute left-[450px] top-[190px] z-10",children:[h.jsx(Oi,{name:"id",className:"border-cyan-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-cyan-400 bg-cyan-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-cyan-400",children:"id"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[332px] z-10",children:[h.jsx(Oi,{name:"IP",emphasis:!0,className:"border-red-500"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-red-500 bg-red-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-red-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IP"})]}),h.jsxs("div",{className:"absolute left-[594px] top-[332px] z-10",children:[h.jsx(Oi,{name:"MAR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MAR"})]}),h.jsxs("div",{className:"absolute left-[594px] top-[233px] z-10",children:[h.jsx(Oi,{name:"MBR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MBR"})]}),h.jsxs("div",{className:"absolute left-[230px] top-[270px] z-10",children:[h.jsx(Oi,{name:"IR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IR"})]}),h.jsx(sfe,{}),e&&h.jsx(Oi,{name:"SP",emphasis:!0,className:te("left-[450px] top-[292px]","border-yellow-400")}),r&&h.jsxs("div",{className:"absolute left-[450px] top-[372px] z-10",children:[h.jsx(Oi,{name:"ri",emphasis:!0,className:"border-cyan-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-cyan-400 bg-cyan-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-cyan-400",children:"ri"})]}),h.jsx(ofe,{})]})}function Oi({name:t,emphasis:e,className:n}){const i=r=>`cpu.${r}`;return h.jsx(yr,{name:t,valueAtom:xe[t],springs:i(t),emphasis:e,className:te("absolute",n)})}const p9=b.memo(({className:t})=>{const e=nn(),n=st(Pp),i=st(wb),[r]=pa(),[s,o]=b.useState(!1),l=1e3/r.cpuSpeed;if(!r.showStatsCPU)return null;const c=i>0?(n/i).toFixed(2):"-",u=n*l,d=l/1e3,f=()=>n===0?"📊":i===0?"⏸️":"⚡",p=()=>n===0?"text-stone-400":i===0?"text-yellow-400":"text-mantis-400",g=h.jsxs("div",{className:"space-y-3 text-xs",children:[h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"CPI (Ciclos por Instrucción):"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Métrica fundamental que indica la eficiencia del procesador. Calculada como el cociente entre ciclos totales e instrucciones ejecutadas. Un CPI más bajo significa mejor rendimiento."})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Tiempo de CPU:"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Tiempo real transcurrido durante la ejecución del programa. Se calcula multiplicando los ciclos totales por el tiempo de cada ciclo según la velocidad configurada."})]})]}),m=h.jsxs("div",{className:"space-y-3 text-xs",children:[h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Velocidad CPU (Hz):"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Frecuencia del reloj del procesador que determina la velocidad de ejecución. Cada ciclo de reloj ejecuta una microoperación del procesador."})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Tiempo por Ciclo:"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Duración de cada ciclo calculada como 1/velocidad. Por ejemplo, 1 MHz = 1 microsegundo por ciclo."})]})]});return h.jsxs("div",{className:te("flex flex-col gap-2 rounded-lg border border-stone-600 bg-stone-900/95 p-3 shadow-lg","min-w-[300px] max-w-[350px]",t),children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm font-bold uppercase tracking-wide text-mantis-400",children:e("computer.cpu.stats")}),h.jsx("button",{onClick:()=>o(!s),className:te("rounded px-2 py-1 text-xs transition-colors",s?"bg-mantis-400/20 text-mantis-400":"text-stone-400 hover:bg-mantis-400/10 hover:text-mantis-400"),children:s?"−":"+"})]})}),h.jsxs("div",{className:"flex items-center gap-3 rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsx("div",{className:te("text-2xl",p()),children:f()}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:te("text-sm font-semibold",p()),children:n>0?"Ejecutando":"En espera"}),h.jsx("div",{className:"mt-1 text-xs text-stone-400",children:i>0?`${i} instrucciones ejecutadas`:"Sin instrucciones ejecutadas"})]})]}),s&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsx("div",{className:"mb-2 text-xs font-bold text-mantis-400",children:"Métricas principales:"}),h.jsx("div",{className:"mb-2 text-xs text-stone-400",children:"Estadísticas acumuladas del programa completo"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-stone-300",children:"Ciclos totales del programa"}),h.jsx("div",{className:"font-mono text-lg text-white",children:n})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-stone-300",children:e("computer.cpu.instruction-count")}),h.jsx("div",{className:"font-mono text-lg text-white",children:i})]})]})]}),h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Métricas de Rendimiento:"}),h.jsx(xr,{content:g,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:h.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:"💡"})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-xs text-stone-300",title:e("computer.cpu.cpi-help"),children:[e("computer.cpu.cpi"),":"]}),h.jsx("span",{className:"font-mono text-sm text-mantis-300",children:c})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-xs text-stone-300",title:`${e("computer.cpu.cpu-time-help")} (${d.toFixed(1)} s)`,children:e("computer.cpu.cpu-time")}),h.jsxs("span",{className:"font-mono text-sm text-mantis-300",children:[(u/1e3).toFixed(1)," s"]})]})]})]}),h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Configuración Actual:"}),h.jsx(xr,{content:m,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:h.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:"⚙️"})})]}),h.jsx("div",{className:"space-y-1 text-xs text-stone-300",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-stone-300",children:h.jsx("strong",{children:"Velocidad CPU:"})}),h.jsxs("span",{className:"font-mono text-mantis-300",children:[r.cpuSpeed," Hz (",d.toFixed(1)," s/ciclo)"]})]})})]})]})]})});p9.displayName="CPUStats";const lfe="_pushable_1q0ek_2",cfe="_front_1q0ek_15",ufe="_shadow_1q0ek_20",dfe="_edge_1q0ek_52",Jg={pushable:lfe,front:cfe,shadow:ufe,edge:dfe};function ffe(){const t=nn(),{status:e,dispatch:n,devices:i}=Fn();return Nu("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?h.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:h.jsxs("button",{className:Jg.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[h.jsx("div",{className:Jg.shadow}),h.jsx("div",{className:Jg.edge}),h.jsx("span",{className:Jg.front,children:t("computer.f10")})]})}):null}function hfe(){const t=nn(),{devices:e}=Fn();return e.handshake?h.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),h.jsx(yr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:TE,springs:"handshake.STATE",className:"mx-auto my-4"}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(yr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:RE,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var m9={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.89 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(b)})(oU,function(n){return function(){var i={442:function(a){a.exports=n},651:function(a){a.exports=function(){var l={d:function(B,L){for(var U in L)l.o(L,U)&&!l.o(B,U)&&Object.defineProperty(B,U,{enumerable:!0,get:L[U]})},o:function(B,L){return Object.prototype.hasOwnProperty.call(B,L)},r:function(B){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(B,"__esModule",{value:!0})}},c={};function u(B){return function(L){if(Array.isArray(L))return f(L)}(B)||function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}(B)||d(B)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(B,L){if(B){if(typeof B=="string")return f(B,L);var U={}.toString.call(B).slice(8,-1);return U==="Object"&&B.constructor&&(U=B.constructor.name),U==="Map"||U==="Set"?Array.from(B):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?f(B,L):void 0}}function f(B,L){(L==null||L>B.length)&&(L=B.length);for(var U=0,k=Array(L);U<L;U++)k[U]=B[U];return k}function p(B){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},p(B)}function g(B,L){for(var U=0;U<L.length;U++){var k=L[U];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(B,v(k.key),k)}}function m(B,L,U){return(L=v(L))in B?Object.defineProperty(B,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):B[L]=U,B}function v(B){var L=function(U,k){if(p(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var I=P.call(U,k);if(p(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(U)}(B,"string");return p(L)=="symbol"?L:L+""}l.r(c),l.d(c,{SimpleKeyboard:function(){return Z},default:function(){return ce}});var y=function(){return B=function k(P){var I=P.getOptions,T=P.getCaretPosition,X=P.getCaretPositionEnd,G=P.dispatch;(function(ie,ee){if(!(ie instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,k),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(ie){return ie&&!(ie[0]==="{"&&ie[ie.length-1]==="}")}),this.getOptions=I,this.getCaretPosition=T,this.getCaretPositionEnd=X,this.dispatch=G,k.bindMethods(k,this)},L=[{key:"getButtonType",value:function(k){return k.includes("{")&&k.includes("}")&&k!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(k){var P=this.getButtonType(k),I=k.replace("{","").replace("}",""),T="";return P!=="standardBtn"&&(T=" hg-button-".concat(I)),"hg-".concat(P).concat(T)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(k,P){return(P=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),P):P||this.getDefaultDiplay())[k]||k}},{key:"getUpdatedInput",value:function(k,P,I){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:I,X=arguments.length>4&&arguments[4]!==void 0&&arguments[4],G=this.getOptions(),ie=[I,T,X],ee=P;return(k==="{bksp}"||k==="{backspace}")&&ee.length>0?ee=this.removeAt.apply(this,[ee].concat(ie)):(k==="{delete}"||k==="{forwarddelete}")&&ee.length>0?ee=this.removeForwardsAt.apply(this,[ee].concat(ie)):k==="{space}"?ee=this.addStringAt.apply(this,[ee," "].concat(ie)):k!=="{tab}"||typeof G.tabCharOnTab=="boolean"&&G.tabCharOnTab===!1?k!=="{enter}"&&k!=="{numpadenter}"||!G.newLineOnEnter?k.includes("numpad")&&Number.isInteger(Number(k[k.length-2]))?ee=this.addStringAt.apply(this,[ee,k[k.length-2]].concat(ie)):k==="{numpaddivide}"?ee=this.addStringAt.apply(this,[ee,"/"].concat(ie)):k==="{numpadmultiply}"?ee=this.addStringAt.apply(this,[ee,"*"].concat(ie)):k==="{numpadsubtract}"?ee=this.addStringAt.apply(this,[ee,"-"].concat(ie)):k==="{numpadadd}"?ee=this.addStringAt.apply(this,[ee,"+"].concat(ie)):k==="{numpaddecimal}"?ee=this.addStringAt.apply(this,[ee,"."].concat(ie)):k==="{"||k==="}"?ee=this.addStringAt.apply(this,[ee,k].concat(ie)):k.includes("{")||k.includes("}")||(ee=this.addStringAt.apply(this,[ee,k].concat(ie))):ee=this.addStringAt.apply(this,[ee,`
`].concat(ie)):ee=this.addStringAt.apply(this,[ee,"	"].concat(ie)),G.debug&&console.log("Input will be: "+ee),ee}},{key:"updateCaretPos",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],I=this.updateCaretPosAction(k,P);this.dispatch(function(T){T.setCaretPosition(I)})}},{key:"updateCaretPosAction",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],I=this.getOptions(),T=this.getCaretPosition();return T!=null&&(P?T>0&&(T-=k):T+=k),I.debug&&console.log("Caret at:",T),T}},{key:"addStringAt",value:function(k,P){var I,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k.length,G=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return T||T===0?(I=[k.slice(0,T),P,k.slice(X)].join(""),this.isMaxLengthReached()||G&&this.updateCaretPos(P.length)):I=k+P,I}},{key:"removeAt",value:function(k){var P,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.length,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,X=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(I===0&&T===0)return k;if(I===T){var G=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;I&&I>=0?k.substring(I-2,I).match(G)?(P=k.substr(0,I-2)+k.substr(I),X&&this.updateCaretPos(2,!0)):(P=k.substr(0,I-1)+k.substr(I),X&&this.updateCaretPos(1,!0)):k.slice(-2).match(G)?(P=k.slice(0,-2),X&&this.updateCaretPos(2,!0)):(P=k.slice(0,-1),X&&this.updateCaretPos(1,!0))}else P=k.slice(0,I)+k.slice(T),X&&this.dispatch(function(ie){ie.setCaretPosition(I)});return P}},{key:"removeForwardsAt",value:function(k){var P,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.length,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,X=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return k!=null&&k.length&&I!==null?(I===T?P=k.substring(I,I+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?k.substr(0,I)+k.substr(I+2):k.substr(0,I)+k.substr(I+1):(P=k.slice(0,I)+k.slice(T),X&&this.dispatch(function(G){G.setCaretPosition(I)})),P):k}},{key:"handleMaxLength",value:function(k,P){var I=this.getOptions(),T=I.maxLength,X=k[I.inputName||"default"],G=P.length-1>=T;if(P.length<=X.length)return!1;if(Number.isInteger(T))return I.debug&&console.log("maxLength (num) reached:",G),G?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(p(T)==="object"){var ie=P.length-1>=T[I.inputName||"default"];return I.debug&&console.log("maxLength (obj) reached:",ie),ie?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(k){return k?k.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(P,I){return I.length?P+I[0].toUpperCase()+I.slice(1):P}):""}},{key:"chunkArray",value:function(k,P){return u(Array(Math.ceil(k.length/P))).map(function(I,T){return k.slice(P*T,P+P*T)})}},{key:"escapeRegex",value:function(k){return k.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(k,P){var I=k,T=P.indexOf("‫");return T<k&&T!=-1&&I--,P.indexOf("‬")<k&&T!=-1&&I--,I<0?0:I}},{key:"isConstructor",value:function(k){try{Reflect.construct(String,[],k)}catch{return!1}return!0}}],U=[{key:"bindMethods",value:function(k,P){var I,T=function(G,ie){var ee=typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(!ee){if(Array.isArray(G)||(ee=d(G))||ie){ee&&(G=ee);var Re=0,Ve=function(){};return{s:Ve,n:function(){return Re>=G.length?{done:!0}:{done:!1,value:G[Re++]}},e:function(ve){throw ve},f:Ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var We,Fe=!0,tt=!1;return{s:function(){ee=ee.call(G)},n:function(){var ve=ee.next();return Fe=ve.done,ve},e:function(ve){tt=!0,We=ve},f:function(){try{Fe||ee.return==null||ee.return()}finally{if(tt)throw We}}}}(Object.getOwnPropertyNames(k.prototype));try{for(T.s();!(I=T.n()).done;){var X=I.value;X==="constructor"||X==="bindMethods"||(P[X]=P[X].bind(P))}}catch(G){T.e(G)}finally{T.f()}}}],L&&g(B.prototype,L),U&&g(B,U),Object.defineProperty(B,"prototype",{writable:!1}),B;var B,L,U}();m(y,"noop",function(){});var w=y;function x(B){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},x(B)}function S(B,L){for(var U=0;U<L.length;U++){var k=L[U];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(B,E(k.key),k)}}function _(B,L,U){return(L=E(L))in B?Object.defineProperty(B,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):B[L]=U,B}function E(B){var L=function(U,k){if(x(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var I=P.call(U,k);if(x(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(U)}(B,"string");return x(L)=="symbol"?L:L+""}var C=function(){return B=function k(P){var I=this,T=P.dispatch,X=P.getOptions;(function(G,ie){if(!(G instanceof ie))throw new TypeError("Cannot call a class as a function")})(this,k),_(this,"getOptions",void 0),_(this,"dispatch",void 0),_(this,"isModifierKey",function(G){return G.altKey||G.ctrlKey||G.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(G.code||G.key||I.keyCodeToKey(G==null?void 0:G.keyCode))}),this.dispatch=T,this.getOptions=X,w.bindMethods(k,this)},L=[{key:"handleHighlightKeyDown",value:function(k){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var I=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(T){var X,G,ie=T.getButtonElement(I),ee=T.getButtonElement("{".concat(I,"}"));if(ie)X=ie,G=I;else{if(!ee)return;X=ee,G="{".concat(I,"}")}var Re,Ve,We,Fe,tt=function(Pt){Pt.style.background=P.physicalKeyboardHighlightBgColor||"#dadce4",Pt.style.color=P.physicalKeyboardHighlightTextColor||"black"};if(X)if(Array.isArray(X)){if(X.forEach(function(Pt){return tt(Pt)}),P.physicalKeyboardHighlightPress)if(P.physicalKeyboardHighlightPressUsePointerEvents)(Re=X[0])===null||Re===void 0||(Ve=Re.onpointerdown)===null||Ve===void 0||Ve.call(Re,k);else if(P.physicalKeyboardHighlightPressUseClick){var ve;(ve=X[0])===null||ve===void 0||ve.click()}else T.handleButtonClicked(G,k)}else tt(X),P.physicalKeyboardHighlightPress&&(P.physicalKeyboardHighlightPressUsePointerEvents?(We=X)===null||We===void 0||(Fe=We.onpointerdown)===null||Fe===void 0||Fe.call(We,k):P.physicalKeyboardHighlightPressUseClick?X.click():T.handleButtonClicked(G,k))})}},{key:"handleHighlightKeyUp",value:function(k){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var I=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(T){var X,G,ie,ee=T.getButtonElement(I)||T.getButtonElement("{".concat(I,"}")),Re=function(Ve){Ve.removeAttribute&&Ve.removeAttribute("style")};ee&&(Array.isArray(ee)?(ee.forEach(function(Ve){return Re(Ve)}),P.physicalKeyboardHighlightPressUsePointerEvents&&((X=ee[0])===null||X===void 0||(G=X.onpointerup)===null||G===void 0||G.call(X,k))):(Re(ee),P.physicalKeyboardHighlightPressUsePointerEvents&&(ee==null||(ie=ee.onpointerup)===null||ie===void 0||ie.call(ee,k))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(k){var P,I="",T=k.code||k.key||this.keyCodeToKey(k==null?void 0:k.keyCode);return(I=T!=null&&T.includes("Numpad")||T!=null&&T.includes("Shift")||T!=null&&T.includes("Space")||T!=null&&T.includes("Backspace")||T!=null&&T.includes("Control")||T!=null&&T.includes("Alt")||T!=null&&T.includes("Meta")?k.code||"":k.key||this.keyCodeToKey(k==null?void 0:k.keyCode)||"").length>1?(P=I)===null||P===void 0?void 0:P.toLowerCase():I}},{key:"keyCodeToKey",value:function(k){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[k]||""}}],L&&S(B.prototype,L),U&&S(B,U),Object.defineProperty(B,"prototype",{writable:!1}),B;var B,L,U}();function N(B){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},N(B)}function R(B,L){for(var U=0;U<L.length;U++){var k=L[U];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(B,D(k.key),k)}}function O(B,L,U){return(L=D(L))in B?Object.defineProperty(B,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):B[L]=U,B}function D(B){var L=function(U,k){if(N(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var I=P.call(U,k);if(N(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(U)}(B,"string");return N(L)=="symbol"?L:L+""}var j=function(){return B=function k(P){var I=P.utilities,T=P.options;(function(X,G){if(!(X instanceof G))throw new TypeError("Cannot call a class as a function")})(this,k),O(this,"utilities",void 0),O(this,"options",void 0),O(this,"candidateBoxElement",void 0),O(this,"pageIndex",0),O(this,"pageSize",void 0),this.utilities=I,this.options=T,w.bindMethods(k,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},L=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(k){var P=this,I=k.candidateValue,T=k.targetElement,X=k.onSelect;if(I&&I.length){var G=this.utilities.chunkArray(I.split(" "),this.pageSize);this.renderPage({candidateListPages:G,targetElement:T,pageIndex:this.pageIndex,nbPages:G.length,onItemSelected:function(ie,ee){X(ie,ee),P.destroy()}})}}},{key:"renderPage",value:function(k){var P,I=this,T=k.candidateListPages,X=k.targetElement,G=k.pageIndex,ie=k.nbPages,ee=k.onItemSelected;(P=this.candidateBoxElement)===null||P===void 0||P.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Re=document.createElement("ul");Re.className="hg-candidate-box-list",T[G].forEach(function(An){var Jl,Ts=document.createElement("li"),ya=function(){var ba=new(I.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(ba,"target",{value:Ts}),ba};Ts.className="hg-candidate-box-list-item",Ts.innerHTML=((Jl=I.options.display)===null||Jl===void 0?void 0:Jl[An])||An,I.options.useTouchEvents?Ts.ontouchstart=function(ba){return ee(An,ba||ya())}:Ts.onclick=function(){var ba=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ya();return ee(An,ba)},Re.appendChild(Ts)});var Ve=G>0,We=document.createElement("div");We.classList.add("hg-candidate-box-prev"),Ve&&We.classList.add("hg-candidate-box-btn-active");var Fe=function(){Ve&&I.renderPage({candidateListPages:T,targetElement:X,pageIndex:G-1,nbPages:ie,onItemSelected:ee})};this.options.useTouchEvents?We.ontouchstart=Fe:We.onclick=Fe,this.candidateBoxElement.appendChild(We),this.candidateBoxElement.appendChild(Re);var tt=G<ie-1,ve=document.createElement("div");ve.classList.add("hg-candidate-box-next"),tt&&ve.classList.add("hg-candidate-box-btn-active");var Pt=function(){tt&&I.renderPage({candidateListPages:T,targetElement:X,pageIndex:G+1,nbPages:ie,onItemSelected:ee})};this.options.useTouchEvents?ve.ontouchstart=Pt:ve.onclick=Pt,this.candidateBoxElement.appendChild(ve),X.prepend(this.candidateBoxElement)}}],L&&R(B.prototype,L),U&&R(B,U),Object.defineProperty(B,"prototype",{writable:!1}),B;var B,L,U}(),q=j;function $(B){return function(L){if(Array.isArray(L))return K(L)}(B)||function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}(B)||function(L,U){if(L){if(typeof L=="string")return K(L,U);var k={}.toString.call(L).slice(8,-1);return k==="Object"&&L.constructor&&(k=L.constructor.name),k==="Map"||k==="Set"?Array.from(L):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?K(L,U):void 0}}(B)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function K(B,L){(L==null||L>B.length)&&(L=B.length);for(var U=0,k=Array(L);U<L;U++)k[U]=B[U];return k}function J(B){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},J(B)}function Q(B,L){var U=Object.keys(B);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(B);L&&(k=k.filter(function(P){return Object.getOwnPropertyDescriptor(B,P).enumerable})),U.push.apply(U,k)}return U}function V(B,L){for(var U=0;U<L.length;U++){var k=L[U];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(B,re(k.key),k)}}function F(B,L,U){return(L=re(L))in B?Object.defineProperty(B,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):B[L]=U,B}function re(B){var L=function(U,k){if(J(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var I=P.call(U,k);if(J(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(U)}(B,"string");return J(L)=="symbol"?L:L+""}var pe=function(){return B=function k(P,I){var T=this;if(function(Fe,tt){if(!(Fe instanceof tt))throw new TypeError("Cannot call a class as a function")}(this,k),F(this,"input",void 0),F(this,"options",void 0),F(this,"utilities",void 0),F(this,"caretPosition",void 0),F(this,"caretPositionEnd",void 0),F(this,"keyboardDOM",void 0),F(this,"keyboardPluginClasses",void 0),F(this,"keyboardDOMClass",void 0),F(this,"buttonElements",void 0),F(this,"currentInstanceName",void 0),F(this,"allKeyboardInstances",void 0),F(this,"keyboardInstanceNames",void 0),F(this,"isFirstKeyboardInstance",void 0),F(this,"physicalKeyboard",void 0),F(this,"modules",void 0),F(this,"activeButtonClass",void 0),F(this,"holdInteractionTimeout",void 0),F(this,"holdTimeout",void 0),F(this,"isMouseHold",void 0),F(this,"initialized",void 0),F(this,"candidateBox",void 0),F(this,"keyboardRowsDOM",void 0),F(this,"defaultName","default"),F(this,"activeInputElement",null),F(this,"handleParams",function(Fe,tt){var ve,Pt,An;if(typeof Fe=="string")ve=Fe.split(".").join(""),Pt=document.querySelector(".".concat(ve)),An=tt;else if(Fe instanceof HTMLDivElement){if(!Fe.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");ve=Fe.className.split(" ")[0],Pt=Fe,An=tt}else ve="simple-keyboard",Pt=document.querySelector(".".concat(ve)),An=Fe;return{keyboardDOMClass:ve,keyboardDOM:Pt,options:An}}),F(this,"getOptions",function(){return T.options}),F(this,"getCaretPosition",function(){return T.caretPosition}),F(this,"getCaretPositionEnd",function(){return T.caretPositionEnd}),F(this,"registerModule",function(Fe,tt){T.modules[Fe]||(T.modules[Fe]={}),tt(T.modules[Fe])}),F(this,"getKeyboardClassString",function(){for(var Fe=arguments.length,tt=new Array(Fe),ve=0;ve<Fe;ve++)tt[ve]=arguments[ve];return[T.keyboardDOMClass].concat(tt).filter(function(Pt){return!!Pt}).join(" ")}),typeof window<"u"){var X=this.handleParams(P,I),G=X.keyboardDOMClass,ie=X.keyboardDOM,ee=X.options,Re=ee===void 0?{}:ee;this.utilities=new w({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=ie,this.options=function(Fe){for(var tt=1;tt<arguments.length;tt++){var ve=arguments[tt]!=null?arguments[tt]:{};tt%2?Q(Object(ve),!0).forEach(function(Pt){F(Fe,Pt,ve[Pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Fe,Object.getOwnPropertyDescriptors(ve)):Q(Object(ve)).forEach(function(Pt){Object.defineProperty(Fe,Pt,Object.getOwnPropertyDescriptor(ve,Pt))})}return Fe}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Re),this.keyboardPluginClasses="",w.bindMethods(k,this);var Ve=this.options.inputName,We=Ve===void 0?this.defaultName:Ve;if(this.input={},this.input[We]="",this.keyboardDOMClass=G,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new C({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new q({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(G,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},L=[{key:"setCaretPosition",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k;this.caretPosition=k,this.caretPositionEnd=P}},{key:"getInputCandidates",value:function(k){var P=this,I=this.options,T=I.layoutCandidates,X=I.layoutCandidatesCaseSensitiveMatch;if(!T||J(T)!=="object")return{};var G=Object.keys(T).filter(function(Re){var Ve=k.substring(0,P.getCaretPositionEnd()||0)||k,We=new RegExp("".concat(P.utilities.escapeRegex(Re),"$"),X?"g":"gi");return!!$(Ve.matchAll(We)).length});if(G.length>1){var ie=G.sort(function(Re,Ve){return Ve.length-Re.length})[0];return{candidateKey:ie,candidateValue:T[ie]}}if(G.length){var ee=G[0];return{candidateKey:ee,candidateValue:T[ee]}}return{}}},{key:"showCandidatesBox",value:function(k,P,I){var T=this;this.candidateBox&&this.candidateBox.show({candidateValue:P,targetElement:I,onSelect:function(X,G){var ie=T.options,ee=ie.layoutCandidatesCaseSensitiveMatch,Re=ie.disableCandidateNormalization,Ve=ie.enableLayoutCandidatesKeyPress,We=X;Re||(We=X.normalize("NFD")),typeof T.options.beforeInputUpdate=="function"&&T.options.beforeInputUpdate(T);var Fe=T.getInput(T.options.inputName,!0),tt=T.getCaretPositionEnd()||0,ve=Fe.substring(0,tt||0)||Fe,Pt=new RegExp("".concat(T.utilities.escapeRegex(k),"$"),ee?"g":"gi"),An=ve.replace(Pt,We),Jl=Fe.replace(ve,An),Ts=An.length-ve.length,ya=(tt||Fe.length)+Ts;ya<0&&(ya=0),T.setInput(Jl,T.options.inputName,!0),T.setCaretPosition(ya),Ve&&typeof T.options.onKeyPress=="function"&&T.options.onKeyPress(X,G),typeof T.options.onChange=="function"&&T.options.onChange(T.getInput(T.options.inputName,!0),G),typeof T.options.onChangeAll=="function"&&T.options.onChangeAll(T.getAllInputs(),G)}})}},{key:"handleButtonClicked",value:function(k,P){var I=this.options,T=I.inputName,X=T===void 0?this.defaultName:T,G=I.debug;if(k!=="{//}"){this.input[X]||(this.input[X]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var ie=this.utilities.getUpdatedInput(k,this.input[X],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(k)&&this.activeInputElement&&this.input[X]&&this.input[X]===ie&&this.caretPosition===0&&this.caretPositionEnd===ie.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(k,P);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(k,P),this.input[X]!==ie&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(ie))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,ie))return;var ee=this.utilities.getUpdatedInput(k,this.input[X],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(ee,this.options.inputName,!0),G&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),P==null?void 0:P.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),P),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),P),P!=null&&P.target&&this.options.enableLayoutCandidates){var Re,Ve=this.getInputCandidates(ie),We=Ve.candidateKey,Fe=Ve.candidateValue;We&&Fe?this.showCandidatesBox(We,Fe,this.keyboardDOM):(Re=this.candidateBox)===null||Re===void 0||Re.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),G&&console.log("Key pressed:",k)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(k){this.options.syncInstanceInputs?this.dispatch(function(P){P.isMouseHold=k}):this.isMouseHold=k}},{key:"handleButtonMouseDown",value:function(k,P){var I=this;P&&(this.options.preventMouseDownDefault&&P.preventDefault(),this.options.stopMouseDownPropagation&&P.stopPropagation(),P.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(I.getMouseHold()&&(!k.includes("{")&&!k.includes("}")||k==="{delete}"||k==="{backspace}"||k==="{bksp}"||k==="{space}"||k==="{tab}")||k==="{arrowright}"||k==="{arrowleft}"||k==="{arrowup}"||k==="{arrowdown}")&&(I.options.debug&&console.log("Button held:",k),I.handleButtonHold(k)),clearTimeout(I.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(k,P){var I=this;P&&(this.options.preventMouseUpDefault&&P.preventDefault&&P.preventDefault(),this.options.stopMouseUpPropagation&&P.stopPropagation&&P.stopPropagation(),!(P.target===this.keyboardDOM||P.target&&this.keyboardDOM.contains(P.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(P.target===this.candidateBox.candidateBoxElement||P.target&&this.candidateBox.candidateBoxElement.contains(P.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(T){T.classList.remove(I.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),k&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(k,P)}},{key:"handleKeyboardContainerMouseDown",value:function(k){this.options.preventMouseDownDefault&&k.preventDefault()}},{key:"handleButtonHold",value:function(k){var P=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){P.getMouseHold()?(P.handleButtonClicked(k),P.handleButtonHold(k)):clearTimeout(P.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var k=this;this.dispatch(function(P){P.replaceInput(k.input),P.setCaretPosition(k.caretPosition,k.caretPositionEnd)})}},{key:"clearInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[k]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,P=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!P&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[k].replace("‫","").replace("‬","")+"‬":this.input[k]}},{key:"getAllInputs",value:function(){var k=this,P={};return Object.keys(this.input).forEach(function(I){P[I]=k.getInput(I,!0)}),P}},{key:"setInput",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,I=arguments.length>2?arguments[2]:void 0;this.input[P]=k,!I&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(k){this.input=k}},{key:"setOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=this.changedOptions(k);this.options=Object.assign(this.options,k),P.length&&(this.options.debug&&console.log("changedOptions",P),this.onSetOptions(P),this.render())}},{key:"changedOptions",value:function(k){var P=this;return Object.keys(k).filter(function(I){return JSON.stringify(k[I])!==JSON.stringify(P.options[I])})}},{key:"onSetOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];k.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(k.includes("layoutCandidatesPageSize")||k.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new q({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(k){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(P){k(window.SimpleKeyboardInstances[P],P)})}},{key:"addButtonTheme",value:function(k,P){var I=this;P&&k&&(k.split(" ").forEach(function(T){P.split(" ").forEach(function(X){I.options.buttonTheme||(I.options.buttonTheme=[]);var G=!1;I.options.buttonTheme.map(function(ie){if(ie!=null&&ie.class.split(" ").includes(X)){G=!0;var ee=ie.buttons.split(" ");ee.includes(T)||(G=!0,ee.push(T),ie.buttons=ee.join(" "))}return ie}),G||I.options.buttonTheme.push({class:X,buttons:k})})}),this.render())}},{key:"removeButtonTheme",value:function(k,P){var I=this;if(!k&&!P)return this.options.buttonTheme=[],void this.render();k&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(k.split(" ").forEach(function(T){var X;(X=I.options)===null||X===void 0||(X=X.buttonTheme)===null||X===void 0||X.map(function(G,ie){if(G&&P&&P.includes(G.class)||!P){var ee,Re,Ve=(ee=G)===null||ee===void 0?void 0:ee.buttons.split(" ").filter(function(We){return We!==T});G&&Ve!=null&&Ve.length?G.buttons=Ve.join(" "):((Re=I.options.buttonTheme)===null||Re===void 0||Re.splice(ie,1),G=null)}return G})}),this.render())}},{key:"getButtonElement",value:function(k){var P,I=this.buttonElements[k];return I&&(P=I.length>1?I:I[0]),P}},{key:"inputPatternIsValid",value:function(k){var P,I=this.options.inputPattern;if((P=I instanceof RegExp?I:I[this.options.inputName||this.defaultName])&&k){var T=P.test(k);return this.options.debug&&console.log('inputPattern ("'.concat(P,'"): ').concat(T?"passed":"did not pass!")),T}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var k=this.options.physicalKeyboardHighlightPreventDefault,P=k!==void 0&&k;document.addEventListener("keyup",this.handleKeyUp,P),document.addEventListener("keydown",this.handleKeyDown,P),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(k){this.caretEventHandler(k),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(k)}},{key:"handleKeyDown",value:function(k){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(k)}},{key:"handleMouseUp",value:function(k){this.caretEventHandler(k)}},{key:"handleTouchEnd",value:function(k){this.caretEventHandler(k)}},{key:"handleSelect",value:function(k){this.caretEventHandler(k)}},{key:"handleSelectionChange",value:function(k){navigator.userAgent.includes("Firefox")||this.caretEventHandler(k)}},{key:"caretEventHandler",value:function(k){var P,I=this;k.target.tagName&&(P=k.target.tagName.toLowerCase()),this.dispatch(function(T){var X=k.target===T.keyboardDOM||k.target&&T.keyboardDOM.contains(k.target);if(I.options.syncInstanceInputs&&Array.isArray(k.path)&&(X=k.path.some(function(ee){var Re;return ee==null||(Re=ee.hasAttribute)===null||Re===void 0?void 0:Re.call(ee,"data-skInstance")})),(P==="textarea"||P==="input"&&["text","search","url","tel","password"].includes(k.target.type))&&!T.options.disableCaretPositioning){var G=k.target.selectionStart,ie=k.target.selectionEnd;T.options.rtl&&(G=T.utilities.getRtlOffset(G,T.getInput()),ie=T.utilities.getRtlOffset(ie,T.getInput())),T.setCaretPosition(G,ie),T.activeInputElement=k.target,T.options.debug&&console.log("Caret at: ",T.getCaretPosition(),T.getCaretPositionEnd(),k&&k.target.tagName.toLowerCase(),"(".concat(T.keyboardDOMClass,")"),k==null?void 0:k.type)}else!T.options.disableCaretPositioning&&X||(k==null?void 0:k.type)==="selectionchange"||(T.setCaretPosition(null),T.activeInputElement=null,T.options.debug&&console.log('Caret position reset due to "'.concat(k==null?void 0:k.type,'" event'),k))})}},{key:"recurseButtons",value:function(k){var P=this;k&&Object.keys(this.buttonElements).forEach(function(I){return P.buttonElements[I].forEach(k)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var k=this.options.physicalKeyboardHighlightPreventDefault,P=k!==void 0&&k;document.removeEventListener("keyup",this.handleKeyUp,P),document.removeEventListener("keydown",this.handleKeyDown,P),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(I){I&&(I.onpointerdown=null,I.onpointerup=null,I.onpointercancel=null,I.ontouchstart=null,I.ontouchend=null,I.ontouchcancel=null,I.onclick=null,I.onmousedown=null,I.onmouseup=null,I.remove(),I=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(k){var P=this.options.buttonTheme,I=[];return Array.isArray(P)&&P.forEach(function(T){if(T&&T.class&&typeof T.class=="string"&&T.buttons&&typeof T.buttons=="string"){var X=T.class.split(" ");T.buttons.split(" ").includes(k)&&(I=[].concat($(I),$(X)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',T)}),I}},{key:"setDOMButtonAttributes",value:function(k,P){var I=this.options.buttonAttributes;Array.isArray(I)&&I.forEach(function(T){T.attribute&&typeof T.attribute=="string"&&T.value&&typeof T.value=="string"&&T.buttons&&typeof T.buttons=="string"?T.buttons.split(" ").includes(k)&&P(T.attribute,T.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',T)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(k){var P;if((P=k.target.classList)!==null&&P!==void 0&&P.contains("hg-button"))return k.preventDefault(),k.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var k=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(P){var I=k.utilities.isConstructor(P)?new P(k):P(k);I.init&&I.init(k)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(k,P){return!!this.modules[k]&&this.modules[k][P]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(k,P,I,T){var X=this,G=Array.from(k.children),ie=0;return G.length&&I.forEach(function(ee,Re){var Ve=T[Re];if(!(Ve&&Ve>ee))return!1;var We=ee-ie,Fe=Ve-ie,tt=document.createElement("div");tt.className+="hg-button-container";var ve="".concat(X.options.layoutName,"-r").concat(P,"c").concat(Re);tt.setAttribute("data-skUID",ve);var Pt=G.splice(We,Fe-We+1);ie+=Fe-We,Pt.forEach(function(An){return tt.appendChild(An)}),G.splice(We,0,tt),k.innerHTML="",G.forEach(function(An){return k.appendChild(An)}),X.options.debug&&console.log("rowDOMContainer",Pt,We,Fe,ie+1)}),k}},{key:"render",value:function(){var k=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var P="hg-layout-".concat(this.options.layoutName),I=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},T=this.options.useTouchEvents||!1,X=T?"hg-touch-events":"",G=this.options.useMouseEvents||!1,ie=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,P,this.keyboardPluginClasses,X),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",I[this.options.layoutName||this.defaultName].forEach(function(ee,Re){var Ve=ee.split(" ");k.options.excludeFromLayout&&k.options.excludeFromLayout[k.options.layoutName||k.defaultName]&&(Ve=Ve.filter(function(ve){return k.options.excludeFromLayout&&!k.options.excludeFromLayout[k.options.layoutName||k.defaultName].includes(ve)}));var We=document.createElement("div");We.className+="hg-row";var Fe=[],tt=[];Ve.forEach(function(ve,Pt){var An,Jl=!ie&&typeof ve=="string"&&ve.length>1&&ve.indexOf("[")===0,Ts=!ie&&typeof ve=="string"&&ve.length>1&&ve.indexOf("]")===ve.length-1;Jl&&(Fe.push(Pt),ve=ve.replace(/\[/g,"")),Ts&&(tt.push(Pt),ve=ve.replace(/\]/g,""));var ya=k.utilities.getButtonClass(ve),ba=k.utilities.getButtonDisplayName(ve,k.options.display,k.options.mergeDisplay),eU=k.options.useButtonTag?"button":"div",zn=document.createElement(eU);zn.className+="hg-button ".concat(ya),(An=zn.classList).add.apply(An,$(k.getButtonThemeClasses(ve))),k.setDOMButtonAttributes(ve,function(hn,nU){zn.setAttribute(hn,nU)}),k.activeButtonClass="hg-activeButton",!k.utilities.pointerEventsSupported()||T||G?T?(zn.ontouchstart=function(hn){k.handleButtonClicked(ve,hn),k.handleButtonMouseDown(ve,hn)},zn.ontouchend=function(hn){k.handleButtonMouseUp(ve,hn)},zn.ontouchcancel=function(hn){k.handleButtonMouseUp(ve,hn)}):(zn.onclick=function(hn){k.setMouseHold(!1),typeof k.options.onKeyReleased=="function"||k.options.useMouseEvents&&k.options.clickOnMouseDown||k.handleButtonClicked(ve,hn)},zn.onmousedown=function(hn){(typeof k.options.onKeyReleased=="function"||k.options.useMouseEvents&&k.options.clickOnMouseDown)&&!k.isMouseHold&&k.handleButtonClicked(ve,hn),k.handleButtonMouseDown(ve,hn)},zn.onmouseup=function(hn){k.handleButtonMouseUp(ve,hn)}):(zn.onpointerdown=function(hn){k.handleButtonClicked(ve,hn),k.handleButtonMouseDown(ve,hn)},zn.onpointerup=function(hn){k.handleButtonMouseUp(ve,hn)},zn.onpointercancel=function(hn){k.handleButtonMouseUp(ve,hn)}),zn.setAttribute("data-skBtn",ve);var tU="".concat(k.options.layoutName,"-r").concat(Re,"b").concat(Pt);zn.setAttribute("data-skBtnUID",tU);var qA=document.createElement("span");qA.innerHTML=ba,zn.appendChild(qA),k.buttonElements[ve]||(k.buttonElements[ve]=[]),k.buttonElements[ve].push(zn),We.appendChild(zn)}),We=k.parseRowDOMContainers(We,Re,Fe,tt),k.keyboardRowsDOM.appendChild(We)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||T||G?T?(document.ontouchend=function(ee){return k.handleButtonMouseUp(void 0,ee)},document.ontouchcancel=function(ee){return k.handleButtonMouseUp(void 0,ee)},this.keyboardDOM.ontouchstart=function(ee){return k.handleKeyboardContainerMouseDown(ee)}):T||(document.onmouseup=function(ee){return k.handleButtonMouseUp(void 0,ee)},this.keyboardDOM.onmousedown=function(ee){return k.handleKeyboardContainerMouseDown(ee)}):(document.onpointerup=function(ee){return k.handleButtonMouseUp(void 0,ee)},this.keyboardDOM.onpointerdown=function(ee){return k.handleKeyboardContainerMouseDown(ee)}),this.onInit())}}],L&&V(B.prototype,L),U&&V(B,U),Object.defineProperty(B,"prototype",{writable:!1}),B;var B,L,U}(),Z=pe,ce=Z;return c}()}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return m},default:function(){return v}});var a=s(442);function l(y){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},l(y)}function c(y,w){var x=Object.keys(y);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(y);w&&(S=S.filter(function(_){return Object.getOwnPropertyDescriptor(y,_).enumerable})),x.push.apply(x,S)}return x}function u(y){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?c(Object(x),!0).forEach(function(S){d(y,S,x[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(x)):c(Object(x)).forEach(function(S){Object.defineProperty(y,S,Object.getOwnPropertyDescriptor(x,S))})}return y}function d(y,w,x){return(w=function(S){var _=function(E,C){if(l(E)!="object"||!E)return E;var N=E[Symbol.toPrimitive];if(N!==void 0){var R=N.call(E,C);if(l(R)!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(E)}(S,"string");return l(_)=="symbol"?_:_+""}(w))in y?Object.defineProperty(y,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):y[w]=x,y}var f=function(y){return u(u({},y),{},{keyboardRef:null})},p=s(651),g=s.n(p),m=function(y){var w=y.baseClass||"react-simple-keyboard",x=a.useRef(null),S=a.useRef(null),_=a.useRef(null),E=a.useRef(y);return a.useEffect(function(){return function(){_.current&&_.current.destroy(),x.current=!1}},[]),a.useEffect(function(){var C=function(j){return u(u({},j),{},{theme:"simple-keyboard ".concat(j.theme||"hg-theme-default")})}(y);if(!x.current){x.current=!0,C.debug&&console.log("ReactSimpleKeyboard: Init");var N=S.current,R=".".concat(w);_.current=new(g())(N||R,C),C.keyboardRef&&C.keyboardRef(_.current)}var O=function(j,q){var $=f(q),K=f(j);return Object.keys($).filter(function(J){return $[J]!==K[J]})}(E.current,C);if(O.length){var D=_.current;E.current=C,D==null||D.setOptions(C),C.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",O)}},[x,w,E,y]),a.createElement("div",{className:w,ref:S})},v=m}(),o}()})})(m9);var pfe=m9.exports;const mfe=iu(pfe),gfe={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y u i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y U I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w é r t y ú í ó p ́ +","{lock} á s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W É R T Y Ú Í Ó P ̈ *","{lock} Á S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y ü i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y Ü I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},vfe={en:{"{bksp}":"Backspace ⌫","{enter}":"Enter ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Caps Lock ⇪","{space}":"Space"},es:{"{bksp}":"⌫","{enter}":"Intro ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Bloq Mayús ⇪","{space}":"Espacio"}},iT="Á É Í Ó Ú á é í ó ú ́",rT="Ü ü ̈";function yfe(){const t=FC(),e=nn(),{status:n,dispatch:i,devices:r}=Fn(),[s,o]=b.useState("none"),[a,l]=b.useState(!1),[c,u]=b.useState(!1),d=b.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),f=b.useCallback(p=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",p)},[n,i,r.keyboard]);return r.keyboard?h.jsxs("div",{className:"absolute left-[1600px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),h.jsx(mfe,{theme:te("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:gfe,display:vfe[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:iT},{class:"hg-diaeresisDeadKeyButton",buttons:rT}],disableButtonHold:!0,onKeyPress:p=>{if(p==="{shiftleft}"||p==="{shiftright}"){o(g=>g==="none"?"once":"none");return}if(p==="{lock}"){o(g=>g==="none"?"lock":"none");return}if(t==="es"){if(a){iT.includes(p)&&(l(!1),s==="once"&&o("none"),f(p));return}else if(p==="́"){l(!0);return}if(c){rT.includes(p)&&(u(!1),s==="once"&&o("none"),f(p));return}else if(p==="̈"){u(!0);return}}s==="once"&&o("none"),f(p==="{bksp}"?"\b":p==="{enter}"?`
`:p==="{tab}"?"	":p==="{space}"?" ":p)}})]}):null}function bfe(){const t=nn(),{devices:e}=Fn(),n=st(OE).toArray();return e.leds?h.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),h.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>h.jsxs("div",{className:"flex w-7 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:r}),h.jsx("div",{className:te("relative size-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:h.jsx("div",{className:te("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})})]},r))})]}):null}function wfe(){const t=nn(),e=st(EQ),n=st(xe.IP),i=st(YL),r=st(XL),s=st(xe.SP),o=st(KC),a=st(A2),l=OL(),c=a||l.pic||l.handshake!==null,u=()=>{const g=[];for(let m=0;m<256;m+=16){const v=e.slice(m,m+16);g.push(v)}return g},d=16,f=Math.floor(Number(n.valueOf())/d),p=Number(n.valueOf())%d;return h.jsxs("div",{className:"absolute left-[800px] top-[-160px] z-10 size-auto rounded-lg border border-stone-600 bg-stone-900 shadow-2xl [&_*]:z-20","data-testid":"memory-component",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white shadow",children:t("computer.memory.name")}),h.jsx("div",{className:"m-4 overflow-x-auto",children:h.jsxs("table",{className:"mx-auto w-auto min-w-[600px] border-separate text-center font-mono text-base",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{}),Array.from({length:16}).map((g,m)=>h.jsx("th",{className:te("relative size-10 border border-gray-500 bg-mantis-500",m%4===0&&m!==0?"border-l-4 border-mantis-600":""),children:h.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===p&&h.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:"↓"})]})},m))]})}),h.jsx("tbody",{children:u().map((g,m)=>h.jsxs("tr",{className:m%4===0&&m!==0?"border-t-4 border-mantis-600":"",children:[h.jsx("th",{className:"relative size-10 border border-gray-500 bg-mantis-500",children:h.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===f&&h.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:"→"})]})}),g.map((v,y)=>{var w,x,S;return h.jsx("td",{className:te("size-10 border border-gray-500 p-0 transition-shadow duration-200",y%4===0&&y!==0?"border-l-4 border-mantis-600":""),children:h.jsx(xfe,{address:v.address,value:v.value,isIP:v.address.valueOf()===n.valueOf(),isSP:o&&v.address.valueOf()===s.valueOf(),isStackData:o&&v.address.valueOf()>s.valueOf(),isProgramAddress:!!i.find(_=>_.address===v.address.value),isDataAddress:!!r.find(_=>_.address===v.address.value),isInterruptVector:c&&v.address.valueOf()>=0&&v.address.valueOf()<=7,label:((w=i.find(_=>_.address===v.address.value))==null?void 0:w.name)||((x=r.find(_=>_.address===v.address.value))==null?void 0:x.label)||null,length:((S=i.find(_=>_.address===v.address.value))==null?void 0:S.length)??null})},y)})]},m))})]})})]})}function xfe({address:t,value:e,isIP:n,isSP:i,isStackData:r,isProgramAddress:s,isDataAddress:o,isInterruptVector:a,label:l,length:c}){const u=nn(),d=st(Mp),[f,p]=b.useState(!1),g=b.useRef(e);b.useEffect(()=>{g.current!==e&&(p(!0),setTimeout(()=>p(!1),300),g.current=e)},[e]);const m=u("computer.memory.cell",t);return h.jsxs(hA,{children:[h.jsx(pA,{asChild:!0,children:h.jsxs(qe.div,{title:m,className:te("relative flex size-10 cursor-pointer select-none items-center justify-center border font-mono text-base transition-all duration-200",n?"z-10 shadow-lg shadow-red-500/50 outline outline-2 outline-red-500 ring-2 ring-red-500 ring-offset-2":i?"z-10 shadow-lg shadow-yellow-400/50 outline outline-2 outline-yellow-400 ring-2 ring-yellow-400 ring-offset-2":"","bg-stone-800",a&&!i&&!r?"border-l-4 border-purple-500":"",s&&!i&&!r&&!a?"border-l-4 border-blue-500":"",o&&!i&&!r&&!s&&!a?"border-l-4 border-green-500":"",r&&!i?"border-l-4 border-yellow-500":"",i?"border-l-4 border-yellow-400":"","text-stone-100","hover:z-20 hover:scale-110 hover:shadow-xl",f&&"animate-pulse"),style:t.value===d.value?De("memory.operating-cell"):void 0,children:[a&&!i&&!r&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-purple-400",title:"Vector de interrupción",style:{lineHeight:1},children:"⚡"}),s&&!i&&!r&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-blue-400",title:"Instrucción",style:{lineHeight:1},children:"📘"}),o&&!i&&!r&&!s&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-green-400",title:"Dato",style:{lineHeight:1},children:"📦"}),r&&!i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-400",title:"Dato de la pila",style:{lineHeight:1},children:"📚"}),i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-300",title:"Stack Pointer",style:{lineHeight:1},children:"📍"}),h.jsx("span",{className:"z-10 mt-3 block font-mono text-lg font-bold",children:e.toString("hex")}),n&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-red-500",title:"IP",style:{lineHeight:1},children:"▲"}),i&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-yellow-500",title:"SP",style:{lineHeight:1},children:"▲"})]})}),h.jsxs(tw,{className:"w-60",children:[h.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[m," ",l?h.jsxs("span",{className:"font-bold text-mantis-400",children:["(",l,")",c!==null&&c!==""&&h.jsxs("span",{className:"text-xs font-normal text-white",children:[" Bytes: ",c]})]}):""]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(v=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:u(`generics.byte-representation.${v}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(v)})]},v))})]})]})}function Sfe(){const t=nn(),{devices:e}=Fn();return e.pic?h.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsxs("div",{className:"flex items-start",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),h.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[h.jsx(yr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:IE,springs:"pic.IMR",emphasis:!0}),h.jsx(yr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:jE,springs:"pic.IRR",emphasis:!0}),h.jsx(yr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:DE,springs:"pic.ISR",emphasis:!0})]})]}),h.jsx("hr",{className:"mb-2 border-stone-600"}),h.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:fy.map((n,i)=>h.jsx(yr,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function kfe(){const t=nn(),{devices:e}=Fn();return e.pio?h.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"mb-2 block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(yr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:LE,springs:"pio.PA"}),h.jsx(yr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:BE,springs:"pio.CA"})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(yr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:$E,springs:"pio.PB"}),h.jsx(yr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:FE,springs:"pio.CB"})]})]}):null}const _fe="_printer_fbkny_2",Cfe="_shadow_fbkny_6",Efe="_sides_fbkny_11",Afe="_front_fbkny_22",Nfe="_trailContainer_fbkny_27",Pfe="_trail_fbkny_27",Mfe="_paper_fbkny_33",oc={printer:_fe,shadow:Cfe,sides:Efe,front:Afe,trailContainer:Nfe,trail:Pfe,paper:Mfe},Rfe=Array.from({length:5},(t,e)=>e);function Tfe(){const t=nn(),{devices:e}=Fn(),n=st(hy),i=st(py);return e.printer?h.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:h.jsxs("div",{className:oc.printer,title:t("computer.printer.name"),children:[h.jsx("div",{className:oc.shadow}),h.jsx("div",{className:oc.sides}),h.jsxs("div",{className:oc.front,children:[h.jsx("div",{className:oc.trailContainer,children:h.jsx("div",{className:oc.trail,children:h.jsx("pre",{className:oc.paper,children:i})})}),h.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:Rfe.map(r=>{const s=n[r]?IL(n[r].unsigned):null;return h.jsx("span",{className:te("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),h.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:h.jsx(qe.div,{className:"h-full bg-mantis-400",style:{width:De("printer.printing.progress").to(r=>`${r*100}%`),opacity:De("printer.printing.opacity")}})})]})]})}):null}const Ofe="_container_6nvz7_2",Ife="_text_6nvz7_22",sT={container:Ofe,text:Ife};function jfe(){const t=nn(),{devices:e}=Fn(),n=st(zE);return e.screen?h.jsxs("div",{className:"absolute left-[1600px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),h.jsx("div",{className:sT.container,children:h.jsx("pre",{className:sT.text,children:n})})]}):null}function Dfe(){const t=nn(),{dispatch:e,devices:n}=Fn(),i=st($b).toArray();return n.switches?h.jsxs("div",{className:"absolute left-[1300px] top-[680px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),h.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((r,s)=>h.jsxs("div",{className:"flex w-8 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:s}),h.jsx(Ia,{checked:r,onCheckedChange:()=>e("switch.toggle",s),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800"})]},s))})]}):null}function Lfe(){const t=nn(),{devices:e}=Fn();return e.timer?h.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),h.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[h.jsx(yr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:my,springs:"timer.CONT"}),h.jsx(yr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:UE,springs:"timer.COMP"})]})]}):null}function g9(){const t=b.useRef(null);return b.useEffect(()=>{bk(),Sk(),kk(),_k();const e=setTimeout(()=>{bk(),Sk(),kk(),_k()},100);return()=>clearTimeout(e)},[]),h.jsx("div",{className:"relative size-full",children:h.jsxs(wde,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[h.jsx(kde,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:h.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[h.jsx(Dde,{}),h.jsx("div",{className:"absolute left-[120px] top-[-120px] z-20",children:h.jsx(p9,{})}),h.jsx(afe,{}),h.jsx(Pde,{}),h.jsx(wfe,{}),h.jsx(hfe,{}),h.jsx(Sfe,{}),h.jsx(kfe,{}),h.jsx(Lfe,{}),h.jsx(Lde,{}),h.jsx(ffe,{}),h.jsx(yfe,{}),h.jsx(bfe,{}),h.jsx(Tfe,{}),h.jsx(Dfe,{}),h.jsx(jfe,{})]})}),h.jsx(_de,{wrapperRef:t})]})})}const $fe=1024;let Bfe=0;class o1{constructor(e,n){this.from=e,this.to=n}}class yt{constructor(e={}){this.id=Bfe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Qi.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}yt.closedBy=new yt({deserialize:t=>t.split(" ")});yt.openedBy=new yt({deserialize:t=>t.split(" ")});yt.group=new yt({deserialize:t=>t.split(" ")});yt.isolate=new yt({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});yt.contextHash=new yt({perNode:!0});yt.lookAhead=new yt({perNode:!0});yt.mounted=new yt({perNode:!0});class Sy{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[yt.mounted.id]}}const Ffe=Object.create(null);class Qi{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):Ffe,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Qi(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(yt.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(yt.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Qi.none=new Qi("",Object.create(null),0,8);class mA{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Qi(i.name,r,i.id,i.flags):i)}return new mA(n)}}const Zg=new WeakMap,oT=new WeakMap;var Yn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Yn||(Yn={}));class un{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Sy.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new qk(this.topNode,e)}cursorAt(e,n=0,i=0){let r=Zg.get(this)||this.topNode,s=new qk(r);return s.moveTo(e,n),Zg.set(this,s._tree),s}get topNode(){return new Jr(this,0,0,null)}resolve(e,n=0){let i=Qp(Zg.get(this)||this.topNode,e,n,!1);return Zg.set(this,i),i}resolveInner(e,n=0){let i=Qp(oT.get(this)||this.topNode,e,n,!0);return oT.set(this,i),i}resolveStack(e,n=0){return Vfe(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&Yn.IncludeAnonymous)>0;for(let l=this.cursor(o|Yn.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:yA(Qi.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new un(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new un(Qi.none,n,i,r)))}static build(e){return Hfe(e)}}un.empty=new un(Qi.none,[],[],0);class gA{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new gA(this.buffer,this.index)}}class Dl{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Qi.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(v9(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let c=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,c)}return new Dl(s,o,this.set)}}function v9(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Qp(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Jr&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:Yn.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Jr&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class y9{cursor(e=0){return new qk(this,e)}getChild(e,n=null,i=null){let r=aT(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return aT(this,e,n,i)}resolve(e,n=0){return Qp(this,e,n,!1)}resolveInner(e,n=0){return Qp(this,e,n,!0)}matchContext(e){return Kk(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class Jr extends y9{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(v9(r,i,d,d+u.length)){if(u instanceof Dl){if(s&Yn.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,n,i-d,r);if(f>-1)return new nl(new zfe(o,u,e,d),null,f)}else if(s&Yn.IncludeAnonymous||!u.type.isAnonymous||vA(u)){let f;if(!(s&Yn.IgnoreMounts)&&(f=Sy.get(u))&&!f.overlay)return new Jr(f.tree,d,e,o);let p=new Jr(u,d,e,o);return s&Yn.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?u.children.length-1:0,n,i,r)}}}if(s&Yn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&Yn.IgnoreOverlays)&&(r=Sy.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Jr(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function aT(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Kk(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class zfe{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class nl extends y9{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new nl(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&Yn.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new nl(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new nl(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new nl(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new un(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function b9(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof Jr&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new Ufe(r,n)}class Ufe{constructor(e,n){this.heads=e,this.node=n}get next(){return b9(this.heads)}}function Vfe(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof Jr?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=Sy.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Jr(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Qp(a,e,n,!1))}}return r?b9(r):i}class qk{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Jr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Jr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&Yn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Yn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Yn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&Yn.IncludeAnonymous||a instanceof Dl||!a.type.isAnonymous||vA(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new nl(this.buffer,n,this.stack[r]);return this.bufferNode=new nl(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Kk(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Kk(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function vA(t){return t.children.some(e=>e instanceof Dl||!e.type.isAnonymous||vA(e))}function Hfe(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=$fe,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new gA(n,n.length):n,l=i.types,c=0,u=0;function d(_,E,C,N,R,O){let{id:D,start:j,end:q,size:$}=a,K=u,J=c;for(;$<0;)if(a.next(),$==-1){let pe=s[D];C.push(pe),N.push(j-_);return}else if($==-3){c=D;return}else if($==-4){u=D;return}else throw new RangeError(`Unrecognized record size: ${$}`);let Q=l[D],V,F,re=j-_;if(q-j<=r&&(F=v(a.pos-E,R))){let pe=new Uint16Array(F.size-F.skip),Z=a.pos-F.size,ce=pe.length;for(;a.pos>Z;)ce=y(F.start,pe,ce);V=new Dl(pe,q-F.start,i),re=F.start-_}else{let pe=a.pos-$;a.next();let Z=[],ce=[],B=D>=o?D:-1,L=0,U=q;for(;a.pos>pe;)B>=0&&a.id==B&&a.size>=0?(a.end<=U-r&&(g(Z,ce,j,L,a.end,U,B,K,J),L=Z.length,U=a.end),a.next()):O>2500?f(j,pe,Z,ce):d(j,pe,Z,ce,B,O+1);if(B>=0&&L>0&&L<Z.length&&g(Z,ce,j,L,j,U,B,K,J),Z.reverse(),ce.reverse(),B>-1&&L>0){let k=p(Q,J);V=yA(Q,Z,ce,0,Z.length,0,q-j,k,k)}else V=m(Q,Z,ce,q-j,K-q,J)}C.push(V),N.push(re)}function f(_,E,C,N){let R=[],O=0,D=-1;for(;a.pos>E;){let{id:j,start:q,end:$,size:K}=a;if(K>4)a.next();else{if(D>-1&&q<D)break;D<0&&(D=$-r),R.push(j,q,$),O++,a.next()}}if(O){let j=new Uint16Array(O*4),q=R[R.length-2];for(let $=R.length-3,K=0;$>=0;$-=3)j[K++]=R[$],j[K++]=R[$+1]-q,j[K++]=R[$+2]-q,j[K++]=K;C.push(new Dl(j,R[2]-q,i)),N.push(q-_)}}function p(_,E){return(C,N,R)=>{let O=0,D=C.length-1,j,q;if(D>=0&&(j=C[D])instanceof un){if(!D&&j.type==_&&j.length==R)return j;(q=j.prop(yt.lookAhead))&&(O=N[D]+j.length+q)}return m(_,C,N,R,O,E)}}function g(_,E,C,N,R,O,D,j,q){let $=[],K=[];for(;_.length>N;)$.push(_.pop()),K.push(E.pop()+C-R);_.push(m(i.types[D],$,K,O-R,j-O,q)),E.push(R-C)}function m(_,E,C,N,R,O,D){if(O){let j=[yt.contextHash,O];D=D?[j].concat(D):[j]}if(R>25){let j=[yt.lookAhead,R];D=D?[j].concat(D):[j]}return new un(_,E,C,N,D)}function v(_,E){let C=a.fork(),N=0,R=0,O=0,D=C.end-r,j={size:0,start:0,skip:0};e:for(let q=C.pos-_;C.pos>q;){let $=C.size;if(C.id==E&&$>=0){j.size=N,j.start=R,j.skip=O,O+=4,N+=4,C.next();continue}let K=C.pos-$;if($<0||K<q||C.start<D)break;let J=C.id>=o?4:0,Q=C.start;for(C.next();C.pos>K;){if(C.size<0)if(C.size==-3)J+=4;else break e;else C.id>=o&&(J+=4);C.next()}R=Q,N+=$,O+=J}return(E<0||N==_)&&(j.size=N,j.start=R,j.skip=O),j.size>4?j:void 0}function y(_,E,C){let{id:N,start:R,end:O,size:D}=a;if(a.next(),D>=0&&N<o){let j=C;if(D>4){let q=a.pos-(D-4);for(;a.pos>q;)C=y(_,E,C)}E[--C]=j,E[--C]=O-_,E[--C]=R-_,E[--C]=N}else D==-3?c=N:D==-4&&(u=N);return C}let w=[],x=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,w,x,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:w.length?x[0]+w[0].length:0;return new un(l[t.topID],w.reverse(),x.reverse(),S)}const lT=new WeakMap;function X0(t,e){if(!t.isAnonymous||e instanceof Dl||e.type!=t)return 1;let n=lT.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof un)){n=1;break}n+=X0(t,i)}lT.set(e,n)}return n}function yA(t,e,n,i,r,s,o,a,l){let c=0;for(let g=i;g<r;g++)c+=X0(t,e[g]);let u=Math.ceil(c*1.5/8),d=[],f=[];function p(g,m,v,y,w){for(let x=v;x<y;){let S=x,_=m[x],E=X0(t,g[x]);for(x++;x<y;x++){let C=X0(t,g[x]);if(E+C>=u)break;E+=C}if(x==S+1){if(E>u){let C=g[S];p(C.children,C.positions,0,C.children.length,m[S]+w);continue}d.push(g[S])}else{let C=m[x-1]+g[x-1].length-_;d.push(yA(t,g,m,S,x,_,C,null,l))}f.push(_+w-s)}}return p(e,n,i,r,0),(a||l)(d,f,o)}class Ic{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new Ic(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let p=Math.max(f.from,l)-c,g=Math.min(f.to,d)-c;f=p>=g?null:new Ic(p,g,f.tree,f.offset+c,a>0,!!u)}if(f&&r.push(f),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r}}class w9{startParse(e,n,i){return typeof e=="string"&&(e=new Wfe(e)),i=i?i.length?i.map(r=>new o1(r.from,r.to)):[new o1(0,0)]:[new o1(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class Wfe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new yt({perNode:!0});let Gfe=0;class Tn{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=Gfe++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof Tn&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new Tn(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new ky(e);return i=>i.modified.indexOf(n)>-1?i:ky.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let Kfe=0;class ky{constructor(e){this.name=e,this.instances=[],this.id=Kfe++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&qfe(n,a.modified));if(i)return i;let r=[],s=new Tn(e.name,r,e,n);for(let a of n)a.instances.push(s);let o=Yfe(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(ky.get(a,l));return s}}function qfe(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function Yfe(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function Xfe(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==r.length)break;let p=r[d++];if(d==r.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+r);let u=new _y(i,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return x9.add(e)}const x9=new yt;class _y{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}_y.empty=new _y([],2,null);function S9(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function Jfe(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function Zfe(t,e,n,i=0,r=t.length){let s=new Qfe(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class Qfe{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=r,u=ehe(e)||_y.empty,d=Jfe(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(yt.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+a,1),g=this.highlighters.filter(v=>!v.scope||v.scope(f.tree.type)),m=e.firstChild();for(let v=0,y=a;;v++){let w=v<f.overlay.length?f.overlay[v]:null,x=w?w.from+a:l,S=Math.max(n,y),_=Math.min(i,x);if(S<_&&m)for(;e.from<_&&(this.highlightRange(e,S,_,r,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=x||!e.nextSibling())););if(!w||x>i)break;y=w.to+a,y>n&&(this.highlightRange(p.cursor(),Math.max(n,w.from+a),Math.min(i,y),"",g),this.startSpan(Math.min(i,y),c))}m&&e.parent()}else if(e.firstChild()){f&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function ehe(t){let e=t.type.prop(x9);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const ge=Tn.define,Qg=ge(),ja=ge(),cT=ge(ja),uT=ge(ja),Da=ge(),e0=ge(Da),a1=ge(Da),zs=ge(),ac=ge(zs),Ls=ge(),$s=ge(),Yk=ge(),Gf=ge(Yk),t0=ge(),Ke={comment:Qg,lineComment:ge(Qg),blockComment:ge(Qg),docComment:ge(Qg),name:ja,variableName:ge(ja),typeName:cT,tagName:ge(cT),propertyName:uT,attributeName:ge(uT),className:ge(ja),labelName:ge(ja),namespace:ge(ja),macroName:ge(ja),literal:Da,string:e0,docString:ge(e0),character:ge(e0),attributeValue:ge(e0),number:a1,integer:ge(a1),float:ge(a1),bool:ge(Da),regexp:ge(Da),escape:ge(Da),color:ge(Da),url:ge(Da),keyword:Ls,self:ge(Ls),null:ge(Ls),atom:ge(Ls),unit:ge(Ls),modifier:ge(Ls),operatorKeyword:ge(Ls),controlKeyword:ge(Ls),definitionKeyword:ge(Ls),moduleKeyword:ge(Ls),operator:$s,derefOperator:ge($s),arithmeticOperator:ge($s),logicOperator:ge($s),bitwiseOperator:ge($s),compareOperator:ge($s),updateOperator:ge($s),definitionOperator:ge($s),typeOperator:ge($s),controlOperator:ge($s),punctuation:Yk,separator:ge(Yk),bracket:Gf,angleBracket:ge(Gf),squareBracket:ge(Gf),paren:ge(Gf),brace:ge(Gf),content:zs,heading:ac,heading1:ge(ac),heading2:ge(ac),heading3:ge(ac),heading4:ge(ac),heading5:ge(ac),heading6:ge(ac),contentSeparator:ge(zs),list:ge(zs),quote:ge(zs),emphasis:ge(zs),strong:ge(zs),link:ge(zs),monospace:ge(zs),strikethrough:ge(zs),inserted:ge(),deleted:ge(),changed:ge(),invalid:ge(),meta:t0,documentMeta:ge(t0),annotation:ge(t0),processingInstruction:ge(t0),definition:Tn.defineModifier("definition"),constant:Tn.defineModifier("constant"),function:Tn.defineModifier("function"),standard:Tn.defineModifier("standard"),local:Tn.defineModifier("local"),special:Tn.defineModifier("special")};for(let t in Ke){let e=Ke[t];e instanceof Tn&&(e.name=t)}S9([{tag:Ke.link,class:"tok-link"},{tag:Ke.heading,class:"tok-heading"},{tag:Ke.emphasis,class:"tok-emphasis"},{tag:Ke.strong,class:"tok-strong"},{tag:Ke.keyword,class:"tok-keyword"},{tag:Ke.atom,class:"tok-atom"},{tag:Ke.bool,class:"tok-bool"},{tag:Ke.url,class:"tok-url"},{tag:Ke.labelName,class:"tok-labelName"},{tag:Ke.inserted,class:"tok-inserted"},{tag:Ke.deleted,class:"tok-deleted"},{tag:Ke.literal,class:"tok-literal"},{tag:Ke.string,class:"tok-string"},{tag:Ke.number,class:"tok-number"},{tag:[Ke.regexp,Ke.escape,Ke.special(Ke.string)],class:"tok-string2"},{tag:Ke.variableName,class:"tok-variableName"},{tag:Ke.local(Ke.variableName),class:"tok-variableName tok-local"},{tag:Ke.definition(Ke.variableName),class:"tok-variableName tok-definition"},{tag:Ke.special(Ke.variableName),class:"tok-variableName2"},{tag:Ke.definition(Ke.propertyName),class:"tok-propertyName tok-definition"},{tag:Ke.typeName,class:"tok-typeName"},{tag:Ke.namespace,class:"tok-namespace"},{tag:Ke.className,class:"tok-className"},{tag:Ke.macroName,class:"tok-macroName"},{tag:Ke.propertyName,class:"tok-propertyName"},{tag:Ke.operator,class:"tok-operator"},{tag:Ke.comment,class:"tok-comment"},{tag:Ke.meta,class:"tok-meta"},{tag:Ke.invalid,class:"tok-invalid"},{tag:Ke.punctuation,class:"tok-punctuation"}]);var l1;const td=new yt;function the(t){return Ne.define({combine:t?e=>e.concat(t):void 0})}const nhe=new yt;class ws{constructor(e,n,i=[],r=""){this.data=e,this.name=r,mt.prototype.hasOwnProperty("tree")||Object.defineProperty(mt.prototype,"tree",{get(){return Co(this)}}),this.parser=n,this.extension=[of.of(this),mt.languageData.of((s,o,a)=>{let l=dT(s,o,a),c=l.type.prop(td);if(!c)return[];let u=s.facet(c),d=l.type.prop(nhe);if(d){let f=l.resolve(o-l.from,a);for(let p of d)if(p.test(f,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(u)}}return u})].concat(i)}isActiveAt(e,n,i=-1){return dT(e,n,i).type.prop(td)==this.data}findRegions(e){let n=e.facet(of);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(td)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(yt.mounted);if(a){if(a.tree.prop(td)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof un&&r(c,s.positions[l]+o)}};return r(Co(e),0),i}get allowsNesting(){return!0}}ws.setState=ot.define();function dT(t,e,n){let i=t.facet(of),r=Co(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,Yn.ExcludeBuffers))s.type.isTop&&(r=s);return r}function Co(t){let e=t.field(ws.state,!1);return e?e.tree:un.empty}class ihe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Kf=null;class rf{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new rf(e,n,[],un.empty,0,i,[],null)}startParse(){return this.parser.startParse(new ihe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=un.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Ic.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Ic.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Kf;Kf=this;try{return e()}finally{Kf=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=fT(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),i=Ic.applyChanges(i,l),r=un.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new rf(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=fT(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends w9{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=Kf;if(l){for(let c of r)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new un(Qi.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Kf}}function fT(t,e,n){return Ic.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class sf{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new sf(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=rf.create(e.facet(of).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new sf(i)}}ws.state=Pi.define({create:sf.init,update(t,e){for(let n of e.effects)if(n.is(ws.setState))return n.value;return e.startState.facet(of)!=e.state.facet(of)?sf.init(e.state):t.apply(e)}});let k9=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(k9=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const c1=typeof navigator<"u"&&(!((l1=navigator.scheduling)===null||l1===void 0)&&l1.isInputPending)?()=>navigator.scheduling.isInputPending():null,rhe=ii.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(ws.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(ws.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=k9(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(ws.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!c1?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>c1&&c1()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ws.setState.of(new sf(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>gr(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),of=Ne.define({combine(t){return t.length?t[0]:null},enables:t=>[ws.state,rhe,Oe.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class she{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const ohe=Ne.define(),bA=Ne.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function nu(t){let e=t.facet(bA);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Xk(t,e){let n="",i=t.tabSize,r=t.facet(bA)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function ahe(t,e){t instanceof mt&&(t=new wA(t));for(let i of t.state.facet(ohe)){let r=i(t,e);if(r!==void 0)return r}let n=Co(t.state);return n.length>=e?lhe(t,n,e):null}class wA{constructor(e,n={}){this.state=e,this.options=n,this.unit=nu(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return wm(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const _9=new yt;function lhe(t,e,n){let i=e.resolveStack(n),r=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return C9(i,t,n)}function C9(t,e,n){for(let i=t;i;i=i.next){let r=uhe(i.node);if(r)return r(xA.create(e,n,i))}return 0}function che(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function uhe(t){let e=t.type.prop(_9);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(yt.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>phe(o,!0,1,void 0,s&&!che(o)?r.from:void 0)}return t.parent==null?dhe:null}function dhe(){return 0}class xA extends wA{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new xA(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(fhe(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return C9(this.context.next,this.base,this.pos)}}function fhe(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function hhe(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function phe(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=hhe(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const mhe=Ne.define(),ghe=new yt;function vhe(t,e,n){let i=Co(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(ghe);if(l&&(a.to<i.length-50||i.length==t.doc.length||!yhe(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function yhe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function E9(t,e,n){for(let i of t.facet(mhe)){let r=i(t,e,n);if(r)return r}return vhe(t,e,n)}function A9(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const SA=ot.define({map:A9}),nw=ot.define({map:A9});function N9(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const Om=Pi.define({create(){return at.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=hT(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(SA)&&!bhe(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(T9),r=i?at.replace({widget:new Ehe(i(e.state,n.value))}):pT;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(nw)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=hT(t,e.selection.main.head)),t},provide:t=>Oe.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(pT.range(i,r))}return at.set(e,!0)}});function hT(t,e,n=e){let i=!1;return t.between(e,n,(r,s)=>{r<n&&s>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(r,s)=>r>=n||s<=e}):t}function P9(t,e,n){var i;let r=null;return(i=t.field(Om,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function bhe(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function M9(t,e){return t.field(Om,!1)?e:e.concat(ot.appendConfig.of(Che()))}const whe=t=>{for(let e of N9(t)){let n=E9(t.state,e.from,e.to);if(n)return t.dispatch({effects:M9(t.state,[SA.of(n),R9(t,n)])}),!0}return!1},xhe=t=>{if(!t.state.field(Om,!1))return!1;let e=[];for(let n of N9(t)){let i=P9(t.state,n.from,n.to);i&&e.push(nw.of(i),R9(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function R9(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Oe.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const She=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=E9(e,r.from,r.to);s&&n.push(SA.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:M9(t.state,n)}),!!n.length},khe=t=>{let e=t.state.field(Om,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(nw.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},_he={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},T9=Ne.define({combine(t){return Ul(t,_he)}});function Che(t){return[Om,Ahe]}function O9(t,e){let{state:n}=t,i=n.facet(T9),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=P9(t.state,a.from,a.to);l&&t.dispatch({effects:nw.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const pT=at.replace({widget:new class extends Vl{toDOM(t){return O9(t,null)}}});class Ehe extends Vl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return O9(e,this.value)}}const Ahe=Oe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class iw{constructor(e,n){this.specs=e;let i;function r(a){let l=Pl.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof ws?a=>a.prop(td)==o.data:o?a=>a==o:void 0,this.style=S9(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new Pl(i):null,this.themeType=n.themeType}static define(e,n){return new iw(e,n||{})}}const Jk=Ne.define(),Nhe=Ne.define({combine(t){return t.length?[t[0]]:null}});function u1(t){let e=t.facet(Jk);return e.length?e:t.facet(Nhe)}function Phe(t,e){let n=[Rhe],i;return t instanceof iw&&(t.module&&n.push(Oe.styleModule.of(t.module)),i=t.themeType),i?n.push(Jk.computeN([Oe.darkTheme],r=>r.facet(Oe.darkTheme)==(i=="dark")?[t]:[])):n.push(Jk.of(t)),n}class Mhe{constructor(e){this.markCache=Object.create(null),this.tree=Co(e.state),this.decorations=this.buildDeco(e,u1(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Co(e.state),i=u1(e.state),r=i!=u1(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return at.none;let i=new Nl;for(let{from:r,to:s}of e.visibleRanges)Zfe(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=at.mark({class:l})))},r,s);return i.finish()}}const Rhe=ym.high(ii.fromClass(Mhe,{decorations:t=>t.decorations})),The=1e4,Ohe="()[]{}",Ihe=new yt;function Zk(t,e,n){let i=t.prop(e<0?yt.openedBy:yt.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function Qk(t){let e=t.type.prop(Ihe);return e?e(t.node):t}function n0(t,e,n,i={}){let r=i.maxScanDistance||The,s=i.brackets||Ohe,o=Co(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=Zk(l.type,n,s);if(c&&l.from<l.to){let u=Qk(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return jhe(t,e,n,l,u,c,s)}}return Dhe(t,e,n,o,a.type,r,s)}function jhe(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do if(n<0?u.to<=i.from:u.from>=i.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=Qk(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(Zk(u.type,n,o))c++;else if(Zk(u.type,-n,o)){if(c==0){let d=Qk(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function Dhe(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let f=0;!u.next().done&&f<=s;){let p=u.value;n<0&&(f+=p.length);let g=e+f*n;for(let m=n>0?0:p.length-1,v=n>0?p.length:-1;m!=v;m+=n){let y=o.indexOf(p[m]);if(!(y<0||i.resolveInner(g+m,1).type!=r))if(y%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:g+m,to:g+m+1},matched:y>>1==l>>1};d--}}n>0&&(f+=p.length)}return u.done?{start:c,matched:!1}:null}function mT(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class I9{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=mT(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:mT(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function Lhe(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||$he,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||CA,mergeTokens:t.mergeTokens!==!1}}function $he(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const gT=new WeakMap;class kA extends ws{constructor(e){let n=the(e.languageData),i=Lhe(e),r,s=new class extends w9{createParse(o,a,l){return new Fhe(r,o,a,l)}};super(n,s,[],e.name),this.topNode=Vhe(n,this),r=this,this.streamParser=i,this.stateAfter=new yt({perNode:!0}),this.tokenTable=e.tokenTable?new $9(i.tokenTable):Uhe}static define(e){return new kA(e)}getIndent(e){let n,{overrideIndentation:i}=e.options;i&&(n=gT.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let r=_A(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),c=Math.min(e.pos,l.to);if(l.length){let u=i?i(l.from):-1,d=new I9(l.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;d.pos<c-l.from;)D9(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return i&&n==null&&gT.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function _A(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof un&&l<r&&_A(t,a,l,i,r);if(c)return c}return null}function j9(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&n==0&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof un){if(!(l=j9(t,a,n-o,i-o,r)))break;return r?new un(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function Bhe(t,e,n,i,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&_A(t,s.tree,0-s.offset,n,a),c;if(l&&l.pos<=i&&(c=j9(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:c}}return{state:t.streamParser.startState(r?nu(r):4),tree:un.empty}}class Fhe{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=rf.get(),o=r[0].from,{state:a,tree:l}=Bhe(e,i,o,this.to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&r.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(nu(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=rf.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(n,r,1),n+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=i:this.chunk.push(e,n,i,s),r}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new I9(n,e?e.state.tabSize:4,e?nu(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=D9(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=un.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:zhe,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new un(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new un(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function D9(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const CA=Object.create(null),em=[Qi.none],zhe=new mA(em),vT=[],yT=Object.create(null),L9=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])L9[t]=B9(CA,e);class $9{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),L9)}resolve(e){return e?this.table[e]||(this.table[e]=B9(this.extra,e)):0}}const Uhe=new $9(CA);function d1(t,e){vT.indexOf(t)>-1||(vT.push(t),console.warn(e))}function B9(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Ke[c];u?typeof u=="function"?l.length?l=l.map(u):d1(c,`Modifier ${c} used at start of tag`):l.length?d1(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:d1(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=yT[r];if(s)return s.id;let o=yT[r]=Qi.define({id:em.length,name:i,props:[Xfe({[i]:n})]});return em.push(o),o.id}function Vhe(t,e){let n=Qi.define({id:em.length,name:"Document",props:[td.add(()=>t),_9.add(()=>i=>e.getIndent(i))],top:!0});return em.push(n),n}Kt.RTL,Kt.LTR;const Hhe=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=EA(t.state,n.from);return i.line?Whe(t):i.block?Yhe(t):!1};function Im(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const Whe=Im(AA,0),Ghe=Im(AA,1),Khe=Im(AA,2),qhe=Im(F9,0),Yhe=Im((t,e)=>F9(t,e,Jhe(e)),0);function EA(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const qf=50;function Xhe(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-qf,i),o=t.sliceDoc(r,r+qf),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let u,d;r-i<=2*qf?u=d=t.sliceDoc(i,r):(u=t.sliceDoc(i,i+qf),d=t.sliceDoc(r-qf,r));let f=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(d)[0].length,g=d.length-p-n.length;return u.slice(f,f+e.length)==e&&d.slice(g,g+n.length)==n?{open:{pos:i+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:r-p-n.length,margin:/\s/.test(d.charAt(g-1))?1:0}}:null}function Jhe(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function F9(t,e,n=e.selection.ranges){let i=n.map(s=>EA(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>Xhe(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function AA(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,c=EA(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>r&&(s==o||o>d.from)){r=d.from;let f=/^\s*/.exec(d.text)[0].length,p=f==d.length,g=d.text.slice(f,f+c.length)==c?f:-1;f<d.text.length&&f<l&&(l=f),i.push({line:d,comment:g,token:c,indent:f,empty:p,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of i)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const e_=ga.define(),Zhe=ga.define(),Qhe=Ne.define(),z9=Ne.define({combine(t){return Ul(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),U9=Pi.define({create(){return co.empty},update(t,e){let n=e.state.facet(z9),i=e.annotation(e_);if(i){let l=Yi.fromTransaction(e,i.selection),c=i.side,u=c==0?t.undone:t.done;return l?u=Cy(u,u.length,n.minDepth,l):u=W9(u,e.startState.selection),new co(c==0?i.rest:u,c==0?u:i.rest)}let r=e.annotation(Zhe);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(In.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Yi.fromTransaction(e),o=e.annotation(In.time),a=e.annotation(In.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new co(t.done.map(Yi.fromJSON),t.undone.map(Yi.fromJSON))}});function epe(t={}){return[U9,z9.of(t),Oe.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?V9:e.inputType=="historyRedo"?t_:null;return i?(e.preventDefault(),i(n)):!1}})]}function NA(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(U9,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const V9=NA(0,!1),t_=NA(1,!1),tpe=NA(0,!0);class Yi{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Yi(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Yi(e.changes&&Mn.fromJSON(e.changes),[],e.mapped&&vo.fromJSON(e.mapped),e.startSelection&&se.fromJSON(e.startSelection),e.selectionsAfter.map(se.fromJSON))}static fromTransaction(e,n){let i=Hr;for(let r of e.startState.facet(Qhe)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Yi(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Hr)}static selection(e){return new Yi(void 0,Hr,void 0,void 0,e)}}function Cy(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function npe(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(i=!0)}}),i}function ipe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function H9(t,e){return t.length?e.length?t.concat(e):t:e}const Hr=[],rpe=200;function W9(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-rpe));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Cy(t,t.length-1,1e9,n.setSelAfter(i)))}else return[Yi.selection([e])]}function spe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function f1(t,e){if(!t.length)return t;let n=t.length,i=Hr;for(;n;){let r=ope(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[Yi.selection(i)]:Hr}function ope(t,e,n){let i=H9(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Hr,n);if(!t.changes)return Yi.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Yi(r,ot.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const ape=/^(input\.type|delete)($|\.)/;class co{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new co(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||ape.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,npe(a.changes,e.changes))||i=="input.type.compose")?o=Cy(o,o.length-1,r.minDepth,new Yi(e.changes.compose(a.changes),H9(ot.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Hr)):o=Cy(o,o.length,r.minDepth,e),new co(o,Hr,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Hr;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&ipe(s[s.length-1],e)?this:new co(W9(this.done,e),this.undone,n,i)}addMapping(e){return new co(f1(this.done,e),f1(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:e_.of({side:e,rest:spe(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?Hr:r.slice(0,r.length-1);return s.mapped&&(a=f1(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:e_.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}co.empty=new co(Hr,Hr);function jm(t,e){return se.create(t.ranges.map(e),t.mainIndex)}function ql(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function au({state:t,dispatch:e},n){let i=jm(t.selection,n);return i.eq(t.selection,!0)?!1:(e(ql(t,i)),!0)}function rw(t,e){return se.cursor(e?t.to:t.from)}function G9(t,e){return au(t,n=>n.empty?t.moveByChar(n,e):rw(n,e))}function Yl(t){return t.textDirectionAt(t.state.selection.main.head)==Kt.LTR}const bT=t=>G9(t,!Yl(t)),wT=t=>G9(t,Yl(t));function K9(t,e){return au(t,n=>n.empty?t.moveByGroup(n,e):rw(n,e))}const lpe=t=>K9(t,!Yl(t)),cpe=t=>K9(t,Yl(t));function q9(t,e){return au(t,n=>{if(!n.empty)return rw(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const xT=t=>q9(t,!1),ST=t=>q9(t,!0);function Y9(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Oe.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function X9(t,e){let n=Y9(t),{state:i}=t,r=jm(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):rw(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=Oe.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(ql(i,r),{effects:s}),!0}const h1=t=>X9(t,!1),p1=t=>X9(t,!0);function sw(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=se.cursor(i.from+s))}return r}const kT=t=>au(t,e=>sw(t,e,!0)),_T=t=>au(t,e=>sw(t,e,!1)),upe=t=>au(t,e=>se.cursor(t.lineBlockAt(e.head).from,1)),dpe=t=>au(t,e=>se.cursor(t.lineBlockAt(e.head).to,-1));function fpe(t,e,n){let i=!1,r=jm(t.selection,s=>{let o=n0(t,s.head,-1)||n0(t,s.head,1)||s.head>0&&n0(t,s.head-1,1)||s.head<t.doc.length&&n0(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return se.cursor(a)});return i?(e(ql(t,r)),!0):!1}const hpe=({state:t,dispatch:e})=>fpe(t,e);function Xl(t,e){let n=jm(t.state.selection,i=>{let r=e(i);return se.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(ql(t.state,n)),!0)}function J9(t,e){return Xl(t,n=>t.moveByChar(n,e))}const CT=t=>J9(t,!Yl(t)),ET=t=>J9(t,Yl(t));function Z9(t,e){return Xl(t,n=>t.moveByGroup(n,e))}const ppe=t=>Z9(t,!Yl(t)),mpe=t=>Z9(t,Yl(t));function Q9(t,e){return Xl(t,n=>t.moveVertically(n,e))}const AT=t=>Q9(t,!1),NT=t=>Q9(t,!0);function ez(t,e){return Xl(t,n=>t.moveVertically(n,e,Y9(t).height))}const PT=t=>ez(t,!1),MT=t=>ez(t,!0),RT=t=>Xl(t,e=>sw(t,e,!0)),TT=t=>Xl(t,e=>sw(t,e,!1)),gpe=t=>Xl(t,e=>se.cursor(t.lineBlockAt(e.head).from)),vpe=t=>Xl(t,e=>se.cursor(t.lineBlockAt(e.head).to)),OT=({state:t,dispatch:e})=>(e(ql(t,{anchor:0})),!0),IT=({state:t,dispatch:e})=>(e(ql(t,{anchor:t.doc.length})),!0),jT=({state:t,dispatch:e})=>(e(ql(t,{anchor:t.selection.main.anchor,head:0})),!0),DT=({state:t,dispatch:e})=>(e(ql(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),ype=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),bpe=({state:t,dispatch:e})=>{let n=aw(t).map(({from:i,to:r})=>se.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:se.create(n),userEvent:"select"})),!0};function ow(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=i0(t,l,!1)):l>o&&(n="delete.forward",l=i0(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=i0(t,o,!1),a=i0(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:se.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Oe.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function i0(t,e,n){if(t instanceof Oe)for(let i of t.state.facet(Oe.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const tz=(t,e,n)=>ow(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),a,l;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let c=wm(a,s.tabSize),u=c%nu(s)||nu(s);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)r--;l=r}else l=Zn(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=Zn(o.text,l-o.from,!1,!1)+o.from);return l}),m1=t=>tz(t,!1,!0),LT=t=>tz(t,!0,!1),nz=(t,e)=>ow(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=Zn(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||i!=n.head)&&(a=u),i=l}return i}),$T=t=>nz(t,!1),wpe=t=>nz(t,!0),BT=t=>ow(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),xpe=t=>ow(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),Spe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:wt.of(["",""])},range:se.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},kpe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:Zn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:Zn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:se.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function aw(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function iz(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of aw(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(se.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(se.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:se.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const _pe=({state:t,dispatch:e})=>iz(t,e,!1),Cpe=({state:t,dispatch:e})=>iz(t,e,!0);function rz(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of aw(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Epe=({state:t,dispatch:e})=>rz(t,e,!1),Ape=({state:t,dispatch:e})=>rz(t,e,!0),Npe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(aw(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=jm(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),a=t.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Ppe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Co(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(yt.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const FT=Mpe(!1);function Mpe(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&Ppe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new wA(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=ahe(c,s);for(u==null&&(u=wm(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",Xk(e,u)];return l&&d.push(Xk(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:wt.of(d)},range:se.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function sz(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:se.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const n_=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(sz(t,(n,i)=>{i.push({from:n.from,insert:t.facet(bA)})}),{userEvent:"input.indent"})),!0),zT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(sz(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=wm(r,t.tabSize),o=0,a=Xk(t,Math.max(0,s-nu(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),UT=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class tm{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(UT(a)):UT,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Br(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=qC(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=qo(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(tm.prototype[Symbol.iterator]=function(){return this});const oz={from:-1,to:-1,match:/.*/.exec("")},PA="gm"+(/x/.unicode==null?"":"u");class az{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=oz,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new lz(e,n,i,r,s);this.re=new RegExp(n,PA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=Ey(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=Ey(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const g1=new WeakMap;class xd{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=g1.get(e);if(!r||r.from>=i||r.to<=n){let a=new xd(n,e.sliceString(n,i));return g1.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),g1.set(e,new xd(o,s)),new xd(n,s.slice(n-o,i-o))}}class lz{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=oz,this.matchPos=Ey(e,r),this.re=new RegExp(n,PA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=xd.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=Ey(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=xd.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(az.prototype[Symbol.iterator]=lz.prototype[Symbol.iterator]=function(){return this});function Rpe(t){try{return new RegExp(t,PA),!0}catch{return!1}}function Ey(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function i_(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=It("input",{class:"cm-textfield",name:"line",value:e}),i=It("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:qh.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},It("label",t.state.phrase("Go to line"),": ",n)," ",It("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),It("button",{name:"close",onclick:()=>{t.dispatch({effects:qh.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,f=u?+u.slice(1):0,p=c?+c:a.number;if(c&&d){let v=p/100;l&&(v=v*(l=="-"?-1:1)+a.number/o.doc.lines),p=Math.round(o.doc.lines*v)}else c&&l&&(p=p*(l=="-"?-1:1)+a.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),m=se.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[qh.of(!1),Oe.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:i}}const qh=ot.define(),VT=Pi.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(qh)&&(t=n.value);return t},provide:t=>Bp.from(t,e=>e?i_:null)}),Tpe=t=>{let e=$p(t,i_);if(!e){let n=[qh.of(!0)];t.state.field(VT,!1)==null&&n.push(ot.appendConfig.of([VT,Ope])),t.dispatch({effects:n}),e=$p(t,i_)}return e&&e.dom.querySelector("input").select(),!0},Ope=Oe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Ipe=({state:t,dispatch:e})=>{let{selection:n}=t,i=se.create(n.ranges.map(r=>t.wordAt(r.head)||se.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function jpe(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new tm(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new tm(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Dpe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Ipe({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=jpe(t,i);return r?(e(t.update({selection:t.selection.addRange(se.range(r.from,r.to),!1),effects:Oe.scrollIntoView(r.to)})),!0):!1},xf=Ne.define({combine(t){return Ul(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Wpe(e),scrollToMatch:e=>Oe.scrollIntoView(e)})}});class cz{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Rpe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Fpe(this):new $pe(this)}getCursor(e,n=0,i){let r=e.doc?e:mt.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Ou(this,r,n,i):Tu(this,r,n,i)}}class uz{constructor(e){this.spec=e}}function Tu(t,e,n,i){return new tm(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?Lpe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Lpe(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(Ay(r,n-s))!=Qn.Word||e(Ny(r,n-s))!=Qn.Word)&&(e(Ny(r,i-s))!=Qn.Word||e(Ay(r,i-s))!=Qn.Word))}class $pe extends uz{constructor(e){super(e)}nextMatch(e,n,i){let r=Tu(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=Tu(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=Tu(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=Tu(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Tu(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Ou(t,e,n,i){return new az(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Bpe(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function Ay(t,e){return t.slice(Zn(t,e,!1),e)}function Ny(t,e){return t.slice(e,Zn(t,e))}function Bpe(t){return(e,n,i)=>!i[0].length||(t(Ay(i.input,i.index))!=Qn.Word||t(Ny(i.input,i.index))!=Qn.Word)&&(t(Ny(i.input,i.index+i[0].length))!=Qn.Word||t(Ay(i.input,i.index+i[0].length))!=Qn.Word)}class Fpe extends uz{nextMatch(e,n,i){let r=Ou(this.spec,e,i,e.doc.length).next();return r.done&&(r=Ou(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=Ou(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let s=+i.slice(0,r);if(s>0&&s<e.match.length)return e.match[s]+i.slice(r)}return n})}matchAll(e,n){let i=Ou(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Ou(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const nm=ot.define(),MA=ot.define(),yl=Pi.define({create(t){return new v1(r_(t).create(),null)},update(t,e){for(let n of e.effects)n.is(nm)?t=new v1(n.value.create(),t.panel):n.is(MA)&&(t=new v1(t.query,n.value?RA:null));return t},provide:t=>Bp.from(t,e=>e.panel)});class v1{constructor(e,n){this.query=e,this.panel=n}}const zpe=at.mark({class:"cm-searchMatch"}),Upe=at.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Vpe=ii.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(yl))}update(t){let e=t.state.field(yl);(e!=t.startState.field(yl)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return at.none;let{view:n}=this,i=new Nl;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(f=>f.from==c&&f.to==u);i.add(c,u,d?Upe:zpe)})}return i.finish()}},{decorations:t=>t.decorations});function Dm(t){return e=>{let n=e.state.field(yl,!1);return n&&n.query.spec.valid?t(e,n):mz(e)}}const HT=Dm((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=se.single(i.from,i.to),s=t.state.facet(xf);return t.dispatch({selection:r,effects:[TA(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),pz(t),!0}),WT=Dm((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=se.single(r.from,r.to),o=t.state.facet(xf);return t.dispatch({selection:s,effects:[TA(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),pz(t),!0}),dz=Dm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:se.create(n.map(i=>se.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),Hpe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new tm(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(se.range(a.value.from,a.value.to))}return e(t.update({selection:se.create(s,o),userEvent:"select.search.matches"})),!0},GT=Dm((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,a=[],l,c,u=[];o.from==i&&o.to==r&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(Oe.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let d=t.state.changes(a);return o&&(l=se.single(o.from,o.to).map(d),u.push(TA(t,o)),u.push(n.facet(xf).scrollToMatch(l.main,t))),t.dispatch({changes:d,selection:l,effects:u,userEvent:"input.replace"}),!0}),fz=Dm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Oe.announce.of(i),userEvent:"input.replace.all"}),!0});function RA(t){return t.state.facet(xf).createPanel(t)}function r_(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(xf);return new cz({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function hz(t){let e=$p(t,RA);return e&&e.dom.querySelector("[main-field]")}function pz(t){let e=hz(t);e&&e==t.root.activeElement&&e.select()}const mz=t=>{let e=t.state.field(yl,!1);if(e&&e.panel){let n=hz(t);if(n&&n!=t.root.activeElement){let i=r_(t.state,e.query.spec);i.valid&&t.dispatch({effects:nm.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[MA.of(!0),e?nm.of(r_(t.state,e.query.spec)):ot.appendConfig.of(Kpe)]});return!0},gz=t=>{let e=t.state.field(yl,!1);if(!e||!e.panel)return!1;let n=$p(t,RA);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:MA.of(!1)}),!0};class Wpe{constructor(e){this.view=e;let n=this.query=e.state.field(yl).query.spec;this.commit=this.commit.bind(this),this.searchField=It("input",{value:n.search,placeholder:ir(e,"Find"),"aria-label":ir(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=It("input",{value:n.replace,placeholder:ir(e,"Replace"),"aria-label":ir(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=It("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=It("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=It("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return It("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=It("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>HT(e),[ir(e,"next")]),i("prev",()=>WT(e),[ir(e,"previous")]),i("select",()=>dz(e),[ir(e,"all")]),It("label",null,[this.caseField,ir(e,"match case")]),It("label",null,[this.reField,ir(e,"regexp")]),It("label",null,[this.wordField,ir(e,"by word")]),...e.state.readOnly?[]:[It("br"),this.replaceField,i("replace",()=>GT(e),[ir(e,"replace")]),i("replaceAll",()=>fz(e),[ir(e,"replace all")])],It("button",{name:"close",onclick:()=>gz(e),"aria-label":ir(e,"close"),type:"button"},["×"])])}commit(){let e=new cz({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:nm.of(e)}))}keydown(e){Ate(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?WT:HT)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),GT(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(nm)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(xf).top}}function ir(t,e){return t.state.phrase(e)}const r0=30,s0=/[\s\.,:;?!]/;function TA(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-r0),o=Math.min(r,n+r0),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<r0;l++)if(!s0.test(a[l+1])&&s0.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-r0;l--)if(!s0.test(a[l-1])&&s0.test(a[l])){a=a.slice(0,l);break}}return Oe.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const Gpe=Oe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Kpe=[yl,ym.low(Vpe),Gpe];class qpe{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=Co(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(vz(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function KT(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Ype(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=KT(e)+KT(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Xpe(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:Ype(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class qT{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function Yh(t){return t.selection.main.from}function vz(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const yz=ga.define();function Jpe(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:se.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const YT=new WeakMap;function Zpe(t){if(!Array.isArray(t))return t;let e=YT.get(t);return e||YT.set(t,e=Xpe(t)),e}const bz=ot.define(),OA=ot.define();class Qpe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=Br(e,n),r=qo(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(Br(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let w=Br(e,0),x=qo(w),S=x==e.length?0:-100;if(w!=n[0])if(w==i[0])S+=-200;else return null;return this.ret(S,[0,x])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let w=0,x=Math.min(e.length,200);w<x&&c<l;){let S=Br(e,w);(S==n[c]||S==i[c])&&(r[c++]=w),w+=qo(S)}if(c<l)return null}let u=0,d=0,f=!1,p=0,g=-1,m=-1,v=/[a-z]/.test(e),y=!0;for(let w=0,x=Math.min(e.length,200),S=0;w<x&&d<l;){let _=Br(e,w);a<0&&(u<l&&_==n[u]&&(s[u++]=w),p<l&&(_==n[p]||_==i[p]?(p==0&&(g=w),m=w+1,p++):p=0));let E,C=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(E=qC(_))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!w||C==1&&v||S==0&&C!=0)&&(n[d]==_||i[d]==_&&(f=!0)?o[d++]=w:o.length&&(y=!1)),S=C,w+=qo(_)}return d==l&&o[0]==0&&y?this.result(-100+(f?-200:0),o,e):p==l&&g==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):p==l?this.ret(-900-e.length,[g,m]):d==l?this.result(-100+(f?-200:0)+-700+(y?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?qo(Br(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class eme{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const io=Ne.define({combine(t){return Ul(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:tme,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>XT(e(i),n(i)),optionClass:(e,n)=>i=>XT(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function XT(t,e){return t?e?t+" "+e:t:e}function tme(t,e,n,i,r,s){let o=t.textDirection==Kt.RTL,a=o,l=!1,c="top",u,d,f=e.left-r.left,p=r.right-e.right,g=i.right-i.left,m=i.bottom-i.top;if(a&&f<Math.min(g,p)?a=!1:!a&&p<Math.min(g,f)&&(a=!0),g<=(a?f:p))u=Math.max(r.top,Math.min(n.top,r.bottom-m))-e.top,d=Math.min(400,a?f:p);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let w=r.bottom-e.bottom;w>=m||w>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let v=(e.bottom-e.top)/s.offsetHeight,y=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/v}px; max-width: ${d/y}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function nme(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function y1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class ime{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(io);this.optionContent=nme(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=y1(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(io).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:OA.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=y1(s.length,o,e.state.facet(io).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=y1(n.options.length,n.selected,this.view.state.facet(io).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>gr(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&sme(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(io).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",o=>{o.target==r&&o.preventDefault()});let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>i.from||i.from==0))if(s=f,typeof c!="string"&&c.header)r.appendChild(c.header(c));else{let p=r.appendChild(document.createElement("completion-section"));p.textContent=f}}const u=r.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let f of this.optionContent){let p=f(a,this.view.state,this.view,l);p&&u.appendChild(p)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function rme(t,e){return n=>new ime(n,t,e)}function sme(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function JT(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function ome(t,e){let n=[],i=null,r=c=>{n.push(c);let{section:u}=c.completion;if(u){i||(i=[]);let d=typeof u=="string"?u:u.name;i.some(f=>f.name==d)||i.push(typeof u=="string"?{name:d}:u)}},s=e.facet(io);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)r(new qT(d,c.source,u?u(d):[],1e9-n.length));else{let d=e.sliceDoc(c.from,c.to),f,p=s.filterStrict?new eme(d):new Qpe(d);for(let g of c.result.options)if(f=p.match(g.label)){let m=g.displayLabel?u?u(g,f.matched):[]:f.matched;r(new qT(g,c.source,m,f.score+(g.boost||0)))}}}if(i){let c=Object.create(null),u=0,d=(f,p)=>{var g,m;return((g=f.rank)!==null&&g!==void 0?g:1e9)-((m=p.rank)!==null&&m!==void 0?m:1e9)||(f.name<p.name?-1:1)};for(let f of i.sort(d))u-=1e5,c[f.name]=u;for(let f of n){let{section:p}=f.completion;p&&(f.score+=c[typeof p=="string"?p:p.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of n.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):JT(c.completion)>JT(a)&&(o[o.length-1]=c),a=c.completion}return o}class nd{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new nd(this.options,ZT(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(c=>c.isPending))return r.setDisabled();let a=ome(e,n);if(!a.length)return r&&e.some(c=>c.isPending)?r.setDisabled():null;let l=n.facet(io).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let c=r.options[r.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new nd(a,ZT(i,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:hme,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new nd(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new nd(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Py{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new Py(ume,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(io),s=(i.override||n.languageDataAt("autocomplete",Yh(n)).map(Zpe)).map(l=>(this.active.find(u=>u.source==l)||new xs(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(wz));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!ame(s,this.active)||a?o=nd.build(s,n,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new xs(l.source,0):l));for(let l of e.effects)l.is(xz)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new Py(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?lme:cme}}function ame(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const lme={"aria-autocomplete":"list"},cme={};function ZT(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const ume=[];function dme(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(yz);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class xs{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=dme(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new xs(r.source,0)),i&4&&r.state==0&&(r=new xs(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(bz))r=new xs(r.source,1,s.value);else if(s.is(OA))r=new xs(r.source,0);else if(s.is(wz))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Yh(e.state))}}class Xh extends xs{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Yh(e.state);if(a>o||!r||n&2&&(Yh(e.startState)==this.from||a<this.limit))return new xs(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return fme(r.validFor,e.state,s,o)?new Xh(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new qpe(e.state,a,!1)))?new Xh(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:Yh(e.state)):new xs(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Xh(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new xs(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function fme(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):vz(t,!0).test(r)}const wz=ot.define({map(t,e){return t.map(n=>n.map(e))}}),xz=ot.define(),Sf=Pi.define({create(){return Py.start()},update(t,e){return t.update(e)},provide:t=>[cE.from(t,e=>e.tooltip),Oe.contentAttributes.from(t,e=>e.attrs)]});function Sz(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(Sf).active.find(r=>r.source==e.source);return i instanceof Xh?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},Jpe(t.state,n,i.from,i.to)),{annotations:yz.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const hme=rme(Sf,Sz);function o0(t,e="option"){return n=>{let i=n.state.field(Sf,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(io).interactionDelay)return!1;let r=1,s;e=="page"&&(s=sne(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:xz.of(a)}),!0}}const QT=t=>{let e=t.state.field(Sf,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(io).interactionDelay?!1:Sz(t,e.open.options[e.open.selected])},pme=t=>t.state.field(Sf,!1)?(t.dispatch({effects:bz.of(!0)}),!0):!1,mme=t=>{let e=t.state.field(Sf,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:OA.of(null)}),!0)},kz={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},_z=new class extends Gc{};_z.startSide=1;_z.endSide=-1;const b1="()[]{}<>«»»«［］｛｝";function gme(t){for(let e=0;e<b1.length;e+=2)if(b1.charCodeAt(e)==t)return b1.charAt(e+1);return qC(t<128?t:t+1)}function vme(t,e){return t.languageDataAt("closeBrackets",e)[0]||kz}const yme=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=vme(t,t.selection.main.head).brackets||kz.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=wme(t.doc,o.head);for(let l of i)if(l==a&&bme(t.doc,o.head)==gme(Br(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:se.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function bme(t,e){let n=t.sliceString(e,e+2);return n.slice(0,qo(Br(n,0)))}function wme(t,e){let n=t.sliceString(e-2,e);return qo(Br(n,0))==n.length?n:n.slice(1)}class eO{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class bc{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=i.facet(uo).markerFilter;r&&(e=r(e,i));let s=e.slice().sort((u,d)=>u.from-d.from||u.to-d.to),o=new Nl,a=[],l=0;for(let u=0;;){let d=u==s.length?null:s[u];if(!d&&!a.length)break;let f,p;for(a.length?(f=l,p=a.reduce((m,v)=>Math.min(m,v.to),d&&d.from>f?d.from:1e8)):(f=d.from,p=d.to,a.push(d),u++);u<s.length;){let m=s[u];if(m.from==f&&(m.to>m.from||m.to==f))a.push(m),u++,p=Math.min(m.to,p);else{p=Math.min(m.from,p);break}}let g=jme(a);if(a.some(m=>m.from==m.to||m.from==m.to-1&&i.doc.lineAt(m.from).to==m.from))o.add(f,f,at.widget({widget:new Rme(g),diagnostics:a.slice()}));else{let m=a.reduce((v,y)=>y.markClass?v+" "+y.markClass:v,"");o.add(f,p,at.mark({class:"cm-lintRange cm-lintRange-"+g+m,diagnostics:a.slice(),inclusiveEnd:a.some(v=>v.to>p)}))}l=p;for(let m=0;m<a.length;m++)a[m].to<=l&&a.splice(m--,1)}let c=o.finish();return new bc(c,n,af(c))}}function af(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new eO(r,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new eO(i.from,s,i.diagnostic)}}),i}function xme(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(uo).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(IA))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function Cz(t,e){return t.field(br,!1)?e:e.concat(ot.appendConfig.of(Pz))}function Sme(t,e){return{effects:Cz(t,[IA.of(e)])}}const IA=ot.define(),jA=ot.define(),Ez=ot.define(),br=Pi.define({create(){return new bc(at.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=af(n,t.selected.diagnostic,s)||af(n,null,s)}!n.size&&r&&e.state.facet(uo).autoPanel&&(r=null),t=new bc(n,r,i)}for(let n of e.effects)if(n.is(IA)){let i=e.state.facet(uo).autoPanel?n.value.length?im.open:null:t.panel;t=bc.init(n.value,i,e.state)}else n.is(jA)?t=new bc(t.diagnostics,n.value?im.open:null,t.selected):n.is(Ez)&&(t=new bc(t.diagnostics,t.panel,n.value));return t},provide:t=>[Bp.from(t,e=>e.panel),Oe.decorations.from(t,e=>e.diagnostics)]}),kme=at.mark({class:"cm-lintRange cm-lintRange-active"});function _me(t,e,n){let{diagnostics:i}=t.state.field(br),r,s=-1,o=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0)))return r=u.diagnostics,s=l,o=c,!1});let a=t.state.facet(uo).tooltipFilter;return r&&a&&(r=a(r,t.state)),r?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Cme(t,r)}}}:null}function Cme(t,e){return It("ul",{class:"cm-tooltip-lint"},e.map(n=>Nz(t,n,!1)))}const Eme=t=>{let e=t.state.field(br,!1);(!e||!e.panel)&&t.dispatch({effects:Cz(t.state,[jA.of(!0)])});let n=$p(t,im.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},tO=t=>{let e=t.state.field(br,!1);return!e||!e.panel?!1:(t.dispatch({effects:jA.of(!1)}),!0)},Ame=t=>{let e=t.state.field(br,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Nme=ii.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(uo);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(uo);n.length&&Pme(n.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(Sme(this.view.state,i.reduce((r,s)=>r.concat(s))))},i=>{gr(this.view.state,i)})}}update(t){let e=t.state.facet(uo);(t.docChanged||e!=t.startState.facet(uo)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function Pme(t,e,n){let i=[],r=-1;for(let s of t)s.then(o=>{i.push(o),clearTimeout(r),i.length==t.length?e(i):r=setTimeout(()=>e(i),200)},n)}const uo=Ne.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Ul(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function Mme(t,e={}){return[uo.of({source:t,config:e}),Nme,Pz]}function Az(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function Nz(t,e,n){var i;let r=n?Az(e.actions):[];return It("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},It("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let p=af(t.state.field(br).diagnostics,e);p&&s.apply(t,p.from,p.to)},{name:c}=s,u=r[o]?c.indexOf(r[o]):-1,d=u<0?c:[c.slice(0,u),It("u",c.slice(u,u+1)),c.slice(u+1)];return It("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&It("div",{class:"cm-diagnosticSource"},e.source))}class Rme extends Vl{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return It("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class nO{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Nz(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class im{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)tO(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=Az(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=af(this.view.state.field(br).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=It("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=It("div",{class:"cm-panel-lint"},this.list,It("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>tO(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(br).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(br),i=0,r=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,f;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==u){d=p;break}d<0?(f=new nO(this.view,u),this.items.splice(i,0,f),r=!0):(f=this.items[d],d>i&&(this.items.splice(i,d-i),r=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new nO(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(br),i=af(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Ez.of(i)})}static open(e){return new im(e)}}function Tme(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function a0(t){return Tme(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Ome=Oe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:a0("#d11")},".cm-lintRange-warning":{backgroundImage:a0("orange")},".cm-lintRange-info":{backgroundImage:a0("#999")},".cm-lintRange-hint":{backgroundImage:a0("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Ime(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function jme(t){let e="hint",n=1;for(let i of t){let r=Ime(i.severity);r>n&&(n=r,e=i.severity)}return e}const Pz=[br,Oe.decorations.compute([br],t=>{let{selected:e,panel:n}=t.field(br);return!e||!n||e.from==e.to?at.none:at.set([kme.range(e.from,e.to)])}),rne(_me,{hideOn:xme}),Ome],Mz=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},Dme=Mz("up"),Lme=Mz("down"),$me=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(se.range(s,s)):e=se.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},Bme=[{key:"Ctrl-Space",run:pme},{key:"Escape",run:mme},{key:"ArrowDown",run:o0(!0)},{key:"ArrowUp",run:o0(!1)},{key:"PageDown",run:o0(!0,"page")},{key:"PageUp",run:o0(!1,"page")},{key:"Enter",run:QT},{key:"Tab",run:QT},{key:"Mod-f",run:mz,scope:"editor search-panel"},{key:"Escape",run:gz,scope:"editor search-panel"},{key:"Alt-Enter",run:dz,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:fz,scope:"editor search-panel"},{key:"Ctrl-g",run:Tpe},{key:"Mod-d",run:Dpe,preventDefault:!0},{key:"Shift-Mod-l",run:Hpe},{key:"Enter",run:FT,shift:FT},{key:"ArrowLeft",run:bT,shift:CT,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:lpe,shift:ppe},{key:"ArrowRight",run:wT,shift:ET,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cpe,shift:mpe},{key:"ArrowUp",run:xT,shift:AT,preventDefault:!0},{key:"ArrowDown",run:ST,shift:NT,preventDefault:!0},{key:"Home",run:_T,shift:TT},{mac:"Cmd-ArrowLeft",run:_T,shift:TT},{key:"Mod-Home",run:OT,shift:jT},{mac:"Cmd-ArrowUp",run:OT,shift:jT},{key:"PageUp",run:h1,shift:PT},{mac:"Ctrl-ArrowUp",run:h1,shift:PT},{key:"PageDown",run:p1,shift:MT},{mac:"Ctrl-ArrowDown",run:p1,shift:MT},{key:"End",run:kT,shift:RT},{mac:"Cmd-ArrowRight",run:kT,shift:RT},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Dme,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:Lme,preventDefault:!0},{key:"Shift-Alt-i",run:$me},{key:"Mod-End",run:IT,shift:DT},{mac:"Cmd-ArrowDown",run:IT,shift:DT},{key:"Mod-a",run:ype},{key:"Backspace",run:yme},{key:"Backspace",run:m1,shift:m1},{key:"Delete",run:LT},{key:"Mod-Backspace",mac:"Alt-Backspace",run:$T},{key:"Mod-Delete",mac:"Alt-Delete",run:wpe},{mac:"Mod-Backspace",run:xpe},{mac:"Mod-Delete",run:BT},{mac:"Ctrl-b",run:bT,shift:CT,preventDefault:!0},{mac:"Ctrl-f",run:wT,shift:ET},{mac:"Ctrl-p",run:xT,shift:AT},{mac:"Ctrl-n",run:ST,shift:NT},{mac:"Ctrl-a",run:upe,shift:gpe},{mac:"Ctrl-e",run:dpe,shift:vpe},{mac:"Ctrl-d",run:LT},{mac:"Ctrl-h",run:m1},{mac:"Ctrl-k",run:BT},{mac:"Ctrl-Alt-h",run:$T},{mac:"Ctrl-o",run:Spe},{mac:"Ctrl-t",run:kpe},{mac:"Ctrl-v",run:p1},{mac:"Alt-v",run:h1},{key:"Shift-Mod-k",run:Npe},{key:"Alt-ArrowDown",run:Cpe},{key:"Alt-ArrowUp",run:_pe},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:Ape},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Epe},{key:"Mod-l",run:bpe,preventDefault:!0},{key:"Shift-Mod-\\",run:hpe},{key:"Tab",run:n_,shift:zT,preventDefault:!0},{key:"Mod-[",run:zT},{key:"Mod-]",run:n_},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:whe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:xhe},{key:"Mod-k Mod-0",run:She},{key:"Mod-k Mod-j",run:khe},{key:"Mod-k Mod-c",run:Ghe},{key:"Mod-k Mod-u",run:Khe},{key:"Mod-/",run:Hhe},{key:"Shift-Alt-a",run:qhe},{key:"Mod-z",run:V9,preventDefault:!0},{key:"Mod-y",run:t_,preventDefault:!0},{key:"Mod-Shift-z",run:t_,preventDefault:!0},{key:"Mod-u",run:tpe,preventDefault:!0},{key:"Mod-Shift-m",run:Eme},{key:"F8",run:Ame}];var Fme=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Cu=new WeakMap,l0=new WeakMap,c0={},w1=0,Rz=function(t){return t&&(t.host||Rz(t.parentNode))},zme=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=Rz(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Ume=function(t,e,n,i){var r=zme(e,Array.isArray(t)?t:[t]);c0[n]||(c0[n]=new WeakMap);var s=c0[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),g=p!==null&&p!=="false",m=(Cu.get(f)||0)+1,v=(s.get(f)||0)+1;Cu.set(f,m),s.set(f,v),o.push(f),m===1&&g&&l0.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),w1++,function(){o.forEach(function(d){var f=Cu.get(d)-1,p=s.get(d)-1;Cu.set(d,f),s.set(d,p),f||(l0.has(d)||d.removeAttribute(i),l0.delete(d)),p||d.removeAttribute(n)}),w1--,w1||(Cu=new WeakMap,Cu=new WeakMap,l0=new WeakMap,c0={})}},Vme=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=Fme(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),Ume(i,r,n,"aria-hidden")):function(){return null}},s_=["Enter"," "],Hme=["ArrowDown","PageUp","Home"],Tz=["ArrowUp","PageDown","End"],Wme=[...Hme,...Tz],Gme={ltr:[...s_,"ArrowRight"],rtl:[...s_,"ArrowLeft"]},Kme={ltr:["ArrowLeft"],rtl:["ArrowRight"]},lw="Menu",[rm,qme,Yme]=dm(lw),[lu,Oz]=Ms(lw,[Yme,yf,ab]),DA=yf(),Iz=ab(),[yve,cu]=lu(lw),[bve,Lm]=lu(lw),Xme="MenuAnchor",LA=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=DA(n);return h.jsx(Vb,{...r,...i,ref:e})});LA.displayName=Xme;var $A="MenuPortal",[Jme,jz]=lu($A,{forceMount:void 0}),Dz=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=cu($A,e);return h.jsx(Jme,{scope:e,forceMount:n,children:h.jsx(fa,{present:n||s.open,children:h.jsx(Pm,{asChild:!0,container:r,children:i})})})};Dz.displayName=$A;var Zr="MenuContent",[Zme,BA]=lu(Zr),Lz=b.forwardRef((t,e)=>{const n=jz(Zr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=cu(Zr,t.__scopeMenu),o=Lm(Zr,t.__scopeMenu);return h.jsx(rm.Provider,{scope:t.__scopeMenu,children:h.jsx(fa,{present:i||s.open,children:h.jsx(rm.Slot,{scope:t.__scopeMenu,children:o.modal?h.jsx(Qme,{...r,ref:e}):h.jsx(ege,{...r,ref:e})})})})}),Qme=b.forwardRef((t,e)=>{const n=cu(Zr,t.__scopeMenu),i=b.useRef(null),r=ht(e,i);return b.useEffect(()=>{const s=i.current;if(s)return Vme(s)},[]),h.jsx(FA,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:be(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ege=b.forwardRef((t,e)=>{const n=cu(Zr,t.__scopeMenu);return h.jsx(FA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),tge=zd("MenuContent.ScrollLock"),FA=b.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:g,...m}=t,v=cu(Zr,n),y=Lm(Zr,n),w=DA(n),x=Iz(n),S=qme(n),[_,E]=b.useState(null),C=b.useRef(null),N=ht(e,C,v.onContentChange),R=b.useRef(0),O=b.useRef(""),D=b.useRef(0),j=b.useRef(null),q=b.useRef("right"),$=b.useRef(0),K=g?Wb:b.Fragment,J=g?{as:tge,allowPinchZoom:!0}:void 0,Q=F=>{var k,P;const re=O.current+F,pe=S().filter(I=>!I.disabled),Z=document.activeElement,ce=(k=pe.find(I=>I.ref.current===Z))==null?void 0:k.textValue,B=pe.map(I=>I.textValue),L=hge(B,re,ce),U=(P=pe.find(I=>I.textValue===L))==null?void 0:P.ref.current;(function I(T){O.current=T,window.clearTimeout(R.current),T!==""&&(R.current=window.setTimeout(()=>I(""),1e3))})(re),U&&setTimeout(()=>U.focus())};b.useEffect(()=>()=>window.clearTimeout(R.current),[]),WE();const V=b.useCallback(F=>{var pe,Z;return q.current===((pe=j.current)==null?void 0:pe.side)&&mge(F,(Z=j.current)==null?void 0:Z.area)},[]);return h.jsx(Zme,{scope:n,searchRef:O,onItemEnter:b.useCallback(F=>{V(F)&&F.preventDefault()},[V]),onItemLeave:b.useCallback(F=>{var re;V(F)||((re=C.current)==null||re.focus(),E(null))},[V]),onTriggerLeave:b.useCallback(F=>{V(F)&&F.preventDefault()},[V]),pointerGraceTimerRef:D,onPointerGraceIntentChange:b.useCallback(F=>{j.current=F},[]),children:h.jsx(K,{...J,children:h.jsx(Bb,{asChild:!0,trapped:r,onMountAutoFocus:be(s,F=>{var re;F.preventDefault(),(re=C.current)==null||re.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:h.jsx(Am,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(Xj,{asChild:!0,...x,dir:y.dir,orientation:"vertical",loop:i,currentTabStopId:_,onCurrentTabStopIdChange:E,onEntryFocus:be(l,F=>{y.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(nA,{role:"menu","aria-orientation":"vertical","data-state":Qz(v.open),"data-radix-menu-content":"",dir:y.dir,...w,...m,ref:N,style:{outline:"none",...m.style},onKeyDown:be(m.onKeyDown,F=>{const pe=F.target.closest("[data-radix-menu-content]")===F.currentTarget,Z=F.ctrlKey||F.altKey||F.metaKey,ce=F.key.length===1;pe&&(F.key==="Tab"&&F.preventDefault(),!Z&&ce&&Q(F.key));const B=C.current;if(F.target!==B||!Wme.includes(F.key))return;F.preventDefault();const U=S().filter(k=>!k.disabled).map(k=>k.ref.current);Tz.includes(F.key)&&U.reverse(),dge(U)}),onBlur:be(t.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(R.current),O.current="")}),onPointerMove:be(t.onPointerMove,sm(F=>{const re=F.target,pe=$.current!==F.clientX;if(F.currentTarget.contains(re)&&pe){const Z=F.clientX>$.current?"right":"left";q.current=Z,$.current=F.clientX}}))})})})})})})});Lz.displayName=Zr;var nge="MenuGroup",zA=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Ye.div,{role:"group",...i,ref:e})});zA.displayName=nge;var ige="MenuLabel",$z=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Ye.div,{...i,ref:e})});$z.displayName=ige;var My="MenuItem",iO="menu.itemSelect",cw=b.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=b.useRef(null),o=Lm(My,t.__scopeMenu),a=BA(My,t.__scopeMenu),l=ht(e,s),c=b.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(iO,{bubbles:!0,cancelable:!0});d.addEventListener(iO,p=>i==null?void 0:i(p),{once:!0}),yC(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return h.jsx(Bz,{...r,ref:l,disabled:n,onClick:be(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:be(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:be(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||s_.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});cw.displayName=My;var Bz=b.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=BA(My,n),a=Iz(n),l=b.useRef(null),c=ht(e,l),[u,d]=b.useState(!1),[f,p]=b.useState("");return b.useEffect(()=>{const g=l.current;g&&p((g.textContent??"").trim())},[s.children]),h.jsx(rm.ItemSlot,{scope:n,disabled:i,textValue:r??f,children:h.jsx(Jj,{asChild:!0,...a,focusable:!i,children:h.jsx(Ye.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:c,onPointerMove:be(t.onPointerMove,sm(g=>{i?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:be(t.onPointerLeave,sm(g=>o.onItemLeave(g))),onFocus:be(t.onFocus,()=>d(!0)),onBlur:be(t.onBlur,()=>d(!1))})})})}),rge="MenuCheckboxItem",Fz=b.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return h.jsx(Wz,{scope:t.__scopeMenu,checked:n,children:h.jsx(cw,{role:"menuitemcheckbox","aria-checked":Ry(n)?"mixed":n,...r,ref:e,"data-state":VA(n),onSelect:be(r.onSelect,()=>i==null?void 0:i(Ry(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Fz.displayName=rge;var zz="MenuRadioGroup",[sge,oge]=lu(zz,{value:void 0,onValueChange:()=>{}}),Uz=b.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=_r(i);return h.jsx(sge,{scope:t.__scopeMenu,value:n,onValueChange:s,children:h.jsx(zA,{...r,ref:e})})});Uz.displayName=zz;var Vz="MenuRadioItem",Hz=b.forwardRef((t,e)=>{const{value:n,...i}=t,r=oge(Vz,t.__scopeMenu),s=n===r.value;return h.jsx(Wz,{scope:t.__scopeMenu,checked:s,children:h.jsx(cw,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":VA(s),onSelect:be(i.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});Hz.displayName=Vz;var UA="MenuItemIndicator",[Wz,age]=lu(UA,{checked:!1}),Gz=b.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=age(UA,n);return h.jsx(fa,{present:i||Ry(s.checked)||s.checked===!0,children:h.jsx(Ye.span,{...r,ref:e,"data-state":VA(s.checked)})})});Gz.displayName=UA;var lge="MenuSeparator",Kz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Ye.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});Kz.displayName=lge;var cge="MenuArrow",qz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=DA(n);return h.jsx(iA,{...r,...i,ref:e})});qz.displayName=cge;var uge="MenuSub",[wve,Yz]=lu(uge),Sh="MenuSubTrigger",Xz=b.forwardRef((t,e)=>{const n=cu(Sh,t.__scopeMenu),i=Lm(Sh,t.__scopeMenu),r=Yz(Sh,t.__scopeMenu),s=BA(Sh,t.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>u,[u]),b.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),h.jsx(LA,{asChild:!0,...c,children:h.jsx(Bz,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":Qz(n.open),...t,ref:sb(e,r.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:be(t.onPointerMove,sm(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:be(t.onPointerLeave,sm(d=>{var p,g;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(g=n.content)==null?void 0:g.dataset.side,v=m==="right",y=v?-5:5,w=f[v?"left":"right"],x=f[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:w,y:f.top},{x,y:f.top},{x,y:f.bottom},{x:w,y:f.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:be(t.onKeyDown,d=>{var p;const f=s.searchRef.current!=="";t.disabled||f&&d.key===" "||Gme[i.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});Xz.displayName=Sh;var Jz="MenuSubContent",Zz=b.forwardRef((t,e)=>{const n=jz(Zr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=cu(Zr,t.__scopeMenu),o=Lm(Zr,t.__scopeMenu),a=Yz(Jz,t.__scopeMenu),l=b.useRef(null),c=ht(e,l);return h.jsx(rm.Provider,{scope:t.__scopeMenu,children:h.jsx(fa,{present:i||s.open,children:h.jsx(rm.Slot,{scope:t.__scopeMenu,children:h.jsx(FA,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:be(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:be(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:be(t.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=Kme[o.dir].includes(u.key);d&&f&&(s.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});Zz.displayName=Jz;function Qz(t){return t?"open":"closed"}function Ry(t){return t==="indeterminate"}function VA(t){return Ry(t)?"indeterminate":t?"checked":"unchecked"}function dge(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function fge(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function hge(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=fge(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function pge(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>i!=f>i&&n<(d-c)*(i-u)/(f-u)+c&&(r=!r)}return r}function mge(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return pge(n,e)}function sm(t){return e=>e.pointerType==="mouse"?t(e):void 0}var gge=LA,vge=Dz,yge=Lz,bge=zA,wge=$z,xge=cw,Sge=Fz,kge=Uz,_ge=Hz,Cge=Gz,Ege=Kz,Age=qz,Nge=Xz,Pge=Zz,e7="DropdownMenu",[Mge,xve]=Ms(e7,[Oz]),er=Oz(),[Sve,t7]=Mge(e7),n7="DropdownMenuTrigger",Rge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=t7(n7,n),o=er(n);return h.jsx(gge,{asChild:!0,...o,children:h.jsx(Ye.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:sb(e,s.triggerRef),onPointerDown:be(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:be(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Rge.displayName=n7;var Tge="DropdownMenuPortal",i7=t=>{const{__scopeDropdownMenu:e,...n}=t,i=er(e);return h.jsx(vge,{...i,...n})};i7.displayName=Tge;var r7="DropdownMenuContent",s7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=t7(r7,n),s=er(n),o=b.useRef(!1);return h.jsx(yge,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...i,ref:e,onCloseAutoFocus:be(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:be(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!r.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});s7.displayName=r7;var Oge="DropdownMenuGroup",Ige=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=er(n);return h.jsx(bge,{...r,...i,ref:e})});Ige.displayName=Oge;var jge="DropdownMenuLabel",o7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=er(n);return h.jsx(wge,{...r,...i,ref:e})});o7.displayName=jge;var Dge="DropdownMenuItem",a7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=er(n);return h.jsx(xge,{...r,...i,ref:e})});a7.displayName=Dge;var Lge="DropdownMenuCheckboxItem",l7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=er(n);return h.jsx(Sge,{...r,...i,ref:e})});l7.displayName=Lge;var $ge="DropdownMenuRadioGroup",Bge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=er(n);return h.jsx(kge,{...r,...i,ref:e})});Bge.displayName=$ge;var Fge="DropdownMenuRadioItem",c7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=er(n);return h.jsx(_ge,{...r,...i,ref:e})});c7.displayName=Fge;var zge="DropdownMenuItemIndicator",u7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=er(n);return h.jsx(Cge,{...r,...i,ref:e})});u7.displayName=zge;var Uge="DropdownMenuSeparator",d7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=er(n);return h.jsx(Ege,{...r,...i,ref:e})});d7.displayName=Uge;var Vge="DropdownMenuArrow",Hge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=er(n);return h.jsx(Age,{...r,...i,ref:e})});Hge.displayName=Vge;var Wge="DropdownMenuSubTrigger",f7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=er(n);return h.jsx(Nge,{...r,...i,ref:e})});f7.displayName=Wge;var Gge="DropdownMenuSubContent",h7=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=er(n);return h.jsx(Pge,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});h7.displayName=Gge;var Kge=i7,p7=s7,m7=o7,g7=a7,v7=l7,y7=c7,b7=u7,w7=d7,x7=f7,S7=h7;const qge=b.forwardRef(({className:t,inset:e,children:n,...i},r)=>h.jsxs(x7,{ref:r,className:te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,h.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block size-4"})]}));qge.displayName=x7.displayName;const Yge=b.forwardRef(({className:t,...e},n)=>h.jsx(S7,{ref:n,className:te("z-50 min-w-32 overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));Yge.displayName=S7.displayName;const Xge=b.forwardRef(({className:t,sideOffset:e=4,...n},i)=>h.jsx(Kge,{children:h.jsx(p7,{ref:i,sideOffset:e,className:te("z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));Xge.displayName=p7.displayName;const Jge=b.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(g7,{ref:i,className:te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Jge.displayName=g7.displayName;const Zge=b.forwardRef(({className:t,children:e,checked:n,...i},r)=>h.jsxs(v7,{ref:r,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(b7,{children:h.jsx("span",{className:"icon-[lucide--check] size-4"})})}),e]}));Zge.displayName=v7.displayName;const Qge=b.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(y7,{ref:i,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(b7,{children:h.jsx("span",{className:"icon-[lucide--circle-dot] block size-4"})})}),e]}));Qge.displayName=y7.displayName;const e0e=b.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(m7,{ref:i,className:te("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));e0e.displayName=m7.displayName;const t0e=b.forwardRef(({className:t,...e},n)=>h.jsx(w7,{ref:n,className:te("-mx-1 my-1 h-px bg-stone-600",t),...e}));t0e.displayName=w7.displayName;const HA=PL("vonsim-program",gb(Bt().language,"editor.example"),void 0,{getOnInit:!0}),k7=()=>{const t=M.get(HA);return typeof t=="string"?t:""},n0e=ii.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(M.set(HA,this.view.state.doc.toString()),M.set(iy,!0))}}),rO=de(null);de(t=>t(rO),(t,e,n)=>{e(rO,n)});const i0e=de("");de(t=>t(i0e)!==t(HA));const o_=de(0),sO=de(null),oO=de(t=>t(sO),(t,e,n)=>{e(sO,n)}),_7=de(""),r0e=de(()=>typeof window<"u"&&window.codemirror?window.codemirror.state.doc.toString():k7()||""),s0e=de(t=>t(_7)!==t(r0e)),x1="showSaveFilePicker"in window;function o0e(){const[t,e]=pa(),n=st(o_),i=st(oO),r=yp(oO),s=yp(_7),o=st(s0e),a=i&&o;b.useEffect(()=>{if(window.codemirror){const d=()=>{};return window.codemirror.dom.addEventListener("input",d),()=>{window.codemirror.dom.removeEventListener("input",d)}}},[]);const l=b.useCallback(async()=>{if(!x1){Fi({title:"editor.files.unsupported",variant:"error"});return}if(!(a&&!confirm("editor.files.unsaved")))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await d.requestPermission({mode:"readwrite"})==="granted"){r(d);const g=await(await d.getFile()).text();s(g),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:g}})}}catch(d){console.error(d),Fi({title:"editor.files.open-error",variant:"error"})}},[a,r,s]),c=b.useCallback(async()=>{if(!x1){Fi({title:"editor.files.unsupported",variant:"error"});return}if(!i){Fi({title:"No hay archivo abierto para guardar",variant:"error"});return}if(a)try{const d=window.codemirror.state.doc.toString(),f=await i.createWritable({keepExistingData:!1});await f.write(d),await f.close(),s(d),Fi({title:"Archivo guardado",variant:"info"})}catch(d){console.error(d),Fi({title:"editor.files.save-error",variant:"error"})}},[i,a,s]),u=b.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),f=(i==null?void 0:i.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(x1)try{const p=await window.showSaveFilePicker({suggestedName:f,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await p.requestPermission({mode:"readwrite"})==="granted"){r(p);const m=await p.createWritable({keepExistingData:!1});await m.write(d),await m.close(),s(d),Fi({title:"Archivo guardado",variant:"info"})}}catch(p){console.error(p),Fi({title:"editor.files.save-error",variant:"error"})}else{const p=new Blob([d],{type:"text/plain"}),g=URL.createObjectURL(p),m=document.createElement("a");m.style.display="none",m.href=g,m.download=f,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(g)}},[i,r,s]);return h.jsxs("div",{"data-testid":"status-bar",className:"flex items-center justify-between border-t border-stone-700 bg-gradient-to-r from-stone-800 to-stone-900 px-4 py-0.5 font-sans text-xs text-stone-300 shadow-inner",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[i&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-medium text-white transition-colors",children:i.name}),a&&h.jsx("span",{className:"size-2 rounded-full bg-orange-400"})]}),i&&h.jsx("div",{className:"h-4 w-px bg-stone-600"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(xr,{content:"editor.files.open",position:"top",children:h.jsx(bt,{variant:"ghost",size:"sm",onClick:l,className:"hover-lift","aria-label":"editor.files.open",children:h.jsx("span",{className:"icon-[lucide--folder-open] size-4"})})}),h.jsx(xr,{content:"editor.files.save",position:"top",children:h.jsx(bt,{variant:"ghost",size:"sm",onClick:c,disabled:!i||!a,className:"hover-lift","aria-label":"editor.files.save",children:h.jsx("span",{className:"icon-[lucide--save] size-4"})})}),h.jsx(xr,{content:"editor.files.save-as",position:"top",children:h.jsx(bt,{variant:"ghost",size:"sm",onClick:u,className:"hover-lift","aria-label":"editor.files.save-as",children:h.jsx("span",{className:"icon-[lucide--save-all] size-4"})})})]})]}),h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsxs(hA,{children:[h.jsx(pA,{asChild:!0,children:h.jsx("button",{className:"flex items-center justify-center rounded-lg p-1 text-stone-300 hover:bg-stone-800 focus:outline-none focus:ring-2 focus:ring-mantis-500","aria-label":"Ajustar tamaño de fuente del editor",title:"Ajustar tamaño de fuente del editor",type:"button",children:h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5"})})}),h.jsxs(tw,{align:"end",className:"w-56 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5 text-mantis-400"}),h.jsx("span",{className:"text-sm font-medium text-white",children:"Tamaño de fuente del editor"}),h.jsxs("span",{className:"ml-auto text-xs text-stone-400",children:[t.editorFontSize,"px"]})]}),h.jsx(Oa,{value:[t.editorFontSize],min:8,max:64,step:1,onValueChange:([d])=>e(f=>({...f,editorFontSize:d})),className:"w-full"}),h.jsxs("div",{className:"mt-2 flex justify-between text-xs text-stone-500",children:[h.jsx("span",{children:"8"}),h.jsx("span",{children:"64"})]})]})]}),h.jsxs("div",{className:te("flex items-center gap-1.5 rounded-full px-2 py-0.5 font-medium transition-colors",n>0?"border border-red-500/30 bg-red-500/20 text-red-300":"border border-green-500/30 bg-green-500/20 text-green-300"),children:[h.jsx("div",{className:te("size-2 rounded-full",n>0?"bg-red-400":"bg-green-400")}),h.jsx("span",{className:"font-mono",children:n>0?`${n} error${n>1?"es":""}`:"Sin errores"})]})]})]})}const ji={character:Ke.character,comment:Ke.comment,"data-directive":Tn.define(),identifier:Ke.variableName,instruction:Tn.define(),label:Ke.labelName,number:Ke.number,operator:Ke.operator,offset:Tn.define(),"ptr-size":Tn.define(),punctuation:Ke.punctuation,register:Tn.define(),special:Tn.define(),string:Ke.string,unassigned:Tn.define()},a0e=kA.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":HC.includes(e)?"data-directive":WC.includes(e)?"instruction":Gv.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:ji}),l0e=Phe(iw.define([{tag:ji.character,class:"text-orange-300"},{tag:ji.comment,class:"text-stone-500 italic"},{tag:ji["data-directive"],class:"text-rose-400/80"},{tag:ji.instruction,class:"text-mantis-400"},{tag:ji.number,class:"text-cyan-300/60"},{tag:ji.operator,class:"text-rose-300"},{tag:ji.offset,class:"text-rose-400/80 italic"},{tag:ji["ptr-size"],class:"text-rose-400/80 italic"},{tag:ji.punctuation,class:"text-stone-600"},{tag:ji.register,class:"text-emerald-400/80"},{tag:ji.special,class:"text-yellow-300/80"},{tag:ji.string,class:"text-orange-300"},{tag:ji.unassigned,class:"text-rose-400/80"}])),c0e=Mme(t=>{const e=t.state.doc.toString(),n=FL(e);if(n.success)return M.set(o_,0),[];const i=n,r=Bt().language,s=i.errors.map(o=>{var c,u;const a=((c=o.position)==null?void 0:c.start)??0,l=((u=o.position)==null?void 0:u.end)??e.length;return{message:o.translate(r),severity:"error",from:a,to:l}});return M.set(o_,s.length),s},{delay:200});function u0e(){return new she(a0e,[l0e,c0e])}function C7({className:t}){const[e,n]=b.useState(),i=QJ(),r=b.useCallback(s=>{s&&n(s)},[]);return b.useEffect(()=>{if(e)return window.codemirror=new Oe({state:mt.create({doc:k7()||"",extensions:[mt.tabSize.of(2),x6.of(mt.readOnly.of(!1)),n0e,mne(),wne,yne(),Ute(),epe(),Ote(),Oe.domEventHandlers({drop:s=>s.preventDefault()}),mt.allowMultipleSelections.of(!0),qte(),Oe.updateListener.of(s=>{s.selectionSet}),f6.of([{key:"Escape",run:s=>(s.dispatch({selection:se.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?n_(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...Bme]),u0e()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),h.jsxs("div",{className:te("flex flex-col rounded-lg border border-stone-700 bg-gradient-to-br from-stone-900 to-stone-800 shadow-xl",t),children:[h.jsx("div",{ref:r,className:"grow overflow-auto rounded-t-lg font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),h.jsx(o0e,{})]})}const E7=b.memo(()=>{const t=FC(),e=bq("(max-width: 640px)");DF(),LF();const n=b.useMemo(()=>({}),[]);return h.jsxs("div",{"data-testid":"app-container",className:"flex h-screen w-screen flex-col bg-black text-white",lang:t,style:n,children:[h.jsx($F,{}),h.jsx(TF,{"data-testid":"header"}),e?h.jsx(N7,{}):h.jsx(A7,{}),h.jsx(LL,{"data-testid":"footer"}),h.jsx(zF,{}),h.jsx(jF,{})]})});E7.displayName="App";const A7=b.memo(()=>{const[t]=hm(Jb);return h.jsxs(ND,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[h.jsx(N0,{id:"panel-editor",order:1,minSize:30,defaultSize:50,tagName:"section",className:"rounded-lg border border-stone-600 bg-black","data-testid":"panel-editor",children:h.jsx(C7,{className:"size-full"})}),h.jsx(JS,{className:"w-2"}),h.jsx(N0,{id:"panel-computer",order:2,minSize:20,defaultSize:50,tagName:"section",className:"computer-background rounded-lg border border-stone-600","data-testid":"panel-computer",children:h.jsx(g9,{})}),t&&h.jsxs(h.Fragment,{children:[h.jsx(JS,{className:"w-2"}),h.jsx(N0,{id:"panel-settings",order:3,minSize:30,defaultSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800","data-testid":"panel-settings",children:h.jsx(MF,{className:"size-full"})})]})]})});A7.displayName="DesktopLayout";const N7=b.memo(()=>{const t=nn(),[e,n]=b.useState("editor"),[i,r]=hm(Jb),s=st(Hn),o=b.useMemo(()=>"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),a=b.useMemo(()=>i?"settings":e,[i,e]),l=b.useCallback(u=>{i&&r(!1),n(u)},[i,r]),c=b.useMemo(()=>{switch(a){case"editor":return"Editor";case"computer":return"Computadora";case"settings":return"Configuración";default:return""}},[a]);return h.jsx(Qj,{value:a,onValueChange:l,asChild:!0,children:h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"sticky top-0 z-30 w-full border-b border-stone-700 bg-stone-900 px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-500",children:"Pestaña:"}),h.jsx("span",{className:"text-sm font-medium text-white",children:c})]}),a==="computer"&&h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-xs text-stone-500",children:"Instrucción actual:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:o||h.jsx("span",{className:"italic text-stone-400",children:"Sin instrucción"})})]})]})}),h.jsx(A0,{value:"editor",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-black data-[state=inactive]:hidden","data-testid":"panel-editor",children:h.jsx(C7,{className:"size-full"})})}),h.jsx(A0,{value:"computer",asChild:!0,children:h.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-computer",children:h.jsx(g9,{})})}),h.jsx(A0,{value:"settings",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-settings",children:h.jsx(MF,{className:"size-full"})})}),h.jsx("div",{className:"border-t border-stone-700 bg-stone-900 p-2",children:h.jsxs(tD,{className:"grid grid-cols-3 gap-2",children:[h.jsxs(E0,{value:"editor",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--file-terminal] mb-1 size-5"}),t("control.tabs.editor")]}),h.jsxs(E0,{value:"computer",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--computer] mb-1 size-5"}),t("control.tabs.computer")]}),h.jsxs(E0,{value:"settings",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--settings] mb-1 size-5"}),"Configuración"]})]})})]})})});N7.displayName="MobileLayout";var WA="ToastProvider",[GA,d0e,f0e]=dm("Toast"),[P7,kve]=Ms("Toast",[f0e]),[h0e,uw]=P7(WA),M7=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=b.useState(null),[c,u]=b.useState(0),d=b.useRef(!1),f=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${WA}\`. Expected non-empty \`string\`.`),h.jsx(GA.Provider,{scope:e,children:h.jsx(h0e,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>u(p=>p+1),[]),onToastRemove:b.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};M7.displayName=WA;var R7="ToastViewport",p0e=["F8"],a_="toast.viewportPause",l_="toast.viewportResume",T7=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=p0e,label:r="Notifications ({hotkey})",...s}=t,o=uw(R7,n),a=d0e(n),l=b.useRef(null),c=b.useRef(null),u=b.useRef(null),d=b.useRef(null),f=ht(e,d,o.onViewportChange),p=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;b.useEffect(()=>{const v=y=>{var x;i.length!==0&&i.every(S=>y[S]||y.code===S)&&((x=d.current)==null||x.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[i]),b.useEffect(()=>{const v=l.current,y=d.current;if(g&&v&&y){const w=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(a_);y.dispatchEvent(E),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(l_);y.dispatchEvent(E),o.isClosePausedRef.current=!1}},S=E=>{!v.contains(E.relatedTarget)&&x()},_=()=>{v.contains(document.activeElement)||x()};return v.addEventListener("focusin",w),v.addEventListener("focusout",S),v.addEventListener("pointermove",w),v.addEventListener("pointerleave",_),window.addEventListener("blur",w),window.addEventListener("focus",x),()=>{v.removeEventListener("focusin",w),v.removeEventListener("focusout",S),v.removeEventListener("pointermove",w),v.removeEventListener("pointerleave",_),window.removeEventListener("blur",w),window.removeEventListener("focus",x)}}},[g,o.isClosePausedRef]);const m=b.useCallback(({tabbingDirection:v})=>{const w=a().map(x=>{const S=x.ref.current,_=[S,...A0e(S)];return v==="forwards"?_:_.reverse()});return(v==="forwards"?w.reverse():w).flat()},[a]);return b.useEffect(()=>{const v=d.current;if(v){const y=w=>{var _,E,C;const x=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!x){const N=document.activeElement,R=w.shiftKey;if(w.target===v&&R){(_=c.current)==null||_.focus();return}const j=m({tabbingDirection:R?"backwards":"forwards"}),q=j.findIndex($=>$===N);S1(j.slice(q+1))?w.preventDefault():R?(E=c.current)==null||E.focus():(C=u.current)==null||C.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[a,m]),h.jsxs(Voe,{ref:l,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&h.jsx(c_,{ref:c,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"forwards"});S1(v)}}),h.jsx(GA.Slot,{scope:n,children:h.jsx(Ye.ol,{tabIndex:-1,...s,ref:f})}),g&&h.jsx(c_,{ref:u,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"backwards"});S1(v)}})]})});T7.displayName=R7;var O7="ToastFocusProxy",c_=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=uw(O7,n);return h.jsx(sA,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&i()}})});c_.displayName=O7;var $m="Toast",m0e="toast.swipeStart",g0e="toast.swipeMove",v0e="toast.swipeCancel",y0e="toast.swipeEnd",I7=b.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a,l]=Sl({prop:i,defaultProp:r??!0,onChange:s,caller:$m});return h.jsx(fa,{present:n||a,children:h.jsx(x0e,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:_r(t.onPause),onResume:_r(t.onResume),onSwipeStart:be(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:be(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:be(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:be(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});I7.displayName=$m;var[b0e,w0e]=P7($m,{onClose(){}}),x0e=b.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...g}=t,m=uw($m,n),[v,y]=b.useState(null),w=ht(e,$=>y($)),x=b.useRef(null),S=b.useRef(null),_=r||m.duration,E=b.useRef(0),C=b.useRef(_),N=b.useRef(0),{onToastAdd:R,onToastRemove:O}=m,D=_r(()=>{var K;(v==null?void 0:v.contains(document.activeElement))&&((K=m.viewport)==null||K.focus()),o()}),j=b.useCallback($=>{!$||$===1/0||(window.clearTimeout(N.current),E.current=new Date().getTime(),N.current=window.setTimeout(D,$))},[D]);b.useEffect(()=>{const $=m.viewport;if($){const K=()=>{j(C.current),c==null||c()},J=()=>{const Q=new Date().getTime()-E.current;C.current=C.current-Q,window.clearTimeout(N.current),l==null||l()};return $.addEventListener(a_,J),$.addEventListener(l_,K),()=>{$.removeEventListener(a_,J),$.removeEventListener(l_,K)}}},[m.viewport,_,l,c,j]),b.useEffect(()=>{s&&!m.isClosePausedRef.current&&j(_)},[s,_,m.isClosePausedRef,j]),b.useEffect(()=>(R(),()=>O()),[R,O]);const q=b.useMemo(()=>v?z7(v):null,[v]);return m.viewport?h.jsxs(h.Fragment,{children:[q&&h.jsx(S0e,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:q}),h.jsx(b0e,{scope:n,onClose:D,children:zl.createPortal(h.jsx(GA.ItemSlot,{scope:n,children:h.jsx(Uoe,{asChild:!0,onEscapeKeyDown:be(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||D(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(Ye.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:be(t.onKeyDown,$=>{$.key==="Escape"&&(a==null||a($.nativeEvent),$.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:be(t.onPointerDown,$=>{$.button===0&&(x.current={x:$.clientX,y:$.clientY})}),onPointerMove:be(t.onPointerMove,$=>{if(!x.current)return;const K=$.clientX-x.current.x,J=$.clientY-x.current.y,Q=!!S.current,V=["left","right"].includes(m.swipeDirection),F=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,re=V?F(0,K):0,pe=V?0:F(0,J),Z=$.pointerType==="touch"?10:2,ce={x:re,y:pe},B={originalEvent:$,delta:ce};Q?(S.current=ce,u0(g0e,d,B,{discrete:!1})):aO(ce,m.swipeDirection,Z)?(S.current=ce,u0(m0e,u,B,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(K)>Z||Math.abs(J)>Z)&&(x.current=null)}),onPointerUp:be(t.onPointerUp,$=>{const K=S.current,J=$.target;if(J.hasPointerCapture($.pointerId)&&J.releasePointerCapture($.pointerId),S.current=null,x.current=null,K){const Q=$.currentTarget,V={originalEvent:$,delta:K};aO(K,m.swipeDirection,m.swipeThreshold)?u0(y0e,p,V,{discrete:!0}):u0(v0e,f,V,{discrete:!0}),Q.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),S0e=t=>{const{__scopeToast:e,children:n,...i}=t,r=uw($m,e),[s,o]=b.useState(!1),[a,l]=b.useState(!1);return C0e(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:h.jsx(Pm,{asChild:!0,children:h.jsx(sA,{...i,children:s&&h.jsxs(h.Fragment,{children:[r.label," ",n]})})})},k0e="ToastTitle",j7=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(Ye.div,{...i,ref:e})});j7.displayName=k0e;var _0e="ToastDescription",D7=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(Ye.div,{...i,ref:e})});D7.displayName=_0e;var L7="ToastAction",$7=b.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?h.jsx(F7,{altText:n,asChild:!0,children:h.jsx(KA,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${L7}\`. Expected non-empty \`string\`.`),null)});$7.displayName=L7;var B7="ToastClose",KA=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=w0e(B7,n);return h.jsx(F7,{asChild:!0,children:h.jsx(Ye.button,{type:"button",...i,ref:e,onClick:be(t.onClick,r.onClose)})})});KA.displayName=B7;var F7=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return h.jsx(Ye.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function z7(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),E0e(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...z7(i))}}),e}function u0(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?yC(r,s):r.dispatchEvent(s)}var aO=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function C0e(t=()=>{}){const e=_r(t);ni(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function E0e(t){return t.nodeType===t.ELEMENT_NODE}function A0e(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function S1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var N0e=M7,U7=T7,V7=I7,H7=j7,W7=D7,G7=$7,K7=KA;const P0e=N0e,q7=b.forwardRef(({className:t,...e},n)=>h.jsx(U7,{ref:n,className:te("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));q7.displayName=U7.displayName;const Y7=b.forwardRef(({className:t,variant:e="default",...n},i)=>h.jsx(V7,{ref:i,"data-variant":e,className:te("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"border border-red-600 bg-red-900 text-red-50",e==="info"&&"border border-green-500 bg-stone-900 text-white",t),...n}));Y7.displayName=V7.displayName;const M0e=b.forwardRef(({className:t,...e},n)=>h.jsx(G7,{ref:n,className:te("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));M0e.displayName=G7.displayName;const X7=b.forwardRef(({className:t,...e},n)=>h.jsx(K7,{ref:n,className:te("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100",t),"toast-close":"",...e,children:h.jsx("span",{className:"block size-4",children:"✕"})}));X7.displayName=K7.displayName;const J7=b.forwardRef(({className:t,...e},n)=>h.jsx(H7,{ref:n,className:te("text-sm font-semibold",t),...e}));J7.displayName=H7.displayName;const Z7=b.forwardRef(({className:t,...e},n)=>h.jsx(W7,{ref:n,className:te("text-sm opacity-90",t),...e}));Z7.displayName=W7.displayName;function R0e(){const{toastList:t}=Ane();return h.jsxs(P0e,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>h.jsxs(Y7,{...o,variant:s,children:[h.jsxs("div",{className:"grid gap-1",children:[n&&h.jsx(J7,{children:n}),i&&h.jsx(Z7,{children:i})]}),r,h.jsx(X7,{})]},e)),h.jsx(q7,{})]})}window.codemirror=null;function T0e(){const{addNotification:t}=HE();return window.VonSimAddNotification=t,null}function Q7(t,e){const n={type:"error",title:"Error inesperado",message:e?`${t}
${e}`:t};function i(r=10){window.VonSimAddNotification?window.VonSimAddNotification(n):r>0&&setTimeout(()=>i(r-1),100)}i()}window.onerror=function(t,e,n,i,r){return Q7(typeof t=="string"?t:"Error de JavaScript",r&&r.stack?r.stack:void 0),!1};window.onunhandledrejection=function(t){const e=t.reason instanceof Error?t.reason.stack||t.reason.message:String(t.reason);return Q7("Promesa no manejada",e),!1};const O0e=Hj(document.getElementById("root"));O0e.render(h.jsx(b.StrictMode,{children:h.jsx(XH,{client:_6,children:h.jsxs(Ioe,{children:[h.jsx(T0e,{}),h.jsx(bJ,{children:h.jsx(E7,{})}),h.jsx(R0e,{})]})})}));
