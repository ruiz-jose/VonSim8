var h4=Object.defineProperty;var p4=(t,e,n)=>e in t?h4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var le=(t,e,n)=>(p4(t,typeof e!="symbol"?e+"":e,n),n),ay=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var A=(t,e,n)=>(ay(t,e,"read from private field"),n?n.call(t):e.get(t)),Oe=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Z=(t,e,n,r)=>(ay(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var vt=(t,e,n)=>(ay(t,e,"access private method"),n);function m4(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var g4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var j$={exports:{}},W0={},B$={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ih=Symbol.for("react.element"),v4=Symbol.for("react.portal"),y4=Symbol.for("react.fragment"),w4=Symbol.for("react.strict_mode"),b4=Symbol.for("react.profiler"),x4=Symbol.for("react.provider"),S4=Symbol.for("react.context"),k4=Symbol.for("react.forward_ref"),_4=Symbol.for("react.suspense"),C4=Symbol.for("react.memo"),E4=Symbol.for("react.lazy"),$C=Symbol.iterator;function A4(t){return t===null||typeof t!="object"?null:(t=$C&&t[$C]||t["@@iterator"],typeof t=="function"?t:null)}var z$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U$=Object.assign,V$={};function Zu(t,e,n){this.props=t,this.context=e,this.refs=V$,this.updater=n||z$}Zu.prototype.isReactComponent={};Zu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function H$(){}H$.prototype=Zu.prototype;function sS(t,e,n){this.props=t,this.context=e,this.refs=V$,this.updater=n||z$}var oS=sS.prototype=new H$;oS.constructor=sS;U$(oS,Zu.prototype);oS.isPureReactComponent=!0;var OC=Array.isArray,W$=Object.prototype.hasOwnProperty,aS={current:null},G$={key:!0,ref:!0,__self:!0,__source:!0};function K$(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)W$.call(e,r)&&!G$.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ih,type:t,key:s,ref:o,props:i,_owner:aS.current}}function P4(t,e){return{$$typeof:Ih,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lS(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ih}function T4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var NC=/\/+/g;function ly(t,e){return typeof t=="object"&&t!==null&&t.key!=null?T4(""+t.key):e.toString(36)}function Cm(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ih:case v4:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ly(o,0):r,OC(i)?(n="",t!=null&&(n=t.replace(NC,"$&/")+"/"),Cm(i,e,n,"",function(c){return c})):i!=null&&(lS(i)&&(i=P4(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(NC,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",OC(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ly(s,a);o+=Cm(s,e,n,l,i)}else if(l=A4(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ly(s,a++),o+=Cm(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function up(t,e,n){if(t==null)return t;var r=[],i=0;return Cm(t,r,"","",function(s){return e.call(n,s,i++)}),r}function $4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cr={current:null},Em={transition:null},O4={ReactCurrentDispatcher:cr,ReactCurrentBatchConfig:Em,ReactCurrentOwner:aS};Ze.Children={map:up,forEach:function(t,e,n){up(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return up(t,function(){e++}),e},toArray:function(t){return up(t,function(e){return e})||[]},only:function(t){if(!lS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ze.Component=Zu;Ze.Fragment=y4;Ze.Profiler=b4;Ze.PureComponent=sS;Ze.StrictMode=w4;Ze.Suspense=_4;Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O4;Ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=U$({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=aS.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)W$.call(e,l)&&!G$.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ih,type:t.type,key:i,ref:s,props:r,_owner:o}};Ze.createContext=function(t){return t={$$typeof:S4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:x4,_context:t},t.Consumer=t};Ze.createElement=K$;Ze.createFactory=function(t){var e=K$.bind(null,t);return e.type=t,e};Ze.createRef=function(){return{current:null}};Ze.forwardRef=function(t){return{$$typeof:k4,render:t}};Ze.isValidElement=lS;Ze.lazy=function(t){return{$$typeof:E4,_payload:{_status:-1,_result:t},_init:$4}};Ze.memo=function(t,e){return{$$typeof:C4,type:t,compare:e===void 0?null:e}};Ze.startTransition=function(t){var e=Em.transition;Em.transition={};try{t()}finally{Em.transition=e}};Ze.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ze.useCallback=function(t,e){return cr.current.useCallback(t,e)};Ze.useContext=function(t){return cr.current.useContext(t)};Ze.useDebugValue=function(){};Ze.useDeferredValue=function(t){return cr.current.useDeferredValue(t)};Ze.useEffect=function(t,e){return cr.current.useEffect(t,e)};Ze.useId=function(){return cr.current.useId()};Ze.useImperativeHandle=function(t,e,n){return cr.current.useImperativeHandle(t,e,n)};Ze.useInsertionEffect=function(t,e){return cr.current.useInsertionEffect(t,e)};Ze.useLayoutEffect=function(t,e){return cr.current.useLayoutEffect(t,e)};Ze.useMemo=function(t,e){return cr.current.useMemo(t,e)};Ze.useReducer=function(t,e,n){return cr.current.useReducer(t,e,n)};Ze.useRef=function(t){return cr.current.useRef(t)};Ze.useState=function(t){return cr.current.useState(t)};Ze.useSyncExternalStore=function(t,e,n){return cr.current.useSyncExternalStore(t,e,n)};Ze.useTransition=function(){return cr.current.useTransition()};Ze.version="18.2.0";B$.exports=Ze;var g=B$.exports;const Bt=sc(g),cS=m4({__proto__:null,default:Bt},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N4=g,M4=Symbol.for("react.element"),R4=Symbol.for("react.fragment"),D4=Object.prototype.hasOwnProperty,I4=N4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L4={key:!0,ref:!0,__self:!0,__source:!0};function X$(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)D4.call(e,r)&&!L4.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:M4,type:t,key:s,ref:o,props:i,_owner:I4.current}}W0.Fragment=R4;W0.jsx=X$;W0.jsxs=X$;j$.exports=W0;var b=j$.exports;function MC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Re(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MC(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ib(t){return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ib(t)}function Qt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function en(t,e,n){return e&&RC(t.prototype,e),n&&RC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ce(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y$(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sb(t,e)}function hg(t){return hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hg(t)}function sb(t,e){return sb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},sb(t,e)}function F4(t,e){if(t==null)return{};var n,r,i=function(o,a){if(o==null)return{};var l,c,u={},d=Object.keys(o);for(c=0;c<d.length;c++)l=d[c],a.indexOf(l)>=0||(u[l]=o[l]);return u}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function j4(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function q$(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=hg(t);if(e){var i=hg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return j4(this,n)}}function Vi(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,a=[],l=!0,c=!1;try{for(i=i.call(n);!(l=(s=i.next()).done)&&(a.push(s.value),!r||a.length!==r);l=!0);}catch(u){c=!0,o=u}finally{try{l||i.return==null||i.return()}finally{if(c)throw o}}return a}}(t,e)||uS(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ob(t){return function(e){if(Array.isArray(e))return ab(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||uS(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function uS(t,e){if(t){if(typeof t=="string")return ab(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ab(t,e):void 0}}function ab(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ll(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=uS(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw s}}}}var Fl={DEBUG:!1,LIB_VERSION:"1.97.1"},B4=Array.isArray,J$=Object.prototype,Z$=J$.hasOwnProperty,Lh=J$.toString,yn=B4||function(t){return Lh.call(t)==="[object Array]"},DC=function(t){return Lh.call(t)==="[object Uint8Array]"},qi=function(t){return typeof t=="function"},wa=function(t){return t===Object(t)&&!yn(t)},z4=function(t){if(wa(t)){for(var e in t)if(Z$.call(t,e))return!1;return!0}return!1},rt=function(t){return t===void 0},Zr=function(t){return Lh.call(t)=="[object String]"},_i=function(t){return t===null},lo=function(t){return Lh.call(t)=="[object Number]"},lb=function(t){return Lh.call(t)==="[object Boolean]"},Q$=Array.prototype,IC=Q$.forEach,LC=Q$.indexOf,G=typeof window<"u"?window:void 0,FC=G==null?void 0:G.navigator,Ne=G==null?void 0:G.document,Yt=FC==null?void 0:FC.userAgent,Kn=G??{},jC="[PostHog.js]",pe={_log:function(t){if(G&&(Fl.DEBUG||Kn.POSTHOG_DEBUG)&&!rt(G.console)&&G.console){for(var e=("__rrweb_original__"in G.console[t])?G.console[t].__rrweb_original__:G.console[t],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.apply(void 0,[jC].concat(r))}},info:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];pe._log.apply(pe,["log"].concat(e))},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];pe._log.apply(pe,["warn"].concat(e))},error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];pe._log.apply(pe,["error"].concat(e))},critical:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=console).error.apply(t,[jC].concat(n))},uninitializedWarning:function(t){pe.error("You must initialize PostHog before calling ".concat(t))}},dS={},pg=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function eu(t,e,n){if(yn(t)){if(IC&&t.forEach===IC)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r)===dS)return}}}function xt(t,e,n){if(!_i(t)&&!rt(t)){if(yn(t))return eu(t,e,n);for(var r in t)if(Z$.call(t,r)&&e.call(n,t[r],r)===dS)return}}var Cn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return eu(n,function(i){for(var s in i)i[s]!==void 0&&(t[s]=i[s])}),t};function ut(t,e){return t.indexOf(e)!==-1}function Am(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r}var eO=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},BC=function(t){try{return t()}catch{return}},tO=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(this,n)}catch(i){pe.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),pe.critical(i)}}},cb=function(t){var e={};return xt(t,function(n,r){Zr(n)&&n.length>0&&(e[r]=n)}),e},U4=["$performance_raw"];function V4(t,e){return n=t,r=function(s,o){return o&&U4.indexOf(o)>-1?s:Zr(s)&&!_i(e)?s.slice(0,e):s},i=new Set,function s(o,a){return o!==Object(o)?r?r(o,a):o:i.has(o)?void 0:(i.add(o),yn(o)?(l=[],eu(o,function(c){l.push(s(c))})):(l={},xt(o,function(c,u){i.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,r,i}function fS(t){var e,n,r,i,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,c="",u=[];if(!t)return t;t=H4(t);do e=(s=t.charCodeAt(a++)<<16|t.charCodeAt(a++)<<8|t.charCodeAt(a++))>>18&63,n=s>>12&63,r=s>>6&63,i=63&s,u[l++]=o.charAt(e)+o.charAt(n)+o.charAt(r)+o.charAt(i);while(a<t.length);switch(c=u.join(""),t.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}var H4=function(t){var e,n,r,i,s="";for(e=n=0,r=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,i=0;i<r;i++){var o=t.charCodeAt(i),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),_i(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=i+1)}return n>e&&(s+=t.substring(e,t.length)),s},nf=function(){function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},function(e,n,r,i,s){if(e)if(e.addEventListener&&!i)e.addEventListener(n,r,!!s);else{var o="on"+n,a=e[o];e[o]=function(l,c,u){return function(d){if(d=d||t(G==null?void 0:G.event)){var f,h=!0;qi(u)&&(f=u(d));var p=c.call(l,d);return f!==!1&&p!==!1||(h=!1),h}}}(e,r,a)}else pe.error("No valid element provided to register_event")}}();function rf(t,e){var n=function(){if(!Ne)return e("document not found");var r=Ne.createElement("script");r.type="text/javascript",r.src=t,r.onload=function(o){return e(void 0,o)},r.onerror=function(o){return e(o)};var i,s=Ne.querySelectorAll("body > script");s.length>0?(i=s[0].parentNode)===null||i===void 0||i.insertBefore(r,s[0]):Ne.body.appendChild(r)};Ne!=null&&Ne.body?n():Ne==null||Ne.addEventListener("DOMContentLoaded",n)}function hS(t){return t?pg(t).split(/\s+/):[]}function mg(t){var e="";switch(ib(t.className)){case"string":e=t.className;break;case"object":e=("baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return hS(e)}function gg(t){var e="";return Pm(t)&&!rO(t)&&t.childNodes&&t.childNodes.length&&xt(t.childNodes,function(n){nO(n)&&n.textContent&&(e+=pg(n.textContent).split(/(\s+)/).filter(Oc).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))}),pg(e)}function zC(t){return!!t&&t.nodeType===1}function $l(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function nO(t){return!!t&&t.nodeType===3}function UC(t){return!!t&&t.nodeType===11}var cy=["a","button","form","input","select","textarea","label"];function Pm(t){for(var e=t;e.parentNode&&!$l(e,"body");e=e.parentNode){var n=mg(e);if(ut(n,"ph-sensitive")||ut(n,"ph-no-capture"))return!1}if(ut(mg(t),"ph-include"))return!0;var r=t.type||"";if(Zr(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=t.name||t.id||"";return!(Zr(i)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))}function rO(t){return!!($l(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||$l(t,"select")||$l(t,"textarea")||t.getAttribute("contenteditable")==="true")}function Oc(t){return!(_i(t)||rt(t)||Zr(t)&&(t=pg(t),/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((t||"").replace(/[- ]/g,""))||/(^\d{3}-?\d{2}-?\d{4}$)/.test(t)))}function VC(t){var e=gg(t);return Oc(e="".concat(e," ").concat(iO(t)).trim())?e:""}function iO(t){var e="";return t&&t.childNodes&&t.childNodes.length&&xt(t.childNodes,function(n){var r;if(n&&((r=n.tagName)===null||r===void 0?void 0:r.toLowerCase())==="span")try{var i=gg(n);e="".concat(e," ").concat(i).trim(),n.childNodes&&n.childNodes.length&&(e="".concat(e," ").concat(iO(n)).trim())}catch(s){pe.error(s)}}),e}function W4(t){return function(e){var n=e.map(function(r){var i,s,o="";if(r.tag_name&&(o+=r.tag_name),r.attr_class){r.attr_class.sort();var a,l=Ll(r.attr_class);try{for(l.s();!(a=l.n()).done;){var c=a.value;o+=".".concat(c.replace(/"/g,""))}}catch(f){l.e(f)}finally{l.f()}}var u=Re(Re(Re(Re({},r.text?{text:r.text}:{}),{},{"nth-child":(i=r.nth_child)!==null&&i!==void 0?i:0,"nth-of-type":(s=r.nth_of_type)!==null&&s!==void 0?s:0},r.href?{href:r.href}:{}),r.attr_id?{attr_id:r.attr_id}:{}),r.attributes),d={};return Am(u).sort(function(f,h){var p=Vi(f,1)[0],m=Vi(h,1)[0];return p.localeCompare(m)}).forEach(function(f){var h=Vi(f,2),p=h[0],m=h[1];return d[HC(p.toString())]=HC(m.toString())}),o+=":",o+=Am(u).map(function(f){var h=Vi(f,2),p=h[0],m=h[1];return"".concat(p,'="').concat(m,'"')}).join("")});return n.join(";")}(function(e){return e.map(function(n){var r,i,s={text:(r=n.$el_text)===null||r===void 0?void 0:r.slice(0,400),tag_name:n.tag_name,href:(i=n.attr__href)===null||i===void 0?void 0:i.slice(0,2048),attr_class:G4(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Am(n).filter(function(o){return Vi(o,1)[0].indexOf("attr__")===0}).forEach(function(o){var a=Vi(o,2),l=a[0],c=a[1];return s.attributes[l]=c}),s})}(t))}function HC(t){return t.replace(/"|\\"/g,'\\"')}function G4(t){var e=t.attr__class;return e?yn(e)?e:hS(e):void 0}var K4=function(){function t(e){Qt(this,t),this.clicks=[],this.enabled=e}return en(t,[{key:"isRageClick",value:function(e,n,r){if(!this.enabled)return!1;var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(e-i.x)+Math.abs(n-i.y)<30&&r-i.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:r}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:r}];return!1}}]),t}(),sO="$people_distinct_id",Tm="__alias",Bd="__timers",WC="$autocapture_disabled_server_side",ub="$session_recording_enabled_server_side",GC="$console_log_recording_enabled_server_side",KC="$session_recording_recorder_version_server_side",XC="$session_recording_network_payload_capture",vg="$sesid",$m="$session_is_sampled",Nc="$enabled_feature_flags",db="$early_access_features",Mc="$stored_person_properties",Go="$stored_group_properties",fb="$surveys",yg="$flag_call_reported",hb="$user_state",pb="$posthog_quota_limited",mb="$client_session_props",X4=[sO,Tm,"__cmpns",Bd,ub,vg,Nc,hb,pb,db,Go,Mc,fb,yg,mb];function uy(t,e){return e.length>t?e.slice(0,t)+"...":e}var Qo={_initializedTokens:[],_isDisabledServerSide:null,_isAutocaptureEnabled:!1,_setIsAutocaptureEnabled:function(t){var e,n=_i(this._isDisabledServerSide)?!((e=t.persistence)===null||e===void 0||!e.props[WC]):this._isDisabledServerSide,r=!!t.config.autocapture;this._isAutocaptureEnabled=r&&!n},_previousElementSibling:function(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!zC(e));return e},_getAugmentPropertiesFromElement:function(t){if(!Pm(t))return{};var e={};return xt(t.attributes,function(n){if(n.name.indexOf("data-ph-capture-attribute")===0){var r=n.name.replace("data-ph-capture-attribute-",""),i=n.value;r&&i&&Oc(i)&&(e[r]=i)}}),e},_getPropertiesFromElement:function(t,e,n){var r,i=t.tagName.toLowerCase(),s={tag_name:i};cy.indexOf(i)>-1&&!n&&(i.toLowerCase()==="a"||i.toLowerCase()==="button"?s.$el_text=uy(1024,VC(t)):s.$el_text=uy(1024,gg(t)));var o=mg(t);o.length>0&&(s.classes=o.filter(function(d){return d!==""}));var a=(r=this.config)===null||r===void 0?void 0:r.element_attribute_ignorelist;xt(t.attributes,function(d){var f;if((!rO(t)||["name","id","class"].indexOf(d.name)!==-1)&&(a==null||!a.includes(d.name))&&!e&&Oc(d.value)&&(f=d.name,!Zr(f)||f.substring(0,10)!=="_ngcontent"&&f.substring(0,7)!=="_nghost")){var h=d.value;d.name==="class"&&(h=hS(h).join(" ")),s["attr__"+d.name]=uy(1024,h)}});for(var l=1,c=1,u=t;u=this._previousElementSibling(u);)l++,u.tagName===t.tagName&&c++;return s.nth_child=l,s.nth_of_type=c,s},_getDefaultProperties:function(t){return{$event_type:t,$ce_version:1}},_extractCustomPropertyValue:function(t){var e=[];return xt(Ne==null?void 0:Ne.querySelectorAll(t.css_selector),function(n){var r;["input","select"].indexOf(n.tagName.toLowerCase())>-1?r=n.value:n.textContent&&(r=n.textContent),Oc(r)&&e.push(r)}),e.join(", ")},_getCustomProperties:function(t){var e=this,n={};return xt(this._customProperties,function(r){xt(r.event_selectors,function(i){xt(Ne==null?void 0:Ne.querySelectorAll(i),function(s){ut(t,s)&&Pm(s)&&(n[r.name]=e._extractCustomPropertyValue(r))})})}),n},_getEventTarget:function(t){return rt(t.target)?t.srcElement||null:(e=t.target)!==null&&e!==void 0&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e},_captureEvent:function(t,e){var n,r=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"$autocapture",s=this._getEventTarget(t);if(nO(s)&&(s=s.parentNode||null),i==="$autocapture"&&t.type==="click"&&t instanceof MouseEvent&&(n=this.rageclicks)!==null&&n!==void 0&&n.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this._captureEvent(t,e,"$rageclick"),s&&function(m,w){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!G||!m||$l(m,"html")||!zC(m))return!1;if(v!=null&&v.url_allowlist){var y=G.location.href,x=v.url_allowlist;if(x&&!x.some(function($){return y.match($)}))return!1}if(v!=null&&v.dom_event_allowlist){var _=v.dom_event_allowlist;if(_&&!_.some(function($){return w.type===$}))return!1}if(v!=null&&v.element_allowlist){var k=v.element_allowlist;if(k&&!k.some(function($){return m.tagName.toLowerCase()===$}))return!1}if(v!=null&&v.css_selector_allowlist){var P=v.css_selector_allowlist;if(P&&!P.some(function($){return m.matches($)}))return!1}for(var E=!1,C=[m],N=!0,M=m;M.parentNode&&!$l(M,"body");)if(UC(M.parentNode))C.push(M.parentNode.host),M=M.parentNode.host;else{if(!(N=M.parentNode||!1))break;if(cy.indexOf(N.tagName.toLowerCase())>-1)E=!0;else{var R=G.getComputedStyle(N);R&&R.getPropertyValue("cursor")==="pointer"&&(E=!0)}C.push(N),M=N}var L=G.getComputedStyle(m);if(L&&L.getPropertyValue("cursor")==="pointer"&&w.type==="click")return!0;var H=m.tagName.toLowerCase();switch(H){case"html":return!1;case"form":return w.type==="submit";case"input":case"select":case"textarea":return w.type==="change"||w.type==="click";default:return E?w.type==="click":w.type==="click"&&(cy.indexOf(H)>-1||m.getAttribute("contenteditable")==="true")}}(s,t,this.config)){for(var o,a,l=[s],c=s;c.parentNode&&!$l(c,"body");)UC(c.parentNode)?(l.push(c.parentNode.host),c=c.parentNode.host):(l.push(c.parentNode),c=c.parentNode);var u,d=[],f={},h=!1;if(xt(l,function(m){var w=Pm(m);m.tagName.toLowerCase()==="a"&&(u=m.getAttribute("href"),u=w&&Oc(u)&&u),ut(mg(m),"ph-no-capture")&&(h=!0),d.push(r._getPropertiesFromElement(m,e.config.mask_all_element_attributes,e.config.mask_all_text));var v=r._getAugmentPropertiesFromElement(m);Cn(f,v)}),e.config.mask_all_text||(s.tagName.toLowerCase()==="a"||s.tagName.toLowerCase()==="button"?d[0].$el_text=VC(s):d[0].$el_text=gg(s)),u&&(d[0].attr__href=u),h)return!1;var p=Cn(this._getDefaultProperties(t.type),e.elementsChainAsString?{$elements_chain:W4(d)}:{$elements:d},(o=d[0])!==null&&o!==void 0&&o.$el_text?{$el_text:(a=d[0])===null||a===void 0?void 0:a.$el_text}:{},this._getCustomProperties(l),f);return e.capture(i,p),!0}},_navigate:function(t){G&&(G.location.href=t)},_addDomEventHandlers:function(t){var e=this;if(G&&Ne){var n=function(r){r=r||(G==null?void 0:G.event),e._captureEvent(r,t)};nf(Ne,"submit",n,!1,!0),nf(Ne,"change",n,!1,!0),nf(Ne,"click",n,!1,!0)}},_customProperties:[],rageclicks:null,config:void 0,init:function(t){var e;lb(t.__autocapture)||(this.config=t.__autocapture),(e=this.config)!==null&&e!==void 0&&e.url_allowlist&&(this.config.url_allowlist=this.config.url_allowlist.map(function(n){return new RegExp(n)})),this.rageclicks=new K4(t.config.rageclick)},afterDecideResponse:function(t,e){var n=e.config.token;this._initializedTokens.indexOf(n)>-1?pe.info('autocapture already initialized for token "'+n+'"'):(e.persistence&&e.persistence.register(Ce({},WC,!!t.autocapture_opt_out)),this._isDisabledServerSide=!!t.autocapture_opt_out,this._setIsAutocaptureEnabled(e),this._initializedTokens.push(n),t&&t.config&&t.config.enable_collect_everything&&this._isAutocaptureEnabled?(t.custom_properties&&(this._customProperties=t.custom_properties),this._addDomEventHandlers(e)):e.__autocapture=!1)},enabledForProject:function(t,e,n){if(!t)return!0;e=rt(e)?10:e,n=rt(n)?10:n;for(var r=0,i=0;i<t.length;i++)r+=t.charCodeAt(i);return r%e<n},isBrowserSupported:function(){return qi(Ne==null?void 0:Ne.querySelectorAll)}};(function(t){for(var e in t)qi(t[e])&&(t[e]=t[e].bind(t))})(Qo),function(t){for(var e in t)qi(t[e])&&(t[e]=tO(t[e]))}(Qo);var dy="$active_feature_flags",dp="$override_feature_flags",YC="$feature_flag_payloads",qC=function(t){var e,n={},r=Ll(Am(t||{}));try{for(r.s();!(e=r.n()).done;){var i=Vi(e.value,2),s=i[0],o=i[1];o&&(n[s]=o)}}catch(a){r.e(a)}finally{r.f()}return n},Y4=function(){function t(e){Qt(this,t),this.instance=e,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return en(t,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var e=this.instance.get_property(Nc),n=this.instance.get_property(dp);if(!n)return e||{};for(var r=Cn({},e),i=Object.keys(n),s=0;s<i.length;s++)n[i[s]]===!1?delete r[i[s]]:r[i[s]]=n[i[s]];return this._override_warning||(pe.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:r}),this._override_warning=!0),r}},{key:"getFlagPayloads",value:function(){return this.instance.get_property(YC)||{}}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(e){this.$anon_distinct_id=e}},{key:"setReloadingPaused",value:function(e){this.reloadFeatureFlagsInAction=e}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var e=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(function(){!e.reloadFeatureFlagsInAction&&e.reloadFeatureFlagsQueued&&(e.reloadFeatureFlagsQueued=!1,e._reloadFeatureFlagsRequest())},5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var e=this;if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var n=this.instance.config.token,r=this.instance.get_property(Mc),i=this.instance.get_property(Go),s=fS(JSON.stringify({token:n,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:r,group_properties:i,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0}));this.instance._send_request(this.instance.config.api_host+"/decide/?v=3",{data:s},{method:"POST"},this.instance._prepare_callback(function(o){e.$anon_distinct_id=void 0,e.receivedFeatureFlags(o),e.setReloadingPaused(!1),e._startReloadTimer()}))}}},{key:"getFeatureFlag",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var r,i=this.getFlagVariants()[e],s="".concat(i),o=this.instance.get_property(yg)||{};return(n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(s))&&(yn(o[e])?o[e].push(s):o[e]=[s],(r=this.instance.persistence)===null||r===void 0||r.register(Ce({},yg,o)),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:i})),i}pe.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}},{key:"getFeatureFlagPayload",value:function(e){return this.getFlagPayloads()[e]}},{key:"isFeatureEnabled",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);pe.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}},{key:"addFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers.push(e)}},{key:"removeFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(function(n){return n!==e})}},{key:"receivedFeatureFlags",value:function(e){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var n=this.getFlagVariants(),r=this.getFlagPayloads();(function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=i.featureFlags,c=i.featureFlagPayloads;if(l)if(yn(l)){var u,d={};if(l)for(var f=0;f<l.length;f++)d[l[f]]=!0;s&&s.register((Ce(u={},dy,l),Ce(u,Nc,d),u))}else{var h,p=l,m=c;i.errorsWhileComputingFlags&&(p=Re(Re({},o),p),m=Re(Re({},a),m)),s&&s.register((Ce(h={},dy,Object.keys(qC(p))),Ce(h,Nc,p||{}),Ce(h,YC,m||{}),h))}})(e,this.instance.persistence,n,r),this._fireFeatureFlagsCallbacks()}}},{key:"override",value:function(e){if(!this.instance.__loaded||!this.instance.persistence)return pe.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=!1,e===!1)this.instance.persistence.unregister(dp);else if(yn(e)){for(var n={},r=0;r<e.length;r++)n[e[r]]=!0;this.instance.persistence.register(Ce({},dp,n))}else this.instance.persistence.register(Ce({},dp,e))}},{key:"onFeatureFlags",value:function(e){var n=this;if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){var r=this._prepareFeatureFlagsForCallbacks(),i=r.flags,s=r.flagVariants;e(i,s)}return function(){return n.removeFeatureFlagsHandler(e)}}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,n){var r,i,s=Ce({},"$feature_enrollment/".concat(e),n);this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:n,$set:s}),this.setPersonPropertiesForFlags(s,!1);var o=Re(Re({},this.getFlagVariants()),{},Ce({},e,n));(r=this.instance.persistence)===null||r===void 0||r.register((Ce(i={},dy,Object.keys(qC(o))),Ce(i,Nc,o),i)),this._fireFeatureFlagsCallbacks()}},{key:"getEarlyAccessFeatures",value:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.instance.get_property(db);if(i&&!r)return e(i);this.instance._send_request("".concat(this.instance.config.api_host,"/api/early_access_features/?token=").concat(this.instance.config.token),{},{method:"GET"},function(s){var o,a=s.earlyAccessFeatures;return(o=n.instance.persistence)===null||o===void 0||o.register(Ce({},db,a)),e(a)})}},{key:"_prepareFeatureFlagsForCallbacks",value:function(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(function(r){return n[r]}),flagVariants:Object.keys(n).filter(function(r){return n[r]}).reduce(function(r,i){return r[i]=n[i],r},{})}}},{key:"_fireFeatureFlagsCallbacks",value:function(){var e=this._prepareFeatureFlagsForCallbacks(),n=e.flags,r=e.flagVariants;this.featureFlagEventHandlers.forEach(function(i){return i(n,r)})}},{key:"setPersonPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this.instance.get_property(Mc)||{};this.instance.register(Ce({},Mc,Re(Re({},r),e))),n&&this.instance.reloadFeatureFlags()}},{key:"resetPersonPropertiesForFlags",value:function(){this.instance.unregister(Mc)}},{key:"setGroupPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this.instance.get_property(Go)||{};Object.keys(r).length!==0&&Object.keys(r).forEach(function(i){r[i]=Re(Re({},r[i]),e[i]),delete e[i]}),this.instance.register(Ce({},Go,Re(Re({},r),e))),n&&this.instance.reloadFeatureFlags()}},{key:"resetGroupPropertiesForFlags",value:function(e){if(e){var n=this.instance.get_property(Go)||{};this.instance.register(Ce({},Go,Re(Re({},n),{},Ce({},e,{}))))}else this.instance.unregister(Go)}}]),t}();Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return lo(t)&&isFinite(t)&&Math.floor(t)===t});var JC="0123456789abcdef",q4=function(){function t(e){if(Qt(this,t),this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}return en(t,[{key:"toString",value:function(){for(var e="",n=0;n<this.bytes.length;n++)e=e+JC.charAt(this.bytes[n]>>>4)+JC.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}},{key:"clone",value:function(){return new t(this.bytes.slice(0))}},{key:"equals",value:function(e){return this.compareTo(e)===0}},{key:"compareTo",value:function(e){for(var n=0;n<16;n++){var r=this.bytes[n]-e.bytes[n];if(r!==0)return Math.sign(r)}return 0}}],[{key:"fromFieldsV7",value:function(e,n,r,i){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||e<0||n<0||r<0||i<0||e>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|r>>>24,s[9]=r>>>16,s[10]=r>>>8,s[11]=r,s[12]=i>>>24,s[13]=i>>>16,s[14]=i>>>8,s[15]=i,new t(s)}}]),t}(),J4=function(){function t(){Qt(this,t),Ce(this,"timestamp",0),Ce(this,"counter",0),Ce(this,"random",new Z4)}return en(t,[{key:"generate",value:function(){var e=this.generateOrAbort();if(rt(e)){this.timestamp=0;var n=this.generateOrAbort();if(rt(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}},{key:"generateOrAbort",value:function(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return q4.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}},{key:"resetCounter",value:function(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}]),t}(),oO=function(t){if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};G&&!rt(G.crypto)&&crypto.getRandomValues&&(oO=function(t){return crypto.getRandomValues(t)});var ZC,Z4=function(){function t(){Qt(this,t),Ce(this,"buffer",new Uint32Array(8)),Ce(this,"cursor",1/0)}return en(t,[{key:"nextUint32",value:function(){return this.cursor>=this.buffer.length&&(oO(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}]),t}(),xl=function(){return Q4().toString()},Q4=function(){return(ZC||(ZC=new J4)).generate()},e8="Thu, 01 Jan 1970 00:00:00 GMT",fd="",t8=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,n8=function(t){var e=t.match(t8);return e?e[0]:""};function r8(t,e){if(e){var n=function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne;if(fd)return fd;if(!s||["localhost","127.0.0.1"].includes(i))return"";for(var o=i.split("."),a=Math.min(o.length,8),l="dmn_chk_"+xl(),c=new RegExp("(^|;)\\s*"+l+"=1");!fd&&a--;){var u=o.slice(a).join("."),d=l+"=1;domain=."+u;s.cookie=d,c.test(s.cookie)&&(s.cookie=d+";expires="+e8,fd=u)}return fd}(t);if(!n){var r=n8(t);r!==n&&pe.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var Ls={is_supported:function(){return!!Ne},error:function(t){pe.error("cookieStore error: "+t)},get:function(t){if(Ne){try{for(var e=t+"=",n=Ne.cookie.split(";").filter(function(s){return s.length}),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return decodeURIComponent(i.substring(e.length,i.length))}}catch{}return null}},parse:function(t){var e;try{e=JSON.parse(Ls.get(t))||{}}catch{}return e},set:function(t,e,n,r,i){if(Ne)try{var s="",o="",a=r8(Ne.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}i&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&pe.warn("cookieStore warning: large cookie, len="+c.length),Ne.cookie=c,c}catch{return}},remove:function(t,e){try{Ls.set(t,"",-1,e)}catch{return}}},fy=null,nn={is_supported:function(){if(!_i(fy))return fy;var t=!0;if(rt(G))t=!1;else try{var e="__mplssupport__";nn.set(e,"xyz"),nn.get(e)!=='"xyz"'&&(t=!1),nn.remove(e)}catch{t=!1}return t||pe.error("localStorage unsupported; falling back to cookie store"),fy=t,t},error:function(t){pe.error("localStorage error: "+t)},get:function(t){try{return G==null?void 0:G.localStorage.getItem(t)}catch(e){nn.error(e)}return null},parse:function(t){try{return JSON.parse(nn.get(t))||{}}catch{}return null},set:function(t,e){try{G==null||G.localStorage.setItem(t,JSON.stringify(e))}catch(n){nn.error(n)}},remove:function(t){try{G==null||G.localStorage.removeItem(t)}catch(e){nn.error(e)}}},i8=["distinct_id",vg,$m],zd=Re(Re({},nn),{},{parse:function(t){try{var e={};try{e=Ls.parse(t)||{}}catch{}var n=Cn(e,JSON.parse(nn.get(t)||"{}"));return nn.set(t,n),n}catch{}return null},set:function(t,e,n,r,i){try{nn.set(t,e);var s={};i8.forEach(function(o){e[o]&&(s[o]=e[o])}),Object.keys(s).length&&Ls.set(t,s,n,r,i)}catch(o){nn.error(o)}},remove:function(t,e){try{G==null||G.localStorage.removeItem(t),Ls.remove(t,e)}catch(n){nn.error(n)}}}),fp={},s8={is_supported:function(){return!0},error:function(t){pe.error("memoryStorage error: "+t)},get:function(t){return fp[t]||null},parse:function(t){return fp[t]||null},set:function(t,e){fp[t]=e},remove:function(t){delete fp[t]}},ol=null,Pn={is_supported:function(){if(!_i(ol))return ol;if(ol=!0,rt(G))ol=!1;else try{var t="__support__";Pn.set(t,"xyz"),Pn.get(t)!=='"xyz"'&&(ol=!1),Pn.remove(t)}catch{ol=!1}return ol},error:function(t){pe.error("sessionStorage error: ",t)},get:function(t){try{return G==null?void 0:G.sessionStorage.getItem(t)}catch(e){Pn.error(e)}return null},parse:function(t){try{return JSON.parse(Pn.get(t))||null}catch{}return null},set:function(t,e){try{G==null||G.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Pn.error(n)}},remove:function(t){try{G==null||G.sessionStorage.removeItem(t)}catch(e){Pn.error(e)}}},o8=["localhost","127.0.0.1"],aO=function(t){var e=Ne==null?void 0:Ne.createElement("a");return rt(e)?null:(e.href=t,e)},a8=function(t,e){return!!function(n){try{new RegExp(n)}catch{return!1}return!0}(e)&&new RegExp(e).test(t)},QC=function(t,e){for(var n,r=((t.split("#")[0]||"").split("?")[1]||"").split("&"),i=0;i<r.length;i++){var s=r[i].split("=");if(s[0]===e){n=s;break}}if(!yn(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{pe.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},wg=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},an={campaignParams:function(t){var e=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gbraid","wbraid","fbclid","msclkid"].concat(t||[]),n={};return xt(e,function(r){var i=Ne?QC(Ne.URL,r):"";i.length&&(n[r]=i)}),n},searchEngine:function(){var t=Ne==null?void 0:Ne.referrer;return t?t.search("https?://(.*)google.([^/?]*)")===0?"google":t.search("https?://(.*)bing.com")===0?"bing":t.search("https?://(.*)yahoo.com")===0?"yahoo":t.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null:null},searchInfo:function(){var t=an.searchEngine(),e=t!="yahoo"?"q":"p",n={};if(!_i(t)){n.$search_engine=t;var r=Ne?QC(Ne.referrer,e):"";r.length&&(n.ph_keyword=r)}return n},browser:function(t,e,n){return e=e||"",n||ut(t," OPR/")?ut(t,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":ut(t,"IEMobile")||ut(t,"WPDesktop")?"Internet Explorer Mobile":ut(t,"SamsungBrowser/")?"Samsung Internet":ut(t,"Edge")||ut(t,"Edg/")?"Microsoft Edge":ut(t,"FBIOS")?"Facebook Mobile":ut(t,"Chrome")?"Chrome":ut(t,"CriOS")?"Chrome iOS":ut(t,"UCWEB")||ut(t,"UCBrowser")?"UC Browser":ut(t,"FxiOS")?"Firefox iOS":ut(e,"Apple")||function(r){return ut(r,"Safari")&&!ut(r,"Chrome")&&!ut(r,"Android")}(t)?ut(t,"Mobile")?"Mobile Safari":"Safari":ut(t,"Android")?"Android Mobile":ut(t,"Konqueror")||ut(t,"konqueror")?"Konqueror":ut(t,"Firefox")?"Firefox":ut(t,"MSIE")||ut(t,"Trident/")?"Internet Explorer":ut(t,"Gecko")?"Mozilla":""},browserVersion:function(t,e,n){var r={"Internet Explorer Mobile":[/rv:(\d+(\.\d+)?)/],"Microsoft Edge":[/Edge?\/(\d+(\.\d+)?)/],Chrome:[/Chrome\/(\d+(\.\d+)?)/],"Chrome iOS":[/CriOS\/(\d+(\.\d+)?)/],"UC Browser":[/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/],Safari:[/Version\/(\d+(\.\d+)?)/],"Mobile Safari":[/Version\/(\d+(\.\d+)?)/],Opera:[/(Opera|OPR)\/(\d+(\.\d+)?)/],Firefox:[/Firefox\/(\d+(\.\d+)?)/],"Firefox iOS":[/FxiOS\/(\d+(\.\d+)?)/],Konqueror:[/Konqueror[:/]?(\d+(\.\d+)?)/i],BlackBerry:[/BlackBerry (\d+(\.\d+)?)/,/Version\/(\d+(\.\d+)?)/],"Android Mobile":[/android\s(\d+(\.\d+)?)/],"Samsung Internet":[/SamsungBrowser\/(\d+(\.\d+)?)/],"Internet Explorer":[/(rv:|MSIE )(\d+(\.\d+)?)/],Mozilla:[/rv:(\d+(\.\d+)?)/]}[an.browser(t,e,n)];if(rt(r))return null;for(var i=0;i<r.length;i++){var s=r[i],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(t){if(/Windows/i.test(t)){if(/Phone/.test(t)||/WPDesktop/.test(t))return{os_name:"Windows Phone",os_version:""};var e=/Windows NT ([0-9.]+)/i.exec(t);return e&&e[1]?{os_name:"Windows",os_version:e[1]}:{os_name:"Windows",os_version:""}}if(/(iPhone|iPad|iPod)/.test(t)){var n=/OS (\d+)_(\d+)_?(\d+)?/i.exec(t);return n&&n[1]?{os_name:"iOS",os_version:[n[1],n[2],n[3]||"0"].join(".")}:{os_name:"iOS",os_version:""}}if(/Android/.test(t)){var r=/Android (\d+)\.(\d+)\.?(\d+)?/i.exec(t);return r&&r[1]?{os_name:"Android",os_version:[r[1],r[2],r[3]||"0"].join(".")}:{os_name:"Android",os_version:""}}if(/(BlackBerry|PlayBook|BB10)/i.test(t))return{os_name:"BlackBerry",os_version:""};if(/Mac/i.test(t)){var i=/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i.exec(t);return i&&i[1]?{os_name:"Mac OS X",os_version:[i[1],i[2],i[3]||"0"].join(".")}:{os_name:"Mac OS X",os_version:""}}return/Linux/.test(t)?{os_name:"Linux",os_version:""}:/CrOS/.test(t)?{os_name:"Chrome OS",os_version:""}:{os_name:"",os_version:""}},device:function(t){return/Windows Phone/i.test(t)||/WPDesktop/.test(t)?"Windows Phone":/iPad/.test(t)?"iPad":/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Android/.test(t)&&!/Mobile/.test(t)?"Android Tablet":/Android/.test(t)?"Android":""},deviceType:function(t){var e=this.device(t);return e==="iPad"||e==="Android Tablet"?"Tablet":e?"Mobile":"Desktop"},referrer:function(){return(Ne==null?void 0:Ne.referrer)||"$direct"},referringDomain:function(){var t;return Ne!=null&&Ne.referrer&&((t=aO(Ne.referrer))===null||t===void 0?void 0:t.host)||"$direct"},properties:function(){if(!Yt)return{};var t=an.os(Yt),e=t.os_name,n=t.os_version;return Cn(cb({$os:e,$os_version:n,$browser:an.browser(Yt,navigator.vendor,Kn.opera),$device:an.device(Yt),$device_type:an.deviceType(Yt)}),{$current_url:G==null?void 0:G.location.href,$host:G==null?void 0:G.location.host,$pathname:G==null?void 0:G.location.pathname,$raw_user_agent:Yt.length>1e3?Yt.substring(0,997)+"...":Yt,$browser_version:an.browserVersion(Yt,navigator.vendor,Kn.opera),$browser_language:an.browserLanguage(),$screen_height:G==null?void 0:G.screen.height,$screen_width:G==null?void 0:G.screen.width,$viewport_height:G==null?void 0:G.innerHeight,$viewport_width:G==null?void 0:G.innerWidth,$lib:"web",$lib_version:Fl.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:eO()/1e3})},people_properties:function(){if(!Yt)return{};var t=an.os(Yt),e=t.os_name,n=t.os_version;return Cn(cb({$os:e,$os_version:n,$browser:an.browser(Yt,navigator.vendor,Kn.opera)}),{$browser_version:an.browserVersion(Yt,navigator.vendor,Kn.opera)})}},l8=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],eE=function(){function t(e){Qt(this,t);var n="";e.token&&(n=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),this.props={},this.campaign_params_saved=!1,this.custom_campaign_params=e.custom_campaign_params||[],e.persistence_name?this.name="ph_"+e.persistence_name:this.name="ph_"+n+"_posthog",l8.indexOf(e.persistence.toLowerCase())===-1&&(pe.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var r=e.persistence.toLowerCase();r==="localstorage"&&nn.is_supported()?this.storage=nn:r==="localstorage+cookie"&&zd.is_supported()?this.storage=zd:r==="sessionstorage"&&Pn.is_supported()?this.storage=Pn:r==="memory"?this.storage=s8:r==="cookie"?this.storage=Ls:zd.is_supported()?this.storage=zd:this.storage=Ls,this.load(),this.update_config(e),this.save()}return en(t,[{key:"properties",value:function(){var e={};return xt(this.props,function(n,r){if(r===Nc&&wa(n))for(var i=Object.keys(n),s=0;s<i.length;s++)e["$feature/".concat(i[s])]=n[i[s]];else a=r,l=!1,(_i(o=X4)?l:LC&&o.indexOf===LC?o.indexOf(a)!=-1:(xt(o,function(c){if(l||(l=c===a))return dS}),l))||(e[r]=n);var o,a,l}),e}},{key:"load",value:function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=Cn({},e))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(e,n,r){var i=this;if(wa(e)){rt(n)&&(n="None"),this.expire_days=rt(r)?this.default_expiry:r;var s=!1;if(xt(e,function(o,a){i.props.hasOwnProperty(a)&&i.props[a]!==n||(i.props[a]=o,s=!0)}),s)return this.save(),!0}return!1}},{key:"register",value:function(e,n){var r=this;if(wa(e)){this.expire_days=rt(n)?this.default_expiry:n;var i=!1;if(xt(e,function(s,o){e.hasOwnProperty(o)&&r.props[o]!==s&&(r.props[o]=s,i=!0)}),i)return this.save(),!0}return!1}},{key:"unregister",value:function(e){e in this.props&&(delete this.props[e],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(an.campaignParams(this.custom_campaign_params)),this.campaign_params_saved=!0)}},{key:"update_search_keyword",value:function(){this.register(an.searchInfo())}},{key:"update_referrer_info",value:function(){this.register({$referrer:this.props.$referrer||an.referrer(),$referring_domain:this.props.$referring_domain||an.referringDomain()})}},{key:"get_referrer_info",value:function(){return cb({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"safe_merge",value:function(e){return xt(this.props,function(n,r){r in e||(e[r]=n)}),e}},{key:"update_config",value:function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)}},{key:"set_disabled",value:function(e){this.disabled=e,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}},{key:"set_event_timer",value:function(e,n){var r=this.props[Bd]||{};r[e]=n,this.props[Bd]=r,this.save()}},{key:"remove_event_timer",value:function(e){var n=(this.props[Bd]||{})[e];return rt(n)||(delete this.props[Bd][e],this.save()),n}},{key:"get_user_state",value:function(){return this.props[hb]||"anonymous"}},{key:"set_user_state",value:function(e){this.props[hb]=e,this.save()}},{key:"get_quota_limits",value:function(){return this.props[pb]||{}}},{key:"set_quota_limits",value:function(e){this.props[pb]=e,this.save()}}]),t}(),tE=2,c8=4,lO=3,u8=6,d8=0,f8="rrweb/console@1",h8=en(function t(e){var n,r,i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Qt(this,t),Ce(this,"bucketSize",100),Ce(this,"refillRate",10),Ce(this,"mutationBuckets",{}),Ce(this,"loggedTracker",{}),Ce(this,"refillBuckets",function(){Object.keys(i.mutationBuckets).forEach(function(o){i.mutationBuckets[o]=i.mutationBuckets[o]+i.refillRate,i.mutationBuckets[o]>=i.bucketSize&&delete i.mutationBuckets[o]})}),Ce(this,"getNodeOrRelevantParent",function(o){var a=i.rrweb.mirror.getNode(o);if((a==null?void 0:a.nodeName)!=="svg"&&a instanceof Element){var l=a.closest("svg");if(l)return[i.rrweb.mirror.getId(l),l]}return[o,a]}),Ce(this,"numberOfChanges",function(o){var a,l,c,u,d,f,h,p;return((a=(l=o.removes)===null||l===void 0?void 0:l.length)!==null&&a!==void 0?a:0)+((c=(u=o.attributes)===null||u===void 0?void 0:u.length)!==null&&c!==void 0?c:0)+((d=(f=o.texts)===null||f===void 0?void 0:f.length)!==null&&d!==void 0?d:0)+((h=(p=o.adds)===null||p===void 0?void 0:p.length)!==null&&h!==void 0?h:0)}),Ce(this,"throttleMutations",function(o){if(o.type!==lO||o.data.source!==d8)return o;var a=o.data,l=i.numberOfChanges(a);a.attributes&&(a.attributes=a.attributes.filter(function(u){var d,f,h,p=Vi(i.getNodeOrRelevantParent(u.id),2),m=p[0],w=p[1];return i.mutationBuckets[m]===0?!1:(i.mutationBuckets[m]=(d=i.mutationBuckets[m])!==null&&d!==void 0?d:i.bucketSize,i.mutationBuckets[m]=Math.max(i.mutationBuckets[m]-1,0),i.mutationBuckets[m]===0&&(i.loggedTracker[m]||(i.loggedTracker[m]=!0,(f=(h=i.options).onBlockedNode)===null||f===void 0||f.call(h,m,w))),u)}));var c=i.numberOfChanges(a);return c!==0||l===c?o:void 0}),this.rrweb=e,this.options=s,this.refillRate=(n=this.options.refillRate)!==null&&n!==void 0?n:this.refillRate,this.bucketSize=(r=this.options.bucketSize)!==null&&r!==void 0?r:this.bucketSize,setInterval(function(){i.refillBuckets()},1e3)}),cO=function(t){return t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t}(cO||{}),p8={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:function(t){return t},recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6},m8=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],g8=["/s/","/e/","/i/vo/e/"];function nE(t,e,n,r){var i=e==null?void 0:e["content-length"];return i&&parseInt(i)>n?"".concat(r," body too large to record"):t}var gs,v8=function(t,e){var n,r,i,s=t.session_recording,o=s.recordHeaders!==!1&&e.recordHeaders,a=s.recordBody!==!1&&e.recordBody,l=s.recordPerformance!==!1&&e.recordPerformance,c=(n=s,i=Math.min(1e6,(r=n.payloadSizeLimitBytes)!==null&&r!==void 0?r:1e6),function(f){return f!=null&&f.requestBody&&(f.requestBody=nE(f.requestBody,f.requestHeaders,i,"Request")),f!=null&&f.responseBody&&(f.responseBody=nE(f.responseBody,f.responseHeaders,i,"Response")),f}),u=function(f){return c(function(m){var w=aO(m.name);if(!(w&&w.pathname&&g8.includes(w.pathname)))return m}((h=f,Object.keys((p=h.requestHeaders)!==null&&p!==void 0?p:{}).forEach(function(m){var w;m8.includes(m.toLowerCase())&&((w=h.requestHeaders)===null||w===void 0||delete w[m])}),h)));var h,p},d=qi(t.session_recording.maskNetworkRequestFn);return d&&qi(t.session_recording.maskCapturedNetworkRequestFn)&&pe.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=function(f){var h=t.session_recording.maskNetworkRequestFn({url:f.name});return Re(Re({},f),{},{name:h==null?void 0:h.url})}),s.maskRequestFn=qi(t.session_recording.maskCapturedNetworkRequestFn)?function(f){var h,p,m,w=u(f);return w&&(h=(p=(m=t.session_recording).maskCapturedNetworkRequestFn)===null||p===void 0?void 0:p.call(m,w))!==null&&h!==void 0?h:void 0}:void 0,s.maskRequestFn||(s.maskRequestFn=u),Re(Re(Re({},p8),s),{},{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})},y8="/s/",rE=3e5;(function(t){t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet"})(gs||(gs={}));var w8=[gs.MouseMove,gs.MouseInteraction,gs.Scroll,gs.ViewportResize,gs.Input,gs.TouchMove,gs.MediaInteraction,gs.Drag],b8=function(){function t(e){var n=this;if(Qt(this,t),Ce(this,"isIdle",!1),Ce(this,"_linkedFlagSeen",!1),Ce(this,"_lastActivityTimestamp",Date.now()),Ce(this,"windowId",null),Ce(this,"sessionId",null),Ce(this,"_linkedFlag",null),Ce(this,"_sampleRate",null),Ce(this,"_minimumDuration",null),Ce(this,"_forceAllowLocalhostNetworkCapture",!1),this.instance=e,this._captureStarted=!1,this._endpoint=y8,this.stopRrweb=void 0,this.receivedDecide=!1,G==null||G.addEventListener("beforeunload",function(){n._flushBuffer()}),!this.instance.sessionManager)throw pe.error("Session recording started without valid sessionManager"),new Error("Session recording started without valid sessionManager. This is a bug.");this.buffer=this.clearBuffer()}return en(t,[{key:"started",get:function(){return this._captureStarted}},{key:"sessionManager",get:function(){if(!this.instance.sessionManager)throw pe.error("Session recording started without valid sessionManager"),new Error("Session recording started without valid sessionManager. This is a bug.");return this.instance.sessionManager}},{key:"isSampled",get:function(){return lo(this._sampleRate)?this.instance.get_property($m):null}},{key:"sessionDuration",get:function(){var e,n,r=(e=this.buffer)===null||e===void 0?void 0:e.data[((n=this.buffer)===null||n===void 0?void 0:n.data.length)-1],i=this.sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return r?r.timestamp-i:null}},{key:"isRecordingEnabled",get:function(){var e=!!this.instance.get_property(ub),n=!this.instance.config.disable_session_recording;return G&&e&&n}},{key:"isConsoleLogCaptureEnabled",get:function(){var e=!!this.instance.get_property(GC),n=this.instance.config.enable_recording_console_log;return n??e}},{key:"recordingVersion",get:function(){var e,n=this.instance.get_property(KC);return((e=this.instance.config.session_recording)===null||e===void 0?void 0:e.recorderVersion)||n||"v1"}},{key:"networkPayloadCapture",get:function(){var e,n,r=this.instance.get_property(XC),i={recordHeaders:(e=this.instance.config.session_recording)===null||e===void 0?void 0:e.recordHeaders,recordBody:(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.recordBody},s=(i==null?void 0:i.recordHeaders)||(r==null?void 0:r.recordHeaders),o=(i==null?void 0:i.recordBody)||(r==null?void 0:r.recordBody),a=this.instance.config.capture_performance||(r==null?void 0:r.capturePerformance);return s||o||a?{recordHeaders:s,recordBody:o,recordPerformance:a}:void 0}},{key:"status",get:function(){return this.receivedDecide?this.isRecordingEnabled?Zr(this._linkedFlag)&&!this._linkedFlagSeen?"buffering":lb(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"disabled":"buffering"}},{key:"startRecordingIfEnabled",value:function(){this.isRecordingEnabled?this.startCaptureAndTrySendingQueuedSnapshots():(this.stopRecording(),this.clearBuffer())}},{key:"stopRecording",value:function(){this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1)}},{key:"makeSamplingDecision",value:function(e){var n,r=this.sessionId!==e;if(lo(this._sampleRate)){var i,s=this.isSampled;r||!lb(s)?i=Math.random()<this._sampleRate:i=s,i||pe.warn("[SessionSampling] Sample rate (".concat(this._sampleRate,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),(n=this.instance.persistence)===null||n===void 0||n.register(Ce({},$m,i))}else{var o;(o=this.instance.persistence)===null||o===void 0||o.register(Ce({},$m,null))}}},{key:"afterDecideResponse",value:function(e){var n,r,i,s,o,a,l,c,u=this;this.instance.persistence&&this.instance.persistence.register((Ce(c={},ub,!!e.sessionRecording),Ce(c,GC,(o=e.sessionRecording)===null||o===void 0?void 0:o.consoleLogRecordingEnabled),Ce(c,KC,(a=e.sessionRecording)===null||a===void 0?void 0:a.recorderVersion),Ce(c,XC,Re({capturePerformance:e.capturePerformance},(l=e.sessionRecording)===null||l===void 0?void 0:l.networkPayloadCapture)),c));var d=(n=e.sessionRecording)===null||n===void 0?void 0:n.sampleRate;this._sampleRate=rt(d)||_i(d)?null:parseFloat(d);var f,h=(r=e.sessionRecording)===null||r===void 0?void 0:r.minimumDurationMilliseconds;if(this._minimumDuration=rt(h)?null:h,this._linkedFlag=((i=e.sessionRecording)===null||i===void 0?void 0:i.linkedFlag)||null,(s=e.sessionRecording)!==null&&s!==void 0&&s.endpoint&&(this._endpoint=(f=e.sessionRecording)===null||f===void 0?void 0:f.endpoint),lo(this._sampleRate)&&this.sessionManager.onSessionId(function(m){u.makeSamplingDecision(m)}),Zr(this._linkedFlag)){var p=this._linkedFlag;this.instance.onFeatureFlags(function(m){u._linkedFlagSeen=m.includes(p)})}this.receivedDecide=!0,this.startRecordingIfEnabled()}},{key:"log",value:function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log";(n=this.instance.sessionRecording)===null||n===void 0||n.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:r,trace:[],payload:[JSON.stringify(e)]}},timestamp:eO()})}},{key:"startCaptureAndTrySendingQueuedSnapshots",value:function(){this._startCapture()}},{key:"_startCapture",value:function(){var e=this;if(!rt(Object.assign)&&!this._captureStarted&&!this.instance.config.disable_session_recording){this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId();var n=this.recordingVersion==="v2"?"recorder-v2.js":"recorder.js";this.instance.__loaded_recorder_version!==this.recordingVersion?rf(this.instance.config.api_host+"/static/".concat(n,"?v=").concat(Fl.LIB_VERSION),function(r){if(r)return pe.error("Could not load ".concat(n),r);e._onScriptLoaded()}):this._onScriptLoaded()}}},{key:"_isInteractiveEvent",value:function(e){var n;return e.type===lO&&w8.indexOf((n=e.data)===null||n===void 0?void 0:n.source)!==-1}},{key:"_updateWindowAndSessionIds",value:function(e){var n=this._isInteractiveEvent(e);if(n||this.isIdle||e.timestamp-this._lastActivityTimestamp>rE&&(this.isIdle=!0,this._tryAddCustomEvent("sessionIdle",{reason:"user inactivity",timeSinceLastActive:e.timestamp-this._lastActivityTimestamp,threshold:rE})),n&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),this._tryTakeFullSnapshot())),!this.isIdle){var r=this.sessionManager.checkAndGetSessionAndWindowId(!n,e.timestamp),i=r.windowId,s=r.sessionId,o=this.sessionId!==s,a=this.windowId!==i;[tE,c8].indexOf(e.type)===-1&&(a||o)&&this._tryTakeFullSnapshot(),this.windowId=i,this.sessionId=s}}},{key:"_tryRRwebMethod",value:function(e){if(!this._captureStarted)return!1;try{return e(),!0}catch(n){return pe.error("[Session-Recording] using rrweb when not started.",n),!1}}},{key:"_tryAddCustomEvent",value:function(e,n){var r=this;return this._tryRRwebMethod(function(){var i;return(i=r.rrwebRecord)===null||i===void 0?void 0:i.addCustomEvent(e,n)})}},{key:"_tryTakeFullSnapshot",value:function(){var e=this;return this._tryRRwebMethod(function(){var n;return(n=e.rrwebRecord)===null||n===void 0?void 0:n.takeFullSnapshot()})}},{key:"_onScriptLoaded",value:function(){var e,n=this,r={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1};this.rrwebRecord=G.rrweb?G.rrweb.record:G.rrwebRecord;for(var i=this.instance.config.session_recording,s=0,o=Object.entries(i||{});s<o.length;s++){var a=Vi(o[s],2),l=a[0],c=a[1];l in r&&(r[l]=c)}this.rrwebRecord?(this.mutationRateLimiter=(e=this.mutationRateLimiter)!==null&&e!==void 0?e:new h8(this.rrwebRecord,{onBlockedNode:function(u,d){var f="Too many mutations on node '".concat(u,"'. Rate limiting. This could be due to SVG animations or something similar");pe.info(f,{node:d}),n.log("[PostHog Recorder] "+f,"warn")}}),this.stopRrweb=this.rrwebRecord(Re({emit:function(u){n.onRRwebEmit(u)},plugins:this._gatherRRWebPlugins()},r)),this.instance._addCaptureHook(function(u){try{if(u==="$pageview"){var d=G?n._maskUrl(G.location.href):"";if(!d)return;n._tryAddCustomEvent("$pageview",{href:d})}}catch(f){pe.error("Could not add $pageview to rrweb session",f)}}),this._lastActivityTimestamp=Date.now(),this.isIdle=!1):pe.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}},{key:"_gatherRRWebPlugins",value:function(){var e=[];return Kn.rrwebConsoleRecord&&this.isConsoleLogCaptureEnabled&&e.push(Kn.rrwebConsoleRecord.getRecordConsolePlugin()),this.networkPayloadCapture&&qi(Kn.getRecordNetworkPlugin)&&(!o8.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?e.push(Kn.getRecordNetworkPlugin(v8(this.instance.config,this.networkPayloadCapture))):pe.info("[SessionReplay-NetworkCapture] not started because we are on localhost.")),e}},{key:"onRRwebEmit",value:function(e){if(e&&wa(e)){if(e.type===cO.Meta){var n=this._maskUrl(e.data.href);if(!n)return;e.data.href=n}var r=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(r){var i=function(a){var l=a;if(l&&wa(l)&&l.type===u8&&wa(l.data)&&l.data.plugin===f8){l.data.payload.payload.length>10&&(l.data.payload.payload=l.data.payload.payload.slice(0,10),l.data.payload.payload.push("...[truncated]"));for(var c=[],u=0;u<l.data.payload.payload.length;u++)l.data.payload.payload[u]&&l.data.payload.payload[u].length>2e3?c.push(l.data.payload.payload[u].slice(0,2e3)+"...[truncated]"):c.push(l.data.payload.payload[u]);return l.data.payload.payload=c,a}return a}(r),s=JSON.stringify(i).length;if(this._updateWindowAndSessionIds(i),!this.isIdle){var o={$snapshot_bytes:s,$snapshot_data:i,$session_id:this.sessionId,$window_id:this.windowId};this.status!=="disabled"?this._captureSnapshotBuffered(o):this.clearBuffer()}}}}},{key:"_maskUrl",value:function(e){var n=this.instance.config.session_recording;if(n.maskNetworkRequestFn){var r,i={url:e};return(r=i=n.maskNetworkRequestFn(i))===null||r===void 0?void 0:r.url}return e}},{key:"clearBuffer",value:function(){return this.buffer=void 0,{size:0,data:[],sessionId:this.sessionId,windowId:this.windowId}}},{key:"_flushBuffer",value:function(){var e=this;this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var n=this._minimumDuration,r=this.sessionDuration,i=lo(r)&&r>=0,s=lo(n)&&i&&r<n;return this.status==="buffering"||s?(this.flushBufferTimer=setTimeout(function(){e._flushBuffer()},2e3),this.buffer||this.clearBuffer()):this.buffer&&this.buffer.data.length!==0?(this._captureSnapshot({$snapshot_bytes:this.buffer.size,$snapshot_data:this.buffer.data,$session_id:this.buffer.sessionId,$window_id:this.buffer.windowId}),this.clearBuffer()):this.buffer||this.clearBuffer()}},{key:"_captureSnapshotBuffered",value:function(e){var n,r=this,i=2+(((n=this.buffer)===null||n===void 0?void 0:n.data.length)||0);(!this.buffer||this.buffer.size+e.$snapshot_bytes+i>943718.4||this.buffer.sessionId&&this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),_i(this.buffer.sessionId)&&!_i(this.sessionId)&&(this.buffer.sessionId=this.sessionId,this.buffer.windowId=this.windowId),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||(this.flushBufferTimer=setTimeout(function(){r._flushBuffer()},2e3))}},{key:"_captureSnapshot",value:function(e){this.instance.capture("$snapshot",e,{transport:"XHR",method:"POST",endpoint:this._endpoint,_noTruncate:!0,_batchKey:"recordings",_metrics:{rrweb_full_snapshot:e.$snapshot_data.type===tE}})}}]),t}(),x8=function(){function t(e){Qt(this,t),this.instance=e,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return en(t,[{key:"call",value:function(){var e=this,n=fS(JSON.stringify({token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(Mc),group_properties:this.instance.get_property(Go),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0}));this.instance._send_request("".concat(this.instance.config.api_host,"/decide/?v=3"),{data:n,verbose:!0},{method:"POST"},function(r){return e.parseDecideResponse(r)})}},{key:"parseDecideResponse",value:function(e){var n,r=this;if(this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer(),(e==null?void 0:e.status)!==0){if(!Ne||!Ne.body)return pe.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(function(){r.parseDecideResponse(e)},500);this.instance.toolbar.afterDecideResponse(e),(n=this.instance.sessionRecording)===null||n===void 0||n.afterDecideResponse(e),Qo.afterDecideResponse(e,this.instance),this.instance._afterDecideResponse(e),this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(e);var i=G==null?void 0:G.extendPostHogWithSurveys;e.surveys&&!i&&rf(this.instance.config.api_host+"/static/surveys.js",function(u){if(u)return pe.error("Could not load surveys script",u);G.extendPostHogWithSurveys(r.instance)});var s=G==null?void 0:G.extendPostHogWithExceptionAutoCapture;if(e.autocaptureExceptions&&e.autocaptureExceptions&&rt(s)&&rf(this.instance.config.api_host+"/static/exception-autocapture.js",function(u){if(u)return pe.error("Could not load exception autocapture script",u);G.extendPostHogWithExceptionAutocapture(r.instance,e)}),e.siteApps)if(this.instance.config.opt_in_site_apps){var o,a=this.instance.config.api_host,l=Ll(e.siteApps);try{var c=function(){var u=o.value,d=u.id,f=u.url,h=[a,a[a.length-1]==="/"&&f[0]==="/"?f.substring(1):f].join("");Kn["__$$ph_site_app_".concat(d)]=r.instance,rf(h,function(p){p&&pe.error("Error while initializing PostHog app with config id ".concat(d),p)})};for(l.s();!(o=l.n()).done;)c()}catch(u){l.e(u)}finally{l.f()}}else e.siteApps.length>0&&pe.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}else pe.error("Failed to fetch feature flags from PostHog.")}}]),t}(),S8=["https://app.posthog.com","https://eu.posthog.com"],k8=["source"],_8=G!=null&&G.location?wg(G.location.hash,"__posthog")||wg(location.hash,"state"):null,C8=function(){function t(e){Qt(this,t),this.instance=e}return en(t,[{key:"afterDecideResponse",value:function(e){var n=e.toolbarParams||e.editorParams||(e.toolbarVersion?{toolbarVersion:e.toolbarVersion}:{});e.isAuthenticated&&n.toolbarVersion&&n.toolbarVersion.indexOf("toolbar")===0&&this.loadToolbar(Re({},n))}},{key:"maybeLoadToolbar",value:function(){var e,n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!G||!Ne)return!1;r=(e=r)!==null&&e!==void 0?e:G.location,s=(n=s)!==null&&n!==void 0?n:G.history;try{if(!i){try{G.localStorage.setItem("test","test"),G.localStorage.removeItem("test")}catch{return!1}i=G==null?void 0:G.localStorage}var o,a=_8||wg(r.hash,"__posthog")||wg(r.hash,"state"),l=a?BC(function(){return JSON.parse(atob(decodeURIComponent(a)))})||BC(function(){return JSON.parse(decodeURIComponent(a))}):null;return l&&l.action==="ph_authorize"?((o=l).source="url",o&&Object.keys(o).length>0&&(l.desiredHash?r.hash=l.desiredHash:s?s.replaceState("",Ne.title,r.pathname+r.search):r.hash="")):((o=JSON.parse(i.getItem("_postHogToolbarParams")||"{}")).source="localstorage",delete o.userIntent),!(!o.token||this.instance.config.token!==o.token)&&(this.loadToolbar(o),!0)}catch{return!1}}},{key:"loadToolbar",value:function(e){var n=this;if(!G||Kn._postHogToolbarLoaded)return!1;Kn._postHogToolbarLoaded=!0;var r=this.instance.config.api_host,i=3e5,s=Math.floor(Date.now()/i)*i,o="".concat(r).concat(r.endsWith("/")?"":"/","static/toolbar.js?t=").concat(s),a=!S8.includes(this.instance.config.api_host)&&this.instance.config.advanced_disable_toolbar_metrics,l=Re(Re({token:this.instance.config.token},e),{},{apiURL:r},a?{instrument:!1}:{});l.source;var c=F4(l,k8);return G.localStorage.setItem("_postHogToolbarParams",JSON.stringify(c)),rf(o,function(u){u?pe.error("Failed to load toolbar",u):(Kn.ph_load_toolbar||Kn.ph_load_editor)(l,n.instance)}),nf(G,"turbolinks:load",function(){Kn._postHogToolbarLoaded=!1,n.loadToolbar(l)}),!0}},{key:"_loadEditor",value:function(e){return this.loadToolbar(e)}},{key:"maybeLoadEditor",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return this.maybeLoadToolbar(e,n,r)}}]),t}(),E8="__ph_opt_in_out_";function A8(t,e){dO(!0,t,e)}function P8(t,e){dO(!1,t,e)}function T8(t,e){return uO(t,e)==="1"}function iE(t,e){return!!function(n){if(n&&n.respectDnt){var r=n&&n.window||G,i=r==null?void 0:r.navigator,s=!1;return xt([i==null?void 0:i.doNotTrack,i.msDoNotTrack,r.doNotTrack],function(o){ut([!0,1,"1","yes"],o)&&(s=!0)}),s}return!1}(e)||uO(t,e)==="0"}function $8(t,e){pS(e=e||{}).remove(mS(t,e),!!e.crossSubdomainCookie)}function pS(t){return(t=t||{}).persistenceType==="localStorage"?nn:t.persistenceType==="localStorage+cookie"?zd:Ls}function mS(t,e){return((e=e||{}).persistencePrefix||E8)+t}function uO(t,e){return pS(e).get(mS(t,e))}function dO(t,e,n){Zr(e)&&e.length?(pS(n=n||{}).set(mS(e,n),t?1:0,lo(n.cookieExpiration)?n.cookieExpiration:null,n.crossSubdomainCookie,n.secureCookie),n.capture&&t&&n.capture(n.captureEventName||"$opt_in",n.captureProperties||{},{send_instantly:!0})):pe.error("gdpr."+(t?"optIn":"optOut")+" called with an invalid token")}var fO=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3e3;Qt(this,t),this.isPolling=!0,this._event_queue=[],this._empty_queue_count=0,this._poller=void 0,this._pollInterval=e}return en(t,[{key:"setPollInterval",value:function(e){this._pollInterval=e,this.isPolling&&this.poll()}},{key:"poll",value:function(){}},{key:"unload",value:function(){}},{key:"getTime",value:function(){return new Date().getTime()}}]),t}(),O8=function(t){Y$(n,fO);var e=q$(n);function n(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3e3;return Qt(this,n),(i=e.call(this,s)).handlePollRequest=r,i}return en(n,[{key:"enqueue",value:function(r,i,s){this._event_queue.push({url:r,data:i,options:s}),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var r=this;clearTimeout(this._poller),this._poller=setTimeout(function(){if(r._event_queue.length>0){var i=r.formatQueue(),s=function(a){var l=i[a],c=l.url,u=l.data,d=l.options;xt(u,function(f,h){u[h].offset=Math.abs(u[h].timestamp-r.getTime()),delete u[h].timestamp}),r.handlePollRequest(c,u,d)};for(var o in i)s(o);r._event_queue.length=0,r._empty_queue_count=0}else r._empty_queue_count++;r._empty_queue_count>4&&(r.isPolling=!1,r._empty_queue_count=0),r.isPolling&&r.poll()},this._pollInterval)}},{key:"unload",value:function(){var r=this;clearTimeout(this._poller);var i=this._event_queue.length>0?this.formatQueue():{};this._event_queue.length=0;var s=Object.values(i);[].concat(ob(s.filter(function(o){return o.url.indexOf("/e")===0})),ob(s.filter(function(o){return o.url.indexOf("/e")!==0}))).map(function(o){var a=o.url,l=o.data,c=o.options;r.handlePollRequest(a,l,Re(Re({},c),{},{transport:"sendBeacon"}))})}},{key:"formatQueue",value:function(){var r={};return xt(this._event_queue,function(i){var s=i.url,o=i.data,a=i.options,l=(a?a._batchKey:null)||s;rt(r[l])&&(r[l]={data:[],url:s,options:a}),a&&r[l].options&&r[l].options._metrics&&!r[l].options._metrics.rrweb_full_snapshot&&(r[l].options._metrics.rrweb_full_snapshot=a._metrics.rrweb_full_snapshot),r[l].data.push(o)}),r}}]),n}(),Qr=Uint8Array,rr=Uint16Array,Au=Uint32Array,gS=new Qr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),vS=new Qr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),sE=new Qr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hO=function(t,e){for(var n=new rr(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new Au(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},pO=hO(gS,2),N8=pO[0],gb=pO[1];N8[28]=258,gb[258]=28;for(var oE=hO(vS,0)[1],vb=new rr(32768),Ot=0;Ot<32768;++Ot){var al=(43690&Ot)>>>1|(21845&Ot)<<1;al=(61680&(al=(52428&al)>>>2|(13107&al)<<2))>>>4|(3855&al)<<4,vb[Ot]=((65280&al)>>>8|(255&al)<<8)>>>1}var sf=function(t,e,n){for(var r=t.length,i=0,s=new rr(e);i<r;++i)++s[t[i]-1];var o,a=new rr(e);for(i=0;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;if(n){o=new rr(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],d=a[t[i]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)o[vb[d]>>>l]=c}else for(o=new rr(r),i=0;i<r;++i)o[i]=vb[a[t[i]-1]++]>>>15-t[i];return o},jl=new Qr(288);for(Ot=0;Ot<144;++Ot)jl[Ot]=8;for(Ot=144;Ot<256;++Ot)jl[Ot]=9;for(Ot=256;Ot<280;++Ot)jl[Ot]=7;for(Ot=280;Ot<288;++Ot)jl[Ot]=8;var bg=new Qr(32);for(Ot=0;Ot<32;++Ot)bg[Ot]=5;var pl,M8=sf(jl,9,0),R8=sf(bg,5,0),mO=function(t){return(t/8>>0)+(7&t&&1)},gO=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof rr?rr:t instanceof Au?Au:Qr)(n-e);return r.set(t.subarray(e,n)),r},Ws=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},hd=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},hy=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return[new Qr(0),0];if(i==1){var o=new Qr(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(k,P){return k.f-P.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var f=s[0].s;for(r=1;r<i;++r)s[r].s>f&&(f=s[r].s);var h=new rr(f+1),p=D8(n[u-1],h,0);if(p>e){r=0;var m=0,w=p-e,v=1<<w;for(s.sort(function(k,P){return h[P.s]-h[k.s]||k.f-P.f});r<i;++r){var y=s[r].s;if(!(h[y]>e))break;m+=v-(1<<p-h[y]),h[y]=e}for(m>>>=w;m>0;){var x=s[r].s;h[x]<e?m-=1<<e-h[x]++-1:++r}for(;r>=0&&m;--r){var _=s[r].s;h[_]==e&&(--h[_],++m)}p=e}return[new Qr(h),p]},D8=function t(e,n,r){return e.s==-1?Math.max(t(e.l,n,r+1),t(e.r,n,r+1)):n[e.s]=r},aE=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new rr(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return[n.subarray(0,r),e]},pd=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Om=function(t,e,n){var r=n.length,i=mO(e+2);t[i]=255&r,t[i+1]=r>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<r;++s)t[i+s+4]=n[s];return 8*(i+4+r)},lE=function(t,e,n,r,i,s,o,a,l,c,u){Ws(e,u++,n),++i[256];for(var d=hy(i,15),f=d[0],h=d[1],p=hy(s,15),m=p[0],w=p[1],v=aE(f),y=v[0],x=v[1],_=aE(m),k=_[0],P=_[1],E=new rr(19),C=0;C<y.length;++C)E[31&y[C]]++;for(C=0;C<k.length;++C)E[31&k[C]]++;for(var N=hy(E,7),M=N[0],R=N[1],L=19;L>4&&!M[sE[L-1]];--L);var H,$,V,q,ne=c+5<<3,W=pd(i,jl)+pd(s,bg)+o,j=pd(i,f)+pd(s,m)+o+14+3*L+pd(E,M)+(2*E[16]+3*E[17]+7*E[18]);if(ne<=W&&ne<=j)return Om(e,u,t.subarray(l,l+c));if(Ws(e,u,1+(j<W)),u+=2,j<W){H=sf(f,h,0),$=f,V=sf(m,w,0),q=m;var Q=sf(M,R,0);for(Ws(e,u,x-257),Ws(e,u+5,P-1),Ws(e,u+10,L-4),u+=14,C=0;C<L;++C)Ws(e,u+3*C,M[sE[C]]);u+=3*L;for(var K=[y,k],ee=0;ee<2;++ee){var ce=K[ee];for(C=0;C<ce.length;++C){var F=31&ce[C];Ws(e,u,Q[F]),u+=M[F],F>15&&(Ws(e,u,ce[C]>>>5&127),u+=ce[C]>>>12)}}}else H=M8,$=jl,V=R8,q=bg;for(C=0;C<a;++C)if(r[C]>255){F=r[C]>>>18&31,hd(e,u,H[F+257]),u+=$[F+257],F>7&&(Ws(e,u,r[C]>>>23&31),u+=gS[F]);var I=31&r[C];hd(e,u,V[I]),u+=q[I],I>3&&(hd(e,u,r[C]>>>5&8191),u+=vS[I])}else hd(e,u,H[r[C]]),u+=$[r[C]];return hd(e,u,H[256]),u+$[256]},I8=new Au([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),L8=new Qr(0),F8=function(){for(var t=new Au(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),j8=function(){var t=4294967295;return{p:function(e){for(var n=t,r=0;r<e.length;++r)n=F8[255&n^e[r]]^n>>>8;t=n},d:function(){return 4294967295^t}}},B8=function(t,e,n,r,i){return function(s,o,a,l,c,u){var d=s.length,f=new Qr(l+d+5*(1+Math.floor(d/7e3))+c),h=f.subarray(l,f.length-c),p=0;if(!o||d<8)for(var m=0;m<=d;m+=65535){var w=m+65535;w<d?p=Om(h,p,s.subarray(m,w)):(h[m]=u,p=Om(h,p,s.subarray(m,d)))}else{for(var v=I8[o-1],y=v>>>13,x=8191&v,_=(1<<a)-1,k=new rr(32768),P=new rr(_+1),E=Math.ceil(a/3),C=2*E,N=function(me){return(s[me]^s[me+1]<<E^s[me+2]<<C)&_},M=new Au(25e3),R=new rr(288),L=new rr(32),H=0,$=0,V=(m=0,0),q=0,ne=0;m<d;++m){var W=N(m),j=32767&m,Q=P[W];if(k[j]=Q,P[W]=j,q<=m){var K=d-m;if((H>7e3||V>24576)&&K>423){p=lE(s,h,0,M,R,L,$,V,ne,m-ne,p),V=H=$=0,ne=m;for(var ee=0;ee<286;++ee)R[ee]=0;for(ee=0;ee<30;++ee)L[ee]=0}var ce=2,F=0,I=x,z=j-Q&32767;if(K>2&&W==N(m-z))for(var S=Math.min(y,K)-1,T=Math.min(32767,m),D=Math.min(258,K);z<=T&&--I&&j!=Q;){if(s[m+ce]==s[m+ce-z]){for(var O=0;O<D&&s[m+O]==s[m+O-z];++O);if(O>ce){if(ce=O,F=z,O>S)break;var U=Math.min(z,O-2),X=0;for(ee=0;ee<U;++ee){var te=m-z+ee+32768&32767,J=te-k[te]+32768&32767;J>X&&(X=J,Q=te)}}}z+=(j=Q)-(Q=k[j])+32768&32767}if(F){M[V++]=268435456|gb[ce]<<18|oE[F];var se=31&gb[ce],Ie=31&oE[F];$+=gS[se]+vS[Ie],++R[257+se],++L[Ie],q=m+ce,++H}else M[V++]=s[m],++R[s[m]]}}p=lE(s,h,u,M,R,L,$,V,ne,m-ne,p),u||(p=Om(h,p,L8))}return gO(f,0,l+mO(p)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,r,!i)},yb=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},z8=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&yb(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var r=0;r<=n.length;++r)t[r+10]=n.charCodeAt(r)}},U8=function(t){return 10+(t.filename&&t.filename.length+1||0)};function V8(t,e){e===void 0&&(e={});var n=j8(),r=t.length;n.p(t);var i=B8(t,e,U8(e),8),s=i.length;return z8(i,e),yb(i,s-8,n.d()),yb(i,s-4,r),i}function H8(t,e){var n=t.length;if(!e&&typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var r=new Qr(t.length+(t.length>>>1)),i=0,s=function(c){r[i++]=c},o=0;o<n;++o){if(i+5>r.length){var a=new Qr(i+8+(n-o<<1));a.set(r),r=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return gO(r,0,i)}(function(t){t.GZipJS="gzip-js",t.Base64="base64"})(pl||(pl={}));var vO=function(t,e,n){var r=e||{};r.ip=n.ip?1:0,r._=new Date().getTime().toString(),r.ver=Fl.LIB_VERSION;var i=t.split("?");if(i.length>1){var s,o=Ll(i[1].split("&"));try{for(o.s();!(s=o.n()).done;){var a=s.value.split("=")[0];rt(r[a])||delete r[a]}}catch(c){o.e(c)}finally{o.f()}}var l=t.indexOf("?")>-1?"&":"?";return t+l+function(c){var u,d,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",h=[];return xt(c,function(p,m){rt(p)||rt(m)||m==="undefined"||(u=encodeURIComponent(p.toString()),d=encodeURIComponent(m),h[h.length]=d+"="+u)}),h.join(f)}(r)},yS=function t(e,n){if(n.blob&&e.buffer)return new Blob([DC(e)?e:e.buffer],{type:"text/plain"});if(n.sendBeacon||n.blob){var r=t(e,{method:"POST"});return new Blob([r],{type:"application/x-www-form-urlencoded"})}return n.method!=="POST"?null:(i=yn(e)||DC(e)?"data="+encodeURIComponent(e):"data="+encodeURIComponent(e.data),"compression"in e&&e.compression&&(i+="&compression="+e.compression),i);var i},yO=function(t){var e=t.url,n=t.data,r=t.headers,i=t.options,s=t.callback,o=t.retriesPerformedSoFar,a=t.retryQueue,l=t.onXHRError,c=t.timeout,u=c===void 0?6e4:c,d=t.onResponse;lo(o)&&o>0&&(e=vO(e,{retry_count:o},{}));var f=new XMLHttpRequest;f.open(i.method||"GET",e,!0);var h=yS(n,i);xt(r,function(p,m){f.setRequestHeader(m,p)}),i.method!=="POST"||i.blob||f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.timeout=u,f.withCredentials=!0,f.onreadystatechange=function(){if(f.readyState===4)if(d==null||d(f),f.status===200){if(s){var p;try{p=JSON.parse(f.responseText)}catch(m){return void pe.error(m)}s(p)}}else qi(l)&&l(f),(f.status<400||f.status>500)&&a.enqueue({url:e,data:n,options:i,headers:r,retriesPerformedSoFar:(o||0)+1,callback:s}),s==null||s({status:0})},f.send(h)},W8=18e5,G8=function(t){Y$(n,fO);var e=q$(n);function n(r,i){var s;return Qt(this,n),(s=e.call(this)).isPolling=!1,s.queue=[],s.areWeOnline=!0,s.onXHRError=r,s.rateLimiter=i,!rt(G)&&"onLine"in G.navigator&&(s.areWeOnline=G.navigator.onLine,G.addEventListener("online",function(){s._handleWeAreNowOnline()}),G.addEventListener("offline",function(){s.areWeOnline=!1})),s}return en(n,[{key:"enqueue",value:function(r){var i=r.retriesPerformedSoFar||0;if(!(i>=10)){var s=function(l){var c=3e3*Math.pow(2,l),u=c/2,d=Math.min(W8,c),f=(Math.random()-.5)*(d-u);return Math.ceil(d+f)}(i),o=new Date(Date.now()+s);this.queue.push({retryAt:o,requestData:r});var a="Enqueued failed request for retry in ".concat(s);navigator.onLine||(a+=" (Browser is offline)"),pe.warn(a),this.isPolling||(this.isPolling=!0,this.poll())}}},{key:"poll",value:function(){var r=this;this._poller&&clearTimeout(this._poller),this._poller=setTimeout(function(){r.areWeOnline&&r.queue.length>0&&r.flush(),r.poll()},this._pollInterval)}},{key:"flush",value:function(){var r=new Date(Date.now()),i=this.queue.filter(function(l){return l.retryAt<r});if(i.length>0){this.queue=this.queue.filter(function(l){return l.retryAt>=r});var s,o=Ll(i);try{for(o.s();!(s=o.n()).done;){var a=s.value.requestData;this._executeXhrRequest(a)}}catch(l){o.e(l)}finally{o.f()}}}},{key:"unload",value:function(){this._poller&&(clearTimeout(this._poller),this._poller=void 0);var r,i=Ll(this.queue);try{for(i.s();!(r=i.n()).done;){var s=r.value.requestData,o=s.url,a=s.data,l=s.options;if(this.rateLimiter.isRateLimited(l._batchKey))pe.warn("[RetryQueue] is quota limited. Dropping request.");else try{G==null||G.navigator.sendBeacon(o,yS(a,Re(Re({},l),{},{sendBeacon:!0})))}catch(c){pe.error(c)}}}catch(c){i.e(c)}finally{i.f()}this.queue=[]}},{key:"_executeXhrRequest",value:function(r){var i=r.url,s=r.data,o=r.options,a=r.headers,l=r.callback,c=r.retriesPerformedSoFar;this.rateLimiter.isRateLimited(o._batchKey)||yO({url:i,data:s||{},options:o||{},headers:a||{},retriesPerformedSoFar:c||0,callback:l,retryQueue:this,onXHRError:this.onXHRError,onResponse:this.rateLimiter.checkForLimiting})}},{key:"_handleWeAreNowOnline",value:function(){this.areWeOnline=!0,this.flush()}}]),n}(),hp=1800,cE=60,K8=864e5,X8=function(){function t(e,n,r,i){Qt(this,t),Ce(this,"_sessionIdChangedHandlers",[]),this.config=e,this.persistence=n,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=r||xl,this._windowIdGenerator=i||xl;var s=e.persistence_name||e.token,o=e.session_idle_timeout_seconds||hp;if(lo(o)?o>hp?pe.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead."):o<cE&&pe.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."):(pe.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."),o=hp),this._sessionTimeoutMs=1e3*Math.min(Math.max(o,cE),hp),this._window_id_storage_key="ph_"+s+"_window_id",this._primary_window_exists_storage_key="ph_"+s+"_primary_window_exists",this._canUseSessionStorage()){var a=Pn.parse(this._window_id_storage_key),l=Pn.parse(this._primary_window_exists_storage_key);a&&!l?this._windowId=a:Pn.remove(this._window_id_storage_key),Pn.set(this._primary_window_exists_storage_key,!0)}this._listenToReloadWindow()}return en(t,[{key:"onSessionId",value:function(e){var n=this;return rt(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),function(){n._sessionIdChangedHandlers=n._sessionIdChangedHandlers.filter(function(r){return r!==e})}}},{key:"_canUseSessionStorage",value:function(){return this.config.persistence!=="memory"&&!this.persistence.disabled&&Pn.is_supported()}},{key:"_setWindowId",value:function(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&Pn.set(this._window_id_storage_key,e))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:this._canUseSessionStorage()?Pn.parse(this._window_id_storage_key):null}},{key:"_setSessionId",value:function(e,n,r){e===this._sessionId&&n===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this._sessionId=e,this.persistence.register(Ce({},vg,[n,e,r])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[vg];return yn(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var e=this;G==null||G.addEventListener("beforeunload",function(){e._canUseSessionStorage()&&Pn.remove(e._primary_window_exists_storage_key)})}},{key:"checkAndGetSessionAndWindowId",value:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:null)||new Date().getTime(),r=Vi(this._getSessionId(),3),i=r[0],s=r[1],o=r[2],a=this._getWindowId(),l=o&&o>0&&Math.abs(n-o)>K8,c=!1,u=!s,d=!e&&Math.abs(n-i)>this._sessionTimeoutMs;u||d||l?(s=this._sessionIdGenerator(),a=this._windowIdGenerator(),o=n,c=!0):a||(a=this._windowIdGenerator(),c=!0);var f=i===0||!e||l?n:i,h=o===0?new Date().getTime():o;return this._setWindowId(a),this._setSessionId(s,f,h),c&&this._sessionIdChangedHandlers.forEach(function(p){return p(s,a)}),{sessionId:s,windowId:a,sessionStartTimestamp:h}}}]),t}(),Y8=en(function t(e,n,r,i){Qt(this,t),this.name="posthog-js",this.setupOnce=function(s){s(function(o){var a,l,c,u,d;if(o.level!=="error"||!e.__loaded)return o;o.tags||(o.tags={});var f=e.config.ui_host||e.config.api_host;o.tags["PostHog Person URL"]=f+"/person/"+e.get_distinct_id(),e.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var h=((a=o.exception)===null||a===void 0?void 0:a.values)||[],p={$exception_message:(l=h[0])===null||l===void 0?void 0:l.value,$exception_type:(c=h[0])===null||c===void 0?void 0:c.type,$exception_personURL:f+"/person/"+e.get_distinct_id(),$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:(u=h[0])===null||u===void 0?void 0:u.value,$sentry_exception_type:(d=h[0])===null||d===void 0?void 0:d.type,$sentry_tags:o.tags};return n&&r&&(p.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+o.event_id),e.capture("$exception",p),o})}}),q8=function(t){Promise&&Promise.resolve||pe.warn("This browser does not have Promise support, and can not use the segment integration");var e=function(n,r){n.event.userId||n.event.anonymousId===t.get_distinct_id()||t.reset(),n.event.userId&&n.event.userId!==t.get_distinct_id()&&(t.register({distinct_id:n.event.userId}),t.reloadFeatureFlags());var i=t._calculate_event_properties(r,n.event.properties);return n.event.properties=Object.assign({},i,n.event.properties),n};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(n){return e(n,n.event.event)},page:function(n){return e(n,"$pageview")},identify:function(n){return e(n,"$identify")},screen:function(n){return e(n,"$screen")}}},J8=function(){function t(){var e=this;Qt(this,t),Ce(this,"_hasSeenPageView",!1),Ce(this,"_updateScrollData",function(){var n,r,i,s;e._pageViewData||(e._pageViewData=e._createPageViewData());var o=e._pageViewData,a=e._scrollY(),l=e._scrollHeight(),c=e._contentY(),u=e._contentHeight();o.lastScrollY=a,o.maxScrollY=Math.max(a,(n=o.maxScrollY)!==null&&n!==void 0?n:0),o.maxScrollHeight=Math.max(l,(r=o.maxScrollHeight)!==null&&r!==void 0?r:0),o.lastContentY=c,o.maxContentY=Math.max(c,(i=o.maxContentY)!==null&&i!==void 0?i:0),o.maxContentHeight=Math.max(u,(s=o.maxContentHeight)!==null&&s!==void 0?s:0)})}return en(t,[{key:"_createPageViewData",value:function(){var e;return{pathname:(e=G==null?void 0:G.location.pathname)!==null&&e!==void 0?e:""}}},{key:"doPageView",value:function(){var e,n;return this._hasSeenPageView?(n=this._pageViewData,this._pageViewData=this._createPageViewData()):(this._hasSeenPageView=!0,n=void 0,this._pageViewData||(this._pageViewData=this._createPageViewData())),setTimeout(this._updateScrollData,0),Re({$prev_pageview_pathname:(e=n)===null||e===void 0?void 0:e.pathname},this._calculatePrevPageScrollProperties(n))}},{key:"doPageLeave",value:function(){var e=this._pageViewData;return Re({$prev_pageview_pathname:e==null?void 0:e.pathname},this._calculatePrevPageScrollProperties(e))}},{key:"_calculatePrevPageScrollProperties",value:function(e){if(!e||e.maxScrollHeight==null||e.lastScrollY==null||e.maxScrollY==null||e.maxContentHeight==null||e.lastContentY==null||e.maxContentY==null)return{};var n=e.maxScrollHeight,r=e.lastScrollY,i=e.maxScrollY,s=e.maxContentHeight,o=e.lastContentY,a=e.maxContentY;return n=Math.ceil(n),r=Math.ceil(r),i=Math.ceil(i),s=Math.ceil(s),o=Math.ceil(o),a=Math.ceil(a),{$prev_pageview_last_scroll:r,$prev_pageview_last_scroll_percentage:n<=1?1:pp(r/n,0,1),$prev_pageview_max_scroll:i,$prev_pageview_max_scroll_percentage:n<=1?1:pp(i/n,0,1),$prev_pageview_last_content:o,$prev_pageview_last_content_percentage:s<=1?1:pp(o/s,0,1),$prev_pageview_max_content:a,$prev_pageview_max_content_percentage:s<=1?1:pp(a/s,0,1)}}},{key:"startMeasuringScrollPosition",value:function(){G==null||G.addEventListener("scroll",this._updateScrollData),G==null||G.addEventListener("scrollend",this._updateScrollData),G==null||G.addEventListener("resize",this._updateScrollData)}},{key:"stopMeasuringScrollPosition",value:function(){G==null||G.removeEventListener("scroll",this._updateScrollData),G==null||G.removeEventListener("scrollend",this._updateScrollData),G==null||G.removeEventListener("resize",this._updateScrollData)}},{key:"_scrollHeight",value:function(){return G?Math.max(0,G.document.documentElement.scrollHeight-G.document.documentElement.clientHeight):0}},{key:"_scrollY",value:function(){return G&&(G.scrollY||G.pageYOffset||G.document.documentElement.scrollTop)||0}},{key:"_contentHeight",value:function(){return(G==null?void 0:G.document.documentElement.scrollHeight)||0}},{key:"_contentY",value:function(){var e=(G==null?void 0:G.document.documentElement.clientHeight)||0;return this._scrollY()+e}}]),t}();function pp(t,e,n){return Math.max(e,Math.min(t,n))}var Pf,wS,An,Z8={icontains:function(t){return!!G&&G.location.href.toLowerCase().indexOf(t.toLowerCase())>-1},regex:function(t){return!!G&&a8(G.location.href,t)},exact:function(t){return(G==null?void 0:G.location.href)===t}},Q8=function(){function t(e){Qt(this,t),this.instance=e}return en(t,[{key:"getSurveys",value:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.instance.get_property(fb);if(i&&!r)return e(i);this.instance._send_request("".concat(this.instance.config.api_host,"/api/surveys/?token=").concat(this.instance.config.token),{},{method:"GET"},function(s){var o,a=s.surveys||[];return(o=n.instance.persistence)===null||o===void 0||o.register(Ce({},fb,a)),e(a)})}},{key:"getActiveMatchingSurveys",value:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.getSurveys(function(i){var s=i.filter(function(o){return!(!o.start_date||o.end_date)}).filter(function(o){var a,l,c,u;if(!o.conditions)return!0;var d=(a=o.conditions)===null||a===void 0||!a.url||Z8[(l=(c=o.conditions)===null||c===void 0?void 0:c.urlMatchType)!==null&&l!==void 0?l:"icontains"](o.conditions.url),f=(u=o.conditions)===null||u===void 0||!u.selector||(Ne==null?void 0:Ne.querySelector(o.conditions.selector));return d&&f}).filter(function(o){if(!o.linked_flag_key&&!o.targeting_flag_key)return!0;var a=!o.linked_flag_key||n.instance.featureFlags.isFeatureEnabled(o.linked_flag_key),l=!o.targeting_flag_key||n.instance.featureFlags.isFeatureEnabled(o.targeting_flag_key);return a&&l});return e(s)},r)}}]),t}(),eF=6e4,tF=function(){function t(){var e=this;Qt(this,t),Ce(this,"limits",{}),Ce(this,"checkForLimiting",function(n){try{var r=n.responseText;if(!r||!r.length)return;(JSON.parse(r).quota_limited||[]).forEach(function(i){pe.info("[RateLimiter] ".concat(i||"events"," is quota limited.")),e.limits[i]=new Date().getTime()+eF})}catch(i){return void pe.error(i)}})}return en(t,[{key:"isRateLimited",value:function(e){var n=this.limits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}}]),t}(),nF=function(){return Re({initialPathName:(G==null?void 0:G.location.pathname)||"",referringDomain:an.referringDomain()},an.campaignParams())},rF=function(){function t(e,n,r){var i=this;Qt(this,t),Ce(this,"_onSessionIdCallback",function(s){var o=i._getStoredProps();if(!o||o.sessionId!==s){var a={sessionId:s,props:i._sessionSourceParamGenerator()};i._persistence.register(Ce({},mb,a))}}),this._sessionIdManager=e,this._persistence=n,this._sessionSourceParamGenerator=r||nF,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}return en(t,[{key:"_getStoredProps",value:function(){return this._persistence.props[mb]}},{key:"getSessionProps",value:function(){var e,n=(e=this._getStoredProps())===null||e===void 0?void 0:e.props;return n?{$client_session_initial_referring_host:n.referringDomain,$client_session_initial_pathname:n.initialPathName,$client_session_initial_utm_source:n.utm_source,$client_session_initial_utm_campaign:n.utm_campaign,$client_session_initial_utm_medium:n.utm_medium,$client_session_initial_utm_content:n.utm_content,$client_session_initial_utm_term:n.utm_term}:{}}}]),t}(),iF=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"],uE=function(t,e){if(!t)return!1;var n=t.toLowerCase();return iF.concat(e||[]).some(function(r){var i=r.toLowerCase();return n.includes?n.includes(i):n.indexOf(i)!==-1})};(function(t){t[t.INIT_MODULE=0]="INIT_MODULE",t[t.INIT_SNIPPET=1]="INIT_SNIPPET"})(Pf||(Pf={}));var wb=function(){},mp={},Sr="posthog",Nm=(G==null?void 0:G.XMLHttpRequest)&&"withCredentials"in new XMLHttpRequest,wO=!Nm&&(Yt==null?void 0:Yt.indexOf("MSIE"))===-1&&(Yt==null?void 0:Yt.indexOf("Mozilla"))===-1,dE=function(){var t,e,n;return{api_host:"https://app.posthog.com",api_method:"POST",api_transport:"XHR",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(e=Ne==null?void 0:Ne.location,n=e==null?void 0:e.hostname,!!Zr(n)&&n.split(".").slice(-2).join(".")!=="herokuapp.com"),persistence:"localStorage+cookie",persistence_name:"",cookie_name:"",loaded:wb,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:!0,debug:!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_cookie:!1,enable_recording_console_log:void 0,secure_cookie:(G==null||(t=G.location)===null||t===void 0?void 0:t.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_blacklist:[],respect_dnt:!1,sanitize_properties:null,xhr_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,on_xhr_error:function(r){var i="Bad HTTP status: "+r.status+" "+r.statusText;pe.error(i)},get_device_id:function(r){return r},_onCapture:wb,capture_performance:void 0,name:"posthog",callback_fn:"posthog._jsc",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800}},bb=function(t,e,n,r){var i,s=n!==Sr&&An?n?An[n]:void 0:An,o={initComplete:!1,syncCode:!1},a=function(l){return function(c){o[l]||(o[l]=!0,o.initComplete&&o.syncCode&&(r==null||r(c)))}};if(s&&wS===Pf.INIT_MODULE)i=s;else{if(s&&!yn(s))return void pe.error("You have already initialized "+n);i=new bS}return i._init(t,e,n,a("initComplete")),i.toolbar.maybeLoadToolbar(),i.sessionRecording=new b8(i),i.sessionRecording.startRecordingIfEnabled(),i.config.__preview_measure_pageview_stats&&i.pageViewManager.startMeasuringScrollPosition(),i.__autocapture=i.config.autocapture,Qo._setIsAutocaptureEnabled(i),Qo._isAutocaptureEnabled&&(i.__autocapture=i.config.autocapture,Qo.enabledForProject(i.config.token,100,100)?Qo.isBrowserSupported()?Qo.init(i):(i.__autocapture=!1,pe.info("Disabling Automatic Event Collection because this browser is not supported")):(i.__autocapture=!1,pe.info("Not in active bucket: disabling Automatic Event Collection."))),Fl.DEBUG=Fl.DEBUG||i.config.debug,!rt(s)&&yn(s)&&(i._execute_array.call(i.people,s.people),i._execute_array(s)),a("syncCode")(i),i},sF=function(){function t(){Qt(this,t),Ce(this,"__forceAllowLocalhost",!1)}return en(t,[{key:"_forceAllowLocalhost",get:function(){return this.__forceAllowLocalhost},set:function(e){pe.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}]),t}(),bS=function(){function t(){var e=this;Qt(this,t),Ce(this,"webPerformance",new sF),this.config=dE(),this.compression={},this.decideEndpointWasHit=!1,this.SentryIntegration=Y8,this.segmentIntegration=function(){return q8(e)},this.__captureHooks=[],this.__request_queue=[],this.__loaded=!1,this.__loaded_recorder_version=void 0,this.__autocapture=void 0,this._jsc=function(){},this.analyticsDefaultEndpoint="/e/",this.elementsChainAsString=!1,this.featureFlags=new Y4(this),this.toolbar=new C8(this),this.pageViewManager=new J8,this.surveys=new Q8(this),this.rateLimiter=new tF,this.people={set:function(n,r,i){var s=Zr(n)?Ce({},n,r):n;e.setPersonProperties(s),i==null||i({})},set_once:function(n,r,i){var s=Zr(n)?Ce({},n,r):n;e.setPersonProperties(void 0,s),i==null||i({})}}}return en(t,[{key:"init",value:function(e,n,r){if(rt(r))pe.critical("You must name your new library: init(token, config, name)");else{if(r!==Sr){var i=bb(e,n,r,function(s){An[r]=s,s._loaded()});return An[r]=i,i}pe.critical("You must initialize the main posthog object right after you include the PostHog js snippet")}}},{key:"_init",value:function(e){var n,r,i,s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;this.__loaded=!0,this.config={},this._triggered_notifs=[];var c,u={segmentRegister:!1,syncCode:!1},d=function(k){return function(){u[k]||(u[k]=!0,u.segmentRegister&&u.syncCode&&(l==null||l(s)))}};if(this.set_config(Cn({},dE(),o,{name:a,token:e,callback_fn:(a===Sr?a:Sr+"."+a)+"._jsc"})),this._jsc=function(){},(G!=null&&(n=G.rrweb)!==null&&n!==void 0&&n.record||G!=null&&G.rrwebRecord)&&(this.__loaded_recorder_version=G==null||(c=G.rrweb)===null||c===void 0?void 0:c.version),this.persistence=new eE(this.config),this._requestQueue=new O8(this._handle_queued_event.bind(this)),this._retryQueue=new G8(this.config.on_xhr_error,this.rateLimiter),this.__captureHooks=[],this.__request_queue=[],this.sessionManager=new X8(this.config,this.persistence),this.sessionPropsManager=new rF(this.sessionManager,this.persistence),this.sessionPersistence=this.config.persistence==="sessionStorage"?this.persistence:new eE(Re(Re({},this.config),{},{persistence:"sessionStorage"})),this._gdpr_init(),o.segment?(this.config.get_device_id=function(){return o.segment.user().anonymousId()},o.segment.user().id()&&(this.register({distinct_id:o.segment.user().id()}),this.persistence.set_user_state("identified")),o.segment.register(this.segmentIntegration()).then(d("segmentRegister"))):d("segmentRegister")(),((r=o.bootstrap)===null||r===void 0?void 0:r.distinctID)!==void 0){var f,h,p=this.config.get_device_id(xl()),m=(f=o.bootstrap)!==null&&f!==void 0&&f.isIdentifiedID?p:o.bootstrap.distinctID;this.persistence.set_user_state((h=o.bootstrap)!==null&&h!==void 0&&h.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:o.bootstrap.distinctID,$device_id:m})}if(this._hasBootstrappedFeatureFlags()){var w,v,y=Object.keys(((w=o.bootstrap)===null||w===void 0?void 0:w.featureFlags)||{}).filter(function(k){var P,E;return!((P=o.bootstrap)===null||P===void 0||(E=P.featureFlags)===null||E===void 0||!E[k])}).reduce(function(k,P){var E,C;return k[P]=((E=o.bootstrap)===null||E===void 0||(C=E.featureFlags)===null||C===void 0?void 0:C[P])||!1,k},{}),x=Object.keys(((v=o.bootstrap)===null||v===void 0?void 0:v.featureFlagPayloads)||{}).filter(function(k){return y[k]}).reduce(function(k,P){var E,C,N,M;return(E=o.bootstrap)!==null&&E!==void 0&&(C=E.featureFlagPayloads)!==null&&C!==void 0&&C[P]&&(k[P]=(N=o.bootstrap)===null||N===void 0||(M=N.featureFlagPayloads)===null||M===void 0?void 0:M[P]),k},{});this.featureFlags.receivedFeatureFlags({featureFlags:y,featureFlagPayloads:x})}if(!this.get_distinct_id()){var _=this.config.get_device_id(xl());this.register_once({distinct_id:_,$device_id:_},""),this.persistence.set_user_state("anonymous")}G==null||(i=G.addEventListener)===null||i===void 0||i.call(G,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),d("syncCode")()}},{key:"_afterDecideResponse",value:function(e){var n;if(this.compression={},e.supportedCompression&&!this.config.disable_compression){var r,i={},s=Ll(e.supportedCompression);try{for(s.s();!(r=s.n()).done;)i[r.value]=!0}catch(o){s.e(o)}finally{s.f()}this.compression=i}(n=e.analytics)!==null&&n!==void 0&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),e.elementsChainAsString&&(this.elementsChainAsString=e.elementsChainAsString)}},{key:"_loaded",value:function(){var e=this.config.advanced_disable_decide;e||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(n){pe.critical("`loaded` function failed",n)}this._start_queue_if_opted_in(),this.config.capture_pageview&&Ne&&this.capture("$pageview",{title:Ne.title},{send_instantly:!0}),e||(new x8(this).call(),this.featureFlags.resetRequestQueue())}},{key:"_start_queue_if_opted_in",value:function(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this._requestQueue)===null||e===void 0||e.poll())}},{key:"_dom_loaded",value:function(){var e=this;this.has_opted_out_capturing()||eu(this.__request_queue,function(n){e._send_request.apply(e,ob(n))}),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_prepare_callback",value:function(e,n){if(rt(e))return null;if(Nm)return function(o){e(o,n)};var r=this._jsc,i=""+Math.floor(1e8*Math.random()),s=this.config.callback_fn+"["+i+"]";return r[i]=function(o){delete r[i],e(o,n)},s}},{key:"_handle_unload",value:function(){var e,n;this.config.request_batching?(this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave"),(e=this._requestQueue)===null||e===void 0||e.unload(),(n=this._retryQueue)===null||n===void 0||n.unload()):this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave",null,{transport:"sendBeacon"})}},{key:"_handle_queued_event",value:function(e,n,r){var i=JSON.stringify(n);this.__compress_and_send_json_request(e,i,r||mp,wb)}},{key:"__compress_and_send_json_request",value:function(e,n,r,i){var s=function(c,u,d){return c===pl.GZipJS?[V8(H8(u),{mtime:0}),Re(Re({},d),{},{blob:!0,urlQueryArgs:{compression:pl.GZipJS}})]:[{data:fS(u)},d]}(this.compression[pl.GZipJS]?pl.GZipJS:pl.Base64,n,r),o=Vi(s,2),a=o[0],l=o[1];this._send_request(e,a,l,i)}},{key:"_send_request",value:function(e,n,r,i){if(this.__loaded&&this._retryQueue&&!this.rateLimiter.isRateLimited(r._batchKey))if(wO)this.__request_queue.push([e,n,r,i]);else{var s={method:this.config.api_method,transport:this.config.api_transport,verbose:this.config.verbose};r=Cn(s,r||{}),Nm||(r.method="GET");var o=G&&"sendBeacon"in G.navigator&&r.transport==="sendBeacon";if(e=vO(e,r.urlQueryArgs||{},{ip:this.config.ip}),o)try{G==null||G.navigator.sendBeacon(e,yS(n,Re(Re({},r),{},{sendBeacon:!0})))}catch{}else if(Nm||!Ne)try{yO({url:e,data:n,headers:this.config.xhr_headers,options:r,callback:i,retriesPerformedSoFar:0,retryQueue:this._retryQueue,onXHRError:this.config.on_xhr_error,onResponse:this.rateLimiter.checkForLimiting})}catch(u){pe.error(u)}else{var a,l=Ne.createElement("script");l.type="text/javascript",l.async=!0,l.defer=!0,l.src=e;var c=Ne.getElementsByTagName("script")[0];(a=c.parentNode)===null||a===void 0||a.insertBefore(l,c)}}}},{key:"_execute_array",value:function(e){var n,r=this,i=[],s=[],o=[];eu(e,function(l){l&&(n=l[0],yn(n)?o.push(l):qi(l)?l.call(r):yn(l)&&n==="alias"?i.push(l):yn(l)&&n.indexOf("capture")!==-1&&qi(r[n])?o.push(l):s.push(l))});var a=function(l,c){eu(l,function(u){if(yn(u[0])){var d=c;xt(u,function(f){d=d[f[0]].apply(d,f.slice(1))})}else this[u[0]].apply(this,u.slice(1))},c)};a(i,this),a(s,this),a(o,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var e,n;return((e=this.config.bootstrap)===null||e===void 0?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)===null||n===void 0?void 0:n.featureFlags).length>0||!1}},{key:"push",value:function(e){this._execute_array([e])}},{key:"capture",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mp;if(!this.__loaded||!this.sessionPersistence||!this._requestQueue)return pe.uninitializedWarning("posthog.capture");if(!function(u){var d=!1;try{var f=u.config.token,h=u.config.respect_dnt,p=u.config.opt_out_capturing_persistence_type,m=u.config.opt_out_capturing_cookie_prefix||void 0,w=u.config.window;f&&(d=iE(f,{respectDnt:h,persistenceType:p,persistencePrefix:m,window:w}))}catch(v){pe.error("Unexpected error when checking capturing opt-out status: "+v)}return d}(this)){var i=(r=r||mp).transport;if(i&&(r.transport=i),!rt(e)&&Zr(e)){if(!Yt||this.config.opt_out_useragent_filter||!uE(Yt,this.config.custom_blocked_useragents)){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info();var s={uuid:xl(),event:e,properties:this._calculate_event_properties(e,n||{})};e==="$identify"&&(s.$set=r.$set,s.$set_once=r.$set_once),(s=V4(s,r._noTruncate?null:this.config.properties_string_max_length)).timestamp=r.timestamp||new Date;var o=Re(Re({},s.properties.$set),s.$set);z4(o)||this.setPersonPropertiesForFlags(o),pe.info("send",s);var a=JSON.stringify(s),l=this.config.api_host+(r.endpoint||this.analyticsDefaultEndpoint),c=r!==mp;return!this.config.request_batching||c&&!r._batchKey||r.send_instantly?this.__compress_and_send_json_request(l,a,r):this._requestQueue.enqueue(l,s,r),this._invokeCaptureHooks(e,s),s}}else pe.error("No event name provided to posthog.capture")}}},{key:"_addCaptureHook",value:function(e){this.__captureHooks.push(e)}},{key:"_invokeCaptureHooks",value:function(e,n){this.config._onCapture(e,n),xt(this.__captureHooks,function(r){return r(e)})}},{key:"_calculate_event_properties",value:function(e,n){if(!this.persistence||!this.sessionPersistence)return n;var r=this.persistence.remove_event_timer(e),i=Re({},n);if(i.token=this.config.token,e==="$snapshot"){var s=Re(Re({},this.persistence.properties()),this.sessionPersistence.properties());return i.distinct_id=s.distinct_id,i}var o=an.properties();if(this.sessionManager){var a=this.sessionManager.checkAndGetSessionAndWindowId(),l=a.sessionId,c=a.windowId;i.$session_id=l,i.$window_id=c}if(this.sessionPropsManager&&this.config.__preview_send_client_session_params&&(e==="$pageview"||e==="$pageleave"||e==="$autocapture")){var u=this.sessionPropsManager.getSessionProps();i=Cn(i,u)}if(this.config.__preview_measure_pageview_stats){var d={};e==="$pageview"?d=this.pageViewManager.doPageView():e==="$pageleave"&&(d=this.pageViewManager.doPageLeave()),i=Cn(i,d)}if(e==="$pageview"&&Ne&&(i.title=Ne.title),e==="$performance_event"){var f=this.persistence.properties();return i.distinct_id=f.distinct_id,i.$current_url=o.$current_url,i}if(!rt(r)){var h=new Date().getTime()-r;i.$duration=parseFloat((h/1e3).toFixed(3))}Yt&&this.config.opt_out_useragent_filter&&(i.$browser_type=uE(Yt,this.config.custom_blocked_useragents)?"bot":"browser"),i=Cn({},an.properties(),this.persistence.properties(),this.sessionPersistence.properties(),i);var p=this.config.property_blacklist;yn(p)?xt(p,function(w){delete i[w]}):pe.error("Invalid value for property_blacklist config: "+p);var m=this.config.sanitize_properties;return m&&(i=m(i,e)),i}},{key:"register",value:function(e,n){var r;(r=this.persistence)===null||r===void 0||r.register(e,n)}},{key:"register_once",value:function(e,n,r){var i;(i=this.persistence)===null||i===void 0||i.register_once(e,n,r)}},{key:"register_for_session",value:function(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.register(e)}},{key:"unregister",value:function(e){var n;(n=this.persistence)===null||n===void 0||n.unregister(e)}},{key:"unregister_for_session",value:function(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.unregister(e)}},{key:"_register_single",value:function(e,n){this.register(Ce({},e,n))}},{key:"getFeatureFlag",value:function(e,n){return this.featureFlags.getFeatureFlag(e,n)}},{key:"getFeatureFlagPayload",value:function(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}},{key:"isFeatureEnabled",value:function(e,n){return this.featureFlags.isFeatureEnabled(e,n)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}},{key:"getEarlyAccessFeatures",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,n)}},{key:"onFeatureFlags",value:function(e){return this.featureFlags.onFeatureFlags(e)}},{key:"onSessionId",value:function(e){var n,r;return(n=(r=this.sessionManager)===null||r===void 0?void 0:r.onSessionId(e))!==null&&n!==void 0?n:function(){}}},{key:"getSurveys",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getSurveys(e,n)}},{key:"getActiveMatchingSurveys",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getActiveMatchingSurveys(e,n)}},{key:"identify",value:function(e,n,r){if(!this.__loaded||!this.persistence)return pe.uninitializedWarning("posthog.identify");if(e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))pe.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else{var i=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==i&&e!==this.get_property(Tm)&&(this.unregister(Tm),this.register({distinct_id:e}));var o=this.persistence.get_user_state()==="anonymous";e!==i&&o?(this.persistence.set_user_state("identified"),this.setPersonPropertiesForFlags(n||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:i},{$set:n||{},$set_once:r||{}}),this.featureFlags.setAnonymousDistinctId(i)):(n||r)&&this.setPersonProperties(n,r),e!==i&&(this.reloadFeatureFlags(),this.unregister(yg))}else pe.error("Unique user id has not been set in posthog.identify")}},{key:"setPersonProperties",value:function(e,n){(e||n)&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:n||{}}))}},{key:"group",value:function(e,n,r){if(e&&n){var i=this.getGroups();i[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:Re(Re({},i),{},Ce({},e,n))}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:r}),this.setGroupPropertiesForFlags(Ce({},e,r))),i[e]===n||r||this.reloadFeatureFlags()}else pe.error("posthog.group requires a group type and group key")}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}},{key:"setPersonPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.featureFlags.setPersonPropertiesForFlags(e,n)}},{key:"resetPersonPropertiesForFlags",value:function(){this.featureFlags.resetPersonPropertiesForFlags()}},{key:"setGroupPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.featureFlags.setGroupPropertiesForFlags(e,n)}},{key:"resetGroupPropertiesForFlags",value:function(e){this.featureFlags.resetGroupPropertiesForFlags(e)}},{key:"reset",value:function(e){var n,r,i,s;if(!this.__loaded)return pe.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");(n=this.persistence)===null||n===void 0||n.clear(),(r=this.sessionPersistence)===null||r===void 0||r.clear(),(i=this.persistence)===null||i===void 0||i.set_user_state("anonymous"),(s=this.sessionManager)===null||s===void 0||s.resetSessionId();var a=this.config.get_device_id(xl());this.register_once({distinct_id:a,$device_id:e?a:o},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"get_session_id",value:function(){var e,n;return(e=(n=this.sessionManager)===null||n===void 0?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}},{key:"get_session_replay_url",value:function(e){if(!this.sessionManager)return"";var n=this.config.ui_host||this.config.api_host,r=this.sessionManager.checkAndGetSessionAndWindowId(!0),i=r.sessionId,s=r.sessionStartTimestamp,o=n+"/replay/"+i;if(e!=null&&e.withTimestamp&&s){var a,l=(a=e.timestampLookBack)!==null&&a!==void 0?a:10;if(!s)return o;var c=Math.max(Math.floor((new Date().getTime()-s)/1e3)-l,0);o+="?t=".concat(c)}return o}},{key:"alias",value:function(e,n){return e===this.get_property(sO)?(pe.critical("Attempting to create alias for existing People user - aborting."),-2):(rt(n)&&(n=this.get_distinct_id()),e!==n?(this._register_single(Tm,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(pe.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1))}},{key:"set_config",value:function(e){var n,r,i=Re({},this.config);wa(e)&&(Cn(this.config,e),this.config.persistence_name||(this.config.persistence_name=this.config.cookie_name),this.config.disable_persistence||(this.config.disable_persistence=this.config.disable_cookie),this.config.api_host=this.config.api_host.replace(/\/$/,""),(n=this.persistence)===null||n===void 0||n.update_config(this.config),(r=this.sessionPersistence)===null||r===void 0||r.update_config(this.config),nn.is_supported()&&nn.get("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(Fl.DEBUG=!0),this.sessionRecording&&!rt(e.disable_session_recording)&&i.disable_session_recording!==e.disable_session_recording&&(e.disable_session_recording?this.sessionRecording.stopRecording():this.sessionRecording.startRecordingIfEnabled()))}},{key:"startSessionRecording",value:function(){this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var e;return!((e=this.sessionRecording)===null||e===void 0||!e.started)}},{key:"loadToolbar",value:function(e){return this.toolbar.loadToolbar(e)}},{key:"get_property",value:function(e){var n;return(n=this.persistence)===null||n===void 0?void 0:n.props[e]}},{key:"getSessionProperty",value:function(e){var n;return(n=this.sessionPersistence)===null||n===void 0?void 0:n.props[e]}},{key:"toString",value:function(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:Sr;return n!==Sr&&(n=Sr+"."+n),n}},{key:"_gdpr_init",value:function(){this.config.opt_out_capturing_persistence_type==="localStorage"&&nn.is_supported()&&(!this.has_opted_in_capturing()&&this.has_opted_in_capturing({persistence_type:"cookie"})&&this.opt_in_capturing({enable_persistence:!1}),!this.has_opted_out_capturing()&&this.has_opted_out_capturing({persistence_type:"cookie"})&&this.opt_out_capturing({clear_persistence:!1}),this.clear_opt_in_out_capturing({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_capturing()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_capturing()||!this.config.opt_out_capturing_by_default&&!Ls.get("ph_optout")||(Ls.remove("ph_optout"),this.opt_out_capturing({clear_persistence:this.config.opt_out_persistence_by_default}))}},{key:"_gdpr_update_persistence",value:function(e){var n,r,i,s,o;if(e&&e.clear_persistence)i=!0;else{if(!e||!e.enable_persistence)return;i=!1}this.config.disable_persistence||((n=this.persistence)===null||n===void 0?void 0:n.disabled)===i||(s=this.persistence)===null||s===void 0||s.set_disabled(i),this.config.disable_persistence||((r=this.sessionPersistence)===null||r===void 0?void 0:r.disabled)===i||(o=this.sessionPersistence)===null||o===void 0||o.set_disabled(i)}},{key:"_gdpr_call_func",value:function(e,n){return n=Cn({capture:this.capture.bind(this),persistence_type:this.config.opt_out_capturing_persistence_type,cookie_prefix:this.config.opt_out_capturing_cookie_prefix,cookie_expiration:this.config.cookie_expiration,cross_subdomain_cookie:this.config.cross_subdomain_cookie,secure_cookie:this.config.secure_cookie},n||{}),nn.is_supported()||n.persistence_type!=="localStorage"||(n.persistence_type="cookie"),e(this.config.token,{capture:n.capture,captureEventName:n.capture_event_name,captureProperties:n.capture_properties,persistenceType:n.persistence_type,persistencePrefix:n.cookie_prefix,cookieExpiration:n.cookie_expiration,crossSubdomainCookie:n.cross_subdomain_cookie,secureCookie:n.secure_cookie})}},{key:"opt_in_capturing",value:function(e){e=Cn({enable_persistence:!0},e||{}),this._gdpr_call_func(A8,e),this._gdpr_update_persistence(e)}},{key:"opt_out_capturing",value:function(e){var n=Cn({clear_persistence:!0},e||{});this._gdpr_call_func(P8,n),this._gdpr_update_persistence(n)}},{key:"has_opted_in_capturing",value:function(e){return this._gdpr_call_func(T8,e)}},{key:"has_opted_out_capturing",value:function(e){return this._gdpr_call_func(iE,e)}},{key:"clear_opt_in_out_capturing",value:function(e){var n=Cn({enable_persistence:!0},e??{});this._gdpr_call_func($8,n),this._gdpr_update_persistence(n)}},{key:"debug",value:function(e){e===!1?(G==null||G.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(G==null||G.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}]),t}();(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=tO(t.prototype[e[n]])})(bS,["identify"]);var fE,hE,Ho={},oF=function(){An.init=function(t,e,n){if(n)return An[n]||(An[n]=Ho[n]=bb(t||"",e||{},n,function(i){An[n]=Ho[n]=i,i._loaded()})),An[n];var r=An;return Ho[Sr]?r=Ho[Sr]:t&&(r=bb(t,e||{},Sr,function(i){Ho[Sr]=i,i._loaded()}),Ho[Sr]=r),An=r,wS===Pf.INIT_SNIPPET&&(Kn[Sr]=An),xt(Ho,function(i,s){s!==Sr&&(An[s]=i)}),r}},aF=function(){function t(){t.done||(t.done=!0,wO=!1,xt(Ho,function(e){e._dom_loaded()}))}Ne!=null&&Ne.addEventListener&&(Ne.readyState==="complete"?t():Ne.addEventListener("DOMContentLoaded",t,!1)),G&&nf(G,"load",t,!0)};(function(t){t.Popover="popover",t.API="api",t.Widget="widget"})(fE||(fE={})),function(t){t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link"}(hE||(hE={}));var tu=(wS=Pf.INIT_MODULE,An=new bS,oF(),An.init(),aF(),An),lF=g.createContext({client:tu});function cF(t){var e=t.children,n=t.client,r=t.apiKey,i=t.options,s=g.useMemo(function(){return n&&r&&console.warn("[PostHog.js] You have provided both a client and an apiKey to PostHogProvider. The apiKey will be ignored in favour of the client."),n&&i&&console.warn("[PostHog.js] You have provided both a client and options to PostHogProvider. The options will be ignored in favour of the client."),n||(r&&(tu.__loaded&&console.warn("[PostHog.js] was already loaded elsewhere. This may cause issues."),tu.init(r,i)),tu)},[n,r]);return Bt.createElement(lF.Provider,{value:{client:s}},e)}var xb={},bO={exports:{}},ii={},xO={exports:{}},SO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,j){var Q=W.length;W.push(j);e:for(;0<Q;){var K=Q-1>>>1,ee=W[K];if(0<i(ee,j))W[K]=j,W[Q]=ee,Q=K;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var j=W[0],Q=W.pop();if(Q!==j){W[0]=Q;e:for(var K=0,ee=W.length,ce=ee>>>1;K<ce;){var F=2*(K+1)-1,I=W[F],z=F+1,S=W[z];if(0>i(I,Q))z<ee&&0>i(S,I)?(W[K]=S,W[z]=Q,K=z):(W[K]=I,W[F]=Q,K=F);else if(z<ee&&0>i(S,Q))W[K]=S,W[z]=Q,K=z;else break e}}return j}function i(W,j){var Q=W.sortIndex-j.sortIndex;return Q!==0?Q:W.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(W){for(var j=n(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=W)r(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function _(W){if(m=!1,x(W),!p)if(n(l)!==null)p=!0,q(k);else{var j=n(c);j!==null&&ne(_,j.startTime-W)}}function k(W,j){p=!1,m&&(m=!1,v(C),C=-1),h=!0;var Q=f;try{for(x(j),d=n(l);d!==null&&(!(d.expirationTime>j)||W&&!R());){var K=d.callback;if(typeof K=="function"){d.callback=null,f=d.priorityLevel;var ee=K(d.expirationTime<=j);j=t.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(l)&&r(l),x(j)}else r(l);d=n(l)}if(d!==null)var ce=!0;else{var F=n(c);F!==null&&ne(_,F.startTime-j),ce=!1}return ce}finally{d=null,f=Q,h=!1}}var P=!1,E=null,C=-1,N=5,M=-1;function R(){return!(t.unstable_now()-M<N)}function L(){if(E!==null){var W=t.unstable_now();M=W;var j=!0;try{j=E(!0,W)}finally{j?H():(P=!1,E=null)}}else P=!1}var H;if(typeof y=="function")H=function(){y(L)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,V=$.port2;$.port1.onmessage=L,H=function(){V.postMessage(null)}}else H=function(){w(L,0)};function q(W){E=W,P||(P=!0,H())}function ne(W,j){C=w(function(){W(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,q(k))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var Q=f;f=j;try{return W()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,j){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Q=f;f=W;try{return j()}finally{f=Q}},t.unstable_scheduleCallback=function(W,j,Q){var K=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?K+Q:K):Q=K,W){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=Q+ee,W={id:u++,callback:j,priorityLevel:W,startTime:Q,expirationTime:ee,sortIndex:-1},Q>K?(W.sortIndex=Q,e(c,W),n(l)===null&&W===n(c)&&(m?(v(C),C=-1):m=!0,ne(_,Q-K))):(W.sortIndex=ee,e(l,W),p||h||(p=!0,q(k))),W},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(W){var j=f;return function(){var Q=f;f=j;try{return W.apply(this,arguments)}finally{f=Q}}}})(SO);xO.exports=SO;var uF=xO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kO=g,ni=uF;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _O=new Set,Tf={};function oc(t,e){Pu(t,e),Pu(t+"Capture",e)}function Pu(t,e){for(Tf[t]=e,t=0;t<e.length;t++)_O.add(e[t])}var go=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sb=Object.prototype.hasOwnProperty,dF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pE={},mE={};function fF(t){return Sb.call(mE,t)?!0:Sb.call(pE,t)?!1:dF.test(t)?mE[t]=!0:(pE[t]=!0,!1)}function hF(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pF(t,e,n,r){if(e===null||typeof e>"u"||hF(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ur(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jn[t]=new ur(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jn[e]=new ur(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jn[t]=new ur(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jn[t]=new ur(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jn[t]=new ur(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jn[t]=new ur(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jn[t]=new ur(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jn[t]=new ur(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jn[t]=new ur(t,5,!1,t.toLowerCase(),null,!1,!1)});var xS=/[\-:]([a-z])/g;function SS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xS,SS);jn[e]=new ur(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xS,SS);jn[e]=new ur(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xS,SS);jn[e]=new ur(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jn[t]=new ur(t,1,!1,t.toLowerCase(),null,!1,!1)});jn.xlinkHref=new ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jn[t]=new ur(t,1,!1,t.toLowerCase(),null,!0,!0)});function kS(t,e,n,r){var i=jn.hasOwnProperty(e)?jn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pF(e,n,i,r)&&(n=null),r||i===null?fF(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $o=kO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gp=Symbol.for("react.element"),Rc=Symbol.for("react.portal"),Dc=Symbol.for("react.fragment"),_S=Symbol.for("react.strict_mode"),kb=Symbol.for("react.profiler"),CO=Symbol.for("react.provider"),EO=Symbol.for("react.context"),CS=Symbol.for("react.forward_ref"),_b=Symbol.for("react.suspense"),Cb=Symbol.for("react.suspense_list"),ES=Symbol.for("react.memo"),Ko=Symbol.for("react.lazy"),AO=Symbol.for("react.offscreen"),gE=Symbol.iterator;function md(t){return t===null||typeof t!="object"?null:(t=gE&&t[gE]||t["@@iterator"],typeof t=="function"?t:null)}var Wt=Object.assign,py;function Ud(t){if(py===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);py=e&&e[1]||""}return`
`+py+t}var my=!1;function gy(t,e){if(!t||my)return"";my=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{my=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ud(t):""}function mF(t){switch(t.tag){case 5:return Ud(t.type);case 16:return Ud("Lazy");case 13:return Ud("Suspense");case 19:return Ud("SuspenseList");case 0:case 2:case 15:return t=gy(t.type,!1),t;case 11:return t=gy(t.type.render,!1),t;case 1:return t=gy(t.type,!0),t;default:return""}}function Eb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Dc:return"Fragment";case Rc:return"Portal";case kb:return"Profiler";case _S:return"StrictMode";case _b:return"Suspense";case Cb:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case EO:return(t.displayName||"Context")+".Consumer";case CO:return(t._context.displayName||"Context")+".Provider";case CS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ES:return e=t.displayName||null,e!==null?e:Eb(t.type)||"Memo";case Ko:e=t._payload,t=t._init;try{return Eb(t(e))}catch{}}return null}function gF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Eb(e);case 8:return e===_S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Na(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function PO(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vF(t){var e=PO(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vp(t){t._valueTracker||(t._valueTracker=vF(t))}function TO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=PO(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ab(t,e){var n=e.checked;return Wt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Na(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $O(t,e){e=e.checked,e!=null&&kS(t,"checked",e,!1)}function Pb(t,e){$O(t,e);var n=Na(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tb(t,e.type,n):e.hasOwnProperty("defaultValue")&&Tb(t,e.type,Na(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Tb(t,e,n){(e!=="number"||xg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vd=Array.isArray;function nu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Na(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function $b(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Wt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(Vd(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Na(n)}}function OO(t,e){var n=Na(e.value),r=Na(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function bE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function NO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ob(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?NO(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yp,MO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yp=yp||document.createElement("div"),yp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $f(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var of={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yF=["Webkit","ms","Moz","O"];Object.keys(of).forEach(function(t){yF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),of[e]=of[t]})});function RO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||of.hasOwnProperty(t)&&of[t]?(""+e).trim():e+"px"}function DO(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=RO(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var wF=Wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nb(t,e){if(e){if(wF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function Mb(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rb=null;function AS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Db=null,ru=null,iu=null;function xE(t){if(t=Bh(t)){if(typeof Db!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=q0(e),Db(t.stateNode,t.type,e))}}function IO(t){ru?iu?iu.push(t):iu=[t]:ru=t}function LO(){if(ru){var t=ru,e=iu;if(iu=ru=null,xE(t),e)for(t=0;t<e.length;t++)xE(e[t])}}function FO(t,e){return t(e)}function jO(){}var vy=!1;function BO(t,e,n){if(vy)return t(e,n);vy=!0;try{return FO(t,e,n)}finally{vy=!1,(ru!==null||iu!==null)&&(jO(),LO())}}function Of(t,e){var n=t.stateNode;if(n===null)return null;var r=q0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var Ib=!1;if(go)try{var gd={};Object.defineProperty(gd,"passive",{get:function(){Ib=!0}}),window.addEventListener("test",gd,gd),window.removeEventListener("test",gd,gd)}catch{Ib=!1}function bF(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var af=!1,Sg=null,kg=!1,Lb=null,xF={onError:function(t){af=!0,Sg=t}};function SF(t,e,n,r,i,s,o,a,l){af=!1,Sg=null,bF.apply(xF,arguments)}function kF(t,e,n,r,i,s,o,a,l){if(SF.apply(this,arguments),af){if(af){var c=Sg;af=!1,Sg=null}else throw Error(ae(198));kg||(kg=!0,Lb=c)}}function ac(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zO(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function SE(t){if(ac(t)!==t)throw Error(ae(188))}function _F(t){var e=t.alternate;if(!e){if(e=ac(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return SE(i),t;if(s===r)return SE(i),e;s=s.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function UO(t){return t=_F(t),t!==null?VO(t):null}function VO(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=VO(t);if(e!==null)return e;t=t.sibling}return null}var HO=ni.unstable_scheduleCallback,kE=ni.unstable_cancelCallback,CF=ni.unstable_shouldYield,EF=ni.unstable_requestPaint,Zt=ni.unstable_now,AF=ni.unstable_getCurrentPriorityLevel,PS=ni.unstable_ImmediatePriority,WO=ni.unstable_UserBlockingPriority,_g=ni.unstable_NormalPriority,PF=ni.unstable_LowPriority,GO=ni.unstable_IdlePriority,G0=null,Fs=null;function TF(t){if(Fs&&typeof Fs.onCommitFiberRoot=="function")try{Fs.onCommitFiberRoot(G0,t,void 0,(t.current.flags&128)===128)}catch{}}var Ji=Math.clz32?Math.clz32:NF,$F=Math.log,OF=Math.LN2;function NF(t){return t>>>=0,t===0?32:31-($F(t)/OF|0)|0}var wp=64,bp=4194304;function Hd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cg(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Hd(a):(s&=o,s!==0&&(r=Hd(s)))}else o=n&~i,o!==0?r=Hd(o):s!==0&&(r=Hd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ji(e),i=1<<n,r|=t[n],e&=~i;return r}function MF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ji(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=MF(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Fb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KO(){var t=wp;return wp<<=1,!(wp&4194240)&&(wp=64),t}function yy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ji(e),t[e]=n}function DF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ji(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function TS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ji(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var pt=0;function XO(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var YO,$S,qO,JO,ZO,jb=!1,xp=[],ba=null,xa=null,Sa=null,Nf=new Map,Mf=new Map,ea=[],IF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _E(t,e){switch(t){case"focusin":case"focusout":ba=null;break;case"dragenter":case"dragleave":xa=null;break;case"mouseover":case"mouseout":Sa=null;break;case"pointerover":case"pointerout":Nf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mf.delete(e.pointerId)}}function vd(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Bh(e),e!==null&&$S(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function LF(t,e,n,r,i){switch(e){case"focusin":return ba=vd(ba,t,e,n,r,i),!0;case"dragenter":return xa=vd(xa,t,e,n,r,i),!0;case"mouseover":return Sa=vd(Sa,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Nf.set(s,vd(Nf.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Mf.set(s,vd(Mf.get(s)||null,t,e,n,r,i)),!0}return!1}function QO(t){var e=Sl(t.target);if(e!==null){var n=ac(e);if(n!==null){if(e=n.tag,e===13){if(e=zO(n),e!==null){t.blockedOn=e,ZO(t.priority,function(){qO(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rb=r,n.target.dispatchEvent(r),Rb=null}else return e=Bh(n),e!==null&&$S(e),t.blockedOn=n,!1;e.shift()}return!0}function CE(t,e,n){Mm(t)&&n.delete(e)}function FF(){jb=!1,ba!==null&&Mm(ba)&&(ba=null),xa!==null&&Mm(xa)&&(xa=null),Sa!==null&&Mm(Sa)&&(Sa=null),Nf.forEach(CE),Mf.forEach(CE)}function yd(t,e){t.blockedOn===e&&(t.blockedOn=null,jb||(jb=!0,ni.unstable_scheduleCallback(ni.unstable_NormalPriority,FF)))}function Rf(t){function e(i){return yd(i,t)}if(0<xp.length){yd(xp[0],t);for(var n=1;n<xp.length;n++){var r=xp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ba!==null&&yd(ba,t),xa!==null&&yd(xa,t),Sa!==null&&yd(Sa,t),Nf.forEach(e),Mf.forEach(e),n=0;n<ea.length;n++)r=ea[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ea.length&&(n=ea[0],n.blockedOn===null);)QO(n),n.blockedOn===null&&ea.shift()}var su=$o.ReactCurrentBatchConfig,Eg=!0;function jF(t,e,n,r){var i=pt,s=su.transition;su.transition=null;try{pt=1,OS(t,e,n,r)}finally{pt=i,su.transition=s}}function BF(t,e,n,r){var i=pt,s=su.transition;su.transition=null;try{pt=4,OS(t,e,n,r)}finally{pt=i,su.transition=s}}function OS(t,e,n,r){if(Eg){var i=Bb(t,e,n,r);if(i===null)Py(t,e,r,Ag,n),_E(t,r);else if(LF(i,t,e,n,r))r.stopPropagation();else if(_E(t,r),e&4&&-1<IF.indexOf(t)){for(;i!==null;){var s=Bh(i);if(s!==null&&YO(s),s=Bb(t,e,n,r),s===null&&Py(t,e,r,Ag,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Py(t,e,r,null,n)}}var Ag=null;function Bb(t,e,n,r){if(Ag=null,t=AS(r),t=Sl(t),t!==null)if(e=ac(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zO(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ag=t,null}function eN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AF()){case PS:return 1;case WO:return 4;case _g:case PF:return 16;case GO:return 536870912;default:return 16}default:return 16}}var ca=null,NS=null,Rm=null;function tN(){if(Rm)return Rm;var t,e=NS,n=e.length,r,i="value"in ca?ca.value:ca.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Rm=i.slice(t,1<r?1-r:void 0)}function Dm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sp(){return!0}function EE(){return!1}function si(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Sp:EE,this.isPropagationStopped=EE,this}return Wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sp)},persist:function(){},isPersistent:Sp}),e}var Qu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},MS=si(Qu),jh=Wt({},Qu,{view:0,detail:0}),zF=si(jh),wy,by,wd,K0=Wt({},jh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:RS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wd&&(wd&&t.type==="mousemove"?(wy=t.screenX-wd.screenX,by=t.screenY-wd.screenY):by=wy=0,wd=t),wy)},movementY:function(t){return"movementY"in t?t.movementY:by}}),AE=si(K0),UF=Wt({},K0,{dataTransfer:0}),VF=si(UF),HF=Wt({},jh,{relatedTarget:0}),xy=si(HF),WF=Wt({},Qu,{animationName:0,elapsedTime:0,pseudoElement:0}),GF=si(WF),KF=Wt({},Qu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XF=si(KF),YF=Wt({},Qu,{data:0}),PE=si(YF),qF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ZF[t])?!!e[t]:!1}function RS(){return QF}var ej=Wt({},jh,{key:function(t){if(t.key){var e=qF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:RS,charCode:function(t){return t.type==="keypress"?Dm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tj=si(ej),nj=Wt({},K0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TE=si(nj),rj=Wt({},jh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:RS}),ij=si(rj),sj=Wt({},Qu,{propertyName:0,elapsedTime:0,pseudoElement:0}),oj=si(sj),aj=Wt({},K0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lj=si(aj),cj=[9,13,27,32],DS=go&&"CompositionEvent"in window,lf=null;go&&"documentMode"in document&&(lf=document.documentMode);var uj=go&&"TextEvent"in window&&!lf,nN=go&&(!DS||lf&&8<lf&&11>=lf),$E=" ",OE=!1;function rN(t,e){switch(t){case"keyup":return cj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ic=!1;function dj(t,e){switch(t){case"compositionend":return iN(e);case"keypress":return e.which!==32?null:(OE=!0,$E);case"textInput":return t=e.data,t===$E&&OE?null:t;default:return null}}function fj(t,e){if(Ic)return t==="compositionend"||!DS&&rN(t,e)?(t=tN(),Rm=NS=ca=null,Ic=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nN&&e.locale!=="ko"?null:e.data;default:return null}}var hj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hj[t.type]:e==="textarea"}function sN(t,e,n,r){IO(r),e=Pg(e,"onChange"),0<e.length&&(n=new MS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var cf=null,Df=null;function pj(t){gN(t,0)}function X0(t){var e=jc(t);if(TO(e))return t}function mj(t,e){if(t==="change")return e}var oN=!1;if(go){var Sy;if(go){var ky="oninput"in document;if(!ky){var ME=document.createElement("div");ME.setAttribute("oninput","return;"),ky=typeof ME.oninput=="function"}Sy=ky}else Sy=!1;oN=Sy&&(!document.documentMode||9<document.documentMode)}function RE(){cf&&(cf.detachEvent("onpropertychange",aN),Df=cf=null)}function aN(t){if(t.propertyName==="value"&&X0(Df)){var e=[];sN(e,Df,t,AS(t)),BO(pj,e)}}function gj(t,e,n){t==="focusin"?(RE(),cf=e,Df=n,cf.attachEvent("onpropertychange",aN)):t==="focusout"&&RE()}function vj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return X0(Df)}function yj(t,e){if(t==="click")return X0(e)}function wj(t,e){if(t==="input"||t==="change")return X0(e)}function bj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rs=typeof Object.is=="function"?Object.is:bj;function If(t,e){if(rs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Sb.call(e,i)||!rs(t[i],e[i]))return!1}return!0}function DE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function IE(t,e){var n=DE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=DE(n)}}function lN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cN(){for(var t=window,e=xg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xg(t.document)}return e}function IS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xj(t){var e=cN(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&lN(n.ownerDocument.documentElement,n)){if(r!==null&&IS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=IE(n,s);var o=IE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sj=go&&"documentMode"in document&&11>=document.documentMode,Lc=null,zb=null,uf=null,Ub=!1;function LE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ub||Lc==null||Lc!==xg(r)||(r=Lc,"selectionStart"in r&&IS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uf&&If(uf,r)||(uf=r,r=Pg(zb,"onSelect"),0<r.length&&(e=new MS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Lc)))}function kp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fc={animationend:kp("Animation","AnimationEnd"),animationiteration:kp("Animation","AnimationIteration"),animationstart:kp("Animation","AnimationStart"),transitionend:kp("Transition","TransitionEnd")},_y={},uN={};go&&(uN=document.createElement("div").style,"AnimationEvent"in window||(delete Fc.animationend.animation,delete Fc.animationiteration.animation,delete Fc.animationstart.animation),"TransitionEvent"in window||delete Fc.transitionend.transition);function Y0(t){if(_y[t])return _y[t];if(!Fc[t])return t;var e=Fc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in uN)return _y[t]=e[n];return t}var dN=Y0("animationend"),fN=Y0("animationiteration"),hN=Y0("animationstart"),pN=Y0("transitionend"),mN=new Map,FE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ya(t,e){mN.set(t,e),oc(e,[t])}for(var Cy=0;Cy<FE.length;Cy++){var Ey=FE[Cy],kj=Ey.toLowerCase(),_j=Ey[0].toUpperCase()+Ey.slice(1);Ya(kj,"on"+_j)}Ya(dN,"onAnimationEnd");Ya(fN,"onAnimationIteration");Ya(hN,"onAnimationStart");Ya("dblclick","onDoubleClick");Ya("focusin","onFocus");Ya("focusout","onBlur");Ya(pN,"onTransitionEnd");Pu("onMouseEnter",["mouseout","mouseover"]);Pu("onMouseLeave",["mouseout","mouseover"]);Pu("onPointerEnter",["pointerout","pointerover"]);Pu("onPointerLeave",["pointerout","pointerover"]);oc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oc("onBeforeInput",["compositionend","keypress","textInput","paste"]);oc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wd));function jE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,kF(r,e,void 0,t),t.currentTarget=null}function gN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;jE(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;jE(i,a,c),s=l}}}if(kg)throw t=Lb,kg=!1,Lb=null,t}function Pt(t,e){var n=e[Kb];n===void 0&&(n=e[Kb]=new Set);var r=t+"__bubble";n.has(r)||(vN(e,t,2,!1),n.add(r))}function Ay(t,e,n){var r=0;e&&(r|=4),vN(n,t,r,e)}var _p="_reactListening"+Math.random().toString(36).slice(2);function Lf(t){if(!t[_p]){t[_p]=!0,_O.forEach(function(n){n!=="selectionchange"&&(Cj.has(n)||Ay(n,!1,t),Ay(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_p]||(e[_p]=!0,Ay("selectionchange",!1,e))}}function vN(t,e,n,r){switch(eN(e)){case 1:var i=jF;break;case 4:i=BF;break;default:i=OS}n=i.bind(null,e,n,t),i=void 0,!Ib||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Py(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Sl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}BO(function(){var c=s,u=AS(n),d=[];e:{var f=mN.get(t);if(f!==void 0){var h=MS,p=t;switch(t){case"keypress":if(Dm(n)===0)break e;case"keydown":case"keyup":h=tj;break;case"focusin":p="focus",h=xy;break;case"focusout":p="blur",h=xy;break;case"beforeblur":case"afterblur":h=xy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=AE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=VF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=ij;break;case dN:case fN:case hN:h=GF;break;case pN:h=oj;break;case"scroll":h=zF;break;case"wheel":h=lj;break;case"copy":case"cut":case"paste":h=XF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=TE}var m=(e&4)!==0,w=!m&&t==="scroll",v=m?f!==null?f+"Capture":null:f;m=[];for(var y=c,x;y!==null;){x=y;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,v!==null&&(_=Of(y,v),_!=null&&m.push(Ff(y,_,x)))),w)break;y=y.return}0<m.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Rb&&(p=n.relatedTarget||n.fromElement)&&(Sl(p)||p[vo]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?Sl(p):null,p!==null&&(w=ac(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(m=AE,_="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=TE,_="onPointerLeave",v="onPointerEnter",y="pointer"),w=h==null?f:jc(h),x=p==null?f:jc(p),f=new m(_,y+"leave",h,n,u),f.target=w,f.relatedTarget=x,_=null,Sl(u)===c&&(m=new m(v,y+"enter",p,n,u),m.target=x,m.relatedTarget=w,_=m),w=_,h&&p)t:{for(m=h,v=p,y=0,x=m;x;x=hc(x))y++;for(x=0,_=v;_;_=hc(_))x++;for(;0<y-x;)m=hc(m),y--;for(;0<x-y;)v=hc(v),x--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=hc(m),v=hc(v)}m=null}else m=null;h!==null&&BE(d,f,h,m,!1),p!==null&&w!==null&&BE(d,w,p,m,!0)}}e:{if(f=c?jc(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var k=mj;else if(NE(f))if(oN)k=wj;else{k=vj;var P=gj}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=yj);if(k&&(k=k(t,c))){sN(d,k,n,u);break e}P&&P(t,f,c),t==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&Tb(f,"number",f.value)}switch(P=c?jc(c):window,t){case"focusin":(NE(P)||P.contentEditable==="true")&&(Lc=P,zb=c,uf=null);break;case"focusout":uf=zb=Lc=null;break;case"mousedown":Ub=!0;break;case"contextmenu":case"mouseup":case"dragend":Ub=!1,LE(d,n,u);break;case"selectionchange":if(Sj)break;case"keydown":case"keyup":LE(d,n,u)}var E;if(DS)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ic?rN(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(nN&&n.locale!=="ko"&&(Ic||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ic&&(E=tN()):(ca=u,NS="value"in ca?ca.value:ca.textContent,Ic=!0)),P=Pg(c,C),0<P.length&&(C=new PE(C,t,null,n,u),d.push({event:C,listeners:P}),E?C.data=E:(E=iN(n),E!==null&&(C.data=E)))),(E=uj?dj(t,n):fj(t,n))&&(c=Pg(c,"onBeforeInput"),0<c.length&&(u=new PE("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}gN(d,e)})}function Ff(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pg(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Of(t,n),s!=null&&r.unshift(Ff(t,s,i)),s=Of(t,e),s!=null&&r.push(Ff(t,s,i))),t=t.return}return r}function hc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function BE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Of(n,s),l!=null&&o.unshift(Ff(n,l,a))):i||(l=Of(n,s),l!=null&&o.push(Ff(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Ej=/\r\n?/g,Aj=/\u0000|\uFFFD/g;function zE(t){return(typeof t=="string"?t:""+t).replace(Ej,`
`).replace(Aj,"")}function Cp(t,e,n){if(e=zE(e),zE(t)!==e&&n)throw Error(ae(425))}function Tg(){}var Vb=null,Hb=null;function Wb(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gb=typeof setTimeout=="function"?setTimeout:void 0,Pj=typeof clearTimeout=="function"?clearTimeout:void 0,UE=typeof Promise=="function"?Promise:void 0,Tj=typeof queueMicrotask=="function"?queueMicrotask:typeof UE<"u"?function(t){return UE.resolve(null).then(t).catch($j)}:Gb;function $j(t){setTimeout(function(){throw t})}function Ty(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Rf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Rf(e)}function ka(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function VE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ed=Math.random().toString(36).slice(2),As="__reactFiber$"+ed,jf="__reactProps$"+ed,vo="__reactContainer$"+ed,Kb="__reactEvents$"+ed,Oj="__reactListeners$"+ed,Nj="__reactHandles$"+ed;function Sl(t){var e=t[As];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vo]||n[As]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=VE(t);t!==null;){if(n=t[As])return n;t=VE(t)}return e}t=n,n=t.parentNode}return null}function Bh(t){return t=t[As]||t[vo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function q0(t){return t[jf]||null}var Xb=[],Bc=-1;function qa(t){return{current:t}}function Mt(t){0>Bc||(t.current=Xb[Bc],Xb[Bc]=null,Bc--)}function At(t,e){Bc++,Xb[Bc]=t.current,t.current=e}var Ma={},Yn=qa(Ma),$r=qa(!1),Bl=Ma;function Tu(t,e){var n=t.type.contextTypes;if(!n)return Ma;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Or(t){return t=t.childContextTypes,t!=null}function $g(){Mt($r),Mt(Yn)}function HE(t,e,n){if(Yn.current!==Ma)throw Error(ae(168));At(Yn,e),At($r,n)}function yN(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ae(108,gF(t)||"Unknown",i));return Wt({},n,r)}function Og(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ma,Bl=Yn.current,At(Yn,t),At($r,$r.current),!0}function WE(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=yN(t,e,Bl),r.__reactInternalMemoizedMergedChildContext=t,Mt($r),Mt(Yn),At(Yn,t)):Mt($r),At($r,n)}var Ys=null,J0=!1,$y=!1;function wN(t){Ys===null?Ys=[t]:Ys.push(t)}function Mj(t){J0=!0,wN(t)}function Ja(){if(!$y&&Ys!==null){$y=!0;var t=0,e=pt;try{var n=Ys;for(pt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ys=null,J0=!1}catch(i){throw Ys!==null&&(Ys=Ys.slice(t+1)),HO(PS,Ja),i}finally{pt=e,$y=!1}}return null}var zc=[],Uc=0,Ng=null,Mg=0,vi=[],yi=0,zl=null,co=1,uo="";function dl(t,e){zc[Uc++]=Mg,zc[Uc++]=Ng,Ng=t,Mg=e}function bN(t,e,n){vi[yi++]=co,vi[yi++]=uo,vi[yi++]=zl,zl=t;var r=co;t=uo;var i=32-Ji(r)-1;r&=~(1<<i),n+=1;var s=32-Ji(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,co=1<<32-Ji(e)+i|n<<i|r,uo=s+t}else co=1<<s|n<<i|r,uo=t}function LS(t){t.return!==null&&(dl(t,1),bN(t,1,0))}function FS(t){for(;t===Ng;)Ng=zc[--Uc],zc[Uc]=null,Mg=zc[--Uc],zc[Uc]=null;for(;t===zl;)zl=vi[--yi],vi[yi]=null,uo=vi[--yi],vi[yi]=null,co=vi[--yi],vi[yi]=null}var ei=null,Yr=null,Ft=!1,Hi=null;function xN(t,e){var n=xi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function GE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ei=t,Yr=ka(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ei=t,Yr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zl!==null?{id:co,overflow:uo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ei=t,Yr=null,!0):!1;default:return!1}}function Yb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qb(t){if(Ft){var e=Yr;if(e){var n=e;if(!GE(t,e)){if(Yb(t))throw Error(ae(418));e=ka(n.nextSibling);var r=ei;e&&GE(t,e)?xN(r,n):(t.flags=t.flags&-4097|2,Ft=!1,ei=t)}}else{if(Yb(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Ft=!1,ei=t}}}function KE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ei=t}function Ep(t){if(t!==ei)return!1;if(!Ft)return KE(t),Ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wb(t.type,t.memoizedProps)),e&&(e=Yr)){if(Yb(t))throw SN(),Error(ae(418));for(;e;)xN(t,e),e=ka(e.nextSibling)}if(KE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yr=ka(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yr=null}}else Yr=ei?ka(t.stateNode.nextSibling):null;return!0}function SN(){for(var t=Yr;t;)t=ka(t.nextSibling)}function $u(){Yr=ei=null,Ft=!1}function jS(t){Hi===null?Hi=[t]:Hi.push(t)}var Rj=$o.ReactCurrentBatchConfig;function Fi(t,e){if(t&&t.defaultProps){e=Wt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Rg=qa(null),Dg=null,Vc=null,BS=null;function zS(){BS=Vc=Dg=null}function US(t){var e=Rg.current;Mt(Rg),t._currentValue=e}function Jb(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ou(t,e){Dg=t,BS=Vc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pr=!0),t.firstContext=null)}function $i(t){var e=t._currentValue;if(BS!==t)if(t={context:t,memoizedValue:e,next:null},Vc===null){if(Dg===null)throw Error(ae(308));Vc=t,Dg.dependencies={lanes:0,firstContext:t}}else Vc=Vc.next=t;return e}var kl=null;function VS(t){kl===null?kl=[t]:kl.push(t)}function kN(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,VS(e)):(n.next=i.next,i.next=n),e.interleaved=n,yo(t,r)}function yo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xo=!1;function HS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _N(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _a(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,at&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,yo(t,n)}return i=r.interleaved,i===null?(e.next=e,VS(r)):(e.next=i.next,i.next=e),r.interleaved=e,yo(t,n)}function Im(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,TS(t,n)}}function XE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ig(t,e,n,r){var i=t.updateQueue;Xo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(f=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Wt({},d,f);break e;case 2:Xo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Vl|=o,t.lanes=o,t.memoizedState=d}}function YE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ae(191,i));i.call(r)}}}var CN=new kO.Component().refs;function Zb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Wt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Z0={isMounted:function(t){return(t=t._reactInternals)?ac(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ir(),i=Ea(t),s=fo(r,i);s.payload=e,n!=null&&(s.callback=n),e=_a(t,s,i),e!==null&&(Zi(e,t,i,r),Im(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ir(),i=Ea(t),s=fo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=_a(t,s,i),e!==null&&(Zi(e,t,i,r),Im(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ir(),r=Ea(t),i=fo(n,r);i.tag=2,e!=null&&(i.callback=e),e=_a(t,i,r),e!==null&&(Zi(e,t,r,n),Im(e,t,r))}};function qE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!If(n,r)||!If(i,s):!0}function EN(t,e,n){var r=!1,i=Ma,s=e.contextType;return typeof s=="object"&&s!==null?s=$i(s):(i=Or(e)?Bl:Yn.current,r=e.contextTypes,s=(r=r!=null)?Tu(t,i):Ma),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Z0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function JE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Z0.enqueueReplaceState(e,e.state,null)}function Qb(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=CN,HS(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=$i(s):(s=Or(e)?Bl:Yn.current,i.context=Tu(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zb(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Z0.enqueueReplaceState(i,i.state,null),Ig(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function bd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===CN&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Ap(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ZE(t){var e=t._init;return e(t._payload)}function AN(t){function e(v,y){if(t){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=Aa(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,t?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,x,_){return y===null||y.tag!==6?(y=Ly(x,v.mode,_),y.return=v,y):(y=i(y,x),y.return=v,y)}function l(v,y,x,_){var k=x.type;return k===Dc?u(v,y,x.props.children,_,x.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ko&&ZE(k)===y.type)?(_=i(y,x.props),_.ref=bd(v,y,x),_.return=v,_):(_=Um(x.type,x.key,x.props,null,v.mode,_),_.ref=bd(v,y,x),_.return=v,_)}function c(v,y,x,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Fy(x,v.mode,_),y.return=v,y):(y=i(y,x.children||[]),y.return=v,y)}function u(v,y,x,_,k){return y===null||y.tag!==7?(y=Nl(x,v.mode,_,k),y.return=v,y):(y=i(y,x),y.return=v,y)}function d(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ly(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case gp:return x=Um(y.type,y.key,y.props,null,v.mode,x),x.ref=bd(v,null,y),x.return=v,x;case Rc:return y=Fy(y,v.mode,x),y.return=v,y;case Ko:var _=y._init;return d(v,_(y._payload),x)}if(Vd(y)||md(y))return y=Nl(y,v.mode,x,null),y.return=v,y;Ap(v,y)}return null}function f(v,y,x,_){var k=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:a(v,y,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case gp:return x.key===k?l(v,y,x,_):null;case Rc:return x.key===k?c(v,y,x,_):null;case Ko:return k=x._init,f(v,y,k(x._payload),_)}if(Vd(x)||md(x))return k!==null?null:u(v,y,x,_,null);Ap(v,x)}return null}function h(v,y,x,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(x)||null,a(y,v,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case gp:return v=v.get(_.key===null?x:_.key)||null,l(y,v,_,k);case Rc:return v=v.get(_.key===null?x:_.key)||null,c(y,v,_,k);case Ko:var P=_._init;return h(v,y,x,P(_._payload),k)}if(Vd(_)||md(_))return v=v.get(x)||null,u(y,v,_,k,null);Ap(y,_)}return null}function p(v,y,x,_){for(var k=null,P=null,E=y,C=y=0,N=null;E!==null&&C<x.length;C++){E.index>C?(N=E,E=null):N=E.sibling;var M=f(v,E,x[C],_);if(M===null){E===null&&(E=N);break}t&&E&&M.alternate===null&&e(v,E),y=s(M,y,C),P===null?k=M:P.sibling=M,P=M,E=N}if(C===x.length)return n(v,E),Ft&&dl(v,C),k;if(E===null){for(;C<x.length;C++)E=d(v,x[C],_),E!==null&&(y=s(E,y,C),P===null?k=E:P.sibling=E,P=E);return Ft&&dl(v,C),k}for(E=r(v,E);C<x.length;C++)N=h(E,v,C,x[C],_),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?C:N.key),y=s(N,y,C),P===null?k=N:P.sibling=N,P=N);return t&&E.forEach(function(R){return e(v,R)}),Ft&&dl(v,C),k}function m(v,y,x,_){var k=md(x);if(typeof k!="function")throw Error(ae(150));if(x=k.call(x),x==null)throw Error(ae(151));for(var P=k=null,E=y,C=y=0,N=null,M=x.next();E!==null&&!M.done;C++,M=x.next()){E.index>C?(N=E,E=null):N=E.sibling;var R=f(v,E,M.value,_);if(R===null){E===null&&(E=N);break}t&&E&&R.alternate===null&&e(v,E),y=s(R,y,C),P===null?k=R:P.sibling=R,P=R,E=N}if(M.done)return n(v,E),Ft&&dl(v,C),k;if(E===null){for(;!M.done;C++,M=x.next())M=d(v,M.value,_),M!==null&&(y=s(M,y,C),P===null?k=M:P.sibling=M,P=M);return Ft&&dl(v,C),k}for(E=r(v,E);!M.done;C++,M=x.next())M=h(E,v,C,M.value,_),M!==null&&(t&&M.alternate!==null&&E.delete(M.key===null?C:M.key),y=s(M,y,C),P===null?k=M:P.sibling=M,P=M);return t&&E.forEach(function(L){return e(v,L)}),Ft&&dl(v,C),k}function w(v,y,x,_){if(typeof x=="object"&&x!==null&&x.type===Dc&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case gp:e:{for(var k=x.key,P=y;P!==null;){if(P.key===k){if(k=x.type,k===Dc){if(P.tag===7){n(v,P.sibling),y=i(P,x.props.children),y.return=v,v=y;break e}}else if(P.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ko&&ZE(k)===P.type){n(v,P.sibling),y=i(P,x.props),y.ref=bd(v,P,x),y.return=v,v=y;break e}n(v,P);break}else e(v,P);P=P.sibling}x.type===Dc?(y=Nl(x.props.children,v.mode,_,x.key),y.return=v,v=y):(_=Um(x.type,x.key,x.props,null,v.mode,_),_.ref=bd(v,y,x),_.return=v,v=_)}return o(v);case Rc:e:{for(P=x.key;y!==null;){if(y.key===P)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(v,y.sibling),y=i(y,x.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=Fy(x,v.mode,_),y.return=v,v=y}return o(v);case Ko:return P=x._init,w(v,y,P(x._payload),_)}if(Vd(x))return p(v,y,x,_);if(md(x))return m(v,y,x,_);Ap(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,x),y.return=v,v=y):(n(v,y),y=Ly(x,v.mode,_),y.return=v,v=y),o(v)):n(v,y)}return w}var Ou=AN(!0),PN=AN(!1),zh={},js=qa(zh),Bf=qa(zh),zf=qa(zh);function _l(t){if(t===zh)throw Error(ae(174));return t}function WS(t,e){switch(At(zf,e),At(Bf,t),At(js,zh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ob(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ob(e,t)}Mt(js),At(js,e)}function Nu(){Mt(js),Mt(Bf),Mt(zf)}function TN(t){_l(zf.current);var e=_l(js.current),n=Ob(e,t.type);e!==n&&(At(Bf,t),At(js,n))}function GS(t){Bf.current===t&&(Mt(js),Mt(Bf))}var Ut=qa(0);function Lg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Oy=[];function KS(){for(var t=0;t<Oy.length;t++)Oy[t]._workInProgressVersionPrimary=null;Oy.length=0}var Lm=$o.ReactCurrentDispatcher,Ny=$o.ReactCurrentBatchConfig,Ul=0,Ht=null,cn=null,vn=null,Fg=!1,df=!1,Uf=0,Dj=0;function zn(){throw Error(ae(321))}function XS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rs(t[n],e[n]))return!1;return!0}function YS(t,e,n,r,i,s){if(Ul=s,Ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Lm.current=t===null||t.memoizedState===null?jj:Bj,t=n(r,i),df){s=0;do{if(df=!1,Uf=0,25<=s)throw Error(ae(301));s+=1,vn=cn=null,e.updateQueue=null,Lm.current=zj,t=n(r,i)}while(df)}if(Lm.current=jg,e=cn!==null&&cn.next!==null,Ul=0,vn=cn=Ht=null,Fg=!1,e)throw Error(ae(300));return t}function qS(){var t=Uf!==0;return Uf=0,t}function vs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Ht.memoizedState=vn=t:vn=vn.next=t,vn}function Oi(){if(cn===null){var t=Ht.alternate;t=t!==null?t.memoizedState:null}else t=cn.next;var e=vn===null?Ht.memoizedState:vn.next;if(e!==null)vn=e,cn=t;else{if(t===null)throw Error(ae(310));cn=t,t={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},vn===null?Ht.memoizedState=vn=t:vn=vn.next=t}return vn}function Vf(t,e){return typeof e=="function"?e(t):e}function My(t){var e=Oi(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=cn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ul&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ht.lanes|=u,Vl|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,rs(r,e.memoizedState)||(Pr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ht.lanes|=s,Vl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ry(t){var e=Oi(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);rs(s,e.memoizedState)||(Pr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function $N(){}function ON(t,e){var n=Ht,r=Oi(),i=e(),s=!rs(r.memoizedState,i);if(s&&(r.memoizedState=i,Pr=!0),r=r.queue,JS(RN.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||vn!==null&&vn.memoizedState.tag&1){if(n.flags|=2048,Hf(9,MN.bind(null,n,r,i,e),void 0,null),wn===null)throw Error(ae(349));Ul&30||NN(n,e,i)}return i}function NN(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function MN(t,e,n,r){e.value=n,e.getSnapshot=r,DN(e)&&IN(t)}function RN(t,e,n){return n(function(){DN(e)&&IN(t)})}function DN(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rs(t,n)}catch{return!0}}function IN(t){var e=yo(t,1);e!==null&&Zi(e,t,1,-1)}function QE(t){var e=vs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vf,lastRenderedState:t},e.queue=t,t=t.dispatch=Fj.bind(null,Ht,t),[e.memoizedState,t]}function Hf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function LN(){return Oi().memoizedState}function Fm(t,e,n,r){var i=vs();Ht.flags|=t,i.memoizedState=Hf(1|e,n,void 0,r===void 0?null:r)}function Q0(t,e,n,r){var i=Oi();r=r===void 0?null:r;var s=void 0;if(cn!==null){var o=cn.memoizedState;if(s=o.destroy,r!==null&&XS(r,o.deps)){i.memoizedState=Hf(e,n,s,r);return}}Ht.flags|=t,i.memoizedState=Hf(1|e,n,s,r)}function e2(t,e){return Fm(8390656,8,t,e)}function JS(t,e){return Q0(2048,8,t,e)}function FN(t,e){return Q0(4,2,t,e)}function jN(t,e){return Q0(4,4,t,e)}function BN(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zN(t,e,n){return n=n!=null?n.concat([t]):null,Q0(4,4,BN.bind(null,e,t),n)}function ZS(){}function UN(t,e){var n=Oi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&XS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function VN(t,e){var n=Oi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&XS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function HN(t,e,n){return Ul&21?(rs(n,e)||(n=KO(),Ht.lanes|=n,Vl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pr=!0),t.memoizedState=n)}function Ij(t,e){var n=pt;pt=n!==0&&4>n?n:4,t(!0);var r=Ny.transition;Ny.transition={};try{t(!1),e()}finally{pt=n,Ny.transition=r}}function WN(){return Oi().memoizedState}function Lj(t,e,n){var r=Ea(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},GN(t))KN(e,n);else if(n=kN(t,e,n,r),n!==null){var i=ir();Zi(n,t,r,i),XN(n,e,r)}}function Fj(t,e,n){var r=Ea(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(GN(t))KN(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,rs(a,o)){var l=e.interleaved;l===null?(i.next=i,VS(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=kN(t,e,i,r),n!==null&&(i=ir(),Zi(n,t,r,i),XN(n,e,r))}}function GN(t){var e=t.alternate;return t===Ht||e!==null&&e===Ht}function KN(t,e){df=Fg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function XN(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,TS(t,n)}}var jg={readContext:$i,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useInsertionEffect:zn,useLayoutEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useMutableSource:zn,useSyncExternalStore:zn,useId:zn,unstable_isNewReconciler:!1},jj={readContext:$i,useCallback:function(t,e){return vs().memoizedState=[t,e===void 0?null:e],t},useContext:$i,useEffect:e2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fm(4194308,4,BN.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fm(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fm(4,2,t,e)},useMemo:function(t,e){var n=vs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Lj.bind(null,Ht,t),[r.memoizedState,t]},useRef:function(t){var e=vs();return t={current:t},e.memoizedState=t},useState:QE,useDebugValue:ZS,useDeferredValue:function(t){return vs().memoizedState=t},useTransition:function(){var t=QE(!1),e=t[0];return t=Ij.bind(null,t[1]),vs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ht,i=vs();if(Ft){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),wn===null)throw Error(ae(349));Ul&30||NN(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,e2(RN.bind(null,r,s,t),[t]),r.flags|=2048,Hf(9,MN.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=vs(),e=wn.identifierPrefix;if(Ft){var n=uo,r=co;n=(r&~(1<<32-Ji(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Uf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Dj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Bj={readContext:$i,useCallback:UN,useContext:$i,useEffect:JS,useImperativeHandle:zN,useInsertionEffect:FN,useLayoutEffect:jN,useMemo:VN,useReducer:My,useRef:LN,useState:function(){return My(Vf)},useDebugValue:ZS,useDeferredValue:function(t){var e=Oi();return HN(e,cn.memoizedState,t)},useTransition:function(){var t=My(Vf)[0],e=Oi().memoizedState;return[t,e]},useMutableSource:$N,useSyncExternalStore:ON,useId:WN,unstable_isNewReconciler:!1},zj={readContext:$i,useCallback:UN,useContext:$i,useEffect:JS,useImperativeHandle:zN,useInsertionEffect:FN,useLayoutEffect:jN,useMemo:VN,useReducer:Ry,useRef:LN,useState:function(){return Ry(Vf)},useDebugValue:ZS,useDeferredValue:function(t){var e=Oi();return cn===null?e.memoizedState=t:HN(e,cn.memoizedState,t)},useTransition:function(){var t=Ry(Vf)[0],e=Oi().memoizedState;return[t,e]},useMutableSource:$N,useSyncExternalStore:ON,useId:WN,unstable_isNewReconciler:!1};function Mu(t,e){try{var n="",r=e;do n+=mF(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Dy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function e1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Uj=typeof WeakMap=="function"?WeakMap:Map;function YN(t,e,n){n=fo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zg||(zg=!0,u1=r),e1(t,e)},n}function qN(t,e,n){n=fo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){e1(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){e1(t,e),typeof r!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function t2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Uj;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=nB.bind(null,t,e,n),e.then(t,t))}function n2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function r2(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=fo(-1,1),e.tag=2,_a(n,e,1))),n.lanes|=1),t)}var Vj=$o.ReactCurrentOwner,Pr=!1;function er(t,e,n,r){e.child=t===null?PN(e,null,n,r):Ou(e,t.child,n,r)}function i2(t,e,n,r,i){n=n.render;var s=e.ref;return ou(e,i),r=YS(t,e,n,r,s,i),n=qS(),t!==null&&!Pr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wo(t,e,i)):(Ft&&n&&LS(e),e.flags|=1,er(t,e,r,i),e.child)}function s2(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ok(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,JN(t,e,s,r,i)):(t=Um(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:If,n(o,r)&&t.ref===e.ref)return wo(t,e,i)}return e.flags|=1,t=Aa(s,r),t.ref=e.ref,t.return=e,e.child=t}function JN(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(If(s,r)&&t.ref===e.ref)if(Pr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Pr=!0);else return e.lanes=t.lanes,wo(t,e,i)}return t1(t,e,n,r,i)}function ZN(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(Wc,Vr),Vr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,At(Wc,Vr),Vr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,At(Wc,Vr),Vr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,At(Wc,Vr),Vr|=r;return er(t,e,i,n),e.child}function QN(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function t1(t,e,n,r,i){var s=Or(n)?Bl:Yn.current;return s=Tu(e,s),ou(e,i),n=YS(t,e,n,r,s,i),r=qS(),t!==null&&!Pr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wo(t,e,i)):(Ft&&r&&LS(e),e.flags|=1,er(t,e,n,i),e.child)}function o2(t,e,n,r,i){if(Or(n)){var s=!0;Og(e)}else s=!1;if(ou(e,i),e.stateNode===null)jm(t,e),EN(e,n,r),Qb(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=$i(c):(c=Or(n)?Bl:Yn.current,c=Tu(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&JE(e,o,r,c),Xo=!1;var f=e.memoizedState;o.state=f,Ig(e,r,o,i),l=e.memoizedState,a!==r||f!==l||$r.current||Xo?(typeof u=="function"&&(Zb(e,n,u,r),l=e.memoizedState),(a=Xo||qE(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_N(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Fi(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$i(l):(l=Or(n)?Bl:Yn.current,l=Tu(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&JE(e,o,r,l),Xo=!1,f=e.memoizedState,o.state=f,Ig(e,r,o,i);var p=e.memoizedState;a!==d||f!==p||$r.current||Xo?(typeof h=="function"&&(Zb(e,n,h,r),p=e.memoizedState),(c=Xo||qE(e,n,c,r,f,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return n1(t,e,n,r,s,i)}function n1(t,e,n,r,i,s){QN(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&WE(e,n,!1),wo(t,e,s);r=e.stateNode,Vj.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ou(e,t.child,null,s),e.child=Ou(e,null,a,s)):er(t,e,a,s),e.memoizedState=r.state,i&&WE(e,n,!0),e.child}function eM(t){var e=t.stateNode;e.pendingContext?HE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&HE(t,e.context,!1),WS(t,e.containerInfo)}function a2(t,e,n,r,i){return $u(),jS(i),e.flags|=256,er(t,e,n,r),e.child}var r1={dehydrated:null,treeContext:null,retryLane:0};function i1(t){return{baseLanes:t,cachePool:null,transitions:null}}function tM(t,e,n){var r=e.pendingProps,i=Ut.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),At(Ut,i&1),t===null)return qb(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=nv(o,r,0,null),t=Nl(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=i1(n),e.memoizedState=r1,t):QS(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Hj(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Aa(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Aa(a,s):(s=Nl(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?i1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=r1,r}return s=t.child,t=s.sibling,r=Aa(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function QS(t,e){return e=nv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pp(t,e,n,r){return r!==null&&jS(r),Ou(e,t.child,null,n),t=QS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Hj(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Dy(Error(ae(422))),Pp(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=nv({mode:"visible",children:r.children},i,0,null),s=Nl(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ou(e,t.child,null,o),e.child.memoizedState=i1(o),e.memoizedState=r1,s);if(!(e.mode&1))return Pp(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ae(419)),r=Dy(s,r,void 0),Pp(t,e,o,r)}if(a=(o&t.childLanes)!==0,Pr||a){if(r=wn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,yo(t,i),Zi(r,t,i,-1))}return sk(),r=Dy(Error(ae(421))),Pp(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=rB.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Yr=ka(i.nextSibling),ei=e,Ft=!0,Hi=null,t!==null&&(vi[yi++]=co,vi[yi++]=uo,vi[yi++]=zl,co=t.id,uo=t.overflow,zl=e),e=QS(e,r.children),e.flags|=4096,e)}function l2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jb(t.return,e,n)}function Iy(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function nM(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(er(t,e,r.children,n),r=Ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&l2(t,n,e);else if(t.tag===19)l2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(At(Ut,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Lg(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Iy(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Lg(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Iy(e,!0,n,null,s);break;case"together":Iy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=Aa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Aa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Wj(t,e,n){switch(e.tag){case 3:eM(e),$u();break;case 5:TN(e);break;case 1:Or(e.type)&&Og(e);break;case 4:WS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;At(Rg,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(At(Ut,Ut.current&1),e.flags|=128,null):n&e.child.childLanes?tM(t,e,n):(At(Ut,Ut.current&1),t=wo(t,e,n),t!==null?t.sibling:null);At(Ut,Ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nM(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),At(Ut,Ut.current),r)break;return null;case 22:case 23:return e.lanes=0,ZN(t,e,n)}return wo(t,e,n)}var rM,s1,iM,sM;rM=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};s1=function(){};iM=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,_l(js.current);var s=null;switch(n){case"input":i=Ab(t,i),r=Ab(t,r),s=[];break;case"select":i=Wt({},i,{value:void 0}),r=Wt({},r,{value:void 0}),s=[];break;case"textarea":i=$b(t,i),r=$b(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Tg)}Nb(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Tf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Tf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Pt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};sM=function(t,e,n,r){n!==r&&(e.flags|=4)};function xd(t,e){if(!Ft)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Un(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Gj(t,e,n){var r=e.pendingProps;switch(FS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(e),null;case 1:return Or(e.type)&&$g(),Un(e),null;case 3:return r=e.stateNode,Nu(),Mt($r),Mt(Yn),KS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ep(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hi!==null&&(h1(Hi),Hi=null))),s1(t,e),Un(e),null;case 5:GS(e);var i=_l(zf.current);if(n=e.type,t!==null&&e.stateNode!=null)iM(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return Un(e),null}if(t=_l(js.current),Ep(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[As]=e,r[jf]=s,t=(e.mode&1)!==0,n){case"dialog":Pt("cancel",r),Pt("close",r);break;case"iframe":case"object":case"embed":Pt("load",r);break;case"video":case"audio":for(i=0;i<Wd.length;i++)Pt(Wd[i],r);break;case"source":Pt("error",r);break;case"img":case"image":case"link":Pt("error",r),Pt("load",r);break;case"details":Pt("toggle",r);break;case"input":vE(r,s),Pt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pt("invalid",r);break;case"textarea":wE(r,s),Pt("invalid",r)}Nb(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Cp(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Cp(r.textContent,a,t),i=["children",""+a]):Tf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pt("scroll",r)}switch(n){case"input":vp(r),yE(r,s,!0);break;case"textarea":vp(r),bE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Tg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=NO(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[As]=e,t[jf]=r,rM(t,e,!1,!1),e.stateNode=t;e:{switch(o=Mb(n,r),n){case"dialog":Pt("cancel",t),Pt("close",t),i=r;break;case"iframe":case"object":case"embed":Pt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Wd.length;i++)Pt(Wd[i],t);i=r;break;case"source":Pt("error",t),i=r;break;case"img":case"image":case"link":Pt("error",t),Pt("load",t),i=r;break;case"details":Pt("toggle",t),i=r;break;case"input":vE(t,r),i=Ab(t,r),Pt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Wt({},r,{value:void 0}),Pt("invalid",t);break;case"textarea":wE(t,r),i=$b(t,r),Pt("invalid",t);break;default:i=r}Nb(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?DO(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&MO(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&$f(t,l):typeof l=="number"&&$f(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Tf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Pt("scroll",t):l!=null&&kS(t,s,l,o))}switch(n){case"input":vp(t),yE(t,r,!1);break;case"textarea":vp(t),bE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Na(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?nu(t,!!r.multiple,s,!1):r.defaultValue!=null&&nu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Tg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Un(e),null;case 6:if(t&&e.stateNode!=null)sM(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=_l(zf.current),_l(js.current),Ep(e)){if(r=e.stateNode,n=e.memoizedProps,r[As]=e,(s=r.nodeValue!==n)&&(t=ei,t!==null))switch(t.tag){case 3:Cp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cp(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[As]=e,e.stateNode=r}return Un(e),null;case 13:if(Mt(Ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ft&&Yr!==null&&e.mode&1&&!(e.flags&128))SN(),$u(),e.flags|=98560,s=!1;else if(s=Ep(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[As]=e}else $u(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Un(e),s=!1}else Hi!==null&&(h1(Hi),Hi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ut.current&1?hn===0&&(hn=3):sk())),e.updateQueue!==null&&(e.flags|=4),Un(e),null);case 4:return Nu(),s1(t,e),t===null&&Lf(e.stateNode.containerInfo),Un(e),null;case 10:return US(e.type._context),Un(e),null;case 17:return Or(e.type)&&$g(),Un(e),null;case 19:if(Mt(Ut),s=e.memoizedState,s===null)return Un(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)xd(s,!1);else{if(hn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Lg(t),o!==null){for(e.flags|=128,xd(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return At(Ut,Ut.current&1|2),e.child}t=t.sibling}s.tail!==null&&Zt()>Ru&&(e.flags|=128,r=!0,xd(s,!1),e.lanes=4194304)}else{if(!r)if(t=Lg(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ft)return Un(e),null}else 2*Zt()-s.renderingStartTime>Ru&&n!==1073741824&&(e.flags|=128,r=!0,xd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Zt(),e.sibling=null,n=Ut.current,At(Ut,r?n&1|2:n&1),e):(Un(e),null);case 22:case 23:return ik(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vr&1073741824&&(Un(e),e.subtreeFlags&6&&(e.flags|=8192)):Un(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function Kj(t,e){switch(FS(e),e.tag){case 1:return Or(e.type)&&$g(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Nu(),Mt($r),Mt(Yn),KS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return GS(e),null;case 13:if(Mt(Ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));$u()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Mt(Ut),null;case 4:return Nu(),null;case 10:return US(e.type._context),null;case 22:case 23:return ik(),null;case 24:return null;default:return null}}var Tp=!1,Gn=!1,Xj=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Hc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Kt(t,e,r)}else n.current=null}function o1(t,e,n){try{n()}catch(r){Kt(t,e,r)}}var c2=!1;function Yj(t,e){if(Vb=Eg,t=cN(),IS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hb={focusedElem:t,selectionRange:n},Eg=!1,_e=e;_e!==null;)if(e=_e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_e=t;else for(;_e!==null;){e=_e;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,w=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:Fi(e.type,m),w);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(_){Kt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}return p=c2,c2=!1,p}function ff(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&o1(e,n,s)}i=i.next}while(i!==r)}}function ev(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function a1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oM(t){var e=t.alternate;e!==null&&(t.alternate=null,oM(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[As],delete e[jf],delete e[Kb],delete e[Oj],delete e[Nj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aM(t){return t.tag===5||t.tag===3||t.tag===4}function u2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aM(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function l1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Tg));else if(r!==4&&(t=t.child,t!==null))for(l1(t,e,n),t=t.sibling;t!==null;)l1(t,e,n),t=t.sibling}function c1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(c1(t,e,n),t=t.sibling;t!==null;)c1(t,e,n),t=t.sibling}var _n=null,Ui=!1;function Bo(t,e,n){for(n=n.child;n!==null;)lM(t,e,n),n=n.sibling}function lM(t,e,n){if(Fs&&typeof Fs.onCommitFiberUnmount=="function")try{Fs.onCommitFiberUnmount(G0,n)}catch{}switch(n.tag){case 5:Gn||Hc(n,e);case 6:var r=_n,i=Ui;_n=null,Bo(t,e,n),_n=r,Ui=i,_n!==null&&(Ui?(t=_n,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_n.removeChild(n.stateNode));break;case 18:_n!==null&&(Ui?(t=_n,n=n.stateNode,t.nodeType===8?Ty(t.parentNode,n):t.nodeType===1&&Ty(t,n),Rf(t)):Ty(_n,n.stateNode));break;case 4:r=_n,i=Ui,_n=n.stateNode.containerInfo,Ui=!0,Bo(t,e,n),_n=r,Ui=i;break;case 0:case 11:case 14:case 15:if(!Gn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&o1(n,e,o),i=i.next}while(i!==r)}Bo(t,e,n);break;case 1:if(!Gn&&(Hc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Kt(n,e,a)}Bo(t,e,n);break;case 21:Bo(t,e,n);break;case 22:n.mode&1?(Gn=(r=Gn)||n.memoizedState!==null,Bo(t,e,n),Gn=r):Bo(t,e,n);break;default:Bo(t,e,n)}}function d2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Xj),e.forEach(function(r){var i=iB.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ii(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:_n=a.stateNode,Ui=!1;break e;case 3:_n=a.stateNode.containerInfo,Ui=!0;break e;case 4:_n=a.stateNode.containerInfo,Ui=!0;break e}a=a.return}if(_n===null)throw Error(ae(160));lM(s,o,i),_n=null,Ui=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Kt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cM(e,t),e=e.sibling}function cM(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ii(e,t),ds(t),r&4){try{ff(3,t,t.return),ev(3,t)}catch(m){Kt(t,t.return,m)}try{ff(5,t,t.return)}catch(m){Kt(t,t.return,m)}}break;case 1:Ii(e,t),ds(t),r&512&&n!==null&&Hc(n,n.return);break;case 5:if(Ii(e,t),ds(t),r&512&&n!==null&&Hc(n,n.return),t.flags&32){var i=t.stateNode;try{$f(i,"")}catch(m){Kt(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&$O(i,s),Mb(a,o);var c=Mb(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?DO(i,d):u==="dangerouslySetInnerHTML"?MO(i,d):u==="children"?$f(i,d):kS(i,u,d,c)}switch(a){case"input":Pb(i,s);break;case"textarea":OO(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?nu(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?nu(i,!!s.multiple,s.defaultValue,!0):nu(i,!!s.multiple,s.multiple?[]:"",!1))}i[jf]=s}catch(m){Kt(t,t.return,m)}}break;case 6:if(Ii(e,t),ds(t),r&4){if(t.stateNode===null)throw Error(ae(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Kt(t,t.return,m)}}break;case 3:if(Ii(e,t),ds(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Rf(e.containerInfo)}catch(m){Kt(t,t.return,m)}break;case 4:Ii(e,t),ds(t);break;case 13:Ii(e,t),ds(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(nk=Zt())),r&4&&d2(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Gn=(c=Gn)||u,Ii(e,t),Gn=c):Ii(e,t),ds(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(_e=t,u=t.child;u!==null;){for(d=_e=u;_e!==null;){switch(f=_e,h=f.child,f.tag){case 0:case 11:case 14:case 15:ff(4,f,f.return);break;case 1:Hc(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Kt(r,n,m)}}break;case 5:Hc(f,f.return);break;case 22:if(f.memoizedState!==null){h2(d);continue}}h!==null?(h.return=f,_e=h):h2(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=RO("display",o))}catch(m){Kt(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Kt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ii(e,t),ds(t),r&4&&d2(t);break;case 21:break;default:Ii(e,t),ds(t)}}function ds(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aM(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&($f(i,""),r.flags&=-33);var s=u2(t);c1(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=u2(t);l1(t,a,o);break;default:throw Error(ae(161))}}catch(l){Kt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qj(t,e,n){_e=t,uM(t)}function uM(t,e,n){for(var r=(t.mode&1)!==0;_e!==null;){var i=_e,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Tp;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Gn;a=Tp;var c=Gn;if(Tp=o,(Gn=l)&&!c)for(_e=i;_e!==null;)o=_e,l=o.child,o.tag===22&&o.memoizedState!==null?p2(i):l!==null?(l.return=o,_e=l):p2(i);for(;s!==null;)_e=s,uM(s),s=s.sibling;_e=i,Tp=a,Gn=c}f2(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,_e=s):f2(t)}}function f2(t){for(;_e!==null;){var e=_e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gn||ev(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Gn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Fi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&YE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}YE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Rf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}Gn||e.flags&512&&a1(e)}catch(f){Kt(e,e.return,f)}}if(e===t){_e=null;break}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}}function h2(t){for(;_e!==null;){var e=_e;if(e===t){_e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_e=n;break}_e=e.return}}function p2(t){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ev(4,e)}catch(l){Kt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Kt(e,i,l)}}var s=e.return;try{a1(e)}catch(l){Kt(e,s,l)}break;case 5:var o=e.return;try{a1(e)}catch(l){Kt(e,o,l)}}}catch(l){Kt(e,e.return,l)}if(e===t){_e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,_e=a;break}_e=e.return}}var Jj=Math.ceil,Bg=$o.ReactCurrentDispatcher,ek=$o.ReactCurrentOwner,Ci=$o.ReactCurrentBatchConfig,at=0,wn=null,rn=null,Fn=0,Vr=0,Wc=qa(0),hn=0,Wf=null,Vl=0,tv=0,tk=0,hf=null,Cr=null,nk=0,Ru=1/0,Gs=null,zg=!1,u1=null,Ca=null,$p=!1,ua=null,Ug=0,pf=0,d1=null,Bm=-1,zm=0;function ir(){return at&6?Zt():Bm!==-1?Bm:Bm=Zt()}function Ea(t){return t.mode&1?at&2&&Fn!==0?Fn&-Fn:Rj.transition!==null?(zm===0&&(zm=KO()),zm):(t=pt,t!==0||(t=window.event,t=t===void 0?16:eN(t.type)),t):1}function Zi(t,e,n,r){if(50<pf)throw pf=0,d1=null,Error(ae(185));Fh(t,n,r),(!(at&2)||t!==wn)&&(t===wn&&(!(at&2)&&(tv|=n),hn===4&&ta(t,Fn)),Nr(t,r),n===1&&at===0&&!(e.mode&1)&&(Ru=Zt()+500,J0&&Ja()))}function Nr(t,e){var n=t.callbackNode;RF(t,e);var r=Cg(t,t===wn?Fn:0);if(r===0)n!==null&&kE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kE(n),e===1)t.tag===0?Mj(m2.bind(null,t)):wN(m2.bind(null,t)),Tj(function(){!(at&6)&&Ja()}),n=null;else{switch(XO(r)){case 1:n=PS;break;case 4:n=WO;break;case 16:n=_g;break;case 536870912:n=GO;break;default:n=_g}n=yM(n,dM.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dM(t,e){if(Bm=-1,zm=0,at&6)throw Error(ae(327));var n=t.callbackNode;if(au()&&t.callbackNode!==n)return null;var r=Cg(t,t===wn?Fn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Vg(t,r);else{e=r;var i=at;at|=2;var s=hM();(wn!==t||Fn!==e)&&(Gs=null,Ru=Zt()+500,Ol(t,e));do try{eB();break}catch(a){fM(t,a)}while(!0);zS(),Bg.current=s,at=i,rn!==null?e=0:(wn=null,Fn=0,e=hn)}if(e!==0){if(e===2&&(i=Fb(t),i!==0&&(r=i,e=f1(t,i))),e===1)throw n=Wf,Ol(t,0),ta(t,r),Nr(t,Zt()),n;if(e===6)ta(t,r);else{if(i=t.current.alternate,!(r&30)&&!Zj(i)&&(e=Vg(t,r),e===2&&(s=Fb(t),s!==0&&(r=s,e=f1(t,s))),e===1))throw n=Wf,Ol(t,0),ta(t,r),Nr(t,Zt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:fl(t,Cr,Gs);break;case 3:if(ta(t,r),(r&130023424)===r&&(e=nk+500-Zt(),10<e)){if(Cg(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ir(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gb(fl.bind(null,t,Cr,Gs),e);break}fl(t,Cr,Gs);break;case 4:if(ta(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ji(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Zt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Jj(r/1960))-r,10<r){t.timeoutHandle=Gb(fl.bind(null,t,Cr,Gs),r);break}fl(t,Cr,Gs);break;case 5:fl(t,Cr,Gs);break;default:throw Error(ae(329))}}}return Nr(t,Zt()),t.callbackNode===n?dM.bind(null,t):null}function f1(t,e){var n=hf;return t.current.memoizedState.isDehydrated&&(Ol(t,e).flags|=256),t=Vg(t,e),t!==2&&(e=Cr,Cr=n,e!==null&&h1(e)),t}function h1(t){Cr===null?Cr=t:Cr.push.apply(Cr,t)}function Zj(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!rs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ta(t,e){for(e&=~tk,e&=~tv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ji(e),r=1<<n;t[n]=-1,e&=~r}}function m2(t){if(at&6)throw Error(ae(327));au();var e=Cg(t,0);if(!(e&1))return Nr(t,Zt()),null;var n=Vg(t,e);if(t.tag!==0&&n===2){var r=Fb(t);r!==0&&(e=r,n=f1(t,r))}if(n===1)throw n=Wf,Ol(t,0),ta(t,e),Nr(t,Zt()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fl(t,Cr,Gs),Nr(t,Zt()),null}function rk(t,e){var n=at;at|=1;try{return t(e)}finally{at=n,at===0&&(Ru=Zt()+500,J0&&Ja())}}function Hl(t){ua!==null&&ua.tag===0&&!(at&6)&&au();var e=at;at|=1;var n=Ci.transition,r=pt;try{if(Ci.transition=null,pt=1,t)return t()}finally{pt=r,Ci.transition=n,at=e,!(at&6)&&Ja()}}function ik(){Vr=Wc.current,Mt(Wc)}function Ol(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Pj(n)),rn!==null)for(n=rn.return;n!==null;){var r=n;switch(FS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$g();break;case 3:Nu(),Mt($r),Mt(Yn),KS();break;case 5:GS(r);break;case 4:Nu();break;case 13:Mt(Ut);break;case 19:Mt(Ut);break;case 10:US(r.type._context);break;case 22:case 23:ik()}n=n.return}if(wn=t,rn=t=Aa(t.current,null),Fn=Vr=e,hn=0,Wf=null,tk=tv=Vl=0,Cr=hf=null,kl!==null){for(e=0;e<kl.length;e++)if(n=kl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}kl=null}return t}function fM(t,e){do{var n=rn;try{if(zS(),Lm.current=jg,Fg){for(var r=Ht.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Fg=!1}if(Ul=0,vn=cn=Ht=null,df=!1,Uf=0,ek.current=null,n===null||n.return===null){hn=1,Wf=e,rn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Fn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=n2(o);if(h!==null){h.flags&=-257,r2(h,o,a,s,e),h.mode&1&&t2(s,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){t2(s,c,e),sk();break e}l=Error(ae(426))}}else if(Ft&&a.mode&1){var w=n2(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),r2(w,o,a,s,e),jS(Mu(l,a));break e}}s=l=Mu(l,a),hn!==4&&(hn=2),hf===null?hf=[s]:hf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=YN(s,l,e);XE(s,v);break e;case 1:a=l;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ca===null||!Ca.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=qN(s,a,e);XE(s,_);break e}}s=s.return}while(s!==null)}mM(n)}catch(k){e=k,rn===n&&n!==null&&(rn=n=n.return);continue}break}while(!0)}function hM(){var t=Bg.current;return Bg.current=jg,t===null?jg:t}function sk(){(hn===0||hn===3||hn===2)&&(hn=4),wn===null||!(Vl&268435455)&&!(tv&268435455)||ta(wn,Fn)}function Vg(t,e){var n=at;at|=2;var r=hM();(wn!==t||Fn!==e)&&(Gs=null,Ol(t,e));do try{Qj();break}catch(i){fM(t,i)}while(!0);if(zS(),at=n,Bg.current=r,rn!==null)throw Error(ae(261));return wn=null,Fn=0,hn}function Qj(){for(;rn!==null;)pM(rn)}function eB(){for(;rn!==null&&!CF();)pM(rn)}function pM(t){var e=vM(t.alternate,t,Vr);t.memoizedProps=t.pendingProps,e===null?mM(t):rn=e,ek.current=null}function mM(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Kj(n,e),n!==null){n.flags&=32767,rn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{hn=6,rn=null;return}}else if(n=Gj(n,e,Vr),n!==null){rn=n;return}if(e=e.sibling,e!==null){rn=e;return}rn=e=t}while(e!==null);hn===0&&(hn=5)}function fl(t,e,n){var r=pt,i=Ci.transition;try{Ci.transition=null,pt=1,tB(t,e,n,r)}finally{Ci.transition=i,pt=r}return null}function tB(t,e,n,r){do au();while(ua!==null);if(at&6)throw Error(ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(DF(t,s),t===wn&&(rn=wn=null,Fn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$p||($p=!0,yM(_g,function(){return au(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ci.transition,Ci.transition=null;var o=pt;pt=1;var a=at;at|=4,ek.current=null,Yj(t,n),cM(n,t),xj(Hb),Eg=!!Vb,Hb=Vb=null,t.current=n,qj(n),EF(),at=a,pt=o,Ci.transition=s}else t.current=n;if($p&&($p=!1,ua=t,Ug=i),s=t.pendingLanes,s===0&&(Ca=null),TF(n.stateNode),Nr(t,Zt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zg)throw zg=!1,t=u1,u1=null,t;return Ug&1&&t.tag!==0&&au(),s=t.pendingLanes,s&1?t===d1?pf++:(pf=0,d1=t):pf=0,Ja(),null}function au(){if(ua!==null){var t=XO(Ug),e=Ci.transition,n=pt;try{if(Ci.transition=null,pt=16>t?16:t,ua===null)var r=!1;else{if(t=ua,ua=null,Ug=0,at&6)throw Error(ae(331));var i=at;for(at|=4,_e=t.current;_e!==null;){var s=_e,o=s.child;if(_e.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(_e=c;_e!==null;){var u=_e;switch(u.tag){case 0:case 11:case 15:ff(8,u,s)}var d=u.child;if(d!==null)d.return=u,_e=d;else for(;_e!==null;){u=_e;var f=u.sibling,h=u.return;if(oM(u),u===c){_e=null;break}if(f!==null){f.return=h,_e=f;break}_e=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}_e=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,_e=o;else e:for(;_e!==null;){if(s=_e,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ff(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,_e=v;break e}_e=s.return}}var y=t.current;for(_e=y;_e!==null;){o=_e;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,_e=x;else e:for(o=y;_e!==null;){if(a=_e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ev(9,a)}}catch(k){Kt(a,a.return,k)}if(a===o){_e=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,_e=_;break e}_e=a.return}}if(at=i,Ja(),Fs&&typeof Fs.onPostCommitFiberRoot=="function")try{Fs.onPostCommitFiberRoot(G0,t)}catch{}r=!0}return r}finally{pt=n,Ci.transition=e}}return!1}function g2(t,e,n){e=Mu(n,e),e=YN(t,e,1),t=_a(t,e,1),e=ir(),t!==null&&(Fh(t,1,e),Nr(t,e))}function Kt(t,e,n){if(t.tag===3)g2(t,t,n);else for(;e!==null;){if(e.tag===3){g2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ca===null||!Ca.has(r))){t=Mu(n,t),t=qN(e,t,1),e=_a(e,t,1),t=ir(),e!==null&&(Fh(e,1,t),Nr(e,t));break}}e=e.return}}function nB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ir(),t.pingedLanes|=t.suspendedLanes&n,wn===t&&(Fn&n)===n&&(hn===4||hn===3&&(Fn&130023424)===Fn&&500>Zt()-nk?Ol(t,0):tk|=n),Nr(t,e)}function gM(t,e){e===0&&(t.mode&1?(e=bp,bp<<=1,!(bp&130023424)&&(bp=4194304)):e=1);var n=ir();t=yo(t,e),t!==null&&(Fh(t,e,n),Nr(t,n))}function rB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gM(t,n)}function iB(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),gM(t,n)}var vM;vM=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$r.current)Pr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pr=!1,Wj(t,e,n);Pr=!!(t.flags&131072)}else Pr=!1,Ft&&e.flags&1048576&&bN(e,Mg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jm(t,e),t=e.pendingProps;var i=Tu(e,Yn.current);ou(e,n),i=YS(null,e,r,t,i,n);var s=qS();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Or(r)?(s=!0,Og(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,HS(e),i.updater=Z0,e.stateNode=i,i._reactInternals=e,Qb(e,r,t,n),e=n1(null,e,r,!0,s,n)):(e.tag=0,Ft&&s&&LS(e),er(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(jm(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=oB(r),t=Fi(r,t),i){case 0:e=t1(null,e,r,t,n);break e;case 1:e=o2(null,e,r,t,n);break e;case 11:e=i2(null,e,r,t,n);break e;case 14:e=s2(null,e,r,Fi(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fi(r,i),t1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fi(r,i),o2(t,e,r,i,n);case 3:e:{if(eM(e),t===null)throw Error(ae(387));r=e.pendingProps,s=e.memoizedState,i=s.element,_N(t,e),Ig(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Mu(Error(ae(423)),e),e=a2(t,e,r,n,i);break e}else if(r!==i){i=Mu(Error(ae(424)),e),e=a2(t,e,r,n,i);break e}else for(Yr=ka(e.stateNode.containerInfo.firstChild),ei=e,Ft=!0,Hi=null,n=PN(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($u(),r===i){e=wo(t,e,n);break e}er(t,e,r,n)}e=e.child}return e;case 5:return TN(e),t===null&&qb(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Wb(r,i)?o=null:s!==null&&Wb(r,s)&&(e.flags|=32),QN(t,e),er(t,e,o,n),e.child;case 6:return t===null&&qb(e),null;case 13:return tM(t,e,n);case 4:return WS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ou(e,null,r,n):er(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fi(r,i),i2(t,e,r,i,n);case 7:return er(t,e,e.pendingProps,n),e.child;case 8:return er(t,e,e.pendingProps.children,n),e.child;case 12:return er(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,At(Rg,r._currentValue),r._currentValue=o,s!==null)if(rs(s.value,o)){if(s.children===i.children&&!$r.current){e=wo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=fo(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Jb(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Jb(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}er(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ou(e,n),i=$i(i),r=r(i),e.flags|=1,er(t,e,r,n),e.child;case 14:return r=e.type,i=Fi(r,e.pendingProps),i=Fi(r.type,i),s2(t,e,r,i,n);case 15:return JN(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fi(r,i),jm(t,e),e.tag=1,Or(r)?(t=!0,Og(e)):t=!1,ou(e,n),EN(e,r,i),Qb(e,r,i,n),n1(null,e,r,!0,t,n);case 19:return nM(t,e,n);case 22:return ZN(t,e,n)}throw Error(ae(156,e.tag))};function yM(t,e){return HO(t,e)}function sB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xi(t,e,n,r){return new sB(t,e,n,r)}function ok(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oB(t){if(typeof t=="function")return ok(t)?1:0;if(t!=null){if(t=t.$$typeof,t===CS)return 11;if(t===ES)return 14}return 2}function Aa(t,e){var n=t.alternate;return n===null?(n=xi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Um(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")ok(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Dc:return Nl(n.children,i,s,e);case _S:o=8,i|=8;break;case kb:return t=xi(12,n,e,i|2),t.elementType=kb,t.lanes=s,t;case _b:return t=xi(13,n,e,i),t.elementType=_b,t.lanes=s,t;case Cb:return t=xi(19,n,e,i),t.elementType=Cb,t.lanes=s,t;case AO:return nv(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case CO:o=10;break e;case EO:o=9;break e;case CS:o=11;break e;case ES:o=14;break e;case Ko:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=xi(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Nl(t,e,n,r){return t=xi(7,t,r,e),t.lanes=n,t}function nv(t,e,n,r){return t=xi(22,t,r,e),t.elementType=AO,t.lanes=n,t.stateNode={isHidden:!1},t}function Ly(t,e,n){return t=xi(6,t,null,e),t.lanes=n,t}function Fy(t,e,n){return e=xi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function aB(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yy(0),this.expirationTimes=yy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yy(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ak(t,e,n,r,i,s,o,a,l){return t=new aB(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},HS(s),t}function lB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function wM(t){if(!t)return Ma;t=t._reactInternals;e:{if(ac(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Or(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(Or(n))return yN(t,n,e)}return e}function bM(t,e,n,r,i,s,o,a,l){return t=ak(n,r,!0,t,i,s,o,a,l),t.context=wM(null),n=t.current,r=ir(),i=Ea(n),s=fo(r,i),s.callback=e??null,_a(n,s,i),t.current.lanes=i,Fh(t,i,r),Nr(t,r),t}function rv(t,e,n,r){var i=e.current,s=ir(),o=Ea(i);return n=wM(n),e.context===null?e.context=n:e.pendingContext=n,e=fo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_a(i,e,o),t!==null&&(Zi(t,i,o,s),Im(t,i,o)),o}function Hg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function v2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lk(t,e){v2(t,e),(t=t.alternate)&&v2(t,e)}function cB(){return null}var xM=typeof reportError=="function"?reportError:function(t){console.error(t)};function ck(t){this._internalRoot=t}iv.prototype.render=ck.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));rv(t,e,null,null)};iv.prototype.unmount=ck.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hl(function(){rv(null,t,null,null)}),e[vo]=null}};function iv(t){this._internalRoot=t}iv.prototype.unstable_scheduleHydration=function(t){if(t){var e=JO();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ea.length&&e!==0&&e<ea[n].priority;n++);ea.splice(n,0,t),n===0&&QO(t)}};function uk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function y2(){}function uB(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Hg(o);s.call(c)}}var o=bM(e,r,t,0,null,!1,!1,"",y2);return t._reactRootContainer=o,t[vo]=o.current,Lf(t.nodeType===8?t.parentNode:t),Hl(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Hg(l);a.call(c)}}var l=ak(t,0,!1,null,null,!1,!1,"",y2);return t._reactRootContainer=l,t[vo]=l.current,Lf(t.nodeType===8?t.parentNode:t),Hl(function(){rv(e,l,n,r)}),l}function ov(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Hg(o);a.call(l)}}rv(e,o,t,i)}else o=uB(n,e,t,i,r);return Hg(o)}YO=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hd(e.pendingLanes);n!==0&&(TS(e,n|1),Nr(e,Zt()),!(at&6)&&(Ru=Zt()+500,Ja()))}break;case 13:Hl(function(){var r=yo(t,1);if(r!==null){var i=ir();Zi(r,t,1,i)}}),lk(t,1)}};$S=function(t){if(t.tag===13){var e=yo(t,134217728);if(e!==null){var n=ir();Zi(e,t,134217728,n)}lk(t,134217728)}};qO=function(t){if(t.tag===13){var e=Ea(t),n=yo(t,e);if(n!==null){var r=ir();Zi(n,t,e,r)}lk(t,e)}};JO=function(){return pt};ZO=function(t,e){var n=pt;try{return pt=t,e()}finally{pt=n}};Db=function(t,e,n){switch(e){case"input":if(Pb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=q0(r);if(!i)throw Error(ae(90));TO(r),Pb(r,i)}}}break;case"textarea":OO(t,n);break;case"select":e=n.value,e!=null&&nu(t,!!n.multiple,e,!1)}};FO=rk;jO=Hl;var dB={usingClientEntryPoint:!1,Events:[Bh,jc,q0,IO,LO,rk]},Sd={findFiberByHostInstance:Sl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},fB={bundleType:Sd.bundleType,version:Sd.version,rendererPackageName:Sd.rendererPackageName,rendererConfig:Sd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$o.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=UO(t),t===null?null:t.stateNode},findFiberByHostInstance:Sd.findFiberByHostInstance||cB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Op=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Op.isDisabled&&Op.supportsFiber)try{G0=Op.inject(fB),Fs=Op}catch{}}ii.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dB;ii.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uk(e))throw Error(ae(200));return lB(t,e,null,n)};ii.createRoot=function(t,e){if(!uk(t))throw Error(ae(299));var n=!1,r="",i=xM;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ak(t,1,!1,null,null,n,!1,r,i),t[vo]=e.current,Lf(t.nodeType===8?t.parentNode:t),new ck(e)};ii.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=UO(e),t=t===null?null:t.stateNode,t};ii.flushSync=function(t){return Hl(t)};ii.hydrate=function(t,e,n){if(!sv(e))throw Error(ae(200));return ov(null,t,e,!0,n)};ii.hydrateRoot=function(t,e,n){if(!uk(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=xM;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=bM(e,null,t,1,n??null,i,!1,s,o),t[vo]=e.current,Lf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new iv(e)};ii.render=function(t,e,n){if(!sv(e))throw Error(ae(200));return ov(null,t,e,!1,n)};ii.unmountComponentAtNode=function(t){if(!sv(t))throw Error(ae(40));return t._reactRootContainer?(Hl(function(){ov(null,null,t,!1,function(){t._reactRootContainer=null,t[vo]=null})}),!0):!1};ii.unstable_batchedUpdates=rk;ii.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sv(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return ov(t,e,n,!1,r)};ii.version="18.2.0-next-9e3b772b8-20220608";function SM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(SM)}catch(t){console.error(t)}}SM(),bO.exports=ii;var Oo=bO.exports;const hB=sc(Oo);var w2=Oo;xb.createRoot=w2.createRoot,xb.hydrateRoot=w2.hydrateRoot;function kt(){return kt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kt.apply(this,arguments)}function ye(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function cs(t,e=[]){let n=[];function r(s,o){const a=g.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:f,children:h,...p}=d,m=(f==null?void 0:f[t][l])||a,w=g.useMemo(()=>p,Object.values(p));return g.createElement(m.Provider,{value:w},h)}function u(d,f){const h=(f==null?void 0:f[t][l])||a,p=g.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=n.map(o=>g.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,pB(i,...e)]}function pB(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function mB(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function av(...t){return e=>t.forEach(n=>mB(n,e))}function lt(...t){return g.useCallback(av(...t),t)}const Wl=g.forwardRef((t,e)=>{const{children:n,...r}=t,i=g.Children.toArray(n),s=i.find(vB);if(s){const o=s.props.children,a=i.map(l=>l===s?g.Children.count(o)>1?g.Children.only(null):g.isValidElement(o)?o.props.children:null:l);return g.createElement(p1,kt({},r,{ref:e}),g.isValidElement(o)?g.cloneElement(o,void 0,a):null)}return g.createElement(p1,kt({},r,{ref:e}),n)});Wl.displayName="Slot";const p1=g.forwardRef((t,e)=>{const{children:n,...r}=t;return g.isValidElement(n)?g.cloneElement(n,{...yB(r,n.props),ref:e?av(e,n.ref):n.ref}):g.Children.count(n)>1?g.Children.only(null):null});p1.displayName="SlotClone";const gB=({children:t})=>g.createElement(g.Fragment,null,t);function vB(t){return g.isValidElement(t)&&t.type===gB}function yB(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Uh(t){const e=t+"CollectionProvider",[n,r]=cs(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:p,children:m}=h,w=Bt.useRef(null),v=Bt.useRef(new Map).current;return Bt.createElement(i,{scope:p,itemMap:v,collectionRef:w},m)},a=t+"CollectionSlot",l=Bt.forwardRef((h,p)=>{const{scope:m,children:w}=h,v=s(a,m),y=lt(p,v.collectionRef);return Bt.createElement(Wl,{ref:y},w)}),c=t+"CollectionItemSlot",u="data-radix-collection-item",d=Bt.forwardRef((h,p)=>{const{scope:m,children:w,...v}=h,y=Bt.useRef(null),x=lt(p,y),_=s(c,m);return Bt.useEffect(()=>(_.itemMap.set(y,{ref:y,...v}),()=>void _.itemMap.delete(y))),Bt.createElement(Wl,{[u]:"",ref:x},w)});function f(h){const p=s(t+"CollectionConsumer",h);return Bt.useCallback(()=>{const w=p.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((_,k)=>v.indexOf(_.ref.current)-v.indexOf(k.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,r]}const Ni=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},wB=cS.useId||(()=>{});let bB=0;function Gl(t){const[e,n]=g.useState(wB());return Ni(()=>{t||n(r=>r??String(bB++))},[t]),t||(e?`radix-${e}`:"")}const xB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Xe=xB.reduce((t,e)=>{const n=g.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Wl:e;return g.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),g.createElement(a,kt({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function dk(t,e){t&&Oo.flushSync(()=>t.dispatchEvent(e))}function ar(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function bo({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=SB({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=ar(n),l=g.useCallback(c=>{if(s){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else i(c)},[s,t,i,a]);return[o,l]}function SB({defaultProp:t,onChange:e}){const n=g.useState(t),[r]=n,i=g.useRef(r),s=ar(e);return g.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const kB=g.createContext(void 0);function Vh(t){const e=g.useContext(kB);return t||e||"ltr"}const jy="rovingFocusGroup.onEntryFocus",_B={bubbles:!1,cancelable:!0},fk="RovingFocusGroup",[m1,kM,CB]=Uh(fk),[EB,lv]=cs(fk,[CB]),[AB,PB]=EB(fk),TB=g.forwardRef((t,e)=>g.createElement(m1.Provider,{scope:t.__scopeRovingFocusGroup},g.createElement(m1.Slot,{scope:t.__scopeRovingFocusGroup},g.createElement($B,kt({},t,{ref:e}))))),$B=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,...u}=t,d=g.useRef(null),f=lt(e,d),h=Vh(s),[p=null,m]=bo({prop:o,defaultProp:a,onChange:l}),[w,v]=g.useState(!1),y=ar(c),x=kM(n),_=g.useRef(!1),[k,P]=g.useState(0);return g.useEffect(()=>{const E=d.current;if(E)return E.addEventListener(jy,y),()=>E.removeEventListener(jy,y)},[y]),g.createElement(AB,{scope:n,orientation:r,dir:h,loop:i,currentTabStopId:p,onItemFocus:g.useCallback(E=>m(E),[m]),onItemShiftTab:g.useCallback(()=>v(!0),[]),onFocusableItemAdd:g.useCallback(()=>P(E=>E+1),[]),onFocusableItemRemove:g.useCallback(()=>P(E=>E-1),[])},g.createElement(Xe.div,kt({tabIndex:w||k===0?-1:0,"data-orientation":r},u,{ref:f,style:{outline:"none",...t.style},onMouseDown:ye(t.onMouseDown,()=>{_.current=!0}),onFocus:ye(t.onFocus,E=>{const C=!_.current;if(E.target===E.currentTarget&&C&&!w){const N=new CustomEvent(jy,_B);if(E.currentTarget.dispatchEvent(N),!N.defaultPrevented){const M=x().filter(V=>V.focusable),R=M.find(V=>V.active),L=M.find(V=>V.id===p),$=[R,L,...M].filter(Boolean).map(V=>V.ref.current);_M($)}}_.current=!1}),onBlur:ye(t.onBlur,()=>v(!1))})))}),OB="RovingFocusGroupItem",NB=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,a=Gl(),l=s||a,c=PB(OB,n),u=c.currentTabStopId===l,d=kM(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return g.useEffect(()=>{if(r)return f(),()=>h()},[r,f,h]),g.createElement(m1.ItemSlot,{scope:n,id:l,focusable:r,active:i},g.createElement(Xe.span,kt({tabIndex:u?0:-1,"data-orientation":c.orientation},o,{ref:e,onMouseDown:ye(t.onMouseDown,p=>{r?c.onItemFocus(l):p.preventDefault()}),onFocus:ye(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:ye(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const m=DB(p,c.orientation,c.dir);if(m!==void 0){p.preventDefault();let v=d().filter(y=>y.focusable).map(y=>y.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const y=v.indexOf(p.currentTarget);v=c.loop?IB(v,y+1):v.slice(y+1)}setTimeout(()=>_M(v))}})})))}),MB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function RB(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function DB(t,e,n){const r=RB(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return MB[r]}function _M(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function IB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const CM=TB,EM=NB;function LB(t,e){return g.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const No=t=>{const{present:e,children:n}=t,r=FB(e),i=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),s=lt(r.ref,i.ref);return typeof n=="function"||r.isPresent?g.cloneElement(i,{ref:s}):null};No.displayName="Presence";function FB(t){const[e,n]=g.useState(),r=g.useRef({}),i=g.useRef(t),s=g.useRef("none"),o=t?"mounted":"unmounted",[a,l]=LB(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const c=Np(r.current);s.current=a==="mounted"?c:"none"},[a]),Ni(()=>{const c=r.current,u=i.current;if(u!==t){const f=s.current,h=Np(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Ni(()=>{if(e){const c=d=>{const h=Np(r.current).includes(d.animationName);d.target===e&&h&&Oo.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(s.current=Np(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Np(t){return(t==null?void 0:t.animationName)||"none"}const AM="Tabs",[jB,$ae]=cs(AM,[lv]),PM=lv(),[BB,hk]=jB(AM),zB=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=Vh(a),[d,f]=bo({prop:r,onChange:i,defaultProp:s});return g.createElement(BB,{scope:n,baseId:Gl(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l},g.createElement(Xe.div,kt({dir:u,"data-orientation":o},c,{ref:e})))}),UB="TabsList",VB=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=hk(UB,n),o=PM(n);return g.createElement(CM,kt({asChild:!0},o,{orientation:s.orientation,dir:s.dir,loop:r}),g.createElement(Xe.div,kt({role:"tablist","aria-orientation":s.orientation},i,{ref:e})))}),HB="TabsTrigger",b2=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=hk(HB,n),a=PM(n),l=TM(o.baseId,r),c=$M(o.baseId,r),u=r===o.value;return g.createElement(EM,kt({asChild:!0},a,{focusable:!i,active:u}),g.createElement(Xe.button,kt({type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},s,{ref:e,onMouseDown:ye(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:ye(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:ye(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!i&&d&&o.onValueChange(r)})})))}),WB="TabsContent",By=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=hk(WB,n),l=TM(a.baseId,r),c=$M(a.baseId,r),u=r===a.value,d=g.useRef(u);return g.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),g.createElement(No,{present:i||u},({present:f})=>g.createElement(Xe.div,kt({"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0},o,{ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0}}),f&&s))});function TM(t,e){return`${t}-trigger-${e}`}function $M(t,e){return`${t}-content-${e}`}var on={BASE_URL:"/VonSim8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let GB=0;function Ee(t,e){const n=`atom${++GB}`,r={toString:()=>n};return typeof t=="function"?r.read=t:(r.init=t,r.read=function(i){return i(this)},r.write=function(i,s,o){return s(this,typeof o=="function"?o(i(this)):o)}),e&&(r.write=e),r}const zy=t=>"init"in t,Uy=t=>!!t.write,Wg=new WeakMap,KB=(t,e)=>{Wg.set(t,e),t.catch(()=>{}).finally(()=>Wg.delete(t))},x2=(t,e)=>{const n=Wg.get(t);n&&(Wg.delete(t),n(e))},S2=(t,e)=>{t.status="fulfilled",t.value=e},k2=(t,e)=>{t.status="rejected",t.reason=e},XB=t=>typeof(t==null?void 0:t.then)=="function",kd=(t,e)=>!!t&&"v"in t&&"v"in e&&Object.is(t.v,e.v),_2=(t,e)=>!!t&&"e"in t&&"e"in e&&Object.is(t.e,e.e),pc=t=>!!t&&"v"in t&&t.v instanceof Promise,YB=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,Mp=t=>{if("e"in t)throw t.e;return t.v},pk=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let r,i;(on?"production":void 0)!=="production"&&(r=new Set,i=new Set);const s=C=>t.get(C),o=(C,N)=>{(on?"production":void 0)!=="production"&&Object.freeze(N);const M=t.get(C);if(t.set(C,N),n.has(C)||n.set(C,M),pc(M)){const R="v"in N?N.v instanceof Promise?N.v:Promise.resolve(N.v):Promise.reject(N.e);M.v!==R&&x2(M.v,R)}},a=(C,N,M)=>{const R=new Map;let L=!1;M.forEach((H,$)=>{!H&&$===C&&(H=N),H?(R.set($,H),N.d.get($)!==H&&(L=!0)):(on?"production":void 0)!=="production"&&console.warn("[Bug] atom state not found")}),(L||N.d.size!==R.size)&&(N.d=R)},l=(C,N,M)=>{const R=s(C),L={d:(R==null?void 0:R.d)||new Map,v:N};if(M&&a(C,L,M),kd(R,L)&&R.d===L.d)return R;if(pc(R)&&pc(L)&&YB(R,L)){if(R.d===L.d)return R;L.v=R.v}return o(C,L),L},c=(C,N,M,R)=>{if(XB(N)){let L;const H=()=>{const V=s(C);if(!pc(V)||V.v!==$)return;const q=l(C,$,M);e.has(C)&&V.d!==q.d&&k(C,q,V.d)},$=new Promise((V,q)=>{let ne=!1;N.then(W=>{ne||(ne=!0,S2($,W),V(W),H())},W=>{ne||(ne=!0,k2($,W),q(W),H())}),L=W=>{ne||(ne=!0,W.then(j=>S2($,j),j=>k2($,j)),V(W))}});return $.orig=N,$.status="pending",KB($,V=>{V&&L(V),R==null||R()}),l(C,$,M)}return l(C,N,M)},u=(C,N,M)=>{const R=s(C),L={d:(R==null?void 0:R.d)||new Map,e:N};return M&&a(C,L,M),_2(R,L)&&R.d===L.d?R:(o(C,L),L)},d=(C,N)=>{const M=s(C);if(!N&&M&&(e.has(C)||Array.from(M.d).every(([ne,W])=>{if(ne===C)return!0;const j=d(ne);return j===W||kd(j,W)})))return M;const R=new Map;let L=!0;const H=ne=>{if(ne===C){const j=s(ne);if(j)return R.set(ne,j),Mp(j);if(zy(ne))return R.set(ne,void 0),ne.init;throw new Error("no atom init")}const W=d(ne);return R.set(ne,W),Mp(W)};let $,V;const q={get signal(){return $||($=new AbortController),$.signal},get setSelf(){return(on?"production":void 0)!=="production"&&!Uy(C)&&console.warn("setSelf function cannot be used with read-only atom"),!V&&Uy(C)&&(V=(...ne)=>{if((on?"production":void 0)!=="production"&&L&&console.warn("setSelf function cannot be called in sync"),!L)return y(C,...ne)}),V}};try{const ne=C.read(H,q);return c(C,ne,R,()=>$==null?void 0:$.abort())}catch(ne){return u(C,ne,R)}finally{L=!1}},f=C=>Mp(d(C)),h=C=>{let N=e.get(C);return N||(N=x(C)),N},p=(C,N)=>!N.l.size&&(!N.t.size||N.t.size===1&&N.t.has(C)),m=C=>{const N=e.get(C);N&&p(C,N)&&_(C)},w=C=>{const N=new Map,M=new WeakMap,R=$=>{var V;const q=new Set((V=e.get($))==null?void 0:V.t);return n.forEach((ne,W)=>{var j;(j=s(W))!=null&&j.d.has($)&&q.add(W)}),q},L=$=>{R($).forEach(V=>{V!==$&&(N.set(V,(N.get(V)||new Set).add($)),M.set(V,(M.get(V)||0)+1),L(V))})};L(C);const H=$=>{R($).forEach(V=>{var q;if(V!==$){let ne=M.get(V);if(ne&&M.set(V,--ne),!ne){let W=!!((q=N.get(V))!=null&&q.size);if(W){const j=s(V),Q=d(V,!0);W=!kd(j,Q)}W||N.forEach(j=>j.delete(V))}H(V)}})};H(C)},v=(C,...N)=>{let M=!0;const R=$=>Mp(d($)),L=($,...V)=>{let q;if($===C){if(!zy($))throw new Error("atom not writable");const ne=s($),W=c($,V[0]);kd(ne,W)||w($)}else q=v($,...V);if(!M){const ne=P();(on?"production":void 0)!=="production"&&r.forEach(W=>W({type:"async-write",flushed:ne}))}return q},H=C.write(R,L,...N);return M=!1,H},y=(C,...N)=>{const M=v(C,...N),R=P();return(on?"production":void 0)!=="production"&&r.forEach(L=>L({type:"write",flushed:R})),M},x=(C,N,M)=>{var R;const L=M||[];(R=s(C))==null||R.d.forEach(($,V)=>{const q=e.get(V);q?q.t.add(C):V!==C&&x(V,C,L)}),d(C);const H={t:new Set(N&&[N]),l:new Set};if(e.set(C,H),(on?"production":void 0)!=="production"&&i.add(C),Uy(C)&&C.onMount){const{onMount:$}=C;L.push(()=>{const V=$((...q)=>y(C,...q));V&&(H.u=V)})}return M||L.forEach($=>$()),H},_=C=>{var N;const M=(N=e.get(C))==null?void 0:N.u;M&&M(),e.delete(C),(on?"production":void 0)!=="production"&&i.delete(C);const R=s(C);R?(pc(R)&&x2(R.v),R.d.forEach((L,H)=>{if(H!==C){const $=e.get(H);$&&($.t.delete(C),p(H,$)&&_(H))}})):(on?"production":void 0)!=="production"&&console.warn("[Bug] could not find atom state to unmount",C)},k=(C,N,M)=>{const R=new Set(N.d.keys());M==null||M.forEach((L,H)=>{if(R.has(H)){R.delete(H);return}const $=e.get(H);$&&($.t.delete(C),p(H,$)&&_(H))}),R.forEach(L=>{const H=e.get(L);H?H.t.add(C):e.has(C)&&x(L,C)})},P=()=>{let C;for((on?"production":void 0)!=="production"&&(C=new Set);n.size;){const N=Array.from(n);n.clear(),N.forEach(([M,R])=>{const L=s(M);if(L){const H=e.get(M);H&&L.d!==(R==null?void 0:R.d)&&k(M,L,R==null?void 0:R.d),H&&!(!pc(R)&&(kd(R,L)||_2(R,L)))&&(H.l.forEach($=>$()),(on?"production":void 0)!=="production"&&C.add(M))}else(on?"production":void 0)!=="production"&&console.warn("[Bug] no atom state to flush")})}if((on?"production":void 0)!=="production")return C},E=(C,N)=>{const M=h(C),R=P(),L=M.l;return L.add(N),(on?"production":void 0)!=="production"&&r.forEach(H=>H({type:"sub",flushed:R})),()=>{L.delete(N),m(C),(on?"production":void 0)!=="production"&&r.forEach(H=>H({type:"unsub"}))}};return(on?"production":void 0)!=="production"?{get:f,set:y,sub:E,dev_subscribe_store:(C,N)=>{if(N!==2)throw new Error("The current StoreListener revision is 2.");return r.add(C),()=>{r.delete(C)}},dev_get_mounted_atoms:()=>i.values(),dev_get_atom_state:C=>t.get(C),dev_get_mounted:C=>e.get(C),dev_restore_atoms:C=>{for(const[M,R]of C)zy(M)&&(c(M,R),w(M));const N=P();r.forEach(M=>M({type:"restore",flushed:N}))}}:{get:f,set:y,sub:E}};let Vy;(on?"production":void 0)!=="production"&&(typeof globalThis.__NUMBER_OF_JOTAI_INSTANCES__=="number"?++globalThis.__NUMBER_OF_JOTAI_INSTANCES__:globalThis.__NUMBER_OF_JOTAI_INSTANCES__=1);const qB=()=>(Vy||((on?"production":void 0)!=="production"&&globalThis.__NUMBER_OF_JOTAI_INSTANCES__!==1&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"),Vy=pk()),Vy);var JB={BASE_URL:"/VonSim8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const OM=g.createContext(void 0),NM=t=>{const e=g.useContext(OM);return(t==null?void 0:t.store)||e||qB()},ZB=({children:t,store:e})=>{const n=g.useRef();return!e&&!n.current&&(n.current=pk()),g.createElement(OM.Provider,{value:e||n.current},t)},QB=t=>typeof(t==null?void 0:t.then)=="function",e7=Bt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function Xt(t,e){const n=NM(e),[[r,i,s],o]=g.useReducer(c=>{const u=n.get(t);return Object.is(c[0],u)&&c[1]===n&&c[2]===t?c:[u,n,t]},void 0,()=>[n.get(t),n,t]);let a=r;(i!==n||s!==t)&&(o(),a=n.get(t));const l=e==null?void 0:e.delay;return g.useEffect(()=>{const c=n.sub(t,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),c},[n,t,l]),g.useDebugValue(a),QB(a)?e7(a):a}function MM(t,e){const n=NM(e);return g.useCallback((...i)=>{if((JB?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...i)},[n,t])}function td(t,e){return[Xt(t,e),MM(t,e)]}const{createElement:Du,createContext:t7,createRef:Oae,forwardRef:RM,useCallback:jr,useContext:DM,useEffect:Ml,useImperativeHandle:IM,useLayoutEffect:n7,useMemo:r7,useRef:Wr,useState:Gg}=cS,C2=cS.useId,cv=t7(null);cv.displayName="PanelGroupContext";const Gf=n7,i7=typeof C2=="function"?C2:()=>null;let s7=0;function mk(t=null){const e=i7(),n=Wr(t||e||null);return n.current===null&&(n.current=""+s7++),t??n.current}function LM({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:f,style:h,tagName:p="div",...m}){const w=DM(cv);if(w===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:y,getPanelSize:x,getPanelStyle:_,groupId:k,isPanelCollapsed:P,registerPanel:E,resizePanel:C,unregisterPanel:N}=w,M=mk(o),R=Wr({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:a,minSize:l},id:M,idIsFromProps:o!==void 0,order:f});Wr({didLogMissingDefaultSizeWarning:!1}),Gf(()=>{const{callbacks:H,constraints:$}=R.current;R.current.id=M,R.current.idIsFromProps=o!==void 0,R.current.order=f,H.onCollapse=c,H.onExpand=u,H.onResize=d,$.collapsedSize=n,$.collapsible=r,$.defaultSize=i,$.maxSize=a,$.minSize=l}),Gf(()=>{const H=R.current;return E(H),()=>{N(H)}},[f,M,E,N]),IM(s,()=>({collapse:()=>{v(R.current)},expand:()=>{y(R.current)},getId(){return M},getSize(){return x(R.current)},isCollapsed(){return P(R.current)},isExpanded(){return!P(R.current)},resize:H=>{C(R.current,H)}}),[v,y,x,P,M,C]);const L=_(R.current,i);return Du(p,{...m,children:t,className:e,style:{...L,...h},"data-panel":"","data-panel-id":M,"data-panel-group-id":k,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const Vm=RM((t,e)=>Du(LM,{...t,forwardedRef:e}));LM.displayName="Panel";Vm.displayName="forwardRef(Panel)";function He(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const FM=10;function Kf(t,e,n=FM){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const r=t-e;return r===0?0:r>0?1:-1}function Ur(t,e,n){return Kf(t,e,n)===0}function Gc({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];He(r!=null);let{collapsedSize:i=0,collapsible:s,maxSize:o=100,minSize:a=0}=r;if(Kf(n,a)<0)if(s){const l=(i+a)/2;Kf(n,l)<0?n=i:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(FM)),n}function Gd({delta:t,layout:e,panelConstraints:n,pivotIndices:r,trigger:i}){if(Ur(t,0))return e;const s=[...e],[o,a]=r;He(o!=null),He(a!=null);let l=0;if(i==="keyboard"){{const u=t<0?a:o,d=n[u];if(He(d),d.collapsible){const f=e[u];He(f!=null);const h=n[u];He(h);const{collapsedSize:p=0,minSize:m=0}=h;if(Ur(f,p)){const w=m-f;Kf(w,Math.abs(t))>0&&(t=t<0?0-w:w)}}}{const u=t<0?o:a,d=n[u];He(d);const{collapsible:f}=d;if(f){const h=e[u];He(h!=null);const p=n[u];He(p);const{collapsedSize:m=0,minSize:w=0}=p;if(Ur(h,w)){const v=h-m;Kf(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}}{const u=t<0?1:-1;let d=t<0?a:o,f=0;for(;;){const p=e[d];He(p!=null);const w=Gc({panelConstraints:n,panelIndex:d,size:100})-p;if(f+=w,d+=u,d<0||d>=n.length)break}const h=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-h:h}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(l),h=e[d];He(h!=null);const p=h-f,m=Gc({panelConstraints:n,panelIndex:d,size:p});if(!Ur(h,m)&&(l+=h-m,s[d]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(Ur(l,0))return e;{const u=t<0?a:o,d=e[u];He(d!=null);const f=d+l,h=Gc({panelConstraints:n,panelIndex:u,size:f});if(s[u]=h,!Ur(h,f)){let p=f-h,w=t<0?a:o;for(;w>=0&&w<n.length;){const v=s[w];He(v!=null);const y=v+p,x=Gc({panelConstraints:n,panelIndex:w,size:y});if(Ur(v,x)||(p-=x-v,s[w]=x),Ur(p,0))break;t>0?w--:w++}}}const c=s.reduce((u,d)=>d+u,0);return Ur(c,100)?s:e}function o7({layout:t,panelsArray:e,pivotIndices:n}){let r=0,i=100,s=0,o=0;const a=n[0];He(a!=null),e.forEach((d,f)=>{const{constraints:h}=d,{maxSize:p=100,minSize:m=0}=h;f===a?(r=m,i=p):(s+=m,o+=p)});const l=Math.min(i,100-s),c=Math.max(r,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function Xf(t,e){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function jM(t,e,n){const i=Xf(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return i??null}function BM(t,e,n){const r=jM(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function zM(t,e){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return r||null}function uv(t,e){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function a7(t,e,n,r){var i,s,o,a;const l=uv(e,r),c=Xf(t,r),u=l?c.indexOf(l):-1,d=(i=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:null,f=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,f]}function l7({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:i,panelGroupElement:s,setLayout:o}){Wr({didWarnAboutMissingResizeHandle:!1}),Gf(()=>{if(!s)return;const a=Xf(n,s);for(let l=0;l<i.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=o7({layout:r,panelsArray:i,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const h=i[l];He(h),f.setAttribute("aria-controls",h.id),f.setAttribute("aria-valuemax",""+Math.round(c)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,r,i,s]),Ml(()=>{if(!s)return;const a=e.current;He(a);const{panelDataArray:l}=a,c=zM(n,s);He(c!=null,`No group found for id "${n}"`);const u=Xf(n,s);He(u);const d=u.map(f=>{const h=f.getAttribute("data-panel-resize-handle-id");He(h);const[p,m]=a7(n,h,l,s);if(p==null||m==null)return()=>{};const w=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const y=l.findIndex(x=>x.id===p);if(y>=0){const x=l[y];He(x);const _=r[y],{collapsedSize:k=0,collapsible:P,minSize:E=0}=x.constraints;if(_!=null&&P){const C=Gd({delta:Ur(_,k)?E-k:k-_,layout:r,panelConstraints:l.map(N=>N.constraints),pivotIndices:BM(n,h,s),trigger:"keyboard"});r!==C&&o(C)}}break}}};return f.addEventListener("keydown",w),()=>{f.removeEventListener("keydown",w)}});return()=>{d.forEach(f=>f())}},[s,t,e,n,r,i,o])}function E2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function UM(t){return t.type==="keydown"}function VM(t){return t.type.startsWith("mouse")}function HM(t){return t.type.startsWith("touch")}function WM(t,e){const n=t==="horizontal";if(VM(e))return n?e.clientX:e.clientY;if(HM(e)){const r=e.touches[0];return He(r),n?r.screenX:r.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function c7(t,e,n,r,i){const s=n==="horizontal",o=uv(e,i);He(o);const a=o.getAttribute("data-panel-group-id");He(a);let{initialCursorPosition:l}=r;const c=WM(n,t),u=zM(a,i);He(u);const d=u.getBoundingClientRect(),f=s?d.width:d.height;return(c-l)/f*100}function u7(t,e,n,r,i,s){if(UM(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:i!=null?a=i:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return r==null?0:c7(t,e,n,r,s)}function d7({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let r=0,i=100;for(let s=0;s<t.length;s++){const o=n[s];He(o);const{defaultSize:a}=o;a!=null&&(r++,e[s]=a,i-=a)}for(let s=0;s<t.length;s++){const o=n[s];He(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-r,c=i/l;r++,e[s]=c,i-=c}return e}function mc(t,e,n){e.forEach((r,i)=>{const s=t[i];He(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||r!==d){n[l]=r;const{onCollapse:f,onExpand:h,onResize:p}=o;p&&p(r,d),u&&(f||h)&&(h&&(d==null||d===c)&&r!==c&&h(),f&&(d==null||d!==c)&&r===c&&f())}})}function Rp(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function f7({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:i,precision:s=3}){const o=n[i];let a;return o==null?a=t??"1":r.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let g1=null,Cl=null;function GM(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function h7(){Cl!==null&&(document.head.removeChild(Cl),g1=null,Cl=null)}function Hy(t){if(g1===t)return;g1=t;const e=GM(t);Cl===null&&(Cl=document.createElement("style"),document.head.appendChild(Cl)),Cl.innerHTML=`*{cursor: ${e}!important;}`}function p7(t,e=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function A2(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function KM(t){return`react-resizable-panels:${t}`}function XM(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:i,order:s}=e;return i?r:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function YM(t,e){try{const n=KM(t),r=e.getItem(n);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function m7(t,e,n){var r,i;const s=(r=YM(t,n))!==null&&r!==void 0?r:{},o=XM(e);return(i=s[o])!==null&&i!==void 0?i:null}function g7(t,e,n,r,i){var s;const o=KM(t),a=XM(e),l=(s=YM(t,i))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function P2({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!Ur(r,100))for(let s=0;s<e.length;s++){const o=n[s];He(o!=null);const a=100/r*o;n[s]=a}let i=0;for(let s=0;s<e.length;s++){const o=n[s];He(o!=null);const a=Gc({panelConstraints:e,panelIndex:s,size:o});o!=a&&(i+=o-a,n[s]=a)}if(!Ur(i,0))for(let s=0;s<e.length;s++){const o=n[s];He(o!=null);const a=o+i,l=Gc({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(i-=l-o,n[s]=l,Ur(i,0)))break}return n}const v7=100,Kd={getItem:t=>(A2(Kd),Kd.getItem(t)),setItem:(t,e)=>{A2(Kd),Kd.setItem(t,e)}},T2={};function qM({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:i,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=Kd,style:c,tagName:u="div",...d}){const f=mk(s),h=Wr(null),[p,m]=Gg(null),[w,v]=Gg([]),y=Wr({}),x=Wr(new Map),_=Wr(0),k=Wr({autoSaveId:t,direction:r,dragState:p,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),P=Wr({layout:w,panelDataArray:[],panelDataArrayChanged:!1});Wr({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),IM(i,()=>({getId:()=>k.current.id,getLayout:()=>{const{layout:K}=P.current;return K},setLayout:K=>{const{onLayout:ee}=k.current,{layout:ce,panelDataArray:F}=P.current,I=P2({layout:K,panelConstraints:F.map(z=>z.constraints)});E2(ce,I)||(v(I),P.current.layout=I,ee&&ee(I),mc(F,I,y.current))}}),[]),Gf(()=>{k.current.autoSaveId=t,k.current.direction=r,k.current.dragState=p,k.current.id=f,k.current.onLayout=o,k.current.storage=l}),l7({committedValuesRef:k,eagerValuesRef:P,groupId:f,layout:w,panelDataArray:P.current.panelDataArray,setLayout:v,panelGroupElement:h.current}),Ml(()=>{const{panelDataArray:K}=P.current;if(t){if(w.length===0||w.length!==K.length)return;let ee=T2[t];ee==null&&(ee=p7(g7,v7),T2[t]=ee);const ce=[...K],F=new Map(x.current);ee(t,ce,F,w,l)}},[t,w,l]),Ml(()=>{});const E=jr(K=>{const{onLayout:ee}=k.current,{layout:ce,panelDataArray:F}=P.current;if(K.constraints.collapsible){const I=F.map(D=>D.constraints),{collapsedSize:z=0,panelSize:S,pivotIndices:T}=gc(F,K,ce);if(He(S!=null),S!==z){x.current.set(K.id,S);const O=_c(F,K)===F.length-1?S-z:z-S,U=Gd({delta:O,layout:ce,panelConstraints:I,pivotIndices:T,trigger:"imperative-api"});Rp(ce,U)||(v(U),P.current.layout=U,ee&&ee(U),mc(F,U,y.current))}}},[]),C=jr(K=>{const{onLayout:ee}=k.current,{layout:ce,panelDataArray:F}=P.current;if(K.constraints.collapsible){const I=F.map(O=>O.constraints),{collapsedSize:z=0,panelSize:S,minSize:T=0,pivotIndices:D}=gc(F,K,ce);if(S===z){const O=x.current.get(K.id),U=O!=null&&O>=T?O:T,te=_c(F,K)===F.length-1?S-U:U-S,J=Gd({delta:te,layout:ce,panelConstraints:I,pivotIndices:D,trigger:"imperative-api"});Rp(ce,J)||(v(J),P.current.layout=J,ee&&ee(J),mc(F,J,y.current))}}},[]),N=jr(K=>{const{layout:ee,panelDataArray:ce}=P.current,{panelSize:F}=gc(ce,K,ee);return He(F!=null),F},[]),M=jr((K,ee)=>{const{panelDataArray:ce}=P.current,F=_c(ce,K);return f7({defaultSize:ee,dragState:p,layout:w,panelData:ce,panelIndex:F})},[p,w]),R=jr(K=>{const{layout:ee,panelDataArray:ce}=P.current,{collapsedSize:F=0,collapsible:I,panelSize:z}=gc(ce,K,ee);return I===!0&&z===F},[]),L=jr(K=>{const{layout:ee,panelDataArray:ce}=P.current,{collapsedSize:F=0,collapsible:I,panelSize:z}=gc(ce,K,ee);return He(z!=null),!I||z>F},[]),H=jr(K=>{const{panelDataArray:ee}=P.current;ee.push(K),ee.sort((ce,F)=>{const I=ce.order,z=F.order;return I==null&&z==null?0:I==null?-1:z==null?1:I-z}),P.current.panelDataArrayChanged=!0},[]);Gf(()=>{if(P.current.panelDataArrayChanged){P.current.panelDataArrayChanged=!1;const{autoSaveId:K,onLayout:ee,storage:ce}=k.current,{layout:F,panelDataArray:I}=P.current;let z=null;if(K){const T=m7(K,I,ce);T&&(x.current=new Map(Object.entries(T.expandToSizes)),z=T.layout)}z==null&&(z=d7({panelDataArray:I}));const S=P2({layout:z,panelConstraints:I.map(T=>T.constraints)});E2(F,S)||(v(S),P.current.layout=S,ee&&ee(S),mc(I,S,y.current))}});const $=jr(K=>function(ce){ce.preventDefault();const F=h.current;if(!F)return()=>null;const{direction:I,dragState:z,id:S,keyboardResizeBy:T,onLayout:D}=k.current,{layout:O,panelDataArray:U}=P.current,{initialLayout:X}=z??{},te=BM(S,K,F);let J=u7(ce,K,I,z,T,F);if(J===0)return;const se=I==="horizontal";document.dir==="rtl"&&se&&(J=-J);const Ie=U.map(Ve=>Ve.constraints),me=Gd({delta:J,layout:X??O,panelConstraints:Ie,pivotIndices:te,trigger:UM(ce)?"keyboard":"mouse-or-touch"}),je=!Rp(O,me);(VM(ce)||HM(ce))&&_.current!=J&&(_.current=J,Hy(je?se?"horizontal":"vertical":se?J<0?"horizontal-min":"horizontal-max":J<0?"vertical-min":"vertical-max")),je&&(v(me),P.current.layout=me,D&&D(me),mc(U,me,y.current))},[]),V=jr((K,ee)=>{const{onLayout:ce}=k.current,{layout:F,panelDataArray:I}=P.current,z=I.map(X=>X.constraints),{panelSize:S,pivotIndices:T}=gc(I,K,F);He(S!=null);const O=_c(I,K)===I.length-1?S-ee:ee-S,U=Gd({delta:O,layout:F,panelConstraints:z,pivotIndices:T,trigger:"imperative-api"});Rp(F,U)||(v(U),P.current.layout=U,ce&&ce(U),mc(I,U,y.current))},[]),q=jr((K,ee)=>{const{direction:ce}=k.current,{layout:F}=P.current;if(!h.current)return;const I=uv(K,h.current);He(I);const z=WM(ce,ee);m({dragHandleId:K,dragHandleRect:I.getBoundingClientRect(),initialCursorPosition:z,initialLayout:F})},[]),ne=jr(()=>{h7(),m(null)},[]),W=jr(K=>{const{panelDataArray:ee}=P.current,ce=_c(ee,K);ce>=0&&(ee.splice(ce,1),delete y.current[K.id],P.current.panelDataArrayChanged=!0)},[]),j=r7(()=>({collapsePanel:E,direction:r,dragState:p,expandPanel:C,getPanelSize:N,getPanelStyle:M,groupId:f,isPanelCollapsed:R,isPanelExpanded:L,registerPanel:H,registerResizeHandle:$,resizePanel:V,startDragging:q,stopDragging:ne,unregisterPanel:W,panelGroupElement:h.current}),[E,p,r,C,N,M,f,R,L,H,$,V,q,ne,W]),Q={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Du(cv.Provider,{value:j},Du(u,{...d,children:e,className:n,style:{...Q,...c},ref:h,"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":f}))}const JM=RM((t,e)=>Du(qM,{...t,forwardedRef:e}));qM.displayName="PanelGroup";JM.displayName="forwardRef(PanelGroup)";function _c(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function gc(t,e,n){const r=t.map(c=>c.constraints),i=_c(t,e),s=r[i],a=i===t.length-1?[i-1,i]:[i,i+1],l=n[i];return{...s,panelSize:l,pivotIndices:a}}function y7({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){Ml(()=>{if(t||n==null||r==null)return;const i=uv(e,r);if(i==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=i.getAttribute("data-panel-group-id");He(a);const l=Xf(a,r),c=jM(a,e,r);He(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return i.addEventListener("keydown",s),()=>{i.removeEventListener("keydown",s)}},[r,t,e,n])}function v1({children:t=null,className:e="",disabled:n=!1,id:r,onDragging:i,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=Wr(null),u=Wr({onDragging:i});Ml(()=>{u.current.onDragging=i});const d=DM(cv);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,dragState:h,groupId:p,registerResizeHandle:m,startDragging:w,stopDragging:v,panelGroupElement:y}=d,x=mk(r),_=(h==null?void 0:h.dragHandleId)===x,[k,P]=Gg(!1),[E,C]=Gg(null),N=jr(()=>{const R=c.current;He(R),R.blur(),v();const{onDragging:L}=u.current;L&&L(!1)},[v]);Ml(()=>{if(n)C(null);else{const R=m(x);C(()=>R)}},[n,x,m]),Ml(()=>{if(n||E==null||!_)return;const R=V=>{E(V)},L=V=>{E(V)},H=c.current;He(H);const $=H.ownerDocument;return $.body.addEventListener("contextmenu",N),$.body.addEventListener("mousemove",R),$.body.addEventListener("touchmove",R),$.body.addEventListener("mouseleave",L),window.addEventListener("mouseup",N),window.addEventListener("touchend",N),()=>{$.body.removeEventListener("contextmenu",N),$.body.removeEventListener("mousemove",R),$.body.removeEventListener("touchmove",R),$.body.removeEventListener("mouseleave",L),window.removeEventListener("mouseup",N),window.removeEventListener("touchend",N)}},[f,n,_,E,N]),y7({disabled:n,handleId:x,resizeHandler:E,panelGroupElement:y});const M={cursor:GM(f),touchAction:"none",userSelect:"none"};return Du(a,{...l,children:t,className:e,onBlur:()=>P(!1),onFocus:()=>P(!0),onMouseDown:R=>{w(x,R.nativeEvent);const L=u.current;He(L);const{onDragging:H}=L;H&&H(!0)},onMouseUp:N,onTouchCancel:N,onTouchEnd:N,onTouchStart:R=>{w(x,R.nativeEvent);const L=u.current;He(L);const{onDragging:H}=L;H&&H(!0)},ref:c,role:"separator",style:{...M,...s},tabIndex:o,"data-panel-group-direction":f,"data-panel-group-id":p,"data-resize-handle":"","data-resize-handle-active":_?"pointer":k?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":x})}v1.displayName="PanelResizeHandle";var Ps=function(){return Ps=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ps.apply(this,arguments)};function ZM(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function w7(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var b7=function(){};function x7(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function S7(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var QM=typeof window<"u",k7=QM?window:null,$2=function(t){return!!t.addEventListener},O2=function(t){return!!t.on},Hm=function(t,e,n,r){n===void 0&&(n=k7),g.useEffect(function(){if(e&&n)return $2(n)?x7(n,t,e,r):O2(n)&&n.on(t,e,r),function(){$2(n)?S7(n,t,e,r):O2(n)&&n.off(t,e,r)}},[t,e,n,JSON.stringify(r)])},_7=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},ho=function(t,e,n,r){e===void 0&&(e=b7),n===void 0&&(n={}),r===void 0&&(r=[t]);var i=n.event,s=i===void 0?"keydown":i,o=n.target,a=n.options,l=g.useMemo(function(){var c=_7(t),u=function(d){if(c(d))return e(d)};return u},r);Hm(s,l,o,a)},C7=function(t,e){return e!==void 0?e:QM?window.matchMedia(t).matches:!1},E7=function(t,e){var n=g.useState(C7(t,e)),r=n[0],i=n[1];return g.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&i(!!o.matches)};return o.addListener(a),i(o.matches),function(){s=!1,o.removeListener(a)}},[t]),r};const A7="modulepreload",P7=function(t){return"/VonSim8/"+t},N2={},T7=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=P7(o),o in N2)return;N2[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":A7,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function $7(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l,c;const u=async(f=!0)=>{await l,await(c==null?void 0:c())};async function d(){if("serviceWorker"in navigator){const{Workbox:f}=await T7(()=>import("./workbox-window.prod.es5-prqDwDSL.js"),__vite__mapDeps([]));a=new f("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"}),c=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let h=!1;const p=()=>{h=!0,a==null||a.addEventListener("controlling",m=>{m.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",m=>{typeof m.isUpdate>"u"?typeof m.isExternal<"u"?m.isExternal?p():!h&&(r==null||r()):m.isExternal?window.location.reload():!h&&(r==null||r()):m.isUpdate||r==null||r()}),a.addEventListener("waiting",p),a.addEventListener("externalwaiting",p)}a.register({immediate:e}).then(h=>{s?s("/VonSim8/sw.js",h):i==null||i(h)}).catch(h=>{o==null||o(h)})}}return l=d(),u}function O7(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=g.useState(!1),[c,u]=g.useState(!1),[d]=g.useState(()=>$7({immediate:e,onOfflineReady(){u(!0),r==null||r()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:i,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[c,u],updateServiceWorker:d}}class dt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=Iu(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Ts.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Iu(this,e,n);let r=[];return this.decompose(e,n,r,0),Ts.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new mf(this),s=new mf(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new mf(this,e)}iterRange(e,n=this.length){return new eR(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new tR(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?dt.empty:e.length<=32?new qt(e):Ts.from(qt.split(e,[]))}}class qt extends dt{constructor(e,n=N7(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new M7(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new qt(M2(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=Wm(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new qt(a,o.length+s.length));else{let l=a.length>>1;r.push(new qt(a.slice(0,l)),new qt(a.slice(l)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof qt))return super.replace(e,n,r);[e,n]=Iu(this,e,n);let i=Wm(this.text,Wm(r.text,M2(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new qt(i,s):Ts.from(qt.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=Iu(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new qt(r,i)),r=[],i=-1);return i>-1&&n.push(new qt(r,i)),n}}class Ts extends dt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=i&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?r.push(a):a.decompose(e-o,n-o,r,c)}o=l+1}}replace(e,n,r){if([e,n]=Iu(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[i]=l,new Ts(u,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=Iu(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Ts))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],c=e.children[s];if(l!=c)return r+l.scanIdentical(c,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let h of e)r+=h.lines;if(r<32){let h=[];for(let p of e)p.flatten(h);return new qt(h,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,u=[];function d(h){let p;if(h.lines>s&&h instanceof Ts)for(let m of h.children)d(m);else h.lines>o&&(l>o||!l)?(f(),a.push(h)):h instanceof qt&&l&&(p=u[u.length-1])instanceof qt&&h.lines+p.lines<=32?(l+=h.lines,c+=h.length+1,u[u.length-1]=new qt(p.text.concat(h.text),p.length+1+h.length)):(l+h.lines>i&&f(),l+=h.lines,c+=h.length+1,u.push(h))}function f(){l!=0&&(a.push(u.length==1?u[0]:Ts.from(u,c)),c=-1,l=u.length=0)}for(let h of e)d(h);return f(),a.length==1?a[0]:new Ts(a,n)}}dt.empty=new qt([""],0);function N7(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Wm(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function M2(t,e,n){return Wm(t,[""],e,n)}class mf{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof qt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof qt?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof qt){let l=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof qt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class eR{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new mf(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class tR{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(dt.prototype[Symbol.iterator]=function(){return this.iter()},mf.prototype[Symbol.iterator]=eR.prototype[Symbol.iterator]=tR.prototype[Symbol.iterator]=function(){return this});class M7{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function Iu(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}let lu="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<lu.length;t++)lu[t]+=lu[t-1];function R7(t){for(let e=1;e<lu.length;e+=2)if(lu[e]>t)return lu[e-1]<=t;return!1}function R2(t){return t>=127462&&t<=127487}const D2=8205;function Dn(t,e,n=!0,r=!0){return(n?nR:D7)(t,e,r)}function nR(t,e,n){if(e==t.length)return e;e&&rR(t.charCodeAt(e))&&iR(t.charCodeAt(e-1))&&e--;let r=tr(t,e);for(e+=Gi(r);e<t.length;){let i=tr(t,e);if(r==D2||i==D2||n&&R7(i))e+=Gi(i),r=i;else if(R2(i)){let s=0,o=e-2;for(;o>=0&&R2(tr(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function D7(t,e,n){for(;e>0;){let r=nR(t,e-2,n);if(r<e)return r;e--}return 0}function rR(t){return t>=56320&&t<57344}function iR(t){return t>=55296&&t<56320}function tr(t,e){let n=t.charCodeAt(e);if(!iR(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return rR(r)?(n-55296<<10)+(r-56320)+65536:n}function gk(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Gi(t){return t<65536?1:2}const y1=/\r\n?|\n/;var Er=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Er||(Er={}));class Bs{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){w1(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new Bs(e)}composeDesc(e){return this.empty?e:e.empty?this:sR(this,e)}mapDesc(e,n=!1){return e.empty?this:b1(this,e,n)}mapPos(e,n=-1,r=Er.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(r!=Er.Simple&&c>=e&&(r==Er.TrackDel&&i<e&&c>e||r==Er.TrackBefore&&i<e||r==Er.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Bs(e)}static create(e){return new Bs(e)}}class un extends Bs{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return w1(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return b1(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(dt.empty);r.push(o?e.slice(s,s+o):dt.empty)}s+=o}return new un(n,r)}compose(e){return this.empty?e:e.empty?this:sR(this,e,!0)}map(e,n=!1){return e.empty?this:b1(this,e,n,!0)}iterChanges(e,n=!1){w1(this,e,n)}get desc(){return Bs.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new Yf(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);Wn(i,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;Wn(n,u,d),d>0&&da(r,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);Wn(n,u,-1),Wn(i,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new un(n,r),filtered:Bs.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!i.length)return;o<n&&Wn(i,n-o,-1);let d=new un(i,s);a=a?a.compose(d.map(a)):d,i=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof un){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:f=d,insert:h}=u;if(d>f||d<0||f>n)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${n})`);let p=h?typeof h=="string"?dt.of(h.split(r||y1)):h:dt.empty,m=p.length;if(d==f&&m==0)return;d<o&&l(),d>o&&Wn(i,d-o,-1),Wn(i,f-d,m),da(s,i,p),o=f}}return c(e),l(!a),a}static empty(e){return new un(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(dt.empty);r[i]=dt.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new un(n,r)}static createSet(e,n){return new un(e,n)}}function Wn(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function da(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(dt.empty);t.push(n)}}function w1(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,u=s,d=dt.empty;for(;c+=a,u+=l,l&&r&&(d=d.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,c,s,u,d),i=c,s=u}}}function b1(t,e,n,r=!1){let i=[],s=r?[]:null,o=new Yf(t),a=new Yf(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);Wn(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(Wn(i,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(Wn(i,0,o.ins),s&&da(s,i,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;Wn(i,c,l<o.i?o.ins:0),s&&l<o.i&&da(s,i,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?un.createSet(i,s):Bs.create(i);throw new Error("Mismatched change set lengths")}}function sR(t,e,n=!1){let r=[],i=n?[]:null,s=new Yf(t),o=new Yf(e);for(let a=!1;;){if(s.done&&o.done)return i?un.createSet(r,i):Bs.create(r);if(s.ins==0)Wn(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)Wn(r,0,o.ins,a),i&&da(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Wn(r,l,u,a),i&&u&&da(i,r,o.text)}else o.ins==-1?(Wn(r,s.off?0:s.len,l,a),i&&da(i,r,s.textBit(l))):(Wn(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&da(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),s.forward2(l),o.forward(l)}}}}class Yf{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?dt.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?dt.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class El{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new El(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return ie.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return ie.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ie.range(e.anchor,e.head)}static create(e,n,r){return new El(e,n,r)}}class ie{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:ie.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ie([this.main],0)}addRange(e,n=!0){return ie.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,ie.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ie(e.ranges.map(n=>El.fromJSON(n)),e.main)}static single(e,n=e){return new ie([ie.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return ie.normalized(e.slice(),n);r=s.to}return new ie(e,n)}static cursor(e,n=0,r,i){return El.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?El.create(n,e,48|s):El.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?ie.range(l,a):ie.range(a,l))}}return new ie(e,n)}}function oR(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let vk=0;class Pe{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=vk++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Pe(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:yk),!!e.static,e.enables)}of(e){return new Gm([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Gm(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Gm(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function yk(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class Gm{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=vk++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=r(d),1},update(d,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||x1(d,u)){let h=r(d);if(a?!I2(h,d.values[o],i):!i(h,d.values[o]))return d.values[o]=h,1}return 0},reconfigure:(d,f)=>{let h,p=f.config.address[s];if(p!=null){let m=Xg(f,p);if(this.dependencies.every(w=>w instanceof Pe?f.facet(w)===d.facet(w):w instanceof dr?f.field(w,!1)==d.field(w,!1):!0)||(a?I2(h=r(d),m,i):i(h=r(d),m)))return d.values[o]=m,0}else h=r(d);return d.values[o]=h,1}}}}function I2(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function x1(t,e){let n=!1;for(let r of e)gf(t,r)&1&&(n=!0);return n}function I7(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<r.length;u++){let d=Xg(l,r[u]);if(i[u]==2)for(let f of d)c.push(f);else c.push(d)}return e.combine(c)}return{create(l){for(let c of r)gf(l,c);return l.values[o]=a(l),1},update(l,c){if(!x1(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=x1(l,r),d=c.config.facets[e.id],f=c.facet(e);if(d&&!u&&yk(n,d))return l.values[o]=f,0;let h=a(l);return e.compare(h,f)?(l.values[o]=f,0):(l.values[o]=h,1)}}}const L2=Pe.define({static:!0});class dr{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new dr(vk++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(L2).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}init(e){return[this,L2.of({field:this,create:e})]}get extension(){return this}}const ml={lowest:4,low:3,default:2,high:1,highest:0};function _d(t){return e=>new aR(e,t)}const Hh={highest:_d(ml.highest),high:_d(ml.high),default:_d(ml.default),low:_d(ml.low),lowest:_d(ml.lowest)};class aR{constructor(e,n){this.inner=e,this.prec=n}}class Wh{of(e){return new S1(this,e)}reconfigure(e){return Wh.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class S1{constructor(e,n){this.compartment=e,this.inner=n}}class Kg{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let f of L7(e,n,o))f instanceof dr?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of i)a[f.id]=c.length<<1,c.push(h=>f.slot(h));let u=r==null?void 0:r.config.facets;for(let f in s){let h=s[f],p=h[0].facet,m=u&&u[f]||[];if(h.every(w=>w.type==0))if(a[p.id]=l.length<<1|1,yk(m,h))l.push(r.facet(p));else{let w=p.combine(h.map(v=>v.value));l.push(r&&p.compare(w,r.facet(p))?r.facet(p):w)}else{for(let w of h)w.type==0?(a[w.id]=l.length<<1|1,l.push(w.value)):(a[w.id]=c.length<<1,c.push(v=>w.dynamicSlot(v)));a[p.id]=c.length<<1,c.push(w=>I7(w,p,h))}}let d=c.map(f=>f(a));return new Kg(e,o,d,a,l,s)}}function L7(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof S1&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof S1){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof aR)s(o.inner,o.prec);else if(o instanceof dr)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Gm)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,ml.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,ml.default),r.reduce((o,a)=>o.concat(a))}function gf(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Xg(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const lR=Pe.define(),k1=Pe.define({combine:t=>t.some(e=>e),static:!0}),cR=Pe.define({combine:t=>t.length?t[0]:void 0,static:!0}),uR=Pe.define(),dR=Pe.define(),fR=Pe.define(),hR=Pe.define({combine:t=>t.length?t[0]:!1});class Mo{constructor(e,n){this.type=e,this.value=n}static define(){return new F7}}class F7{of(e){return new Mo(this,e)}}class j7{constructor(e){this.map=e}of(e){return new Ye(this,e)}}class Ye{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Ye(this.type,n)}is(e){return this.type==e}static define(e={}){return new j7(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}Ye.reconfigure=Ye.define();Ye.appendConfig=Ye.define();class pn{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&oR(r,n.newLength),s.some(a=>a.type==pn.time)||(this.annotations=s.concat(pn.time.of(Date.now())))}static create(e,n,r,i,s,o){return new pn(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(pn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}pn.time=Mo.define();pn.userEvent=Mo.define();pn.addToHistory=Mo.define();pn.remote=Mo.define();function B7(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function pR(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=un.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:Ye.mapEffects(t.effects,i).concat(Ye.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function _1(t,e,n){let r=e.selection,i=cu(e.annotations);return e.userEvent&&(i=i.concat(pn.userEvent.of(e.userEvent))),{changes:e.changes instanceof un?e.changes:un.of(e.changes||[],n,t.facet(cR)),selection:r&&(r instanceof ie?r:ie.single(r.anchor,r.head)),effects:cu(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function mR(t,e,n){let r=_1(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=pR(r,_1(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=pn.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return U7(n?z7(i):i)}function z7(t){let e=t.startState,n=!0;for(let i of e.facet(uR)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:B7(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=un.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=pn.create(e,i,t.selection&&t.selection.map(s),Ye.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(dR);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof pn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof pn?t=s[0]:t=mR(e,cu(s),!1)}return t}function U7(t){let e=t.startState,n=e.facet(fR),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=pR(r,_1(e,s,t.changes.newLength),!0))}return r==t?t:pn.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const V7=[];function cu(t){return t==null?V7:Array.isArray(t)?t:[t]}var In=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(In||(In={}));const H7=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let C1;try{C1=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function W7(t){if(C1)return C1.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||H7.test(n)))return!0}return!1}function G7(t){return e=>{if(!/\S/.test(e))return In.Space;if(W7(e))return In.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return In.Word;return In.Other}}class Qe{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)gf(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return gf(this,r),Xg(this,r)}update(...e){return mR(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(Wh.reconfigure)?(n&&(i=new Map,n.compartments.forEach((l,c)=>i.set(c,l)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(Ye.reconfigure)?(n=null,r=a.value):a.is(Ye.appendConfig)&&(n=null,r=cu(r).concat(a.value));let s;n?s=e.startState.values.slice():(n=Kg.resolve(r,i,this),s=new Qe(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(k1)?e.newSelection:e.newSelection.asSingle();new Qe(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:ie.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=cu(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(i);for(let f=0;f<a;f++)s[f]=s[f].map(u);let d=i.mapDesc(c,!0);s.push(l.range.map(d)),i=i.compose(u),o=Ye.mapEffects(o,u).concat(Ye.mapEffects(cu(l.effects),d))}return{changes:i,selection:ie.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof un?e:un.of(e,this.doc.length,this.facet(Qe.lineSeparator))}toText(e){return dt.of(e.split(this.facet(Qe.lineSeparator)||y1))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(gf(this,n),Xg(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof dr&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Qe.create({doc:e.doc,selection:ie.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=Kg.resolve(e.extensions||[],new Map),r=e.doc instanceof dt?e.doc:dt.of((e.doc||"").split(n.staticFacet(Qe.lineSeparator)||y1)),i=e.selection?e.selection instanceof ie?e.selection:ie.single(e.selection.anchor,e.selection.head):ie.single(0);return oR(i,r.length),n.staticFacet(k1)||(i=i.asSingle()),new Qe(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Qe.tabSize)}get lineBreak(){return this.facet(Qe.lineSeparator)||`
`}get readOnly(){return this.facet(hR)}phrase(e,...n){for(let r of this.facet(Qe.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(lR))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return G7(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Dn(n,o,!1);if(s(n.slice(l,o))!=In.Word)break;o=l}for(;a<i;){let l=Dn(n,a);if(s(n.slice(a,l))!=In.Word)break;a=l}return o==a?null:ie.range(o+r,a+r)}}Qe.allowMultipleSelections=k1;Qe.tabSize=Pe.define({combine:t=>t.length?t[0]:4});Qe.lineSeparator=cR;Qe.readOnly=hR;Qe.phrases=Pe.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Qe.languageData=lR;Qe.changeFilter=uR;Qe.transactionFilter=dR;Qe.transactionExtender=fR;Wh.reconfigure=Ye.define();function Za(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Kl{eq(e){return this==e}range(e,n=e){return E1.create(e,n,this)}}Kl.prototype.startSide=Kl.prototype.endSide=0;Kl.prototype.point=!1;Kl.prototype.mapMode=Er.TrackDel;let E1=class gR{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new gR(e,n,r)}};function A1(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class wk{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,f,h;if(u==d){let p=n.mapPos(u,c.startSide,c.mapMode);if(p==null||(f=h=p,c.startSide!=c.endSide&&(h=n.mapPos(u,c.endSide),h<f)))continue}else if(f=n.mapPos(u,c.startSide),h=n.mapPos(d,c.endSide),f>h||f==h&&c.startSide>0&&c.endSide<=0)continue;(h-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,h-f)),r.push(c),i.push(f-o),s.push(h-o))}return{mapped:r.length?new wk(i,s,r,a):null,pos:o}}}class ht{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new ht(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(A1)),this.isEmpty)return n.length?ht.of(n):this;let a=new vR(this,null,-1).goto(0),l=0,c=[],u=new Xl;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(E1.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?ht.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(i=Math.max(i,u.maxPoint),n.push(u),r.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new ht(r,n,s||ht.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return qf.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return qf.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=F2(o,a,r),c=new Cd(o,l,s),u=new Cd(a,l,s);r.iterGaps((d,f,h)=>j2(c,d,u,f,h,i)),r.empty&&r.length==0&&j2(c,0,u,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=F2(s,o),l=new Cd(s,a,0).goto(r),c=new Cd(o,a,0).goto(r);for(;;){if(l.to!=c.to||!P1(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,n,r,i,s=-1){let o=new Cd(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:Math.min(u.length,l);i.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new Xl;for(let i of e instanceof E1?[e]:n?K7(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return ht.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=ht.empty;i=i.nextLayer)n=new ht(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}ht.empty=new ht([],[],null,-1);function K7(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(A1(e,r)>0)return t.slice().sort(A1);e=r}return t}ht.empty.nextLayer=ht.empty;class Xl{finishChunk(e){this.chunks.push(new wk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Xl)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(ht.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ht.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function F2(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class vR{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class qf{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new vR(o,n,r,s));return i.length==1?i[0]:new qf(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Wy(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Wy(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Wy(this.heap,0)}}}function Wy(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Cd{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=qf.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Dp(this.active,e),Dp(this.activeTo,e),Dp(this.activeRank,e),this.minActive=B2(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Ip(this.active,n,r),Ip(this.activeTo,n,i),Ip(this.activeRank,n,s),e&&Ip(e,n,this.cursor.from),this.minActive=B2(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Dp(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function j2(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,l=r-e;for(;;){let c=t.to+l-n.to||t.endSide-n.endSide,u=c<0?t.to+l:n.to,d=Math.min(u,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&P1(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!P1(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),u>o)break;a=u,c<=0&&t.next(),c>=0&&n.next()}}function P1(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Dp(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Ip(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function B2(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Gh(t,e,n=t.length){let r=0;for(let i=0;i<n;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Dn(t,i));return r}function X7(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Dn(t,i)}return r===!0?-1:t.length}const T1="",z2=typeof Symbol>"u"?"__"+T1:Symbol.for(T1),$1=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),U2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Ra{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let h in a){let p=a[h];if(/&/.test(h))s(h.split(/,\s*/).map(m=>o.map(w=>m.replace(/&/,w))).reduce((m,w)=>m.concat(w)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+h+") should be a primitive value.");s(i(h),p,u,f)}else p!=null&&u.push(h.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(u.length||f)&&l.push((r&&!d&&!c?o.map(r):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=U2[z2]||1;return U2[z2]=e+1,T1+e.toString(36)}static mount(e,n,r){let i=e[$1],s=r&&r.nonce;i?s&&i.setNonce(s):i=new Y7(e,s),i.mount(Array.isArray(n)?n:[n])}}let V2=new Map;class Y7{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=V2.get(r);if(s)return e.adoptedStyleSheets=[s.sheet,...e.adoptedStyleSheets],e[$1]=s;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],V2.set(r,this)}else{this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);let s=e.head||e;s.insertBefore(this.styleTag,s.firstChild)}this.modules=[],e[$1]=this}mount(e){let n=this.sheet,r=0,i=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),a==-1){if(this.modules.splice(i++,0,o),n)for(let l=0;l<o.rules.length;l++)n.insertRule(o.rules[l],r++)}else{for(;i<a;)r+=this.modules[i++].rules.length;r+=o.rules.length,i++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Da={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Jf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},q7=typeof navigator<"u"&&/Mac/.test(navigator.platform),J7=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var $n=0;$n<10;$n++)Da[48+$n]=Da[96+$n]=String($n);for(var $n=1;$n<=24;$n++)Da[$n+111]="F"+$n;for(var $n=65;$n<=90;$n++)Da[$n]=String.fromCharCode($n+32),Jf[$n]=String.fromCharCode($n);for(var Gy in Da)Jf.hasOwnProperty(Gy)||(Jf[Gy]=Da[Gy]);function Z7(t){var e=q7&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||J7&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Jf:Da)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Yg(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function O1(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Q7(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Km(t,e){if(!e.anchorNode)return!1;try{return O1(t,e.anchorNode)}catch{return!1}}function Zf(t){return t.nodeType==3?Yl(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function vf(t,e,n,r){return n?H2(t,e,n,r,-1)||H2(t,e,n,r,1):!1}function Qf(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function H2(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:xo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Qf(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?xo(t):0}else return!1}}function xo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function bk(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function e9(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function yR(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function t9(t,e,n,r,i,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let f,h=u==l.body,p=1,m=1;if(h)f=e9(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let y=u.getBoundingClientRect();({scaleX:p,scaleY:m}=yR(u,y)),f={left:y.left,right:y.left+u.clientWidth*p,top:y.top,bottom:y.top+u.clientHeight*m}}let w=0,v=0;if(i=="nearest")e.top<f.top?(v=-(f.top-e.top+o),n>0&&e.bottom>f.bottom+v&&(v=e.bottom-f.bottom+v+o)):e.bottom>f.bottom&&(v=e.bottom-f.bottom+o,n<0&&e.top-v<f.top&&(v=-(f.top+v-e.top+o)));else{let y=e.bottom-e.top,x=f.bottom-f.top;v=(i=="center"&&y<=x?e.top+y/2-x/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-x+o)-f.top}if(r=="nearest"?e.left<f.left?(w=-(f.left-e.left+s),n>0&&e.right>f.right+w&&(w=e.right-f.right+w+s)):e.right>f.right&&(w=e.right-f.right+s,n<0&&e.left<f.left+w&&(w=-(f.left+w-e.left+s))):w=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,w||v)if(h)c.scrollBy(w,v);else{let y=0,x=0;if(v){let _=u.scrollTop;u.scrollTop+=v/m,x=(u.scrollTop-_)*m}if(w){let _=u.scrollLeft;u.scrollLeft+=w/p,y=(u.scrollLeft-_)*p}e={left:e.left-y,top:e.top-x,right:e.right-y,bottom:e.bottom-x},y&&Math.abs(y-w)<1&&(r="nearest"),x&&Math.abs(x-v)<1&&(i="nearest")}if(h)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function n9(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class r9{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?xo(n):0),r,Math.min(e.focusOffset,r?xo(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let vc=null;function wR(t){if(t.setActive)return t.setActive();if(vc)return t.focus(vc);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(vc==null?{get preventScroll(){return vc={preventScroll:!0},!0}}:void 0),!vc){vc=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let W2;function Yl(t,e,n=e){let r=W2||(W2=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function uu(t,e,n){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,t.dispatchEvent(i);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,t.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}function i9(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function bR(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function s9(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,xo(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=xo(n))}else{if(n==t)return!0;r=Qf(n),n=n.parentNode}}function xR(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class Xn{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Xn(e.parentNode,Qf(e),n)}static after(e,n){return new Xn(e.parentNode,Qf(e)+1,n)}}const xk=[];class Nt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=Nt.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=G2(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=G2(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=xo(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Nt.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=r,u=r;l<this.children.length;l++){let d=this.children[l],f=c+d.length;if(c<e&&f>n)return d.domBoundsAround(e,n,c);if(f>=e&&i==-1&&(i=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+d.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=xk){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}this.children.splice(e,n-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new SR(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Nt.prototype.breakAfter=0;function G2(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class SR{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function kR(t,e,n,r,i,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,f=d?d.breakAfter:o;if(!(e==r&&u&&!o&&!f&&s.length<2&&u.merge(n,i,s.length?d:null,n==0,a,l))){if(r<c.length){let h=c[r];h&&(i<h.length||h.breakAfter&&(d!=null&&d.breakAfter))?(e==r&&(h=h.split(i),i=0),!f&&d&&h.merge(0,i,d,!0,0,l)?s[s.length-1]=h:((i||h.children.length&&!h.children[0].length)&&h.merge(0,i,null,!1,0,l),s.push(h))):h!=null&&h.breakAfter&&(d?d.breakAfter=1:o=1),r++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function _R(t,e,n,r,i,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let f of r)d+=f.length;t.length+=d,kR(t,c,u,a,l,r,0,i,s)}let Xr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},N1=typeof document<"u"?document:{documentElement:{style:{}}};const M1=/Edge\/(\d+)/.exec(Xr.userAgent),CR=/MSIE \d/.test(Xr.userAgent),R1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Xr.userAgent),dv=!!(CR||R1||M1),K2=!dv&&/gecko\/(\d+)/i.test(Xr.userAgent),Ky=!dv&&/Chrome\/(\d+)/.exec(Xr.userAgent),X2="webkitFontSmoothing"in N1.documentElement.style,ER=!dv&&/Apple Computer/.test(Xr.vendor),Y2=ER&&(/Mobile\/\w+/.test(Xr.userAgent)||Xr.maxTouchPoints>2);var Ae={mac:Y2||/Mac/.test(Xr.platform),windows:/Win/.test(Xr.platform),linux:/Linux|X11/.test(Xr.platform),ie:dv,ie_version:CR?N1.documentMode||6:R1?+R1[1]:M1?+M1[1]:0,gecko:K2,gecko_version:K2?+(/Firefox\/(\d+)/.exec(Xr.userAgent)||[0,0])[1]:0,chrome:!!Ky,chrome_version:Ky?+Ky[1]:0,ios:Y2,android:/Android\b/.test(Xr.userAgent),webkit:X2,safari:ER,webkit_version:X2?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:N1.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const o9=256;class So extends Nt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof So)||this.length-(n-e)+r.length>o9||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new So(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Xn(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return a9(this.dom,e,n)}}class ko extends Nt{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(bR(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return r&&(!(r instanceof ko&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(_R(this,e,n,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&n.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new ko(this.mark,n,o)}domAtPos(e){return AR(this,e)}coordsAt(e,n){return TR(this,e,n)}}function a9(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?Ae.chrome||Ae.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=Yl(t,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return Ae.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?bk(l,o<0):l||null}class fa extends Nt{static create(e,n,r){return new fa(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=fa.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof fa)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof fa&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return dt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):dt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Xn.before(this.dom):Xn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return bk(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Lu extends Nt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Lu&&e.side==this.side}split(){return new Lu(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Xn.before(this.dom):Xn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return dt.empty}get isHidden(){return!0}}So.prototype.children=fa.prototype.children=Lu.prototype.children=xk;function AR(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Xn(n,0)}function PR(t,e,n){let r,{children:i}=t;n>0&&e instanceof ko&&i.length&&(r=i[i.length-1])instanceof ko&&r.mark.eq(e.mark)?PR(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function TR(t,e,n){let r=null,i=-1,s=null,o=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let h=c.children[d],p=f+h.length;p>=u&&(h.children.length?a(h,u-f):(!s||s.isHidden&&n>0)&&(p>u||f==p&&h.getSide()>0)?(s=h,o=u-f):(f<u||f==p&&h.getSide()<0&&!h.isHidden)&&(r=h,i=u-f)),f=p}}a(t,e);let l=(n<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),n):l9(t)}function l9(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Zf(e);return n[n.length-1]||null}function D1(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const q2=Object.create(null);function Sk(t,e,n){if(t==e)return!0;t||(t=q2),e||(e=q2);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function I1(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function c9(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class ln extends Nt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof ln))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),_R(this,e,n,r?r.children.slice():[],s,o),!0}split(e){let n=new ln;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Sk(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){PR(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=D1(n,this.attrs||{})),r&&(this.attrs=D1({class:r},this.attrs||{}))}domAtPos(e){return AR(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(bR(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(I1(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&Nt.get(i)instanceof ko;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Nt.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!Ae.ios||!this.children.some(s=>s instanceof So))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof So)||/[^ -~]/.test(r.text))return null;let i=Zf(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=TR(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return!1}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof ln)return s;if(o>n)break}i=o+s.breakAfter}return null}}class Pa extends Nt{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof Pa)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Xn.before(this.dom):Xn.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new Pa(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return xk}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):dt.empty}domBoundsAround(){return null}become(e){return e instanceof Pa&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class Qa{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var sr=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(sr||(sr={}));class Je extends Kl{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Kh(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Ia(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=$R(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new Ia(e,r,i,n,e.widget||null,!0)}static line(e){return new Xh(e)}static set(e,n=!1){return ht.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Je.none=ht.empty;class Kh extends Je{constructor(e){let{start:n,end:r}=$R(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Kh&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Sk(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Kh.prototype.point=!1;class Xh extends Je{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Xh&&this.spec.class==e.spec.class&&Sk(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Xh.prototype.mapMode=Er.TrackBefore;Xh.prototype.point=!0;class Ia extends Je{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?Er.TrackBefore:Er.TrackAfter:Er.TrackDel}get type(){return this.startSide!=this.endSide?sr.WidgetRange:this.startSide<=0?sr.WidgetBefore:sr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Ia&&u9(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Ia.prototype.point=!0;function $R(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function u9(t,e){return t==e||!!(t&&e&&t.compare(e))}function L1(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class yf{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Pa&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ln),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Lp(new Lu(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Pa)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(Lp(new So(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof Ia){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof Ia)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Pa(r.widget||new J2("div"),a,r));else{let l=fa.create(r.widget||new J2("span"),a,a?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<n||r.startSide>0),u=!l.isEditable&&(e<n||s>i.length||r.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(d.append(Lp(new Lu(1),i),s),s=i.length+Math.max(0,s-i.length)),d.append(Lp(l,i),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new yf(e,n,r,s);return o.openEnd=ht.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Lp(t,e){for(let n of e)t=new ko(n,[t],t.length);return t}class J2 extends Qa{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}var Rt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Rt||(Rt={}));const ql=Rt.LTR,kk=Rt.RTL;function OR(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const d9=OR("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),f9=OR("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),F1=Object.create(null),fs=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);F1[e]=n,F1[n]=-e}function NR(t){return t<=247?d9[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?f9[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const h9=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ha{get dir(){return this.level%2?kk:ql}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function MR(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!MR(r.inner,i.inner))return!1}return!0}const bt=[];function p9(t,e,n,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:n,l=s?256:i;for(let c=o,u=l,d=l;c<a;c++){let f=NR(t.charCodeAt(c));f==512?f=u:f==8&&d==4&&(f=16),bt[c]=f==4?2:f,f&7&&(d=f),u=f}for(let c=o,u=l,d=l;c<a;c++){let f=bt[c];if(f==128)c<a-1&&u==bt[c+1]&&u&24?f=bt[c]=u:bt[c]=256;else if(f==64){let h=c+1;for(;h<a&&bt[h]==64;)h++;let p=c&&u==8||h<n&&bt[h]==8?d==1?1:8:256;for(let m=c;m<h;m++)bt[m]=p;c=h-1}else f==8&&d==1&&(bt[c]=1);u=f,f&7&&(d=f)}}}function m9(t,e,n,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let c=o?r[o-1].to:e,u=o<r.length?r[o].from:n;for(let d=c,f,h,p;d<u;d++)if(h=F1[f=t.charCodeAt(d)])if(h<0){for(let m=a-3;m>=0;m-=3)if(fs[m+1]==-h){let w=fs[m+2],v=w&2?i:w&4?w&1?s:i:0;v&&(bt[d]=bt[fs[m]]=v),a=m;break}}else{if(fs.length==189)break;fs[a++]=d,fs[a++]=f,fs[a++]=l}else if((p=bt[d])==2||p==1){let m=p==i;l=m?0:1;for(let w=a-3;w>=0;w-=3){let v=fs[w+2];if(v&2)break;if(m)fs[w+2]|=2;else{if(v&4)break;fs[w+2]|=4}}}}}function g9(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let o=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let l=o;l<a;){let c=bt[l];if(c==256){let u=l+1;for(;;)if(u==a){if(i==n.length)break;u=n[i++].to,a=i<n.length?n[i].from:e}else if(bt[u]==256)u++;else break;let d=s==1,f=(u<e?bt[u]:r)==1,h=d==f?d?1:2:r;for(let p=u,m=i,w=m?n[m-1].to:t;p>l;)p==w&&(p=n[--m].from,w=m?n[m-1].to:t),bt[--p]=h;l=u}else s=c,l++}}}function j1(t,e,n,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let m=bt[l];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,h=u?r:r+1,p=l;e:for(;;)if(c<s.length&&p==s[c].from){if(d)break e;let m=s[c];if(!u)for(let w=m.to,v=c+1;;){if(w==n)break e;if(v<s.length&&s[v].from==w)w=s[v++].to;else{if(bt[w]==a)break e;break}}if(c++,f)f.push(m);else{m.from>l&&o.push(new ha(l,m.from,h));let w=m.direction==ql!=!(h%2);B1(t,w?r+1:r,i,m.inner,m.from,m.to,o),l=m.to}p=m.to}else{if(p==n||(u?bt[p]!=a:bt[p]==a))break;p++}f?j1(t,l,p,r+1,i,f,o):l<p&&o.push(new ha(l,p,h)),l=p}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let m=bt[l-1];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,h=u?r:r+1,p=l;e:for(;;)if(c&&p==s[c-1].to){if(d)break e;let m=s[--c];if(!u)for(let w=m.from,v=c;;){if(w==e)break e;if(v&&s[v-1].to==w)w=s[--v].from;else{if(bt[w-1]==a)break e;break}}if(f)f.push(m);else{m.to<l&&o.push(new ha(m.to,l,h));let w=m.direction==ql!=!(h%2);B1(t,w?r+1:r,i,m.inner,m.from,m.to,o),l=m.from}p=m.from}else{if(p==e||(u?bt[p-1]!=a:bt[p-1]==a))break;p--}f?j1(t,p,l,r+1,i,f,o):p<l&&o.push(new ha(p,l,h)),l=p}}function B1(t,e,n,r,i,s,o){let a=e%2?2:1;p9(t,i,s,r,a),m9(t,i,s,r,a),g9(i,s,r,a),j1(t,i,s,e,n,r,o)}function v9(t,e,n){if(!t)return[new ha(0,0,e==kk?1:0)];if(e==ql&&!n.length&&!h9.test(t))return RR(t.length);if(n.length)for(;t.length>bt.length;)bt[bt.length]=256;let r=[],i=e==ql?0:1;return B1(t,i,i,n,0,t.length,r),r}function RR(t){return[new ha(0,t,0)]}let DR="";function y9(t,e,n,r,i){var s;let o=r.head-t.from,a=ha.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],c=l.side(i,n);if(o==c){let f=a+=i?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!i,n),c=l.side(i,n)}let u=Dn(t.text,o,l.forward(i,n));(u<l.from||u>l.to)&&(u=c),DR=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return d&&u==c&&d.level+(i?0:1)<l.level?ie.cursor(d.side(!i,n)+t.from,d.forward(i,n)?1:-1,d.level):ie.cursor(u+t.from,l.forward(i,n)?-1:1,l.level)}function w9(t,e,n){for(let r=e;r<n;r++){let i=NR(t.charCodeAt(r));if(i==1)return ql;if(i==2||i==4)return kk}return ql}const IR=Pe.define(),LR=Pe.define(),FR=Pe.define(),jR=Pe.define(),z1=Pe.define(),BR=Pe.define(),zR=Pe.define(),UR=Pe.define({combine:t=>t.some(e=>e)}),VR=Pe.define({combine:t=>t.some(e=>e)});class du{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new du(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new du(ie.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Fp=Ye.define({map:(t,e)=>t.map(e)});function Qi(t,e,n){let r=t.facet(jR);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const fv=Pe.define({combine:t=>t.length?t[0]:!0});let b9=0;const Xd=Pe.define();class Bn{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.extension=s(this)}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new Bn(b9++,e,r,i,a=>{let l=[Xd.of(a)];return o&&l.push(eh.of(c=>{let u=c.plugin(a);return u?o(u):Je.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return Bn.define(r=>new e(r),n)}}class Xy{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Qi(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Qi(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Qi(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const HR=Pe.define(),_k=Pe.define(),eh=Pe.define(),WR=Pe.define(),Ck=Pe.define(),GR=Pe.define();function Z2(t,e){let n=t.state.facet(GR);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return ht.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=i;for(let f=a.length-1;f>=0;f--,l--){let h=a[f].spec.bidiIsolate,p;if(h==null&&(h=w9(e.text,c,u)),l>0&&d.length&&(p=d[d.length-1]).to==c&&p.direction==h)p.to=u,d=p.inner;else{let m={from:c,to:u,direction:h,inner:[]};d.push(m),d=m.inner}}}}),i}const KR=Pe.define();function XR(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(KR)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Yd=Pe.define();class Ei{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Ei(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],f=n[s+1],h=Math.max(a,d),p=Math.min(u,f);if(h<=p&&new Ei(h+c,p+c,h,p).addToSet(r),f>u)break;s+=2}if(!l)return r;new Ei(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class qg{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=un.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new Ei(s,o,a,l))),this.changedRanges=i}static create(e,n,r){return new qg(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Q2 extends Nt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ln],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ei(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=-1;this.view.inputState.composing>=0&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!A9(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?S9(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;r=new Ei(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Ae.ie||Ae.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=C9(o,a,e.changes);return r=Ei.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ae.chrome||Ae.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Pa&&o.widget instanceof eA&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,f,h,p,m;if(r&&r.range.fromB<d&&r.range.toB>u){let _=yf.build(this.view.state.doc,u,r.range.fromB,this.decorations,this.dynamicDecorationMap),k=yf.build(this.view.state.doc,r.range.toB,d,this.decorations,this.dynamicDecorationMap);h=_.breakAtStart,p=_.openStart,m=k.openEnd;let P=this.compositionView(r);k.breakAtStart?P.breakAfter=1:k.content.length&&P.merge(P.length,P.length,k.content[0],!1,k.openStart,0)&&(P.breakAfter=k.content[0].breakAfter,k.content.shift()),_.content.length&&P.merge(0,0,_.content[_.content.length-1],!0,0,_.openEnd)&&_.content.pop(),f=_.content.concat(P).concat(k.content)}else({content:f,breakAtStart:h,openStart:p,openEnd:m}=yf.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:w,off:v}=s.findPos(c,1),{i:y,off:x}=s.findPos(l,-1);kR(this,y,x,w,v,f,h,p,m)}r&&this.fixCompositionDOM(r)}compositionView(e){let n=new So(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new ko(i,[n],n.length);let r=new ln;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Nt.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&Km(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Ae.gecko&&a.empty&&!this.hasComposition&&x9(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new Xn(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!vf(l.node,l.offset,u.anchorNode,u.anchorOffset)||!vf(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{Ae.android&&Ae.chrome&&this.dom.contains(u.focusNode)&&E9(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Yg(this.view.root);if(d)if(a.empty){if(Ae.gecko){let f=k9(l.node,l.offset);if(f&&f!=3){let h=qR(l.node,l.offset,f==1?1:-1);h&&(l=new Xn(h.node,h.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new Xn(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new Xn(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&vf(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=Yg(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=ln.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);r.collapse(u.node,u.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=Nt.get(n.childNodes[i]);s instanceof ln&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=Nt.get(n.childNodes[i]);s instanceof ln&&(r=s.domAtPos(s.length))}return r?new Xn(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=Nt.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof ln)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof ln&&!(r instanceof ln&&n>=0))&&(r=a,i=c),s=c}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof ln))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof So))return null;let s=Dn(i.text,r);if(s==r)return null;let o=Yl(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Rt.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],f=c+d.length;if(f>i)break;if(c>=r){let h=d.dom.getBoundingClientRect();if(n.push(h.height),o){let p=d.dom.lastChild,m=p?Zf(p):[];if(m.length){let w=m[m.length-1],v=l?w.right-h.left:h.right-w.left;v>a&&(a=v,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Rt.RTL:Rt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof ln){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Zf(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new SR(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(Je.replace({widget:new eA(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Je.set(e)}updateDeco(){let e=this.view.state.facet(eh).map((i,s)=>(this.dynamicDecorationMap[s]=typeof i=="function")?i(this.view):i),n=!1,r=this.view.state.facet(WR).map((i,s)=>{let o=typeof i=="function";return o&&(n=!0),o?i(this.view):i});r.length&&(this.dynamicDecorationMap[e.length]=n,e.push(ht.join(r)));for(let i=e.length;i<e.length+3;i++)this.dynamicDecorationMap[i]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=XR(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;t9(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Rt.LTR)}}function x9(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class eA extends Qa{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}}function YR(t,e){let n=t.observer.selectionRange,r=n.focusNode&&qR(n.focusNode,n.focusOffset,0);if(!r)return null;let i=e-r.offset;return{from:i,to:i+r.node.nodeValue.length,node:r.node}}function S9(t,e,n){let r=YR(t,n);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,c=new Ei(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=i.parentNode;;d=d.parentNode){let f=Nt.get(d);if(f instanceof ko)u.push({node:d,deco:f.mark});else{if(f instanceof ln||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:i,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new Kh({inclusive:!0,attributes:c9(d),tagName:d.tagName.toLowerCase()})});else return null}}}function qR(t,e,n){if(n<=0)for(let r=t,i=e;;){if(r.nodeType==3)return{node:r,offset:i};if(r.nodeType==1&&i>0)r=r.childNodes[i-1],i=xo(r);else break}if(n>=0)for(let r=t,i=e;;){if(r.nodeType==3)return{node:r,offset:i};if(r.nodeType==1&&i<r.childNodes.length&&n>=0)r=r.childNodes[i],i=0;else break}return null}function k9(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let _9=class{constructor(){this.changes=[]}compareRange(e,n){L1(e,n,this.changes)}comparePoint(e,n){L1(e,n,this.changes)}};function C9(t,e,n){let r=new _9;return ht.compare(t,e,n,r),r.changes}function E9(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function A9(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function P9(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return ie.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=Dn(i.text,s,!1):a=Dn(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let c=Dn(i.text,o,!1);if(r(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=Dn(i.text,a);if(r(i.text.slice(a,c))!=l)break;a=c}return ie.range(o+i.from,a+i.from)}function T9(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function $9(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Yy(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function tA(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function nA(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function U1(t,e,n){let r,i,s,o,a=!1,l,c,u,d;for(let p=t.firstChild;p;p=p.nextSibling){let m=Zf(p);for(let w=0;w<m.length;w++){let v=m[w];i&&Yy(i,v)&&(v=tA(nA(v,i.bottom),i.top));let y=T9(e,v),x=$9(n,v);if(y==0&&x==0)return p.nodeType==3?rA(p,e,n):U1(p,e,n);if(!r||o>x||o==x&&s>y){r=p,i=v,s=y,o=x;let _=x?n<v.top?-1:1:y?e<v.left?-1:1:0;a=!_||(_>0?w<m.length-1:w>0)}y==0?n>v.bottom&&(!u||u.bottom<v.bottom)?(l=p,u=v):n<v.top&&(!d||d.top>v.top)&&(c=p,d=v):u&&Yy(u,v)?u=nA(u,v.bottom):d&&Yy(d,v)&&(d=tA(d,v.top))}}if(u&&u.bottom>=n?(r=l,i=u):d&&d.top<=n&&(r=c,i=d),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return rA(r,f,n);if(a&&r.contentEditable!="false")return U1(r,f,n);let h=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:h}}function rA(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=Yl(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let f=e>=(u.left+u.right)/2,h=f;if((Ae.chrome||Ae.gecko)&&Yl(t,a).getBoundingClientRect().left==u.right&&(h=!f),d<=0)return{node:t,offset:a+(h?1:0)};i=a+(h?1:0),s=d}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function JR(t,e,n,r=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,f=d-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let _=t.viewState.heightOracle.textHeight/2,k=!1;l=t.elementAtHeight(f),l.type!=sr.Text;)for(;f=r>0?l.bottom+_:l.top-_,!(f>=0&&f<=c);){if(k)return n?null:0;k=!0,r=-r}d=a+f;let h=l.from;if(h<t.viewport.from)return t.viewport.from==0?0:n?null:iA(t,o,l,u,d);if(h>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:iA(t,o,l,u,d);let p=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:p,w=m.elementFromPoint(u,d);w&&!t.contentDOM.contains(w)&&(w=null),w||(u=Math.max(o.left+1,Math.min(o.right-1,u)),w=m.elementFromPoint(u,d),w&&!t.contentDOM.contains(w)&&(w=null));let v,y=-1;if(w&&((i=t.docView.nearest(w))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let _=p.caretPositionFromPoint(u,d);_&&({offsetNode:v,offset:y}=_)}else if(p.caretRangeFromPoint){let _=p.caretRangeFromPoint(u,d);_&&({startContainer:v,startOffset:y}=_,(!t.contentDOM.contains(v)||Ae.safari&&O9(v,y,u)||Ae.chrome&&N9(v,y,u))&&(v=void 0))}}if(!v||!t.docView.dom.contains(v)){let _=ln.find(t.docView,h);if(!_)return f>l.top+l.height/2?l.to:l.from;({node:v,offset:y}=U1(_.dom,u,d))}let x=t.docView.nearest(v);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let _=x.dom.getBoundingClientRect();return e.y<_.top||e.y<=_.bottom&&e.x<=(_.left+_.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(v,y)+x.posAtStart}function iA(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+X7(o,s,t.state.tabSize)}function O9(t,e,n){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Yl(t,r-1,r).getBoundingClientRect().left>n}function N9(t,e,n){if(e!=0)return!1;for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Yl(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function V1(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>e||r.to==e&&(r.to==n.to||r.type==sr.Text))return r}return n}function M9(t,e,n,r){let i=V1(t,e.head),s=!r||i.type!=sr.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(a==Rt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return ie.cursor(l,n?-1:1)}return ie.cursor(n?i.to:i.from,n?-1:1)}function sA(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let c=y9(i,s,o,a,n),u=DR;if(!c){if(i.number==(n?t.state.doc.lines:1))return a;u=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),c=t.visualLineSide(i,!n)}if(l){if(!l(u))return a}else{if(!r)return c;l=r(u)}a=c}}function R9(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==In.Space&&(i=o),i==o}}function D9(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return ie.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let h=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-h.from))),a=(s<0?h.top:h.bottom)+u}let d=l.left+o,f=r??t.viewState.heightOracle.textHeight>>1;for(let h=0;;h+=10){let p=a+(f+h)*s,m=JR(t,{x:d,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?m<i:m>i)){let w=t.docView.coordsForChar(m),v=!w||p<w.top?-1:1;return ie.cursor(m,v,void 0,o)}}}function Xm(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||n||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function qy(t,e,n){let r=Xm(t.state.facet(Ck).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:ie.cursor(r,r<n.from?1:-1)}class I9{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ae.safari&&e.contentDOM.addEventListener("input",()=>null),Ae.gecko&&Z9(e.contentDOM.ownerDocument)}handleEvent(e){!H9(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=L9(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&QR.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),Ae.android&&Ae.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Ae.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=ZR.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||F9.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,uu(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ae.safari&&!Ae.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function oA(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){Qi(n.state,i)}}}function L9(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec;if(i&&i.domEventHandlers)for(let s in i.domEventHandlers){let o=i.domEventHandlers[s];o&&n(s).handlers.push(oA(r.value,o))}if(i&&i.domEventObservers)for(let s in i.domEventObservers){let o=i.domEventObservers[s];o&&n(s).observers.push(oA(r.value,o))}}for(let r in is)n(r).handlers.push(is[r]);for(let r in ss)n(r).observers.push(ss[r]);return e}const ZR=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],F9="dthko",QR=[16,17,18,20,91,92,224,225],jp=6;function Bp(t){return Math.max(0,t)*.7+8}function j9(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class B9{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=n9(e.contentDOM),this.atoms=e.state.facet(Ck).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Qe.allowMultipleSelections)&&z9(e,n),this.dragging=V9(e,n)&&rD(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&j9(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,i=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=XR(this.view);e.clientX-o.left<=s.left+jp?r=-Bp(s.left-e.clientX):e.clientX+o.right>=s.right-jp&&(r=Bp(e.clientX-s.right)),e.clientY-o.top<=s.top+jp?i=-Bp(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-jp&&(i=Bp(e.clientY-s.bottom)),this.setScrollSpeed(r,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Xm(this.atoms,i.from,0);o!=i.from&&(s=ie.cursor(o,-1))}else{let o=Xm(this.atoms,i.from,-1),a=Xm(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=ie.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?ie.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function z9(t,e){let n=t.state.facet(IR);return n.length?n[0](e):Ae.mac?e.metaKey:e.ctrlKey}function U9(t,e){let n=t.state.facet(LR);return n.length?n[0](e):Ae.mac?!e.altKey:!e.ctrlKey}function V9(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Yg(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function H9(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=Nt.get(n))&&r.ignoreEvent(e))return!1;return!0}const is=Object.create(null),ss=Object.create(null),eD=Ae.ie&&Ae.ie_version<15||Ae.ios&&Ae.webkit_version<604;function W9(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),tD(t,n.value)},50)}function tD(t,e){let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(H1!=null&&n.selection.ranges.every(l=>l.empty)&&H1==s.toString()){let l=-1;r=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:ie.cursor(c.from+d.length)}})}else o?r=n.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:ie.cursor(l.from+c.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}ss.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};is.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now()),!1);ss.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};ss.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};is.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(FR))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=X9(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new B9(t,e,n,r)),r&&t.observer.ignore(()=>wR(t.contentDOM));let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function aA(t,e,n,r){if(r==1)return ie.cursor(e,n);if(r==2)return P9(t.state,e,n);{let i=ln.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,ie.range(o,a)}}let nD=(t,e)=>t>=e.top&&t<=e.bottom,lA=(t,e,n)=>nD(e,n)&&t>=n.left&&t<=n.right;function G9(t,e,n,r){let i=ln.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&lA(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&lA(n,r,a)?1:o&&nD(r,o)?-1:1}function cA(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:G9(t,n,e.clientX,e.clientY)}}const K9=Ae.ie&&Ae.ie_version<=11;let uA=null,dA=0,fA=0;function rD(t){if(!K9)return t.detail;let e=uA,n=fA;return uA=t,fA=Date.now(),dA=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(dA+1)%3:1}function X9(t,e){let n=cA(t,e),r=rD(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let l=cA(t,s),c,u=aA(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let d=aA(t,n.pos,n.bias,r),f=Math.min(d.from,u.from),h=Math.max(d.to,u.to);u=f<u.from?ie.range(f,h):ie.range(h,f)}return o?i.replaceRange(i.main.extend(u.from,u.to)):a&&r==1&&i.ranges.length>1&&(c=Y9(i,l.pos))?c:a?i.addRange(u):ie.create([u])}}}function Y9(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return ie.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}is.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=n.to||o<=n.from)&&(n=ie.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove"),!1};is.dragend=t=>(t.inputState.draggedContent=null,!1);function hA(t,e,n,r){if(!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&U9(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}is.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&hA(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return hA(t,e,r,!0),!0}return!1};is.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=eD?null:e.clipboardData;return n?(tD(t,n.getData("text/plain")||n.getData("text/uri-text")),!0):(W9(t),!1)};function q9(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function J9(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:r}}let H1=null;is.copy=is.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=J9(t.state);if(!n&&!i)return!1;H1=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=eD?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(q9(t,n),!1)};const iD=Mo.define();function sD(t,e){let n=[];for(let r of t.facet(zR)){let i=r(t,e);i&&n.push(i)}return n?t.update({effects:n,annotations:iD.of(!0)}):null}function oD(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=sD(t.state,e);n?t.dispatch(n):t.update([])}},10)}ss.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),oD(t)};ss.blur=t=>{t.observer.clearSelectionRange(),oD(t)};ss.compositionstart=ss.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};ss.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ae.chrome&&Ae.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};ss.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};is.beforeinput=(t,e)=>{var n;let r;if(Ae.chrome&&Ae.android&&(r=ZR.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return!1};const pA=new Set;function Z9(t){pA.has(t)||(pA.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const mA=["pre-wrap","normal","pre-line","break-spaces"];class Q9{constructor(e){this.lineWrapping=e,this.doc=dt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return mA.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=mA.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class ez{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class $s{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?sr.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ia?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new $s(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var $t=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}($t||($t={}));const Ym=.001;class or{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>Ym&&(e.heightChanged=!0),this.height=n)}replace(e,n,r){return or.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=i[a],f=s.lineAt(l,$t.ByPosNoHeight,r.setDoc(n),0,0),h=f.to>=c?f:s.lineAt(c,$t.ByPosNoHeight,r,0,0);for(d+=h.to-c,c=h.to;a>0&&f.from<=i[a-1].toA;)l=i[a-1].fromA,u=i[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,$t.ByPosNoHeight,r,0,0));u+=f.from-l,l=f.from;let p=Ek.build(r.setDoc(o),e,u,d);s=s.replace(l,c,p)}return s.updateHeight(r,0)}static empty(){return new Hr(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new tz(or.of(e.slice(0,n)),o,or.of(e.slice(r)))}}or.prototype.size=1;class aD extends or{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new $s(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Hr extends aD{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new $s(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof Hr||i instanceof En&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof En?i=new Hr(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):or.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class En extends or{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let c=i+Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length),u=n.doc.lineAt(c),d=a+u.length*l,f=Math.max(r,e-d/2);return new $s(u.from,u.length,f,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:u,length:d}=n.doc.line(s+c);return new $s(u,d,r+a*c,a,0)}}lineAt(e,n,r,i,s){if(n==$t.ByHeight)return this.blockAt(e,r,i,s);if(n==$t.ByPosNoHeight){let{from:h,to:p}=r.doc.lineAt(e);return new $s(h,p-h,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),c=r.doc.lineAt(e),u=a+c.length*l,d=c.number-o,f=i+a*d+l*(c.from-s-d);return new $s(c.from,c.length,Math.max(i,Math.min(f,i+this.height-u)),u,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(r,s);for(let u=e,d=i;u<=n;){let f=r.doc.lineAt(u);if(u==e){let p=f.number-a;d+=l*p+c*(e-s-p)}let h=l+c*f.length;o(new $s(f.from,f.length,d,h,0)),d+=h,u=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof En?r[r.length-1]=new En(s.length+i):r.push(null,new En(i-1))}if(e>0){let s=r[0];s instanceof En?r[0]=new En(e+s.length):r.unshift(new En(e-1),null)}return or.of(r)}decomposeLeft(e,n){n.push(new En(e-1),null)}decomposeRight(e,n){n.push(null,new En(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),l=-1;for(i.from>n&&o.push(new En(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=i.heights[i.index++];l==-1?l=d:Math.abs(d-l)>=Ym&&(l=-2);let f=new Hr(u,d);f.outdated=!1,o.push(f),a+=u+1}a<=s&&o.push(null,new En(s-a).updateHeight(e,a));let c=or.of(o);return(l<0||Math.abs(c.height-this.height)>=Ym||Math.abs(l-this.heightMetrics(e,n).perLine)>=Ym)&&(e.heightChanged=!0),c}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class tz extends or{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==$t.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==$t.ByPosNoHeight?$t.ByPosNoHeight:$t.ByPos;return l?c.join(this.right.lineAt(a,u,r,o,a)):this.left.lineAt(a,u,r,i,s).join(c)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let c=this.lineAt(l,$t.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&gA(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),gA(s,a)}return or.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?or.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function gA(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof En&&(r=t[e+1])instanceof En&&t.splice(e-1,3,new En(n.length+1+r.length))}const nz=5;class Ek{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Hr?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Hr(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new aD(o,i,r)):(o||s||i>=nz)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Hr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new En(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Hr)return e;let n=new Hr(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Hr)&&!this.isCovered?this.nodes.push(new Hr(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Hr&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new Ek(r,e);return ht.spans(n,r,i,s,0),s.finish(r)}}function rz(t,e,n){let r=new iz;return ht.compare(t,e,n,r,0),r.changes}class iz{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&L1(e,n,this.changes,5)}}function sz(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=c==t.parentNode?f.bottom:Math.min(l,f.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function oz(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Jy{constructor(e,n,r){this.from=e,this.to=n,this.size=r}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return Je.replace({widget:new az(this.size*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class az extends Qa{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class vA{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=yA,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Rt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(_k).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new Q9(n),this.stateDeco=e.facet(eh).filter(r=>typeof r!="function"),this.heightMap=or.empty().applyChanges(this.stateDeco,dt.empty,this.heightOracle.setDoc(e.doc),[new Ei(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Je.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new zp(s,o))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?yA:new uz(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:qd(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(eh).filter(u=>typeof u!="function");let i=e.changedRanges,s=Ei.extendWithRanges(i,rz(r,this.stateDeco,e?e.changes:un.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),c&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(VR)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Rt.RTL:Rt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:_,scaleY:k}=yR(n,a);(this.scaleX!=_||this.scaleY!=k)&&(this.scaleX=_,this.scaleY=k,c|=8,o=l=!0)}let d=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8);let h=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=h&&(this.scrollAnchorHeight=-1,this.scrollTop=h),this.scrolledToBottom=xR(e.scrollDOM);let p=(this.printing?oz:sz)(n,this.paddingTop),m=p.top-this.pixelViewport.top,w=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let y=a.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),l){let _=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(_)&&(o=!0),o||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:k,charWidth:P,textHeight:E}=e.docView.measureTextSize();o=k>0&&i.refresh(s,k,P,E,y/P,_),o&&(e.docView.minWidth=0,c|=8)}m>0&&w>0?u=Math.max(m,w):m<0&&w<0&&(u=Math.min(m,w)),i.heightChanged=!1;for(let k of this.viewports){let P=k.from==this.viewport.from?_:e.docView.measureVisibleLineHeights(k);this.heightMap=(o?or.empty().applyChanges(this.stateDeco,dt.empty,this.heightOracle,[new Ei(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new ez(k.from,P))}i.heightChanged&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new zp(i.lineAt(o-r*1e3,$t.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,$t.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(c,$t.ByPos,s,0,0),f;n.y=="center"?f=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?f=d.top:f=d.bottom-u,l=new zp(i.lineAt(f-1e3/2,$t.ByHeight,s,0,0).from,i.lineAt(f+u+1e3/2,$t.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new zp(this.heightMap.lineAt(r,$t.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,$t.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,$t.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,$t.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new Jy(n.mapPos(i.from),n.mapPos(i.to),i.size));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=Rt.LTR&&!r)return[];let a=[],l=(c,u,d,f)=>{if(u-c<s)return;let h=this.state.selection.main,p=[h.from];h.empty||p.push(h.to);for(let w of p)if(w>c&&w<u){l(c,w-10,d,f),l(w+10,u,d,f);return}let m=cz(e,w=>w.from>=d.from&&w.to<=d.to&&Math.abs(w.from-c)<s&&Math.abs(w.to-u)<s&&!p.some(v=>w.from<v&&w.to>v));if(!m){if(u<d.to&&n&&r&&n.visibleRanges.some(w=>w.from<=u&&w.to>=u)){let w=n.moveToLineBoundary(ie.cursor(u),!1,!0).head;w>c&&(u=w)}m=new Jy(c,u,this.gapSize(d,c,u,f))}a.push(m)};for(let c of this.viewportLines){if(c.length<o)continue;let u=lz(c.from,c.to,this.stateDeco);if(u.total<o)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,f,h;if(r){let p=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,w;if(d!=null){let v=Vp(u,d),y=((this.visibleBottom-this.visibleTop)/2+p)/c.height;m=v-y,w=v+y}else m=(this.visibleTop-c.top-p)/c.height,w=(this.visibleBottom-c.top+p)/c.height;f=Up(u,m),h=Up(u,w)}else{let p=u.total*this.heightOracle.charWidth,m=i*this.heightOracle.charWidth,w,v;if(d!=null){let y=Vp(u,d),x=((this.pixelViewport.right-this.pixelViewport.left)/2+m)/p;w=y-x,v=y+x}else w=(this.pixelViewport.left-m)/p,v=(this.pixelViewport.right+m)/p;f=Up(u,w),h=Up(u,v)}f>c.from&&l(c.from,f,c,u),h<c.to&&l(h,c.to,c,u)}return a}gapSize(e,n,r,i){let s=Vp(i,r)-Vp(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Jy.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Je.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];ht.spans(e,this.viewport.from,this.viewport.to,{span(i,s){n.push({from:i,to:s})},point(){}},20);let r=n.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=n[s].from||i.to!=n[s].to);return this.visibleRanges=n,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||qd(this.heightMap.lineAt(e,$t.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return qd(this.heightMap.lineAt(this.scaler.fromDOM(e),$t.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return qd(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class zp{constructor(e,n){this.from=e,this.to=n}}function lz(t,e,n){let r=[],i=t,s=0;return ht.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function Up({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function Vp(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function cz(t,e){for(let n of t)if(e(n))return n}const yA={toDOM(t){return t},fromDOM(t){return t},scale:1};class uz{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=n.lineAt(a,$t.ByPos,e,0,0).top,u=n.lineAt(l,$t.ByPos,e,0,0).bottom;return i+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}}function qd(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new $s(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>qd(i,e)):t._content)}const Hp=Pe.define({combine:t=>t.join(" ")}),W1=Pe.define({combine:t=>t.indexOf(!0)>-1}),G1=Ra.newName(),lD=Ra.newName(),cD=Ra.newName(),uD={"&light":"."+lD,"&dark":"."+cD};function K1(t,e,n){return new Ra(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const dz=K1("."+G1,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},uD),Jd="";class fz{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Qe.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Jd}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==n)break;let a=Nt.get(i),l=Nt.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:wA(i))||wA(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=Nt.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(hz(e,r.node,r.offset)?n:0))}}function hz(t,e,n){for(;;){if(!e||n<xo(e))return!1;if(e==t)return!0;n=Qf(e)+1,e=e.parentNode}}function wA(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class bA{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class pz{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=s||o?[]:vz(e),l=new fz(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=yz(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!O1(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!O1(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if(Ae.ios&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=u.from-Math.min(l,c),f=u.to-Math.max(l,c);(d==0||d==1)&&(f==0||f==-1)&&(l=0,c=e.state.doc.length)}this.newSel=ie.single(c,l)}}}function dD(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,c=null;(s===8||Ae.android&&e.text.length<a-o)&&(l=i.to,c="end");let u=gz(t.state.doc.sliceString(o,a,Jd),e.text,l-o,c);u&&(Ae.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Jd+Jd&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:dt.of(e.text.slice(u.from,u.toB).split(Jd))})}else r&&(!t.hasFocus&&t.state.facet(fv)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:(Ae.mac||Ae.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=ie.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:dt.of([" "])}):Ae.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=ie.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:dt.of([" "])}),n){if(Ae.ios&&t.inputState.flushIOSKey()||Ae.android&&(n.from==i.from&&n.to==i.to&&n.insert.length==1&&n.insert.lines==2&&uu(t.contentDOM,"Enter",13)||(n.from==i.from-1&&n.to==i.to&&n.insert.length==0||s==8&&n.insert.length<n.to-n.from&&n.to>i.head)&&uu(t.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&n.insert.length==0&&uu(t.contentDOM,"Delete",46)))return!0;let o=n.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a,l=()=>a||(a=mz(t,n,r));return t.state.facet(BR).some(c=>c(t,n.from,n.to,o,l))||t.dispatch(l()),!0}else if(r&&!r.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function mz(t,e,n){let r,i=t.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=i.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&YR(t,n.main.head);if(d){let p=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-p}}else u=t.state.doc.lineAt(s.head);let f=s.to-e.to,h=s.to-s.from;r=i.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:a,range:l||p.map(a)};let m=p.to-f,w=m-c.length;if(p.to-p.from!=h||t.state.sliceDoc(w,m)!=c||p.to>=u.from&&p.from<=u.to)return{range:p};let v=i.changes({from:w,to:m,insert:e.insert}),y=p.to-s.to;return{changes:v,range:l?ie.range(Math.max(0,l.anchor+y),Math.max(0,l.head+y)):p.map(v)}})}else r={changes:a,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function gz(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function vz(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new bA(n,r)),(i!=n||s!=r)&&e.push(new bA(i,s))),e}function yz(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?ie.single(n+e,r+e):null}const wz={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Zy=Ae.ie&&Ae.ie_version<=11;class bz{constructor(e){this.view=e,this.active=!1,this.selectionRange=new r9,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(Ae.ie&&Ae.ie_version<=11||Ae.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),Zy&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(fv)?r.root.activeElement!=this.dom:!Km(r.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Ae.ie&&Ae.ie_version<=11||Ae.android&&Ae.chrome)&&!r.state.selection.main.empty&&i.focusNode&&vf(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Ae.safari&&e.root.nodeType==11&&Q7(this.dom.ownerDocument)==this.dom&&xz(this.view)||Yg(e.root);if(!n||this.selectionRange.eq(n))return!1;let r=Km(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&s9(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,wz),Zy&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Zy&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&uu(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Km(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new pz(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=dD(this.view,n);return this.view.state==r&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=xA(n,e.previousSibling||e.target.previousSibling,-1),i=xA(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function xA(t,e,n){for(;e;){let r=Nt.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function xz(t){let e=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return vf(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}class $e{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(r=>r.forEach(i=>n(i,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||i9(e.parent)||document,this.viewState=new vA(e.state||Qe.create(e)),e.scrollTo&&e.scrollTo.is(Fp)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Xd).map(r=>new Xy(r));for(let r of this.plugins)r.update(this);this.observer=new bz(this),this.inputState=new I9(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Q2(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let n=e.length==1&&e[0]instanceof pn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(iD))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=sD(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(Qe.phrases)!=this.state.facet(Qe.phrases))return this.setState(s);i=qg.create(this,s,e),i.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:h}=f.state.selection;d=new du(h.empty?h:ie.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of f.effects)h.is(Fp)&&(d=h.value.clip(this.state))}this.viewState.update(i,d),this.bidiCache=Jg.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Yd)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Hp)!=i.state.facet(Hp)&&(this.viewState.mustMeasureContent=!0),(n||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let f of this.state.facet(z1))try{f(i)}catch(h){Qi(this.state,h,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!dD(this,u)&&c.force&&uu(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new vA(e),this.plugins=e.facet(Xd).map(r=>new Xy(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new Q2(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Xd),r=e.state.facet(Xd);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new Xy(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(xR(r))s=-1,o=this.viewState.heightMap.height;else{let h=this.viewState.scrollAnchorAt(i);s=h.from,o=h.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(h=>{try{return h.read(this)}catch(p){return Qi(this.state,p),SA}}),d=qg.create(this,this.state,[]),f=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d));for(let h=0;h<c.length;h++)if(u[h]!=SA)try{let p=c[h];p.write&&p.write(u[h],this)}catch(p){Qi(this.state,p)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){i=i+p,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(z1))a(n)}get themeClasses(){return G1+" "+(this.state.facet(W1)?cD:lD)+" "+this.state.facet(Hp)}updateAttrs(){let e=kA(this,HR,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(fv)?"true":"false",class:"cm-content",style:`${Ae.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),kA(this,_k,n);let r=this.observer.ignore(()=>{let i=I1(this.contentDOM,this.contentAttrs,n),s=I1(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is($e.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Yd);let e=this.state.facet($e.cspNonce);Ra.mount(this.root,this.styleModules.concat(dz).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return qy(this,e,sA(this,e,n,r))}moveByGroup(e,n){return qy(this,e,sA(this,e,n,r=>R9(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return ie.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return M9(this,e,n,r)}moveVertically(e,n,r){return qy(this,e,D9(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),JR(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[ha.find(s,e-i.from,-1,n)];return bk(r,o.dir==Rt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(UR)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Sz)return RR(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||MR(s.isolates,r=Z2(this,e))))return s.order;r||(r=Z2(this,e));let i=v9(e.text,n,r);return this.bidiCache.push(new Jg(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ae.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{wR(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Fp.of(new du(typeof e=="number"?ie.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Fp.of(new du(ie.cursor(r.from),"start","start",r.top-e,n,!0))}static domEventHandlers(e){return Bn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Bn.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=Ra.newName(),i=[Hp.of(r),Yd.of(K1(`.${r}`,e))];return n&&n.dark&&i.push(W1.of(!0)),i}static baseTheme(e){return Hh.lowest(Yd.of(K1("."+G1,e,uD)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&Nt.get(r)||Nt.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}$e.styleModule=Yd;$e.inputHandler=BR;$e.focusChangeEffect=zR;$e.perLineTextDirection=UR;$e.exceptionSink=jR;$e.updateListener=z1;$e.editable=fv;$e.mouseSelectionStyle=FR;$e.dragMovesSelection=LR;$e.clickAddsSelectionRange=IR;$e.decorations=eh;$e.outerDecorations=WR;$e.atomicRanges=Ck;$e.bidiIsolatedRanges=GR;$e.scrollMargins=KR;$e.darkTheme=W1;$e.cspNonce=Pe.define({combine:t=>t.length?t[0]:""});$e.contentAttributes=_k;$e.editorAttributes=HR;$e.lineWrapping=$e.contentAttributes.of({class:"cm-lineWrapping"});$e.announce=Ye.define();const Sz=4096,SA={};class Jg{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Rt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new Jg(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function kA(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&D1(o,n)}return n}const kz=Ae.mac?"mac":Ae.windows?"win":Ae.linux?"linux":"key";function _z(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function Wp(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Cz=Hh.default($e.domEventHandlers({keydown(t,e){return pD(hD(e.state),t,e,"editor")}})),fD=Pe.define({enables:Cz}),_A=new WeakMap;function hD(t){let e=t.facet(fD),n=_A.get(e);return n||_A.set(e,n=Pz(e.reduce((r,i)=>r.concat(i),[]))),n}function Ez(t,e,n){return pD(hD(t.state),e,t,n)}let na=null;const Az=4e3;function Pz(t,e=kz){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,f;let h=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(v=>_z(v,e));for(let v=1;v<p.length;v++){let y=p.slice(0,v).join(" ");i(y,!0),h[y]||(h[y]={preventDefault:!0,stopPropagation:!1,run:[x=>{let _=na={view:x,prefix:y,scope:o};return setTimeout(()=>{na==_&&(na=null)},Az),!0}]})}let m=p.join(" ");i(m,!1);let w=h[m]||(h[m]={preventDefault:!1,stopPropagation:!1,run:((f=(d=h._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&w.run.push(l),c&&(w.preventDefault=!0),u&&(w.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let d in u)u[d].run.push(o.any)}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}function pD(t,e,n,r){let i=Z7(e),s=tr(i,0),o=Gi(s)==i.length&&i!=" ",a="",l=!1,c=!1,u=!1;na&&na.view==n&&na.scope==r&&(a=na.prefix+" ",QR.indexOf(e.keyCode)<0&&(c=!0,na=null));let d=new Set,f=w=>{if(w){for(let v of w.run)if(!d.has(v)&&(d.add(v),v(n,e)))return w.stopPropagation&&(u=!0),!0;w.preventDefault&&(w.stopPropagation&&(u=!0),c=!0)}return!1},h=t[r],p,m;return h&&(f(h[a+Wp(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ae.windows&&e.ctrlKey&&e.altKey)&&(p=Da[e.keyCode])&&p!=i?(f(h[a+Wp(p,e,!0)])||e.shiftKey&&(m=Jf[e.keyCode])!=i&&m!=p&&f(h[a+Wp(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(h[a+Wp(i,e,!0)])&&(l=!0),!l&&f(h._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),l}class Yh{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=mD(e);return[new Yh(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return Tz(e,n,r)}}function mD(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Rt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function CA(t,e,n){let r=ie.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(r,!0,!0).from),type:sr.Text}}function Tz(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==Rt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=mD(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),h=V1(t,r),p=V1(t,i),m=h.type==sr.Text?h:null,w=p.type==sr.Text?p:null;if(m&&(t.lineWrapping||h.widgetLineBreaks)&&(m=CA(t,r,m)),w&&(t.lineWrapping||p.widgetLineBreaks)&&(w=CA(t,i,w)),m&&w&&m.from==w.from)return y(x(n.from,n.to,m));{let k=m?x(n.from,null,m):_(h,!1),P=w?x(null,n.to,w):_(p,!0),E=[];return(m||h).to<(w||p).from-(m&&w?1:0)||h.widgetLineBreaks>1&&k.bottom+t.defaultLineHeight/2<P.top?E.push(v(d,k.bottom,f,P.top)):k.bottom<P.top&&t.elementAtHeight((k.bottom+P.top)/2).type==sr.Text&&(k.bottom=P.top=(k.bottom+P.top)/2),y(k).concat(E).concat(y(P))}function v(k,P,E,C){return new Yh(e,k-l.left,P-l.top-.01,E-k,C-P+.01)}function y({top:k,bottom:P,horizontal:E}){let C=[];for(let N=0;N<E.length;N+=2)C.push(v(E[N],k,E[N+1],P));return C}function x(k,P,E){let C=1e9,N=-1e9,M=[];function R($,V,q,ne,W){let j=t.coordsAtPos($,$==E.to?-2:2),Q=t.coordsAtPos(q,q==E.from?2:-2);!j||!Q||(C=Math.min(j.top,Q.top,C),N=Math.max(j.bottom,Q.bottom,N),W==Rt.LTR?M.push(s&&V?d:j.left,s&&ne?f:Q.right):M.push(!s&&ne?d:Q.left,!s&&V?f:j.right))}let L=k??E.from,H=P??E.to;for(let $ of t.visibleRanges)if($.to>L&&$.from<H)for(let V=Math.max($.from,L),q=Math.min($.to,H);;){let ne=t.state.doc.lineAt(V);for(let W of t.bidiSpans(ne)){let j=W.from+ne.from,Q=W.to+ne.from;if(j>=q)break;Q>V&&R(Math.max(j,V),k==null&&j<=L,Math.min(Q,q),P==null&&Q>=H,W.dir)}if(V=ne.to+1,V>=q)break}return M.length==0&&R(L,k==null,H,P==null,t.textDirection),{top:C,bottom:N,horizontal:M}}function _(k,P){let E=a.top+(P?k.top:k.bottom);return{top:E,bottom:E,horizontal:[]}}}function $z(t,e){return t.constructor==e.constructor&&t.eq(e)}class Oz{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(qm)!=e.state.facet(qm)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let n=0,r=e.facet(qm);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!$z(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const qm=Pe.define();function gD(t){return[Bn.define(e=>new Oz(e,t)),qm.of(t)]}const vD=!Ae.ios,th=Pe.define({combine(t){return Za(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Nz(t={}){return[th.of(t),Mz,Rz,Dz,VR.of(!0)]}function yD(t){return t.startState.facet(th)!=t.state.facet(th)}const Mz=gD({above:!0,markers(t){let{state:e}=t,n=e.facet(th),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||vD:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:ie.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Yh.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=yD(t);return n&&EA(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){EA(e.state,t)},class:"cm-cursorLayer"});function EA(t,e){e.style.animationDuration=t.facet(th).cursorBlinkRate+"ms"}const Rz=gD({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Yh.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||yD(t)},class:"cm-selectionLayer"}),X1={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};vD&&(X1[".cm-line"].caretColor="transparent !important",X1[".cm-content"]={caretColor:"transparent !important"});const Dz=Hh.highest($e.theme(X1));function AA(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function Iz(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class Lz{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(a,l,c,u)=>i(u,c,c+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,c,u)=>{let d=r(a,l,c);d&&u(c,c+a[0].length,d)};else if(r)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Xl,r=n.add.bind(n);for(let{from:i,to:s}of Iz(e,this.maxLength))AA(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let f=[],h,p=(m,w,v)=>f.push(v.range(m,w));if(l==c)for(this.regexp.lastIndex=u-l.from;(h=this.regexp.exec(l.text))&&h.index<d-l.from;)this.addMatch(h,e,h.index+l.from,p);else AA(e.state.doc,this.regexp,u,d,(m,w)=>this.addMatch(w,e,m,p));n=n.update({filterFrom:u,filterTo:d,filter:(m,w)=>m<u||w>d,add:f})}}return n}}const Y1=/x/.unicode!=null?"gu":"g",Fz=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Y1),jz={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Qy=null;function Bz(){var t;if(Qy==null&&typeof document<"u"&&document.body){let e=document.body.style;Qy=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Qy||!1}const Jm=Pe.define({combine(t){let e=Za(t,{render:null,specialChars:Fz,addSpecialChars:null});return(e.replaceTabs=!Bz())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Y1)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Y1)),e}});function zz(t={}){return[Jm.of(t),Uz()]}let PA=null;function Uz(){return PA||(PA=Bn.fromClass(class{constructor(t){this.view=t,this.decorations=Je.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Jm)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Lz({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=tr(e[0],0);if(s==9){let o=i.lineAt(r),a=n.state.tabSize,l=Gh(o.text,a,r-o.from);return Je.replace({widget:new Gz((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Je.replace({widget:new Wz(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Jm);t.startState.facet(Jm)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Vz="";function Hz(t){return t>=32?Vz:t==10?"":String.fromCharCode(9216+t)}class Wz extends Qa{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=Hz(this.code),r=e.state.phrase("Control character")+" "+(jz[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Gz extends Qa{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Kz(){return Yz}const Xz=Je.line({class:"cm-activeLine"}),Yz=Bn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(Xz.range(i.from)),e=i.from)}return Je.set(n)}},{decorations:t=>t.decorations}),Ed="-10000px";class wD{constructor(e,n,r){this.facet=n,this.createTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(l.dom.remove(),(r=l.destroy)===null||r===void 0||r.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function qz(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const ew=Pe.define({combine:t=>{var e,n,r;return{position:Ae.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||qz}}}),TA=new WeakMap,Ak=Bn.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(ew);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new wD(t,Pk,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(ew);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=Ed,e.dom.style.left="0px",this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);this.parent&&this.container.remove(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect(),e=1,n=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(Ae.gecko)r=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==Ed&&i.style.left=="0px"){let s=i.getBoundingClientRect();r=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(r||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,n=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:n}=this.view.viewState);return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((i,s)=>{let o=this.manager.tooltipViews[s];return o.getCoords?o.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(ew).tooltipSpace(this.view),scaleX:e,scaleY:n,makeAbsolute:r}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{editor:n,space:r,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],f=t.size[a];if(!d||d.bottom<=Math.max(n.top,r.top)||d.top>=Math.min(n.bottom,r.bottom)||d.right<Math.max(n.left,r.left)-.1||d.left>Math.min(n.right,r.right)+.1){u.style.top=Ed;continue}let h=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=h?7:0,m=f.right-f.left,w=(e=TA.get(c))!==null&&e!==void 0?e:f.bottom-f.top,v=c.offset||Zz,y=this.view.textDirection==Rt.LTR,x=f.width>r.right-r.left?y?r.left:r.right-f.width:y?Math.min(d.left-(h?14:0)+v.x,r.right-m):Math.max(r.left,d.left-m+(h?14:0)-v.x),_=this.above[a];!l.strictSide&&(_?d.top-(f.bottom-f.top)-v.y<r.top:d.bottom+(f.bottom-f.top)+v.y>r.bottom)&&_==r.bottom-d.bottom>d.top-r.top&&(_=this.above[a]=!_);let k=(_?d.top-r.top:r.bottom-d.bottom)-p;if(k<w&&c.resize!==!1){if(k<this.view.defaultLineHeight){u.style.top=Ed;continue}TA.set(c,w),u.style.height=(w=k)/s+"px"}else u.style.height&&(u.style.height="");let P=_?d.top-w-p-v.y:d.bottom+p+v.y,E=x+m;if(c.overlap!==!0)for(let C of o)C.left<E&&C.right>x&&C.top<P+w&&C.bottom>P&&(P=_?C.top-w-2-p:C.bottom+p+2);if(this.position=="absolute"?(u.style.top=(P-t.parent.top)/s+"px",u.style.left=(x-t.parent.left)/i+"px"):(u.style.top=P/s+"px",u.style.left=x/i+"px"),h){let C=d.left+(y?v.x:-v.x)-(x+14-7);h.style.left=C/i+"px"}c.overlap!==!0&&o.push({left:x,top:P,right:E,bottom:P+w}),u.classList.toggle("cm-tooltip-above",_),u.classList.toggle("cm-tooltip-below",!_),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Ed}},{eventObservers:{scroll(){this.maybeMeasure()}}}),Jz=$e.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Zz={x:0,y:0},Pk=Pe.define({enables:[Ak,Jz]}),Zg=Pe.define();class hv{static create(e){return new hv(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new wD(e,Zg,n=>this.createHostedView(n))}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Qz=Pk.compute([Zg],t=>{let e=t.facet(Zg).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:hv.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class eU{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.nearest(n.target);if(!r)return;let i,s=1;if(r instanceof fa)i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let a=e.coordsAtPos(i);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(u=>u.from<=i&&u.to>=i),c=l&&l.dir==Rt.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,i,s);if(o!=null&&o.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&e.dispatch({effects:this.setHover.of(l)}))},l=>Qi(e.state,l,"hover tooltip"))}else o&&e.dispatch({effects:this.setHover.of(o)})}get tooltip(){let e=this.view.plugin(Ak),n=e?e.manager.tooltips.findIndex(r=>r.create==hv.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:i}=this;if(r&&i&&!tU(i.dom,e)||this.pending){let{pos:s}=r||this.pending,o=(n=r==null?void 0:r.end)!==null&&n!==void 0?n:s;(s==o?this.view.posAtCoords(this.lastMove)!=s:!nU(this.view,s,o,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of(null)})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Gp=4;function tU(t,e){let n=t.getBoundingClientRect();return e.clientX>=n.left-Gp&&e.clientX<=n.right+Gp&&e.clientY>=n.top-Gp&&e.clientY<=n.bottom+Gp}function nU(t,e,n,r,i,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=t.posAtCoords({x:r,y:i},!1);return l>=e&&l<=n}function rU(t,e={}){let n=Ye.define(),r=dr.define({create(){return null},update(i,s){if(i&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,i)))return null;if(i&&s.docChanged){let o=s.changes.mapPos(i.pos,-1,Er.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),i);a.pos=o,i.end!=null&&(a.end=s.changes.mapPos(i.end)),i=a}for(let o of s.effects)o.is(n)&&(i=o.value),o.is(sU)&&(i=null);return i},provide:i=>Zg.from(i)});return[r,Bn.define(i=>new eU(i,t,r,n,e.hoverTime||300)),Qz]}function iU(t,e){let n=t.plugin(Ak);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const sU=Ye.define(),$A=Pe.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function nh(t,e){let n=t.plugin(bD),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const bD=Bn.fromClass(class{constructor(t){this.input=t.state.facet(rh),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet($A);this.top=new Kp(t,!0,e.topContainer),this.bottom=new Kp(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet($A);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Kp(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Kp(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(rh);if(n!=this.input){let r=n.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),i.push(u),(u.top?s:o).push(u)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>$e.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Kp{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=OA(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=OA(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function OA(t){let e=t.nextSibling;return t.remove(),e}const rh=Pe.define({enables:bD});class La extends Kl{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}La.prototype.elementClass="";La.prototype.toDOM=void 0;La.prototype.mapMode=Er.TrackBefore;La.prototype.startSide=La.prototype.endSide=-1;La.prototype.point=!0;const Zm=Pe.define(),Qm=Pe.define(),q1=Pe.define({combine:t=>t.some(e=>e)});function oU(t){let e=[aU];return t&&t.fixed===!1&&e.push(q1.of(!0)),e}const aU=Bn.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Qm).map(e=>new MA(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(q1),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(q1)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=ht.iter(this.view.state.facet(Zm),this.view.viewport.from),r=[],i=this.gutters.map(s=>new lU(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==sr.Text&&o){J1(n,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==sr.Text){J1(n,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Qm),n=t.state.facet(Qm),r=t.docChanged||t.heightChanged||t.viewportChanged||!ht.eq(t.startState.facet(Zm),t.state.facet(Zm),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new MA(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>$e.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Rt.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function NA(t){return Array.isArray(t)?t:[t]}function J1(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class lU{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=ht.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let a=new xD(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];J1(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n);r&&this.addElement(e,n,[r])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class MA{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=NA(n.markers(e)),n.initialSpacer&&(this.spacer=new xD(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=NA(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!ht.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class xD{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),cU(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(r+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function cU(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const uU=Pe.define(),Kc=Pe.define({combine(t){return Za(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return r}})}});class tw extends La{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function nw(t,e){return t.state.facet(Kc).formatNumber(e,t.state)}const dU=Qm.compute([Kc],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(uU)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new tw(nw(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Kc)!=e.state.facet(Kc),initialSpacer(e){return new tw(nw(e,RA(e.state.doc.lines)))},updateSpacer(e,n){let r=nw(n.view,RA(n.view.state.doc.lines));return r==e.number?e:new tw(r)},domEventHandlers:t.facet(Kc).domEventHandlers}));function fU(t={}){return[Kc.of(t),oU(),dU]}function RA(t){let e=9;for(;e<t;)e=e*10+9;return e}const hU=new class extends La{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},pU=Zm.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(hU.range(i)))}return ht.of(e)});function mU(){return pU}function SD(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=SD(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ge(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=SD(t))&&(r&&(r+=" "),r+=e);return r}var kD={BASE_URL:"/VonSim8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const gU=Symbol((kD?"production":void 0)!=="production"?"RESET":""),vU=t=>typeof(t==null?void 0:t.then)=="function";function yU(t){let e,n;const r={getItem:(i,s)=>{var o,a;const l=u=>{if(u=u||"",e!==u){try{n=JSON.parse(u)}catch{return s}e=u}return n},c=(a=(o=t())==null?void 0:o.getItem(i))!=null?a:null;return vU(c)?c.then(l):l(c)},setItem:(i,s)=>{var o;return(o=t())==null?void 0:o.setItem(i,JSON.stringify(s))},removeItem:i=>{var s;return(s=t())==null?void 0:s.removeItem(i)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(r.subscribe=(i,s,o)=>{if(!(t()instanceof window.Storage))return()=>{};const a=l=>{if(l.storageArea===t()&&l.key===i){let c;try{c=JSON.parse(l.newValue||"")}catch{c=o}s(c)}};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}),r}const wU=yU(()=>typeof window<"u"?window.localStorage:void 0);function _D(t,e,n=wU,r){const i=r==null?void 0:r.getOnInit,s=Ee(i?n.getItem(t,e):e);return(kD?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{i||a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},Ee(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===gU?(l(s,e),n.removeItem(t)):u instanceof Promise?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}function xe(){return xe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xe.apply(this,arguments)}function bU(t,e=globalThis==null?void 0:globalThis.document){const n=ar(t);g.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const Z1="dismissableLayer.update",xU="dismissableLayer.pointerDownOutside",SU="dismissableLayer.focusOutside";let DA;const CD=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pv=g.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,u=g.useContext(CD),[d,f]=g.useState(null),h=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=g.useState({}),m=lt(e,C=>f(C)),w=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=w.indexOf(v),x=d?w.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,k=x>=y,P=_U(C=>{const N=C.target,M=[...u.branches].some(R=>R.contains(N));!k||M||(s==null||s(C),a==null||a(C),C.defaultPrevented||l==null||l())},h),E=CU(C=>{const N=C.target;[...u.branches].some(R=>R.contains(N))||(o==null||o(C),a==null||a(C),C.defaultPrevented||l==null||l())},h);return bU(C=>{x===u.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},h),g.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(DA=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),IA(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=DA)}},[d,h,r,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),IA())},[d,u]),g.useEffect(()=>{const C=()=>p({});return document.addEventListener(Z1,C),()=>document.removeEventListener(Z1,C)},[]),g.createElement(Xe.div,xe({},c,{ref:m,style:{pointerEvents:_?k?"auto":"none":void 0,...t.style},onFocusCapture:ye(t.onFocusCapture,E.onFocusCapture),onBlurCapture:ye(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ye(t.onPointerDownCapture,P.onPointerDownCapture)}))}),kU=g.forwardRef((t,e)=>{const n=g.useContext(CD),r=g.useRef(null),i=lt(e,r);return g.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g.createElement(Xe.div,xe({},t,{ref:i}))});function _U(t,e=globalThis==null?void 0:globalThis.document){const n=ar(t),r=g.useRef(!1),i=g.useRef(()=>{});return g.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let u=function(){ED(xU,n,c,{discrete:!0})};var l=u;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function CU(t,e=globalThis==null?void 0:globalThis.document){const n=ar(t),r=g.useRef(!1);return g.useEffect(()=>{const i=s=>{s.target&&!r.current&&ED(SU,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function IA(){const t=new CustomEvent(Z1);document.dispatchEvent(t)}function ED(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?dk(i,s):i.dispatchEvent(s)}const EU=pv,AU=kU;let rw=0;function Tk(){g.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:LA()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:LA()),rw++,()=>{rw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),rw--}},[])}function LA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const iw="focusScope.autoFocusOnMount",sw="focusScope.autoFocusOnUnmount",FA={bubbles:!1,cancelable:!0},$k=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=g.useState(null),c=ar(i),u=ar(s),d=g.useRef(null),f=lt(e,m=>l(m)),h=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let y=function(P){if(h.paused||!a)return;const E=P.target;a.contains(E)?d.current=E:Wo(d.current,{select:!0})},x=function(P){if(h.paused||!a)return;const E=P.relatedTarget;E!==null&&(a.contains(E)||Wo(d.current,{select:!0}))},_=function(P){if(document.activeElement===document.body)for(const C of P)C.removedNodes.length>0&&Wo(a)};var m=y,w=x,v=_;document.addEventListener("focusin",y),document.addEventListener("focusout",x);const k=new MutationObserver(_);return a&&k.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),k.disconnect()}}},[r,a,h.paused]),g.useEffect(()=>{if(a){BA.add(h);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(iw,FA);a.addEventListener(iw,c),a.dispatchEvent(v),v.defaultPrevented||(PU(MU(AD(a)),{select:!0}),document.activeElement===m&&Wo(a))}return()=>{a.removeEventListener(iw,c),setTimeout(()=>{const v=new CustomEvent(sw,FA);a.addEventListener(sw,u),a.dispatchEvent(v),v.defaultPrevented||Wo(m??document.body,{select:!0}),a.removeEventListener(sw,u),BA.remove(h)},0)}}},[a,c,u,h]);const p=g.useCallback(m=>{if(!n&&!r||h.paused)return;const w=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(w&&v){const y=m.currentTarget,[x,_]=TU(y);x&&_?!m.shiftKey&&v===_?(m.preventDefault(),n&&Wo(x,{select:!0})):m.shiftKey&&v===x&&(m.preventDefault(),n&&Wo(_,{select:!0})):v===y&&m.preventDefault()}},[n,r,h.paused]);return g.createElement(Xe.div,xe({tabIndex:-1},o,{ref:f,onKeyDown:p}))});function PU(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Wo(r,{select:e}),document.activeElement!==n)return}function TU(t){const e=AD(t),n=jA(e,t),r=jA(e.reverse(),t);return[n,r]}function AD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function jA(t,e){for(const n of t)if(!$U(n,{upTo:e}))return n}function $U(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function OU(t){return t instanceof HTMLInputElement&&"select"in t}function Wo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&OU(t)&&e&&t.select()}}const BA=NU();function NU(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=zA(t,e),t.unshift(e)},remove(e){var n;t=zA(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function zA(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function MU(t){return t.filter(e=>e.tagName!=="A")}const RU=["top","right","bottom","left"],Fa=Math.min,Gr=Math.max,Qg=Math.round,Xp=Math.floor,ja=t=>({x:t,y:t}),DU={left:"right",right:"left",bottom:"top",top:"bottom"},IU={start:"end",end:"start"};function Q1(t,e,n){return Gr(t,Fa(e,n))}function _o(t,e){return typeof t=="function"?t(e):t}function Co(t){return t.split("-")[0]}function nd(t){return t.split("-")[1]}function Ok(t){return t==="x"?"y":"x"}function Nk(t){return t==="y"?"height":"width"}function rd(t){return["top","bottom"].includes(Co(t))?"y":"x"}function Mk(t){return Ok(rd(t))}function LU(t,e,n){n===void 0&&(n=!1);const r=nd(t),i=Mk(t),s=Nk(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=e0(o)),[o,e0(o)]}function FU(t){const e=e0(t);return[ex(t),e,ex(e)]}function ex(t){return t.replace(/start|end/g,e=>IU[e])}function jU(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function BU(t,e,n,r){const i=nd(t);let s=jU(Co(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(ex)))),s}function e0(t){return t.replace(/left|right|bottom|top/g,e=>DU[e])}function zU(t){return{top:0,right:0,bottom:0,left:0,...t}}function PD(t){return typeof t!="number"?zU(t):{top:t,right:t,bottom:t,left:t}}function t0(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function UA(t,e,n){let{reference:r,floating:i}=t;const s=rd(e),o=Mk(e),a=Nk(o),l=Co(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(nd(e)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const UU=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=UA(c,r,l),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:w,fn:v}=a[m],{x:y,y:x,data:_,reset:k}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:e}});if(u=y??u,d=x??d,h={...h,[w]:{...h[w],..._}},k&&p<=50){p++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):k.rects),{x:u,y:d}=UA(c,f,l)),m=-1;continue}}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};async function ih(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=_o(e,t),p=PD(h),w=a[f?d==="floating"?"reference":"floating":d],v=t0(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=d==="floating"?{...o.floating,x:r,y:i}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},k=t0(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:x,strategy:l}):y);return{top:(v.top-k.top+p.top)/_.y,bottom:(k.bottom-v.bottom+p.bottom)/_.y,left:(v.left-k.left+p.left)/_.x,right:(k.right-v.right+p.right)/_.x}}const VU=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=_o(t,e)||{};if(c==null)return{};const d=PD(u),f={x:n,y:r},h=Mk(i),p=Nk(h),m=await o.getDimensions(c),w=h==="y",v=w?"top":"left",y=w?"bottom":"right",x=w?"clientHeight":"clientWidth",_=s.reference[p]+s.reference[h]-f[h]-s.floating[p],k=f[h]-s.reference[h],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let E=P?P[x]:0;(!E||!await(o.isElement==null?void 0:o.isElement(P)))&&(E=a.floating[x]||s.floating[p]);const C=_/2-k/2,N=E/2-m[p]/2-1,M=Fa(d[v],N),R=Fa(d[y],N),L=M,H=E-m[p]-R,$=E/2-m[p]/2+C,V=Q1(L,$,H),q=!l.arrow&&nd(i)!=null&&$!=V&&s.reference[p]/2-($<L?M:R)-m[p]/2<0,ne=q?$<L?$-L:$-H:0;return{[h]:f[h]+ne,data:{[h]:V,centerOffset:$-V-ne,...q&&{alignmentOffset:ne}},reset:q}}}),HU=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...w}=_o(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Co(i),y=Co(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=f||(y||!m?[e0(a)]:FU(a));!f&&p!=="none"&&_.push(...BU(a,m,p,x));const k=[a,..._],P=await ih(e,w),E=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&E.push(P[v]),d){const L=LU(i,o,x);E.push(P[L[0]],P[L[1]])}if(C=[...C,{placement:i,overflows:E}],!E.every(L=>L<=0)){var N,M;const L=(((N=s.flip)==null?void 0:N.index)||0)+1,H=k[L];if(H)return{data:{index:L,overflows:C},reset:{placement:H}};let $=(M=C.filter(V=>V.overflows[0]<=0).sort((V,q)=>V.overflows[1]-q.overflows[1])[0])==null?void 0:M.placement;if(!$)switch(h){case"bestFit":{var R;const V=(R=C.map(q=>[q.placement,q.overflows.filter(ne=>ne>0).reduce((ne,W)=>ne+W,0)]).sort((q,ne)=>q[1]-ne[1])[0])==null?void 0:R[0];V&&($=V);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function VA(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function HA(t){return RU.some(e=>t[e]>=0)}const WU=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=_o(t,e);switch(r){case"referenceHidden":{const s=await ih(e,{...i,elementContext:"reference"}),o=VA(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:HA(o)}}}case"escaped":{const s=await ih(e,{...i,altBoundary:!0}),o=VA(s,n.floating);return{data:{escapedOffsets:o,escaped:HA(o)}}}default:return{}}}}};async function GU(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Co(n),a=nd(n),l=rd(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=_o(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const KU=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await GU(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},XU=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:v,y}=w;return{x:v,y}}},...l}=_o(t,e),c={x:n,y:r},u=await ih(e,l),d=rd(Co(i)),f=Ok(d);let h=c[f],p=c[d];if(s){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=h+u[w],x=h-u[v];h=Q1(y,h,x)}if(o){const w=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=p+u[w],x=p-u[v];p=Q1(y,p,x)}const m=a.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},YU=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=_o(t,e),u={x:n,y:r},d=rd(i),f=Ok(d);let h=u[f],p=u[d];const m=_o(a,e),w=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const x=f==="y"?"height":"width",_=s.reference[f]-s.floating[x]+w.mainAxis,k=s.reference[f]+s.reference[x]-w.mainAxis;h<_?h=_:h>k&&(h=k)}if(c){var v,y;const x=f==="y"?"width":"height",_=["top","left"].includes(Co(i)),k=s.reference[d]-s.floating[x]+(_&&((v=o.offset)==null?void 0:v[d])||0)+(_?0:w.crossAxis),P=s.reference[d]+s.reference[x]+(_?0:((y=o.offset)==null?void 0:y[d])||0)-(_?w.crossAxis:0);p<k?p=k:p>P&&(p=P)}return{[f]:h,[d]:p}}}},qU=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=_o(t,e),l=await ih(e,a),c=Co(n),u=nd(n),d=rd(n)==="y",{width:f,height:h}=r.floating;let p,m;c==="top"||c==="bottom"?(p=c,m=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=c,p=u==="end"?"top":"bottom");const w=h-l[p],v=f-l[m],y=!e.middlewareData.shift;let x=w,_=v;if(d){const P=f-l.left-l.right;_=u||y?Fa(v,P):P}else{const P=h-l.top-l.bottom;x=u||y?Fa(w,P):P}if(y&&!u){const P=Gr(l.left,0),E=Gr(l.right,0),C=Gr(l.top,0),N=Gr(l.bottom,0);d?_=f-2*(P!==0||E!==0?P+E:Gr(l.left,l.right)):x=h-2*(C!==0||N!==0?C+N:Gr(l.top,l.bottom))}await o({...e,availableWidth:_,availableHeight:x});const k=await i.getDimensions(s.floating);return f!==k.width||h!==k.height?{reset:{rects:!0}}:{}}}};function Ba(t){return TD(t)?(t.nodeName||"").toLowerCase():"#document"}function ti(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ro(t){var e;return(e=(TD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function TD(t){return t instanceof Node||t instanceof ti(t).Node}function Eo(t){return t instanceof Element||t instanceof ti(t).Element}function zs(t){return t instanceof HTMLElement||t instanceof ti(t).HTMLElement}function WA(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ti(t).ShadowRoot}function qh(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Mi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function JU(t){return["table","td","th"].includes(Ba(t))}function Rk(t){const e=Dk(),n=Mi(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function ZU(t){let e=Fu(t);for(;zs(e)&&!mv(e);){if(Rk(e))return e;e=Fu(e)}return null}function Dk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function mv(t){return["html","body","#document"].includes(Ba(t))}function Mi(t){return ti(t).getComputedStyle(t)}function gv(t){return Eo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Fu(t){if(Ba(t)==="html")return t;const e=t.assignedSlot||t.parentNode||WA(t)&&t.host||Ro(t);return WA(e)?e.host:e}function $D(t){const e=Fu(t);return mv(e)?t.ownerDocument?t.ownerDocument.body:t.body:zs(e)&&qh(e)?e:$D(e)}function sh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=$D(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=ti(i);return s?e.concat(o,o.visualViewport||[],qh(i)?i:[],o.frameElement&&n?sh(o.frameElement):[]):e.concat(i,sh(i,[],n))}function OD(t){const e=Mi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=zs(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Qg(n)!==s||Qg(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Ik(t){return Eo(t)?t:t.contextElement}function fu(t){const e=Ik(t);if(!zs(e))return ja(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=OD(e);let o=(s?Qg(n.width):n.width)/r,a=(s?Qg(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const QU=ja(0);function ND(t){const e=ti(t);return!Dk()||!e.visualViewport?QU:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function eV(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ti(t)?!1:e}function Jl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Ik(t);let o=ja(1);e&&(r?Eo(r)&&(o=fu(r)):o=fu(t));const a=eV(s,n,r)?ND(s):ja(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const f=ti(s),h=r&&Eo(r)?ti(r):r;let p=f.frameElement;for(;p&&r&&h!==f;){const m=fu(p),w=p.getBoundingClientRect(),v=Mi(p),y=w.left+(p.clientLeft+parseFloat(v.paddingLeft))*m.x,x=w.top+(p.clientTop+parseFloat(v.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,d*=m.y,l+=y,c+=x,p=ti(p).frameElement}}return t0({width:u,height:d,x:l,y:c})}function tV(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=zs(n),s=Ro(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=ja(1);const l=ja(0);if((i||!i&&r!=="fixed")&&((Ba(n)!=="body"||qh(s))&&(o=gv(n)),zs(n))){const c=Jl(n);a=fu(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function nV(t){return Array.from(t.getClientRects())}function MD(t){return Jl(Ro(t)).left+gv(t).scrollLeft}function rV(t){const e=Ro(t),n=gv(t),r=t.ownerDocument.body,i=Gr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Gr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+MD(t);const a=-n.scrollTop;return Mi(r).direction==="rtl"&&(o+=Gr(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function iV(t,e){const n=ti(t),r=Ro(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=Dk();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function sV(t,e){const n=Jl(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=zs(t)?fu(t):ja(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function GA(t,e,n){let r;if(e==="viewport")r=iV(t,n);else if(e==="document")r=rV(Ro(t));else if(Eo(e))r=sV(e,n);else{const i=ND(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return t0(r)}function RD(t,e){const n=Fu(t);return n===e||!Eo(n)||mv(n)?!1:Mi(n).position==="fixed"||RD(n,e)}function oV(t,e){const n=e.get(t);if(n)return n;let r=sh(t,[],!1).filter(a=>Eo(a)&&Ba(a)!=="body"),i=null;const s=Mi(t).position==="fixed";let o=s?Fu(t):t;for(;Eo(o)&&!mv(o);){const a=Mi(o),l=Rk(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||qh(o)&&!l&&RD(t,o))?r=r.filter(u=>u!==o):i=a,o=Fu(o)}return e.set(t,r),r}function aV(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?oV(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=GA(e,u,i);return c.top=Gr(d.top,c.top),c.right=Fa(d.right,c.right),c.bottom=Fa(d.bottom,c.bottom),c.left=Gr(d.left,c.left),c},GA(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function lV(t){const{width:e,height:n}=OD(t);return{width:e,height:n}}function cV(t,e,n){const r=zs(e),i=Ro(e),s=n==="fixed",o=Jl(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=ja(0);if(r||!r&&!s)if((Ba(e)!=="body"||qh(i))&&(a=gv(e)),r){const c=Jl(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else i&&(l.x=MD(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function KA(t,e){return!zs(t)||Mi(t).position==="fixed"?null:e?e(t):t.offsetParent}function DD(t,e){const n=ti(t);if(!zs(t))return n;let r=KA(t,e);for(;r&&JU(r)&&Mi(r).position==="static";)r=KA(r,e);return r&&(Ba(r)==="html"||Ba(r)==="body"&&Mi(r).position==="static"&&!Rk(r))?n:r||ZU(t)||n}const uV=async function(t){let{reference:e,floating:n,strategy:r}=t;const i=this.getOffsetParent||DD,s=this.getDimensions;return{reference:cV(e,await i(n),r),floating:{x:0,y:0,...await s(n)}}};function dV(t){return Mi(t).direction==="rtl"}const fV={convertOffsetParentRelativeRectToViewportRelativeRect:tV,getDocumentElement:Ro,getClippingRect:aV,getOffsetParent:DD,getElementRects:uV,getClientRects:nV,getDimensions:lV,getScale:fu,isElement:Eo,isRTL:dV};function hV(t,e){let n=null,r;const i=Ro(t);function s(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:f}=t.getBoundingClientRect();if(a||e(),!d||!f)return;const h=Xp(u),p=Xp(i.clientWidth-(c+d)),m=Xp(i.clientHeight-(u+f)),w=Xp(c),y={rootMargin:-h+"px "+-p+"px "+-m+"px "+-w+"px",threshold:Gr(0,Fa(1,l))||1};let x=!0;function _(k){const P=k[0].intersectionRatio;if(P!==l){if(!x)return o();P?o(!1,P):r=setTimeout(()=>{o(!1,1e-7)},100)}x=!1}try{n=new IntersectionObserver(_,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(_,y)}n.observe(t)}return o(!0),s}function pV(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Ik(t),u=i||s?[...c?sh(c):[],...sh(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=c&&a?hV(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(v=>{let[y]=v;y&&y.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{h&&h.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let p,m=l?Jl(t):null;l&&w();function w(){const v=Jl(t);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(w)}return n(),()=>{u.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d&&d(),h&&h.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const mV=XU,gV=HU,vV=qU,yV=WU,XA=VU,wV=YU,bV=(t,e,n)=>{const r=new Map,i={platform:fV,...n},s={...i.platform,_c:r};return UU(t,e,{...i,platform:s})},xV=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?XA({element:r.current,padding:i}).fn(n):{}:r?XA({element:r,padding:i}).fn(n):{}}}};var eg=typeof document<"u"?g.useLayoutEffect:g.useEffect;function n0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!n0(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!n0(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function ID(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function YA(t,e){const n=ID(t);return Math.round(e*n)/n}function qA(t){const e=g.useRef(t);return eg(()=>{e.current=t}),e}function SV(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=g.useState(r);n0(f,r)||h(r);const[p,m]=g.useState(null),[w,v]=g.useState(null),y=g.useCallback(q=>{q!=P.current&&(P.current=q,m(q))},[m]),x=g.useCallback(q=>{q!==E.current&&(E.current=q,v(q))},[v]),_=s||p,k=o||w,P=g.useRef(null),E=g.useRef(null),C=g.useRef(u),N=qA(l),M=qA(i),R=g.useCallback(()=>{if(!P.current||!E.current)return;const q={placement:e,strategy:n,middleware:f};M.current&&(q.platform=M.current),bV(P.current,E.current,q).then(ne=>{const W={...ne,isPositioned:!0};L.current&&!n0(C.current,W)&&(C.current=W,Oo.flushSync(()=>{d(W)}))})},[f,e,n,M]);eg(()=>{c===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(q=>({...q,isPositioned:!1})))},[c]);const L=g.useRef(!1);eg(()=>(L.current=!0,()=>{L.current=!1}),[]),eg(()=>{if(_&&(P.current=_),k&&(E.current=k),_&&k){if(N.current)return N.current(_,k,R);R()}},[_,k,R,N]);const H=g.useMemo(()=>({reference:P,floating:E,setReference:y,setFloating:x}),[y,x]),$=g.useMemo(()=>({reference:_,floating:k}),[_,k]),V=g.useMemo(()=>{const q={position:n,left:0,top:0};if(!$.floating)return q;const ne=YA($.floating,u.x),W=YA($.floating,u.y);return a?{...q,transform:"translate("+ne+"px, "+W+"px)",...ID($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:W}},[n,a,$.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:R,refs:H,elements:$,floatingStyles:V}),[u,R,H,$,V])}function Lk(t){const[e,n]=g.useState(void 0);return Ni(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const LD="Popper",[FD,id]=cs(LD),[kV,jD]=FD(LD),_V=t=>{const{__scopePopper:e,children:n}=t,[r,i]=g.useState(null);return g.createElement(kV,{scope:e,anchor:r,onAnchorChange:i},n)},CV="PopperAnchor",EV=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=jD(CV,n),o=g.useRef(null),a=lt(e,o);return g.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:g.createElement(Xe.div,xe({},i,{ref:a}))}),BD="PopperContent",[AV,Mae]=FD(BD),PV=g.forwardRef((t,e)=>{var n,r,i,s,o,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:f=0,align:h="center",alignOffset:p=0,arrowPadding:m=0,avoidCollisions:w=!0,collisionBoundary:v=[],collisionPadding:y=0,sticky:x="partial",hideWhenDetached:_=!1,updatePositionStrategy:k="optimized",onPlaced:P,...E}=t,C=jD(BD,u),[N,M]=g.useState(null),R=lt(e,se=>M(se)),[L,H]=g.useState(null),$=Lk(L),V=(n=$==null?void 0:$.width)!==null&&n!==void 0?n:0,q=(r=$==null?void 0:$.height)!==null&&r!==void 0?r:0,ne=d+(h!=="center"?"-"+h:""),W=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},j=Array.isArray(v)?v:[v],Q=j.length>0,K={padding:W,boundary:j.filter(TV),altBoundary:Q},{refs:ee,floatingStyles:ce,placement:F,isPositioned:I,middlewareData:z}=SV({strategy:"fixed",placement:ne,whileElementsMounted:(...se)=>pV(...se,{animationFrame:k==="always"}),elements:{reference:C.anchor},middleware:[KU({mainAxis:f+q,alignmentAxis:p}),w&&mV({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?wV():void 0,...K}),w&&gV({...K}),vV({...K,apply:({elements:se,rects:Ie,availableWidth:me,availableHeight:je})=>{const{width:Ve,height:Se}=Ie.reference,ot=se.floating.style;ot.setProperty("--radix-popper-available-width",`${me}px`),ot.setProperty("--radix-popper-available-height",`${je}px`),ot.setProperty("--radix-popper-anchor-width",`${Ve}px`),ot.setProperty("--radix-popper-anchor-height",`${Se}px`)}}),L&&xV({element:L,padding:m}),$V({arrowWidth:V,arrowHeight:q}),_&&yV({strategy:"referenceHidden",...K})]}),[S,T]=zD(F),D=ar(P);Ni(()=>{I&&(D==null||D())},[I,D]);const O=(i=z.arrow)===null||i===void 0?void 0:i.x,U=(s=z.arrow)===null||s===void 0?void 0:s.y,X=((o=z.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[te,J]=g.useState();return Ni(()=>{N&&J(window.getComputedStyle(N).zIndex)},[N]),g.createElement("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...ce,transform:I?ce.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(a=z.transformOrigin)===null||a===void 0?void 0:a.x,(l=z.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},g.createElement(AV,{scope:u,placedSide:S,onArrowChange:H,arrowX:O,arrowY:U,shouldHideArrow:X},g.createElement(Xe.div,xe({"data-side":S,"data-align":T},E,{ref:R,style:{...E.style,animation:I?void 0:"none",opacity:(c=z.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function TV(t){return t!==null}const $V=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,d=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,f=d?0:t.arrowWidth,h=d?0:t.arrowHeight,[p,m]=zD(a),w={start:"0%",center:"50%",end:"100%"}[m],v=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+f/2,y=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+h/2;let x="",_="";return p==="bottom"?(x=d?w:`${v}px`,_=`${-h}px`):p==="top"?(x=d?w:`${v}px`,_=`${l.floating.height+h}px`):p==="right"?(x=`${-h}px`,_=d?w:`${y}px`):p==="left"&&(x=`${l.floating.width+h}px`,_=d?w:`${y}px`),{data:{x,y:_}}}});function zD(t){const[e,n="center"]=t.split("-");return[e,n]}const Fk=_V,jk=EV,Bk=PV,vv=g.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?hB.createPortal(g.createElement(Xe.div,xe({},i,{ref:e})),r):null});var OV=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},yc=new WeakMap,Yp=new WeakMap,qp={},ow=0,UD=function(t){return t&&(t.host||UD(t.parentNode))},NV=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=UD(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},MV=function(t,e,n,r){var i=NV(e,Array.isArray(t)?t:[t]);qp[n]||(qp[n]=new WeakMap);var s=qp[n],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else{var h=f.getAttribute(r),p=h!==null&&h!=="false",m=(yc.get(f)||0)+1,w=(s.get(f)||0)+1;yc.set(f,m),s.set(f,w),o.push(f),m===1&&p&&Yp.set(f,!0),w===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}})};return u(e),a.clear(),ow++,function(){o.forEach(function(d){var f=yc.get(d)-1,h=s.get(d)-1;yc.set(d,f),s.set(d,h),f||(Yp.has(d)||d.removeAttribute(r),Yp.delete(d)),h||d.removeAttribute(n)}),ow--,ow||(yc=new WeakMap,yc=new WeakMap,Yp=new WeakMap,qp={})}},zk=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||OV(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),MV(r,i,n,"aria-hidden")):function(){return null}},tg="right-scroll-bar-position",ng="width-before-scroll-bar",RV="with-scroll-bars-hidden",DV="--removed-body-scroll-bar-size";function aw(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function IV(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var JA=new WeakMap;function LV(t,e){var n=IV(e||null,function(r){return t.forEach(function(i){return aw(i,r)})});return g.useLayoutEffect(function(){var r=JA.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||aw(a,null)}),s.forEach(function(a){i.has(a)||aw(a,o)})}JA.set(n,t)},[t]),n}function FV(t){return t}function jV(t,e){e===void 0&&(e=FV);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function BV(t){t===void 0&&(t={});var e=jV(null);return e.options=Ps({async:!0,ssr:!1},t),e}var VD=function(t){var e=t.sideCar,n=ZM(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,Ps({},n))};VD.isSideCarExport=!0;function zV(t,e){return t.useMedium(e),VD}var HD=BV(),lw=function(){},yv=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:lw,onWheelCapture:lw,onTouchMoveCapture:lw}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,h=t.noIsolation,p=t.inert,m=t.allowPinchZoom,w=t.as,v=w===void 0?"div":w,y=ZM(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),x=f,_=LV([n,e]),k=Ps(Ps({},y),i);return g.createElement(g.Fragment,null,u&&g.createElement(x,{sideCar:HD,removeScrollBar:c,shards:d,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n}),o?g.cloneElement(g.Children.only(a),Ps(Ps({},k),{ref:_})):g.createElement(v,Ps({},k,{className:l,ref:_}),a))});yv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yv.classNames={fullWidth:ng,zeroRight:tg};var UV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function VV(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=UV();return e&&t.setAttribute("nonce",e),t}function HV(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function WV(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var GV=function(){var t=0,e=null;return{add:function(n){t==0&&(e=VV())&&(HV(e,n),WV(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},KV=function(){var t=GV();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},WD=function(){var t=KV(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},XV={left:0,top:0,right:0,gap:0},cw=function(t){return parseInt(t||"",10)||0},YV=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[cw(n),cw(r),cw(i)]},qV=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return XV;var e=YV(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},JV=WD(),ZV=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(RV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(tg,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ng,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(tg," .").concat(tg,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ng," .").concat(ng,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(DV,": ").concat(a,`px;
  }
`)},QV=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r,s=g.useMemo(function(){return qV(i)},[i]);return g.createElement(JV,{styles:ZV(s,!e,i,n?"":"!important")})},tx=!1;if(typeof window<"u")try{var Jp=Object.defineProperty({},"passive",{get:function(){return tx=!0,!0}});window.addEventListener("test",Jp,Jp),window.removeEventListener("test",Jp,Jp)}catch{tx=!1}var wc=tx?{passive:!1}:!1,eH=function(t){return t.tagName==="TEXTAREA"},GD=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!eH(t)&&n[e]==="visible")},tH=function(t){return GD(t,"overflowY")},nH=function(t){return GD(t,"overflowX")},ZA=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=KD(t,n);if(r){var i=XD(t,n),s=i[1],o=i[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},rH=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},iH=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},KD=function(t,e){return t==="v"?tH(e):nH(e)},XD=function(t,e){return t==="v"?rH(e):iH(e)},sH=function(t,e){return t==="h"&&e==="rtl"?-1:1},oH=function(t,e,n,r,i){var s=sH(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{var h=XD(t,a),p=h[0],m=h[1],w=h[2],v=m-w-s*p;(p||v)&&KD(t,a)&&(d+=v,f+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(i&&d===0||!i&&o>d)||!u&&(i&&f===0||!i&&-o>f))&&(c=!0),c},Zp=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},QA=function(t){return[t.deltaX,t.deltaY]},eP=function(t){return t&&"current"in t?t.current:t},aH=function(t,e){return t[0]===e[0]&&t[1]===e[1]},lH=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},cH=0,bc=[];function uH(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),i=g.useState(cH++)[0],s=g.useState(function(){return WD()})[0],o=g.useRef(t);g.useEffect(function(){o.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var m=w7([t.lockRef.current],(t.shards||[]).map(eP),!0).filter(Boolean);return m.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=g.useCallback(function(m,w){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var v=Zp(m),y=n.current,x="deltaX"in m?m.deltaX:y[0]-v[0],_="deltaY"in m?m.deltaY:y[1]-v[1],k,P=m.target,E=Math.abs(x)>Math.abs(_)?"h":"v";if("touches"in m&&E==="h"&&P.type==="range")return!1;var C=ZA(E,P);if(!C)return!0;if(C?k=E:(k=E==="v"?"h":"v",C=ZA(E,P)),!C)return!1;if(!r.current&&"changedTouches"in m&&(x||_)&&(r.current=k),!k)return!0;var N=r.current||k;return oH(N,w,m,N==="h"?x:_,!0)},[]),l=g.useCallback(function(m){var w=m;if(!(!bc.length||bc[bc.length-1]!==s)){var v="deltaY"in w?QA(w):Zp(w),y=e.current.filter(function(k){return k.name===w.type&&k.target===w.target&&aH(k.delta,v)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var x=(o.current.shards||[]).map(eP).filter(Boolean).filter(function(k){return k.contains(w.target)}),_=x.length>0?a(w,x[0]):!o.current.noIsolation;_&&w.cancelable&&w.preventDefault()}}},[]),c=g.useCallback(function(m,w,v,y){var x={name:m,delta:w,target:v,should:y};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(_){return _!==x})},1)},[]),u=g.useCallback(function(m){n.current=Zp(m),r.current=void 0},[]),d=g.useCallback(function(m){c(m.type,QA(m),m.target,a(m,t.lockRef.current))},[]),f=g.useCallback(function(m){c(m.type,Zp(m),m.target,a(m,t.lockRef.current))},[]);g.useEffect(function(){return bc.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,wc),document.addEventListener("touchmove",l,wc),document.addEventListener("touchstart",u,wc),function(){bc=bc.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,wc),document.removeEventListener("touchmove",l,wc),document.removeEventListener("touchstart",u,wc)}},[]);var h=t.removeScrollBar,p=t.inert;return g.createElement(g.Fragment,null,p?g.createElement(s,{styles:lH(i)}):null,h?g.createElement(QV,{gapMode:"margin"}):null)}const dH=zV(HD,uH);var YD=g.forwardRef(function(t,e){return g.createElement(yv,Ps({},t,{ref:e,sideCar:dH}))});YD.classNames=yv.classNames;const Uk=YD,nx=["Enter"," "],fH=["ArrowDown","PageUp","Home"],qD=["ArrowUp","PageDown","End"],hH=[...fH,...qD],pH={ltr:[...nx,"ArrowRight"],rtl:[...nx,"ArrowLeft"]},mH={ltr:["ArrowLeft"],rtl:["ArrowRight"]},wv="Menu",[oh,gH,vH]=Uh(wv),[lc,JD]=cs(wv,[vH,id,lv]),Vk=id(),ZD=lv(),[yH,cc]=lc(wv),[wH,Jh]=lc(wv),bH=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=Vk(e),[l,c]=g.useState(null),u=g.useRef(!1),d=ar(s),f=Vh(i);return g.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),g.createElement(Fk,a,g.createElement(yH,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c},g.createElement(wH,{scope:e,onClose:g.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o},r)))},QD=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Vk(n);return g.createElement(jk,xe({},i,r,{ref:e}))}),eI="MenuPortal",[xH,tI]=lc(eI,{forceMount:void 0}),SH=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=cc(eI,e);return g.createElement(xH,{scope:e,forceMount:n},g.createElement(No,{present:n||s.open},g.createElement(vv,{asChild:!0,container:i},r)))},es="MenuContent",[kH,Hk]=lc(es),_H=g.forwardRef((t,e)=>{const n=tI(es,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=cc(es,t.__scopeMenu),o=Jh(es,t.__scopeMenu);return g.createElement(oh.Provider,{scope:t.__scopeMenu},g.createElement(No,{present:r||s.open},g.createElement(oh.Slot,{scope:t.__scopeMenu},o.modal?g.createElement(CH,xe({},i,{ref:e})):g.createElement(EH,xe({},i,{ref:e})))))}),CH=g.forwardRef((t,e)=>{const n=cc(es,t.__scopeMenu),r=g.useRef(null),i=lt(e,r);return g.useEffect(()=>{const s=r.current;if(s)return zk(s)},[]),g.createElement(Wk,xe({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ye(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),EH=g.forwardRef((t,e)=>{const n=cc(es,t.__scopeMenu);return g.createElement(Wk,xe({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),Wk=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,disableOutsideScroll:p,...m}=t,w=cc(es,n),v=Jh(es,n),y=Vk(n),x=ZD(n),_=gH(n),[k,P]=g.useState(null),E=g.useRef(null),C=lt(e,E,w.onContentChange),N=g.useRef(0),M=g.useRef(""),R=g.useRef(0),L=g.useRef(null),H=g.useRef("right"),$=g.useRef(0),V=p?Uk:g.Fragment,q=p?{as:Wl,allowPinchZoom:!0}:void 0,ne=j=>{var Q,K;const ee=M.current+j,ce=_().filter(D=>!D.disabled),F=document.activeElement,I=(Q=ce.find(D=>D.ref.current===F))===null||Q===void 0?void 0:Q.textValue,z=ce.map(D=>D.textValue),S=UH(z,ee,I),T=(K=ce.find(D=>D.textValue===S))===null||K===void 0?void 0:K.ref.current;(function D(O){M.current=O,window.clearTimeout(N.current),O!==""&&(N.current=window.setTimeout(()=>D(""),1e3))})(ee),T&&setTimeout(()=>T.focus())};g.useEffect(()=>()=>window.clearTimeout(N.current),[]),Tk();const W=g.useCallback(j=>{var Q,K;return H.current===((Q=L.current)===null||Q===void 0?void 0:Q.side)&&HH(j,(K=L.current)===null||K===void 0?void 0:K.area)},[]);return g.createElement(kH,{scope:n,searchRef:M,onItemEnter:g.useCallback(j=>{W(j)&&j.preventDefault()},[W]),onItemLeave:g.useCallback(j=>{var Q;W(j)||((Q=E.current)===null||Q===void 0||Q.focus(),P(null))},[W]),onTriggerLeave:g.useCallback(j=>{W(j)&&j.preventDefault()},[W]),pointerGraceTimerRef:R,onPointerGraceIntentChange:g.useCallback(j=>{L.current=j},[])},g.createElement(V,q,g.createElement($k,{asChild:!0,trapped:i,onMountAutoFocus:ye(s,j=>{var Q;j.preventDefault(),(Q=E.current)===null||Q===void 0||Q.focus()}),onUnmountAutoFocus:o},g.createElement(pv,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h},g.createElement(CM,xe({asChild:!0},x,{dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:P,onEntryFocus:ye(l,j=>{v.isUsingKeyboardRef.current||j.preventDefault()})}),g.createElement(Bk,xe({role:"menu","aria-orientation":"vertical","data-state":oI(w.open),"data-radix-menu-content":"",dir:v.dir},y,m,{ref:C,style:{outline:"none",...m.style},onKeyDown:ye(m.onKeyDown,j=>{const K=j.target.closest("[data-radix-menu-content]")===j.currentTarget,ee=j.ctrlKey||j.altKey||j.metaKey,ce=j.key.length===1;K&&(j.key==="Tab"&&j.preventDefault(),!ee&&ce&&ne(j.key));const F=E.current;if(j.target!==F||!hH.includes(j.key))return;j.preventDefault();const z=_().filter(S=>!S.disabled).map(S=>S.ref.current);qD.includes(j.key)&&z.reverse(),BH(z)}),onBlur:ye(t.onBlur,j=>{j.currentTarget.contains(j.target)||(window.clearTimeout(N.current),M.current="")}),onPointerMove:ye(t.onPointerMove,ah(j=>{const Q=j.target,K=$.current!==j.clientX;if(j.currentTarget.contains(Q)&&K){const ee=j.clientX>$.current?"right":"left";H.current=ee,$.current=j.clientX}}))})))))))}),AH=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return g.createElement(Xe.div,xe({},r,{ref:e}))}),rx="MenuItem",tP="menu.itemSelect",Gk=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=g.useRef(null),o=Jh(rx,t.__scopeMenu),a=Hk(rx,t.__scopeMenu),l=lt(e,s),c=g.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(tP,{bubbles:!0,cancelable:!0});d.addEventListener(tP,h=>r==null?void 0:r(h),{once:!0}),dk(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return g.createElement(nI,xe({},i,{ref:l,disabled:n,onClick:ye(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)===null||f===void 0||f.call(t,d),c.current=!0},onPointerUp:ye(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)===null||f===void 0||f.click()}),onKeyDown:ye(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||nx.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})}))}),nI=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=Hk(rx,n),a=ZD(n),l=g.useRef(null),c=lt(e,l),[u,d]=g.useState(!1),[f,h]=g.useState("");return g.useEffect(()=>{const p=l.current;if(p){var m;h(((m=p.textContent)!==null&&m!==void 0?m:"").trim())}},[s.children]),g.createElement(oh.ItemSlot,{scope:n,disabled:r,textValue:i??f},g.createElement(EM,xe({asChild:!0},a,{focusable:!r}),g.createElement(Xe.div,xe({role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0},s,{ref:c,onPointerMove:ye(t.onPointerMove,ah(p=>{r?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus())})),onPointerLeave:ye(t.onPointerLeave,ah(p=>o.onItemLeave(p))),onFocus:ye(t.onFocus,()=>d(!0)),onBlur:ye(t.onBlur,()=>d(!1))}))))}),PH=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return g.createElement(iI,{scope:t.__scopeMenu,checked:n},g.createElement(Gk,xe({role:"menuitemcheckbox","aria-checked":r0(n)?"mixed":n},i,{ref:e,"data-state":Kk(n),onSelect:ye(i.onSelect,()=>r==null?void 0:r(r0(n)?!0:!n),{checkForDefaultPrevented:!1})})))}),TH="MenuRadioGroup",[Rae,$H]=lc(TH,{value:void 0,onValueChange:()=>{}}),OH="MenuRadioItem",NH=g.forwardRef((t,e)=>{const{value:n,...r}=t,i=$H(OH,t.__scopeMenu),s=n===i.value;return g.createElement(iI,{scope:t.__scopeMenu,checked:s},g.createElement(Gk,xe({role:"menuitemradio","aria-checked":s},r,{ref:e,"data-state":Kk(s),onSelect:ye(r.onSelect,()=>{var o;return(o=i.onValueChange)===null||o===void 0?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})))}),rI="MenuItemIndicator",[iI,MH]=lc(rI,{checked:!1}),RH=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=MH(rI,n);return g.createElement(No,{present:r||r0(s.checked)||s.checked===!0},g.createElement(Xe.span,xe({},i,{ref:e,"data-state":Kk(s.checked)})))}),DH=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return g.createElement(Xe.div,xe({role:"separator","aria-orientation":"horizontal"},r,{ref:e}))}),IH="MenuSub",[Dae,sI]=lc(IH),Qp="MenuSubTrigger",LH=g.forwardRef((t,e)=>{const n=cc(Qp,t.__scopeMenu),r=Jh(Qp,t.__scopeMenu),i=sI(Qp,t.__scopeMenu),s=Hk(Qp,t.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),g.createElement(QD,xe({asChild:!0},c),g.createElement(nI,xe({id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":oI(n.open)},t,{ref:av(e,i.onTriggerChange),onClick:d=>{var f;(f=t.onClick)===null||f===void 0||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ye(t.onPointerMove,ah(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ye(t.onPointerLeave,ah(d=>{var f;u();const h=(f=n.content)===null||f===void 0?void 0:f.getBoundingClientRect();if(h){var p;const m=(p=n.content)===null||p===void 0?void 0:p.dataset.side,w=m==="right",v=w?-5:5,y=h[w?"left":"right"],x=h[w?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:y,y:h.top},{x,y:h.top},{x,y:h.bottom},{x:y,y:h.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ye(t.onKeyDown,d=>{const f=s.searchRef.current!=="";if(!(t.disabled||f&&d.key===" ")&&pH[r.dir].includes(d.key)){var h;n.onOpenChange(!0),(h=n.content)===null||h===void 0||h.focus(),d.preventDefault()}})})))}),FH="MenuSubContent",jH=g.forwardRef((t,e)=>{const n=tI(es,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=cc(es,t.__scopeMenu),o=Jh(es,t.__scopeMenu),a=sI(FH,t.__scopeMenu),l=g.useRef(null),c=lt(e,l);return g.createElement(oh.Provider,{scope:t.__scopeMenu},g.createElement(No,{present:r||s.open},g.createElement(oh.Slot,{scope:t.__scopeMenu},g.createElement(Wk,xe({id:a.contentId,"aria-labelledby":a.triggerId},i,{ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)===null||d===void 0||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ye(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ye(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ye(t.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),f=mH[o.dir].includes(u.key);if(d&&f){var h;s.onOpenChange(!1),(h=a.trigger)===null||h===void 0||h.focus(),u.preventDefault()}})})))))});function oI(t){return t?"open":"closed"}function r0(t){return t==="indeterminate"}function Kk(t){return r0(t)?"indeterminate":t?"checked":"unchecked"}function BH(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function zH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function UH(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=zH(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function VH(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function HH(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return VH(n,e)}function ah(t){return e=>e.pointerType==="mouse"?t(e):void 0}const WH=bH,GH=QD,KH=SH,XH=_H,YH=AH,qH=Gk,JH=PH,ZH=NH,QH=RH,eW=DH,tW=LH,nW=jH,aI="DropdownMenu",[rW,Iae]=cs(aI,[JD]),Di=JD(),[iW,lI]=rW(aI),sW=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=Di(e),c=g.useRef(null),[u=!1,d]=bo({prop:i,defaultProp:s,onChange:o});return g.createElement(iW,{scope:e,triggerId:Gl(),triggerRef:c,contentId:Gl(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:a},g.createElement(WH,xe({},l,{open:u,onOpenChange:d,dir:r,modal:a}),n))},oW="DropdownMenuTrigger",aW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=lI(oW,n),o=Di(n);return g.createElement(GH,xe({asChild:!0},o),g.createElement(Xe.button,xe({type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r},i,{ref:av(e,s.triggerRef),onPointerDown:ye(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ye(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})))}),lW=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Di(e);return g.createElement(KH,xe({},r,n))},cW="DropdownMenuContent",uW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=lI(cW,n),s=Di(n),o=g.useRef(!1);return g.createElement(XH,xe({id:i.contentId,"aria-labelledby":i.triggerId},s,r,{ref:e,onCloseAutoFocus:ye(t.onCloseAutoFocus,a=>{var l;o.current||(l=i.triggerRef.current)===null||l===void 0||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ye(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),dW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Di(n);return g.createElement(YH,xe({},i,r,{ref:e}))}),fW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Di(n);return g.createElement(qH,xe({},i,r,{ref:e}))}),hW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Di(n);return g.createElement(JH,xe({},i,r,{ref:e}))}),pW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Di(n);return g.createElement(ZH,xe({},i,r,{ref:e}))}),mW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Di(n);return g.createElement(QH,xe({},i,r,{ref:e}))}),gW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Di(n);return g.createElement(eW,xe({},i,r,{ref:e}))}),vW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Di(n);return g.createElement(tW,xe({},i,r,{ref:e}))}),yW=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Di(n);return g.createElement(nW,xe({},i,r,{ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),wW=sW,bW=aW,xW=lW,cI=uW,uI=dW,dI=fW,fI=hW,hI=pW,pI=mW,mI=gW,gI=vW,vI=yW,SW=wW,kW=bW,_W=g.forwardRef(({className:t,inset:e,children:n,...r},i)=>b.jsxs(gI,{ref:i,className:Ge("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...r,children:[n,b.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block h-4 w-4"})]}));_W.displayName=gI.displayName;const CW=g.forwardRef(({className:t,...e},n)=>b.jsx(vI,{ref:n,className:Ge("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));CW.displayName=vI.displayName;const yI=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>b.jsx(xW,{children:b.jsx(cI,{ref:r,sideOffset:e,className:Ge("z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));yI.displayName=cI.displayName;const rg=g.forwardRef(({className:t,inset:e,...n},r)=>b.jsx(dI,{ref:r,className:Ge("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));rg.displayName=dI.displayName;const EW=g.forwardRef(({className:t,children:e,checked:n,...r},i)=>b.jsxs(fI,{ref:i,className:Ge("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[b.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:b.jsx(pI,{children:b.jsx("span",{className:"icon-[lucide--check] h-4 w-4"})})}),e]}));EW.displayName=fI.displayName;const AW=g.forwardRef(({className:t,children:e,...n},r)=>b.jsxs(hI,{ref:r,className:Ge("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[b.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:b.jsx(pI,{children:b.jsx("span",{className:"icon-[lucide--circle-dot] block h-4 w-4"})})}),e]}));AW.displayName=hI.displayName;const PW=g.forwardRef(({className:t,inset:e,...n},r)=>b.jsx(uI,{ref:r,className:Ge("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));PW.displayName=uI.displayName;const TW=g.forwardRef(({className:t,...e},n)=>b.jsx(mI,{ref:n,className:Ge("-mx-1 my-1 h-px bg-stone-600",t),...e}));TW.displayName=mI.displayName;function wI(t,e){const n=e.split(".");let r=t;for(const i of n)if(i in r)r=r[i];else throw new ReferenceError(`Couldn't find path "${e}".`);return r}const bI=["en","es"];function Xk(t){return function(n,r,...i){const s=wI(t[n],r);if(typeof s=="function")return s(...i);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${r}`)}}const Y=pk();function $W(t){return b.jsx(ZB,{store:Y,children:t.children})}var ct;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ct||(ct={}));var ix;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(ix||(ix={}));const we=ct.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ra=t=>{switch(typeof t){case"undefined":return we.undefined;case"string":return we.string;case"number":return isNaN(t)?we.nan:we.number;case"boolean":return we.boolean;case"function":return we.function;case"bigint":return we.bigint;case"symbol":return we.symbol;case"object":return Array.isArray(t)?we.array:t===null?we.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?we.promise:typeof Map<"u"&&t instanceof Map?we.map:typeof Set<"u"&&t instanceof Set?we.set:typeof Date<"u"&&t instanceof Date?we.date:we.object;default:return we.unknown}},de=ct.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),OW=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ts extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,ct.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ts.create=t=>new ts(t);const lh=(t,e)=>{let n;switch(t.code){case de.invalid_type:t.received===we.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case de.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ct.jsonStringifyReplacer)}`;break;case de.unrecognized_keys:n=`Unrecognized key(s) in object: ${ct.joinValues(t.keys,", ")}`;break;case de.invalid_union:n="Invalid input";break;case de.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ct.joinValues(t.options)}`;break;case de.invalid_enum_value:n=`Invalid enum value. Expected ${ct.joinValues(t.options)}, received '${t.received}'`;break;case de.invalid_arguments:n="Invalid function arguments";break;case de.invalid_return_type:n="Invalid function return type";break;case de.invalid_date:n="Invalid date";break;case de.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ct.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case de.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case de.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case de.custom:n="Invalid input";break;case de.invalid_intersection_types:n="Intersection results could not be merged";break;case de.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case de.not_finite:n="Number must be finite";break;default:n=e.defaultError,ct.assertNever(t)}return{message:n}};let xI=lh;function NW(t){xI=t}function i0(){return xI}const s0=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},MW=[];function ke(t,e){const n=s0({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,i0(),lh].filter(r=>!!r)});t.common.issues.push(n)}class qn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Be;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n)r.push({key:await i.key,value:await i.value});return qn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Be;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Be=Object.freeze({status:"aborted"}),SI=t=>({status:"dirty",value:t}),lr=t=>({status:"valid",value:t}),sx=t=>t.status==="aborted",ox=t=>t.status==="dirty",ch=t=>t.status==="valid",o0=t=>typeof Promise<"u"&&t instanceof Promise;var Me;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Me||(Me={}));class Us{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const nP=(t,e)=>{if(ch(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ts(t.common.issues);return this._error=n,this._error}}};function Ue(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:i}}class Ke{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ra(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ra(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new qn,ctx:{common:e.parent.common,data:e.data,parsedType:ra(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(o0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ra(e)},s=this._parseSync({data:e,path:i.path,parent:i});return nP(i,s)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ra(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(o0(i)?i:Promise.resolve(i));return nP(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:de.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new os({schema:this,typeName:Le.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return po.create(this,this._def)}nullable(){return ec.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ns.create(this,this._def)}promise(){return Bu.create(this,this._def)}or(e){return hh.create([this,e],this._def)}and(e){return ph.create(this,e,this._def)}transform(e){return new os({...Ue(this._def),schema:this,typeName:Le.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new wh({...Ue(this._def),innerType:this,defaultValue:n,typeName:Le.ZodDefault})}brand(){return new _I({typeName:Le.ZodBranded,type:this,...Ue(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new u0({...Ue(this._def),innerType:this,catchValue:n,typeName:Le.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Zh.create(this,e)}readonly(){return f0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const RW=/^c[^\s-]{8,}$/i,DW=/^[a-z][a-z0-9]*$/,IW=/^[0-9A-HJKMNP-TV-Z]{26}$/,LW=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,FW=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,jW="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let uw;const BW=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,zW=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,UW=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function VW(t,e){return!!((e==="v4"||!e)&&BW.test(t)||(e==="v6"||!e)&&zW.test(t))}class Ki extends Ke{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==we.string){const s=this._getOrReturnCtx(e);return ke(s,{code:de.invalid_type,expected:we.string,received:s.parsedType}),Be}const r=new qn;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),ke(i,{code:de.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),ke(i,{code:de.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?ke(i,{code:de.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ke(i,{code:de.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")FW.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"email",code:de.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")uw||(uw=new RegExp(jW,"u")),uw.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"emoji",code:de.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")LW.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"uuid",code:de.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")RW.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"cuid",code:de.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")DW.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"cuid2",code:de.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")IW.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"ulid",code:de.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ke(i,{validation:"url",code:de.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"regex",code:de.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),ke(i,{code:de.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),ke(i,{code:de.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),ke(i,{code:de.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?UW(s).test(e.data)||(i=this._getOrReturnCtx(e,i),ke(i,{code:de.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="ip"?VW(e.data,s.version)||(i=this._getOrReturnCtx(e,i),ke(i,{validation:"ip",code:de.invalid_string,message:s.message}),r.dirty()):ct.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:de.invalid_string,...Me.errToObj(r)})}_addCheck(e){return new Ki({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Me.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Me.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Me.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Me.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Me.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Me.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Me.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Me.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Me.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Me.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Me.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Me.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Me.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Me.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Me.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Me.errToObj(n)})}nonempty(e){return this.min(1,Me.errToObj(e))}trim(){return new Ki({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ki({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ki({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ki.create=t=>{var e;return new Ki({checks:[],typeName:Le.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ue(t)})};function HW(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class za extends Ke{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==we.number){const s=this._getOrReturnCtx(e);return ke(s,{code:de.invalid_type,expected:we.number,received:s.parsedType}),Be}let r;const i=new qn;for(const s of this._def.checks)s.kind==="int"?ct.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{code:de.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),ke(r,{code:de.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),ke(r,{code:de.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?HW(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),ke(r,{code:de.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ke(r,{code:de.not_finite,message:s.message}),i.dirty()):ct.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Me.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Me.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Me.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Me.toString(n))}setLimit(e,n,r,i){return new za({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Me.toString(i)}]})}_addCheck(e){return new za({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Me.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Me.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Me.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Me.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Me.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Me.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ct.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}za.create=t=>new za({checks:[],typeName:Le.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ue(t)});class Ua extends Ke{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==we.bigint){const s=this._getOrReturnCtx(e);return ke(s,{code:de.invalid_type,expected:we.bigint,received:s.parsedType}),Be}let r;const i=new qn;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),ke(r,{code:de.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),ke(r,{code:de.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ke(r,{code:de.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ct.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Me.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Me.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Me.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Me.toString(n))}setLimit(e,n,r,i){return new Ua({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Me.toString(i)}]})}_addCheck(e){return new Ua({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Me.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Me.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ua.create=t=>{var e;return new Ua({checks:[],typeName:Le.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ue(t)})};class uh extends Ke{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==we.boolean){const r=this._getOrReturnCtx(e);return ke(r,{code:de.invalid_type,expected:we.boolean,received:r.parsedType}),Be}return lr(e.data)}}uh.create=t=>new uh({typeName:Le.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ue(t)});class Zl extends Ke{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==we.date){const s=this._getOrReturnCtx(e);return ke(s,{code:de.invalid_type,expected:we.date,received:s.parsedType}),Be}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ke(s,{code:de.invalid_date}),Be}const r=new qn;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),ke(i,{code:de.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),ke(i,{code:de.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):ct.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Zl({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Me.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Me.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Zl.create=t=>new Zl({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Le.ZodDate,...Ue(t)});class a0 extends Ke{_parse(e){if(this._getType(e)!==we.symbol){const r=this._getOrReturnCtx(e);return ke(r,{code:de.invalid_type,expected:we.symbol,received:r.parsedType}),Be}return lr(e.data)}}a0.create=t=>new a0({typeName:Le.ZodSymbol,...Ue(t)});class dh extends Ke{_parse(e){if(this._getType(e)!==we.undefined){const r=this._getOrReturnCtx(e);return ke(r,{code:de.invalid_type,expected:we.undefined,received:r.parsedType}),Be}return lr(e.data)}}dh.create=t=>new dh({typeName:Le.ZodUndefined,...Ue(t)});class fh extends Ke{_parse(e){if(this._getType(e)!==we.null){const r=this._getOrReturnCtx(e);return ke(r,{code:de.invalid_type,expected:we.null,received:r.parsedType}),Be}return lr(e.data)}}fh.create=t=>new fh({typeName:Le.ZodNull,...Ue(t)});class ju extends Ke{constructor(){super(...arguments),this._any=!0}_parse(e){return lr(e.data)}}ju.create=t=>new ju({typeName:Le.ZodAny,...Ue(t)});class Rl extends Ke{constructor(){super(...arguments),this._unknown=!0}_parse(e){return lr(e.data)}}Rl.create=t=>new Rl({typeName:Le.ZodUnknown,...Ue(t)});class Ao extends Ke{_parse(e){const n=this._getOrReturnCtx(e);return ke(n,{code:de.invalid_type,expected:we.never,received:n.parsedType}),Be}}Ao.create=t=>new Ao({typeName:Le.ZodNever,...Ue(t)});class l0 extends Ke{_parse(e){if(this._getType(e)!==we.undefined){const r=this._getOrReturnCtx(e);return ke(r,{code:de.invalid_type,expected:we.void,received:r.parsedType}),Be}return lr(e.data)}}l0.create=t=>new l0({typeName:Le.ZodVoid,...Ue(t)});class ns extends Ke{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==we.array)return ke(n,{code:de.invalid_type,expected:we.array,received:n.parsedType}),Be;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(ke(n,{code:o?de.too_big:de.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(ke(n,{code:de.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(ke(n,{code:de.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new Us(n,o,n.path,a)))).then(o=>qn.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new Us(n,o,n.path,a)));return qn.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new ns({...this._def,minLength:{value:e,message:Me.toString(n)}})}max(e,n){return new ns({...this._def,maxLength:{value:e,message:Me.toString(n)}})}length(e,n){return new ns({...this._def,exactLength:{value:e,message:Me.toString(n)}})}nonempty(e){return this.min(1,e)}}ns.create=(t,e)=>new ns({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Le.ZodArray,...Ue(e)});function Cc(t){if(t instanceof zt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=po.create(Cc(r))}return new zt({...t._def,shape:()=>e})}else return t instanceof ns?new ns({...t._def,type:Cc(t.element)}):t instanceof po?po.create(Cc(t.unwrap())):t instanceof ec?ec.create(Cc(t.unwrap())):t instanceof Vs?Vs.create(t.items.map(e=>Cc(e))):t}class zt extends Ke{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ct.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==we.object){const c=this._getOrReturnCtx(e);return ke(c,{code:de.invalid_type,expected:we.object,received:c.parsedType}),Be}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ao&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Us(i,d,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Ao){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(ke(i,{code:de.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Us(i,d,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key;c.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>qn.mergeObjectSync(r,c)):qn.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Me.errToObj,new zt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Me.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new zt({...this._def,unknownKeys:"strip"})}passthrough(){return new zt({...this._def,unknownKeys:"passthrough"})}extend(e){return new zt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new zt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Le.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new zt({...this._def,catchall:e})}pick(e){const n={};return ct.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new zt({...this._def,shape:()=>n})}omit(e){const n={};return ct.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new zt({...this._def,shape:()=>n})}deepPartial(){return Cc(this)}partial(e){const n={};return ct.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new zt({...this._def,shape:()=>n})}required(e){const n={};return ct.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof po;)s=s._def.innerType;n[r]=s}}),new zt({...this._def,shape:()=>n})}keyof(){return kI(ct.objectKeys(this.shape))}}zt.create=(t,e)=>new zt({shape:()=>t,unknownKeys:"strip",catchall:Ao.create(),typeName:Le.ZodObject,...Ue(e)});zt.strictCreate=(t,e)=>new zt({shape:()=>t,unknownKeys:"strict",catchall:Ao.create(),typeName:Le.ZodObject,...Ue(e)});zt.lazycreate=(t,e)=>new zt({shape:t,unknownKeys:"strip",catchall:Ao.create(),typeName:Le.ZodObject,...Ue(e)});class hh extends Ke{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new ts(a.ctx.common.issues));return ke(n,{code:de.invalid_union,unionErrors:o}),Be}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new ts(l));return ke(n,{code:de.invalid_union,unionErrors:a}),Be}}get options(){return this._def.options}}hh.create=(t,e)=>new hh({options:t,typeName:Le.ZodUnion,...Ue(e)});const ig=t=>t instanceof gh?ig(t.schema):t instanceof os?ig(t.innerType()):t instanceof vh?[t.value]:t instanceof Va?t.options:t instanceof yh?Object.keys(t.enum):t instanceof wh?ig(t._def.innerType):t instanceof dh?[void 0]:t instanceof fh?[null]:null;class bv extends Ke{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==we.object)return ke(n,{code:de.invalid_type,expected:we.object,received:n.parsedType}),Be;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(ke(n,{code:de.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Be)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=ig(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new bv({typeName:Le.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...Ue(r)})}}function ax(t,e){const n=ra(t),r=ra(e);if(t===e)return{valid:!0,data:t};if(n===we.object&&r===we.object){const i=ct.objectKeys(e),s=ct.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=ax(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===we.array&&r===we.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=ax(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===we.date&&r===we.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ph extends Ke{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(sx(s)||sx(o))return Be;const a=ax(s.value,o.value);return a.valid?((ox(s)||ox(o))&&n.dirty(),{status:n.value,value:a.data}):(ke(r,{code:de.invalid_intersection_types}),Be)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ph.create=(t,e,n)=>new ph({left:t,right:e,typeName:Le.ZodIntersection,...Ue(n)});class Vs extends Ke{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==we.array)return ke(r,{code:de.invalid_type,expected:we.array,received:r.parsedType}),Be;if(r.data.length<this._def.items.length)return ke(r,{code:de.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Be;!this._def.rest&&r.data.length>this._def.items.length&&(ke(r,{code:de.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Us(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>qn.mergeArray(n,o)):qn.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Vs({...this._def,rest:e})}}Vs.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Vs({items:t,typeName:Le.ZodTuple,rest:null,...Ue(e)})};class mh extends Ke{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==we.object)return ke(r,{code:de.invalid_type,expected:we.object,received:r.parsedType}),Be;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new Us(r,a,r.path,a)),value:o._parse(new Us(r,r.data[a],r.path,a))});return r.common.async?qn.mergeObjectAsync(n,i):qn.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ke?new mh({keyType:e,valueType:n,typeName:Le.ZodRecord,...Ue(r)}):new mh({keyType:Ki.create(),valueType:e,typeName:Le.ZodRecord,...Ue(n)})}}class c0 extends Ke{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==we.map)return ke(r,{code:de.invalid_type,expected:we.map,received:r.parsedType}),Be;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new Us(r,a,r.path,[c,"key"])),value:s._parse(new Us(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Be;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Be;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}c0.create=(t,e,n)=>new c0({valueType:e,keyType:t,typeName:Le.ZodMap,...Ue(n)});class Ql extends Ke{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==we.set)return ke(r,{code:de.invalid_type,expected:we.set,received:r.parsedType}),Be;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(ke(r,{code:de.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(ke(r,{code:de.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Be;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new Us(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Ql({...this._def,minSize:{value:e,message:Me.toString(n)}})}max(e,n){return new Ql({...this._def,maxSize:{value:e,message:Me.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ql.create=(t,e)=>new Ql({valueType:t,minSize:null,maxSize:null,typeName:Le.ZodSet,...Ue(e)});class hu extends Ke{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==we.function)return ke(n,{code:de.invalid_type,expected:we.function,received:n.parsedType}),Be;function r(a,l){return s0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,i0(),lh].filter(c=>!!c),issueData:{code:de.invalid_arguments,argumentsError:l}})}function i(a,l){return s0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,i0(),lh].filter(c=>!!c),issueData:{code:de.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Bu){const a=this;return lr(async function(...l){const c=new ts([]),u=await a._def.args.parseAsync(l,s).catch(h=>{throw c.addIssue(r(l,h)),c}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,s).catch(h=>{throw c.addIssue(i(d,h)),c})})}else{const a=this;return lr(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new ts([r(l,c.error)]);const u=Reflect.apply(o,this,c.data),d=a._def.returns.safeParse(u,s);if(!d.success)throw new ts([i(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new hu({...this._def,args:Vs.create(e).rest(Rl.create())})}returns(e){return new hu({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new hu({args:e||Vs.create([]).rest(Rl.create()),returns:n||Rl.create(),typeName:Le.ZodFunction,...Ue(r)})}}class gh extends Ke{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}gh.create=(t,e)=>new gh({getter:t,typeName:Le.ZodLazy,...Ue(e)});class vh extends Ke{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ke(n,{received:n.data,code:de.invalid_literal,expected:this._def.value}),Be}return{status:"valid",value:e.data}}get value(){return this._def.value}}vh.create=(t,e)=>new vh({value:t,typeName:Le.ZodLiteral,...Ue(e)});function kI(t,e){return new Va({values:t,typeName:Le.ZodEnum,...Ue(e)})}class Va extends Ke{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ke(n,{expected:ct.joinValues(r),received:n.parsedType,code:de.invalid_type}),Be}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return ke(n,{received:n.data,code:de.invalid_enum_value,options:r}),Be}return lr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Va.create(e)}exclude(e){return Va.create(this.options.filter(n=>!e.includes(n)))}}Va.create=kI;class yh extends Ke{_parse(e){const n=ct.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==we.string&&r.parsedType!==we.number){const i=ct.objectValues(n);return ke(r,{expected:ct.joinValues(i),received:r.parsedType,code:de.invalid_type}),Be}if(n.indexOf(e.data)===-1){const i=ct.objectValues(n);return ke(r,{received:r.data,code:de.invalid_enum_value,options:i}),Be}return lr(e.data)}get enum(){return this._def.values}}yh.create=(t,e)=>new yh({values:t,typeName:Le.ZodNativeEnum,...Ue(e)});class Bu extends Ke{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==we.promise&&n.common.async===!1)return ke(n,{code:de.invalid_type,expected:we.promise,received:n.parsedType}),Be;const r=n.parsedType===we.promise?n.data:Promise.resolve(n.data);return lr(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Bu.create=(t,e)=>new Bu({type:t,typeName:Le.ZodPromise,...Ue(e)});class os extends Ke{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Le.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{ke(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ch(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>ch(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);ct.assertNever(i)}}os.create=(t,e,n)=>new os({schema:t,typeName:Le.ZodEffects,effect:e,...Ue(n)});os.createWithPreprocess=(t,e,n)=>new os({schema:e,effect:{type:"preprocess",transform:t},typeName:Le.ZodEffects,...Ue(n)});class po extends Ke{_parse(e){return this._getType(e)===we.undefined?lr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}po.create=(t,e)=>new po({innerType:t,typeName:Le.ZodOptional,...Ue(e)});class ec extends Ke{_parse(e){return this._getType(e)===we.null?lr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ec.create=(t,e)=>new ec({innerType:t,typeName:Le.ZodNullable,...Ue(e)});class wh extends Ke{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===we.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}wh.create=(t,e)=>new wh({innerType:t,typeName:Le.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ue(e)});class u0 extends Ke{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return o0(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ts(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ts(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}u0.create=(t,e)=>new u0({innerType:t,typeName:Le.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ue(e)});class d0 extends Ke{_parse(e){if(this._getType(e)!==we.nan){const r=this._getOrReturnCtx(e);return ke(r,{code:de.invalid_type,expected:we.nan,received:r.parsedType}),Be}return{status:"valid",value:e.data}}}d0.create=t=>new d0({typeName:Le.ZodNaN,...Ue(t)});const WW=Symbol("zod_brand");class _I extends Ke{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Zh extends Ke{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Be:s.status==="dirty"?(n.dirty(),SI(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Be:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Zh({in:e,out:n,typeName:Le.ZodPipeline})}}class f0 extends Ke{_parse(e){const n=this._def.innerType._parse(e);return ch(n)&&(n.value=Object.freeze(n.value)),n}}f0.create=(t,e)=>new f0({innerType:t,typeName:Le.ZodReadonly,...Ue(e)});const CI=(t,e={},n)=>t?ju.create().superRefine((r,i)=>{var s,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,c=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...c,fatal:l})}}):ju.create(),GW={object:zt.lazycreate};var Le;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Le||(Le={}));const KW=(t,e={message:`Input not instance of ${t.name}`})=>CI(n=>n instanceof t,e),EI=Ki.create,AI=za.create,XW=d0.create,YW=Ua.create,PI=uh.create,qW=Zl.create,JW=a0.create,ZW=dh.create,QW=fh.create,eG=ju.create,tG=Rl.create,nG=Ao.create,rG=l0.create,iG=ns.create,sG=zt.create,oG=zt.strictCreate,aG=hh.create,lG=bv.create,cG=ph.create,uG=Vs.create,dG=mh.create,fG=c0.create,hG=Ql.create,pG=hu.create,mG=gh.create,gG=vh.create,vG=Va.create,yG=yh.create,wG=Bu.create,rP=os.create,bG=po.create,xG=ec.create,SG=os.createWithPreprocess,kG=Zh.create,_G=()=>EI().optional(),CG=()=>AI().optional(),EG=()=>PI().optional(),AG={string:t=>Ki.create({...t,coerce:!0}),number:t=>za.create({...t,coerce:!0}),boolean:t=>uh.create({...t,coerce:!0}),bigint:t=>Ua.create({...t,coerce:!0}),date:t=>Zl.create({...t,coerce:!0})},PG=Be;var Sn=Object.freeze({__proto__:null,defaultErrorMap:lh,setErrorMap:NW,getErrorMap:i0,makeIssue:s0,EMPTY_PATH:MW,addIssueToContext:ke,ParseStatus:qn,INVALID:Be,DIRTY:SI,OK:lr,isAborted:sx,isDirty:ox,isValid:ch,isAsync:o0,get util(){return ct},get objectUtil(){return ix},ZodParsedType:we,getParsedType:ra,ZodType:Ke,ZodString:Ki,ZodNumber:za,ZodBigInt:Ua,ZodBoolean:uh,ZodDate:Zl,ZodSymbol:a0,ZodUndefined:dh,ZodNull:fh,ZodAny:ju,ZodUnknown:Rl,ZodNever:Ao,ZodVoid:l0,ZodArray:ns,ZodObject:zt,ZodUnion:hh,ZodDiscriminatedUnion:bv,ZodIntersection:ph,ZodTuple:Vs,ZodRecord:mh,ZodMap:c0,ZodSet:Ql,ZodFunction:hu,ZodLazy:gh,ZodLiteral:vh,ZodEnum:Va,ZodNativeEnum:yh,ZodPromise:Bu,ZodEffects:os,ZodTransformer:os,ZodOptional:po,ZodNullable:ec,ZodDefault:wh,ZodCatch:u0,ZodNaN:d0,BRAND:WW,ZodBranded:_I,ZodPipeline:Zh,ZodReadonly:f0,custom:CI,Schema:Ke,ZodSchema:Ke,late:GW,get ZodFirstPartyTypeKind(){return Le},coerce:AG,any:eG,array:iG,bigint:YW,boolean:PI,date:qW,discriminatedUnion:lG,effect:rP,enum:vG,function:pG,instanceof:KW,intersection:cG,lazy:mG,literal:gG,map:fG,nan:XW,nativeEnum:yG,never:nG,null:QW,nullable:xG,number:AI,object:sG,oboolean:EG,onumber:CG,optional:bG,ostring:_G,pipeline:kG,preprocess:SG,promise:wG,record:dG,set:hG,strictObject:oG,string:EI,symbol:JW,transformer:rP,tuple:uG,undefined:ZW,union:aG,unknown:tG,void:rG,NEVER:PG,ZodIssueCode:de,quotelessJson:OW,ZodError:ts});const TI=["randomize","clean","unchanged"],TG=["switches-and-leds","printer","null"],$G=["printer","null"],lx=Sn.object({language:Sn.enum(bI).catch(OG),editorFontSize:Sn.number().int().min(8).max(64).catch(14),dataOnLoad:Sn.enum(TI).catch("randomize"),devices:Sn.object({keyboardAndScreen:Sn.boolean(),pic:Sn.boolean(),pio:Sn.enum(["switches-and-leds","printer"]).nullable(),handshake:Sn.enum(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:Sn.boolean().catch(!0),executionUnit:Sn.number().min(1).max(500).catch(150),clockSpeed:Sn.number().min(100).max(3e3).catch(1e3),printerSpeed:Sn.number().min(500).max(2e4).catch(5e3),filterBightness:Sn.number().min(0).catch(1),filterContrast:Sn.number().min(0).catch(1),filterInvert:Sn.boolean().catch(!1),filterSaturation:Sn.number().min(0).catch(1)}),Ec=lx.parse({});function OG(){const t=navigator.language.toLowerCase();for(const e of bI)if(t.startsWith(e))return e;return"en"}const el=_D("vonsim-settings",Ec,{getItem(t,e){try{const n=localStorage.getItem(t);return lx.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const r=i=>{if(i.storageArea===localStorage&&i.key===t){let s;try{s=lx.parse(JSON.parse(i.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",r),()=>window==null?void 0:window.removeEventListener("storage",r)}},{getOnInit:!0}),Ar=()=>Y.get(el),$I=()=>td(el),NG=Ee(t=>t(el).language),Yk=()=>Xt(NG),MG=Ee(t=>t(el).editorFontSize),RG=()=>Xt(MG);Ee(t=>t(el).dataOnLoad);const DG=Ee(t=>t(el).devices),IG=()=>Xt(DG);Ee(t=>{const e=t(el);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});const LG=Ee(t=>{const e=t(el);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")}),FG=()=>Xt(LG);function bh(t){const e=t.charCodeAt(0);return B.fitsUnsigned(e,8)?e:null}function qk(t){return B.fitsUnsigned(t,8)?String.fromCharCode(t):null}function OI(t){return jG.at(t)??null}const jG=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","","","","","","","","","","","","","SHY","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];var It,jt;const tt=class tt{constructor(e,n){Oe(this,It,void 0);Oe(this,jt,void 0);Z(this,It,e|0),Z(this,jt,n)}get size(){return A(this,jt)}is8bits(){return A(this,jt)===8}is16bits(){return A(this,jt)===16}get unsigned(){return A(this,It)}get signed(){return A(this,It)<=tt.maxSignedValue(A(this,jt))?A(this,It):A(this,It)-(tt.maxValue(A(this,jt))+1)}get low(){return this.is8bits()?this:tt.fromUnsigned(A(this,It)&tt.maxValue(8),8)}get high(){return this.is8bits()?new tt(0,8):tt.fromUnsigned(A(this,It)>>8&tt.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return tt.fromUnsigned(A(this,It)&~tt.maxValue(8)|e.unsigned,A(this,jt))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return tt.fromUnsigned(A(this,It)&tt.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,jt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,jt)}`);return(A(this,It)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,jt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,jt)}`);return n?tt.fromUnsigned(A(this,It)|1<<e,A(this,jt)):tt.fromUnsigned(A(this,It)&~(1<<e),A(this,jt))}add(e){return e=Number(e),tt.fromUnsigned(A(this,It)+e,A(this,jt))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,It)===A(e,It)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,jt));for(let n=0;n<A(this,jt);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,It).toString(16).padStart(A(this,jt)/4,"0").toUpperCase();case"bin":return A(this,It).toString(2).padStart(A(this,jt),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,jt)===8?qk(A(this,It))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,jt)===8?OI(A(this,It))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,It)}valueOf(){return A(this,It)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=tt.minSignedValue(n)&&e<=tt.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=tt.minValue()&&e<=tt.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=tt.minSignedValue(n)&&e<=tt.maxSignedValue(n)}static fromUnsigned(e,n){if(!tt.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new tt(e,n)}static fromSigned(e,n){if(!tt.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new tt(e+tt.maxValue(n)+1,n):new tt(e,n)}static fromNumber(e,n){return e<0?tt.fromSigned(e,n):tt.fromUnsigned(e,n)}static fromChar(e){const n=bh(e)??-1;return tt.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*tt.maxValue(e));return new tt(n,e)}static zero(e){return new tt(0,e)}};It=new WeakMap,jt=new WeakMap;let B=tt;var qs;const Jo=class Jo{constructor(e){Oe(this,qs,void 0);Z(this,qs,e)}get value(){return A(this,qs).unsigned}get byte(){return A(this,qs)}toString(e=!1){let n=A(this,qs).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,qs).toJSON()}valueOf(){return A(this,qs).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Jo.MIN_ADDRESS&&e<=Jo.MAX_ADDRESS}static from(e){if(e=Number(e),!Jo.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=B.fromUnsigned(e,16);return new Jo(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let r=e.toString(16).padStart(4,"0").toUpperCase();return n&&(r+="h"),r.slice(-3)}};qs=new WeakMap,le(Jo,"MIN_ADDRESS",0),le(Jo,"MAX_ADDRESS",255);let be=Jo;var Js;const Zo=class Zo{constructor(e){Oe(this,Js,void 0);Z(this,Js,e)}get value(){return A(this,Js).unsigned}get byte(){return A(this,Js)}toString(e=!0){let n=A(this,Js).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,Js).toJSON()}valueOf(){return A(this,Js).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Zo.MIN_ADDRESS&&e<=Zo.MAX_ADDRESS}static from(e){if(e=Number(e),!Zo.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=B.fromUnsigned(e,8);return new Zo(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let r=e.toString(16).padStart(2,"0").toUpperCase();return n&&(r+="h"),r}};Js=new WeakMap,le(Zo,"MIN_ADDRESS",0),le(Zo,"MAX_ADDRESS",127);let ri=Zo;function iP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iP(Object(n),!0).forEach(function(r){BG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BG(t,e,n){return e=zG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zG(t){var e=UG(t,"string");return typeof e=="symbol"?e:String(e)}function UG(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const h0=NI({});function NI(t){return e.withOptions=n=>NI(sP(sP({},t),n)),e;function e(n,...r){const i=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n)}=t;let o="";for(let c=0;c<i.length;c++){let u=i[c];s&&(u=u.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\{/g,"{")),o+=u,c<r.length&&(o+=r[c])}const a=o.split(`
`);let l=null;for(const c of a){const u=c.match(/^(\s+)\S+/);if(u){const d=u[1].length;l?l=Math.min(l,d):l=d}}if(l!==null){const c=l;o=a.map(u=>u[0]===" "||u[0]==="	"?u.slice(c):u).join(`
`)}return o.trim().replace(/\\n/g,`
`)}}const VG=be.from(be.MAX_ADDRESS).toString(),HG={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${ri.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:h0`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 10h
      start   db 1
      
              org 20h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"One cycle","end-of-instruction":"One instruction",infinity:"Until stop"},stop:"Stop"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."}},memory:{name:"Memory",cell:t=>`Cell ${be.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${VG}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Disabling animations, you get faster execution.","Only affects animations affected by the simulation speed (like the CPU).","Other animations (like the clock and the printer) will run at their own speed.","Be careful! Very high simulation speeds without animations can saturate the processor."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Report an issue",body:(t,e)=>h0`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"c6121df"}](https://github.com/vonsim/vonsim/commit/${"c6121df"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          ${Object.entries(t).map(([n,r])=>`- **${n}**: ${r}`).join(`
          `)}
          
        </details>
      `}}},WG=be.from(be.MAX_ADDRESS).toString(),GG={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${ri.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"Hay una nueva versin disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Accin invlida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la FileSystem API","no-file":"No hay ningn archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:h0`
      ; Bienvenido a VonSim 8!
      ; Este es un ejemplo de cdigo que suma dos variables z = x + y
      
      org 10h
        x  db 3
        y  db 2
        z  db 0
      org 20h
        mov al, x
        add al, y
        mov z, al
        hlt
      end
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Un ciclo","end-of-instruction":"Una instruccin",infinity:"Hasta el final"},stop:"Detener"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",status:{fetching:"Captacin instruccin...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupcin...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."}},memory:{name:"Memoria",cell:t=>`Celda ${be.format(t)}`,"fix-address":"Fijar direccin","unfix-address":"Desfijar direccin","address-must-be-integer":"El valor de inicio debe ser un nmero entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${WG}.`,"address-increment":"Incrementar direccin (Page Up)","address-decrement":"Decrementar direccin (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuracin",language:{label:"Idioma"},editorFontSize:{label:"Tamao de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qu hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qu dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"Tambin agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Inhabilitando las animaciones, se obtiene ejecucin ms rpida.","Solo afecta a las animaciones afectadas por la velocidad de simulacin (como la CPU).","Otras animaciones (como el reloj y la impresora) se ejecutarn a su propia velocidad.","Cuidado! Velocidades de simulacin muy altas sin animaciones puede saturar el procesador."].join(" ")},speeds:{executionUnit:"Velocidad de simulacin",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresin"},filters:{label:"Filtros",description:"Filtros aplicados a la pgina. til cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturacin"},reset:"Restablecer configuracin"},footer:{documentation:"Documentacin",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>h0`
        <!-- Por favor, describa el problema que est teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Informacin extra (POR FAVOR, NO BORRAR)</summary>

          **Versin**: [${"c6121df"}](https://github.com/ruiz-jose/VonSim8/commit/${"c6121df"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuracin

          ${Object.entries(t).map(([n,r])=>`- **${n}**: ${r}`).join(`
          `)}
          
        </details>
      `}}},xv=Xk({en:HG,es:GG});function Ct(){const t=Yk();return g.useCallback((e,...n)=>xv(t,e,...n),[t])}const KG=1,oP=5e3,ys=new Map,wf=[];function XG(){let t=0;for(const e of ys.keys())e>t&&(t=e);return t+1}function YG(){let t=1/0;for(const e of ys.keys())e<t&&(t=e);return t}function pa(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:r}=t,i=r.duration??oP,s=Number.isFinite(i)?setTimeout(()=>pa({type:"DISMISS_TOAST",toastId:n}),i):null;ys.set(n,{...r,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||pa({type:"DISMISS_TOAST",toastId:n})}}}),ys.size>KG&&pa({type:"DISMISS_TOAST",toastId:YG()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:r}=t,i=ys.get(n);if(!i)return;if(typeof r.duration=="number"){i.timeout!==null&&clearTimeout(i.timeout);const s=r.duration??oP,o=Number.isFinite(s)?setTimeout(()=>pa({type:"DISMISS_TOAST",toastId:n}),s):null;ys.set(n,{...i,...r,timeout:o})}else ys.set(n,{...i,...r});break}case"DISMISS_TOAST":{const{toastId:n}=t,r=ys.get(n);if(!r)return;r.timeout!==null&&clearTimeout(r.timeout),ys.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&wf.length>0){const n=Array.from(ys.entries()).map(([r,i])=>({...i,id:r})).sort((r,i)=>i.id-r.id);for(const r of wf)r(n)}}function kr(t){const e=XG(),n=i=>pa({type:"UPDATE_TOAST",toastId:e,toast:{...i}}),r=()=>pa({type:"DISMISS_TOAST",toastId:e});return pa({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:r,update:n}}function qG(){const[t,e]=g.useState([]);return g.useEffect(()=>(wf.push(e),()=>{const n=wf.indexOf(e);n>-1&&wf.splice(n,1)}),[]),{toastList:t,toast:kr,dismiss:n=>pa({type:"DISMISS_TOAST",toastId:n})}}const Sv=_D("vonsim-program",xv(Ar().language,"editor.example"),void 0,{getOnInit:!0}),JG=()=>Xt(Sv),ZG=()=>Y.get(Sv),QG=Bn.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&Y.set(Sv,this.view.state.doc.toString())}}),Ad="showSaveFilePicker"in window,eK=Ee(null),MI=Ee(""),tK=Ee(t=>t(MI)!==t(Sv));function nK(){const t=Ct(),[e,n]=td(eK),r=Xt(tK),i=MM(MI),s=e&&r,o=g.useCallback(async()=>{if(!Ad){kr({title:t("editor.files.unsupported"),variant:"error"});return}if(!(s&&!confirm(t("editor.files.unsaved"))))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});await d.requestPermission({mode:"readwrite"})==="granted"&&n(d);const p=await(await d.getFile()).text();i(p),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:p}})}catch(d){console.error(d),kr({title:t("editor.files.open-error"),variant:"error"})}},[t,s,n,i]);ho(d=>d.ctrlKey&&d.key==="o",d=>{d.preventDefault(),o()},void 0,[o]);const a=g.useCallback(async d=>{var h,p;if(d.stopPropagation(),d.preventDefault(),!Ad){kr({title:t("editor.files.unsupported"),variant:"error"});return}const f=(p=(h=d.dataTransfer)==null?void 0:h.items)==null?void 0:p[0];if(!(!f||f.kind!=="file")&&!(s&&!confirm(t("editor.files.unsaved"))))try{const m=await f.getAsFileSystemHandle();if(!m)throw new Error("File handle not found");await m.requestPermission({mode:"readwrite"})==="granted"&&n(m);const y=await(await m.getFile()).text();i(y),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:y}})}catch(m){console.error(m),kr({title:t("editor.files.open-error"),variant:"error"})}},[n,i,t,s]);Hm("drop",a,window),Hm("dragover",d=>{d.preventDefault(),d.stopPropagation()},window);const l=g.useCallback(async()=>{if(!Ad){kr({title:t("editor.files.unsupported"),variant:"error"});return}if(s)try{const d=window.codemirror.state.doc.toString(),f=await e.createWritable({keepExistingData:!1});await f.write(d),await f.close(),i(d)}catch(d){console.error(d),kr({title:t("editor.files.save-error"),variant:"error"})}},[t,s,e,i]),c=g.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),f=(e==null?void 0:e.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(Ad)try{const h=await window.showSaveFilePicker({suggestedName:f,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]}),p=await h.requestPermission({mode:"readwrite"});if(p!=="granted")throw new Error(`Permission denied: ${p}`);n(h);const m=await h.createWritable({keepExistingData:!1});await m.write(d),await m.close(),i(d)}catch(h){console.error(h),kr({title:t("editor.files.save-error"),variant:"error"})}else{const h=new Blob([d],{type:"text/plain"}),p=URL.createObjectURL(h),m=document.createElement("a");m.style.display="none",m.href=p,m.download=f,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(p)}},[t,e,n,i]);ho(d=>d.ctrlKey&&d.key==="s",d=>{d.preventDefault(),Ad&&(e?l():c())},void 0,[e,l,c]),ho(d=>d.ctrlKey&&d.shiftKey&&d.key==="S",d=>{d.preventDefault(),c()},void 0,[c]);const u=g.useCallback(d=>{s&&(d.preventDefault(),d.returnValue=t("editor.files.unsaved"))},[t,s]);return Hm("beforeunload",u,window),b.jsxs(SW,{children:[b.jsx(kW,{asChild:!0,children:b.jsxs("button",{className:Ge("flex items-center transition-colors hover:text-white",e&&"text-white"),children:[e?e.name:t("editor.files.no-file"),s&&b.jsx("span",{className:"ml-1 h-2 w-2 rounded-full bg-current"})]})}),b.jsxs(yI,{className:"w-64",align:"start",children:[b.jsxs(rg,{onClick:o,children:[b.jsx("span",{className:"icon-[lucide--file-search-2] mr-2 h-4 w-4"}),t("editor.files.open"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"Ctrl+O"})]}),b.jsxs(rg,{disabled:!s,onClick:l,children:[b.jsx("span",{className:"icon-[lucide--save] mr-2 h-4 w-4"}),t("editor.files.save"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"Ctrl+S"})]}),b.jsxs(rg,{onClick:c,children:[b.jsx("span",{className:"icon-[lucide--save-all] mr-2 h-4 w-4"}),t("editor.files.save-as"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"Ctrl+Shift+S"})]})]})]})}function rK(){const t=Ct(),e=iK();return b.jsxs("footer",{className:"px-2 py-1 text-center text-xs tracking-wider text-stone-500",children:[b.jsx("a",{href:"/VonSim8/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),b.jsx("span",{className:"px-2",children:""}),b.jsx("a",{href:"https://ruiz-jose.github.io/VonSim8/",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),b.jsx("span",{className:"px-2",children:""}),b.jsx("a",{href:e,className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.issue.report")}),b.jsx("span",{className:"px-2 max-sm:hidden",children:""}),b.jsx("br",{className:"sm:hidden"}),b.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:[" Copyright 2017-",new Date().getFullYear(),"  ",t("footer.copyright")]})]})}function iK(){const t=Ct(),[e]=$I(),n=JG();return"https://github.com/ruiz-jose/VonSim8/issues/new?body="+encodeURIComponent(t("footer.issue.body",e,n))}/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const sK={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},oK=sK,aK={prefix:"fas",iconName:"stop",icon:[384,512,[9209],"f04d","M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"]},lK={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},cK={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function uK(t,e,n){return(e=fK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aP(Object(n),!0).forEach(function(r){uK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fK(t){var e=dK(t,"string");return typeof e=="symbol"?e:e+""}const lP=()=>{};let Jk={},RI={},DI=null,II={mark:lP,measure:lP};try{typeof window<"u"&&(Jk=window),typeof document<"u"&&(RI=document),typeof MutationObserver<"u"&&(DI=MutationObserver),typeof performance<"u"&&(II=performance)}catch{}const{userAgent:cP=""}=Jk.navigator||{},Ha=Jk,Dt=RI,uP=DI,em=II;Ha.document;const Do=!!Dt.documentElement&&!!Dt.head&&typeof Dt.addEventListener=="function"&&typeof Dt.createElement=="function",LI=~cP.indexOf("MSIE")||~cP.indexOf("Trident/");var hK=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,pK=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,FI={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},mK={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},jI=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Jn="classic",kv="duotone",gK="sharp",vK="sharp-duotone",BI=[Jn,kv,gK,vK],yK={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},wK={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},bK=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),xK={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},SK=["fak","fa-kit","fakd","fa-kit-duotone"],dP={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},kK=["kit"],_K={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},CK=["fak","fakd"],EK={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},fP={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},tm={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},AK=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],PK=["fak","fa-kit","fakd","fa-kit-duotone"],TK={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},$K={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},OK={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},cx={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},NK=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],ux=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...AK,...NK],MK=["solid","regular","light","thin","duotone","brands"],zI=[1,2,3,4,5,6,7,8,9,10],RK=zI.concat([11,12,13,14,15,16,17,18,19,20]),DK=[...Object.keys(OK),...MK,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",tm.GROUP,tm.SWAP_OPACITY,tm.PRIMARY,tm.SECONDARY].concat(zI.map(t=>"".concat(t,"x"))).concat(RK.map(t=>"w-".concat(t))),IK={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Po="___FONT_AWESOME___",dx=16,UI="fa",VI="svg-inline--fa",tc="data-fa-i2svg",fx="data-fa-pseudo-element",LK="data-fa-pseudo-element-pending",Zk="data-prefix",Qk="data-icon",hP="fontawesome-i2svg",FK="async",jK=["HTML","HEAD","STYLE","SCRIPT"],HI=(()=>{try{return!0}catch{return!1}})();function Qh(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[Jn]}})}const WI=oe({},FI);WI[Jn]=oe(oe(oe(oe({},{"fa-duotone":"duotone"}),FI[Jn]),dP.kit),dP["kit-duotone"]);const BK=Qh(WI),hx=oe({},xK);hx[Jn]=oe(oe(oe(oe({},{duotone:"fad"}),hx[Jn]),fP.kit),fP["kit-duotone"]);const pP=Qh(hx),px=oe({},cx);px[Jn]=oe(oe({},px[Jn]),EK.kit);const e_=Qh(px),mx=oe({},$K);mx[Jn]=oe(oe({},mx[Jn]),_K.kit);Qh(mx);const zK=hK,GI="fa-layers-text",UK=pK,VK=oe({},yK);Qh(VK);const HK=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],dw=mK,WK=[...kK,...DK],bf=Ha.FontAwesomeConfig||{};function GK(t){var e=Dt.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function KK(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}Dt&&typeof Dt.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,r]=e;const i=KK(GK(n));i!=null&&(bf[r]=i)});const KI={styleDefault:"solid",familyDefault:Jn,cssPrefix:UI,replacementClass:VI,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};bf.familyPrefix&&(bf.cssPrefix=bf.familyPrefix);const zu=oe(oe({},KI),bf);zu.autoReplaceSvg||(zu.observeMutations=!1);const Te={};Object.keys(KI).forEach(t=>{Object.defineProperty(Te,t,{enumerable:!0,set:function(e){zu[t]=e,xf.forEach(n=>n(Te))},get:function(){return zu[t]}})});Object.defineProperty(Te,"familyPrefix",{enumerable:!0,set:function(t){zu.cssPrefix=t,xf.forEach(e=>e(Te))},get:function(){return zu.cssPrefix}});Ha.FontAwesomeConfig=Te;const xf=[];function XK(t){return xf.push(t),()=>{xf.splice(xf.indexOf(t),1)}}const zo=dx,Rs={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function YK(t){if(!t||!Do)return;const e=Dt.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=Dt.head.childNodes;let r=null;for(let i=n.length-1;i>-1;i--){const s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return Dt.head.insertBefore(e,r),t}const qK="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function xh(){let t=12,e="";for(;t-- >0;)e+=qK[Math.random()*62|0];return e}function sd(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function t_(t){return t.classList?sd(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function XI(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function JK(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(XI(t[n]),'" '),"").trim()}function _v(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function n_(t){return t.size!==Rs.size||t.x!==Rs.x||t.y!==Rs.y||t.rotate!==Rs.rotate||t.flipX||t.flipY}function ZK(t){let{transform:e,containerWidth:n,iconWidth:r}=t;const i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:c}}function QK(t){let{transform:e,width:n=dx,height:r=dx,startCentered:i=!1}=t,s="";return i&&LI?s+="translate(".concat(e.x/zo-n/2,"em, ").concat(e.y/zo-r/2,"em) "):i?s+="translate(calc(-50% + ".concat(e.x/zo,"em), calc(-50% + ").concat(e.y/zo,"em)) "):s+="translate(".concat(e.x/zo,"em, ").concat(e.y/zo,"em) "),s+="scale(".concat(e.size/zo*(e.flipX?-1:1),", ").concat(e.size/zo*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var eX=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function YI(){const t=UI,e=VI,n=Te.cssPrefix,r=Te.replacementClass;let i=eX;if(n!==t||r!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}let mP=!1;function fw(){Te.autoAddCss&&!mP&&(YK(YI()),mP=!0)}var tX={mixout(){return{dom:{css:YI,insertCss:fw}}},hooks(){return{beforeDOMElementCreation(){fw()},beforeI2svg(){fw()}}}};const To=Ha||{};To[Po]||(To[Po]={});To[Po].styles||(To[Po].styles={});To[Po].hooks||(To[Po].hooks={});To[Po].shims||(To[Po].shims=[]);var Ds=To[Po];const qI=[],JI=function(){Dt.removeEventListener("DOMContentLoaded",JI),p0=1,qI.map(t=>t())};let p0=!1;Do&&(p0=(Dt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Dt.readyState),p0||Dt.addEventListener("DOMContentLoaded",JI));function nX(t){Do&&(p0?setTimeout(t,0):qI.push(t))}function ep(t){const{tag:e,attributes:n={},children:r=[]}=t;return typeof t=="string"?XI(t):"<".concat(e," ").concat(JK(n),">").concat(r.map(ep).join(""),"</").concat(e,">")}function gP(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var rX=function(e,n){return function(r,i,s,o){return e.call(n,r,i,s,o)}},hw=function(e,n,r,i){var s=Object.keys(e),o=s.length,a=i!==void 0?rX(n,i):n,l,c,u;for(r===void 0?(l=1,u=e[s[0]]):(l=0,u=r);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function iX(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function gx(t){const e=iX(t);return e.length===1?e[0].toString(16):null}function sX(t,e){const n=t.length;let r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function vP(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e},{})}function vx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:r=!1}=n,i=vP(e);typeof Ds.hooks.addPack=="function"&&!r?Ds.hooks.addPack(t,vP(e)):Ds.styles[t]=oe(oe({},Ds.styles[t]||{}),i),t==="fas"&&vx("fa",e)}const{styles:Sh,shims:oX}=Ds,ZI=Object.keys(e_),aX=ZI.reduce((t,e)=>(t[e]=Object.keys(e_[e]),t),{});let r_=null,QI={},e3={},t3={},n3={},r3={};function lX(t){return~WK.indexOf(t)}function cX(t,e){const n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!lX(i)?i:null}const i3=()=>{const t=r=>hw(Sh,(i,s,o)=>(i[o]=hw(s,r,{}),i),{});QI=t((r,i,s)=>(i[3]&&(r[i[3]]=s),i[2]&&i[2].filter(a=>typeof a=="number").forEach(a=>{r[a.toString(16)]=s}),r)),e3=t((r,i,s)=>(r[s]=s,i[2]&&i[2].filter(a=>typeof a=="string").forEach(a=>{r[a]=s}),r)),r3=t((r,i,s)=>{const o=i[2];return r[s]=s,o.forEach(a=>{r[a]=s}),r});const e="far"in Sh||Te.autoFetchSvg,n=hw(oX,(r,i)=>{const s=i[0];let o=i[1];const a=i[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(r.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(r.unicodes[s.toString(16)]={prefix:o,iconName:a}),r},{names:{},unicodes:{}});t3=n.names,n3=n.unicodes,r_=Cv(Te.styleDefault,{family:Te.familyDefault})};XK(t=>{r_=Cv(t.styleDefault,{family:Te.familyDefault})});i3();function i_(t,e){return(QI[t]||{})[e]}function uX(t,e){return(e3[t]||{})[e]}function Al(t,e){return(r3[t]||{})[e]}function s3(t){return t3[t]||{prefix:null,iconName:null}}function dX(t){const e=n3[t],n=i_("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Wa(){return r_}const o3=()=>({prefix:null,iconName:null,rest:[]});function fX(t){let e=Jn;const n=ZI.reduce((r,i)=>(r[i]="".concat(Te.cssPrefix,"-").concat(i),r),{});return BI.forEach(r=>{(t.includes(n[r])||t.some(i=>aX[r].includes(i)))&&(e=r)}),e}function Cv(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=Jn}=e,r=BK[n][t];if(n===kv&&!t)return"fad";const i=pP[n][t]||pP[n][r],s=t in Ds.styles?t:null;return i||s||null}function hX(t){let e=[],n=null;return t.forEach(r=>{const i=cX(Te.cssPrefix,r);i?n=i:r&&e.push(r)}),{iconName:n,rest:e}}function yP(t){return t.sort().filter((e,n,r)=>r.indexOf(e)===n)}function Ev(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let r=null;const i=ux.concat(PK),s=yP(t.filter(d=>i.includes(d))),o=yP(t.filter(d=>!ux.includes(d))),a=s.filter(d=>(r=d,!jI.includes(d))),[l=null]=a,c=fX(s),u=oe(oe({},hX(o)),{},{prefix:Cv(l,{family:c})});return oe(oe(oe({},u),vX({values:t,family:c,styles:Sh,config:Te,canonical:u,givenPrefix:r})),pX(n,r,u))}function pX(t,e,n){let{prefix:r,iconName:i}=n;if(t||!r||!i)return{prefix:r,iconName:i};const s=e==="fa"?s3(i):{},o=Al(r,i);return i=s.iconName||o||i,r=s.prefix||r,r==="far"&&!Sh.far&&Sh.fas&&!Te.autoFetchSvg&&(r="fas"),{prefix:r,iconName:i}}const mX=BI.filter(t=>t!==Jn||t!==kv),gX=Object.keys(cx).filter(t=>t!==Jn).map(t=>Object.keys(cx[t])).flat();function vX(t){const{values:e,family:n,canonical:r,givenPrefix:i="",styles:s={},config:o={}}=t,a=n===kv,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=r.prefix==="fad"||r.prefix==="fa-duotone";if(!a&&(l||c||u)&&(r.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(r.prefix="fab"),!r.prefix&&mX.includes(n)&&(Object.keys(s).find(f=>gX.includes(f))||o.autoFetchSvg)){const f=bK.get(n).defaultShortPrefixId;r.prefix=f,r.iconName=Al(r.prefix,r.iconName)||r.iconName}return(r.prefix==="fa"||i==="fa")&&(r.prefix=Wa()||"fas"),r}class yX{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach(s=>{this.definitions[s]=oe(oe({},this.definitions[s]||{}),i[s]),vx(s,i[s]);const o=e_[Jn][s];o&&vx(o,i[s]),i3()})}reset(){this.definitions={}}_pullDefinitions(e,n){const r=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(r).map(i=>{const{prefix:s,iconName:o,icon:a}=r[i],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=a)}),e[s][o]=a}),e}}let wP=[],Xc={};const pu={},wX=Object.keys(pu);function bX(t,e){let{mixoutsTo:n}=e;return wP=t,Xc={},Object.keys(pu).forEach(r=>{wX.indexOf(r)===-1&&delete pu[r]}),wP.forEach(r=>{const i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(s=>{typeof i[s]=="function"&&(n[s]=i[s]),typeof i[s]=="object"&&Object.keys(i[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=i[s][o]})}),r.hooks){const s=r.hooks();Object.keys(s).forEach(o=>{Xc[o]||(Xc[o]=[]),Xc[o].push(s[o])})}r.provides&&r.provides(pu)}),n}function yx(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(Xc[t]||[]).forEach(o=>{e=o.apply(null,[e,...r])}),e}function nc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(Xc[t]||[]).forEach(s=>{s.apply(null,n)})}function Ga(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return pu[t]?pu[t].apply(null,e):void 0}function wx(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||Wa();if(e)return e=Al(n,e)||e,gP(a3.definitions,n,e)||gP(Ds.styles,n,e)}const a3=new yX,xX=()=>{Te.autoReplaceSvg=!1,Te.observeMutations=!1,nc("noAuto")},SX={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Do?(nc("beforeI2svg",t),Ga("pseudoElements2svg",t),Ga("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Te.autoReplaceSvg===!1&&(Te.autoReplaceSvg=!0),Te.observeMutations=!0,nX(()=>{_X({autoReplaceSvgRoot:e}),nc("watch",t)})}},kX={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Al(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=Cv(t[0]);return{prefix:n,iconName:Al(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Te.cssPrefix,"-"))>-1||t.match(zK))){const e=Ev(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||Wa(),iconName:Al(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=Wa();return{prefix:e,iconName:Al(e,t)||t}}}},oi={noAuto:xX,config:Te,dom:SX,parse:kX,library:a3,findIconDefinition:wx,toHtml:ep},_X=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Dt}=t;(Object.keys(Ds.styles).length>0||Te.autoFetchSvg)&&Do&&Te.autoReplaceSvg&&oi.dom.i2svg({node:e})};function Av(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>ep(n))}}),Object.defineProperty(t,"node",{get:function(){if(!Do)return;const n=Dt.createElement("div");return n.innerHTML=t.html,n.children}}),t}function CX(t){let{children:e,main:n,mask:r,attributes:i,styles:s,transform:o}=t;if(n_(o)&&n.found&&!r.found){const{width:a,height:l}=n,c={x:a/l/2,y:.5};i.style=_v(oe(oe({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function EX(t){let{prefix:e,iconName:n,children:r,attributes:i,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(Te.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:oe(oe({},i),{},{id:o}),children:r}]}]}function s_(t){const{icons:{main:e,mask:n},prefix:r,iconName:i,transform:s,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:d=!1}=t,{width:f,height:h}=n.found?n:e,p=CK.includes(r),m=[Te.replacementClass,i?"".concat(Te.cssPrefix,"-").concat(i):""].filter(k=>u.classes.indexOf(k)===-1).filter(k=>k!==""||!!k).concat(u.classes).join(" ");let w={children:[],attributes:oe(oe({},u.attributes),{},{"data-prefix":r,"data-icon":i,class:m,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(h)})};const v=p&&!~u.classes.indexOf("fa-fw")?{width:"".concat(f/h*16*.0625,"em")}:{};d&&(w.attributes[tc]=""),a&&(w.children.push({tag:"title",attributes:{id:w.attributes["aria-labelledby"]||"title-".concat(c||xh())},children:[a]}),delete w.attributes.title);const y=oe(oe({},w),{},{prefix:r,iconName:i,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:oe(oe({},v),u.styles)}),{children:x,attributes:_}=n.found&&e.found?Ga("generateAbstractMask",y)||{children:[],attributes:{}}:Ga("generateAbstractIcon",y)||{children:[],attributes:{}};return y.children=x,y.attributes=_,o?EX(y):CX(y)}function bP(t){const{content:e,width:n,height:r,transform:i,title:s,extra:o,watchable:a=!1}=t,l=oe(oe(oe({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[tc]="");const c=oe({},o.styles);n_(i)&&(c.transform=QK({transform:i,startCentered:!0,width:n,height:r}),c["-webkit-transform"]=c.transform);const u=_v(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function AX(t){const{content:e,title:n,extra:r}=t,i=oe(oe(oe({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=_v(r.styles);s.length>0&&(i.style=s);const o=[];return o.push({tag:"span",attributes:i,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:pw}=Ds;function bx(t){const e=t[0],n=t[1],[r]=t.slice(4);let i=null;return Array.isArray(r)?i={tag:"g",attributes:{class:"".concat(Te.cssPrefix,"-").concat(dw.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Te.cssPrefix,"-").concat(dw.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Te.cssPrefix,"-").concat(dw.PRIMARY),fill:"currentColor",d:r[1]}}]}:i={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:e,height:n,icon:i}}const PX={found:!1,width:512,height:512};function TX(t,e){!HI&&!Te.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function xx(t,e){let n=e;return e==="fa"&&Te.styleDefault!==null&&(e=Wa()),new Promise((r,i)=>{if(n==="fa"){const s=s3(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&pw[e]&&pw[e][t]){const s=pw[e][t];return r(bx(s))}TX(t,e),r(oe(oe({},PX),{},{icon:Te.showMissingIcons&&t?Ga("missingIconAbstract")||{}:{}}))})}const xP=()=>{},Sx=Te.measurePerformance&&em&&em.mark&&em.measure?em:{mark:xP,measure:xP},Zd='FA "6.7.1"',$X=t=>(Sx.mark("".concat(Zd," ").concat(t," begins")),()=>l3(t)),l3=t=>{Sx.mark("".concat(Zd," ").concat(t," ends")),Sx.measure("".concat(Zd," ").concat(t),"".concat(Zd," ").concat(t," begins"),"".concat(Zd," ").concat(t," ends"))};var o_={begin:$X,end:l3};const sg=()=>{};function SP(t){return typeof(t.getAttribute?t.getAttribute(tc):null)=="string"}function OX(t){const e=t.getAttribute?t.getAttribute(Zk):null,n=t.getAttribute?t.getAttribute(Qk):null;return e&&n}function NX(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Te.replacementClass)}function MX(){return Te.autoReplaceSvg===!0?og.replace:og[Te.autoReplaceSvg]||og.replace}function RX(t){return Dt.createElementNS("http://www.w3.org/2000/svg",t)}function DX(t){return Dt.createElement(t)}function c3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?RX:DX}=e;if(typeof t=="string")return Dt.createTextNode(t);const r=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){r.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){r.appendChild(c3(s,{ceFn:n}))}),r}function IX(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const og={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(c3(n),e)}),e.getAttribute(tc)===null&&Te.keepOriginalSource){let n=Dt.createComment(IX(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~t_(e).indexOf(Te.replacementClass))return og.replace(t);const r=new RegExp("".concat(Te.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===Te.replacementClass||a.match(r)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const i=n.map(s=>ep(s)).join(`
`);e.setAttribute(tc,""),e.innerHTML=i}};function kP(t){t()}function u3(t,e){const n=typeof e=="function"?e:sg;if(t.length===0)n();else{let r=kP;Te.mutateApproach===FK&&(r=Ha.requestAnimationFrame||kP),r(()=>{const i=MX(),s=o_.begin("mutate");t.map(i),s(),n()})}}let a_=!1;function d3(){a_=!0}function kx(){a_=!1}let m0=null;function _P(t){if(!uP||!Te.observeMutations)return;const{treeCallback:e=sg,nodeCallback:n=sg,pseudoElementsCallback:r=sg,observeMutationsRoot:i=Dt}=t;m0=new uP(s=>{if(a_)return;const o=Wa();sd(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!SP(a.addedNodes[0])&&(Te.searchPseudoElements&&r(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Te.searchPseudoElements&&r(a.target.parentNode),a.type==="attributes"&&SP(a.target)&&~HK.indexOf(a.attributeName))if(a.attributeName==="class"&&OX(a.target)){const{prefix:l,iconName:c}=Ev(t_(a.target));a.target.setAttribute(Zk,l||o),c&&a.target.setAttribute(Qk,c)}else NX(a.target)&&n(a.target)})}),Do&&m0.observe(i,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function LX(){m0&&m0.disconnect()}function FX(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((r,i)=>{const s=i.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(r[o]=a.join(":").trim()),r},{})),n}function jX(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"";let i=Ev(t_(t));return i.prefix||(i.prefix=Wa()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=uX(i.prefix,t.innerText)||i_(i.prefix,gx(t.innerText))),!i.iconName&&Te.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function BX(t){const e=sd(t.attributes).reduce((i,s)=>(i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i),{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return Te.autoA11y&&(n?e["aria-labelledby"]="".concat(Te.replacementClass,"-title-").concat(r||xh()):(e["aria-hidden"]="true",e.focusable="false")),e}function zX(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Rs,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function CP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:i}=jX(t),s=BX(t),o=yx("parseNodeAttributes",{},t);let a=e.styleParser?FX(t):[];return oe({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:r,transform:Rs,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:a,attributes:s}},o)}const{styles:UX}=Ds;function f3(t){const e=Te.autoReplaceSvg==="nest"?CP(t,{styleParser:!1}):CP(t);return~e.extra.classes.indexOf(GI)?Ga("generateLayersText",t,e):Ga("generateSvgReplacementMutation",t,e)}function VX(){return[...SK,...ux]}function EP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Do)return Promise.resolve();const n=Dt.documentElement.classList,r=u=>n.add("".concat(hP,"-").concat(u)),i=u=>n.remove("".concat(hP,"-").concat(u)),s=Te.autoFetchSvg?VX():jI.concat(Object.keys(UX));s.includes("fa")||s.push("fa");const o=[".".concat(GI,":not([").concat(tc,"])")].concat(s.map(u=>".".concat(u,":not([").concat(tc,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=sd(t.querySelectorAll(o))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();const l=o_.begin("onTree"),c=a.reduce((u,d)=>{try{const f=f3(d);f&&u.push(f)}catch(f){HI||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(f=>{u3(f,()=>{r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),u()})}).catch(f=>{l(),d(f)})})}function HX(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;f3(t).then(n=>{n&&u3([n],e)})}function WX(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(e||{}).icon?e:wx(e||{});let{mask:i}=n;return i&&(i=(i||{}).icon?i:wx(i||{})),t(r,oe(oe({},n),{},{mask:i}))}}const GX=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Rs,symbol:r=!1,mask:i=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!t)return;const{prefix:d,iconName:f,icon:h}=t;return Av(oe({type:"icon"},t),()=>(nc("beforeDOMElementCreation",{iconDefinition:t,params:e}),Te.autoA11y&&(o?c["aria-labelledby"]="".concat(Te.replacementClass,"-title-").concat(a||xh()):(c["aria-hidden"]="true",c.focusable="false")),s_({icons:{main:bx(h),mask:i?bx(i.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:f,transform:oe(oe({},Rs),n),symbol:r,title:o,maskId:s,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var KX={mixout(){return{icon:WX(GX)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=EP,t.nodeCallback=HX,t}}},provides(t){t.i2svg=function(e){const{node:n=Dt,callback:r=()=>{}}=e;return EP(n,r)},t.generateSvgReplacementMutation=function(e,n){const{iconName:r,title:i,titleId:s,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:d}=n;return new Promise((f,h)=>{Promise.all([xx(r,o),c.iconName?xx(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(p=>{let[m,w]=p;f([e,s_({icons:{main:m,mask:w},prefix:o,iconName:r,transform:a,symbol:l,maskId:u,title:i,titleId:s,extra:d,watchable:!0})])}).catch(h)})},t.generateAbstractIcon=function(e){let{children:n,attributes:r,main:i,transform:s,styles:o}=e;const a=_v(o);a.length>0&&(r.style=a);let l;return n_(s)&&(l=Ga("generateAbstractTransformGrouping",{main:i,transform:s,containerWidth:i.width,iconWidth:i.width})),n.push(l||i.icon),{children:n,attributes:r}}}},XX={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return Av({type:"layer"},()=>{nc("beforeDOMElementCreation",{assembler:t,params:e});let r=[];return t(i=>{Array.isArray(i)?i.map(s=>{r=r.concat(s.abstract)}):r=r.concat(i.abstract)}),[{tag:"span",attributes:{class:["".concat(Te.cssPrefix,"-layers"),...n].join(" ")},children:r}]})}}}},YX={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:r=[],attributes:i={},styles:s={}}=e;return Av({type:"counter",content:t},()=>(nc("beforeDOMElementCreation",{content:t,params:e}),AX({content:t.toString(),title:n,extra:{attributes:i,styles:s,classes:["".concat(Te.cssPrefix,"-layers-counter"),...r]}})))}}}},qX={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Rs,title:r=null,classes:i=[],attributes:s={},styles:o={}}=e;return Av({type:"text",content:t},()=>(nc("beforeDOMElementCreation",{content:t,params:e}),bP({content:t,transform:oe(oe({},Rs),n),title:r,extra:{attributes:s,styles:o,classes:["".concat(Te.cssPrefix,"-layers-text"),...i]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:r,transform:i,extra:s}=n;let o=null,a=null;if(LI){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return Te.autoA11y&&!r&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,bP({content:e.innerHTML,width:o,height:a,transform:i,title:r,extra:s,watchable:!0})])}}};const JX=new RegExp('"',"ug"),AP=[1105920,1112319],PP=oe(oe(oe(oe({},{FontAwesome:{normal:"fas",400:"fas"}}),wK),IK),TK),_x=Object.keys(PP).reduce((t,e)=>(t[e.toLowerCase()]=PP[e],t),{}),ZX=Object.keys(_x).reduce((t,e)=>{const n=_x[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function QX(t){const e=t.replace(JX,""),n=sX(e,0),r=n>=AP[0]&&n<=AP[1],i=e.length===2?e[0]===e[1]:!1;return{value:gx(i?e[0]:e),isSecondary:r||i}}function eY(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(e),i=isNaN(r)?"normal":r;return(_x[n]||{})[i]||ZX[n]}function TP(t,e){const n="".concat(LK).concat(e.replace(":","-"));return new Promise((r,i)=>{if(t.getAttribute(n)!==null)return r();const o=sd(t.children).filter(f=>f.getAttribute(fx)===e)[0],a=Ha.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),c=l.match(UK),u=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return t.removeChild(o),r();if(c&&d!=="none"&&d!==""){const f=a.getPropertyValue("content");let h=eY(l,u);const{value:p,isSecondary:m}=QX(f),w=c[0].startsWith("FontAwesome");let v=i_(h,p),y=v;if(w){const x=dX(p);x.iconName&&x.prefix&&(v=x.iconName,h=x.prefix)}if(v&&!m&&(!o||o.getAttribute(Zk)!==h||o.getAttribute(Qk)!==y)){t.setAttribute(n,y),o&&t.removeChild(o);const x=zX(),{extra:_}=x;_.attributes[fx]=e,xx(v,h).then(k=>{const P=s_(oe(oe({},x),{},{icons:{main:k,mask:o3()},prefix:h,iconName:y,extra:_,watchable:!0})),E=Dt.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(E,t.firstChild):t.appendChild(E),E.outerHTML=P.map(C=>ep(C)).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function tY(t){return Promise.all([TP(t,"::before"),TP(t,"::after")])}function nY(t){return t.parentNode!==document.head&&!~jK.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(fx)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function $P(t){if(Do)return new Promise((e,n)=>{const r=sd(t.querySelectorAll("*")).filter(nY).map(tY),i=o_.begin("searchPseudoElements");d3(),Promise.all(r).then(()=>{i(),kx(),e()}).catch(()=>{i(),kx(),n()})})}var rY={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=$P,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=Dt}=e;Te.searchPseudoElements&&$P(n)}}};let OP=!1;var iY={mixout(){return{dom:{unwatch(){d3(),OP=!0}}}},hooks(){return{bootstrap(){_P(yx("mutationObserverCallbacks",{}))},noAuto(){LX()},watch(t){const{observeMutationsRoot:e}=t;OP?kx():_P(yx("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const NP=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,r)=>{const i=r.toLowerCase().split("-"),s=i[0];let o=i.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var sY={mixout(){return{parse:{transform:t=>NP(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=NP(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:r,containerWidth:i,iconWidth:s}=e;const o={transform:"translate(".concat(i/2," 256)")},a="translate(".concat(r.x*32,", ").concat(r.y*32,") "),l="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),c="rotate(".concat(r.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},d={transform:"translate(".concat(s/2*-1," -256)")},f={outer:o,inner:u,path:d};return{tag:"g",attributes:oe({},f.outer),children:[{tag:"g",attributes:oe({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:oe(oe({},n.icon.attributes),f.path)}]}]}}}};const mw={x:0,y:0,width:"100%",height:"100%"};function MP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function oY(t){return t.tag==="g"?t.children:[t]}var aY={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),r=n?Ev(n.split(" ").map(i=>i.trim())):o3();return r.prefix||(r.prefix=Wa()),t.mask=r,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:r,main:i,mask:s,maskId:o,transform:a}=e;const{width:l,icon:c}=i,{width:u,icon:d}=s,f=ZK({transform:a,containerWidth:u,iconWidth:l}),h={tag:"rect",attributes:oe(oe({},mw),{},{fill:"white"})},p=c.children?{children:c.children.map(MP)}:{},m={tag:"g",attributes:oe({},f.inner),children:[MP(oe({tag:c.tag,attributes:oe(oe({},c.attributes),f.path)},p))]},w={tag:"g",attributes:oe({},f.outer),children:[m]},v="mask-".concat(o||xh()),y="clip-".concat(o||xh()),x={tag:"mask",attributes:oe(oe({},mw),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,w]},_={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:oY(d)},x]};return n.push(_,{tag:"rect",attributes:oe({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(v,")")},mw)}),{children:n,attributes:r}}}},lY={provides(t){let e=!1;Ha.matchMedia&&(e=Ha.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],r={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:oe(oe({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=oe(oe({},i),{},{attributeName:"opacity"}),o={tag:"circle",attributes:oe(oe({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:oe(oe({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:oe(oe({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:oe(oe({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:oe(oe({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},cY={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),r=n===null?!1:n===""?!0:n;return t.symbol=r,t}}}},uY=[tX,KX,XX,YX,qX,rY,iY,sY,aY,lY,cY];bX(uY,{mixoutsTo:oi});oi.noAuto;oi.config;oi.library;oi.dom;const Cx=oi.parse;oi.findIconDefinition;oi.toHtml;const dY=oi.icon;oi.layer;oi.text;oi.counter;var h3={exports:{}},fY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hY=fY,pY=hY;function p3(){}function m3(){}m3.resetWarningCache=p3;var mY=function(){function t(r,i,s,o,a,l){if(l!==pY){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:m3,resetWarningCache:p3};return n.PropTypes=n,n};h3.exports=mY();var gY=h3.exports;const qe=sc(gY);function RP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Es(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RP(Object(n),!0).forEach(function(r){Yc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g0(t){"@babel/helpers - typeof";return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g0(t)}function Yc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vY(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function yY(t,e){if(t==null)return{};var n=vY(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ex(t){return wY(t)||bY(t)||xY(t)||SY()}function wY(t){if(Array.isArray(t))return Ax(t)}function bY(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xY(t,e){if(t){if(typeof t=="string")return Ax(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ax(t,e)}}function Ax(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kY(t){var e,n=t.beat,r=t.fade,i=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,d=t.pulse,f=t.fixedWidth,h=t.inverse,p=t.border,m=t.listItem,w=t.flip,v=t.size,y=t.rotation,x=t.pull,_=(e={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":f,"fa-inverse":h,"fa-border":p,"fa-li":m,"fa-flip":w===!0,"fa-flip-horizontal":w==="horizontal"||w==="both","fa-flip-vertical":w==="vertical"||w==="both"},Yc(e,"fa-".concat(v),typeof v<"u"&&v!==null),Yc(e,"fa-rotate-".concat(y),typeof y<"u"&&y!==null&&y!==0),Yc(e,"fa-pull-".concat(x),typeof x<"u"&&x!==null),Yc(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(_).map(function(k){return _[k]?k:null}).filter(function(k){return k})}function _Y(t){return t=t-0,t===t}function g3(t){return _Y(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var CY=["style"];function EY(t){return t.charAt(0).toUpperCase()+t.slice(1)}function AY(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=g3(n.slice(0,r)),s=n.slice(r+1).trim();return i.startsWith("webkit")?e[EY(i)]=s:e[i]=s,e},{})}function v3(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(l){return v3(t,l)}),i=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=AY(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[g3(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=yY(n,CY);return i.attrs.style=Es(Es({},i.attrs.style),o),t.apply(void 0,[e.tag,Es(Es({},i.attrs),a)].concat(Ex(r)))}var y3=!1;try{y3=!0}catch{}function PY(){if(!y3&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function DP(t){if(t&&g0(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(Cx.icon)return Cx.icon(t);if(t===null)return null;if(t&&g0(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function gw(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Yc({},t,e):{}}var IP={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},qc=Bt.forwardRef(function(t,e){var n=Es(Es({},IP),t),r=n.icon,i=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=DP(r),d=gw("classes",[].concat(Ex(kY(n)),Ex((o||"").split(" ")))),f=gw("transform",typeof n.transform=="string"?Cx.transform(n.transform):n.transform),h=gw("mask",DP(i)),p=dY(u,Es(Es(Es(Es({},d),f),h),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!p)return PY("Could not find icon",u),null;var m=p.abstract,w={ref:e};return Object.keys(n).forEach(function(v){IP.hasOwnProperty(v)||(w[v]=n[v])}),TY(m[0],w)});qc.displayName="FontAwesomeIcon";qc.propTypes={beat:qe.bool,border:qe.bool,beatFade:qe.bool,bounce:qe.bool,className:qe.string,fade:qe.bool,flash:qe.bool,mask:qe.oneOfType([qe.object,qe.array,qe.string]),maskId:qe.string,fixedWidth:qe.bool,inverse:qe.bool,flip:qe.oneOf([!0,!1,"horizontal","vertical","both"]),icon:qe.oneOfType([qe.object,qe.array,qe.string]),listItem:qe.bool,pull:qe.oneOf(["right","left"]),pulse:qe.bool,rotation:qe.oneOf([0,90,180,270]),shake:qe.bool,size:qe.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:qe.bool,spinPulse:qe.bool,spinReverse:qe.bool,symbol:qe.oneOfType([qe.bool,qe.string]),title:qe.string,titleId:qe.string,transform:qe.oneOfType([qe.string,qe.object]),swapOpacity:qe.bool};var TY=v3.bind(null,Bt.createElement);function v0(t,e,n){const r=[];for(let i=0;i<t.length;i++)try{const s=e(t[i],i,t);s&&(Array.isArray(s)?s.forEach(o=>o&&r.push(n(o,i,t))):r.push(n(s,i,t)))}catch(s){r.push(n(s,i,t))}return r}class dn{constructor(e,n){le(this,"start");le(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let r=n[0].start,i=n[0].end;for(const s of n)s.start<r&&(r=s.start),s.end>i&&(i=s.end);return new dn(r,i)}toJSON(){return this.range}}const LP=be.from(be.MAX_ADDRESS).toString(),$Y=ri.from(ri.MAX_ADDRESS).toString(),OY={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${be.format(t)} is out of range (max memory address: ${LP}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","instruction-out-of-range":t=>`This instruction would be placed in address ${be.format(t)}, which is outside the memory range (max memory address: ${LP}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${$Y}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction  cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label."}},FP=be.from(be.MAX_ADDRESS).toString(),NY=ri.from(ri.MAX_ADDRESS).toString(),MY={"address-has-code":t=>`La direccin de memoria ${be.format(t)} tiene instrucciones. No se puede usar como direccin de datos.`,"address-out-of-range":t=>`La direccin de memoria ${be.format(t)} est fuera de rango (direccin mxima de memoria: ${FP}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una direccin de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detect una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instruccin.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vaco. El programa debe tener, al menos, una instruccin END.","end-must-be-the-last-statement":"END debe ser la ltima instruccin.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El nico registro vlido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instruccin no espera ningn operando.","expects-one-operand":"Esta instruccin espera un operando.","expects-two-operands":"Esta instruccin espera dos operandos.","expects-word-register":"Esta instruccin espera un registro de 16 bits como su operando.","instruction-out-of-range":t=>`Esta instruccin se colocara en la direccin ${be.format(t)}, la cual se encuentra fuera del rango de memoria (direccin mxima de memoria: ${FP}).`,"invalid-interrupt":t=>`${t} no es un nmero de interrupcin vlido.`,"io-address-out-of-range":t=>`La direccin de E/S ${t} est fuera de rango (direccin mxima de memoria E/S: ${NY}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debera apuntar a una constante EQU o a una instruccin. Quizs quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debera apuntar a una instruccin.`,"missing-org":"No hay ningn ORG antes de esta instruccin, por lo que no se puede determinar su ubicacin en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instruccin sera colocada en la direccin ${be.format(t)}, la cual ya est ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instruccin sera colocada en la direccin ${be.format(t)}, la cual ya est reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamao.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una direccin de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la direccin.","value-out-of-range":(t,e)=>`El nmero ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carcter solo puede contener un carcter.","empty-character":"Los carcter no puede estar vaco.","invalid-binary":"Nmero binario invlido. Solo puede contener ceros y unos.","invalid-decimal":"Nmero decimal invlido. Solo puede contener dgitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carcter inesperado "${t}".`,"unterminated-character":"Carcter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detect una expresin unaria ambigua. Use parntesis para evitar ambigedades.","expected-address-after-org":"Se esperaba una direccin despus de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instruccin termine.","expected-instruction":t=>`Se esperaba una instruccin, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta despus de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instruccin despus de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" despus de la expresin.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" despus de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El nico registro vlido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Parntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},RY=Xk({en:OY,es:MY});class ue extends Error{constructor(n,...r){super();le(this,"code");le(this,"context");le(this,"position");this.code=n,this.context=r,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...r)}at(n){return n&&(n instanceof dn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return RY(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof ue?n:new ue("unexpected-error",n)}}const l_=[[0,B.fromUnsigned(160,8)],[3,B.fromUnsigned(176,8)],[6,B.fromUnsigned(192,8)],[7,B.fromUnsigned(208,8)]],DY=new Set(...l_.map(([t])=>[t,t+1,t+2,t+3]));var ia,wu;class IY{constructor(){le(this,"codeMemory",new Set);le(this,"labels",new Map);Oe(this,ia,!1);Oe(this,wu,!1)}loadStatements(e){if(A(this,ia))throw new Error("Tried to load statements twice");Z(this,ia,!0),this.labels.clear();const n=[];for(const r of e)if("label"in r&&r.label){if(this.labels.has(r.label)){n.push(new ue("duplicated-label",r.label).at(r.position));continue}r.isInstruction()?this.labels.set(r.label,{type:"instruction",address:be.from(0)}):r.directive==="EQU"?this.labels.set(r.label,{type:"EQU",constant:r}):this.labels.set(r.label,{type:r.directive,address:be.from(0)})}return n}computeAddresses(e){if(A(this,wu))throw new Error("Tried to compute addresses twice");Z(this,wu,!0),this.codeMemory.clear();const n=new Set;let r=null;return v0(e,s=>{if(s.isEnd()||s.isDataDirective()&&s.directive==="EQU")return;if(s.isOriginChange()){r=s.newAddress;return}if(r===null)throw new ue("missing-org").at(s);const o=s.length;for(let l=0;l<o;l++){if(!be.inRange(r+l))throw new ue("instruction-out-of-range",r+l).at(s);const c=be.from(r+l);if(n.has(c.value))throw new ue("occupied-address",c).at(s);if(DY.has(c.value))throw new ue("reserved-address",c).at(s);n.add(c.value),s.isInstruction()&&this.codeMemory.add(c.value)}const a=be.from(r);s.setStart(a),s.label&&this.labels.set(s.label,{type:s.isInstruction()?"instruction":s.directive,address:a}),r+=o},ue.from)}labelExists(e){if(!A(this,ia))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,ia))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,ia))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,wu))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof be&&(e=e.value),this.codeMemory.has(e)}}ia=new WeakMap,wu=new WeakMap;const LY=["AL","BL","CL","DL","AH","BH","CH","DH"],w3=["AX","BX","CX","DX","SP"],y0=[...LY,...w3],c_=["DB","DW","EQU"],u_=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],FY=["OFFSET","ORG","BYTE","WORD","PTR","END",...y0,...u_,...c_];class jY{constructor(e,n,r){le(this,"type");le(this,"lexeme");le(this,"position");this.type=e,this.lexeme=n,this.position=r}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class BY{constructor(e){le(this,"scanned",!1);le(this,"tokens",[]);le(this,"position",new dn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new dn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new ue("lexer.unterminated-character").at(this.position);if(bh(this.peek())===null)throw new ue("lexer.only-ascii").at(new dn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new ue("lexer.empty-character").at(this.position);if(n>=2)throw new ue("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new ue("lexer.unterminated-string").at(this.position);if(bh(this.peek())===null)throw new ue("lexer.only-ascii").at(new dn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new ue("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new ue("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)){for(;this.isAlphaNumeric(this.peek());)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();FY.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new ue("lexer.unexpected-character",e).at(this.position)}return this.position=new dn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new jY(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new dn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class On{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}le(On,"numberLiteral",(...e)=>new zY(...e)),le(On,"label",(...e)=>new UY(...e)),le(On,"unaryOperation",(...e)=>new VY(...e)),le(On,"binaryOperation",(...e)=>new HY(...e));class zY extends On{constructor(n,r){super(r);le(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let UY=class extends On{constructor(n,r,i){super(i);le(this,"type","label");this.value=n,this.offset=r}evaluate(n){if(!n.labelExists(this.value))throw new ue("label-not-found",this.value).at(this.position);const r=n.getLabelType(this.value);if((r==="DB"||r==="DW")&&!this.offset)throw new ue("label-should-be-a-number",this.value).at(this.position);if((r==="EQU"||r==="instruction")&&this.offset)throw new ue("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class VY extends On{constructor(n,r,i){super(i);le(this,"type","unary-operation");this.operator=n,this.right=r}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class HY extends On{constructor(n,r,i,s){super(s);le(this,"type","binary-operation");this.left=n,this.operator=r,this.right=i}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class Pv{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var Zs;class b3 extends Pv{constructor(n,r,i){super(i);le(this,"type","data-directive");le(this,"label");le(this,"values");Oe(this,Zs,null);this.values=n,this.label=r}get start(){if(A(this,Zs)===null)throw new Error("Start not set");return A(this,Zs)}setStart(n){if(A(this,Zs)!==null)throw new Error("Start already set");Z(this,Zs,n)}toJSON(){return{...super.toJSON(),...A(this,Zs)?{start:A(this,Zs).toJSON()}:{},directive:this.directive,label:this.label}}}Zs=new WeakMap;var Tl,sa,bu;class WY extends b3{constructor(n,r,i){super(n,r,i);le(this,"directive","EQU");Oe(this,Tl,"not-processed");Oe(this,sa,null);Oe(this,bu,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,bu)??((n=A(this,sa))==null?void 0:n.toJSON())??this.values.map(r=>r.toJSON())}}validate(){if(A(this,sa))throw new Error("Constant already validated");if(!this.label)throw new ue("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new ue("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new ue("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new ue("cannot-be-unassinged","EQU").at(n);Z(this,sa,n.value)}evaluateExpressions(n){if(!A(this,sa))throw new Error("Constant not validated");if(A(this,Tl)==="processed")return A(this,bu);if(A(this,Tl)==="processing")throw new ue("circular-reference").at(this.position);Z(this,Tl,"processed");const r=A(this,sa).evaluate(n);return Z(this,Tl,"processed"),Z(this,bu,r),r}evaluate(n){return this.evaluateExpressions(n)}}Tl=new WeakMap,sa=new WeakMap,bu=new WeakMap;const Qd=Symbol("unassigned");var vr,ji;class GY extends b3{constructor(n,r,i,s){super(r,i,s);le(this,"size");Oe(this,vr,null);Oe(this,ji,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,vr))throw new Error("Data directive not validated");return A(this,vr).length*(this.size/8)}getValues(){if(!A(this,ji))throw new Error("Data directive not evaluated");return A(this,ji)}toJSON(){return{...super.toJSON(),values:(A(this,ji)??A(this,vr)??this.values).map(n=>n===Qd?"?":n.toJSON())}}validate(){if(A(this,vr))throw new Error("Data directive already validated");Z(this,vr,[]);for(const n of this.values)if(n.isUnassigned())A(this,vr).push(Qd);else if(n.isString()){if(this.directive!=="DB")throw new ue("cannot-accept-strings",this.directive).at(n);const r=n.value;for(let i=0;i<r.length;i++){const s=bh(r[i]);if(s===null)throw new Error("Invalid character, should not happen");const o=new dn(n.position.start+i,n.position.start+i+1),a=On.numberLiteral(s,o);A(this,vr).push(a)}}else A(this,vr).push(n.value);if(A(this,vr).length===0)throw new ue("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,vr))throw new Error("Data directive not validated");if(A(this,ji))throw new Error("Data directive already evaluated");Z(this,ji,[]);const r=v0(A(this,vr),i=>{if(i===Qd)A(this,ji).push(Qd);else{const s=i.evaluate(n);if(!B.fits(s,this.size))throw new ue("value-out-of-range",s,this.size).at(this);const o=B.fromNumber(s,this.size);A(this,ji).push(o)}},ue.from);return r.length>0&&Z(this,ji,null),r}}vr=new WeakMap,ji=new WeakMap;class d_{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class KY extends d_{constructor(n,r){super(r);le(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class XY extends d_{constructor(n){super(n);le(this,"type","unassigned")}}class YY extends d_{constructor(n){super(n.position);le(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function qY(t,e,n){const r=dn.merge(t.position,...e.map(i=>i.position));switch(t.type){case"DB":case"DW":return new GY(t.type,e,n,r);case"EQU":return new WY(e,n,r)}}class JY extends Pv{constructor(n){super(n);le(this,"type","end")}}function gl(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var Qs;class uc extends Pv{constructor(n,r,i){super(i);le(this,"type","instruction");le(this,"label");le(this,"operands");Oe(this,Qs,null);this.operands=n,this.label=r}get start(){if(A(this,Qs)===null)throw new Error("Start not set");return A(this,Qs)}setStart(n){if(A(this,Qs)!==null)throw new Error("Start already set");Z(this,Qs,n)}toJSON(){return{...super.toJSON(),...A(this,Qs)?{start:A(this,Qs).toJSON()}:{},instruction:this.instruction,label:this.label}}}Qs=new WeakMap;var Vn,di;class ZY extends uc{constructor(n,r,i,s){super(r,i,s);Oe(this,Vn,null);Oe(this,di,null);this.instruction=n}get length(){if(!A(this,Vn))throw new Error("Instruction not validated");const{mode:n,size:r,out:i,src:s}=A(this,Vn);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&i.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=r/8),o}get operation(){if(!A(this,di))throw new Error("Instruction not evaluated");return A(this,di)}toBytes(){const{mode:n,size:r,out:i,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],r===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(gl(i)&3)<<2,o[0]|=(gl(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(gl(i)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(gl(i)&3)<<2;break}case"mem<-reg":{i.mode==="direct"?(o[0]=32,o.push(i.address.byte.low.unsigned)):o[0]=65,o[0]|=(gl(s)&3)<<2;break}case"mem<-imd":{i.mode==="direct"?(o[0]=44,o.push(i.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),r===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,di)??A(this,Vn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Vn))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ue("expects-two-operands").at(this);const[r,i]=this.operands;if(r.isRegister()){if(i.isRegister()){if(r.size!==i.size)throw new ue("size-mismatch",i.size,r.size).at(this);Z(this,Vn,{mode:"reg<-reg",size:r.size,out:r.value,src:i.value});return}if(i.isDirectAddress()){if(i.size!=="auto"&&i.size!==r.size)throw new ue("size-mismatch",i.size,r.size).at(this);Z(this,Vn,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"direct",address:i.value}});return}if(i.isIndirectAddress()){if(i.size!=="auto"&&i.size!==r.size)throw new ue("size-mismatch",i.size,r.size).at(this);Z(this,Vn,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"indirect"}});return}const s=i.getAsDirectAddress(n);if(s){if(s.size!==r.size)throw new ue("size-mismatch",s.size,r.size).at(this);Z(this,Vn,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"direct",address:s.expression}});return}Z(this,Vn,{mode:"reg<-imd",size:r.size,out:r.value,src:i.value});return}else{let s,o;if(r.isIndirectAddress())s=r.size,o={mode:"indirect"};else if(r.isDirectAddress())s=r.size,o={mode:"direct",address:r.value};else{const a=r.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new ue("destination-cannot-be-immediate").at(r)}if(i.isRegister()){if(s!=="auto"&&s!==i.size)throw new ue("size-mismatch",s,i.size).at(this);Z(this,Vn,{mode:"mem<-reg",size:i.size,out:o,src:i.value});return}if(i.isNumberExpression()){if(i.getAsDirectAddress(n))throw new ue("double-memory-access").at(this);if(s==="auto")throw new ue("unknown-size").at(r);Z(this,Vn,{mode:"mem<-imd",size:s,out:o,src:i.value});return}throw new ue("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,Vn))throw new Error("Instruction not validated");if(A(this,di))throw new Error("Instruction aready evaluated");const{mode:r,size:i,out:s,src:o}=A(this,Vn),a=l=>{const c=l.evaluate(n);if(!be.inRange(c))throw new ue("address-out-of-range",c).at(l);const u=be.from(c);if(n.addressIsReserved(u))throw new ue("address-has-code",u).at(l);return u};switch(r){case"reg<-reg":{Z(this,di,{mode:r,size:i,out:s,src:o});return}case"reg<-mem":{Z(this,di,{mode:r,size:i,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!B.fits(l,i))throw new ue("value-out-of-range",l,i).at(o);const c=B.fromNumber(l,i);Z(this,di,{mode:r,size:i,out:s,src:c});return}case"mem<-reg":{Z(this,di,{mode:r,size:i,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!B.fits(l,i))throw new ue("value-out-of-range",l,i).at(o);const c=B.fromNumber(l,i);Z(this,di,{mode:r,size:i,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return r}}}Vn=new WeakMap,di=new WeakMap;var xs,eo;class QY extends uc{constructor(n,r,i,s){super(r,i,s);Oe(this,xs,null);Oe(this,eo,null);le(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,eo))throw new Error("Instruction not evaluated");return A(this,eo)}toJSON(){return{...super.toJSON(),...A(this,eo)?{value:A(this,eo).toJSON()}:A(this,xs)?{initialValue:A(this,xs).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,xs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ue("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new ue("expects-immediate").at(n);Z(this,xs,n.value)}evaluateExpressions(n){if(!A(this,xs))throw new Error("Instruction not validated");if(A(this,eo))throw new Error("Instruction aready evaluated");const r=A(this,xs).evaluate(n);if(!B.fitsUnsigned(r,8))throw new ue("invalid-interrupt",r).at(A(this,xs));Z(this,eo,B.fromUnsigned(r,8))}}xs=new WeakMap,eo=new WeakMap;var Bi,to,T$;let eq=(T$=class extends uc{constructor(n,r,i,s){super(r,i,s);Oe(this,Bi,null);Oe(this,to,null);this.instruction=n}get length(){if(!A(this,Bi))throw new Error("Instruction not validated");return A(this,Bi).port==="fixed"?2:1}toBytes(){const n=[],r={IN:80,OUT:84};return n[0]=r[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,to)===null)throw new Error("Operation not set");return A(this,to)}toJSON(){return{...super.toJSON(),...A(this,to)??A(this,Bi)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Bi))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ue("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],r=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new ue("expects-ax").at(n);const i=n.value==="AX"?16:8;if(r.isRegister()){if(r.value!=="DX")throw new ue("expects-dx").at(r);Z(this,Bi,{port:"variable",size:i});return}if(r.isNumberExpression()){Z(this,Bi,{port:"fixed",size:i,address:r.value});return}throw new ue("expects-immediate").at(r)}evaluateExpressions(n){if(!A(this,Bi))throw new Error("Instruction not validated");if(A(this,to))throw new Error("Instruction aready evaluated");const r=A(this,Bi);if(r.port==="fixed"){const i=r.address.evaluate(n);if(!ri.inRange(i))throw new ue("io-address-out-of-range",i).at(this);const s=ri.from(i);Z(this,to,{port:"fixed",size:r.size,address:s})}else Z(this,to,{port:"variable",size:r.size})}},Bi=new WeakMap,to=new WeakMap,T$);var no,ro,$$;let tq=($$=class extends uc{constructor(n,r,i,s){super(r,i,s);Oe(this,no,null);Oe(this,ro,null);le(this,"length",2);this.instruction=n}toBytes(){const n=[],r={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(r[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,ro)===null)throw new Error("Instruction not evaluated");return A(this,ro)}toJSON(){return{...super.toJSON(),...A(this,ro)?{address:A(this,ro).toJSON()}:A(this,no)?{jumpTo:A(this,no)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,no))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ue("expects-one-operand").at(this);const r=this.operands[0];if(!r.isNumberExpression()||!r.value.isLabel())throw new ue("expects-label").at(r);const i=r.value.value,s=n.getLabelType(i);if(!s)throw new ue("label-not-found",i).at(r);if(s!=="instruction")throw new ue("label-should-be-an-instruction",i).at(r);Z(this,no,i)}evaluateExpressions(n){if(!A(this,no))throw new Error("Instruction not validated");if(A(this,ro))throw new Error("Instruction aready evaluated");const r=n.getLabelValue(A(this,no));if(!be.inRange(r))throw new ue("address-out-of-range",r).at(this);Z(this,ro,be.from(r))}},no=new WeakMap,ro=new WeakMap,$$);var Ss,O$;let nq=(O$=class extends uc{constructor(n,r,i,s){super(r,i,s);Oe(this,Ss,null);le(this,"length",1);this.instruction=n}toBytes(){let r={PUSH:96,POP:104}[this.instruction];return r|=gl(this.register),new Uint8Array([r])}get register(){if(!A(this,Ss))throw new Error("Instruction not evaluated");return A(this,Ss)}toJSON(){return{...super.toJSON(),...A(this,Ss)?{register:A(this,Ss)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Ss))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ue("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==16)throw new ue("expects-word-register").at(n);Z(this,Ss,n.value)}evaluateExpressions(){if(!A(this,Ss))throw new Error("Instruction not validated")}},Ss=new WeakMap,O$);var Br,ks;class rq extends uc{constructor(n,r,i,s){super(r,i,s);Oe(this,Br,null);Oe(this,ks,null);this.instruction=n}get length(){if(!A(this,Br))throw new Error("Instruction not validated");const{mode:n}=A(this,Br);let r=2;return n==="mem-direct"&&(r+=2),r}toBytes(){const n=[],r={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=r[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[1]=0,n[1]|=gl(this.operation.reg);break}case"mem-direct":{n[1]=192;const i=this.operation.address.byte;n.push(i.low.unsigned),n.push(i.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,ks))throw new Error("Instruction not evaluated");return A(this,ks)}toJSON(){return{...super.toJSON(),...A(this,ks)??A(this,Br)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Br))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ue("expects-one-operand").at(this);const r=this.operands[0];if(r.isRegister()){Z(this,Br,{mode:"reg",size:r.size,reg:r.value});return}if(r.isDirectAddress()){if(r.size==="auto")throw new ue("unknown-size").at(r);Z(this,Br,{mode:"mem-direct",size:r.size,address:r.value});return}if(r.isIndirectAddress()){if(r.size==="auto")throw new ue("unknown-size").at(r);Z(this,Br,{mode:"mem-indirect",size:r.size});return}const i=r.getAsDirectAddress(n);if(i){Z(this,Br,{mode:"mem-direct",size:i.size,address:i.expression});return}throw new ue("destination-cannot-be-immediate").at(r)}evaluateExpressions(n){if(!A(this,Br))throw new Error("Instruction not validated");if(A(this,ks))throw new Error("Instruction aready evaluated");const r=A(this,Br);switch(r.mode){case"reg":{Z(this,ks,{mode:"reg",size:r.size,reg:r.reg});return}case"mem-direct":{const i=r.address.evaluate(n);if(!be.inRange(i))throw new ue("address-out-of-range",i).at(r.address);const s=be.from(i);if(n.addressIsReserved(s))throw new ue("address-has-code",s).at(r.address);Z(this,ks,{mode:"mem-direct",size:r.size,address:s});return}case"mem-indirect":{Z(this,ks,{mode:"mem-indirect",size:r.size});return}default:return r}}}Br=new WeakMap,ks=new WeakMap;var xu;class iq extends uc{constructor(n,r,i,s){super(r,i,s);Oe(this,xu,!1);le(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:24,STI:25,IRET:59,NOP:16,HLT:17};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,xu))throw new Error("Instruction already validated");if(this.operands.length>0)throw new ue("expects-no-operands").at(this);Z(this,xu,!0)}evaluateExpressions(){if(!A(this,xu))throw new Error("Instruction not validated")}}xu=new WeakMap;class Tv{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class sq extends Tv{constructor(n){super(n.position);le(this,"type","register");le(this,"value");this.value=n.type}get size(){return w3.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class oq extends Tv{constructor(n,r){super(r);le(this,"type","indirect-address");le(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class aq extends Tv{constructor(n,r,i){super(i);le(this,"type","direct-address");le(this,"size");this.value=n,r?this.size=r==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class w0 extends Tv{constructor(n){super(n.position);le(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return w0.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,r){if(n.isLabel()){const i=n;if(i.offset)return!1;if(!r.labelExists(i.value))throw new ue("label-not-found",i.value).at(n.position);const s=r.getLabelType(i.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:On.label(i.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const i=w0.recursiveGetAsDirectAddress(n.left,r);return i?{size:i.size,expression:On.binaryOperation(i.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function jP(t,e,n){const r=dn.merge(t.position,...e.map(i=>i.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new iq(t.type,e,n,r);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new ZY(t.type,e,n,r);case"NEG":case"INC":case"DEC":case"NOT":return new rq(t.type,e,n,r);case"PUSH":case"POP":return new nq(t.type,e,n,r);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new tq(t.type,e,n,r);case"IN":case"OUT":return new eq(t.type,e,n,r);case"INT":return new QY(t.type,e,n,r)}}class lq extends Pv{constructor(n,r){super(r);le(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let cq=class{constructor(e){le(this,"tokens");le(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new ue("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new ue("parser.expected-address-after-org")),r=this.parseNumber(n);return this.endOfStatement(),new lq(r,dn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new ue("end-must-be-the-last-statement").at(e);return new JY(e.position)}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...c_);if(e&&!n)throw new ue("parser.unexpected-identifier").at(e);if(!n)return null;const r=(e==null?void 0:e.lexeme.toUpperCase())||null,i=[this.dataDirectiveValue()];for(;this.match("COMMA");)i.push(this.dataDirectiveValue());return this.endOfStatement(),qY(n,i,r)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new KY(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new XY(e.position)}return new YY(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...u_);if(e&&!n){const s=this.peek();throw new ue("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const r=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return jP(n,[],r);const i=[this.instructionOperand()];for(;this.match("COMMA");)i.push(this.instructionOperand());return this.endOfStatement(),jP(n,i,r)}instructionOperand(){if(this.match(...y0)){const n=this.previous();return new sq(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new ue("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...y0)){this.consume("BL",new ue("parser.indirect-addressing-must-be-bx"));const r=this.consume("RIGHT_BRACKET",new ue("parser.expected-literal-after-literal","]","BL"));return new oq(e==null?void 0:e.type,dn.merge(e==null?void 0:e.position,n.position,r.position))}else{const r=this.numberExpression(),i=this.consume("RIGHT_BRACKET",new ue("parser.expected-literal-after-expression","]"));return new aq(r,e==null?void 0:e.type,dn.merge(e==null?void 0:e.position,n.position,i.position))}}else if(e)throw new ue("parser.expected-literal-after-literal","[","PTR");return new w0(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const r=this.match(...e);if(r)return r;throw n||(n=new ue("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new ue("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const r=this.previous(),i=this.parseNumber(r);return On.numberLiteral(i,r.position)}if(this.match("CHARACTER")){const r=this.previous(),i=bh(r.lexeme.slice(1,-1));return On.numberLiteral(i,r.position)}if(this.match("LEFT_PAREN")){const r=this.numberExpression();return this.consume("RIGHT_PAREN",new ue("parser.unclosed-parenthesis")),r}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new ue("parser.expected-label-after-offset").at(this.peek());if(!n)throw new ue("parser.expected-argument").at(this.peek());return On.label(n.lexeme.toUpperCase(),e!==null,dn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new ue("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return On.unaryOperation(e.type==="PLUS"?"+":"-",n,dn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=On.binaryOperation(e,"*",n,dn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),r=this.factorNE();e=On.binaryOperation(e,n.type==="PLUS"?"+":"-",r,dn.merge(e.position,r.position))}return e}numberExpression(){return this.termNE()}};function x3(t){try{const n=new BY(t).scanTokens(),i=new cq(n).parse(),s=i.at(-1);if(!s)throw new ue("empty-program");if(!s.isEnd())throw new ue("end-must-be-the-last-statement").at(s);let o=[];const a=new IY;if(o=a.loadStatements(i),o.length>0)return{success:!1,errors:o};if(o=v0(i,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},ue.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(i),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=v0(i,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},ue.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c}}catch(e){return{success:!1,errors:[ue.from(e)]}}}class fr{constructor(e){le(this,"computer");this.computer=e.computer}}const uq=t=>be.format(t).slice(-2),dq=uq(be.MAX_ADDRESS),fq={"address-has-instruction":t=>`Memory address ${be.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${be.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${be.format(t)} is out of range (max memory address: ${dq}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${ri.format(t)}.`,"no-instruction":t=>`Expected instruction at memory address ${be.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},hq=be.from(be.MAX_ADDRESS).toString(),pq={"address-has-instruction":t=>`La direccin de memoria ${be.format(t)} tiene una instruccin, y no se puede escribir.`,"address-is-reserved":t=>`La direccin de memoria ${be.format(t)} est reservada, y no se puede escribir.`,"address-out-of-range":t=>`La direccin de memoria ${be.format(t)} est fuera de rango (direccin mxima de memoria: ${hq}).`,"device-not-connected":t=>`"${t}" no est conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontr ningn mdulo conectado a la direccin de memoria E/S ${ri.format(t)}.`,"no-instruction":t=>`Se esperaba una instruccin en la direccin de memoria ${be.format(t)} pero no se encontr ninguna.`,"no-program":"No hay ningn programa cargado. Ensambl antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},mq=Xk({en:fq,es:pq});class it extends Error{constructor(n,...r){super();le(this,"code");le(this,"context");this.code=n,this.context=r,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...r)}translate(n){return mq(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof it?n:new it("unexpected-error",n)}}class Io{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,r){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new it("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),r||(yield*e.cpu.getMBR(n))}}var z0,S3;class gq extends Io{constructor(){super(...arguments);Oe(this,z0)}get operation(){return this.statement.operation}*execute(n){const{mode:r,size:i,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:vt(this,z0,S3).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},r==="reg<-reg"||r==="reg<-mem"||r==="reg<-imd")i===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left");else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(r==="reg<-reg"||r==="mem<-reg")i===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(r==="reg<-imd"||r==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),i===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const a=i===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=i===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=B.fromSigned(d,i),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned+l.unsigned+d;f>B.maxValue(i)?(u.CF=!0,c=B.fromUnsigned(f-B.maxValue(i)-1,i)):(u.CF=!1,c=B.fromUnsigned(f,i)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned-l.unsigned-d;f<0?(u.CF=!0,c=B.fromUnsigned(f+B.maxValue(i)+1,i)):(u.CF=!1,c=B.fromUnsigned(f,i)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},r==="reg<-reg"||r==="reg<-mem"||r==="reg<-imd")i===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(i===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}z0=new WeakSet,S3=function(){const{mode:n,out:r,src:i}=this.operation;switch(n){case"reg<-reg":return[r,i];case"reg<-mem":{const s=i.mode==="direct"?i.address.toString():"BL";return[r,`[${s}]`]}case"reg<-imd":return[r,`${i.toString("hex")}h`];case"mem<-reg":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,i];case"mem<-imd":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,`${i.toString("hex")}h`];default:return n}};var U0,k3;class vq extends Io{constructor(){super(...arguments);Oe(this,U0)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:vt(this,U0,k3).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const r=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let i;const s={};switch(this.name){case"NOT":{i=B.fromSigned(~r.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{i=B.fromSigned(-r.signed,this.operation.size),s.CF=!r.isZero(),s.OF=r.signed===B.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",B.fromSigned(1,16));const o=r.unsigned+1;o>B.maxValue(this.operation.size)?(s.CF=!0,i=B.fromUnsigned(o-B.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,i=B.fromUnsigned(o,this.operation.size)),s.OF=r.signed>=0&&i.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",B.fromSigned(1,16));const o=r.unsigned-1;o<0?(s.CF=!0,i=B.fromUnsigned(o+B.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,i=B.fromUnsigned(o,this.operation.size)),s.OF=r.signed<0&&i.signed>=0;break}}if(s.ZF=i.isZero(),s.SF=i.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,i,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}U0=new WeakSet,k3=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BX]"];default:return this.operation}};class yq extends Io{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"id.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var V0,_3;class wq extends Io{constructor(){super(...arguments);Oe(this,V0)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:vt(this,V0,_3).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*n.cpu.updateWordRegister("ri",B.zero(16)),yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new it("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",r=>r.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new it("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",r=>r.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new it("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}V0=new WeakSet,_3=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class bq extends Io{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:this.name==="CALL",ri:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(yield*e.cpu.copyByteRegister("IP.l","id.l"),yield*e.cpu.copyByteRegister("ri.l","IP.l"),!(yield*e.cpu.pushToStack("id.l")))return!1}else yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class xq extends Io{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function vl(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function Sq(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var H0,C3;class kq extends Io{constructor(){super(...arguments);Oe(this,H0)}get operation(){return this.statement.operation}*execute(n){const{mode:r,size:i,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:vt(this,H0,C3).call(this),willUse:{id:r==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?this.operation.mode==="mem<-imd"?yield*super.consumeInstruction(n,"id.l"):yield*super.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l")),this.operation.mode==="reg<-imd"&&(i===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"id.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},r){case"reg<-reg":return i===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(i===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return i===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=Sq(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return yield*n.cpu.copyByteRegister("id.l","ri.l"),yield*n.cpu.setMAR("ri"),!(!(yield*n.cpu.useBus("mem-write"))||i===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return r}}}H0=new WeakSet,C3=function(){const{mode:n,out:r,src:i}=this.operation;switch(n){case"reg<-reg":return[r,i];case"reg<-mem":{const s=i.mode==="direct"?i.address.toString():"BL";return[r,`[${s}]`]}case"reg<-imd":return[r,`${i.toString("hex")}h`];case"mem<-reg":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,i];case"mem<-imd":return[`[${r.mode==="direct"?r.address.toString():"BL"}]`,`${i.toString("hex")}h`];default:return n}};class _q extends Io{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class Cq extends Io{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"?(yield*e.cpu.copyWordRegister(n,"id"),yield*e.cpu.pushToStack()):(yield*e.cpu.popFromStack())?(yield*e.cpu.copyWordRegister("id",n),!0):!1}}function Eq(t){switch(t.instruction){case"MOV":return new kq(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new gq(t);case"NOT":case"NEG":case"INC":case"DEC":return new vq(t);case"IN":case"OUT":return new wq(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new Cq(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new bq(t);case"RET":case"IRET":return new _q(t);case"INT":return new yq(t);case"CLI":case"STI":case"NOP":case"HLT":return new xq(t)}}function Aq(t){for(const[e,n]of l_)if(n.unsigned===t.unsigned)return e;return null}function*Pq(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 3:{yield{type:"cpu:int.3"};break}case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new it("device-not-connected","keyboard")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;const n=yield*t.io.keyboard.readChar();if(yield*t.cpu.updateByteRegister("DL",n),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("DL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new it("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=192;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",B.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const r=t.cpu.getRegister("DL");yield*t.io.screen.sendChar(r),n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",B.fromUnsigned(1,16));const i=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",i,{CF:!1,OF:i.signed<0,SF:i.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",B.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===B.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var Su,ze,fi,yr,oa,Ac,wr,ui,N$;let Tq=(N$=class extends fr{constructor(n){super(n);Oe(this,oa);Oe(this,wr);Oe(this,Su,void 0);Oe(this,ze,void 0);Oe(this,fi,void 0);Oe(this,yr,void 0);n.data==="unchanged"?(Z(this,ze,A(n.previous.cpu,ze)),Z(this,fi,A(n.previous.cpu,fi)),Z(this,yr,A(n.previous.cpu,yr))):(Z(this,ze,{AX:B.zero(16),BX:B.zero(16),CX:B.zero(16),DX:B.zero(16),SP:B.zero(16),IP:B.zero(16),IR:B.zero(8),ri:B.zero(16),id:B.zero(16),left:B.zero(16),right:B.zero(16),result:B.zero(16),FLAGS:B.zero(16)}),Z(this,fi,B.zero(16)),Z(this,yr,B.zero(8))),A(this,ze).SP=B.fromUnsigned(be.MAX_ADDRESS,16),A(this,ze).IP=B.fromUnsigned(32,16),A(this,ze).ri=B.fromUnsigned(0,16),A(this,ze).id=B.fromUnsigned(0,16),vt(this,wr,ui).call(this,"IF",!0),Z(this,Su,new Map);for(const r of n.program.instructions){const i=Eq(r);A(this,Su).set(i.start.value,i)}}*run(){for(;;){const n=A(this,ze).IP,r=Aq(n);if(r!==null){if(!(yield*Pq(this.computer,r)))return}else{const i=A(this,Su).get(n.unsigned);if(!i){yield{type:"cpu:error",error:new it("no-instruction",A(this,ze).IP)};return}if(!(yield*i.execute(this.computer)))return}if(this.getFlag("IF")&&"pic"in this.computer.io&&this.computer.io.pic.isINTRActive()){yield{type:"cpu:cycle.interrupt"};const i=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",B.zero(8)),yield*this.startInterrupt(i)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){return!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l")))||(yield*this.copyByteRegister("id.l","ri.l"),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("IP.l"),!0)}toJSON(){return{...Object.entries(A(this,ze)).reduce((r,[i,s])=>({...r,[i]:s.toJSON()}),{}),MAR:A(this,fi).toJSON(),MBR:A(this,yr).toJSON()}}getRegister(n){const[r,i]=vl(n);return i==="low"?A(this,ze)[r].low:i==="high"?A(this,ze)[r].high:A(this,ze)[r]}*copyByteRegister(n,r){const i=this.getRegister(n);vt(this,oa,Ac).call(this,r,i),yield{type:"cpu:register.copy",size:8,src:n,dest:r}}*copyWordRegister(n,r){const i=this.getRegister(n);vt(this,oa,Ac).call(this,r,i.withHigh(B.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:r}}*updateByteRegister(n,r){r=typeof r=="function"?r(this.getRegister(n)):r,vt(this,oa,Ac).call(this,n,r),yield{type:"cpu:register.update",size:8,register:n,value:r}}*updateWordRegister(n,r){r=typeof r=="function"?r(this.getRegister(n)):r,vt(this,oa,Ac).call(this,n,r),yield{type:"cpu:register.update",size:16,register:n,value:r}}getFlag(n){switch(n){case"CF":return A(this,ze).FLAGS.bit(1);case"ZF":return A(this,ze).FLAGS.bit(0);case"SF":return A(this,ze).FLAGS.bit(3);case"IF":return A(this,ze).FLAGS.bit(4);case"OF":return A(this,ze).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&vt(this,wr,ui).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&vt(this,wr,ui).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&vt(this,wr,ui).call(this,"SF",n.SF),typeof n.IF=="boolean"&&vt(this,wr,ui).call(this,"IF",n.IF),typeof n.OF=="boolean"&&vt(this,wr,ui).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,ze).FLAGS}}*aluExecute(n,r,i){A(this,ze).result=r.is8bits()?A(this,ze).result.withLow(r):r,typeof i.CF=="boolean"&&vt(this,wr,ui).call(this,"CF",i.CF),typeof i.ZF=="boolean"&&vt(this,wr,ui).call(this,"ZF",i.ZF),typeof i.SF=="boolean"&&vt(this,wr,ui).call(this,"SF",i.SF),typeof i.IF=="boolean"&&vt(this,wr,ui).call(this,"IF",i.IF),typeof i.OF=="boolean"&&vt(this,wr,ui).call(this,"OF",i.OF),yield{type:"cpu:alu.execute",operation:n,size:r.size,result:A(this,ze).result,flags:A(this,ze).FLAGS}}*setMAR(n){const r=this.getRegister(n);Z(this,fi,r.withHigh(B.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){vt(this,oa,Ac).call(this,n,A(this,yr)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const r=this.getRegister(n);Z(this,yr,r),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const r=yield*this.computer.memory.read(A(this,fi));return r?(Z(this,yr,r),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,fi),A(this,yr)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const r=yield*this.computer.io.chipSelect(A(this,fi).low);if(!r)return!1;yield{type:"cpu:rd.on"};const i=yield*this.computer.io.read(r);return i?(Z(this,yr,i),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const r=yield*this.computer.io.chipSelect(A(this,fi).low);return!r||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(r,A(this,yr))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!("pic"in this.computer.io))return!1;const r=yield*this.computer.io.pic.handleINTR();return Z(this,yr,r),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let r=this.getRegister("SP");return be.inRange(r.unsigned-1)?be.inRange(r.unsigned-1)?(yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?(r=r.add(-1),yield*this.updateWordRegister("SP",r),!0):!1):(yield{type:"cpu:error",error:new it("stack-overflow")},!1):(yield{type:"cpu:error",error:new it("stack-overflow")},!1)}*popFromStack(n){let r=this.getRegister("SP");return be.inRange(r)?(r=r.add(1),yield*this.updateWordRegister("SP",r),yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),!0):!1):(yield{type:"cpu:error",error:new it("stack-underflow")},!1)}},Su=new WeakMap,ze=new WeakMap,fi=new WeakMap,yr=new WeakMap,oa=new WeakSet,Ac=function(n,r){const[i,s]=vl(n);if(s===null){if(A(this,ze)[i].size!==r.size)throw new TypeError(`Cannot set register ${n} with value ${r} of different size`);A(this,ze)[i]=r}else{if(!r.is8bits())throw new TypeError(`Cannot set register ${n} with value ${r} of different size`);s==="low"?A(this,ze)[i]=A(this,ze)[i].withLow(r):A(this,ze)[i]=A(this,ze)[i].withHigh(r)}},wr=new WeakSet,ui=function(n,r){switch(n){case"CF":A(this,ze).FLAGS=A(this,ze).FLAGS.withBit(1,r);return;case"ZF":A(this,ze).FLAGS=A(this,ze).FLAGS.withBit(0,r);return;case"SF":A(this,ze).FLAGS=A(this,ze).FLAGS.withBit(3,r);return;case"IF":A(this,ze).FLAGS=A(this,ze).FLAGS.withBit(4,r);return;case"OF":A(this,ze).FLAGS=A(this,ze).FLAGS.withBit(2,r);return;default:throw new TypeError(`Invalid flag ${n}`)}},N$),f_=class extends fr{*tick(){yield{type:"clock:tick"},yield*this.computer.io.timer.tick()}toJSON(){return null}},h_=class extends fr{*press(){yield{type:"f10:press"},yield*this.computer.io.pic.interrupt(0)}toJSON(){return null}};var ku,M$;let $v=(M$=class extends fr{constructor(){super(...arguments);Oe(this,ku,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,ku);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},Z(this,ku,null),n}setLastCharRead(n){Z(this,ku,n)}toJSON(){return null}},ku=new WeakMap,M$);var zr,R$;let Ov=(R$=class extends fr{constructor(n){super(n);Oe(this,zr,void 0);n.data==="unchanged"&&"screen"in n.previous.io?Z(this,zr,A(n.previous.io.screen,zr)):Z(this,zr,"")}clear(){return this.sendChar(B.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:Z(this,zr,A(this,zr).slice(0,-1));break;case 10:Z(this,zr,A(this,zr)+`
`);break;case 12:Z(this,zr,"");break;default:Z(this,zr,A(this,zr)+qk(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,zr)}}toJSON(){return A(this,zr)}},zr=new WeakMap,R$);class Nv extends fr{}var Ms,io,br,Zn,zi,_u,ag,Cu,lg;let p_=(Ms=class extends Nv{constructor(n){super(n);Oe(this,_u);Oe(this,Cu);Oe(this,io,void 0);Oe(this,br,void 0);Oe(this,Zn,void 0);Oe(this,zi,void 0);Z(this,io,B.fromUnsigned(255,8)),Z(this,br,B.fromUnsigned(0,8)),Z(this,Zn,B.fromUnsigned(0,8)),n.data==="unchanged"&&"pic"in n.previous.io?Z(this,zi,A(n.previous.io.pic,zi)):n.data==="randomize"?Z(this,zi,new Array(Ms.LINES).fill(B.zero(8)).map(()=>B.random(8))):Z(this,zi,new Array(Ms.LINES).fill(B.zero(8)))}chipSelect(n){const i=4+Ms.LINES;return n=Number(n)-32,n<0||n>=i?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let r;if(n==="EOI")r=B.zero(8);else if(n==="IMR")r=A(this,io);else if(n==="IRR")r=A(this,br);else if(n==="ISR")r=A(this,Zn);else{const i=Number(n.slice(3));r=A(this,zi)[i]}return yield{type:"pic:read.ok",value:r},r}*write(n,r){if(yield{type:"pic:write",register:n,value:r},n==="EOI")A(this,Zn).isZero()||(yield{type:"pic:intr.off"},Z(this,Zn,B.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,Zn)},yield*vt(this,Cu,lg).call(this));else if(n==="IMR")Z(this,io,r),yield{type:"pic:register.update",register:"IMR",value:A(this,io)},yield*vt(this,Cu,lg).call(this);else if(!(n==="IRR"||n==="ISR")){const i=Number(n.slice(3));A(this,zi)[i]=r,yield{type:"pic:register.update",register:n,value:r}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=Ms.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,br).bit(n)||(Z(this,br,A(this,br).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,br)},yield*vt(this,Cu,lg).call(this))}isINTRActive(){return A(this,Zn).isZero()&&vt(this,_u,ag).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,Zn).isZero())throw new Error("INTR line is active but ISR is not zero");const n=vt(this,_u,ag).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");Z(this,Zn,A(this,Zn).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,Zn)},Z(this,br,A(this,br).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,br)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const r=A(this,zi)[n];return yield{type:"pic:int.send",number:r},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},r}toJSON(){return{IMR:A(this,io).toJSON(),IRR:A(this,br).toJSON(),ISR:A(this,Zn).toJSON(),lines:A(this,zi).map(n=>n.toJSON())}}},io=new WeakMap,br=new WeakMap,Zn=new WeakMap,zi=new WeakMap,_u=new WeakSet,ag=function(){for(let n=0;n<Ms.LINES;n++)if(A(this,br).bit(n)&&!A(this,io).bit(n))return n;return null},Cu=new WeakSet,lg=function*(){A(this,Zn).isZero()&&vt(this,_u,ag).call(this)!==null&&(yield{type:"pic:intr.on"})},le(Ms,"LINES",8),Ms);var _s,aa,D$;let m_=(D$=class extends Nv{constructor(n){super(n);Oe(this,_s,void 0);Oe(this,aa,void 0);Z(this,_s,B.zero(8)),Z(this,aa,B.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let r;if(n==="CONT")r=A(this,_s);else if(n==="COMP")r=A(this,aa);else return n;return yield{type:"timer:read.ok",value:r},r}*write(n,r){if(yield{type:"timer:write",register:n,value:r},n==="CONT")Z(this,_s,r);else if(n==="COMP")Z(this,aa,r);else return n;yield{type:"timer:register.update",register:n,value:r},yield{type:"timer:write.ok"}}*tick(){const n=A(this,_s).unsigned===B.maxValue(8)?B.zero(8):A(this,_s).add(1);Z(this,_s,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,aa).equals(n)?(yield{type:"timer:int.on"},yield*this.computer.io.pic.interrupt(1)):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,_s).toJSON(),COMP:A(this,aa).toJSON()}}},_s=new WeakMap,aa=new WeakMap,D$);var Cs,Qn,I$;let $q=(I$=class extends Nv{constructor(n){super(n);Oe(this,Cs,void 0);Oe(this,Qn,void 0);n.data==="unchanged"&&"handshake"in n.previous.io?Z(this,Cs,B.zero(8)):n.data==="randomize"?Z(this,Cs,B.random(8)):Z(this,Cs,B.zero(8)),Z(this,Qn,B.zero(8))}get interrupts(){return A(this,Qn).bit(7)}get DATA(){return A(this,Cs)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let r;if(n==="DATA")r=A(this,Cs);else if(n==="STATE")r=A(this,Qn);else return n;return yield{type:"handshake:read.ok",value:r},r}*write(n,r){if(yield{type:"handshake:write",register:n,value:r},n==="DATA")Z(this,Cs,r),yield{type:"handshake:register.update",register:n,value:r},yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1);else if(n==="STATE")r=r.withBit(0,this.computer.io.printer.busy),Z(this,Qn,r),yield{type:"handshake:register.update",register:n,value:r},A(this,Qn).bit(1)?(yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1),Z(this,Qn,A(this,Qn).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,Qn)}):this.interrupts&&!this.computer.io.printer.busy?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){Z(this,Qn,A(this,Qn).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,Qn)},this.interrupts&&!n?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,Cs).toJSON(),STATE:A(this,Qn).toJSON()}}},Cs=new WeakMap,Qn=new WeakMap,I$);var hi,so,la;const Af=class Af extends fr{constructor(n){super(n);Oe(this,hi,void 0);Oe(this,so,void 0);Oe(this,la,!1);this.computer=n.computer,n.data==="unchanged"&&"printer"in n.previous.io?(Z(this,hi,A(n.previous.io.printer,hi)),Z(this,so,A(n.previous.io.printer,so)),Z(this,la,A(n.previous.io.printer,la))):(Z(this,hi,[]),Z(this,so,""),Z(this,la,!1))}get busy(){return A(this,hi).length>=Af.BUFFER_SIZE}*setStrobe(n){const r=A(this,la);if(r===n)return;if(Z(this,la,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!r&&!this.busy){const s=yield*this.readData();A(this,hi).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){Z(this,so,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,hi).length===0)return;const[n,...r]=A(this,hi);if(Z(this,hi,r),yield{type:"printer:buffer.pop",char:n},r.length===Af.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const i=qk(n.unsigned);Z(this,so,A(this,so)+i),yield{type:"printer:paper.print",char:i}}}toJSON(){return{paper:A(this,so),buffer:[...A(this,hi).map(n=>n.unsigned)]}}};hi=new WeakMap,so=new WeakMap,la=new WeakMap,le(Af,"BUFFER_SIZE",5);let b0=Af,Oq=class extends b0{*readData(){const e=this.computer.io.handshake.DATA;return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.handshake.updateBusy(e)}},Nq=class extends fr{constructor(n){super(n);le(this,"clock");le(this,"f10");le(this,"keyboard");le(this,"printer");le(this,"screen");le(this,"handshake");le(this,"pic");le(this,"timer");this.clock=new f_(n),this.f10=new h_(n),this.keyboard=new $v(n),this.printer=new Oq(n),this.screen=new Ov(n),this.handshake=new $q(n),this.pic=new p_(n),this.timer=new m_(n)}*chipSelect(n){const r=this.handshake.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:r};const i=this.pic.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:i};const s=this.timer.chipSelect(n);return s?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:s}):(yield{type:"bus:io.error",error:new it("io-memory-not-connected",n)},null)}*read(n){const{chip:r,register:i}=n;return r==="handshake"?yield*this.handshake.read(i):r==="pic"?yield*this.pic.read(i):r==="timer"?yield*this.timer.read(i):(yield{type:"bus:io.error",error:new it("device-not-connected",r)},null)}*write(n,r){const{chip:i,register:s}=n;return i==="handshake"?(yield*this.handshake.write(s,r),!0):i==="pic"?(yield*this.pic.write(s,r),!0):i==="timer"?(yield*this.timer.write(s,r),!0):(yield{type:"bus:io.error",error:new it("device-not-connected",i)},!1)}toJSON(){return{clock:this.clock.toJSON(),f10:this.f10.toJSON(),keyboard:this.keyboard.toJSON(),printer:this.printer.toJSON(),screen:this.screen.toJSON(),handshake:this.handshake.toJSON(),pic:this.pic.toJSON(),timer:this.timer.toJSON()}}};class Mq extends fr{constructor(n){super(n);le(this,"keyboard");le(this,"screen");this.keyboard=new $v(n),this.screen=new Ov(n)}*chipSelect(n){return yield{type:"bus:io.error",error:new it("io-memory-not-connected",n)},null}*read(n){return yield{type:"bus:io.error",error:new it("device-not-connected",n.chip)},null}*write(n){return yield{type:"bus:io.error",error:new it("device-not-connected",n.chip)},!1}toJSON(){return{keyboard:this.keyboard.toJSON(),screen:this.screen.toJSON()}}}class Rq extends fr{*chipSelect(e){return yield{type:"bus:io.error",error:new it("io-memory-not-connected",e)},null}*read(e){return yield{type:"bus:io.error",error:new it("device-not-connected",e.chip)},null}*write(e){return yield{type:"bus:io.error",error:new it("device-not-connected",e.chip)},!1}toJSON(){return{}}}class E3 extends Nv{constructor(n){super(n);le(this,"PA");le(this,"PB");le(this,"CA");le(this,"CB");n.data==="unchanged"&&"pio"in n.previous.io?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=B.random(8),this.PB=B.random(8),this.CA=B.random(8),this.CB=B.random(8)):(this.PA=B.zero(8),this.PB=B.zero(8),this.CA=B.zero(8),this.CB=B.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let r;if(n==="PA")r=this.PA;else if(n==="PB")r=this.PB;else if(n==="CA")r=this.CA;else if(n==="CB")r=this.CB;else return n;return yield{type:"pio:read.ok",value:r},r}*write(n,r){if(yield{type:"pio:write",register:n,value:r},n==="PA")this.PA=r;else if(n==="PB")this.PB=r;else if(n==="CA")this.CA=r;else if(n==="CB")this.CB=r;else return n;yield{type:"pio:register.update",register:n,value:r},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,r){return n==="A"?this.CA.bit(r)?"input":"output":this.CB.bit(r)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}}let Dq=class extends E3{constructor(e){super(e),this.PA=this.PA.withBit(1,!1)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return B.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const r=this.CA.unsigned,i=this.computer.io.printer.busy;n=n&~r,this.line("A",0)==="input"&&i&&(n|=1),n!==this.PA.unsigned&&(this.PA=B.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.computer.io.printer.setStrobe(this.PA.bit(1)))}},Iq=class extends b0{*readData(){const e=this.computer.io.pio.readData();return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.pio.updatePort("A")}};class Lq extends fr{constructor(n){super(n);le(this,"clock");le(this,"f10");le(this,"keyboard");le(this,"printer");le(this,"screen");le(this,"pic");le(this,"pio");le(this,"timer");this.clock=new f_(n),this.f10=new h_(n),this.keyboard=new $v(n),this.printer=new Iq(n),this.screen=new Ov(n),this.pic=new p_(n),this.pio=new Dq(n),this.timer=new m_(n)}*chipSelect(n){const r=this.pic.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const i=this.pio.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i};const s=this.timer.chipSelect(n);return s?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:s}):(yield{type:"bus:io.error",error:new it("io-memory-not-connected",n)},null)}*read(n){const{chip:r,register:i}=n;return r==="pic"?yield*this.pic.read(i):r==="pio"?yield*this.pio.read(i):r==="timer"?yield*this.timer.read(i):(yield{type:"bus:io.error",error:new it("device-not-connected",r)},null)}*write(n,r){const{chip:i,register:s}=n;return i==="pic"?(yield*this.pic.write(s,r),!0):i==="pio"?(yield*this.pio.write(s,r),!0):i==="timer"?(yield*this.timer.write(s,r),!0):(yield{type:"bus:io.error",error:new it("device-not-connected",i)},!1)}toJSON(){return{clock:this.clock.toJSON(),f10:this.f10.toJSON(),keyboard:this.keyboard.toJSON(),printer:this.printer.toJSON(),screen:this.screen.toJSON(),pic:this.pic.toJSON(),pio:this.pio.toJSON(),timer:this.timer.toJSON()}}}var oo,L$;let Fq=(L$=class extends fr{constructor(n){super(n);Oe(this,oo,void 0);n.data==="unchanged"&&"leds"in n.previous.io?Z(this,oo,A(n.previous.io.leds,oo)):n.data==="randomize"?Z(this,oo,B.random(8)):Z(this,oo,B.zero(8))}get state(){return A(this,oo)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,oo).toJSON()}},oo=new WeakMap,L$),jq=class extends E3{*updatePort(e){if(e==="A"){const n=this.computer.io.switches.state.unsigned;let r=this.PA.unsigned;const i=this.CA.unsigned;r=n&i|r&~i,r!==this.PA.unsigned&&(this.PA=B.fromUnsigned(r,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const r=this.CB.unsigned;n=n&~r,yield*this.computer.io.leds.update(B.fromUnsigned(n,8))}}};var pi,F$;let Bq=(F$=class extends fr{constructor(n){super(n);Oe(this,pi,void 0);this.computer=n.computer,n.data==="unchanged"&&"switches"in n.previous.io?Z(this,pi,A(n.previous.io.switches,pi)):n.data==="randomize"?Z(this,pi,B.random(8)):Z(this,pi,B.zero(8))}get state(){return A(this,pi)}*toggle(n){Z(this,pi,A(this,pi).withBit(n,!A(this,pi).bit(n))),yield{type:"switches:toggle",index:n},yield*this.computer.io.pio.updatePort("A")}toJSON(){return A(this,pi).toJSON()}},pi=new WeakMap,F$);class zq extends fr{constructor(n){super(n);le(this,"clock");le(this,"f10");le(this,"keyboard");le(this,"leds");le(this,"screen");le(this,"switches");le(this,"pic");le(this,"pio");le(this,"timer");this.clock=new f_(n),this.f10=new h_(n),this.keyboard=new $v(n),this.leds=new Fq(n),this.screen=new Ov(n),this.switches=new Bq(n),this.pic=new p_(n),this.pio=new jq(n),this.timer=new m_(n)}*chipSelect(n){const r=this.pic.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const i=this.pio.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i};const s=this.timer.chipSelect(n);return s?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:s}):(yield{type:"bus:io.error",error:new it("io-memory-not-connected",n)},null)}*read(n){const{chip:r,register:i}=n;return r==="pic"?yield*this.pic.read(i):r==="pio"?yield*this.pio.read(i):r==="timer"?yield*this.timer.read(i):(yield{type:"bus:io.error",error:new it("device-not-connected",r)},null)}*write(n,r){const{chip:i,register:s}=n;return i==="pic"?(yield*this.pic.write(s,r),!0):i==="pio"?(yield*this.pio.write(s,r),!0):i==="timer"?(yield*this.timer.write(s,r),!0):(yield{type:"bus:io.error",error:new it("device-not-connected",i)},!1)}toJSON(){return{clock:this.clock.toJSON(),f10:this.f10.toJSON(),keyboard:this.keyboard.toJSON(),leds:this.leds.toJSON(),screen:this.screen.toJSON(),switches:this.switches.toJSON(),pic:this.pic.toJSON(),pio:this.pio.toJSON(),timer:this.timer.toJSON()}}}var Il,xr,Eu,ao;let Uq=(Il=class extends fr{constructor(n){super(n);Oe(this,xr,void 0);Oe(this,Eu,void 0);Oe(this,ao,void 0);n.data==="unchanged"?Z(this,xr,A(n.previous.memory,xr)):n.data==="randomize"?Z(this,xr,new Uint8Array(Il.SIZE).map(()=>B.zero(8).unsigned)):Z(this,xr,new Uint8Array(Il.SIZE)),Z(this,ao,new Set);for(const[r,i]of l_){const s=r;A(this,xr).set(i.toUint8Array(),s),A(this,xr).set(B.zero(16).toUint8Array(),s+2),A(this,ao).add(s),A(this,ao).add(s+1),A(this,ao).add(s+2),A(this,ao).add(s+3)}for(const r of n.program.data){let i=r.start.value;for(const s of r.getValues())s!==Qd&&A(this,xr).set(s.toUint8Array(),i),i+=r.size/8}Z(this,Eu,new Set);for(const r of n.program.instructions){A(this,xr).set(r.toBytes(),r.start.value);for(let i=0;i<r.length;i++)A(this,Eu).add(r.start.value+i)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!be.inRange(n))return yield{type:"memory:read.error",error:new it("address-out-of-range",n)},null;const r=B.fromUnsigned(A(this,xr).at(n),8);return yield{type:"memory:read.ok",address:be.from(n),value:r},r}*write(n,r){return n=Number(n),yield{type:"memory:write",address:n,value:r},be.inRange(n)?A(this,Eu).has(n)?(yield{type:"memory:write.error",error:new it("address-has-instruction",n)},!1):A(this,ao).has(n)?(yield{type:"memory:write.error",error:new it("address-is-reserved",n)},!1):(A(this,xr).set([r.unsigned],n),yield{type:"memory:write.ok",address:be.from(n),value:r},!0):(yield{type:"memory:write.error",error:new it("address-out-of-range",n)},!1)}toJSON(){return[...A(this,xr)]}},xr=new WeakMap,Eu=new WeakMap,ao=new WeakMap,le(Il,"SIZE",be.MAX_ADDRESS+1),Il);class BP{constructor(e){le(this,"cpu");le(this,"memory");le(this,"io");const n={computer:this,...e};switch(this.cpu=new Tq(n),this.memory=new Uq(n),e.devices){case"no-devices":{this.io=new Rq(n);break}case"keyboard-and-screen":{this.io=new Mq(n);break}case"pio-switches-and-leds":{this.io=new zq(n);break}case"pio-printer":{this.io=new Lq(n);break}case"handshake":{this.io=new Nq(n);break}default:{const r=e.devices;throw new Error(`Unknown devices configuration: ${r}`)}}}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var ft;class Vq{constructor(){Oe(this,ft,new BP({program:{data:[],instructions:[]},devices:"pio-switches-and-leds",data:"clean"}))}loadProgram(e){Z(this,ft,new BP({...e,previous:A(this,ft)}))}getComputerState(){var e;return((e=A(this,ft))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,ft))throw new it("no-program");return A(this,ft).cpu.run()}get devices(){if(!A(this,ft))throw new Error("No computer loaded!");return{clock:{connected:()=>"clock"in A(this,ft).io,tick:()=>{if("clock"in A(this,ft).io)return A(this,ft).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,ft).io,press:()=>{if("f10"in A(this,ft).io)return A(this,ft).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,ft).io,readChar:e=>{if("keyboard"in A(this,ft).io)return A(this,ft).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,ft).io},printer:{connected:()=>"printer"in A(this,ft).io,clear:()=>{if("printer"in A(this,ft).io)return A(this,ft).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if("printer"in A(this,ft).io)return A(this,ft).io.printer.print();console.warn("No printer connected to the computer!")}},screen:{connected:()=>"screen"in A(this,ft).io,clear:()=>{if("screen"in A(this,ft).io)return A(this,ft).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,ft).io,toggle:e=>{if("switches"in A(this,ft).io)return A(this,ft).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}ft=new WeakMap;const A3=new Wh;function P3(t){window.codemirror&&window.codemirror.dispatch({effects:A3.reconfigure(Qe.readOnly.of(t))})}const Px=Ye.define(),Hq=dr.define({create(){return Je.none},update(t,e){let n=t.map(e.changes);for(const r of e.effects)r.is(Px)&&(n=Je.none,r.value!==null&&(n=n.update({add:[Wq.range(r.value)]})));return n},provide:t=>$e.decorations.from(t)}),Wq=Je.line({class:"!bg-mantis-400/10"});function T3(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:Px.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:Px.of(e)})}}const $3=tu.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||tu,vw=Ee(B.zero(16)),yw=Ee(B.zero(16)),ww=Ee(B.zero(16)),bw=Ee(B.zero(16)),xw=Ee(B.zero(16)),Sw=Ee(B.zero(16)),Gq=Ee(B.zero(8)),kw=Ee(B.zero(16)),_w=Ee(B.zero(16)),Cw=Ee(B.zero(16)),Ew=Ee(B.zero(16)),Aw=Ee(B.zero(16)),Pw=Ee(B.zero(16)),O3=Ee(B.zero(16)),x0=Ee(B.zero(8)),tn=Ee(null),ai=t=>Ee(e=>e(t).low,(e,n,r)=>{const i=e(t),s=typeof r=="function"?r(i.low):r;n(t,i.withLow(s))}),li=t=>Ee(e=>e(t).high,(e,n,r)=>{const i=e(t),s=typeof r=="function"?r(i.high):r;n(t,i.withHigh(s))}),Tt={AX:vw,AL:ai(vw),AH:li(vw),BX:yw,BL:ai(yw),BH:li(yw),CX:ww,CL:ai(ww),CH:li(ww),DX:bw,DL:ai(bw),DH:li(bw),SP:xw,"SP.l":ai(xw),"SP.h":li(xw),IP:Sw,"IP.l":ai(Sw),"IP.h":li(Sw),IR:Gq,ri:kw,"ri.l":ai(kw),"ri.h":li(kw),id:_w,"id.l":ai(_w),"id.h":li(_w),left:Cw,"left.l":ai(Cw),"left.h":li(Cw),right:Ew,"right.l":ai(Ew),"right.h":li(Ew),result:Aw,"result.l":ai(Aw),"result.h":li(Aw),FLAGS:Pw,"FLAGS.l":ai(Pw),"FLAGS.h":li(Pw),MAR:O3,MBR:x0},ws=Ee({phase:"stopped"}),N3=Ee("ADD");function Kq(t){Y.set(Tt.AX,B.fromUnsigned(t.cpu.AX,16)),Y.set(Tt.BX,B.fromUnsigned(t.cpu.BX,16)),Y.set(Tt.CX,B.fromUnsigned(t.cpu.CX,16)),Y.set(Tt.DX,B.fromUnsigned(t.cpu.DX,16)),Y.set(Tt.SP,B.fromUnsigned(t.cpu.SP,16)),Y.set(Tt.IP,B.fromUnsigned(t.cpu.IP,16)),Y.set(Tt.IR,B.fromUnsigned(t.cpu.IR,8)),Y.set(Tt.ri,B.fromUnsigned(t.cpu.ri,16)),Y.set(Tt.id,B.fromUnsigned(t.cpu.id,16)),Y.set(Tt.left,B.fromUnsigned(t.cpu.left,16)),Y.set(Tt.right,B.fromUnsigned(t.cpu.right,16)),Y.set(Tt.result,B.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,Y.set(Tt.FLAGS,B.fromUnsigned(t.cpu.FLAGS,16)),Y.set(Tt.MAR,B.fromUnsigned(t.cpu.MAR,16)),Y.set(Tt.MBR,B.fromUnsigned(t.cpu.MBR,8)),Y.set(ws,{phase:"stopped"})}var Xq=Object.defineProperty,Yq=(t,e)=>{for(var n in e)Xq(t,n,{get:e[n],enumerable:!0})},as={};Yq(as,{assign:()=>Qq,colors:()=>Ta,createStringInterpolator:()=>S_,skipAnimation:()=>B3,to:()=>j3,willAdvance:()=>k_});var g_=np(),We=t=>tp(t,g_),v_=np();We.write=t=>tp(t,v_);var Mv=np();We.onStart=t=>tp(t,Mv);var y_=np();We.onFrame=t=>tp(t,y_);var w_=np();We.onFinish=t=>tp(t,w_);var mu=[];We.setTimeout=(t,e)=>{const n=We.now()+e,r=()=>{const s=mu.findIndex(o=>o.cancel==r);~s&&mu.splice(s,1),ga-=~s?1:0},i={time:n,handler:t,cancel:r};return mu.splice(M3(n),0,i),ga+=1,R3(),i};var M3=t=>~(~mu.findIndex(e=>e.time>t)||~mu.length);We.cancel=t=>{Mv.delete(t),y_.delete(t),w_.delete(t),g_.delete(t),v_.delete(t)};We.sync=t=>{Tx=!0,We.batchedUpdates(t),Tx=!1};We.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,We.onStart(n)}return r.handler=t,r.cancel=()=>{Mv.delete(n),e=null},r};var b_=typeof window<"u"?window.requestAnimationFrame:()=>{};We.use=t=>b_=t;We.now=typeof performance<"u"?()=>performance.now():Date.now;We.batchedUpdates=t=>t();We.catch=console.error;We.frameLoop="always";We.advance=()=>{We.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):I3()};var ma=-1,ga=0,Tx=!1;function tp(t,e){Tx?(e.delete(t),t(0)):(e.add(t),R3())}function R3(){ma<0&&(ma=0,We.frameLoop!=="demand"&&b_(D3))}function qq(){ma=-1}function D3(){~ma&&(b_(D3),We.batchedUpdates(I3))}function I3(){const t=ma;ma=We.now();const e=M3(ma);if(e&&(L3(mu.splice(0,e),n=>n.handler()),ga-=e),!ga){qq();return}Mv.flush(),g_.flush(t?Math.min(64,ma-t):16.667),y_.flush(),v_.flush(),w_.flush()}function np(){let t=new Set,e=t;return{add(n){ga+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return ga-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,ga-=e.size,L3(e,r=>r(n)&&t.add(r)),ga+=t.size,e=t)}}}function L3(t,e){t.forEach(n=>{try{e(n)}catch(r){We.catch(r)}})}function Jq(){}var Zq=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),ve={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Ks(t,e){if(ve.arr(t)){if(!ve.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Mn=(t,e)=>t.forEach(e);function Ka(t,e,n){if(ve.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var va=t=>ve.und(t)?[]:ve.arr(t)?t:[t];function F3(t,e){if(t.size){const n=Array.from(t);t.clear(),Mn(n,e)}}var nm=(t,...e)=>F3(t,n=>n(...e)),x_=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),S_,j3,Ta=null,B3=!1,k_=Jq,Qq=t=>{t.to&&(j3=t.to),t.now&&(We.now=t.now),t.colors!==void 0&&(Ta=t.colors),t.skipAnimation!=null&&(B3=t.skipAnimation),t.createStringInterpolator&&(S_=t.createStringInterpolator),t.requestAnimationFrame&&We.use(t.requestAnimationFrame),t.batchedUpdates&&(We.batchedUpdates=t.batchedUpdates),t.willAdvance&&(k_=t.willAdvance),t.frameLoop&&(We.frameLoop=t.frameLoop)},Sf=new Set,bi=[],Tw=[],S0=0,Rv={get idle(){return!Sf.size&&!bi.length},start(t){S0>t.priority?(Sf.add(t),We.onStart(eJ)):(z3(t),We($x))},advance:$x,sort(t){if(S0)We.onFrame(()=>Rv.sort(t));else{const e=bi.indexOf(t);~e&&(bi.splice(e,1),U3(t))}},clear(){bi=[],Sf.clear()}};function eJ(){Sf.forEach(z3),Sf.clear(),We($x)}function z3(t){bi.includes(t)||U3(t)}function U3(t){bi.splice(tJ(bi,e=>e.priority>t.priority),0,t)}function $x(t){const e=Tw;for(let n=0;n<bi.length;n++){const r=bi[n];S0=r.priority,r.idle||(k_(r),r.advance(t),r.idle||e.push(r))}return S0=0,Tw=bi,Tw.length=0,bi=e,bi.length>0}function tJ(t,e){const n=t.findIndex(e);return n<0?t.length:n}var nJ=(t,e,n)=>Math.min(Math.max(n,t),e),rJ={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Xi="[-+]?\\d*\\.?\\d+",k0=Xi+"%";function Dv(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var iJ=new RegExp("rgb"+Dv(Xi,Xi,Xi)),sJ=new RegExp("rgba"+Dv(Xi,Xi,Xi,Xi)),oJ=new RegExp("hsl"+Dv(Xi,k0,k0)),aJ=new RegExp("hsla"+Dv(Xi,k0,k0,Xi)),lJ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,cJ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,uJ=/^#([0-9a-fA-F]{6})$/,dJ=/^#([0-9a-fA-F]{8})$/;function fJ(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=uJ.exec(t))?parseInt(e[1]+"ff",16)>>>0:Ta&&Ta[t]!==void 0?Ta[t]:(e=iJ.exec(t))?(xc(e[1])<<24|xc(e[2])<<16|xc(e[3])<<8|255)>>>0:(e=sJ.exec(t))?(xc(e[1])<<24|xc(e[2])<<16|xc(e[3])<<8|VP(e[4]))>>>0:(e=lJ.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=dJ.exec(t))?parseInt(e[1],16)>>>0:(e=cJ.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=oJ.exec(t))?(zP(UP(e[1]),rm(e[2]),rm(e[3]))|255)>>>0:(e=aJ.exec(t))?(zP(UP(e[1]),rm(e[2]),rm(e[3]))|VP(e[4]))>>>0:null}function $w(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function zP(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=$w(i,r,t+1/3),o=$w(i,r,t),a=$w(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function xc(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function UP(t){return(parseFloat(t)%360+360)%360/360}function VP(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function rm(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function HP(t){let e=fJ(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var kh=(t,e,n)=>{if(ve.fun(t))return t;if(ve.arr(t))return kh({range:t,output:e,extrapolate:n});if(ve.str(t.output[0]))return S_(t);const r=t,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const u=pJ(c,s);return hJ(c,s[u],s[u+1],i[u],i[u+1],l,o,a,r.map)}};function hJ(t,e,n,r,i,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function pJ(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var mJ=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return nJ(0,1,i/t)},_0=1.70158,im=_0*1.525,WP=_0+1,GP=2*Math.PI/3,KP=2*Math.PI/4.5,sm=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,V3={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>WP*t*t*t-_0*t*t,easeOutBack:t=>1+WP*Math.pow(t-1,3)+_0*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((im+1)*2*t-im)/2:(Math.pow(2*t-2,2)*((im+1)*(t*2-2)+im)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*GP),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*GP)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*KP))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*KP)/2+1,easeInBounce:t=>1-sm(1-t),easeOutBounce:sm,easeInOutBounce:t=>t<.5?(1-sm(1-2*t))/2:(1+sm(2*t-1))/2,steps:mJ},_h=Symbol.for("FluidValue.get"),Uu=Symbol.for("FluidValue.observers"),wi=t=>!!(t&&t[_h]),_r=t=>t&&t[_h]?t[_h]():t,XP=t=>t[Uu]||null;function gJ(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Ch(t,e){const n=t[Uu];n&&n.forEach(r=>{gJ(r,e)})}var H3=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");vJ(this,t)}},vJ=(t,e)=>W3(t,_h,e);function Iv(t,e){if(t[_h]){let n=t[Uu];n||W3(t,Uu,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Eh(t,e){const n=t[Uu];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[Uu]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var W3=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),cg=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,yJ=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,YP=new RegExp(`(${cg.source})(%|[a-z]+)`,"i"),wJ=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Lv=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,G3=t=>{const[e,n]=bJ(t);if(!e||x_())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&Lv.test(n))return G3(n);if(n)return n}return t},bJ=t=>{const e=Lv.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},Ow,xJ=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,K3=t=>{Ow||(Ow=Ta?new RegExp(`(${Object.keys(Ta).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>_r(s).replace(Lv,G3).replace(yJ,HP).replace(Ow,HP)),n=e.map(s=>s.match(cg).map(Number)),i=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>kh({...t,output:s}));return s=>{var l;const o=!YP.test(e[0])&&((l=e.find(c=>YP.test(c)))==null?void 0:l.replace(cg,""));let a=0;return e[0].replace(cg,()=>`${i[a++](s)}${o||""}`).replace(wJ,xJ)}},X3="react-spring: ",Y3=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${X3}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},SJ=Y3(console.warn);function kJ(){SJ(`${X3}The "interpolate" function is deprecated in v9 (use "to" instead)`)}Y3(console.warn);function Fv(t){return ve.str(t)&&(t[0]=="#"||/\d/.test(t)||!x_()&&Lv.test(t)||t in(Ta||{}))}var q3=x_()?g.useEffect:g.useLayoutEffect,_J=()=>{const t=g.useRef(!1);return q3(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function CJ(){const t=g.useState()[1],e=_J();return()=>{e.current&&t(Math.random())}}function EJ(t,e){const[n]=g.useState(()=>({inputs:e,result:t()})),r=g.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&AJ(e,s.inputs)||(s={inputs:e,result:t()}):s=n,g.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function AJ(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var PJ=t=>g.useEffect(t,TJ),TJ=[],Ah=Symbol.for("Animated:node"),$J=t=>!!t&&t[Ah]===t,bs=t=>t&&t[Ah],__=(t,e)=>Zq(t,Ah,e),jv=t=>t&&t[Ah]&&t[Ah].getPayload(),J3=class{constructor(){__(this,this)}getPayload(){return this.payload||[]}},rp=class extends J3{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,ve.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new rp(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return ve.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,ve.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Ph=class extends rp{constructor(t){super(0),this._string=null,this._toString=kh({output:[t,t]})}static create(t){return new Ph(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(ve.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=kh({output:[this.getValue(),t]})),this._value=0,super.reset()}},C0={dependencies:null},Bv=class extends J3{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Ka(this.source,(n,r)=>{$J(n)?e[r]=n.getValue(t):wi(n)?e[r]=_r(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Mn(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Ka(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){C0.dependencies&&wi(t)&&C0.dependencies.add(t);const e=jv(t);e&&Mn(e,n=>this.add(n))}},Z3=class extends Bv{constructor(t){super(t)}static create(t){return new Z3(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(OJ)),!0)}};function OJ(t){return(Fv(t)?Ph:rp).create(t)}function Ox(t){const e=bs(t);return e?e.constructor:ve.arr(t)?Z3:Fv(t)?Ph:rp}var qP=(t,e)=>{const n=!ve.fun(t)||t.prototype&&t.prototype.isReactComponent;return g.forwardRef((r,i)=>{const s=g.useRef(null),o=n&&g.useCallback(p=>{s.current=RJ(i,p)},[i]),[a,l]=MJ(r,e),c=CJ(),u=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},d=new NJ(u,l),f=g.useRef();q3(()=>(f.current=d,Mn(l,p=>Iv(p,d)),()=>{f.current&&(Mn(f.current.deps,p=>Eh(p,f.current)),We.cancel(f.current.update))})),g.useEffect(u,[]),PJ(()=>()=>{const p=f.current;Mn(p.deps,m=>Eh(m,p))});const h=e.getComponentProps(a.getValue());return g.createElement(t,{...h,ref:o})})},NJ=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&We.write(this.update)}};function MJ(t,e){const n=new Set;return C0.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Bv(t),C0.dependencies=null,[t,n]}function RJ(t,e){return t&&(ve.fun(t)?t(e):t.current=e),e}var JP=Symbol.for("AnimatedComponent"),DJ=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new Bv(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=o=>{const a=ZP(o)||"Anonymous";return ve.str(o)?o=s[o]||(s[o]=qP(o,i)):o=o[JP]||(o[JP]=qP(o,i)),o.displayName=`Animated(${a})`,o};return Ka(t,(o,a)=>{ve.arr(t)&&(a=ZP(o)),s[a]=s(o)}),{animated:s}},ZP=t=>ve.str(t)?t:t&&ve.str(t.displayName)?t.displayName:ve.fun(t)&&t.name||null;function yl(t,...e){return ve.fun(t)?t(...e):t}var kf=(t,e)=>t===!0||!!(e&&t&&(ve.fun(t)?t(e):va(t).includes(e))),Q3=(t,e)=>ve.obj(t)?e&&t[e]:t,IJ=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,LJ=t=>t,e5=(t,e=LJ)=>{let n=FJ;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const s=e(t[i],i);ve.und(s)||(r[i]=s)}return r},FJ=["config","onProps","onStart","onChange","onPause","onResume","onRest"],jJ={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function BJ(t){const e={};let n=0;if(Ka(t,(r,i)=>{jJ[i]||(e[i]=r,n++)}),n)return e}function t5(t){const e=BJ(t);if(e){const n={to:e};return Ka(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function Th(t){return t=_r(t),ve.arr(t)?t.map(Th):Fv(t)?as.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function Nx(t){return ve.fun(t)||ve.arr(t)&&ve.obj(t[0])}var zJ={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Mx={...zJ.default,mass:1,damping:1,easing:V3.linear,clamp:!1},UJ=class{constructor(){this.velocity=0,Object.assign(this,Mx)}};function VJ(t,e,n){n&&(n={...n},QP(n,e),e={...n,...e}),QP(t,e),Object.assign(t,e);for(const o in Mx)t[o]==null&&(t[o]=Mx[o]);let{frequency:r,damping:i}=t;const{mass:s}=t;return ve.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function QP(t,e){if(!ve.und(e.decay))t.duration=void 0;else{const n=!ve.und(e.tension)||!ve.und(e.friction);(n||!ve.und(e.frequency)||!ve.und(e.damping)||!ve.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var eT=[],HJ=class{constructor(){this.changed=!1,this.values=eT,this.toValues=null,this.fromValues=eT,this.config=new UJ,this.immediate=!1}};function WJ(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let l,c,u=kf(n.cancel??(r==null?void 0:r.cancel),e);if(u)h();else{ve.und(n.pause)||(i.paused=kf(n.pause,e));let p=r==null?void 0:r.pause;p!==!0&&(p=i.paused||kf(p,e)),l=yl(n.delay||0,e),p?(i.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){i.resumeQueue.add(f),i.timeouts.delete(c),c.cancel(),l=c.time-We.now()}function f(){l>0&&!as.skipAnimation?(i.delayed=!0,c=We.setTimeout(h,l),i.pauseQueue.add(d),i.timeouts.add(c)):h()}function h(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(d),i.timeouts.delete(c),t<=(i.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(p){a(p)}}})}var GJ=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?_f(t.get()):e.every(n=>n.noop)?n5(t.get()):Wi(t.get(),e.every(n=>n.finished)),n5=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Wi=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),_f=t=>({value:t,cancelled:!0,finished:!1});function KJ(t,e,n,r){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const c=e5(e,(w,v)=>v==="onRest"?void 0:w);let u,d;const f=new Promise((w,v)=>(u=w,d=v)),h=w=>{const v=i<=(n.cancelId||0)&&_f(r)||i!==n.asyncId&&Wi(r,!1);if(v)throw w.result=v,d(w),w},p=(w,v)=>{const y=new tT,x=new nT;return(async()=>{if(as.skipAnimation)throw Rx(n),x.result=Wi(r,!1),d(x),x;h(y);const _=ve.obj(w)?{...w}:{...v,to:w};_.parentId=i,Ka(c,(P,E)=>{ve.und(_[E])&&(_[E]=P)});const k=await r.start(_);return h(y),n.paused&&await new Promise(P=>{n.resumeQueue.add(P)}),k})()};let m;if(as.skipAnimation)return Rx(n),Wi(r,!1);try{let w;ve.arr(t)?w=(async v=>{for(const y of v)await p(y)})(t):w=Promise.resolve(t(p,r.stop.bind(r))),await Promise.all([w.then(u),f]),m=Wi(r.get(),!0,!1)}catch(w){if(w instanceof tT)m=w.result;else if(w instanceof nT)m=w.result;else throw w}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return ve.fun(o)&&We.batchedUpdates(()=>{o(m,r,r.item)}),m})()}function Rx(t,e){F3(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var tT=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},nT=class extends Error{constructor(){super("SkipAnimationSignal")}},Dx=t=>t instanceof C_,XJ=1,C_=class extends H3{constructor(){super(...arguments),this.id=XJ++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=bs(this);return t&&t.getValue()}to(...t){return as.to(this,t)}interpolate(...t){return kJ(),as.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Ch(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||Rv.sort(this),Ch(this,{type:"priority",parent:this,priority:t})}},rc=Symbol.for("SpringPhase"),r5=1,Ix=2,Lx=4,Nw=t=>(t[rc]&r5)>0,Uo=t=>(t[rc]&Ix)>0,Pd=t=>(t[rc]&Lx)>0,rT=(t,e)=>e?t[rc]|=Ix|r5:t[rc]&=~Ix,iT=(t,e)=>e?t[rc]|=Lx:t[rc]&=~Lx,yt=class extends C_{constructor(t,e){if(super(),this.animation=new HJ,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ve.und(t)||!ve.und(e)){const n=ve.obj(t)?{...t}:{...e,from:t};ve.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Uo(this)||this._state.asyncTo)||Pd(this)}get goal(){return _r(this.animation.to)}get velocity(){const t=bs(this);return t instanceof rp?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Nw(this)}get isAnimating(){return Uo(this)}get isPaused(){return Pd(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=jv(r.to);!o&&wi(r.to)&&(i=va(_r(r.to))),r.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==Ph?1:o?o[u].lastPosition:i[u];let f=r.immediate,h=d;if(!f){if(h=c.lastPosition,s.tension<=0){c.done=!0;return}let p=c.elapsedTime+=t;const m=r.fromValues[u],w=c.v0!=null?c.v0:c.v0=ve.arr(s.velocity)?s.velocity[u]:s.velocity;let v;const y=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(ve.und(s.duration))if(s.decay){const x=s.decay===!0?.998:s.decay,_=Math.exp(-(1-x)*p);h=m+w/(1-x)*(1-_),f=Math.abs(c.lastPosition-h)<=y,v=w*_}else{v=c.lastVelocity==null?w:c.lastVelocity;const x=s.restVelocity||y/10,_=s.clamp?0:s.bounce,k=!ve.und(_),P=m==d?c.v0>0:m<d;let E,C=!1;const N=1,M=Math.ceil(t/N);for(let R=0;R<M&&(E=Math.abs(v)>x,!(!E&&(f=Math.abs(d-h)<=y,f)));++R){k&&(C=h==d||h>d==P,C&&(v=-v*_,h=d));const L=-s.tension*1e-6*(h-d),H=-s.friction*.001*v,$=(L+H)/s.mass;v=v+$*N,h=h+v*N}}else{let x=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,p=c.elapsedTime+=t)),x=(s.progress||0)+p/this._memoizedDuration,x=x>1?1:x<0?0:x,c.durationProgress=x),h=m+s.easing(x)*(d-m),v=(h-c.lastPosition)/t,f=x==1}c.lastVelocity=v,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(h,s.round)&&(n=!0)});const a=bs(this),l=a.getValue();if(e){const c=_r(r.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return We.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Uo(this)){const{to:t,config:e}=this.animation;We.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return ve.und(t)?(n=this.queue||[],this.queue=[]):n=[ve.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>GJ(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Rx(this._state,t&&this._lastCallId),We.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=ve.obj(n)?n[e]:n,(n==null||Nx(n))&&(n=void 0),r=ve.obj(r)?r[e]:r,r==null&&(r=void 0);const i={to:n,from:r};return Nw(this)||(t.reverse&&([n,r]=[r,n]),r=_r(r),ve.und(r)?bs(this)||this._set(n):this._set(r)),i}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,e5(t,(o,a)=>/^on/.test(a)?Q3(o,n):o)),oT(this,t,"onProps"),$d(this,"onProps",t,this);const i=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return WJ(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{Pd(this)||(iT(this,!0),nm(s.pauseQueue),$d(this,"onPause",Wi(this,Td(this,this.animation.to)),this))},resume:()=>{Pd(this)&&(iT(this,!1),Uo(this)&&this._resume(),nm(s.resumeQueue),$d(this,"onResume",Wi(this,Td(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=YJ(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(_f(this));const r=!ve.und(t.to),i=!ve.und(t.from);if(r||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(_f(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;i&&!r&&(!e.default||ve.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!Ks(d,c);f&&(a.from=d),d=_r(d);const h=!Ks(u,l);h&&this._focus(u);const p=Nx(e.to),{config:m}=a,{decay:w,velocity:v}=m;(r||i)&&(m.velocity=0),e.config&&!p&&VJ(m,yl(e.config,s),e.config!==o.config?yl(o.config,s):void 0);let y=bs(this);if(!y||ve.und(u))return n(Wi(this,!0));const x=ve.und(e.reset)?i&&!e.default:!ve.und(d)&&kf(e.reset,s),_=x?d:this.get(),k=Th(u),P=ve.num(k)||ve.arr(k)||Fv(k),E=!p&&(!P||kf(o.immediate||e.immediate,s));if(h){const R=Ox(u);if(R!==y.constructor)if(E)y=this._set(k);else throw Error(`Cannot animate between ${y.constructor.name} and ${R.name}, as the "to" prop suggests`)}const C=y.constructor;let N=wi(u),M=!1;if(!N){const R=x||!Nw(this)&&f;(h||R)&&(M=Ks(Th(_),k),N=!M),(!Ks(a.immediate,E)&&!E||!Ks(m.decay,w)||!Ks(m.velocity,v))&&(N=!0)}if(M&&Uo(this)&&(a.changed&&!x?N=!0:N||this._stop(l)),!p&&((N||wi(l))&&(a.values=y.getPayload(),a.toValues=wi(u)?null:C==Ph?[1]:va(k)),a.immediate!=E&&(a.immediate=E,!E&&!x&&this._set(l)),N)){const{onRest:R}=a;Mn(JJ,H=>oT(this,e,H));const L=Wi(this,Td(this,l));nm(this._pendingCalls,L),this._pendingCalls.add(n),a.changed&&We.batchedUpdates(()=>{var H;a.changed=!x,R==null||R(L,this),x?yl(o.onRest,L):(H=a.onStart)==null||H.call(a,L,this)})}x&&this._set(_),p?n(KJ(e.to,e,this._state,this)):N?this._start():Uo(this)&&!h?this._pendingCalls.add(n):n(n5(_))}_focus(t){const e=this.animation;t!==e.to&&(XP(this)&&this._detach(),e.to=t,XP(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;wi(e)&&(Iv(e,this),Dx(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;wi(t)&&Eh(t,this)}_set(t,e=!0){const n=_r(t);if(!ve.und(n)){const r=bs(this);if(!r||!Ks(n,r.getValue())){const i=Ox(n);!r||r.constructor!=i?__(this,i.create(n)):r.setValue(n),r&&We.batchedUpdates(()=>{this._onChange(n,e)})}}return bs(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,$d(this,"onStart",Wi(this,Td(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),yl(this.animation.onChange,t,this)),yl(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;bs(this).reset(_r(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Uo(this)||(rT(this,!0),Pd(this)||this._resume())}_resume(){as.skipAnimation?this.finish():Rv.start(this)}_stop(t,e){if(Uo(this)){rT(this,!1);const n=this.animation;Mn(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ch(this,{type:"idle",parent:this});const r=e?_f(this.get()):Wi(this.get(),Td(this,t??n.to));nm(this._pendingCalls,r),n.changed&&(n.changed=!1,$d(this,"onRest",r,this))}}};function Td(t,e){const n=Th(e),r=Th(t.get());return Ks(r,n)}function YJ(t,e=t.loop,n=t.to){const r=yl(e);if(r){const i=r!==!0&&t5(r),s=(i||t).reverse,o=!i||i.reset;return qJ({...t,loop:e,default:!1,pause:void 0,to:!s||Nx(n)?n:void 0,from:o?t.from:void 0,reset:o,...i})}}function qJ(t){const{to:e,from:n}=t=t5(t),r=new Set;return ve.obj(e)&&sT(e,r),ve.obj(n)&&sT(n,r),t.keys=r.size?Array.from(r):null,t}function sT(t,e){Ka(t,(n,r)=>n!=null&&e.add(r))}var JJ=["onStart","onRest","onChange","onPause","onResume"];function oT(t,e,n){t.animation[n]=e[n]!==IJ(e,n)?Q3(e[n],t.key):void 0}function $d(t,e,...n){var r,i,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var E_=({children:t,...e})=>{const n=g.useContext(E0),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=EJ(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=E0;return g.createElement(s,{value:e},t)},E0=ZJ(E_,{});E_.Provider=E0.Provider;E_.Consumer=E0.Consumer;function ZJ(t,e){return Object.assign(t,g.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var QJ=class extends C_{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=kh(...e);const n=this._get(),r=Ox(n);__(this,r.create(n))}advance(t){const e=this._get(),n=this.get();Ks(e,n)||(bs(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&aT(this._active)&&Mw(this)}_get(){const t=ve.arr(this.source)?this.source.map(_r):va(_r(this.source));return this.calc(...t)}_start(){this.idle&&!aT(this._active)&&(this.idle=!1,Mn(jv(this),t=>{t.done=!1}),as.skipAnimation?(We.batchedUpdates(()=>this.advance()),Mw(this)):Rv.start(this))}_attach(){let t=1;Mn(va(this.source),e=>{wi(e)&&Iv(e,this),Dx(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Mn(va(this.source),t=>{wi(t)&&Eh(t,this)}),this._active.clear(),Mw(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=va(this.source).reduce((e,n)=>Math.max(e,(Dx(n)?n.priority:0)+1),0))}};function eZ(t){return t.idle!==!1}function aT(t){return!t.size||Array.from(t).every(eZ)}function Mw(t){t.idle||(t.idle=!0,Mn(jv(t),e=>{e.done=!0}),Ch(t,{type:"idle",parent:t}))}as.assign({createStringInterpolator:K3,to:(t,e)=>new QJ(t,e)});var i5=/^--/;function tZ(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!i5.test(t)&&!(Cf.hasOwnProperty(t)&&Cf[t])?e+"px":(""+e).trim()}var lT={};function nZ(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:r,children:i,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,c=Object.values(l),u=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:lT[d]||(lT[d]=d.replace(/([A-Z])/g,f=>"-"+f.toLowerCase())));i!==void 0&&(t.textContent=i);for(const d in r)if(r.hasOwnProperty(d)){const f=tZ(d,r[d]);i5.test(d)?t.style.setProperty(d,f):t.style[d]=f}u.forEach((d,f)=>{t.setAttribute(d,c[f])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var Cf={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rZ=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),iZ=["Webkit","Ms","Moz","O"];Cf=Object.keys(Cf).reduce((t,e)=>(iZ.forEach(n=>t[rZ(n,e)]=t[e]),t),Cf);var sZ=/^(matrix|translate|scale|rotate|skew)/,oZ=/^(translate)/,aZ=/^(rotate|skew)/,Rw=(t,e)=>ve.num(t)&&t!==0?t+e:t,ug=(t,e)=>ve.arr(t)?t.every(n=>ug(n,e)):ve.num(t)?t===e:parseFloat(t)===e,lZ=class extends Bv{constructor({x:t,y:e,z:n,...r}){const i=[],s=[];(t||e||n)&&(i.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>Rw(a,"px")).join(",")})`,ug(o,0)])),Ka(r,(o,a)=>{if(a==="transform")i.push([o||""]),s.push(l=>[l,l===""]);else if(sZ.test(a)){if(delete r[a],ve.und(o))return;const l=oZ.test(a)?"px":aZ.test(a)?"deg":"";i.push(va(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${Rw(f,l)})`,ug(f,0)]:c=>[`${a}(${c.map(u=>Rw(u,l)).join(",")})`,ug(c,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new cZ(i,s)),super(r)}},cZ=class extends H3{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Mn(this.inputs,(n,r)=>{const i=_r(n[0]),[s,o]=this.transforms[r](ve.arr(i)?i:n.map(_r));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Mn(this.inputs,e=>Mn(e,n=>wi(n)&&Iv(n,this)))}observerRemoved(t){t==0&&Mn(this.inputs,e=>Mn(e,n=>wi(n)&&Eh(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Ch(this,t)}},uZ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];as.assign({batchedUpdates:Oo.unstable_batchedUpdates,createStringInterpolator:K3,colors:rJ});var dZ=DJ(uZ,{applyAnimatedValues:nZ,createAnimatedStyle:t=>new lZ(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Jt=dZ.animated;const St={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},et=(t=St.stone[800])=>({backgroundColor:new yt(t),opacity:new yt(1)}),mn=()=>({strokeDashoffset:new yt(1),opacity:new yt(1)}),A_={bus:{address:{stroke:new yt(St.stone[700])},data:{stroke:new yt(St.stone[700])},rd:{stroke:new yt(St.stone[700])},wr:{stroke:new yt(St.stone[700])},iom:mn(),mem:{stroke:new yt(St.red[500])},handshake:mn(),pic:mn(),pio:mn(),timer:mn(),intr:mn(),inta:mn(),int0:mn(),int1:mn(),int2:mn(),"switches->pio":mn(),"pio->leds":mn(),printer:{data:mn(),strobe:mn(),busy:mn()}},clock:{angle:new yt(0)},cpu:{internalBus:{address:{strokeDashoffset:new yt(1),opacity:new yt(1),path:new yt("")},data:{strokeDashoffset:new yt(1),opacity:new yt(1),path:new yt("")}},alu:{operands:mn(),results:mn(),cog:{rot:new yt(0)},operation:{backgroundColor:new yt(St.stone[800])}},decoder:{path:mn(),progress:{progress:new yt(0),opacity:new yt(1)}},AX:et(),BX:et(),CX:et(),DX:et(),SP:et(),IP:et(),IR:et(),ri:{...et(),opacity:new yt(0)},id:{...et(),opacity:new yt(0)},left:et(),right:et(),result:et(),FLAGS:et(),MAR:et(),MBR:et()},handshake:{DATA:et(),STATE:et()},memory:{"operating-cell":{color:new yt(St.white)}},pic:{IMR:et(),IRR:et(),ISR:et(),INT0:et(),INT1:et(),INT2:et(),INT3:et(),INT4:et(),INT5:et(),INT6:et(),INT7:et()},pio:{PA:et(),PB:et(),CA:et(),CB:et()},printer:{printing:{progress:new yt(0),opacity:new yt(1)}},timer:{CONT:et(),COMP:et()}};function mt(t){return wI(A_,t)}function s5(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];r instanceof yt?e[n]=r.get():e[n]=s5(r)}return e}const fZ=s5(A_);function o5(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];r instanceof yt?r.set(e[n]):o5(t[n],e[n])}}const hZ=()=>o5(A_,fZ),$h=new Set;async function nt(t,e){const n=Y.get(Ln);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=Y.sub(Ln,()=>{Y.get(Ln).type!=="paused"&&(o(),s())})}),await nt(t,e);const r=Ar();if(!r.animations&&!e.forceMs)return null;const i={duration:e.forceMs?e.duration:e.duration*r.executionUnit,easing:V3[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;const l=mt(s);if(a===void 0)return l.set(o);{$h.add(s);const c=await mt(s).start({from:o,to:a,config:i});return $h.delete(s),c}}))}const pZ=()=>$h.forEach(t=>mt(t).pause()),mZ=()=>$h.forEach(t=>mt(t).resume());function a5(){$h.forEach(t=>{const e=mt(t);e.stop(!0),e.isPaused&&e.resume()}),setTimeout(()=>hZ(),10)}async function mi(t,e=St.mantis[400]){return await nt({key:`${t}.backgroundColor`,to:e},{duration:1,easing:"easeOutQuart"})}async function gi(t){return await nt({key:`${t}.backgroundColor`,to:St.stone[800]},{duration:1,easing:"easeOutQuart"})}async function Vu(t){await nt({key:"bus.data.stroke",to:St.mantis[400]},{duration:5,easing:"easeOutSine"}),await mi("cpu.MBR"),Y.set(x0,t),await gi("cpu.MBR")}async function Ai(t,e){return await nt([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function nr(t){return await nt({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function gZ(t){switch(t.type){case"bus:io.selected":{await Promise.all([nt({key:"bus.mem.stroke",to:St.stone[700]},{duration:1,easing:"easeInSine"}),Ai(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Wu(t.error);return}case"bus:reset":{await Promise.all([nt([{key:"bus.address.stroke",to:St.stone[700]},{key:"bus.data.stroke",to:St.stone[700]},{key:"bus.rd.stroke",to:St.stone[700]},{key:"bus.wr.stroke",to:St.stone[700]}],{duration:1,easing:"easeInSine"}),nt({key:"bus.mem.stroke",to:St.red[500]},{duration:1,easing:"easeOutSine"}),nr("bus.iom"),nr("bus.handshake"),nr("bus.pio"),nr("bus.pic"),nr("bus.timer")]);return}default:return t}}async function vZ(t){switch(t.type){case"clock:tick":return;default:return t.type}}function yZ(t){switch(t){case"IP":return"M 451 309 H 550 V 349 H 698";case"SP":return"M 451 349 H 698";case"ri":return"";default:throw new Error(`Invalid register ${t}`)}}function wZ(){const{path:t,...e}=mt("cpu.internalBus.address"),[n]=g.useState(!1),r=["M 451 309 H 550 V 349","M 451 349 H 550","M 444 388 H 550 V 349","M 451 349 H 698"];return b.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[r.map((i,s)=>b.jsx("path",{className:`fill-none stroke-bus ${n&&i==="M 444 388 H 575 V 349"?"stroke-mantis-400":"stroke-stone-700"}`,strokeLinejoin:"round",d:i},s)),b.jsx(Jt.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}var P_={exports:{}},gu=typeof Reflect=="object"?Reflect:null,cT=gu&&typeof gu.apply=="function"?gu.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},dg;gu&&typeof gu.ownKeys=="function"?dg=gu.ownKeys:Object.getOwnPropertySymbols?dg=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:dg=function(e){return Object.getOwnPropertyNames(e)};function bZ(t){console&&console.warn&&console.warn(t)}var l5=Number.isNaN||function(e){return e!==e};function gt(){gt.init.call(this)}P_.exports=gt;P_.exports.once=_Z;gt.EventEmitter=gt;gt.prototype._events=void 0;gt.prototype._eventsCount=0;gt.prototype._maxListeners=void 0;var uT=10;function zv(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(gt,"defaultMaxListeners",{enumerable:!0,get:function(){return uT},set:function(t){if(typeof t!="number"||t<0||l5(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");uT=t}});gt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};gt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||l5(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function c5(t){return t._maxListeners===void 0?gt.defaultMaxListeners:t._maxListeners}gt.prototype.getMaxListeners=function(){return c5(this)};gt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")cT(l,this,n);else for(var c=l.length,u=p5(l,c),r=0;r<c;++r)cT(u[r],this,n);return!0};function u5(t,e,n,r){var i,s,o;if(zv(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=c5(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,bZ(a)}return t}gt.prototype.addListener=function(e,n){return u5(this,e,n,!1)};gt.prototype.on=gt.prototype.addListener;gt.prototype.prependListener=function(e,n){return u5(this,e,n,!0)};function xZ(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d5(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=xZ.bind(r);return i.listener=n,r.wrapFn=i,i}gt.prototype.once=function(e,n){return zv(n),this.on(e,d5(this,e,n)),this};gt.prototype.prependOnceListener=function(e,n){return zv(n),this.prependListener(e,d5(this,e,n)),this};gt.prototype.removeListener=function(e,n){var r,i,s,o,a;if(zv(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():SZ(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};gt.prototype.off=gt.prototype.removeListener;gt.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function f5(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?kZ(i):p5(i,i.length)}gt.prototype.listeners=function(e){return f5(this,e,!0)};gt.prototype.rawListeners=function(e){return f5(this,e,!1)};gt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):h5.call(t,e)};gt.prototype.listenerCount=h5;function h5(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}gt.prototype.eventNames=function(){return this._eventsCount>0?dg(this._events):[]};function p5(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function SZ(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function kZ(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function _Z(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}m5(t,e,s,{once:!0}),e!=="error"&&CZ(t,i,{once:!0})})}function CZ(t,e,n){typeof t.on=="function"&&m5(t,"error",e,n)}function m5(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var EZ=P_.exports;function Hs(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Hs.prototype[Symbol.iterator]=function(){return this});Hs.of=function(){var t=arguments,e=t.length,n=0;return new Hs(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Hs.empty=function(){var t=new Hs(function(){return{done:!0}});return t};Hs.fromSequence=function(t){var e=0,n=t.length;return new Hs(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Hs.is=function(t){return t instanceof Hs?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Uv=Hs;const Ri=sc(Uv);var Vv={};Vv.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Vv.SYMBOL_SUPPORT=typeof Symbol<"u";var AZ=Uv,g5=Vv,PZ=g5.ARRAY_BUFFER_SUPPORT,TZ=g5.SYMBOL_SUPPORT;function $Z(t){return typeof t=="string"||Array.isArray(t)||PZ&&ArrayBuffer.isView(t)?AZ.fromSequence(t):typeof t!="object"||t===null?null:TZ&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var v5=function(e){var n=$Z(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},OZ=v5,NZ=function(e,n){for(var r=arguments.length>1?n:1/0,i=r!==1/0?new Array(r):[],s,o=0,a=OZ(e);;){if(o===r)return i;if(s=a.next(),s.done)return o!==n&&(i.length=o),i;i[o++]=s.value}};const y5=sc(NZ);var MZ=Uv,RZ=v5,DZ=function(){var e=arguments,n=null,r=-1;return new MZ(function(){var s=null;do{if(n===null){if(r++,r>=e.length)return{done:!0};n=RZ(e[r])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const mo=sc(DZ);function IZ(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const r in arguments[e])t[r]=arguments[e][r];return t}let fn=IZ;typeof Object.assign=="function"&&(fn=Object.assign);function Pi(t,e,n,r){const i=t._nodes.get(e);let s=null;return i&&(r==="mixed"?s=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?s=i.out&&i.out[n]:s=i.undirected&&i.undirected[n]),s}function Rn(t){return typeof t=="object"&&t!==null}function w5(t){let e;for(e in t)return!1;return!0}function ci(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Li(t,e,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function dT(t){return!(!Rn(t)||t.attributes&&!Array.isArray(t.attributes))}function LZ(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class T_ extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class ge extends T_{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ge.prototype.constructor)}}class fe extends T_{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,fe.prototype.constructor)}}class De extends T_{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,De.prototype.constructor)}}function b5(t,e){this.key=t,this.attributes=e,this.clear()}b5.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function x5(t,e){this.key=t,this.attributes=e,this.clear()}x5.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function S5(t,e){this.key=t,this.attributes=e,this.clear()}S5.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function od(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}od.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};od.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],s=i[r];if(typeof s>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}s.previous=this,this.next=s,i[r]=this,this.target[e][n]=this};od.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};od.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const k5=0,_5=1,FZ=2,C5=3;function Lo(t,e,n,r,i,s,o){let a,l,c,u;if(r=""+r,n===k5){if(a=t._nodes.get(r),!a)throw new fe(`Graph.${e}: could not find the "${r}" node in the graph.`);c=i,u=s}else if(n===C5){if(i=""+i,l=t._edges.get(i),!l)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`);const d=l.source.key,f=l.target.key;if(r===d)a=l.target;else if(r===f)a=l.source;else throw new fe(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${d}, ${f}).`);c=s,u=o}else{if(l=t._edges.get(r),!l)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===_5?a=l.source:a=l.target,c=i,u=s}return[a,c,u]}function jZ(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Lo(this,e,n,r,i,s);return o.attributes[a]}}function BZ(t,e,n){t.prototype[e]=function(r,i){const[s]=Lo(this,e,n,r,i);return s.attributes}}function zZ(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Lo(this,e,n,r,i,s);return o.attributes.hasOwnProperty(a)}}function UZ(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,c]=Lo(this,e,n,r,i,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function VZ(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,c]=Lo(this,e,n,r,i,s,o);if(typeof c!="function")throw new ge(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function HZ(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Lo(this,e,n,r,i,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function WZ(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Lo(this,e,n,r,i,s);if(!Rn(a))throw new ge(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function GZ(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Lo(this,e,n,r,i,s);if(!Rn(a))throw new ge(`Graph.${e}: provided attributes are not a plain object.`);return fn(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function KZ(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=Lo(this,e,n,r,i,s);if(typeof a!="function")throw new ge(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const XZ=[{name:t=>`get${t}Attribute`,attacher:jZ},{name:t=>`get${t}Attributes`,attacher:BZ},{name:t=>`has${t}Attribute`,attacher:zZ},{name:t=>`set${t}Attribute`,attacher:UZ},{name:t=>`update${t}Attribute`,attacher:VZ},{name:t=>`remove${t}Attribute`,attacher:HZ},{name:t=>`replace${t}Attributes`,attacher:WZ},{name:t=>`merge${t}Attributes`,attacher:GZ},{name:t=>`update${t}Attributes`,attacher:KZ}];function YZ(t){XZ.forEach(function({name:e,attacher:n}){n(t,e("Node"),k5),n(t,e("Source"),_5),n(t,e("Target"),FZ),n(t,e("Opposite"),C5)})}function qZ(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new De(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new De(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Pi(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new De(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]}}function JZ(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new De(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new De(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,o=""+arguments[1];if(i=Pi(this,s,o,n),!i)throw new fe(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new De(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function ZZ(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new De(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new De(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Pi(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new De(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes.hasOwnProperty(i)}}function QZ(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new De(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new De(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=Pi(this,a,l,n),!o)throw new fe(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new De(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function eQ(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new De(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new De(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=Pi(this,a,l,n),!o)throw new fe(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new De(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof s!="function")throw new ge(`Graph.${e}: updater should be a function.`);return o.attributes[i]=s(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function tQ(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new De(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new De(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Pi(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new De(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete s.attributes[i],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:i}),this}}function nQ(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new De(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new De(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Pi(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new De(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Rn(i))throw new ge(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=i,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function rQ(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new De(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new De(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Pi(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new De(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Rn(i))throw new ge(`Graph.${e}: provided attributes are not a plain object.`);return fn(s.attributes,i),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:i}),this}}function iQ(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new De(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new De(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Pi(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new De(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new ge(`Graph.${e}: provided updater is not a function.`);return s.attributes=i(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const sQ=[{name:t=>`get${t}Attribute`,attacher:qZ},{name:t=>`get${t}Attributes`,attacher:JZ},{name:t=>`has${t}Attribute`,attacher:ZZ},{name:t=>`set${t}Attribute`,attacher:QZ},{name:t=>`update${t}Attribute`,attacher:eQ},{name:t=>`remove${t}Attribute`,attacher:tQ},{name:t=>`replace${t}Attributes`,attacher:nQ},{name:t=>`merge${t}Attributes`,attacher:rQ},{name:t=>`update${t}Attributes`,attacher:iQ}];function oQ(t){sQ.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const aQ=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function lQ(t,e,n,r){let i=!1;for(const s in e){if(s===r)continue;const o=e[s];if(i=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&i)return o.key}}function cQ(t,e,n,r){let i,s,o,a=!1;for(const l in e)if(l!==r){i=e[l];do{if(s=i.source,o=i.target,a=n(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected),t&&a)return i.key;i=i.next}while(i!==void 0)}}function Dw(t,e){const n=Object.keys(t),r=n.length;let i,s=0;return new Ri(function(){do if(i)i=i.next;else{if(s>=r)return{done:!0};const a=n[s++];if(a===e){i=void 0;continue}i=t[a]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function uQ(t,e,n,r){const i=e[n];if(!i)return;const s=i.source,o=i.target;if(r(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected)&&t)return i.key}function dQ(t,e,n,r){let i=e[n];if(!i)return;let s=!1;do{if(s=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&s)return i.key;i=i.next}while(i!==void 0)}function Iw(t,e){let n=t[e];return n.next!==void 0?new Ri(function(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}):Ri.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function fQ(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):y5(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===i&&(r[o++]=l.key);return r}function E5(t,e,n,r){if(e.size===0)return;const i=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,i&&a.undirected!==s)continue;const{key:u,attributes:d,source:f,target:h}=a;if(l=r(u,d,f.key,h.key,f.attributes,h.attributes,a.undirected),t&&l)return u}}function hQ(t,e){if(t.size===0)return Ri.empty();const n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return new Ri(function(){let o,a;for(;;){if(o=i.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==r))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function $_(t,e,n,r,i,s){const o=e?cQ:lQ;let a;if(n!=="undirected"&&(r!=="out"&&(a=o(t,i.in,s),t&&a)||r!=="in"&&(a=o(t,i.out,s,r?void 0:i.key),t&&a))||n!=="directed"&&(a=o(t,i.undirected,s),t&&a))return a}function pQ(t,e,n,r){const i=[];return $_(!1,t,e,n,r,function(s){i.push(s)}),i}function mQ(t,e,n){let r=Ri.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=mo(r,Dw(n.in))),e!=="in"&&typeof n.out<"u"&&(r=mo(r,Dw(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=mo(r,Dw(n.undirected))),r}function O_(t,e,n,r,i,s,o){const a=n?dQ:uQ;let l;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(l=a(t,i.in,s,o),t&&l)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==s)&&(l=a(t,i.out,s,o),t&&l))||e!=="directed"&&typeof i.undirected<"u"&&(l=a(t,i.undirected,s,o),t&&l))return l}function gQ(t,e,n,r,i){const s=[];return O_(!1,t,e,n,r,i,function(o){s.push(o)}),s}function vQ(t,e,n,r){let i=Ri.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=mo(i,Iw(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=mo(i,Iw(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=mo(i,Iw(n.undirected,r))),i}function yQ(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return fQ(this,r);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new fe(`Graph.${n}: could not find the "${s}" node in the graph.`);return pQ(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new fe(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new fe(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return gQ(r,this.multi,i,a,o)}throw new ge(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function wQ(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return d=c,E5(!1,this,r,d);if(arguments.length===2){c=""+c,d=u;const f=this._nodes.get(c);if(typeof f>"u")throw new fe(`Graph.${s}: could not find the "${c}" node in the graph.`);return $_(!1,this.multi,r==="mixed"?this.type:r,i,f,d)}if(arguments.length===3){c=""+c,u=""+u;const f=this._nodes.get(c);if(!f)throw new fe(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new fe(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return O_(!1,r,this.multi,i,f,u,d)}throw new ge(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let f=0;r!=="directed"&&(f+=this.undirectedSize),r!=="undirected"&&(f+=this.directedSize),d=new Array(f);let h=0;c.push((p,m,w,v,y,x,_)=>{d[h++]=u(p,m,w,v,y,x,_)})}else d=[],c.push((f,h,p,m,w,v,y)=>{d.push(u(f,h,p,m,w,v,y))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((f,h,p,m,w,v,y)=>{u(f,h,p,m,w,v,y)&&d.push(f)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new ge(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new ge(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((h,p,m,w,v,y,x)=>{f=u(f,h,p,m,w,v,y,x)}),this[s].apply(this,c),f}}function bQ(t,e){const{name:n,type:r,direction:i}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return u=l,E5(!0,this,r,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new fe(`Graph.${s}: could not find the "${l}" node in the graph.`);return $_(!0,this.multi,r==="mixed"?this.type:r,i,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new fe(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new fe(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return O_(!0,r,this.multi,i,d,c,u)}throw new ge(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,h,p,m,w,v)=>c(d,f,h,p,m,w,v)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,h,p,m,w,v)=>!c(d,f,h,p,m,w,v)),!this[s].apply(this,l)}}function xQ(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Ri.empty();if(!arguments.length)return hQ(this,r);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new fe(`Graph.${s}: could not find the "${o}" node in the graph.`);return mQ(r,i,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new fe(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new fe(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return vQ(r,i,l,a)}throw new ge(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function SQ(t){aQ.forEach(e=>{yQ(t,e),wQ(t,e),bQ(t,e),xQ(t,e)})}const kQ=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Hv(){this.A=null,this.B=null}Hv.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Hv.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Od(t,e,n,r,i){for(const s in r){const o=r[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=i(c.key,c.attributes);if(t&&u)return c.key}}function N_(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return Od(t,null,r,r.undirected,i);if(typeof n=="string")return Od(t,null,r,r[n],i)}const s=new Hv;let o;if(e!=="undirected"){if(n!=="out"){if(o=Od(t,null,r,r.in,i),t&&o)return o;s.wrap(r.in)}if(n!=="in"){if(o=Od(t,s,r,r.out,i),t&&o)return o;s.wrap(r.out)}}if(e!=="directed"&&(o=Od(t,s,r,r.undirected,i),t&&o))return o}function _Q(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const r=[];return N_(!1,t,e,n,function(i){r.push(i)}),r}function Nd(t,e,n){const r=Object.keys(n),i=r.length;let s=0;return new Ri(function(){let a=null;do{if(s>=i)return t&&t.wrap(n),{done:!0};const l=n[r[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function CQ(t,e,n){if(t!=="mixed"){if(t==="undirected")return Nd(null,n,n.undirected);if(typeof e=="string")return Nd(null,n,n[e])}let r=Ri.empty();const i=new Hv;return t!=="undirected"&&(e!=="out"&&(r=mo(r,Nd(i,n,n.in))),e!=="in"&&(r=mo(r,Nd(i,n,n.out)))),t!=="directed"&&(r=mo(r,Nd(i,n,n.undirected))),r}function EQ(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new fe(`Graph.${n}: could not find the "${s}" node in the graph.`);return _Q(r==="mixed"?this.type:r,i,o)}}function AQ(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new fe(`Graph.${s}: could not find the "${c}" node in the graph.`);N_(!1,r==="mixed"?this.type:r,i,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(f,h)=>{d.push(u(f,h))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(f,h)=>{u(f,h)&&d.push(f)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new ge(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[s](c,(h,p)=>{f=u(f,h,p)}),f}}function PQ(t,e){const{name:n,type:r,direction:i}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new fe(`Graph.${o}: could not find the "${c}" node in the graph.`);return N_(!0,r==="mixed"?this.type:r,i,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(f,h)=>!u(f,h))}}function TQ(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Ri.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new fe(`Graph.${s}: could not find the "${o}" node in the graph.`);return CQ(r==="mixed"?this.type:r,i,a)}}function $Q(t){kQ.forEach(e=>{EQ(t,e),AQ(t,e),PQ(t,e),TQ(t,e)})}function om(t,e,n,r,i){const s=r._nodes.values(),o=r.type;let a,l,c,u,d,f,h;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do{if(f=d.target,p=!0,h=i(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),t&&h)return d;d=d.next}while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do{if(f=d.target,f.key!==c&&(f=d.source),p=!0,h=i(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),t&&h)return d;d=d.next}while(d)}}if(n&&!p&&(h=i(l.key,null,l.attributes,null,null,null,null),t&&h))return null}}function OQ(t,e){const n={key:t};return w5(e.attributes)||(n.attributes=fn({},e.attributes)),n}function NQ(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return w5(n.attributes)||(r.attributes=fn({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function MQ(t){if(!Rn(t))throw new ge('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new ge("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Rn(t.attributes)||t.attributes===null))throw new ge("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function RQ(t){if(!Rn(t))throw new ge('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new ge("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new ge("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Rn(t.attributes)||t.attributes===null))throw new ge("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new ge("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const DQ=LZ(),IQ=new Set(["directed","undirected","mixed"]),fT=new Set(["domain","_events","_eventsCount","_maxListeners"]),LQ=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],FQ={allowSelfLoops:!0,multi:!1,type:"mixed"};function jQ(t,e,n){if(n&&!Rn(n))throw new ge(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new De(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function hT(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function A5(t,e,n,r,i,s,o,a){if(!r&&t.type==="undirected")throw new De(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new De(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Rn(a))throw new ge(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new De(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new fe(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new fe(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new De(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new De(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new od(r,i,l,c,a);t._edges.set(i,d);const f=s===o;return r?(l.undirectedDegree++,c.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),r?t._undirectedSize++:t._directedSize++,u.key=i,t.emit("edgeAdded",u),i}function BQ(t,e,n,r,i,s,o,a,l){if(!r&&t.type==="undirected")throw new De(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new De(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new ge(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Rn(a))throw new ge(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new De(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),f,h;if(!n&&(f=t._edges.get(i),f)){if((f.source.key!==s||f.target.key!==o)&&(!r||f.source.key!==o||f.target.key!==s))throw new De(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${s}" source & "${o}" target vs. ("${f.source.key}", "${f.target.key}").`);h=f}if(!h&&!t.multi&&u&&(h=r?u.undirected[o]:u.out[o]),h){const y=[h.key,!1,!1,!1];if(l?!c:!a)return y;if(l){const x=h.attributes;h.attributes=c(x),t.emit("edgeAttributesUpdated",{type:"replace",key:h.key,attributes:h.attributes})}else fn(h.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:h.key,attributes:h.attributes,data:a});return y}a=a||{},l&&c&&(a=c(a));const p={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new De(`Graph.${e}: the "${i}" edge already exists in the graph.`);let m=!1,w=!1;u||(u=hT(t,s,{}),m=!0,s===o&&(d=u,w=!0)),d||(d=hT(t,o,{}),w=!0),f=new od(r,i,u,d,a),t._edges.set(i,f);const v=s===o;return r?(u.undirectedDegree++,d.undirectedDegree++,v&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,v&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),r?t._undirectedSize++:t._directedSize++,p.key=i,t.emit("edgeAdded",p),[i,!0,m,w]}function Sc(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,s=e.undirected,o=n===r;s?(n.undirectedDegree--,r.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:s})}class _t extends EZ.EventEmitter{constructor(e){if(super(),e=fn({},FQ,e),typeof e.multi!="boolean")throw new ge(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!IQ.has(e.type))throw new ge(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new ge(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?b5:e.type==="directed"?x5:S5;ci(this,"NodeDataClass",n);const r="geid_"+DQ()+"_";let i=0;const s=()=>{let o;do o=r+i++;while(this._edges.has(o));return o};ci(this,"_attributes",{}),ci(this,"_nodes",new Map),ci(this,"_edges",new Map),ci(this,"_directedSize",0),ci(this,"_undirectedSize",0),ci(this,"_directedSelfLoopCount",0),ci(this,"_undirectedSelfLoopCount",0),ci(this,"_edgeKeyGenerator",s),ci(this,"_options",e),fT.forEach(o=>ci(this,o,this[o])),Li(this,"order",()=>this._nodes.size),Li(this,"size",()=>this._edges.size),Li(this,"directedSize",()=>this._directedSize),Li(this,"undirectedSize",()=>this._undirectedSize),Li(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Li(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Li(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Li(this,"multi",this._options.multi),Li(this,"type",this._options.type),Li(this,"allowSelfLoops",this._options.allowSelfLoops),Li(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new ge(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new ge(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new ge(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new De("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new fe(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new fe(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new De("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new fe(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new fe(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new De("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new fe(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new fe(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const r=this._edges.get(n);if(!r)throw new fe(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,s=r.target.key;if(e===i)return s;if(e===s)return i;throw new fe(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const r=this._edges.get(e);if(!r)throw new fe(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return jQ(this,e,n).key}mergeNode(e,n){if(n&&!Rn(n))throw new ge(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&(fn(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new ge(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){const s=r.attributes;r.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do Sc(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do Sc(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do Sc(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=Pi(this,r,i,this.type),!n)throw new fe(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new fe(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Sc(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new De("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new De("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const r=Pi(this,e,n,"directed");if(!r)throw new fe(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Sc(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new De("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new De("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Pi(this,e,n,"undirected");if(!r)throw new fe(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Sc(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new ge("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Rn(e))throw new ge("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Rn(e))throw new ge("Graph.mergeAttributes: provided attributes are not a plain object.");return fn(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new ge("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new ge("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!dT(n))throw new ge("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new ge("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!dT(n))throw new ge("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,s,o,a;for(;i=r.next(),i.done!==!0;)s=i.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new ge("Graph.forEachAdjacencyEntry: expecting a callback.");om(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ge("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");om(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new ge("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");om(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ge("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");om(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):y5(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new ge("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new ge("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new ge("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const s=new Array(this.order);let o=0;for(;r=n.next(),r.done!==!0;)i=r.value,s[o++]=e(i.key,i.attributes);return s}someNode(e){if(typeof e!="function")throw new ge("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new ge("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new ge("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const s=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&s.push(i.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new ge("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ge("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let s,o;for(;s=i.next(),s.done!==!0;)o=s.value,r=e(r,o.key,o.attributes);return r}nodeEntries(){const e=this._nodes.values();return new Ri(()=>{const n=e.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,s)=>{e[n++]=OQ(s,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,s)=>{r[n++]=NQ(this.type,s,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof _t)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,f,h,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):p?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!Rn(e))throw new ge("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Rn(e.attributes))throw new ge("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new ge("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=s.length;r<i;r++){o=s[r],MQ(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new ge("Graph.import: invalid edges. Expecting an array.");for(r=0,i=s.length;r<i;r++){a=s[r],RQ(a);const{source:c,target:u,attributes:d,undirected:f=l}=a;let h;"key"in a?(h=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,h.call(this,a.key,c,u,d)):(h=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,h.call(this,c,u,d))}}return this}nullCopy(e){const n=new _t(fn({},this._options,e));return n.replaceAttributes(fn({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const s=fn({},r.attributes);r=new n.NodeDataClass(i,s),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new De(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new De("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new De("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),r=this._edges.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,A5(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,fn({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},r={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const f=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof r[f]>"u"?r[f]=0:r[f]++,l+=`${r[f]}. `):l+=`[${o}]: `,l+=f,n[l]=s.attributes});const i={};for(const s in this)this.hasOwnProperty(s)&&!fT.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(i[s]=this[s]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,ci(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(_t.prototype[Symbol.for("nodejs.util.inspect.custom")]=_t.prototype.inspect);LQ.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),r=e==="add"?A5:BQ;t.generateKey?_t.prototype[n]=function(i,s,o){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,s,o,e==="update")}:_t.prototype[n]=function(i,s,o,a){return r(this,n,!1,(t.type||this.type)==="undirected",i,s,o,a,e==="update")}})});YZ(_t);oQ(_t);SQ(_t);$Q(_t);class P5 extends _t{constructor(e){const n=fn({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new ge("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new ge('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class M_ extends _t{constructor(e){const n=fn({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new ge("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new ge('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class T5 extends _t{constructor(e){const n=fn({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ge("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class $5 extends _t{constructor(e){const n=fn({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ge("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new ge('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class O5 extends _t{constructor(e){const n=fn({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ge("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new ge('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function ad(t){t.from=function(e,n){const r=fn({},e.options,n),i=new t(r);return i.import(e),i}}ad(_t);ad(P5);ad(M_);ad(T5);ad($5);ad(O5);_t.Graph=_t;_t.DirectedGraph=P5;_t.UndirectedGraph=M_;_t.MultiGraph=T5;_t.MultiDirectedGraph=$5;_t.MultiUndirectedGraph=O5;_t.InvalidArgumentsGraphError=ge;_t.NotFoundGraphError=fe;_t.UsageGraphError=De;var zQ=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},N5=Vv,UQ=N5.ARRAY_BUFFER_SUPPORT,VQ=N5.SYMBOL_SUPPORT,HQ=function(e,n){var r,i,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||UQ&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(VQ&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(r=e,s=0;a=r.next(),a.done!==!0;)n(a.value,s),s++;return}for(i in e)e.hasOwnProperty(i)&&n(e[i],i)},M5=Uv,WQ=HQ;function sn(){this.clear()}sn.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};sn.prototype.enqueue=function(t){return this.items.push(t),++this.size};sn.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};sn.prototype.peek=function(){if(this.size)return this.items[this.offset]};sn.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,r=0,i=this.items.length;n<i;n++,r++)t.call(e,this.items[n],r,this)};sn.prototype.toArray=function(){return this.items.slice(this.offset)};sn.prototype.values=function(){var t=this.items,e=this.offset;return new M5(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};sn.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new M5(function(){if(e>=t.length)return{done:!0};var r=t[e];return e++,{value:[n++,r],done:!1}})};typeof Symbol<"u"&&(sn.prototype[Symbol.iterator]=sn.prototype.values);sn.prototype.toString=function(){return this.toArray().join(",")};sn.prototype.toJSON=function(){return this.toArray()};sn.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:sn,enumerable:!1}),t};typeof Symbol<"u"&&(sn.prototype[Symbol.for("nodejs.util.inspect.custom")]=sn.prototype.inspect);sn.from=function(t){var e=new sn;return WQ(t,function(n){e.enqueue(n)}),e};sn.of=function(){return sn.from(arguments)};var GQ=function(e,n){var r=n.length;if(r!==0){var i=e.length;e.length+=r;for(var s=0;s<r;s++)e[i+s]=n[s]}},R5=zQ,KQ=GQ;function XQ(t,e,n){if(!R5(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var r=t.inboundNeighbors.bind(t),i=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,f,h,p,m,w,v=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],h=0,m=c.length;h<m;h++)for(u=c[h],d=i(u),p=0,w=d.length;p<w;p++)if(f=d[p],f in s||(a.push(f),s[f]=u),f in o){v=!0;break e}}else for(c=l,l=[],h=0,m=c.length;h<m;h++)for(u=c[h],d=r(u),p=0,w=d.length;p<w;p++)if(f=d[p],f in o||(l.push(f),o[f]=u),f in s){v=!0;break e}if(!v)return null;for(var y=[];f;)y.unshift(f),f=s[f];for(f=o[y[y.length-1]];f;)y.push(f),f=o[f];return y.length?y:null}function D5(t,e,n){if(!R5(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var r=new Set,i={},s=0;i[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!r.has(c)&&(r.add(c),KQ(u,e[t](c)),i[c]=s);s++,o=u}return i}D5.bind(null,"outboundNeighbors");D5.bind(null,"neighbors");var YQ=XQ;const re=new M_({allowSelfLoops:!1});re.addNode("MBR",{position:[620,250]});re.addNode("AX",{position:[451,45]});re.addNode("BX",{position:[451,85]});re.addNode("CX",{position:[451,125]});re.addNode("DX",{position:[451,165]});re.addNode("id",{position:[451,205]});re.addNode("IP",{position:[451,309]});re.addNode("SP",{position:[451,349]});re.addNode("ri",{position:[451,388]});re.addNode("MAR",{position:[698,349]});re.addNode("result",{position:[370,130]});re.addNode("FLAGS",{position:[250,225]});re.addNode("IR",{position:[205,272]});re.addNode("left",{position:[60,85]});re.addNode("right",{position:[60,145]});re.addNode("rmbr",{position:[250,390]});re.addNode("AX join",{position:[421,45]});re.addNode("BX join",{position:[421,85]});re.addNode("CX join",{position:[421,125]});re.addNode("DX join",{position:[421,165]});re.addNode("id join",{position:[421,205]});re.addNode("data mbr join",{position:[421,250]});re.addNode("IP join",{position:[421,309]});re.addNode("SP join",{position:[421,349]});re.addNode("ri join",{position:[421,388]});re.addNode("MAR join1",{position:[550,388]});re.addNode("MAR join2",{position:[550,348]});re.addNode("addresses mbr join",{position:[421,250]});re.addNode("result mbr join",{position:[370,250]});re.addNode("FLAGS mbr join",{position:[250,250]});re.addNode("IR mbr join",{position:[205,250]});re.addNode("left join",{position:[30,85]});re.addNode("right join",{position:[30,145]});re.addNode("operands mbr join",{position:[30,250]});re.addNode("outr mbr join",{position:[553,250]});re.addNode("mbr reg join",{position:[421,250]});re.addNode("AX out",{position:[510,45]});re.addNode("BX out",{position:[510,85]});re.addNode("CX out",{position:[510,125]});re.addNode("DX out",{position:[510,165]});re.addNode("id out",{position:[510,205]});re.addNode("AX out join",{position:[553,45]});re.addNode("BX out join",{position:[553,85]});re.addNode("CX out join",{position:[553,125]});re.addNode("DX out join",{position:[553,165]});re.addNode("id out join",{position:[553,205]});re.addUndirectedEdge("AX","AX out");re.addUndirectedEdge("BX","BX out");re.addUndirectedEdge("CX","CX out");re.addUndirectedEdge("DX","DX out");re.addUndirectedEdge("id","id out");re.addUndirectedEdge("AX out","AX out join");re.addUndirectedEdge("BX out","BX out join");re.addUndirectedEdge("CX out","CX out join");re.addUndirectedEdge("DX out","DX out join");re.addUndirectedEdge("id out","id out join");re.addUndirectedEdge("AX out join","outr mbr join");re.addUndirectedEdge("BX out join","outr mbr join");re.addUndirectedEdge("CX out join","outr mbr join");re.addUndirectedEdge("DX out join","outr mbr join");re.addUndirectedEdge("id out join","outr mbr join");re.addUndirectedEdge("outr mbr join","mbr reg join");re.addUndirectedEdge("MBR","outr mbr join");re.addUndirectedEdge("mbr reg join","AX join");re.addUndirectedEdge("mbr reg join","BX join");re.addUndirectedEdge("mbr reg join","CX join");re.addUndirectedEdge("mbr reg join","DX join");re.addUndirectedEdge("mbr reg join","id join");re.addUndirectedEdge("outr mbr join","operands mbr join");re.addUndirectedEdge("AX join","AX");re.addUndirectedEdge("BX join","BX");re.addUndirectedEdge("CX join","CX");re.addUndirectedEdge("DX join","DX");re.addUndirectedEdge("id join","data mbr join");re.addUndirectedEdge("MBR","data mbr join");re.addUndirectedEdge("IP","IP join");re.addUndirectedEdge("SP","SP join");re.addUndirectedEdge("ri","ri join");re.addUndirectedEdge("MAR join1","ri");re.addUndirectedEdge("MAR join2","MAR join1");re.addUndirectedEdge("MAR","MAR join2");re.addUndirectedEdge("IP join","SP join");re.addUndirectedEdge("SP join","ri join");re.addUndirectedEdge("IP join","addresses mbr join");re.addUndirectedEdge("addresses mbr join","data mbr join");re.addUndirectedEdge("result","result mbr join");re.addUndirectedEdge("result mbr join","addresses mbr join");re.addUndirectedEdge("FLAGS","FLAGS mbr join");re.addUndirectedEdge("FLAGS mbr join","result mbr join");re.addUndirectedEdge("IR","IR mbr join");re.addUndirectedEdge("IR mbr join","FLAGS mbr join");re.addUndirectedEdge("left","left join");re.addUndirectedEdge("right","right join");re.addUndirectedEdge("left join","right join");re.addUndirectedEdge("right join","operands mbr join");function qQ(t,e,n,r){console.log("from:",t),console.log("to:",e);const i=(c,u)=>[c,`${c} out`,`${c} out join`,"outr mbr join","mbr reg join",`${u} join`,u];let s=[];const o=["AX","BX","CX","DX","id"];if(t==="MBR"&&e==="ri"?s=["MBR","mbr reg join","outr mbr join","mbr reg join","ri join","ri","MAR join1","MAR join2","MAR"]:t==="MBR"&&o.includes(e)?s=["MBR","mbr reg join",`${e} join`,e]:o.includes(t)&&o.includes(e)?s=i(t,e):t==="IP"&&e==="id"?s=["IP","IP join","id join","id"]:t==="id"&&e==="ri"?s=["id out","id out join","outr mbr join","mbr reg join","ri join","ri","MAR join1","MAR join2","MAR"]:t==="BX"&&e==="ri"?s=["BX out","BX out join","outr mbr join","mbr reg join","ri join","ri","MAR join1","MAR join2","MAR"]:t==="id"&&e==="MBR"?s=["id out","id out join","outr mbr join","MBR"]:t==="id"&&e==="IP"&&n==="RET"?s=["MBR","mbr reg join","IP join","IP"]:s=YQ(re,t,e)||[],t==="ri"&&e==="IP"&&(s=["MBR","mbr reg join","IP join","IP"]),t==="MBR"&&e==="ri"&&["JMP","JZ","JC","CALL"].includes(n??""))return"";if(s.length===0)throw new Error(`No path from ${t} to ${e}`);const a=re.getNodeAttribute(s[0],"position");console.log("start:",a);let l=`M ${a[0]} ${a[1]}`;for(let c=1;c<s.length;c++){const[u,d]=re.getNodeAttribute(s[c],"position");l+=` L ${u} ${d}`}return l}function JQ(){const{path:t,...e}=mt("cpu.internalBus.data");return b.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[b.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 60 85 H 30","V 250 H 630","M 60 145 H 30","M 370 110 V 250","M 250 225 V 250","M 33 85 H 220","M 32 145 H 220","M 272 115 h 100","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 451 388 H 421","V 250","M 451 349 H 421","M 451 309 H 421","M 451 45 H 421","V 250","M 451 85 H 421","M 451 125 H 421","M 451 165 H 421","M 550 45 H 520","M 550 85 H 510","M 550 125 H 510","M 550 165 H 510","M 550 40 V 250"].join(" ")}),b.jsx(Jt.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}const Lw=(t,e,n,r)=>{const i=qQ(t,e,n);return nt([{key:"cpu.internalBus.data.path",from:i},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})},Fw=()=>nt({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});let am="";async function ZQ(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await nt([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),Y.set(N3,t.operation),await Promise.all([nt({key:"cpu.alu.operation.backgroundColor",to:St.mantis[400]},{duration:1,easing:"easeOutQuart"}),nt({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([nt({key:"cpu.alu.operation.backgroundColor",to:St.stone[800]},{duration:1,easing:"easeOutQuart"}),nt([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([mi("cpu.result"),mi("cpu.FLAGS")]),Y.set(Tt.FLAGS,t.flags),Y.set(Tt.result,t.result),await Promise.all([gi("cpu.result"),gi("cpu.FLAGS")]),await nt([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{Y.set(ws,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await nt([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{am=t.instruction.name,t.instruction.willUse.id,T3(t.instruction.position.start),Y.set(ws,{phase:"fetching",metadata:t.instruction}),await nt([{key:"cpu.id.opacity",to:t.instruction.willUse.id?.4:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?.4:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{Y.set(ws,e=>"metadata"in e?{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase}:e);return}case"cpu:decode":{await nt([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await nt([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await nt([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{Y.set(ws,{phase:"stopped",error:t.error}),Wu(t.error);return}case"cpu:halt":case"cpu:int.0":{Y.set(ws,{phase:"stopped"}),Wu();return}case"cpu:int.3":{kn();return}case"cpu:int.6":{Y.set(ws,{phase:"int6"});return}case"cpu:int.7":{Y.set(ws,{phase:"int7"});return}case"cpu:inta.off":{await nr("bus.inta");return}case"cpu:inta.on":{await Ai("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await nt({key:"bus.address.stroke",to:St.blue[500]},{duration:5,easing:"easeInOutSine"}),await nt({key:`bus.${e}.stroke`,to:St.red[500]},{duration:5,easing:"easeOutSine"}),await nt({key:"bus.data.stroke",to:St.mantis[400]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await Ai("bus.iom",15);return}case"cpu:mar.set":{await nt([{key:"cpu.internalBus.address.path",from:yZ(t.register)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await mi("cpu.MAR",St.blue[500]),Y.set(O3,Y.get(Tt[t.register])),await Promise.all([gi("cpu.MAR"),nt({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=vl(t.register);await Lw("MBR",e,am),await mi(`cpu.${e}`),Y.set(Tt[t.register],Y.get(x0)),await Promise.all([gi(`cpu.${e}`),Fw()]);return}case"cpu:mbr.set":{const[e]=vl(t.register);await Lw(e,"MBR",am),await mi("cpu.MBR"),Y.set(x0,Y.get(Tt[t.register])),await Promise.all([gi("cpu.MBR"),Fw()]);return}case"cpu:register.copy":{const[e]=vl(t.src),[n]=vl(t.dest);e!==n&&await Lw(e,n,am),await mi(`cpu.${n}`),Y.set(Tt[t.dest],Y.get(Tt[t.src])),await Promise.all([gi(`cpu.${n}`),e!==n&&Fw()]);return}case"cpu:register.update":{const[e]=vl(t.register);await mi(`cpu.${e}`),Y.set(Tt[t.register],t.value),await gi(`cpu.${e}`);return}default:return t}}async function QQ(t){switch(t.type){case"f10:press":await Ai("bus.int0",2),await nr("bus.int0");return;default:return t.type}}const R_=Ee(B.zero(8)),D_=Ee(B.zero(8));function eee(t){"handshake"in t.io&&(Y.set(R_,B.fromUnsigned(t.io.handshake.DATA,8)),Y.set(D_,B.fromUnsigned(t.io.handshake.STATE,8)))}async function tee(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await Vu(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await mi(`handshake.${t.register}`),t.register){case"DATA":{Y.set(R_,t.value);break}case"STATE":{Y.set(D_,t.value);break}default:return t.register}await gi(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await nr("bus.int2");return}case"handshake:int.on":{await Ai("bus.int2",10);return}default:return t}}async function nee(t){switch(t.type){case"keyboard:listen-key":{Y.set(Ln,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{Y.sub(Ln,()=>{const n=Y.get(Ln);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const I_=Ee(B.zero(8));function ree(t){"leds"in t.io&&Y.set(I_,B.fromUnsigned(t.io.leds,8))}async function iee(t){switch(t.type){case"leds:update":{await Ai("bus.pio->leds",2),Y.set(I_,t.state),await nr("bus.pio->leds");return}default:return t.type}}const L_=Ee(new Array(be.MAX_ADDRESS+1).fill(B.zero(8))),Hu=Ee(be.from(32)),I5=Ee(null),lm=16,see=Ee(t=>{const e=t(I5)??t(Hu);let n=e.value-e.value%lm,r=n+lm-1;r>be.MAX_ADDRESS&&(r=be.MAX_ADDRESS,n=r-lm+1);const i=t(L_),s=[];for(let o=0;o<lm;o++)s.push({address:be.from(n+o),value:i[n+o]});return s});function oee(t){Y.set(L_,t.memory.map(e=>B.fromUnsigned(e,8))),Y.set(Hu,be.from(32))}async function aee(t){switch(t.type){case"memory:read":return;case"memory:read.ok":{Y.set(Hu,be.from(t.address)),await nt({key:"memory.operating-cell.color",to:St.mantis[400]},{duration:1,easing:"easeOutQuart"}),await Vu(t.value),await nt({key:"memory.operating-cell.color",to:St.white},{duration:1,easing:"easeOutQuart"});return}case"memory:write":return;case"memory:write.ok":{Y.set(Hu,be.from(t.address)),await nt({key:"memory.operating-cell.color",to:St.mantis[400]},{duration:1,easing:"easeOutQuart"}),Y.set(L_,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await nt({key:"memory.operating-cell.color",to:St.white},{duration:1,easing:"easeOutQuart"});return}case"memory:read.error":case"memory:write.error":{Wu(t.error);return}default:return t}}const F_=Ee(B.fromUnsigned(255,8)),j_=Ee(B.fromUnsigned(0,8)),B_=Ee(B.fromUnsigned(0,8)),A0=[Ee(B.zero(8)),Ee(B.zero(8)),Ee(B.zero(8)),Ee(B.zero(8)),Ee(B.zero(8)),Ee(B.zero(8)),Ee(B.zero(8)),Ee(B.zero(8))];function lee(t){if("pic"in t.io){Y.set(F_,B.fromUnsigned(t.io.pic.IMR,8)),Y.set(j_,B.fromUnsigned(t.io.pic.IRR,8)),Y.set(B_,B.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<A0.length;e++)Y.set(A0[e],B.fromUnsigned(t.io.pic.lines[e],8))}}async function cee(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await Vu(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await mi(`pic.${t.register}`),t.register){case"IMR":{Y.set(F_,t.value);break}case"IRR":{Y.set(j_,t.value);break}case"ISR":{Y.set(B_,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));Y.set(A0[e],t.value);break}default:return t}await gi(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await nr("bus.intr");return}case"pic:intr.on":{await Ai("bus.intr",10);return}case"pic:int.send":{await Vu(t.number);return}default:return t}}const z_=Ee(B.zero(8)),U_=Ee(B.zero(8)),V_=Ee(B.zero(8)),H_=Ee(B.zero(8));function uee(t){"pio"in t.io&&(Y.set(z_,B.fromUnsigned(t.io.pio.PA,8)),Y.set(U_,B.fromUnsigned(t.io.pio.PB,8)),Y.set(V_,B.fromUnsigned(t.io.pio.CA,8)),Y.set(H_,B.fromUnsigned(t.io.pio.CB,8)))}async function dee(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await Vu(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await mi(`pio.${t.register}`),t.register){case"PA":{Y.set(z_,t.value);break}case"PB":{Y.set(U_,t.value);break}case"CA":{Y.set(V_,t.value);break}case"CB":{Y.set(H_,t.value);break}default:return t.register}await gi(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const P0=Ee([]),T0=Ee("");function fee(t){"printer"in t.io&&(Y.set(P0,t.io.printer.buffer.map(e=>B.fromUnsigned(e,8))),Y.set(T0,t.io.printer.paper))}async function hee(t){switch(t.type){case"printer:buffer.add":{Y.set(P0,e=>[...e,t.char]);return}case"printer:buffer.pop":{Y.set(P0,e=>e.slice(1));return}case"printer:busy.off":{await nr("bus.printer.busy");return}case"printer:busy.on":{await Ai("bus.printer.busy",15);return}case"printer:data.read":{await Ai("bus.printer.data",15),await nr("bus.printer.data");return}case"printer:paper.print":{Y.set(T0,e=>e+t.char);return}case"printer:paper.replace":{Y.set(T0,"");return}case"printer:strobe.off":{await nr("bus.printer.strobe");return}case"printer:strobe.on":{await Ai("bus.printer.strobe",15);return}default:return t}}const W_=Ee("");function pee(t){"screen"in t.io&&Y.set(W_,t.io.screen)}async function mee(t){switch(t.type){case"screen:send-char":{Y.set(W_,t.output);return}default:return t.type}}const G_=Ee(B.zero(8));function gee(t){"switches"in t.io&&Y.set(G_,B.fromUnsigned(t.io.switches,8))}async function vee(t){switch(t.type){case"switches:toggle":{Y.set(G_,e=>e.withBit(t.index,!e.bit(t.index))),await Ai("bus.switches->pio",2),await nr("bus.switches->pio");return}default:return t.type}}const K_=Ee(B.zero(8)),X_=Ee(B.zero(8));function yee(t){"timer"in t.io&&(Y.set(K_,B.fromUnsigned(t.io.timer.CONT,8)),Y.set(X_,B.fromUnsigned(t.io.timer.COMP,8)))}async function wee(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await Vu(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await mi(`timer.${t.register}`),t.register){case"CONT":{Y.set(K_,t.value);break}case"COMP":{Y.set(X_,t.value);break}default:return t.register}await gi(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await nr("bus.int1");return}case"timer:int.on":{await Ai("bus.int1",10);return}default:return t}}const Fx=new Set;async function bee(t){See(t);const[e]=t.type.split(":",2);switch(Fx.add(t.type),e){case"bus":{await gZ(t);break}case"clock":{await vZ(t);break}case"cpu":{await ZQ(t);break}case"f10":{await QQ(t);break}case"handshake":{await tee(t);break}case"keyboard":{await nee(t);break}case"leds":{await iee(t);break}case"memory":{await aee(t);break}case"pic":{await cee(t);break}case"pio":{await dee(t);break}case"printer":{await hee(t);break}case"screen":{await mee(t);break}case"switches":{await vee(t);break}case"timer":{await wee(t);break}default:return e}Fx.delete(t.type)}function pT(...t){for(const e of t)if(Fx.has(e))return!0;return!1}const xee={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function See(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${xee[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const r in t)if(r!=="type"&&Object.prototype.hasOwnProperty.call(t,r)){const i=t[r];i instanceof B?console.log(`${r}: %c${i.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):i instanceof be?console.log(`${r}: %c${i.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):i instanceof ri?console.log(`${r}: %c${i.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof i=="number"?console.log(`${r}: %c${i.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof i=="string"?console.log(`${r}: %c"${i}" %c(string)`,"color: #f97316;","color: #737373;"):typeof i=="boolean"?console.log(`${r}: %c${i}`,"color: #06b6d4;"):i===null?console.log(`${r}: %cnull`,"color: #b91c1c;"):console.log(`${r}:`,i)}console.groupEnd()}const Hn=new Vq,Ln=Ee({type:"stopped"});function kee(t){const e=t.translate(Ar().language);kr({title:e,variant:"error"})}function Wu(t){t&&kee(t),T3(null),P3(!1),Y.set(Ln,{type:"stopped",error:t}),Y.set(ws,{phase:"stopped",error:t}),a5()}function kn(){Y.set(Ln,{type:"paused"}),pZ()}function _ee(){kr({title:xv(Ar().language,"messages.assemble-error"),variant:"error"})}function kc(){kr({title:xv(Ar().language,"messages.invalid-action"),variant:"error"})}function Cee(t){Kq(t),oee(t),eee(t),lee(t),uee(t),yee(t),ree(t),fee(t),pee(t),gee(t)}let pr=null,ll=0,Vo=0,Md="",Rd=!0,jw=!0,mT=!1;async function wl(t){try{for(;;){const e=Y.get(Ln),n=Ar();if(e.type==="stopped"){ll=0,Vo=0,Md="";break}if(e.type==="paused"){await new Promise(i=>{const s=Y.sub(Ln,()=>{s(),i()})});continue}const r=t.next();if(r.done)break;if(await bee(r.value),r.value.type==="cpu:cycle.start"&&(pr=r.value.instruction.name,mT=!!r.value.instruction.willUse.id),e.until==="cycle-change"){if(r.value.type==="cpu:cycle.end"){ll=0,Vo=0,Md="",kn();continue}else r.value.type==="cpu:int.6"?(Y.set(tn,"PILA  DL; DL  ASCII; (BL)  DL; IRET"),kn()):r.value.type==="cpu:int.7"&&(Y.set(tn,"PILA  DL; Bucle: DL  (BL); video  DL; SUB AL, 1; JNZ Bucle; (BL)  DL; IRET"),kn());if(ll<3)r.value.type==="cpu:mar.set"?(r.value.register==="SP"?(ll=3,Vo=3,Y.set(tn,"Ejecucin: MAR  SP")):Y.set(tn,"Captacin: MAR  IP"),kn(),ll++):r.value.type==="cpu:register.update"?(Y.set(tn,"Captacin: MBR  read(Memoria[MAR]); IP  IP + 1"),kn(),ll++):r.value.type==="cpu:mbr.get"&&(Y.set(tn,"Captacin: IR  MBR"),kn(),ll++);else if(r.value.type==="cpu:rd.on"&&Vo>1?Md="Ejecucin: MBR  read(Memoria[MAR])":r.value.type==="cpu:wr.on"&&(Md="Ejecucin: write(Memoria[MAR])  MBR"),r.value.type==="cpu:mar.set"){const i=r.value.register,s=i==="ri"?"MBR":i;Rd&&Y.set(tn,`Ejecucin: MAR  ${s}`),kn(),Vo++}else if(r.value.type==="cpu:register.update"){const i=r.value.register;let s="";Rd=!0,i==="SP"?((pr==="CALL"||pr==="INT"&&jw)&&(s="SP = SP - 1"),(pr==="RET"||pr==="IRET"||!jw&&pr==="INT")&&(s="SP = SP + 1")):i==="FLAGS"?s="IF = 0":i==="DL"&&pr==="INT"?(s="DL  ASCII",jw=!1):i==="right.l"&&pr==="INT"?s="SUB AL, 1":i==="right"&&pr==="INT"?s="ADD BL, 1":i==="ri.l"&&pr==="INT"?(s="MAR  (video)",Rd=!1):s=i==="IP"?"Ejecucin: MBR  read(Memoria[MAR]); IP  IP + 1":`Ejecucin: MBR  ${i}`,Y.set(tn,s),s!=="MAR  (video)"&&kn(),Vo++}else if(r.value.type==="cpu:mbr.get"){const i=r.value.register==="id.l"?"id":r.value.register==="IP.l"?"IP":r.value.register==="FLAGS.l"?"FLAGS":r.value.register;String(i)!=="ri.l"&&(Y.set(tn,`Ejecucin: ${i}  MBR`),(String(i)==="id"||String(i)==="DL"&&pr==="INT")&&kn())}else if(r.value.type==="cpu:register.copy"){const i=r.value.src,s=r.value.dest;let a=`Ejecucin: ${s}  ${i==="result.l"?"ALU":i}`;i==="ri.l"&&s==="IP.l"?(a="Ejecucin: IP  MBR",Y.set(tn,a),kn()):s==="left"&&pr==="INT"?a="ADD BL, 1":(i==="result"||i==="result.l")&&pr==="INT"?kn():i==="IP.l"&&s==="id.l"?(a="Ejecucin: id  IP",Y.set(tn,a),kn()):i==="id.l"&&s==="ri.l"?(a="Ejecucin: MAR  id",Rd=!1,Y.set(tn,a)):i==="MBR"&&s==="ri.l"?(a="Ejecucin: MAR  MBR",Y.set(tn,a)):i==="id"&&s==="IP"?(a="Ejecucin: IP  MBR",Y.set(tn,a),kn()):i==="BL"&&s==="ri.l"||i==="BX"&&s==="ri"?(a="Ejecucin: MAR  BL",Y.set(tn,a),Rd=!1,Vo++):Y.set(tn,a)}else if(r.value.type==="bus:reset"&&Vo>1&&!mT&&pr==="MOV")Y.set(tn,Md),kn();else if(r.value.type==="cpu:mbr.set"){const i=r.value.register==="id.l"?"id":r.value.register==="FLAGS.l"?"FLAGS":r.value.register==="IP.l"?"IP":r.value.register;Y.set(tn,`Ejecucin: MBR  ${i}`),kn()}}else Y.set(tn,"");r.value.type==="cpu:cycle.update"||r.value.type==="cpu:cycle.interrupt"?e.until==="cycle-change"||n.animations||await new Promise(i=>setTimeout(i,n.executionUnit)):r.value.type==="cpu:cycle.end"&&(e.until==="cycle-change"||e.until==="end-of-instruction"?kn():n.animations||await new Promise(i=>setTimeout(i,n.executionUnit)))}t.return()}catch(e){const n=it.from(e);Wu(n)}}async function Eee(...t){const e=t[0],n=Y.get(Ln);switch(e){case"cpu.run":{if(n.type==="running")return kc();const r=t[1];if(n.type==="stopped"){if(!window.codemirror)return;const i=window.codemirror.state.doc.toString(),s=x3(i);if(!s.success)return _ee();P3(!0),Hn.loadProgram({program:s,data:Ar().dataOnLoad,devices:Ar().devices}),Cee(Hn.getComputerState());const o=["Start CPU",{until:r,devices:Ar().devices,language:Ar().language,animations:Ar().animations?"yes":"no"}];$3.capture(...o),Y.set(Ln,{type:"running",until:r,waitingForInput:!1}),wl(Hn.startCPU()),Aee(),Pee()}else Y.set(Ln,{type:"running",until:r,waitingForInput:!1}),mZ();return}case"cpu.stop":{Wu();return}case"f10.press":{if(!Hn.devices.f10.connected()||n.type!=="running")return kc();if(pT("f10:press"))return;wl(Hn.devices.f10.press());return}case"switch.toggle":{if(n.type!=="running"||!Hn.devices.switches.connected())return kc();if(pT("switches:toggle"))return;const r=t[1];wl(Hn.devices.switches.toggle(r));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return kc();Hn.devices.keyboard.readChar(B.fromChar(t[1])),Y.set(Ln,{...n,waitingForInput:!1});return}case"screen.clean":{if(!Hn.devices.screen.connected())return kc();wl(Hn.devices.screen.clear());return}case"printer.clean":{if(!Hn.devices.printer.connected())return kc();wl(Hn.devices.printer.clear());return}default:return e}}async function Aee(){if(Hn.devices.clock.connected())for(;Y.get(Ln).type!=="stopped";){const t=Ar().clockSpeed;await nt({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),wl(Hn.devices.clock.tick())}}async function Pee(){if(Hn.devices.printer.connected())for(;Y.get(Ln).type!=="stopped";){const t=Ar().printerSpeed;await nt([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await nt({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),wl(Hn.devices.printer.print())}}function bn(){const t=Xt(Ln),e=IG(),n=g.useMemo(()=>({preset:e,hasIOBus:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",clock:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",f10:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",keyboard:e==="keyboard-and-screen"||e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",handshake:e==="handshake",leds:e==="pio-switches-and-leds",pic:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",pio:e==="pio-switches-and-leds"||e==="pio-printer",printer:e==="pio-printer"||e==="handshake",screen:e==="keyboard-and-screen"||e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",switches:e==="pio-switches-and-leds",timer:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake"}),[e]);return{status:t,dispatch:Eee,devices:n}}function Tee({className:t}){const e=Ct(),{status:n,dispatch:r}=bn(),i=g.useCallback(()=>{n.type!=="running"&&r("cpu.run","cycle-change")},[n.type,r]);ho("F7",a=>{a.preventDefault(),i()},void 0,[i]);const s=g.useCallback(()=>{n.type!=="running"&&r("cpu.run","end-of-instruction")},[n.type,r]);ho("F8",a=>{a.preventDefault(),s()},void 0,[s]);const o=g.useCallback(()=>{n.type!=="running"&&r("cpu.run","infinity")},[n.type,r]);return ho("F4",a=>{a.preventDefault(),o()},void 0,[o]),b.jsxs("div",{className:Ge("flex items-center justify-center gap-4",t),children:[b.jsxs("button",{disabled:n.type==="running",onClick:i,className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-green-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[b.jsx(qc,{icon:lK,className:"md:mr-2"}),b.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e("control.action.run.cycle-change")}),b.jsx("kbd",{className:"ml-2 hidden text-stone-600 md:inline",children:"F7"})]}),b.jsxs("button",{disabled:n.type==="running",onClick:s,className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-green-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[b.jsx(qc,{icon:oK,className:"md:mr-2"}),b.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e("control.action.run.end-of-instruction")}),b.jsx("kbd",{className:"ml-2 hidden text-stone-600 md:inline",children:"F8"})]}),b.jsxs("button",{disabled:n.type==="running",onClick:o,className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-green-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[b.jsx(qc,{icon:cK,className:"md:mr-2"}),b.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e("control.action.run.infinity")}),b.jsx("kbd",{className:"ml-2 hidden text-stone-600 md:inline",children:"F4"})]}),b.jsxs("button",{disabled:n.type==="stopped",onClick:()=>r("cpu.stop"),className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-red-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[b.jsx(qc,{icon:aK,className:"md:mr-2"}),b.jsx("span",{className:"hidden text-sm font-medium md:inline",children:e("control.action.stop")})]})]})}function $0(t,[e,n]){return Math.min(n,Math.max(e,t))}function Y_(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const q_=g.forwardRef((t,e)=>g.createElement(Xe.span,xe({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}))),$ee=[" ","Enter","ArrowUp","ArrowDown"],Oee=[" ","Enter"],Wv="Select",[Gv,J_,Nee]=Uh(Wv),[ld,nle]=cs(Wv,[Nee,id]),Z_=id(),[Mee,dc]=ld(Wv),[Ree,Dee]=ld(Wv),Iee=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:h}=t,p=Z_(e),[m,w]=g.useState(null),[v,y]=g.useState(null),[x,_]=g.useState(!1),k=Vh(c),[P=!1,E]=bo({prop:r,defaultProp:i,onChange:s}),[C,N]=bo({prop:o,defaultProp:a,onChange:l}),M=g.useRef(null),R=m?!!m.closest("form"):!0,[L,H]=g.useState(new Set),$=Array.from(L).map(V=>V.props.value).join(";");return g.createElement(Fk,p,g.createElement(Mee,{required:h,scope:e,trigger:m,onTriggerChange:w,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:x,onValueNodeHasChildrenChange:_,contentId:Gl(),value:C,onValueChange:N,open:P,onOpenChange:E,dir:k,triggerPointerDownPosRef:M,disabled:f},g.createElement(Gv.Provider,{scope:e},g.createElement(Ree,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(V=>{H(q=>new Set(q).add(V))},[]),onNativeOptionRemove:g.useCallback(V=>{H(q=>{const ne=new Set(q);return ne.delete(V),ne})},[])},n)),R?g.createElement(j5,{key:$,"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:d,value:C,onChange:V=>N(V.target.value),disabled:f},C===void 0?g.createElement("option",{value:""}):null,Array.from(L)):null))},Lee="SelectTrigger",Fee=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=Z_(n),o=dc(Lee,n),a=o.disabled||r,l=lt(e,o.onTriggerChange),c=J_(n),[u,d,f]=B5(p=>{const m=c().filter(y=>!y.disabled),w=m.find(y=>y.value===o.value),v=z5(m,p,w);v!==void 0&&o.onValueChange(v.value)}),h=()=>{a||(o.onOpenChange(!0),f())};return g.createElement(jk,xe({asChild:!0},s),g.createElement(Xe.button,xe({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":F5(o.value)?"":void 0},i,{ref:l,onClick:ye(i.onClick,p=>{p.currentTarget.focus()}),onPointerDown:ye(i.onPointerDown,p=>{const m=p.target;m.hasPointerCapture(p.pointerId)&&m.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(h(),o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:ye(i.onKeyDown,p=>{const m=u.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(m&&p.key===" ")&&$ee.includes(p.key)&&(h(),p.preventDefault())})})))}),jee="SelectValue",Bee=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=dc(jee,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=lt(e,l.onValueNodeChange);return Ni(()=>{c(u)},[c,u]),g.createElement(Xe.span,xe({},a,{ref:d,style:{pointerEvents:"none"}}),F5(l.value)?g.createElement(g.Fragment,null,o):s)}),zee=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return g.createElement(Xe.span,xe({"aria-hidden":!0},i,{ref:e}),r||"")}),Uee=t=>g.createElement(vv,xe({asChild:!0},t)),Gu="SelectContent",Vee=g.forwardRef((t,e)=>{const n=dc(Gu,t.__scopeSelect),[r,i]=g.useState();if(Ni(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Oo.createPortal(g.createElement(L5,{scope:t.__scopeSelect},g.createElement(Gv.Slot,{scope:t.__scopeSelect},g.createElement("div",null,t.children))),s):null}return g.createElement(Hee,xe({},t,{ref:e}))}),Xs=10,[L5,Kv]=ld(Gu),Hee=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:w,...v}=t,y=dc(Gu,n),[x,_]=g.useState(null),[k,P]=g.useState(null),E=lt(e,S=>_(S)),[C,N]=g.useState(null),[M,R]=g.useState(null),L=J_(n),[H,$]=g.useState(!1),V=g.useRef(!1);g.useEffect(()=>{if(x)return zk(x)},[x]),Tk();const q=g.useCallback(S=>{const[T,...D]=L().map(X=>X.ref.current),[O]=D.slice(-1),U=document.activeElement;for(const X of S)if(X===U||(X==null||X.scrollIntoView({block:"nearest"}),X===T&&k&&(k.scrollTop=0),X===O&&k&&(k.scrollTop=k.scrollHeight),X==null||X.focus(),document.activeElement!==U))return},[L,k]),ne=g.useCallback(()=>q([C,x]),[q,C,x]);g.useEffect(()=>{H&&ne()},[H,ne]);const{onOpenChange:W,triggerPointerDownPosRef:j}=y;g.useEffect(()=>{if(x){let S={x:0,y:0};const T=O=>{var U,X,te,J;S={x:Math.abs(Math.round(O.pageX)-((U=(X=j.current)===null||X===void 0?void 0:X.x)!==null&&U!==void 0?U:0)),y:Math.abs(Math.round(O.pageY)-((te=(J=j.current)===null||J===void 0?void 0:J.y)!==null&&te!==void 0?te:0))}},D=O=>{S.x<=10&&S.y<=10?O.preventDefault():x.contains(O.target)||W(!1),document.removeEventListener("pointermove",T),j.current=null};return j.current!==null&&(document.addEventListener("pointermove",T),document.addEventListener("pointerup",D,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",D,{capture:!0})}}},[x,W,j]),g.useEffect(()=>{const S=()=>W(!1);return window.addEventListener("blur",S),window.addEventListener("resize",S),()=>{window.removeEventListener("blur",S),window.removeEventListener("resize",S)}},[W]);const[Q,K]=B5(S=>{const T=L().filter(U=>!U.disabled),D=T.find(U=>U.ref.current===document.activeElement),O=z5(T,S,D);O&&setTimeout(()=>O.ref.current.focus())}),ee=g.useCallback((S,T,D)=>{const O=!V.current&&!D;(y.value!==void 0&&y.value===T||O)&&(N(S),O&&(V.current=!0))},[y.value]),ce=g.useCallback(()=>x==null?void 0:x.focus(),[x]),F=g.useCallback((S,T,D)=>{const O=!V.current&&!D;(y.value!==void 0&&y.value===T||O)&&R(S)},[y.value]),I=r==="popper"?gT:Wee,z=I===gT?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:w}:{};return g.createElement(L5,{scope:n,content:x,viewport:k,onViewportChange:P,itemRefCallback:ee,selectedItem:C,onItemLeave:ce,itemTextRefCallback:F,focusSelectedItem:ne,selectedItemText:M,position:r,isPositioned:H,searchRef:Q},g.createElement(Uk,{as:Wl,allowPinchZoom:!0},g.createElement($k,{asChild:!0,trapped:y.open,onMountAutoFocus:S=>{S.preventDefault()},onUnmountAutoFocus:ye(i,S=>{var T;(T=y.trigger)===null||T===void 0||T.focus({preventScroll:!0}),S.preventDefault()})},g.createElement(pv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:S=>S.preventDefault(),onDismiss:()=>y.onOpenChange(!1)},g.createElement(I,xe({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:S=>S.preventDefault()},v,z,{onPlaced:()=>$(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ye(v.onKeyDown,S=>{const T=S.ctrlKey||S.altKey||S.metaKey;if(S.key==="Tab"&&S.preventDefault(),!T&&S.key.length===1&&K(S.key),["ArrowUp","ArrowDown","Home","End"].includes(S.key)){let O=L().filter(U=>!U.disabled).map(U=>U.ref.current);if(["ArrowUp","End"].includes(S.key)&&(O=O.slice().reverse()),["ArrowUp","ArrowDown"].includes(S.key)){const U=S.target,X=O.indexOf(U);O=O.slice(X+1)}setTimeout(()=>q(O)),S.preventDefault()}})}))))))}),Wee=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=dc(Gu,n),o=Kv(Gu,n),[a,l]=g.useState(null),[c,u]=g.useState(null),d=lt(e,E=>u(E)),f=J_(n),h=g.useRef(!1),p=g.useRef(!0),{viewport:m,selectedItem:w,selectedItemText:v,focusSelectedItem:y}=o,x=g.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&w&&v){const E=s.trigger.getBoundingClientRect(),C=c.getBoundingClientRect(),N=s.valueNode.getBoundingClientRect(),M=v.getBoundingClientRect();if(s.dir!=="rtl"){const U=M.left-C.left,X=N.left-U,te=E.left-X,J=E.width+te,se=Math.max(J,C.width),Ie=window.innerWidth-Xs,me=$0(X,[Xs,Ie-se]);a.style.minWidth=J+"px",a.style.left=me+"px"}else{const U=C.right-M.right,X=window.innerWidth-N.right-U,te=window.innerWidth-E.right-X,J=E.width+te,se=Math.max(J,C.width),Ie=window.innerWidth-Xs,me=$0(X,[Xs,Ie-se]);a.style.minWidth=J+"px",a.style.right=me+"px"}const R=f(),L=window.innerHeight-Xs*2,H=m.scrollHeight,$=window.getComputedStyle(c),V=parseInt($.borderTopWidth,10),q=parseInt($.paddingTop,10),ne=parseInt($.borderBottomWidth,10),W=parseInt($.paddingBottom,10),j=V+q+H+W+ne,Q=Math.min(w.offsetHeight*5,j),K=window.getComputedStyle(m),ee=parseInt(K.paddingTop,10),ce=parseInt(K.paddingBottom,10),F=E.top+E.height/2-Xs,I=L-F,z=w.offsetHeight/2,S=w.offsetTop+z,T=V+q+S,D=j-T;if(T<=F){const U=w===R[R.length-1].ref.current;a.style.bottom="0px";const X=c.clientHeight-m.offsetTop-m.offsetHeight,te=Math.max(I,z+(U?ce:0)+X+ne),J=T+te;a.style.height=J+"px"}else{const U=w===R[0].ref.current;a.style.top="0px";const te=Math.max(F,V+m.offsetTop+(U?ee:0)+z)+D;a.style.height=te+"px",m.scrollTop=T-F+m.offsetTop}a.style.margin=`${Xs}px 0`,a.style.minHeight=Q+"px",a.style.maxHeight=L+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,w,v,s.dir,r]);Ni(()=>x(),[x]);const[_,k]=g.useState();Ni(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const P=g.useCallback(E=>{E&&p.current===!0&&(x(),y==null||y(),p.current=!1)},[x,y]);return g.createElement(Gee,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:h,onScrollButtonChange:P},g.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_}},g.createElement(Xe.div,xe({},i,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}}))))}),gT=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Xs,...s}=t,o=Z_(n);return g.createElement(Bk,xe({},o,s,{ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[Gee,Kee]=ld(Gu,{}),vT="SelectViewport",Xee=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Kv(vT,n),s=Kee(vT,n),o=lt(e,i.onViewportChange),a=g.useRef(0);return g.createElement(g.Fragment,null,g.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),g.createElement(Gv.Slot,{scope:n},g.createElement(Xe.div,xe({"data-radix-select-viewport":"",role:"presentation"},r,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:ye(r.onScroll,l=>{const c=l.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&u){const f=Math.abs(a.current-c.scrollTop);if(f>0){const h=window.innerHeight-Xs*2,p=parseFloat(u.style.minHeight),m=parseFloat(u.style.height),w=Math.max(p,m);if(w<h){const v=w+f,y=Math.min(h,v),x=v-y;u.style.height=y+"px",u.style.bottom==="0px"&&(c.scrollTop=x>0?x:0,u.style.justifyContent="flex-end")}}}a.current=c.scrollTop})}))))}),Yee="SelectGroup";ld(Yee);const jx="SelectItem",[qee,Jee]=ld(jx),Zee=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=dc(jx,n),l=Kv(jx,n),c=a.value===r,[u,d]=g.useState(s??""),[f,h]=g.useState(!1),p=lt(e,v=>{var y;return(y=l.itemRefCallback)===null||y===void 0?void 0:y.call(l,v,r,i)}),m=Gl(),w=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g.createElement(qee,{scope:n,value:r,disabled:i,textId:m,isSelected:c,onItemTextChange:g.useCallback(v=>{d(y=>{var x;return y||((x=v==null?void 0:v.textContent)!==null&&x!==void 0?x:"").trim()})},[])},g.createElement(Gv.ItemSlot,{scope:n,value:r,disabled:i,textValue:u},g.createElement(Xe.div,xe({role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},o,{ref:p,onFocus:ye(o.onFocus,()=>h(!0)),onBlur:ye(o.onBlur,()=>h(!1)),onPointerUp:ye(o.onPointerUp,w),onPointerMove:ye(o.onPointerMove,v=>{if(i){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}else v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ye(o.onPointerLeave,v=>{if(v.currentTarget===document.activeElement){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}}),onKeyDown:ye(o.onKeyDown,v=>{var y;((y=l.searchRef)===null||y===void 0?void 0:y.current)!==""&&v.key===" "||(Oee.includes(v.key)&&w(),v.key===" "&&v.preventDefault())})}))))}),cm="SelectItemText",Qee=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=dc(cm,n),a=Kv(cm,n),l=Jee(cm,n),c=Dee(cm,n),[u,d]=g.useState(null),f=lt(e,v=>d(v),l.onItemTextChange,v=>{var y;return(y=a.itemTextRefCallback)===null||y===void 0?void 0:y.call(a,v,l.value,l.disabled)}),h=u==null?void 0:u.textContent,p=g.useMemo(()=>g.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},h),[l.disabled,l.value,h]),{onNativeOptionAdd:m,onNativeOptionRemove:w}=c;return Ni(()=>(m(p),()=>w(p)),[m,w,p]),g.createElement(g.Fragment,null,g.createElement(Xe.span,xe({id:l.textId},s,{ref:f})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Oo.createPortal(s.children,o.valueNode):null)});function F5(t){return t===""||t===void 0}const j5=g.forwardRef((t,e)=>{const{value:n,...r}=t,i=g.useRef(null),s=lt(e,i),o=Y_(n);return g.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&u){const d=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[o,n]),g.createElement(q_,{asChild:!0},g.createElement("select",xe({},r,{ref:s,defaultValue:n})))});j5.displayName="BubbleSelect";function B5(t){const e=ar(t),n=g.useRef(""),r=g.useRef(0),i=g.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function z5(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=ete(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function ete(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const tte=Iee,U5=Fee,nte=Bee,rte=zee,ite=Uee,V5=Vee,ste=Xee,H5=Zee,ote=Qee,um=tte,dm=nte,ef=g.forwardRef(({className:t,children:e,...n},r)=>b.jsxs(U5,{ref:r,className:Ge("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,b.jsx(rte,{asChild:!0,children:b.jsx("span",{className:"icon-[lucide--chevron-down] h-4 w-4 opacity-50"})})]}));ef.displayName=U5.displayName;const tf=g.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>b.jsx(ite,{children:b.jsx(V5,{ref:i,className:Ge("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...r,children:b.jsx(ste,{className:"p-1",children:e})})}));tf.displayName=V5.displayName;const Pc=g.forwardRef(({className:t,children:e,...n},r)=>b.jsx(H5,{ref:r,className:Ge("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:b.jsx(ote,{children:e})}));Pc.displayName=H5.displayName;const W5=["PageUp","PageDown"],G5=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],K5={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ip="Slider",[Bx,ate,lte]=Uh(ip),[X5,rle]=cs(ip,[lte]),[cte,Xv]=X5(ip),ute=g.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:h=!1,...p}=t,[m,w]=g.useState(null),v=lt(e,$=>w($)),y=g.useRef(new Set),x=g.useRef(0),_=o==="horizontal",k=m?!!m.closest("form"):!0,P=_?dte:fte,[E=[],C]=bo({prop:u,defaultProp:c,onChange:$=>{var V;(V=[...y.current][x.current])===null||V===void 0||V.focus(),d($)}}),N=g.useRef(E);function M($){const V=xte(E,$);H($,V)}function R($){H($,x.current)}function L(){const $=N.current[x.current];E[x.current]!==$&&f(E)}function H($,V,{commit:q}={commit:!1}){const ne=Cte(s),W=Ete(Math.round(($-r)/s)*s+r,ne),j=$0(W,[r,i]);C((Q=[])=>{const K=wte(Q,j,V);if(_te(K,l*s)){x.current=K.indexOf(j);const ee=String(K)!==String(Q);return ee&&q&&f(K),ee?K:Q}else return Q})}return g.createElement(cte,{scope:t.__scopeSlider,disabled:a,min:r,max:i,valueIndexToChangeRef:x,thumbs:y.current,values:E,orientation:o},g.createElement(Bx.Provider,{scope:t.__scopeSlider},g.createElement(Bx.Slot,{scope:t.__scopeSlider},g.createElement(P,kt({"aria-disabled":a,"data-disabled":a?"":void 0},p,{ref:v,onPointerDown:ye(p.onPointerDown,()=>{a||(N.current=E)}),min:r,max:i,inverted:h,onSlideStart:a?void 0:M,onSlideMove:a?void 0:R,onSlideEnd:a?void 0:L,onHomeKeyDown:()=>!a&&H(r,0,{commit:!0}),onEndKeyDown:()=>!a&&H(i,E.length-1,{commit:!0}),onStepKeyDown:({event:$,direction:V})=>{if(!a){const W=W5.includes($.key)||$.shiftKey&&G5.includes($.key)?10:1,j=x.current,Q=E[j],K=s*W*V;H(Q+K,j,{commit:!0})}}})))),k&&E.map(($,V)=>g.createElement(yte,{key:V,name:n?n+(E.length>1?"[]":""):void 0,value:$})))}),[Y5,q5]=X5(ip,{startEdge:"left",endEdge:"right",size:"width",direction:1}),dte=g.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=g.useState(null),h=lt(e,x=>f(x)),p=g.useRef(),m=Vh(i),w=m==="ltr",v=w&&!s||!w&&s;function y(x){const _=p.current||d.getBoundingClientRect(),k=[0,_.width],E=Q_(k,v?[n,r]:[r,n]);return p.current=_,E(x-_.left)}return g.createElement(Y5,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width"},g.createElement(J5,kt({dir:m,"data-orientation":"horizontal"},u,{ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const _=y(x.clientX);o==null||o(_)},onSlideMove:x=>{const _=y(x.clientX);a==null||a(_)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:x=>{const k=K5[v?"from-left":"from-right"].includes(x.key);c==null||c({event:x,direction:k?-1:1})}})))}),fte=g.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=g.useRef(null),d=lt(e,u),f=g.useRef(),h=!i;function p(m){const w=f.current||u.current.getBoundingClientRect(),v=[0,w.height],x=Q_(v,h?[r,n]:[n,r]);return f.current=w,x(m-w.top)}return g.createElement(Y5,{scope:t.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1},g.createElement(J5,kt({"data-orientation":"vertical"},c,{ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const w=p(m.clientY);s==null||s(w)},onSlideMove:m=>{const w=p(m.clientY);o==null||o(w)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:m=>{const v=K5[h?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:v?-1:1})}})))}),J5=g.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=Xv(ip,n);return g.createElement(Xe.span,kt({},c,{ref:e,onKeyDown:ye(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):W5.concat(G5).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ye(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():r(d)}),onPointerMove:ye(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:ye(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})}))}),hte="SliderTrack",pte=g.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Xv(hte,n);return g.createElement(Xe.span,kt({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},r,{ref:e}))}),yT="SliderRange",mte=g.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Xv(yT,n),s=q5(yT,n),o=g.useRef(null),a=lt(e,o),l=i.values.length,c=i.values.map(f=>Z5(f,i.min,i.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return g.createElement(Xe.span,kt({"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0},r,{ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}}))}),wT="SliderThumb",gte=g.forwardRef((t,e)=>{const n=ate(t.__scopeSlider),[r,i]=g.useState(null),s=lt(e,a=>i(a)),o=g.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return g.createElement(vte,kt({},t,{ref:s,index:o}))}),vte=g.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,...i}=t,s=Xv(wT,n),o=q5(wT,n),[a,l]=g.useState(null),c=lt(e,w=>l(w)),u=Lk(a),d=s.values[r],f=d===void 0?0:Z5(d,s.min,s.max),h=bte(r,s.values.length),p=u==null?void 0:u[o.size],m=p?Ste(p,f,o.direction):0;return g.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),g.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${f}% + ${m}px)`}},g.createElement(Bx.ItemSlot,{scope:t.__scopeSlider},g.createElement(Xe.span,kt({role:"slider","aria-label":t["aria-label"]||h,"aria-valuemin":s.min,"aria-valuenow":d,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},i,{ref:c,style:d===void 0?{display:"none"}:t.style,onFocus:ye(t.onFocus,()=>{s.valueIndexToChangeRef.current=r})}))))}),yte=t=>{const{value:e,...n}=t,r=g.useRef(null),i=Y_(e);return g.useEffect(()=>{const s=r.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==e&&l){const c=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(c)}},[i,e]),g.createElement("input",kt({style:{display:"none"}},n,{ref:r,defaultValue:e}))};function wte(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function Z5(t,e,n){const s=100/(n-e)*(t-e);return $0(s,[0,100])}function bte(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function xte(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function Ste(t,e,n){const r=t/2,s=Q_([0,50],[0,r]);return(r-s(e)*n)*n}function kte(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function _te(t,e){if(e>0){const n=kte(t);return Math.min(...n)>=e}return!0}function Q_(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Cte(t){return(String(t).split(".")[1]||"").length}function Ete(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const Q5=ute,Ate=pte,Pte=mte,Tte=gte,hl=g.forwardRef(({className:t,...e},n)=>b.jsxs(Q5,{ref:n,className:Ge("relative flex touch-none select-none items-center",t),...e,children:[b.jsx(Ate,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:b.jsx(Pte,{className:"absolute h-full bg-mantis-400"})}),b.jsx(Tte,{className:"block h-5 w-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));hl.displayName=Q5.displayName;const eL="Switch",[$te,ile]=cs(eL),[Ote,Nte]=$te(eL),Mte=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,...u}=t,[d,f]=g.useState(null),h=lt(e,y=>f(y)),p=g.useRef(!1),m=d?!!d.closest("form"):!0,[w=!1,v]=bo({prop:i,defaultProp:s,onChange:c});return g.createElement(Ote,{scope:n,checked:w,disabled:a},g.createElement(Xe.button,kt({type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":tL(w),"data-disabled":a?"":void 0,disabled:a,value:l},u,{ref:h,onClick:ye(t.onClick,y=>{v(x=>!x),m&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})})),m&&g.createElement(Ite,{control:d,bubbles:!p.current,name:r,value:l,checked:w,required:o,disabled:a,style:{transform:"translateX(-100%)"}}))}),Rte="SwitchThumb",Dte=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=Nte(Rte,n);return g.createElement(Xe.span,kt({"data-state":tL(i.checked),"data-disabled":i.disabled?"":void 0},r,{ref:e}))}),Ite=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,s=g.useRef(null),o=Y_(n),a=Lk(e);return g.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&d){const f=new Event("click",{bubbles:r});d.call(l,n),l.dispatchEvent(f)}},[o,n,r]),g.createElement("input",kt({type:"checkbox","aria-hidden":!0,defaultChecked:n},i,{tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function tL(t){return t?"checked":"unchecked"}const nL=Mte,Lte=Dte,Jc=g.forwardRef(({className:t,...e},n)=>b.jsx(nL,{className:Ge("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:b.jsx(Lte,{className:Ge("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Jc.displayName=nL.displayName;const eC=Ee(!1);function rL({className:t}){const e=Ct(),[n,r]=$I(),{status:i}=bn();return b.jsxs("div",{className:Ge("overflow-auto scrollbar-stone-700",t),children:[b.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[b.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),b.jsxs(Rr,{children:[b.jsx(Dr,{children:b.jsxs(Ir,{children:[b.jsx("span",{className:"icon-[lucide--languages] size-6"}),e("settings.language.label")]})}),b.jsxs(um,{value:n.language,onValueChange:s=>r(o=>({...o,language:s})),children:[b.jsx(ef,{className:"w-32",children:b.jsx(dm,{})}),b.jsxs(tf,{children:[b.jsx(Pc,{value:"en",children:b.jsxs("span",{className:"inline-flex items-center gap-2",children:[b.jsx("span",{className:"icon-[circle-flags--uk] size-4"})," English"]})}),b.jsx(Pc,{value:"es",children:b.jsxs("span",{className:"inline-flex items-center gap-2",children:[b.jsx("span",{className:"icon-[circle-flags--ar] size-4"})," Espaol"]})})]})]})]}),b.jsxs(Rr,{children:[b.jsx(Dr,{children:b.jsxs(Ir,{children:[b.jsx("span",{className:"icon-[lucide--pilcrow-square] size-6"}),e("settings.editorFontSize.label")]})}),b.jsxs("div",{className:"flex items-center rounded-lg border border-stone-600 bg-stone-900",children:[b.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize<=8,onClick:()=>r(s=>({...s,editorFontSize:s.editorFontSize-1})),title:e("settings.editorFontSize.decrease"),children:b.jsx("span",{className:"icon-[lucide--minus] size-4"})}),b.jsx("span",{className:"w-8 text-center text-sm font-normal",children:n.editorFontSize}),b.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize>=64,onClick:()=>r(s=>({...s,editorFontSize:s.editorFontSize+1})),title:e("settings.editorFontSize.increase"),children:b.jsx("span",{className:"icon-[lucide--plus] size-4"})})]})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs(Rr,{children:[b.jsxs(Dr,{children:[b.jsxs(Ir,{children:[b.jsx("span",{className:"icon-[lucide--memory-stick] size-6"}),e("settings.dataOnLoad.label")]}),b.jsx(Dd,{children:e("settings.dataOnLoad.description")})]}),b.jsxs(um,{value:n.dataOnLoad,onValueChange:s=>r(o=>({...o,dataOnLoad:s})),children:[b.jsx(ef,{className:"w-32 min-w-[theme(width.32)]",children:b.jsx(dm,{})}),b.jsx(tf,{children:TI.map(s=>b.jsx(Pc,{value:s,children:e(`settings.dataOnLoad.${s}`)},s))})]})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsx(Rr,{children:b.jsxs(Dr,{children:[b.jsxs(Ir,{children:[b.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),b.jsx(Dd,{children:e("settings.devices.description")})]})}),b.jsxs(Rr,{children:[b.jsx(Dr,{children:b.jsx(Ir,{children:e("settings.devices.keyboard-and-screen")})}),b.jsx(Jc,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>r(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}})),disabled:i.type!=="stopped"})]}),b.jsxs(Rr,{children:[b.jsxs(Dr,{children:[b.jsx(Ir,{children:e("settings.devices.pic.label")}),b.jsx(Dd,{children:e("settings.devices.pic.description")})]}),b.jsx(Jc,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>r(o=>({...o,devices:{...o.devices,pic:s}})),disabled:i.type!=="stopped"})]}),b.jsxs(Rr,{children:[b.jsx(Dr,{children:b.jsx(Ir,{children:e("settings.devices.pio.label")})}),b.jsxs(um,{value:n.devices.pio??"null",onValueChange:s=>r(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),disabled:i.type!=="stopped",children:[b.jsx(ef,{className:"w-52 min-w-[theme(width.52)]",children:b.jsx(dm,{})}),b.jsx(tf,{children:TG.map(s=>b.jsx(Pc,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),b.jsxs(Rr,{children:[b.jsx(Dr,{children:b.jsx(Ir,{children:e("settings.devices.handshake.label")})}),b.jsxs(um,{value:n.devices.handshake??"null",onValueChange:s=>r(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:i.type!=="stopped",children:[b.jsx(ef,{className:"w-52 min-w-[theme(width.52)]",children:b.jsx(dm,{})}),b.jsx(tf,{children:$G.map(s=>b.jsx(Pc,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs(Rr,{children:[b.jsxs(Dr,{children:[b.jsxs(Ir,{children:[b.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),b.jsx(Dd,{children:e("settings.animations.description")})]}),b.jsx(Jc,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{r(o=>({...o,animations:s})),s===!1&&a5()}})]}),b.jsxs(Rr,{children:[b.jsx(Dr,{children:b.jsxs(Ir,{children:[b.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),b.jsx(hl,{className:"w-44",...Bw({value:n.executionUnit,onValueChange:s=>r(o=>({...o,executionUnit:s})),min:500,max:1})})]}),b.jsxs(Rr,{children:[b.jsx(Dr,{children:b.jsxs(Ir,{children:[b.jsx("span",{className:"icon-[lucide--clock] size-6"}),e("settings.speeds.clockSpeed")]})}),b.jsx(hl,{className:"w-44",...Bw({value:n.clockSpeed,onValueChange:s=>r(o=>({...o,clockSpeed:s})),min:3e3,max:100})})]}),b.jsxs(Rr,{children:[b.jsx(Dr,{children:b.jsxs(Ir,{children:[b.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),b.jsx(hl,{className:"w-44",...Bw({value:n.printerSpeed,onValueChange:s=>r(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs(Rr,{children:[b.jsxs(Dr,{children:[b.jsxs(Ir,{children:[b.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),b.jsxs(Dd,{children:[e("settings.filters.description"),b.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>r(s=>({...s,filterBightness:Ec.filterBightness,filterContrast:Ec.filterContrast,filterInvert:Ec.filterInvert,filterSaturation:Ec.filterSaturation})),children:e("settings.filters.revert")})]})]}),b.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[b.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),b.jsx(hl,{value:[n.filterBightness],onValueChange:([s])=>r(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),b.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),b.jsx(hl,{value:[n.filterContrast],onValueChange:([s])=>r(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),b.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),b.jsx(Jc,{checked:n.filterInvert,onCheckedChange:s=>r(o=>({...o,filterInvert:s}))}),b.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),b.jsx(hl,{value:[n.filterSaturation],onValueChange:([s])=>r(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("div",{className:"flex justify-end p-4",children:b.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>r(s=>({...Ec,language:s.language,devices:s.devices})),children:[b.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function Rr({children:t}){return b.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Dr({children:t}){return b.jsx("div",{className:"grow",children:t})}function Ir({children:t}){return b.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function Dd({children:t}){return b.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function Bw({value:t,onValueChange:e,min:n,max:r}){const i=Math.log(n),o=(Math.log(r)-i)/100;return{value:[(Math.log(t)-i)/o],onValueChange:a=>e(Math.exp(i+o*a[0])),min:0,max:100}}function Fte(){const t=Ct(),[e,n]=td(eC);return b.jsxs("header",{className:"relative p-2 text-sm text-white",children:[b.jsx(Tee,{className:" absolute inset-0"}),b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex select-none items-center justify-center",children:[b.jsx("img",{src:"/VonSim8/favicon.svg",className:"mr-2 h-10 w-10"}),b.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",b.jsx("span",{className:"text-green-400",children:"Sim"}),"8"]})]}),b.jsx("button",{className:Ge("h-min w-min rounded-full p-2 transition-colors focus:outline-stone-400",e?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:t("settings.title"),onClick:()=>n(!e),children:b.jsx("span",{className:"block h-6 w-6",children:b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-full w-full",children:[b.jsx("circle",{cx:"12",cy:"12",r:"3"}),b.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2h-1.5a2 2 0 0 1-2-2v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2v-1.5a2 2 0 0 1 2-2h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2h1.5a2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09a1.65 1.65 0 0 0 1.51 1h.09a2 2 0 0 1 2 2v1.5a2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})})})]})]})}const iL="ToastProvider",[tC,jte,Bte]=Uh("Toast"),[sL,sle]=cs("Toast",[Bte]),[zte,Yv]=sL(iL),oL=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=g.useState(null),[c,u]=g.useState(0),d=g.useRef(!1),f=g.useRef(!1);return g.createElement(tC.Provider,{scope:e},g.createElement(zte,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:g.useCallback(()=>u(h=>h+1),[]),onToastRemove:g.useCallback(()=>u(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f},o))};oL.propTypes={label(t){if(t.label&&typeof t.label=="string"&&!t.label.trim()){const e=`Invalid prop \`label\` supplied to \`${iL}\`. Expected non-empty \`string\`.`;return new Error(e)}return null}};const Ute="ToastViewport",Vte=["F8"],zx="toast.viewportPause",Ux="toast.viewportResume",Hte=g.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Vte,label:i="Notifications ({hotkey})",...s}=t,o=Yv(Ute,n),a=jte(n),l=g.useRef(null),c=g.useRef(null),u=g.useRef(null),d=g.useRef(null),f=lt(e,d,o.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;g.useEffect(()=>{const w=v=>{var y;r.every(_=>v[_]||v.code===_)&&((y=d.current)===null||y===void 0||y.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),g.useEffect(()=>{const w=l.current,v=d.current;if(p&&w&&v){const y=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(zx);v.dispatchEvent(P),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(Ux);v.dispatchEvent(P),o.isClosePausedRef.current=!1}},_=P=>{!w.contains(P.relatedTarget)&&x()},k=()=>{w.contains(document.activeElement)||x()};return w.addEventListener("focusin",y),w.addEventListener("focusout",_),w.addEventListener("pointermove",y),w.addEventListener("pointerleave",k),window.addEventListener("blur",y),window.addEventListener("focus",x),()=>{w.removeEventListener("focusin",y),w.removeEventListener("focusout",_),w.removeEventListener("pointermove",y),w.removeEventListener("pointerleave",k),window.removeEventListener("blur",y),window.removeEventListener("focus",x)}}},[p,o.isClosePausedRef]);const m=g.useCallback(({tabbingDirection:w})=>{const y=a().map(x=>{const _=x.ref.current,k=[_,...one(_)];return w==="forwards"?k:k.reverse()});return(w==="forwards"?y.reverse():y).flat()},[a]);return g.useEffect(()=>{const w=d.current;if(w){const v=y=>{const x=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!x){const C=document.activeElement,N=y.shiftKey;if(y.target===w&&N){var k;(k=c.current)===null||k===void 0||k.focus();return}const L=m({tabbingDirection:N?"backwards":"forwards"}),H=L.findIndex($=>$===C);if(zw(L.slice(H+1)))y.preventDefault();else{var P,E;N?(P=c.current)===null||P===void 0||P.focus():(E=u.current)===null||E===void 0||E.focus()}}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[a,m]),g.createElement(AU,{ref:l,role:"region","aria-label":i.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:p?void 0:"none"}},p&&g.createElement(bT,{ref:c,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"forwards"});zw(w)}}),g.createElement(tC.Slot,{scope:n},g.createElement(Xe.ol,xe({tabIndex:-1},s,{ref:f}))),p&&g.createElement(bT,{ref:u,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"backwards"});zw(w)}}))}),Wte="ToastFocusProxy",bT=g.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=Yv(Wte,n);return g.createElement(q_,xe({"aria-hidden":!0,tabIndex:0},i,{ref:e,style:{position:"fixed"},onFocus:o=>{var a;const l=o.relatedTarget;!((a=s.viewport)!==null&&a!==void 0&&a.contains(l))&&r()}}))}),qv="Toast",Gte="toast.swipeStart",Kte="toast.swipeMove",Xte="toast.swipeCancel",Yte="toast.swipeEnd",qte=g.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a=!0,l]=bo({prop:r,defaultProp:i,onChange:s});return g.createElement(No,{present:n||a},g.createElement(aL,xe({open:a},o,{ref:e,onClose:()=>l(!1),onPause:ar(t.onPause),onResume:ar(t.onResume),onSwipeStart:ye(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ye(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ye(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ye(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})))}),[Jte,Zte]=sL(qv,{onClose(){}}),aL=g.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:h,...p}=t,m=Yv(qv,n),[w,v]=g.useState(null),y=lt(e,$=>v($)),x=g.useRef(null),_=g.useRef(null),k=i||m.duration,P=g.useRef(0),E=g.useRef(k),C=g.useRef(0),{onToastAdd:N,onToastRemove:M}=m,R=ar(()=>{var $;(w==null?void 0:w.contains(document.activeElement))&&(($=m.viewport)===null||$===void 0||$.focus()),o()}),L=g.useCallback($=>{!$||$===1/0||(window.clearTimeout(C.current),P.current=new Date().getTime(),C.current=window.setTimeout(R,$))},[R]);g.useEffect(()=>{const $=m.viewport;if($){const V=()=>{L(E.current),c==null||c()},q=()=>{const ne=new Date().getTime()-P.current;E.current=E.current-ne,window.clearTimeout(C.current),l==null||l()};return $.addEventListener(zx,q),$.addEventListener(Ux,V),()=>{$.removeEventListener(zx,q),$.removeEventListener(Ux,V)}}},[m.viewport,k,l,c,L]),g.useEffect(()=>{s&&!m.isClosePausedRef.current&&L(k)},[s,k,m.isClosePausedRef,L]),g.useEffect(()=>(N(),()=>M()),[N,M]);const H=g.useMemo(()=>w?dL(w):null,[w]);return m.viewport?g.createElement(g.Fragment,null,H&&g.createElement(Qte,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0},H),g.createElement(Jte,{scope:n,onClose:R},Oo.createPortal(g.createElement(tC.ItemSlot,{scope:n},g.createElement(EU,{asChild:!0,onEscapeKeyDown:ye(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||R(),m.isFocusedToastEscapeKeyDownRef.current=!1})},g.createElement(Xe.li,xe({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection},p,{ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ye(t.onKeyDown,$=>{$.key==="Escape"&&(a==null||a($.nativeEvent),$.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:ye(t.onPointerDown,$=>{$.button===0&&(x.current={x:$.clientX,y:$.clientY})}),onPointerMove:ye(t.onPointerMove,$=>{if(!x.current)return;const V=$.clientX-x.current.x,q=$.clientY-x.current.y,ne=!!_.current,W=["left","right"].includes(m.swipeDirection),j=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,Q=W?j(0,V):0,K=W?0:j(0,q),ee=$.pointerType==="touch"?10:2,ce={x:Q,y:K},F={originalEvent:$,delta:ce};ne?(_.current=ce,fm(Kte,d,F,{discrete:!1})):xT(ce,m.swipeDirection,ee)?(_.current=ce,fm(Gte,u,F,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(V)>ee||Math.abs(q)>ee)&&(x.current=null)}),onPointerUp:ye(t.onPointerUp,$=>{const V=_.current,q=$.target;if(q.hasPointerCapture($.pointerId)&&q.releasePointerCapture($.pointerId),_.current=null,x.current=null,V){const ne=$.currentTarget,W={originalEvent:$,delta:V};xT(V,m.swipeDirection,m.swipeThreshold)?fm(Yte,h,W,{discrete:!0}):fm(Xte,f,W,{discrete:!0}),ne.addEventListener("click",j=>j.preventDefault(),{once:!0})}})})))),m.viewport))):null});aL.propTypes={type(t){if(t.type&&!["foreground","background"].includes(t.type)){const e=`Invalid prop \`type\` supplied to \`${qv}\`. Expected \`foreground | background\`.`;return new Error(e)}return null}};const Qte=t=>{const{__scopeToast:e,children:n,...r}=t,i=Yv(qv,e),[s,o]=g.useState(!1),[a,l]=g.useState(!1);return ine(()=>o(!0)),g.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:g.createElement(vv,{asChild:!0},g.createElement(q_,r,s&&g.createElement(g.Fragment,null,i.label," ",n)))},ene=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return g.createElement(Xe.div,xe({},r,{ref:e}))}),tne=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return g.createElement(Xe.div,xe({},r,{ref:e}))}),nne="ToastAction",lL=g.forwardRef((t,e)=>{const{altText:n,...r}=t;return n?g.createElement(uL,{altText:n,asChild:!0},g.createElement(cL,xe({},r,{ref:e}))):null});lL.propTypes={altText(t){return t.altText?null:new Error(`Missing prop \`altText\` expected on \`${nne}\``)}};const rne="ToastClose",cL=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=Zte(rne,n);return g.createElement(uL,{asChild:!0},g.createElement(Xe.button,xe({type:"button"},r,{ref:e,onClick:ye(t.onClick,i.onClose)})))}),uL=g.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return g.createElement(Xe.div,xe({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0},i,{ref:e}))});function dL(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),sne(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...dL(r))}}),e}function fm(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?dk(i,s):i.dispatchEvent(s)}const xT=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function ine(t=()=>{}){const e=ar(t);Ni(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function sne(t){return t.nodeType===t.ELEMENT_NODE}function one(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function zw(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}const ane=oL,fL=Hte,hL=qte,pL=ene,mL=tne,gL=lL,vL=cL,lne=ane,yL=g.forwardRef(({className:t,...e},n)=>b.jsx(fL,{ref:n,className:Ge("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));yL.displayName=fL.displayName;const wL=g.forwardRef(({className:t,variant:e="default",...n},r)=>b.jsx(hL,{ref:r,"data-variant":e,className:Ge("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-bottom-full data-[state=open]:slide-in-from-top-full",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"group bg-red-900 text-red-50",e==="info"&&"border border-green-500 border-stone-600 bg-stone-900 text-white",t),...n}));wL.displayName=hL.displayName;const bL=g.forwardRef(({className:t,...e},n)=>b.jsx(gL,{ref:n,className:Ge("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));bL.displayName=gL.displayName;const xL=g.forwardRef(({className:t,...e},n)=>b.jsx(vL,{ref:n,className:Ge("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-data-[variant=error]:text-red-300 group-data-[variant=error]:hover:text-red-50 group-data-[variant=error]:focus:ring-red-400 group-data-[variant=error]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:b.jsx("span",{className:"icon-[lucide--x] block h-4 w-4"})}));xL.displayName=vL.displayName;const SL=g.forwardRef(({className:t,...e},n)=>b.jsx(pL,{ref:n,className:Ge("text-sm font-semibold",t),...e}));SL.displayName=pL.displayName;const kL=g.forwardRef(({className:t,...e},n)=>b.jsx(mL,{ref:n,className:Ge("text-sm opacity-90",t),...e}));kL.displayName=mL.displayName;var Si=function(t,e){return Number(t.toFixed(e))},cne=function(t,e){return typeof t=="number"?t:e},Lt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},une=function(t){return-Math.cos(t*Math.PI)/2+.5},dne=function(t){return t},fne=function(t){return t*t},hne=function(t){return t*(2-t)},pne=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},mne=function(t){return t*t*t},gne=function(t){return--t*t*t+1},vne=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},yne=function(t){return t*t*t*t},wne=function(t){return 1- --t*t*t*t},bne=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},xne=function(t){return t*t*t*t*t},Sne=function(t){return 1+--t*t*t*t*t},kne=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},_L={easeOut:une,linear:dne,easeInQuad:fne,easeOutQuad:hne,easeInOutQuad:pne,easeInCubic:mne,easeOutCubic:gne,easeInOutCubic:vne,easeInQuart:yne,easeOutQuart:wne,easeInOutQuart:bne,easeInQuint:xne,easeOutQuint:Sne,easeInOutQuint:kne},CL=function(t){typeof t=="number"&&cancelAnimationFrame(t)},Os=function(t){t.mounted&&(CL(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function EL(t,e,n,r){if(t.mounted){var i=new Date().getTime(),s=1;Os(t),t.animation=function(){if(!t.mounted)return CL(t.animation);var o=new Date().getTime()-i,a=o/n,l=_L[e],c=l(a);o>=n?(r(s),t.animation=null):t.animation&&(r(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function _ne(t){var e=t.scale,n=t.positionX,r=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(r))}function tl(t,e,n,r){var i=_ne(e);if(!(!t.mounted||!i)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,f=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):EL(t,r,n,function(h){var p=a+u*h,m=l+d*h,w=c+f*h;s(p,m,w)})}}function Cne(t,e,n){var r=t.offsetWidth,i=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=r-a,u=i-l;return{wrapperWidth:r,wrapperHeight:i,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var Ene=function(t,e,n,r,i,s,o){var a=t>e?n*(o?1:.5):0,l=r>i?s*(o?1:.5):0,c=t-e-a,u=a,d=r-i-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},nC=function(t,e){var n=t.wrapperComponent,r=t.contentComponent,i=t.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var s=Cne(n,r,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,f=Ene(o,l,c,a,u,d,!!i);return f},Vx=function(t,e,n,r){return r?t<e?Si(e,2):t>n?Si(n,2):Si(t,2):Si(t,2)},Ku=function(t,e){var n=nC(t,e);return t.bounds=n,n};function Jv(t,e,n,r,i,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;o&&(d=i,f=s);var h=Vx(t,a-d,c+d,r),p=Vx(e,l-f,u+f,r);return{x:h,y:p}}function Zv(t,e,n,r,i,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=r-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,f=c-n*u,h=Jv(d,f,i,s,0,0,null);return h}function sp(t,e,n,r,i){var s=i?r:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var ST=function(t,e){var n=t.setup.panning.excluded,r=t.isInitialized,i=t.wrapperComponent,s=e.target,o=i==null?void 0:i.contains(s),a=r&&s&&o;if(!a)return!1;var l=Qv(s,n);return!l},kT=function(t){var e=t.isInitialized,n=t.isPanning,r=t.setup,i=r.panning.disabled,s=e&&n&&!i;return!!s},Ane=function(t,e){var n=t.transformState,r=n.positionX,i=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-r,y:o-i}},Pne=function(t,e){var n=e.touches,r=t.transformState,i=r.positionX,s=r.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-i,y:l-s}}};function Tne(t){var e=t.transformState,n=e.positionX,r=e.positionY,i=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,f=u.minPositionX,h=u.maxPositionY,p=u.minPositionY,m=n>d||n<f,w=r>h||r<p,v=n>d?c.offsetWidth:t.setup.minPositionX||0,y=r>h?c.offsetHeight:t.setup.minPositionY||0,x=Zv(t,v,y,i,t.bounds,a||l),_=x.x,k=x.y;return{scale:i,positionX:m?_:n,positionY:w?k:r}}}function $ne(t,e,n,r,i){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var f=Jv(e,n,a,s,r,i,o),h=f.x,p=f.y;t.setTransformState(c,h,p)}}var One=function(t,e,n){var r=t.startCoords,i=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=i.positionX,c=i.positionY;if(!r)return{x:l,y:c};var u=e-r.x,d=n-r.y,f=o?l:u,h=a?c:d;return{x:f,y:h}},O0=function(t,e){var n=t.setup,r=t.transformState,i=r.scale,s=n.minScale,o=n.disablePadding;return e>0&&i>=s&&!o?e:0},Nne=function(t){var e=t.mounted,n=t.setup,r=n.disabled,i=n.velocityAnimation,s=t.transformState.scale,o=i.disabled,a=!o||s>1||!r||e;return!!a},Mne=function(t){var e=t.mounted,n=t.velocity,r=t.bounds,i=t.setup,s=i.disabled,o=i.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!r)};function Rne(t,e){var n=t.setup.velocityAnimation,r=n.equalToMove,i=n.animationTime,s=n.sensitivity;return r?i*e*s:i}function _T(t,e,n,r,i,s,o,a,l,c){if(i){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return r?e:Vx(t,s,o,i)}function Dne(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function Ine(t,e){var n=Nne(t);if(n){var r=t.lastMousePosition,i=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(r&&i&&o){var c=Dne(o,a),u=e.x-r.x,d=e.y-r.y,f=u/c,h=d/c,p=l-i,m=u*u+d*d,w=Math.sqrt(m)/p;t.velocity={velocityX:f,velocityY:h,total:w}}t.lastMousePosition=e,t.velocityTime=l}}function Lne(t){var e=t.velocity,n=t.bounds,r=t.setup,i=t.wrapperComponent,s=Mne(t);if(!(!s||!e||!n||!i)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,h=r.limitToBounds,p=r.alignmentAnimation,m=r.zoomAnimation,w=r.panning,v=w.lockAxisY,y=w.lockAxisX,x=m.animationType,_=p.sizeX,k=p.sizeY,P=p.velocityAlignmentTime,E=P,C=Rne(t,l),N=Math.max(C,E),M=O0(t,_),R=O0(t,k),L=M*i.offsetWidth/100,H=R*i.offsetHeight/100,$=c+L,V=u-L,q=d+H,ne=f-H,W=t.transformState,j=new Date().getTime();EL(t,x,N,function(Q){var K=t.transformState,ee=K.scale,ce=K.positionX,F=K.positionY,I=new Date().getTime()-j,z=I/E,S=_L[p.animationType],T=1-S(Math.min(1,z)),D=1-Q,O=ce+o*D,U=F+a*D,X=_T(O,W.positionX,ce,y,h,u,c,V,$,T),te=_T(U,W.positionY,F,v,h,f,d,ne,q,T);(ce!==O||F!==U)&&t.setTransformState(ee,X,te)})}}function CT(t,e){var n=t.transformState.scale;Os(t),Ku(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?Pne(t,e):Ane(t,e)}function AL(t){var e=t.transformState.scale,n=t.setup,r=n.minScale,i=n.alignmentAnimation,s=i.disabled,o=i.sizeX,a=i.sizeY,l=i.animationTime,c=i.animationType,u=s||e<r||!o&&!a;if(!u){var d=Tne(t);d&&tl(t,d,l,c)}}function ET(t,e,n){var r=t.startCoords,i=t.setup,s=i.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(r){var l=One(t,e,n),c=l.x,u=l.y,d=O0(t,o),f=O0(t,a);Ine(t,{x:c,y:u}),$ne(t,c,u,d,f)}}function Fne(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,r=t.wrapperComponent,i=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=r==null?void 0:r.getBoundingClientRect(),o=i==null?void 0:i.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,f=!e&&n&&(n==null?void 0:n.total)>.1&&d;f?Lne(t):AL(t)}}function rC(t,e,n,r){var i=t.setup,s=i.minScale,o=i.maxScale,a=i.limitToBounds,l=sp(Si(e,2),s,o,0,!1),c=Ku(t,l),u=Zv(t,n,r,l,c,a),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function PL(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||r>=o;if((r>=1||a)&&AL(t),!(f||!i||!t.mounted)){var h=e||i.offsetWidth/2,p=n||i.offsetHeight/2,m=rC(t,o,h,p);m&&tl(t,m,u,d)}}var $a=function(){return $a=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$a.apply(this,arguments)};function AT(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var hm={previousScale:1,scale:1,positionX:0,positionY:0},Id={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},TL=function(t){var e,n,r,i;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:hm.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:hm.scale,positionX:(r=t.initialPositionX)!==null&&r!==void 0?r:hm.positionX,positionY:(i=t.initialPositionY)!==null&&i!==void 0?i:hm.positionY}},PT=function(t){var e=$a({},Id);return Object.keys(t).forEach(function(n){var r=typeof t[n]<"u",i=typeof Id[n]<"u";if(i&&r){var s=Object.prototype.toString.call(Id[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=$a($a({},Id[n]),t[n]):a?e[n]=AT(AT([],Id[n],!0),t[n],!0):e[n]=t[n]}}),e},$L=function(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!i)throw new Error("Wrapper is not mounted");var d=c?r*Math.exp(e*n):r+e*n,f=sp(Si(d,3),a,o,u,!1);return f};function OL(t,e,n,r,i){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,f=(u/2-l)/a,h=(d/2-c)/a,p=$L(t,e,n),m=rC(t,p,f,h);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");tl(t,m,r,i)}function NL(t,e,n,r){var i=t.setup,s=t.wrapperComponent,o=i.limitToBounds,a=TL(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var f=nC(t,a.scale),h=Jv(a.positionX,a.positionY,f,o,0,0,s),p={scale:a.scale,positionX:h.x,positionY:h.y};c===a.scale&&u===a.positionX&&d===a.positionY||(r==null||r(),tl(t,p,e,n))}}function jne(t,e,n,r){var i=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*r.scale,l=s.y*r.scale;return{x:(i.x-o.x+a)/r.scale,y:(i.y-o.y+l)/r.scale}}function Bne(t,e,n){var r=t.wrapperComponent,i=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!r||!i)return s;var u=r.getBoundingClientRect(),d=e.getBoundingClientRect(),f=jne(e,r,i,s),h=f.x,p=f.y,m=d.width/s.scale,w=d.height/s.scale,v=r.offsetWidth/m,y=r.offsetHeight/w,x=sp(n||Math.min(v,y),l,c,0,!1),_=(u.width-m*x)/2,k=(u.height-w*x)/2,P=(u.left-h)*x+_,E=(u.top-p)*x+k,C=nC(t,x),N=Jv(P,E,C,a,0,0,r),M=N.x,R=N.y;return{positionX:M,positionY:R,scale:x}}var zne=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),OL(t,1,e,n,r)}},Une=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),OL(t,-1,e,n,r)}},Vne=function(t){return function(e,n,r,i,s){i===void 0&&(i=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!u||!d)){var h={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(r)?c:r};tl(t,h,i,s)}}},Hne=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),NL(t,e,n)}},Wne=function(t){return function(e,n,r){n===void 0&&(n=200),r===void 0&&(r="easeOut");var i=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=ML(e||i.scale,s,o);tl(t,a,n,r)}}},Gne=function(t){return function(e,n,r,i){r===void 0&&(r=600),i===void 0&&(i="easeOut"),Os(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=Bne(t,o,n);tl(t,a,r,i)}}},Hx=function(t){return{instance:t,zoomIn:zne(t),zoomOut:Une(t),setTransform:Vne(t),resetTransform:Hne(t),centerView:Wne(t),zoomToElement:Gne(t)}},Kne=function(t){return{instance:t,state:t.transformState}},wt=function(t){var e={};return Object.assign(e,Kne(t)),Object.assign(e,Hx(t)),e},Uw=!1;function Vw(){try{var t={get passive(){return Uw=!0,!1}};return t}catch{return Uw=!1,Uw}}var Qv=function(t,e){var n=t.tagName.toUpperCase(),r=e.find(function(s){return s.toUpperCase()===n});if(r)return!0;var i=e.find(function(s){return t.classList.contains(s)});return!!i},Wx=function(t){t&&clearTimeout(t)},Xne=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},ML=function(t,e,n){var r=n.offsetWidth*t,i=n.offsetHeight*t,s=(e.offsetWidth-r)/2,o=(e.offsetHeight-i)/2;return{scale:t,positionX:s,positionY:o}};function Yne(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var qne=function(t,e){var n=t.setup.wheel,r=n.disabled,i=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!r&&c;if(!u||i&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Qv(c,o);return!d},Jne=function(t){return t?t.deltaY<0?1:-1:0};function Zne(t,e){var n=Jne(t),r=cne(e,n);return r}function RL(t,e,n){var r=e.getBoundingClientRect(),i=0,s=0;if("clientX"in t)i=(t.clientX-r.left)/n,s=(t.clientY-r.top)/n;else{var o=t.touches[0];i=(o.clientX-r.left)/n,s=(o.clientY-r.top)/n}return(Number.isNaN(i)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:i,y:s}}var Qne=function(t,e,n,r,i){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,f=u.size,h=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n;if(i)return p;var m=r?!1:!h,w=sp(Si(p,3),c,l,f,m&&!d);return w},ere=function(t,e){var n=t.previousWheelEvent,r=t.transformState.scale,i=t.setup,s=i.maxScale,o=i.minScale;return n?r<s||r>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},tre=function(t,e){var n=t.setup.pinch,r=n.disabled,i=n.excluded,s=t.isInitialized,o=e.target,a=s&&!r&&o;if(!a)return!1;var l=Qv(o,i);return!l},nre=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,r=t.pinchStartDistance,i=n&&!e&&r;return!!i},rre=function(t,e,n){var r=n.getBoundingClientRect(),i=t.touches,s=Si(i[0].clientX-r.left,5),o=Si(i[0].clientY-r.top,5),a=Si(i[1].clientX-r.left,5),l=Si(i[1].clientY-r.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},DL=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},ire=function(t,e){var n=t.pinchStartScale,r=t.pinchStartDistance,i=t.setup,s=i.maxScale,o=i.minScale,a=i.zoomAnimation,l=i.disablePadding,c=a.size,u=a.disabled;if(!n||r===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/r,f=d*n;return sp(Si(f,2),o,s,c,!u&&!l)},sre=160,ore=100,are=function(t,e){var n=t.props,r=n.onWheelStart,i=n.onZoomStart;t.wheelStopEventTimer||(Os(t),Lt(wt(t),e,r),Lt(wt(t),e,i))},lre=function(t,e){var n=t.props,r=n.onWheel,i=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,h=o.disablePadding,p=o.smooth,m=d.size,w=d.disabled,v=f.step,y=f.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var x=Zne(e,null),_=p?y*Math.abs(e.deltaY):v,k=Qne(t,x,_,!e.ctrlKey);if(l!==k){var P=Ku(t,k),E=RL(e,s,l),C=w||m===0||u||h,N=c&&C,M=Zv(t,E.x,E.y,k,P,N),R=M.x,L=M.y;t.previousWheelEvent=e,t.setTransformState(k,R,L),Lt(wt(t),e,r),Lt(wt(t),e,i)}},cre=function(t,e){var n=t.props,r=n.onWheelStop,i=n.onZoomStop;Wx(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(PL(t,e.x,e.y),t.wheelAnimationTimer=null)},ore);var s=ere(t,e);s&&(Wx(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Lt(wt(t),e,r),Lt(wt(t),e,i))},sre))},ure=function(t,e){var n=DL(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,Os(t)},dre=function(t,e){var n=t.contentComponent,r=t.pinchStartDistance,i=t.transformState.scale,s=t.setup,o=s.limitToBounds,a=s.centerZoomedOut,l=s.zoomAnimation,c=l.disabled,u=l.size;if(!(r===null||!n)){var d=rre(e,i,n);if(!(!Number.isFinite(d.x)||!Number.isFinite(d.y))){var f=DL(e),h=ire(t,f);if(h!==i){var p=Ku(t,h),m=c||u===0||a,w=o&&m,v=Zv(t,d.x,d.y,h,p,w),y=v.x,x=v.y;t.pinchMidpoint=d,t.lastDistance=f,t.setTransformState(h,y,x)}}}},fre=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,PL(t,e==null?void 0:e.x,e==null?void 0:e.y)},IL=function(t,e){var n=t.props.onZoomStop,r=t.setup.doubleClick.animationTime;Wx(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Lt(wt(t),e,n)},r)},hre=function(t,e){var n=t.props,r=n.onZoomStart,i=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Lt(wt(t),e,r),NL(t,o,a,function(){return Lt(wt(t),e,i)}),IL(t,e)};function pre(t,e){var n=t.setup,r=t.doubleClickStopEventTimer,i=t.transformState,s=t.contentComponent,o=i.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,h=u.step,p=u.animationTime,m=u.animationType;if(!d&&!r){if(f==="reset")return hre(t,e);if(!s)return console.error("No ContentComponent found");var w=f==="zoomOut"?-1:1,v=$L(t,w,h);if(o!==v){Lt(wt(t),e,l);var y=RL(e,s,o),x=rC(t,v,y.x,y.y);if(!x)return console.error("Error during zoom event. New transformation state was not calculated.");Lt(wt(t),e,c),tl(t,x,p,m),IL(t,e)}}}var mre=function(t,e){var n=t.isInitialized,r=t.setup,i=t.wrapperComponent,s=r.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=i==null?void 0:i.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=Qv(l,a);return!d},gre=function(){function t(e){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(r){Ku(n,n.transformState.scale),n.setup=PT(r)},this.initializeWindowEvents=function(){var r,i=Vw(),s=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,o=s==null?void 0:s.defaultView;o==null||o.addEventListener("mousedown",n.onPanningStart,i),o==null||o.addEventListener("mousemove",n.onPanning,i),o==null||o.addEventListener("mouseup",n.onPanningStop,i),s==null||s.addEventListener("mouseleave",n.clearPanning,i),o==null||o.addEventListener("keyup",n.setKeyUnPressed,i),o==null||o.addEventListener("keydown",n.setKeyPressed,i)},this.cleanupWindowEvents=function(){var r,i,s=Vw(),o=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),Os(n),(i=n.observer)===null||i===void 0||i.disconnect()},this.handleInitializeWrapperEvents=function(r){var i=Vw();r.addEventListener("wheel",n.onWheelZoom,i),r.addEventListener("dblclick",n.onDoubleClick,i),r.addEventListener("touchstart",n.onTouchPanningStart,i),r.addEventListener("touchmove",n.onTouchPanning,i),r.addEventListener("touchend",n.onTouchPanningStop,i)},this.handleInitialize=function(r){var i=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(wt(n))}),i&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s;n.onInitCallbacks.forEach(function(o){return o(wt(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect()}),n.observer.observe(r))},this.onWheelZoom=function(r){var i=n.setup.disabled;if(!i){var s=qne(n,r);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(are(n,r),lre(n,r),cre(n,r))}}},this.onPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=ST(n,r);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.button===0&&!n.setup.panning.allowLeftClickPan||r.button===1&&!n.setup.panning.allowMiddleClickPan||r.button===2&&!n.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),Os(n),CT(n,r),Lt(wt(n),r,s)))}}},this.onPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(!i){var o=kT(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.preventDefault(),r.stopPropagation(),ET(n,r.clientX,r.clientY),Lt(wt(n),r,s))}}},this.onPanningStop=function(r){var i=n.props.onPanningStop;n.isPanning&&(Fne(n),Lt(wt(n),r,i))},this.onPinchStart=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!i){var l=tre(n,r);l&&(ure(n,r),Os(n),Lt(wt(n),r,o),Lt(wt(n),r,a))}},this.onPinch=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!i){var l=nre(n);l&&(r.preventDefault(),r.stopPropagation(),dre(n,r),Lt(wt(n),r,o),Lt(wt(n),r,a))}},this.onPinchStop=function(r){var i=n.props,s=i.onPinchingStop,o=i.onZoomStop;n.pinchStartScale&&(fre(n),Lt(wt(n),r,s),Lt(wt(n),r,o))},this.onTouchPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=ST(n,r);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200;if(a&&r.touches.length===1)n.onDoubleClick(r);else{n.lastTouch=+new Date,Os(n);var l=r.touches,c=l.length===1,u=l.length===2;c&&(Os(n),CT(n,r),Lt(wt(n),r,s)),u&&n.onPinchStart(r)}}}},this.onTouchPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&r.touches.length===1){if(i)return;var o=kT(n);if(!o)return;r.preventDefault(),r.stopPropagation();var a=r.touches[0];ET(n,a.clientX,a.clientY),Lt(wt(n),r,s)}else r.touches.length>1&&n.onPinch(r)},this.onTouchPanningStop=function(r){n.onPanningStop(r),n.onPinchStop(r)},this.onDoubleClick=function(r){var i=n.setup.disabled;if(!i){var s=mre(n,r);s&&pre(n,r)}},this.clearPanning=function(r){n.isPanning&&n.onPanningStop(r)},this.setKeyPressed=function(r){n.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){n.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(i){return n.pressedKeys[i]}):!0},this.setTransformState=function(r,i,s){var o=n.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(s)){r!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=r),n.transformState.positionX=i,n.transformState.positionY=s,n.applyTransformation();var a=wt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Lt(a,{scale:r,positionX:i,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var r=ML(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,i,s){return n.props.customTransform?n.props.customTransform(r,i,s):Xne(r,i,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var r=n.transformState,i=r.scale,s=r.positionX,o=r.positionY,a=n.handleTransformStyles(s,o,i);n.contentComponent.style.transform=a}},this.getContext=function(){return wt(n)},this.onChange=function(r){return n.onChangeCallbacks.has(r)||n.onChangeCallbacks.add(r),function(){n.onChangeCallbacks.delete(r)}},this.onInit=function(r){return n.onInitCallbacks.has(r)||n.onInitCallbacks.add(r),function(){n.onInitCallbacks.delete(r)}},this.init=function(r,i){n.cleanupWindowEvents(),n.wrapperComponent=r,n.contentComponent=i,Ku(n,n.transformState.scale),n.handleInitializeWrapperEvents(r),n.handleInitialize(i),n.initializeWindowEvents(),n.isInitialized=!0;var s=wt(n);Lt(s,void 0,n.props.onInit)},this.props=e,this.setup=PT(this.props),this.transformState=TL(this.props)}return t}(),iC=Bt.createContext(null),vre=function(t,e){return typeof t=="function"?t(e):t},yre=Bt.forwardRef(function(t,e){var n=g.useRef(new gre(t)).current,r=vre(t.children,Hx(n));return g.useImperativeHandle(e,function(){return Hx(n)},[n]),g.useEffect(function(){n.update(t)},[n,t]),Bt.createElement(iC.Provider,{value:n},r)});Bt.forwardRef(function(t,e){var n=g.useRef(null),r=g.useContext(iC);return g.useEffect(function(){return r.onChange(function(i){if(n.current){var s=0,o=0;n.current.style.transform=r.handleTransformStyles(s,o,1/i.instance.transformState.scale)}})},[r]),Bt.createElement("div",$a({},t,{ref:Yne([n,e])}))});function wre(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var bre=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,TT={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};wre(bre);var xre=function(t){var e=t.children,n=t.wrapperClass,r=n===void 0?"":n,i=t.contentClass,s=i===void 0?"":i,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,f=g.useContext(iC),h=f.init,p=f.cleanupWindowEvents,m=g.useRef(null),w=g.useRef(null);return g.useEffect(function(){var v=m.current,y=w.current;return v!==null&&y!==null&&h&&(h==null||h(v,y)),function(){p==null||p()}},[]),Bt.createElement("div",$a({},c,{ref:m,className:"react-transform-wrapper ".concat(TT.wrapper," ").concat(r),style:o}),Bt.createElement("div",$a({},d,{ref:w,className:"react-transform-component ".concat(TT.content," ").concat(s),style:a}),e))};function Sre({wrapperRef:t}){const e=Ct();return b.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[b.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:b.jsx("span",{className:"h-4 w-4",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:b.jsx("span",{className:"h-4 w-4",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function kre(){const t=Ct(),{devices:e}=bn();return e.hasIOBus?b.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:b.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function _re(){const{devices:t}=bn(),e=["M 380 420 H 800",t.hasIOBus&&"M 780 420 V 805",t.hasIOBus&&"M 450 805 H 900",t.hasIOBus&&"M 583 805 V 875"].filter(Boolean).join(" "),n=["M 380 440 H 800",t.hasIOBus&&"M 790 440 V 815",t.hasIOBus&&"M 450 815 H 900",t.hasIOBus&&"M 573 815 V 875"].filter(Boolean).join(" "),r="M 750 545 H 860 V 460";return b.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] h-full w-full",children:[b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:e}),b.jsx(Jt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:e,style:mt("bus.rd")}),b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),b.jsx(Jt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:n,style:mt("bus.wr")}),t.hasIOBus&&b.jsxs(b.Fragment,{children:[b.jsx(gn,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:r}),b.jsx(Jt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:r,style:mt("bus.mem")})]}),t.pic&&b.jsx(gn,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&b.jsx(gn,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&b.jsx(gn,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&b.jsx(gn,{springs:"bus.handshake",d:"M 635 595 V 730 H 900"}),t.pic&&b.jsxs(b.Fragment,{children:[b.jsx(gn,{springs:"bus.intr",d:"M 110 700 V 470"}),b.jsx(gn,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&b.jsx(gn,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&b.jsx(gn,{springs:"bus.int1",d:"M 500 955 H 400 V 900"}),t.pic&&t.handshake&&b.jsx(gn,{springs:"bus.int2",d:"M 930 866 V 1050 H 300 V 900"}),t.preset==="pio-switches-and-leds"&&b.jsxs(b.Fragment,{children:[b.jsx(gn,{springs:"bus.switches->pio",d:"M 1300 768 H 1120"}),b.jsx(gn,{springs:"bus.pio->leds",d:"M 1120 858 H 1300"})]}),t.preset==="pio-printer"&&b.jsxs(b.Fragment,{children:[b.jsx(gn,{springs:"bus.printer.strobe",d:"M 1120 767 H 1250"}),b.jsx(gn,{springs:"bus.printer.busy",d:"M 1250 782 H 1120"}),b.jsx(gn,{springs:"bus.printer.data",d:"M 1120 837 H 1250"})]}),t.preset==="handshake"&&b.jsxs(b.Fragment,{children:[b.jsx(gn,{springs:"bus.printer.strobe",d:"M 1120 767 H 1250"}),b.jsx(gn,{springs:"bus.printer.busy",d:"M 1250 782 H 1120"}),b.jsx(gn,{springs:"bus.printer.data",d:"M 1120 837 H 1250"})]})]})}function gn({d:t,springs:e}){return b.jsxs(b.Fragment,{children:[b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),b.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),b.jsx(Jt.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:mt(e)})]})}function Cre(){const t=Ct(),{devices:e}=bn();return b.jsxs(b.Fragment,{children:[b.jsx(Lr,{className:"left-[384px] top-[403px]",children:"rd"}),b.jsx(Lr,{className:"left-[384px] top-[423px]",children:"wr"}),e.hasIOBus&&b.jsxs(b.Fragment,{children:[b.jsx(Lr,{className:"left-[384px] top-[443px]",children:"io/m"}),b.jsx(Lr,{className:"left-[715px] top-[538px]",children:t("computer.chip-select.mem")})]}),e.pic&&b.jsx(Lr,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")}),e.timer&&b.jsx(Lr,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")}),e.pio&&b.jsx(Lr,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")}),e.handshake&&b.jsx(Lr,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.handshake")}),e.pic&&b.jsxs(b.Fragment,{children:[b.jsx(Lr,{className:"left-[75px] top-[478px]",children:"intr"}),b.jsx(Lr,{className:"left-[125px] top-[478px]",children:"inta"})]}),e.printer&&b.jsxs(b.Fragment,{children:[b.jsx(Lr,{className:"left-[1260px] top-[758px]",children:"strobe"}),b.jsx(Lr,{className:"left-[1260px] top-[773px]",children:"busy"}),b.jsx(Lr,{className:"left-[1260px] top-[828px]",children:"data"})]})]})}function Lr({className:t,children:e}){return b.jsx("span",{className:Ge("pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",t),children:e})}function Ere(){const{devices:t}=bn(),e=["M 699 349 H 800",t.hasIOBus&&"M 725 349 V 770",t.hasIOBus&&"M 450 770 H 900",t.hasIOBus&&"M 618 770 V 875"].filter(Boolean).join(" "),n=["M 687 249 H 800",t.hasIOBus&&"M 765 249 V 790",t.hasIOBus&&"M 450 790 H 900",t.hasIOBus&&"M 598 790 V 875"].filter(Boolean).join(" ");return b.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] h-full w-full",children:[b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),b.jsx(Jt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:n,style:mt("bus.data")}),b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),b.jsx(Jt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:e,style:mt("bus.address")})]})}function Are(){return b.jsxs(b.Fragment,{children:[b.jsx(Ere,{}),b.jsx(_re,{}),b.jsx(Cre,{}),b.jsx(kre,{})]})}function Pre(){const{devices:t}=bn();if(!t.clock)return null;const e=mt("clock.angle");return b.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 h-12 w-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:b.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-full w-full fill-none stroke-white stroke-2",children:[b.jsx("circle",{cx:"12",cy:"12",r:"10"}),b.jsx(Jt.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}const LL="Popover",[FL,ole]=cs(LL,[id]),sC=id(),[Tre,cd]=FL(LL),$re=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=sC(e),l=g.useRef(null),[c,u]=g.useState(!1),[d=!1,f]=bo({prop:r,defaultProp:i,onChange:s});return g.createElement(Fk,a,g.createElement(Tre,{scope:e,contentId:Gl(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:o},n))},Ore="PopoverTrigger",Nre=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=cd(Ore,n),s=sC(n),o=lt(e,i.triggerRef),a=g.createElement(Xe.button,xe({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":zL(i.open)},r,{ref:o,onClick:ye(t.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?a:g.createElement(jk,xe({asChild:!0},s),a)}),jL="PopoverPortal",[Mre,Rre]=FL(jL,{forceMount:void 0}),Dre=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=cd(jL,e);return g.createElement(Mre,{scope:e,forceMount:n},g.createElement(No,{present:n||s.open},g.createElement(vv,{asChild:!0,container:i},r)))},Oh="PopoverContent",Ire=g.forwardRef((t,e)=>{const n=Rre(Oh,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=cd(Oh,t.__scopePopover);return g.createElement(No,{present:r||s.open},s.modal?g.createElement(Lre,xe({},i,{ref:e})):g.createElement(Fre,xe({},i,{ref:e})))}),Lre=g.forwardRef((t,e)=>{const n=cd(Oh,t.__scopePopover),r=g.useRef(null),i=lt(e,r),s=g.useRef(!1);return g.useEffect(()=>{const o=r.current;if(o)return zk(o)},[]),g.createElement(Uk,{as:Wl,allowPinchZoom:!0},g.createElement(BL,xe({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:ye(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ye(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})))}),Fre=g.forwardRef((t,e)=>{const n=cd(Oh,t.__scopePopover),r=g.useRef(!1),i=g.useRef(!1);return g.createElement(BL,xe({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=t.onCloseAutoFocus)===null||o===void 0||o.call(t,s),!s.defaultPrevented){var a;r.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:s=>{var o,a;(o=t.onInteractOutside)===null||o===void 0||o.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=s.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}}))}),BL=g.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=cd(Oh,n),h=sC(n);return Tk(),g.createElement($k,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},g.createElement(pv,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1)},g.createElement(Bk,xe({"data-state":zL(f.open),role:"dialog",id:f.contentId},h,d,{ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function zL(t){return t?"open":"closed"}const jre=$re,Bre=Nre,zre=Dre,UL=Ire,VL=jre,HL=Bre,oC=g.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>b.jsx(zre,{children:b.jsx(UL,{ref:i,align:e,sideOffset:n,className:Ge("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...r})}));oC.displayName=UL.displayName;function qr({name:t,valueAtom:e,springs:n,emphasis:r=!1,className:i}){const s=Ct(),o=Xt(e),a=o.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t;return b.jsxs(VL,{children:[b.jsx(HL,{asChild:!0,children:b.jsxs(Jt.button,{title:`Registro ${c}`,className:Ge("flex w-min cursor-pointer items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",r?"border-mantis-400 text-lg":"border-stone-600 text-base",i),style:mt(n),children:[b.jsx("span",{className:"mr-2 font-bold",children:c}),b.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:a.toString("hex")})]})}),b.jsxs(oC,{className:"w-60",children:[b.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:["Registro ",c]}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(u=>b.jsxs("li",{children:[b.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${u}`)}),":"," ",b.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(u)})]},u))})]})]})}function Ure(){const t=Xt(Tt.FLAGS),e=Xt(N3),n=t.bit(1),r=t.bit(0),i=t.bit(4);return b.jsxs(b.Fragment,{children:[b.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[b.jsx(Jt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 150 85 H 220",pathLength:1,strokeDasharray:1,style:mt("cpu.alu.operands")}),b.jsx(Jt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 159 145 H 220",pathLength:1,strokeDasharray:1,style:mt("cpu.alu.operands")}),b.jsx(Jt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 272 115 h 28",pathLength:1,strokeDasharray:1,style:mt("cpu.alu.results")}),b.jsx(Jt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 250 145 v 46",pathLength:1,strokeDasharray:1,style:mt("cpu.alu.results")}),b.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),b.jsx(Jt.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:mt("cpu.alu.cog").rot.to(s=>`rotate(${s*60}deg)`)}}),b.jsx(Jt.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:mt("cpu.alu.operation"),children:e}),b.jsxs(Jt.div,{className:"absolute left-[215px] top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",style:mt("cpu.FLAGS"),children:[b.jsx("span",{className:Ge("rounded p-1 font-light",i?"bg-mantis-400":"bg-stone-900"),children:"IF"}),b.jsx("span",{className:Ge("rounded p-1 font-light",n?"bg-mantis-400":"bg-stone-900"),children:"CF"}),b.jsx("span",{className:Ge("rounded p-1 font-light",r?"bg-mantis-400":"bg-stone-900"),children:"ZF"})]})]})}function Vre(){const t=Ct(),{status:e}=bn(),n=Xt(ws),r=Xt(tn),i=g.useMemo(()=>{if(!("metadata"in n)||n.metadata.operands.length===0)return"";if(n.phase==="fetching-operands"){let o=" __";for(let a=1;a<n.metadata.operands.length;a++)o+=", __";return o}else return" "+n.metadata.operands.join(", ")},[n]),s=g.useMemo(()=>e.type==="running"&&e.waitingForInput?"waiting-for-input":e.type==="stopped"?e.error?"stopped-error":"stopped":n.phase==="stopped"&&n.error?"stopped-error":n.phase,[e,n]);return b.jsxs(b.Fragment,{children:[b.jsx("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:b.jsx(Jt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:mt("cpu.decoder.path")})}),b.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:b.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:t("computer.cpu.control-unit")})}),b.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[b.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[b.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),b.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:b.jsx(Jt.div,{className:"h-full bg-mantis-400",style:{width:mt("cpu.decoder.progress.progress").to(o=>`${o*100}%`),opacity:mt("cpu.decoder.progress.opacity")}})})]}),b.jsx("span",{className:Ge("mt-4 w-full rounded-lg border border-stone-600 py-2 text-center text-sm leading-none transition-colors",s==="stopped-error"?"bg-red-500":s==="waiting-for-input"?"bg-amber-600":s==="int6"||s==="int7"?"bg-blue-600":"bg-stone-900"),children:s==="int6"||s==="int7"?b.jsxs(b.Fragment,{children:[t(`computer.cpu.status.${s}`),b.jsx("div",{children:r})]}):s==="stopped-error"||s==="waiting-for-input"?b.jsx(b.Fragment,{children:t(`computer.cpu.status.${s}`)}):r?b.jsx("div",{children:r}):t(`computer.cpu.status.${s}`)}),b.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:b.jsx("p",{className:"text-center font-mono",children:!("metadata"in n)||n.phase==="fetching"?b.jsx("span",{className:"italic text-stone-400",children:"???"}):b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"text-mantis-400",children:n.metadata.name}),b.jsx("span",{className:"text-white",children:i})]})})})]})]})}function Hre(){const t=Ct();return b.jsxs("div",{className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),b.jsx(wZ,{}),b.jsx(JQ,{}),b.jsx(mr,{name:"left",className:"left-[60px] top-[70px]"}),b.jsx(mr,{name:"right",className:"left-[60px] top-[130px]"}),b.jsx(mr,{name:"result",className:"left-[300px] top-[100px]"}),b.jsx(Ure,{}),b.jsx(mr,{name:"AX",emphasis:!0,className:"left-[450px] top-[30px]"}),b.jsx(mr,{name:"BX",emphasis:!0,className:"left-[450px] top-[70px]"}),b.jsx(mr,{name:"CX",emphasis:!0,className:"left-[450px] top-[110px]"}),b.jsx(mr,{name:"DX",emphasis:!0,className:"left-[450px] top-[150px]"}),b.jsx(mr,{name:"id",emphasis:!0,className:"left-[450px] top-[190px] opacity-0"}),b.jsx(mr,{name:"MBR",className:"right-[-51px] top-[233px]"}),b.jsx(mr,{name:"IR",className:"left-[171px] top-[270px]"}),b.jsx(Vre,{}),b.jsx(mr,{name:"IP",emphasis:!0,className:"left-[450px] top-[292px]"}),b.jsx(mr,{name:"SP",emphasis:!0,className:"left-[450px] top-[332px]"}),b.jsx(mr,{name:"ri",emphasis:!0,className:"left-[450px] top-[372px] opacity-0"}),b.jsx(mr,{name:"MAR",className:"right-[-51px] top-[333px]"})]})}function mr({name:t,emphasis:e,className:n}){return b.jsx(qr,{name:t,valueAtom:Tt[t],springs:`cpu.${t}`,emphasis:e,className:Ge("absolute",n)})}const Wre="_pushable_1q0ek_2",Gre="_front_1q0ek_15",Kre="_shadow_1q0ek_20",Xre="_edge_1q0ek_52",pm={pushable:Wre,front:Gre,shadow:Kre,edge:Xre};function Yre(){const t=Ct(),{status:e,dispatch:n,devices:r}=bn();return ho("F10",i=>{i.preventDefault(),r.f10&&n("f10.press")},void 0,[n,r.f10]),r.f10?b.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:b.jsxs("button",{className:pm.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[b.jsx("div",{className:pm.shadow}),b.jsx("div",{className:pm.edge}),b.jsx("span",{className:pm.front,children:t("computer.f10")})]})}):null}function qre(){const t=Ct(),{devices:e}=bn();return e.handshake?b.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),b.jsx(qr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:D_,springs:"handshake.STATE",className:"mx-auto my-4"}),b.jsx("hr",{className:"border-stone-600"}),b.jsx(qr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:R_,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var WL={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.7.63 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,r){t.exports=r(g)})(g4,function(n){return function(){var r={689:function(a){a.exports=function(){var l={d:function(F,I){for(var z in I)l.o(I,z)&&!l.o(F,z)&&Object.defineProperty(F,z,{enumerable:!0,get:I[z]})},o:function(F,I){return Object.prototype.hasOwnProperty.call(F,I)},r:function(F){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})}},c={};function u(F){return function(I){if(Array.isArray(I))return f(I)}(F)||function(I){if(typeof Symbol<"u"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}(F)||d(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(F,I){if(F){if(typeof F=="string")return f(F,I);var z=Object.prototype.toString.call(F).slice(8,-1);return z==="Object"&&F.constructor&&(z=F.constructor.name),z==="Map"||z==="Set"?Array.from(F):z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?f(F,I):void 0}}function f(F,I){(I==null||I>F.length)&&(I=F.length);for(var z=0,S=new Array(I);z<I;z++)S[z]=F[z];return S}function h(F){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},h(F)}function p(F,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(F,w(S.key),S)}}function m(F,I,z){return(I=w(I))in F?Object.defineProperty(F,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):F[I]=z,F}function w(F){var I=function(z,S){if(h(z)!="object"||!z)return z;var T=z[Symbol.toPrimitive];if(T!==void 0){var D=T.call(z,S||"default");if(h(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(F,"string");return h(I)=="symbol"?I:String(I)}l.r(c),l.d(c,{SimpleKeyboard:function(){return ee},default:function(){return ce}});var v=function(){function F(T){var D=T.getOptions,O=T.getCaretPosition,U=T.getCaretPositionEnd,X=T.dispatch;(function(te,J){if(!(te instanceof J))throw new TypeError("Cannot call a class as a function")})(this,F),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(te){return te&&!(te[0]==="{"&&te[te.length-1]==="}")}),this.getOptions=D,this.getCaretPosition=O,this.getCaretPositionEnd=U,this.dispatch=X,F.bindMethods(F,this)}var I,z,S;return I=F,z=[{key:"getButtonType",value:function(T){return T.includes("{")&&T.includes("}")&&T!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(T){var D=this.getButtonType(T),O=T.replace("{","").replace("}",""),U="";return D!=="standardBtn"&&(U=" hg-button-".concat(O)),"hg-".concat(D).concat(U)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"","{arrowleft}":"","{arrowdown}":"","{arrowright}":"","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(T,D){return(D=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),D):D||this.getDefaultDiplay())[T]||T}},{key:"getUpdatedInput",value:function(T,D,O){var U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:O,X=arguments.length>4&&arguments[4]!==void 0&&arguments[4],te=this.getOptions(),J=[O,U,X],se=D;return(T==="{bksp}"||T==="{backspace}")&&se.length>0?se=this.removeAt.apply(this,[se].concat(J)):(T==="{delete}"||T==="{forwarddelete}")&&se.length>0?se=this.removeForwardsAt.apply(this,[se].concat(J)):T==="{space}"?se=this.addStringAt.apply(this,[se," "].concat(J)):T!=="{tab}"||typeof te.tabCharOnTab=="boolean"&&te.tabCharOnTab===!1?T!=="{enter}"&&T!=="{numpadenter}"||!te.newLineOnEnter?T.includes("numpad")&&Number.isInteger(Number(T[T.length-2]))?se=this.addStringAt.apply(this,[se,T[T.length-2]].concat(J)):T==="{numpaddivide}"?se=this.addStringAt.apply(this,[se,"/"].concat(J)):T==="{numpadmultiply}"?se=this.addStringAt.apply(this,[se,"*"].concat(J)):T==="{numpadsubtract}"?se=this.addStringAt.apply(this,[se,"-"].concat(J)):T==="{numpadadd}"?se=this.addStringAt.apply(this,[se,"+"].concat(J)):T==="{numpaddecimal}"?se=this.addStringAt.apply(this,[se,"."].concat(J)):T==="{"||T==="}"?se=this.addStringAt.apply(this,[se,T].concat(J)):T.includes("{")||T.includes("}")||(se=this.addStringAt.apply(this,[se,T].concat(J))):se=this.addStringAt.apply(this,[se,`
`].concat(J)):se=this.addStringAt.apply(this,[se,"	"].concat(J)),te.debug&&console.log("Input will be: "+se),se}},{key:"updateCaretPos",value:function(T){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=this.updateCaretPosAction(T,D);this.dispatch(function(U){U.setCaretPosition(O)})}},{key:"updateCaretPosAction",value:function(T){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=this.getOptions(),U=this.getCaretPosition();return U!=null&&(D?U>0&&(U-=T):U+=T),O.debug&&console.log("Caret at:",U),U}},{key:"addStringAt",value:function(T,D){var O,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T.length,X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:T.length,te=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return U||U===0?(O=[T.slice(0,U),D,T.slice(X)].join(""),this.isMaxLengthReached()||te&&this.updateCaretPos(D.length)):O=T+D,O}},{key:"removeAt",value:function(T){var D,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T.length,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T.length,X=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(O===0&&U===0)return T;if(O===U){var te=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;O&&O>=0?T.substring(O-2,O).match(te)?(D=T.substr(0,O-2)+T.substr(O),X&&this.updateCaretPos(2,!0)):(D=T.substr(0,O-1)+T.substr(O),X&&this.updateCaretPos(1,!0)):T.slice(-2).match(te)?(D=T.slice(0,-2),X&&this.updateCaretPos(2,!0)):(D=T.slice(0,-1),X&&this.updateCaretPos(1,!0))}else D=T.slice(0,O)+T.slice(U),X&&this.dispatch(function(J){J.setCaretPosition(O)});return D}},{key:"removeForwardsAt",value:function(T){var D,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T.length,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T.length,X=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return T!=null&&T.length&&O!==null?(O===U?D=T.substring(O,O+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?T.substr(0,O)+T.substr(O+2):T.substr(0,O)+T.substr(O+1):(D=T.slice(0,O)+T.slice(U),X&&this.dispatch(function(te){te.setCaretPosition(O)})),D):T}},{key:"handleMaxLength",value:function(T,D){var O=this.getOptions(),U=O.maxLength,X=T[O.inputName||"default"],te=D.length-1>=U;if(D.length<=X.length)return!1;if(Number.isInteger(U))return O.debug&&console.log("maxLength (num) reached:",te),te?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(h(U)==="object"){var J=D.length-1>=U[O.inputName||"default"];return O.debug&&console.log("maxLength (obj) reached:",J),J?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(T){return T?T.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(D,O){return O.length?D+O[0].toUpperCase()+O.slice(1):D}):""}},{key:"chunkArray",value:function(T,D){return u(Array(Math.ceil(T.length/D))).map(function(O,U){return T.slice(D*U,D+D*U)})}},{key:"escapeRegex",value:function(T){return T.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(T,D){var O=T,U=D.indexOf("");return U<T&&U!=-1&&O--,D.indexOf("")<T&&U!=-1&&O--,O<0?0:O}}],S=[{key:"bindMethods",value:function(T,D){var O,U=function(te,J){var se=typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(!se){if(Array.isArray(te)||(se=d(te))||J&&te&&typeof te.length=="number"){se&&(te=se);var Ie=0,me=function(){};return{s:me,n:function(){return Ie>=te.length?{done:!0}:{done:!1,value:te[Ie++]}},e:function(ot){throw ot},f:me}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var je,Ve=!0,Se=!1;return{s:function(){se=se.call(te)},n:function(){var ot=se.next();return Ve=ot.done,ot},e:function(ot){Se=!0,je=ot},f:function(){try{Ve||se.return==null||se.return()}finally{if(Se)throw je}}}}(Object.getOwnPropertyNames(T.prototype));try{for(U.s();!(O=U.n()).done;){var X=O.value;X==="constructor"||X==="bindMethods"||(D[X]=D[X].bind(D))}}catch(te){U.e(te)}finally{U.f()}}}],z&&p(I.prototype,z),S&&p(I,S),Object.defineProperty(I,"prototype",{writable:!1}),F}();m(v,"noop",function(){});var y=v;function x(F){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},x(F)}function _(F,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(F,P(S.key),S)}}function k(F,I,z){return(I=P(I))in F?Object.defineProperty(F,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):F[I]=z,F}function P(F){var I=function(z,S){if(x(z)!="object"||!z)return z;var T=z[Symbol.toPrimitive];if(T!==void 0){var D=T.call(z,S||"default");if(x(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(F,"string");return x(I)=="symbol"?I:String(I)}var E=function(){function F(S){var T=this,D=S.dispatch,O=S.getOptions;(function(U,X){if(!(U instanceof X))throw new TypeError("Cannot call a class as a function")})(this,F),k(this,"getOptions",void 0),k(this,"dispatch",void 0),k(this,"isMofifierKey",function(U){return U.altKey||U.ctrlKey||U.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(U.code||U.key||T.keyCodeToKey(U==null?void 0:U.keyCode))}),this.dispatch=D,this.getOptions=O,y.bindMethods(F,this)}var I,z;return I=F,(z=[{key:"handleHighlightKeyDown",value:function(S){var T=this.getOptions();T.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(O){var U,X,te=O.getButtonElement(D),J=O.getButtonElement("{".concat(D,"}"));if(te)U=te,X=D;else{if(!J)return;U=J,X="{".concat(D,"}")}var se,Ie,me,je,Ve=function(ot){ot.style.background=T.physicalKeyboardHighlightBgColor||"#dadce4",ot.style.color=T.physicalKeyboardHighlightTextColor||"black"};if(U)if(Array.isArray(U)){if(U.forEach(function(ot){return Ve(ot)}),T.physicalKeyboardHighlightPress)if(T.physicalKeyboardHighlightPressUsePointerEvents)(se=U[0])===null||se===void 0||(Ie=se.onpointerdown)===null||Ie===void 0||Ie.call(se,S);else if(T.physicalKeyboardHighlightPressUseClick){var Se;(Se=U[0])===null||Se===void 0||Se.click()}else O.handleButtonClicked(X,S)}else Ve(U),T.physicalKeyboardHighlightPress&&(T.physicalKeyboardHighlightPressUsePointerEvents?(me=U)===null||me===void 0||(je=me.onpointerdown)===null||je===void 0||je.call(me,S):T.physicalKeyboardHighlightPressUseClick?U.click():O.handleButtonClicked(X,S))})}},{key:"handleHighlightKeyUp",value:function(S){var T=this.getOptions();T.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(O){var U,X,te,J=O.getButtonElement(D)||O.getButtonElement("{".concat(D,"}")),se=function(Ie){Ie.removeAttribute&&Ie.removeAttribute("style")};J&&(Array.isArray(J)?(J.forEach(function(Ie){return se(Ie)}),T.physicalKeyboardHighlightPressUsePointerEvents&&((U=J[0])===null||U===void 0||(X=U.onpointerup)===null||X===void 0||X.call(U,S))):(se(J),T.physicalKeyboardHighlightPressUsePointerEvents&&(J==null||(te=J.onpointerup)===null||te===void 0||te.call(J,S))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(S){var T,D="",O=S.code||S.key||this.keyCodeToKey(S==null?void 0:S.keyCode);return(D=O!=null&&O.includes("Numpad")||O!=null&&O.includes("Shift")||O!=null&&O.includes("Space")||O!=null&&O.includes("Backspace")||O!=null&&O.includes("Control")||O!=null&&O.includes("Alt")||O!=null&&O.includes("Meta")?S.code||"":S.key||this.keyCodeToKey(S==null?void 0:S.keyCode)||"").length>1?(T=D)===null||T===void 0?void 0:T.toLowerCase():D}},{key:"keyCodeToKey",value:function(S){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[S]||""}}])&&_(I.prototype,z),Object.defineProperty(I,"prototype",{writable:!1}),F}();function C(F){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},C(F)}function N(F,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(F,R(S.key),S)}}function M(F,I,z){return(I=R(I))in F?Object.defineProperty(F,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):F[I]=z,F}function R(F){var I=function(z,S){if(C(z)!="object"||!z)return z;var T=z[Symbol.toPrimitive];if(T!==void 0){var D=T.call(z,S||"default");if(C(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(F,"string");return C(I)=="symbol"?I:String(I)}var L=function(){function F(S){var T=S.utilities,D=S.options;(function(O,U){if(!(O instanceof U))throw new TypeError("Cannot call a class as a function")})(this,F),M(this,"utilities",void 0),M(this,"options",void 0),M(this,"candidateBoxElement",void 0),M(this,"pageIndex",0),M(this,"pageSize",void 0),this.utilities=T,this.options=D,y.bindMethods(F,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5}var I,z;return I=F,z=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(S){var T=this,D=S.candidateValue,O=S.targetElement,U=S.onSelect;if(D&&D.length){var X=this.utilities.chunkArray(D.split(" "),this.pageSize);this.renderPage({candidateListPages:X,targetElement:O,pageIndex:this.pageIndex,nbPages:X.length,onItemSelected:function(te,J){U(te,J),T.destroy()}})}}},{key:"renderPage",value:function(S){var T,D=this,O=S.candidateListPages,U=S.targetElement,X=S.pageIndex,te=S.nbPages,J=S.onItemSelected;(T=this.candidateBoxElement)===null||T===void 0||T.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var se=document.createElement("ul");se.className="hg-candidate-box-list",O[X].forEach(function(hr){var sl,us=document.createElement("li"),Fo=function(){var jo=new(D.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(jo,"target",{value:us}),jo};us.className="hg-candidate-box-list-item",us.innerHTML=((sl=D.options.display)===null||sl===void 0?void 0:sl[hr])||hr,D.options.useTouchEvents?us.ontouchstart=function(jo){return J(hr,jo||Fo())}:us.onclick=function(){var jo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fo();return J(hr,jo)},se.appendChild(us)});var Ie=X>0,me=document.createElement("div");me.classList.add("hg-candidate-box-prev"),Ie&&me.classList.add("hg-candidate-box-btn-active");var je=function(){Ie&&D.renderPage({candidateListPages:O,targetElement:U,pageIndex:X-1,nbPages:te,onItemSelected:J})};this.options.useTouchEvents?me.ontouchstart=je:me.onclick=je,this.candidateBoxElement.appendChild(me),this.candidateBoxElement.appendChild(se);var Ve=X<te-1,Se=document.createElement("div");Se.classList.add("hg-candidate-box-next"),Ve&&Se.classList.add("hg-candidate-box-btn-active");var ot=function(){Ve&&D.renderPage({candidateListPages:O,targetElement:U,pageIndex:X+1,nbPages:te,onItemSelected:J})};this.options.useTouchEvents?Se.ontouchstart=ot:Se.onclick=ot,this.candidateBoxElement.appendChild(Se),U.prepend(this.candidateBoxElement)}}],z&&N(I.prototype,z),Object.defineProperty(I,"prototype",{writable:!1}),F}(),H=L;function $(F){return function(I){if(Array.isArray(I))return V(I)}(F)||function(I){if(typeof Symbol<"u"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}(F)||function(I,z){if(I){if(typeof I=="string")return V(I,z);var S=Object.prototype.toString.call(I).slice(8,-1);return S==="Object"&&I.constructor&&(S=I.constructor.name),S==="Map"||S==="Set"?Array.from(I):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?V(I,z):void 0}}(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function V(F,I){(I==null||I>F.length)&&(I=F.length);for(var z=0,S=new Array(I);z<I;z++)S[z]=F[z];return S}function q(F){return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},q(F)}function ne(F,I){var z=Object.keys(F);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(F);I&&(S=S.filter(function(T){return Object.getOwnPropertyDescriptor(F,T).enumerable})),z.push.apply(z,S)}return z}function W(F,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(F,Q(S.key),S)}}function j(F,I,z){return(I=Q(I))in F?Object.defineProperty(F,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):F[I]=z,F}function Q(F){var I=function(z,S){if(q(z)!="object"||!z)return z;var T=z[Symbol.toPrimitive];if(T!==void 0){var D=T.call(z,S||"default");if(q(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(F,"string");return q(I)=="symbol"?I:String(I)}var K=function(){function F(S,T){var D=this;if(function(me,je){if(!(me instanceof je))throw new TypeError("Cannot call a class as a function")}(this,F),j(this,"input",void 0),j(this,"options",void 0),j(this,"utilities",void 0),j(this,"caretPosition",void 0),j(this,"caretPositionEnd",void 0),j(this,"keyboardDOM",void 0),j(this,"keyboardPluginClasses",void 0),j(this,"keyboardDOMClass",void 0),j(this,"buttonElements",void 0),j(this,"currentInstanceName",void 0),j(this,"allKeyboardInstances",void 0),j(this,"keyboardInstanceNames",void 0),j(this,"isFirstKeyboardInstance",void 0),j(this,"physicalKeyboard",void 0),j(this,"modules",void 0),j(this,"activeButtonClass",void 0),j(this,"holdInteractionTimeout",void 0),j(this,"holdTimeout",void 0),j(this,"isMouseHold",void 0),j(this,"initialized",void 0),j(this,"candidateBox",void 0),j(this,"keyboardRowsDOM",void 0),j(this,"defaultName","default"),j(this,"activeInputElement",null),j(this,"handleParams",function(me,je){var Ve,Se,ot;if(typeof me=="string")Ve=me.split(".").join(""),Se=document.querySelector(".".concat(Ve)),ot=je;else if(me instanceof HTMLDivElement){if(!me.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");Ve=me.className.split(" ")[0],Se=me,ot=je}else Ve="simple-keyboard",Se=document.querySelector(".".concat(Ve)),ot=me;return{keyboardDOMClass:Ve,keyboardDOM:Se,options:ot}}),j(this,"getOptions",function(){return D.options}),j(this,"getCaretPosition",function(){return D.caretPosition}),j(this,"getCaretPositionEnd",function(){return D.caretPositionEnd}),j(this,"registerModule",function(me,je){D.modules[me]||(D.modules[me]={}),je(D.modules[me])}),j(this,"getKeyboardClassString",function(){for(var me=arguments.length,je=new Array(me),Ve=0;Ve<me;Ve++)je[Ve]=arguments[Ve];return[D.keyboardDOMClass].concat(je).filter(function(Se){return!!Se}).join(" ")}),typeof window<"u"){var O=this.handleParams(S,T),U=O.keyboardDOMClass,X=O.keyboardDOM,te=O.options,J=te===void 0?{}:te;this.utilities=new y({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=X,this.options=function(me){for(var je=1;je<arguments.length;je++){var Ve=arguments[je]!=null?arguments[je]:{};je%2?ne(Object(Ve),!0).forEach(function(Se){j(me,Se,Ve[Se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(Ve)):ne(Object(Ve)).forEach(function(Se){Object.defineProperty(me,Se,Object.getOwnPropertyDescriptor(Ve,Se))})}return me}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},J),this.keyboardPluginClasses="",y.bindMethods(F,this);var se=this.options.inputName,Ie=se===void 0?this.defaultName:se;if(this.input={},this.input[Ie]="",this.keyboardDOMClass=U,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new E({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new H({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(U,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}}var I,z;return I=F,z=[{key:"setCaretPosition",value:function(S){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S;this.caretPosition=S,this.caretPositionEnd=T}},{key:"getInputCandidates",value:function(S){var T=this,D=this.options,O=D.layoutCandidates,U=D.layoutCandidatesCaseSensitiveMatch;if(!O||q(O)!=="object")return{};var X=Object.keys(O).filter(function(se){var Ie=S.substring(0,T.getCaretPositionEnd()||0)||S,me=new RegExp("".concat(T.utilities.escapeRegex(se),"$"),U?"g":"gi");return!!$(Ie.matchAll(me)).length});if(X.length>1){var te=X.sort(function(se,Ie){return Ie.length-se.length})[0];return{candidateKey:te,candidateValue:O[te]}}if(X.length){var J=X[0];return{candidateKey:J,candidateValue:O[J]}}return{}}},{key:"showCandidatesBox",value:function(S,T,D){var O=this;this.candidateBox&&this.candidateBox.show({candidateValue:T,targetElement:D,onSelect:function(U,X){var te=O.options,J=te.layoutCandidatesCaseSensitiveMatch,se=te.disableCandidateNormalization,Ie=te.enableLayoutCandidatesKeyPress,me=U;se||(me=U.normalize("NFD"));var je=O.getInput(O.options.inputName,!0),Ve=O.getCaretPositionEnd()||0,Se=je.substring(0,Ve||0)||je,ot=new RegExp("".concat(O.utilities.escapeRegex(S),"$"),J?"g":"gi"),hr=Se.replace(ot,me),sl=je.replace(Se,hr),us=hr.length-Se.length,Fo=(Ve||je.length)+us;Fo<0&&(Fo=0),O.setInput(sl,O.options.inputName,!0),O.setCaretPosition(Fo),Ie&&typeof O.options.onKeyPress=="function"&&O.options.onKeyPress(U,X),typeof O.options.onChange=="function"&&O.options.onChange(O.getInput(O.options.inputName,!0),X),typeof O.options.onChangeAll=="function"&&O.options.onChangeAll(O.getAllInputs(),X)}})}},{key:"handleButtonClicked",value:function(S,T){var D=this.options,O=D.inputName,U=O===void 0?this.defaultName:O,X=D.debug;if(S!=="{//}"){this.input[U]||(this.input[U]="");var te=this.utilities.getUpdatedInput(S,this.input[U],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(S)&&this.activeInputElement&&this.input[U]&&this.input[U]===te&&this.caretPosition===0&&this.caretPositionEnd===te.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(S,T);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(S,T),this.input[U]!==te&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(te))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,te))return;var J=this.utilities.getUpdatedInput(S,this.input[U],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(J,this.options.inputName,!0),X&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),T==null?void 0:T.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),T),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),T),T!=null&&T.target&&this.options.enableLayoutCandidates){var se,Ie=this.getInputCandidates(te),me=Ie.candidateKey,je=Ie.candidateValue;me&&je?this.showCandidatesBox(me,je,this.keyboardDOM):(se=this.candidateBox)===null||se===void 0||se.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),X&&console.log("Key pressed:",S)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(S){this.options.syncInstanceInputs?this.dispatch(function(T){T.isMouseHold=S}):this.isMouseHold=S}},{key:"handleButtonMouseDown",value:function(S,T){var D=this;T&&(this.options.preventMouseDownDefault&&T.preventDefault(),this.options.stopMouseDownPropagation&&T.stopPropagation(),T.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(D.getMouseHold()&&(!S.includes("{")&&!S.includes("}")||S==="{delete}"||S==="{backspace}"||S==="{bksp}"||S==="{space}"||S==="{tab}")||S==="{arrowright}"||S==="{arrowleft}"||S==="{arrowup}"||S==="{arrowdown}")&&(D.options.debug&&console.log("Button held:",S),D.handleButtonHold(S)),clearTimeout(D.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(S,T){var D=this;T&&(this.options.preventMouseUpDefault&&T.preventDefault&&T.preventDefault(),this.options.stopMouseUpPropagation&&T.stopPropagation&&T.stopPropagation(),!(T.target===this.keyboardDOM||T.target&&this.keyboardDOM.contains(T.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(T.target===this.candidateBox.candidateBoxElement||T.target&&this.candidateBox.candidateBoxElement.contains(T.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(O){O.classList.remove(D.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),S&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(S,T)}},{key:"handleKeyboardContainerMouseDown",value:function(S){this.options.preventMouseDownDefault&&S.preventDefault()}},{key:"handleButtonHold",value:function(S){var T=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){T.getMouseHold()?(T.handleButtonClicked(S),T.handleButtonHold(S)):clearTimeout(T.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var S=this;this.dispatch(function(T){T.replaceInput(S.input),T.setCaretPosition(S.caretPosition,S.caretPositionEnd)})}},{key:"clearInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[S]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,T=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!T&&this.syncInstanceInputs(),this.options.rtl?""+this.input[S].replace("","").replace("","")+"":this.input[S]}},{key:"getAllInputs",value:function(){var S=this,T={};return Object.keys(this.input).forEach(function(D){T[D]=S.getInput(D,!0)}),T}},{key:"setInput",value:function(S){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,D=arguments.length>2?arguments[2]:void 0;this.input[T]=S,!D&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(S){this.input=S}},{key:"setOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},T=this.changedOptions(S);this.options=Object.assign(this.options,S),T.length&&(this.options.debug&&console.log("changedOptions",T),this.onSetOptions(T),this.render())}},{key:"changedOptions",value:function(S){var T=this;return Object.keys(S).filter(function(D){return JSON.stringify(S[D])!==JSON.stringify(T.options[D])})}},{key:"onSetOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];S.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(S.includes("layoutCandidatesPageSize")||S.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new H({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(S){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(T){S(window.SimpleKeyboardInstances[T],T)})}},{key:"addButtonTheme",value:function(S,T){var D=this;T&&S&&(S.split(" ").forEach(function(O){T.split(" ").forEach(function(U){D.options.buttonTheme||(D.options.buttonTheme=[]);var X=!1;D.options.buttonTheme.map(function(te){if(te!=null&&te.class.split(" ").includes(U)){X=!0;var J=te.buttons.split(" ");J.includes(O)||(X=!0,J.push(O),te.buttons=J.join(" "))}return te}),X||D.options.buttonTheme.push({class:U,buttons:S})})}),this.render())}},{key:"removeButtonTheme",value:function(S,T){var D=this;if(!S&&!T)return this.options.buttonTheme=[],void this.render();S&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(S.split(" ").forEach(function(O){var U;(U=D.options)===null||U===void 0||(U=U.buttonTheme)===null||U===void 0||U.map(function(X,te){if(X&&T&&T.includes(X.class)||!T){var J,se,Ie=(J=X)===null||J===void 0?void 0:J.buttons.split(" ").filter(function(me){return me!==O});X&&Ie!=null&&Ie.length?X.buttons=Ie.join(" "):((se=D.options.buttonTheme)===null||se===void 0||se.splice(te,1),X=null)}return X})}),this.render())}},{key:"getButtonElement",value:function(S){var T,D=this.buttonElements[S];return D&&(T=D.length>1?D:D[0]),T}},{key:"inputPatternIsValid",value:function(S){var T,D=this.options.inputPattern;if((T=D instanceof RegExp?D:D[this.options.inputName||this.defaultName])&&S){var O=T.test(S);return this.options.debug&&console.log('inputPattern ("'.concat(T,'"): ').concat(O?"passed":"did not pass!")),O}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var S=this.options.physicalKeyboardHighlightPreventDefault,T=S!==void 0&&S;document.addEventListener("keyup",this.handleKeyUp,T),document.addEventListener("keydown",this.handleKeyDown,T),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(S){this.caretEventHandler(S),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(S)}},{key:"handleKeyDown",value:function(S){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(S)}},{key:"handleMouseUp",value:function(S){this.caretEventHandler(S)}},{key:"handleTouchEnd",value:function(S){this.caretEventHandler(S)}},{key:"handleSelect",value:function(S){this.caretEventHandler(S)}},{key:"handleSelectionChange",value:function(S){navigator.userAgent.includes("Firefox")||this.caretEventHandler(S)}},{key:"caretEventHandler",value:function(S){var T,D=this;S.target.tagName&&(T=S.target.tagName.toLowerCase()),this.dispatch(function(O){var U=S.target===O.keyboardDOM||S.target&&O.keyboardDOM.contains(S.target);if(D.options.syncInstanceInputs&&Array.isArray(S.path)&&(U=S.path.some(function(J){var se;return J==null||(se=J.hasAttribute)===null||se===void 0?void 0:se.call(J,"data-skInstance")})),(T==="textarea"||T==="input"&&["text","search","url","tel","password"].includes(S.target.type))&&!O.options.disableCaretPositioning){var X=S.target.selectionStart,te=S.target.selectionEnd;O.options.rtl&&(X=O.utilities.getRtlOffset(X,O.getInput()),te=O.utilities.getRtlOffset(te,O.getInput())),O.setCaretPosition(X,te),D.activeInputElement=S.target,O.options.debug&&console.log("Caret at: ",O.getCaretPosition(),O.getCaretPositionEnd(),S&&S.target.tagName.toLowerCase(),"(".concat(O.keyboardDOMClass,")"),S==null?void 0:S.type)}else!O.options.disableCaretPositioning&&U||(S==null?void 0:S.type)==="selectionchange"||(O.setCaretPosition(null),D.activeInputElement=null,O.options.debug&&console.log('Caret position reset due to "'.concat(S==null?void 0:S.type,'" event'),S))})}},{key:"recurseButtons",value:function(S){var T=this;S&&Object.keys(this.buttonElements).forEach(function(D){return T.buttonElements[D].forEach(S)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var S=this.options.physicalKeyboardHighlightPreventDefault,T=S!==void 0&&S;document.removeEventListener("keyup",this.handleKeyUp,T),document.removeEventListener("keydown",this.handleKeyDown,T),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(D){D&&(D.onpointerdown=null,D.onpointerup=null,D.onpointercancel=null,D.ontouchstart=null,D.ontouchend=null,D.ontouchcancel=null,D.onclick=null,D.onmousedown=null,D.onmouseup=null,D.remove(),D=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(S){var T=this.options.buttonTheme,D=[];return Array.isArray(T)&&T.forEach(function(O){if(O&&O.class&&typeof O.class=="string"&&O.buttons&&typeof O.buttons=="string"){var U=O.class.split(" ");O.buttons.split(" ").includes(S)&&(D=[].concat($(D),$(U)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',O)}),D}},{key:"setDOMButtonAttributes",value:function(S,T){var D=this.options.buttonAttributes;Array.isArray(D)&&D.forEach(function(O){O.attribute&&typeof O.attribute=="string"&&O.value&&typeof O.value=="string"&&O.buttons&&typeof O.buttons=="string"?O.buttons.split(" ").includes(S)&&T(O.attribute,O.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',O)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(S){if(S.target.classList.contains("hg-button"))return S.preventDefault(),S.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var S=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(T){var D=new T(S);D.init&&D.init(S)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(S,T){return!!this.modules[S]&&this.modules[S][T]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(S,T,D,O){var U=this,X=Array.from(S.children),te=0;return X.length&&D.forEach(function(J,se){var Ie=O[se];if(!(Ie&&Ie>J))return!1;var me=J-te,je=Ie-te,Ve=document.createElement("div");Ve.className+="hg-button-container";var Se="".concat(U.options.layoutName,"-r").concat(T,"c").concat(se);Ve.setAttribute("data-skUID",Se);var ot=X.splice(me,je-me+1);te=je-me,ot.forEach(function(hr){return Ve.appendChild(hr)}),X.splice(me,0,Ve),S.innerHTML="",X.forEach(function(hr){return S.appendChild(hr)}),U.options.debug&&console.log("rowDOMContainer",ot,me,je,te+1)}),S}},{key:"render",value:function(){var S=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var T="hg-layout-".concat(this.options.layoutName),D=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},O=this.options.useTouchEvents||!1,U=O?"hg-touch-events":"",X=this.options.useMouseEvents||!1,te=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,T,this.keyboardPluginClasses,U),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",D[this.options.layoutName||this.defaultName].forEach(function(J,se){var Ie=J.split(" ");S.options.excludeFromLayout&&S.options.excludeFromLayout[S.options.layoutName||S.defaultName]&&(Ie=Ie.filter(function(Se){return S.options.excludeFromLayout&&!S.options.excludeFromLayout[S.options.layoutName||S.defaultName].includes(Se)}));var me=document.createElement("div");me.className+="hg-row";var je=[],Ve=[];Ie.forEach(function(Se,ot){var hr,sl=!te&&typeof Se=="string"&&Se.length>1&&Se.indexOf("[")===0,us=!te&&typeof Se=="string"&&Se.length>1&&Se.indexOf("]")===Se.length-1;sl&&(je.push(ot),Se=Se.replace(/\[/g,"")),us&&(Ve.push(ot),Se=Se.replace(/\]/g,""));var Fo=S.utilities.getButtonClass(Se),jo=S.utilities.getButtonDisplayName(Se,S.options.display,S.options.mergeDisplay),u4=S.options.useButtonTag?"button":"div",xn=document.createElement(u4);xn.className+="hg-button ".concat(Fo),(hr=xn.classList).add.apply(hr,$(S.getButtonThemeClasses(Se))),S.setDOMButtonAttributes(Se,function(Gt,f4){xn.setAttribute(Gt,f4)}),S.activeButtonClass="hg-activeButton",!S.utilities.pointerEventsSupported()||O||X?O?(xn.ontouchstart=function(Gt){S.handleButtonClicked(Se,Gt),S.handleButtonMouseDown(Se,Gt)},xn.ontouchend=function(Gt){S.handleButtonMouseUp(Se,Gt)},xn.ontouchcancel=function(Gt){S.handleButtonMouseUp(Se,Gt)}):(xn.onclick=function(Gt){S.setMouseHold(!1),typeof S.options.onKeyReleased!="function"&&S.handleButtonClicked(Se,Gt)},xn.onmousedown=function(Gt){typeof S.options.onKeyReleased!="function"||S.isMouseHold||S.handleButtonClicked(Se,Gt),S.handleButtonMouseDown(Se,Gt)},xn.onmouseup=function(Gt){S.handleButtonMouseUp(Se,Gt)}):(xn.onpointerdown=function(Gt){S.handleButtonClicked(Se,Gt),S.handleButtonMouseDown(Se,Gt)},xn.onpointerup=function(Gt){S.handleButtonMouseUp(Se,Gt)},xn.onpointercancel=function(Gt){S.handleButtonMouseUp(Se,Gt)}),xn.setAttribute("data-skBtn",Se);var d4="".concat(S.options.layoutName,"-r").concat(se,"b").concat(ot);xn.setAttribute("data-skBtnUID",d4);var TC=document.createElement("span");TC.innerHTML=jo,xn.appendChild(TC),S.buttonElements[Se]||(S.buttonElements[Se]=[]),S.buttonElements[Se].push(xn),me.appendChild(xn)}),me=S.parseRowDOMContainers(me,se,je,Ve),S.keyboardRowsDOM.appendChild(me)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||O||X?O?(document.ontouchend=function(J){return S.handleButtonMouseUp(void 0,J)},document.ontouchcancel=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.ontouchstart=function(J){return S.handleKeyboardContainerMouseDown(J)}):O||(document.onmouseup=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.onmousedown=function(J){return S.handleKeyboardContainerMouseDown(J)}):(document.onpointerup=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.onpointerdown=function(J){return S.handleKeyboardContainerMouseDown(J)}),this.onInit())}}],z&&W(I.prototype,z),Object.defineProperty(I,"prototype",{writable:!1}),F}(),ee=K,ce=ee;return c}()},787:function(a){a.exports=n}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var c=i[a]={exports:{}};return r[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return m},default:function(){return w}});var a=s(787);function l(v){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},l(v)}function c(v,y){var x=Object.keys(v);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(v);y&&(_=_.filter(function(k){return Object.getOwnPropertyDescriptor(v,k).enumerable})),x.push.apply(x,_)}return x}function u(v){for(var y=1;y<arguments.length;y++){var x=arguments[y]!=null?arguments[y]:{};y%2?c(Object(x),!0).forEach(function(_){d(v,_,x[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(x)):c(Object(x)).forEach(function(_){Object.defineProperty(v,_,Object.getOwnPropertyDescriptor(x,_))})}return v}function d(v,y,x){var _;return _=function(k,P){if(l(k)!="object"||!k)return k;var E=k[Symbol.toPrimitive];if(E!==void 0){var C=E.call(k,P||"default");if(l(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(k)}(y,"string"),(y=l(_)=="symbol"?_:String(_))in v?Object.defineProperty(v,y,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[y]=x,v}var f=function(v){return u(u({},v),{},{keyboardRef:null})},h=s(689),p=s.n(h),m=function(v){var y=v.baseClass||"react-simple-keyboard",x=a.useRef(null),_=a.useRef(null),k=a.useRef(null),P=a.useRef(v);return a.useEffect(function(){return function(){k.current&&k.current.destroy(),x.current=!1}},[]),a.useEffect(function(){var E=function(L){return u(u({},L),{},{theme:"simple-keyboard ".concat(L.theme||"hg-theme-default")})}(v);if(!x.current){x.current=!0,E.debug&&console.log("ReactSimpleKeyboard: Init");var C=_.current,N=".".concat(y);k.current=new(p())(C||N,E),E.keyboardRef&&E.keyboardRef(k.current)}var M=function(L,H){var $=f(H),V=f(L);return Object.keys($).filter(function(q){return $[q]!==V[q]})}(P.current,E);if(M.length){var R=k.current;P.current=E,R==null||R.setOptions(E),E.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",M)}},[x,y,P,v]),a.createElement("div",{className:y,ref:_})},w=m}(),o}()})})(WL);var Jre=WL.exports;const Zre=sc(Jre),Qre={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w  r t y    p  +","{lock}  s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W  R T Y    P  *","{lock}  S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y  i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y  I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},eie={en:{"{bksp}":"Backspace ","{enter}":"Enter ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Caps Lock ","{space}":"Space"},es:{"{bksp}":"","{enter}":"Intro ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Bloq Mays ","{space}":"Espacio"}},$T="          ",OT="  ";function tie(){const t=Yk(),e=Ct(),{status:n,dispatch:r,devices:i}=bn(),[s,o]=g.useState("none"),[a,l]=g.useState(!1),[c,u]=g.useState(!1),d=g.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),f=g.useCallback(h=>{i.keyboard&&n.type==="running"&&n.waitingForInput&&r("keyboard.sendChar",h)},[n,r,i.keyboard]);return i.keyboard?b.jsxs("div",{className:"absolute left-[1200px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),b.jsx(Zre,{theme:Ge("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:Qre,display:eie[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:$T},{class:"hg-diaeresisDeadKeyButton",buttons:OT}],disableButtonHold:!0,onKeyPress:h=>{if(h==="{shiftleft}"||h==="{shiftright}"){o(p=>p==="none"?"once":"none");return}if(h==="{lock}"){o(p=>p==="none"?"lock":"none");return}if(t==="es"){if(a){$T.includes(h)&&(l(!1),s==="once"&&o("none"),f(h));return}else if(h===""){l(!0);return}if(c){OT.includes(h)&&(u(!1),s==="once"&&o("none"),f(h));return}else if(h===""){u(!0);return}}s==="once"&&o("none"),f(h==="{bksp}"?"\b":h==="{enter}"?`
`:h==="{tab}"?"	":h==="{space}"?" ":h)}})]}):null}function nie(){const t=Ct(),{devices:e}=bn(),n=Xt(I_).toArray();return e.leds?b.jsxs("div",{className:"absolute left-[1300px] top-[828px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),b.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((r,i)=>b.jsx("div",{className:Ge("relative h-7 w-7 rounded-full transition",r?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:b.jsx("div",{className:Ge("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",r?"opacity-100":"opacity-0")})},i))})]}):null}const GL=g.forwardRef(({className:t,type:e,...n},r)=>b.jsx("input",{type:e,className:Ge("flex h-10 w-full rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-900 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-stone-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));GL.displayName="Input";const rie=g.forwardRef((t,e)=>g.createElement(Xe.label,kt({},t,{ref:e,onMouseDown:n=>{var r;(r=t.onMouseDown)===null||r===void 0||r.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),KL=rie,XL=g.forwardRef(({className:t,...e},n)=>b.jsx(KL,{ref:n,className:Ge("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...e}));XL.displayName=KL.displayName;function iie(){const t=Ct(),e=Xt(see),n=Math.ceil(e.length/2),r=Xt(Hu),[i,s]=td(I5),o=g.useId(),[a,l]=g.useState(""),c=g.useCallback(()=>{const f=/^([\da-f]+)h?$/i.exec(a);if(!f||!f[1]){kr({title:t("computer.memory.address-must-be-integer"),variant:"error"});return}let h=parseInt(f[1],16);if(h===be.MAX_ADDRESS+1)h-=1;else if(!be.inRange(h)){kr({title:t("computer.memory.address-out-of-range"),variant:"error"});return}s(be.from(h))},[t,a,s]),u=g.useCallback(()=>{try{let h=(i??r).value+e.length;h===be.MAX_ADDRESS+1&&(h-=1);const p=be.from(h);l(p.toString()),s(p)}catch{console.error("Invalid PageUp")}},[r,i,s,e.length]);ho("PageUp",f=>{f.preventDefault(),u()},void 0,[u]);const d=g.useCallback(()=>{try{const f=i??r,h=be.from(f.value-e.length);l(h.toString()),s(h)}catch{console.error("Invalid PageUp")}},[r,i,s,e.length]);return ho("PageDown",f=>{f.preventDefault(),d()},void 0,[u]),b.jsxs("div",{className:"absolute left-[800px] top-0 z-10 h-[460px] w-[250px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.memory.name")}),b.jsxs("div",{className:"mx-4 my-2",children:[b.jsx(XL,{htmlFor:o,children:t("computer.memory.fix-address")}),b.jsxs("div",{className:"mt-1 flex items-center gap-1",children:[b.jsx("button",{className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-2 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",disabled:e.at(0).address.value===be.MIN_ADDRESS,title:t("computer.memory.address-decrement"),onClick:d,children:b.jsx("span",{className:"icon-[lucide--chevron-left] h-4 w-4"})}),b.jsxs("div",{className:"relative",children:[b.jsx(GL,{className:"font-mono",placeholder:"20h",type:"text",enterKeyHint:"go",id:o,value:a,onChange:f=>l(f.currentTarget.value),onKeyDown:f=>{f.key==="Enter"&&c()}}),b.jsx("button",{title:t("computer.memory.unfix-address"),className:Ge("absolute right-2 top-3",!i&&"hidden"),onClick:()=>{l(""),s(null)},children:b.jsx("span",{className:"icon-[lucide--x] h-4 w-4 text-stone-500 transition-colors hover:text-stone-300"})})]}),b.jsx("button",{className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-2 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",disabled:e.at(-1).address.value===be.MAX_ADDRESS,title:t("computer.memory.address-decrement"),onClick:u,children:b.jsx("span",{className:"icon-[lucide--chevron-right] h-4 w-4"})})]})]}),b.jsxs("div",{className:"m-4 flex w-min items-start overflow-hidden rounded-lg border border-stone-600",children:[b.jsx("table",{className:"border-r border-stone-600 font-mono text-lg",children:b.jsx("tbody",{children:e.slice(0,n).map((f,h)=>g.createElement(NT,{...f,key:h}))})}),b.jsx("table",{className:"font-mono text-lg",children:b.jsx("tbody",{children:e.slice(n).map((f,h)=>g.createElement(NT,{...f,key:h}))})})]})]})}function NT({address:t,value:e}){const n=Ct(),r=Xt(Hu),i=n("computer.memory.cell",t);return b.jsxs(VL,{children:[b.jsx(HL,{asChild:!0,children:b.jsxs(Jt.tr,{title:i,className:"cursor-pointer border-b border-stone-600 odd:bg-stone-900 even:bg-stone-800 last-of-type:border-b-0",style:t.value===r.value?mt("memory.operating-cell"):void 0,children:[b.jsx("td",{className:"border-r border-stone-600 px-2 py-1 font-thin",children:t.toString()}),b.jsx("td",{className:"border-r border-stone-600 px-2 py-1 last-of-type:border-r-0",children:e.toString("hex")})]})}),b.jsxs(oC,{className:"w-60",children:[b.jsx("p",{className:"px-4 py-2 font-medium text-white",children:i}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(s=>b.jsxs("li",{children:[b.jsx("b",{className:"font-medium",children:n(`generics.byte-representation.${s}`)}),":"," ",b.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(s)})]},s))})]})]})}function sie(){const t=Ct(),{devices:e}=bn();return e.pic?b.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsxs("div",{className:"flex items-start",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),b.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[b.jsx(qr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:F_,springs:"pic.IMR",emphasis:!0}),b.jsx(qr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:j_,springs:"pic.IRR",emphasis:!0}),b.jsx(qr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:B_,springs:"pic.ISR",emphasis:!0})]})]}),b.jsx("hr",{className:"mb-2 border-stone-600"}),b.jsx("div",{className:"grid h-full w-full grid-cols-4 items-center",children:A0.map((n,r)=>b.jsx(qr,{name:`INT${r}`,title:t("generics.io-register",`INT${r}`,36+r),valueAtom:n,springs:`pic.INT${r}`,className:"mx-auto"},r))})]}):null}function oie(){const t=Ct(),{devices:e}=bn();return e.pio?b.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"mb-2 block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[b.jsx(qr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:z_,springs:"pio.PA"}),b.jsx(qr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:V_,springs:"pio.CA"})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[b.jsx(qr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:U_,springs:"pio.PB"}),b.jsx(qr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:H_,springs:"pio.CB"})]})]}):null}const aie="_printer_fbkny_2",lie="_shadow_fbkny_6",cie="_sides_fbkny_11",uie="_front_fbkny_22",die="_trailContainer_fbkny_27",fie="_trail_fbkny_27",hie="_paper_fbkny_33",cl={printer:aie,shadow:lie,sides:cie,front:uie,trailContainer:die,trail:fie,paper:hie},pie=Array.from({length:5},(t,e)=>e);function mie(){const t=Ct(),{devices:e}=bn(),n=Xt(P0),r=Xt(T0);return e.printer?b.jsx("div",{className:"absolute left-[1250px] top-[750px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:b.jsxs("div",{className:cl.printer,title:t("computer.printer.name"),children:[b.jsx("div",{className:cl.shadow}),b.jsx("div",{className:cl.sides}),b.jsxs("div",{className:cl.front,children:[b.jsx("div",{className:cl.trailContainer,children:b.jsx("div",{className:cl.trail,children:b.jsx("pre",{className:cl.paper,children:r})})}),b.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:pie.map(i=>{const s=n[i]?OI(n[i].unsigned):null;return b.jsx("span",{className:Ge("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},i)})}),b.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:b.jsx(Jt.div,{className:"h-full bg-mantis-400",style:{width:mt("printer.printing.progress").to(i=>`${i*100}%`),opacity:mt("printer.printing.opacity")}})})]})]})}):null}const gie="_container_6nvz7_2",vie="_text_6nvz7_22",MT={container:gie,text:vie};function yie(){const t=Ct(),{devices:e}=bn(),n=Xt(W_);return e.screen?b.jsxs("div",{className:"absolute left-[1200px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),b.jsx("div",{className:MT.container,children:b.jsx("pre",{className:MT.text,children:n})})]}):null}function wie(){const t=Ct(),{status:e,dispatch:n,devices:r}=bn(),i=Xt(G_).toArray();return r.switches?b.jsxs("div",{className:"absolute left-[1300px] top-[698px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),b.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((s,o)=>b.jsx("div",{className:"w-6",children:b.jsx(Jc,{checked:s,onCheckedChange:()=>n("switch.toggle",o),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800",disabled:e.type!=="running"})},o))})]}):null}function bie(){const t=Ct(),{devices:e}=bn();return e.timer?b.jsxs("div",{className:"absolute left-[500px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),b.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-evenly",children:[b.jsx(qr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:K_,springs:"timer.CONT"}),b.jsx(qr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:X_,springs:"timer.COMP"})]})]}):null}function YL(){const t=g.useRef(null);return b.jsx("div",{className:"relative h-full w-full",children:b.jsxs(yre,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[b.jsx(xre,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:b.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[b.jsx(Are,{}),b.jsx(Hre,{}),b.jsx(iie,{}),b.jsx(qre,{}),b.jsx(sie,{}),b.jsx(oie,{}),b.jsx(bie,{}),b.jsx(Pre,{}),b.jsx(Yre,{}),b.jsx(tie,{}),b.jsx(nie,{}),b.jsx(mie,{}),b.jsx(wie,{}),b.jsx(yie,{})]})}),b.jsx(Sre,{wrapperRef:t})]})})}const xie=1024;let Sie=0;class Hw{constructor(e,n){this.from=e,this.to=n}}class st{constructor(e={}){this.id=Sie++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Mr.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}st.closedBy=new st({deserialize:t=>t.split(" ")});st.openedBy=new st({deserialize:t=>t.split(" ")});st.group=new st({deserialize:t=>t.split(" ")});st.isolate=new st({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});st.contextHash=new st({perNode:!0});st.lookAhead=new st({perNode:!0});st.mounted=new st({perNode:!0});class N0{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[st.mounted.id]}}const kie=Object.create(null);class Mr{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):kie,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Mr(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(st.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(st.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}Mr.none=new Mr("",Object.create(null),0,8);class aC{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}n.push(i?new Mr(r.name,i,r.id,r.flags):r)}return new aC(n)}}const mm=new WeakMap,RT=new WeakMap;var Nn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Nn||(Nn={}));class Vt{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=N0.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Kx(this.topNode,e)}cursorAt(e,n=0,r=0){let i=mm.get(this)||this.topNode,s=new Kx(i);return s.moveTo(e,n),mm.set(this,s._tree),s}get topNode(){return new Ti(this,0,0,null)}resolve(e,n=0){let r=Nh(mm.get(this)||this.topNode,e,n,!1);return mm.set(this,r),r}resolveInner(e,n=0){let r=Nh(RT.get(this)||this.topNode,e,n,!0);return RT.set(this,r),r}resolveStack(e,n=0){return Eie(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&Nn.IncludeAnonymous)>0;for(let l=this.cursor(o|Nn.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:uC(Mr.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new Vt(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new Vt(Mr.none,n,r,i)))}static build(e){return Aie(e)}}Vt.empty=new Vt(Mr.none,[],[],0);class lC{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new lC(this.buffer,this.index)}}class Xa{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return Mr.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(qL(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let c=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,c)}return new Xa(s,o,this.set)}}function qL(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Nh(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof Ti&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:Nn.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Ti&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class JL{cursor(e=0){return new Kx(this,e)}getChild(e,n=null,r=null){let i=DT(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return DT(this,e,n,r)}resolve(e,n=0){return Nh(this,e,n,!1)}resolveInner(e,n=0){return Nh(this,e,n,!0)}matchContext(e){return Gx(this,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Ti extends JL{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(qL(i,r,d,d+u.length)){if(u instanceof Xa){if(s&Nn.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,n,r-d,i);if(f>-1)return new ya(new _ie(o,u,e,d),null,f)}else if(s&Nn.IncludeAnonymous||!u.type.isAnonymous||cC(u)){let f;if(!(s&Nn.IgnoreMounts)&&(f=N0.get(u))&&!f.overlay)return new Ti(f.tree,d,e,o);let h=new Ti(u,d,e,o);return s&Nn.IncludeAnonymous||!h.type.isAnonymous?h:h.nextChild(n<0?u.children.length-1:0,n,r,i)}}}if(s&Nn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Nn.IgnoreOverlays)&&(i=N0.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Ti(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function DT(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(;!i.type.is(n);)if(!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function Gx(t,e,n=e.length-1){for(let r=t.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class _ie{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class ya extends JL{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new ya(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Nn.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new ya(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ya(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new ya(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new Vt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function ZL(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let r=n instanceof Ti&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new Cie(i,n)}class Cie{constructor(e,n){this.heads=e,this.node=n}get next(){return ZL(this.heads)}}function Eie(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Ti?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,n)),s=o}else{let o=N0.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Ti(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Nh(a,e,n,!1))}}return i?ZL(i):r}class Kx{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ti)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Ti?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Nn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Nn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Nn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&Nn.IncludeAnonymous||a instanceof Xa||!a.type.isAnonymous||cC(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new ya(this.buffer,n,this.stack[i]);return this.bufferNode=new ya(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&n&&n(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Gx(this.node,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Gx(this.node,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function cC(t){return t.children.some(e=>e instanceof Xa||!e.type.isAnonymous||cC(e))}function Aie(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=xie,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new lC(n,n.length):n,l=r.types,c=0,u=0;function d(k,P,E,C,N,M){let{id:R,start:L,end:H,size:$}=a,V=u;for(;$<0;)if(a.next(),$==-1){let Q=s[R];E.push(Q),C.push(L-k);return}else if($==-3){c=R;return}else if($==-4){u=R;return}else throw new RangeError(`Unrecognized record size: ${$}`);let q=l[R],ne,W,j=L-k;if(H-L<=i&&(W=w(a.pos-P,N))){let Q=new Uint16Array(W.size-W.skip),K=a.pos-W.size,ee=Q.length;for(;a.pos>K;)ee=v(W.start,Q,ee);ne=new Xa(Q,H-W.start,r),j=W.start-k}else{let Q=a.pos-$;a.next();let K=[],ee=[],ce=R>=o?R:-1,F=0,I=H;for(;a.pos>Q;)ce>=0&&a.id==ce&&a.size>=0?(a.end<=I-i&&(p(K,ee,L,F,a.end,I,ce,V),F=K.length,I=a.end),a.next()):M>2500?f(L,Q,K,ee):d(L,Q,K,ee,ce,M+1);if(ce>=0&&F>0&&F<K.length&&p(K,ee,L,F,L,I,ce,V),K.reverse(),ee.reverse(),ce>-1&&F>0){let z=h(q);ne=uC(q,K,ee,0,K.length,0,H-L,z,z)}else ne=m(q,K,ee,H-L,V-H)}E.push(ne),C.push(j)}function f(k,P,E,C){let N=[],M=0,R=-1;for(;a.pos>P;){let{id:L,start:H,end:$,size:V}=a;if(V>4)a.next();else{if(R>-1&&H<R)break;R<0&&(R=$-i),N.push(L,H,$),M++,a.next()}}if(M){let L=new Uint16Array(M*4),H=N[N.length-2];for(let $=N.length-3,V=0;$>=0;$-=3)L[V++]=N[$],L[V++]=N[$+1]-H,L[V++]=N[$+2]-H,L[V++]=V;E.push(new Xa(L,N[2]-H,r)),C.push(H-k)}}function h(k){return(P,E,C)=>{let N=0,M=P.length-1,R,L;if(M>=0&&(R=P[M])instanceof Vt){if(!M&&R.type==k&&R.length==C)return R;(L=R.prop(st.lookAhead))&&(N=E[M]+R.length+L)}return m(k,P,E,C,N)}}function p(k,P,E,C,N,M,R,L){let H=[],$=[];for(;k.length>C;)H.push(k.pop()),$.push(P.pop()+E-N);k.push(m(r.types[R],H,$,M-N,L-M)),P.push(N-E)}function m(k,P,E,C,N=0,M){if(c){let R=[st.contextHash,c];M=M?[R].concat(M):[R]}if(N>25){let R=[st.lookAhead,N];M=M?[R].concat(M):[R]}return new Vt(k,P,E,C,M)}function w(k,P){let E=a.fork(),C=0,N=0,M=0,R=E.end-i,L={size:0,start:0,skip:0};e:for(let H=E.pos-k;E.pos>H;){let $=E.size;if(E.id==P&&$>=0){L.size=C,L.start=N,L.skip=M,M+=4,C+=4,E.next();continue}let V=E.pos-$;if($<0||V<H||E.start<R)break;let q=E.id>=o?4:0,ne=E.start;for(E.next();E.pos>V;){if(E.size<0)if(E.size==-3)q+=4;else break e;else E.id>=o&&(q+=4);E.next()}N=ne,C+=$,M+=q}return(P<0||C==k)&&(L.size=C,L.start=N,L.skip=M),L.size>4?L:void 0}function v(k,P,E){let{id:C,start:N,end:M,size:R}=a;if(a.next(),R>=0&&C<o){let L=E;if(R>4){let H=a.pos-(R-4);for(;a.pos>H;)E=v(k,P,E)}P[--E]=L,P[--E]=M-k,P[--E]=N-k,P[--E]=C}else R==-3?c=C:R==-4&&(u=C);return E}let y=[],x=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,y,x,-1,0);let _=(e=t.length)!==null&&e!==void 0?e:y.length?x[0]+y[0].length:0;return new Vt(l[t.topID],y.reverse(),x.reverse(),_)}const IT=new WeakMap;function fg(t,e){if(!t.isAnonymous||e instanceof Xa||e.type!=t)return 1;let n=IT.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Vt)){n=1;break}n+=fg(t,r)}IT.set(e,n)}return n}function uC(t,e,n,r,i,s,o,a,l){let c=0;for(let p=r;p<i;p++)c+=fg(t,e[p]);let u=Math.ceil(c*1.5/8),d=[],f=[];function h(p,m,w,v,y){for(let x=w;x<v;){let _=x,k=m[x],P=fg(t,p[x]);for(x++;x<v;x++){let E=fg(t,p[x]);if(P+E>=u)break;P+=E}if(x==_+1){if(P>u){let E=p[_];h(E.children,E.positions,0,E.children.length,m[_]+y);continue}d.push(p[_])}else{let E=m[x-1]+p[x-1].length-k;d.push(uC(t,p,m,_,x,k,E,null,l))}f.push(k+y-s)}}return h(e,n,r,i,0),(a||l)(d,f,o)}class Dl{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new Dl(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=r)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let h=Math.max(f.from,l)-c,p=Math.min(f.to,d)-c;f=h>=p?null:new Dl(h,p,f.tree,f.offset+c,a>0,!!u)}if(f&&i.push(f),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}class QL{startParse(e,n,r){return typeof e=="string"&&(e=new Pie(e)),r=r?r.length?r.map(i=>new Hw(i.from,i.to)):[new Hw(0,0)]:[new Hw(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class Pie{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new st({perNode:!0});let Tie=0;class Tn{constructor(e,n,r){this.set=e,this.base=n,this.modified=r,this.id=Tie++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new Tn([],null,[]);if(n.set.push(n),e)for(let r of e.set)n.set.push(r);return n}static defineModifier(){let e=new M0;return n=>n.modified.indexOf(e)>-1?n:M0.get(n.base||n,n.modified.concat(e).sort((r,i)=>r.id-i.id))}}let $ie=0;class M0{constructor(){this.instances=[],this.id=$ie++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&Oie(n,a.modified));if(r)return r;let i=[],s=new Tn(i,e,n);for(let a of n)a.instances.push(s);let o=Nie(n);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(M0.get(a,l));return s}}function Oie(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function Nie(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function Mie(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let d=0;;){if(a=="..."&&d>0&&d+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==i.length)break;let h=i[d++];if(d==i.length&&h=="!"){o=0;break}if(h!="/")throw new RangeError("Invalid path: "+i);a=i.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new R0(r,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return e6.add(e)}const e6=new st;class R0{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}R0.empty=new R0([],2,null);function t6(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function Rie(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function Die(t,e,n,r=0,i=t.length){let s=new Iie(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class Iie{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(h=>!h.scope||h.scope(o)));let c=i,u=Lie(e)||R0.empty,d=Rie(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(st.mounted);if(f&&f.overlay){let h=e.node.enter(f.overlay[0].from+a,1),p=this.highlighters.filter(w=>!w.scope||w.scope(f.tree.type)),m=e.firstChild();for(let w=0,v=a;;w++){let y=w<f.overlay.length?f.overlay[w]:null,x=y?y.from+a:l,_=Math.max(n,v),k=Math.min(r,x);if(_<k&&m)for(;e.from<k&&(this.highlightRange(e,_,k,i,s),this.startSpan(Math.min(k,e.to),c),!(e.to>=x||!e.nextSibling())););if(!y||x>r)break;v=y.to+a,v>n&&(this.highlightRange(h.cursor(),Math.max(n,y.from+a),Math.min(r,v),"",p),this.startSpan(Math.min(r,v),c))}m&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function Lie(t){let e=t.type.prop(e6);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const he=Tn.define,gm=he(),Yo=he(),LT=he(Yo),FT=he(Yo),qo=he(),vm=he(qo),Ww=he(qo),ms=he(),ul=he(ms),hs=he(),ps=he(),Xx=he(),Ld=he(Xx),ym=he(),Fe={comment:gm,lineComment:he(gm),blockComment:he(gm),docComment:he(gm),name:Yo,variableName:he(Yo),typeName:LT,tagName:he(LT),propertyName:FT,attributeName:he(FT),className:he(Yo),labelName:he(Yo),namespace:he(Yo),macroName:he(Yo),literal:qo,string:vm,docString:he(vm),character:he(vm),attributeValue:he(vm),number:Ww,integer:he(Ww),float:he(Ww),bool:he(qo),regexp:he(qo),escape:he(qo),color:he(qo),url:he(qo),keyword:hs,self:he(hs),null:he(hs),atom:he(hs),unit:he(hs),modifier:he(hs),operatorKeyword:he(hs),controlKeyword:he(hs),definitionKeyword:he(hs),moduleKeyword:he(hs),operator:ps,derefOperator:he(ps),arithmeticOperator:he(ps),logicOperator:he(ps),bitwiseOperator:he(ps),compareOperator:he(ps),updateOperator:he(ps),definitionOperator:he(ps),typeOperator:he(ps),controlOperator:he(ps),punctuation:Xx,separator:he(Xx),bracket:Ld,angleBracket:he(Ld),squareBracket:he(Ld),paren:he(Ld),brace:he(Ld),content:ms,heading:ul,heading1:he(ul),heading2:he(ul),heading3:he(ul),heading4:he(ul),heading5:he(ul),heading6:he(ul),contentSeparator:he(ms),list:he(ms),quote:he(ms),emphasis:he(ms),strong:he(ms),link:he(ms),monospace:he(ms),strikethrough:he(ms),inserted:he(),deleted:he(),changed:he(),invalid:he(),meta:ym,documentMeta:he(ym),annotation:he(ym),processingInstruction:he(ym),definition:Tn.defineModifier(),constant:Tn.defineModifier(),function:Tn.defineModifier(),standard:Tn.defineModifier(),local:Tn.defineModifier(),special:Tn.defineModifier()};t6([{tag:Fe.link,class:"tok-link"},{tag:Fe.heading,class:"tok-heading"},{tag:Fe.emphasis,class:"tok-emphasis"},{tag:Fe.strong,class:"tok-strong"},{tag:Fe.keyword,class:"tok-keyword"},{tag:Fe.atom,class:"tok-atom"},{tag:Fe.bool,class:"tok-bool"},{tag:Fe.url,class:"tok-url"},{tag:Fe.labelName,class:"tok-labelName"},{tag:Fe.inserted,class:"tok-inserted"},{tag:Fe.deleted,class:"tok-deleted"},{tag:Fe.literal,class:"tok-literal"},{tag:Fe.string,class:"tok-string"},{tag:Fe.number,class:"tok-number"},{tag:[Fe.regexp,Fe.escape,Fe.special(Fe.string)],class:"tok-string2"},{tag:Fe.variableName,class:"tok-variableName"},{tag:Fe.local(Fe.variableName),class:"tok-variableName tok-local"},{tag:Fe.definition(Fe.variableName),class:"tok-variableName tok-definition"},{tag:Fe.special(Fe.variableName),class:"tok-variableName2"},{tag:Fe.definition(Fe.propertyName),class:"tok-propertyName tok-definition"},{tag:Fe.typeName,class:"tok-typeName"},{tag:Fe.namespace,class:"tok-namespace"},{tag:Fe.className,class:"tok-className"},{tag:Fe.macroName,class:"tok-macroName"},{tag:Fe.propertyName,class:"tok-propertyName"},{tag:Fe.operator,class:"tok-operator"},{tag:Fe.comment,class:"tok-comment"},{tag:Fe.meta,class:"tok-meta"},{tag:Fe.invalid,class:"tok-invalid"},{tag:Fe.punctuation,class:"tok-punctuation"}]);var Gw;const Zc=new st;function Fie(t){return Pe.define({combine:t?e=>e.concat(t):void 0})}const jie=new st;class Yi{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Qe.prototype.hasOwnProperty("tree")||Object.defineProperty(Qe.prototype,"tree",{get(){return ls(this)}}),this.parser=n,this.extension=[qu.of(this),Qe.languageData.of((s,o,a)=>{let l=jT(s,o,a),c=l.type.prop(Zc);if(!c)return[];let u=s.facet(c),d=l.type.prop(jie);if(d){let f=l.resolve(o-l.from,a);for(let h of d)if(h.test(f,s)){let p=s.facet(h.facet);return h.type=="replace"?p:p.concat(u)}}return u})].concat(r)}isActiveAt(e,n,r=-1){return jT(e,n,r).type.prop(Zc)==this.data}findRegions(e){let n=e.facet(qu);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Zc)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(st.mounted);if(a){if(a.tree.prop(Zc)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof Vt&&i(c,s.positions[l]+o)}};return i(ls(e),0),r}get allowsNesting(){return!0}}Yi.setState=Ye.define();function jT(t,e,n){let r=t.facet(qu),i=ls(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Nn.ExcludeBuffers))s.type.isTop&&(i=s);return i}function ls(t){let e=t.field(Yi.state,!1);return e?e.tree:Vt.empty}class Bie{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Fd=null;class Xu{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new Xu(e,n,[],Vt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Bie(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Vt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Dl.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Dl.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Fd;Fd=this;try{return e()}finally{Fd=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=BT(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),r=Dl.applyChanges(r,l),i=Vt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new Xu(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=BT(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends QL{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=Fd;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Vt(Mr.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Fd}}function BT(t,e,n){return Dl.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Yu{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Yu(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Xu.create(e.facet(qu).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Yu(r)}}Yi.state=dr.define({create:Yu.init,update(t,e){for(let n of e.effects)if(n.is(Yi.setState))return n.value;return e.startState.facet(qu)!=e.state.facet(qu)?Yu.init(e.state):t.apply(e)}});let n6=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(n6=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Kw=typeof navigator<"u"&&(!((Gw=navigator.scheduling)===null||Gw===void 0)&&Gw.isInputPending)?()=>navigator.scheduling.isInputPending():null,zie=Bn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Yi.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Yi.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=n6(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Yi.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Kw?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>Kw&&Kw()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Yi.setState.of(new Yu(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Qi(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),qu=Pe.define({combine(t){return t.length?t[0]:null},enables:t=>[Yi.state,zie,$e.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class Uie{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const r6=Pe.define(),dC=Pe.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function ic(t){let e=t.facet(dC);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Yx(t,e){let n="",r=t.tabSize,i=t.facet(dC)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function Vie(t,e){t instanceof Qe&&(t=new fC(t));for(let r of t.state.facet(r6)){let i=r(t,e);if(i!==void 0)return i}let n=ls(t.state);return n.length>=e?Wie(t,n,e):null}class fC{constructor(e,n={}){this.state=e,this.options=n,this.unit=ic(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Gh(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Hie=new st;function Wie(t,e,n){let r=e.resolveStack(n),i=r.node.enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let o=i;o!=r.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return i6(r,t,n)}function i6(t,e,n){for(let r=t;r;r=r.next){let i=Kie(r.node);if(i)return i(hC.create(e,n,r))}return 0}function Gie(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Kie(t){let e=t.type.prop(Hie);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(st.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>Jie(o,!0,1,void 0,s&&!Gie(o)?i.from:void 0)}return t.parent==null?Xie:null}function Xie(){return 0}class hC extends fC{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new hC(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(Yie(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return i6(this.context.next,this.base,this.pos)}}function Yie(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function qie(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?n:null;a=l.to}}function Jie(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=e?qie(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const Zie=Pe.define(),Qie=new st;function ese(t,e,n){let r=ls(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(Qie);if(l&&(a.to<r.length-50||r.length==t.doc.length||!tse(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function tse(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function s6(t,e,n){for(let r of t.facet(Zie)){let i=r(t,e,n);if(i)return i}return ese(t,e,n)}function o6(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const pC=Ye.define({map:o6}),ey=Ye.define({map:o6});function a6(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const op=dr.define({create(){return Je.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(pC)&&!nse(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(mC),i=r?Je.replace({widget:new cse(r(e.state,n.value))}):zT;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(ey)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,(i,s)=>{i<r&&s>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return t},provide:t=>$e.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(zT.range(r,i))}return Je.set(e,!0)}});function l6(t,e,n){var r;let i=null;return(r=t.field(op,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function nse(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}function c6(t,e){return t.field(op,!1)?e:e.concat(Ye.appendConfig.of(lse()))}const rse=t=>{for(let e of a6(t)){let n=s6(t.state,e.from,e.to);if(n)return t.dispatch({effects:c6(t.state,[pC.of(n),u6(t,n)])}),!0}return!1},ise=t=>{if(!t.state.field(op,!1))return!1;let e=[];for(let n of a6(t)){let r=l6(t.state,n.from,n.to);r&&e.push(ey.of(r),u6(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function u6(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return $e.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const sse=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),s=s6(e,i.from,i.to);s&&n.push(pC.of(s)),r=(s?t.lineBlockAt(s.to):i).to+1}return n.length&&t.dispatch({effects:c6(t.state,n)}),!!n.length},ose=t=>{let e=t.state.field(op,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(ey.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},ase={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},mC=Pe.define({combine(t){return Za(t,ase)}});function lse(t){let e=[op,use];return t&&e.push(mC.of(t)),e}function d6(t,e){let{state:n}=t,r=n.facet(mC),i=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=l6(t.state,a.from,a.to);l&&t.dispatch({effects:ey.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const zT=Je.replace({widget:new class extends Qa{toDOM(t){return d6(t,null)}}});class cse extends Qa{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return d6(e,this.value)}}const use=$e.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ty{constructor(e,n){this.specs=e;let r;function i(a){let l=Ra.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof Yi?a=>a.prop(Zc)==o.data:o?a=>a==o:void 0,this.style=t6(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new Ra(r):null,this.themeType=n.themeType}static define(e,n){return new ty(e,n||{})}}const qx=Pe.define(),f6=Pe.define({combine(t){return t.length?[t[0]]:null}});function Xw(t){let e=t.facet(qx);return e.length?e:t.facet(f6)}function dse(t,e){let n=[hse],r;return t instanceof ty&&(t.module&&n.push($e.styleModule.of(t.module)),r=t.themeType),e!=null&&e.fallback?n.push(f6.of(t)):r?n.push(qx.computeN([$e.darkTheme],i=>i.facet($e.darkTheme)==(r=="dark")?[t]:[])):n.push(qx.of(t)),n}class fse{constructor(e){this.markCache=Object.create(null),this.tree=ls(e.state),this.decorations=this.buildDeco(e,Xw(e.state))}update(e){let n=ls(e.state),r=Xw(e.state),i=r!=Xw(e.startState);n.length<e.view.viewport.to&&!i&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,n){if(!n||!this.tree.length)return Je.none;let r=new Xl;for(let{from:i,to:s}of e.visibleRanges)Die(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Je.mark({class:l})))},i,s);return r.finish()}}const hse=Hh.high(Bn.fromClass(fse,{decorations:t=>t.decorations})),pse=1e4,mse="()[]{}",gse=new st;function Jx(t,e,n){let r=t.prop(e<0?st.openedBy:st.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Zx(t){let e=t.type.prop(gse);return e?e(t.node):t}function wm(t,e,n,r={}){let i=r.maxScanDistance||pse,s=r.brackets||mse,o=ls(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=Jx(l.type,n,s);if(c&&l.from<l.to){let u=Zx(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return vse(t,e,n,l,u,c,s)}}return yse(t,e,n,o,a.type,i,s)}function vse(t,e,n,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do if(n<0?u.to<=r.from:u.from>=r.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=Zx(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(Jx(u.type,n,o))c++;else if(Jx(u.type,-n,o)){if(c==0){let d=Zx(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function yse(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let f=0;!u.next().done&&f<=s;){let h=u.value;n<0&&(f+=h.length);let p=e+f*n;for(let m=n>0?0:h.length-1,w=n>0?h.length:-1;m!=w;m+=n){let v=o.indexOf(h[m]);if(!(v<0||r.resolveInner(p+m,1).type!=i))if(v%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:p+m,to:p+m+1},matched:v>>1==l>>1};d--}}n>0&&(f+=h.length)}return u.done?{start:c,matched:!1}:null}function UT(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let o=r;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class h6{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=UT(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:UT(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=o=>r?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function wse(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||bse,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||yC}}function bse(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const VT=new WeakMap;class gC extends Yi{constructor(e){let n=Fie(e.languageData),r=wse(e),i,s=new class extends QL{createParse(o,a,l){return new Sse(i,o,a,l)}};super(n,s,[r6.of((o,a)=>this.getIndent(o,a))],e.name),this.topNode=Cse(n),i=this,this.streamParser=r,this.stateAfter=new st({perNode:!0}),this.tokenTable=e.tokenTable?new v6(r.tokenTable):_se}static define(e){return new gC(e)}getIndent(e,n){let r=ls(e.state),i=r.resolve(n);for(;i&&i.type!=this.topNode;)i=i.parent;if(!i)return null;let s,{overrideIndentation:o}=e.options;o&&(s=VT.get(e.state),s!=null&&s<n-1e4&&(s=void 0));let a=vC(this,r,0,i.from,s??n),l,c;if(a?(c=a.state,l=a.pos+1):(c=this.streamParser.startState(e.unit),l=0),n-l>1e4)return null;for(;l<n;){let d=e.state.doc.lineAt(l),f=Math.min(n,d.to);if(d.length){let h=o?o(d.from):-1,p=new h6(d.text,e.state.tabSize,e.unit,h<0?void 0:h);for(;p.pos<f-d.from;)m6(this.streamParser.token,p,c)}else this.streamParser.blankLine(c,e.unit);if(f==n)break;l=d.to+1}let u=e.lineAt(n);return o&&s==null&&VT.set(e.state,u.from),this.streamParser.indent(c,/^\s*(.*)/.exec(u.text)[1],e)}get allowsNesting(){return!1}}function vC(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof Vt&&l<i&&vC(t,a,l,r,i);if(c)return c}return null}function p6(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<r&&a instanceof Vt){if(!(l=p6(t,a,n-o,r-o,i)))break;return i?new Vt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function xse(t,e,n,r){for(let i of e){let s=i.from+(i.openStart?25:0),o=i.to-(i.openEnd?25:0),a=s<=n&&o>n&&vC(t,i.tree,0-i.offset,n,o),l;if(a&&(l=p6(t,i.tree,n+i.offset,a.pos+i.offset,!1)))return{state:a.state,tree:l}}return{state:t.streamParser.startState(r?ic(r):4),tree:Vt.empty}}class Sse{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=Xu.get(),o=i[0].from,{state:a,tree:l}=xse(e,r,o,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(ic(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Xu.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+2048);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,a=this.lineAfter(o);n+=a,r=o+a.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i,s){if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let o=this.chunk.length;s=this.skipGapsTo(r,s,-1),r+=s,i+=this.chunk.length-o}return this.chunk.push(e,n,r,i),s}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,o=new h6(n,e?e.state.tabSize:4,e?ic(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=m6(s.token,o,this.state);if(a&&(i=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,4,i)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Vt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:kse,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Vt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Vt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function m6(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const yC=Object.create(null),Mh=[Mr.none],kse=new aC(Mh),HT=[],WT=Object.create(null),g6=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])g6[t]=y6(yC,e);class v6{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),g6)}resolve(e){return e?this.table[e]||(this.table[e]=y6(this.extra,e)):0}}const _se=new v6(yC);function Yw(t,e){HT.indexOf(t)>-1||(HT.push(t),console.warn(e))}function y6(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Fe[c];u?typeof u=="function"?l.length?l=l.map(u):Yw(c,`Modifier ${c} used at start of tag`):l.length?Yw(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:Yw(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(a=>a.id),s=WT[i];if(s)return s.id;let o=WT[i]=Mr.define({id:Mh.length,name:r,props:[Mie({[r]:n})]});return Mh.push(o),o.id}function Cse(t){let e=Mr.define({id:Mh.length,name:"Document",props:[Zc.add(()=>t)],top:!0});return Mh.push(e),e}Rt.RTL,Rt.LTR;const Ese=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=wC(t.state,n.from);return r.line?Ase(t):r.block?Ose(t):!1};function ap(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const Ase=ap(bC,0),Pse=ap(bC,1),Tse=ap(bC,2),$se=ap(w6,0),Ose=ap((t,e)=>w6(t,e,Mse(e)),0);function wC(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const jd=50;function Nse(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-jd,r),o=t.sliceDoc(i,i+jd),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let u,d;i-r<=2*jd?u=d=t.sliceDoc(r,i):(u=t.sliceDoc(r,r+jd),d=t.sliceDoc(i-jd,i));let f=/^\s*/.exec(u)[0].length,h=/\s*$/.exec(d)[0].length,p=d.length-h-n.length;return u.slice(f,f+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:i-h-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function Mse(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function w6(t,e,n=e.selection.ranges){let r=n.map(s=>wC(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>Nse(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function bC(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,l=1e9,c=wC(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>i&&(s==o||o>d.from)){i=d.from;let f=/^\s*/.exec(d.text)[0].length,h=f==d.length,p=d.text.slice(f,f+c.length)==c?f:-1;f<d.text.length&&f<l&&(l=f),r.push({line:d,comment:p,token:c,indent:f,empty:h,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of r)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const Qx=Mo.define(),Rse=Mo.define(),Dse=Pe.define(),b6=Pe.define({combine(t){return Za(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),x6=dr.define({create(){return Is.empty},update(t,e){let n=e.state.facet(b6),r=e.annotation(Qx);if(r){let l=Tr.fromTransaction(e,r.selection),c=r.side,u=c==0?t.undone:t.done;return l?u=D0(u,u.length,n.minDepth,l):u=_6(u,e.startState.selection),new Is(c==0?r.rest:u,c==0?u:r.rest)}let i=e.annotation(Rse);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(pn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Tr.fromTransaction(e),o=e.annotation(pn.time),a=e.annotation(pn.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Is(t.done.map(Tr.fromJSON),t.undone.map(Tr.fromJSON))}});function Ise(t={}){return[x6,b6.of(t),$e.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?S6:e.inputType=="historyRedo"?eS:null;return r?(e.preventDefault(),r(n)):!1}})]}function xC(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(x6,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const S6=xC(0,!1),eS=xC(1,!1),Lse=xC(0,!0);class Tr{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Tr(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Tr(e.changes&&un.fromJSON(e.changes),[],e.mapped&&Bs.fromJSON(e.mapped),e.startSelection&&ie.fromJSON(e.startSelection),e.selectionsAfter.map(ie.fromJSON))}static fromTransaction(e,n){let r=ki;for(let i of e.startState.facet(Dse)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Tr(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,ki)}static selection(e){return new Tr(void 0,ki,void 0,void 0,e)}}function D0(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function Fse(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(r=!0)}}),r}function jse(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function k6(t,e){return t.length?e.length?t.concat(e):t:e}const ki=[],Bse=200;function _6(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Bse));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),D0(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Tr.selection([e])]}function zse(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function qw(t,e){if(!t.length)return t;let n=t.length,r=ki;for(;n;){let i=Use(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Tr.selection(r)]:ki}function Use(t,e,n){let r=k6(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):ki,n);if(!t.changes)return Tr.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Tr(i,Ye.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const Vse=/^(input\.type|delete)($|\.)/;class Is{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Is(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||Vse.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,Fse(a.changes,e.changes))||r=="input.type.compose")?o=D0(o,o.length-1,i.minDepth,new Tr(e.changes.compose(a.changes),k6(e.effects,a.effects),a.mapped,a.startSelection,ki)):o=D0(o,o.length,i.minDepth,e),new Is(o,ki,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:ki;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&jse(s[s.length-1],e)?this:new Is(_6(this.done,e),this.undone,n,r)}addMapping(e){return new Is(qw(this.done,e),qw(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Qx.of({side:e,rest:zse(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?ki:i.slice(0,i.length-1);return s.mapped&&(a=qw(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Qx.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Is.empty=new Is(ki,ki);function lp(t,e){return ie.create(t.ranges.map(e),t.mainIndex)}function nl(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function fc({state:t,dispatch:e},n){let r=lp(t.selection,n);return r.eq(t.selection,!0)?!1:(e(nl(t,r)),!0)}function ny(t,e){return ie.cursor(e?t.to:t.from)}function C6(t,e){return fc(t,n=>n.empty?t.moveByChar(n,e):ny(n,e))}function rl(t){return t.textDirectionAt(t.state.selection.main.head)==Rt.LTR}const GT=t=>C6(t,!rl(t)),KT=t=>C6(t,rl(t));function E6(t,e){return fc(t,n=>n.empty?t.moveByGroup(n,e):ny(n,e))}const Hse=t=>E6(t,!rl(t)),Wse=t=>E6(t,rl(t));function A6(t,e){return fc(t,n=>{if(!n.empty)return ny(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const XT=t=>A6(t,!1),YT=t=>A6(t,!0);function P6(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet($e.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function T6(t,e){let n=P6(t),{state:r}=t,i=lp(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):ny(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=$e.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(nl(r,i),{effects:s}),!0}const Jw=t=>T6(t,!1),Zw=t=>T6(t,!0);function ry(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=ie.cursor(r.from+s))}return i}const qT=t=>fc(t,e=>ry(t,e,!0)),JT=t=>fc(t,e=>ry(t,e,!1)),Gse=t=>fc(t,e=>ie.cursor(t.lineBlockAt(e.head).from,1)),Kse=t=>fc(t,e=>ie.cursor(t.lineBlockAt(e.head).to,-1));function Xse(t,e,n){let r=!1,i=lp(t.selection,s=>{let o=wm(t,s.head,-1)||wm(t,s.head,1)||s.head>0&&wm(t,s.head-1,1)||s.head<t.doc.length&&wm(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return n?ie.range(s.anchor,a):ie.cursor(a)});return r?(e(nl(t,i)),!0):!1}const Yse=({state:t,dispatch:e})=>Xse(t,e,!1);function il(t,e){let n=lp(t.state.selection,r=>{let i=e(r);return ie.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(nl(t.state,n)),!0)}function $6(t,e){return il(t,n=>t.moveByChar(n,e))}const ZT=t=>$6(t,!rl(t)),QT=t=>$6(t,rl(t));function O6(t,e){return il(t,n=>t.moveByGroup(n,e))}const qse=t=>O6(t,!rl(t)),Jse=t=>O6(t,rl(t));function N6(t,e){return il(t,n=>t.moveVertically(n,e))}const e$=t=>N6(t,!1),t$=t=>N6(t,!0);function M6(t,e){return il(t,n=>t.moveVertically(n,e,P6(t).height))}const n$=t=>M6(t,!1),r$=t=>M6(t,!0),i$=t=>il(t,e=>ry(t,e,!0)),s$=t=>il(t,e=>ry(t,e,!1)),Zse=t=>il(t,e=>ie.cursor(t.lineBlockAt(e.head).from)),Qse=t=>il(t,e=>ie.cursor(t.lineBlockAt(e.head).to)),o$=({state:t,dispatch:e})=>(e(nl(t,{anchor:0})),!0),a$=({state:t,dispatch:e})=>(e(nl(t,{anchor:t.doc.length})),!0),l$=({state:t,dispatch:e})=>(e(nl(t,{anchor:t.selection.main.anchor,head:0})),!0),c$=({state:t,dispatch:e})=>(e(nl(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),eoe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),toe=({state:t,dispatch:e})=>{let n=sy(t).map(({from:r,to:i})=>ie.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:ie.create(n),userEvent:"select"})),!0};function iy(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=bm(t,l,!1)):l>o&&(n="delete.forward",l=bm(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=bm(t,o,!1),a=bm(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:ie.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?$e.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function bm(t,e,n){if(t instanceof $e)for(let r of t.state.facet($e.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const R6=(t,e)=>iy(t,n=>{let r=n.from,{state:i}=t,s=i.doc.lineAt(r),o,a;if(!e&&r>s.from&&r<s.from+200&&!/[^ \t]/.test(o=s.text.slice(0,r-s.from))){if(o[o.length-1]=="	")return r-1;let l=Gh(o,i.tabSize),c=l%ic(i)||ic(i);for(let u=0;u<c&&o[o.length-1-u]==" ";u++)r--;a=r}else a=Dn(s.text,r-s.from,e,e)+s.from,a==r&&s.number!=(e?i.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(a-s.from,r-s.from))&&(a=Dn(s.text,a-s.from,!1,!1)+s.from);return a}),Qw=t=>R6(t,!1),u$=t=>R6(t,!0),D6=(t,e)=>iy(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Dn(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||r!=n.head)&&(a=u),r=l}return r}),d$=t=>D6(t,!1),noe=t=>D6(t,!0),f$=t=>iy(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),roe=t=>iy(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),ioe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:dt.of(["",""])},range:ie.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},soe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:Dn(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Dn(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:ie.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function sy(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function I6(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of sy(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(ie.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(ie.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:ie.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const ooe=({state:t,dispatch:e})=>I6(t,e,!1),aoe=({state:t,dispatch:e})=>I6(t,e,!0);function L6(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of sy(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const loe=({state:t,dispatch:e})=>L6(t,e,!1),coe=({state:t,dispatch:e})=>L6(t,e,!0),uoe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(sy(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=lp(e.selection,i=>t.moveVertically(i,!0)).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function doe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=ls(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(st.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const h$=foe(!1);function foe(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&doe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new fC(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=Vie(c,s);for(u==null&&(u=Gh(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",Yx(e,u)];return l&&d.push(Yx(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:dt.of(d)},range:ie.cursor(s+1+d[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function F6(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:ie.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const tS=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(F6(t,(n,r)=>{r.push({from:n.from,insert:t.facet(dC)})}),{userEvent:"input.indent"})),!0),p$=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(F6(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=Gh(i,t.tabSize),o=0,a=Yx(t,Math.max(0,s-ic(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0);function Et(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)j6(t,arguments[e]);return t}function j6(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)j6(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const m$=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Rh{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(m$(a)):m$,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return tr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=gk(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Gi(e);let i=this.normalize(n);for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n){let r=null;for(let i=0;i<this.matches.length;i+=2){let s=this.matches[i],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[i+1],to:n+1}:(this.matches[i]++,o=!0)),o||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:n+1}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Rh.prototype[Symbol.iterator]=function(){return this});const B6={from:-1,to:-1,match:/.*/.exec("")},SC="gm"+(/x/.unicode==null?"":"u");class z6{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=B6,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new U6(e,n,r,i,s);this.re=new RegExp(n,SC+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=I0(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=I0(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const eb=new WeakMap;class vu{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=eb.get(e);if(!i||i.from>=r||i.to<=n){let a=new vu(n,e.sliceString(n,r));return eb.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),eb.set(e,new vu(o,s)),new vu(n,s.slice(n-o,r-o))}}class U6{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=B6,this.matchPos=I0(e,i),this.re=new RegExp(n,SC+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=vu.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=I0(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=vu.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(z6.prototype[Symbol.iterator]=U6.prototype[Symbol.iterator]=function(){return this});function hoe(t){try{return new RegExp(t,SC),!0}catch{return!1}}function I0(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function nS(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Et("input",{class:"cm-textfield",name:"line",value:e}),r=Et("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:L0.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Et("label",t.state.phrase("Go to line"),": ",n)," ",Et("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,f=u?+u.slice(1):0,h=c?+c:a.number;if(c&&d){let w=h/100;l&&(w=w*(l=="-"?-1:1)+a.number/o.doc.lines),h=Math.round(o.doc.lines*w)}else c&&l&&(h=h*(l=="-"?-1:1)+a.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,h))),m=ie.cursor(p.from+Math.max(0,Math.min(f,p.length)));t.dispatch({effects:[L0.of(!1),$e.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:r}}const L0=Ye.define(),g$=dr.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(L0)&&(t=n.value);return t},provide:t=>rh.from(t,e=>e?nS:null)}),poe=t=>{let e=nh(t,nS);if(!e){let n=[L0.of(!0)];t.state.field(g$,!1)==null&&n.push(Ye.appendConfig.of([g$,moe])),t.dispatch({effects:n}),e=nh(t,nS)}return e&&e.dom.querySelector("input").select(),!0},moe=$e.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),goe=({state:t,dispatch:e})=>{let{selection:n}=t,r=ie.create(n.ranges.map(i=>t.wordAt(i.head)||ie.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function voe(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new Rh(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Rh(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const yoe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return goe({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=voe(t,r);return i?(e(t.update({selection:t.selection.addRange(ie.range(i.from,i.to),!1),effects:$e.scrollIntoView(i.to)})),!0):!1},ud=Pe.define({combine(t){return Za(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Aoe(e),scrollToMatch:e=>$e.scrollIntoView(e)})}});class V6{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||hoe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Soe(this):new boe(this)}getCursor(e,n=0,r){let i=e.doc?e:Qe.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?$c(this,i,n,r):Tc(this,i,n,r)}}class H6{constructor(e){this.spec=e}}function Tc(t,e,n,r){return new Rh(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?woe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function woe(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(F0(i,n-s))!=In.Word||e(j0(i,n-s))!=In.Word)&&(e(j0(i,r-s))!=In.Word||e(F0(i,r-s))!=In.Word))}class boe extends H6{constructor(e){super(e)}nextMatch(e,n,r){let i=Tc(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=Tc(this.spec,e,0,n).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=Tc(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Tc(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Tc(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function $c(t,e,n,r){return new z6(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?xoe(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function F0(t,e){return t.slice(Dn(t,e,!1),e)}function j0(t,e){return t.slice(e,Dn(t,e))}function xoe(t){return(e,n,r)=>!r[0].length||(t(F0(r.input,r.index))!=In.Word||t(j0(r.input,r.index))!=In.Word)&&(t(j0(r.input,r.index+r[0].length))!=In.Word||t(F0(r.input,r.index+r[0].length))!=In.Word)}class Soe extends H6{nextMatch(e,n,r){let i=$c(this.spec,e,r,e.doc.length).next();return i.done&&(i=$c(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=$c(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:n)}matchAll(e,n){let r=$c(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=$c(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Dh=Ye.define(),kC=Ye.define(),Oa=dr.define({create(t){return new tb(rS(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Dh)?t=new tb(n.value.create(),t.panel):n.is(kC)&&(t=new tb(t.query,n.value?_C:null));return t},provide:t=>rh.from(t,e=>e.panel)});class tb{constructor(e,n){this.query=e,this.panel=n}}const koe=Je.mark({class:"cm-searchMatch"}),_oe=Je.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Coe=Bn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Oa))}update(t){let e=t.state.field(Oa);(e!=t.startState.field(Oa)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Je.none;let{view:n}=this,r=new Xl;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(f=>f.from==c&&f.to==u);r.add(c,u,d?_oe:koe)})}return r.finish()}},{decorations:t=>t.decorations});function cp(t){return e=>{let n=e.state.field(Oa,!1);return n&&n.query.spec.valid?t(e,n):Y6(e)}}const v$=cp((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=ie.single(r.from,r.to),s=t.state.facet(ud);return t.dispatch({selection:i,effects:[CC(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),X6(t),!0}),y$=cp((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=ie.single(i.from,i.to),o=t.state.facet(ud);return t.dispatch({selection:s,effects:[CC(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),X6(t),!0}),W6=cp((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:ie.create(n.map(r=>ie.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),Eoe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new Rh(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(ie.range(a.value.from,a.value.to))}return e(t.update({selection:ie.create(s,o),userEvent:"select.search.matches"})),!0},w$=cp((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=[],a,l,c=[];if(s.from==r&&s.to==i&&(l=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(n,s.from,s.to),c.push($e.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),s){let u=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a=ie.single(s.from-u,s.to-u),c.push(CC(t,s)),c.push(n.facet(ud).scrollToMatch(a.main,t))}return t.dispatch({changes:o,selection:a,effects:c,userEvent:"input.replace"}),!0}),G6=cp((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:$e.announce.of(r),userEvent:"input.replace.all"}),!0});function _C(t){return t.state.facet(ud).createPanel(t)}function rS(t,e){var n,r,i,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(ud);return new V6({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function K6(t){let e=nh(t,_C);return e&&e.dom.querySelector("[main-field]")}function X6(t){let e=K6(t);e&&e==t.root.activeElement&&e.select()}const Y6=t=>{let e=t.state.field(Oa,!1);if(e&&e.panel){let n=K6(t);if(n&&n!=t.root.activeElement){let r=rS(t.state,e.query.spec);r.valid&&t.dispatch({effects:Dh.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[kC.of(!0),e?Dh.of(rS(t.state,e.query.spec)):Ye.appendConfig.of(Toe)]});return!0},q6=t=>{let e=t.state.field(Oa,!1);if(!e||!e.panel)return!1;let n=nh(t,_C);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:kC.of(!1)}),!0};class Aoe{constructor(e){this.view=e;let n=this.query=e.state.field(Oa).query.spec;this.commit=this.commit.bind(this),this.searchField=Et("input",{value:n.search,placeholder:Fr(e,"Find"),"aria-label":Fr(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Et("input",{value:n.replace,placeholder:Fr(e,"Replace"),"aria-label":Fr(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Et("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Et("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Et("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return Et("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=Et("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>v$(e),[Fr(e,"next")]),r("prev",()=>y$(e),[Fr(e,"previous")]),r("select",()=>W6(e),[Fr(e,"all")]),Et("label",null,[this.caseField,Fr(e,"match case")]),Et("label",null,[this.reField,Fr(e,"regexp")]),Et("label",null,[this.wordField,Fr(e,"by word")]),...e.state.readOnly?[]:[Et("br"),this.replaceField,r("replace",()=>w$(e),[Fr(e,"replace")]),r("replaceAll",()=>G6(e),[Fr(e,"replace all")])],Et("button",{name:"close",onclick:()=>q6(e),"aria-label":Fr(e,"close"),type:"button"},[""])])}commit(){let e=new V6({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Dh.of(e)}))}keydown(e){Ez(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?y$:v$)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),w$(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Dh)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ud).top}}function Fr(t,e){return t.state.phrase(e)}const xm=30,Sm=/[\s\.,:;?!]/;function CC(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-xm),o=Math.min(i,n+xm),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<xm;l++)if(!Sm.test(a[l+1])&&Sm.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-xm;l--)if(!Sm.test(a[l-1])&&Sm.test(a[l])){a=a.slice(0,l);break}}return $e.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const Poe=$e.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Toe=[Oa,Hh.low(Coe),Poe];class $oe{constructor(e,n,r){this.state=e,this.pos=n,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let n=ls(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(J6(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function b$(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Ooe(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=b$(e)+b$(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Noe(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:Ooe(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}class x${constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function yu(t){return t.selection.main.from}function J6(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const Moe=Mo.define();function Roe(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return Object.assign(Object.assign({},t.changeByRange(a=>a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r)?{range:a}:{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:e},range:ie.cursor(a.from+s+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const S$=new WeakMap;function Doe(t){if(!Array.isArray(t))return t;let e=S$.get(t);return e||S$.set(t,e=Noe(t)),e}const Z6=Ye.define(),EC=Ye.define();class Ioe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=tr(e,n),i=Gi(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(tr(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let y=tr(e,0),x=Gi(y),_=x==e.length?0:-100;if(y!=n[0])if(y==r[0])_+=-200;else return!1;return this.ret(_,[0,x])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let y=0,x=Math.min(e.length,200);y<x&&c<l;){let _=tr(e,y);(_==n[c]||_==r[c])&&(i[c++]=y),y+=Gi(_)}if(c<l)return!1}let u=0,d=0,f=!1,h=0,p=-1,m=-1,w=/[a-z]/.test(e),v=!0;for(let y=0,x=Math.min(e.length,200),_=0;y<x&&d<l;){let k=tr(e,y);a<0&&(u<l&&k==n[u]&&(s[u++]=y),h<l&&(k==n[h]||k==r[h]?(h==0&&(p=y),m=y+1,h++):h=0));let P,E=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(P=gk(k))!=P.toLowerCase()?1:P!=P.toUpperCase()?2:0;(!y||E==1&&w||_==0&&E!=0)&&(n[d]==k||r[d]==k&&(f=!0)?o[d++]=y:o.length&&(v=!1)),_=E,y+=Gi(k)}return d==l&&o[0]==0&&v?this.result(-100+(f?-200:0),o,e):h==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):h==l?this.ret(-900-e.length,[p,m]):d==l?this.result(-100+(f?-200:0)+-700+(v?0:-1100),o,e):n.length==2?!1:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?Gi(tr(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}const Ns=Pe.define({combine(t){return Za(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Loe,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>k$(e(r),n(r)),optionClass:(e,n)=>r=>k$(e(r),n(r)),addToOptions:(e,n)=>e.concat(n)})}});function k$(t,e){return t?e?t+" "+e:t:e}function Loe(t,e,n,r,i,s){let o=t.textDirection==Rt.RTL,a=o,l=!1,c="top",u,d,f=e.left-i.left,h=i.right-e.right,p=r.right-r.left,m=r.bottom-r.top;if(a&&f<Math.min(p,h)?a=!1:!a&&h<Math.min(p,f)&&(a=!0),p<=(a?f:h))u=Math.max(i.top,Math.min(n.top,i.bottom-m))-e.top,d=Math.min(400,a?f:h);else{l=!0,d=Math.min(400,(o?e.right:i.right-e.left)-30);let y=i.bottom-e.bottom;y>=m||y>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let w=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/w}px; max-width: ${d/v}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function Foe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function nb(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class joe{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(Ns);this.optionContent=Foe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=nb(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(Ns).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:EC.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=nb(s.length,o,e.state.facet(Ns).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=nb(n.options.length,n.selected,this.view.state.facet(Ns).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>Qi(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&zoe(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Ns).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>r.from||r.from==0))if(s=f,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let h=i.appendChild(document.createElement("completion-section"));h.textContent=f}}const u=i.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let f of this.optionContent){let h=f(a,this.view.state,this.view,l);h&&u.appendChild(h)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Boe(t,e){return n=>new joe(n,t,e)}function zoe(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function _$(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function Uoe(t,e){let n=[],r=null,i=l=>{n.push(l);let{section:c}=l.completion;if(c){r||(r=[]);let u=typeof c=="string"?c:c.name;r.some(d=>d.name==u)||r.push(typeof c=="string"?{name:u}:c)}};for(let l of t)if(l.hasResult()){let c=l.result.getMatch;if(l.result.filter===!1)for(let u of l.result.options)i(new x$(u,l.source,c?c(u):[],1e9-n.length));else{let u=new Ioe(e.sliceDoc(l.from,l.to));for(let d of l.result.options)if(u.match(d.label)){let f=d.displayLabel?c?c(d,u.matched):[]:u.matched;i(new x$(d,l.source,f,u.score+(d.boost||0)))}}}if(r){let l=Object.create(null),c=0,u=(d,f)=>{var h,p;return((h=d.rank)!==null&&h!==void 0?h:1e9)-((p=f.rank)!==null&&p!==void 0?p:1e9)||(d.name<f.name?-1:1)};for(let d of r.sort(u))c-=1e5,l[d.name]=c;for(let d of n){let{section:f}=d.completion;f&&(d.score+=l[typeof f=="string"?f:f.name])}}let s=[],o=null,a=e.facet(Ns).compareCompletions;for(let l of n.sort((c,u)=>u.score-c.score||a(c.completion,u.completion))){let c=l.completion;!o||o.label!=c.label||o.detail!=c.detail||o.type!=null&&c.type!=null&&o.type!=c.type||o.apply!=c.apply||o.boost!=c.boost?s.push(l):_$(l.completion)>_$(o)&&(s[s.length-1]=l),o=l.completion}return s}class Qc{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Qc(this.options,C$(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s){let o=Uoe(e,n);if(!o.length)return i&&e.some(l=>l.state==1)?new Qc(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let a=n.facet(Ns).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let l=i.options[i.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==l){a=c;break}}return new Qc(o,C$(r,a),{pos:e.reduce((l,c)=>c.hasResult()?Math.min(l,c.from):l,1e8),create:Yoe,above:s.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new Qc(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class B0{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new B0(Woe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(Ns),s=(r.override||n.languageDataAt("autocomplete",yu(n)).map(Doe)).map(a=>(this.active.find(c=>c.source==a)||new Kr(a,this.active.some(c=>c.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!Voe(s,this.active)?o=Qc.build(s,n,this.id,o,r):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new Kr(a.source,0):a));for(let a of e.effects)a.is(Q6)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new B0(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Hoe}}function Voe(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;r<e.length&&!e[r].hasResult;)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const Hoe={"aria-autocomplete":"list"};function C$(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Woe=[];function Goe(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Kr{constructor(e,n,r=-1){this.source=e,this.state=n,this.explicitPos=r}hasResult(){return!1}update(e,n){let r=Goe(e),i=this;r?i=i.handleUserEvent(e,r,n):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Kr(i.source,0));for(let s of e.effects)if(s.is(Z6))i=new Kr(i.source,1,s.value?yu(e.state):-1);else if(s.is(EC))i=new Kr(i.source,0);else if(s.is(Xoe))for(let o of s.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,n,r){return n=="delete"||!r.activateOnTyping?this.map(e.changes):new Kr(this.source,1)}handleChange(e){return e.changes.touchesRange(yu(e.startState))?new Kr(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Kr(this.source,this.state,e.mapPos(this.explicitPos))}}class Ef extends Kr{constructor(e,n,r,i,s){super(e,2,n),this.result=r,this.from=i,this.to=s}hasResult(){return!0}handleUserEvent(e,n,r){var i;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=yu(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||n=="delete"&&yu(e.startState)==this.from)return new Kr(this.source,n=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return Koe(this.result.validFor,e.state,s,o)?new Ef(this.source,l,this.result,s,o):this.result.update&&(c=this.result.update(this.result,s,o,new $oe(e.state,a,l>=0)))?new Ef(this.source,l,c,c.from,(i=c.to)!==null&&i!==void 0?i:yu(e.state)):new Kr(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Kr(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Ef(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function Koe(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):J6(t,!0).test(i)}const Xoe=Ye.define({map(t,e){return t.map(n=>n.map(e))}}),Q6=Ye.define(),dd=dr.define({create(){return B0.start()},update(t,e){return t.update(e)},provide:t=>[Pk.from(t,e=>e.tooltip),$e.contentAttributes.from(t,e=>e.attrs)]});function e4(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(dd).active.find(i=>i.source==e.source);return r instanceof Ef?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},Roe(t.state,n,r.from,r.to)),{annotations:Moe.of(e.completion)})):n(t,e.completion,r.from,r.to),!0):!1}const Yoe=Boe(dd,e4);function km(t,e="option"){return n=>{let r=n.state.field(dd,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(Ns).interactionDelay)return!1;let i=1,s;e=="page"&&(s=iU(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:Q6.of(a)}),!0}}const E$=t=>{let e=t.state.field(dd,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Ns).interactionDelay?!1:e4(t,e.open.options[e.open.selected])},qoe=t=>t.state.field(dd,!1)?(t.dispatch({effects:Z6.of(!0)}),!0):!1,Joe=t=>{let e=t.state.field(dd,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:EC.of(null)}),!0)},t4={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},n4=new class extends Kl{};n4.startSide=1;n4.endSide=-1;const rb="()[]{}<>";function Zoe(t){for(let e=0;e<rb.length;e+=2)if(rb.charCodeAt(e)==t)return rb.charAt(e+1);return gk(t<128?t:t+1)}function Qoe(t,e){return t.languageDataAt("closeBrackets",e)[0]||t4}const eae=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=Qoe(t,t.selection.main.head).brackets||t4.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=nae(t.doc,o.head);for(let l of r)if(l==a&&tae(t.doc,o.head)==Zoe(tr(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:ie.cursor(o.head-l.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i};function tae(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Gi(tr(n,0)))}function nae(t,e){let n=t.sliceString(e-2,e);return Gi(tr(n,0))==n.length?n:n.slice(1)}class rae{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class bl{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=e,s=r.facet(Pl).markerFilter;s&&(i=s(i));let o=Je.set(i.map(a=>a.from==a.to||a.from==a.to-1&&r.doc.lineAt(a.from).to==a.from?Je.widget({widget:new hae(a),diagnostic:a}).range(a.from):Je.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new bl(o,n,Ju(o))}}function Ju(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return r=new rae(i,s,o.diagnostic),!1}),r}function iae(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(r=>r.is(AC))||t.changes.touchesRange(n.from,n.to))}function r4(t,e){return t.field(Jr,!1)?e:e.concat(Ye.appendConfig.of(a4))}function sae(t,e){return{effects:r4(t,[AC.of(e)])}}const AC=Ye.define(),PC=Ye.define(),i4=Ye.define(),Jr=dr.define({create(){return new bl(Je.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),r=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);r=Ju(n,t.selected.diagnostic,i)||Ju(n,null,i)}t=new bl(n,t.panel,r)}for(let n of e.effects)n.is(AC)?t=bl.init(n.value,t.panel,e.state):n.is(PC)?t=new bl(t.diagnostics,n.value?oy.open:null,t.selected):n.is(i4)&&(t=new bl(t.diagnostics,t.panel,n.value));return t},provide:t=>[rh.from(t,e=>e.panel),$e.decorations.from(t,e=>e.diagnostics)]}),oae=Je.mark({class:"cm-lintRange cm-lintRange-active"});function aae(t,e,n){let{diagnostics:r}=t.state.field(Jr),i=[],s=2e8,o=0;r.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0))&&(i.push(u.diagnostic),s=Math.min(l,s),o=Math.max(c,o))});let a=t.state.facet(Pl).tooltipFilter;return a&&(i=a(i)),i.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:lae(t,i)}}}:null}function lae(t,e){return Et("ul",{class:"cm-tooltip-lint"},e.map(n=>o4(t,n,!1)))}const cae=t=>{let e=t.state.field(Jr,!1);(!e||!e.panel)&&t.dispatch({effects:r4(t.state,[PC.of(!0)])});let n=nh(t,oy.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},A$=t=>{let e=t.state.field(Jr,!1);return!e||!e.panel?!1:(t.dispatch({effects:PC.of(!1)}),!0)},uae=t=>{let e=t.state.field(Jr,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},dae=Bn.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Pl);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Pl);Promise.all(n.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(sae(this.view.state,i))},r=>{Qi(this.view.state,r)})}}update(t){let e=t.state.facet(Pl);(t.docChanged||e!=t.startState.facet(Pl)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Pl=Pe.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},Za(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n}))}});function fae(t,e={}){return[Pl.of({source:t,config:e}),dae,a4]}function s4(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function o4(t,e,n){var r;let i=n?s4(e.actions):[];return Et("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Et("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let h=Ju(t.state.field(Jr).diagnostics,e);h&&s.apply(t,h.from,h.to)},{name:c}=s,u=i[o]?c.indexOf(i[o]):-1,d=u<0?c:[c.slice(0,u),Et("u",c.slice(u,u+1)),c.slice(u+1)];return Et("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&Et("div",{class:"cm-diagnosticSource"},e.source))}class hae extends Qa{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Et("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class P${constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=o4(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class oy{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)A$(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=s4(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Ju(this.view.state.field(Jr).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=Et("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=Et("div",{class:"cm-panel-lint"},this.list,Et("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>A$(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Jr).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Jr),r=0,i=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let c=-1,u;for(let d=r;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){c=d;break}c<0?(u=new P$(this.view,l.diagnostic),this.items.splice(r,0,u),i=!0):(u=this.items[c],c>r&&(this.items.splice(r,c-r),i=!0)),n&&u.diagnostic==n.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),s=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new P$(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{let l=a.height/this.list.offsetHeight;o.top<a.top?this.list.scrollTop-=(a.top-o.top)/l:o.bottom>a.bottom&&(this.list.scrollTop+=(o.bottom-a.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Jr),r=Ju(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:i4.of(r)})}static open(e){return new oy(e)}}function pae(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function _m(t){return pae(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const mae=$e.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:_m("#d11")},".cm-lintRange-warning":{backgroundImage:_m("orange")},".cm-lintRange-info":{backgroundImage:_m("#999")},".cm-lintRange-hint":{backgroundImage:_m("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),a4=[Jr,$e.decorations.compute([Jr],t=>{let{selected:e,panel:n}=t.field(Jr);return!e||!n||e.from==e.to?Je.none:Je.set([oae.range(e.from,e.to)])}),rU(aae,{hideOn:iae}),mae],l4=t=>e=>{const n=t==="down";let r=e.state.selection;for(const i of r.ranges)r=r.addRange(e.moveVertically(i,n));return e.dispatch({selection:r}),!0},gae=l4("up"),vae=l4("down"),yae=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let r=n.from;r<=n.to;){const i=t.state.doc.lineAt(r),s=Math.min(i.to,n.to);e?e=e.addRange(ie.range(s,s)):e=ie.single(s),r=i.to+1}return e?(t.dispatch({selection:e}),!0):!1},wae=[{key:"Ctrl-Space",run:qoe},{key:"Escape",run:Joe},{key:"ArrowDown",run:km(!0)},{key:"ArrowUp",run:km(!1)},{key:"PageDown",run:km(!0,"page")},{key:"PageUp",run:km(!1,"page")},{key:"Enter",run:E$},{key:"Tab",run:E$},{key:"Mod-f",run:Y6,scope:"editor search-panel"},{key:"Escape",run:q6,scope:"editor search-panel"},{key:"Alt-Enter",run:W6,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:G6,scope:"editor search-panel"},{key:"Ctrl-g",run:poe},{key:"Mod-d",run:yoe,preventDefault:!0},{key:"Shift-Mod-l",run:Eoe},{key:"Enter",run:h$,shift:h$},{key:"ArrowLeft",run:GT,shift:ZT,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Hse,shift:qse},{key:"ArrowRight",run:KT,shift:QT,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Wse,shift:Jse},{key:"ArrowUp",run:XT,shift:e$,preventDefault:!0},{key:"ArrowDown",run:YT,shift:t$,preventDefault:!0},{key:"Home",run:JT,shift:s$},{mac:"Cmd-ArrowLeft",run:JT,shift:s$},{key:"Mod-Home",run:o$,shift:l$},{mac:"Cmd-ArrowUp",run:o$,shift:l$},{key:"PageUp",run:Jw,shift:n$},{mac:"Ctrl-ArrowUp",run:Jw,shift:n$},{key:"PageDown",run:Zw,shift:r$},{mac:"Ctrl-ArrowDown",run:Zw,shift:r$},{key:"End",run:qT,shift:i$},{mac:"Cmd-ArrowRight",run:qT,shift:i$},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:gae,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:vae,preventDefault:!0},{key:"Shift-Alt-i",run:yae},{key:"Mod-End",run:a$,shift:c$},{mac:"Cmd-ArrowDown",run:a$,shift:c$},{key:"Mod-a",run:eoe},{key:"Backspace",run:eae},{key:"Backspace",run:Qw,shift:Qw},{key:"Delete",run:u$},{key:"Mod-Backspace",mac:"Alt-Backspace",run:d$},{key:"Mod-Delete",mac:"Alt-Delete",run:noe},{mac:"Mod-Backspace",run:roe},{mac:"Mod-Delete",run:f$},{mac:"Ctrl-b",run:GT,shift:ZT,preventDefault:!0},{mac:"Ctrl-f",run:KT,shift:QT},{mac:"Ctrl-p",run:XT,shift:e$},{mac:"Ctrl-n",run:YT,shift:t$},{mac:"Ctrl-a",run:Gse,shift:Zse},{mac:"Ctrl-e",run:Kse,shift:Qse},{mac:"Ctrl-d",run:u$},{mac:"Ctrl-h",run:Qw},{mac:"Ctrl-k",run:f$},{mac:"Ctrl-Alt-h",run:d$},{mac:"Ctrl-o",run:ioe},{mac:"Ctrl-t",run:soe},{mac:"Ctrl-v",run:Zw},{mac:"Alt-v",run:Jw},{key:"Shift-Mod-k",run:uoe},{key:"Alt-ArrowDown",run:aoe},{key:"Alt-ArrowUp",run:ooe},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:coe},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:loe},{key:"Mod-l",run:toe,preventDefault:!0},{key:"Shift-Mod-\\",run:Yse},{key:"Tab",run:tS,shift:p$,preventDefault:!0},{key:"Mod-[",run:p$},{key:"Mod-]",run:tS},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:rse},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:ise},{key:"Mod-k Mod-0",run:sse},{key:"Mod-k Mod-j",run:ose},{key:"Mod-k Mod-c",run:Pse},{key:"Mod-k Mod-u",run:Tse},{key:"Mod-/",run:Ese},{key:"Shift-Alt-a",run:$se},{key:"Mod-z",run:S6,preventDefault:!0},{key:"Mod-y",run:eS,preventDefault:!0},{key:"Mod-Shift-z",run:eS,preventDefault:!0},{key:"Mod-u",run:Lse,preventDefault:!0},{key:"Mod-Shift-m",run:cae},{key:"F8",run:uae}],iS=Ee(0);function bae(){const t=Ct(),e=Xt(iS);return b.jsxs("div",{className:"flex items-center justify-between border-t border-stone-600 bg-stone-800 px-3 font-sans text-xs tracking-wider text-stone-400",children:[b.jsx(nK,{}),b.jsx("span",{className:Ge(e>0&&"font-semibold text-red-400"),children:t("editor.lintSummary",e)})]})}const gr={character:Fe.character,comment:Fe.comment,"data-directive":Tn.define(),identifier:Fe.variableName,instruction:Tn.define(),label:Fe.labelName,number:Fe.number,operator:Fe.operator,offset:Tn.define(),"ptr-size":Tn.define(),punctuation:Fe.punctuation,register:Tn.define(),special:Tn.define(),string:Fe.string,unassigned:Tn.define()},xae=gC.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":c_.includes(e)?"data-directive":u_.includes(e)?"instruction":y0.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:gr}),Sae=dse(ty.define([{tag:gr.character,class:"text-orange-300"},{tag:gr.comment,class:"text-stone-500 italic"},{tag:gr["data-directive"],class:"text-rose-400/80"},{tag:gr.instruction,class:"text-mantis-400"},{tag:gr.number,class:"text-cyan-300/60"},{tag:gr.operator,class:"text-rose-300"},{tag:gr.offset,class:"text-rose-400/80 italic"},{tag:gr["ptr-size"],class:"text-rose-400/80 italic"},{tag:gr.punctuation,class:"text-stone-600"},{tag:gr.register,class:"text-emerald-400/80"},{tag:gr.special,class:"text-yellow-300/80"},{tag:gr.string,class:"text-orange-300"},{tag:gr.unassigned,class:"text-rose-400/80"}])),kae=fae(t=>{const e=t.state.doc.toString(),n=x3(e);if(n.success)return Y.set(iS,0),[];const r=Ar().language,i=n.errors.map(s=>{var l,c;const o=((l=s.position)==null?void 0:l.start)??0,a=((c=s.position)==null?void 0:c.end)??e.length;return{message:s.translate(r),severity:"error",from:o,to:a}});return Y.set(iS,i.length),i},{delay:200});function _ae(){return new Uie(xae,[Sae,kae])}function c4({className:t}){const[e,n]=g.useState(),r=RG(),i=g.useCallback(s=>{s&&n(s)},[]);return g.useEffect(()=>{if(e)return window.codemirror=new $e({state:Qe.create({doc:ZG(),extensions:[Qe.tabSize.of(2),A3.of(Qe.readOnly.of(!1)),QG,fU(),Hq,mU(),zz(),Ise(),Nz(),$e.domEventHandlers({drop:s=>s.preventDefault()}),Qe.allowMultipleSelections.of(!0),Kz(),fD.of([{key:"Escape",run:s=>(s.dispatch({selection:ie.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?tS(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...wae]),_ae()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),b.jsxs("div",{className:Ge("flex flex-col",t),children:[b.jsx("div",{ref:i,className:"grow overflow-auto font-mono",style:{fontSize:`${r}px`,lineHeight:1.25}}),b.jsx(bae,{})]})}function Cae(){const t=Yk(),e=Ct(),n=FG(),r=E7("(max-width: 640px)"),{updateServiceWorker:i}=O7({onNeedRefresh(){kr({title:e("update.update-available"),action:b.jsx(bL,{altText:e("update.reload"),onClick:()=>i(!0),children:e("update.reload")}),duration:1/0})}});return b.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",lang:t,style:{filter:n},children:[b.jsx(Fte,{}),r?b.jsx(Aae,{}):b.jsx(Eae,{}),b.jsx(rK,{})]})}function Eae(){const[t]=td(eC);return b.jsxs(JM,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[b.jsx(Vm,{id:"panel-editor",order:1,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:b.jsx(c4,{className:"h-full w-full"})}),b.jsx(v1,{className:"w-2"}),b.jsx(Vm,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"computer-background rounded-lg border border-stone-600",children:b.jsx(YL,{})}),t&&b.jsxs(b.Fragment,{children:[b.jsx(v1,{className:"w-2"}),b.jsx(Vm,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:b.jsx(rL,{className:"h-full w-full"})})]})]})}function Aae(){const t=Ct(),[e,n]=g.useState("editor"),[r,i]=td(eC),s=r?"settings":e,o=a=>{r&&i(!1),n(a)};return b.jsx(zB,{value:s,onValueChange:o,asChild:!0,children:b.jsxs(b.Fragment,{children:[b.jsx(By,{value:"editor",asChild:!0,children:b.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:b.jsx(c4,{className:"h-full w-full"})})}),b.jsx(By,{value:"computer",asChild:!0,children:b.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:b.jsx(YL,{})})}),b.jsx(By,{value:"settings",asChild:!0,children:b.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:b.jsx(rL,{className:"h-full w-full"})})}),b.jsxs(VB,{className:"grid grid-cols-2 gap-2 p-2",children:[b.jsxs(b2,{value:"editor",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[b.jsx("span",{className:"icon-[lucide--file-terminal] mr-2 h-4 w-4"}),t("control.tabs.editor")]}),b.jsxs(b2,{value:"computer",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[b.jsx("span",{className:"icon-[lucide--computer] mr-2 h-4 w-4"}),t("control.tabs.computer")]})]})]})})}function Pae(){const{toastList:t}=qG();return b.jsxs(lne,{children:[t.map(({id:e,title:n,description:r,action:i,variant:s,otherProps:o})=>b.jsxs(wL,{...o,variant:s,children:[b.jsxs("div",{className:"grid gap-1",children:[n&&b.jsx(SL,{children:n}),r&&b.jsx(kL,{children:r})]}),i,b.jsx(xL,{})]},e)),b.jsx(yL,{})]})}window.codemirror=null;xb.createRoot(document.getElementById("root")).render(b.jsx(Bt.StrictMode,{children:b.jsxs(cF,{client:$3,children:[b.jsx($W,{children:b.jsx(Cae,{})}),b.jsx(Pae,{})]})}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
