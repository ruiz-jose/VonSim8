var bL=Object.defineProperty;var xL=(t,e,n)=>e in t?bL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var oe=(t,e,n)=>(xL(t,typeof e!="symbol"?e+"":e,n),n),ay=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var E=(t,e,n)=>(ay(t,e,"read from private field"),n?n.call(t):e.get(t)),$e=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Y=(t,e,n,r)=>(ay(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var mt=(t,e,n)=>(ay(t,e,"access private method"),n);function SL(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var kL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $P={exports:{}},Yg={},TP={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yf=Symbol.for("react.element"),_L=Symbol.for("react.portal"),CL=Symbol.for("react.fragment"),EL=Symbol.for("react.strict_mode"),AL=Symbol.for("react.profiler"),PL=Symbol.for("react.provider"),$L=Symbol.for("react.context"),TL=Symbol.for("react.forward_ref"),OL=Symbol.for("react.suspense"),NL=Symbol.for("react.memo"),RL=Symbol.for("react.lazy"),Jk=Symbol.iterator;function ML(t){return t===null||typeof t!="object"?null:(t=Jk&&t[Jk]||t["@@iterator"],typeof t=="function"?t:null)}var OP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NP=Object.assign,RP={};function Su(t,e,n){this.props=t,this.context=e,this.refs=RP,this.updater=n||OP}Su.prototype.isReactComponent={};Su.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Su.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function MP(){}MP.prototype=Su.prototype;function I1(t,e,n){this.props=t,this.context=e,this.refs=RP,this.updater=n||OP}var L1=I1.prototype=new MP;L1.constructor=I1;NP(L1,Su.prototype);L1.isPureReactComponent=!0;var Zk=Array.isArray,DP=Object.prototype.hasOwnProperty,B1={current:null},IP={key:!0,ref:!0,__self:!0,__source:!0};function LP(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)DP.call(e,r)&&!IP.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Yf,type:t,key:s,ref:o,props:i,_owner:B1.current}}function DL(t,e){return{$$typeof:Yf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function F1(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yf}function IL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qk=/\/+/g;function ly(t,e){return typeof t=="object"&&t!==null&&t.key!=null?IL(""+t.key):e.toString(36)}function Rp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yf:case _L:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ly(o,0):r,Zk(i)?(n="",t!=null&&(n=t.replace(Qk,"$&/")+"/"),Rp(i,e,n,"",function(c){return c})):i!=null&&(F1(i)&&(i=DL(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Qk,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Zk(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ly(s,a);o+=Rp(s,e,n,l,i)}else if(l=ML(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ly(s,a++),o+=Rp(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sh(t,e,n){if(t==null)return t;var r=[],i=0;return Rp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function LL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nr={current:null},Mp={transition:null},BL={ReactCurrentDispatcher:nr,ReactCurrentBatchConfig:Mp,ReactCurrentOwner:B1};qe.Children={map:Sh,forEach:function(t,e,n){Sh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sh(t,function(){e++}),e},toArray:function(t){return Sh(t,function(e){return e})||[]},only:function(t){if(!F1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};qe.Component=Su;qe.Fragment=CL;qe.Profiler=AL;qe.PureComponent=I1;qe.StrictMode=EL;qe.Suspense=OL;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BL;qe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=NP({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=B1.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)DP.call(e,l)&&!IP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Yf,type:t.type,key:i,ref:s,props:r,_owner:o}};qe.createContext=function(t){return t={$$typeof:$L,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PL,_context:t},t.Consumer=t};qe.createElement=LP;qe.createFactory=function(t){var e=LP.bind(null,t);return e.type=t,e};qe.createRef=function(){return{current:null}};qe.forwardRef=function(t){return{$$typeof:TL,render:t}};qe.isValidElement=F1;qe.lazy=function(t){return{$$typeof:RL,_payload:{_status:-1,_result:t},_init:LL}};qe.memo=function(t,e){return{$$typeof:NL,type:t,compare:e===void 0?null:e}};qe.startTransition=function(t){var e=Mp.transition;Mp.transition={};try{t()}finally{Mp.transition=e}};qe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};qe.useCallback=function(t,e){return nr.current.useCallback(t,e)};qe.useContext=function(t){return nr.current.useContext(t)};qe.useDebugValue=function(){};qe.useDeferredValue=function(t){return nr.current.useDeferredValue(t)};qe.useEffect=function(t,e){return nr.current.useEffect(t,e)};qe.useId=function(){return nr.current.useId()};qe.useImperativeHandle=function(t,e,n){return nr.current.useImperativeHandle(t,e,n)};qe.useInsertionEffect=function(t,e){return nr.current.useInsertionEffect(t,e)};qe.useLayoutEffect=function(t,e){return nr.current.useLayoutEffect(t,e)};qe.useMemo=function(t,e){return nr.current.useMemo(t,e)};qe.useReducer=function(t,e,n){return nr.current.useReducer(t,e,n)};qe.useRef=function(t){return nr.current.useRef(t)};qe.useState=function(t){return nr.current.useState(t)};qe.useSyncExternalStore=function(t,e,n){return nr.current.useSyncExternalStore(t,e,n)};qe.useTransition=function(){return nr.current.useTransition()};qe.version="18.2.0";TP.exports=qe;var g=TP.exports;const Ht=xu(g),j1=SL({__proto__:null,default:Ht},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FL=g,jL=Symbol.for("react.element"),zL=Symbol.for("react.fragment"),UL=Object.prototype.hasOwnProperty,VL=FL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HL={key:!0,ref:!0,__self:!0,__source:!0};function BP(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)UL.call(e,r)&&!HL.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:jL,type:t,key:s,ref:o,props:i,_owner:VL.current}}Yg.Fragment=zL;Yg.jsx=BP;Yg.jsxs=BP;$P.exports=Yg;var b=$P.exports;function e_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e_(Object(n),!0).forEach(function(r){ke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q0(t){return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q0(t)}function qt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yt(t,e,n){return e&&t_(t.prototype,e),n&&t_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ke(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FP(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ew(t,e)}function bm(t){return bm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bm(t)}function ew(t,e){return ew=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ew(t,e)}function WL(t,e){if(t==null)return{};var n,r,i=function(o,a){if(o==null)return{};var l,c,u={},d=Object.keys(o);for(c=0;c<d.length;c++)l=d[c],a.indexOf(l)>=0||(u[l]=o[l]);return u}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function GL(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function jP(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=bm(t);if(e){var i=bm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return GL(this,n)}}function Oi(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,o,a=[],l=!0,c=!1;try{for(i=i.call(n);!(l=(s=i.next()).done)&&(a.push(s.value),!r||a.length!==r);l=!0);}catch(u){c=!0,o=u}finally{try{l||i.return==null||i.return()}finally{if(c)throw o}}return a}}(t,e)||z1(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function tw(t){return function(e){if(Array.isArray(e))return nw(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||z1(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function z1(t,e){if(t){if(typeof t=="string")return nw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nw(t,e):void 0}}function nw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gl(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=z1(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw s}}}}var vl={DEBUG:!1,LIB_VERSION:"1.97.1"},KL=Array.isArray,zP=Object.prototype,UP=zP.hasOwnProperty,Jf=zP.toString,hn=KL||function(t){return Jf.call(t)==="[object Array]"},n_=function(t){return Jf.call(t)==="[object Uint8Array]"},Bi=function(t){return typeof t=="function"},na=function(t){return t===Object(t)&&!hn(t)},XL=function(t){if(na(t)){for(var e in t)if(UP.call(t,e))return!1;return!0}return!1},tt=function(t){return t===void 0},Ur=function(t){return Jf.call(t)=="[object String]"},fi=function(t){return t===null},Ys=function(t){return Jf.call(t)=="[object Number]"},rw=function(t){return Jf.call(t)==="[object Boolean]"},VP=Array.prototype,r_=VP.forEach,i_=VP.indexOf,G=typeof window<"u"?window:void 0,s_=G==null?void 0:G.navigator,Te=G==null?void 0:G.document,Vt=s_==null?void 0:s_.userAgent,jn=G??{},o_="[PostHog.js]",fe={_log:function(t){if(G&&(vl.DEBUG||jn.POSTHOG_DEBUG)&&!tt(G.console)&&G.console){for(var e=("__rrweb_original__"in G.console[t])?G.console[t].__rrweb_original__:G.console[t],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.apply(void 0,[o_].concat(r))}},info:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];fe._log.apply(fe,["log"].concat(e))},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];fe._log.apply(fe,["warn"].concat(e))},error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];fe._log.apply(fe,["error"].concat(e))},critical:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=console).error.apply(t,[o_].concat(n))},uninitializedWarning:function(t){fe.error("You must initialize PostHog before calling ".concat(t))}},U1={},xm=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function Cc(t,e,n){if(hn(t)){if(r_&&t.forEach===r_)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r)===U1)return}}}function yt(t,e,n){if(!fi(t)&&!tt(t)){if(hn(t))return Cc(t,e,n);for(var r in t)if(UP.call(t,r)&&e.call(n,t[r],r)===U1)return}}var yn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Cc(n,function(i){for(var s in i)i[s]!==void 0&&(t[s]=i[s])}),t};function at(t,e){return t.indexOf(e)!==-1}function Dp(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r}var HP=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},a_=function(t){try{return t()}catch{return}},WP=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(this,n)}catch(i){fe.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),fe.critical(i)}}},iw=function(t){var e={};return yt(t,function(n,r){Ur(n)&&n.length>0&&(e[r]=n)}),e},qL=["$performance_raw"];function YL(t,e){return n=t,r=function(s,o){return o&&qL.indexOf(o)>-1?s:Ur(s)&&!fi(e)?s.slice(0,e):s},i=new Set,function s(o,a){return o!==Object(o)?r?r(o,a):o:i.has(o)?void 0:(i.add(o),hn(o)?(l=[],Cc(o,function(c){l.push(s(c))})):(l={},yt(o,function(c,u){i.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,r,i}function V1(t){var e,n,r,i,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,c="",u=[];if(!t)return t;t=JL(t);do e=(s=t.charCodeAt(a++)<<16|t.charCodeAt(a++)<<8|t.charCodeAt(a++))>>18&63,n=s>>12&63,r=s>>6&63,i=63&s,u[l++]=o.charAt(e)+o.charAt(n)+o.charAt(r)+o.charAt(i);while(a<t.length);switch(c=u.join(""),t.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}var JL=function(t){var e,n,r,i,s="";for(e=n=0,r=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,i=0;i<r;i++){var o=t.charCodeAt(i),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),fi(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=i+1)}return n>e&&(s+=t.substring(e,t.length)),s},bd=function(){function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},function(e,n,r,i,s){if(e)if(e.addEventListener&&!i)e.addEventListener(n,r,!!s);else{var o="on"+n,a=e[o];e[o]=function(l,c,u){return function(d){if(d=d||t(G==null?void 0:G.event)){var f,h=!0;Bi(u)&&(f=u(d));var p=c.call(l,d);return f!==!1&&p!==!1||(h=!1),h}}}(e,r,a)}else fe.error("No valid element provided to register_event")}}();function xd(t,e){var n=function(){if(!Te)return e("document not found");var r=Te.createElement("script");r.type="text/javascript",r.src=t,r.onload=function(o){return e(void 0,o)},r.onerror=function(o){return e(o)};var i,s=Te.querySelectorAll("body > script");s.length>0?(i=s[0].parentNode)===null||i===void 0||i.insertBefore(r,s[0]):Te.body.appendChild(r)};Te!=null&&Te.body?n():Te==null||Te.addEventListener("DOMContentLoaded",n)}function H1(t){return t?xm(t).split(/\s+/):[]}function Sm(t){var e="";switch(Q0(t.className)){case"string":e=t.className;break;case"object":e=("baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return H1(e)}function km(t){var e="";return Ip(t)&&!KP(t)&&t.childNodes&&t.childNodes.length&&yt(t.childNodes,function(n){GP(n)&&n.textContent&&(e+=xm(n.textContent).split(/(\s+)/).filter(oc).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))}),xm(e)}function l_(t){return!!t&&t.nodeType===1}function ll(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function GP(t){return!!t&&t.nodeType===3}function c_(t){return!!t&&t.nodeType===11}var cy=["a","button","form","input","select","textarea","label"];function Ip(t){for(var e=t;e.parentNode&&!ll(e,"body");e=e.parentNode){var n=Sm(e);if(at(n,"ph-sensitive")||at(n,"ph-no-capture"))return!1}if(at(Sm(t),"ph-include"))return!0;var r=t.type||"";if(Ur(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=t.name||t.id||"";return!(Ur(i)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))}function KP(t){return!!(ll(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||ll(t,"select")||ll(t,"textarea")||t.getAttribute("contenteditable")==="true")}function oc(t){return!(fi(t)||tt(t)||Ur(t)&&(t=xm(t),/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((t||"").replace(/[- ]/g,""))||/(^\d{3}-?\d{2}-?\d{4}$)/.test(t)))}function u_(t){var e=km(t);return oc(e="".concat(e," ").concat(XP(t)).trim())?e:""}function XP(t){var e="";return t&&t.childNodes&&t.childNodes.length&&yt(t.childNodes,function(n){var r;if(n&&((r=n.tagName)===null||r===void 0?void 0:r.toLowerCase())==="span")try{var i=km(n);e="".concat(e," ").concat(i).trim(),n.childNodes&&n.childNodes.length&&(e="".concat(e," ").concat(XP(n)).trim())}catch(s){fe.error(s)}}),e}function ZL(t){return function(e){var n=e.map(function(r){var i,s,o="";if(r.tag_name&&(o+=r.tag_name),r.attr_class){r.attr_class.sort();var a,l=gl(r.attr_class);try{for(l.s();!(a=l.n()).done;){var c=a.value;o+=".".concat(c.replace(/"/g,""))}}catch(f){l.e(f)}finally{l.f()}}var u=Ne(Ne(Ne(Ne({},r.text?{text:r.text}:{}),{},{"nth-child":(i=r.nth_child)!==null&&i!==void 0?i:0,"nth-of-type":(s=r.nth_of_type)!==null&&s!==void 0?s:0},r.href?{href:r.href}:{}),r.attr_id?{attr_id:r.attr_id}:{}),r.attributes),d={};return Dp(u).sort(function(f,h){var p=Oi(f,1)[0],m=Oi(h,1)[0];return p.localeCompare(m)}).forEach(function(f){var h=Oi(f,2),p=h[0],m=h[1];return d[d_(p.toString())]=d_(m.toString())}),o+=":",o+=Dp(u).map(function(f){var h=Oi(f,2),p=h[0],m=h[1];return"".concat(p,'="').concat(m,'"')}).join("")});return n.join(";")}(function(e){return e.map(function(n){var r,i,s={text:(r=n.$el_text)===null||r===void 0?void 0:r.slice(0,400),tag_name:n.tag_name,href:(i=n.attr__href)===null||i===void 0?void 0:i.slice(0,2048),attr_class:QL(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Dp(n).filter(function(o){return Oi(o,1)[0].indexOf("attr__")===0}).forEach(function(o){var a=Oi(o,2),l=a[0],c=a[1];return s.attributes[l]=c}),s})}(t))}function d_(t){return t.replace(/"|\\"/g,'\\"')}function QL(t){var e=t.attr__class;return e?hn(e)?e:H1(e):void 0}var e5=function(){function t(e){qt(this,t),this.clicks=[],this.enabled=e}return Yt(t,[{key:"isRageClick",value:function(e,n,r){if(!this.enabled)return!1;var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(e-i.x)+Math.abs(n-i.y)<30&&r-i.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:r}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:r}];return!1}}]),t}(),qP="$people_distinct_id",Lp="__alias",od="__timers",f_="$autocapture_disabled_server_side",sw="$session_recording_enabled_server_side",h_="$console_log_recording_enabled_server_side",p_="$session_recording_recorder_version_server_side",m_="$session_recording_network_payload_capture",_m="$sesid",Bp="$session_is_sampled",ac="$enabled_feature_flags",ow="$early_access_features",lc="$stored_person_properties",$o="$stored_group_properties",aw="$surveys",Cm="$flag_call_reported",lw="$user_state",cw="$posthog_quota_limited",uw="$client_session_props",t5=[qP,Lp,"__cmpns",od,sw,_m,ac,lw,cw,ow,$o,lc,aw,Cm,uw];function uy(t,e){return e.length>t?e.slice(0,t)+"...":e}var Io={_initializedTokens:[],_isDisabledServerSide:null,_isAutocaptureEnabled:!1,_setIsAutocaptureEnabled:function(t){var e,n=fi(this._isDisabledServerSide)?!((e=t.persistence)===null||e===void 0||!e.props[f_]):this._isDisabledServerSide,r=!!t.config.autocapture;this._isAutocaptureEnabled=r&&!n},_previousElementSibling:function(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!l_(e));return e},_getAugmentPropertiesFromElement:function(t){if(!Ip(t))return{};var e={};return yt(t.attributes,function(n){if(n.name.indexOf("data-ph-capture-attribute")===0){var r=n.name.replace("data-ph-capture-attribute-",""),i=n.value;r&&i&&oc(i)&&(e[r]=i)}}),e},_getPropertiesFromElement:function(t,e,n){var r,i=t.tagName.toLowerCase(),s={tag_name:i};cy.indexOf(i)>-1&&!n&&(i.toLowerCase()==="a"||i.toLowerCase()==="button"?s.$el_text=uy(1024,u_(t)):s.$el_text=uy(1024,km(t)));var o=Sm(t);o.length>0&&(s.classes=o.filter(function(d){return d!==""}));var a=(r=this.config)===null||r===void 0?void 0:r.element_attribute_ignorelist;yt(t.attributes,function(d){var f;if((!KP(t)||["name","id","class"].indexOf(d.name)!==-1)&&(a==null||!a.includes(d.name))&&!e&&oc(d.value)&&(f=d.name,!Ur(f)||f.substring(0,10)!=="_ngcontent"&&f.substring(0,7)!=="_nghost")){var h=d.value;d.name==="class"&&(h=H1(h).join(" ")),s["attr__"+d.name]=uy(1024,h)}});for(var l=1,c=1,u=t;u=this._previousElementSibling(u);)l++,u.tagName===t.tagName&&c++;return s.nth_child=l,s.nth_of_type=c,s},_getDefaultProperties:function(t){return{$event_type:t,$ce_version:1}},_extractCustomPropertyValue:function(t){var e=[];return yt(Te==null?void 0:Te.querySelectorAll(t.css_selector),function(n){var r;["input","select"].indexOf(n.tagName.toLowerCase())>-1?r=n.value:n.textContent&&(r=n.textContent),oc(r)&&e.push(r)}),e.join(", ")},_getCustomProperties:function(t){var e=this,n={};return yt(this._customProperties,function(r){yt(r.event_selectors,function(i){yt(Te==null?void 0:Te.querySelectorAll(i),function(s){at(t,s)&&Ip(s)&&(n[r.name]=e._extractCustomPropertyValue(r))})})}),n},_getEventTarget:function(t){return tt(t.target)?t.srcElement||null:(e=t.target)!==null&&e!==void 0&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e},_captureEvent:function(t,e){var n,r=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"$autocapture",s=this._getEventTarget(t);if(GP(s)&&(s=s.parentNode||null),i==="$autocapture"&&t.type==="click"&&t instanceof MouseEvent&&(n=this.rageclicks)!==null&&n!==void 0&&n.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this._captureEvent(t,e,"$rageclick"),s&&function(m,w){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!G||!m||ll(m,"html")||!l_(m))return!1;if(v!=null&&v.url_allowlist){var y=G.location.href,x=v.url_allowlist;if(x&&!x.some(function(T){return y.match(T)}))return!1}if(v!=null&&v.dom_event_allowlist){var k=v.dom_event_allowlist;if(k&&!k.some(function(T){return w.type===T}))return!1}if(v!=null&&v.element_allowlist){var _=v.element_allowlist;if(_&&!_.some(function(T){return m.tagName.toLowerCase()===T}))return!1}if(v!=null&&v.css_selector_allowlist){var P=v.css_selector_allowlist;if(P&&!P.some(function(T){return m.matches(T)}))return!1}for(var A=!1,C=[m],N=!0,R=m;R.parentNode&&!ll(R,"body");)if(c_(R.parentNode))C.push(R.parentNode.host),R=R.parentNode.host;else{if(!(N=R.parentNode||!1))break;if(cy.indexOf(N.tagName.toLowerCase())>-1)A=!0;else{var M=G.getComputedStyle(N);M&&M.getPropertyValue("cursor")==="pointer"&&(A=!0)}C.push(N),R=N}var L=G.getComputedStyle(m);if(L&&L.getPropertyValue("cursor")==="pointer"&&w.type==="click")return!0;var H=m.tagName.toLowerCase();switch(H){case"html":return!1;case"form":return w.type==="submit";case"input":case"select":case"textarea":return w.type==="change"||w.type==="click";default:return A?w.type==="click":w.type==="click"&&(cy.indexOf(H)>-1||m.getAttribute("contenteditable")==="true")}}(s,t,this.config)){for(var o,a,l=[s],c=s;c.parentNode&&!ll(c,"body");)c_(c.parentNode)?(l.push(c.parentNode.host),c=c.parentNode.host):(l.push(c.parentNode),c=c.parentNode);var u,d=[],f={},h=!1;if(yt(l,function(m){var w=Ip(m);m.tagName.toLowerCase()==="a"&&(u=m.getAttribute("href"),u=w&&oc(u)&&u),at(Sm(m),"ph-no-capture")&&(h=!0),d.push(r._getPropertiesFromElement(m,e.config.mask_all_element_attributes,e.config.mask_all_text));var v=r._getAugmentPropertiesFromElement(m);yn(f,v)}),e.config.mask_all_text||(s.tagName.toLowerCase()==="a"||s.tagName.toLowerCase()==="button"?d[0].$el_text=u_(s):d[0].$el_text=km(s)),u&&(d[0].attr__href=u),h)return!1;var p=yn(this._getDefaultProperties(t.type),e.elementsChainAsString?{$elements_chain:ZL(d)}:{$elements:d},(o=d[0])!==null&&o!==void 0&&o.$el_text?{$el_text:(a=d[0])===null||a===void 0?void 0:a.$el_text}:{},this._getCustomProperties(l),f);return e.capture(i,p),!0}},_navigate:function(t){G&&(G.location.href=t)},_addDomEventHandlers:function(t){var e=this;if(G&&Te){var n=function(r){r=r||(G==null?void 0:G.event),e._captureEvent(r,t)};bd(Te,"submit",n,!1,!0),bd(Te,"change",n,!1,!0),bd(Te,"click",n,!1,!0)}},_customProperties:[],rageclicks:null,config:void 0,init:function(t){var e;rw(t.__autocapture)||(this.config=t.__autocapture),(e=this.config)!==null&&e!==void 0&&e.url_allowlist&&(this.config.url_allowlist=this.config.url_allowlist.map(function(n){return new RegExp(n)})),this.rageclicks=new e5(t.config.rageclick)},afterDecideResponse:function(t,e){var n=e.config.token;this._initializedTokens.indexOf(n)>-1?fe.info('autocapture already initialized for token "'+n+'"'):(e.persistence&&e.persistence.register(ke({},f_,!!t.autocapture_opt_out)),this._isDisabledServerSide=!!t.autocapture_opt_out,this._setIsAutocaptureEnabled(e),this._initializedTokens.push(n),t&&t.config&&t.config.enable_collect_everything&&this._isAutocaptureEnabled?(t.custom_properties&&(this._customProperties=t.custom_properties),this._addDomEventHandlers(e)):e.__autocapture=!1)},enabledForProject:function(t,e,n){if(!t)return!0;e=tt(e)?10:e,n=tt(n)?10:n;for(var r=0,i=0;i<t.length;i++)r+=t.charCodeAt(i);return r%e<n},isBrowserSupported:function(){return Bi(Te==null?void 0:Te.querySelectorAll)}};(function(t){for(var e in t)Bi(t[e])&&(t[e]=t[e].bind(t))})(Io),function(t){for(var e in t)Bi(t[e])&&(t[e]=WP(t[e]))}(Io);var dy="$active_feature_flags",kh="$override_feature_flags",g_="$feature_flag_payloads",v_=function(t){var e,n={},r=gl(Dp(t||{}));try{for(r.s();!(e=r.n()).done;){var i=Oi(e.value,2),s=i[0],o=i[1];o&&(n[s]=o)}}catch(a){r.e(a)}finally{r.f()}return n},n5=function(){function t(e){qt(this,t),this.instance=e,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return Yt(t,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var e=this.instance.get_property(ac),n=this.instance.get_property(kh);if(!n)return e||{};for(var r=yn({},e),i=Object.keys(n),s=0;s<i.length;s++)n[i[s]]===!1?delete r[i[s]]:r[i[s]]=n[i[s]];return this._override_warning||(fe.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:r}),this._override_warning=!0),r}},{key:"getFlagPayloads",value:function(){return this.instance.get_property(g_)||{}}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(e){this.$anon_distinct_id=e}},{key:"setReloadingPaused",value:function(e){this.reloadFeatureFlagsInAction=e}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var e=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(function(){!e.reloadFeatureFlagsInAction&&e.reloadFeatureFlagsQueued&&(e.reloadFeatureFlagsQueued=!1,e._reloadFeatureFlagsRequest())},5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var e=this;if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var n=this.instance.config.token,r=this.instance.get_property(lc),i=this.instance.get_property($o),s=V1(JSON.stringify({token:n,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:r,group_properties:i,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0}));this.instance._send_request(this.instance.config.api_host+"/decide/?v=3",{data:s},{method:"POST"},this.instance._prepare_callback(function(o){e.$anon_distinct_id=void 0,e.receivedFeatureFlags(o),e.setReloadingPaused(!1),e._startReloadTimer()}))}}},{key:"getFeatureFlag",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var r,i=this.getFlagVariants()[e],s="".concat(i),o=this.instance.get_property(Cm)||{};return(n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(s))&&(hn(o[e])?o[e].push(s):o[e]=[s],(r=this.instance.persistence)===null||r===void 0||r.register(ke({},Cm,o)),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:i})),i}fe.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}},{key:"getFeatureFlagPayload",value:function(e){return this.getFlagPayloads()[e]}},{key:"isFeatureEnabled",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);fe.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}},{key:"addFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers.push(e)}},{key:"removeFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(function(n){return n!==e})}},{key:"receivedFeatureFlags",value:function(e){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var n=this.getFlagVariants(),r=this.getFlagPayloads();(function(i,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=i.featureFlags,c=i.featureFlagPayloads;if(l)if(hn(l)){var u,d={};if(l)for(var f=0;f<l.length;f++)d[l[f]]=!0;s&&s.register((ke(u={},dy,l),ke(u,ac,d),u))}else{var h,p=l,m=c;i.errorsWhileComputingFlags&&(p=Ne(Ne({},o),p),m=Ne(Ne({},a),m)),s&&s.register((ke(h={},dy,Object.keys(v_(p))),ke(h,ac,p||{}),ke(h,g_,m||{}),h))}})(e,this.instance.persistence,n,r),this._fireFeatureFlagsCallbacks()}}},{key:"override",value:function(e){if(!this.instance.__loaded||!this.instance.persistence)return fe.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=!1,e===!1)this.instance.persistence.unregister(kh);else if(hn(e)){for(var n={},r=0;r<e.length;r++)n[e[r]]=!0;this.instance.persistence.register(ke({},kh,n))}else this.instance.persistence.register(ke({},kh,e))}},{key:"onFeatureFlags",value:function(e){var n=this;if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){var r=this._prepareFeatureFlagsForCallbacks(),i=r.flags,s=r.flagVariants;e(i,s)}return function(){return n.removeFeatureFlagsHandler(e)}}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,n){var r,i,s=ke({},"$feature_enrollment/".concat(e),n);this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:n,$set:s}),this.setPersonPropertiesForFlags(s,!1);var o=Ne(Ne({},this.getFlagVariants()),{},ke({},e,n));(r=this.instance.persistence)===null||r===void 0||r.register((ke(i={},dy,Object.keys(v_(o))),ke(i,ac,o),i)),this._fireFeatureFlagsCallbacks()}},{key:"getEarlyAccessFeatures",value:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.instance.get_property(ow);if(i&&!r)return e(i);this.instance._send_request("".concat(this.instance.config.api_host,"/api/early_access_features/?token=").concat(this.instance.config.token),{},{method:"GET"},function(s){var o,a=s.earlyAccessFeatures;return(o=n.instance.persistence)===null||o===void 0||o.register(ke({},ow,a)),e(a)})}},{key:"_prepareFeatureFlagsForCallbacks",value:function(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(function(r){return n[r]}),flagVariants:Object.keys(n).filter(function(r){return n[r]}).reduce(function(r,i){return r[i]=n[i],r},{})}}},{key:"_fireFeatureFlagsCallbacks",value:function(){var e=this._prepareFeatureFlagsForCallbacks(),n=e.flags,r=e.flagVariants;this.featureFlagEventHandlers.forEach(function(i){return i(n,r)})}},{key:"setPersonPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this.instance.get_property(lc)||{};this.instance.register(ke({},lc,Ne(Ne({},r),e))),n&&this.instance.reloadFeatureFlags()}},{key:"resetPersonPropertiesForFlags",value:function(){this.instance.unregister(lc)}},{key:"setGroupPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this.instance.get_property($o)||{};Object.keys(r).length!==0&&Object.keys(r).forEach(function(i){r[i]=Ne(Ne({},r[i]),e[i]),delete e[i]}),this.instance.register(ke({},$o,Ne(Ne({},r),e))),n&&this.instance.reloadFeatureFlags()}},{key:"resetGroupPropertiesForFlags",value:function(e){if(e){var n=this.instance.get_property($o)||{};this.instance.register(ke({},$o,Ne(Ne({},n),{},ke({},e,{}))))}else this.instance.unregister($o)}}]),t}();Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return Ys(t)&&isFinite(t)&&Math.floor(t)===t});var y_="0123456789abcdef",r5=function(){function t(e){if(qt(this,t),this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}return Yt(t,[{key:"toString",value:function(){for(var e="",n=0;n<this.bytes.length;n++)e=e+y_.charAt(this.bytes[n]>>>4)+y_.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}},{key:"clone",value:function(){return new t(this.bytes.slice(0))}},{key:"equals",value:function(e){return this.compareTo(e)===0}},{key:"compareTo",value:function(e){for(var n=0;n<16;n++){var r=this.bytes[n]-e.bytes[n];if(r!==0)return Math.sign(r)}return 0}}],[{key:"fromFieldsV7",value:function(e,n,r,i){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||e<0||n<0||r<0||i<0||e>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|r>>>24,s[9]=r>>>16,s[10]=r>>>8,s[11]=r,s[12]=i>>>24,s[13]=i>>>16,s[14]=i>>>8,s[15]=i,new t(s)}}]),t}(),i5=function(){function t(){qt(this,t),ke(this,"timestamp",0),ke(this,"counter",0),ke(this,"random",new s5)}return Yt(t,[{key:"generate",value:function(){var e=this.generateOrAbort();if(tt(e)){this.timestamp=0;var n=this.generateOrAbort();if(tt(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}},{key:"generateOrAbort",value:function(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return r5.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}},{key:"resetCounter",value:function(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}]),t}(),YP=function(t){if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};G&&!tt(G.crypto)&&crypto.getRandomValues&&(YP=function(t){return crypto.getRandomValues(t)});var w_,s5=function(){function t(){qt(this,t),ke(this,"buffer",new Uint32Array(8)),ke(this,"cursor",1/0)}return Yt(t,[{key:"nextUint32",value:function(){return this.cursor>=this.buffer.length&&(YP(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}]),t}(),el=function(){return o5().toString()},o5=function(){return(w_||(w_=new i5)).generate()},a5="Thu, 01 Jan 1970 00:00:00 GMT",Du="",l5=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,c5=function(t){var e=t.match(l5);return e?e[0]:""};function u5(t,e){if(e){var n=function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te;if(Du)return Du;if(!s||["localhost","127.0.0.1"].includes(i))return"";for(var o=i.split("."),a=Math.min(o.length,8),l="dmn_chk_"+el(),c=new RegExp("(^|;)\\s*"+l+"=1");!Du&&a--;){var u=o.slice(a).join("."),d=l+"=1;domain=."+u;s.cookie=d,c.test(s.cookie)&&(s.cookie=d+";expires="+a5,Du=u)}return Du}(t);if(!n){var r=c5(t);r!==n&&fe.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var Ss={is_supported:function(){return!!Te},error:function(t){fe.error("cookieStore error: "+t)},get:function(t){if(Te){try{for(var e=t+"=",n=Te.cookie.split(";").filter(function(s){return s.length}),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return decodeURIComponent(i.substring(e.length,i.length))}}catch{}return null}},parse:function(t){var e;try{e=JSON.parse(Ss.get(t))||{}}catch{}return e},set:function(t,e,n,r,i){if(Te)try{var s="",o="",a=u5(Te.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}i&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&fe.warn("cookieStore warning: large cookie, len="+c.length),Te.cookie=c,c}catch{return}},remove:function(t,e){try{Ss.set(t,"",-1,e)}catch{return}}},fy=null,Jt={is_supported:function(){if(!fi(fy))return fy;var t=!0;if(tt(G))t=!1;else try{var e="__mplssupport__";Jt.set(e,"xyz"),Jt.get(e)!=='"xyz"'&&(t=!1),Jt.remove(e)}catch{t=!1}return t||fe.error("localStorage unsupported; falling back to cookie store"),fy=t,t},error:function(t){fe.error("localStorage error: "+t)},get:function(t){try{return G==null?void 0:G.localStorage.getItem(t)}catch(e){Jt.error(e)}return null},parse:function(t){try{return JSON.parse(Jt.get(t))||{}}catch{}return null},set:function(t,e){try{G==null||G.localStorage.setItem(t,JSON.stringify(e))}catch(n){Jt.error(n)}},remove:function(t){try{G==null||G.localStorage.removeItem(t)}catch(e){Jt.error(e)}}},d5=["distinct_id",_m,Bp],ad=Ne(Ne({},Jt),{},{parse:function(t){try{var e={};try{e=Ss.parse(t)||{}}catch{}var n=yn(e,JSON.parse(Jt.get(t)||"{}"));return Jt.set(t,n),n}catch{}return null},set:function(t,e,n,r,i){try{Jt.set(t,e);var s={};d5.forEach(function(o){e[o]&&(s[o]=e[o])}),Object.keys(s).length&&Ss.set(t,s,n,r,i)}catch(o){Jt.error(o)}},remove:function(t,e){try{G==null||G.localStorage.removeItem(t),Ss.remove(t,e)}catch(n){Jt.error(n)}}}),_h={},f5={is_supported:function(){return!0},error:function(t){fe.error("memoryStorage error: "+t)},get:function(t){return _h[t]||null},parse:function(t){return _h[t]||null},set:function(t,e){_h[t]=e},remove:function(t){delete _h[t]}},ja=null,xn={is_supported:function(){if(!fi(ja))return ja;if(ja=!0,tt(G))ja=!1;else try{var t="__support__";xn.set(t,"xyz"),xn.get(t)!=='"xyz"'&&(ja=!1),xn.remove(t)}catch{ja=!1}return ja},error:function(t){fe.error("sessionStorage error: ",t)},get:function(t){try{return G==null?void 0:G.sessionStorage.getItem(t)}catch(e){xn.error(e)}return null},parse:function(t){try{return JSON.parse(xn.get(t))||null}catch{}return null},set:function(t,e){try{G==null||G.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){xn.error(n)}},remove:function(t){try{G==null||G.sessionStorage.removeItem(t)}catch(e){xn.error(e)}}},h5=["localhost","127.0.0.1"],JP=function(t){var e=Te==null?void 0:Te.createElement("a");return tt(e)?null:(e.href=t,e)},p5=function(t,e){return!!function(n){try{new RegExp(n)}catch{return!1}return!0}(e)&&new RegExp(e).test(t)},b_=function(t,e){for(var n,r=((t.split("#")[0]||"").split("?")[1]||"").split("&"),i=0;i<r.length;i++){var s=r[i].split("=");if(s[0]===e){n=s;break}}if(!hn(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{fe.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},Em=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},tn={campaignParams:function(t){var e=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gbraid","wbraid","fbclid","msclkid"].concat(t||[]),n={};return yt(e,function(r){var i=Te?b_(Te.URL,r):"";i.length&&(n[r]=i)}),n},searchEngine:function(){var t=Te==null?void 0:Te.referrer;return t?t.search("https?://(.*)google.([^/?]*)")===0?"google":t.search("https?://(.*)bing.com")===0?"bing":t.search("https?://(.*)yahoo.com")===0?"yahoo":t.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null:null},searchInfo:function(){var t=tn.searchEngine(),e=t!="yahoo"?"q":"p",n={};if(!fi(t)){n.$search_engine=t;var r=Te?b_(Te.referrer,e):"";r.length&&(n.ph_keyword=r)}return n},browser:function(t,e,n){return e=e||"",n||at(t," OPR/")?at(t,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":at(t,"IEMobile")||at(t,"WPDesktop")?"Internet Explorer Mobile":at(t,"SamsungBrowser/")?"Samsung Internet":at(t,"Edge")||at(t,"Edg/")?"Microsoft Edge":at(t,"FBIOS")?"Facebook Mobile":at(t,"Chrome")?"Chrome":at(t,"CriOS")?"Chrome iOS":at(t,"UCWEB")||at(t,"UCBrowser")?"UC Browser":at(t,"FxiOS")?"Firefox iOS":at(e,"Apple")||function(r){return at(r,"Safari")&&!at(r,"Chrome")&&!at(r,"Android")}(t)?at(t,"Mobile")?"Mobile Safari":"Safari":at(t,"Android")?"Android Mobile":at(t,"Konqueror")||at(t,"konqueror")?"Konqueror":at(t,"Firefox")?"Firefox":at(t,"MSIE")||at(t,"Trident/")?"Internet Explorer":at(t,"Gecko")?"Mozilla":""},browserVersion:function(t,e,n){var r={"Internet Explorer Mobile":[/rv:(\d+(\.\d+)?)/],"Microsoft Edge":[/Edge?\/(\d+(\.\d+)?)/],Chrome:[/Chrome\/(\d+(\.\d+)?)/],"Chrome iOS":[/CriOS\/(\d+(\.\d+)?)/],"UC Browser":[/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/],Safari:[/Version\/(\d+(\.\d+)?)/],"Mobile Safari":[/Version\/(\d+(\.\d+)?)/],Opera:[/(Opera|OPR)\/(\d+(\.\d+)?)/],Firefox:[/Firefox\/(\d+(\.\d+)?)/],"Firefox iOS":[/FxiOS\/(\d+(\.\d+)?)/],Konqueror:[/Konqueror[:/]?(\d+(\.\d+)?)/i],BlackBerry:[/BlackBerry (\d+(\.\d+)?)/,/Version\/(\d+(\.\d+)?)/],"Android Mobile":[/android\s(\d+(\.\d+)?)/],"Samsung Internet":[/SamsungBrowser\/(\d+(\.\d+)?)/],"Internet Explorer":[/(rv:|MSIE )(\d+(\.\d+)?)/],Mozilla:[/rv:(\d+(\.\d+)?)/]}[tn.browser(t,e,n)];if(tt(r))return null;for(var i=0;i<r.length;i++){var s=r[i],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(t){if(/Windows/i.test(t)){if(/Phone/.test(t)||/WPDesktop/.test(t))return{os_name:"Windows Phone",os_version:""};var e=/Windows NT ([0-9.]+)/i.exec(t);return e&&e[1]?{os_name:"Windows",os_version:e[1]}:{os_name:"Windows",os_version:""}}if(/(iPhone|iPad|iPod)/.test(t)){var n=/OS (\d+)_(\d+)_?(\d+)?/i.exec(t);return n&&n[1]?{os_name:"iOS",os_version:[n[1],n[2],n[3]||"0"].join(".")}:{os_name:"iOS",os_version:""}}if(/Android/.test(t)){var r=/Android (\d+)\.(\d+)\.?(\d+)?/i.exec(t);return r&&r[1]?{os_name:"Android",os_version:[r[1],r[2],r[3]||"0"].join(".")}:{os_name:"Android",os_version:""}}if(/(BlackBerry|PlayBook|BB10)/i.test(t))return{os_name:"BlackBerry",os_version:""};if(/Mac/i.test(t)){var i=/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i.exec(t);return i&&i[1]?{os_name:"Mac OS X",os_version:[i[1],i[2],i[3]||"0"].join(".")}:{os_name:"Mac OS X",os_version:""}}return/Linux/.test(t)?{os_name:"Linux",os_version:""}:/CrOS/.test(t)?{os_name:"Chrome OS",os_version:""}:{os_name:"",os_version:""}},device:function(t){return/Windows Phone/i.test(t)||/WPDesktop/.test(t)?"Windows Phone":/iPad/.test(t)?"iPad":/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Android/.test(t)&&!/Mobile/.test(t)?"Android Tablet":/Android/.test(t)?"Android":""},deviceType:function(t){var e=this.device(t);return e==="iPad"||e==="Android Tablet"?"Tablet":e?"Mobile":"Desktop"},referrer:function(){return(Te==null?void 0:Te.referrer)||"$direct"},referringDomain:function(){var t;return Te!=null&&Te.referrer&&((t=JP(Te.referrer))===null||t===void 0?void 0:t.host)||"$direct"},properties:function(){if(!Vt)return{};var t=tn.os(Vt),e=t.os_name,n=t.os_version;return yn(iw({$os:e,$os_version:n,$browser:tn.browser(Vt,navigator.vendor,jn.opera),$device:tn.device(Vt),$device_type:tn.deviceType(Vt)}),{$current_url:G==null?void 0:G.location.href,$host:G==null?void 0:G.location.host,$pathname:G==null?void 0:G.location.pathname,$raw_user_agent:Vt.length>1e3?Vt.substring(0,997)+"...":Vt,$browser_version:tn.browserVersion(Vt,navigator.vendor,jn.opera),$browser_language:tn.browserLanguage(),$screen_height:G==null?void 0:G.screen.height,$screen_width:G==null?void 0:G.screen.width,$viewport_height:G==null?void 0:G.innerHeight,$viewport_width:G==null?void 0:G.innerWidth,$lib:"web",$lib_version:vl.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:HP()/1e3})},people_properties:function(){if(!Vt)return{};var t=tn.os(Vt),e=t.os_name,n=t.os_version;return yn(iw({$os:e,$os_version:n,$browser:tn.browser(Vt,navigator.vendor,jn.opera)}),{$browser_version:tn.browserVersion(Vt,navigator.vendor,jn.opera)})}},m5=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],x_=function(){function t(e){qt(this,t);var n="";e.token&&(n=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),this.props={},this.campaign_params_saved=!1,this.custom_campaign_params=e.custom_campaign_params||[],e.persistence_name?this.name="ph_"+e.persistence_name:this.name="ph_"+n+"_posthog",m5.indexOf(e.persistence.toLowerCase())===-1&&(fe.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var r=e.persistence.toLowerCase();r==="localstorage"&&Jt.is_supported()?this.storage=Jt:r==="localstorage+cookie"&&ad.is_supported()?this.storage=ad:r==="sessionstorage"&&xn.is_supported()?this.storage=xn:r==="memory"?this.storage=f5:r==="cookie"?this.storage=Ss:ad.is_supported()?this.storage=ad:this.storage=Ss,this.load(),this.update_config(e),this.save()}return Yt(t,[{key:"properties",value:function(){var e={};return yt(this.props,function(n,r){if(r===ac&&na(n))for(var i=Object.keys(n),s=0;s<i.length;s++)e["$feature/".concat(i[s])]=n[i[s]];else a=r,l=!1,(fi(o=t5)?l:i_&&o.indexOf===i_?o.indexOf(a)!=-1:(yt(o,function(c){if(l||(l=c===a))return U1}),l))||(e[r]=n);var o,a,l}),e}},{key:"load",value:function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=yn({},e))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(e,n,r){var i=this;if(na(e)){tt(n)&&(n="None"),this.expire_days=tt(r)?this.default_expiry:r;var s=!1;if(yt(e,function(o,a){i.props.hasOwnProperty(a)&&i.props[a]!==n||(i.props[a]=o,s=!0)}),s)return this.save(),!0}return!1}},{key:"register",value:function(e,n){var r=this;if(na(e)){this.expire_days=tt(n)?this.default_expiry:n;var i=!1;if(yt(e,function(s,o){e.hasOwnProperty(o)&&r.props[o]!==s&&(r.props[o]=s,i=!0)}),i)return this.save(),!0}return!1}},{key:"unregister",value:function(e){e in this.props&&(delete this.props[e],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(tn.campaignParams(this.custom_campaign_params)),this.campaign_params_saved=!0)}},{key:"update_search_keyword",value:function(){this.register(tn.searchInfo())}},{key:"update_referrer_info",value:function(){this.register({$referrer:this.props.$referrer||tn.referrer(),$referring_domain:this.props.$referring_domain||tn.referringDomain()})}},{key:"get_referrer_info",value:function(){return iw({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"safe_merge",value:function(e){return yt(this.props,function(n,r){r in e||(e[r]=n)}),e}},{key:"update_config",value:function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)}},{key:"set_disabled",value:function(e){this.disabled=e,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}},{key:"set_event_timer",value:function(e,n){var r=this.props[od]||{};r[e]=n,this.props[od]=r,this.save()}},{key:"remove_event_timer",value:function(e){var n=(this.props[od]||{})[e];return tt(n)||(delete this.props[od][e],this.save()),n}},{key:"get_user_state",value:function(){return this.props[lw]||"anonymous"}},{key:"set_user_state",value:function(e){this.props[lw]=e,this.save()}},{key:"get_quota_limits",value:function(){return this.props[cw]||{}}},{key:"set_quota_limits",value:function(e){this.props[cw]=e,this.save()}}]),t}(),S_=2,g5=4,ZP=3,v5=6,y5=0,w5="rrweb/console@1",b5=Yt(function t(e){var n,r,i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};qt(this,t),ke(this,"bucketSize",100),ke(this,"refillRate",10),ke(this,"mutationBuckets",{}),ke(this,"loggedTracker",{}),ke(this,"refillBuckets",function(){Object.keys(i.mutationBuckets).forEach(function(o){i.mutationBuckets[o]=i.mutationBuckets[o]+i.refillRate,i.mutationBuckets[o]>=i.bucketSize&&delete i.mutationBuckets[o]})}),ke(this,"getNodeOrRelevantParent",function(o){var a=i.rrweb.mirror.getNode(o);if((a==null?void 0:a.nodeName)!=="svg"&&a instanceof Element){var l=a.closest("svg");if(l)return[i.rrweb.mirror.getId(l),l]}return[o,a]}),ke(this,"numberOfChanges",function(o){var a,l,c,u,d,f,h,p;return((a=(l=o.removes)===null||l===void 0?void 0:l.length)!==null&&a!==void 0?a:0)+((c=(u=o.attributes)===null||u===void 0?void 0:u.length)!==null&&c!==void 0?c:0)+((d=(f=o.texts)===null||f===void 0?void 0:f.length)!==null&&d!==void 0?d:0)+((h=(p=o.adds)===null||p===void 0?void 0:p.length)!==null&&h!==void 0?h:0)}),ke(this,"throttleMutations",function(o){if(o.type!==ZP||o.data.source!==y5)return o;var a=o.data,l=i.numberOfChanges(a);a.attributes&&(a.attributes=a.attributes.filter(function(u){var d,f,h,p=Oi(i.getNodeOrRelevantParent(u.id),2),m=p[0],w=p[1];return i.mutationBuckets[m]===0?!1:(i.mutationBuckets[m]=(d=i.mutationBuckets[m])!==null&&d!==void 0?d:i.bucketSize,i.mutationBuckets[m]=Math.max(i.mutationBuckets[m]-1,0),i.mutationBuckets[m]===0&&(i.loggedTracker[m]||(i.loggedTracker[m]=!0,(f=(h=i.options).onBlockedNode)===null||f===void 0||f.call(h,m,w))),u)}));var c=i.numberOfChanges(a);return c!==0||l===c?o:void 0}),this.rrweb=e,this.options=s,this.refillRate=(n=this.options.refillRate)!==null&&n!==void 0?n:this.refillRate,this.bucketSize=(r=this.options.bucketSize)!==null&&r!==void 0?r:this.bucketSize,setInterval(function(){i.refillBuckets()},1e3)}),QP=function(t){return t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t}(QP||{}),x5={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:function(t){return t},recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6},S5=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],k5=["/s/","/e/","/i/vo/e/"];function k_(t,e,n,r){var i=e==null?void 0:e["content-length"];return i&&parseInt(i)>n?"".concat(r," body too large to record"):t}var is,_5=function(t,e){var n,r,i,s=t.session_recording,o=s.recordHeaders!==!1&&e.recordHeaders,a=s.recordBody!==!1&&e.recordBody,l=s.recordPerformance!==!1&&e.recordPerformance,c=(n=s,i=Math.min(1e6,(r=n.payloadSizeLimitBytes)!==null&&r!==void 0?r:1e6),function(f){return f!=null&&f.requestBody&&(f.requestBody=k_(f.requestBody,f.requestHeaders,i,"Request")),f!=null&&f.responseBody&&(f.responseBody=k_(f.responseBody,f.responseHeaders,i,"Response")),f}),u=function(f){return c(function(m){var w=JP(m.name);if(!(w&&w.pathname&&k5.includes(w.pathname)))return m}((h=f,Object.keys((p=h.requestHeaders)!==null&&p!==void 0?p:{}).forEach(function(m){var w;S5.includes(m.toLowerCase())&&((w=h.requestHeaders)===null||w===void 0||delete w[m])}),h)));var h,p},d=Bi(t.session_recording.maskNetworkRequestFn);return d&&Bi(t.session_recording.maskCapturedNetworkRequestFn)&&fe.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=function(f){var h=t.session_recording.maskNetworkRequestFn({url:f.name});return Ne(Ne({},f),{},{name:h==null?void 0:h.url})}),s.maskRequestFn=Bi(t.session_recording.maskCapturedNetworkRequestFn)?function(f){var h,p,m,w=u(f);return w&&(h=(p=(m=t.session_recording).maskCapturedNetworkRequestFn)===null||p===void 0?void 0:p.call(m,w))!==null&&h!==void 0?h:void 0}:void 0,s.maskRequestFn||(s.maskRequestFn=u),Ne(Ne(Ne({},x5),s),{},{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})},C5="/s/",__=3e5;(function(t){t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet"})(is||(is={}));var E5=[is.MouseMove,is.MouseInteraction,is.Scroll,is.ViewportResize,is.Input,is.TouchMove,is.MediaInteraction,is.Drag],A5=function(){function t(e){var n=this;if(qt(this,t),ke(this,"isIdle",!1),ke(this,"_linkedFlagSeen",!1),ke(this,"_lastActivityTimestamp",Date.now()),ke(this,"windowId",null),ke(this,"sessionId",null),ke(this,"_linkedFlag",null),ke(this,"_sampleRate",null),ke(this,"_minimumDuration",null),ke(this,"_forceAllowLocalhostNetworkCapture",!1),this.instance=e,this._captureStarted=!1,this._endpoint=C5,this.stopRrweb=void 0,this.receivedDecide=!1,G==null||G.addEventListener("beforeunload",function(){n._flushBuffer()}),!this.instance.sessionManager)throw fe.error("Session recording started without valid sessionManager"),new Error("Session recording started without valid sessionManager. This is a bug.");this.buffer=this.clearBuffer()}return Yt(t,[{key:"started",get:function(){return this._captureStarted}},{key:"sessionManager",get:function(){if(!this.instance.sessionManager)throw fe.error("Session recording started without valid sessionManager"),new Error("Session recording started without valid sessionManager. This is a bug.");return this.instance.sessionManager}},{key:"isSampled",get:function(){return Ys(this._sampleRate)?this.instance.get_property(Bp):null}},{key:"sessionDuration",get:function(){var e,n,r=(e=this.buffer)===null||e===void 0?void 0:e.data[((n=this.buffer)===null||n===void 0?void 0:n.data.length)-1],i=this.sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return r?r.timestamp-i:null}},{key:"isRecordingEnabled",get:function(){var e=!!this.instance.get_property(sw),n=!this.instance.config.disable_session_recording;return G&&e&&n}},{key:"isConsoleLogCaptureEnabled",get:function(){var e=!!this.instance.get_property(h_),n=this.instance.config.enable_recording_console_log;return n??e}},{key:"recordingVersion",get:function(){var e,n=this.instance.get_property(p_);return((e=this.instance.config.session_recording)===null||e===void 0?void 0:e.recorderVersion)||n||"v1"}},{key:"networkPayloadCapture",get:function(){var e,n,r=this.instance.get_property(m_),i={recordHeaders:(e=this.instance.config.session_recording)===null||e===void 0?void 0:e.recordHeaders,recordBody:(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.recordBody},s=(i==null?void 0:i.recordHeaders)||(r==null?void 0:r.recordHeaders),o=(i==null?void 0:i.recordBody)||(r==null?void 0:r.recordBody),a=this.instance.config.capture_performance||(r==null?void 0:r.capturePerformance);return s||o||a?{recordHeaders:s,recordBody:o,recordPerformance:a}:void 0}},{key:"status",get:function(){return this.receivedDecide?this.isRecordingEnabled?Ur(this._linkedFlag)&&!this._linkedFlagSeen?"buffering":rw(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"disabled":"buffering"}},{key:"startRecordingIfEnabled",value:function(){this.isRecordingEnabled?this.startCaptureAndTrySendingQueuedSnapshots():(this.stopRecording(),this.clearBuffer())}},{key:"stopRecording",value:function(){this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1)}},{key:"makeSamplingDecision",value:function(e){var n,r=this.sessionId!==e;if(Ys(this._sampleRate)){var i,s=this.isSampled;r||!rw(s)?i=Math.random()<this._sampleRate:i=s,i||fe.warn("[SessionSampling] Sample rate (".concat(this._sampleRate,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),(n=this.instance.persistence)===null||n===void 0||n.register(ke({},Bp,i))}else{var o;(o=this.instance.persistence)===null||o===void 0||o.register(ke({},Bp,null))}}},{key:"afterDecideResponse",value:function(e){var n,r,i,s,o,a,l,c,u=this;this.instance.persistence&&this.instance.persistence.register((ke(c={},sw,!!e.sessionRecording),ke(c,h_,(o=e.sessionRecording)===null||o===void 0?void 0:o.consoleLogRecordingEnabled),ke(c,p_,(a=e.sessionRecording)===null||a===void 0?void 0:a.recorderVersion),ke(c,m_,Ne({capturePerformance:e.capturePerformance},(l=e.sessionRecording)===null||l===void 0?void 0:l.networkPayloadCapture)),c));var d=(n=e.sessionRecording)===null||n===void 0?void 0:n.sampleRate;this._sampleRate=tt(d)||fi(d)?null:parseFloat(d);var f,h=(r=e.sessionRecording)===null||r===void 0?void 0:r.minimumDurationMilliseconds;if(this._minimumDuration=tt(h)?null:h,this._linkedFlag=((i=e.sessionRecording)===null||i===void 0?void 0:i.linkedFlag)||null,(s=e.sessionRecording)!==null&&s!==void 0&&s.endpoint&&(this._endpoint=(f=e.sessionRecording)===null||f===void 0?void 0:f.endpoint),Ys(this._sampleRate)&&this.sessionManager.onSessionId(function(m){u.makeSamplingDecision(m)}),Ur(this._linkedFlag)){var p=this._linkedFlag;this.instance.onFeatureFlags(function(m){u._linkedFlagSeen=m.includes(p)})}this.receivedDecide=!0,this.startRecordingIfEnabled()}},{key:"log",value:function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log";(n=this.instance.sessionRecording)===null||n===void 0||n.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:r,trace:[],payload:[JSON.stringify(e)]}},timestamp:HP()})}},{key:"startCaptureAndTrySendingQueuedSnapshots",value:function(){this._startCapture()}},{key:"_startCapture",value:function(){var e=this;if(!tt(Object.assign)&&!this._captureStarted&&!this.instance.config.disable_session_recording){this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId();var n=this.recordingVersion==="v2"?"recorder-v2.js":"recorder.js";this.instance.__loaded_recorder_version!==this.recordingVersion?xd(this.instance.config.api_host+"/static/".concat(n,"?v=").concat(vl.LIB_VERSION),function(r){if(r)return fe.error("Could not load ".concat(n),r);e._onScriptLoaded()}):this._onScriptLoaded()}}},{key:"_isInteractiveEvent",value:function(e){var n;return e.type===ZP&&E5.indexOf((n=e.data)===null||n===void 0?void 0:n.source)!==-1}},{key:"_updateWindowAndSessionIds",value:function(e){var n=this._isInteractiveEvent(e);if(n||this.isIdle||e.timestamp-this._lastActivityTimestamp>__&&(this.isIdle=!0,this._tryAddCustomEvent("sessionIdle",{reason:"user inactivity",timeSinceLastActive:e.timestamp-this._lastActivityTimestamp,threshold:__})),n&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),this._tryTakeFullSnapshot())),!this.isIdle){var r=this.sessionManager.checkAndGetSessionAndWindowId(!n,e.timestamp),i=r.windowId,s=r.sessionId,o=this.sessionId!==s,a=this.windowId!==i;[S_,g5].indexOf(e.type)===-1&&(a||o)&&this._tryTakeFullSnapshot(),this.windowId=i,this.sessionId=s}}},{key:"_tryRRwebMethod",value:function(e){if(!this._captureStarted)return!1;try{return e(),!0}catch(n){return fe.error("[Session-Recording] using rrweb when not started.",n),!1}}},{key:"_tryAddCustomEvent",value:function(e,n){var r=this;return this._tryRRwebMethod(function(){var i;return(i=r.rrwebRecord)===null||i===void 0?void 0:i.addCustomEvent(e,n)})}},{key:"_tryTakeFullSnapshot",value:function(){var e=this;return this._tryRRwebMethod(function(){var n;return(n=e.rrwebRecord)===null||n===void 0?void 0:n.takeFullSnapshot()})}},{key:"_onScriptLoaded",value:function(){var e,n=this,r={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1};this.rrwebRecord=G.rrweb?G.rrweb.record:G.rrwebRecord;for(var i=this.instance.config.session_recording,s=0,o=Object.entries(i||{});s<o.length;s++){var a=Oi(o[s],2),l=a[0],c=a[1];l in r&&(r[l]=c)}this.rrwebRecord?(this.mutationRateLimiter=(e=this.mutationRateLimiter)!==null&&e!==void 0?e:new b5(this.rrwebRecord,{onBlockedNode:function(u,d){var f="Too many mutations on node '".concat(u,"'. Rate limiting. This could be due to SVG animations or something similar");fe.info(f,{node:d}),n.log("[PostHog Recorder] "+f,"warn")}}),this.stopRrweb=this.rrwebRecord(Ne({emit:function(u){n.onRRwebEmit(u)},plugins:this._gatherRRWebPlugins()},r)),this.instance._addCaptureHook(function(u){try{if(u==="$pageview"){var d=G?n._maskUrl(G.location.href):"";if(!d)return;n._tryAddCustomEvent("$pageview",{href:d})}}catch(f){fe.error("Could not add $pageview to rrweb session",f)}}),this._lastActivityTimestamp=Date.now(),this.isIdle=!1):fe.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}},{key:"_gatherRRWebPlugins",value:function(){var e=[];return jn.rrwebConsoleRecord&&this.isConsoleLogCaptureEnabled&&e.push(jn.rrwebConsoleRecord.getRecordConsolePlugin()),this.networkPayloadCapture&&Bi(jn.getRecordNetworkPlugin)&&(!h5.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?e.push(jn.getRecordNetworkPlugin(_5(this.instance.config,this.networkPayloadCapture))):fe.info("[SessionReplay-NetworkCapture] not started because we are on localhost.")),e}},{key:"onRRwebEmit",value:function(e){if(e&&na(e)){if(e.type===QP.Meta){var n=this._maskUrl(e.data.href);if(!n)return;e.data.href=n}var r=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(r){var i=function(a){var l=a;if(l&&na(l)&&l.type===v5&&na(l.data)&&l.data.plugin===w5){l.data.payload.payload.length>10&&(l.data.payload.payload=l.data.payload.payload.slice(0,10),l.data.payload.payload.push("...[truncated]"));for(var c=[],u=0;u<l.data.payload.payload.length;u++)l.data.payload.payload[u]&&l.data.payload.payload[u].length>2e3?c.push(l.data.payload.payload[u].slice(0,2e3)+"...[truncated]"):c.push(l.data.payload.payload[u]);return l.data.payload.payload=c,a}return a}(r),s=JSON.stringify(i).length;if(this._updateWindowAndSessionIds(i),!this.isIdle){var o={$snapshot_bytes:s,$snapshot_data:i,$session_id:this.sessionId,$window_id:this.windowId};this.status!=="disabled"?this._captureSnapshotBuffered(o):this.clearBuffer()}}}}},{key:"_maskUrl",value:function(e){var n=this.instance.config.session_recording;if(n.maskNetworkRequestFn){var r,i={url:e};return(r=i=n.maskNetworkRequestFn(i))===null||r===void 0?void 0:r.url}return e}},{key:"clearBuffer",value:function(){return this.buffer=void 0,{size:0,data:[],sessionId:this.sessionId,windowId:this.windowId}}},{key:"_flushBuffer",value:function(){var e=this;this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var n=this._minimumDuration,r=this.sessionDuration,i=Ys(r)&&r>=0,s=Ys(n)&&i&&r<n;return this.status==="buffering"||s?(this.flushBufferTimer=setTimeout(function(){e._flushBuffer()},2e3),this.buffer||this.clearBuffer()):this.buffer&&this.buffer.data.length!==0?(this._captureSnapshot({$snapshot_bytes:this.buffer.size,$snapshot_data:this.buffer.data,$session_id:this.buffer.sessionId,$window_id:this.buffer.windowId}),this.clearBuffer()):this.buffer||this.clearBuffer()}},{key:"_captureSnapshotBuffered",value:function(e){var n,r=this,i=2+(((n=this.buffer)===null||n===void 0?void 0:n.data.length)||0);(!this.buffer||this.buffer.size+e.$snapshot_bytes+i>943718.4||this.buffer.sessionId&&this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),fi(this.buffer.sessionId)&&!fi(this.sessionId)&&(this.buffer.sessionId=this.sessionId,this.buffer.windowId=this.windowId),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||(this.flushBufferTimer=setTimeout(function(){r._flushBuffer()},2e3))}},{key:"_captureSnapshot",value:function(e){this.instance.capture("$snapshot",e,{transport:"XHR",method:"POST",endpoint:this._endpoint,_noTruncate:!0,_batchKey:"recordings",_metrics:{rrweb_full_snapshot:e.$snapshot_data.type===S_}})}}]),t}(),P5=function(){function t(e){qt(this,t),this.instance=e,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return Yt(t,[{key:"call",value:function(){var e=this,n=V1(JSON.stringify({token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(lc),group_properties:this.instance.get_property($o),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0}));this.instance._send_request("".concat(this.instance.config.api_host,"/decide/?v=3"),{data:n,verbose:!0},{method:"POST"},function(r){return e.parseDecideResponse(r)})}},{key:"parseDecideResponse",value:function(e){var n,r=this;if(this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer(),(e==null?void 0:e.status)!==0){if(!Te||!Te.body)return fe.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(function(){r.parseDecideResponse(e)},500);this.instance.toolbar.afterDecideResponse(e),(n=this.instance.sessionRecording)===null||n===void 0||n.afterDecideResponse(e),Io.afterDecideResponse(e,this.instance),this.instance._afterDecideResponse(e),this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(e);var i=G==null?void 0:G.extendPostHogWithSurveys;e.surveys&&!i&&xd(this.instance.config.api_host+"/static/surveys.js",function(u){if(u)return fe.error("Could not load surveys script",u);G.extendPostHogWithSurveys(r.instance)});var s=G==null?void 0:G.extendPostHogWithExceptionAutoCapture;if(e.autocaptureExceptions&&e.autocaptureExceptions&&tt(s)&&xd(this.instance.config.api_host+"/static/exception-autocapture.js",function(u){if(u)return fe.error("Could not load exception autocapture script",u);G.extendPostHogWithExceptionAutocapture(r.instance,e)}),e.siteApps)if(this.instance.config.opt_in_site_apps){var o,a=this.instance.config.api_host,l=gl(e.siteApps);try{var c=function(){var u=o.value,d=u.id,f=u.url,h=[a,a[a.length-1]==="/"&&f[0]==="/"?f.substring(1):f].join("");jn["__$$ph_site_app_".concat(d)]=r.instance,xd(h,function(p){p&&fe.error("Error while initializing PostHog app with config id ".concat(d),p)})};for(l.s();!(o=l.n()).done;)c()}catch(u){l.e(u)}finally{l.f()}}else e.siteApps.length>0&&fe.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}else fe.error("Failed to fetch feature flags from PostHog.")}}]),t}(),$5=["https://app.posthog.com","https://eu.posthog.com"],T5=["source"],O5=G!=null&&G.location?Em(G.location.hash,"__posthog")||Em(location.hash,"state"):null,N5=function(){function t(e){qt(this,t),this.instance=e}return Yt(t,[{key:"afterDecideResponse",value:function(e){var n=e.toolbarParams||e.editorParams||(e.toolbarVersion?{toolbarVersion:e.toolbarVersion}:{});e.isAuthenticated&&n.toolbarVersion&&n.toolbarVersion.indexOf("toolbar")===0&&this.loadToolbar(Ne({},n))}},{key:"maybeLoadToolbar",value:function(){var e,n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!G||!Te)return!1;r=(e=r)!==null&&e!==void 0?e:G.location,s=(n=s)!==null&&n!==void 0?n:G.history;try{if(!i){try{G.localStorage.setItem("test","test"),G.localStorage.removeItem("test")}catch{return!1}i=G==null?void 0:G.localStorage}var o,a=O5||Em(r.hash,"__posthog")||Em(r.hash,"state"),l=a?a_(function(){return JSON.parse(atob(decodeURIComponent(a)))})||a_(function(){return JSON.parse(decodeURIComponent(a))}):null;return l&&l.action==="ph_authorize"?((o=l).source="url",o&&Object.keys(o).length>0&&(l.desiredHash?r.hash=l.desiredHash:s?s.replaceState("",Te.title,r.pathname+r.search):r.hash="")):((o=JSON.parse(i.getItem("_postHogToolbarParams")||"{}")).source="localstorage",delete o.userIntent),!(!o.token||this.instance.config.token!==o.token)&&(this.loadToolbar(o),!0)}catch{return!1}}},{key:"loadToolbar",value:function(e){var n=this;if(!G||jn._postHogToolbarLoaded)return!1;jn._postHogToolbarLoaded=!0;var r=this.instance.config.api_host,i=3e5,s=Math.floor(Date.now()/i)*i,o="".concat(r).concat(r.endsWith("/")?"":"/","static/toolbar.js?t=").concat(s),a=!$5.includes(this.instance.config.api_host)&&this.instance.config.advanced_disable_toolbar_metrics,l=Ne(Ne({token:this.instance.config.token},e),{},{apiURL:r},a?{instrument:!1}:{});l.source;var c=WL(l,T5);return G.localStorage.setItem("_postHogToolbarParams",JSON.stringify(c)),xd(o,function(u){u?fe.error("Failed to load toolbar",u):(jn.ph_load_toolbar||jn.ph_load_editor)(l,n.instance)}),bd(G,"turbolinks:load",function(){jn._postHogToolbarLoaded=!1,n.loadToolbar(l)}),!0}},{key:"_loadEditor",value:function(e){return this.loadToolbar(e)}},{key:"maybeLoadEditor",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return this.maybeLoadToolbar(e,n,r)}}]),t}(),R5="__ph_opt_in_out_";function M5(t,e){t$(!0,t,e)}function D5(t,e){t$(!1,t,e)}function I5(t,e){return e$(t,e)==="1"}function C_(t,e){return!!function(n){if(n&&n.respectDnt){var r=n&&n.window||G,i=r==null?void 0:r.navigator,s=!1;return yt([i==null?void 0:i.doNotTrack,i.msDoNotTrack,r.doNotTrack],function(o){at([!0,1,"1","yes"],o)&&(s=!0)}),s}return!1}(e)||e$(t,e)==="0"}function L5(t,e){W1(e=e||{}).remove(G1(t,e),!!e.crossSubdomainCookie)}function W1(t){return(t=t||{}).persistenceType==="localStorage"?Jt:t.persistenceType==="localStorage+cookie"?ad:Ss}function G1(t,e){return((e=e||{}).persistencePrefix||R5)+t}function e$(t,e){return W1(e).get(G1(t,e))}function t$(t,e,n){Ur(e)&&e.length?(W1(n=n||{}).set(G1(e,n),t?1:0,Ys(n.cookieExpiration)?n.cookieExpiration:null,n.crossSubdomainCookie,n.secureCookie),n.capture&&t&&n.capture(n.captureEventName||"$opt_in",n.captureProperties||{},{send_instantly:!0})):fe.error("gdpr."+(t?"optIn":"optOut")+" called with an invalid token")}var n$=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3e3;qt(this,t),this.isPolling=!0,this._event_queue=[],this._empty_queue_count=0,this._poller=void 0,this._pollInterval=e}return Yt(t,[{key:"setPollInterval",value:function(e){this._pollInterval=e,this.isPolling&&this.poll()}},{key:"poll",value:function(){}},{key:"unload",value:function(){}},{key:"getTime",value:function(){return new Date().getTime()}}]),t}(),B5=function(t){FP(n,n$);var e=jP(n);function n(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3e3;return qt(this,n),(i=e.call(this,s)).handlePollRequest=r,i}return Yt(n,[{key:"enqueue",value:function(r,i,s){this._event_queue.push({url:r,data:i,options:s}),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var r=this;clearTimeout(this._poller),this._poller=setTimeout(function(){if(r._event_queue.length>0){var i=r.formatQueue(),s=function(a){var l=i[a],c=l.url,u=l.data,d=l.options;yt(u,function(f,h){u[h].offset=Math.abs(u[h].timestamp-r.getTime()),delete u[h].timestamp}),r.handlePollRequest(c,u,d)};for(var o in i)s(o);r._event_queue.length=0,r._empty_queue_count=0}else r._empty_queue_count++;r._empty_queue_count>4&&(r.isPolling=!1,r._empty_queue_count=0),r.isPolling&&r.poll()},this._pollInterval)}},{key:"unload",value:function(){var r=this;clearTimeout(this._poller);var i=this._event_queue.length>0?this.formatQueue():{};this._event_queue.length=0;var s=Object.values(i);[].concat(tw(s.filter(function(o){return o.url.indexOf("/e")===0})),tw(s.filter(function(o){return o.url.indexOf("/e")!==0}))).map(function(o){var a=o.url,l=o.data,c=o.options;r.handlePollRequest(a,l,Ne(Ne({},c),{},{transport:"sendBeacon"}))})}},{key:"formatQueue",value:function(){var r={};return yt(this._event_queue,function(i){var s=i.url,o=i.data,a=i.options,l=(a?a._batchKey:null)||s;tt(r[l])&&(r[l]={data:[],url:s,options:a}),a&&r[l].options&&r[l].options._metrics&&!r[l].options._metrics.rrweb_full_snapshot&&(r[l].options._metrics.rrweb_full_snapshot=a._metrics.rrweb_full_snapshot),r[l].data.push(o)}),r}}]),n}(),Vr=Uint8Array,Yn=Uint16Array,Jc=Uint32Array,K1=new Vr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),X1=new Vr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),E_=new Vr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r$=function(t,e){for(var n=new Yn(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new Jc(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},i$=r$(K1,2),F5=i$[0],dw=i$[1];F5[28]=258,dw[258]=28;for(var A_=r$(X1,0)[1],fw=new Yn(32768),Pt=0;Pt<32768;++Pt){var za=(43690&Pt)>>>1|(21845&Pt)<<1;za=(61680&(za=(52428&za)>>>2|(13107&za)<<2))>>>4|(3855&za)<<4,fw[Pt]=((65280&za)>>>8|(255&za)<<8)>>>1}var Sd=function(t,e,n){for(var r=t.length,i=0,s=new Yn(e);i<r;++i)++s[t[i]-1];var o,a=new Yn(e);for(i=0;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;if(n){o=new Yn(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],d=a[t[i]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)o[fw[d]>>>l]=c}else for(o=new Yn(r),i=0;i<r;++i)o[i]=fw[a[t[i]-1]++]>>>15-t[i];return o},yl=new Vr(288);for(Pt=0;Pt<144;++Pt)yl[Pt]=8;for(Pt=144;Pt<256;++Pt)yl[Pt]=9;for(Pt=256;Pt<280;++Pt)yl[Pt]=7;for(Pt=280;Pt<288;++Pt)yl[Pt]=8;var Am=new Vr(32);for(Pt=0;Pt<32;++Pt)Am[Pt]=5;var Ka,j5=Sd(yl,9,0),z5=Sd(Am,5,0),s$=function(t){return(t/8>>0)+(7&t&&1)},o$=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof Yn?Yn:t instanceof Jc?Jc:Vr)(n-e);return r.set(t.subarray(e,n)),r},Ts=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},Iu=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},hy=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return[new Vr(0),0];if(i==1){var o=new Vr(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(_,P){return _.f-P.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var f=s[0].s;for(r=1;r<i;++r)s[r].s>f&&(f=s[r].s);var h=new Yn(f+1),p=U5(n[u-1],h,0);if(p>e){r=0;var m=0,w=p-e,v=1<<w;for(s.sort(function(_,P){return h[P.s]-h[_.s]||_.f-P.f});r<i;++r){var y=s[r].s;if(!(h[y]>e))break;m+=v-(1<<p-h[y]),h[y]=e}for(m>>>=w;m>0;){var x=s[r].s;h[x]<e?m-=1<<e-h[x]++-1:++r}for(;r>=0&&m;--r){var k=s[r].s;h[k]==e&&(--h[k],++m)}p=e}return[new Vr(h),p]},U5=function t(e,n,r){return e.s==-1?Math.max(t(e.l,n,r+1),t(e.r,n,r+1)):n[e.s]=r},P_=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Yn(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return[n.subarray(0,r),e]},Lu=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Fp=function(t,e,n){var r=n.length,i=s$(e+2);t[i]=255&r,t[i+1]=r>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<r;++s)t[i+s+4]=n[s];return 8*(i+4+r)},$_=function(t,e,n,r,i,s,o,a,l,c,u){Ts(e,u++,n),++i[256];for(var d=hy(i,15),f=d[0],h=d[1],p=hy(s,15),m=p[0],w=p[1],v=P_(f),y=v[0],x=v[1],k=P_(m),_=k[0],P=k[1],A=new Yn(19),C=0;C<y.length;++C)A[31&y[C]]++;for(C=0;C<_.length;++C)A[31&_[C]]++;for(var N=hy(A,7),R=N[0],M=N[1],L=19;L>4&&!R[E_[L-1]];--L);var H,T,V,q,te=c+5<<3,W=Lu(i,yl)+Lu(s,Am)+o,j=Lu(i,f)+Lu(s,m)+o+14+3*L+Lu(A,R)+(2*A[16]+3*A[17]+7*A[18]);if(te<=W&&te<=j)return Fp(e,u,t.subarray(l,l+c));if(Ts(e,u,1+(j<W)),u+=2,j<W){H=Sd(f,h,0),T=f,V=Sd(m,w,0),q=m;var Z=Sd(R,M,0);for(Ts(e,u,x-257),Ts(e,u+5,P-1),Ts(e,u+10,L-4),u+=14,C=0;C<L;++C)Ts(e,u+3*C,R[E_[C]]);u+=3*L;for(var K=[y,_],Q=0;Q<2;++Q){var ae=K[Q];for(C=0;C<ae.length;++C){var B=31&ae[C];Ts(e,u,Z[B]),u+=R[B],B>15&&(Ts(e,u,ae[C]>>>5&127),u+=ae[C]>>>12)}}}else H=j5,T=yl,V=z5,q=Am;for(C=0;C<a;++C)if(r[C]>255){B=r[C]>>>18&31,Iu(e,u,H[B+257]),u+=T[B+257],B>7&&(Ts(e,u,r[C]>>>23&31),u+=K1[B]);var I=31&r[C];Iu(e,u,V[I]),u+=q[I],I>3&&(Iu(e,u,r[C]>>>5&8191),u+=X1[I])}else Iu(e,u,H[r[C]]),u+=T[r[C]];return Iu(e,u,H[256]),u+T[256]},V5=new Jc([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),H5=new Vr(0),W5=function(){for(var t=new Jc(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),G5=function(){var t=4294967295;return{p:function(e){for(var n=t,r=0;r<e.length;++r)n=W5[255&n^e[r]]^n>>>8;t=n},d:function(){return 4294967295^t}}},K5=function(t,e,n,r,i){return function(s,o,a,l,c,u){var d=s.length,f=new Vr(l+d+5*(1+Math.floor(d/7e3))+c),h=f.subarray(l,f.length-c),p=0;if(!o||d<8)for(var m=0;m<=d;m+=65535){var w=m+65535;w<d?p=Fp(h,p,s.subarray(m,w)):(h[m]=u,p=Fp(h,p,s.subarray(m,d)))}else{for(var v=V5[o-1],y=v>>>13,x=8191&v,k=(1<<a)-1,_=new Yn(32768),P=new Yn(k+1),A=Math.ceil(a/3),C=2*A,N=function(he){return(s[he]^s[he+1]<<A^s[he+2]<<C)&k},R=new Jc(25e3),M=new Yn(288),L=new Yn(32),H=0,T=0,V=(m=0,0),q=0,te=0;m<d;++m){var W=N(m),j=32767&m,Z=P[W];if(_[j]=Z,P[W]=j,q<=m){var K=d-m;if((H>7e3||V>24576)&&K>423){p=$_(s,h,0,R,M,L,T,V,te,m-te,p),V=H=T=0,te=m;for(var Q=0;Q<286;++Q)M[Q]=0;for(Q=0;Q<30;++Q)L[Q]=0}var ae=2,B=0,I=x,z=j-Z&32767;if(K>2&&W==N(m-z))for(var S=Math.min(y,K)-1,$=Math.min(32767,m),D=Math.min(258,K);z<=$&&--I&&j!=Z;){if(s[m+ae]==s[m+ae-z]){for(var O=0;O<D&&s[m+O]==s[m+O-z];++O);if(O>ae){if(ae=O,B=z,O>S)break;var U=Math.min(z,O-2),X=0;for(Q=0;Q<U;++Q){var ee=m-z+Q+32768&32767,J=ee-_[ee]+32768&32767;J>X&&(X=J,Z=ee)}}}z+=(j=Z)-(Z=_[j])+32768&32767}if(B){R[V++]=268435456|dw[ae]<<18|A_[B];var ie=31&dw[ae],Me=31&A_[B];T+=K1[ie]+X1[Me],++M[257+ie],++L[Me],q=m+ae,++H}else R[V++]=s[m],++M[s[m]]}}p=$_(s,h,u,R,M,L,T,V,te,m-te,p),u||(p=Fp(h,p,H5))}return o$(f,0,l+s$(p)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,r,!i)},hw=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},X5=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&hw(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var r=0;r<=n.length;++r)t[r+10]=n.charCodeAt(r)}},q5=function(t){return 10+(t.filename&&t.filename.length+1||0)};function Y5(t,e){e===void 0&&(e={});var n=G5(),r=t.length;n.p(t);var i=K5(t,e,q5(e),8),s=i.length;return X5(i,e),hw(i,s-8,n.d()),hw(i,s-4,r),i}function J5(t,e){var n=t.length;if(!e&&typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var r=new Vr(t.length+(t.length>>>1)),i=0,s=function(c){r[i++]=c},o=0;o<n;++o){if(i+5>r.length){var a=new Vr(i+8+(n-o<<1));a.set(r),r=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return o$(r,0,i)}(function(t){t.GZipJS="gzip-js",t.Base64="base64"})(Ka||(Ka={}));var a$=function(t,e,n){var r=e||{};r.ip=n.ip?1:0,r._=new Date().getTime().toString(),r.ver=vl.LIB_VERSION;var i=t.split("?");if(i.length>1){var s,o=gl(i[1].split("&"));try{for(o.s();!(s=o.n()).done;){var a=s.value.split("=")[0];tt(r[a])||delete r[a]}}catch(c){o.e(c)}finally{o.f()}}var l=t.indexOf("?")>-1?"&":"?";return t+l+function(c){var u,d,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",h=[];return yt(c,function(p,m){tt(p)||tt(m)||m==="undefined"||(u=encodeURIComponent(p.toString()),d=encodeURIComponent(m),h[h.length]=d+"="+u)}),h.join(f)}(r)},q1=function t(e,n){if(n.blob&&e.buffer)return new Blob([n_(e)?e:e.buffer],{type:"text/plain"});if(n.sendBeacon||n.blob){var r=t(e,{method:"POST"});return new Blob([r],{type:"application/x-www-form-urlencoded"})}return n.method!=="POST"?null:(i=hn(e)||n_(e)?"data="+encodeURIComponent(e):"data="+encodeURIComponent(e.data),"compression"in e&&e.compression&&(i+="&compression="+e.compression),i);var i},l$=function(t){var e=t.url,n=t.data,r=t.headers,i=t.options,s=t.callback,o=t.retriesPerformedSoFar,a=t.retryQueue,l=t.onXHRError,c=t.timeout,u=c===void 0?6e4:c,d=t.onResponse;Ys(o)&&o>0&&(e=a$(e,{retry_count:o},{}));var f=new XMLHttpRequest;f.open(i.method||"GET",e,!0);var h=q1(n,i);yt(r,function(p,m){f.setRequestHeader(m,p)}),i.method!=="POST"||i.blob||f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.timeout=u,f.withCredentials=!0,f.onreadystatechange=function(){if(f.readyState===4)if(d==null||d(f),f.status===200){if(s){var p;try{p=JSON.parse(f.responseText)}catch(m){return void fe.error(m)}s(p)}}else Bi(l)&&l(f),(f.status<400||f.status>500)&&a.enqueue({url:e,data:n,options:i,headers:r,retriesPerformedSoFar:(o||0)+1,callback:s}),s==null||s({status:0})},f.send(h)},Z5=18e5,Q5=function(t){FP(n,n$);var e=jP(n);function n(r,i){var s;return qt(this,n),(s=e.call(this)).isPolling=!1,s.queue=[],s.areWeOnline=!0,s.onXHRError=r,s.rateLimiter=i,!tt(G)&&"onLine"in G.navigator&&(s.areWeOnline=G.navigator.onLine,G.addEventListener("online",function(){s._handleWeAreNowOnline()}),G.addEventListener("offline",function(){s.areWeOnline=!1})),s}return Yt(n,[{key:"enqueue",value:function(r){var i=r.retriesPerformedSoFar||0;if(!(i>=10)){var s=function(l){var c=3e3*Math.pow(2,l),u=c/2,d=Math.min(Z5,c),f=(Math.random()-.5)*(d-u);return Math.ceil(d+f)}(i),o=new Date(Date.now()+s);this.queue.push({retryAt:o,requestData:r});var a="Enqueued failed request for retry in ".concat(s);navigator.onLine||(a+=" (Browser is offline)"),fe.warn(a),this.isPolling||(this.isPolling=!0,this.poll())}}},{key:"poll",value:function(){var r=this;this._poller&&clearTimeout(this._poller),this._poller=setTimeout(function(){r.areWeOnline&&r.queue.length>0&&r.flush(),r.poll()},this._pollInterval)}},{key:"flush",value:function(){var r=new Date(Date.now()),i=this.queue.filter(function(l){return l.retryAt<r});if(i.length>0){this.queue=this.queue.filter(function(l){return l.retryAt>=r});var s,o=gl(i);try{for(o.s();!(s=o.n()).done;){var a=s.value.requestData;this._executeXhrRequest(a)}}catch(l){o.e(l)}finally{o.f()}}}},{key:"unload",value:function(){this._poller&&(clearTimeout(this._poller),this._poller=void 0);var r,i=gl(this.queue);try{for(i.s();!(r=i.n()).done;){var s=r.value.requestData,o=s.url,a=s.data,l=s.options;if(this.rateLimiter.isRateLimited(l._batchKey))fe.warn("[RetryQueue] is quota limited. Dropping request.");else try{G==null||G.navigator.sendBeacon(o,q1(a,Ne(Ne({},l),{},{sendBeacon:!0})))}catch(c){fe.error(c)}}}catch(c){i.e(c)}finally{i.f()}this.queue=[]}},{key:"_executeXhrRequest",value:function(r){var i=r.url,s=r.data,o=r.options,a=r.headers,l=r.callback,c=r.retriesPerformedSoFar;this.rateLimiter.isRateLimited(o._batchKey)||l$({url:i,data:s||{},options:o||{},headers:a||{},retriesPerformedSoFar:c||0,callback:l,retryQueue:this,onXHRError:this.onXHRError,onResponse:this.rateLimiter.checkForLimiting})}},{key:"_handleWeAreNowOnline",value:function(){this.areWeOnline=!0,this.flush()}}]),n}(),Ch=1800,T_=60,e6=864e5,t6=function(){function t(e,n,r,i){qt(this,t),ke(this,"_sessionIdChangedHandlers",[]),this.config=e,this.persistence=n,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=r||el,this._windowIdGenerator=i||el;var s=e.persistence_name||e.token,o=e.session_idle_timeout_seconds||Ch;if(Ys(o)?o>Ch?fe.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead."):o<T_&&fe.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."):(fe.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."),o=Ch),this._sessionTimeoutMs=1e3*Math.min(Math.max(o,T_),Ch),this._window_id_storage_key="ph_"+s+"_window_id",this._primary_window_exists_storage_key="ph_"+s+"_primary_window_exists",this._canUseSessionStorage()){var a=xn.parse(this._window_id_storage_key),l=xn.parse(this._primary_window_exists_storage_key);a&&!l?this._windowId=a:xn.remove(this._window_id_storage_key),xn.set(this._primary_window_exists_storage_key,!0)}this._listenToReloadWindow()}return Yt(t,[{key:"onSessionId",value:function(e){var n=this;return tt(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),function(){n._sessionIdChangedHandlers=n._sessionIdChangedHandlers.filter(function(r){return r!==e})}}},{key:"_canUseSessionStorage",value:function(){return this.config.persistence!=="memory"&&!this.persistence.disabled&&xn.is_supported()}},{key:"_setWindowId",value:function(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&xn.set(this._window_id_storage_key,e))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:this._canUseSessionStorage()?xn.parse(this._window_id_storage_key):null}},{key:"_setSessionId",value:function(e,n,r){e===this._sessionId&&n===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this._sessionId=e,this.persistence.register(ke({},_m,[n,e,r])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[_m];return hn(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var e=this;G==null||G.addEventListener("beforeunload",function(){e._canUseSessionStorage()&&xn.remove(e._primary_window_exists_storage_key)})}},{key:"checkAndGetSessionAndWindowId",value:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:null)||new Date().getTime(),r=Oi(this._getSessionId(),3),i=r[0],s=r[1],o=r[2],a=this._getWindowId(),l=o&&o>0&&Math.abs(n-o)>e6,c=!1,u=!s,d=!e&&Math.abs(n-i)>this._sessionTimeoutMs;u||d||l?(s=this._sessionIdGenerator(),a=this._windowIdGenerator(),o=n,c=!0):a||(a=this._windowIdGenerator(),c=!0);var f=i===0||!e||l?n:i,h=o===0?new Date().getTime():o;return this._setWindowId(a),this._setSessionId(s,f,h),c&&this._sessionIdChangedHandlers.forEach(function(p){return p(s,a)}),{sessionId:s,windowId:a,sessionStartTimestamp:h}}}]),t}(),n6=Yt(function t(e,n,r,i){qt(this,t),this.name="posthog-js",this.setupOnce=function(s){s(function(o){var a,l,c,u,d;if(o.level!=="error"||!e.__loaded)return o;o.tags||(o.tags={});var f=e.config.ui_host||e.config.api_host;o.tags["PostHog Person URL"]=f+"/person/"+e.get_distinct_id(),e.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var h=((a=o.exception)===null||a===void 0?void 0:a.values)||[],p={$exception_message:(l=h[0])===null||l===void 0?void 0:l.value,$exception_type:(c=h[0])===null||c===void 0?void 0:c.type,$exception_personURL:f+"/person/"+e.get_distinct_id(),$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:(u=h[0])===null||u===void 0?void 0:u.value,$sentry_exception_type:(d=h[0])===null||d===void 0?void 0:d.type,$sentry_tags:o.tags};return n&&r&&(p.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+o.event_id),e.capture("$exception",p),o})}}),r6=function(t){Promise&&Promise.resolve||fe.warn("This browser does not have Promise support, and can not use the segment integration");var e=function(n,r){n.event.userId||n.event.anonymousId===t.get_distinct_id()||t.reset(),n.event.userId&&n.event.userId!==t.get_distinct_id()&&(t.register({distinct_id:n.event.userId}),t.reloadFeatureFlags());var i=t._calculate_event_properties(r,n.event.properties);return n.event.properties=Object.assign({},i,n.event.properties),n};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(n){return e(n,n.event.event)},page:function(n){return e(n,"$pageview")},identify:function(n){return e(n,"$identify")},screen:function(n){return e(n,"$screen")}}},i6=function(){function t(){var e=this;qt(this,t),ke(this,"_hasSeenPageView",!1),ke(this,"_updateScrollData",function(){var n,r,i,s;e._pageViewData||(e._pageViewData=e._createPageViewData());var o=e._pageViewData,a=e._scrollY(),l=e._scrollHeight(),c=e._contentY(),u=e._contentHeight();o.lastScrollY=a,o.maxScrollY=Math.max(a,(n=o.maxScrollY)!==null&&n!==void 0?n:0),o.maxScrollHeight=Math.max(l,(r=o.maxScrollHeight)!==null&&r!==void 0?r:0),o.lastContentY=c,o.maxContentY=Math.max(c,(i=o.maxContentY)!==null&&i!==void 0?i:0),o.maxContentHeight=Math.max(u,(s=o.maxContentHeight)!==null&&s!==void 0?s:0)})}return Yt(t,[{key:"_createPageViewData",value:function(){var e;return{pathname:(e=G==null?void 0:G.location.pathname)!==null&&e!==void 0?e:""}}},{key:"doPageView",value:function(){var e,n;return this._hasSeenPageView?(n=this._pageViewData,this._pageViewData=this._createPageViewData()):(this._hasSeenPageView=!0,n=void 0,this._pageViewData||(this._pageViewData=this._createPageViewData())),setTimeout(this._updateScrollData,0),Ne({$prev_pageview_pathname:(e=n)===null||e===void 0?void 0:e.pathname},this._calculatePrevPageScrollProperties(n))}},{key:"doPageLeave",value:function(){var e=this._pageViewData;return Ne({$prev_pageview_pathname:e==null?void 0:e.pathname},this._calculatePrevPageScrollProperties(e))}},{key:"_calculatePrevPageScrollProperties",value:function(e){if(!e||e.maxScrollHeight==null||e.lastScrollY==null||e.maxScrollY==null||e.maxContentHeight==null||e.lastContentY==null||e.maxContentY==null)return{};var n=e.maxScrollHeight,r=e.lastScrollY,i=e.maxScrollY,s=e.maxContentHeight,o=e.lastContentY,a=e.maxContentY;return n=Math.ceil(n),r=Math.ceil(r),i=Math.ceil(i),s=Math.ceil(s),o=Math.ceil(o),a=Math.ceil(a),{$prev_pageview_last_scroll:r,$prev_pageview_last_scroll_percentage:n<=1?1:Eh(r/n,0,1),$prev_pageview_max_scroll:i,$prev_pageview_max_scroll_percentage:n<=1?1:Eh(i/n,0,1),$prev_pageview_last_content:o,$prev_pageview_last_content_percentage:s<=1?1:Eh(o/s,0,1),$prev_pageview_max_content:a,$prev_pageview_max_content_percentage:s<=1?1:Eh(a/s,0,1)}}},{key:"startMeasuringScrollPosition",value:function(){G==null||G.addEventListener("scroll",this._updateScrollData),G==null||G.addEventListener("scrollend",this._updateScrollData),G==null||G.addEventListener("resize",this._updateScrollData)}},{key:"stopMeasuringScrollPosition",value:function(){G==null||G.removeEventListener("scroll",this._updateScrollData),G==null||G.removeEventListener("scrollend",this._updateScrollData),G==null||G.removeEventListener("resize",this._updateScrollData)}},{key:"_scrollHeight",value:function(){return G?Math.max(0,G.document.documentElement.scrollHeight-G.document.documentElement.clientHeight):0}},{key:"_scrollY",value:function(){return G&&(G.scrollY||G.pageYOffset||G.document.documentElement.scrollTop)||0}},{key:"_contentHeight",value:function(){return(G==null?void 0:G.document.documentElement.scrollHeight)||0}},{key:"_contentY",value:function(){var e=(G==null?void 0:G.document.documentElement.clientHeight)||0;return this._scrollY()+e}}]),t}();function Eh(t,e,n){return Math.max(e,Math.min(t,n))}var Vd,Y1,bn,s6={icontains:function(t){return!!G&&G.location.href.toLowerCase().indexOf(t.toLowerCase())>-1},regex:function(t){return!!G&&p5(G.location.href,t)},exact:function(t){return(G==null?void 0:G.location.href)===t}},o6=function(){function t(e){qt(this,t),this.instance=e}return Yt(t,[{key:"getSurveys",value:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.instance.get_property(aw);if(i&&!r)return e(i);this.instance._send_request("".concat(this.instance.config.api_host,"/api/surveys/?token=").concat(this.instance.config.token),{},{method:"GET"},function(s){var o,a=s.surveys||[];return(o=n.instance.persistence)===null||o===void 0||o.register(ke({},aw,a)),e(a)})}},{key:"getActiveMatchingSurveys",value:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.getSurveys(function(i){var s=i.filter(function(o){return!(!o.start_date||o.end_date)}).filter(function(o){var a,l,c,u;if(!o.conditions)return!0;var d=(a=o.conditions)===null||a===void 0||!a.url||s6[(l=(c=o.conditions)===null||c===void 0?void 0:c.urlMatchType)!==null&&l!==void 0?l:"icontains"](o.conditions.url),f=(u=o.conditions)===null||u===void 0||!u.selector||(Te==null?void 0:Te.querySelector(o.conditions.selector));return d&&f}).filter(function(o){if(!o.linked_flag_key&&!o.targeting_flag_key)return!0;var a=!o.linked_flag_key||n.instance.featureFlags.isFeatureEnabled(o.linked_flag_key),l=!o.targeting_flag_key||n.instance.featureFlags.isFeatureEnabled(o.targeting_flag_key);return a&&l});return e(s)},r)}}]),t}(),a6=6e4,l6=function(){function t(){var e=this;qt(this,t),ke(this,"limits",{}),ke(this,"checkForLimiting",function(n){try{var r=n.responseText;if(!r||!r.length)return;(JSON.parse(r).quota_limited||[]).forEach(function(i){fe.info("[RateLimiter] ".concat(i||"events"," is quota limited.")),e.limits[i]=new Date().getTime()+a6})}catch(i){return void fe.error(i)}})}return Yt(t,[{key:"isRateLimited",value:function(e){var n=this.limits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}}]),t}(),c6=function(){return Ne({initialPathName:(G==null?void 0:G.location.pathname)||"",referringDomain:tn.referringDomain()},tn.campaignParams())},u6=function(){function t(e,n,r){var i=this;qt(this,t),ke(this,"_onSessionIdCallback",function(s){var o=i._getStoredProps();if(!o||o.sessionId!==s){var a={sessionId:s,props:i._sessionSourceParamGenerator()};i._persistence.register(ke({},uw,a))}}),this._sessionIdManager=e,this._persistence=n,this._sessionSourceParamGenerator=r||c6,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}return Yt(t,[{key:"_getStoredProps",value:function(){return this._persistence.props[uw]}},{key:"getSessionProps",value:function(){var e,n=(e=this._getStoredProps())===null||e===void 0?void 0:e.props;return n?{$client_session_initial_referring_host:n.referringDomain,$client_session_initial_pathname:n.initialPathName,$client_session_initial_utm_source:n.utm_source,$client_session_initial_utm_campaign:n.utm_campaign,$client_session_initial_utm_medium:n.utm_medium,$client_session_initial_utm_content:n.utm_content,$client_session_initial_utm_term:n.utm_term}:{}}}]),t}(),d6=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"],O_=function(t,e){if(!t)return!1;var n=t.toLowerCase();return d6.concat(e||[]).some(function(r){var i=r.toLowerCase();return n.includes?n.includes(i):n.indexOf(i)!==-1})};(function(t){t[t.INIT_MODULE=0]="INIT_MODULE",t[t.INIT_SNIPPET=1]="INIT_SNIPPET"})(Vd||(Vd={}));var pw=function(){},Ah={},hr="posthog",jp=(G==null?void 0:G.XMLHttpRequest)&&"withCredentials"in new XMLHttpRequest,c$=!jp&&(Vt==null?void 0:Vt.indexOf("MSIE"))===-1&&(Vt==null?void 0:Vt.indexOf("Mozilla"))===-1,N_=function(){var t,e,n;return{api_host:"https://app.posthog.com",api_method:"POST",api_transport:"XHR",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(e=Te==null?void 0:Te.location,n=e==null?void 0:e.hostname,!!Ur(n)&&n.split(".").slice(-2).join(".")!=="herokuapp.com"),persistence:"localStorage+cookie",persistence_name:"",cookie_name:"",loaded:pw,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:!0,debug:!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_cookie:!1,enable_recording_console_log:void 0,secure_cookie:(G==null||(t=G.location)===null||t===void 0?void 0:t.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_blacklist:[],respect_dnt:!1,sanitize_properties:null,xhr_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,on_xhr_error:function(r){var i="Bad HTTP status: "+r.status+" "+r.statusText;fe.error(i)},get_device_id:function(r){return r},_onCapture:pw,capture_performance:void 0,name:"posthog",callback_fn:"posthog._jsc",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800}},mw=function(t,e,n,r){var i,s=n!==hr&&bn?n?bn[n]:void 0:bn,o={initComplete:!1,syncCode:!1},a=function(l){return function(c){o[l]||(o[l]=!0,o.initComplete&&o.syncCode&&(r==null||r(c)))}};if(s&&Y1===Vd.INIT_MODULE)i=s;else{if(s&&!hn(s))return void fe.error("You have already initialized "+n);i=new J1}return i._init(t,e,n,a("initComplete")),i.toolbar.maybeLoadToolbar(),i.sessionRecording=new A5(i),i.sessionRecording.startRecordingIfEnabled(),i.config.__preview_measure_pageview_stats&&i.pageViewManager.startMeasuringScrollPosition(),i.__autocapture=i.config.autocapture,Io._setIsAutocaptureEnabled(i),Io._isAutocaptureEnabled&&(i.__autocapture=i.config.autocapture,Io.enabledForProject(i.config.token,100,100)?Io.isBrowserSupported()?Io.init(i):(i.__autocapture=!1,fe.info("Disabling Automatic Event Collection because this browser is not supported")):(i.__autocapture=!1,fe.info("Not in active bucket: disabling Automatic Event Collection."))),vl.DEBUG=vl.DEBUG||i.config.debug,!tt(s)&&hn(s)&&(i._execute_array.call(i.people,s.people),i._execute_array(s)),a("syncCode")(i),i},f6=function(){function t(){qt(this,t),ke(this,"__forceAllowLocalhost",!1)}return Yt(t,[{key:"_forceAllowLocalhost",get:function(){return this.__forceAllowLocalhost},set:function(e){fe.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}]),t}(),J1=function(){function t(){var e=this;qt(this,t),ke(this,"webPerformance",new f6),this.config=N_(),this.compression={},this.decideEndpointWasHit=!1,this.SentryIntegration=n6,this.segmentIntegration=function(){return r6(e)},this.__captureHooks=[],this.__request_queue=[],this.__loaded=!1,this.__loaded_recorder_version=void 0,this.__autocapture=void 0,this._jsc=function(){},this.analyticsDefaultEndpoint="/e/",this.elementsChainAsString=!1,this.featureFlags=new n5(this),this.toolbar=new N5(this),this.pageViewManager=new i6,this.surveys=new o6(this),this.rateLimiter=new l6,this.people={set:function(n,r,i){var s=Ur(n)?ke({},n,r):n;e.setPersonProperties(s),i==null||i({})},set_once:function(n,r,i){var s=Ur(n)?ke({},n,r):n;e.setPersonProperties(void 0,s),i==null||i({})}}}return Yt(t,[{key:"init",value:function(e,n,r){if(tt(r))fe.critical("You must name your new library: init(token, config, name)");else{if(r!==hr){var i=mw(e,n,r,function(s){bn[r]=s,s._loaded()});return bn[r]=i,i}fe.critical("You must initialize the main posthog object right after you include the PostHog js snippet")}}},{key:"_init",value:function(e){var n,r,i,s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;this.__loaded=!0,this.config={},this._triggered_notifs=[];var c,u={segmentRegister:!1,syncCode:!1},d=function(_){return function(){u[_]||(u[_]=!0,u.segmentRegister&&u.syncCode&&(l==null||l(s)))}};if(this.set_config(yn({},N_(),o,{name:a,token:e,callback_fn:(a===hr?a:hr+"."+a)+"._jsc"})),this._jsc=function(){},(G!=null&&(n=G.rrweb)!==null&&n!==void 0&&n.record||G!=null&&G.rrwebRecord)&&(this.__loaded_recorder_version=G==null||(c=G.rrweb)===null||c===void 0?void 0:c.version),this.persistence=new x_(this.config),this._requestQueue=new B5(this._handle_queued_event.bind(this)),this._retryQueue=new Q5(this.config.on_xhr_error,this.rateLimiter),this.__captureHooks=[],this.__request_queue=[],this.sessionManager=new t6(this.config,this.persistence),this.sessionPropsManager=new u6(this.sessionManager,this.persistence),this.sessionPersistence=this.config.persistence==="sessionStorage"?this.persistence:new x_(Ne(Ne({},this.config),{},{persistence:"sessionStorage"})),this._gdpr_init(),o.segment?(this.config.get_device_id=function(){return o.segment.user().anonymousId()},o.segment.user().id()&&(this.register({distinct_id:o.segment.user().id()}),this.persistence.set_user_state("identified")),o.segment.register(this.segmentIntegration()).then(d("segmentRegister"))):d("segmentRegister")(),((r=o.bootstrap)===null||r===void 0?void 0:r.distinctID)!==void 0){var f,h,p=this.config.get_device_id(el()),m=(f=o.bootstrap)!==null&&f!==void 0&&f.isIdentifiedID?p:o.bootstrap.distinctID;this.persistence.set_user_state((h=o.bootstrap)!==null&&h!==void 0&&h.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:o.bootstrap.distinctID,$device_id:m})}if(this._hasBootstrappedFeatureFlags()){var w,v,y=Object.keys(((w=o.bootstrap)===null||w===void 0?void 0:w.featureFlags)||{}).filter(function(_){var P,A;return!((P=o.bootstrap)===null||P===void 0||(A=P.featureFlags)===null||A===void 0||!A[_])}).reduce(function(_,P){var A,C;return _[P]=((A=o.bootstrap)===null||A===void 0||(C=A.featureFlags)===null||C===void 0?void 0:C[P])||!1,_},{}),x=Object.keys(((v=o.bootstrap)===null||v===void 0?void 0:v.featureFlagPayloads)||{}).filter(function(_){return y[_]}).reduce(function(_,P){var A,C,N,R;return(A=o.bootstrap)!==null&&A!==void 0&&(C=A.featureFlagPayloads)!==null&&C!==void 0&&C[P]&&(_[P]=(N=o.bootstrap)===null||N===void 0||(R=N.featureFlagPayloads)===null||R===void 0?void 0:R[P]),_},{});this.featureFlags.receivedFeatureFlags({featureFlags:y,featureFlagPayloads:x})}if(!this.get_distinct_id()){var k=this.config.get_device_id(el());this.register_once({distinct_id:k,$device_id:k},""),this.persistence.set_user_state("anonymous")}G==null||(i=G.addEventListener)===null||i===void 0||i.call(G,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),d("syncCode")()}},{key:"_afterDecideResponse",value:function(e){var n;if(this.compression={},e.supportedCompression&&!this.config.disable_compression){var r,i={},s=gl(e.supportedCompression);try{for(s.s();!(r=s.n()).done;)i[r.value]=!0}catch(o){s.e(o)}finally{s.f()}this.compression=i}(n=e.analytics)!==null&&n!==void 0&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),e.elementsChainAsString&&(this.elementsChainAsString=e.elementsChainAsString)}},{key:"_loaded",value:function(){var e=this.config.advanced_disable_decide;e||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(n){fe.critical("`loaded` function failed",n)}this._start_queue_if_opted_in(),this.config.capture_pageview&&Te&&this.capture("$pageview",{title:Te.title},{send_instantly:!0}),e||(new P5(this).call(),this.featureFlags.resetRequestQueue())}},{key:"_start_queue_if_opted_in",value:function(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this._requestQueue)===null||e===void 0||e.poll())}},{key:"_dom_loaded",value:function(){var e=this;this.has_opted_out_capturing()||Cc(this.__request_queue,function(n){e._send_request.apply(e,tw(n))}),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_prepare_callback",value:function(e,n){if(tt(e))return null;if(jp)return function(o){e(o,n)};var r=this._jsc,i=""+Math.floor(1e8*Math.random()),s=this.config.callback_fn+"["+i+"]";return r[i]=function(o){delete r[i],e(o,n)},s}},{key:"_handle_unload",value:function(){var e,n;this.config.request_batching?(this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave"),(e=this._requestQueue)===null||e===void 0||e.unload(),(n=this._retryQueue)===null||n===void 0||n.unload()):this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave",null,{transport:"sendBeacon"})}},{key:"_handle_queued_event",value:function(e,n,r){var i=JSON.stringify(n);this.__compress_and_send_json_request(e,i,r||Ah,pw)}},{key:"__compress_and_send_json_request",value:function(e,n,r,i){var s=function(c,u,d){return c===Ka.GZipJS?[Y5(J5(u),{mtime:0}),Ne(Ne({},d),{},{blob:!0,urlQueryArgs:{compression:Ka.GZipJS}})]:[{data:V1(u)},d]}(this.compression[Ka.GZipJS]?Ka.GZipJS:Ka.Base64,n,r),o=Oi(s,2),a=o[0],l=o[1];this._send_request(e,a,l,i)}},{key:"_send_request",value:function(e,n,r,i){if(this.__loaded&&this._retryQueue&&!this.rateLimiter.isRateLimited(r._batchKey))if(c$)this.__request_queue.push([e,n,r,i]);else{var s={method:this.config.api_method,transport:this.config.api_transport,verbose:this.config.verbose};r=yn(s,r||{}),jp||(r.method="GET");var o=G&&"sendBeacon"in G.navigator&&r.transport==="sendBeacon";if(e=a$(e,r.urlQueryArgs||{},{ip:this.config.ip}),o)try{G==null||G.navigator.sendBeacon(e,q1(n,Ne(Ne({},r),{},{sendBeacon:!0})))}catch{}else if(jp||!Te)try{l$({url:e,data:n,headers:this.config.xhr_headers,options:r,callback:i,retriesPerformedSoFar:0,retryQueue:this._retryQueue,onXHRError:this.config.on_xhr_error,onResponse:this.rateLimiter.checkForLimiting})}catch(u){fe.error(u)}else{var a,l=Te.createElement("script");l.type="text/javascript",l.async=!0,l.defer=!0,l.src=e;var c=Te.getElementsByTagName("script")[0];(a=c.parentNode)===null||a===void 0||a.insertBefore(l,c)}}}},{key:"_execute_array",value:function(e){var n,r=this,i=[],s=[],o=[];Cc(e,function(l){l&&(n=l[0],hn(n)?o.push(l):Bi(l)?l.call(r):hn(l)&&n==="alias"?i.push(l):hn(l)&&n.indexOf("capture")!==-1&&Bi(r[n])?o.push(l):s.push(l))});var a=function(l,c){Cc(l,function(u){if(hn(u[0])){var d=c;yt(u,function(f){d=d[f[0]].apply(d,f.slice(1))})}else this[u[0]].apply(this,u.slice(1))},c)};a(i,this),a(s,this),a(o,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var e,n;return((e=this.config.bootstrap)===null||e===void 0?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)===null||n===void 0?void 0:n.featureFlags).length>0||!1}},{key:"push",value:function(e){this._execute_array([e])}},{key:"capture",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ah;if(!this.__loaded||!this.sessionPersistence||!this._requestQueue)return fe.uninitializedWarning("posthog.capture");if(!function(u){var d=!1;try{var f=u.config.token,h=u.config.respect_dnt,p=u.config.opt_out_capturing_persistence_type,m=u.config.opt_out_capturing_cookie_prefix||void 0,w=u.config.window;f&&(d=C_(f,{respectDnt:h,persistenceType:p,persistencePrefix:m,window:w}))}catch(v){fe.error("Unexpected error when checking capturing opt-out status: "+v)}return d}(this)){var i=(r=r||Ah).transport;if(i&&(r.transport=i),!tt(e)&&Ur(e)){if(!Vt||this.config.opt_out_useragent_filter||!O_(Vt,this.config.custom_blocked_useragents)){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info();var s={uuid:el(),event:e,properties:this._calculate_event_properties(e,n||{})};e==="$identify"&&(s.$set=r.$set,s.$set_once=r.$set_once),(s=YL(s,r._noTruncate?null:this.config.properties_string_max_length)).timestamp=r.timestamp||new Date;var o=Ne(Ne({},s.properties.$set),s.$set);XL(o)||this.setPersonPropertiesForFlags(o),fe.info("send",s);var a=JSON.stringify(s),l=this.config.api_host+(r.endpoint||this.analyticsDefaultEndpoint),c=r!==Ah;return!this.config.request_batching||c&&!r._batchKey||r.send_instantly?this.__compress_and_send_json_request(l,a,r):this._requestQueue.enqueue(l,s,r),this._invokeCaptureHooks(e,s),s}}else fe.error("No event name provided to posthog.capture")}}},{key:"_addCaptureHook",value:function(e){this.__captureHooks.push(e)}},{key:"_invokeCaptureHooks",value:function(e,n){this.config._onCapture(e,n),yt(this.__captureHooks,function(r){return r(e)})}},{key:"_calculate_event_properties",value:function(e,n){if(!this.persistence||!this.sessionPersistence)return n;var r=this.persistence.remove_event_timer(e),i=Ne({},n);if(i.token=this.config.token,e==="$snapshot"){var s=Ne(Ne({},this.persistence.properties()),this.sessionPersistence.properties());return i.distinct_id=s.distinct_id,i}var o=tn.properties();if(this.sessionManager){var a=this.sessionManager.checkAndGetSessionAndWindowId(),l=a.sessionId,c=a.windowId;i.$session_id=l,i.$window_id=c}if(this.sessionPropsManager&&this.config.__preview_send_client_session_params&&(e==="$pageview"||e==="$pageleave"||e==="$autocapture")){var u=this.sessionPropsManager.getSessionProps();i=yn(i,u)}if(this.config.__preview_measure_pageview_stats){var d={};e==="$pageview"?d=this.pageViewManager.doPageView():e==="$pageleave"&&(d=this.pageViewManager.doPageLeave()),i=yn(i,d)}if(e==="$pageview"&&Te&&(i.title=Te.title),e==="$performance_event"){var f=this.persistence.properties();return i.distinct_id=f.distinct_id,i.$current_url=o.$current_url,i}if(!tt(r)){var h=new Date().getTime()-r;i.$duration=parseFloat((h/1e3).toFixed(3))}Vt&&this.config.opt_out_useragent_filter&&(i.$browser_type=O_(Vt,this.config.custom_blocked_useragents)?"bot":"browser"),i=yn({},tn.properties(),this.persistence.properties(),this.sessionPersistence.properties(),i);var p=this.config.property_blacklist;hn(p)?yt(p,function(w){delete i[w]}):fe.error("Invalid value for property_blacklist config: "+p);var m=this.config.sanitize_properties;return m&&(i=m(i,e)),i}},{key:"register",value:function(e,n){var r;(r=this.persistence)===null||r===void 0||r.register(e,n)}},{key:"register_once",value:function(e,n,r){var i;(i=this.persistence)===null||i===void 0||i.register_once(e,n,r)}},{key:"register_for_session",value:function(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.register(e)}},{key:"unregister",value:function(e){var n;(n=this.persistence)===null||n===void 0||n.unregister(e)}},{key:"unregister_for_session",value:function(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.unregister(e)}},{key:"_register_single",value:function(e,n){this.register(ke({},e,n))}},{key:"getFeatureFlag",value:function(e,n){return this.featureFlags.getFeatureFlag(e,n)}},{key:"getFeatureFlagPayload",value:function(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}},{key:"isFeatureEnabled",value:function(e,n){return this.featureFlags.isFeatureEnabled(e,n)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}},{key:"getEarlyAccessFeatures",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,n)}},{key:"onFeatureFlags",value:function(e){return this.featureFlags.onFeatureFlags(e)}},{key:"onSessionId",value:function(e){var n,r;return(n=(r=this.sessionManager)===null||r===void 0?void 0:r.onSessionId(e))!==null&&n!==void 0?n:function(){}}},{key:"getSurveys",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getSurveys(e,n)}},{key:"getActiveMatchingSurveys",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getActiveMatchingSurveys(e,n)}},{key:"identify",value:function(e,n,r){if(!this.__loaded||!this.persistence)return fe.uninitializedWarning("posthog.identify");if(e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))fe.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else{var i=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==i&&e!==this.get_property(Lp)&&(this.unregister(Lp),this.register({distinct_id:e}));var o=this.persistence.get_user_state()==="anonymous";e!==i&&o?(this.persistence.set_user_state("identified"),this.setPersonPropertiesForFlags(n||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:i},{$set:n||{},$set_once:r||{}}),this.featureFlags.setAnonymousDistinctId(i)):(n||r)&&this.setPersonProperties(n,r),e!==i&&(this.reloadFeatureFlags(),this.unregister(Cm))}else fe.error("Unique user id has not been set in posthog.identify")}},{key:"setPersonProperties",value:function(e,n){(e||n)&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:n||{}}))}},{key:"group",value:function(e,n,r){if(e&&n){var i=this.getGroups();i[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:Ne(Ne({},i),{},ke({},e,n))}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:r}),this.setGroupPropertiesForFlags(ke({},e,r))),i[e]===n||r||this.reloadFeatureFlags()}else fe.error("posthog.group requires a group type and group key")}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}},{key:"setPersonPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.featureFlags.setPersonPropertiesForFlags(e,n)}},{key:"resetPersonPropertiesForFlags",value:function(){this.featureFlags.resetPersonPropertiesForFlags()}},{key:"setGroupPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.featureFlags.setGroupPropertiesForFlags(e,n)}},{key:"resetGroupPropertiesForFlags",value:function(e){this.featureFlags.resetGroupPropertiesForFlags(e)}},{key:"reset",value:function(e){var n,r,i,s;if(!this.__loaded)return fe.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");(n=this.persistence)===null||n===void 0||n.clear(),(r=this.sessionPersistence)===null||r===void 0||r.clear(),(i=this.persistence)===null||i===void 0||i.set_user_state("anonymous"),(s=this.sessionManager)===null||s===void 0||s.resetSessionId();var a=this.config.get_device_id(el());this.register_once({distinct_id:a,$device_id:e?a:o},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"get_session_id",value:function(){var e,n;return(e=(n=this.sessionManager)===null||n===void 0?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}},{key:"get_session_replay_url",value:function(e){if(!this.sessionManager)return"";var n=this.config.ui_host||this.config.api_host,r=this.sessionManager.checkAndGetSessionAndWindowId(!0),i=r.sessionId,s=r.sessionStartTimestamp,o=n+"/replay/"+i;if(e!=null&&e.withTimestamp&&s){var a,l=(a=e.timestampLookBack)!==null&&a!==void 0?a:10;if(!s)return o;var c=Math.max(Math.floor((new Date().getTime()-s)/1e3)-l,0);o+="?t=".concat(c)}return o}},{key:"alias",value:function(e,n){return e===this.get_property(qP)?(fe.critical("Attempting to create alias for existing People user - aborting."),-2):(tt(n)&&(n=this.get_distinct_id()),e!==n?(this._register_single(Lp,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(fe.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1))}},{key:"set_config",value:function(e){var n,r,i=Ne({},this.config);na(e)&&(yn(this.config,e),this.config.persistence_name||(this.config.persistence_name=this.config.cookie_name),this.config.disable_persistence||(this.config.disable_persistence=this.config.disable_cookie),this.config.api_host=this.config.api_host.replace(/\/$/,""),(n=this.persistence)===null||n===void 0||n.update_config(this.config),(r=this.sessionPersistence)===null||r===void 0||r.update_config(this.config),Jt.is_supported()&&Jt.get("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(vl.DEBUG=!0),this.sessionRecording&&!tt(e.disable_session_recording)&&i.disable_session_recording!==e.disable_session_recording&&(e.disable_session_recording?this.sessionRecording.stopRecording():this.sessionRecording.startRecordingIfEnabled()))}},{key:"startSessionRecording",value:function(){this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var e;return!((e=this.sessionRecording)===null||e===void 0||!e.started)}},{key:"loadToolbar",value:function(e){return this.toolbar.loadToolbar(e)}},{key:"get_property",value:function(e){var n;return(n=this.persistence)===null||n===void 0?void 0:n.props[e]}},{key:"getSessionProperty",value:function(e){var n;return(n=this.sessionPersistence)===null||n===void 0?void 0:n.props[e]}},{key:"toString",value:function(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:hr;return n!==hr&&(n=hr+"."+n),n}},{key:"_gdpr_init",value:function(){this.config.opt_out_capturing_persistence_type==="localStorage"&&Jt.is_supported()&&(!this.has_opted_in_capturing()&&this.has_opted_in_capturing({persistence_type:"cookie"})&&this.opt_in_capturing({enable_persistence:!1}),!this.has_opted_out_capturing()&&this.has_opted_out_capturing({persistence_type:"cookie"})&&this.opt_out_capturing({clear_persistence:!1}),this.clear_opt_in_out_capturing({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_capturing()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_capturing()||!this.config.opt_out_capturing_by_default&&!Ss.get("ph_optout")||(Ss.remove("ph_optout"),this.opt_out_capturing({clear_persistence:this.config.opt_out_persistence_by_default}))}},{key:"_gdpr_update_persistence",value:function(e){var n,r,i,s,o;if(e&&e.clear_persistence)i=!0;else{if(!e||!e.enable_persistence)return;i=!1}this.config.disable_persistence||((n=this.persistence)===null||n===void 0?void 0:n.disabled)===i||(s=this.persistence)===null||s===void 0||s.set_disabled(i),this.config.disable_persistence||((r=this.sessionPersistence)===null||r===void 0?void 0:r.disabled)===i||(o=this.sessionPersistence)===null||o===void 0||o.set_disabled(i)}},{key:"_gdpr_call_func",value:function(e,n){return n=yn({capture:this.capture.bind(this),persistence_type:this.config.opt_out_capturing_persistence_type,cookie_prefix:this.config.opt_out_capturing_cookie_prefix,cookie_expiration:this.config.cookie_expiration,cross_subdomain_cookie:this.config.cross_subdomain_cookie,secure_cookie:this.config.secure_cookie},n||{}),Jt.is_supported()||n.persistence_type!=="localStorage"||(n.persistence_type="cookie"),e(this.config.token,{capture:n.capture,captureEventName:n.capture_event_name,captureProperties:n.capture_properties,persistenceType:n.persistence_type,persistencePrefix:n.cookie_prefix,cookieExpiration:n.cookie_expiration,crossSubdomainCookie:n.cross_subdomain_cookie,secureCookie:n.secure_cookie})}},{key:"opt_in_capturing",value:function(e){e=yn({enable_persistence:!0},e||{}),this._gdpr_call_func(M5,e),this._gdpr_update_persistence(e)}},{key:"opt_out_capturing",value:function(e){var n=yn({clear_persistence:!0},e||{});this._gdpr_call_func(D5,n),this._gdpr_update_persistence(n)}},{key:"has_opted_in_capturing",value:function(e){return this._gdpr_call_func(I5,e)}},{key:"has_opted_out_capturing",value:function(e){return this._gdpr_call_func(C_,e)}},{key:"clear_opt_in_out_capturing",value:function(e){var n=yn({enable_persistence:!0},e??{});this._gdpr_call_func(L5,n),this._gdpr_update_persistence(n)}},{key:"debug",value:function(e){e===!1?(G==null||G.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(G==null||G.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}]),t}();(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=WP(t.prototype[e[n]])})(J1,["identify"]);var R_,M_,Ao={},h6=function(){bn.init=function(t,e,n){if(n)return bn[n]||(bn[n]=Ao[n]=mw(t||"",e||{},n,function(i){bn[n]=Ao[n]=i,i._loaded()})),bn[n];var r=bn;return Ao[hr]?r=Ao[hr]:t&&(r=mw(t,e||{},hr,function(i){Ao[hr]=i,i._loaded()}),Ao[hr]=r),bn=r,Y1===Vd.INIT_SNIPPET&&(jn[hr]=bn),yt(Ao,function(i,s){s!==hr&&(bn[s]=i)}),r}},p6=function(){function t(){t.done||(t.done=!0,c$=!1,yt(Ao,function(e){e._dom_loaded()}))}Te!=null&&Te.addEventListener&&(Te.readyState==="complete"?t():Te.addEventListener("DOMContentLoaded",t,!1)),G&&bd(G,"load",t,!0)};(function(t){t.Popover="popover",t.API="api",t.Widget="widget"})(R_||(R_={})),function(t){t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link"}(M_||(M_={}));var Ec=(Y1=Vd.INIT_MODULE,bn=new J1,h6(),bn.init(),p6(),bn),m6=g.createContext({client:Ec});function g6(t){var e=t.children,n=t.client,r=t.apiKey,i=t.options,s=g.useMemo(function(){return n&&r&&console.warn("[PostHog.js] You have provided both a client and an apiKey to PostHogProvider. The apiKey will be ignored in favour of the client."),n&&i&&console.warn("[PostHog.js] You have provided both a client and options to PostHogProvider. The options will be ignored in favour of the client."),n||(r&&(Ec.__loaded&&console.warn("[PostHog.js] was already loaded elsewhere. This may cause issues."),Ec.init(r,i)),Ec)},[n,r]);return Ht.createElement(m6.Provider,{value:{client:s}},e)}var gw={},u$={exports:{}},Xr={},d$={exports:{}},f$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,j){var Z=W.length;W.push(j);e:for(;0<Z;){var K=Z-1>>>1,Q=W[K];if(0<i(Q,j))W[K]=j,W[Z]=Q,Z=K;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var j=W[0],Z=W.pop();if(Z!==j){W[0]=Z;e:for(var K=0,Q=W.length,ae=Q>>>1;K<ae;){var B=2*(K+1)-1,I=W[B],z=B+1,S=W[z];if(0>i(I,Z))z<Q&&0>i(S,I)?(W[K]=S,W[z]=Z,K=z):(W[K]=I,W[B]=Z,K=B);else if(z<Q&&0>i(S,Z))W[K]=S,W[z]=Z,K=z;else break e}}return j}function i(W,j){var Z=W.sortIndex-j.sortIndex;return Z!==0?Z:W.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(W){for(var j=n(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=W)r(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function k(W){if(m=!1,x(W),!p)if(n(l)!==null)p=!0,q(_);else{var j=n(c);j!==null&&te(k,j.startTime-W)}}function _(W,j){p=!1,m&&(m=!1,v(C),C=-1),h=!0;var Z=f;try{for(x(j),d=n(l);d!==null&&(!(d.expirationTime>j)||W&&!M());){var K=d.callback;if(typeof K=="function"){d.callback=null,f=d.priorityLevel;var Q=K(d.expirationTime<=j);j=t.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(l)&&r(l),x(j)}else r(l);d=n(l)}if(d!==null)var ae=!0;else{var B=n(c);B!==null&&te(k,B.startTime-j),ae=!1}return ae}finally{d=null,f=Z,h=!1}}var P=!1,A=null,C=-1,N=5,R=-1;function M(){return!(t.unstable_now()-R<N)}function L(){if(A!==null){var W=t.unstable_now();R=W;var j=!0;try{j=A(!0,W)}finally{j?H():(P=!1,A=null)}}else P=!1}var H;if(typeof y=="function")H=function(){y(L)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,V=T.port2;T.port1.onmessage=L,H=function(){V.postMessage(null)}}else H=function(){w(L,0)};function q(W){A=W,P||(P=!0,H())}function te(W,j){C=w(function(){W(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,q(_))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var Z=f;f=j;try{return W()}finally{f=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,j){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Z=f;f=W;try{return j()}finally{f=Z}},t.unstable_scheduleCallback=function(W,j,Z){var K=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?K+Z:K):Z=K,W){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=Z+Q,W={id:u++,callback:j,priorityLevel:W,startTime:Z,expirationTime:Q,sortIndex:-1},Z>K?(W.sortIndex=Z,e(c,W),n(l)===null&&W===n(c)&&(m?(v(C),C=-1):m=!0,te(k,Z-K))):(W.sortIndex=Q,e(l,W),p||h||(p=!0,q(_))),W},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(W){var j=f;return function(){var Z=f;f=j;try{return W.apply(this,arguments)}finally{f=Z}}}})(f$);d$.exports=f$;var v6=d$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h$=g,Gr=v6;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p$=new Set,Hd={};function Il(t,e){Zc(t,e),Zc(t+"Capture",e)}function Zc(t,e){for(Hd[t]=e,t=0;t<e.length;t++)p$.add(e[t])}var ro=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vw=Object.prototype.hasOwnProperty,y6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D_={},I_={};function w6(t){return vw.call(I_,t)?!0:vw.call(D_,t)?!1:y6.test(t)?I_[t]=!0:(D_[t]=!0,!1)}function b6(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function x6(t,e,n,r){if(e===null||typeof e>"u"||b6(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nn[t]=new rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nn[e]=new rr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nn[t]=new rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nn[t]=new rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nn[t]=new rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nn[t]=new rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nn[t]=new rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nn[t]=new rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nn[t]=new rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Z1=/[\-:]([a-z])/g;function Q1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Z1,Q1);Nn[e]=new rr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Z1,Q1);Nn[e]=new rr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Z1,Q1);Nn[e]=new rr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nn[t]=new rr(t,1,!1,t.toLowerCase(),null,!1,!1)});Nn.xlinkHref=new rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nn[t]=new rr(t,1,!1,t.toLowerCase(),null,!0,!0)});function ex(t,e,n,r){var i=Nn.hasOwnProperty(e)?Nn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(x6(e,n,i,r)&&(n=null),r||i===null?w6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var go=h$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ph=Symbol.for("react.element"),cc=Symbol.for("react.portal"),uc=Symbol.for("react.fragment"),tx=Symbol.for("react.strict_mode"),yw=Symbol.for("react.profiler"),m$=Symbol.for("react.provider"),g$=Symbol.for("react.context"),nx=Symbol.for("react.forward_ref"),ww=Symbol.for("react.suspense"),bw=Symbol.for("react.suspense_list"),rx=Symbol.for("react.memo"),To=Symbol.for("react.lazy"),v$=Symbol.for("react.offscreen"),L_=Symbol.iterator;function Bu(t){return t===null||typeof t!="object"?null:(t=L_&&t[L_]||t["@@iterator"],typeof t=="function"?t:null)}var jt=Object.assign,py;function ld(t){if(py===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);py=e&&e[1]||""}return`
`+py+t}var my=!1;function gy(t,e){if(!t||my)return"";my=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{my=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ld(t):""}function S6(t){switch(t.tag){case 5:return ld(t.type);case 16:return ld("Lazy");case 13:return ld("Suspense");case 19:return ld("SuspenseList");case 0:case 2:case 15:return t=gy(t.type,!1),t;case 11:return t=gy(t.type.render,!1),t;case 1:return t=gy(t.type,!0),t;default:return""}}function xw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case uc:return"Fragment";case cc:return"Portal";case yw:return"Profiler";case tx:return"StrictMode";case ww:return"Suspense";case bw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case g$:return(t.displayName||"Context")+".Consumer";case m$:return(t._context.displayName||"Context")+".Provider";case nx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rx:return e=t.displayName||null,e!==null?e:xw(t.type)||"Memo";case To:e=t._payload,t=t._init;try{return xw(t(e))}catch{}}return null}function k6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xw(e);case 8:return e===tx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ma(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function y$(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _6(t){var e=y$(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $h(t){t._valueTracker||(t._valueTracker=_6(t))}function w$(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=y$(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Pm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sw(t,e){var n=e.checked;return jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function B_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ma(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function b$(t,e){e=e.checked,e!=null&&ex(t,"checked",e,!1)}function kw(t,e){b$(t,e);var n=ma(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_w(t,e.type,n):e.hasOwnProperty("defaultValue")&&_w(t,e.type,ma(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function F_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _w(t,e,n){(e!=="number"||Pm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var cd=Array.isArray;function Ac(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ma(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Cw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function j_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(se(92));if(cd(n)){if(1<n.length)throw Error(se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ma(n)}}function x$(t,e){var n=ma(e.value),r=ma(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function z_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function S$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ew(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?S$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Th,k$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Th=Th||document.createElement("div"),Th.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Th.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},C6=["Webkit","ms","Moz","O"];Object.keys(kd).forEach(function(t){C6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kd[e]=kd[t]})});function _$(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kd.hasOwnProperty(t)&&kd[t]?(""+e).trim():e+"px"}function C$(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=_$(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var E6=jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Aw(t,e){if(e){if(E6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function Pw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $w=null;function ix(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tw=null,Pc=null,$c=null;function U_(t){if(t=eh(t)){if(typeof Tw!="function")throw Error(se(280));var e=t.stateNode;e&&(e=tv(e),Tw(t.stateNode,t.type,e))}}function E$(t){Pc?$c?$c.push(t):$c=[t]:Pc=t}function A$(){if(Pc){var t=Pc,e=$c;if($c=Pc=null,U_(t),e)for(t=0;t<e.length;t++)U_(e[t])}}function P$(t,e){return t(e)}function $$(){}var vy=!1;function T$(t,e,n){if(vy)return t(e,n);vy=!0;try{return P$(t,e,n)}finally{vy=!1,(Pc!==null||$c!==null)&&($$(),A$())}}function Gd(t,e){var n=t.stateNode;if(n===null)return null;var r=tv(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(se(231,e,typeof n));return n}var Ow=!1;if(ro)try{var Fu={};Object.defineProperty(Fu,"passive",{get:function(){Ow=!0}}),window.addEventListener("test",Fu,Fu),window.removeEventListener("test",Fu,Fu)}catch{Ow=!1}function A6(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var _d=!1,$m=null,Tm=!1,Nw=null,P6={onError:function(t){_d=!0,$m=t}};function $6(t,e,n,r,i,s,o,a,l){_d=!1,$m=null,A6.apply(P6,arguments)}function T6(t,e,n,r,i,s,o,a,l){if($6.apply(this,arguments),_d){if(_d){var c=$m;_d=!1,$m=null}else throw Error(se(198));Tm||(Tm=!0,Nw=c)}}function Ll(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function O$(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function V_(t){if(Ll(t)!==t)throw Error(se(188))}function O6(t){var e=t.alternate;if(!e){if(e=Ll(t),e===null)throw Error(se(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return V_(i),t;if(s===r)return V_(i),e;s=s.sibling}throw Error(se(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?t:e}function N$(t){return t=O6(t),t!==null?R$(t):null}function R$(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=R$(t);if(e!==null)return e;t=t.sibling}return null}var M$=Gr.unstable_scheduleCallback,H_=Gr.unstable_cancelCallback,N6=Gr.unstable_shouldYield,R6=Gr.unstable_requestPaint,Kt=Gr.unstable_now,M6=Gr.unstable_getCurrentPriorityLevel,sx=Gr.unstable_ImmediatePriority,D$=Gr.unstable_UserBlockingPriority,Om=Gr.unstable_NormalPriority,D6=Gr.unstable_LowPriority,I$=Gr.unstable_IdlePriority,Jg=null,ks=null;function I6(t){if(ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(Jg,t,void 0,(t.current.flags&128)===128)}catch{}}var Fi=Math.clz32?Math.clz32:F6,L6=Math.log,B6=Math.LN2;function F6(t){return t>>>=0,t===0?32:31-(L6(t)/B6|0)|0}var Oh=64,Nh=4194304;function ud(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ud(a):(s&=o,s!==0&&(r=ud(s)))}else o=n&~i,o!==0?r=ud(o):s!==0&&(r=ud(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fi(e),i=1<<n,r|=t[n],e&=~i;return r}function j6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Fi(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=j6(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Rw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function L$(){var t=Oh;return Oh<<=1,!(Oh&4194240)&&(Oh=64),t}function yy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fi(e),t[e]=n}function U6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Fi(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ox(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var dt=0;function B$(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var F$,ax,j$,z$,U$,Mw=!1,Rh=[],ra=null,ia=null,sa=null,Kd=new Map,Xd=new Map,Lo=[],V6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function W_(t,e){switch(t){case"focusin":case"focusout":ra=null;break;case"dragenter":case"dragleave":ia=null;break;case"mouseover":case"mouseout":sa=null;break;case"pointerover":case"pointerout":Kd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xd.delete(e.pointerId)}}function ju(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=eh(e),e!==null&&ax(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function H6(t,e,n,r,i){switch(e){case"focusin":return ra=ju(ra,t,e,n,r,i),!0;case"dragenter":return ia=ju(ia,t,e,n,r,i),!0;case"mouseover":return sa=ju(sa,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Kd.set(s,ju(Kd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Xd.set(s,ju(Xd.get(s)||null,t,e,n,r,i)),!0}return!1}function V$(t){var e=tl(t.target);if(e!==null){var n=Ll(e);if(n!==null){if(e=n.tag,e===13){if(e=O$(n),e!==null){t.blockedOn=e,U$(t.priority,function(){j$(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Dw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$w=r,n.target.dispatchEvent(r),$w=null}else return e=eh(n),e!==null&&ax(e),t.blockedOn=n,!1;e.shift()}return!0}function G_(t,e,n){zp(t)&&n.delete(e)}function W6(){Mw=!1,ra!==null&&zp(ra)&&(ra=null),ia!==null&&zp(ia)&&(ia=null),sa!==null&&zp(sa)&&(sa=null),Kd.forEach(G_),Xd.forEach(G_)}function zu(t,e){t.blockedOn===e&&(t.blockedOn=null,Mw||(Mw=!0,Gr.unstable_scheduleCallback(Gr.unstable_NormalPriority,W6)))}function qd(t){function e(i){return zu(i,t)}if(0<Rh.length){zu(Rh[0],t);for(var n=1;n<Rh.length;n++){var r=Rh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ra!==null&&zu(ra,t),ia!==null&&zu(ia,t),sa!==null&&zu(sa,t),Kd.forEach(e),Xd.forEach(e),n=0;n<Lo.length;n++)r=Lo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Lo.length&&(n=Lo[0],n.blockedOn===null);)V$(n),n.blockedOn===null&&Lo.shift()}var Tc=go.ReactCurrentBatchConfig,Rm=!0;function G6(t,e,n,r){var i=dt,s=Tc.transition;Tc.transition=null;try{dt=1,lx(t,e,n,r)}finally{dt=i,Tc.transition=s}}function K6(t,e,n,r){var i=dt,s=Tc.transition;Tc.transition=null;try{dt=4,lx(t,e,n,r)}finally{dt=i,Tc.transition=s}}function lx(t,e,n,r){if(Rm){var i=Dw(t,e,n,r);if(i===null)Py(t,e,r,Mm,n),W_(t,r);else if(H6(i,t,e,n,r))r.stopPropagation();else if(W_(t,r),e&4&&-1<V6.indexOf(t)){for(;i!==null;){var s=eh(i);if(s!==null&&F$(s),s=Dw(t,e,n,r),s===null&&Py(t,e,r,Mm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Py(t,e,r,null,n)}}var Mm=null;function Dw(t,e,n,r){if(Mm=null,t=ix(r),t=tl(t),t!==null)if(e=Ll(t),e===null)t=null;else if(n=e.tag,n===13){if(t=O$(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Mm=t,null}function H$(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(M6()){case sx:return 1;case D$:return 4;case Om:case D6:return 16;case I$:return 536870912;default:return 16}default:return 16}}var Go=null,cx=null,Up=null;function W$(){if(Up)return Up;var t,e=cx,n=e.length,r,i="value"in Go?Go.value:Go.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Up=i.slice(t,1<r?1-r:void 0)}function Vp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mh(){return!0}function K_(){return!1}function qr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Mh:K_,this.isPropagationStopped=K_,this}return jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mh)},persist:function(){},isPersistent:Mh}),e}var ku={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ux=qr(ku),Qf=jt({},ku,{view:0,detail:0}),X6=qr(Qf),wy,by,Uu,Zg=jt({},Qf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Uu&&(Uu&&t.type==="mousemove"?(wy=t.screenX-Uu.screenX,by=t.screenY-Uu.screenY):by=wy=0,Uu=t),wy)},movementY:function(t){return"movementY"in t?t.movementY:by}}),X_=qr(Zg),q6=jt({},Zg,{dataTransfer:0}),Y6=qr(q6),J6=jt({},Qf,{relatedTarget:0}),xy=qr(J6),Z6=jt({},ku,{animationName:0,elapsedTime:0,pseudoElement:0}),Q6=qr(Z6),e4=jt({},ku,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),t4=qr(e4),n4=jt({},ku,{data:0}),q_=qr(n4),r4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=s4[t])?!!e[t]:!1}function dx(){return o4}var a4=jt({},Qf,{key:function(t){if(t.key){var e=r4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?i4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dx,charCode:function(t){return t.type==="keypress"?Vp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),l4=qr(a4),c4=jt({},Zg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y_=qr(c4),u4=jt({},Qf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dx}),d4=qr(u4),f4=jt({},ku,{propertyName:0,elapsedTime:0,pseudoElement:0}),h4=qr(f4),p4=jt({},Zg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),m4=qr(p4),g4=[9,13,27,32],fx=ro&&"CompositionEvent"in window,Cd=null;ro&&"documentMode"in document&&(Cd=document.documentMode);var v4=ro&&"TextEvent"in window&&!Cd,G$=ro&&(!fx||Cd&&8<Cd&&11>=Cd),J_=" ",Z_=!1;function K$(t,e){switch(t){case"keyup":return g4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X$(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dc=!1;function y4(t,e){switch(t){case"compositionend":return X$(e);case"keypress":return e.which!==32?null:(Z_=!0,J_);case"textInput":return t=e.data,t===J_&&Z_?null:t;default:return null}}function w4(t,e){if(dc)return t==="compositionend"||!fx&&K$(t,e)?(t=W$(),Up=cx=Go=null,dc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return G$&&e.locale!=="ko"?null:e.data;default:return null}}var b4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Q_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!b4[t.type]:e==="textarea"}function q$(t,e,n,r){E$(r),e=Dm(e,"onChange"),0<e.length&&(n=new ux("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ed=null,Yd=null;function x4(t){oT(t,0)}function Qg(t){var e=pc(t);if(w$(e))return t}function S4(t,e){if(t==="change")return e}var Y$=!1;if(ro){var Sy;if(ro){var ky="oninput"in document;if(!ky){var eC=document.createElement("div");eC.setAttribute("oninput","return;"),ky=typeof eC.oninput=="function"}Sy=ky}else Sy=!1;Y$=Sy&&(!document.documentMode||9<document.documentMode)}function tC(){Ed&&(Ed.detachEvent("onpropertychange",J$),Yd=Ed=null)}function J$(t){if(t.propertyName==="value"&&Qg(Yd)){var e=[];q$(e,Yd,t,ix(t)),T$(x4,e)}}function k4(t,e,n){t==="focusin"?(tC(),Ed=e,Yd=n,Ed.attachEvent("onpropertychange",J$)):t==="focusout"&&tC()}function _4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qg(Yd)}function C4(t,e){if(t==="click")return Qg(e)}function E4(t,e){if(t==="input"||t==="change")return Qg(e)}function A4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wi=typeof Object.is=="function"?Object.is:A4;function Jd(t,e){if(Wi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!vw.call(e,i)||!Wi(t[i],e[i]))return!1}return!0}function nC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rC(t,e){var n=nC(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nC(n)}}function Z$(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Z$(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Q$(){for(var t=window,e=Pm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pm(t.document)}return e}function hx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function P4(t){var e=Q$(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Z$(n.ownerDocument.documentElement,n)){if(r!==null&&hx(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=rC(n,s);var o=rC(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $4=ro&&"documentMode"in document&&11>=document.documentMode,fc=null,Iw=null,Ad=null,Lw=!1;function iC(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lw||fc==null||fc!==Pm(r)||(r=fc,"selectionStart"in r&&hx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ad&&Jd(Ad,r)||(Ad=r,r=Dm(Iw,"onSelect"),0<r.length&&(e=new ux("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fc)))}function Dh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hc={animationend:Dh("Animation","AnimationEnd"),animationiteration:Dh("Animation","AnimationIteration"),animationstart:Dh("Animation","AnimationStart"),transitionend:Dh("Transition","TransitionEnd")},_y={},eT={};ro&&(eT=document.createElement("div").style,"AnimationEvent"in window||(delete hc.animationend.animation,delete hc.animationiteration.animation,delete hc.animationstart.animation),"TransitionEvent"in window||delete hc.transitionend.transition);function ev(t){if(_y[t])return _y[t];if(!hc[t])return t;var e=hc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eT)return _y[t]=e[n];return t}var tT=ev("animationend"),nT=ev("animationiteration"),rT=ev("animationstart"),iT=ev("transitionend"),sT=new Map,sC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $a(t,e){sT.set(t,e),Il(e,[t])}for(var Cy=0;Cy<sC.length;Cy++){var Ey=sC[Cy],T4=Ey.toLowerCase(),O4=Ey[0].toUpperCase()+Ey.slice(1);$a(T4,"on"+O4)}$a(tT,"onAnimationEnd");$a(nT,"onAnimationIteration");$a(rT,"onAnimationStart");$a("dblclick","onDoubleClick");$a("focusin","onFocus");$a("focusout","onBlur");$a(iT,"onTransitionEnd");Zc("onMouseEnter",["mouseout","mouseover"]);Zc("onMouseLeave",["mouseout","mouseover"]);Zc("onPointerEnter",["pointerout","pointerover"]);Zc("onPointerLeave",["pointerout","pointerover"]);Il("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Il("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Il("onBeforeInput",["compositionend","keypress","textInput","paste"]);Il("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Il("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Il("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N4=new Set("cancel close invalid load scroll toggle".split(" ").concat(dd));function oC(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,T6(r,e,void 0,t),t.currentTarget=null}function oT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;oC(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;oC(i,a,c),s=l}}}if(Tm)throw t=Nw,Tm=!1,Nw=null,t}function _t(t,e){var n=e[Uw];n===void 0&&(n=e[Uw]=new Set);var r=t+"__bubble";n.has(r)||(aT(e,t,2,!1),n.add(r))}function Ay(t,e,n){var r=0;e&&(r|=4),aT(n,t,r,e)}var Ih="_reactListening"+Math.random().toString(36).slice(2);function Zd(t){if(!t[Ih]){t[Ih]=!0,p$.forEach(function(n){n!=="selectionchange"&&(N4.has(n)||Ay(n,!1,t),Ay(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ih]||(e[Ih]=!0,Ay("selectionchange",!1,e))}}function aT(t,e,n,r){switch(H$(e)){case 1:var i=G6;break;case 4:i=K6;break;default:i=lx}n=i.bind(null,e,n,t),i=void 0,!Ow||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Py(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=tl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}T$(function(){var c=s,u=ix(n),d=[];e:{var f=sT.get(t);if(f!==void 0){var h=ux,p=t;switch(t){case"keypress":if(Vp(n)===0)break e;case"keydown":case"keyup":h=l4;break;case"focusin":p="focus",h=xy;break;case"focusout":p="blur",h=xy;break;case"beforeblur":case"afterblur":h=xy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=X_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Y6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=d4;break;case tT:case nT:case rT:h=Q6;break;case iT:h=h4;break;case"scroll":h=X6;break;case"wheel":h=m4;break;case"copy":case"cut":case"paste":h=t4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Y_}var m=(e&4)!==0,w=!m&&t==="scroll",v=m?f!==null?f+"Capture":null:f;m=[];for(var y=c,x;y!==null;){x=y;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,v!==null&&(k=Gd(y,v),k!=null&&m.push(Qd(y,k,x)))),w)break;y=y.return}0<m.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==$w&&(p=n.relatedTarget||n.fromElement)&&(tl(p)||p[io]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?tl(p):null,p!==null&&(w=Ll(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(m=X_,k="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=Y_,k="onPointerLeave",v="onPointerEnter",y="pointer"),w=h==null?f:pc(h),x=p==null?f:pc(p),f=new m(k,y+"leave",h,n,u),f.target=w,f.relatedTarget=x,k=null,tl(u)===c&&(m=new m(v,y+"enter",p,n,u),m.target=x,m.relatedTarget=w,k=m),w=k,h&&p)t:{for(m=h,v=p,y=0,x=m;x;x=Vl(x))y++;for(x=0,k=v;k;k=Vl(k))x++;for(;0<y-x;)m=Vl(m),y--;for(;0<x-y;)v=Vl(v),x--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=Vl(m),v=Vl(v)}m=null}else m=null;h!==null&&aC(d,f,h,m,!1),p!==null&&w!==null&&aC(d,w,p,m,!0)}}e:{if(f=c?pc(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var _=S4;else if(Q_(f))if(Y$)_=E4;else{_=_4;var P=k4}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=C4);if(_&&(_=_(t,c))){q$(d,_,n,u);break e}P&&P(t,f,c),t==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&_w(f,"number",f.value)}switch(P=c?pc(c):window,t){case"focusin":(Q_(P)||P.contentEditable==="true")&&(fc=P,Iw=c,Ad=null);break;case"focusout":Ad=Iw=fc=null;break;case"mousedown":Lw=!0;break;case"contextmenu":case"mouseup":case"dragend":Lw=!1,iC(d,n,u);break;case"selectionchange":if($4)break;case"keydown":case"keyup":iC(d,n,u)}var A;if(fx)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else dc?K$(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(G$&&n.locale!=="ko"&&(dc||C!=="onCompositionStart"?C==="onCompositionEnd"&&dc&&(A=W$()):(Go=u,cx="value"in Go?Go.value:Go.textContent,dc=!0)),P=Dm(c,C),0<P.length&&(C=new q_(C,t,null,n,u),d.push({event:C,listeners:P}),A?C.data=A:(A=X$(n),A!==null&&(C.data=A)))),(A=v4?y4(t,n):w4(t,n))&&(c=Dm(c,"onBeforeInput"),0<c.length&&(u=new q_("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=A))}oT(d,e)})}function Qd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gd(t,n),s!=null&&r.unshift(Qd(t,s,i)),s=Gd(t,e),s!=null&&r.push(Qd(t,s,i))),t=t.return}return r}function Vl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function aC(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Gd(n,s),l!=null&&o.unshift(Qd(n,l,a))):i||(l=Gd(n,s),l!=null&&o.push(Qd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var R4=/\r\n?/g,M4=/\u0000|\uFFFD/g;function lC(t){return(typeof t=="string"?t:""+t).replace(R4,`
`).replace(M4,"")}function Lh(t,e,n){if(e=lC(e),lC(t)!==e&&n)throw Error(se(425))}function Im(){}var Bw=null,Fw=null;function jw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zw=typeof setTimeout=="function"?setTimeout:void 0,D4=typeof clearTimeout=="function"?clearTimeout:void 0,cC=typeof Promise=="function"?Promise:void 0,I4=typeof queueMicrotask=="function"?queueMicrotask:typeof cC<"u"?function(t){return cC.resolve(null).then(t).catch(L4)}:zw;function L4(t){setTimeout(function(){throw t})}function $y(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),qd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);qd(e)}function oa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _u=Math.random().toString(36).slice(2),ps="__reactFiber$"+_u,ef="__reactProps$"+_u,io="__reactContainer$"+_u,Uw="__reactEvents$"+_u,B4="__reactListeners$"+_u,F4="__reactHandles$"+_u;function tl(t){var e=t[ps];if(e)return e;for(var n=t.parentNode;n;){if(e=n[io]||n[ps]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uC(t);t!==null;){if(n=t[ps])return n;t=uC(t)}return e}t=n,n=t.parentNode}return null}function eh(t){return t=t[ps]||t[io],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function tv(t){return t[ef]||null}var Vw=[],mc=-1;function Ta(t){return{current:t}}function Tt(t){0>mc||(t.current=Vw[mc],Vw[mc]=null,mc--)}function kt(t,e){mc++,Vw[mc]=t.current,t.current=e}var ga={},Un=Ta(ga),xr=Ta(!1),wl=ga;function Qc(t,e){var n=t.type.contextTypes;if(!n)return ga;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Sr(t){return t=t.childContextTypes,t!=null}function Lm(){Tt(xr),Tt(Un)}function dC(t,e,n){if(Un.current!==ga)throw Error(se(168));kt(Un,e),kt(xr,n)}function lT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(se(108,k6(t)||"Unknown",i));return jt({},n,r)}function Bm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ga,wl=Un.current,kt(Un,t),kt(xr,xr.current),!0}function fC(t,e,n){var r=t.stateNode;if(!r)throw Error(se(169));n?(t=lT(t,e,wl),r.__reactInternalMemoizedMergedChildContext=t,Tt(xr),Tt(Un),kt(Un,t)):Tt(xr),kt(xr,n)}var Ls=null,nv=!1,Ty=!1;function cT(t){Ls===null?Ls=[t]:Ls.push(t)}function j4(t){nv=!0,cT(t)}function Oa(){if(!Ty&&Ls!==null){Ty=!0;var t=0,e=dt;try{var n=Ls;for(dt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ls=null,nv=!1}catch(i){throw Ls!==null&&(Ls=Ls.slice(t+1)),M$(sx,Oa),i}finally{dt=e,Ty=!1}}return null}var gc=[],vc=0,Fm=null,jm=0,si=[],oi=0,bl=null,Js=1,Zs="";function Ha(t,e){gc[vc++]=jm,gc[vc++]=Fm,Fm=t,jm=e}function uT(t,e,n){si[oi++]=Js,si[oi++]=Zs,si[oi++]=bl,bl=t;var r=Js;t=Zs;var i=32-Fi(r)-1;r&=~(1<<i),n+=1;var s=32-Fi(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Js=1<<32-Fi(e)+i|n<<i|r,Zs=s+t}else Js=1<<s|n<<i|r,Zs=t}function px(t){t.return!==null&&(Ha(t,1),uT(t,1,0))}function mx(t){for(;t===Fm;)Fm=gc[--vc],gc[vc]=null,jm=gc[--vc],gc[vc]=null;for(;t===bl;)bl=si[--oi],si[oi]=null,Zs=si[--oi],si[oi]=null,Js=si[--oi],si[oi]=null}var Hr=null,Fr=null,Mt=!1,Ni=null;function dT(t,e){var n=ci(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hC(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hr=t,Fr=oa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hr=t,Fr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bl!==null?{id:Js,overflow:Zs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ci(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hr=t,Fr=null,!0):!1;default:return!1}}function Hw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ww(t){if(Mt){var e=Fr;if(e){var n=e;if(!hC(t,e)){if(Hw(t))throw Error(se(418));e=oa(n.nextSibling);var r=Hr;e&&hC(t,e)?dT(r,n):(t.flags=t.flags&-4097|2,Mt=!1,Hr=t)}}else{if(Hw(t))throw Error(se(418));t.flags=t.flags&-4097|2,Mt=!1,Hr=t}}}function pC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hr=t}function Bh(t){if(t!==Hr)return!1;if(!Mt)return pC(t),Mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jw(t.type,t.memoizedProps)),e&&(e=Fr)){if(Hw(t))throw fT(),Error(se(418));for(;e;)dT(t,e),e=oa(e.nextSibling)}if(pC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fr=oa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fr=null}}else Fr=Hr?oa(t.stateNode.nextSibling):null;return!0}function fT(){for(var t=Fr;t;)t=oa(t.nextSibling)}function eu(){Fr=Hr=null,Mt=!1}function gx(t){Ni===null?Ni=[t]:Ni.push(t)}var z4=go.ReactCurrentBatchConfig;function Ei(t,e){if(t&&t.defaultProps){e=jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var zm=Ta(null),Um=null,yc=null,vx=null;function yx(){vx=yc=Um=null}function wx(t){var e=zm.current;Tt(zm),t._currentValue=e}function Gw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Oc(t,e){Um=t,vx=yc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wr=!0),t.firstContext=null)}function yi(t){var e=t._currentValue;if(vx!==t)if(t={context:t,memoizedValue:e,next:null},yc===null){if(Um===null)throw Error(se(308));yc=t,Um.dependencies={lanes:0,firstContext:t}}else yc=yc.next=t;return e}var nl=null;function bx(t){nl===null?nl=[t]:nl.push(t)}function hT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,bx(e)):(n.next=i.next,i.next=n),e.interleaved=n,so(t,r)}function so(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Oo=!1;function xx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function aa(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,it&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,so(t,n)}return i=r.interleaved,i===null?(e.next=e,bx(r)):(e.next=i.next,i.next=e),r.interleaved=e,so(t,n)}function Hp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ox(t,n)}}function mC(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vm(t,e,n,r){var i=t.updateQueue;Oo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(f=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=jt({},d,f);break e;case 2:Oo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Sl|=o,t.lanes=o,t.memoizedState=d}}function gC(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(se(191,i));i.call(r)}}}var mT=new h$.Component().refs;function Kw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rv={isMounted:function(t){return(t=t._reactInternals)?Ll(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jn(),i=ca(t),s=Qs(r,i);s.payload=e,n!=null&&(s.callback=n),e=aa(t,s,i),e!==null&&(ji(e,t,i,r),Hp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jn(),i=ca(t),s=Qs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=aa(t,s,i),e!==null&&(ji(e,t,i,r),Hp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jn(),r=ca(t),i=Qs(n,r);i.tag=2,e!=null&&(i.callback=e),e=aa(t,i,r),e!==null&&(ji(e,t,r,n),Hp(e,t,r))}};function vC(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Jd(n,r)||!Jd(i,s):!0}function gT(t,e,n){var r=!1,i=ga,s=e.contextType;return typeof s=="object"&&s!==null?s=yi(s):(i=Sr(e)?wl:Un.current,r=e.contextTypes,s=(r=r!=null)?Qc(t,i):ga),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function yC(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rv.enqueueReplaceState(e,e.state,null)}function Xw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=mT,xx(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=yi(s):(s=Sr(e)?wl:Un.current,i.context=Qc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Kw(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&rv.enqueueReplaceState(i,i.state,null),Vm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Vu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===mT&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,t))}return t}function Fh(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wC(t){var e=t._init;return e(t._payload)}function vT(t){function e(v,y){if(t){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=ua(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,t?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,x,k){return y===null||y.tag!==6?(y=Ly(x,v.mode,k),y.return=v,y):(y=i(y,x),y.return=v,y)}function l(v,y,x,k){var _=x.type;return _===uc?u(v,y,x.props.children,k,x.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===To&&wC(_)===y.type)?(k=i(y,x.props),k.ref=Vu(v,y,x),k.return=v,k):(k=Yp(x.type,x.key,x.props,null,v.mode,k),k.ref=Vu(v,y,x),k.return=v,k)}function c(v,y,x,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=By(x,v.mode,k),y.return=v,y):(y=i(y,x.children||[]),y.return=v,y)}function u(v,y,x,k,_){return y===null||y.tag!==7?(y=ul(x,v.mode,k,_),y.return=v,y):(y=i(y,x),y.return=v,y)}function d(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ly(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ph:return x=Yp(y.type,y.key,y.props,null,v.mode,x),x.ref=Vu(v,null,y),x.return=v,x;case cc:return y=By(y,v.mode,x),y.return=v,y;case To:var k=y._init;return d(v,k(y._payload),x)}if(cd(y)||Bu(y))return y=ul(y,v.mode,x,null),y.return=v,y;Fh(v,y)}return null}function f(v,y,x,k){var _=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(v,y,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ph:return x.key===_?l(v,y,x,k):null;case cc:return x.key===_?c(v,y,x,k):null;case To:return _=x._init,f(v,y,_(x._payload),k)}if(cd(x)||Bu(x))return _!==null?null:u(v,y,x,k,null);Fh(v,x)}return null}function h(v,y,x,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(x)||null,a(y,v,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ph:return v=v.get(k.key===null?x:k.key)||null,l(y,v,k,_);case cc:return v=v.get(k.key===null?x:k.key)||null,c(y,v,k,_);case To:var P=k._init;return h(v,y,x,P(k._payload),_)}if(cd(k)||Bu(k))return v=v.get(x)||null,u(y,v,k,_,null);Fh(y,k)}return null}function p(v,y,x,k){for(var _=null,P=null,A=y,C=y=0,N=null;A!==null&&C<x.length;C++){A.index>C?(N=A,A=null):N=A.sibling;var R=f(v,A,x[C],k);if(R===null){A===null&&(A=N);break}t&&A&&R.alternate===null&&e(v,A),y=s(R,y,C),P===null?_=R:P.sibling=R,P=R,A=N}if(C===x.length)return n(v,A),Mt&&Ha(v,C),_;if(A===null){for(;C<x.length;C++)A=d(v,x[C],k),A!==null&&(y=s(A,y,C),P===null?_=A:P.sibling=A,P=A);return Mt&&Ha(v,C),_}for(A=r(v,A);C<x.length;C++)N=h(A,v,C,x[C],k),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?C:N.key),y=s(N,y,C),P===null?_=N:P.sibling=N,P=N);return t&&A.forEach(function(M){return e(v,M)}),Mt&&Ha(v,C),_}function m(v,y,x,k){var _=Bu(x);if(typeof _!="function")throw Error(se(150));if(x=_.call(x),x==null)throw Error(se(151));for(var P=_=null,A=y,C=y=0,N=null,R=x.next();A!==null&&!R.done;C++,R=x.next()){A.index>C?(N=A,A=null):N=A.sibling;var M=f(v,A,R.value,k);if(M===null){A===null&&(A=N);break}t&&A&&M.alternate===null&&e(v,A),y=s(M,y,C),P===null?_=M:P.sibling=M,P=M,A=N}if(R.done)return n(v,A),Mt&&Ha(v,C),_;if(A===null){for(;!R.done;C++,R=x.next())R=d(v,R.value,k),R!==null&&(y=s(R,y,C),P===null?_=R:P.sibling=R,P=R);return Mt&&Ha(v,C),_}for(A=r(v,A);!R.done;C++,R=x.next())R=h(A,v,C,R.value,k),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?C:R.key),y=s(R,y,C),P===null?_=R:P.sibling=R,P=R);return t&&A.forEach(function(L){return e(v,L)}),Mt&&Ha(v,C),_}function w(v,y,x,k){if(typeof x=="object"&&x!==null&&x.type===uc&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ph:e:{for(var _=x.key,P=y;P!==null;){if(P.key===_){if(_=x.type,_===uc){if(P.tag===7){n(v,P.sibling),y=i(P,x.props.children),y.return=v,v=y;break e}}else if(P.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===To&&wC(_)===P.type){n(v,P.sibling),y=i(P,x.props),y.ref=Vu(v,P,x),y.return=v,v=y;break e}n(v,P);break}else e(v,P);P=P.sibling}x.type===uc?(y=ul(x.props.children,v.mode,k,x.key),y.return=v,v=y):(k=Yp(x.type,x.key,x.props,null,v.mode,k),k.ref=Vu(v,y,x),k.return=v,v=k)}return o(v);case cc:e:{for(P=x.key;y!==null;){if(y.key===P)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(v,y.sibling),y=i(y,x.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=By(x,v.mode,k),y.return=v,v=y}return o(v);case To:return P=x._init,w(v,y,P(x._payload),k)}if(cd(x))return p(v,y,x,k);if(Bu(x))return m(v,y,x,k);Fh(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,x),y.return=v,v=y):(n(v,y),y=Ly(x,v.mode,k),y.return=v,v=y),o(v)):n(v,y)}return w}var tu=vT(!0),yT=vT(!1),th={},_s=Ta(th),tf=Ta(th),nf=Ta(th);function rl(t){if(t===th)throw Error(se(174));return t}function Sx(t,e){switch(kt(nf,e),kt(tf,t),kt(_s,th),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ew(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ew(e,t)}Tt(_s),kt(_s,e)}function nu(){Tt(_s),Tt(tf),Tt(nf)}function wT(t){rl(nf.current);var e=rl(_s.current),n=Ew(e,t.type);e!==n&&(kt(tf,t),kt(_s,n))}function kx(t){tf.current===t&&(Tt(_s),Tt(tf))}var Lt=Ta(0);function Hm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Oy=[];function _x(){for(var t=0;t<Oy.length;t++)Oy[t]._workInProgressVersionPrimary=null;Oy.length=0}var Wp=go.ReactCurrentDispatcher,Ny=go.ReactCurrentBatchConfig,xl=0,Ft=null,rn=null,fn=null,Wm=!1,Pd=!1,rf=0,U4=0;function Mn(){throw Error(se(321))}function Cx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wi(t[n],e[n]))return!1;return!0}function Ex(t,e,n,r,i,s){if(xl=s,Ft=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wp.current=t===null||t.memoizedState===null?G4:K4,t=n(r,i),Pd){s=0;do{if(Pd=!1,rf=0,25<=s)throw Error(se(301));s+=1,fn=rn=null,e.updateQueue=null,Wp.current=X4,t=n(r,i)}while(Pd)}if(Wp.current=Gm,e=rn!==null&&rn.next!==null,xl=0,fn=rn=Ft=null,Wm=!1,e)throw Error(se(300));return t}function Ax(){var t=rf!==0;return rf=0,t}function ss(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Ft.memoizedState=fn=t:fn=fn.next=t,fn}function wi(){if(rn===null){var t=Ft.alternate;t=t!==null?t.memoizedState:null}else t=rn.next;var e=fn===null?Ft.memoizedState:fn.next;if(e!==null)fn=e,rn=t;else{if(t===null)throw Error(se(310));rn=t,t={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},fn===null?Ft.memoizedState=fn=t:fn=fn.next=t}return fn}function sf(t,e){return typeof e=="function"?e(t):e}function Ry(t){var e=wi(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var r=rn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((xl&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ft.lanes|=u,Sl|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Wi(r,e.memoizedState)||(wr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ft.lanes|=s,Sl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function My(t){var e=wi(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Wi(s,e.memoizedState)||(wr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function bT(){}function xT(t,e){var n=Ft,r=wi(),i=e(),s=!Wi(r.memoizedState,i);if(s&&(r.memoizedState=i,wr=!0),r=r.queue,Px(_T.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||fn!==null&&fn.memoizedState.tag&1){if(n.flags|=2048,of(9,kT.bind(null,n,r,i,e),void 0,null),pn===null)throw Error(se(349));xl&30||ST(n,e,i)}return i}function ST(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ft.updateQueue,e===null?(e={lastEffect:null,stores:null},Ft.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kT(t,e,n,r){e.value=n,e.getSnapshot=r,CT(e)&&ET(t)}function _T(t,e,n){return n(function(){CT(e)&&ET(t)})}function CT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wi(t,n)}catch{return!0}}function ET(t){var e=so(t,1);e!==null&&ji(e,t,1,-1)}function bC(t){var e=ss();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sf,lastRenderedState:t},e.queue=t,t=t.dispatch=W4.bind(null,Ft,t),[e.memoizedState,t]}function of(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ft.updateQueue,e===null?(e={lastEffect:null,stores:null},Ft.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function AT(){return wi().memoizedState}function Gp(t,e,n,r){var i=ss();Ft.flags|=t,i.memoizedState=of(1|e,n,void 0,r===void 0?null:r)}function iv(t,e,n,r){var i=wi();r=r===void 0?null:r;var s=void 0;if(rn!==null){var o=rn.memoizedState;if(s=o.destroy,r!==null&&Cx(r,o.deps)){i.memoizedState=of(e,n,s,r);return}}Ft.flags|=t,i.memoizedState=of(1|e,n,s,r)}function xC(t,e){return Gp(8390656,8,t,e)}function Px(t,e){return iv(2048,8,t,e)}function PT(t,e){return iv(4,2,t,e)}function $T(t,e){return iv(4,4,t,e)}function TT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function OT(t,e,n){return n=n!=null?n.concat([t]):null,iv(4,4,TT.bind(null,e,t),n)}function $x(){}function NT(t,e){var n=wi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function RT(t,e){var n=wi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function MT(t,e,n){return xl&21?(Wi(n,e)||(n=L$(),Ft.lanes|=n,Sl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wr=!0),t.memoizedState=n)}function V4(t,e){var n=dt;dt=n!==0&&4>n?n:4,t(!0);var r=Ny.transition;Ny.transition={};try{t(!1),e()}finally{dt=n,Ny.transition=r}}function DT(){return wi().memoizedState}function H4(t,e,n){var r=ca(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},IT(t))LT(e,n);else if(n=hT(t,e,n,r),n!==null){var i=Jn();ji(n,t,r,i),BT(n,e,r)}}function W4(t,e,n){var r=ca(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(IT(t))LT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Wi(a,o)){var l=e.interleaved;l===null?(i.next=i,bx(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=hT(t,e,i,r),n!==null&&(i=Jn(),ji(n,t,r,i),BT(n,e,r))}}function IT(t){var e=t.alternate;return t===Ft||e!==null&&e===Ft}function LT(t,e){Pd=Wm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function BT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ox(t,n)}}var Gm={readContext:yi,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useInsertionEffect:Mn,useLayoutEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useMutableSource:Mn,useSyncExternalStore:Mn,useId:Mn,unstable_isNewReconciler:!1},G4={readContext:yi,useCallback:function(t,e){return ss().memoizedState=[t,e===void 0?null:e],t},useContext:yi,useEffect:xC,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gp(4194308,4,TT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gp(4,2,t,e)},useMemo:function(t,e){var n=ss();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ss();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=H4.bind(null,Ft,t),[r.memoizedState,t]},useRef:function(t){var e=ss();return t={current:t},e.memoizedState=t},useState:bC,useDebugValue:$x,useDeferredValue:function(t){return ss().memoizedState=t},useTransition:function(){var t=bC(!1),e=t[0];return t=V4.bind(null,t[1]),ss().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ft,i=ss();if(Mt){if(n===void 0)throw Error(se(407));n=n()}else{if(n=e(),pn===null)throw Error(se(349));xl&30||ST(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,xC(_T.bind(null,r,s,t),[t]),r.flags|=2048,of(9,kT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ss(),e=pn.identifierPrefix;if(Mt){var n=Zs,r=Js;n=(r&~(1<<32-Fi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=rf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=U4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},K4={readContext:yi,useCallback:NT,useContext:yi,useEffect:Px,useImperativeHandle:OT,useInsertionEffect:PT,useLayoutEffect:$T,useMemo:RT,useReducer:Ry,useRef:AT,useState:function(){return Ry(sf)},useDebugValue:$x,useDeferredValue:function(t){var e=wi();return MT(e,rn.memoizedState,t)},useTransition:function(){var t=Ry(sf)[0],e=wi().memoizedState;return[t,e]},useMutableSource:bT,useSyncExternalStore:xT,useId:DT,unstable_isNewReconciler:!1},X4={readContext:yi,useCallback:NT,useContext:yi,useEffect:Px,useImperativeHandle:OT,useInsertionEffect:PT,useLayoutEffect:$T,useMemo:RT,useReducer:My,useRef:AT,useState:function(){return My(sf)},useDebugValue:$x,useDeferredValue:function(t){var e=wi();return rn===null?e.memoizedState=t:MT(e,rn.memoizedState,t)},useTransition:function(){var t=My(sf)[0],e=wi().memoizedState;return[t,e]},useMutableSource:bT,useSyncExternalStore:xT,useId:DT,unstable_isNewReconciler:!1};function ru(t,e){try{var n="",r=e;do n+=S6(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Dy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var q4=typeof WeakMap=="function"?WeakMap:Map;function FT(t,e,n){n=Qs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xm||(Xm=!0,sb=r),qw(t,e)},n}function jT(t,e,n){n=Qs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){qw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){qw(t,e),typeof r!="function"&&(la===null?la=new Set([this]):la.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function SC(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new q4;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=c8.bind(null,t,e,n),e.then(t,t))}function kC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _C(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qs(-1,1),e.tag=2,aa(n,e,1))),n.lanes|=1),t)}var Y4=go.ReactCurrentOwner,wr=!1;function Kn(t,e,n,r){e.child=t===null?yT(e,null,n,r):tu(e,t.child,n,r)}function CC(t,e,n,r,i){n=n.render;var s=e.ref;return Oc(e,i),r=Ex(t,e,n,r,s,i),n=Ax(),t!==null&&!wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oo(t,e,i)):(Mt&&n&&px(e),e.flags|=1,Kn(t,e,r,i),e.child)}function EC(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Lx(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,zT(t,e,s,r,i)):(t=Yp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Jd,n(o,r)&&t.ref===e.ref)return oo(t,e,i)}return e.flags|=1,t=ua(s,r),t.ref=e.ref,t.return=e,e.child=t}function zT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Jd(s,r)&&t.ref===e.ref)if(wr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(wr=!0);else return e.lanes=t.lanes,oo(t,e,i)}return Yw(t,e,n,r,i)}function UT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(bc,Rr),Rr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kt(bc,Rr),Rr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,kt(bc,Rr),Rr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,kt(bc,Rr),Rr|=r;return Kn(t,e,i,n),e.child}function VT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yw(t,e,n,r,i){var s=Sr(n)?wl:Un.current;return s=Qc(e,s),Oc(e,i),n=Ex(t,e,n,r,s,i),r=Ax(),t!==null&&!wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oo(t,e,i)):(Mt&&r&&px(e),e.flags|=1,Kn(t,e,n,i),e.child)}function AC(t,e,n,r,i){if(Sr(n)){var s=!0;Bm(e)}else s=!1;if(Oc(e,i),e.stateNode===null)Kp(t,e),gT(e,n,r),Xw(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=yi(c):(c=Sr(n)?wl:Un.current,c=Qc(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&yC(e,o,r,c),Oo=!1;var f=e.memoizedState;o.state=f,Vm(e,r,o,i),l=e.memoizedState,a!==r||f!==l||xr.current||Oo?(typeof u=="function"&&(Kw(e,n,u,r),l=e.memoizedState),(a=Oo||vC(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,pT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ei(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=yi(l):(l=Sr(n)?wl:Un.current,l=Qc(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&yC(e,o,r,l),Oo=!1,f=e.memoizedState,o.state=f,Vm(e,r,o,i);var p=e.memoizedState;a!==d||f!==p||xr.current||Oo?(typeof h=="function"&&(Kw(e,n,h,r),p=e.memoizedState),(c=Oo||vC(e,n,c,r,f,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Jw(t,e,n,r,s,i)}function Jw(t,e,n,r,i,s){VT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&fC(e,n,!1),oo(t,e,s);r=e.stateNode,Y4.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=tu(e,t.child,null,s),e.child=tu(e,null,a,s)):Kn(t,e,a,s),e.memoizedState=r.state,i&&fC(e,n,!0),e.child}function HT(t){var e=t.stateNode;e.pendingContext?dC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dC(t,e.context,!1),Sx(t,e.containerInfo)}function PC(t,e,n,r,i){return eu(),gx(i),e.flags|=256,Kn(t,e,n,r),e.child}var Zw={dehydrated:null,treeContext:null,retryLane:0};function Qw(t){return{baseLanes:t,cachePool:null,transitions:null}}function WT(t,e,n){var r=e.pendingProps,i=Lt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),kt(Lt,i&1),t===null)return Ww(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=av(o,r,0,null),t=ul(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Qw(n),e.memoizedState=Zw,t):Tx(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return J4(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ua(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ua(a,s):(s=ul(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Qw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Zw,r}return s=t.child,t=s.sibling,r=ua(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Tx(t,e){return e=av({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jh(t,e,n,r){return r!==null&&gx(r),tu(e,t.child,null,n),t=Tx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function J4(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Dy(Error(se(422))),jh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=av({mode:"visible",children:r.children},i,0,null),s=ul(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&tu(e,t.child,null,o),e.child.memoizedState=Qw(o),e.memoizedState=Zw,s);if(!(e.mode&1))return jh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(se(419)),r=Dy(s,r,void 0),jh(t,e,o,r)}if(a=(o&t.childLanes)!==0,wr||a){if(r=pn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,so(t,i),ji(r,t,i,-1))}return Ix(),r=Dy(Error(se(421))),jh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=u8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Fr=oa(i.nextSibling),Hr=e,Mt=!0,Ni=null,t!==null&&(si[oi++]=Js,si[oi++]=Zs,si[oi++]=bl,Js=t.id,Zs=t.overflow,bl=e),e=Tx(e,r.children),e.flags|=4096,e)}function $C(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gw(t.return,e,n)}function Iy(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function GT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Kn(t,e,r.children,n),r=Lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$C(t,n,e);else if(t.tag===19)$C(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(kt(Lt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Hm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Iy(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Hm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Iy(e,!0,n,null,s);break;case"together":Iy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function oo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Sl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,n=ua(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ua(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Z4(t,e,n){switch(e.tag){case 3:HT(e),eu();break;case 5:wT(e);break;case 1:Sr(e.type)&&Bm(e);break;case 4:Sx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;kt(zm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(kt(Lt,Lt.current&1),e.flags|=128,null):n&e.child.childLanes?WT(t,e,n):(kt(Lt,Lt.current&1),t=oo(t,e,n),t!==null?t.sibling:null);kt(Lt,Lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return GT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),kt(Lt,Lt.current),r)break;return null;case 22:case 23:return e.lanes=0,UT(t,e,n)}return oo(t,e,n)}var KT,eb,XT,qT;KT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};eb=function(){};XT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,rl(_s.current);var s=null;switch(n){case"input":i=Sw(t,i),r=Sw(t,r),s=[];break;case"select":i=jt({},i,{value:void 0}),r=jt({},r,{value:void 0}),s=[];break;case"textarea":i=Cw(t,i),r=Cw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Im)}Aw(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&_t("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};qT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hu(t,e){if(!Mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Q4(t,e,n){var r=e.pendingProps;switch(mx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dn(e),null;case 1:return Sr(e.type)&&Lm(),Dn(e),null;case 3:return r=e.stateNode,nu(),Tt(xr),Tt(Un),_x(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ni!==null&&(lb(Ni),Ni=null))),eb(t,e),Dn(e),null;case 5:kx(e);var i=rl(nf.current);if(n=e.type,t!==null&&e.stateNode!=null)XT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(se(166));return Dn(e),null}if(t=rl(_s.current),Bh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ps]=e,r[ef]=s,t=(e.mode&1)!==0,n){case"dialog":_t("cancel",r),_t("close",r);break;case"iframe":case"object":case"embed":_t("load",r);break;case"video":case"audio":for(i=0;i<dd.length;i++)_t(dd[i],r);break;case"source":_t("error",r);break;case"img":case"image":case"link":_t("error",r),_t("load",r);break;case"details":_t("toggle",r);break;case"input":B_(r,s),_t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},_t("invalid",r);break;case"textarea":j_(r,s),_t("invalid",r)}Aw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Lh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Lh(r.textContent,a,t),i=["children",""+a]):Hd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&_t("scroll",r)}switch(n){case"input":$h(r),F_(r,s,!0);break;case"textarea":$h(r),z_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Im)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=S$(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ps]=e,t[ef]=r,KT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Pw(n,r),n){case"dialog":_t("cancel",t),_t("close",t),i=r;break;case"iframe":case"object":case"embed":_t("load",t),i=r;break;case"video":case"audio":for(i=0;i<dd.length;i++)_t(dd[i],t);i=r;break;case"source":_t("error",t),i=r;break;case"img":case"image":case"link":_t("error",t),_t("load",t),i=r;break;case"details":_t("toggle",t),i=r;break;case"input":B_(t,r),i=Sw(t,r),_t("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=jt({},r,{value:void 0}),_t("invalid",t);break;case"textarea":j_(t,r),i=Cw(t,r),_t("invalid",t);break;default:i=r}Aw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?C$(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&k$(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Wd(t,l):typeof l=="number"&&Wd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&_t("scroll",t):l!=null&&ex(t,s,l,o))}switch(n){case"input":$h(t),F_(t,r,!1);break;case"textarea":$h(t),z_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ma(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ac(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ac(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Im)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dn(e),null;case 6:if(t&&e.stateNode!=null)qT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(se(166));if(n=rl(nf.current),rl(_s.current),Bh(e)){if(r=e.stateNode,n=e.memoizedProps,r[ps]=e,(s=r.nodeValue!==n)&&(t=Hr,t!==null))switch(t.tag){case 3:Lh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ps]=e,e.stateNode=r}return Dn(e),null;case 13:if(Tt(Lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Mt&&Fr!==null&&e.mode&1&&!(e.flags&128))fT(),eu(),e.flags|=98560,s=!1;else if(s=Bh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(se(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(se(317));s[ps]=e}else eu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dn(e),s=!1}else Ni!==null&&(lb(Ni),Ni=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Lt.current&1?ln===0&&(ln=3):Ix())),e.updateQueue!==null&&(e.flags|=4),Dn(e),null);case 4:return nu(),eb(t,e),t===null&&Zd(e.stateNode.containerInfo),Dn(e),null;case 10:return wx(e.type._context),Dn(e),null;case 17:return Sr(e.type)&&Lm(),Dn(e),null;case 19:if(Tt(Lt),s=e.memoizedState,s===null)return Dn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Hu(s,!1);else{if(ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Hm(t),o!==null){for(e.flags|=128,Hu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return kt(Lt,Lt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Kt()>iu&&(e.flags|=128,r=!0,Hu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Hm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Mt)return Dn(e),null}else 2*Kt()-s.renderingStartTime>iu&&n!==1073741824&&(e.flags|=128,r=!0,Hu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Kt(),e.sibling=null,n=Lt.current,kt(Lt,r?n&1|2:n&1),e):(Dn(e),null);case 22:case 23:return Dx(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rr&1073741824&&(Dn(e),e.subtreeFlags&6&&(e.flags|=8192)):Dn(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function e8(t,e){switch(mx(e),e.tag){case 1:return Sr(e.type)&&Lm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return nu(),Tt(xr),Tt(Un),_x(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kx(e),null;case 13:if(Tt(Lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));eu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Tt(Lt),null;case 4:return nu(),null;case 10:return wx(e.type._context),null;case 22:case 23:return Dx(),null;case 24:return null;default:return null}}var zh=!1,Fn=!1,t8=typeof WeakSet=="function"?WeakSet:Set,Se=null;function wc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ut(t,e,r)}else n.current=null}function tb(t,e,n){try{n()}catch(r){Ut(t,e,r)}}var TC=!1;function n8(t,e){if(Bw=Rm,t=Q$(),hx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fw={focusedElem:t,selectionRange:n},Rm=!1,Se=e;Se!==null;)if(e=Se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Se=t;else for(;Se!==null;){e=Se;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,w=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ei(e.type,m),w);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(k){Ut(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Se=t;break}Se=e.return}return p=TC,TC=!1,p}function $d(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&tb(e,n,s)}i=i.next}while(i!==r)}}function sv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function nb(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function YT(t){var e=t.alternate;e!==null&&(t.alternate=null,YT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ps],delete e[ef],delete e[Uw],delete e[B4],delete e[F4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function JT(t){return t.tag===5||t.tag===3||t.tag===4}function OC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||JT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Im));else if(r!==4&&(t=t.child,t!==null))for(rb(t,e,n),t=t.sibling;t!==null;)rb(t,e,n),t=t.sibling}function ib(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ib(t,e,n),t=t.sibling;t!==null;)ib(t,e,n),t=t.sibling}var vn=null,Ti=!1;function Co(t,e,n){for(n=n.child;n!==null;)ZT(t,e,n),n=n.sibling}function ZT(t,e,n){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(Jg,n)}catch{}switch(n.tag){case 5:Fn||wc(n,e);case 6:var r=vn,i=Ti;vn=null,Co(t,e,n),vn=r,Ti=i,vn!==null&&(Ti?(t=vn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vn.removeChild(n.stateNode));break;case 18:vn!==null&&(Ti?(t=vn,n=n.stateNode,t.nodeType===8?$y(t.parentNode,n):t.nodeType===1&&$y(t,n),qd(t)):$y(vn,n.stateNode));break;case 4:r=vn,i=Ti,vn=n.stateNode.containerInfo,Ti=!0,Co(t,e,n),vn=r,Ti=i;break;case 0:case 11:case 14:case 15:if(!Fn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&tb(n,e,o),i=i.next}while(i!==r)}Co(t,e,n);break;case 1:if(!Fn&&(wc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ut(n,e,a)}Co(t,e,n);break;case 21:Co(t,e,n);break;case 22:n.mode&1?(Fn=(r=Fn)||n.memoizedState!==null,Co(t,e,n),Fn=r):Co(t,e,n);break;default:Co(t,e,n)}}function NC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new t8),e.forEach(function(r){var i=d8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _i(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vn=a.stateNode,Ti=!1;break e;case 3:vn=a.stateNode.containerInfo,Ti=!0;break e;case 4:vn=a.stateNode.containerInfo,Ti=!0;break e}a=a.return}if(vn===null)throw Error(se(160));ZT(s,o,i),vn=null,Ti=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ut(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)QT(e,t),e=e.sibling}function QT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_i(e,t),Qi(t),r&4){try{$d(3,t,t.return),sv(3,t)}catch(m){Ut(t,t.return,m)}try{$d(5,t,t.return)}catch(m){Ut(t,t.return,m)}}break;case 1:_i(e,t),Qi(t),r&512&&n!==null&&wc(n,n.return);break;case 5:if(_i(e,t),Qi(t),r&512&&n!==null&&wc(n,n.return),t.flags&32){var i=t.stateNode;try{Wd(i,"")}catch(m){Ut(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&b$(i,s),Pw(a,o);var c=Pw(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?C$(i,d):u==="dangerouslySetInnerHTML"?k$(i,d):u==="children"?Wd(i,d):ex(i,u,d,c)}switch(a){case"input":kw(i,s);break;case"textarea":x$(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Ac(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ac(i,!!s.multiple,s.defaultValue,!0):Ac(i,!!s.multiple,s.multiple?[]:"",!1))}i[ef]=s}catch(m){Ut(t,t.return,m)}}break;case 6:if(_i(e,t),Qi(t),r&4){if(t.stateNode===null)throw Error(se(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Ut(t,t.return,m)}}break;case 3:if(_i(e,t),Qi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qd(e.containerInfo)}catch(m){Ut(t,t.return,m)}break;case 4:_i(e,t),Qi(t);break;case 13:_i(e,t),Qi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Rx=Kt())),r&4&&NC(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Fn=(c=Fn)||u,_i(e,t),Fn=c):_i(e,t),Qi(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Se=t,u=t.child;u!==null;){for(d=Se=u;Se!==null;){switch(f=Se,h=f.child,f.tag){case 0:case 11:case 14:case 15:$d(4,f,f.return);break;case 1:wc(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Ut(r,n,m)}}break;case 5:wc(f,f.return);break;case 22:if(f.memoizedState!==null){MC(d);continue}}h!==null?(h.return=f,Se=h):MC(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_$("display",o))}catch(m){Ut(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Ut(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_i(e,t),Qi(t),r&4&&NC(t);break;case 21:break;default:_i(e,t),Qi(t)}}function Qi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(JT(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wd(i,""),r.flags&=-33);var s=OC(t);ib(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=OC(t);rb(t,a,o);break;default:throw Error(se(161))}}catch(l){Ut(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function r8(t,e,n){Se=t,eO(t)}function eO(t,e,n){for(var r=(t.mode&1)!==0;Se!==null;){var i=Se,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||zh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Fn;a=zh;var c=Fn;if(zh=o,(Fn=l)&&!c)for(Se=i;Se!==null;)o=Se,l=o.child,o.tag===22&&o.memoizedState!==null?DC(i):l!==null?(l.return=o,Se=l):DC(i);for(;s!==null;)Se=s,eO(s),s=s.sibling;Se=i,zh=a,Fn=c}RC(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Se=s):RC(t)}}function RC(t){for(;Se!==null;){var e=Se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fn||sv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Fn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ei(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gC(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gC(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&qd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Fn||e.flags&512&&nb(e)}catch(f){Ut(e,e.return,f)}}if(e===t){Se=null;break}if(n=e.sibling,n!==null){n.return=e.return,Se=n;break}Se=e.return}}function MC(t){for(;Se!==null;){var e=Se;if(e===t){Se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Se=n;break}Se=e.return}}function DC(t){for(;Se!==null;){var e=Se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sv(4,e)}catch(l){Ut(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ut(e,i,l)}}var s=e.return;try{nb(e)}catch(l){Ut(e,s,l)}break;case 5:var o=e.return;try{nb(e)}catch(l){Ut(e,o,l)}}}catch(l){Ut(e,e.return,l)}if(e===t){Se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Se=a;break}Se=e.return}}var i8=Math.ceil,Km=go.ReactCurrentDispatcher,Ox=go.ReactCurrentOwner,hi=go.ReactCurrentBatchConfig,it=0,pn=null,Zt=null,On=0,Rr=0,bc=Ta(0),ln=0,af=null,Sl=0,ov=0,Nx=0,Td=null,gr=null,Rx=0,iu=1/0,Ms=null,Xm=!1,sb=null,la=null,Uh=!1,Ko=null,qm=0,Od=0,ob=null,Xp=-1,qp=0;function Jn(){return it&6?Kt():Xp!==-1?Xp:Xp=Kt()}function ca(t){return t.mode&1?it&2&&On!==0?On&-On:z4.transition!==null?(qp===0&&(qp=L$()),qp):(t=dt,t!==0||(t=window.event,t=t===void 0?16:H$(t.type)),t):1}function ji(t,e,n,r){if(50<Od)throw Od=0,ob=null,Error(se(185));Zf(t,n,r),(!(it&2)||t!==pn)&&(t===pn&&(!(it&2)&&(ov|=n),ln===4&&Bo(t,On)),kr(t,r),n===1&&it===0&&!(e.mode&1)&&(iu=Kt()+500,nv&&Oa()))}function kr(t,e){var n=t.callbackNode;z6(t,e);var r=Nm(t,t===pn?On:0);if(r===0)n!==null&&H_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&H_(n),e===1)t.tag===0?j4(IC.bind(null,t)):cT(IC.bind(null,t)),I4(function(){!(it&6)&&Oa()}),n=null;else{switch(B$(r)){case 1:n=sx;break;case 4:n=D$;break;case 16:n=Om;break;case 536870912:n=I$;break;default:n=Om}n=lO(n,tO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tO(t,e){if(Xp=-1,qp=0,it&6)throw Error(se(327));var n=t.callbackNode;if(Nc()&&t.callbackNode!==n)return null;var r=Nm(t,t===pn?On:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ym(t,r);else{e=r;var i=it;it|=2;var s=rO();(pn!==t||On!==e)&&(Ms=null,iu=Kt()+500,cl(t,e));do try{a8();break}catch(a){nO(t,a)}while(!0);yx(),Km.current=s,it=i,Zt!==null?e=0:(pn=null,On=0,e=ln)}if(e!==0){if(e===2&&(i=Rw(t),i!==0&&(r=i,e=ab(t,i))),e===1)throw n=af,cl(t,0),Bo(t,r),kr(t,Kt()),n;if(e===6)Bo(t,r);else{if(i=t.current.alternate,!(r&30)&&!s8(i)&&(e=Ym(t,r),e===2&&(s=Rw(t),s!==0&&(r=s,e=ab(t,s))),e===1))throw n=af,cl(t,0),Bo(t,r),kr(t,Kt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(se(345));case 2:Wa(t,gr,Ms);break;case 3:if(Bo(t,r),(r&130023424)===r&&(e=Rx+500-Kt(),10<e)){if(Nm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Jn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zw(Wa.bind(null,t,gr,Ms),e);break}Wa(t,gr,Ms);break;case 4:if(Bo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Fi(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Kt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*i8(r/1960))-r,10<r){t.timeoutHandle=zw(Wa.bind(null,t,gr,Ms),r);break}Wa(t,gr,Ms);break;case 5:Wa(t,gr,Ms);break;default:throw Error(se(329))}}}return kr(t,Kt()),t.callbackNode===n?tO.bind(null,t):null}function ab(t,e){var n=Td;return t.current.memoizedState.isDehydrated&&(cl(t,e).flags|=256),t=Ym(t,e),t!==2&&(e=gr,gr=n,e!==null&&lb(e)),t}function lb(t){gr===null?gr=t:gr.push.apply(gr,t)}function s8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Wi(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bo(t,e){for(e&=~Nx,e&=~ov,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fi(e),r=1<<n;t[n]=-1,e&=~r}}function IC(t){if(it&6)throw Error(se(327));Nc();var e=Nm(t,0);if(!(e&1))return kr(t,Kt()),null;var n=Ym(t,e);if(t.tag!==0&&n===2){var r=Rw(t);r!==0&&(e=r,n=ab(t,r))}if(n===1)throw n=af,cl(t,0),Bo(t,e),kr(t,Kt()),n;if(n===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wa(t,gr,Ms),kr(t,Kt()),null}function Mx(t,e){var n=it;it|=1;try{return t(e)}finally{it=n,it===0&&(iu=Kt()+500,nv&&Oa())}}function kl(t){Ko!==null&&Ko.tag===0&&!(it&6)&&Nc();var e=it;it|=1;var n=hi.transition,r=dt;try{if(hi.transition=null,dt=1,t)return t()}finally{dt=r,hi.transition=n,it=e,!(it&6)&&Oa()}}function Dx(){Rr=bc.current,Tt(bc)}function cl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,D4(n)),Zt!==null)for(n=Zt.return;n!==null;){var r=n;switch(mx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lm();break;case 3:nu(),Tt(xr),Tt(Un),_x();break;case 5:kx(r);break;case 4:nu();break;case 13:Tt(Lt);break;case 19:Tt(Lt);break;case 10:wx(r.type._context);break;case 22:case 23:Dx()}n=n.return}if(pn=t,Zt=t=ua(t.current,null),On=Rr=e,ln=0,af=null,Nx=ov=Sl=0,gr=Td=null,nl!==null){for(e=0;e<nl.length;e++)if(n=nl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}nl=null}return t}function nO(t,e){do{var n=Zt;try{if(yx(),Wp.current=Gm,Wm){for(var r=Ft.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wm=!1}if(xl=0,fn=rn=Ft=null,Pd=!1,rf=0,Ox.current=null,n===null||n.return===null){ln=1,af=e,Zt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=On,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=kC(o);if(h!==null){h.flags&=-257,_C(h,o,a,s,e),h.mode&1&&SC(s,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){SC(s,c,e),Ix();break e}l=Error(se(426))}}else if(Mt&&a.mode&1){var w=kC(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),_C(w,o,a,s,e),gx(ru(l,a));break e}}s=l=ru(l,a),ln!==4&&(ln=2),Td===null?Td=[s]:Td.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=FT(s,l,e);mC(s,v);break e;case 1:a=l;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(la===null||!la.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=jT(s,a,e);mC(s,k);break e}}s=s.return}while(s!==null)}sO(n)}catch(_){e=_,Zt===n&&n!==null&&(Zt=n=n.return);continue}break}while(!0)}function rO(){var t=Km.current;return Km.current=Gm,t===null?Gm:t}function Ix(){(ln===0||ln===3||ln===2)&&(ln=4),pn===null||!(Sl&268435455)&&!(ov&268435455)||Bo(pn,On)}function Ym(t,e){var n=it;it|=2;var r=rO();(pn!==t||On!==e)&&(Ms=null,cl(t,e));do try{o8();break}catch(i){nO(t,i)}while(!0);if(yx(),it=n,Km.current=r,Zt!==null)throw Error(se(261));return pn=null,On=0,ln}function o8(){for(;Zt!==null;)iO(Zt)}function a8(){for(;Zt!==null&&!N6();)iO(Zt)}function iO(t){var e=aO(t.alternate,t,Rr);t.memoizedProps=t.pendingProps,e===null?sO(t):Zt=e,Ox.current=null}function sO(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=e8(n,e),n!==null){n.flags&=32767,Zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ln=6,Zt=null;return}}else if(n=Q4(n,e,Rr),n!==null){Zt=n;return}if(e=e.sibling,e!==null){Zt=e;return}Zt=e=t}while(e!==null);ln===0&&(ln=5)}function Wa(t,e,n){var r=dt,i=hi.transition;try{hi.transition=null,dt=1,l8(t,e,n,r)}finally{hi.transition=i,dt=r}return null}function l8(t,e,n,r){do Nc();while(Ko!==null);if(it&6)throw Error(se(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(U6(t,s),t===pn&&(Zt=pn=null,On=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Uh||(Uh=!0,lO(Om,function(){return Nc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=hi.transition,hi.transition=null;var o=dt;dt=1;var a=it;it|=4,Ox.current=null,n8(t,n),QT(n,t),P4(Fw),Rm=!!Bw,Fw=Bw=null,t.current=n,r8(n),R6(),it=a,dt=o,hi.transition=s}else t.current=n;if(Uh&&(Uh=!1,Ko=t,qm=i),s=t.pendingLanes,s===0&&(la=null),I6(n.stateNode),kr(t,Kt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xm)throw Xm=!1,t=sb,sb=null,t;return qm&1&&t.tag!==0&&Nc(),s=t.pendingLanes,s&1?t===ob?Od++:(Od=0,ob=t):Od=0,Oa(),null}function Nc(){if(Ko!==null){var t=B$(qm),e=hi.transition,n=dt;try{if(hi.transition=null,dt=16>t?16:t,Ko===null)var r=!1;else{if(t=Ko,Ko=null,qm=0,it&6)throw Error(se(331));var i=it;for(it|=4,Se=t.current;Se!==null;){var s=Se,o=s.child;if(Se.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Se=c;Se!==null;){var u=Se;switch(u.tag){case 0:case 11:case 15:$d(8,u,s)}var d=u.child;if(d!==null)d.return=u,Se=d;else for(;Se!==null;){u=Se;var f=u.sibling,h=u.return;if(YT(u),u===c){Se=null;break}if(f!==null){f.return=h,Se=f;break}Se=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}Se=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Se=o;else e:for(;Se!==null;){if(s=Se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$d(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Se=v;break e}Se=s.return}}var y=t.current;for(Se=y;Se!==null;){o=Se;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Se=x;else e:for(o=y;Se!==null;){if(a=Se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sv(9,a)}}catch(_){Ut(a,a.return,_)}if(a===o){Se=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,Se=k;break e}Se=a.return}}if(it=i,Oa(),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(Jg,t)}catch{}r=!0}return r}finally{dt=n,hi.transition=e}}return!1}function LC(t,e,n){e=ru(n,e),e=FT(t,e,1),t=aa(t,e,1),e=Jn(),t!==null&&(Zf(t,1,e),kr(t,e))}function Ut(t,e,n){if(t.tag===3)LC(t,t,n);else for(;e!==null;){if(e.tag===3){LC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(la===null||!la.has(r))){t=ru(n,t),t=jT(e,t,1),e=aa(e,t,1),t=Jn(),e!==null&&(Zf(e,1,t),kr(e,t));break}}e=e.return}}function c8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jn(),t.pingedLanes|=t.suspendedLanes&n,pn===t&&(On&n)===n&&(ln===4||ln===3&&(On&130023424)===On&&500>Kt()-Rx?cl(t,0):Nx|=n),kr(t,e)}function oO(t,e){e===0&&(t.mode&1?(e=Nh,Nh<<=1,!(Nh&130023424)&&(Nh=4194304)):e=1);var n=Jn();t=so(t,e),t!==null&&(Zf(t,e,n),kr(t,n))}function u8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),oO(t,n)}function d8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(e),oO(t,n)}var aO;aO=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xr.current)wr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wr=!1,Z4(t,e,n);wr=!!(t.flags&131072)}else wr=!1,Mt&&e.flags&1048576&&uT(e,jm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Kp(t,e),t=e.pendingProps;var i=Qc(e,Un.current);Oc(e,n),i=Ex(null,e,r,t,i,n);var s=Ax();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sr(r)?(s=!0,Bm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xx(e),i.updater=rv,e.stateNode=i,i._reactInternals=e,Xw(e,r,t,n),e=Jw(null,e,r,!0,s,n)):(e.tag=0,Mt&&s&&px(e),Kn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Kp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=h8(r),t=Ei(r,t),i){case 0:e=Yw(null,e,r,t,n);break e;case 1:e=AC(null,e,r,t,n);break e;case 11:e=CC(null,e,r,t,n);break e;case 14:e=EC(null,e,r,Ei(r.type,t),n);break e}throw Error(se(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ei(r,i),Yw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ei(r,i),AC(t,e,r,i,n);case 3:e:{if(HT(e),t===null)throw Error(se(387));r=e.pendingProps,s=e.memoizedState,i=s.element,pT(t,e),Vm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ru(Error(se(423)),e),e=PC(t,e,r,n,i);break e}else if(r!==i){i=ru(Error(se(424)),e),e=PC(t,e,r,n,i);break e}else for(Fr=oa(e.stateNode.containerInfo.firstChild),Hr=e,Mt=!0,Ni=null,n=yT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(eu(),r===i){e=oo(t,e,n);break e}Kn(t,e,r,n)}e=e.child}return e;case 5:return wT(e),t===null&&Ww(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,jw(r,i)?o=null:s!==null&&jw(r,s)&&(e.flags|=32),VT(t,e),Kn(t,e,o,n),e.child;case 6:return t===null&&Ww(e),null;case 13:return WT(t,e,n);case 4:return Sx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=tu(e,null,r,n):Kn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ei(r,i),CC(t,e,r,i,n);case 7:return Kn(t,e,e.pendingProps,n),e.child;case 8:return Kn(t,e,e.pendingProps.children,n),e.child;case 12:return Kn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,kt(zm,r._currentValue),r._currentValue=o,s!==null)if(Wi(s.value,o)){if(s.children===i.children&&!xr.current){e=oo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Qs(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Gw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(se(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Gw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Kn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Oc(e,n),i=yi(i),r=r(i),e.flags|=1,Kn(t,e,r,n),e.child;case 14:return r=e.type,i=Ei(r,e.pendingProps),i=Ei(r.type,i),EC(t,e,r,i,n);case 15:return zT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ei(r,i),Kp(t,e),e.tag=1,Sr(r)?(t=!0,Bm(e)):t=!1,Oc(e,n),gT(e,r,i),Xw(e,r,i,n),Jw(null,e,r,!0,t,n);case 19:return GT(t,e,n);case 22:return UT(t,e,n)}throw Error(se(156,e.tag))};function lO(t,e){return M$(t,e)}function f8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(t,e,n,r){return new f8(t,e,n,r)}function Lx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function h8(t){if(typeof t=="function")return Lx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nx)return 11;if(t===rx)return 14}return 2}function ua(t,e){var n=t.alternate;return n===null?(n=ci(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yp(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Lx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case uc:return ul(n.children,i,s,e);case tx:o=8,i|=8;break;case yw:return t=ci(12,n,e,i|2),t.elementType=yw,t.lanes=s,t;case ww:return t=ci(13,n,e,i),t.elementType=ww,t.lanes=s,t;case bw:return t=ci(19,n,e,i),t.elementType=bw,t.lanes=s,t;case v$:return av(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case m$:o=10;break e;case g$:o=9;break e;case nx:o=11;break e;case rx:o=14;break e;case To:o=16,r=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=ci(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ul(t,e,n,r){return t=ci(7,t,r,e),t.lanes=n,t}function av(t,e,n,r){return t=ci(22,t,r,e),t.elementType=v$,t.lanes=n,t.stateNode={isHidden:!1},t}function Ly(t,e,n){return t=ci(6,t,null,e),t.lanes=n,t}function By(t,e,n){return e=ci(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function p8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yy(0),this.expirationTimes=yy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yy(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bx(t,e,n,r,i,s,o,a,l){return t=new p8(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ci(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xx(s),t}function m8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function cO(t){if(!t)return ga;t=t._reactInternals;e:{if(Ll(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var n=t.type;if(Sr(n))return lT(t,n,e)}return e}function uO(t,e,n,r,i,s,o,a,l){return t=Bx(n,r,!0,t,i,s,o,a,l),t.context=cO(null),n=t.current,r=Jn(),i=ca(n),s=Qs(r,i),s.callback=e??null,aa(n,s,i),t.current.lanes=i,Zf(t,i,r),kr(t,r),t}function lv(t,e,n,r){var i=e.current,s=Jn(),o=ca(i);return n=cO(n),e.context===null?e.context=n:e.pendingContext=n,e=Qs(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=aa(i,e,o),t!==null&&(ji(t,i,o,s),Hp(t,i,o)),o}function Jm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function BC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fx(t,e){BC(t,e),(t=t.alternate)&&BC(t,e)}function g8(){return null}var dO=typeof reportError=="function"?reportError:function(t){console.error(t)};function jx(t){this._internalRoot=t}cv.prototype.render=jx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));lv(t,e,null,null)};cv.prototype.unmount=jx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;kl(function(){lv(null,t,null,null)}),e[io]=null}};function cv(t){this._internalRoot=t}cv.prototype.unstable_scheduleHydration=function(t){if(t){var e=z$();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Lo.length&&e!==0&&e<Lo[n].priority;n++);Lo.splice(n,0,t),n===0&&V$(t)}};function zx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function FC(){}function v8(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Jm(o);s.call(c)}}var o=uO(e,r,t,0,null,!1,!1,"",FC);return t._reactRootContainer=o,t[io]=o.current,Zd(t.nodeType===8?t.parentNode:t),kl(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Jm(l);a.call(c)}}var l=Bx(t,0,!1,null,null,!1,!1,"",FC);return t._reactRootContainer=l,t[io]=l.current,Zd(t.nodeType===8?t.parentNode:t),kl(function(){lv(e,l,n,r)}),l}function dv(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Jm(o);a.call(l)}}lv(e,o,t,i)}else o=v8(n,e,t,i,r);return Jm(o)}F$=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ud(e.pendingLanes);n!==0&&(ox(e,n|1),kr(e,Kt()),!(it&6)&&(iu=Kt()+500,Oa()))}break;case 13:kl(function(){var r=so(t,1);if(r!==null){var i=Jn();ji(r,t,1,i)}}),Fx(t,1)}};ax=function(t){if(t.tag===13){var e=so(t,134217728);if(e!==null){var n=Jn();ji(e,t,134217728,n)}Fx(t,134217728)}};j$=function(t){if(t.tag===13){var e=ca(t),n=so(t,e);if(n!==null){var r=Jn();ji(n,t,e,r)}Fx(t,e)}};z$=function(){return dt};U$=function(t,e){var n=dt;try{return dt=t,e()}finally{dt=n}};Tw=function(t,e,n){switch(e){case"input":if(kw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=tv(r);if(!i)throw Error(se(90));w$(r),kw(r,i)}}}break;case"textarea":x$(t,n);break;case"select":e=n.value,e!=null&&Ac(t,!!n.multiple,e,!1)}};P$=Mx;$$=kl;var y8={usingClientEntryPoint:!1,Events:[eh,pc,tv,E$,A$,Mx]},Wu={findFiberByHostInstance:tl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},w8={bundleType:Wu.bundleType,version:Wu.version,rendererPackageName:Wu.rendererPackageName,rendererConfig:Wu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:go.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=N$(t),t===null?null:t.stateNode},findFiberByHostInstance:Wu.findFiberByHostInstance||g8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vh.isDisabled&&Vh.supportsFiber)try{Jg=Vh.inject(w8),ks=Vh}catch{}}Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y8;Xr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zx(e))throw Error(se(200));return m8(t,e,null,n)};Xr.createRoot=function(t,e){if(!zx(t))throw Error(se(299));var n=!1,r="",i=dO;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Bx(t,1,!1,null,null,n,!1,r,i),t[io]=e.current,Zd(t.nodeType===8?t.parentNode:t),new jx(e)};Xr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=N$(e),t=t===null?null:t.stateNode,t};Xr.flushSync=function(t){return kl(t)};Xr.hydrate=function(t,e,n){if(!uv(e))throw Error(se(200));return dv(null,t,e,!0,n)};Xr.hydrateRoot=function(t,e,n){if(!zx(t))throw Error(se(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=dO;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=uO(e,null,t,1,n??null,i,!1,s,o),t[io]=e.current,Zd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new cv(e)};Xr.render=function(t,e,n){if(!uv(e))throw Error(se(200));return dv(null,t,e,!1,n)};Xr.unmountComponentAtNode=function(t){if(!uv(t))throw Error(se(40));return t._reactRootContainer?(kl(function(){dv(null,null,t,!1,function(){t._reactRootContainer=null,t[io]=null})}),!0):!1};Xr.unstable_batchedUpdates=Mx;Xr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!uv(n))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return dv(t,e,n,!1,r)};Xr.version="18.2.0-next-9e3b772b8-20220608";function fO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fO)}catch(t){console.error(t)}}fO(),u$.exports=Xr;var vo=u$.exports;const b8=xu(vo);var jC=vo;gw.createRoot=jC.createRoot,gw.hydrateRoot=jC.hydrateRoot;function bt(){return bt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bt.apply(this,arguments)}function ve(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Ji(t,e=[]){let n=[];function r(s,o){const a=g.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:f,children:h,...p}=d,m=(f==null?void 0:f[t][l])||a,w=g.useMemo(()=>p,Object.values(p));return g.createElement(m.Provider,{value:w},h)}function u(d,f){const h=(f==null?void 0:f[t][l])||a,p=g.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=n.map(o=>g.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,x8(i,...e)]}function x8(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function S8(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function fv(...t){return e=>t.forEach(n=>S8(n,e))}function st(...t){return g.useCallback(fv(...t),t)}const _l=g.forwardRef((t,e)=>{const{children:n,...r}=t,i=g.Children.toArray(n),s=i.find(_8);if(s){const o=s.props.children,a=i.map(l=>l===s?g.Children.count(o)>1?g.Children.only(null):g.isValidElement(o)?o.props.children:null:l);return g.createElement(cb,bt({},r,{ref:e}),g.isValidElement(o)?g.cloneElement(o,void 0,a):null)}return g.createElement(cb,bt({},r,{ref:e}),n)});_l.displayName="Slot";const cb=g.forwardRef((t,e)=>{const{children:n,...r}=t;return g.isValidElement(n)?g.cloneElement(n,{...C8(r,n.props),ref:e?fv(e,n.ref):n.ref}):g.Children.count(n)>1?g.Children.only(null):null});cb.displayName="SlotClone";const k8=({children:t})=>g.createElement(g.Fragment,null,t);function _8(t){return g.isValidElement(t)&&t.type===k8}function C8(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function nh(t){const e=t+"CollectionProvider",[n,r]=Ji(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:p,children:m}=h,w=Ht.useRef(null),v=Ht.useRef(new Map).current;return Ht.createElement(i,{scope:p,itemMap:v,collectionRef:w},m)},a=t+"CollectionSlot",l=Ht.forwardRef((h,p)=>{const{scope:m,children:w}=h,v=s(a,m),y=st(p,v.collectionRef);return Ht.createElement(_l,{ref:y},w)}),c=t+"CollectionItemSlot",u="data-radix-collection-item",d=Ht.forwardRef((h,p)=>{const{scope:m,children:w,...v}=h,y=Ht.useRef(null),x=st(p,y),k=s(c,m);return Ht.useEffect(()=>(k.itemMap.set(y,{ref:y,...v}),()=>void k.itemMap.delete(y))),Ht.createElement(_l,{[u]:"",ref:x},w)});function f(h){const p=s(t+"CollectionConsumer",h);return Ht.useCallback(()=>{const w=p.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((k,_)=>v.indexOf(k.ref.current)-v.indexOf(_.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,r]}const bi=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},E8=j1.useId||(()=>{});let A8=0;function Cl(t){const[e,n]=g.useState(E8());return bi(()=>{t||n(r=>r??String(A8++))},[t]),t||(e?`radix-${e}`:"")}const P8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ge=P8.reduce((t,e)=>{const n=g.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?_l:e;return g.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),g.createElement(a,bt({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Ux(t,e){t&&vo.flushSync(()=>t.dispatchEvent(e))}function er(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function ao({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=$8({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=er(n),l=g.useCallback(c=>{if(s){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else i(c)},[s,t,i,a]);return[o,l]}function $8({defaultProp:t,onChange:e}){const n=g.useState(t),[r]=n,i=g.useRef(r),s=er(e);return g.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const T8=g.createContext(void 0);function rh(t){const e=g.useContext(T8);return t||e||"ltr"}const Fy="rovingFocusGroup.onEntryFocus",O8={bubbles:!1,cancelable:!0},Vx="RovingFocusGroup",[ub,hO,N8]=nh(Vx),[R8,hv]=Ji(Vx,[N8]),[M8,D8]=R8(Vx),I8=g.forwardRef((t,e)=>g.createElement(ub.Provider,{scope:t.__scopeRovingFocusGroup},g.createElement(ub.Slot,{scope:t.__scopeRovingFocusGroup},g.createElement(L8,bt({},t,{ref:e}))))),L8=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,...u}=t,d=g.useRef(null),f=st(e,d),h=rh(s),[p=null,m]=ao({prop:o,defaultProp:a,onChange:l}),[w,v]=g.useState(!1),y=er(c),x=hO(n),k=g.useRef(!1),[_,P]=g.useState(0);return g.useEffect(()=>{const A=d.current;if(A)return A.addEventListener(Fy,y),()=>A.removeEventListener(Fy,y)},[y]),g.createElement(M8,{scope:n,orientation:r,dir:h,loop:i,currentTabStopId:p,onItemFocus:g.useCallback(A=>m(A),[m]),onItemShiftTab:g.useCallback(()=>v(!0),[]),onFocusableItemAdd:g.useCallback(()=>P(A=>A+1),[]),onFocusableItemRemove:g.useCallback(()=>P(A=>A-1),[])},g.createElement(Ge.div,bt({tabIndex:w||_===0?-1:0,"data-orientation":r},u,{ref:f,style:{outline:"none",...t.style},onMouseDown:ve(t.onMouseDown,()=>{k.current=!0}),onFocus:ve(t.onFocus,A=>{const C=!k.current;if(A.target===A.currentTarget&&C&&!w){const N=new CustomEvent(Fy,O8);if(A.currentTarget.dispatchEvent(N),!N.defaultPrevented){const R=x().filter(V=>V.focusable),M=R.find(V=>V.active),L=R.find(V=>V.id===p),T=[M,L,...R].filter(Boolean).map(V=>V.ref.current);pO(T)}}k.current=!1}),onBlur:ve(t.onBlur,()=>v(!1))})))}),B8="RovingFocusGroupItem",F8=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,a=Cl(),l=s||a,c=D8(B8,n),u=c.currentTabStopId===l,d=hO(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return g.useEffect(()=>{if(r)return f(),()=>h()},[r,f,h]),g.createElement(ub.ItemSlot,{scope:n,id:l,focusable:r,active:i},g.createElement(Ge.span,bt({tabIndex:u?0:-1,"data-orientation":c.orientation},o,{ref:e,onMouseDown:ve(t.onMouseDown,p=>{r?c.onItemFocus(l):p.preventDefault()}),onFocus:ve(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:ve(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const m=U8(p,c.orientation,c.dir);if(m!==void 0){p.preventDefault();let v=d().filter(y=>y.focusable).map(y=>y.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const y=v.indexOf(p.currentTarget);v=c.loop?V8(v,y+1):v.slice(y+1)}setTimeout(()=>pO(v))}})})))}),j8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function z8(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function U8(t,e,n){const r=z8(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return j8[r]}function pO(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function V8(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const mO=I8,gO=F8;function H8(t,e){return g.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const yo=t=>{const{present:e,children:n}=t,r=W8(e),i=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),s=st(r.ref,i.ref);return typeof n=="function"||r.isPresent?g.cloneElement(i,{ref:s}):null};yo.displayName="Presence";function W8(t){const[e,n]=g.useState(),r=g.useRef({}),i=g.useRef(t),s=g.useRef("none"),o=t?"mounted":"unmounted",[a,l]=H8(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const c=Hh(r.current);s.current=a==="mounted"?c:"none"},[a]),bi(()=>{const c=r.current,u=i.current;if(u!==t){const f=s.current,h=Hh(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),bi(()=>{if(e){const c=d=>{const h=Hh(r.current).includes(d.animationName);d.target===e&&h&&vo.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(s.current=Hh(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Hh(t){return(t==null?void 0:t.animationName)||"none"}const vO="Tabs",[G8,ane]=Ji(vO,[hv]),yO=hv(),[K8,Hx]=G8(vO),X8=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=rh(a),[d,f]=ao({prop:r,onChange:i,defaultProp:s});return g.createElement(K8,{scope:n,baseId:Cl(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l},g.createElement(Ge.div,bt({dir:u,"data-orientation":o},c,{ref:e})))}),q8="TabsList",Y8=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=Hx(q8,n),o=yO(n);return g.createElement(mO,bt({asChild:!0},o,{orientation:s.orientation,dir:s.dir,loop:r}),g.createElement(Ge.div,bt({role:"tablist","aria-orientation":s.orientation},i,{ref:e})))}),J8="TabsTrigger",zC=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=Hx(J8,n),a=yO(n),l=wO(o.baseId,r),c=bO(o.baseId,r),u=r===o.value;return g.createElement(gO,bt({asChild:!0},a,{focusable:!i,active:u}),g.createElement(Ge.button,bt({type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},s,{ref:e,onMouseDown:ve(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:ve(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:ve(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!i&&d&&o.onValueChange(r)})})))}),Z8="TabsContent",jy=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=Hx(Z8,n),l=wO(a.baseId,r),c=bO(a.baseId,r),u=r===a.value,d=g.useRef(u);return g.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),g.createElement(yo,{present:i||u},({present:f})=>g.createElement(Ge.div,bt({"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0},o,{ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0}}),f&&s))});function wO(t,e){return`${t}-trigger-${e}`}function bO(t,e){return`${t}-content-${e}`}var en={BASE_URL:"/VonSim8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let Q8=0;function Ae(t,e){const n=`atom${++Q8}`,r={toString:()=>n};return typeof t=="function"?r.read=t:(r.init=t,r.read=function(i){return i(this)},r.write=function(i,s,o){return s(this,typeof o=="function"?o(i(this)):o)}),e&&(r.write=e),r}const zy=t=>"init"in t,Uy=t=>!!t.write,Zm=new WeakMap,eB=(t,e)=>{Zm.set(t,e),t.catch(()=>{}).finally(()=>Zm.delete(t))},UC=(t,e)=>{const n=Zm.get(t);n&&(Zm.delete(t),n(e))},VC=(t,e)=>{t.status="fulfilled",t.value=e},HC=(t,e)=>{t.status="rejected",t.reason=e},tB=t=>typeof(t==null?void 0:t.then)=="function",Gu=(t,e)=>!!t&&"v"in t&&"v"in e&&Object.is(t.v,e.v),WC=(t,e)=>!!t&&"e"in t&&"e"in e&&Object.is(t.e,e.e),Hl=t=>!!t&&"v"in t&&t.v instanceof Promise,nB=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,Wh=t=>{if("e"in t)throw t.e;return t.v},Wx=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let r,i;(en?"production":void 0)!=="production"&&(r=new Set,i=new Set);const s=C=>t.get(C),o=(C,N)=>{(en?"production":void 0)!=="production"&&Object.freeze(N);const R=t.get(C);if(t.set(C,N),n.has(C)||n.set(C,R),Hl(R)){const M="v"in N?N.v instanceof Promise?N.v:Promise.resolve(N.v):Promise.reject(N.e);R.v!==M&&UC(R.v,M)}},a=(C,N,R)=>{const M=new Map;let L=!1;R.forEach((H,T)=>{!H&&T===C&&(H=N),H?(M.set(T,H),N.d.get(T)!==H&&(L=!0)):(en?"production":void 0)!=="production"&&console.warn("[Bug] atom state not found")}),(L||N.d.size!==M.size)&&(N.d=M)},l=(C,N,R)=>{const M=s(C),L={d:(M==null?void 0:M.d)||new Map,v:N};if(R&&a(C,L,R),Gu(M,L)&&M.d===L.d)return M;if(Hl(M)&&Hl(L)&&nB(M,L)){if(M.d===L.d)return M;L.v=M.v}return o(C,L),L},c=(C,N,R,M)=>{if(tB(N)){let L;const H=()=>{const V=s(C);if(!Hl(V)||V.v!==T)return;const q=l(C,T,R);e.has(C)&&V.d!==q.d&&_(C,q,V.d)},T=new Promise((V,q)=>{let te=!1;N.then(W=>{te||(te=!0,VC(T,W),V(W),H())},W=>{te||(te=!0,HC(T,W),q(W),H())}),L=W=>{te||(te=!0,W.then(j=>VC(T,j),j=>HC(T,j)),V(W))}});return T.orig=N,T.status="pending",eB(T,V=>{V&&L(V),M==null||M()}),l(C,T,R)}return l(C,N,R)},u=(C,N,R)=>{const M=s(C),L={d:(M==null?void 0:M.d)||new Map,e:N};return R&&a(C,L,R),WC(M,L)&&M.d===L.d?M:(o(C,L),L)},d=(C,N)=>{const R=s(C);if(!N&&R&&(e.has(C)||Array.from(R.d).every(([te,W])=>{if(te===C)return!0;const j=d(te);return j===W||Gu(j,W)})))return R;const M=new Map;let L=!0;const H=te=>{if(te===C){const j=s(te);if(j)return M.set(te,j),Wh(j);if(zy(te))return M.set(te,void 0),te.init;throw new Error("no atom init")}const W=d(te);return M.set(te,W),Wh(W)};let T,V;const q={get signal(){return T||(T=new AbortController),T.signal},get setSelf(){return(en?"production":void 0)!=="production"&&!Uy(C)&&console.warn("setSelf function cannot be used with read-only atom"),!V&&Uy(C)&&(V=(...te)=>{if((en?"production":void 0)!=="production"&&L&&console.warn("setSelf function cannot be called in sync"),!L)return y(C,...te)}),V}};try{const te=C.read(H,q);return c(C,te,M,()=>T==null?void 0:T.abort())}catch(te){return u(C,te,M)}finally{L=!1}},f=C=>Wh(d(C)),h=C=>{let N=e.get(C);return N||(N=x(C)),N},p=(C,N)=>!N.l.size&&(!N.t.size||N.t.size===1&&N.t.has(C)),m=C=>{const N=e.get(C);N&&p(C,N)&&k(C)},w=C=>{const N=new Map,R=new WeakMap,M=T=>{var V;const q=new Set((V=e.get(T))==null?void 0:V.t);return n.forEach((te,W)=>{var j;(j=s(W))!=null&&j.d.has(T)&&q.add(W)}),q},L=T=>{M(T).forEach(V=>{V!==T&&(N.set(V,(N.get(V)||new Set).add(T)),R.set(V,(R.get(V)||0)+1),L(V))})};L(C);const H=T=>{M(T).forEach(V=>{var q;if(V!==T){let te=R.get(V);if(te&&R.set(V,--te),!te){let W=!!((q=N.get(V))!=null&&q.size);if(W){const j=s(V),Z=d(V,!0);W=!Gu(j,Z)}W||N.forEach(j=>j.delete(V))}H(V)}})};H(C)},v=(C,...N)=>{let R=!0;const M=T=>Wh(d(T)),L=(T,...V)=>{let q;if(T===C){if(!zy(T))throw new Error("atom not writable");const te=s(T),W=c(T,V[0]);Gu(te,W)||w(T)}else q=v(T,...V);if(!R){const te=P();(en?"production":void 0)!=="production"&&r.forEach(W=>W({type:"async-write",flushed:te}))}return q},H=C.write(M,L,...N);return R=!1,H},y=(C,...N)=>{const R=v(C,...N),M=P();return(en?"production":void 0)!=="production"&&r.forEach(L=>L({type:"write",flushed:M})),R},x=(C,N,R)=>{var M;const L=R||[];(M=s(C))==null||M.d.forEach((T,V)=>{const q=e.get(V);q?q.t.add(C):V!==C&&x(V,C,L)}),d(C);const H={t:new Set(N&&[N]),l:new Set};if(e.set(C,H),(en?"production":void 0)!=="production"&&i.add(C),Uy(C)&&C.onMount){const{onMount:T}=C;L.push(()=>{const V=T((...q)=>y(C,...q));V&&(H.u=V)})}return R||L.forEach(T=>T()),H},k=C=>{var N;const R=(N=e.get(C))==null?void 0:N.u;R&&R(),e.delete(C),(en?"production":void 0)!=="production"&&i.delete(C);const M=s(C);M?(Hl(M)&&UC(M.v),M.d.forEach((L,H)=>{if(H!==C){const T=e.get(H);T&&(T.t.delete(C),p(H,T)&&k(H))}})):(en?"production":void 0)!=="production"&&console.warn("[Bug] could not find atom state to unmount",C)},_=(C,N,R)=>{const M=new Set(N.d.keys());R==null||R.forEach((L,H)=>{if(M.has(H)){M.delete(H);return}const T=e.get(H);T&&(T.t.delete(C),p(H,T)&&k(H))}),M.forEach(L=>{const H=e.get(L);H?H.t.add(C):e.has(C)&&x(L,C)})},P=()=>{let C;for((en?"production":void 0)!=="production"&&(C=new Set);n.size;){const N=Array.from(n);n.clear(),N.forEach(([R,M])=>{const L=s(R);if(L){const H=e.get(R);H&&L.d!==(M==null?void 0:M.d)&&_(R,L,M==null?void 0:M.d),H&&!(!Hl(M)&&(Gu(M,L)||WC(M,L)))&&(H.l.forEach(T=>T()),(en?"production":void 0)!=="production"&&C.add(R))}else(en?"production":void 0)!=="production"&&console.warn("[Bug] no atom state to flush")})}if((en?"production":void 0)!=="production")return C},A=(C,N)=>{const R=h(C),M=P(),L=R.l;return L.add(N),(en?"production":void 0)!=="production"&&r.forEach(H=>H({type:"sub",flushed:M})),()=>{L.delete(N),m(C),(en?"production":void 0)!=="production"&&r.forEach(H=>H({type:"unsub"}))}};return(en?"production":void 0)!=="production"?{get:f,set:y,sub:A,dev_subscribe_store:(C,N)=>{if(N!==2)throw new Error("The current StoreListener revision is 2.");return r.add(C),()=>{r.delete(C)}},dev_get_mounted_atoms:()=>i.values(),dev_get_atom_state:C=>t.get(C),dev_get_mounted:C=>e.get(C),dev_restore_atoms:C=>{for(const[R,M]of C)zy(R)&&(c(R,M),w(R));const N=P();r.forEach(R=>R({type:"restore",flushed:N}))}}:{get:f,set:y,sub:A}};let Vy;(en?"production":void 0)!=="production"&&(typeof globalThis.__NUMBER_OF_JOTAI_INSTANCES__=="number"?++globalThis.__NUMBER_OF_JOTAI_INSTANCES__:globalThis.__NUMBER_OF_JOTAI_INSTANCES__=1);const rB=()=>(Vy||((en?"production":void 0)!=="production"&&globalThis.__NUMBER_OF_JOTAI_INSTANCES__!==1&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"),Vy=Wx()),Vy);var iB={BASE_URL:"/VonSim8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const xO=g.createContext(void 0),SO=t=>{const e=g.useContext(xO);return(t==null?void 0:t.store)||e||rB()},sB=({children:t,store:e})=>{const n=g.useRef();return!e&&!n.current&&(n.current=Wx()),g.createElement(xO.Provider,{value:e||n.current},t)},oB=t=>typeof(t==null?void 0:t.then)=="function",aB=Ht.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function Xt(t,e){const n=SO(e),[[r,i,s],o]=g.useReducer(c=>{const u=n.get(t);return Object.is(c[0],u)&&c[1]===n&&c[2]===t?c:[u,n,t]},void 0,()=>[n.get(t),n,t]);let a=r;(i!==n||s!==t)&&(o(),a=n.get(t));const l=e==null?void 0:e.delay;return g.useEffect(()=>{const c=n.sub(t,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),c},[n,t,l]),g.useDebugValue(a),oB(a)?aB(a):a}function kO(t,e){const n=SO(e);return g.useCallback((...i)=>{if((iB?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...i)},[n,t])}function Cu(t,e){return[Xt(t,e),kO(t,e)]}const{createElement:su,createContext:lB,createRef:lne,forwardRef:_O,useCallback:Pr,useContext:CO,useEffect:dl,useImperativeHandle:EO,useLayoutEffect:cB,useMemo:uB,useRef:Dr,useState:Qm}=j1,GC=j1.useId,pv=lB(null);pv.displayName="PanelGroupContext";const lf=cB,dB=typeof GC=="function"?GC:()=>null;let fB=0;function Gx(t=null){const e=dB(),n=Dr(t||e||null);return n.current===null&&(n.current=""+fB++),t??n.current}function AO({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:f,style:h,tagName:p="div",...m}){const w=CO(pv);if(w===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:y,getPanelSize:x,getPanelStyle:k,groupId:_,isPanelCollapsed:P,registerPanel:A,resizePanel:C,unregisterPanel:N}=w,R=Gx(o),M=Dr({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:a,minSize:l},id:R,idIsFromProps:o!==void 0,order:f});Dr({didLogMissingDefaultSizeWarning:!1}),lf(()=>{const{callbacks:H,constraints:T}=M.current;M.current.id=R,M.current.idIsFromProps=o!==void 0,M.current.order=f,H.onCollapse=c,H.onExpand=u,H.onResize=d,T.collapsedSize=n,T.collapsible=r,T.defaultSize=i,T.maxSize=a,T.minSize=l}),lf(()=>{const H=M.current;return A(H),()=>{N(H)}},[f,R,A,N]),EO(s,()=>({collapse:()=>{v(M.current)},expand:()=>{y(M.current)},getId(){return R},getSize(){return x(M.current)},isCollapsed(){return P(M.current)},isExpanded(){return!P(M.current)},resize:H=>{C(M.current,H)}}),[v,y,x,P,R,C]);const L=k(M.current,i);return su(p,{...m,children:t,className:e,style:{...L,...h},"data-panel":"","data-panel-id":R,"data-panel-group-id":_,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const Jp=_O((t,e)=>su(AO,{...t,forwardedRef:e}));AO.displayName="Panel";Jp.displayName="forwardRef(Panel)";function Ve(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const PO=10;function cf(t,e,n=PO){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const r=t-e;return r===0?0:r>0?1:-1}function Nr(t,e,n){return cf(t,e,n)===0}function xc({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];Ve(r!=null);let{collapsedSize:i=0,collapsible:s,maxSize:o=100,minSize:a=0}=r;if(cf(n,a)<0)if(s){const l=(i+a)/2;cf(n,l)<0?n=i:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(PO)),n}function fd({delta:t,layout:e,panelConstraints:n,pivotIndices:r,trigger:i}){if(Nr(t,0))return e;const s=[...e],[o,a]=r;Ve(o!=null),Ve(a!=null);let l=0;if(i==="keyboard"){{const u=t<0?a:o,d=n[u];if(Ve(d),d.collapsible){const f=e[u];Ve(f!=null);const h=n[u];Ve(h);const{collapsedSize:p=0,minSize:m=0}=h;if(Nr(f,p)){const w=m-f;cf(w,Math.abs(t))>0&&(t=t<0?0-w:w)}}}{const u=t<0?o:a,d=n[u];Ve(d);const{collapsible:f}=d;if(f){const h=e[u];Ve(h!=null);const p=n[u];Ve(p);const{collapsedSize:m=0,minSize:w=0}=p;if(Nr(h,w)){const v=h-m;cf(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}}{const u=t<0?1:-1;let d=t<0?a:o,f=0;for(;;){const p=e[d];Ve(p!=null);const w=xc({panelConstraints:n,panelIndex:d,size:100})-p;if(f+=w,d+=u,d<0||d>=n.length)break}const h=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-h:h}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(l),h=e[d];Ve(h!=null);const p=h-f,m=xc({panelConstraints:n,panelIndex:d,size:p});if(!Nr(h,m)&&(l+=h-m,s[d]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(Nr(l,0))return e;{const u=t<0?a:o,d=e[u];Ve(d!=null);const f=d+l,h=xc({panelConstraints:n,panelIndex:u,size:f});if(s[u]=h,!Nr(h,f)){let p=f-h,w=t<0?a:o;for(;w>=0&&w<n.length;){const v=s[w];Ve(v!=null);const y=v+p,x=xc({panelConstraints:n,panelIndex:w,size:y});if(Nr(v,x)||(p-=x-v,s[w]=x),Nr(p,0))break;t>0?w--:w++}}}const c=s.reduce((u,d)=>d+u,0);return Nr(c,100)?s:e}function hB({layout:t,panelsArray:e,pivotIndices:n}){let r=0,i=100,s=0,o=0;const a=n[0];Ve(a!=null),e.forEach((d,f)=>{const{constraints:h}=d,{maxSize:p=100,minSize:m=0}=h;f===a?(r=m,i=p):(s+=m,o+=p)});const l=Math.min(i,100-s),c=Math.max(r,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function uf(t,e){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function $O(t,e,n){const i=uf(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return i??null}function TO(t,e,n){const r=$O(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function OO(t,e){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return r||null}function mv(t,e){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function pB(t,e,n,r){var i,s,o,a;const l=mv(e,r),c=uf(t,r),u=l?c.indexOf(l):-1,d=(i=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:null,f=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,f]}function mB({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:i,panelGroupElement:s,setLayout:o}){Dr({didWarnAboutMissingResizeHandle:!1}),lf(()=>{if(!s)return;const a=uf(n,s);for(let l=0;l<i.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=hB({layout:r,panelsArray:i,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const h=i[l];Ve(h),f.setAttribute("aria-controls",h.id),f.setAttribute("aria-valuemax",""+Math.round(c)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,r,i,s]),dl(()=>{if(!s)return;const a=e.current;Ve(a);const{panelDataArray:l}=a,c=OO(n,s);Ve(c!=null,`No group found for id "${n}"`);const u=uf(n,s);Ve(u);const d=u.map(f=>{const h=f.getAttribute("data-panel-resize-handle-id");Ve(h);const[p,m]=pB(n,h,l,s);if(p==null||m==null)return()=>{};const w=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const y=l.findIndex(x=>x.id===p);if(y>=0){const x=l[y];Ve(x);const k=r[y],{collapsedSize:_=0,collapsible:P,minSize:A=0}=x.constraints;if(k!=null&&P){const C=fd({delta:Nr(k,_)?A-_:_-k,layout:r,panelConstraints:l.map(N=>N.constraints),pivotIndices:TO(n,h,s),trigger:"keyboard"});r!==C&&o(C)}}break}}};return f.addEventListener("keydown",w),()=>{f.removeEventListener("keydown",w)}});return()=>{d.forEach(f=>f())}},[s,t,e,n,r,i,o])}function KC(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function NO(t){return t.type==="keydown"}function RO(t){return t.type.startsWith("mouse")}function MO(t){return t.type.startsWith("touch")}function DO(t,e){const n=t==="horizontal";if(RO(e))return n?e.clientX:e.clientY;if(MO(e)){const r=e.touches[0];return Ve(r),n?r.screenX:r.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function gB(t,e,n,r,i){const s=n==="horizontal",o=mv(e,i);Ve(o);const a=o.getAttribute("data-panel-group-id");Ve(a);let{initialCursorPosition:l}=r;const c=DO(n,t),u=OO(a,i);Ve(u);const d=u.getBoundingClientRect(),f=s?d.width:d.height;return(c-l)/f*100}function vB(t,e,n,r,i,s){if(NO(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:i!=null?a=i:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return r==null?0:gB(t,e,n,r,s)}function yB({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let r=0,i=100;for(let s=0;s<t.length;s++){const o=n[s];Ve(o);const{defaultSize:a}=o;a!=null&&(r++,e[s]=a,i-=a)}for(let s=0;s<t.length;s++){const o=n[s];Ve(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-r,c=i/l;r++,e[s]=c,i-=c}return e}function Wl(t,e,n){e.forEach((r,i)=>{const s=t[i];Ve(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||r!==d){n[l]=r;const{onCollapse:f,onExpand:h,onResize:p}=o;p&&p(r,d),u&&(f||h)&&(h&&(d==null||d===c)&&r!==c&&h(),f&&(d==null||d!==c)&&r===c&&f())}})}function Gh(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function wB({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:i,precision:s=3}){const o=n[i];let a;return o==null?a=t??"1":r.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let db=null,il=null;function IO(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function bB(){il!==null&&(document.head.removeChild(il),db=null,il=null)}function Hy(t){if(db===t)return;db=t;const e=IO(t);il===null&&(il=document.createElement("style"),document.head.appendChild(il)),il.innerHTML=`*{cursor: ${e}!important;}`}function xB(t,e=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function XC(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function LO(t){return`react-resizable-panels:${t}`}function BO(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:i,order:s}=e;return i?r:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function FO(t,e){try{const n=LO(t),r=e.getItem(n);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function SB(t,e,n){var r,i;const s=(r=FO(t,n))!==null&&r!==void 0?r:{},o=BO(e);return(i=s[o])!==null&&i!==void 0?i:null}function kB(t,e,n,r,i){var s;const o=LO(t),a=BO(e),l=(s=FO(t,i))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function qC({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!Nr(r,100))for(let s=0;s<e.length;s++){const o=n[s];Ve(o!=null);const a=100/r*o;n[s]=a}let i=0;for(let s=0;s<e.length;s++){const o=n[s];Ve(o!=null);const a=xc({panelConstraints:e,panelIndex:s,size:o});o!=a&&(i+=o-a,n[s]=a)}if(!Nr(i,0))for(let s=0;s<e.length;s++){const o=n[s];Ve(o!=null);const a=o+i,l=xc({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(i-=l-o,n[s]=l,Nr(i,0)))break}return n}const _B=100,hd={getItem:t=>(XC(hd),hd.getItem(t)),setItem:(t,e)=>{XC(hd),hd.setItem(t,e)}},YC={};function jO({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:i,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=hd,style:c,tagName:u="div",...d}){const f=Gx(s),h=Dr(null),[p,m]=Qm(null),[w,v]=Qm([]),y=Dr({}),x=Dr(new Map),k=Dr(0),_=Dr({autoSaveId:t,direction:r,dragState:p,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),P=Dr({layout:w,panelDataArray:[],panelDataArrayChanged:!1});Dr({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),EO(i,()=>({getId:()=>_.current.id,getLayout:()=>{const{layout:K}=P.current;return K},setLayout:K=>{const{onLayout:Q}=_.current,{layout:ae,panelDataArray:B}=P.current,I=qC({layout:K,panelConstraints:B.map(z=>z.constraints)});KC(ae,I)||(v(I),P.current.layout=I,Q&&Q(I),Wl(B,I,y.current))}}),[]),lf(()=>{_.current.autoSaveId=t,_.current.direction=r,_.current.dragState=p,_.current.id=f,_.current.onLayout=o,_.current.storage=l}),mB({committedValuesRef:_,eagerValuesRef:P,groupId:f,layout:w,panelDataArray:P.current.panelDataArray,setLayout:v,panelGroupElement:h.current}),dl(()=>{const{panelDataArray:K}=P.current;if(t){if(w.length===0||w.length!==K.length)return;let Q=YC[t];Q==null&&(Q=xB(kB,_B),YC[t]=Q);const ae=[...K],B=new Map(x.current);Q(t,ae,B,w,l)}},[t,w,l]),dl(()=>{});const A=Pr(K=>{const{onLayout:Q}=_.current,{layout:ae,panelDataArray:B}=P.current;if(K.constraints.collapsible){const I=B.map(D=>D.constraints),{collapsedSize:z=0,panelSize:S,pivotIndices:$}=Gl(B,K,ae);if(Ve(S!=null),S!==z){x.current.set(K.id,S);const O=ec(B,K)===B.length-1?S-z:z-S,U=fd({delta:O,layout:ae,panelConstraints:I,pivotIndices:$,trigger:"imperative-api"});Gh(ae,U)||(v(U),P.current.layout=U,Q&&Q(U),Wl(B,U,y.current))}}},[]),C=Pr(K=>{const{onLayout:Q}=_.current,{layout:ae,panelDataArray:B}=P.current;if(K.constraints.collapsible){const I=B.map(O=>O.constraints),{collapsedSize:z=0,panelSize:S,minSize:$=0,pivotIndices:D}=Gl(B,K,ae);if(S===z){const O=x.current.get(K.id),U=O!=null&&O>=$?O:$,ee=ec(B,K)===B.length-1?S-U:U-S,J=fd({delta:ee,layout:ae,panelConstraints:I,pivotIndices:D,trigger:"imperative-api"});Gh(ae,J)||(v(J),P.current.layout=J,Q&&Q(J),Wl(B,J,y.current))}}},[]),N=Pr(K=>{const{layout:Q,panelDataArray:ae}=P.current,{panelSize:B}=Gl(ae,K,Q);return Ve(B!=null),B},[]),R=Pr((K,Q)=>{const{panelDataArray:ae}=P.current,B=ec(ae,K);return wB({defaultSize:Q,dragState:p,layout:w,panelData:ae,panelIndex:B})},[p,w]),M=Pr(K=>{const{layout:Q,panelDataArray:ae}=P.current,{collapsedSize:B=0,collapsible:I,panelSize:z}=Gl(ae,K,Q);return I===!0&&z===B},[]),L=Pr(K=>{const{layout:Q,panelDataArray:ae}=P.current,{collapsedSize:B=0,collapsible:I,panelSize:z}=Gl(ae,K,Q);return Ve(z!=null),!I||z>B},[]),H=Pr(K=>{const{panelDataArray:Q}=P.current;Q.push(K),Q.sort((ae,B)=>{const I=ae.order,z=B.order;return I==null&&z==null?0:I==null?-1:z==null?1:I-z}),P.current.panelDataArrayChanged=!0},[]);lf(()=>{if(P.current.panelDataArrayChanged){P.current.panelDataArrayChanged=!1;const{autoSaveId:K,onLayout:Q,storage:ae}=_.current,{layout:B,panelDataArray:I}=P.current;let z=null;if(K){const $=SB(K,I,ae);$&&(x.current=new Map(Object.entries($.expandToSizes)),z=$.layout)}z==null&&(z=yB({panelDataArray:I}));const S=qC({layout:z,panelConstraints:I.map($=>$.constraints)});KC(B,S)||(v(S),P.current.layout=S,Q&&Q(S),Wl(I,S,y.current))}});const T=Pr(K=>function(ae){ae.preventDefault();const B=h.current;if(!B)return()=>null;const{direction:I,dragState:z,id:S,keyboardResizeBy:$,onLayout:D}=_.current,{layout:O,panelDataArray:U}=P.current,{initialLayout:X}=z??{},ee=TO(S,K,B);let J=vB(ae,K,I,z,$,B);if(J===0)return;const ie=I==="horizontal";document.dir==="rtl"&&ie&&(J=-J);const Me=U.map(ze=>ze.constraints),he=fd({delta:J,layout:X??O,panelConstraints:Me,pivotIndices:ee,trigger:NO(ae)?"keyboard":"mouse-or-touch"}),Le=!Gh(O,he);(RO(ae)||MO(ae))&&k.current!=J&&(k.current=J,Hy(Le?ie?"horizontal":"vertical":ie?J<0?"horizontal-min":"horizontal-max":J<0?"vertical-min":"vertical-max")),Le&&(v(he),P.current.layout=he,D&&D(he),Wl(U,he,y.current))},[]),V=Pr((K,Q)=>{const{onLayout:ae}=_.current,{layout:B,panelDataArray:I}=P.current,z=I.map(X=>X.constraints),{panelSize:S,pivotIndices:$}=Gl(I,K,B);Ve(S!=null);const O=ec(I,K)===I.length-1?S-Q:Q-S,U=fd({delta:O,layout:B,panelConstraints:z,pivotIndices:$,trigger:"imperative-api"});Gh(B,U)||(v(U),P.current.layout=U,ae&&ae(U),Wl(I,U,y.current))},[]),q=Pr((K,Q)=>{const{direction:ae}=_.current,{layout:B}=P.current;if(!h.current)return;const I=mv(K,h.current);Ve(I);const z=DO(ae,Q);m({dragHandleId:K,dragHandleRect:I.getBoundingClientRect(),initialCursorPosition:z,initialLayout:B})},[]),te=Pr(()=>{bB(),m(null)},[]),W=Pr(K=>{const{panelDataArray:Q}=P.current,ae=ec(Q,K);ae>=0&&(Q.splice(ae,1),delete y.current[K.id],P.current.panelDataArrayChanged=!0)},[]),j=uB(()=>({collapsePanel:A,direction:r,dragState:p,expandPanel:C,getPanelSize:N,getPanelStyle:R,groupId:f,isPanelCollapsed:M,isPanelExpanded:L,registerPanel:H,registerResizeHandle:T,resizePanel:V,startDragging:q,stopDragging:te,unregisterPanel:W,panelGroupElement:h.current}),[A,p,r,C,N,R,f,M,L,H,T,V,q,te,W]),Z={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return su(pv.Provider,{value:j},su(u,{...d,children:e,className:n,style:{...Z,...c},ref:h,"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":f}))}const zO=_O((t,e)=>su(jO,{...t,forwardedRef:e}));jO.displayName="PanelGroup";zO.displayName="forwardRef(PanelGroup)";function ec(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Gl(t,e,n){const r=t.map(c=>c.constraints),i=ec(t,e),s=r[i],a=i===t.length-1?[i-1,i]:[i,i+1],l=n[i];return{...s,panelSize:l,pivotIndices:a}}function CB({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){dl(()=>{if(t||n==null||r==null)return;const i=mv(e,r);if(i==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=i.getAttribute("data-panel-group-id");Ve(a);const l=uf(a,r),c=$O(a,e,r);Ve(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return i.addEventListener("keydown",s),()=>{i.removeEventListener("keydown",s)}},[r,t,e,n])}function fb({children:t=null,className:e="",disabled:n=!1,id:r,onDragging:i,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=Dr(null),u=Dr({onDragging:i});dl(()=>{u.current.onDragging=i});const d=CO(pv);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,dragState:h,groupId:p,registerResizeHandle:m,startDragging:w,stopDragging:v,panelGroupElement:y}=d,x=Gx(r),k=(h==null?void 0:h.dragHandleId)===x,[_,P]=Qm(!1),[A,C]=Qm(null),N=Pr(()=>{const M=c.current;Ve(M),M.blur(),v();const{onDragging:L}=u.current;L&&L(!1)},[v]);dl(()=>{if(n)C(null);else{const M=m(x);C(()=>M)}},[n,x,m]),dl(()=>{if(n||A==null||!k)return;const M=V=>{A(V)},L=V=>{A(V)},H=c.current;Ve(H);const T=H.ownerDocument;return T.body.addEventListener("contextmenu",N),T.body.addEventListener("mousemove",M),T.body.addEventListener("touchmove",M),T.body.addEventListener("mouseleave",L),window.addEventListener("mouseup",N),window.addEventListener("touchend",N),()=>{T.body.removeEventListener("contextmenu",N),T.body.removeEventListener("mousemove",M),T.body.removeEventListener("touchmove",M),T.body.removeEventListener("mouseleave",L),window.removeEventListener("mouseup",N),window.removeEventListener("touchend",N)}},[f,n,k,A,N]),CB({disabled:n,handleId:x,resizeHandler:A,panelGroupElement:y});const R={cursor:IO(f),touchAction:"none",userSelect:"none"};return su(a,{...l,children:t,className:e,onBlur:()=>P(!1),onFocus:()=>P(!0),onMouseDown:M=>{w(x,M.nativeEvent);const L=u.current;Ve(L);const{onDragging:H}=L;H&&H(!0)},onMouseUp:N,onTouchCancel:N,onTouchEnd:N,onTouchStart:M=>{w(x,M.nativeEvent);const L=u.current;Ve(L);const{onDragging:H}=L;H&&H(!0)},ref:c,role:"separator",style:{...R,...s},tabIndex:o,"data-panel-group-direction":f,"data-panel-group-id":p,"data-resize-handle":"","data-resize-handle-active":k?"pointer":_?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":x})}fb.displayName="PanelResizeHandle";var ms=function(){return ms=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ms.apply(this,arguments)};function UO(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function EB(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var AB=function(){};function PB(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function $B(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var VO=typeof window<"u",TB=VO?window:null,JC=function(t){return!!t.addEventListener},ZC=function(t){return!!t.on},Zp=function(t,e,n,r){n===void 0&&(n=TB),g.useEffect(function(){if(e&&n)return JC(n)?PB(n,t,e,r):ZC(n)&&n.on(t,e,r),function(){JC(n)?$B(n,t,e,r):ZC(n)&&n.off(t,e,r)}},[t,e,n,JSON.stringify(r)])},OB=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},eo=function(t,e,n,r){e===void 0&&(e=AB),n===void 0&&(n={}),r===void 0&&(r=[t]);var i=n.event,s=i===void 0?"keydown":i,o=n.target,a=n.options,l=g.useMemo(function(){var c=OB(t),u=function(d){if(c(d))return e(d)};return u},r);Zp(s,l,o,a)},NB=function(t,e){return e!==void 0?e:VO?window.matchMedia(t).matches:!1},RB=function(t,e){var n=g.useState(NB(t,e)),r=n[0],i=n[1];return g.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&i(!!o.matches)};return o.addListener(a),i(o.matches),function(){s=!1,o.removeListener(a)}},[t]),r};const MB="modulepreload",DB=function(t){return"/VonSim8/"+t},QC={},IB=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=DB(o),o in QC)return;QC[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":MB,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function LB(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l,c;const u=async(f=!0)=>{await l,await(c==null?void 0:c())};async function d(){if("serviceWorker"in navigator){const{Workbox:f}=await IB(()=>import("./workbox-window.prod.es5-prqDwDSL.js"),__vite__mapDeps([]));a=new f("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"}),c=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let h=!1;const p=()=>{h=!0,a==null||a.addEventListener("controlling",m=>{m.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",m=>{typeof m.isUpdate>"u"?typeof m.isExternal<"u"?m.isExternal?p():!h&&(r==null||r()):m.isExternal?window.location.reload():!h&&(r==null||r()):m.isUpdate||r==null||r()}),a.addEventListener("waiting",p),a.addEventListener("externalwaiting",p)}a.register({immediate:e}).then(h=>{s?s("/VonSim8/sw.js",h):i==null||i(h)}).catch(h=>{o==null||o(h)})}}return l=d(),u}function BB(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=g.useState(!1),[c,u]=g.useState(!1),[d]=g.useState(()=>LB({immediate:e,onOfflineReady(){u(!0),r==null||r()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:i,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[c,u],updateServiceWorker:d}}class lt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=ou(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),gs.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=ou(this,e,n);let r=[];return this.decompose(e,n,r,0),gs.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Nd(this),s=new Nd(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Nd(this,e)}iterRange(e,n=this.length){return new HO(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new WO(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?lt.empty:e.length<=32?new Wt(e):gs.from(Wt.split(e,[]))}}class Wt extends lt{constructor(e,n=FB(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new jB(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new Wt(eE(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=Qp(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Wt(a,o.length+s.length));else{let l=a.length>>1;r.push(new Wt(a.slice(0,l)),new Wt(a.slice(l)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof Wt))return super.replace(e,n,r);[e,n]=ou(this,e,n);let i=Qp(this.text,Qp(r.text,eE(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new Wt(i,s):gs.from(Wt.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=ou(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new Wt(r,i)),r=[],i=-1);return i>-1&&n.push(new Wt(r,i)),n}}class gs extends lt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=i&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?r.push(a):a.decompose(e-o,n-o,r,c)}o=l+1}}replace(e,n,r){if([e,n]=ou(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[i]=l,new gs(u,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=ou(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof gs))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],c=e.children[s];if(l!=c)return r+l.scanIdentical(c,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let h of e)r+=h.lines;if(r<32){let h=[];for(let p of e)p.flatten(h);return new Wt(h,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,u=[];function d(h){let p;if(h.lines>s&&h instanceof gs)for(let m of h.children)d(m);else h.lines>o&&(l>o||!l)?(f(),a.push(h)):h instanceof Wt&&l&&(p=u[u.length-1])instanceof Wt&&h.lines+p.lines<=32?(l+=h.lines,c+=h.length+1,u[u.length-1]=new Wt(p.text.concat(h.text),p.length+1+h.length)):(l+h.lines>i&&f(),l+=h.lines,c+=h.length+1,u.push(h))}function f(){l!=0&&(a.push(u.length==1?u[0]:gs.from(u,c)),c=-1,l=u.length=0)}for(let h of e)d(h);return f(),a.length==1?a[0]:new gs(a,n)}}lt.empty=new Wt([""],0);function FB(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Qp(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function eE(t,e,n){return Qp(t,[""],e,n)}class Nd{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Wt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof Wt?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Wt){let l=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Wt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class HO{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Nd(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class WO{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(lt.prototype[Symbol.iterator]=function(){return this.iter()},Nd.prototype[Symbol.iterator]=HO.prototype[Symbol.iterator]=WO.prototype[Symbol.iterator]=function(){return this});class jB{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function ou(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}let Rc="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Rc.length;t++)Rc[t]+=Rc[t-1];function zB(t){for(let e=1;e<Rc.length;e+=2)if(Rc[e]>t)return Rc[e-1]<=t;return!1}function tE(t){return t>=127462&&t<=127487}const nE=8205;function Pn(t,e,n=!0,r=!0){return(n?GO:UB)(t,e,r)}function GO(t,e,n){if(e==t.length)return e;e&&KO(t.charCodeAt(e))&&XO(t.charCodeAt(e-1))&&e--;let r=Xn(t,e);for(e+=Mi(r);e<t.length;){let i=Xn(t,e);if(r==nE||i==nE||n&&zB(i))e+=Mi(i),r=i;else if(tE(i)){let s=0,o=e-2;for(;o>=0&&tE(Xn(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function UB(t,e,n){for(;e>0;){let r=GO(t,e-2,n);if(r<e)return r;e--}return 0}function KO(t){return t>=56320&&t<57344}function XO(t){return t>=55296&&t<56320}function Xn(t,e){let n=t.charCodeAt(e);if(!XO(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return KO(r)?(n-55296<<10)+(r-56320)+65536:n}function Kx(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Mi(t){return t<65536?1:2}const hb=/\r\n?|\n/;var vr=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(vr||(vr={}));class Cs{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){pb(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new Cs(e)}composeDesc(e){return this.empty?e:e.empty?this:qO(this,e)}mapDesc(e,n=!1){return e.empty?this:mb(this,e,n)}mapPos(e,n=-1,r=vr.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(r!=vr.Simple&&c>=e&&(r==vr.TrackDel&&i<e&&c>e||r==vr.TrackBefore&&i<e||r==vr.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Cs(e)}static create(e){return new Cs(e)}}class sn extends Cs{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return pb(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return mb(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(lt.empty);r.push(o?e.slice(s,s+o):lt.empty)}s+=o}return new sn(n,r)}compose(e){return this.empty?e:e.empty?this:qO(this,e,!0)}map(e,n=!1){return e.empty?this:mb(this,e,n,!0)}iterChanges(e,n=!1){pb(this,e,n)}get desc(){return Cs.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new df(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);Bn(i,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;Bn(n,u,d),d>0&&Xo(r,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);Bn(n,u,-1),Bn(i,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new sn(n,r),filtered:Cs.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!i.length)return;o<n&&Bn(i,n-o,-1);let d=new sn(i,s);a=a?a.compose(d.map(a)):d,i=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof sn){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:f=d,insert:h}=u;if(d>f||d<0||f>n)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${n})`);let p=h?typeof h=="string"?lt.of(h.split(r||hb)):h:lt.empty,m=p.length;if(d==f&&m==0)return;d<o&&l(),d>o&&Bn(i,d-o,-1),Bn(i,f-d,m),Xo(s,i,p),o=f}}return c(e),l(!a),a}static empty(e){return new sn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(lt.empty);r[i]=lt.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new sn(n,r)}static createSet(e,n){return new sn(e,n)}}function Bn(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Xo(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(lt.empty);t.push(n)}}function pb(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,u=s,d=lt.empty;for(;c+=a,u+=l,l&&r&&(d=d.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,c,s,u,d),i=c,s=u}}}function mb(t,e,n,r=!1){let i=[],s=r?[]:null,o=new df(t),a=new df(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);Bn(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(Bn(i,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(Bn(i,0,o.ins),s&&Xo(s,i,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;Bn(i,c,l<o.i?o.ins:0),s&&l<o.i&&Xo(s,i,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?sn.createSet(i,s):Cs.create(i);throw new Error("Mismatched change set lengths")}}function qO(t,e,n=!1){let r=[],i=n?[]:null,s=new df(t),o=new df(e);for(let a=!1;;){if(s.done&&o.done)return i?sn.createSet(r,i):Cs.create(r);if(s.ins==0)Bn(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)Bn(r,0,o.ins,a),i&&Xo(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Bn(r,l,u,a),i&&u&&Xo(i,r,o.text)}else o.ins==-1?(Bn(r,s.off?0:s.len,l,a),i&&Xo(i,r,s.textBit(l))):(Bn(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Xo(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),s.forward2(l),o.forward(l)}}}}class df{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?lt.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?lt.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class sl{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new sl(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return re.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return re.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return re.range(e.anchor,e.head)}static create(e,n,r){return new sl(e,n,r)}}class re{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:re.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new re([this.main],0)}addRange(e,n=!0){return re.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,re.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new re(e.ranges.map(n=>sl.fromJSON(n)),e.main)}static single(e,n=e){return new re([re.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return re.normalized(e.slice(),n);r=s.to}return new re(e,n)}static cursor(e,n=0,r,i){return sl.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?sl.create(n,e,48|s):sl.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?re.range(l,a):re.range(a,l))}}return new re(e,n)}}function YO(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Xx=0;class Ee{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=Xx++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ee(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:qx),!!e.static,e.enables)}of(e){return new em([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new em(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new em(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function qx(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class em{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=Xx++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=r(d),1},update(d,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||gb(d,u)){let h=r(d);if(a?!rE(h,d.values[o],i):!i(h,d.values[o]))return d.values[o]=h,1}return 0},reconfigure:(d,f)=>{let h,p=f.config.address[s];if(p!=null){let m=tg(f,p);if(this.dependencies.every(w=>w instanceof Ee?f.facet(w)===d.facet(w):w instanceof ir?f.field(w,!1)==d.field(w,!1):!0)||(a?rE(h=r(d),m,i):i(h=r(d),m)))return d.values[o]=m,0}else h=r(d);return d.values[o]=h,1}}}}function rE(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function gb(t,e){let n=!1;for(let r of e)Rd(t,r)&1&&(n=!0);return n}function VB(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<r.length;u++){let d=tg(l,r[u]);if(i[u]==2)for(let f of d)c.push(f);else c.push(d)}return e.combine(c)}return{create(l){for(let c of r)Rd(l,c);return l.values[o]=a(l),1},update(l,c){if(!gb(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=gb(l,r),d=c.config.facets[e.id],f=c.facet(e);if(d&&!u&&qx(n,d))return l.values[o]=f,0;let h=a(l);return e.compare(h,f)?(l.values[o]=f,0):(l.values[o]=h,1)}}}const iE=Ee.define({static:!0});class ir{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new ir(Xx++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(iE).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}init(e){return[this,iE.of({field:this,create:e})]}get extension(){return this}}const Xa={lowest:4,low:3,default:2,high:1,highest:0};function Ku(t){return e=>new JO(e,t)}const ih={highest:Ku(Xa.highest),high:Ku(Xa.high),default:Ku(Xa.default),low:Ku(Xa.low),lowest:Ku(Xa.lowest)};class JO{constructor(e,n){this.inner=e,this.prec=n}}class sh{of(e){return new vb(this,e)}reconfigure(e){return sh.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class vb{constructor(e,n){this.compartment=e,this.inner=n}}class eg{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let f of HB(e,n,o))f instanceof ir?i.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of i)a[f.id]=c.length<<1,c.push(h=>f.slot(h));let u=r==null?void 0:r.config.facets;for(let f in s){let h=s[f],p=h[0].facet,m=u&&u[f]||[];if(h.every(w=>w.type==0))if(a[p.id]=l.length<<1|1,qx(m,h))l.push(r.facet(p));else{let w=p.combine(h.map(v=>v.value));l.push(r&&p.compare(w,r.facet(p))?r.facet(p):w)}else{for(let w of h)w.type==0?(a[w.id]=l.length<<1|1,l.push(w.value)):(a[w.id]=c.length<<1,c.push(v=>w.dynamicSlot(v)));a[p.id]=c.length<<1,c.push(w=>VB(w,p,h))}}let d=c.map(f=>f(a));return new eg(e,o,d,a,l,s)}}function HB(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof vb&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof vb){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof JO)s(o.inner,o.prec);else if(o instanceof ir)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof em)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,Xa.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,Xa.default),r.reduce((o,a)=>o.concat(a))}function Rd(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function tg(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const ZO=Ee.define(),yb=Ee.define({combine:t=>t.some(e=>e),static:!0}),QO=Ee.define({combine:t=>t.length?t[0]:void 0,static:!0}),eN=Ee.define(),tN=Ee.define(),nN=Ee.define(),rN=Ee.define({combine:t=>t.length?t[0]:!1});class wo{constructor(e,n){this.type=e,this.value=n}static define(){return new WB}}class WB{of(e){return new wo(this,e)}}class GB{constructor(e){this.map=e}of(e){return new Ke(this,e)}}class Ke{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Ke(this.type,n)}is(e){return this.type==e}static define(e={}){return new GB(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}Ke.reconfigure=Ke.define();Ke.appendConfig=Ke.define();class cn{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&YO(r,n.newLength),s.some(a=>a.type==cn.time)||(this.annotations=s.concat(cn.time.of(Date.now())))}static create(e,n,r,i,s,o){return new cn(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(cn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}cn.time=wo.define();cn.userEvent=wo.define();cn.addToHistory=wo.define();cn.remote=wo.define();function KB(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function iN(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=sn.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:Ke.mapEffects(t.effects,i).concat(Ke.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function wb(t,e,n){let r=e.selection,i=Mc(e.annotations);return e.userEvent&&(i=i.concat(cn.userEvent.of(e.userEvent))),{changes:e.changes instanceof sn?e.changes:sn.of(e.changes||[],n,t.facet(QO)),selection:r&&(r instanceof re?r:re.single(r.anchor,r.head)),effects:Mc(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function sN(t,e,n){let r=wb(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=iN(r,wb(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=cn.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return qB(n?XB(i):i)}function XB(t){let e=t.startState,n=!0;for(let i of e.facet(eN)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:KB(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=sn.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=cn.create(e,i,t.selection&&t.selection.map(s),Ke.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(tN);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof cn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof cn?t=s[0]:t=sN(e,Mc(s),!1)}return t}function qB(t){let e=t.startState,n=e.facet(nN),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=iN(r,wb(e,s,t.changes.newLength),!0))}return r==t?t:cn.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const YB=[];function Mc(t){return t==null?YB:Array.isArray(t)?t:[t]}var $n=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}($n||($n={}));const JB=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let bb;try{bb=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function ZB(t){if(bb)return bb.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||JB.test(n)))return!0}return!1}function QB(t){return e=>{if(!/\S/.test(e))return $n.Space;if(ZB(e))return $n.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return $n.Word;return $n.Other}}class Ye{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Rd(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Rd(this,r),tg(this,r)}update(...e){return sN(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(sh.reconfigure)?(n&&(i=new Map,n.compartments.forEach((l,c)=>i.set(c,l)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(Ke.reconfigure)?(n=null,r=a.value):a.is(Ke.appendConfig)&&(n=null,r=Mc(r).concat(a.value));let s;n?s=e.startState.values.slice():(n=eg.resolve(r,i,this),s=new Ye(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(yb)?e.newSelection:e.newSelection.asSingle();new Ye(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:re.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=Mc(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(i);for(let f=0;f<a;f++)s[f]=s[f].map(u);let d=i.mapDesc(c,!0);s.push(l.range.map(d)),i=i.compose(u),o=Ke.mapEffects(o,u).concat(Ke.mapEffects(Mc(l.effects),d))}return{changes:i,selection:re.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof sn?e:sn.of(e,this.doc.length,this.facet(Ye.lineSeparator))}toText(e){return lt.of(e.split(this.facet(Ye.lineSeparator)||hb))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Rd(this,n),tg(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof ir&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Ye.create({doc:e.doc,selection:re.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=eg.resolve(e.extensions||[],new Map),r=e.doc instanceof lt?e.doc:lt.of((e.doc||"").split(n.staticFacet(Ye.lineSeparator)||hb)),i=e.selection?e.selection instanceof re?e.selection:re.single(e.selection.anchor,e.selection.head):re.single(0);return YO(i,r.length),n.staticFacet(yb)||(i=i.asSingle()),new Ye(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Ye.tabSize)}get lineBreak(){return this.facet(Ye.lineSeparator)||`
`}get readOnly(){return this.facet(rN)}phrase(e,...n){for(let r of this.facet(Ye.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(ZO))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return QB(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Pn(n,o,!1);if(s(n.slice(l,o))!=$n.Word)break;o=l}for(;a<i;){let l=Pn(n,a);if(s(n.slice(a,l))!=$n.Word)break;a=l}return o==a?null:re.range(o+r,a+r)}}Ye.allowMultipleSelections=yb;Ye.tabSize=Ee.define({combine:t=>t.length?t[0]:4});Ye.lineSeparator=QO;Ye.readOnly=rN;Ye.phrases=Ee.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Ye.languageData=ZO;Ye.changeFilter=eN;Ye.transactionFilter=tN;Ye.transactionExtender=nN;sh.reconfigure=Ke.define();function Na(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class El{eq(e){return this==e}range(e,n=e){return xb.create(e,n,this)}}El.prototype.startSide=El.prototype.endSide=0;El.prototype.point=!1;El.prototype.mapMode=vr.TrackDel;let xb=class oN{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new oN(e,n,r)}};function Sb(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Yx{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,f,h;if(u==d){let p=n.mapPos(u,c.startSide,c.mapMode);if(p==null||(f=h=p,c.startSide!=c.endSide&&(h=n.mapPos(u,c.endSide),h<f)))continue}else if(f=n.mapPos(u,c.startSide),h=n.mapPos(d,c.endSide),f>h||f==h&&c.startSide>0&&c.endSide<=0)continue;(h-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,h-f)),r.push(c),i.push(f-o),s.push(h-o))}return{mapped:r.length?new Yx(i,s,r,a):null,pos:o}}}class ut{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new ut(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(Sb)),this.isEmpty)return n.length?ut.of(n):this;let a=new aN(this,null,-1).goto(0),l=0,c=[],u=new Al;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(xb.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?ut.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(i=Math.max(i,u.maxPoint),n.push(u),r.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new ut(r,n,s||ut.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return ff.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return ff.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=sE(o,a,r),c=new Xu(o,l,s),u=new Xu(a,l,s);r.iterGaps((d,f,h)=>oE(c,d,u,f,h,i)),r.empty&&r.length==0&&oE(c,0,u,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=sE(s,o),l=new Xu(s,a,0).goto(r),c=new Xu(o,a,0).goto(r);for(;;){if(l.to!=c.to||!kb(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,n,r,i,s=-1){let o=new Xu(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:Math.min(u.length,l);i.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new Al;for(let i of e instanceof xb?[e]:n?eF(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return ut.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=ut.empty;i=i.nextLayer)n=new ut(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}ut.empty=new ut([],[],null,-1);function eF(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(Sb(e,r)>0)return t.slice().sort(Sb);e=r}return t}ut.empty.nextLayer=ut.empty;class Al{finishChunk(e){this.chunks.push(new Yx(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Al)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(ut.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ut.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function sE(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class aN{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class ff{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new aN(o,n,r,s));return i.length==1?i[0]:new ff(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Wy(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Wy(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Wy(this.heap,0)}}}function Wy(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Xu{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ff.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Kh(this.active,e),Kh(this.activeTo,e),Kh(this.activeRank,e),this.minActive=aE(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Xh(this.active,n,r),Xh(this.activeTo,n,i),Xh(this.activeRank,n,s),e&&Xh(e,n,this.cursor.from),this.minActive=aE(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Kh(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function oE(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,l=r-e;for(;;){let c=t.to+l-n.to||t.endSide-n.endSide,u=c<0?t.to+l:n.to,d=Math.min(u,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&kb(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!kb(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),u>o)break;a=u,c<=0&&t.next(),c>=0&&n.next()}}function kb(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Kh(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Xh(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function aE(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function oh(t,e,n=t.length){let r=0;for(let i=0;i<n;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Pn(t,i));return r}function tF(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Pn(t,i)}return r===!0?-1:t.length}const _b="",lE=typeof Symbol>"u"?"__"+_b:Symbol.for(_b),Cb=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),cE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class va{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let h in a){let p=a[h];if(/&/.test(h))s(h.split(/,\s*/).map(m=>o.map(w=>m.replace(/&/,w))).reduce((m,w)=>m.concat(w)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+h+") should be a primitive value.");s(i(h),p,u,f)}else p!=null&&u.push(h.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(u.length||f)&&l.push((r&&!d&&!c?o.map(r):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=cE[lE]||1;return cE[lE]=e+1,_b+e.toString(36)}static mount(e,n,r){let i=e[Cb],s=r&&r.nonce;i?s&&i.setNonce(s):i=new nF(e,s),i.mount(Array.isArray(n)?n:[n])}}let uE=new Map;class nF{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=uE.get(r);if(s)return e.adoptedStyleSheets=[s.sheet,...e.adoptedStyleSheets],e[Cb]=s;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],uE.set(r,this)}else{this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);let s=e.head||e;s.insertBefore(this.styleTag,s.firstChild)}this.modules=[],e[Cb]=this}mount(e){let n=this.sheet,r=0,i=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),a==-1){if(this.modules.splice(i++,0,o),n)for(let l=0;l<o.rules.length;l++)n.insertRule(o.rules[l],r++)}else{for(;i<a;)r+=this.modules[i++].rules.length;r+=o.rules.length,i++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ya={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},hf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},rF=typeof navigator<"u"&&/Mac/.test(navigator.platform),iF=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var kn=0;kn<10;kn++)ya[48+kn]=ya[96+kn]=String(kn);for(var kn=1;kn<=24;kn++)ya[kn+111]="F"+kn;for(var kn=65;kn<=90;kn++)ya[kn]=String.fromCharCode(kn+32),hf[kn]=String.fromCharCode(kn);for(var Gy in ya)hf.hasOwnProperty(Gy)||(hf[Gy]=ya[Gy]);function sF(t){var e=rF&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||iF&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?hf:ya)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function ng(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Eb(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function oF(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function tm(t,e){if(!e.anchorNode)return!1;try{return Eb(t,e.anchorNode)}catch{return!1}}function pf(t){return t.nodeType==3?Pl(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Md(t,e,n,r){return n?dE(t,e,n,r,-1)||dE(t,e,n,r,1):!1}function mf(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function dE(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:lo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=mf(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?lo(t):0}else return!1}}function lo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Jx(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function aF(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function lN(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function lF(t,e,n,r,i,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let f,h=u==l.body,p=1,m=1;if(h)f=aF(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let y=u.getBoundingClientRect();({scaleX:p,scaleY:m}=lN(u,y)),f={left:y.left,right:y.left+u.clientWidth*p,top:y.top,bottom:y.top+u.clientHeight*m}}let w=0,v=0;if(i=="nearest")e.top<f.top?(v=-(f.top-e.top+o),n>0&&e.bottom>f.bottom+v&&(v=e.bottom-f.bottom+v+o)):e.bottom>f.bottom&&(v=e.bottom-f.bottom+o,n<0&&e.top-v<f.top&&(v=-(f.top+v-e.top+o)));else{let y=e.bottom-e.top,x=f.bottom-f.top;v=(i=="center"&&y<=x?e.top+y/2-x/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-x+o)-f.top}if(r=="nearest"?e.left<f.left?(w=-(f.left-e.left+s),n>0&&e.right>f.right+w&&(w=e.right-f.right+w+s)):e.right>f.right&&(w=e.right-f.right+s,n<0&&e.left<f.left+w&&(w=-(f.left+w-e.left+s))):w=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,w||v)if(h)c.scrollBy(w,v);else{let y=0,x=0;if(v){let k=u.scrollTop;u.scrollTop+=v/m,x=(u.scrollTop-k)*m}if(w){let k=u.scrollLeft;u.scrollLeft+=w/p,y=(u.scrollLeft-k)*p}e={left:e.left-y,top:e.top-x,right:e.right-y,bottom:e.bottom-x},y&&Math.abs(y-w)<1&&(r="nearest"),x&&Math.abs(x-v)<1&&(i="nearest")}if(h)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function cF(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class uF{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?lo(n):0),r,Math.min(e.focusOffset,r?lo(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Kl=null;function cN(t){if(t.setActive)return t.setActive();if(Kl)return t.focus(Kl);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Kl==null?{get preventScroll(){return Kl={preventScroll:!0},!0}}:void 0),!Kl){Kl=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let fE;function Pl(t,e,n=e){let r=fE||(fE=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Dc(t,e,n){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,t.dispatchEvent(i);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,t.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}function dF(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function uN(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function fF(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,lo(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=lo(n))}else{if(n==t)return!0;r=mf(n),n=n.parentNode}}function dN(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class zn{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new zn(e.parentNode,mf(e),n)}static after(e,n){return new zn(e.parentNode,mf(e)+1,n)}}const Zx=[];class $t{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=$t.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=hE(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=hE(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=lo(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!$t.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=r,u=r;l<this.children.length;l++){let d=this.children[l],f=c+d.length;if(c<e&&f>n)return d.domBoundsAround(e,n,c);if(f>=e&&i==-1&&(i=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+d.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=Zx){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}this.children.splice(e,n-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new fN(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}$t.prototype.breakAfter=0;function hE(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class fN{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function hN(t,e,n,r,i,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,f=d?d.breakAfter:o;if(!(e==r&&u&&!o&&!f&&s.length<2&&u.merge(n,i,s.length?d:null,n==0,a,l))){if(r<c.length){let h=c[r];h&&(i<h.length||h.breakAfter&&(d!=null&&d.breakAfter))?(e==r&&(h=h.split(i),i=0),!f&&d&&h.merge(0,i,d,!0,0,l)?s[s.length-1]=h:((i||h.children.length&&!h.children[0].length)&&h.merge(0,i,null,!1,0,l),s.push(h))):h!=null&&h.breakAfter&&(d?d.breakAfter=1:o=1),r++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function pN(t,e,n,r,i,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let f of r)d+=f.length;t.length+=d,hN(t,c,u,a,l,r,0,i,s)}let Br=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Ab=typeof document<"u"?document:{documentElement:{style:{}}};const Pb=/Edge\/(\d+)/.exec(Br.userAgent),mN=/MSIE \d/.test(Br.userAgent),$b=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Br.userAgent),gv=!!(mN||$b||Pb),pE=!gv&&/gecko\/(\d+)/i.test(Br.userAgent),Ky=!gv&&/Chrome\/(\d+)/.exec(Br.userAgent),mE="webkitFontSmoothing"in Ab.documentElement.style,gN=!gv&&/Apple Computer/.test(Br.vendor),gE=gN&&(/Mobile\/\w+/.test(Br.userAgent)||Br.maxTouchPoints>2);var _e={mac:gE||/Mac/.test(Br.platform),windows:/Win/.test(Br.platform),linux:/Linux|X11/.test(Br.platform),ie:gv,ie_version:mN?Ab.documentMode||6:$b?+$b[1]:Pb?+Pb[1]:0,gecko:pE,gecko_version:pE?+(/Firefox\/(\d+)/.exec(Br.userAgent)||[0,0])[1]:0,chrome:!!Ky,chrome_version:Ky?+Ky[1]:0,ios:gE,android:/Android\b/.test(Br.userAgent),webkit:mE,safari:gN,webkit_version:mE?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Ab.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const hF=256;class co extends $t{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof co)||this.length-(n-e)+r.length>hF||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new co(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new zn(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return pF(this.dom,e,n)}}class uo extends $t{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(uN(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return r&&(!(r instanceof uo&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(pN(this,e,n,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&n.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new uo(this.mark,n,o)}domAtPos(e){return vN(this,e)}coordsAt(e,n){return wN(this,e,n)}}function pF(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?_e.chrome||_e.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=Pl(t,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return _e.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?Jx(l,o<0):l||null}class qo extends $t{static create(e,n,r){return new qo(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=qo.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof qo)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof qo&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return lt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):lt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?zn.before(this.dom):zn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return Jx(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class au extends $t{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof au&&e.side==this.side}split(){return new au(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?zn.before(this.dom):zn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return lt.empty}get isHidden(){return!0}}co.prototype.children=qo.prototype.children=au.prototype.children=Zx;function vN(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new zn(n,0)}function yN(t,e,n){let r,{children:i}=t;n>0&&e instanceof uo&&i.length&&(r=i[i.length-1])instanceof uo&&r.mark.eq(e.mark)?yN(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function wN(t,e,n){let r=null,i=-1,s=null,o=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let h=c.children[d],p=f+h.length;p>=u&&(h.children.length?a(h,u-f):(!s||s.isHidden&&n>0)&&(p>u||f==p&&h.getSide()>0)?(s=h,o=u-f):(f<u||f==p&&h.getSide()<0&&!h.isHidden)&&(r=h,i=u-f)),f=p}}a(t,e);let l=(n<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),n):mF(t)}function mF(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=pf(e);return n[n.length-1]||null}function Tb(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const vE=Object.create(null);function Qx(t,e,n){if(t==e)return!0;t||(t=vE),e||(e=vE);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Ob(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function gF(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class nn extends $t{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof nn))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),pN(this,e,n,r?r.children.slice():[],s,o),!0}split(e){let n=new nn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Qx(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){yN(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=Tb(n,this.attrs||{})),r&&(this.attrs=Tb({class:r},this.attrs||{}))}domAtPos(e){return vN(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(uN(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Ob(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&$t.get(i)instanceof uo;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=$t.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!_e.ios||!this.children.some(s=>s instanceof co))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof co)||/[^ -~]/.test(r.text))return null;let i=pf(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=wN(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return!1}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof nn)return s;if(o>n)break}i=o+s.breakAfter}return null}}class da extends $t{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof da)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?zn.before(this.dom):zn.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new da(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return Zx}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):lt.empty}domBoundsAround(){return null}become(e){return e instanceof da&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class Ra{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Zn=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Zn||(Zn={}));class Xe extends El{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new ah(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new wa(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=bN(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new wa(e,r,i,n,e.widget||null,!0)}static line(e){return new lh(e)}static set(e,n=!1){return ut.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Xe.none=ut.empty;class ah extends Xe{constructor(e){let{start:n,end:r}=bN(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof ah&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Qx(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}ah.prototype.point=!1;class lh extends Xe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof lh&&this.spec.class==e.spec.class&&Qx(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}lh.prototype.mapMode=vr.TrackBefore;lh.prototype.point=!0;class wa extends Xe{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?vr.TrackBefore:vr.TrackAfter:vr.TrackDel}get type(){return this.startSide!=this.endSide?Zn.WidgetRange:this.startSide<=0?Zn.WidgetBefore:Zn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof wa&&vF(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}wa.prototype.point=!0;function bN(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function vF(t,e){return t==e||!!(t&&e&&t.compare(e))}function Nb(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class Dd{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof da&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new nn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(qh(new au(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof da)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(qh(new co(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof wa){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof wa)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new da(r.widget||new yE("div"),a,r));else{let l=qo.create(r.widget||new yE("span"),a,a?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<n||r.startSide>0),u=!l.isEditable&&(e<n||s>i.length||r.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(d.append(qh(new au(1),i),s),s=i.length+Math.max(0,s-i.length)),d.append(qh(l,i),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new Dd(e,n,r,s);return o.openEnd=ut.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function qh(t,e){for(let n of e)t=new uo(n,[t],t.length);return t}class yE extends Ra{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}var Ot=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Ot||(Ot={}));const $l=Ot.LTR,eS=Ot.RTL;function xN(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const yF=xN("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),wF=xN("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Rb=Object.create(null),es=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Rb[e]=n,Rb[n]=-e}function SN(t){return t<=247?yF[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?wF[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const bF=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Yo{get dir(){return this.level%2?eS:$l}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function kN(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!kN(r.inner,i.inner))return!1}return!0}const vt=[];function xF(t,e,n,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:n,l=s?256:i;for(let c=o,u=l,d=l;c<a;c++){let f=SN(t.charCodeAt(c));f==512?f=u:f==8&&d==4&&(f=16),vt[c]=f==4?2:f,f&7&&(d=f),u=f}for(let c=o,u=l,d=l;c<a;c++){let f=vt[c];if(f==128)c<a-1&&u==vt[c+1]&&u&24?f=vt[c]=u:vt[c]=256;else if(f==64){let h=c+1;for(;h<a&&vt[h]==64;)h++;let p=c&&u==8||h<n&&vt[h]==8?d==1?1:8:256;for(let m=c;m<h;m++)vt[m]=p;c=h-1}else f==8&&d==1&&(vt[c]=1);u=f,f&7&&(d=f)}}}function SF(t,e,n,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let c=o?r[o-1].to:e,u=o<r.length?r[o].from:n;for(let d=c,f,h,p;d<u;d++)if(h=Rb[f=t.charCodeAt(d)])if(h<0){for(let m=a-3;m>=0;m-=3)if(es[m+1]==-h){let w=es[m+2],v=w&2?i:w&4?w&1?s:i:0;v&&(vt[d]=vt[es[m]]=v),a=m;break}}else{if(es.length==189)break;es[a++]=d,es[a++]=f,es[a++]=l}else if((p=vt[d])==2||p==1){let m=p==i;l=m?0:1;for(let w=a-3;w>=0;w-=3){let v=es[w+2];if(v&2)break;if(m)es[w+2]|=2;else{if(v&4)break;es[w+2]|=4}}}}}function kF(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let o=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let l=o;l<a;){let c=vt[l];if(c==256){let u=l+1;for(;;)if(u==a){if(i==n.length)break;u=n[i++].to,a=i<n.length?n[i].from:e}else if(vt[u]==256)u++;else break;let d=s==1,f=(u<e?vt[u]:r)==1,h=d==f?d?1:2:r;for(let p=u,m=i,w=m?n[m-1].to:t;p>l;)p==w&&(p=n[--m].from,w=m?n[m-1].to:t),vt[--p]=h;l=u}else s=c,l++}}}function Mb(t,e,n,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let m=vt[l];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,h=u?r:r+1,p=l;e:for(;;)if(c<s.length&&p==s[c].from){if(d)break e;let m=s[c];if(!u)for(let w=m.to,v=c+1;;){if(w==n)break e;if(v<s.length&&s[v].from==w)w=s[v++].to;else{if(vt[w]==a)break e;break}}if(c++,f)f.push(m);else{m.from>l&&o.push(new Yo(l,m.from,h));let w=m.direction==$l!=!(h%2);Db(t,w?r+1:r,i,m.inner,m.from,m.to,o),l=m.to}p=m.to}else{if(p==n||(u?vt[p]!=a:vt[p]==a))break;p++}f?Mb(t,l,p,r+1,i,f,o):l<p&&o.push(new Yo(l,p,h)),l=p}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let m=vt[l-1];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,h=u?r:r+1,p=l;e:for(;;)if(c&&p==s[c-1].to){if(d)break e;let m=s[--c];if(!u)for(let w=m.from,v=c;;){if(w==e)break e;if(v&&s[v-1].to==w)w=s[--v].from;else{if(vt[w-1]==a)break e;break}}if(f)f.push(m);else{m.to<l&&o.push(new Yo(m.to,l,h));let w=m.direction==$l!=!(h%2);Db(t,w?r+1:r,i,m.inner,m.from,m.to,o),l=m.from}p=m.from}else{if(p==e||(u?vt[p-1]!=a:vt[p-1]==a))break;p--}f?Mb(t,p,l,r+1,i,f,o):p<l&&o.push(new Yo(p,l,h)),l=p}}function Db(t,e,n,r,i,s,o){let a=e%2?2:1;xF(t,i,s,r,a),SF(t,i,s,r,a),kF(i,s,r,a),Mb(t,i,s,e,n,r,o)}function _F(t,e,n){if(!t)return[new Yo(0,0,e==eS?1:0)];if(e==$l&&!n.length&&!bF.test(t))return _N(t.length);if(n.length)for(;t.length>vt.length;)vt[vt.length]=256;let r=[],i=e==$l?0:1;return Db(t,i,i,n,0,t.length,r),r}function _N(t){return[new Yo(0,t,0)]}let CN="";function CF(t,e,n,r,i){var s;let o=r.head-t.from,a=Yo.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],c=l.side(i,n);if(o==c){let f=a+=i?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!i,n),c=l.side(i,n)}let u=Pn(t.text,o,l.forward(i,n));(u<l.from||u>l.to)&&(u=c),CN=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return d&&u==c&&d.level+(i?0:1)<l.level?re.cursor(d.side(!i,n)+t.from,d.forward(i,n)?1:-1,d.level):re.cursor(u+t.from,l.forward(i,n)?-1:1,l.level)}function EF(t,e,n){for(let r=e;r<n;r++){let i=SN(t.charCodeAt(r));if(i==1)return $l;if(i==2||i==4)return eS}return $l}const EN=Ee.define(),AN=Ee.define(),PN=Ee.define(),$N=Ee.define(),Ib=Ee.define(),TN=Ee.define(),ON=Ee.define(),NN=Ee.define({combine:t=>t.some(e=>e)}),RN=Ee.define({combine:t=>t.some(e=>e)});class Ic{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Ic(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Ic(re.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Yh=Ke.define({map:(t,e)=>t.map(e)});function zi(t,e,n){let r=t.facet($N);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const vv=Ee.define({combine:t=>t.length?t[0]:!0});let AF=0;const pd=Ee.define();class Rn{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.extension=s(this)}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new Rn(AF++,e,r,i,a=>{let l=[pd.of(a)];return o&&l.push(gf.of(c=>{let u=c.plugin(a);return u?o(u):Xe.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return Rn.define(r=>new e(r),n)}}class Xy{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(zi(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){zi(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){zi(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const MN=Ee.define(),tS=Ee.define(),gf=Ee.define(),DN=Ee.define(),nS=Ee.define(),IN=Ee.define();function wE(t,e){let n=t.state.facet(IN);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return ut.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=i;for(let f=a.length-1;f>=0;f--,l--){let h=a[f].spec.bidiIsolate,p;if(h==null&&(h=EF(e.text,c,u)),l>0&&d.length&&(p=d[d.length-1]).to==c&&p.direction==h)p.to=u,d=p.inner;else{let m={from:c,to:u,direction:h,inner:[]};d.push(m),d=m.inner}}}}),i}const LN=Ee.define();function BN(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(LN)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const md=Ee.define();class pi{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new pi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],f=n[s+1],h=Math.max(a,d),p=Math.min(u,f);if(h<=p&&new pi(h+c,p+c,h,p).addToSet(r),f>u)break;s+=2}if(!l)return r;new pi(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class rg{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=sn.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new pi(s,o,a,l))),this.changedRanges=i}static create(e,n,r){return new rg(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class bE extends $t{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new nn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new pi(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let i=-1;this.view.inputState.composing>=0&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!MF(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?$F(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;r=new pi(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(_e.ie||_e.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=NF(o,a,e.changes);return r=pi.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=_e.chrome||_e.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof da&&o.widget instanceof xE&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,f,h,p,m;if(r&&r.range.fromB<d&&r.range.toB>u){let k=Dd.build(this.view.state.doc,u,r.range.fromB,this.decorations,this.dynamicDecorationMap),_=Dd.build(this.view.state.doc,r.range.toB,d,this.decorations,this.dynamicDecorationMap);h=k.breakAtStart,p=k.openStart,m=_.openEnd;let P=this.compositionView(r);_.breakAtStart?P.breakAfter=1:_.content.length&&P.merge(P.length,P.length,_.content[0],!1,_.openStart,0)&&(P.breakAfter=_.content[0].breakAfter,_.content.shift()),k.content.length&&P.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),f=k.content.concat(P).concat(_.content)}else({content:f,breakAtStart:h,openStart:p,openEnd:m}=Dd.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:w,off:v}=s.findPos(c,1),{i:y,off:x}=s.findPos(l,-1);hN(this,y,x,w,v,f,h,p,m)}r&&this.fixCompositionDOM(r)}compositionView(e){let n=new co(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new uo(i,[n],n.length);let r=new nn;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=$t.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&tm(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(_e.gecko&&a.empty&&!this.hasComposition&&PF(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new zn(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Md(l.node,l.offset,u.anchorNode,u.anchorOffset)||!Md(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{_e.android&&_e.chrome&&this.dom.contains(u.focusNode)&&RF(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=ng(this.view.root);if(d)if(a.empty){if(_e.gecko){let f=TF(l.node,l.offset);if(f&&f!=3){let h=jN(l.node,l.offset,f==1?1:-1);h&&(l=new zn(h.node,h.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new zn(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new zn(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Md(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=ng(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=nn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);r.collapse(u.node,u.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=$t.get(n.childNodes[i]);s instanceof nn&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=$t.get(n.childNodes[i]);s instanceof nn&&(r=s.domAtPos(s.length))}return r?new zn(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=$t.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof nn)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof nn&&!(r instanceof nn&&n>=0))&&(r=a,i=c),s=c}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof nn))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof co))return null;let s=Pn(i.text,r);if(s==r)return null;let o=Pl(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Ot.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],f=c+d.length;if(f>i)break;if(c>=r){let h=d.dom.getBoundingClientRect();if(n.push(h.height),o){let p=d.dom.lastChild,m=p?pf(p):[];if(m.length){let w=m[m.length-1],v=l?w.right-h.left:h.right-w.left;v>a&&(a=v,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Ot.RTL:Ot.LTR}measureTextSize(){for(let s of this.children)if(s instanceof nn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=pf(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new fN(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(Xe.replace({widget:new xE(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Xe.set(e)}updateDeco(){let e=this.view.state.facet(gf).map((i,s)=>(this.dynamicDecorationMap[s]=typeof i=="function")?i(this.view):i),n=!1,r=this.view.state.facet(DN).map((i,s)=>{let o=typeof i=="function";return o&&(n=!0),o?i(this.view):i});r.length&&(this.dynamicDecorationMap[e.length]=n,e.push(ut.join(r)));for(let i=e.length;i<e.length+3;i++)this.dynamicDecorationMap[i]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=BN(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;lF(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Ot.LTR)}}function PF(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class xE extends Ra{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}}function FN(t,e){let n=t.observer.selectionRange,r=n.focusNode&&jN(n.focusNode,n.focusOffset,0);if(!r)return null;let i=e-r.offset;return{from:i,to:i+r.node.nodeValue.length,node:r.node}}function $F(t,e,n){let r=FN(t,n);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,c=new pi(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=i.parentNode;;d=d.parentNode){let f=$t.get(d);if(f instanceof uo)u.push({node:d,deco:f.mark});else{if(f instanceof nn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:i,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new ah({inclusive:!0,attributes:gF(d),tagName:d.tagName.toLowerCase()})});else return null}}}function jN(t,e,n){if(n<=0)for(let r=t,i=e;;){if(r.nodeType==3)return{node:r,offset:i};if(r.nodeType==1&&i>0)r=r.childNodes[i-1],i=lo(r);else break}if(n>=0)for(let r=t,i=e;;){if(r.nodeType==3)return{node:r,offset:i};if(r.nodeType==1&&i<r.childNodes.length&&n>=0)r=r.childNodes[i],i=0;else break}return null}function TF(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let OF=class{constructor(){this.changes=[]}compareRange(e,n){Nb(e,n,this.changes)}comparePoint(e,n){Nb(e,n,this.changes)}};function NF(t,e,n){let r=new OF;return ut.compare(t,e,n,r),r.changes}function RF(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function MF(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function DF(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return re.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=Pn(i.text,s,!1):a=Pn(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let c=Pn(i.text,o,!1);if(r(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=Pn(i.text,a);if(r(i.text.slice(a,c))!=l)break;a=c}return re.range(o+i.from,a+i.from)}function IF(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function LF(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function qy(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function SE(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function kE(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Lb(t,e,n){let r,i,s,o,a=!1,l,c,u,d;for(let p=t.firstChild;p;p=p.nextSibling){let m=pf(p);for(let w=0;w<m.length;w++){let v=m[w];i&&qy(i,v)&&(v=SE(kE(v,i.bottom),i.top));let y=IF(e,v),x=LF(n,v);if(y==0&&x==0)return p.nodeType==3?_E(p,e,n):Lb(p,e,n);if(!r||o>x||o==x&&s>y){r=p,i=v,s=y,o=x;let k=x?n<v.top?-1:1:y?e<v.left?-1:1:0;a=!k||(k>0?w<m.length-1:w>0)}y==0?n>v.bottom&&(!u||u.bottom<v.bottom)?(l=p,u=v):n<v.top&&(!d||d.top>v.top)&&(c=p,d=v):u&&qy(u,v)?u=kE(u,v.bottom):d&&qy(d,v)&&(d=SE(d,v.top))}}if(u&&u.bottom>=n?(r=l,i=u):d&&d.top<=n&&(r=c,i=d),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return _E(r,f,n);if(a&&r.contentEditable!="false")return Lb(r,f,n);let h=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:h}}function _E(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=Pl(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let f=e>=(u.left+u.right)/2,h=f;if((_e.chrome||_e.gecko)&&Pl(t,a).getBoundingClientRect().left==u.right&&(h=!f),d<=0)return{node:t,offset:a+(h?1:0)};i=a+(h?1:0),s=d}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function zN(t,e,n,r=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,f=d-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let k=t.viewState.heightOracle.textHeight/2,_=!1;l=t.elementAtHeight(f),l.type!=Zn.Text;)for(;f=r>0?l.bottom+k:l.top-k,!(f>=0&&f<=c);){if(_)return n?null:0;_=!0,r=-r}d=a+f;let h=l.from;if(h<t.viewport.from)return t.viewport.from==0?0:n?null:CE(t,o,l,u,d);if(h>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:CE(t,o,l,u,d);let p=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:p,w=m.elementFromPoint(u,d);w&&!t.contentDOM.contains(w)&&(w=null),w||(u=Math.max(o.left+1,Math.min(o.right-1,u)),w=m.elementFromPoint(u,d),w&&!t.contentDOM.contains(w)&&(w=null));let v,y=-1;if(w&&((i=t.docView.nearest(w))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let k=p.caretPositionFromPoint(u,d);k&&({offsetNode:v,offset:y}=k)}else if(p.caretRangeFromPoint){let k=p.caretRangeFromPoint(u,d);k&&({startContainer:v,startOffset:y}=k,(!t.contentDOM.contains(v)||_e.safari&&BF(v,y,u)||_e.chrome&&FF(v,y,u))&&(v=void 0))}}if(!v||!t.docView.dom.contains(v)){let k=nn.find(t.docView,h);if(!k)return f>l.top+l.height/2?l.to:l.from;({node:v,offset:y}=Lb(k.dom,u,d))}let x=t.docView.nearest(v);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=x.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(v,y)+x.posAtStart}function CE(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+tF(o,s,t.state.tabSize)}function BF(t,e,n){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Pl(t,r-1,r).getBoundingClientRect().left>n}function FF(t,e,n){if(e!=0)return!1;for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Pl(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function Bb(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>e||r.to==e&&(r.to==n.to||r.type==Zn.Text))return r}return n}function jF(t,e,n,r){let i=Bb(t,e.head),s=!r||i.type!=Zn.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(a==Ot.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return re.cursor(l,n?-1:1)}return re.cursor(n?i.to:i.from,n?-1:1)}function EE(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let c=CF(i,s,o,a,n),u=CN;if(!c){if(i.number==(n?t.state.doc.lines:1))return a;u=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),c=t.visualLineSide(i,!n)}if(l){if(!l(u))return a}else{if(!r)return c;l=r(u)}a=c}}function zF(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==$n.Space&&(i=o),i==o}}function UF(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return re.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let h=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-h.from))),a=(s<0?h.top:h.bottom)+u}let d=l.left+o,f=r??t.viewState.heightOracle.textHeight>>1;for(let h=0;;h+=10){let p=a+(f+h)*s,m=zN(t,{x:d,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?m<i:m>i)){let w=t.docView.coordsForChar(m),v=!w||p<w.top?-1:1;return re.cursor(m,v,void 0,o)}}}function nm(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||n||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function Yy(t,e,n){let r=nm(t.state.facet(nS).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:re.cursor(r,r<n.from?1:-1)}class VF{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,_e.safari&&e.contentDOM.addEventListener("input",()=>null),_e.gecko&&sj(e.contentDOM.ownerDocument)}handleEvent(e){!JF(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=HF(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&VN.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),_e.android&&_e.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return _e.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=UN.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||WF.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,Dc(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:_e.safari&&!_e.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function AE(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){zi(n.state,i)}}}function HF(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec;if(i&&i.domEventHandlers)for(let s in i.domEventHandlers){let o=i.domEventHandlers[s];o&&n(s).handlers.push(AE(r.value,o))}if(i&&i.domEventObservers)for(let s in i.domEventObservers){let o=i.domEventObservers[s];o&&n(s).observers.push(AE(r.value,o))}}for(let r in Gi)n(r).handlers.push(Gi[r]);for(let r in Ki)n(r).observers.push(Ki[r]);return e}const UN=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],WF="dthko",VN=[16,17,18,20,91,92,224,225],Jh=6;function Zh(t){return Math.max(0,t)*.7+8}function GF(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class KF{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=cF(e.contentDOM),this.atoms=e.state.facet(nS).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Ye.allowMultipleSelections)&&XF(e,n),this.dragging=YF(e,n)&&KN(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&GF(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,i=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=BN(this.view);e.clientX-o.left<=s.left+Jh?r=-Zh(s.left-e.clientX):e.clientX+o.right>=s.right-Jh&&(r=Zh(e.clientX-s.right)),e.clientY-o.top<=s.top+Jh?i=-Zh(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-Jh&&(i=Zh(e.clientY-s.bottom)),this.setScrollSpeed(r,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=nm(this.atoms,i.from,0);o!=i.from&&(s=re.cursor(o,-1))}else{let o=nm(this.atoms,i.from,-1),a=nm(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=re.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?re.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function XF(t,e){let n=t.state.facet(EN);return n.length?n[0](e):_e.mac?e.metaKey:e.ctrlKey}function qF(t,e){let n=t.state.facet(AN);return n.length?n[0](e):_e.mac?!e.altKey:!e.ctrlKey}function YF(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=ng(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function JF(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=$t.get(n))&&r.ignoreEvent(e))return!1;return!0}const Gi=Object.create(null),Ki=Object.create(null),HN=_e.ie&&_e.ie_version<15||_e.ios&&_e.webkit_version<604;function ZF(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),WN(t,n.value)},50)}function WN(t,e){let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(Fb!=null&&n.selection.ranges.every(l=>l.empty)&&Fb==s.toString()){let l=-1;r=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:re.cursor(c.from+d.length)}})}else o?r=n.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:re.cursor(l.from+c.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Ki.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Gi.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now()),!1);Ki.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Ki.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Gi.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(PN))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=tj(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new KF(t,e,n,r)),r&&t.observer.ignore(()=>cN(t.contentDOM));let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function PE(t,e,n,r){if(r==1)return re.cursor(e,n);if(r==2)return DF(t.state,e,n);{let i=nn.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,re.range(o,a)}}let GN=(t,e)=>t>=e.top&&t<=e.bottom,$E=(t,e,n)=>GN(e,n)&&t>=n.left&&t<=n.right;function QF(t,e,n,r){let i=nn.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&$E(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&$E(n,r,a)?1:o&&GN(r,o)?-1:1}function TE(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:QF(t,n,e.clientX,e.clientY)}}const ej=_e.ie&&_e.ie_version<=11;let OE=null,NE=0,RE=0;function KN(t){if(!ej)return t.detail;let e=OE,n=RE;return OE=t,RE=Date.now(),NE=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(NE+1)%3:1}function tj(t,e){let n=TE(t,e),r=KN(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let l=TE(t,s),c,u=PE(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let d=PE(t,n.pos,n.bias,r),f=Math.min(d.from,u.from),h=Math.max(d.to,u.to);u=f<u.from?re.range(f,h):re.range(h,f)}return o?i.replaceRange(i.main.extend(u.from,u.to)):a&&r==1&&i.ranges.length>1&&(c=nj(i,l.pos))?c:a?i.addRange(u):re.create([u])}}}function nj(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return re.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Gi.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=n.to||o<=n.from)&&(n=re.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove"),!1};Gi.dragend=t=>(t.inputState.draggedContent=null,!1);function ME(t,e,n,r){if(!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&qF(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Gi.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&ME(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return ME(t,e,r,!0),!0}return!1};Gi.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=HN?null:e.clipboardData;return n?(WN(t,n.getData("text/plain")||n.getData("text/uri-text")),!0):(ZF(t),!1)};function rj(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function ij(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:r}}let Fb=null;Gi.copy=Gi.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=ij(t.state);if(!n&&!i)return!1;Fb=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=HN?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(rj(t,n),!1)};const XN=wo.define();function qN(t,e){let n=[];for(let r of t.facet(ON)){let i=r(t,e);i&&n.push(i)}return n?t.update({effects:n,annotations:XN.of(!0)}):null}function YN(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=qN(t.state,e);n?t.dispatch(n):t.update([])}},10)}Ki.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),YN(t)};Ki.blur=t=>{t.observer.clearSelectionRange(),YN(t)};Ki.compositionstart=Ki.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};Ki.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,_e.chrome&&_e.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};Ki.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Gi.beforeinput=(t,e)=>{var n;let r;if(_e.chrome&&_e.android&&(r=UN.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return!1};const DE=new Set;function sj(t){DE.has(t)||(DE.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const IE=["pre-wrap","normal","pre-line","break-spaces"];class oj{constructor(e){this.lineWrapping=e,this.doc=lt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return IE.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=IE.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class aj{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class vs{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Zn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof wa?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new vs(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var At=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(At||(At={}));const rm=.001;class Qn{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>rm&&(e.heightChanged=!0),this.height=n)}replace(e,n,r){return Qn.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=i[a],f=s.lineAt(l,At.ByPosNoHeight,r.setDoc(n),0,0),h=f.to>=c?f:s.lineAt(c,At.ByPosNoHeight,r,0,0);for(d+=h.to-c,c=h.to;a>0&&f.from<=i[a-1].toA;)l=i[a-1].fromA,u=i[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,At.ByPosNoHeight,r,0,0));u+=f.from-l,l=f.from;let p=rS.build(r.setDoc(o),e,u,d);s=s.replace(l,c,p)}return s.updateHeight(r,0)}static empty(){return new Mr(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new lj(Qn.of(e.slice(0,n)),o,Qn.of(e.slice(r)))}}Qn.prototype.size=1;class JN extends Qn{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new vs(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Mr extends JN{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new vs(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof Mr||i instanceof wn&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof wn?i=new Mr(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Qn.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class wn extends Qn{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let c=i+Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length),u=n.doc.lineAt(c),d=a+u.length*l,f=Math.max(r,e-d/2);return new vs(u.from,u.length,f,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:u,length:d}=n.doc.line(s+c);return new vs(u,d,r+a*c,a,0)}}lineAt(e,n,r,i,s){if(n==At.ByHeight)return this.blockAt(e,r,i,s);if(n==At.ByPosNoHeight){let{from:h,to:p}=r.doc.lineAt(e);return new vs(h,p-h,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),c=r.doc.lineAt(e),u=a+c.length*l,d=c.number-o,f=i+a*d+l*(c.from-s-d);return new vs(c.from,c.length,Math.max(i,Math.min(f,i+this.height-u)),u,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(r,s);for(let u=e,d=i;u<=n;){let f=r.doc.lineAt(u);if(u==e){let p=f.number-a;d+=l*p+c*(e-s-p)}let h=l+c*f.length;o(new vs(f.from,f.length,d,h,0)),d+=h,u=f.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof wn?r[r.length-1]=new wn(s.length+i):r.push(null,new wn(i-1))}if(e>0){let s=r[0];s instanceof wn?r[0]=new wn(e+s.length):r.unshift(new wn(e-1),null)}return Qn.of(r)}decomposeLeft(e,n){n.push(new wn(e-1),null)}decomposeRight(e,n){n.push(null,new wn(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),l=-1;for(i.from>n&&o.push(new wn(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=i.heights[i.index++];l==-1?l=d:Math.abs(d-l)>=rm&&(l=-2);let f=new Mr(u,d);f.outdated=!1,o.push(f),a+=u+1}a<=s&&o.push(null,new wn(s-a).updateHeight(e,a));let c=Qn.of(o);return(l<0||Math.abs(c.height-this.height)>=rm||Math.abs(l-this.heightMetrics(e,n).perLine)>=rm)&&(e.heightChanged=!0),c}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class lj extends Qn{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==At.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==At.ByPosNoHeight?At.ByPosNoHeight:At.ByPos;return l?c.join(this.right.lineAt(a,u,r,o,a)):this.left.lineAt(a,u,r,i,s).join(c)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let c=this.lineAt(l,At.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&LE(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),LE(s,a)}return Qn.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Qn.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function LE(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof wn&&(r=t[e+1])instanceof wn&&t.splice(e-1,3,new wn(n.length+1+r.length))}const cj=5;class rS{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Mr?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Mr(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new JN(o,i,r)):(o||s||i>=cj)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Mr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new wn(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Mr)return e;let n=new Mr(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Mr)&&!this.isCovered?this.nodes.push(new Mr(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Mr&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new rS(r,e);return ut.spans(n,r,i,s,0),s.finish(r)}}function uj(t,e,n){let r=new dj;return ut.compare(t,e,n,r,0),r.changes}class dj{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&Nb(e,n,this.changes,5)}}function fj(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=c==t.parentNode?f.bottom:Math.min(l,f.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function hj(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Jy{constructor(e,n,r){this.from=e,this.to=n,this.size=r}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return Xe.replace({widget:new pj(this.size*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class pj extends Ra{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class BE{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=FE,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ot.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(tS).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new oj(n),this.stateDeco=e.facet(gf).filter(r=>typeof r!="function"),this.heightMap=Qn.empty().applyChanges(this.stateDeco,lt.empty,this.heightOracle.setDoc(e.doc),[new pi(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Xe.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new Qh(s,o))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?FE:new vj(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:gd(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(gf).filter(u=>typeof u!="function");let i=e.changedRanges,s=pi.extendWithRanges(i,uj(r,this.stateDeco,e?e.changes:sn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),c&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(RN)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Ot.RTL:Ot.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:k,scaleY:_}=lN(n,a);(this.scaleX!=k||this.scaleY!=_)&&(this.scaleX=k,this.scaleY=_,c|=8,o=l=!0)}let d=(parseInt(r.paddingTop)||0)*this.scaleY,f=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8);let h=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=h&&(this.scrollAnchorHeight=-1,this.scrollTop=h),this.scrolledToBottom=dN(e.scrollDOM);let p=(this.printing?hj:fj)(n,this.paddingTop),m=p.top-this.pixelViewport.top,w=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let y=a.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),l){let k=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(k)&&(o=!0),o||i.lineWrapping&&Math.abs(y-this.contentDOMWidth)>i.charWidth){let{lineHeight:_,charWidth:P,textHeight:A}=e.docView.measureTextSize();o=_>0&&i.refresh(s,_,P,A,y/P,k),o&&(e.docView.minWidth=0,c|=8)}m>0&&w>0?u=Math.max(m,w):m<0&&w<0&&(u=Math.min(m,w)),i.heightChanged=!1;for(let _ of this.viewports){let P=_.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?Qn.empty().applyChanges(this.stateDeco,lt.empty,this.heightOracle,[new pi(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new aj(_.from,P))}i.heightChanged&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Qh(i.lineAt(o-r*1e3,At.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,At.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(c,At.ByPos,s,0,0),f;n.y=="center"?f=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?f=d.top:f=d.bottom-u,l=new Qh(i.lineAt(f-1e3/2,At.ByHeight,s,0,0).from,i.lineAt(f+u+1e3/2,At.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new Qh(this.heightMap.lineAt(r,At.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,At.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,At.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,At.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new Jy(n.mapPos(i.from),n.mapPos(i.to),i.size));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=Ot.LTR&&!r)return[];let a=[],l=(c,u,d,f)=>{if(u-c<s)return;let h=this.state.selection.main,p=[h.from];h.empty||p.push(h.to);for(let w of p)if(w>c&&w<u){l(c,w-10,d,f),l(w+10,u,d,f);return}let m=gj(e,w=>w.from>=d.from&&w.to<=d.to&&Math.abs(w.from-c)<s&&Math.abs(w.to-u)<s&&!p.some(v=>w.from<v&&w.to>v));if(!m){if(u<d.to&&n&&r&&n.visibleRanges.some(w=>w.from<=u&&w.to>=u)){let w=n.moveToLineBoundary(re.cursor(u),!1,!0).head;w>c&&(u=w)}m=new Jy(c,u,this.gapSize(d,c,u,f))}a.push(m)};for(let c of this.viewportLines){if(c.length<o)continue;let u=mj(c.from,c.to,this.stateDeco);if(u.total<o)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,f,h;if(r){let p=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,w;if(d!=null){let v=tp(u,d),y=((this.visibleBottom-this.visibleTop)/2+p)/c.height;m=v-y,w=v+y}else m=(this.visibleTop-c.top-p)/c.height,w=(this.visibleBottom-c.top+p)/c.height;f=ep(u,m),h=ep(u,w)}else{let p=u.total*this.heightOracle.charWidth,m=i*this.heightOracle.charWidth,w,v;if(d!=null){let y=tp(u,d),x=((this.pixelViewport.right-this.pixelViewport.left)/2+m)/p;w=y-x,v=y+x}else w=(this.pixelViewport.left-m)/p,v=(this.pixelViewport.right+m)/p;f=ep(u,w),h=ep(u,v)}f>c.from&&l(c.from,f,c,u),h<c.to&&l(h,c.to,c,u)}return a}gapSize(e,n,r,i){let s=tp(i,r)-tp(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Jy.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Xe.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];ut.spans(e,this.viewport.from,this.viewport.to,{span(i,s){n.push({from:i,to:s})},point(){}},20);let r=n.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=n[s].from||i.to!=n[s].to);return this.visibleRanges=n,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||gd(this.heightMap.lineAt(e,At.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return gd(this.heightMap.lineAt(this.scaler.fromDOM(e),At.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return gd(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Qh{constructor(e,n){this.from=e,this.to=n}}function mj(t,e,n){let r=[],i=t,s=0;return ut.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function ep({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function tp(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function gj(t,e){for(let n of t)if(e(n))return n}const FE={toDOM(t){return t},fromDOM(t){return t},scale:1};class vj{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=n.lineAt(a,At.ByPos,e,0,0).top,u=n.lineAt(l,At.ByPos,e,0,0).bottom;return i+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}}function gd(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new vs(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>gd(i,e)):t._content)}const np=Ee.define({combine:t=>t.join(" ")}),jb=Ee.define({combine:t=>t.indexOf(!0)>-1}),zb=va.newName(),ZN=va.newName(),QN=va.newName(),eR={"&light":"."+ZN,"&dark":"."+QN};function Ub(t,e,n){return new va(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const yj=Ub("."+zb,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},eR),vd="";class wj{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Ye.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=vd}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==n)break;let a=$t.get(i),l=$t.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:jE(i))||jE(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=$t.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(bj(e,r.node,r.offset)?n:0))}}function bj(t,e,n){for(;;){if(!e||n<lo(e))return!1;if(e==t)return!0;n=mf(e)+1,e=e.parentNode}}function jE(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class zE{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class xj{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=s||o?[]:_j(e),l=new wj(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Cj(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!Eb(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!Eb(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if(_e.ios&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=u.from-Math.min(l,c),f=u.to-Math.max(l,c);(d==0||d==1)&&(f==0||f==-1)&&(l=0,c=e.state.doc.length)}this.newSel=re.single(c,l)}}}function tR(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,c=null;(s===8||_e.android&&e.text.length<a-o)&&(l=i.to,c="end");let u=kj(t.state.doc.sliceString(o,a,vd),e.text,l-o,c);u&&(_e.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==vd+vd&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:lt.of(e.text.slice(u.from,u.toB).split(vd))})}else r&&(!t.hasFocus&&t.state.facet(vv)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:(_e.mac||_e.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=re.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:lt.of([" "])}):_e.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=re.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:lt.of([" "])}),n){if(_e.ios&&t.inputState.flushIOSKey()||_e.android&&(n.from==i.from&&n.to==i.to&&n.insert.length==1&&n.insert.lines==2&&Dc(t.contentDOM,"Enter",13)||(n.from==i.from-1&&n.to==i.to&&n.insert.length==0||s==8&&n.insert.length<n.to-n.from&&n.to>i.head)&&Dc(t.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&n.insert.length==0&&Dc(t.contentDOM,"Delete",46)))return!0;let o=n.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a,l=()=>a||(a=Sj(t,n,r));return t.state.facet(TN).some(c=>c(t,n.from,n.to,o,l))||t.dispatch(l()),!0}else if(r&&!r.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function Sj(t,e,n){let r,i=t.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=i.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&FN(t,n.main.head);if(d){let p=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-p}}else u=t.state.doc.lineAt(s.head);let f=s.to-e.to,h=s.to-s.from;r=i.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:a,range:l||p.map(a)};let m=p.to-f,w=m-c.length;if(p.to-p.from!=h||t.state.sliceDoc(w,m)!=c||p.to>=u.from&&p.from<=u.to)return{range:p};let v=i.changes({from:w,to:m,insert:e.insert}),y=p.to-s.to;return{changes:v,range:l?re.range(Math.max(0,l.anchor+y),Math.max(0,l.head+y)):p.map(v)}})}else r={changes:a,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function kj(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function _j(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new zE(n,r)),(i!=n||s!=r)&&e.push(new zE(i,s))),e}function Cj(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?re.single(n+e,r+e):null}const Ej={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Zy=_e.ie&&_e.ie_version<=11;class Aj{constructor(e){this.view=e,this.active=!1,this.selectionRange=new uF,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(_e.ie&&_e.ie_version<=11||_e.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),Zy&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(vv)?r.root.activeElement!=this.dom:!tm(r.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(_e.ie&&_e.ie_version<=11||_e.android&&_e.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Md(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=_e.safari&&e.root.nodeType==11&&oF(this.dom.ownerDocument)==this.dom&&Pj(this.view)||ng(e.root);if(!n||this.selectionRange.eq(n))return!1;let r=tm(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&fF(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Ej),Zy&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Zy&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Dc(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&tm(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new xj(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=tR(this.view,n);return this.view.state==r&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=UE(n,e.previousSibling||e.target.previousSibling,-1),i=UE(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function UE(t,e,n){for(;e;){let r=$t.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function Pj(t){let e=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return Md(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}class Pe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(r=>r.forEach(i=>n(i,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||dF(e.parent)||document,this.viewState=new BE(e.state||Ye.create(e)),e.scrollTo&&e.scrollTo.is(Yh)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(pd).map(r=>new Xy(r));for(let r of this.plugins)r.update(this);this.observer=new Aj(this),this.inputState=new VF(this),this.inputState.ensureHandlers(this.plugins),this.docView=new bE(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let n=e.length==1&&e[0]instanceof cn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(XN))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=qN(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(Ye.phrases)!=this.state.facet(Ye.phrases))return this.setState(s);i=rg.create(this,s,e),i.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:h}=f.state.selection;d=new Ic(h.empty?h:re.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of f.effects)h.is(Yh)&&(d=h.value.clip(this.state))}this.viewState.update(i,d),this.bidiCache=ig.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(md)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(np)!=i.state.facet(np)&&(this.viewState.mustMeasureContent=!0),(n||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let f of this.state.facet(Ib))try{f(i)}catch(h){zi(this.state,h,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!tR(this,u)&&c.force&&Dc(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new BE(e),this.plugins=e.facet(pd).map(r=>new Xy(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new bE(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(pd),r=e.state.facet(pd);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new Xy(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(dN(r))s=-1,o=this.viewState.heightMap.height;else{let h=this.viewState.scrollAnchorAt(i);s=h.from,o=h.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(h=>{try{return h.read(this)}catch(p){return zi(this.state,p),VE}}),d=rg.create(this,this.state,[]),f=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d));for(let h=0;h<c.length;h++)if(u[h]!=VE)try{let p=c[h];p.write&&p.write(u[h],this)}catch(p){zi(this.state,p)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){i=i+p,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(Ib))a(n)}get themeClasses(){return zb+" "+(this.state.facet(jb)?QN:ZN)+" "+this.state.facet(np)}updateAttrs(){let e=HE(this,MN,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(vv)?"true":"false",class:"cm-content",style:`${_e.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),HE(this,tS,n);let r=this.observer.ignore(()=>{let i=Ob(this.contentDOM,this.contentAttrs,n),s=Ob(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(Pe.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(md);let e=this.state.facet(Pe.cspNonce);va.mount(this.root,this.styleModules.concat(yj).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return Yy(this,e,EE(this,e,n,r))}moveByGroup(e,n){return Yy(this,e,EE(this,e,n,r=>zF(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return re.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return jF(this,e,n,r)}moveVertically(e,n,r){return Yy(this,e,UF(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),zN(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Yo.find(s,e-i.from,-1,n)];return Jx(r,o.dir==Ot.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(NN)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>$j)return _N(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||kN(s.isolates,r=wE(this,e))))return s.order;r||(r=wE(this,e));let i=_F(e.text,n,r);return this.bidiCache.push(new ig(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||_e.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{cN(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Yh.of(new Ic(typeof e=="number"?re.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Yh.of(new Ic(re.cursor(r.from),"start","start",r.top-e,n,!0))}static domEventHandlers(e){return Rn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Rn.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=va.newName(),i=[np.of(r),md.of(Ub(`.${r}`,e))];return n&&n.dark&&i.push(jb.of(!0)),i}static baseTheme(e){return ih.lowest(md.of(Ub("."+zb,e,eR)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&$t.get(r)||$t.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}Pe.styleModule=md;Pe.inputHandler=TN;Pe.focusChangeEffect=ON;Pe.perLineTextDirection=NN;Pe.exceptionSink=$N;Pe.updateListener=Ib;Pe.editable=vv;Pe.mouseSelectionStyle=PN;Pe.dragMovesSelection=AN;Pe.clickAddsSelectionRange=EN;Pe.decorations=gf;Pe.outerDecorations=DN;Pe.atomicRanges=nS;Pe.bidiIsolatedRanges=IN;Pe.scrollMargins=LN;Pe.darkTheme=jb;Pe.cspNonce=Ee.define({combine:t=>t.length?t[0]:""});Pe.contentAttributes=tS;Pe.editorAttributes=MN;Pe.lineWrapping=Pe.contentAttributes.of({class:"cm-lineWrapping"});Pe.announce=Ke.define();const $j=4096,VE={};class ig{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Ot.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new ig(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function HE(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&Tb(o,n)}return n}const Tj=_e.mac?"mac":_e.windows?"win":_e.linux?"linux":"key";function Oj(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function rp(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Nj=ih.default(Pe.domEventHandlers({keydown(t,e){return iR(rR(e.state),t,e,"editor")}})),nR=Ee.define({enables:Nj}),WE=new WeakMap;function rR(t){let e=t.facet(nR),n=WE.get(e);return n||WE.set(e,n=Dj(e.reduce((r,i)=>r.concat(i),[]))),n}function Rj(t,e,n){return iR(rR(t.state),e,t,n)}let Fo=null;const Mj=4e3;function Dj(t,e=Tj){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,f;let h=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(v=>Oj(v,e));for(let v=1;v<p.length;v++){let y=p.slice(0,v).join(" ");i(y,!0),h[y]||(h[y]={preventDefault:!0,stopPropagation:!1,run:[x=>{let k=Fo={view:x,prefix:y,scope:o};return setTimeout(()=>{Fo==k&&(Fo=null)},Mj),!0}]})}let m=p.join(" ");i(m,!1);let w=h[m]||(h[m]={preventDefault:!1,stopPropagation:!1,run:((f=(d=h._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&w.run.push(l),c&&(w.preventDefault=!0),u&&(w.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let d in u)u[d].run.push(o.any)}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}function iR(t,e,n,r){let i=sF(e),s=Xn(i,0),o=Mi(s)==i.length&&i!=" ",a="",l=!1,c=!1,u=!1;Fo&&Fo.view==n&&Fo.scope==r&&(a=Fo.prefix+" ",VN.indexOf(e.keyCode)<0&&(c=!0,Fo=null));let d=new Set,f=w=>{if(w){for(let v of w.run)if(!d.has(v)&&(d.add(v),v(n,e)))return w.stopPropagation&&(u=!0),!0;w.preventDefault&&(w.stopPropagation&&(u=!0),c=!0)}return!1},h=t[r],p,m;return h&&(f(h[a+rp(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(_e.windows&&e.ctrlKey&&e.altKey)&&(p=ya[e.keyCode])&&p!=i?(f(h[a+rp(p,e,!0)])||e.shiftKey&&(m=hf[e.keyCode])!=i&&m!=p&&f(h[a+rp(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(h[a+rp(i,e,!0)])&&(l=!0),!l&&f(h._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),l}class ch{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=sR(e);return[new ch(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return Ij(e,n,r)}}function sR(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Ot.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function GE(t,e,n){let r=re.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(r,!0,!0).from),type:Zn.Text}}function Ij(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==Ot.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=sR(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),h=Bb(t,r),p=Bb(t,i),m=h.type==Zn.Text?h:null,w=p.type==Zn.Text?p:null;if(m&&(t.lineWrapping||h.widgetLineBreaks)&&(m=GE(t,r,m)),w&&(t.lineWrapping||p.widgetLineBreaks)&&(w=GE(t,i,w)),m&&w&&m.from==w.from)return y(x(n.from,n.to,m));{let _=m?x(n.from,null,m):k(h,!1),P=w?x(null,n.to,w):k(p,!0),A=[];return(m||h).to<(w||p).from-(m&&w?1:0)||h.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<P.top?A.push(v(d,_.bottom,f,P.top)):_.bottom<P.top&&t.elementAtHeight((_.bottom+P.top)/2).type==Zn.Text&&(_.bottom=P.top=(_.bottom+P.top)/2),y(_).concat(A).concat(y(P))}function v(_,P,A,C){return new ch(e,_-l.left,P-l.top-.01,A-_,C-P+.01)}function y({top:_,bottom:P,horizontal:A}){let C=[];for(let N=0;N<A.length;N+=2)C.push(v(A[N],_,A[N+1],P));return C}function x(_,P,A){let C=1e9,N=-1e9,R=[];function M(T,V,q,te,W){let j=t.coordsAtPos(T,T==A.to?-2:2),Z=t.coordsAtPos(q,q==A.from?2:-2);!j||!Z||(C=Math.min(j.top,Z.top,C),N=Math.max(j.bottom,Z.bottom,N),W==Ot.LTR?R.push(s&&V?d:j.left,s&&te?f:Z.right):R.push(!s&&te?d:Z.left,!s&&V?f:j.right))}let L=_??A.from,H=P??A.to;for(let T of t.visibleRanges)if(T.to>L&&T.from<H)for(let V=Math.max(T.from,L),q=Math.min(T.to,H);;){let te=t.state.doc.lineAt(V);for(let W of t.bidiSpans(te)){let j=W.from+te.from,Z=W.to+te.from;if(j>=q)break;Z>V&&M(Math.max(j,V),_==null&&j<=L,Math.min(Z,q),P==null&&Z>=H,W.dir)}if(V=te.to+1,V>=q)break}return R.length==0&&M(L,_==null,H,P==null,t.textDirection),{top:C,bottom:N,horizontal:R}}function k(_,P){let A=a.top+(P?_.top:_.bottom);return{top:A,bottom:A,horizontal:[]}}}function Lj(t,e){return t.constructor==e.constructor&&t.eq(e)}class Bj{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(im)!=e.state.facet(im)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let n=0,r=e.facet(im);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!Lj(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const im=Ee.define();function oR(t){return[Rn.define(e=>new Bj(e,t)),im.of(t)]}const aR=!_e.ios,vf=Ee.define({combine(t){return Na(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Fj(t={}){return[vf.of(t),jj,zj,Uj,RN.of(!0)]}function lR(t){return t.startState.facet(vf)!=t.state.facet(vf)}const jj=oR({above:!0,markers(t){let{state:e}=t,n=e.facet(vf),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||aR:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:re.cursor(i.head,i.head>i.anchor?-1:1);for(let l of ch.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=lR(t);return n&&KE(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){KE(e.state,t)},class:"cm-cursorLayer"});function KE(t,e){e.style.animationDuration=t.facet(vf).cursorBlinkRate+"ms"}const zj=oR({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:ch.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||lR(t)},class:"cm-selectionLayer"}),Vb={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};aR&&(Vb[".cm-line"].caretColor="transparent !important",Vb[".cm-content"]={caretColor:"transparent !important"});const Uj=ih.highest(Pe.theme(Vb));function XE(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function Vj(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class Hj{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(a,l,c,u)=>i(u,c,c+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,c,u)=>{let d=r(a,l,c);d&&u(c,c+a[0].length,d)};else if(r)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Al,r=n.add.bind(n);for(let{from:i,to:s}of Vj(e,this.maxLength))XE(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let f=[],h,p=(m,w,v)=>f.push(v.range(m,w));if(l==c)for(this.regexp.lastIndex=u-l.from;(h=this.regexp.exec(l.text))&&h.index<d-l.from;)this.addMatch(h,e,h.index+l.from,p);else XE(e.state.doc,this.regexp,u,d,(m,w)=>this.addMatch(w,e,m,p));n=n.update({filterFrom:u,filterTo:d,filter:(m,w)=>m<u||w>d,add:f})}}return n}}const Hb=/x/.unicode!=null?"gu":"g",Wj=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Hb),Gj={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Qy=null;function Kj(){var t;if(Qy==null&&typeof document<"u"&&document.body){let e=document.body.style;Qy=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Qy||!1}const sm=Ee.define({combine(t){let e=Na(t,{render:null,specialChars:Wj,addSpecialChars:null});return(e.replaceTabs=!Kj())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Hb)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Hb)),e}});function Xj(t={}){return[sm.of(t),qj()]}let qE=null;function qj(){return qE||(qE=Rn.fromClass(class{constructor(t){this.view=t,this.decorations=Xe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(sm)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Hj({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=Xn(e[0],0);if(s==9){let o=i.lineAt(r),a=n.state.tabSize,l=oh(o.text,a,r-o.from);return Xe.replace({widget:new Qj((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Xe.replace({widget:new Zj(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(sm);t.startState.facet(sm)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Yj="";function Jj(t){return t>=32?Yj:t==10?"":String.fromCharCode(9216+t)}class Zj extends Ra{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=Jj(this.code),r=e.state.phrase("Control character")+" "+(Gj[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Qj extends Ra{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function e7(){return n7}const t7=Xe.line({class:"cm-activeLine"}),n7=Rn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(t7.range(i.from)),e=i.from)}return Xe.set(n)}},{decorations:t=>t.decorations}),qu="-10000px";class cR{constructor(e,n,r){this.facet=n,this.createTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(l.dom.remove(),(r=l.destroy)===null||r===void 0||r.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function r7(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const e0=Ee.define({combine:t=>{var e,n,r;return{position:_e.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||r7}}}),YE=new WeakMap,iS=Rn.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(e0);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new cR(t,sS,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(e0);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=qu,e.dom.style.left="0px",this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);this.parent&&this.container.remove(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect(),e=1,n=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(_e.gecko)r=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==qu&&i.style.left=="0px"){let s=i.getBoundingClientRect();r=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(r||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,n=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:n}=this.view.viewState);return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((i,s)=>{let o=this.manager.tooltipViews[s];return o.getCoords?o.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(e0).tooltipSpace(this.view),scaleX:e,scaleY:n,makeAbsolute:r}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{editor:n,space:r,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],f=t.size[a];if(!d||d.bottom<=Math.max(n.top,r.top)||d.top>=Math.min(n.bottom,r.bottom)||d.right<Math.max(n.left,r.left)-.1||d.left>Math.min(n.right,r.right)+.1){u.style.top=qu;continue}let h=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=h?7:0,m=f.right-f.left,w=(e=YE.get(c))!==null&&e!==void 0?e:f.bottom-f.top,v=c.offset||s7,y=this.view.textDirection==Ot.LTR,x=f.width>r.right-r.left?y?r.left:r.right-f.width:y?Math.min(d.left-(h?14:0)+v.x,r.right-m):Math.max(r.left,d.left-m+(h?14:0)-v.x),k=this.above[a];!l.strictSide&&(k?d.top-(f.bottom-f.top)-v.y<r.top:d.bottom+(f.bottom-f.top)+v.y>r.bottom)&&k==r.bottom-d.bottom>d.top-r.top&&(k=this.above[a]=!k);let _=(k?d.top-r.top:r.bottom-d.bottom)-p;if(_<w&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=qu;continue}YE.set(c,w),u.style.height=(w=_)/s+"px"}else u.style.height&&(u.style.height="");let P=k?d.top-w-p-v.y:d.bottom+p+v.y,A=x+m;if(c.overlap!==!0)for(let C of o)C.left<A&&C.right>x&&C.top<P+w&&C.bottom>P&&(P=k?C.top-w-2-p:C.bottom+p+2);if(this.position=="absolute"?(u.style.top=(P-t.parent.top)/s+"px",u.style.left=(x-t.parent.left)/i+"px"):(u.style.top=P/s+"px",u.style.left=x/i+"px"),h){let C=d.left+(y?v.x:-v.x)-(x+14-7);h.style.left=C/i+"px"}c.overlap!==!0&&o.push({left:x,top:P,right:A,bottom:P+w}),u.classList.toggle("cm-tooltip-above",k),u.classList.toggle("cm-tooltip-below",!k),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=qu}},{eventObservers:{scroll(){this.maybeMeasure()}}}),i7=Pe.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),s7={x:0,y:0},sS=Ee.define({enables:[iS,i7]}),sg=Ee.define();class yv{static create(e){return new yv(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new cR(e,sg,n=>this.createHostedView(n))}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const o7=sS.compute([sg],t=>{let e=t.facet(sg).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:yv.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class a7{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.nearest(n.target);if(!r)return;let i,s=1;if(r instanceof qo)i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let a=e.coordsAtPos(i);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(u=>u.from<=i&&u.to>=i),c=l&&l.dir==Ot.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,i,s);if(o!=null&&o.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&e.dispatch({effects:this.setHover.of(l)}))},l=>zi(e.state,l,"hover tooltip"))}else o&&e.dispatch({effects:this.setHover.of(o)})}get tooltip(){let e=this.view.plugin(iS),n=e?e.manager.tooltips.findIndex(r=>r.create==yv.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:i}=this;if(r&&i&&!l7(i.dom,e)||this.pending){let{pos:s}=r||this.pending,o=(n=r==null?void 0:r.end)!==null&&n!==void 0?n:s;(s==o?this.view.posAtCoords(this.lastMove)!=s:!c7(this.view,s,o,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of(null)})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const ip=4;function l7(t,e){let n=t.getBoundingClientRect();return e.clientX>=n.left-ip&&e.clientX<=n.right+ip&&e.clientY>=n.top-ip&&e.clientY<=n.bottom+ip}function c7(t,e,n,r,i,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=t.posAtCoords({x:r,y:i},!1);return l>=e&&l<=n}function u7(t,e={}){let n=Ke.define(),r=ir.define({create(){return null},update(i,s){if(i&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,i)))return null;if(i&&s.docChanged){let o=s.changes.mapPos(i.pos,-1,vr.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),i);a.pos=o,i.end!=null&&(a.end=s.changes.mapPos(i.end)),i=a}for(let o of s.effects)o.is(n)&&(i=o.value),o.is(f7)&&(i=null);return i},provide:i=>sg.from(i)});return[r,Rn.define(i=>new a7(i,t,r,n,e.hoverTime||300)),o7]}function d7(t,e){let n=t.plugin(iS);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const f7=Ke.define(),JE=Ee.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function yf(t,e){let n=t.plugin(uR),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const uR=Rn.fromClass(class{constructor(t){this.input=t.state.facet(wf),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(JE);this.top=new sp(t,!0,e.topContainer),this.bottom=new sp(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(JE);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new sp(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new sp(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(wf);if(n!=this.input){let r=n.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),i.push(u),(u.top?s:o).push(u)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Pe.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class sp{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=ZE(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=ZE(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function ZE(t){let e=t.nextSibling;return t.remove(),e}const wf=Ee.define({enables:uR});class ba extends El{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ba.prototype.elementClass="";ba.prototype.toDOM=void 0;ba.prototype.mapMode=vr.TrackBefore;ba.prototype.startSide=ba.prototype.endSide=-1;ba.prototype.point=!0;const om=Ee.define(),am=Ee.define(),Wb=Ee.define({combine:t=>t.some(e=>e)});function h7(t){let e=[p7];return t&&t.fixed===!1&&e.push(Wb.of(!0)),e}const p7=Rn.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(am).map(e=>new e2(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(Wb),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Wb)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=ut.iter(this.view.state.facet(om),this.view.viewport.from),r=[],i=this.gutters.map(s=>new m7(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Zn.Text&&o){Gb(n,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==Zn.Text){Gb(n,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(am),n=t.state.facet(am),r=t.docChanged||t.heightChanged||t.viewportChanged||!ut.eq(t.startState.facet(om),t.state.facet(om),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new e2(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Pe.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Ot.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function QE(t){return Array.isArray(t)?t:[t]}function Gb(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class m7{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=ut.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let a=new dR(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];Gb(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n);r&&this.addElement(e,n,[r])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class e2{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=QE(n.markers(e)),n.initialSpacer&&(this.spacer=new dR(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=QE(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!ut.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class dR{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),g7(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(r+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function g7(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const v7=Ee.define(),Sc=Ee.define({combine(t){return Na(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return r}})}});class t0 extends ba{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function n0(t,e){return t.state.facet(Sc).formatNumber(e,t.state)}const y7=am.compute([Sc],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(v7)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new t0(n0(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Sc)!=e.state.facet(Sc),initialSpacer(e){return new t0(n0(e,t2(e.state.doc.lines)))},updateSpacer(e,n){let r=n0(n.view,t2(n.view.state.doc.lines));return r==e.number?e:new t0(r)},domEventHandlers:t.facet(Sc).domEventHandlers}));function w7(t={}){return[Sc.of(t),h7(),y7]}function t2(t){let e=9;for(;e<t;)e=e*10+9;return e}const b7=new class extends ba{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},x7=om.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(b7.range(i)))}return ut.of(e)});function S7(){return x7}function fR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=fR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Fe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=fR(t))&&(r&&(r+=" "),r+=e);return r}var hR={BASE_URL:"/VonSim8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const k7=Symbol((hR?"production":void 0)!=="production"?"RESET":""),_7=t=>typeof(t==null?void 0:t.then)=="function";function C7(t){let e,n;const r={getItem:(i,s)=>{var o,a;const l=u=>{if(u=u||"",e!==u){try{n=JSON.parse(u)}catch{return s}e=u}return n},c=(a=(o=t())==null?void 0:o.getItem(i))!=null?a:null;return _7(c)?c.then(l):l(c)},setItem:(i,s)=>{var o;return(o=t())==null?void 0:o.setItem(i,JSON.stringify(s))},removeItem:i=>{var s;return(s=t())==null?void 0:s.removeItem(i)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(r.subscribe=(i,s,o)=>{if(!(t()instanceof window.Storage))return()=>{};const a=l=>{if(l.storageArea===t()&&l.key===i){let c;try{c=JSON.parse(l.newValue||"")}catch{c=o}s(c)}};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}),r}const E7=C7(()=>typeof window<"u"?window.localStorage:void 0);function pR(t,e,n=E7,r){const i=r==null?void 0:r.getOnInit,s=Ae(i?n.getItem(t,e):e);return(hR?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{i||a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},Ae(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===k7?(l(s,e),n.removeItem(t)):u instanceof Promise?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}function we(){return we=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},we.apply(this,arguments)}function A7(t,e=globalThis==null?void 0:globalThis.document){const n=er(t);g.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const Kb="dismissableLayer.update",P7="dismissableLayer.pointerDownOutside",$7="dismissableLayer.focusOutside";let n2;const mR=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wv=g.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,u=g.useContext(mR),[d,f]=g.useState(null),h=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=g.useState({}),m=st(e,C=>f(C)),w=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=w.indexOf(v),x=d?w.indexOf(d):-1,k=u.layersWithOutsidePointerEventsDisabled.size>0,_=x>=y,P=O7(C=>{const N=C.target,R=[...u.branches].some(M=>M.contains(N));!_||R||(s==null||s(C),a==null||a(C),C.defaultPrevented||l==null||l())},h),A=N7(C=>{const N=C.target;[...u.branches].some(M=>M.contains(N))||(o==null||o(C),a==null||a(C),C.defaultPrevented||l==null||l())},h);return A7(C=>{x===u.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},h),g.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(n2=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),r2(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=n2)}},[d,h,r,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),r2())},[d,u]),g.useEffect(()=>{const C=()=>p({});return document.addEventListener(Kb,C),()=>document.removeEventListener(Kb,C)},[]),g.createElement(Ge.div,we({},c,{ref:m,style:{pointerEvents:k?_?"auto":"none":void 0,...t.style},onFocusCapture:ve(t.onFocusCapture,A.onFocusCapture),onBlurCapture:ve(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:ve(t.onPointerDownCapture,P.onPointerDownCapture)}))}),T7=g.forwardRef((t,e)=>{const n=g.useContext(mR),r=g.useRef(null),i=st(e,r);return g.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g.createElement(Ge.div,we({},t,{ref:i}))});function O7(t,e=globalThis==null?void 0:globalThis.document){const n=er(t),r=g.useRef(!1),i=g.useRef(()=>{});return g.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let u=function(){gR(P7,n,c,{discrete:!0})};var l=u;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function N7(t,e=globalThis==null?void 0:globalThis.document){const n=er(t),r=g.useRef(!1);return g.useEffect(()=>{const i=s=>{s.target&&!r.current&&gR($7,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function r2(){const t=new CustomEvent(Kb);document.dispatchEvent(t)}function gR(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Ux(i,s):i.dispatchEvent(s)}const R7=wv,M7=T7;let r0=0;function oS(){g.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:i2()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:i2()),r0++,()=>{r0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),r0--}},[])}function i2(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const i0="focusScope.autoFocusOnMount",s0="focusScope.autoFocusOnUnmount",s2={bubbles:!1,cancelable:!0},aS=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=g.useState(null),c=er(i),u=er(s),d=g.useRef(null),f=st(e,m=>l(m)),h=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let y=function(P){if(h.paused||!a)return;const A=P.target;a.contains(A)?d.current=A:Po(d.current,{select:!0})},x=function(P){if(h.paused||!a)return;const A=P.relatedTarget;A!==null&&(a.contains(A)||Po(d.current,{select:!0}))},k=function(P){if(document.activeElement===document.body)for(const C of P)C.removedNodes.length>0&&Po(a)};var m=y,w=x,v=k;document.addEventListener("focusin",y),document.addEventListener("focusout",x);const _=new MutationObserver(k);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),_.disconnect()}}},[r,a,h.paused]),g.useEffect(()=>{if(a){a2.add(h);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(i0,s2);a.addEventListener(i0,c),a.dispatchEvent(v),v.defaultPrevented||(D7(j7(vR(a)),{select:!0}),document.activeElement===m&&Po(a))}return()=>{a.removeEventListener(i0,c),setTimeout(()=>{const v=new CustomEvent(s0,s2);a.addEventListener(s0,u),a.dispatchEvent(v),v.defaultPrevented||Po(m??document.body,{select:!0}),a.removeEventListener(s0,u),a2.remove(h)},0)}}},[a,c,u,h]);const p=g.useCallback(m=>{if(!n&&!r||h.paused)return;const w=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(w&&v){const y=m.currentTarget,[x,k]=I7(y);x&&k?!m.shiftKey&&v===k?(m.preventDefault(),n&&Po(x,{select:!0})):m.shiftKey&&v===x&&(m.preventDefault(),n&&Po(k,{select:!0})):v===y&&m.preventDefault()}},[n,r,h.paused]);return g.createElement(Ge.div,we({tabIndex:-1},o,{ref:f,onKeyDown:p}))});function D7(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Po(r,{select:e}),document.activeElement!==n)return}function I7(t){const e=vR(t),n=o2(e,t),r=o2(e.reverse(),t);return[n,r]}function vR(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function o2(t,e){for(const n of t)if(!L7(n,{upTo:e}))return n}function L7(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function B7(t){return t instanceof HTMLInputElement&&"select"in t}function Po(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&B7(t)&&e&&t.select()}}const a2=F7();function F7(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=l2(t,e),t.unshift(e)},remove(e){var n;t=l2(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function l2(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function j7(t){return t.filter(e=>e.tagName!=="A")}const z7=["top","right","bottom","left"],xa=Math.min,Ir=Math.max,og=Math.round,op=Math.floor,Sa=t=>({x:t,y:t}),U7={left:"right",right:"left",bottom:"top",top:"bottom"},V7={start:"end",end:"start"};function Xb(t,e,n){return Ir(t,xa(e,n))}function fo(t,e){return typeof t=="function"?t(e):t}function ho(t){return t.split("-")[0]}function Eu(t){return t.split("-")[1]}function lS(t){return t==="x"?"y":"x"}function cS(t){return t==="y"?"height":"width"}function Au(t){return["top","bottom"].includes(ho(t))?"y":"x"}function uS(t){return lS(Au(t))}function H7(t,e,n){n===void 0&&(n=!1);const r=Eu(t),i=uS(t),s=cS(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=ag(o)),[o,ag(o)]}function W7(t){const e=ag(t);return[qb(t),e,qb(e)]}function qb(t){return t.replace(/start|end/g,e=>V7[e])}function G7(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function K7(t,e,n,r){const i=Eu(t);let s=G7(ho(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(qb)))),s}function ag(t){return t.replace(/left|right|bottom|top/g,e=>U7[e])}function X7(t){return{top:0,right:0,bottom:0,left:0,...t}}function yR(t){return typeof t!="number"?X7(t):{top:t,right:t,bottom:t,left:t}}function lg(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function c2(t,e,n){let{reference:r,floating:i}=t;const s=Au(e),o=uS(e),a=cS(o),l=ho(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Eu(e)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const q7=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=c2(c,r,l),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:w,fn:v}=a[m],{x:y,y:x,data:k,reset:_}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:e}});if(u=y??u,d=x??d,h={...h,[w]:{...h[w],...k}},_&&p<=50){p++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):_.rects),{x:u,y:d}=c2(c,f,l)),m=-1;continue}}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};async function bf(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=fo(e,t),p=yR(h),w=a[f?d==="floating"?"reference":"floating":d],v=lg(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=d==="floating"?{...o.floating,x:r,y:i}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},_=lg(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:x,strategy:l}):y);return{top:(v.top-_.top+p.top)/k.y,bottom:(_.bottom-v.bottom+p.bottom)/k.y,left:(v.left-_.left+p.left)/k.x,right:(_.right-v.right+p.right)/k.x}}const Y7=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=fo(t,e)||{};if(c==null)return{};const d=yR(u),f={x:n,y:r},h=uS(i),p=cS(h),m=await o.getDimensions(c),w=h==="y",v=w?"top":"left",y=w?"bottom":"right",x=w?"clientHeight":"clientWidth",k=s.reference[p]+s.reference[h]-f[h]-s.floating[p],_=f[h]-s.reference[h],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let A=P?P[x]:0;(!A||!await(o.isElement==null?void 0:o.isElement(P)))&&(A=a.floating[x]||s.floating[p]);const C=k/2-_/2,N=A/2-m[p]/2-1,R=xa(d[v],N),M=xa(d[y],N),L=R,H=A-m[p]-M,T=A/2-m[p]/2+C,V=Xb(L,T,H),q=!l.arrow&&Eu(i)!=null&&T!=V&&s.reference[p]/2-(T<L?R:M)-m[p]/2<0,te=q?T<L?T-L:T-H:0;return{[h]:f[h]+te,data:{[h]:V,centerOffset:T-V-te,...q&&{alignmentOffset:te}},reset:q}}}),J7=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...w}=fo(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=ho(i),y=ho(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(y||!m?[ag(a)]:W7(a));!f&&p!=="none"&&k.push(...K7(a,m,p,x));const _=[a,...k],P=await bf(e,w),A=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&A.push(P[v]),d){const L=H7(i,o,x);A.push(P[L[0]],P[L[1]])}if(C=[...C,{placement:i,overflows:A}],!A.every(L=>L<=0)){var N,R;const L=(((N=s.flip)==null?void 0:N.index)||0)+1,H=_[L];if(H)return{data:{index:L,overflows:C},reset:{placement:H}};let T=(R=C.filter(V=>V.overflows[0]<=0).sort((V,q)=>V.overflows[1]-q.overflows[1])[0])==null?void 0:R.placement;if(!T)switch(h){case"bestFit":{var M;const V=(M=C.map(q=>[q.placement,q.overflows.filter(te=>te>0).reduce((te,W)=>te+W,0)]).sort((q,te)=>q[1]-te[1])[0])==null?void 0:M[0];V&&(T=V);break}case"initialPlacement":T=a;break}if(i!==T)return{reset:{placement:T}}}return{}}}};function u2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function d2(t){return z7.some(e=>t[e]>=0)}const Z7=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=fo(t,e);switch(r){case"referenceHidden":{const s=await bf(e,{...i,elementContext:"reference"}),o=u2(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:d2(o)}}}case"escaped":{const s=await bf(e,{...i,altBoundary:!0}),o=u2(s,n.floating);return{data:{escapedOffsets:o,escaped:d2(o)}}}default:return{}}}}};async function Q7(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ho(n),a=Eu(n),l=Au(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=fo(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const e9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await Q7(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},t9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:v,y}=w;return{x:v,y}}},...l}=fo(t,e),c={x:n,y:r},u=await bf(e,l),d=Au(ho(i)),f=lS(d);let h=c[f],p=c[d];if(s){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=h+u[w],x=h-u[v];h=Xb(y,h,x)}if(o){const w=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=p+u[w],x=p-u[v];p=Xb(y,p,x)}const m=a.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},n9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=fo(t,e),u={x:n,y:r},d=Au(i),f=lS(d);let h=u[f],p=u[d];const m=fo(a,e),w=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const x=f==="y"?"height":"width",k=s.reference[f]-s.floating[x]+w.mainAxis,_=s.reference[f]+s.reference[x]-w.mainAxis;h<k?h=k:h>_&&(h=_)}if(c){var v,y;const x=f==="y"?"width":"height",k=["top","left"].includes(ho(i)),_=s.reference[d]-s.floating[x]+(k&&((v=o.offset)==null?void 0:v[d])||0)+(k?0:w.crossAxis),P=s.reference[d]+s.reference[x]+(k?0:((y=o.offset)==null?void 0:y[d])||0)-(k?w.crossAxis:0);p<_?p=_:p>P&&(p=P)}return{[f]:h,[d]:p}}}},r9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=fo(t,e),l=await bf(e,a),c=ho(n),u=Eu(n),d=Au(n)==="y",{width:f,height:h}=r.floating;let p,m;c==="top"||c==="bottom"?(p=c,m=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=c,p=u==="end"?"top":"bottom");const w=h-l[p],v=f-l[m],y=!e.middlewareData.shift;let x=w,k=v;if(d){const P=f-l.left-l.right;k=u||y?xa(v,P):P}else{const P=h-l.top-l.bottom;x=u||y?xa(w,P):P}if(y&&!u){const P=Ir(l.left,0),A=Ir(l.right,0),C=Ir(l.top,0),N=Ir(l.bottom,0);d?k=f-2*(P!==0||A!==0?P+A:Ir(l.left,l.right)):x=h-2*(C!==0||N!==0?C+N:Ir(l.top,l.bottom))}await o({...e,availableWidth:k,availableHeight:x});const _=await i.getDimensions(s.floating);return f!==_.width||h!==_.height?{reset:{rects:!0}}:{}}}};function ka(t){return wR(t)?(t.nodeName||"").toLowerCase():"#document"}function Wr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function bo(t){var e;return(e=(wR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function wR(t){return t instanceof Node||t instanceof Wr(t).Node}function po(t){return t instanceof Element||t instanceof Wr(t).Element}function Es(t){return t instanceof HTMLElement||t instanceof Wr(t).HTMLElement}function f2(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Wr(t).ShadowRoot}function uh(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=xi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function i9(t){return["table","td","th"].includes(ka(t))}function dS(t){const e=fS(),n=xi(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function s9(t){let e=lu(t);for(;Es(e)&&!bv(e);){if(dS(e))return e;e=lu(e)}return null}function fS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function bv(t){return["html","body","#document"].includes(ka(t))}function xi(t){return Wr(t).getComputedStyle(t)}function xv(t){return po(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function lu(t){if(ka(t)==="html")return t;const e=t.assignedSlot||t.parentNode||f2(t)&&t.host||bo(t);return f2(e)?e.host:e}function bR(t){const e=lu(t);return bv(e)?t.ownerDocument?t.ownerDocument.body:t.body:Es(e)&&uh(e)?e:bR(e)}function xf(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=bR(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Wr(i);return s?e.concat(o,o.visualViewport||[],uh(i)?i:[],o.frameElement&&n?xf(o.frameElement):[]):e.concat(i,xf(i,[],n))}function xR(t){const e=xi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Es(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=og(n)!==s||og(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function hS(t){return po(t)?t:t.contextElement}function Lc(t){const e=hS(t);if(!Es(e))return Sa(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=xR(e);let o=(s?og(n.width):n.width)/r,a=(s?og(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const o9=Sa(0);function SR(t){const e=Wr(t);return!fS()||!e.visualViewport?o9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function a9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Wr(t)?!1:e}function Tl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=hS(t);let o=Sa(1);e&&(r?po(r)&&(o=Lc(r)):o=Lc(t));const a=a9(s,n,r)?SR(s):Sa(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const f=Wr(s),h=r&&po(r)?Wr(r):r;let p=f.frameElement;for(;p&&r&&h!==f;){const m=Lc(p),w=p.getBoundingClientRect(),v=xi(p),y=w.left+(p.clientLeft+parseFloat(v.paddingLeft))*m.x,x=w.top+(p.clientTop+parseFloat(v.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,d*=m.y,l+=y,c+=x,p=Wr(p).frameElement}}return lg({width:u,height:d,x:l,y:c})}function l9(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=Es(n),s=bo(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=Sa(1);const l=Sa(0);if((i||!i&&r!=="fixed")&&((ka(n)!=="body"||uh(s))&&(o=xv(n)),Es(n))){const c=Tl(n);a=Lc(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function c9(t){return Array.from(t.getClientRects())}function kR(t){return Tl(bo(t)).left+xv(t).scrollLeft}function u9(t){const e=bo(t),n=xv(t),r=t.ownerDocument.body,i=Ir(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ir(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+kR(t);const a=-n.scrollTop;return xi(r).direction==="rtl"&&(o+=Ir(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function d9(t,e){const n=Wr(t),r=bo(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=fS();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function f9(t,e){const n=Tl(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Es(t)?Lc(t):Sa(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function h2(t,e,n){let r;if(e==="viewport")r=d9(t,n);else if(e==="document")r=u9(bo(t));else if(po(e))r=f9(e,n);else{const i=SR(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return lg(r)}function _R(t,e){const n=lu(t);return n===e||!po(n)||bv(n)?!1:xi(n).position==="fixed"||_R(n,e)}function h9(t,e){const n=e.get(t);if(n)return n;let r=xf(t,[],!1).filter(a=>po(a)&&ka(a)!=="body"),i=null;const s=xi(t).position==="fixed";let o=s?lu(t):t;for(;po(o)&&!bv(o);){const a=xi(o),l=dS(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||uh(o)&&!l&&_R(t,o))?r=r.filter(u=>u!==o):i=a,o=lu(o)}return e.set(t,r),r}function p9(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?h9(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=h2(e,u,i);return c.top=Ir(d.top,c.top),c.right=xa(d.right,c.right),c.bottom=xa(d.bottom,c.bottom),c.left=Ir(d.left,c.left),c},h2(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function m9(t){const{width:e,height:n}=xR(t);return{width:e,height:n}}function g9(t,e,n){const r=Es(e),i=bo(e),s=n==="fixed",o=Tl(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Sa(0);if(r||!r&&!s)if((ka(e)!=="body"||uh(i))&&(a=xv(e)),r){const c=Tl(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else i&&(l.x=kR(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function p2(t,e){return!Es(t)||xi(t).position==="fixed"?null:e?e(t):t.offsetParent}function CR(t,e){const n=Wr(t);if(!Es(t))return n;let r=p2(t,e);for(;r&&i9(r)&&xi(r).position==="static";)r=p2(r,e);return r&&(ka(r)==="html"||ka(r)==="body"&&xi(r).position==="static"&&!dS(r))?n:r||s9(t)||n}const v9=async function(t){let{reference:e,floating:n,strategy:r}=t;const i=this.getOffsetParent||CR,s=this.getDimensions;return{reference:g9(e,await i(n),r),floating:{x:0,y:0,...await s(n)}}};function y9(t){return xi(t).direction==="rtl"}const w9={convertOffsetParentRelativeRectToViewportRelativeRect:l9,getDocumentElement:bo,getClippingRect:p9,getOffsetParent:CR,getElementRects:v9,getClientRects:c9,getDimensions:m9,getScale:Lc,isElement:po,isRTL:y9};function b9(t,e){let n=null,r;const i=bo(t);function s(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:f}=t.getBoundingClientRect();if(a||e(),!d||!f)return;const h=op(u),p=op(i.clientWidth-(c+d)),m=op(i.clientHeight-(u+f)),w=op(c),y={rootMargin:-h+"px "+-p+"px "+-m+"px "+-w+"px",threshold:Ir(0,xa(1,l))||1};let x=!0;function k(_){const P=_[0].intersectionRatio;if(P!==l){if(!x)return o();P?o(!1,P):r=setTimeout(()=>{o(!1,1e-7)},100)}x=!1}try{n=new IntersectionObserver(k,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,y)}n.observe(t)}return o(!0),s}function x9(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=hS(t),u=i||s?[...c?xf(c):[],...xf(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=c&&a?b9(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(v=>{let[y]=v;y&&y.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{h&&h.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let p,m=l?Tl(t):null;l&&w();function w(){const v=Tl(t);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(w)}return n(),()=>{u.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d&&d(),h&&h.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const S9=t9,k9=J7,_9=r9,C9=Z7,m2=Y7,E9=n9,A9=(t,e,n)=>{const r=new Map,i={platform:w9,...n},s={...i.platform,_c:r};return q7(t,e,{...i,platform:s})},P9=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?m2({element:r.current,padding:i}).fn(n):{}:r?m2({element:r,padding:i}).fn(n):{}}}};var lm=typeof document<"u"?g.useLayoutEffect:g.useEffect;function cg(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!cg(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!cg(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function ER(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function g2(t,e){const n=ER(t);return Math.round(e*n)/n}function v2(t){const e=g.useRef(t);return lm(()=>{e.current=t}),e}function $9(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=g.useState(r);cg(f,r)||h(r);const[p,m]=g.useState(null),[w,v]=g.useState(null),y=g.useCallback(q=>{q!=P.current&&(P.current=q,m(q))},[m]),x=g.useCallback(q=>{q!==A.current&&(A.current=q,v(q))},[v]),k=s||p,_=o||w,P=g.useRef(null),A=g.useRef(null),C=g.useRef(u),N=v2(l),R=v2(i),M=g.useCallback(()=>{if(!P.current||!A.current)return;const q={placement:e,strategy:n,middleware:f};R.current&&(q.platform=R.current),A9(P.current,A.current,q).then(te=>{const W={...te,isPositioned:!0};L.current&&!cg(C.current,W)&&(C.current=W,vo.flushSync(()=>{d(W)}))})},[f,e,n,R]);lm(()=>{c===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(q=>({...q,isPositioned:!1})))},[c]);const L=g.useRef(!1);lm(()=>(L.current=!0,()=>{L.current=!1}),[]),lm(()=>{if(k&&(P.current=k),_&&(A.current=_),k&&_){if(N.current)return N.current(k,_,M);M()}},[k,_,M,N]);const H=g.useMemo(()=>({reference:P,floating:A,setReference:y,setFloating:x}),[y,x]),T=g.useMemo(()=>({reference:k,floating:_}),[k,_]),V=g.useMemo(()=>{const q={position:n,left:0,top:0};if(!T.floating)return q;const te=g2(T.floating,u.x),W=g2(T.floating,u.y);return a?{...q,transform:"translate("+te+"px, "+W+"px)",...ER(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:W}},[n,a,T.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:M,refs:H,elements:T,floatingStyles:V}),[u,M,H,T,V])}function pS(t){const[e,n]=g.useState(void 0);return bi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const AR="Popper",[PR,Pu]=Ji(AR),[T9,$R]=PR(AR),O9=t=>{const{__scopePopper:e,children:n}=t,[r,i]=g.useState(null);return g.createElement(T9,{scope:e,anchor:r,onAnchorChange:i},n)},N9="PopperAnchor",R9=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=$R(N9,n),o=g.useRef(null),a=st(e,o);return g.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:g.createElement(Ge.div,we({},i,{ref:a}))}),TR="PopperContent",[M9,une]=PR(TR),D9=g.forwardRef((t,e)=>{var n,r,i,s,o,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:f=0,align:h="center",alignOffset:p=0,arrowPadding:m=0,avoidCollisions:w=!0,collisionBoundary:v=[],collisionPadding:y=0,sticky:x="partial",hideWhenDetached:k=!1,updatePositionStrategy:_="optimized",onPlaced:P,...A}=t,C=$R(TR,u),[N,R]=g.useState(null),M=st(e,ie=>R(ie)),[L,H]=g.useState(null),T=pS(L),V=(n=T==null?void 0:T.width)!==null&&n!==void 0?n:0,q=(r=T==null?void 0:T.height)!==null&&r!==void 0?r:0,te=d+(h!=="center"?"-"+h:""),W=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},j=Array.isArray(v)?v:[v],Z=j.length>0,K={padding:W,boundary:j.filter(I9),altBoundary:Z},{refs:Q,floatingStyles:ae,placement:B,isPositioned:I,middlewareData:z}=$9({strategy:"fixed",placement:te,whileElementsMounted:(...ie)=>x9(...ie,{animationFrame:_==="always"}),elements:{reference:C.anchor},middleware:[e9({mainAxis:f+q,alignmentAxis:p}),w&&S9({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?E9():void 0,...K}),w&&k9({...K}),_9({...K,apply:({elements:ie,rects:Me,availableWidth:he,availableHeight:Le})=>{const{width:ze,height:be}=Me.reference,rt=ie.floating.style;rt.setProperty("--radix-popper-available-width",`${he}px`),rt.setProperty("--radix-popper-available-height",`${Le}px`),rt.setProperty("--radix-popper-anchor-width",`${ze}px`),rt.setProperty("--radix-popper-anchor-height",`${be}px`)}}),L&&P9({element:L,padding:m}),L9({arrowWidth:V,arrowHeight:q}),k&&C9({strategy:"referenceHidden",...K})]}),[S,$]=OR(B),D=er(P);bi(()=>{I&&(D==null||D())},[I,D]);const O=(i=z.arrow)===null||i===void 0?void 0:i.x,U=(s=z.arrow)===null||s===void 0?void 0:s.y,X=((o=z.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[ee,J]=g.useState();return bi(()=>{N&&J(window.getComputedStyle(N).zIndex)},[N]),g.createElement("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:I?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[(a=z.transformOrigin)===null||a===void 0?void 0:a.x,(l=z.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},g.createElement(M9,{scope:u,placedSide:S,onArrowChange:H,arrowX:O,arrowY:U,shouldHideArrow:X},g.createElement(Ge.div,we({"data-side":S,"data-align":$},A,{ref:M,style:{...A.style,animation:I?void 0:"none",opacity:(c=z.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function I9(t){return t!==null}const L9=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,d=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,f=d?0:t.arrowWidth,h=d?0:t.arrowHeight,[p,m]=OR(a),w={start:"0%",center:"50%",end:"100%"}[m],v=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+f/2,y=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+h/2;let x="",k="";return p==="bottom"?(x=d?w:`${v}px`,k=`${-h}px`):p==="top"?(x=d?w:`${v}px`,k=`${l.floating.height+h}px`):p==="right"?(x=`${-h}px`,k=d?w:`${y}px`):p==="left"&&(x=`${l.floating.width+h}px`,k=d?w:`${y}px`),{data:{x,y:k}}}});function OR(t){const[e,n="center"]=t.split("-");return[e,n]}const mS=O9,gS=R9,vS=D9,Sv=g.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?b8.createPortal(g.createElement(Ge.div,we({},i,{ref:e})),r):null});var B9=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Xl=new WeakMap,ap=new WeakMap,lp={},o0=0,NR=function(t){return t&&(t.host||NR(t.parentNode))},F9=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=NR(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},j9=function(t,e,n,r){var i=F9(e,Array.isArray(t)?t:[t]);lp[n]||(lp[n]=new WeakMap);var s=lp[n],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else{var h=f.getAttribute(r),p=h!==null&&h!=="false",m=(Xl.get(f)||0)+1,w=(s.get(f)||0)+1;Xl.set(f,m),s.set(f,w),o.push(f),m===1&&p&&ap.set(f,!0),w===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}})};return u(e),a.clear(),o0++,function(){o.forEach(function(d){var f=Xl.get(d)-1,h=s.get(d)-1;Xl.set(d,f),s.set(d,h),f||(ap.has(d)||d.removeAttribute(r),ap.delete(d)),h||d.removeAttribute(n)}),o0--,o0||(Xl=new WeakMap,Xl=new WeakMap,ap=new WeakMap,lp={})}},yS=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||B9(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),j9(r,i,n,"aria-hidden")):function(){return null}},cm="right-scroll-bar-position",um="width-before-scroll-bar",z9="with-scroll-bars-hidden",U9="--removed-body-scroll-bar-size";function a0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function V9(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var y2=new WeakMap;function H9(t,e){var n=V9(e||null,function(r){return t.forEach(function(i){return a0(i,r)})});return g.useLayoutEffect(function(){var r=y2.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||a0(a,null)}),s.forEach(function(a){i.has(a)||a0(a,o)})}y2.set(n,t)},[t]),n}function W9(t){return t}function G9(t,e){e===void 0&&(e=W9);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function K9(t){t===void 0&&(t={});var e=G9(null);return e.options=ms({async:!0,ssr:!1},t),e}var RR=function(t){var e=t.sideCar,n=UO(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,ms({},n))};RR.isSideCarExport=!0;function X9(t,e){return t.useMedium(e),RR}var MR=K9(),l0=function(){},kv=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:l0,onWheelCapture:l0,onTouchMoveCapture:l0}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,h=t.noIsolation,p=t.inert,m=t.allowPinchZoom,w=t.as,v=w===void 0?"div":w,y=UO(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),x=f,k=H9([n,e]),_=ms(ms({},y),i);return g.createElement(g.Fragment,null,u&&g.createElement(x,{sideCar:MR,removeScrollBar:c,shards:d,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n}),o?g.cloneElement(g.Children.only(a),ms(ms({},_),{ref:k})):g.createElement(v,ms({},_,{className:l,ref:k}),a))});kv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kv.classNames={fullWidth:um,zeroRight:cm};var q9=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Y9(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=q9();return e&&t.setAttribute("nonce",e),t}function J9(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Z9(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Q9=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Y9())&&(J9(e,n),Z9(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},ez=function(){var t=Q9();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},DR=function(){var t=ez(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},tz={left:0,top:0,right:0,gap:0},c0=function(t){return parseInt(t||"",10)||0},nz=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[c0(n),c0(r),c0(i)]},rz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return tz;var e=nz(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},iz=DR(),sz=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(z9,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(cm,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(um,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(cm," .").concat(cm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(um," .").concat(um,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(U9,": ").concat(a,`px;
  }
`)},oz=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r,s=g.useMemo(function(){return rz(i)},[i]);return g.createElement(iz,{styles:sz(s,!e,i,n?"":"!important")})},Yb=!1;if(typeof window<"u")try{var cp=Object.defineProperty({},"passive",{get:function(){return Yb=!0,!0}});window.addEventListener("test",cp,cp),window.removeEventListener("test",cp,cp)}catch{Yb=!1}var ql=Yb?{passive:!1}:!1,az=function(t){return t.tagName==="TEXTAREA"},IR=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!az(t)&&n[e]==="visible")},lz=function(t){return IR(t,"overflowY")},cz=function(t){return IR(t,"overflowX")},w2=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=LR(t,n);if(r){var i=BR(t,n),s=i[1],o=i[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},uz=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},dz=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},LR=function(t,e){return t==="v"?lz(e):cz(e)},BR=function(t,e){return t==="v"?uz(e):dz(e)},fz=function(t,e){return t==="h"&&e==="rtl"?-1:1},hz=function(t,e,n,r,i){var s=fz(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{var h=BR(t,a),p=h[0],m=h[1],w=h[2],v=m-w-s*p;(p||v)&&LR(t,a)&&(d+=v,f+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(i&&d===0||!i&&o>d)||!u&&(i&&f===0||!i&&-o>f))&&(c=!0),c},up=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},b2=function(t){return[t.deltaX,t.deltaY]},x2=function(t){return t&&"current"in t?t.current:t},pz=function(t,e){return t[0]===e[0]&&t[1]===e[1]},mz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},gz=0,Yl=[];function vz(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),i=g.useState(gz++)[0],s=g.useState(function(){return DR()})[0],o=g.useRef(t);g.useEffect(function(){o.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var m=EB([t.lockRef.current],(t.shards||[]).map(x2),!0).filter(Boolean);return m.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=g.useCallback(function(m,w){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var v=up(m),y=n.current,x="deltaX"in m?m.deltaX:y[0]-v[0],k="deltaY"in m?m.deltaY:y[1]-v[1],_,P=m.target,A=Math.abs(x)>Math.abs(k)?"h":"v";if("touches"in m&&A==="h"&&P.type==="range")return!1;var C=w2(A,P);if(!C)return!0;if(C?_=A:(_=A==="v"?"h":"v",C=w2(A,P)),!C)return!1;if(!r.current&&"changedTouches"in m&&(x||k)&&(r.current=_),!_)return!0;var N=r.current||_;return hz(N,w,m,N==="h"?x:k,!0)},[]),l=g.useCallback(function(m){var w=m;if(!(!Yl.length||Yl[Yl.length-1]!==s)){var v="deltaY"in w?b2(w):up(w),y=e.current.filter(function(_){return _.name===w.type&&_.target===w.target&&pz(_.delta,v)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var x=(o.current.shards||[]).map(x2).filter(Boolean).filter(function(_){return _.contains(w.target)}),k=x.length>0?a(w,x[0]):!o.current.noIsolation;k&&w.cancelable&&w.preventDefault()}}},[]),c=g.useCallback(function(m,w,v,y){var x={name:m,delta:w,target:v,should:y};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(k){return k!==x})},1)},[]),u=g.useCallback(function(m){n.current=up(m),r.current=void 0},[]),d=g.useCallback(function(m){c(m.type,b2(m),m.target,a(m,t.lockRef.current))},[]),f=g.useCallback(function(m){c(m.type,up(m),m.target,a(m,t.lockRef.current))},[]);g.useEffect(function(){return Yl.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,ql),document.addEventListener("touchmove",l,ql),document.addEventListener("touchstart",u,ql),function(){Yl=Yl.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,ql),document.removeEventListener("touchmove",l,ql),document.removeEventListener("touchstart",u,ql)}},[]);var h=t.removeScrollBar,p=t.inert;return g.createElement(g.Fragment,null,p?g.createElement(s,{styles:mz(i)}):null,h?g.createElement(oz,{gapMode:"margin"}):null)}const yz=X9(MR,vz);var FR=g.forwardRef(function(t,e){return g.createElement(kv,ms({},t,{ref:e,sideCar:yz}))});FR.classNames=kv.classNames;const wS=FR,Jb=["Enter"," "],wz=["ArrowDown","PageUp","Home"],jR=["ArrowUp","PageDown","End"],bz=[...wz,...jR],xz={ltr:[...Jb,"ArrowRight"],rtl:[...Jb,"ArrowLeft"]},Sz={ltr:["ArrowLeft"],rtl:["ArrowRight"]},_v="Menu",[Sf,kz,_z]=nh(_v),[Bl,zR]=Ji(_v,[_z,Pu,hv]),bS=Pu(),UR=hv(),[Cz,Fl]=Bl(_v),[Ez,dh]=Bl(_v),Az=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=bS(e),[l,c]=g.useState(null),u=g.useRef(!1),d=er(s),f=rh(i);return g.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),g.createElement(mS,a,g.createElement(Cz,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c},g.createElement(Ez,{scope:e,onClose:g.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o},r)))},VR=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=bS(n);return g.createElement(gS,we({},i,r,{ref:e}))}),HR="MenuPortal",[Pz,WR]=Bl(HR,{forceMount:void 0}),$z=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=Fl(HR,e);return g.createElement(Pz,{scope:e,forceMount:n},g.createElement(yo,{present:n||s.open},g.createElement(Sv,{asChild:!0,container:i},r)))},Ui="MenuContent",[Tz,xS]=Bl(Ui),Oz=g.forwardRef((t,e)=>{const n=WR(Ui,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Fl(Ui,t.__scopeMenu),o=dh(Ui,t.__scopeMenu);return g.createElement(Sf.Provider,{scope:t.__scopeMenu},g.createElement(yo,{present:r||s.open},g.createElement(Sf.Slot,{scope:t.__scopeMenu},o.modal?g.createElement(Nz,we({},i,{ref:e})):g.createElement(Rz,we({},i,{ref:e})))))}),Nz=g.forwardRef((t,e)=>{const n=Fl(Ui,t.__scopeMenu),r=g.useRef(null),i=st(e,r);return g.useEffect(()=>{const s=r.current;if(s)return yS(s)},[]),g.createElement(SS,we({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ve(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),Rz=g.forwardRef((t,e)=>{const n=Fl(Ui,t.__scopeMenu);return g.createElement(SS,we({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),SS=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,disableOutsideScroll:p,...m}=t,w=Fl(Ui,n),v=dh(Ui,n),y=bS(n),x=UR(n),k=kz(n),[_,P]=g.useState(null),A=g.useRef(null),C=st(e,A,w.onContentChange),N=g.useRef(0),R=g.useRef(""),M=g.useRef(0),L=g.useRef(null),H=g.useRef("right"),T=g.useRef(0),V=p?wS:g.Fragment,q=p?{as:_l,allowPinchZoom:!0}:void 0,te=j=>{var Z,K;const Q=R.current+j,ae=k().filter(D=>!D.disabled),B=document.activeElement,I=(Z=ae.find(D=>D.ref.current===B))===null||Z===void 0?void 0:Z.textValue,z=ae.map(D=>D.textValue),S=qz(z,Q,I),$=(K=ae.find(D=>D.textValue===S))===null||K===void 0?void 0:K.ref.current;(function D(O){R.current=O,window.clearTimeout(N.current),O!==""&&(N.current=window.setTimeout(()=>D(""),1e3))})(Q),$&&setTimeout(()=>$.focus())};g.useEffect(()=>()=>window.clearTimeout(N.current),[]),oS();const W=g.useCallback(j=>{var Z,K;return H.current===((Z=L.current)===null||Z===void 0?void 0:Z.side)&&Jz(j,(K=L.current)===null||K===void 0?void 0:K.area)},[]);return g.createElement(Tz,{scope:n,searchRef:R,onItemEnter:g.useCallback(j=>{W(j)&&j.preventDefault()},[W]),onItemLeave:g.useCallback(j=>{var Z;W(j)||((Z=A.current)===null||Z===void 0||Z.focus(),P(null))},[W]),onTriggerLeave:g.useCallback(j=>{W(j)&&j.preventDefault()},[W]),pointerGraceTimerRef:M,onPointerGraceIntentChange:g.useCallback(j=>{L.current=j},[])},g.createElement(V,q,g.createElement(aS,{asChild:!0,trapped:i,onMountAutoFocus:ve(s,j=>{var Z;j.preventDefault(),(Z=A.current)===null||Z===void 0||Z.focus()}),onUnmountAutoFocus:o},g.createElement(wv,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h},g.createElement(mO,we({asChild:!0},x,{dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:_,onCurrentTabStopIdChange:P,onEntryFocus:ve(l,j=>{v.isUsingKeyboardRef.current||j.preventDefault()})}),g.createElement(vS,we({role:"menu","aria-orientation":"vertical","data-state":YR(w.open),"data-radix-menu-content":"",dir:v.dir},y,m,{ref:C,style:{outline:"none",...m.style},onKeyDown:ve(m.onKeyDown,j=>{const K=j.target.closest("[data-radix-menu-content]")===j.currentTarget,Q=j.ctrlKey||j.altKey||j.metaKey,ae=j.key.length===1;K&&(j.key==="Tab"&&j.preventDefault(),!Q&&ae&&te(j.key));const B=A.current;if(j.target!==B||!bz.includes(j.key))return;j.preventDefault();const z=k().filter(S=>!S.disabled).map(S=>S.ref.current);jR.includes(j.key)&&z.reverse(),Kz(z)}),onBlur:ve(t.onBlur,j=>{j.currentTarget.contains(j.target)||(window.clearTimeout(N.current),R.current="")}),onPointerMove:ve(t.onPointerMove,kf(j=>{const Z=j.target,K=T.current!==j.clientX;if(j.currentTarget.contains(Z)&&K){const Q=j.clientX>T.current?"right":"left";H.current=Q,T.current=j.clientX}}))})))))))}),Mz=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return g.createElement(Ge.div,we({},r,{ref:e}))}),Zb="MenuItem",S2="menu.itemSelect",kS=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=g.useRef(null),o=dh(Zb,t.__scopeMenu),a=xS(Zb,t.__scopeMenu),l=st(e,s),c=g.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(S2,{bubbles:!0,cancelable:!0});d.addEventListener(S2,h=>r==null?void 0:r(h),{once:!0}),Ux(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return g.createElement(GR,we({},i,{ref:l,disabled:n,onClick:ve(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)===null||f===void 0||f.call(t,d),c.current=!0},onPointerUp:ve(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)===null||f===void 0||f.click()}),onKeyDown:ve(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||Jb.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})}))}),GR=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=xS(Zb,n),a=UR(n),l=g.useRef(null),c=st(e,l),[u,d]=g.useState(!1),[f,h]=g.useState("");return g.useEffect(()=>{const p=l.current;if(p){var m;h(((m=p.textContent)!==null&&m!==void 0?m:"").trim())}},[s.children]),g.createElement(Sf.ItemSlot,{scope:n,disabled:r,textValue:i??f},g.createElement(gO,we({asChild:!0},a,{focusable:!r}),g.createElement(Ge.div,we({role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0},s,{ref:c,onPointerMove:ve(t.onPointerMove,kf(p=>{r?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus())})),onPointerLeave:ve(t.onPointerLeave,kf(p=>o.onItemLeave(p))),onFocus:ve(t.onFocus,()=>d(!0)),onBlur:ve(t.onBlur,()=>d(!1))}))))}),Dz=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return g.createElement(XR,{scope:t.__scopeMenu,checked:n},g.createElement(kS,we({role:"menuitemcheckbox","aria-checked":ug(n)?"mixed":n},i,{ref:e,"data-state":_S(n),onSelect:ve(i.onSelect,()=>r==null?void 0:r(ug(n)?!0:!n),{checkForDefaultPrevented:!1})})))}),Iz="MenuRadioGroup",[dne,Lz]=Bl(Iz,{value:void 0,onValueChange:()=>{}}),Bz="MenuRadioItem",Fz=g.forwardRef((t,e)=>{const{value:n,...r}=t,i=Lz(Bz,t.__scopeMenu),s=n===i.value;return g.createElement(XR,{scope:t.__scopeMenu,checked:s},g.createElement(kS,we({role:"menuitemradio","aria-checked":s},r,{ref:e,"data-state":_S(s),onSelect:ve(r.onSelect,()=>{var o;return(o=i.onValueChange)===null||o===void 0?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})))}),KR="MenuItemIndicator",[XR,jz]=Bl(KR,{checked:!1}),zz=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=jz(KR,n);return g.createElement(yo,{present:r||ug(s.checked)||s.checked===!0},g.createElement(Ge.span,we({},i,{ref:e,"data-state":_S(s.checked)})))}),Uz=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return g.createElement(Ge.div,we({role:"separator","aria-orientation":"horizontal"},r,{ref:e}))}),Vz="MenuSub",[fne,qR]=Bl(Vz),dp="MenuSubTrigger",Hz=g.forwardRef((t,e)=>{const n=Fl(dp,t.__scopeMenu),r=dh(dp,t.__scopeMenu),i=qR(dp,t.__scopeMenu),s=xS(dp,t.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),g.createElement(VR,we({asChild:!0},c),g.createElement(GR,we({id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":YR(n.open)},t,{ref:fv(e,i.onTriggerChange),onClick:d=>{var f;(f=t.onClick)===null||f===void 0||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ve(t.onPointerMove,kf(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ve(t.onPointerLeave,kf(d=>{var f;u();const h=(f=n.content)===null||f===void 0?void 0:f.getBoundingClientRect();if(h){var p;const m=(p=n.content)===null||p===void 0?void 0:p.dataset.side,w=m==="right",v=w?-5:5,y=h[w?"left":"right"],x=h[w?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:y,y:h.top},{x,y:h.top},{x,y:h.bottom},{x:y,y:h.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ve(t.onKeyDown,d=>{const f=s.searchRef.current!=="";if(!(t.disabled||f&&d.key===" ")&&xz[r.dir].includes(d.key)){var h;n.onOpenChange(!0),(h=n.content)===null||h===void 0||h.focus(),d.preventDefault()}})})))}),Wz="MenuSubContent",Gz=g.forwardRef((t,e)=>{const n=WR(Ui,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Fl(Ui,t.__scopeMenu),o=dh(Ui,t.__scopeMenu),a=qR(Wz,t.__scopeMenu),l=g.useRef(null),c=st(e,l);return g.createElement(Sf.Provider,{scope:t.__scopeMenu},g.createElement(yo,{present:r||s.open},g.createElement(Sf.Slot,{scope:t.__scopeMenu},g.createElement(SS,we({id:a.contentId,"aria-labelledby":a.triggerId},i,{ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)===null||d===void 0||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ve(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ve(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ve(t.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),f=Sz[o.dir].includes(u.key);if(d&&f){var h;s.onOpenChange(!1),(h=a.trigger)===null||h===void 0||h.focus(),u.preventDefault()}})})))))});function YR(t){return t?"open":"closed"}function ug(t){return t==="indeterminate"}function _S(t){return ug(t)?"indeterminate":t?"checked":"unchecked"}function Kz(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Xz(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function qz(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Xz(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Yz(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function Jz(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Yz(n,e)}function kf(t){return e=>e.pointerType==="mouse"?t(e):void 0}const Zz=Az,Qz=VR,eU=$z,tU=Oz,nU=Mz,rU=kS,iU=Dz,sU=Fz,oU=zz,aU=Uz,lU=Hz,cU=Gz,JR="DropdownMenu",[uU,hne]=Ji(JR,[zR]),ki=zR(),[dU,ZR]=uU(JR),fU=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=ki(e),c=g.useRef(null),[u=!1,d]=ao({prop:i,defaultProp:s,onChange:o});return g.createElement(dU,{scope:e,triggerId:Cl(),triggerRef:c,contentId:Cl(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:a},g.createElement(Zz,we({},l,{open:u,onOpenChange:d,dir:r,modal:a}),n))},hU="DropdownMenuTrigger",pU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=ZR(hU,n),o=ki(n);return g.createElement(Qz,we({asChild:!0},o),g.createElement(Ge.button,we({type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r},i,{ref:fv(e,s.triggerRef),onPointerDown:ve(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ve(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})))}),mU=t=>{const{__scopeDropdownMenu:e,...n}=t,r=ki(e);return g.createElement(eU,we({},r,n))},gU="DropdownMenuContent",vU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ZR(gU,n),s=ki(n),o=g.useRef(!1);return g.createElement(tU,we({id:i.contentId,"aria-labelledby":i.triggerId},s,r,{ref:e,onCloseAutoFocus:ve(t.onCloseAutoFocus,a=>{var l;o.current||(l=i.triggerRef.current)===null||l===void 0||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ve(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),yU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ki(n);return g.createElement(nU,we({},i,r,{ref:e}))}),wU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ki(n);return g.createElement(rU,we({},i,r,{ref:e}))}),bU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ki(n);return g.createElement(iU,we({},i,r,{ref:e}))}),xU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ki(n);return g.createElement(sU,we({},i,r,{ref:e}))}),SU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ki(n);return g.createElement(oU,we({},i,r,{ref:e}))}),kU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ki(n);return g.createElement(aU,we({},i,r,{ref:e}))}),_U=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ki(n);return g.createElement(lU,we({},i,r,{ref:e}))}),CU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=ki(n);return g.createElement(cU,we({},i,r,{ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),EU=fU,AU=pU,PU=mU,QR=vU,eM=yU,tM=wU,nM=bU,rM=xU,iM=SU,sM=kU,oM=_U,aM=CU,lM=EU,cM=AU,$U=g.forwardRef(({className:t,inset:e,children:n,...r},i)=>b.jsxs(oM,{ref:i,className:Fe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...r,children:[n,b.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block h-4 w-4"})]}));$U.displayName=oM.displayName;const TU=g.forwardRef(({className:t,...e},n)=>b.jsx(aM,{ref:n,className:Fe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));TU.displayName=aM.displayName;const CS=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>b.jsx(PU,{children:b.jsx(QR,{ref:r,sideOffset:e,className:Fe("z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));CS.displayName=QR.displayName;const fl=g.forwardRef(({className:t,inset:e,...n},r)=>b.jsx(tM,{ref:r,className:Fe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));fl.displayName=tM.displayName;const OU=g.forwardRef(({className:t,children:e,checked:n,...r},i)=>b.jsxs(nM,{ref:i,className:Fe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[b.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:b.jsx(iM,{children:b.jsx("span",{className:"icon-[lucide--check] h-4 w-4"})})}),e]}));OU.displayName=nM.displayName;const NU=g.forwardRef(({className:t,children:e,...n},r)=>b.jsxs(rM,{ref:r,className:Fe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[b.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:b.jsx(iM,{children:b.jsx("span",{className:"icon-[lucide--circle-dot] block h-4 w-4"})})}),e]}));NU.displayName=rM.displayName;const RU=g.forwardRef(({className:t,inset:e,...n},r)=>b.jsx(eM,{ref:r,className:Fe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));RU.displayName=eM.displayName;const MU=g.forwardRef(({className:t,...e},n)=>b.jsx(sM,{ref:n,className:Fe("-mx-1 my-1 h-px bg-stone-600",t),...e}));MU.displayName=sM.displayName;function uM(t,e){const n=e.split(".");let r=t;for(const i of n)if(i in r)r=r[i];else throw new ReferenceError(`Couldn't find path "${e}".`);return r}const dM=["en","es"];function ES(t){return function(n,r,...i){const s=uM(t[n],r);if(typeof s=="function")return s(...i);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${r}`)}}const ne=Wx();function DU(t){return b.jsx(sB,{store:ne,children:t.children})}var ot;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ot||(ot={}));var Qb;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Qb||(Qb={}));const ye=ot.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),jo=t=>{switch(typeof t){case"undefined":return ye.undefined;case"string":return ye.string;case"number":return isNaN(t)?ye.nan:ye.number;case"boolean":return ye.boolean;case"function":return ye.function;case"bigint":return ye.bigint;case"symbol":return ye.symbol;case"object":return Array.isArray(t)?ye.array:t===null?ye.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ye.promise:typeof Map<"u"&&t instanceof Map?ye.map:typeof Set<"u"&&t instanceof Set?ye.set:typeof Date<"u"&&t instanceof Date?ye.date:ye.object;default:return ye.unknown}},ce=ot.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),IU=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Vi extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,ot.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Vi.create=t=>new Vi(t);const _f=(t,e)=>{let n;switch(t.code){case ce.invalid_type:t.received===ye.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ot.jsonStringifyReplacer)}`;break;case ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${ot.joinValues(t.keys,", ")}`;break;case ce.invalid_union:n="Invalid input";break;case ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ot.joinValues(t.options)}`;break;case ce.invalid_enum_value:n=`Invalid enum value. Expected ${ot.joinValues(t.options)}, received '${t.received}'`;break;case ce.invalid_arguments:n="Invalid function arguments";break;case ce.invalid_return_type:n="Invalid function return type";break;case ce.invalid_date:n="Invalid date";break;case ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ot.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ce.custom:n="Invalid input";break;case ce.invalid_intersection_types:n="Intersection results could not be merged";break;case ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,ot.assertNever(t)}return{message:n}};let fM=_f;function LU(t){fM=t}function dg(){return fM}const fg=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},BU=[];function xe(t,e){const n=fg({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,dg(),_f].filter(r=>!!r)});t.common.issues.push(n)}class Vn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Be;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n)r.push({key:await i.key,value:await i.value});return Vn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Be;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Be=Object.freeze({status:"aborted"}),hM=t=>({status:"dirty",value:t}),tr=t=>({status:"valid",value:t}),e1=t=>t.status==="aborted",t1=t=>t.status==="dirty",Cf=t=>t.status==="valid",hg=t=>typeof Promise<"u"&&t instanceof Promise;var Oe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Oe||(Oe={}));class As{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const k2=(t,e)=>{if(Cf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Vi(t.common.issues);return this._error=n,this._error}}};function je(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:i}}class We{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return jo(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:jo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Vn,ctx:{common:e.parent.common,data:e.data,parsedType:jo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(hg(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:jo(e)},s=this._parseSync({data:e,path:i.path,parent:i});return k2(i,s)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:jo(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(hg(i)?i:Promise.resolve(i));return k2(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:ce.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Xi({schema:this,typeName:De.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return to.create(this,this._def)}nullable(){return Rl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Hi.create(this,this._def)}promise(){return uu.create(this,this._def)}or(e){return $f.create([this,e],this._def)}and(e){return Tf.create(this,e,this._def)}transform(e){return new Xi({...je(this._def),schema:this,typeName:De.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Df({...je(this._def),innerType:this,defaultValue:n,typeName:De.ZodDefault})}brand(){return new mM({typeName:De.ZodBranded,type:this,...je(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new vg({...je(this._def),innerType:this,catchValue:n,typeName:De.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return fh.create(this,e)}readonly(){return wg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const FU=/^c[^\s-]{8,}$/i,jU=/^[a-z][a-z0-9]*$/,zU=/^[0-9A-HJKMNP-TV-Z]{26}$/,UU=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,VU=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,HU="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let u0;const WU=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,GU=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,KU=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function XU(t,e){return!!((e==="v4"||!e)&&WU.test(t)||(e==="v6"||!e)&&GU.test(t))}class Di extends We{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ye.string){const s=this._getOrReturnCtx(e);return xe(s,{code:ce.invalid_type,expected:ye.string,received:s.parsedType}),Be}const r=new Vn;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),xe(i,{code:ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),xe(i,{code:ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?xe(i,{code:ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&xe(i,{code:ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")VU.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"email",code:ce.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")u0||(u0=new RegExp(HU,"u")),u0.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"emoji",code:ce.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")UU.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"uuid",code:ce.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")FU.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"cuid",code:ce.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")jU.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"cuid2",code:ce.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")zU.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"ulid",code:ce.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),xe(i,{validation:"url",code:ce.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"regex",code:ce.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),xe(i,{code:ce.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),xe(i,{code:ce.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),xe(i,{code:ce.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?KU(s).test(e.data)||(i=this._getOrReturnCtx(e,i),xe(i,{code:ce.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="ip"?XU(e.data,s.version)||(i=this._getOrReturnCtx(e,i),xe(i,{validation:"ip",code:ce.invalid_string,message:s.message}),r.dirty()):ot.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:ce.invalid_string,...Oe.errToObj(r)})}_addCheck(e){return new Di({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Oe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Oe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Oe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Oe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Oe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Oe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Oe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Oe.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Oe.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Oe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Oe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Oe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Oe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Oe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Oe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Oe.errToObj(n)})}nonempty(e){return this.min(1,Oe.errToObj(e))}trim(){return new Di({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Di({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Di({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Di.create=t=>{var e;return new Di({checks:[],typeName:De.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...je(t)})};function qU(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class _a extends We{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ye.number){const s=this._getOrReturnCtx(e);return xe(s,{code:ce.invalid_type,expected:ye.number,received:s.parsedType}),Be}let r;const i=new Vn;for(const s of this._def.checks)s.kind==="int"?ot.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{code:ce.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ce.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ce.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?qU(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ce.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{code:ce.not_finite,message:s.message}),i.dirty()):ot.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,r,i){return new _a({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Oe.toString(i)}]})}_addCheck(e){return new _a({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Oe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Oe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Oe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Oe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ot.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}_a.create=t=>new _a({checks:[],typeName:De.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...je(t)});class Ca extends We{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ye.bigint){const s=this._getOrReturnCtx(e);return xe(s,{code:ce.invalid_type,expected:ye.bigint,received:s.parsedType}),Be}let r;const i=new Vn;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ce.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ce.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ce.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ot.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,r,i){return new Ca({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Oe.toString(i)}]})}_addCheck(e){return new Ca({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ca.create=t=>{var e;return new Ca({checks:[],typeName:De.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...je(t)})};class Ef extends We{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ye.boolean){const r=this._getOrReturnCtx(e);return xe(r,{code:ce.invalid_type,expected:ye.boolean,received:r.parsedType}),Be}return tr(e.data)}}Ef.create=t=>new Ef({typeName:De.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...je(t)});class Ol extends We{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ye.date){const s=this._getOrReturnCtx(e);return xe(s,{code:ce.invalid_type,expected:ye.date,received:s.parsedType}),Be}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return xe(s,{code:ce.invalid_date}),Be}const r=new Vn;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),xe(i,{code:ce.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),xe(i,{code:ce.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):ot.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ol({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Oe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Oe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Ol.create=t=>new Ol({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:De.ZodDate,...je(t)});class pg extends We{_parse(e){if(this._getType(e)!==ye.symbol){const r=this._getOrReturnCtx(e);return xe(r,{code:ce.invalid_type,expected:ye.symbol,received:r.parsedType}),Be}return tr(e.data)}}pg.create=t=>new pg({typeName:De.ZodSymbol,...je(t)});class Af extends We{_parse(e){if(this._getType(e)!==ye.undefined){const r=this._getOrReturnCtx(e);return xe(r,{code:ce.invalid_type,expected:ye.undefined,received:r.parsedType}),Be}return tr(e.data)}}Af.create=t=>new Af({typeName:De.ZodUndefined,...je(t)});class Pf extends We{_parse(e){if(this._getType(e)!==ye.null){const r=this._getOrReturnCtx(e);return xe(r,{code:ce.invalid_type,expected:ye.null,received:r.parsedType}),Be}return tr(e.data)}}Pf.create=t=>new Pf({typeName:De.ZodNull,...je(t)});class cu extends We{constructor(){super(...arguments),this._any=!0}_parse(e){return tr(e.data)}}cu.create=t=>new cu({typeName:De.ZodAny,...je(t)});class hl extends We{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tr(e.data)}}hl.create=t=>new hl({typeName:De.ZodUnknown,...je(t)});class mo extends We{_parse(e){const n=this._getOrReturnCtx(e);return xe(n,{code:ce.invalid_type,expected:ye.never,received:n.parsedType}),Be}}mo.create=t=>new mo({typeName:De.ZodNever,...je(t)});class mg extends We{_parse(e){if(this._getType(e)!==ye.undefined){const r=this._getOrReturnCtx(e);return xe(r,{code:ce.invalid_type,expected:ye.void,received:r.parsedType}),Be}return tr(e.data)}}mg.create=t=>new mg({typeName:De.ZodVoid,...je(t)});class Hi extends We{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ye.array)return xe(n,{code:ce.invalid_type,expected:ye.array,received:n.parsedType}),Be;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(xe(n,{code:o?ce.too_big:ce.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(xe(n,{code:ce.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(xe(n,{code:ce.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new As(n,o,n.path,a)))).then(o=>Vn.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new As(n,o,n.path,a)));return Vn.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Hi({...this._def,minLength:{value:e,message:Oe.toString(n)}})}max(e,n){return new Hi({...this._def,maxLength:{value:e,message:Oe.toString(n)}})}length(e,n){return new Hi({...this._def,exactLength:{value:e,message:Oe.toString(n)}})}nonempty(e){return this.min(1,e)}}Hi.create=(t,e)=>new Hi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:De.ZodArray,...je(e)});function tc(t){if(t instanceof It){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=to.create(tc(r))}return new It({...t._def,shape:()=>e})}else return t instanceof Hi?new Hi({...t._def,type:tc(t.element)}):t instanceof to?to.create(tc(t.unwrap())):t instanceof Rl?Rl.create(tc(t.unwrap())):t instanceof Ps?Ps.create(t.items.map(e=>tc(e))):t}class It extends We{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ot.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ye.object){const c=this._getOrReturnCtx(e);return xe(c,{code:ce.invalid_type,expected:ye.object,received:c.parsedType}),Be}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof mo&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new As(i,d,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof mo){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(xe(i,{code:ce.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new As(i,d,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key;c.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>Vn.mergeObjectSync(r,c)):Vn.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Oe.errToObj,new It({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Oe.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new It({...this._def,unknownKeys:"strip"})}passthrough(){return new It({...this._def,unknownKeys:"passthrough"})}extend(e){return new It({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new It({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:De.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new It({...this._def,catchall:e})}pick(e){const n={};return ot.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new It({...this._def,shape:()=>n})}omit(e){const n={};return ot.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new It({...this._def,shape:()=>n})}deepPartial(){return tc(this)}partial(e){const n={};return ot.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new It({...this._def,shape:()=>n})}required(e){const n={};return ot.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof to;)s=s._def.innerType;n[r]=s}}),new It({...this._def,shape:()=>n})}keyof(){return pM(ot.objectKeys(this.shape))}}It.create=(t,e)=>new It({shape:()=>t,unknownKeys:"strip",catchall:mo.create(),typeName:De.ZodObject,...je(e)});It.strictCreate=(t,e)=>new It({shape:()=>t,unknownKeys:"strict",catchall:mo.create(),typeName:De.ZodObject,...je(e)});It.lazycreate=(t,e)=>new It({shape:t,unknownKeys:"strip",catchall:mo.create(),typeName:De.ZodObject,...je(e)});class $f extends We{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Vi(a.ctx.common.issues));return xe(n,{code:ce.invalid_union,unionErrors:o}),Be}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Vi(l));return xe(n,{code:ce.invalid_union,unionErrors:a}),Be}}get options(){return this._def.options}}$f.create=(t,e)=>new $f({options:t,typeName:De.ZodUnion,...je(e)});const dm=t=>t instanceof Nf?dm(t.schema):t instanceof Xi?dm(t.innerType()):t instanceof Rf?[t.value]:t instanceof Ea?t.options:t instanceof Mf?Object.keys(t.enum):t instanceof Df?dm(t._def.innerType):t instanceof Af?[void 0]:t instanceof Pf?[null]:null;class Cv extends We{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ye.object)return xe(n,{code:ce.invalid_type,expected:ye.object,received:n.parsedType}),Be;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(xe(n,{code:ce.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Be)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=dm(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new Cv({typeName:De.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...je(r)})}}function n1(t,e){const n=jo(t),r=jo(e);if(t===e)return{valid:!0,data:t};if(n===ye.object&&r===ye.object){const i=ot.objectKeys(e),s=ot.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=n1(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===ye.array&&r===ye.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=n1(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===ye.date&&r===ye.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Tf extends We{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(e1(s)||e1(o))return Be;const a=n1(s.value,o.value);return a.valid?((t1(s)||t1(o))&&n.dirty(),{status:n.value,value:a.data}):(xe(r,{code:ce.invalid_intersection_types}),Be)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Tf.create=(t,e,n)=>new Tf({left:t,right:e,typeName:De.ZodIntersection,...je(n)});class Ps extends We{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.array)return xe(r,{code:ce.invalid_type,expected:ye.array,received:r.parsedType}),Be;if(r.data.length<this._def.items.length)return xe(r,{code:ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Be;!this._def.rest&&r.data.length>this._def.items.length&&(xe(r,{code:ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new As(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Vn.mergeArray(n,o)):Vn.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Ps({...this._def,rest:e})}}Ps.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ps({items:t,typeName:De.ZodTuple,rest:null,...je(e)})};class Of extends We{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.object)return xe(r,{code:ce.invalid_type,expected:ye.object,received:r.parsedType}),Be;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new As(r,a,r.path,a)),value:o._parse(new As(r,r.data[a],r.path,a))});return r.common.async?Vn.mergeObjectAsync(n,i):Vn.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof We?new Of({keyType:e,valueType:n,typeName:De.ZodRecord,...je(r)}):new Of({keyType:Di.create(),valueType:e,typeName:De.ZodRecord,...je(n)})}}class gg extends We{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.map)return xe(r,{code:ce.invalid_type,expected:ye.map,received:r.parsedType}),Be;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new As(r,a,r.path,[c,"key"])),value:s._parse(new As(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Be;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Be;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}gg.create=(t,e,n)=>new gg({valueType:e,keyType:t,typeName:De.ZodMap,...je(n)});class Nl extends We{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ye.set)return xe(r,{code:ce.invalid_type,expected:ye.set,received:r.parsedType}),Be;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(xe(r,{code:ce.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(xe(r,{code:ce.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Be;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new As(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Nl({...this._def,minSize:{value:e,message:Oe.toString(n)}})}max(e,n){return new Nl({...this._def,maxSize:{value:e,message:Oe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Nl.create=(t,e)=>new Nl({valueType:t,minSize:null,maxSize:null,typeName:De.ZodSet,...je(e)});class Bc extends We{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ye.function)return xe(n,{code:ce.invalid_type,expected:ye.function,received:n.parsedType}),Be;function r(a,l){return fg({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,dg(),_f].filter(c=>!!c),issueData:{code:ce.invalid_arguments,argumentsError:l}})}function i(a,l){return fg({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,dg(),_f].filter(c=>!!c),issueData:{code:ce.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof uu){const a=this;return tr(async function(...l){const c=new Vi([]),u=await a._def.args.parseAsync(l,s).catch(h=>{throw c.addIssue(r(l,h)),c}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,s).catch(h=>{throw c.addIssue(i(d,h)),c})})}else{const a=this;return tr(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new Vi([r(l,c.error)]);const u=Reflect.apply(o,this,c.data),d=a._def.returns.safeParse(u,s);if(!d.success)throw new Vi([i(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Bc({...this._def,args:Ps.create(e).rest(hl.create())})}returns(e){return new Bc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Bc({args:e||Ps.create([]).rest(hl.create()),returns:n||hl.create(),typeName:De.ZodFunction,...je(r)})}}class Nf extends We{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Nf.create=(t,e)=>new Nf({getter:t,typeName:De.ZodLazy,...je(e)});class Rf extends We{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return xe(n,{received:n.data,code:ce.invalid_literal,expected:this._def.value}),Be}return{status:"valid",value:e.data}}get value(){return this._def.value}}Rf.create=(t,e)=>new Rf({value:t,typeName:De.ZodLiteral,...je(e)});function pM(t,e){return new Ea({values:t,typeName:De.ZodEnum,...je(e)})}class Ea extends We{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return xe(n,{expected:ot.joinValues(r),received:n.parsedType,code:ce.invalid_type}),Be}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return xe(n,{received:n.data,code:ce.invalid_enum_value,options:r}),Be}return tr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Ea.create(e)}exclude(e){return Ea.create(this.options.filter(n=>!e.includes(n)))}}Ea.create=pM;class Mf extends We{_parse(e){const n=ot.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ye.string&&r.parsedType!==ye.number){const i=ot.objectValues(n);return xe(r,{expected:ot.joinValues(i),received:r.parsedType,code:ce.invalid_type}),Be}if(n.indexOf(e.data)===-1){const i=ot.objectValues(n);return xe(r,{received:r.data,code:ce.invalid_enum_value,options:i}),Be}return tr(e.data)}get enum(){return this._def.values}}Mf.create=(t,e)=>new Mf({values:t,typeName:De.ZodNativeEnum,...je(e)});class uu extends We{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ye.promise&&n.common.async===!1)return xe(n,{code:ce.invalid_type,expected:ye.promise,received:n.parsedType}),Be;const r=n.parsedType===ye.promise?n.data:Promise.resolve(n.data);return tr(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}uu.create=(t,e)=>new uu({type:t,typeName:De.ZodPromise,...je(e)});class Xi extends We{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===De.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{xe(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Cf(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Cf(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);ot.assertNever(i)}}Xi.create=(t,e,n)=>new Xi({schema:t,typeName:De.ZodEffects,effect:e,...je(n)});Xi.createWithPreprocess=(t,e,n)=>new Xi({schema:e,effect:{type:"preprocess",transform:t},typeName:De.ZodEffects,...je(n)});class to extends We{_parse(e){return this._getType(e)===ye.undefined?tr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}to.create=(t,e)=>new to({innerType:t,typeName:De.ZodOptional,...je(e)});class Rl extends We{_parse(e){return this._getType(e)===ye.null?tr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Rl.create=(t,e)=>new Rl({innerType:t,typeName:De.ZodNullable,...je(e)});class Df extends We{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ye.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Df.create=(t,e)=>new Df({innerType:t,typeName:De.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...je(e)});class vg extends We{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return hg(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Vi(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Vi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}vg.create=(t,e)=>new vg({innerType:t,typeName:De.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...je(e)});class yg extends We{_parse(e){if(this._getType(e)!==ye.nan){const r=this._getOrReturnCtx(e);return xe(r,{code:ce.invalid_type,expected:ye.nan,received:r.parsedType}),Be}return{status:"valid",value:e.data}}}yg.create=t=>new yg({typeName:De.ZodNaN,...je(t)});const YU=Symbol("zod_brand");class mM extends We{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class fh extends We{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Be:s.status==="dirty"?(n.dirty(),hM(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Be:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new fh({in:e,out:n,typeName:De.ZodPipeline})}}class wg extends We{_parse(e){const n=this._def.innerType._parse(e);return Cf(n)&&(n.value=Object.freeze(n.value)),n}}wg.create=(t,e)=>new wg({innerType:t,typeName:De.ZodReadonly,...je(e)});const gM=(t,e={},n)=>t?cu.create().superRefine((r,i)=>{var s,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,c=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...c,fatal:l})}}):cu.create(),JU={object:It.lazycreate};var De;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(De||(De={}));const ZU=(t,e={message:`Input not instance of ${t.name}`})=>gM(n=>n instanceof t,e),vM=Di.create,yM=_a.create,QU=yg.create,eV=Ca.create,wM=Ef.create,tV=Ol.create,nV=pg.create,rV=Af.create,iV=Pf.create,sV=cu.create,oV=hl.create,aV=mo.create,lV=mg.create,cV=Hi.create,uV=It.create,dV=It.strictCreate,fV=$f.create,hV=Cv.create,pV=Tf.create,mV=Ps.create,gV=Of.create,vV=gg.create,yV=Nl.create,wV=Bc.create,bV=Nf.create,xV=Rf.create,SV=Ea.create,kV=Mf.create,_V=uu.create,_2=Xi.create,CV=to.create,EV=Rl.create,AV=Xi.createWithPreprocess,PV=fh.create,$V=()=>vM().optional(),TV=()=>yM().optional(),OV=()=>wM().optional(),NV={string:t=>Di.create({...t,coerce:!0}),number:t=>_a.create({...t,coerce:!0}),boolean:t=>Ef.create({...t,coerce:!0}),bigint:t=>Ca.create({...t,coerce:!0}),date:t=>Ol.create({...t,coerce:!0})},RV=Be;var Cr=Object.freeze({__proto__:null,defaultErrorMap:_f,setErrorMap:LU,getErrorMap:dg,makeIssue:fg,EMPTY_PATH:BU,addIssueToContext:xe,ParseStatus:Vn,INVALID:Be,DIRTY:hM,OK:tr,isAborted:e1,isDirty:t1,isValid:Cf,isAsync:hg,get util(){return ot},get objectUtil(){return Qb},ZodParsedType:ye,getParsedType:jo,ZodType:We,ZodString:Di,ZodNumber:_a,ZodBigInt:Ca,ZodBoolean:Ef,ZodDate:Ol,ZodSymbol:pg,ZodUndefined:Af,ZodNull:Pf,ZodAny:cu,ZodUnknown:hl,ZodNever:mo,ZodVoid:mg,ZodArray:Hi,ZodObject:It,ZodUnion:$f,ZodDiscriminatedUnion:Cv,ZodIntersection:Tf,ZodTuple:Ps,ZodRecord:Of,ZodMap:gg,ZodSet:Nl,ZodFunction:Bc,ZodLazy:Nf,ZodLiteral:Rf,ZodEnum:Ea,ZodNativeEnum:Mf,ZodPromise:uu,ZodEffects:Xi,ZodTransformer:Xi,ZodOptional:to,ZodNullable:Rl,ZodDefault:Df,ZodCatch:vg,ZodNaN:yg,BRAND:YU,ZodBranded:mM,ZodPipeline:fh,ZodReadonly:wg,custom:gM,Schema:We,ZodSchema:We,late:JU,get ZodFirstPartyTypeKind(){return De},coerce:NV,any:sV,array:cV,bigint:eV,boolean:wM,date:tV,discriminatedUnion:hV,effect:_2,enum:SV,function:wV,instanceof:ZU,intersection:pV,lazy:bV,literal:xV,map:vV,nan:QU,nativeEnum:kV,never:aV,null:iV,nullable:EV,number:yM,object:uV,oboolean:OV,onumber:TV,optional:CV,ostring:$V,pipeline:PV,preprocess:AV,promise:_V,record:gV,set:yV,strictObject:dV,string:vM,symbol:nV,transformer:_2,tuple:mV,undefined:rV,union:fV,unknown:oV,void:lV,NEVER:RV,ZodIssueCode:ce,quotelessJson:IU,ZodError:Vi});const bM=["randomize","clean","unchanged"],xM=["no-devices","keyboard-and-screen","pio-switches-and-leds","pio-printer","handshake"],r1=Cr.object({language:Cr.enum(dM).catch(MV),editorFontSize:Cr.number().int().min(8).max(64).catch(14),dataOnLoad:Cr.enum(bM).catch("randomize"),devices:Cr.enum(xM).catch("no-devices"),animations:Cr.boolean().catch(!0),executionUnit:Cr.number().min(1).max(500).catch(150),clockSpeed:Cr.number().min(100).max(3e3).catch(1e3),printerSpeed:Cr.number().min(500).max(2e4).catch(5e3),filterBightness:Cr.number().min(0).catch(1),filterContrast:Cr.number().min(0).catch(1),filterInvert:Cr.boolean().catch(!1),filterSaturation:Cr.number().min(0).catch(1)}),nc=r1.parse({});function MV(){const t=navigator.language.toLowerCase();for(const e of dM)if(t.startsWith(e))return e;return"en"}const Ma=pR("vonsim-settings",nc,{getItem(t,e){try{const n=localStorage.getItem(t);return r1.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const r=i=>{if(i.storageArea===localStorage&&i.key===t){let s;try{s=r1.parse(JSON.parse(i.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",r),()=>window==null?void 0:window.removeEventListener("storage",r)}},{getOnInit:!0}),yr=()=>ne.get(Ma),SM=()=>Cu(Ma),DV=Ae(t=>t(Ma).language),AS=()=>Xt(DV),IV=Ae(t=>t(Ma).editorFontSize),LV=()=>Xt(IV);Ae(t=>t(Ma).dataOnLoad);const BV=Ae(t=>t(Ma).devices),FV=()=>Xt(BV);Ae(t=>{const e=t(Ma);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});const jV=Ae(t=>{const e=t(Ma);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")}),zV=()=>Xt(jV);function If(t){const e=t.charCodeAt(0);return F.fitsUnsigned(e,8)?e:null}function PS(t){return F.fitsUnsigned(t,8)?String.fromCharCode(t):null}function kM(t){return UV.at(t)??null}const UV=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","","","","","","","","","","","","","SHY","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];var Nt,Dt;const Qe=class Qe{constructor(e,n){$e(this,Nt,void 0);$e(this,Dt,void 0);Y(this,Nt,e|0),Y(this,Dt,n)}get size(){return E(this,Dt)}is8bits(){return E(this,Dt)===8}is16bits(){return E(this,Dt)===16}get unsigned(){return E(this,Nt)}get signed(){return E(this,Nt)<=Qe.maxSignedValue(E(this,Dt))?E(this,Nt):E(this,Nt)-(Qe.maxValue(E(this,Dt))+1)}get low(){return this.is8bits()?this:Qe.fromUnsigned(E(this,Nt)&Qe.maxValue(8),8)}get high(){return this.is8bits()?new Qe(0,8):Qe.fromUnsigned(E(this,Nt)>>8&Qe.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return Qe.fromUnsigned(E(this,Nt)&~Qe.maxValue(8)|e.unsigned,E(this,Dt))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return Qe.fromUnsigned(E(this,Nt)&Qe.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=E(this,Dt))throw new RangeError(`Index ${e} out of bounds for byte of size ${E(this,Dt)}`);return(E(this,Nt)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=E(this,Dt))throw new RangeError(`Index ${e} out of bounds for byte of size ${E(this,Dt)}`);return n?Qe.fromUnsigned(E(this,Nt)|1<<e,E(this,Dt)):Qe.fromUnsigned(E(this,Nt)&~(1<<e),E(this,Dt))}add(e){return e=Number(e),Qe.fromUnsigned(E(this,Nt)+e,E(this,Dt))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:E(this,Nt)===E(e,Nt)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(E(this,Dt));for(let n=0;n<E(this,Dt);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return E(this,Nt).toString(16).padStart(E(this,Dt)/4,"0").toUpperCase();case"bin":return E(this,Nt).toString(2).padStart(E(this,Dt),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return E(this,Dt)===8?PS(E(this,Nt))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return E(this,Dt)===8?kM(E(this,Nt))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return E(this,Nt)}valueOf(){return E(this,Nt)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=Qe.minSignedValue(n)&&e<=Qe.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=Qe.minValue()&&e<=Qe.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=Qe.minSignedValue(n)&&e<=Qe.maxSignedValue(n)}static fromUnsigned(e,n){if(!Qe.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new Qe(e,n)}static fromSigned(e,n){if(!Qe.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new Qe(e+Qe.maxValue(n)+1,n):new Qe(e,n)}static fromNumber(e,n){return e<0?Qe.fromSigned(e,n):Qe.fromUnsigned(e,n)}static fromChar(e){const n=If(e)??-1;return Qe.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*Qe.maxValue(e));return new Qe(n,e)}static zero(e){return new Qe(0,e)}};Nt=new WeakMap,Dt=new WeakMap;let F=Qe;var Bs;const Mo=class Mo{constructor(e){$e(this,Bs,void 0);Y(this,Bs,e)}get value(){return E(this,Bs).unsigned}get byte(){return E(this,Bs)}toString(e=!0){let n=E(this,Bs).toString("hex");return e&&(n+="h"),n}toJSON(){return E(this,Bs).toJSON()}valueOf(){return E(this,Bs).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Mo.MIN_ADDRESS&&e<=Mo.MAX_ADDRESS}static from(e){if(e=Number(e),!Mo.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=F.fromUnsigned(e,16);return new Mo(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let r=e.toString(16).padStart(4,"0").toUpperCase();return n&&(r+="h"),r}};Bs=new WeakMap,oe(Mo,"MIN_ADDRESS",0),oe(Mo,"MAX_ADDRESS",32767);let ge=Mo;var Fs;const Do=class Do{constructor(e){$e(this,Fs,void 0);Y(this,Fs,e)}get value(){return E(this,Fs).unsigned}get byte(){return E(this,Fs)}toString(e=!0){let n=E(this,Fs).toString("hex");return e&&(n+="h"),n}toJSON(){return E(this,Fs).toJSON()}valueOf(){return E(this,Fs).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Do.MIN_ADDRESS&&e<=Do.MAX_ADDRESS}static from(e){if(e=Number(e),!Do.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=F.fromUnsigned(e,8);return new Do(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let r=e.toString(16).padStart(2,"0").toUpperCase();return n&&(r+="h"),r}};Fs=new WeakMap,oe(Do,"MIN_ADDRESS",0),oe(Do,"MAX_ADDRESS",127);let Kr=Do;function C2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function E2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C2(Object(n),!0).forEach(function(r){VV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VV(t,e,n){return e=HV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HV(t){var e=WV(t,"string");return typeof e=="symbol"?e:String(e)}function WV(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const bg=_M({});function _M(t){return e.withOptions=n=>_M(E2(E2({},t),n)),e;function e(n,...r){const i=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n)}=t;let o="";for(let c=0;c<i.length;c++){let u=i[c];s&&(u=u.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\{/g,"{")),o+=u,c<r.length&&(o+=r[c])}const a=o.split(`
`);let l=null;for(const c of a){const u=c.match(/^(\s+)\S+/);if(u){const d=u[1].length;l?l=Math.min(l,d):l=d}}if(l!==null){const c=l;o=a.map(u=>u[0]===" "||u[0]==="	"?u.slice(c):u).join(`
`)}return o.trim().replace(/\\n/g,`
`)}}const GV=ge.from(ge.MAX_ADDRESS).toString(),KV={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${Kr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:bg`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"One cycle","end-of-instruction":"One instruction",infinity:"Until stop"},stop:"Stop"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."}},memory:{name:"Memory",cell:t=>`Cell ${ge.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${GV}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which preset of devices to use.","no-devices":"No devices","keyboard-and-screen":"Keyboard and screen","pio-switches-and-leds":"Switches and LEDs","pio-printer":"Printer (PIO)",handshake:"Printer (Handshake)"},animations:{label:"Animations",description:["Disabling animations, you get faster execution.","Only affects animations affected by the simulation speed (like the CPU).","Other animations (like the clock and the printer) will run at their own speed.","Be careful! Very high simulation speeds without animations can saturate the processor."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>bg`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"d049454"}](https://github.com/vonsim/vonsim/commit/${"d049454"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          ${Object.entries(t).map(([n,r])=>`- **${n}**: ${r}`).join(`
          `)}
          
        </details>
      `}}},XV=ge.from(ge.MAX_ADDRESS).toString(),qV={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${Kr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"Hay una nueva versin disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Accin invlida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la FileSystem API","no-file":"No hay ningn archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:bg`
      ; Bienvenido a VonSim 8!
      ; Este es un ejemplo de cdigo que suma dos variables z = x + y
      
      org 1000h
        x  db 3
        y  db 2
        z  db 0
      org 2000h
        mov al, x
        add al, y
        mov z, al
        hlt
      end
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Un ciclo","end-of-instruction":"Una instruccin",infinity:"Hasta el final"},stop:"Detener"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",status:{fetching:"Leyendo instruccin...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupcin...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."}},memory:{name:"Memoria",cell:t=>`Celda ${ge.format(t)}`,"fix-address":"Fijar direccin","unfix-address":"Desfijar direccin","address-must-be-integer":"El valor de inicio debe ser un nmero entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${XV}.`,"address-increment":"Incrementar direccin (Page Up)","address-decrement":"Decrementar direccin (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuracin",language:{label:"Idioma"},editorFontSize:{label:"Tamao de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qu hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qu conjunto de dispositivos usar.","no-devices":"Ninguno","keyboard-and-screen":"Teclado y pantalla","pio-switches-and-leds":"Llaves y luces","pio-printer":"Impresora (PIO)",handshake:"Impresora (Handshake)"},animations:{label:"Animaciones",description:["Inhabilitando las animaciones, se obtiene ejecucin ms rpida.","Solo afecta a las animaciones afectadas por la velocidad de simulacin (como la CPU).","Otras animaciones (como el reloj y la impresora) se ejecutarn a su propia velocidad.","Cuidado! Velocidades de simulacin muy altas sin animaciones puede saturar el procesador."].join(" ")},speeds:{executionUnit:"Velocidad de simulacin",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresin"},filters:{label:"Filtros",description:"Filtros aplicados a la pgina. til cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturacin"},reset:"Restablecer configuracin"},footer:{documentation:"Documentacin",copyright:"III-LIDI, FI, UNLP",issue:{report:"Reportar un error",body:(t,e)=>bg`
        <!-- Por favor, describa el problema que est teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Informacin extra (POR FAVOR, NO BORRAR)</summary>

          **Versin**: [${"d049454"}](https://github.com/vonsim/vonsim/commit/${"d049454"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuracin

          ${Object.entries(t).map(([n,r])=>`- **${n}**: ${r}`).join(`
          `)}
          
        </details>
      `}}},Ev=ES({en:KV,es:qV});function pt(){const t=AS();return g.useCallback((e,...n)=>Ev(t,e,...n),[t])}const YV=1,A2=5e3,os=new Map,Id=[];function JV(){let t=0;for(const e of os.keys())e>t&&(t=e);return t+1}function ZV(){let t=1/0;for(const e of os.keys())e<t&&(t=e);return t}function Jo(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:r}=t,i=r.duration??A2,s=Number.isFinite(i)?setTimeout(()=>Jo({type:"DISMISS_TOAST",toastId:n}),i):null;os.set(n,{...r,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Jo({type:"DISMISS_TOAST",toastId:n})}}}),os.size>YV&&Jo({type:"DISMISS_TOAST",toastId:ZV()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:r}=t,i=os.get(n);if(!i)return;if(typeof r.duration=="number"){i.timeout!==null&&clearTimeout(i.timeout);const s=r.duration??A2,o=Number.isFinite(s)?setTimeout(()=>Jo({type:"DISMISS_TOAST",toastId:n}),s):null;os.set(n,{...i,...r,timeout:o})}else os.set(n,{...i,...r});break}case"DISMISS_TOAST":{const{toastId:n}=t,r=os.get(n);if(!r)return;r.timeout!==null&&clearTimeout(r.timeout),os.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&Id.length>0){const n=Array.from(os.entries()).map(([r,i])=>({...i,id:r})).sort((r,i)=>i.id-r.id);for(const r of Id)r(n)}}function pr(t){const e=JV(),n=i=>Jo({type:"UPDATE_TOAST",toastId:e,toast:{...i}}),r=()=>Jo({type:"DISMISS_TOAST",toastId:e});return Jo({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:r,update:n}}function QV(){const[t,e]=g.useState([]);return g.useEffect(()=>(Id.push(e),()=>{const n=Id.indexOf(e);n>-1&&Id.splice(n,1)}),[]),{toastList:t,toast:pr,dismiss:n=>Jo({type:"DISMISS_TOAST",toastId:n})}}const Av=pR("vonsim-program",Ev(yr().language,"editor.example"),void 0,{getOnInit:!0}),eH=()=>Xt(Av),tH=()=>ne.get(Av),nH=Rn.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&ne.set(Av,this.view.state.doc.toString())}}),Yu="showSaveFilePicker"in window,rH=Ae(null),CM=Ae(""),iH=Ae(t=>t(CM)!==t(Av));function sH(){const t=pt(),[e,n]=Cu(rH),r=Xt(iH),i=kO(CM),s=e&&r,o=g.useCallback(async()=>{if(!Yu){pr({title:t("editor.files.unsupported"),variant:"error"});return}if(!(s&&!confirm(t("editor.files.unsaved"))))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});await d.requestPermission({mode:"readwrite"})==="granted"&&n(d);const p=await(await d.getFile()).text();i(p),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:p}})}catch(d){console.error(d),pr({title:t("editor.files.open-error"),variant:"error"})}},[t,s,n,i]);eo(d=>d.ctrlKey&&d.key==="o",d=>{d.preventDefault(),o()},void 0,[o]);const a=g.useCallback(async d=>{var h,p;if(d.stopPropagation(),d.preventDefault(),!Yu){pr({title:t("editor.files.unsupported"),variant:"error"});return}const f=(p=(h=d.dataTransfer)==null?void 0:h.items)==null?void 0:p[0];if(!(!f||f.kind!=="file")&&!(s&&!confirm(t("editor.files.unsaved"))))try{const m=await f.getAsFileSystemHandle();if(!m)throw new Error("File handle not found");await m.requestPermission({mode:"readwrite"})==="granted"&&n(m);const y=await(await m.getFile()).text();i(y),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:y}})}catch(m){console.error(m),pr({title:t("editor.files.open-error"),variant:"error"})}},[n,i,t,s]);Zp("drop",a,window),Zp("dragover",d=>{d.preventDefault(),d.stopPropagation()},window);const l=g.useCallback(async()=>{if(!Yu){pr({title:t("editor.files.unsupported"),variant:"error"});return}if(s)try{const d=window.codemirror.state.doc.toString(),f=await e.createWritable({keepExistingData:!1});await f.write(d),await f.close(),i(d)}catch(d){console.error(d),pr({title:t("editor.files.save-error"),variant:"error"})}},[t,s,e,i]),c=g.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),f=(e==null?void 0:e.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(Yu)try{const h=await window.showSaveFilePicker({suggestedName:f,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]}),p=await h.requestPermission({mode:"readwrite"});if(p!=="granted")throw new Error(`Permission denied: ${p}`);n(h);const m=await h.createWritable({keepExistingData:!1});await m.write(d),await m.close(),i(d)}catch(h){console.error(h),pr({title:t("editor.files.save-error"),variant:"error"})}else{const h=new Blob([d],{type:"text/plain"}),p=URL.createObjectURL(h),m=document.createElement("a");m.style.display="none",m.href=p,m.download=f,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(p)}},[t,e,n,i]);eo(d=>d.ctrlKey&&d.key==="s",d=>{d.preventDefault(),Yu&&(e?l():c())},void 0,[e,l,c]),eo(d=>d.ctrlKey&&d.shiftKey&&d.key==="S",d=>{d.preventDefault(),c()},void 0,[c]);const u=g.useCallback(d=>{s&&(d.preventDefault(),d.returnValue=t("editor.files.unsaved"))},[t,s]);return Zp("beforeunload",u,window),b.jsxs(lM,{children:[b.jsx(cM,{asChild:!0,children:b.jsxs("button",{className:Fe("flex items-center transition-colors hover:text-white",e&&"text-white"),children:[e?e.name:t("editor.files.no-file"),s&&b.jsx("span",{className:"ml-1 h-2 w-2 rounded-full bg-current"})]})}),b.jsxs(CS,{className:"w-64",align:"start",children:[b.jsxs(fl,{onClick:o,children:[b.jsx("span",{className:"icon-[lucide--file-search-2] mr-2 h-4 w-4"}),t("editor.files.open"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"Ctrl+O"})]}),b.jsxs(fl,{disabled:!s,onClick:l,children:[b.jsx("span",{className:"icon-[lucide--save] mr-2 h-4 w-4"}),t("editor.files.save"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"Ctrl+S"})]}),b.jsxs(fl,{onClick:c,children:[b.jsx("span",{className:"icon-[lucide--save-all] mr-2 h-4 w-4"}),t("editor.files.save-as"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"Ctrl+Shift+S"})]})]})]})}function oH(){const t=pt(),e=aH();return b.jsxs("footer",{className:"px-2 py-1 text-center text-xs tracking-wider text-stone-500",children:[b.jsx("a",{href:"/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),b.jsx("span",{className:"px-2",children:""}),b.jsx("a",{href:"https://github.com/vonsim/vonsim",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),b.jsx("span",{className:"px-2",children:""}),b.jsx("a",{href:e,className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.issue.report")}),b.jsx("span",{className:"px-2 max-sm:hidden",children:""}),b.jsx("br",{className:"sm:hidden"}),b.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:[" Copyright 2017-",new Date().getFullYear(),"  ",t("footer.copyright")]})]})}function aH(){const t=pt(),[e]=SM(),n=eH();return"https://github.com/vonsim/vonsim/issues/new?body="+encodeURIComponent(t("footer.issue.body",e,n))}function xg(t,e,n){const r=[];for(let i=0;i<t.length;i++)try{const s=e(t[i],i,t);s&&(Array.isArray(s)?s.forEach(o=>o&&r.push(n(o,i,t))):r.push(n(s,i,t)))}catch(s){r.push(n(s,i,t))}return r}class on{constructor(e,n){oe(this,"start");oe(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let r=n[0].start,i=n[0].end;for(const s of n)s.start<r&&(r=s.start),s.end>i&&(i=s.end);return new on(r,i)}toJSON(){return this.range}}const P2=ge.from(ge.MAX_ADDRESS).toString(),lH=Kr.from(Kr.MAX_ADDRESS).toString(),cH={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${ge.format(t)} is out of range (max memory address: ${P2}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","instruction-out-of-range":t=>`This instruction would be placed in address ${ge.format(t)}, which is outside the memory range (max memory address: ${P2}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${lH}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction  cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label."}},$2=ge.from(ge.MAX_ADDRESS).toString(),uH=Kr.from(Kr.MAX_ADDRESS).toString(),dH={"address-has-code":t=>`La direccin de memoria ${ge.format(t)} tiene instrucciones. No se puede usar como direccin de datos.`,"address-out-of-range":t=>`La direccin de memoria ${ge.format(t)} est fuera de rango (direccin mxima de memoria: ${$2}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una direccin de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detect una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instruccin.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vaco. El programa debe tener, al menos, una instruccin END.","end-must-be-the-last-statement":"END debe ser la ltima instruccin.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El nico registro vlido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instruccin no espera ningn operando.","expects-one-operand":"Esta instruccin espera un operando.","expects-two-operands":"Esta instruccin espera dos operandos.","expects-word-register":"Esta instruccin espera un registro de 16 bits como su operando.","instruction-out-of-range":t=>`Esta instruccin se colocara en la direccin ${ge.format(t)}, la cual se encuentra fuera del rango de memoria (direccin mxima de memoria: ${$2}).`,"invalid-interrupt":t=>`${t} no es un nmero de interrupcin vlido.`,"io-address-out-of-range":t=>`La direccin de E/S ${t} est fuera de rango (direccin mxima de memoria E/S: ${uH}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debera apuntar a una constante EQU o a una instruccin. Quizs quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debera apuntar a una instruccin.`,"missing-org":"No hay ningn ORG antes de esta instruccin, por lo que no se puede determinar su ubicacin en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instruccin sera colocada en la direccin ${ge.format(t)}, la cual ya est ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instruccin sera colocada en la direccin ${ge.format(t)}, la cual ya est reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamao.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una direccin de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la direccin.","value-out-of-range":(t,e)=>`El nmero ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carcter solo puede contener un carcter.","empty-character":"Los carcter no puede estar vaco.","invalid-binary":"Nmero binario invlido. Solo puede contener ceros y unos.","invalid-decimal":"Nmero decimal invlido. Solo puede contener dgitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carcter inesperado "${t}".`,"unterminated-character":"Carcter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detect una expresin unaria ambigua. Use parntesis para evitar ambigedades.","expected-address-after-org":"Se esperaba una direccin despus de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instruccin termine.","expected-instruction":t=>`Se esperaba una instruccin, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta despus de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instruccin despus de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" despus de la expresin.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" despus de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El nico registro vlido para el direccionamiento indirecto es BX.","unclosed-parenthesis":"Parntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},fH=ES({en:cH,es:dH});class le extends Error{constructor(n,...r){super();oe(this,"code");oe(this,"context");oe(this,"position");this.code=n,this.context=r,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...r)}at(n){return n&&(n instanceof on?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return fH(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof le?n:new le("unexpected-error",n)}}const $S=[[0,F.fromUnsigned(40960,16)],[3,F.fromUnsigned(41728,16)],[6,F.fromUnsigned(42496,16)],[7,F.fromUnsigned(42752,16)]],hH=new Set(...$S.map(([t])=>[t*4,t*4+1,t*4+2,t*4+3]));var zo,Vc;class pH{constructor(){oe(this,"codeMemory",new Set);oe(this,"labels",new Map);$e(this,zo,!1);$e(this,Vc,!1)}loadStatements(e){if(E(this,zo))throw new Error("Tried to load statements twice");Y(this,zo,!0),this.labels.clear();const n=[];for(const r of e)if("label"in r&&r.label){if(this.labels.has(r.label)){n.push(new le("duplicated-label",r.label).at(r.position));continue}r.isInstruction()?this.labels.set(r.label,{type:"instruction",address:ge.from(0)}):r.directive==="EQU"?this.labels.set(r.label,{type:"EQU",constant:r}):this.labels.set(r.label,{type:r.directive,address:ge.from(0)})}return n}computeAddresses(e){if(E(this,Vc))throw new Error("Tried to compute addresses twice");Y(this,Vc,!0),this.codeMemory.clear();const n=new Set;let r=null;return xg(e,s=>{if(s.isEnd()||s.isDataDirective()&&s.directive==="EQU")return;if(s.isOriginChange()){r=s.newAddress;return}if(r===null)throw new le("missing-org").at(s);const o=s.length;for(let l=0;l<o;l++){if(!ge.inRange(r+l))throw new le("instruction-out-of-range",r+l).at(s);const c=ge.from(r+l);if(n.has(c.value))throw new le("occupied-address",c).at(s);if(hH.has(c.value))throw new le("reserved-address",c).at(s);n.add(c.value),s.isInstruction()&&this.codeMemory.add(c.value)}const a=ge.from(r);s.setStart(a),s.label&&this.labels.set(s.label,{type:s.isInstruction()?"instruction":s.directive,address:a}),r+=o},le.from)}labelExists(e){if(!E(this,zo))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!E(this,zo))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!E(this,zo))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!E(this,Vc))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof ge&&(e=e.value),this.codeMemory.has(e)}}zo=new WeakMap,Vc=new WeakMap;const mH=["AL","BL","CL","DL","AH","BH","CH","DH"],EM=["AX","BX","CX","DX","SP"],Sg=[...mH,...EM],TS=["DB","DW","EQU"],OS=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],gH=["OFFSET","ORG","BYTE","WORD","PTR","END",...Sg,...OS,...TS];class vH{constructor(e,n,r){oe(this,"type");oe(this,"lexeme");oe(this,"position");this.type=e,this.lexeme=n,this.position=r}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class yH{constructor(e){oe(this,"scanned",!1);oe(this,"tokens",[]);oe(this,"position",new on(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new on(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new le("lexer.unterminated-character").at(this.position);if(If(this.peek())===null)throw new le("lexer.only-ascii").at(new on(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new le("lexer.empty-character").at(this.position);if(n>=2)throw new le("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new le("lexer.unterminated-string").at(this.position);if(If(this.peek())===null)throw new le("lexer.only-ascii").at(new on(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new le("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new le("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)){for(;this.isAlphaNumeric(this.peek());)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();gH.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new le("lexer.unexpected-character",e).at(this.position)}return this.position=new on(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new vH(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new on(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class _n{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}oe(_n,"numberLiteral",(...e)=>new wH(...e)),oe(_n,"label",(...e)=>new bH(...e)),oe(_n,"unaryOperation",(...e)=>new xH(...e)),oe(_n,"binaryOperation",(...e)=>new SH(...e));class wH extends _n{constructor(n,r){super(r);oe(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let bH=class extends _n{constructor(n,r,i){super(i);oe(this,"type","label");this.value=n,this.offset=r}evaluate(n){if(!n.labelExists(this.value))throw new le("label-not-found",this.value).at(this.position);const r=n.getLabelType(this.value);if((r==="DB"||r==="DW")&&!this.offset)throw new le("label-should-be-a-number",this.value).at(this.position);if((r==="EQU"||r==="instruction")&&this.offset)throw new le("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class xH extends _n{constructor(n,r,i){super(i);oe(this,"type","unary-operation");this.operator=n,this.right=r}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class SH extends _n{constructor(n,r,i,s){super(s);oe(this,"type","binary-operation");this.left=n,this.operator=r,this.right=i}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class Pv{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var js;class AM extends Pv{constructor(n,r,i){super(i);oe(this,"type","data-directive");oe(this,"label");oe(this,"values");$e(this,js,null);this.values=n,this.label=r}get start(){if(E(this,js)===null)throw new Error("Start not set");return E(this,js)}setStart(n){if(E(this,js)!==null)throw new Error("Start already set");Y(this,js,n)}toJSON(){return{...super.toJSON(),...E(this,js)?{start:E(this,js).toJSON()}:{},directive:this.directive,label:this.label}}}js=new WeakMap;var al,Uo,Hc;class kH extends AM{constructor(n,r,i){super(n,r,i);oe(this,"directive","EQU");$e(this,al,"not-processed");$e(this,Uo,null);$e(this,Hc,null)}toJSON(){var n;return{...super.toJSON(),value:E(this,Hc)??((n=E(this,Uo))==null?void 0:n.toJSON())??this.values.map(r=>r.toJSON())}}validate(){if(E(this,Uo))throw new Error("Constant already validated");if(!this.label)throw new le("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new le("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new le("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new le("cannot-be-unassinged","EQU").at(n);Y(this,Uo,n.value)}evaluateExpressions(n){if(!E(this,Uo))throw new Error("Constant not validated");if(E(this,al)==="processed")return E(this,Hc);if(E(this,al)==="processing")throw new le("circular-reference").at(this.position);Y(this,al,"processed");const r=E(this,Uo).evaluate(n);return Y(this,al,"processed"),Y(this,Hc,r),r}evaluate(n){return this.evaluateExpressions(n)}}al=new WeakMap,Uo=new WeakMap,Hc=new WeakMap;const yd=Symbol("unassigned");var cr,Ai;class _H extends AM{constructor(n,r,i,s){super(r,i,s);oe(this,"size");$e(this,cr,null);$e(this,Ai,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!E(this,cr))throw new Error("Data directive not validated");return E(this,cr).length*(this.size/8)}getValues(){if(!E(this,Ai))throw new Error("Data directive not evaluated");return E(this,Ai)}toJSON(){return{...super.toJSON(),values:(E(this,Ai)??E(this,cr)??this.values).map(n=>n===yd?"?":n.toJSON())}}validate(){if(E(this,cr))throw new Error("Data directive already validated");Y(this,cr,[]);for(const n of this.values)if(n.isUnassigned())E(this,cr).push(yd);else if(n.isString()){if(this.directive!=="DB")throw new le("cannot-accept-strings",this.directive).at(n);const r=n.value;for(let i=0;i<r.length;i++){const s=If(r[i]);if(s===null)throw new Error("Invalid character, should not happen");const o=new on(n.position.start+i,n.position.start+i+1),a=_n.numberLiteral(s,o);E(this,cr).push(a)}}else E(this,cr).push(n.value);if(E(this,cr).length===0)throw new le("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!E(this,cr))throw new Error("Data directive not validated");if(E(this,Ai))throw new Error("Data directive already evaluated");Y(this,Ai,[]);const r=xg(E(this,cr),i=>{if(i===yd)E(this,Ai).push(yd);else{const s=i.evaluate(n);if(!F.fits(s,this.size))throw new le("value-out-of-range",s,this.size).at(this);const o=F.fromNumber(s,this.size);E(this,Ai).push(o)}},le.from);return r.length>0&&Y(this,Ai,null),r}}cr=new WeakMap,Ai=new WeakMap;class NS{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class CH extends NS{constructor(n,r){super(r);oe(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class EH extends NS{constructor(n){super(n);oe(this,"type","unassigned")}}class AH extends NS{constructor(n){super(n.position);oe(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function PH(t,e,n){const r=on.merge(t.position,...e.map(i=>i.position));switch(t.type){case"DB":case"DW":return new _H(t.type,e,n,r);case"EQU":return new kH(e,n,r)}}class $H extends Pv{constructor(n){super(n);oe(this,"type","end")}}function qa(t){switch(t){case"AL":case"AX":return 0;case"CL":case"CX":return 1;case"DL":case"DX":return 2;case"BL":case"BX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7}}var zs;class jl extends Pv{constructor(n,r,i){super(i);oe(this,"type","instruction");oe(this,"label");oe(this,"operands");$e(this,zs,null);this.operands=n,this.label=r}get start(){if(E(this,zs)===null)throw new Error("Start not set");return E(this,zs)}setStart(n){if(E(this,zs)!==null)throw new Error("Start already set");Y(this,zs,n)}toJSON(){return{...super.toJSON(),...E(this,zs)?{start:E(this,zs).toJSON()}:{},instruction:this.instruction,label:this.label}}}zs=new WeakMap;var In,ei;class TH extends jl{constructor(n,r,i,s){super(r,i,s);$e(this,In,null);$e(this,ei,null);this.instruction=n}get length(){if(!E(this,In))throw new Error("Instruction not validated");const{mode:n,size:r,out:i,src:s}=E(this,In);let o=2;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&i.mode==="direct")&&(o+=2),(n==="reg<-imd"||n==="mem<-imd")&&(o+=r/8),o}get operation(){if(!E(this,ei))throw new Error("Instruction not evaluated");return E(this,ei)}toBytes(){const{mode:n,size:r,out:i,src:s}=this.operation,o=[],a={MOV:128,AND:130,OR:132,XOR:134,ADD:136,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],r===16&&(o[0]|=1),n){case"reg<-reg":{o[1]=0,o[1]|=qa(s)<<3,o[1]|=qa(i)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[1]=64,o.push(s.address.byte.low.unsigned),o.push(s.address.byte.high.unsigned)):o[1]=80,o[1]|=qa(i)<<0;break}case"reg<-imd":{o[1]=72,o[1]|=qa(i)<<0,o.push(s.low.unsigned),r===16&&o.push(s.high.unsigned);break}case"mem<-reg":{i.mode==="direct"?(o[1]=192,o.push(i.address.byte.low.unsigned),o.push(i.address.byte.high.unsigned)):o[1]=208,o[1]|=qa(s)<<0;break}case"mem<-imd":{i.mode==="direct"?(o[1]=200,o.push(i.address.byte.low.unsigned),o.push(i.address.byte.high.unsigned)):o[1]=216,o.push(s.low.unsigned),r===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...E(this,ei)??E(this,In)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(E(this,In))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new le("expects-two-operands").at(this);const[r,i]=this.operands;if(r.isRegister()){if(i.isRegister()){if(r.size!==i.size)throw new le("size-mismatch",i.size,r.size).at(this);Y(this,In,{mode:"reg<-reg",size:r.size,out:r.value,src:i.value});return}if(i.isDirectAddress()){if(i.size!=="auto"&&i.size!==r.size)throw new le("size-mismatch",i.size,r.size).at(this);Y(this,In,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"direct",address:i.value}});return}if(i.isIndirectAddress()){if(i.size!=="auto"&&i.size!==r.size)throw new le("size-mismatch",i.size,r.size).at(this);Y(this,In,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"indirect"}});return}const s=i.getAsDirectAddress(n);if(s){if(s.size!==r.size)throw new le("size-mismatch",s.size,r.size).at(this);Y(this,In,{mode:"reg<-mem",size:r.size,out:r.value,src:{mode:"direct",address:s.expression}});return}Y(this,In,{mode:"reg<-imd",size:r.size,out:r.value,src:i.value});return}else{let s,o;if(r.isIndirectAddress())s=r.size,o={mode:"indirect"};else if(r.isDirectAddress())s=r.size,o={mode:"direct",address:r.value};else{const a=r.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new le("destination-cannot-be-immediate").at(r)}if(i.isRegister()){if(s!=="auto"&&s!==i.size)throw new le("size-mismatch",s,i.size).at(this);Y(this,In,{mode:"mem<-reg",size:i.size,out:o,src:i.value});return}if(i.isNumberExpression()){if(i.getAsDirectAddress(n))throw new le("double-memory-access").at(this);if(s==="auto")throw new le("unknown-size").at(r);Y(this,In,{mode:"mem<-imd",size:s,out:o,src:i.value});return}throw new le("double-memory-access").at(this)}}evaluateExpressions(n){if(!E(this,In))throw new Error("Instruction not validated");if(E(this,ei))throw new Error("Instruction aready evaluated");const{mode:r,size:i,out:s,src:o}=E(this,In),a=l=>{const c=l.evaluate(n);if(!ge.inRange(c))throw new le("address-out-of-range",c).at(l);const u=ge.from(c);if(n.addressIsReserved(u))throw new le("address-has-code",u).at(l);return u};switch(r){case"reg<-reg":{Y(this,ei,{mode:r,size:i,out:s,src:o});return}case"reg<-mem":{Y(this,ei,{mode:r,size:i,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!F.fits(l,i))throw new le("value-out-of-range",l,i).at(o);const c=F.fromNumber(l,i);Y(this,ei,{mode:r,size:i,out:s,src:c});return}case"mem<-reg":{Y(this,ei,{mode:r,size:i,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!F.fits(l,i))throw new le("value-out-of-range",l,i).at(o);const c=F.fromNumber(l,i);Y(this,ei,{mode:r,size:i,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return r}}}In=new WeakMap,ei=new WeakMap;var cs,Us;class OH extends jl{constructor(n,r,i,s){super(r,i,s);$e(this,cs,null);$e(this,Us,null);oe(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!E(this,Us))throw new Error("Instruction not evaluated");return E(this,Us)}toJSON(){return{...super.toJSON(),...E(this,Us)?{value:E(this,Us).toJSON()}:E(this,cs)?{initialValue:E(this,cs).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(E(this,cs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new le("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new le("expects-immediate").at(n);Y(this,cs,n.value)}evaluateExpressions(n){if(!E(this,cs))throw new Error("Instruction not validated");if(E(this,Us))throw new Error("Instruction aready evaluated");const r=E(this,cs).evaluate(n);if(!F.fitsUnsigned(r,8))throw new le("invalid-interrupt",r).at(E(this,cs));Y(this,Us,F.fromUnsigned(r,8))}}cs=new WeakMap,Us=new WeakMap;var Pi,Vs,wP;let NH=(wP=class extends jl{constructor(n,r,i,s){super(r,i,s);$e(this,Pi,null);$e(this,Vs,null);this.instruction=n}get length(){if(!E(this,Pi))throw new Error("Instruction not validated");return E(this,Pi).port==="fixed"?2:1}toBytes(){const n=[],r={IN:80,OUT:84};return n[0]=r[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(E(this,Vs)===null)throw new Error("Operation not set");return E(this,Vs)}toJSON(){return{...super.toJSON(),...E(this,Vs)??E(this,Pi)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(E(this,Pi))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new le("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],r=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new le("expects-ax").at(n);const i=n.value==="AX"?16:8;if(r.isRegister()){if(r.value!=="DX")throw new le("expects-dx").at(r);Y(this,Pi,{port:"variable",size:i});return}if(r.isNumberExpression()){Y(this,Pi,{port:"fixed",size:i,address:r.value});return}throw new le("expects-immediate").at(r)}evaluateExpressions(n){if(!E(this,Pi))throw new Error("Instruction not validated");if(E(this,Vs))throw new Error("Instruction aready evaluated");const r=E(this,Pi);if(r.port==="fixed"){const i=r.address.evaluate(n);if(!Kr.inRange(i))throw new le("io-address-out-of-range",i).at(this);const s=Kr.from(i);Y(this,Vs,{port:"fixed",size:r.size,address:s})}else Y(this,Vs,{port:"variable",size:r.size})}},Pi=new WeakMap,Vs=new WeakMap,wP);var Hs,Ws,bP;let RH=(bP=class extends jl{constructor(n,r,i,s){super(r,i,s);$e(this,Hs,null);$e(this,Ws,null);oe(this,"length",3);this.instruction=n}toBytes(){const n=[],r={JC:32,JNC:33,JZ:34,JNZ:35,JS:36,JNS:37,JO:38,JNO:39,JMP:48,CALL:49};return n.push(r[this.instruction]),n.push(this.address.byte.low.unsigned),n.push(this.address.byte.high.unsigned),new Uint8Array(n)}get address(){if(E(this,Ws)===null)throw new Error("Instruction not evaluated");return E(this,Ws)}toJSON(){return{...super.toJSON(),...E(this,Ws)?{address:E(this,Ws).toJSON()}:E(this,Hs)?{jumpTo:E(this,Hs)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(E(this,Hs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new le("expects-one-operand").at(this);const r=this.operands[0];if(!r.isNumberExpression()||!r.value.isLabel())throw new le("expects-label").at(r);const i=r.value.value,s=n.getLabelType(i);if(!s)throw new le("label-not-found",i).at(r);if(s!=="instruction")throw new le("label-should-be-an-instruction",i).at(r);Y(this,Hs,i)}evaluateExpressions(n){if(!E(this,Hs))throw new Error("Instruction not validated");if(E(this,Ws))throw new Error("Instruction aready evaluated");const r=n.getLabelValue(E(this,Hs));if(!ge.inRange(r))throw new le("address-out-of-range",r).at(this);Y(this,Ws,ge.from(r))}},Hs=new WeakMap,Ws=new WeakMap,bP);var us,xP;let MH=(xP=class extends jl{constructor(n,r,i,s){super(r,i,s);$e(this,us,null);oe(this,"length",1);this.instruction=n}toBytes(){let r={PUSH:96,POP:104}[this.instruction];return r|=qa(this.register),new Uint8Array([r])}get register(){if(!E(this,us))throw new Error("Instruction not evaluated");return E(this,us)}toJSON(){return{...super.toJSON(),...E(this,us)?{register:E(this,us)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(E(this,us))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new le("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==16)throw new le("expects-word-register").at(n);Y(this,us,n.value)}evaluateExpressions(){if(!E(this,us))throw new Error("Instruction not validated")}},us=new WeakMap,xP);var $r,ds;class DH extends jl{constructor(n,r,i,s){super(r,i,s);$e(this,$r,null);$e(this,ds,null);this.instruction=n}get length(){if(!E(this,$r))throw new Error("Instruction not validated");const{mode:n}=E(this,$r);let r=2;return n==="mem-direct"&&(r+=2),r}toBytes(){const n=[],r={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=r[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[1]=0,n[1]|=qa(this.operation.reg);break}case"mem-direct":{n[1]=192;const i=this.operation.address.byte;n.push(i.low.unsigned),n.push(i.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!E(this,ds))throw new Error("Instruction not evaluated");return E(this,ds)}toJSON(){return{...super.toJSON(),...E(this,ds)??E(this,$r)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(E(this,$r))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new le("expects-one-operand").at(this);const r=this.operands[0];if(r.isRegister()){Y(this,$r,{mode:"reg",size:r.size,reg:r.value});return}if(r.isDirectAddress()){if(r.size==="auto")throw new le("unknown-size").at(r);Y(this,$r,{mode:"mem-direct",size:r.size,address:r.value});return}if(r.isIndirectAddress()){if(r.size==="auto")throw new le("unknown-size").at(r);Y(this,$r,{mode:"mem-indirect",size:r.size});return}const i=r.getAsDirectAddress(n);if(i){Y(this,$r,{mode:"mem-direct",size:i.size,address:i.expression});return}throw new le("destination-cannot-be-immediate").at(r)}evaluateExpressions(n){if(!E(this,$r))throw new Error("Instruction not validated");if(E(this,ds))throw new Error("Instruction aready evaluated");const r=E(this,$r);switch(r.mode){case"reg":{Y(this,ds,{mode:"reg",size:r.size,reg:r.reg});return}case"mem-direct":{const i=r.address.evaluate(n);if(!ge.inRange(i))throw new le("address-out-of-range",i).at(r.address);const s=ge.from(i);if(n.addressIsReserved(s))throw new le("address-has-code",s).at(r.address);Y(this,ds,{mode:"mem-direct",size:r.size,address:s});return}case"mem-indirect":{Y(this,ds,{mode:"mem-indirect",size:r.size});return}default:return r}}}$r=new WeakMap,ds=new WeakMap;var Wc;class IH extends jl{constructor(n,r,i,s){super(r,i,s);$e(this,Wc,!1);oe(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:24,STI:25,IRET:59,NOP:16,HLT:17};return new Uint8Array([n[this.instruction]])}validate(){if(E(this,Wc))throw new Error("Instruction already validated");if(this.operands.length>0)throw new le("expects-no-operands").at(this);Y(this,Wc,!0)}evaluateExpressions(){if(!E(this,Wc))throw new Error("Instruction not validated")}}Wc=new WeakMap;class $v{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class LH extends $v{constructor(n){super(n.position);oe(this,"type","register");oe(this,"value");this.value=n.type}get size(){return EM.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class BH extends $v{constructor(n,r){super(r);oe(this,"type","indirect-address");oe(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class FH extends $v{constructor(n,r,i){super(i);oe(this,"type","direct-address");oe(this,"size");this.value=n,r?this.size=r==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class kg extends $v{constructor(n){super(n.position);oe(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return kg.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,r){if(n.isLabel()){const i=n;if(i.offset)return!1;if(!r.labelExists(i.value))throw new le("label-not-found",i.value).at(n.position);const s=r.getLabelType(i.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:_n.label(i.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const i=kg.recursiveGetAsDirectAddress(n.left,r);return i?{size:i.size,expression:_n.binaryOperation(i.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function T2(t,e,n){const r=on.merge(t.position,...e.map(i=>i.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new IH(t.type,e,n,r);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new TH(t.type,e,n,r);case"NEG":case"INC":case"DEC":case"NOT":return new DH(t.type,e,n,r);case"PUSH":case"POP":return new MH(t.type,e,n,r);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new RH(t.type,e,n,r);case"IN":case"OUT":return new NH(t.type,e,n,r);case"INT":return new OH(t.type,e,n,r)}}class jH extends Pv{constructor(n,r){super(r);oe(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let zH=class{constructor(e){oe(this,"tokens");oe(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new le("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new le("parser.expected-address-after-org")),r=this.parseNumber(n);return this.endOfStatement(),new jH(r,on.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new le("end-must-be-the-last-statement").at(e);return new $H(e.position)}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...TS);if(e&&!n)throw new le("parser.unexpected-identifier").at(e);if(!n)return null;const r=(e==null?void 0:e.lexeme.toUpperCase())||null,i=[this.dataDirectiveValue()];for(;this.match("COMMA");)i.push(this.dataDirectiveValue());return this.endOfStatement(),PH(n,i,r)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new CH(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new EH(e.position)}return new AH(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...OS);if(e&&!n){const s=this.peek();throw new le("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const r=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return T2(n,[],r);const i=[this.instructionOperand()];for(;this.match("COMMA");)i.push(this.instructionOperand());return this.endOfStatement(),T2(n,i,r)}instructionOperand(){if(this.match(...Sg)){const n=this.previous();return new LH(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new le("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Sg)){this.consume("BX",new le("parser.indirect-addressing-must-be-bx"));const r=this.consume("RIGHT_BRACKET",new le("parser.expected-literal-after-literal","]","BX"));return new BH(e==null?void 0:e.type,on.merge(e==null?void 0:e.position,n.position,r.position))}else{const r=this.numberExpression(),i=this.consume("RIGHT_BRACKET",new le("parser.expected-literal-after-expression","]"));return new FH(r,e==null?void 0:e.type,on.merge(e==null?void 0:e.position,n.position,i.position))}}else if(e)throw new le("parser.expected-literal-after-literal","[","PTR");return new kg(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const r=this.match(...e);if(r)return r;throw n||(n=new le("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new le("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const r=this.previous(),i=this.parseNumber(r);return _n.numberLiteral(i,r.position)}if(this.match("CHARACTER")){const r=this.previous(),i=If(r.lexeme.slice(1,-1));return _n.numberLiteral(i,r.position)}if(this.match("LEFT_PAREN")){const r=this.numberExpression();return this.consume("RIGHT_PAREN",new le("parser.unclosed-parenthesis")),r}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new le("parser.expected-label-after-offset").at(this.peek());if(!n)throw new le("parser.expected-argument").at(this.peek());return _n.label(n.lexeme.toUpperCase(),e!==null,on.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new le("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return _n.unaryOperation(e.type==="PLUS"?"+":"-",n,on.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=_n.binaryOperation(e,"*",n,on.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),r=this.factorNE();e=_n.binaryOperation(e,n.type==="PLUS"?"+":"-",r,on.merge(e.position,r.position))}return e}numberExpression(){return this.termNE()}};function PM(t){try{const n=new yH(t).scanTokens(),i=new zH(n).parse(),s=i.at(-1);if(!s)throw new le("empty-program");if(!s.isEnd())throw new le("end-must-be-the-last-statement").at(s);let o=[];const a=new pH;if(o=a.loadStatements(i),o.length>0)return{success:!1,errors:o};if(o=xg(i,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},le.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(i),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=xg(i,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},le.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c}}catch(e){return{success:!1,errors:[le.from(e)]}}}class sr{constructor(e){oe(this,"computer");this.computer=e.computer}}const UH=ge.from(ge.MAX_ADDRESS).toString(),VH={"address-has-instruction":t=>`Memory address ${ge.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${ge.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${ge.format(t)} is out of range (max memory address: ${UH}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${Kr.format(t)}.`,"no-instruction":t=>`Expected instruction at memory address ${ge.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},HH=ge.from(ge.MAX_ADDRESS).toString(),WH={"address-has-instruction":t=>`La direccin de memoria ${ge.format(t)} tiene una instruccin, y no se puede escribir.`,"address-is-reserved":t=>`La direccin de memoria ${ge.format(t)} est reservada, y no se puede escribir.`,"address-out-of-range":t=>`La direccin de memoria ${ge.format(t)} est fuera de rango (direccin mxima de memoria: ${HH}).`,"device-not-connected":t=>`"${t}" no est conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontr ningn mdulo conectado a la direccin de memoria E/S ${Kr.format(t)}.`,"no-instruction":t=>`Se esperaba una instruccin en la direccin de memoria ${ge.format(t)} pero no se encontr ninguna.`,"no-program":"No hay ningn programa cargado. Ensambl antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},GH=ES({en:VH,es:WH});class Je extends Error{constructor(n,...r){super();oe(this,"code");oe(this,"context");this.code=n,this.context=r,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...r)}translate(n){return GH(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof Je?n:new Je("unexpected-error",n)}}class xo{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const i=e.cpu.getRegister("IP").toString("hex");throw new Je("unexpected-error",`Could not read instruction byte at address ${i}h`)}yield*e.cpu.updateWordRegister("IP",i=>i.add(1)),yield*e.cpu.getMBR(n)}}var Gg,$M;class KH extends xo{constructor(){super(...arguments);$e(this,Gg)}get operation(){return this.statement.operation}*execute(n){const{mode:r,size:i,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:mt(this,Gg,$M).call(this),willUse:{ri:r==="reg<-mem"||r==="mem<-reg"||r==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},r==="reg<-reg"||r==="reg<-mem"||r==="reg<-imd")i===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left");else{if(s.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(r==="reg<-reg"||r==="mem<-reg")i===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(r==="reg<-imd"||r==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),i===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const a=i===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=i===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=F.fromSigned(d,i),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned+l.unsigned+d;f>F.maxValue(i)?(u.CF=!0,c=F.fromUnsigned(f-F.maxValue(i)-1,i)):(u.CF=!1,c=F.fromUnsigned(f,i)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned-l.unsigned-d;f<0?(u.CF=!0,c=F.fromUnsigned(f+F.maxValue(i)+1,i)):(u.CF=!1,c=F.fromUnsigned(f,i)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},r==="reg<-reg"||r==="reg<-mem"||r==="reg<-imd")i===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(i===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Gg=new WeakSet,$M=function(){const{mode:n,out:r,src:i}=this.operation;switch(n){case"reg<-reg":return[r,i];case"reg<-mem":{const s=i.mode==="direct"?i.address.toString():"BX";return[r,`[${s}]`]}case"reg<-imd":return[r,`${i.toString("hex")}h`];case"mem<-reg":return[`[${r.mode==="direct"?r.address.toString():"BX"}]`,i];case"mem<-imd":return[`[${r.mode==="direct"?r.address.toString():"BX"}]`,`${i.toString("hex")}h`];default:return n}};var Kg,TM;class XH extends xo{constructor(){super(...arguments);$e(this,Kg)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:mt(this,Kg,TM).call(this),willUse:{ri:this.operation.mode==="mem-direct"||this.operation.mode==="mem-indirect"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const r=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let i;const s={};switch(this.name){case"NOT":{i=F.fromSigned(~r.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{i=F.fromSigned(-r.signed,this.operation.size),s.CF=!r.isZero(),s.OF=r.signed===F.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",F.fromSigned(1,16));const o=r.unsigned+1;o>F.maxValue(this.operation.size)?(s.CF=!0,i=F.fromUnsigned(o-F.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,i=F.fromUnsigned(o,this.operation.size)),s.OF=r.signed>=0&&i.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",F.fromSigned(1,16));const o=r.unsigned-1;o<0?(s.CF=!0,i=F.fromUnsigned(o+F.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,i=F.fromUnsigned(o,this.operation.size)),s.OF=r.signed<0&&i.signed>=0;break}}if(s.ZF=i.isZero(),s.SF=i.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,i,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Kg=new WeakSet,TM=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BX]"];default:return this.operation}};class qH extends xo{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var Xg,OM;class YH extends xo{constructor(){super(...arguments);$e(this,Xg)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:mt(this,Xg,OM).call(this),willUse:{ri:!0}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*n.cpu.updateWordRegister("ri",F.zero(16)),yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new Je("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",r=>r.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Je("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",r=>r.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new Je("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}Xg=new WeakSet,OM=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class JH extends xo{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString()],willUse:{id:this.name==="CALL",ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield*super.consumeInstruction(e,"ri.h"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n){if(this.name==="CALL"&&(yield*e.cpu.copyWordRegister("IP","id"),!(yield*e.cpu.pushToStack())))return!1;yield*e.cpu.copyWordRegister("ri","IP")}return!0}}class ZH extends xo{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function Ya(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return[e,n==="l"?"low":n==="h"?"high":null]}}}function QH(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var qg,NM;class eW extends xo{constructor(){super(...arguments);$e(this,qg)}get operation(){return this.statement.operation}*execute(n){const{mode:r,size:i,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:mt(this,qg,NM).call(this),willUse:{ri:r==="reg<-mem"||r==="mem<-reg"||r==="mem<-imd",id:r==="reg<-mem"||r==="reg<-imd"||r==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?(yield*super.consumeInstruction(n,"ri.l"),yield*super.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri")),(this.operation.mode==="reg<-imd"||this.operation.mode==="mem<-imd")&&(yield*super.consumeInstruction(n,"id.l"),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},r){case"reg<-reg":return i===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":{if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("id.l"),i===16){if(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("id.h"),yield*n.cpu.copyWordRegister("id",s)}else yield*n.cpu.copyByteRegister("id.l",s);return!0}case"reg<-imd":return i===8?yield*n.cpu.copyByteRegister("id.l",s):yield*n.cpu.copyWordRegister("id",s),!0;case"mem<-reg":{const[a,l]=QH(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!(!(yield*n.cpu.useBus("mem-write"))||l&&(yield*n.cpu.updateWordRegister("ri",c=>c.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(l),!(yield*n.cpu.useBus("mem-write"))))}case"mem<-imd":return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.l"),!(!(yield*n.cpu.useBus("mem-write"))||i===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return r}}}qg=new WeakSet,NM=function(){const{mode:n,out:r,src:i}=this.operation;switch(n){case"reg<-reg":return[r,i];case"reg<-mem":{const s=i.mode==="direct"?i.address.toString():"BX";return[r,`[${s}]`]}case"reg<-imd":return[r,`${i.toString("hex")}h`];case"mem<-reg":return[`[${r.mode==="direct"?r.address.toString():"BX"}]`,i];case"mem<-imd":return[`[${r.mode==="direct"?r.address.toString():"BX"}]`,`${i.toString("hex")}h`];default:return n}};class tW extends xo{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(yield*e.cpu.popFromStack()))return!1;if(yield*e.cpu.copyWordRegister("id","IP"),this.name==="IRET"){if(!(yield*e.cpu.popFromStack()))return!1;yield*e.cpu.copyWordRegister("id","FLAGS")}return!0}}class nW extends xo{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"?(yield*e.cpu.copyWordRegister(n,"id"),yield*e.cpu.pushToStack()):(yield*e.cpu.popFromStack())?(yield*e.cpu.copyWordRegister("id",n),!0):!1}}function rW(t){switch(t.instruction){case"MOV":return new eW(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new KH(t);case"NOT":case"NEG":case"INC":case"DEC":return new XH(t);case"IN":case"OUT":return new YH(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new nW(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new JH(t);case"RET":case"IRET":return new tW(t);case"INT":return new qH(t);case"CLI":case"STI":case"NOP":case"HLT":return new ZH(t)}}function iW(t){for(const[e,n]of $S)if(n.unsigned===t.unsigned)return e;return null}function*sW(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 3:{yield{type:"cpu:int.3"};break}case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new Je("device-not-connected","keyboard")},!1;yield*t.cpu.copyWordRegister("BX","ri");const n=yield*t.io.keyboard.readChar();if(yield*t.cpu.updateWordRegister("id",n.withHigh(F.zero(8))),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("id.l"),!(yield*t.cpu.useBus("mem-write")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new Je("device-not-connected","screen")},!1;if(yield*t.cpu.copyWordRegister("AX","id"),!(yield*t.cpu.pushToStack())||(yield*t.cpu.copyWordRegister("BX","id"),!(yield*t.cpu.pushToStack())))return!1;yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",F.zero(8));const n=t.cpu.getRegister("AL");for(yield*t.cpu.aluExecute("SUB",n,{CF:!1,OF:!1,SF:n.signed<0,ZF:n.isZero()});!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read")))return!1;yield*t.cpu.getMBR("id.l");const r=t.cpu.getRegister("id.l");yield*t.io.screen.sendChar(r),yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",F.fromUnsigned(1,16));const i=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",i,{CF:!1,OF:i.signed<0,SF:i.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",F.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===F.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","BX"),!(yield*t.cpu.popFromStack())))return!1;yield*t.cpu.copyWordRegister("id","AX");break}default:throw new Error("Invalid interrupt number")}return!(yield*t.cpu.popFromStack())||(yield*t.cpu.copyWordRegister("id","IP"),!(yield*t.cpu.popFromStack()))?!1:(yield*t.cpu.copyWordRegister("id","FLAGS"),!0)}var Gc,Ue,Tr,Hn,Vo,rc,ur,Qr,SP;let oW=(SP=class extends sr{constructor(n){super(n);$e(this,Vo);$e(this,ur);$e(this,Gc,void 0);$e(this,Ue,void 0);$e(this,Tr,void 0);$e(this,Hn,void 0);n.data==="unchanged"?(Y(this,Ue,E(n.previous.cpu,Ue)),Y(this,Tr,E(n.previous.cpu,Tr)),Y(this,Hn,E(n.previous.cpu,Hn))):n.data==="randomize"?(Y(this,Ue,{AX:F.random(16),BX:F.random(16),CX:F.random(16),DX:F.random(16),SP:F.random(16),IP:F.random(16),IR:F.random(8),ri:F.random(16),id:F.random(16),left:F.random(16),right:F.random(16),result:F.random(16),FLAGS:F.random(16)}),Y(this,Tr,F.random(16)),Y(this,Hn,F.random(8))):(Y(this,Ue,{AX:F.zero(16),BX:F.zero(16),CX:F.zero(16),DX:F.zero(16),SP:F.zero(16),IP:F.zero(16),IR:F.zero(8),ri:F.zero(16),id:F.zero(16),left:F.zero(16),right:F.zero(16),result:F.zero(16),FLAGS:F.zero(16)}),Y(this,Tr,F.zero(16)),Y(this,Hn,F.zero(8))),E(this,Ue).SP=F.fromUnsigned(ge.MAX_ADDRESS+1,16),E(this,Ue).IP=F.fromUnsigned(8192,16),mt(this,ur,Qr).call(this,"IF",!0),Y(this,Gc,new Map);for(const r of n.program.instructions){const i=rW(r);E(this,Gc).set(i.start.value,i)}}*run(){for(;;){const n=E(this,Ue).IP,r=iW(n);if(r!==null){if(!(yield*sW(this.computer,r)))return}else{const i=E(this,Gc).get(n.unsigned);if(!i){yield{type:"cpu:error",error:new Je("no-instruction",E(this,Ue).IP)};return}if(!(yield*i.execute(this.computer)))return}if(this.getFlag("IF")&&"pic"in this.computer.io&&this.computer.io.pic.isINTRActive()){yield{type:"cpu:cycle.interrupt"};const i=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",F.zero(8)),yield*this.startInterrupt(i)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(yield*this.copyWordRegister("FLAGS","id"),!(yield*this.pushToStack())||(yield*this.updateFLAGS({IF:!1}),yield*this.copyWordRegister("IP","id"),!(yield*this.pushToStack())))return!1;let r=F.fromUnsigned(n.unsigned*4,16);return yield*this.updateWordRegister("ri",r),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read"))||(yield*this.getMBR("id.l"),r=r.add(1),yield*this.updateWordRegister("ri",r),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("id.h"),yield*this.copyWordRegister("id","IP"),!0)}toJSON(){return{...Object.entries(E(this,Ue)).reduce((r,[i,s])=>({...r,[i]:s.toJSON()}),{}),MAR:E(this,Tr).toJSON(),MBR:E(this,Hn).toJSON()}}getRegister(n){const[r,i]=Ya(n);return i==="low"?E(this,Ue)[r].low:i==="high"?E(this,Ue)[r].high:E(this,Ue)[r]}*copyByteRegister(n,r){const i=this.getRegister(n);mt(this,Vo,rc).call(this,r,i),yield{type:"cpu:register.copy",size:8,src:n,dest:r}}*copyWordRegister(n,r){const i=this.getRegister(n);mt(this,Vo,rc).call(this,r,i),yield{type:"cpu:register.copy",size:16,src:n,dest:r}}*updateByteRegister(n,r){r=typeof r=="function"?r(this.getRegister(n)):r,mt(this,Vo,rc).call(this,n,r),yield{type:"cpu:register.update",size:8,register:n,value:r}}*updateWordRegister(n,r){r=typeof r=="function"?r(this.getRegister(n)):r,mt(this,Vo,rc).call(this,n,r),yield{type:"cpu:register.update",size:16,register:n,value:r}}getFlag(n){switch(n){case"CF":return E(this,Ue).FLAGS.bit(0);case"ZF":return E(this,Ue).FLAGS.bit(6);case"SF":return E(this,Ue).FLAGS.bit(7);case"IF":return E(this,Ue).FLAGS.bit(9);case"OF":return E(this,Ue).FLAGS.bit(11);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&mt(this,ur,Qr).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&mt(this,ur,Qr).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&mt(this,ur,Qr).call(this,"SF",n.SF),typeof n.IF=="boolean"&&mt(this,ur,Qr).call(this,"IF",n.IF),typeof n.OF=="boolean"&&mt(this,ur,Qr).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:E(this,Ue).FLAGS}}*aluExecute(n,r,i){E(this,Ue).result=r.is8bits()?E(this,Ue).result.withLow(r):r,typeof i.CF=="boolean"&&mt(this,ur,Qr).call(this,"CF",i.CF),typeof i.ZF=="boolean"&&mt(this,ur,Qr).call(this,"ZF",i.ZF),typeof i.SF=="boolean"&&mt(this,ur,Qr).call(this,"SF",i.SF),typeof i.IF=="boolean"&&mt(this,ur,Qr).call(this,"IF",i.IF),typeof i.OF=="boolean"&&mt(this,ur,Qr).call(this,"OF",i.OF),yield{type:"cpu:alu.execute",operation:n,size:r.size,result:E(this,Ue).result,flags:E(this,Ue).FLAGS}}*setMAR(n){const r=this.getRegister(n);Y(this,Tr,r),yield{type:"cpu:mar.set",register:n}}*getMBR(n){mt(this,Vo,rc).call(this,n,E(this,Hn)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const r=this.getRegister(n);Y(this,Hn,r),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const r=yield*this.computer.memory.read(E(this,Tr));return r?(Y(this,Hn,r),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(E(this,Tr),E(this,Hn)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const r=yield*this.computer.io.chipSelect(E(this,Tr).low);if(!r)return!1;yield{type:"cpu:rd.on"};const i=yield*this.computer.io.read(r);return i?(Y(this,Hn,i),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const r=yield*this.computer.io.chipSelect(E(this,Tr).low);return!r||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(r,E(this,Hn))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!("pic"in this.computer.io))return!1;const r=yield*this.computer.io.pic.handleINTR();return Y(this,Hn,r),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(){let n=this.getRegister("SP");return ge.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.h"),(yield*this.useBus("mem-write"))?ge.inRange(n.unsigned-1)?(n=n.add(-1),yield*this.updateWordRegister("SP",n),yield*this.setMAR("SP"),yield*this.setMBR("id.l"),!!(yield*this.useBus("mem-write"))):(yield{type:"cpu:error",error:new Je("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new Je("stack-overflow")},!1)}*popFromStack(){let n=this.getRegister("SP");return ge.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.l"),n=n.add(1),yield*this.updateWordRegister("SP",n),ge.inRange(n)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("id.h"),n=n.add(1),yield*this.updateWordRegister("SP",n),!0):!1):(yield{type:"cpu:error",error:new Je("stack-underflow")},!0)):!1):(yield{type:"cpu:error",error:new Je("stack-underflow")},!1)}},Gc=new WeakMap,Ue=new WeakMap,Tr=new WeakMap,Hn=new WeakMap,Vo=new WeakSet,rc=function(n,r){const[i,s]=Ya(n);if(s===null){if(E(this,Ue)[i].size!==r.size)throw new TypeError(`Cannot set register ${n} with value ${r} of different size`);E(this,Ue)[i]=r}else{if(!r.is8bits())throw new TypeError(`Cannot set register ${n} with value ${r} of different size`);s==="low"?E(this,Ue)[i]=E(this,Ue)[i].withLow(r):E(this,Ue)[i]=E(this,Ue)[i].withHigh(r)}},ur=new WeakSet,Qr=function(n,r){switch(n){case"CF":E(this,Ue).FLAGS=E(this,Ue).FLAGS.withBit(0,r);return;case"ZF":E(this,Ue).FLAGS=E(this,Ue).FLAGS.withBit(6,r);return;case"SF":E(this,Ue).FLAGS=E(this,Ue).FLAGS.withBit(7,r);return;case"IF":E(this,Ue).FLAGS=E(this,Ue).FLAGS.withBit(9,r);return;case"OF":E(this,Ue).FLAGS=E(this,Ue).FLAGS.withBit(11,r);return;default:throw new TypeError(`Invalid flag ${n}`)}},SP),RS=class extends sr{*tick(){yield{type:"clock:tick"},yield*this.computer.io.timer.tick()}toJSON(){return null}},MS=class extends sr{*press(){yield{type:"f10:press"},yield*this.computer.io.pic.interrupt(0)}toJSON(){return null}};var Kc,kP;let Tv=(kP=class extends sr{constructor(){super(...arguments);$e(this,Kc,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=E(this,Kc);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},Y(this,Kc,null),n}setLastCharRead(n){Y(this,Kc,n)}toJSON(){return null}},Kc=new WeakMap,kP);var Or,_P;let Ov=(_P=class extends sr{constructor(n){super(n);$e(this,Or,void 0);n.data==="unchanged"&&"screen"in n.previous.io?Y(this,Or,E(n.previous.io.screen,Or)):Y(this,Or,"")}clear(){return this.sendChar(F.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:Y(this,Or,E(this,Or).slice(0,-1));break;case 10:Y(this,Or,E(this,Or)+`
`);break;case 12:Y(this,Or,"");break;default:Y(this,Or,E(this,Or)+PS(n.unsigned));break}yield{type:"screen:send-char",char:n,output:E(this,Or)}}toJSON(){return E(this,Or)}},Or=new WeakMap,_P);class Nv extends sr{}var bs,Gs,dr,Wn,$i,Xc,fm,qc,hm;let DS=(bs=class extends Nv{constructor(n){super(n);$e(this,Xc);$e(this,qc);$e(this,Gs,void 0);$e(this,dr,void 0);$e(this,Wn,void 0);$e(this,$i,void 0);Y(this,Gs,F.fromUnsigned(255,8)),Y(this,dr,F.fromUnsigned(0,8)),Y(this,Wn,F.fromUnsigned(0,8)),n.data==="unchanged"&&"pic"in n.previous.io?Y(this,$i,E(n.previous.io.pic,$i)):n.data==="randomize"?Y(this,$i,new Array(bs.LINES).fill(F.zero(8)).map(()=>F.random(8))):Y(this,$i,new Array(bs.LINES).fill(F.zero(8)))}chipSelect(n){const i=4+bs.LINES;return n=Number(n)-32,n<0||n>=i?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let r;if(n==="EOI")r=F.zero(8);else if(n==="IMR")r=E(this,Gs);else if(n==="IRR")r=E(this,dr);else if(n==="ISR")r=E(this,Wn);else{const i=Number(n.slice(3));r=E(this,$i)[i]}return yield{type:"pic:read.ok",value:r},r}*write(n,r){if(yield{type:"pic:write",register:n,value:r},n==="EOI")E(this,Wn).isZero()||(yield{type:"pic:intr.off"},Y(this,Wn,F.zero(8)),yield{type:"pic:register.update",register:"ISR",value:E(this,Wn)},yield*mt(this,qc,hm).call(this));else if(n==="IMR")Y(this,Gs,r),yield{type:"pic:register.update",register:"IMR",value:E(this,Gs)},yield*mt(this,qc,hm).call(this);else if(!(n==="IRR"||n==="ISR")){const i=Number(n.slice(3));E(this,$i)[i]=r,yield{type:"pic:register.update",register:n,value:r}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=bs.LINES)throw new RangeError(`Invalid interrupt line ${n}`);E(this,dr).bit(n)||(Y(this,dr,E(this,dr).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:E(this,dr)},yield*mt(this,qc,hm).call(this))}isINTRActive(){return E(this,Wn).isZero()&&mt(this,Xc,fm).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!E(this,Wn).isZero())throw new Error("INTR line is active but ISR is not zero");const n=mt(this,Xc,fm).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");Y(this,Wn,E(this,Wn).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:E(this,Wn)},Y(this,dr,E(this,dr).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:E(this,dr)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const r=E(this,$i)[n];return yield{type:"pic:int.send",number:r},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},r}toJSON(){return{IMR:E(this,Gs).toJSON(),IRR:E(this,dr).toJSON(),ISR:E(this,Wn).toJSON(),lines:E(this,$i).map(n=>n.toJSON())}}},Gs=new WeakMap,dr=new WeakMap,Wn=new WeakMap,$i=new WeakMap,Xc=new WeakSet,fm=function(){for(let n=0;n<bs.LINES;n++)if(E(this,dr).bit(n)&&!E(this,Gs).bit(n))return n;return null},qc=new WeakSet,hm=function*(){E(this,Wn).isZero()&&mt(this,Xc,fm).call(this)!==null&&(yield{type:"pic:intr.on"})},oe(bs,"LINES",8),bs);var fs,Ho,CP;let IS=(CP=class extends Nv{constructor(n){super(n);$e(this,fs,void 0);$e(this,Ho,void 0);Y(this,fs,F.zero(8)),Y(this,Ho,F.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let r;if(n==="CONT")r=E(this,fs);else if(n==="COMP")r=E(this,Ho);else return n;return yield{type:"timer:read.ok",value:r},r}*write(n,r){if(yield{type:"timer:write",register:n,value:r},n==="CONT")Y(this,fs,r);else if(n==="COMP")Y(this,Ho,r);else return n;yield{type:"timer:register.update",register:n,value:r},yield{type:"timer:write.ok"}}*tick(){const n=E(this,fs).unsigned===F.maxValue(8)?F.zero(8):E(this,fs).add(1);Y(this,fs,n),yield{type:"timer:register.update",register:"CONT",value:n},E(this,Ho).equals(n)?(yield{type:"timer:int.on"},yield*this.computer.io.pic.interrupt(1)):yield{type:"timer:int.off"}}toJSON(){return{CONT:E(this,fs).toJSON(),COMP:E(this,Ho).toJSON()}}},fs=new WeakMap,Ho=new WeakMap,CP);var hs,Gn,EP;let aW=(EP=class extends Nv{constructor(n){super(n);$e(this,hs,void 0);$e(this,Gn,void 0);n.data==="unchanged"&&"handshake"in n.previous.io?Y(this,hs,F.zero(8)):n.data==="randomize"?Y(this,hs,F.random(8)):Y(this,hs,F.zero(8)),Y(this,Gn,F.zero(8))}get interrupts(){return E(this,Gn).bit(7)}get DATA(){return E(this,hs)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let r;if(n==="DATA")r=E(this,hs);else if(n==="STATE")r=E(this,Gn);else return n;return yield{type:"handshake:read.ok",value:r},r}*write(n,r){if(yield{type:"handshake:write",register:n,value:r},n==="DATA")Y(this,hs,r),yield{type:"handshake:register.update",register:n,value:r},yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1);else if(n==="STATE")r=r.withBit(0,this.computer.io.printer.busy),Y(this,Gn,r),yield{type:"handshake:register.update",register:n,value:r},E(this,Gn).bit(1)?(yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1),Y(this,Gn,E(this,Gn).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:E(this,Gn)}):this.interrupts&&!this.computer.io.printer.busy?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){Y(this,Gn,E(this,Gn).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:E(this,Gn)},this.interrupts&&!n?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"}}toJSON(){return{DATA:E(this,hs).toJSON(),STATE:E(this,Gn).toJSON()}}},hs=new WeakMap,Gn=new WeakMap,EP);var ti,Ks,Wo;const Ud=class Ud extends sr{constructor(n){super(n);$e(this,ti,void 0);$e(this,Ks,void 0);$e(this,Wo,!1);this.computer=n.computer,n.data==="unchanged"&&"printer"in n.previous.io?(Y(this,ti,E(n.previous.io.printer,ti)),Y(this,Ks,E(n.previous.io.printer,Ks)),Y(this,Wo,E(n.previous.io.printer,Wo))):(Y(this,ti,[]),Y(this,Ks,""),Y(this,Wo,!1))}get busy(){return E(this,ti).length>=Ud.BUFFER_SIZE}*setStrobe(n){const r=E(this,Wo);if(r===n)return;if(Y(this,Wo,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!r&&!this.busy){const s=yield*this.readData();E(this,ti).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){Y(this,Ks,""),yield{type:"printer:paper.replace"}}*print(){if(E(this,ti).length===0)return;const[n,...r]=E(this,ti);if(Y(this,ti,r),yield{type:"printer:buffer.pop",char:n},r.length===Ud.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const i=PS(n.unsigned);Y(this,Ks,E(this,Ks)+i),yield{type:"printer:paper.print",char:i}}}toJSON(){return{paper:E(this,Ks),buffer:[...E(this,ti).map(n=>n.unsigned)]}}};ti=new WeakMap,Ks=new WeakMap,Wo=new WeakMap,oe(Ud,"BUFFER_SIZE",5);let _g=Ud,lW=class extends _g{*readData(){const e=this.computer.io.handshake.DATA;return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.handshake.updateBusy(e)}},cW=class extends sr{constructor(n){super(n);oe(this,"clock");oe(this,"f10");oe(this,"keyboard");oe(this,"printer");oe(this,"screen");oe(this,"handshake");oe(this,"pic");oe(this,"timer");this.clock=new RS(n),this.f10=new MS(n),this.keyboard=new Tv(n),this.printer=new lW(n),this.screen=new Ov(n),this.handshake=new aW(n),this.pic=new DS(n),this.timer=new IS(n)}*chipSelect(n){const r=this.handshake.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:r};const i=this.pic.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:i};const s=this.timer.chipSelect(n);return s?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:s}):(yield{type:"bus:io.error",error:new Je("io-memory-not-connected",n)},null)}*read(n){const{chip:r,register:i}=n;return r==="handshake"?yield*this.handshake.read(i):r==="pic"?yield*this.pic.read(i):r==="timer"?yield*this.timer.read(i):(yield{type:"bus:io.error",error:new Je("device-not-connected",r)},null)}*write(n,r){const{chip:i,register:s}=n;return i==="handshake"?(yield*this.handshake.write(s,r),!0):i==="pic"?(yield*this.pic.write(s,r),!0):i==="timer"?(yield*this.timer.write(s,r),!0):(yield{type:"bus:io.error",error:new Je("device-not-connected",i)},!1)}toJSON(){return{clock:this.clock.toJSON(),f10:this.f10.toJSON(),keyboard:this.keyboard.toJSON(),printer:this.printer.toJSON(),screen:this.screen.toJSON(),handshake:this.handshake.toJSON(),pic:this.pic.toJSON(),timer:this.timer.toJSON()}}};class uW extends sr{constructor(n){super(n);oe(this,"keyboard");oe(this,"screen");this.keyboard=new Tv(n),this.screen=new Ov(n)}*chipSelect(n){return yield{type:"bus:io.error",error:new Je("io-memory-not-connected",n)},null}*read(n){return yield{type:"bus:io.error",error:new Je("device-not-connected",n.chip)},null}*write(n){return yield{type:"bus:io.error",error:new Je("device-not-connected",n.chip)},!1}toJSON(){return{keyboard:this.keyboard.toJSON(),screen:this.screen.toJSON()}}}class dW extends sr{*chipSelect(e){return yield{type:"bus:io.error",error:new Je("io-memory-not-connected",e)},null}*read(e){return yield{type:"bus:io.error",error:new Je("device-not-connected",e.chip)},null}*write(e){return yield{type:"bus:io.error",error:new Je("device-not-connected",e.chip)},!1}toJSON(){return{}}}class RM extends Nv{constructor(n){super(n);oe(this,"PA");oe(this,"PB");oe(this,"CA");oe(this,"CB");n.data==="unchanged"&&"pio"in n.previous.io?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=F.random(8),this.PB=F.random(8),this.CA=F.random(8),this.CB=F.random(8)):(this.PA=F.zero(8),this.PB=F.zero(8),this.CA=F.zero(8),this.CB=F.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let r;if(n==="PA")r=this.PA;else if(n==="PB")r=this.PB;else if(n==="CA")r=this.CA;else if(n==="CB")r=this.CB;else return n;return yield{type:"pio:read.ok",value:r},r}*write(n,r){if(yield{type:"pio:write",register:n,value:r},n==="PA")this.PA=r;else if(n==="PB")this.PB=r;else if(n==="CA")this.CA=r;else if(n==="CB")this.CB=r;else return n;yield{type:"pio:register.update",register:n,value:r},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,r){return n==="A"?this.CA.bit(r)?"input":"output":this.CB.bit(r)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}}let fW=class extends RM{constructor(e){super(e),this.PA=this.PA.withBit(1,!1)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return F.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const r=this.CA.unsigned,i=this.computer.io.printer.busy;n=n&~r,this.line("A",0)==="input"&&i&&(n|=1),n!==this.PA.unsigned&&(this.PA=F.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.computer.io.printer.setStrobe(this.PA.bit(1)))}},hW=class extends _g{*readData(){const e=this.computer.io.pio.readData();return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.pio.updatePort("A")}};class pW extends sr{constructor(n){super(n);oe(this,"clock");oe(this,"f10");oe(this,"keyboard");oe(this,"printer");oe(this,"screen");oe(this,"pic");oe(this,"pio");oe(this,"timer");this.clock=new RS(n),this.f10=new MS(n),this.keyboard=new Tv(n),this.printer=new hW(n),this.screen=new Ov(n),this.pic=new DS(n),this.pio=new fW(n),this.timer=new IS(n)}*chipSelect(n){const r=this.pic.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const i=this.pio.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i};const s=this.timer.chipSelect(n);return s?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:s}):(yield{type:"bus:io.error",error:new Je("io-memory-not-connected",n)},null)}*read(n){const{chip:r,register:i}=n;return r==="pic"?yield*this.pic.read(i):r==="pio"?yield*this.pio.read(i):r==="timer"?yield*this.timer.read(i):(yield{type:"bus:io.error",error:new Je("device-not-connected",r)},null)}*write(n,r){const{chip:i,register:s}=n;return i==="pic"?(yield*this.pic.write(s,r),!0):i==="pio"?(yield*this.pio.write(s,r),!0):i==="timer"?(yield*this.timer.write(s,r),!0):(yield{type:"bus:io.error",error:new Je("device-not-connected",i)},!1)}toJSON(){return{clock:this.clock.toJSON(),f10:this.f10.toJSON(),keyboard:this.keyboard.toJSON(),printer:this.printer.toJSON(),screen:this.screen.toJSON(),pic:this.pic.toJSON(),pio:this.pio.toJSON(),timer:this.timer.toJSON()}}}var Xs,AP;let mW=(AP=class extends sr{constructor(n){super(n);$e(this,Xs,void 0);n.data==="unchanged"&&"leds"in n.previous.io?Y(this,Xs,E(n.previous.io.leds,Xs)):n.data==="randomize"?Y(this,Xs,F.random(8)):Y(this,Xs,F.zero(8))}get state(){return E(this,Xs)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return E(this,Xs).toJSON()}},Xs=new WeakMap,AP),gW=class extends RM{*updatePort(e){if(e==="A"){const n=this.computer.io.switches.state.unsigned;let r=this.PA.unsigned;const i=this.CA.unsigned;r=n&i|r&~i,r!==this.PA.unsigned&&(this.PA=F.fromUnsigned(r,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const r=this.CB.unsigned;n=n&~r,yield*this.computer.io.leds.update(F.fromUnsigned(n,8))}}};var ni,PP;let vW=(PP=class extends sr{constructor(n){super(n);$e(this,ni,void 0);this.computer=n.computer,n.data==="unchanged"&&"switches"in n.previous.io?Y(this,ni,E(n.previous.io.switches,ni)):n.data==="randomize"?Y(this,ni,F.random(8)):Y(this,ni,F.zero(8))}get state(){return E(this,ni)}*toggle(n){Y(this,ni,E(this,ni).withBit(n,!E(this,ni).bit(n))),yield{type:"switches:toggle",index:n},yield*this.computer.io.pio.updatePort("A")}toJSON(){return E(this,ni).toJSON()}},ni=new WeakMap,PP);class yW extends sr{constructor(n){super(n);oe(this,"clock");oe(this,"f10");oe(this,"keyboard");oe(this,"leds");oe(this,"screen");oe(this,"switches");oe(this,"pic");oe(this,"pio");oe(this,"timer");this.clock=new RS(n),this.f10=new MS(n),this.keyboard=new Tv(n),this.leds=new mW(n),this.screen=new Ov(n),this.switches=new vW(n),this.pic=new DS(n),this.pio=new gW(n),this.timer=new IS(n)}*chipSelect(n){const r=this.pic.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const i=this.pio.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:i};const s=this.timer.chipSelect(n);return s?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:s}):(yield{type:"bus:io.error",error:new Je("io-memory-not-connected",n)},null)}*read(n){const{chip:r,register:i}=n;return r==="pic"?yield*this.pic.read(i):r==="pio"?yield*this.pio.read(i):r==="timer"?yield*this.timer.read(i):(yield{type:"bus:io.error",error:new Je("device-not-connected",r)},null)}*write(n,r){const{chip:i,register:s}=n;return i==="pic"?(yield*this.pic.write(s,r),!0):i==="pio"?(yield*this.pio.write(s,r),!0):i==="timer"?(yield*this.timer.write(s,r),!0):(yield{type:"bus:io.error",error:new Je("device-not-connected",i)},!1)}toJSON(){return{clock:this.clock.toJSON(),f10:this.f10.toJSON(),keyboard:this.keyboard.toJSON(),leds:this.leds.toJSON(),screen:this.screen.toJSON(),switches:this.switches.toJSON(),pic:this.pic.toJSON(),pio:this.pio.toJSON(),timer:this.timer.toJSON()}}}var ml,fr,Yc,qs;let wW=(ml=class extends sr{constructor(n){super(n);$e(this,fr,void 0);$e(this,Yc,void 0);$e(this,qs,void 0);n.data==="unchanged"?Y(this,fr,E(n.previous.memory,fr)):n.data==="randomize"?Y(this,fr,new Uint8Array(ml.SIZE).map(()=>F.random(8).unsigned)):Y(this,fr,new Uint8Array(ml.SIZE)),Y(this,qs,new Set);for(const[r,i]of $S){const s=r*4;E(this,fr).set(i.toUint8Array(),s),E(this,fr).set(F.zero(16).toUint8Array(),s+2),E(this,qs).add(s),E(this,qs).add(s+1),E(this,qs).add(s+2),E(this,qs).add(s+3)}for(const r of n.program.data){let i=r.start.value;for(const s of r.getValues())s!==yd&&E(this,fr).set(s.toUint8Array(),i),i+=r.size/8}Y(this,Yc,new Set);for(const r of n.program.instructions){E(this,fr).set(r.toBytes(),r.start.value);for(let i=0;i<r.length;i++)E(this,Yc).add(r.start.value+i)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!ge.inRange(n))return yield{type:"memory:read.error",error:new Je("address-out-of-range",n)},null;const r=F.fromUnsigned(E(this,fr).at(n),8);return yield{type:"memory:read.ok",address:ge.from(n),value:r},r}*write(n,r){return n=Number(n),yield{type:"memory:write",address:n,value:r},ge.inRange(n)?E(this,Yc).has(n)?(yield{type:"memory:write.error",error:new Je("address-has-instruction",n)},!1):E(this,qs).has(n)?(yield{type:"memory:write.error",error:new Je("address-is-reserved",n)},!1):(E(this,fr).set([r.unsigned],n),yield{type:"memory:write.ok",address:ge.from(n),value:r},!0):(yield{type:"memory:write.error",error:new Je("address-out-of-range",n)},!1)}toJSON(){return[...E(this,fr)]}},fr=new WeakMap,Yc=new WeakMap,qs=new WeakMap,oe(ml,"SIZE",ge.MAX_ADDRESS+1),ml);class O2{constructor(e){oe(this,"cpu");oe(this,"memory");oe(this,"io");const n={computer:this,...e};switch(this.cpu=new oW(n),this.memory=new wW(n),e.devices){case"no-devices":{this.io=new dW(n);break}case"keyboard-and-screen":{this.io=new uW(n);break}case"pio-switches-and-leds":{this.io=new yW(n);break}case"pio-printer":{this.io=new pW(n);break}case"handshake":{this.io=new cW(n);break}default:{const r=e.devices;throw new Error(`Unknown devices configuration: ${r}`)}}}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var ct;class bW{constructor(){$e(this,ct,new O2({program:{data:[],instructions:[]},devices:"pio-switches-and-leds",data:"clean"}))}loadProgram(e){Y(this,ct,new O2({...e,previous:E(this,ct)}))}getComputerState(){var e;return((e=E(this,ct))==null?void 0:e.toJSON())||null}startCPU(){if(!E(this,ct))throw new Je("no-program");return E(this,ct).cpu.run()}get devices(){if(!E(this,ct))throw new Error("No computer loaded!");return{clock:{connected:()=>"clock"in E(this,ct).io,tick:()=>{if("clock"in E(this,ct).io)return E(this,ct).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in E(this,ct).io,press:()=>{if("f10"in E(this,ct).io)return E(this,ct).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in E(this,ct).io,readChar:e=>{if("keyboard"in E(this,ct).io)return E(this,ct).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in E(this,ct).io},printer:{connected:()=>"printer"in E(this,ct).io,clear:()=>{if("printer"in E(this,ct).io)return E(this,ct).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if("printer"in E(this,ct).io)return E(this,ct).io.printer.print();console.warn("No printer connected to the computer!")}},screen:{connected:()=>"screen"in E(this,ct).io,clear:()=>{if("screen"in E(this,ct).io)return E(this,ct).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in E(this,ct).io,toggle:e=>{if("switches"in E(this,ct).io)return E(this,ct).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}ct=new WeakMap;const MM=new sh;function DM(t){window.codemirror&&window.codemirror.dispatch({effects:MM.reconfigure(Ye.readOnly.of(t))})}const i1=Ke.define(),xW=ir.define({create(){return Xe.none},update(t,e){let n=t.map(e.changes);for(const r of e.effects)r.is(i1)&&(n=Xe.none,r.value!==null&&(n=n.update({add:[SW.range(r.value)]})));return n},provide:t=>Pe.decorations.from(t)}),SW=Xe.line({class:"!bg-mantis-400/10"});function IM(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:i1.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:i1.of(e)})}}const LM=Ec.init("phc_gCxHEpXWtELrIJxf4O1rBStWonKXJJxHA9iQBN3UEu0",{api_host:"https://eu.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||Ec,d0=Ae(F.zero(16)),f0=Ae(F.zero(16)),h0=Ae(F.zero(16)),p0=Ae(F.zero(16)),m0=Ae(F.zero(16)),g0=Ae(F.zero(16)),kW=Ae(F.zero(8)),v0=Ae(F.zero(16)),y0=Ae(F.zero(16)),w0=Ae(F.zero(16)),b0=Ae(F.zero(16)),x0=Ae(F.zero(16)),S0=Ae(F.zero(16)),BM=Ae(F.zero(16)),Cg=Ae(F.zero(8)),Yr=t=>Ae(e=>e(t).low,(e,n,r)=>{const i=e(t),s=typeof r=="function"?r(i.low):r;n(t,i.withLow(s))}),Jr=t=>Ae(e=>e(t).high,(e,n,r)=>{const i=e(t),s=typeof r=="function"?r(i.high):r;n(t,i.withHigh(s))}),Et={AX:d0,AL:Yr(d0),AH:Jr(d0),BX:f0,BL:Yr(f0),BH:Jr(f0),CX:h0,CL:Yr(h0),CH:Jr(h0),DX:p0,DL:Yr(p0),DH:Jr(p0),SP:m0,"SP.l":Yr(m0),"SP.h":Jr(m0),IP:g0,"IP.l":Yr(g0),"IP.h":Jr(g0),IR:kW,ri:v0,"ri.l":Yr(v0),"ri.h":Jr(v0),id:y0,"id.l":Yr(y0),"id.h":Jr(y0),left:w0,"left.l":Yr(w0),"left.h":Jr(w0),right:b0,"right.l":Yr(b0),"right.h":Jr(b0),result:x0,"result.l":Yr(x0),"result.h":Jr(x0),FLAGS:S0,"FLAGS.l":Yr(S0),"FLAGS.h":Jr(S0),MAR:BM,MBR:Cg},as=Ae({phase:"stopped"}),FM=Ae("ADD");function _W(t){ne.set(Et.AX,F.fromUnsigned(t.cpu.AX,16)),ne.set(Et.BX,F.fromUnsigned(t.cpu.BX,16)),ne.set(Et.CX,F.fromUnsigned(t.cpu.CX,16)),ne.set(Et.DX,F.fromUnsigned(t.cpu.DX,16)),ne.set(Et.SP,F.fromUnsigned(t.cpu.SP,16)),ne.set(Et.IP,F.fromUnsigned(t.cpu.IP,16)),ne.set(Et.IR,F.fromUnsigned(t.cpu.IR,8)),ne.set(Et.ri,F.fromUnsigned(t.cpu.ri,16)),ne.set(Et.id,F.fromUnsigned(t.cpu.id,16)),ne.set(Et.left,F.fromUnsigned(t.cpu.left,16)),ne.set(Et.right,F.fromUnsigned(t.cpu.right,16)),ne.set(Et.result,F.fromUnsigned(t.cpu.result,16)),ne.set(Et.FLAGS,F.fromUnsigned(t.cpu.FLAGS,16)),ne.set(Et.MAR,F.fromUnsigned(t.cpu.MAR,16)),ne.set(Et.MBR,F.fromUnsigned(t.cpu.MBR,8)),ne.set(as,{phase:"stopped"})}var CW=Object.defineProperty,EW=(t,e)=>{for(var n in e)CW(t,n,{get:e[n],enumerable:!0})},qi={};EW(qi,{assign:()=>TW,colors:()=>fa,createStringInterpolator:()=>VS,skipAnimation:()=>KM,to:()=>GM,willAdvance:()=>HS});var LS=ph(),He=t=>hh(t,LS),BS=ph();He.write=t=>hh(t,BS);var Rv=ph();He.onStart=t=>hh(t,Rv);var FS=ph();He.onFrame=t=>hh(t,FS);var jS=ph();He.onFinish=t=>hh(t,jS);var Fc=[];He.setTimeout=(t,e)=>{const n=He.now()+e,r=()=>{const s=Fc.findIndex(o=>o.cancel==r);~s&&Fc.splice(s,1),Qo-=~s?1:0},i={time:n,handler:t,cancel:r};return Fc.splice(jM(n),0,i),Qo+=1,zM(),i};var jM=t=>~(~Fc.findIndex(e=>e.time>t)||~Fc.length);He.cancel=t=>{Rv.delete(t),FS.delete(t),jS.delete(t),LS.delete(t),BS.delete(t)};He.sync=t=>{s1=!0,He.batchedUpdates(t),s1=!1};He.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,He.onStart(n)}return r.handler=t,r.cancel=()=>{Rv.delete(n),e=null},r};var zS=typeof window<"u"?window.requestAnimationFrame:()=>{};He.use=t=>zS=t;He.now=typeof performance<"u"?()=>performance.now():Date.now;He.batchedUpdates=t=>t();He.catch=console.error;He.frameLoop="always";He.advance=()=>{He.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):VM()};var Zo=-1,Qo=0,s1=!1;function hh(t,e){s1?(e.delete(t),t(0)):(e.add(t),zM())}function zM(){Zo<0&&(Zo=0,He.frameLoop!=="demand"&&zS(UM))}function AW(){Zo=-1}function UM(){~Zo&&(zS(UM),He.batchedUpdates(VM))}function VM(){const t=Zo;Zo=He.now();const e=jM(Zo);if(e&&(HM(Fc.splice(0,e),n=>n.handler()),Qo-=e),!Qo){AW();return}Rv.flush(),LS.flush(t?Math.min(64,Zo-t):16.667),FS.flush(),BS.flush(),jS.flush()}function ph(){let t=new Set,e=t;return{add(n){Qo+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Qo-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Qo-=e.size,HM(e,r=>r(n)&&t.add(r)),Qo+=t.size,e=t)}}}function HM(t,e){t.forEach(n=>{try{e(n)}catch(r){He.catch(r)}})}function PW(){}var $W=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),me={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Ds(t,e){if(me.arr(t)){if(!me.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var En=(t,e)=>t.forEach(e);function Aa(t,e,n){if(me.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var ea=t=>me.und(t)?[]:me.arr(t)?t:[t];function WM(t,e){if(t.size){const n=Array.from(t);t.clear(),En(n,e)}}var fp=(t,...e)=>WM(t,n=>n(...e)),US=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),VS,GM,fa=null,KM=!1,HS=PW,TW=t=>{t.to&&(GM=t.to),t.now&&(He.now=t.now),t.colors!==void 0&&(fa=t.colors),t.skipAnimation!=null&&(KM=t.skipAnimation),t.createStringInterpolator&&(VS=t.createStringInterpolator),t.requestAnimationFrame&&He.use(t.requestAnimationFrame),t.batchedUpdates&&(He.batchedUpdates=t.batchedUpdates),t.willAdvance&&(HS=t.willAdvance),t.frameLoop&&(He.frameLoop=t.frameLoop)},Ld=new Set,li=[],k0=[],Eg=0,Mv={get idle(){return!Ld.size&&!li.length},start(t){Eg>t.priority?(Ld.add(t),He.onStart(OW)):(XM(t),He(o1))},advance:o1,sort(t){if(Eg)He.onFrame(()=>Mv.sort(t));else{const e=li.indexOf(t);~e&&(li.splice(e,1),qM(t))}},clear(){li=[],Ld.clear()}};function OW(){Ld.forEach(XM),Ld.clear(),He(o1)}function XM(t){li.includes(t)||qM(t)}function qM(t){li.splice(NW(li,e=>e.priority>t.priority),0,t)}function o1(t){const e=k0;for(let n=0;n<li.length;n++){const r=li[n];Eg=r.priority,r.idle||(HS(r),r.advance(t),r.idle||e.push(r))}return Eg=0,k0=li,k0.length=0,li=e,li.length>0}function NW(t,e){const n=t.findIndex(e);return n<0?t.length:n}var RW=(t,e,n)=>Math.min(Math.max(n,t),e),MW={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ii="[-+]?\\d*\\.?\\d+",Ag=Ii+"%";function Dv(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var DW=new RegExp("rgb"+Dv(Ii,Ii,Ii)),IW=new RegExp("rgba"+Dv(Ii,Ii,Ii,Ii)),LW=new RegExp("hsl"+Dv(Ii,Ag,Ag)),BW=new RegExp("hsla"+Dv(Ii,Ag,Ag,Ii)),FW=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,jW=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,zW=/^#([0-9a-fA-F]{6})$/,UW=/^#([0-9a-fA-F]{8})$/;function VW(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=zW.exec(t))?parseInt(e[1]+"ff",16)>>>0:fa&&fa[t]!==void 0?fa[t]:(e=DW.exec(t))?(Jl(e[1])<<24|Jl(e[2])<<16|Jl(e[3])<<8|255)>>>0:(e=IW.exec(t))?(Jl(e[1])<<24|Jl(e[2])<<16|Jl(e[3])<<8|M2(e[4]))>>>0:(e=FW.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=UW.exec(t))?parseInt(e[1],16)>>>0:(e=jW.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=LW.exec(t))?(N2(R2(e[1]),hp(e[2]),hp(e[3]))|255)>>>0:(e=BW.exec(t))?(N2(R2(e[1]),hp(e[2]),hp(e[3]))|M2(e[4]))>>>0:null}function _0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function N2(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=_0(i,r,t+1/3),o=_0(i,r,t),a=_0(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Jl(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function R2(t){return(parseFloat(t)%360+360)%360/360}function M2(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function hp(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function D2(t){let e=VW(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var Lf=(t,e,n)=>{if(me.fun(t))return t;if(me.arr(t))return Lf({range:t,output:e,extrapolate:n});if(me.str(t.output[0]))return VS(t);const r=t,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const u=WW(c,s);return HW(c,s[u],s[u+1],i[u],i[u+1],l,o,a,r.map)}};function HW(t,e,n,r,i,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function WW(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var GW=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return RW(0,1,i/t)},Pg=1.70158,pp=Pg*1.525,I2=Pg+1,L2=2*Math.PI/3,B2=2*Math.PI/4.5,mp=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,YM={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>I2*t*t*t-Pg*t*t,easeOutBack:t=>1+I2*Math.pow(t-1,3)+Pg*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((pp+1)*2*t-pp)/2:(Math.pow(2*t-2,2)*((pp+1)*(t*2-2)+pp)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*L2),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*L2)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*B2))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*B2)/2+1,easeInBounce:t=>1-mp(1-t),easeOutBounce:mp,easeInOutBounce:t=>t<.5?(1-mp(1-2*t))/2:(1+mp(2*t-1))/2,steps:GW},Bf=Symbol.for("FluidValue.get"),du=Symbol.for("FluidValue.observers"),ai=t=>!!(t&&t[Bf]),mr=t=>t&&t[Bf]?t[Bf]():t,F2=t=>t[du]||null;function KW(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Ff(t,e){const n=t[du];n&&n.forEach(r=>{KW(r,e)})}var JM=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");XW(this,t)}},XW=(t,e)=>ZM(t,Bf,e);function Iv(t,e){if(t[Bf]){let n=t[du];n||ZM(t,du,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function jf(t,e){const n=t[du];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[du]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var ZM=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),pm=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,qW=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,j2=new RegExp(`(${pm.source})(%|[a-z]+)`,"i"),YW=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Lv=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,QM=t=>{const[e,n]=JW(t);if(!e||US())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&Lv.test(n))return QM(n);if(n)return n}return t},JW=t=>{const e=Lv.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},C0,ZW=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,eD=t=>{C0||(C0=fa?new RegExp(`(${Object.keys(fa).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>mr(s).replace(Lv,QM).replace(qW,D2).replace(C0,D2)),n=e.map(s=>s.match(pm).map(Number)),i=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Lf({...t,output:s}));return s=>{var l;const o=!j2.test(e[0])&&((l=e.find(c=>j2.test(c)))==null?void 0:l.replace(pm,""));let a=0;return e[0].replace(pm,()=>`${i[a++](s)}${o||""}`).replace(YW,ZW)}},tD="react-spring: ",nD=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${tD}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},QW=nD(console.warn);function eG(){QW(`${tD}The "interpolate" function is deprecated in v9 (use "to" instead)`)}nD(console.warn);function Bv(t){return me.str(t)&&(t[0]=="#"||/\d/.test(t)||!US()&&Lv.test(t)||t in(fa||{}))}var rD=US()?g.useEffect:g.useLayoutEffect,tG=()=>{const t=g.useRef(!1);return rD(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function nG(){const t=g.useState()[1],e=tG();return()=>{e.current&&t(Math.random())}}function rG(t,e){const[n]=g.useState(()=>({inputs:e,result:t()})),r=g.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&iG(e,s.inputs)||(s={inputs:e,result:t()}):s=n,g.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function iG(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var sG=t=>g.useEffect(t,oG),oG=[],zf=Symbol.for("Animated:node"),aG=t=>!!t&&t[zf]===t,ls=t=>t&&t[zf],WS=(t,e)=>$W(t,zf,e),Fv=t=>t&&t[zf]&&t[zf].getPayload(),iD=class{constructor(){WS(this,this)}getPayload(){return this.payload||[]}},mh=class extends iD{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,me.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new mh(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return me.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,me.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Uf=class extends mh{constructor(t){super(0),this._string=null,this._toString=Lf({output:[t,t]})}static create(t){return new Uf(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(me.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Lf({output:[this.getValue(),t]})),this._value=0,super.reset()}},$g={dependencies:null},jv=class extends iD{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Aa(this.source,(n,r)=>{aG(n)?e[r]=n.getValue(t):ai(n)?e[r]=mr(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&En(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Aa(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){$g.dependencies&&ai(t)&&$g.dependencies.add(t);const e=Fv(t);e&&En(e,n=>this.add(n))}},sD=class extends jv{constructor(t){super(t)}static create(t){return new sD(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(lG)),!0)}};function lG(t){return(Bv(t)?Uf:mh).create(t)}function a1(t){const e=ls(t);return e?e.constructor:me.arr(t)?sD:Bv(t)?Uf:mh}var z2=(t,e)=>{const n=!me.fun(t)||t.prototype&&t.prototype.isReactComponent;return g.forwardRef((r,i)=>{const s=g.useRef(null),o=n&&g.useCallback(p=>{s.current=dG(i,p)},[i]),[a,l]=uG(r,e),c=nG(),u=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},d=new cG(u,l),f=g.useRef();rD(()=>(f.current=d,En(l,p=>Iv(p,d)),()=>{f.current&&(En(f.current.deps,p=>jf(p,f.current)),He.cancel(f.current.update))})),g.useEffect(u,[]),sG(()=>()=>{const p=f.current;En(p.deps,m=>jf(m,p))});const h=e.getComponentProps(a.getValue());return g.createElement(t,{...h,ref:o})})},cG=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&He.write(this.update)}};function uG(t,e){const n=new Set;return $g.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new jv(t),$g.dependencies=null,[t,n]}function dG(t,e){return t&&(me.fun(t)?t(e):t.current=e),e}var U2=Symbol.for("AnimatedComponent"),fG=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new jv(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=o=>{const a=V2(o)||"Anonymous";return me.str(o)?o=s[o]||(s[o]=z2(o,i)):o=o[U2]||(o[U2]=z2(o,i)),o.displayName=`Animated(${a})`,o};return Aa(t,(o,a)=>{me.arr(t)&&(a=V2(o)),s[a]=s(o)}),{animated:s}},V2=t=>me.str(t)?t:t&&me.str(t.displayName)?t.displayName:me.fun(t)&&t.name||null;function Ja(t,...e){return me.fun(t)?t(...e):t}var Bd=(t,e)=>t===!0||!!(e&&t&&(me.fun(t)?t(e):ea(t).includes(e))),oD=(t,e)=>me.obj(t)?e&&t[e]:t,hG=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,pG=t=>t,aD=(t,e=pG)=>{let n=mG;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const s=e(t[i],i);me.und(s)||(r[i]=s)}return r},mG=["config","onProps","onStart","onChange","onPause","onResume","onRest"],gG={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function vG(t){const e={};let n=0;if(Aa(t,(r,i)=>{gG[i]||(e[i]=r,n++)}),n)return e}function lD(t){const e=vG(t);if(e){const n={to:e};return Aa(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function Vf(t){return t=mr(t),me.arr(t)?t.map(Vf):Bv(t)?qi.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function l1(t){return me.fun(t)||me.arr(t)&&me.obj(t[0])}var yG={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},c1={...yG.default,mass:1,damping:1,easing:YM.linear,clamp:!1},wG=class{constructor(){this.velocity=0,Object.assign(this,c1)}};function bG(t,e,n){n&&(n={...n},H2(n,e),e={...n,...e}),H2(t,e),Object.assign(t,e);for(const o in c1)t[o]==null&&(t[o]=c1[o]);let{frequency:r,damping:i}=t;const{mass:s}=t;return me.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function H2(t,e){if(!me.und(e.decay))t.duration=void 0;else{const n=!me.und(e.tension)||!me.und(e.friction);(n||!me.und(e.frequency)||!me.und(e.damping)||!me.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var W2=[],xG=class{constructor(){this.changed=!1,this.values=W2,this.toValues=null,this.fromValues=W2,this.config=new wG,this.immediate=!1}};function SG(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let l,c,u=Bd(n.cancel??(r==null?void 0:r.cancel),e);if(u)h();else{me.und(n.pause)||(i.paused=Bd(n.pause,e));let p=r==null?void 0:r.pause;p!==!0&&(p=i.paused||Bd(p,e)),l=Ja(n.delay||0,e),p?(i.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){i.resumeQueue.add(f),i.timeouts.delete(c),c.cancel(),l=c.time-He.now()}function f(){l>0&&!qi.skipAnimation?(i.delayed=!0,c=He.setTimeout(h,l),i.pauseQueue.add(d),i.timeouts.add(c)):h()}function h(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(d),i.timeouts.delete(c),t<=(i.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(p){a(p)}}})}var kG=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Fd(t.get()):e.every(n=>n.noop)?cD(t.get()):Ri(t.get(),e.every(n=>n.finished)),cD=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Ri=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Fd=t=>({value:t,cancelled:!0,finished:!1});function _G(t,e,n,r){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const c=aD(e,(w,v)=>v==="onRest"?void 0:w);let u,d;const f=new Promise((w,v)=>(u=w,d=v)),h=w=>{const v=i<=(n.cancelId||0)&&Fd(r)||i!==n.asyncId&&Ri(r,!1);if(v)throw w.result=v,d(w),w},p=(w,v)=>{const y=new G2,x=new K2;return(async()=>{if(qi.skipAnimation)throw u1(n),x.result=Ri(r,!1),d(x),x;h(y);const k=me.obj(w)?{...w}:{...v,to:w};k.parentId=i,Aa(c,(P,A)=>{me.und(k[A])&&(k[A]=P)});const _=await r.start(k);return h(y),n.paused&&await new Promise(P=>{n.resumeQueue.add(P)}),_})()};let m;if(qi.skipAnimation)return u1(n),Ri(r,!1);try{let w;me.arr(t)?w=(async v=>{for(const y of v)await p(y)})(t):w=Promise.resolve(t(p,r.stop.bind(r))),await Promise.all([w.then(u),f]),m=Ri(r.get(),!0,!1)}catch(w){if(w instanceof G2)m=w.result;else if(w instanceof K2)m=w.result;else throw w}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return me.fun(o)&&He.batchedUpdates(()=>{o(m,r,r.item)}),m})()}function u1(t,e){WM(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var G2=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},K2=class extends Error{constructor(){super("SkipAnimationSignal")}},d1=t=>t instanceof GS,CG=1,GS=class extends JM{constructor(){super(...arguments),this.id=CG++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=ls(this);return t&&t.getValue()}to(...t){return qi.to(this,t)}interpolate(...t){return eG(),qi.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Ff(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||Mv.sort(this),Ff(this,{type:"priority",parent:this,priority:t})}},Ml=Symbol.for("SpringPhase"),uD=1,f1=2,h1=4,E0=t=>(t[Ml]&uD)>0,Eo=t=>(t[Ml]&f1)>0,Ju=t=>(t[Ml]&h1)>0,X2=(t,e)=>e?t[Ml]|=f1|uD:t[Ml]&=~f1,q2=(t,e)=>e?t[Ml]|=h1:t[Ml]&=~h1,Ct=class extends GS{constructor(t,e){if(super(),this.animation=new xG,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!me.und(t)||!me.und(e)){const n=me.obj(t)?{...t}:{...e,from:t};me.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Eo(this)||this._state.asyncTo)||Ju(this)}get goal(){return mr(this.animation.to)}get velocity(){const t=ls(this);return t instanceof mh?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return E0(this)}get isAnimating(){return Eo(this)}get isPaused(){return Ju(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=Fv(r.to);!o&&ai(r.to)&&(i=ea(mr(r.to))),r.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==Uf?1:o?o[u].lastPosition:i[u];let f=r.immediate,h=d;if(!f){if(h=c.lastPosition,s.tension<=0){c.done=!0;return}let p=c.elapsedTime+=t;const m=r.fromValues[u],w=c.v0!=null?c.v0:c.v0=me.arr(s.velocity)?s.velocity[u]:s.velocity;let v;const y=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(me.und(s.duration))if(s.decay){const x=s.decay===!0?.998:s.decay,k=Math.exp(-(1-x)*p);h=m+w/(1-x)*(1-k),f=Math.abs(c.lastPosition-h)<=y,v=w*k}else{v=c.lastVelocity==null?w:c.lastVelocity;const x=s.restVelocity||y/10,k=s.clamp?0:s.bounce,_=!me.und(k),P=m==d?c.v0>0:m<d;let A,C=!1;const N=1,R=Math.ceil(t/N);for(let M=0;M<R&&(A=Math.abs(v)>x,!(!A&&(f=Math.abs(d-h)<=y,f)));++M){_&&(C=h==d||h>d==P,C&&(v=-v*k,h=d));const L=-s.tension*1e-6*(h-d),H=-s.friction*.001*v,T=(L+H)/s.mass;v=v+T*N,h=h+v*N}}else{let x=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,p=c.elapsedTime+=t)),x=(s.progress||0)+p/this._memoizedDuration,x=x>1?1:x<0?0:x,c.durationProgress=x),h=m+s.easing(x)*(d-m),v=(h-c.lastPosition)/t,f=x==1}c.lastVelocity=v,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(h,s.round)&&(n=!0)});const a=ls(this),l=a.getValue();if(e){const c=mr(r.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return He.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Eo(this)){const{to:t,config:e}=this.animation;He.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return me.und(t)?(n=this.queue||[],this.queue=[]):n=[me.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>kG(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),u1(this._state,t&&this._lastCallId),He.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=me.obj(n)?n[e]:n,(n==null||l1(n))&&(n=void 0),r=me.obj(r)?r[e]:r,r==null&&(r=void 0);const i={to:n,from:r};return E0(this)||(t.reverse&&([n,r]=[r,n]),r=mr(r),me.und(r)?ls(this)||this._set(n):this._set(r)),i}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,aD(t,(o,a)=>/^on/.test(a)?oD(o,n):o)),J2(this,t,"onProps"),Qu(this,"onProps",t,this);const i=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return SG(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{Ju(this)||(q2(this,!0),fp(s.pauseQueue),Qu(this,"onPause",Ri(this,Zu(this,this.animation.to)),this))},resume:()=>{Ju(this)&&(q2(this,!1),Eo(this)&&this._resume(),fp(s.resumeQueue),Qu(this,"onResume",Ri(this,Zu(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=EG(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Fd(this));const r=!me.und(t.to),i=!me.und(t.from);if(r||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Fd(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;i&&!r&&(!e.default||me.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!Ds(d,c);f&&(a.from=d),d=mr(d);const h=!Ds(u,l);h&&this._focus(u);const p=l1(e.to),{config:m}=a,{decay:w,velocity:v}=m;(r||i)&&(m.velocity=0),e.config&&!p&&bG(m,Ja(e.config,s),e.config!==o.config?Ja(o.config,s):void 0);let y=ls(this);if(!y||me.und(u))return n(Ri(this,!0));const x=me.und(e.reset)?i&&!e.default:!me.und(d)&&Bd(e.reset,s),k=x?d:this.get(),_=Vf(u),P=me.num(_)||me.arr(_)||Bv(_),A=!p&&(!P||Bd(o.immediate||e.immediate,s));if(h){const M=a1(u);if(M!==y.constructor)if(A)y=this._set(_);else throw Error(`Cannot animate between ${y.constructor.name} and ${M.name}, as the "to" prop suggests`)}const C=y.constructor;let N=ai(u),R=!1;if(!N){const M=x||!E0(this)&&f;(h||M)&&(R=Ds(Vf(k),_),N=!R),(!Ds(a.immediate,A)&&!A||!Ds(m.decay,w)||!Ds(m.velocity,v))&&(N=!0)}if(R&&Eo(this)&&(a.changed&&!x?N=!0:N||this._stop(l)),!p&&((N||ai(l))&&(a.values=y.getPayload(),a.toValues=ai(u)?null:C==Uf?[1]:ea(_)),a.immediate!=A&&(a.immediate=A,!A&&!x&&this._set(l)),N)){const{onRest:M}=a;En(PG,H=>J2(this,e,H));const L=Ri(this,Zu(this,l));fp(this._pendingCalls,L),this._pendingCalls.add(n),a.changed&&He.batchedUpdates(()=>{var H;a.changed=!x,M==null||M(L,this),x?Ja(o.onRest,L):(H=a.onStart)==null||H.call(a,L,this)})}x&&this._set(k),p?n(_G(e.to,e,this._state,this)):N?this._start():Eo(this)&&!h?this._pendingCalls.add(n):n(cD(k))}_focus(t){const e=this.animation;t!==e.to&&(F2(this)&&this._detach(),e.to=t,F2(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;ai(e)&&(Iv(e,this),d1(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;ai(t)&&jf(t,this)}_set(t,e=!0){const n=mr(t);if(!me.und(n)){const r=ls(this);if(!r||!Ds(n,r.getValue())){const i=a1(n);!r||r.constructor!=i?WS(this,i.create(n)):r.setValue(n),r&&He.batchedUpdates(()=>{this._onChange(n,e)})}}return ls(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Qu(this,"onStart",Ri(this,Zu(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Ja(this.animation.onChange,t,this)),Ja(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;ls(this).reset(mr(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Eo(this)||(X2(this,!0),Ju(this)||this._resume())}_resume(){qi.skipAnimation?this.finish():Mv.start(this)}_stop(t,e){if(Eo(this)){X2(this,!1);const n=this.animation;En(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ff(this,{type:"idle",parent:this});const r=e?Fd(this.get()):Ri(this.get(),Zu(this,t??n.to));fp(this._pendingCalls,r),n.changed&&(n.changed=!1,Qu(this,"onRest",r,this))}}};function Zu(t,e){const n=Vf(e),r=Vf(t.get());return Ds(r,n)}function EG(t,e=t.loop,n=t.to){const r=Ja(e);if(r){const i=r!==!0&&lD(r),s=(i||t).reverse,o=!i||i.reset;return AG({...t,loop:e,default:!1,pause:void 0,to:!s||l1(n)?n:void 0,from:o?t.from:void 0,reset:o,...i})}}function AG(t){const{to:e,from:n}=t=lD(t),r=new Set;return me.obj(e)&&Y2(e,r),me.obj(n)&&Y2(n,r),t.keys=r.size?Array.from(r):null,t}function Y2(t,e){Aa(t,(n,r)=>n!=null&&e.add(r))}var PG=["onStart","onRest","onChange","onPause","onResume"];function J2(t,e,n){t.animation[n]=e[n]!==hG(e,n)?oD(e[n],t.key):void 0}function Qu(t,e,...n){var r,i,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var KS=({children:t,...e})=>{const n=g.useContext(Tg),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=rG(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=Tg;return g.createElement(s,{value:e},t)},Tg=$G(KS,{});KS.Provider=Tg.Provider;KS.Consumer=Tg.Consumer;function $G(t,e){return Object.assign(t,g.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var TG=class extends GS{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Lf(...e);const n=this._get(),r=a1(n);WS(this,r.create(n))}advance(t){const e=this._get(),n=this.get();Ds(e,n)||(ls(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&Z2(this._active)&&A0(this)}_get(){const t=me.arr(this.source)?this.source.map(mr):ea(mr(this.source));return this.calc(...t)}_start(){this.idle&&!Z2(this._active)&&(this.idle=!1,En(Fv(this),t=>{t.done=!1}),qi.skipAnimation?(He.batchedUpdates(()=>this.advance()),A0(this)):Mv.start(this))}_attach(){let t=1;En(ea(this.source),e=>{ai(e)&&Iv(e,this),d1(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){En(ea(this.source),t=>{ai(t)&&jf(t,this)}),this._active.clear(),A0(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=ea(this.source).reduce((e,n)=>Math.max(e,(d1(n)?n.priority:0)+1),0))}};function OG(t){return t.idle!==!1}function Z2(t){return!t.size||Array.from(t).every(OG)}function A0(t){t.idle||(t.idle=!0,En(Fv(t),e=>{e.done=!0}),Ff(t,{type:"idle",parent:t}))}qi.assign({createStringInterpolator:eD,to:(t,e)=>new TG(t,e)});var dD=/^--/;function NG(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!dD.test(t)&&!(jd.hasOwnProperty(t)&&jd[t])?e+"px":(""+e).trim()}var Q2={};function RG(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:r,children:i,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,c=Object.values(l),u=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:Q2[d]||(Q2[d]=d.replace(/([A-Z])/g,f=>"-"+f.toLowerCase())));i!==void 0&&(t.textContent=i);for(const d in r)if(r.hasOwnProperty(d)){const f=NG(d,r[d]);dD.test(d)?t.style.setProperty(d,f):t.style[d]=f}u.forEach((d,f)=>{t.setAttribute(d,c[f])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var jd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MG=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),DG=["Webkit","Ms","Moz","O"];jd=Object.keys(jd).reduce((t,e)=>(DG.forEach(n=>t[MG(n,e)]=t[e]),t),jd);var IG=/^(matrix|translate|scale|rotate|skew)/,LG=/^(translate)/,BG=/^(rotate|skew)/,P0=(t,e)=>me.num(t)&&t!==0?t+e:t,mm=(t,e)=>me.arr(t)?t.every(n=>mm(n,e)):me.num(t)?t===e:parseFloat(t)===e,FG=class extends jv{constructor({x:t,y:e,z:n,...r}){const i=[],s=[];(t||e||n)&&(i.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>P0(a,"px")).join(",")})`,mm(o,0)])),Aa(r,(o,a)=>{if(a==="transform")i.push([o||""]),s.push(l=>[l,l===""]);else if(IG.test(a)){if(delete r[a],me.und(o))return;const l=LG.test(a)?"px":BG.test(a)?"deg":"";i.push(ea(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${P0(f,l)})`,mm(f,0)]:c=>[`${a}(${c.map(u=>P0(u,l)).join(",")})`,mm(c,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new jG(i,s)),super(r)}},jG=class extends JM{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return En(this.inputs,(n,r)=>{const i=mr(n[0]),[s,o]=this.transforms[r](me.arr(i)?i:n.map(mr));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&En(this.inputs,e=>En(e,n=>ai(n)&&Iv(n,this)))}observerRemoved(t){t==0&&En(this.inputs,e=>En(e,n=>ai(n)&&jf(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Ff(this,t)}},zG=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];qi.assign({batchedUpdates:vo.unstable_batchedUpdates,createStringInterpolator:eD,colors:MW});var UG=fG(zG,{applyAnimatedValues:RG,createAnimatedStyle:t=>new FG(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Gt=UG.animated;const wt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},Ze=(t=wt.stone[800])=>({backgroundColor:new Ct(t),opacity:new Ct(1)}),un=()=>({strokeDashoffset:new Ct(1),opacity:new Ct(1)}),XS={bus:{address:{stroke:new Ct(wt.stone[700])},data:{stroke:new Ct(wt.stone[700])},rd:{stroke:new Ct(wt.stone[700])},wr:{stroke:new Ct(wt.stone[700])},iom:un(),mem:{stroke:new Ct(wt.red[500])},handshake:un(),pic:un(),pio:un(),timer:un(),intr:un(),inta:un(),int0:un(),int1:un(),int2:un(),"switches->pio":un(),"pio->leds":un(),printer:{data:un(),strobe:un(),busy:un()}},clock:{angle:new Ct(0)},cpu:{internalBus:{address:{strokeDashoffset:new Ct(1),opacity:new Ct(1),path:new Ct("")},data:{strokeDashoffset:new Ct(1),opacity:new Ct(1),path:new Ct("")}},alu:{operands:un(),results:un(),cog:{rot:new Ct(0)},operation:{backgroundColor:new Ct(wt.stone[800])}},decoder:{path:un(),progress:{progress:new Ct(0),opacity:new Ct(1)}},AX:Ze(),BX:Ze(),CX:Ze(),DX:Ze(),SP:Ze(),IP:Ze(),IR:Ze(),ri:Ze(),id:Ze(),left:Ze(),right:Ze(),result:Ze(),FLAGS:Ze(),MAR:Ze(),MBR:Ze()},handshake:{DATA:Ze(),STATE:Ze()},memory:{"operating-cell":{color:new Ct(wt.white)}},pic:{IMR:Ze(),IRR:Ze(),ISR:Ze(),INT0:Ze(),INT1:Ze(),INT2:Ze(),INT3:Ze(),INT4:Ze(),INT5:Ze(),INT6:Ze(),INT7:Ze()},pio:{PA:Ze(),PB:Ze(),CA:Ze(),CB:Ze()},printer:{printing:{progress:new Ct(0),opacity:new Ct(1)}},timer:{CONT:Ze(),COMP:Ze()}};function ft(t){return uM(XS,t)}function fD(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];r instanceof Ct?e[n]=r.get():e[n]=fD(r)}return e}const VG=fD(XS);function hD(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];r instanceof Ct?r.set(e[n]):hD(t[n],e[n])}}const HG=()=>hD(XS,VG),Hf=new Set;async function et(t,e){const n=ne.get(Tn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=ne.sub(Tn,()=>{ne.get(Tn).type!=="paused"&&(o(),s())})}),await et(t,e);const r=yr();if(!r.animations&&!e.forceMs)return null;const i={duration:e.forceMs?e.duration:e.duration*r.executionUnit,easing:YM[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;const l=ft(s);if(a===void 0)return l.set(o);{Hf.add(s);const c=await ft(s).start({from:o,to:a,config:i});return Hf.delete(s),c}}))}const WG=()=>Hf.forEach(t=>ft(t).pause()),GG=()=>Hf.forEach(t=>ft(t).resume());function pD(){Hf.forEach(t=>{const e=ft(t);e.stop(!0),e.isPaused&&e.resume()}),setTimeout(()=>HG(),10)}async function ri(t,e=wt.mantis[400]){return await et({key:`${t}.backgroundColor`,to:e},{duration:1,easing:"easeOutQuart"})}async function ii(t){return await et({key:`${t}.backgroundColor`,to:wt.stone[800]},{duration:1,easing:"easeOutQuart"})}async function fu(t){await et({key:"bus.data.stroke",to:wt.mantis[400]},{duration:5,easing:"easeOutSine"}),await ri("cpu.MBR"),ne.set(Cg,t),await ii("cpu.MBR")}async function mi(t,e){return await et([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function qn(t){return await et({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function KG(t){switch(t.type){case"bus:io.selected":{await Promise.all([et({key:"bus.mem.stroke",to:wt.stone[700]},{duration:1,easing:"easeInSine"}),mi(`bus.${t.chip}`,15)]);return}case"bus:io.error":{pu(t.error);return}case"bus:reset":{await Promise.all([et([{key:"bus.address.stroke",to:wt.stone[700]},{key:"bus.data.stroke",to:wt.stone[700]},{key:"bus.rd.stroke",to:wt.stone[700]},{key:"bus.wr.stroke",to:wt.stone[700]}],{duration:1,easing:"easeInSine"}),et({key:"bus.mem.stroke",to:wt.red[500]},{duration:1,easing:"easeOutSine"}),qn("bus.iom"),qn("bus.handshake"),qn("bus.pio"),qn("bus.pic"),qn("bus.timer")]);return}default:return t}}async function XG(t){switch(t.type){case"clock:tick":return;default:return t.type}}function qG(t){switch(t){case"IP":return"M 551 309 H 575 V 349 H 598";case"SP":return"M 551 349 H 598";case"ri":return"M 544 388 H 575 V 349 H 598";default:throw new Error(`Invalid register ${t}`)}}function YG(){const{path:t,...e}=ft("cpu.internalBus.address");return b.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[b.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 551 309 H 575 V 349","M 551 349 H 575","M 544 388 H 575 V 349","M 551 349 H 598"].join(" ")}),b.jsx(Gt.path,{d:t,className:"fill-none stroke-blue-500 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}var qS={exports:{}},jc=typeof Reflect=="object"?Reflect:null,eA=jc&&typeof jc.apply=="function"?jc.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},gm;jc&&typeof jc.ownKeys=="function"?gm=jc.ownKeys:Object.getOwnPropertySymbols?gm=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:gm=function(e){return Object.getOwnPropertyNames(e)};function JG(t){console&&console.warn&&console.warn(t)}var mD=Number.isNaN||function(e){return e!==e};function ht(){ht.init.call(this)}qS.exports=ht;qS.exports.once=tK;ht.EventEmitter=ht;ht.prototype._events=void 0;ht.prototype._eventsCount=0;ht.prototype._maxListeners=void 0;var tA=10;function zv(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ht,"defaultMaxListeners",{enumerable:!0,get:function(){return tA},set:function(t){if(typeof t!="number"||t<0||mD(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");tA=t}});ht.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ht.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||mD(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function gD(t){return t._maxListeners===void 0?ht.defaultMaxListeners:t._maxListeners}ht.prototype.getMaxListeners=function(){return gD(this)};ht.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")eA(l,this,n);else for(var c=l.length,u=xD(l,c),r=0;r<c;++r)eA(u[r],this,n);return!0};function vD(t,e,n,r){var i,s,o;if(zv(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=gD(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,JG(a)}return t}ht.prototype.addListener=function(e,n){return vD(this,e,n,!1)};ht.prototype.on=ht.prototype.addListener;ht.prototype.prependListener=function(e,n){return vD(this,e,n,!0)};function ZG(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function yD(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=ZG.bind(r);return i.listener=n,r.wrapFn=i,i}ht.prototype.once=function(e,n){return zv(n),this.on(e,yD(this,e,n)),this};ht.prototype.prependOnceListener=function(e,n){return zv(n),this.prependListener(e,yD(this,e,n)),this};ht.prototype.removeListener=function(e,n){var r,i,s,o,a;if(zv(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():QG(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};ht.prototype.off=ht.prototype.removeListener;ht.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function wD(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?eK(i):xD(i,i.length)}ht.prototype.listeners=function(e){return wD(this,e,!0)};ht.prototype.rawListeners=function(e){return wD(this,e,!1)};ht.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):bD.call(t,e)};ht.prototype.listenerCount=bD;function bD(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}ht.prototype.eventNames=function(){return this._eventsCount>0?gm(this._events):[]};function xD(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function QG(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function eK(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function tK(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}SD(t,e,s,{once:!0}),e!=="error"&&nK(t,i,{once:!0})})}function nK(t,e,n){typeof t.on=="function"&&SD(t,"error",e,n)}function SD(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var rK=qS.exports;function $s(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&($s.prototype[Symbol.iterator]=function(){return this});$s.of=function(){var t=arguments,e=t.length,n=0;return new $s(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};$s.empty=function(){var t=new $s(function(){return{done:!0}});return t};$s.fromSequence=function(t){var e=0,n=t.length;return new $s(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};$s.is=function(t){return t instanceof $s?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Uv=$s;const Si=xu(Uv);var Vv={};Vv.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Vv.SYMBOL_SUPPORT=typeof Symbol<"u";var iK=Uv,kD=Vv,sK=kD.ARRAY_BUFFER_SUPPORT,oK=kD.SYMBOL_SUPPORT;function aK(t){return typeof t=="string"||Array.isArray(t)||sK&&ArrayBuffer.isView(t)?iK.fromSequence(t):typeof t!="object"||t===null?null:oK&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var _D=function(e){var n=aK(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},lK=_D,cK=function(e,n){for(var r=arguments.length>1?n:1/0,i=r!==1/0?new Array(r):[],s,o=0,a=lK(e);;){if(o===r)return i;if(s=a.next(),s.done)return o!==n&&(i.length=o),i;i[o++]=s.value}};const CD=xu(cK);var uK=Uv,dK=_D,fK=function(){var e=arguments,n=null,r=-1;return new uK(function(){var s=null;do{if(n===null){if(r++,r>=e.length)return{done:!0};n=dK(e[r])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const no=xu(fK);function hK(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const r in arguments[e])t[r]=arguments[e][r];return t}let an=hK;typeof Object.assign=="function"&&(an=Object.assign);function gi(t,e,n,r){const i=t._nodes.get(e);let s=null;return i&&(r==="mixed"?s=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?s=i.out&&i.out[n]:s=i.undirected&&i.undirected[n]),s}function An(t){return typeof t=="object"&&t!==null}function ED(t){let e;for(e in t)return!1;return!0}function Zr(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Ci(t,e,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function nA(t){return!(!An(t)||t.attributes&&!Array.isArray(t.attributes))}function pK(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class YS extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class pe extends YS{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,pe.prototype.constructor)}}class ue extends YS{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ue.prototype.constructor)}}class Re extends YS{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Re.prototype.constructor)}}function AD(t,e){this.key=t,this.attributes=e,this.clear()}AD.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function PD(t,e){this.key=t,this.attributes=e,this.clear()}PD.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function $D(t,e){this.key=t,this.attributes=e,this.clear()}$D.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function $u(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}$u.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};$u.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],s=i[r];if(typeof s>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}s.previous=this,this.next=s,i[r]=this,this.target[e][n]=this};$u.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};$u.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const TD=0,OD=1,mK=2,ND=3;function So(t,e,n,r,i,s,o){let a,l,c,u;if(r=""+r,n===TD){if(a=t._nodes.get(r),!a)throw new ue(`Graph.${e}: could not find the "${r}" node in the graph.`);c=i,u=s}else if(n===ND){if(i=""+i,l=t._edges.get(i),!l)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`);const d=l.source.key,f=l.target.key;if(r===d)a=l.target;else if(r===f)a=l.source;else throw new ue(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${d}, ${f}).`);c=s,u=o}else{if(l=t._edges.get(r),!l)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===OD?a=l.source:a=l.target,c=i,u=s}return[a,c,u]}function gK(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=So(this,e,n,r,i,s);return o.attributes[a]}}function vK(t,e,n){t.prototype[e]=function(r,i){const[s]=So(this,e,n,r,i);return s.attributes}}function yK(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=So(this,e,n,r,i,s);return o.attributes.hasOwnProperty(a)}}function wK(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,c]=So(this,e,n,r,i,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function bK(t,e,n){t.prototype[e]=function(r,i,s,o){const[a,l,c]=So(this,e,n,r,i,s,o);if(typeof c!="function")throw new pe(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function xK(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=So(this,e,n,r,i,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function SK(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=So(this,e,n,r,i,s);if(!An(a))throw new pe(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function kK(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=So(this,e,n,r,i,s);if(!An(a))throw new pe(`Graph.${e}: provided attributes are not a plain object.`);return an(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function _K(t,e,n){t.prototype[e]=function(r,i,s){const[o,a]=So(this,e,n,r,i,s);if(typeof a!="function")throw new pe(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const CK=[{name:t=>`get${t}Attribute`,attacher:gK},{name:t=>`get${t}Attributes`,attacher:vK},{name:t=>`has${t}Attribute`,attacher:yK},{name:t=>`set${t}Attribute`,attacher:wK},{name:t=>`update${t}Attribute`,attacher:bK},{name:t=>`remove${t}Attribute`,attacher:xK},{name:t=>`replace${t}Attributes`,attacher:SK},{name:t=>`merge${t}Attributes`,attacher:kK},{name:t=>`update${t}Attributes`,attacher:_K}];function EK(t){CK.forEach(function({name:e,attacher:n}){n(t,e("Node"),TD),n(t,e("Source"),OD),n(t,e("Target"),mK),n(t,e("Opposite"),ND)})}function AK(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=gi(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]}}function PK(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,o=""+arguments[1];if(i=gi(this,s,o,n),!i)throw new ue(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function $K(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=gi(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes.hasOwnProperty(i)}}function TK(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=gi(this,a,l,n),!o)throw new ue(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function OK(t,e,n){t.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=gi(this,a,l,n),!o)throw new ue(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof s!="function")throw new pe(`Graph.${e}: updater should be a function.`);return o.attributes[i]=s(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function NK(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=gi(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete s.attributes[i],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:i}),this}}function RK(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=gi(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!An(i))throw new pe(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=i,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function MK(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=gi(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!An(i))throw new pe(`Graph.${e}: provided attributes are not a plain object.`);return an(s.attributes,i),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:i}),this}}function DK(t,e,n){t.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=gi(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new pe(`Graph.${e}: provided updater is not a function.`);return s.attributes=i(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const IK=[{name:t=>`get${t}Attribute`,attacher:AK},{name:t=>`get${t}Attributes`,attacher:PK},{name:t=>`has${t}Attribute`,attacher:$K},{name:t=>`set${t}Attribute`,attacher:TK},{name:t=>`update${t}Attribute`,attacher:OK},{name:t=>`remove${t}Attribute`,attacher:NK},{name:t=>`replace${t}Attributes`,attacher:RK},{name:t=>`merge${t}Attributes`,attacher:MK},{name:t=>`update${t}Attributes`,attacher:DK}];function LK(t){IK.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const BK=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function FK(t,e,n,r){let i=!1;for(const s in e){if(s===r)continue;const o=e[s];if(i=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&i)return o.key}}function jK(t,e,n,r){let i,s,o,a=!1;for(const l in e)if(l!==r){i=e[l];do{if(s=i.source,o=i.target,a=n(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected),t&&a)return i.key;i=i.next}while(i!==void 0)}}function $0(t,e){const n=Object.keys(t),r=n.length;let i,s=0;return new Si(function(){do if(i)i=i.next;else{if(s>=r)return{done:!0};const a=n[s++];if(a===e){i=void 0;continue}i=t[a]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function zK(t,e,n,r){const i=e[n];if(!i)return;const s=i.source,o=i.target;if(r(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected)&&t)return i.key}function UK(t,e,n,r){let i=e[n];if(!i)return;let s=!1;do{if(s=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&s)return i.key;i=i.next}while(i!==void 0)}function T0(t,e){let n=t[e];return n.next!==void 0?new Si(function(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}):Si.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function VK(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):CD(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===i&&(r[o++]=l.key);return r}function RD(t,e,n,r){if(e.size===0)return;const i=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,i&&a.undirected!==s)continue;const{key:u,attributes:d,source:f,target:h}=a;if(l=r(u,d,f.key,h.key,f.attributes,h.attributes,a.undirected),t&&l)return u}}function HK(t,e){if(t.size===0)return Si.empty();const n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return new Si(function(){let o,a;for(;;){if(o=i.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==r))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function JS(t,e,n,r,i,s){const o=e?jK:FK;let a;if(n!=="undirected"&&(r!=="out"&&(a=o(t,i.in,s),t&&a)||r!=="in"&&(a=o(t,i.out,s,r?void 0:i.key),t&&a))||n!=="directed"&&(a=o(t,i.undirected,s),t&&a))return a}function WK(t,e,n,r){const i=[];return JS(!1,t,e,n,r,function(s){i.push(s)}),i}function GK(t,e,n){let r=Si.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=no(r,$0(n.in))),e!=="in"&&typeof n.out<"u"&&(r=no(r,$0(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=no(r,$0(n.undirected))),r}function ZS(t,e,n,r,i,s,o){const a=n?UK:zK;let l;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(l=a(t,i.in,s,o),t&&l)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==s)&&(l=a(t,i.out,s,o),t&&l))||e!=="directed"&&typeof i.undirected<"u"&&(l=a(t,i.undirected,s,o),t&&l))return l}function KK(t,e,n,r,i){const s=[];return ZS(!1,t,e,n,r,i,function(o){s.push(o)}),s}function XK(t,e,n,r){let i=Si.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=no(i,T0(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=no(i,T0(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=no(i,T0(n.undirected,r))),i}function qK(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return VK(this,r);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new ue(`Graph.${n}: could not find the "${s}" node in the graph.`);return WK(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new ue(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new ue(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return KK(r,this.multi,i,a,o)}throw new pe(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function YK(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return d=c,RD(!1,this,r,d);if(arguments.length===2){c=""+c,d=u;const f=this._nodes.get(c);if(typeof f>"u")throw new ue(`Graph.${s}: could not find the "${c}" node in the graph.`);return JS(!1,this.multi,r==="mixed"?this.type:r,i,f,d)}if(arguments.length===3){c=""+c,u=""+u;const f=this._nodes.get(c);if(!f)throw new ue(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new ue(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return ZS(!1,r,this.multi,i,f,u,d)}throw new pe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let f=0;r!=="directed"&&(f+=this.undirectedSize),r!=="undirected"&&(f+=this.directedSize),d=new Array(f);let h=0;c.push((p,m,w,v,y,x,k)=>{d[h++]=u(p,m,w,v,y,x,k)})}else d=[],c.push((f,h,p,m,w,v,y)=>{d.push(u(f,h,p,m,w,v,y))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((f,h,p,m,w,v,y)=>{u(f,h,p,m,w,v,y)&&d.push(f)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new pe(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new pe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((h,p,m,w,v,y,x)=>{f=u(f,h,p,m,w,v,y,x)}),this[s].apply(this,c),f}}function JK(t,e){const{name:n,type:r,direction:i}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return u=l,RD(!0,this,r,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new ue(`Graph.${s}: could not find the "${l}" node in the graph.`);return JS(!0,this.multi,r==="mixed"?this.type:r,i,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new ue(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new ue(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return ZS(!0,r,this.multi,i,d,c,u)}throw new pe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,h,p,m,w,v)=>c(d,f,h,p,m,w,v)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,h,p,m,w,v)=>!c(d,f,h,p,m,w,v)),!this[s].apply(this,l)}}function ZK(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Si.empty();if(!arguments.length)return HK(this,r);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new ue(`Graph.${s}: could not find the "${o}" node in the graph.`);return GK(r,i,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new ue(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new ue(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return XK(r,i,l,a)}throw new pe(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function QK(t){BK.forEach(e=>{qK(t,e),YK(t,e),JK(t,e),ZK(t,e)})}const eX=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Hv(){this.A=null,this.B=null}Hv.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Hv.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function ed(t,e,n,r,i){for(const s in r){const o=r[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=i(c.key,c.attributes);if(t&&u)return c.key}}function QS(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return ed(t,null,r,r.undirected,i);if(typeof n=="string")return ed(t,null,r,r[n],i)}const s=new Hv;let o;if(e!=="undirected"){if(n!=="out"){if(o=ed(t,null,r,r.in,i),t&&o)return o;s.wrap(r.in)}if(n!=="in"){if(o=ed(t,s,r,r.out,i),t&&o)return o;s.wrap(r.out)}}if(e!=="directed"&&(o=ed(t,s,r,r.undirected,i),t&&o))return o}function tX(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const r=[];return QS(!1,t,e,n,function(i){r.push(i)}),r}function td(t,e,n){const r=Object.keys(n),i=r.length;let s=0;return new Si(function(){let a=null;do{if(s>=i)return t&&t.wrap(n),{done:!0};const l=n[r[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function nX(t,e,n){if(t!=="mixed"){if(t==="undirected")return td(null,n,n.undirected);if(typeof e=="string")return td(null,n,n[e])}let r=Si.empty();const i=new Hv;return t!=="undirected"&&(e!=="out"&&(r=no(r,td(i,n,n.in))),e!=="in"&&(r=no(r,td(i,n,n.out)))),t!=="directed"&&(r=no(r,td(i,n,n.undirected))),r}function rX(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new ue(`Graph.${n}: could not find the "${s}" node in the graph.`);return tX(r==="mixed"?this.type:r,i,o)}}function iX(t,e){const{name:n,type:r,direction:i}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new ue(`Graph.${s}: could not find the "${c}" node in the graph.`);QS(!1,r==="mixed"?this.type:r,i,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(f,h)=>{d.push(u(f,h))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(f,h)=>{u(f,h)&&d.push(f)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new pe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[s](c,(h,p)=>{f=u(f,h,p)}),f}}function sX(t,e){const{name:n,type:r,direction:i}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new ue(`Graph.${o}: could not find the "${c}" node in the graph.`);return QS(!0,r==="mixed"?this.type:r,i,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(f,h)=>!u(f,h))}}function oX(t,e){const{name:n,type:r,direction:i}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Si.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new ue(`Graph.${s}: could not find the "${o}" node in the graph.`);return nX(r==="mixed"?this.type:r,i,a)}}function aX(t){eX.forEach(e=>{rX(t,e),iX(t,e),sX(t,e),oX(t,e)})}function gp(t,e,n,r,i){const s=r._nodes.values(),o=r.type;let a,l,c,u,d,f,h;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do{if(f=d.target,p=!0,h=i(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),t&&h)return d;d=d.next}while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do{if(f=d.target,f.key!==c&&(f=d.source),p=!0,h=i(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),t&&h)return d;d=d.next}while(d)}}if(n&&!p&&(h=i(l.key,null,l.attributes,null,null,null,null),t&&h))return null}}function lX(t,e){const n={key:t};return ED(e.attributes)||(n.attributes=an({},e.attributes)),n}function cX(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return ED(n.attributes)||(r.attributes=an({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function uX(t){if(!An(t))throw new pe('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new pe("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!An(t.attributes)||t.attributes===null))throw new pe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function dX(t){if(!An(t))throw new pe('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new pe("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new pe("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!An(t.attributes)||t.attributes===null))throw new pe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new pe("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const fX=pK(),hX=new Set(["directed","undirected","mixed"]),rA=new Set(["domain","_events","_eventsCount","_maxListeners"]),pX=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],mX={allowSelfLoops:!0,multi:!1,type:"mixed"};function gX(t,e,n){if(n&&!An(n))throw new pe(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new Re(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function iA(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function MD(t,e,n,r,i,s,o,a){if(!r&&t.type==="undirected")throw new Re(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new Re(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!An(a))throw new pe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new Re(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new ue(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new ue(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new Re(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Re(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new $u(r,i,l,c,a);t._edges.set(i,d);const f=s===o;return r?(l.undirectedDegree++,c.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),r?t._undirectedSize++:t._directedSize++,u.key=i,t.emit("edgeAdded",u),i}function vX(t,e,n,r,i,s,o,a,l){if(!r&&t.type==="undirected")throw new Re(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new Re(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new pe(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!An(a))throw new pe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new Re(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),f,h;if(!n&&(f=t._edges.get(i),f)){if((f.source.key!==s||f.target.key!==o)&&(!r||f.source.key!==o||f.target.key!==s))throw new Re(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${s}" source & "${o}" target vs. ("${f.source.key}", "${f.target.key}").`);h=f}if(!h&&!t.multi&&u&&(h=r?u.undirected[o]:u.out[o]),h){const y=[h.key,!1,!1,!1];if(l?!c:!a)return y;if(l){const x=h.attributes;h.attributes=c(x),t.emit("edgeAttributesUpdated",{type:"replace",key:h.key,attributes:h.attributes})}else an(h.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:h.key,attributes:h.attributes,data:a});return y}a=a||{},l&&c&&(a=c(a));const p={key:null,undirected:r,source:s,target:o,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new Re(`Graph.${e}: the "${i}" edge already exists in the graph.`);let m=!1,w=!1;u||(u=iA(t,s,{}),m=!0,s===o&&(d=u,w=!0)),d||(d=iA(t,o,{}),w=!0),f=new $u(r,i,u,d,a),t._edges.set(i,f);const v=s===o;return r?(u.undirectedDegree++,d.undirectedDegree++,v&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,v&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),r?t._undirectedSize++:t._directedSize++,p.key=i,t.emit("edgeAdded",p),[i,!0,m,w]}function Zl(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,s=e.undirected,o=n===r;s?(n.undirectedDegree--,r.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:s})}class xt extends rK.EventEmitter{constructor(e){if(super(),e=an({},mX,e),typeof e.multi!="boolean")throw new pe(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!hX.has(e.type))throw new pe(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new pe(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?AD:e.type==="directed"?PD:$D;Zr(this,"NodeDataClass",n);const r="geid_"+fX()+"_";let i=0;const s=()=>{let o;do o=r+i++;while(this._edges.has(o));return o};Zr(this,"_attributes",{}),Zr(this,"_nodes",new Map),Zr(this,"_edges",new Map),Zr(this,"_directedSize",0),Zr(this,"_undirectedSize",0),Zr(this,"_directedSelfLoopCount",0),Zr(this,"_undirectedSelfLoopCount",0),Zr(this,"_edgeKeyGenerator",s),Zr(this,"_options",e),rA.forEach(o=>Zr(this,o,this[o])),Ci(this,"order",()=>this._nodes.size),Ci(this,"size",()=>this._edges.size),Ci(this,"directedSize",()=>this._directedSize),Ci(this,"undirectedSize",()=>this._undirectedSize),Ci(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Ci(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Ci(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Ci(this,"multi",this._options.multi),Ci(this,"type",this._options.type),Ci(this,"allowSelfLoops",this._options.allowSelfLoops),Ci(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new pe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new pe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new pe(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new Re("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new ue(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ue(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new Re("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new ue(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ue(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new Re("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ue(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new ue(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const r=this._edges.get(n);if(!r)throw new ue(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,s=r.target.key;if(e===i)return s;if(e===s)return i;throw new ue(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const r=this._edges.get(e);if(!r)throw new ue(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return gX(this,e,n).key}mergeNode(e,n){if(n&&!An(n))throw new pe(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&(an(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new pe(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){const s=r.attributes;r.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do Zl(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do Zl(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do Zl(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=gi(this,r,i,this.type),!n)throw new ue(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new ue(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Zl(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new Re("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Re("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const r=gi(this,e,n,"directed");if(!r)throw new ue(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Zl(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new Re("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Re("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=gi(this,e,n,"undirected");if(!r)throw new ue(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Zl(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new pe("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!An(e))throw new pe("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!An(e))throw new pe("Graph.mergeAttributes: provided attributes are not a plain object.");return an(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new pe("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new pe("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!nA(n))throw new pe("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new pe("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!nA(n))throw new pe("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,s,o,a;for(;i=r.next(),i.done!==!0;)s=i.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new pe("Graph.forEachAdjacencyEntry: expecting a callback.");gp(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new pe("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");gp(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new pe("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");gp(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new pe("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");gp(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):CD(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new pe("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new pe("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new pe("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const s=new Array(this.order);let o=0;for(;r=n.next(),r.done!==!0;)i=r.value,s[o++]=e(i.key,i.attributes);return s}someNode(e){if(typeof e!="function")throw new pe("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new pe("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new pe("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const s=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&s.push(i.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new pe("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new pe("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let s,o;for(;s=i.next(),s.done!==!0;)o=s.value,r=e(r,o.key,o.attributes);return r}nodeEntries(){const e=this._nodes.values();return new Si(()=>{const n=e.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,s)=>{e[n++]=lX(s,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,s)=>{r[n++]=cX(this.type,s,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof xt)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,f,h,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):p?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!An(e))throw new pe("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!An(e.attributes))throw new pe("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new pe("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=s.length;r<i;r++){o=s[r],uX(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new pe("Graph.import: invalid edges. Expecting an array.");for(r=0,i=s.length;r<i;r++){a=s[r],dX(a);const{source:c,target:u,attributes:d,undirected:f=l}=a;let h;"key"in a?(h=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,h.call(this,a.key,c,u,d)):(h=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,h.call(this,c,u,d))}}return this}nullCopy(e){const n=new xt(an({},this._options,e));return n.replaceAttributes(an({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const s=an({},r.attributes);r=new n.NodeDataClass(i,s),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Re(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Re("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Re("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),r=this._edges.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,MD(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,an({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},r={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const f=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof r[f]>"u"?r[f]=0:r[f]++,l+=`${r[f]}. `):l+=`[${o}]: `,l+=f,n[l]=s.attributes});const i={};for(const s in this)this.hasOwnProperty(s)&&!rA.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(i[s]=this[s]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,Zr(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(xt.prototype[Symbol.for("nodejs.util.inspect.custom")]=xt.prototype.inspect);pX.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),r=e==="add"?MD:vX;t.generateKey?xt.prototype[n]=function(i,s,o){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,s,o,e==="update")}:xt.prototype[n]=function(i,s,o,a){return r(this,n,!1,(t.type||this.type)==="undirected",i,s,o,a,e==="update")}})});EK(xt);LK(xt);QK(xt);aX(xt);class DD extends xt{constructor(e){const n=an({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new pe("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new pe('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class ek extends xt{constructor(e){const n=an({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new pe("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new pe('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class ID extends xt{constructor(e){const n=an({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new pe("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class LD extends xt{constructor(e){const n=an({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new pe("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new pe('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class BD extends xt{constructor(e){const n=an({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new pe("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new pe('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Tu(t){t.from=function(e,n){const r=an({},e.options,n),i=new t(r);return i.import(e),i}}Tu(xt);Tu(DD);Tu(ek);Tu(ID);Tu(LD);Tu(BD);xt.Graph=xt;xt.DirectedGraph=DD;xt.UndirectedGraph=ek;xt.MultiGraph=ID;xt.MultiDirectedGraph=LD;xt.MultiUndirectedGraph=BD;xt.InvalidArgumentsGraphError=pe;xt.NotFoundGraphError=ue;xt.UsageGraphError=Re;var yX=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},FD=Vv,wX=FD.ARRAY_BUFFER_SUPPORT,bX=FD.SYMBOL_SUPPORT,xX=function(e,n){var r,i,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||wX&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(bX&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(r=e,s=0;a=r.next(),a.done!==!0;)n(a.value,s),s++;return}for(i in e)e.hasOwnProperty(i)&&n(e[i],i)},jD=Uv,SX=xX;function Qt(){this.clear()}Qt.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};Qt.prototype.enqueue=function(t){return this.items.push(t),++this.size};Qt.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};Qt.prototype.peek=function(){if(this.size)return this.items[this.offset]};Qt.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,r=0,i=this.items.length;n<i;n++,r++)t.call(e,this.items[n],r,this)};Qt.prototype.toArray=function(){return this.items.slice(this.offset)};Qt.prototype.values=function(){var t=this.items,e=this.offset;return new jD(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};Qt.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new jD(function(){if(e>=t.length)return{done:!0};var r=t[e];return e++,{value:[n++,r],done:!1}})};typeof Symbol<"u"&&(Qt.prototype[Symbol.iterator]=Qt.prototype.values);Qt.prototype.toString=function(){return this.toArray().join(",")};Qt.prototype.toJSON=function(){return this.toArray()};Qt.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:Qt,enumerable:!1}),t};typeof Symbol<"u"&&(Qt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Qt.prototype.inspect);Qt.from=function(t){var e=new Qt;return SX(t,function(n){e.enqueue(n)}),e};Qt.of=function(){return Qt.from(arguments)};var kX=function(e,n){var r=n.length;if(r!==0){var i=e.length;e.length+=r;for(var s=0;s<r;s++)e[i+s]=n[s]}},zD=yX,_X=kX;function CX(t,e,n){if(!zD(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var r=t.inboundNeighbors.bind(t),i=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,f,h,p,m,w,v=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],h=0,m=c.length;h<m;h++)for(u=c[h],d=i(u),p=0,w=d.length;p<w;p++)if(f=d[p],f in s||(a.push(f),s[f]=u),f in o){v=!0;break e}}else for(c=l,l=[],h=0,m=c.length;h<m;h++)for(u=c[h],d=r(u),p=0,w=d.length;p<w;p++)if(f=d[p],f in o||(l.push(f),o[f]=u),f in s){v=!0;break e}if(!v)return null;for(var y=[];f;)y.unshift(f),f=s[f];for(f=o[y[y.length-1]];f;)y.push(f),f=o[f];return y.length?y:null}function UD(t,e,n){if(!zD(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var r=new Set,i={},s=0;i[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!r.has(c)&&(r.add(c),_X(u,e[t](c)),i[c]=s);s++,o=u}return i}UD.bind(null,"outboundNeighbors");UD.bind(null,"neighbors");var EX=CX;const Ce=new ek({allowSelfLoops:!1});Ce.addNode("MBR",{position:[610,250]});Ce.addNode("AX",{position:[522,45]});Ce.addNode("BX",{position:[522,85]});Ce.addNode("CX",{position:[522,125]});Ce.addNode("DX",{position:[522,165]});Ce.addNode("id",{position:[522,205]});Ce.addNode("IP",{position:[451,309]});Ce.addNode("SP",{position:[451,349]});Ce.addNode("ri",{position:[451,388]});Ce.addNode("result",{position:[370,130]});Ce.addNode("FLAGS",{position:[250,225]});Ce.addNode("IR",{position:[205,272]});Ce.addNode("left",{position:[60,85]});Ce.addNode("right",{position:[60,145]});Ce.addNode("AX join",{position:[492,45]});Ce.addNode("BX join",{position:[492,85]});Ce.addNode("CX join",{position:[492,125]});Ce.addNode("DX join",{position:[492,165]});Ce.addNode("id join",{position:[492,205]});Ce.addNode("data mbr join",{position:[492,250]});Ce.addNode("IP join",{position:[421,309]});Ce.addNode("SP join",{position:[421,349]});Ce.addNode("ri join",{position:[421,388]});Ce.addNode("addresses mbr join",{position:[421,250]});Ce.addNode("result mbr join",{position:[370,250]});Ce.addNode("FLAGS mbr join",{position:[250,250]});Ce.addNode("IR mbr join",{position:[205,250]});Ce.addNode("left join",{position:[30,85]});Ce.addNode("right join",{position:[30,145]});Ce.addNode("operands mbr join",{position:[30,250]});Ce.addUndirectedEdge("AX","AX join");Ce.addUndirectedEdge("BX","BX join");Ce.addUndirectedEdge("CX","CX join");Ce.addUndirectedEdge("DX","DX join");Ce.addUndirectedEdge("id","id join");Ce.addUndirectedEdge("AX join","BX join");Ce.addUndirectedEdge("BX join","CX join");Ce.addUndirectedEdge("CX join","DX join");Ce.addUndirectedEdge("DX join","id join");Ce.addUndirectedEdge("id join","data mbr join");Ce.addUndirectedEdge("data mbr join","MBR");Ce.addUndirectedEdge("IP","IP join");Ce.addUndirectedEdge("SP","SP join");Ce.addUndirectedEdge("ri","ri join");Ce.addUndirectedEdge("IP join","SP join");Ce.addUndirectedEdge("SP join","ri join");Ce.addUndirectedEdge("IP join","addresses mbr join");Ce.addUndirectedEdge("addresses mbr join","data mbr join");Ce.addUndirectedEdge("result","result mbr join");Ce.addUndirectedEdge("result mbr join","addresses mbr join");Ce.addUndirectedEdge("FLAGS","FLAGS mbr join");Ce.addUndirectedEdge("FLAGS mbr join","result mbr join");Ce.addUndirectedEdge("IR","IR mbr join");Ce.addUndirectedEdge("IR mbr join","FLAGS mbr join");Ce.addUndirectedEdge("left","left join");Ce.addUndirectedEdge("right","right join");Ce.addUndirectedEdge("left join","right join");Ce.addUndirectedEdge("right join","operands mbr join");Ce.addUndirectedEdge("operands mbr join","IR mbr join");function AX(t,e){const n=EX(Ce,t,e);if(!n)throw new Error(`No path from ${t} to ${e}`);const r=Ce.getNodeAttribute(n[0],"position");let i=`M ${r[0]} ${r[1]}`;for(let s=1;s<n.length;s++){const[o,a]=Ce.getNodeAttribute(n[s],"position");i+=` L ${o} ${a}`}return i}function PX(){const{path:t,...e}=ft("cpu.internalBus.data");return b.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[b.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 60 85 H 30","V 250 H 610","M 60 145 H 30","M 370 130 V 250","M 250 225 V 250","M 173 85 H 220","M 182 145 H 220","M 272 115 h 28","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 451 388 H 421","V 250","M 451 349 H 421","M 451 309 H 421","M 522 45 H 492","V 250","M 522 85 H 492","M 522 125 H 492","M 522 165 H 492","M 522 205 H 492"].join(" ")}),b.jsx(Gt.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}const O0=(t,e)=>{const n=AX(t,e);return et([{key:"cpu.internalBus.data.path",from:n},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})},N0=()=>et({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});async function $X(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await et([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),ne.set(FM,t.operation),await Promise.all([et({key:"cpu.alu.operation.backgroundColor",to:wt.mantis[400]},{duration:1,easing:"easeOutQuart"}),et({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([et({key:"cpu.alu.operation.backgroundColor",to:wt.stone[800]},{duration:1,easing:"easeOutQuart"}),et([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([ri("cpu.result"),ri("cpu.FLAGS")]),ne.set(Et.FLAGS,t.flags),ne.set(Et.result,t.result),await Promise.all([ii("cpu.result"),ii("cpu.FLAGS")]),await et([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{ne.set(as,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await et([{key:"cpu.id.opacity",to:1},{key:"cpu.ri.opacity",to:1}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{IM(t.instruction.position.start),ne.set(as,{phase:"fetching",metadata:t.instruction}),await et([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:.4},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:.4}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{ne.set(as,e=>"metadata"in e?{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase}:e);return}case"cpu:decode":{await et([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await et([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await et([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{ne.set(as,{phase:"stopped",error:t.error}),pu(t.error);return}case"cpu:halt":case"cpu:int.0":{ne.set(as,{phase:"stopped"}),pu();return}case"cpu:int.3":{m1();return}case"cpu:int.6":{ne.set(as,{phase:"int6"});return}case"cpu:int.7":{ne.set(as,{phase:"int7"});return}case"cpu:inta.off":{await qn("bus.inta");return}case"cpu:inta.on":{await mi("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await et({key:`bus.${e}.stroke`,to:wt.red[500]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await mi("bus.iom",15);return}case"cpu:mar.set":{await et([{key:"cpu.internalBus.address.path",from:qG(t.register)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await ri("cpu.MAR",wt.blue[500]),ne.set(BM,ne.get(Et[t.register])),await et({key:"bus.address.stroke",to:wt.blue[500]},{duration:5,easing:"easeOutSine"}),await Promise.all([ii("cpu.MAR"),et({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=Ya(t.register);await O0("MBR",e),await ri(`cpu.${e}`),ne.set(Et[t.register],ne.get(Cg)),await Promise.all([ii(`cpu.${e}`),N0()]);return}case"cpu:mbr.set":{const[e]=Ya(t.register);await O0(e,"MBR"),await ri("cpu.MBR"),ne.set(Cg,ne.get(Et[t.register])),await et({key:"bus.data.stroke",to:wt.mantis[400]},{duration:5,easing:"easeOutSine"}),await Promise.all([ii("cpu.MBR"),N0()]);return}case"cpu:register.copy":{const[e]=Ya(t.src),[n]=Ya(t.dest);e!==n&&await O0(e,n),await ri(`cpu.${n}`),ne.set(Et[t.dest],ne.get(Et[t.src])),await Promise.all([ii(`cpu.${n}`),e!==n&&N0()]);return}case"cpu:register.update":{const[e]=Ya(t.register);await ri(`cpu.${e}`),ne.set(Et[t.register],t.value),await ii(`cpu.${e}`);return}default:return t}}async function TX(t){switch(t.type){case"f10:press":await mi("bus.int0",2),await qn("bus.int0");return;default:return t.type}}const tk=Ae(F.zero(8)),nk=Ae(F.zero(8));function OX(t){"handshake"in t.io&&(ne.set(tk,F.fromUnsigned(t.io.handshake.DATA,8)),ne.set(nk,F.fromUnsigned(t.io.handshake.STATE,8)))}async function NX(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await fu(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await ri(`handshake.${t.register}`),t.register){case"DATA":{ne.set(tk,t.value);break}case"STATE":{ne.set(nk,t.value);break}default:return t.register}await ii(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await qn("bus.int2");return}case"handshake:int.on":{await mi("bus.int2",10);return}default:return t}}async function RX(t){switch(t.type){case"keyboard:listen-key":{ne.set(Tn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{ne.sub(Tn,()=>{const n=ne.get(Tn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const rk=Ae(F.zero(8));function MX(t){"leds"in t.io&&ne.set(rk,F.fromUnsigned(t.io.leds,8))}async function DX(t){switch(t.type){case"leds:update":{await mi("bus.pio->leds",2),ne.set(rk,t.state),await qn("bus.pio->leds");return}default:return t.type}}const ik=Ae(new Array(ge.MAX_ADDRESS+1).fill(F.zero(8))),hu=Ae(ge.from(8192)),VD=Ae(null),vp=16,IX=Ae(t=>{const e=t(VD)??t(hu);let n=e.value-e.value%vp,r=n+vp-1;r>ge.MAX_ADDRESS&&(r=ge.MAX_ADDRESS,n=r-vp+1);const i=t(ik),s=[];for(let o=0;o<vp;o++)s.push({address:ge.from(n+o),value:i[n+o]});return s});function LX(t){ne.set(ik,t.memory.map(e=>F.fromUnsigned(e,8))),ne.set(hu,ge.from(8192))}async function BX(t){switch(t.type){case"memory:read":return;case"memory:read.ok":{ne.set(hu,ge.from(t.address)),await et({key:"memory.operating-cell.color",to:wt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await fu(t.value),await et({key:"memory.operating-cell.color",to:wt.white},{duration:1,easing:"easeOutQuart"});return}case"memory:write":return;case"memory:write.ok":{ne.set(hu,ge.from(t.address)),await et({key:"memory.operating-cell.color",to:wt.mantis[400]},{duration:1,easing:"easeOutQuart"}),ne.set(ik,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await et({key:"memory.operating-cell.color",to:wt.white},{duration:1,easing:"easeOutQuart"});return}case"memory:read.error":case"memory:write.error":{pu(t.error);return}default:return t}}const sk=Ae(F.fromUnsigned(255,8)),ok=Ae(F.fromUnsigned(0,8)),ak=Ae(F.fromUnsigned(0,8)),Og=[Ae(F.zero(8)),Ae(F.zero(8)),Ae(F.zero(8)),Ae(F.zero(8)),Ae(F.zero(8)),Ae(F.zero(8)),Ae(F.zero(8)),Ae(F.zero(8))];function FX(t){if("pic"in t.io){ne.set(sk,F.fromUnsigned(t.io.pic.IMR,8)),ne.set(ok,F.fromUnsigned(t.io.pic.IRR,8)),ne.set(ak,F.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<Og.length;e++)ne.set(Og[e],F.fromUnsigned(t.io.pic.lines[e],8))}}async function jX(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await fu(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await ri(`pic.${t.register}`),t.register){case"IMR":{ne.set(sk,t.value);break}case"IRR":{ne.set(ok,t.value);break}case"ISR":{ne.set(ak,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));ne.set(Og[e],t.value);break}default:return t}await ii(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await qn("bus.intr");return}case"pic:intr.on":{await mi("bus.intr",10);return}case"pic:int.send":{await fu(t.number);return}default:return t}}const lk=Ae(F.zero(8)),ck=Ae(F.zero(8)),uk=Ae(F.zero(8)),dk=Ae(F.zero(8));function zX(t){"pio"in t.io&&(ne.set(lk,F.fromUnsigned(t.io.pio.PA,8)),ne.set(ck,F.fromUnsigned(t.io.pio.PB,8)),ne.set(uk,F.fromUnsigned(t.io.pio.CA,8)),ne.set(dk,F.fromUnsigned(t.io.pio.CB,8)))}async function UX(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await fu(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await ri(`pio.${t.register}`),t.register){case"PA":{ne.set(lk,t.value);break}case"PB":{ne.set(ck,t.value);break}case"CA":{ne.set(uk,t.value);break}case"CB":{ne.set(dk,t.value);break}default:return t.register}await ii(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const Ng=Ae([]),Rg=Ae("");function VX(t){"printer"in t.io&&(ne.set(Ng,t.io.printer.buffer.map(e=>F.fromUnsigned(e,8))),ne.set(Rg,t.io.printer.paper))}async function HX(t){switch(t.type){case"printer:buffer.add":{ne.set(Ng,e=>[...e,t.char]);return}case"printer:buffer.pop":{ne.set(Ng,e=>e.slice(1));return}case"printer:busy.off":{await qn("bus.printer.busy");return}case"printer:busy.on":{await mi("bus.printer.busy",15);return}case"printer:data.read":{await mi("bus.printer.data",15),await qn("bus.printer.data");return}case"printer:paper.print":{ne.set(Rg,e=>e+t.char);return}case"printer:paper.replace":{ne.set(Rg,"");return}case"printer:strobe.off":{await qn("bus.printer.strobe");return}case"printer:strobe.on":{await mi("bus.printer.strobe",15);return}default:return t}}const fk=Ae("");function WX(t){"screen"in t.io&&ne.set(fk,t.io.screen)}async function GX(t){switch(t.type){case"screen:send-char":{ne.set(fk,t.output);return}default:return t.type}}const hk=Ae(F.zero(8));function KX(t){"switches"in t.io&&ne.set(hk,F.fromUnsigned(t.io.switches,8))}async function XX(t){switch(t.type){case"switches:toggle":{ne.set(hk,e=>e.withBit(t.index,!e.bit(t.index))),await mi("bus.switches->pio",2),await qn("bus.switches->pio");return}default:return t.type}}const pk=Ae(F.zero(8)),mk=Ae(F.zero(8));function qX(t){"timer"in t.io&&(ne.set(pk,F.fromUnsigned(t.io.timer.CONT,8)),ne.set(mk,F.fromUnsigned(t.io.timer.COMP,8)))}async function YX(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await fu(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await ri(`timer.${t.register}`),t.register){case"CONT":{ne.set(pk,t.value);break}case"COMP":{ne.set(mk,t.value);break}default:return t.register}await ii(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await qn("bus.int1");return}case"timer:int.on":{await mi("bus.int1",10);return}default:return t}}const p1=new Set;async function JX(t){QX(t);const[e]=t.type.split(":",2);switch(p1.add(t.type),e){case"bus":{await KG(t);break}case"clock":{await XG(t);break}case"cpu":{await $X(t);break}case"f10":{await TX(t);break}case"handshake":{await NX(t);break}case"keyboard":{await RX(t);break}case"leds":{await DX(t);break}case"memory":{await BX(t);break}case"pic":{await jX(t);break}case"pio":{await UX(t);break}case"printer":{await HX(t);break}case"screen":{await GX(t);break}case"switches":{await XX(t);break}case"timer":{await YX(t);break}default:return e}p1.delete(t.type)}function sA(...t){for(const e of t)if(p1.has(e))return!0;return!1}const ZX={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function QX(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${ZX[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const r in t)if(r!=="type"&&Object.prototype.hasOwnProperty.call(t,r)){const i=t[r];i instanceof F?console.log(`${r}: %c${i.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):i instanceof ge?console.log(`${r}: %c${i.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):i instanceof Kr?console.log(`${r}: %c${i.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof i=="number"?console.log(`${r}: %c${i.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof i=="string"?console.log(`${r}: %c"${i}" %c(string)`,"color: #f97316;","color: #737373;"):typeof i=="boolean"?console.log(`${r}: %c${i}`,"color: #06b6d4;"):i===null?console.log(`${r}: %cnull`,"color: #b91c1c;"):console.log(`${r}:`,i)}console.groupEnd()}const Ln=new bW,Tn=Ae({type:"stopped"});function eq(t){const e=t.translate(yr().language);pr({title:e,variant:"error"})}function pu(t){t&&eq(t),IM(null),DM(!1),ne.set(Tn,{type:"stopped",error:t}),ne.set(as,{phase:"stopped",error:t}),pD()}function m1(){ne.set(Tn,{type:"paused"}),WG()}function tq(){pr({title:Ev(yr().language,"messages.assemble-error"),variant:"error"})}function Ql(){pr({title:Ev(yr().language,"messages.invalid-action"),variant:"error"})}function nq(t){_W(t),LX(t),OX(t),FX(t),zX(t),qX(t),MX(t),VX(t),WX(t),KX(t)}async function Za(t){try{for(;;){const e=ne.get(Tn),n=yr();if(e.type==="stopped")break;if(e.type==="paused"){await new Promise(i=>{const s=ne.sub(Tn,()=>{s(),i()})});continue}const r=t.next();if(r.done)break;await JX(r.value),r.value.type==="cpu:cycle.update"||r.value.type==="cpu:cycle.interrupt"?e.until==="cycle-change"?m1():n.animations||await new Promise(i=>setTimeout(i,n.executionUnit)):r.value.type==="cpu:cycle.end"&&(e.until==="cycle-change"||e.until==="end-of-instruction"?m1():n.animations||await new Promise(i=>setTimeout(i,n.executionUnit)))}t.return()}catch(e){const n=Je.from(e);pu(n)}}async function rq(...t){const e=t[0],n=ne.get(Tn);switch(e){case"cpu.run":{if(n.type==="running")return Ql();const r=t[1];if(n.type==="stopped"){if(!window.codemirror)return;const i=window.codemirror.state.doc.toString(),s=PM(i);if(!s.success)return tq();DM(!0),Ln.loadProgram({program:s,data:yr().dataOnLoad,devices:yr().devices}),nq(Ln.getComputerState());const o=["Start CPU",{until:r,devices:yr().devices,language:yr().language,animations:yr().animations?"yes":"no"}];umami.track(...o),LM.capture(...o),ne.set(Tn,{type:"running",until:r,waitingForInput:!1}),Za(Ln.startCPU()),iq(),sq()}else ne.set(Tn,{type:"running",until:r,waitingForInput:!1}),GG();return}case"cpu.stop":{pu();return}case"f10.press":{if(!Ln.devices.f10.connected()||n.type!=="running")return Ql();if(sA("f10:press"))return;Za(Ln.devices.f10.press());return}case"switch.toggle":{if(n.type!=="running"||!Ln.devices.switches.connected())return Ql();if(sA("switches:toggle"))return;const r=t[1];Za(Ln.devices.switches.toggle(r));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return Ql();Ln.devices.keyboard.readChar(F.fromChar(t[1])),ne.set(Tn,{...n,waitingForInput:!1});return}case"screen.clean":{if(!Ln.devices.screen.connected())return Ql();Za(Ln.devices.screen.clear());return}case"printer.clean":{if(!Ln.devices.printer.connected())return Ql();Za(Ln.devices.printer.clear());return}default:return e}}async function iq(){if(Ln.devices.clock.connected())for(;ne.get(Tn).type!=="stopped";){const t=yr().clockSpeed;await et({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),Za(Ln.devices.clock.tick())}}async function sq(){if(Ln.devices.printer.connected())for(;ne.get(Tn).type!=="stopped";){const t=yr().printerSpeed;await et([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await et({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),Za(Ln.devices.printer.print())}}function mn(){const t=Xt(Tn),e=FV(),n=g.useMemo(()=>({preset:e,hasIOBus:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",clock:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",f10:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",keyboard:e==="keyboard-and-screen"||e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",handshake:e==="handshake",leds:e==="pio-switches-and-leds",pic:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",pio:e==="pio-switches-and-leds"||e==="pio-printer",printer:e==="pio-printer"||e==="handshake",screen:e==="keyboard-and-screen"||e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",switches:e==="pio-switches-and-leds",timer:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake"}),[e]);return{status:t,dispatch:rq,devices:n}}function oq({className:t}){const e=pt(),{status:n,dispatch:r}=mn(),i=g.useCallback(()=>{n.type!=="running"&&r("cpu.run","cycle-change")},[n.type,r]);eo("F7",a=>{a.preventDefault(),i()},void 0,[i]);const s=g.useCallback(()=>{n.type!=="running"&&r("cpu.run","end-of-instruction")},[n.type,r]);eo("F8",a=>{a.preventDefault(),s()},void 0,[s]);const o=g.useCallback(()=>{n.type!=="running"&&r("cpu.run","infinity")},[n.type,r]);return eo("F4",a=>{a.preventDefault(),o()},void 0,[o]),b.jsxs("div",{className:Fe("flex items-center justify-center gap-4",t),children:[b.jsxs(lM,{children:[b.jsx(cM,{asChild:!0,children:b.jsx("button",{disabled:n.type==="running",className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:n.type==="stopped"?b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"icon-[lucide--play] mr-2 h-4 w-4"}),e("control.action.start")]}):n.type==="paused"?b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"icon-[lucide--play] mr-2 h-4 w-4"}),e("control.action.continue")]}):b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"icon-[lucide--refresh-cw] mr-2 h-4 w-4 animate-spin"}),e("control.action.running")]})})}),b.jsxs(CS,{className:"w-56",align:"start",children:[b.jsxs(fl,{disabled:n.type==="running",onClick:i,children:[b.jsx("span",{className:"icon-[lucide--chevron-right] mr-2 h-4 w-4"}),e("control.action.run.cycle-change"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"F7"})]}),b.jsxs(fl,{disabled:n.type==="running",onClick:s,children:[b.jsx("span",{className:"icon-[lucide--chevrons-right] mr-2 h-4 w-4"}),e("control.action.run.end-of-instruction"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"F8"})]}),b.jsxs(fl,{disabled:n.type==="running",onClick:o,children:[b.jsx("span",{className:"icon-[lucide--infinity] mr-2 h-4 w-4"}),e("control.action.run.infinity"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"F4"})]})]})]}),b.jsxs("button",{disabled:n.type==="stopped",onClick:()=>r("cpu.stop"),className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[b.jsx("span",{className:"icon-[lucide--stop-circle] mr-2 h-4 w-4"}),e("control.action.stop")]})]})}function Mg(t,[e,n]){return Math.min(n,Math.max(e,t))}function gk(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const vk=g.forwardRef((t,e)=>g.createElement(Ge.span,we({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}))),aq=[" ","Enter","ArrowUp","ArrowDown"],lq=[" ","Enter"],Wv="Select",[Gv,yk,cq]=nh(Wv),[Ou,Rne]=Ji(Wv,[cq,Pu]),wk=Pu(),[uq,zl]=Ou(Wv),[dq,fq]=Ou(Wv),hq=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:h}=t,p=wk(e),[m,w]=g.useState(null),[v,y]=g.useState(null),[x,k]=g.useState(!1),_=rh(c),[P=!1,A]=ao({prop:r,defaultProp:i,onChange:s}),[C,N]=ao({prop:o,defaultProp:a,onChange:l}),R=g.useRef(null),M=m?!!m.closest("form"):!0,[L,H]=g.useState(new Set),T=Array.from(L).map(V=>V.props.value).join(";");return g.createElement(mS,p,g.createElement(uq,{required:h,scope:e,trigger:m,onTriggerChange:w,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:x,onValueNodeHasChildrenChange:k,contentId:Cl(),value:C,onValueChange:N,open:P,onOpenChange:A,dir:_,triggerPointerDownPosRef:R,disabled:f},g.createElement(Gv.Provider,{scope:e},g.createElement(dq,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(V=>{H(q=>new Set(q).add(V))},[]),onNativeOptionRemove:g.useCallback(V=>{H(q=>{const te=new Set(q);return te.delete(V),te})},[])},n)),M?g.createElement(GD,{key:T,"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:d,value:C,onChange:V=>N(V.target.value),disabled:f},C===void 0?g.createElement("option",{value:""}):null,Array.from(L)):null))},pq="SelectTrigger",mq=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=wk(n),o=zl(pq,n),a=o.disabled||r,l=st(e,o.onTriggerChange),c=yk(n),[u,d,f]=KD(p=>{const m=c().filter(y=>!y.disabled),w=m.find(y=>y.value===o.value),v=XD(m,p,w);v!==void 0&&o.onValueChange(v.value)}),h=()=>{a||(o.onOpenChange(!0),f())};return g.createElement(gS,we({asChild:!0},s),g.createElement(Ge.button,we({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":WD(o.value)?"":void 0},i,{ref:l,onClick:ve(i.onClick,p=>{p.currentTarget.focus()}),onPointerDown:ve(i.onPointerDown,p=>{const m=p.target;m.hasPointerCapture(p.pointerId)&&m.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(h(),o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:ve(i.onKeyDown,p=>{const m=u.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(m&&p.key===" ")&&aq.includes(p.key)&&(h(),p.preventDefault())})})))}),gq="SelectValue",vq=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=zl(gq,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=st(e,l.onValueNodeChange);return bi(()=>{c(u)},[c,u]),g.createElement(Ge.span,we({},a,{ref:d,style:{pointerEvents:"none"}}),WD(l.value)?g.createElement(g.Fragment,null,o):s)}),yq=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return g.createElement(Ge.span,we({"aria-hidden":!0},i,{ref:e}),r||"")}),wq=t=>g.createElement(Sv,we({asChild:!0},t)),mu="SelectContent",bq=g.forwardRef((t,e)=>{const n=zl(mu,t.__scopeSelect),[r,i]=g.useState();if(bi(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?vo.createPortal(g.createElement(HD,{scope:t.__scopeSelect},g.createElement(Gv.Slot,{scope:t.__scopeSelect},g.createElement("div",null,t.children))),s):null}return g.createElement(xq,we({},t,{ref:e}))}),Is=10,[HD,Kv]=Ou(mu),xq=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:w,...v}=t,y=zl(mu,n),[x,k]=g.useState(null),[_,P]=g.useState(null),A=st(e,S=>k(S)),[C,N]=g.useState(null),[R,M]=g.useState(null),L=yk(n),[H,T]=g.useState(!1),V=g.useRef(!1);g.useEffect(()=>{if(x)return yS(x)},[x]),oS();const q=g.useCallback(S=>{const[$,...D]=L().map(X=>X.ref.current),[O]=D.slice(-1),U=document.activeElement;for(const X of S)if(X===U||(X==null||X.scrollIntoView({block:"nearest"}),X===$&&_&&(_.scrollTop=0),X===O&&_&&(_.scrollTop=_.scrollHeight),X==null||X.focus(),document.activeElement!==U))return},[L,_]),te=g.useCallback(()=>q([C,x]),[q,C,x]);g.useEffect(()=>{H&&te()},[H,te]);const{onOpenChange:W,triggerPointerDownPosRef:j}=y;g.useEffect(()=>{if(x){let S={x:0,y:0};const $=O=>{var U,X,ee,J;S={x:Math.abs(Math.round(O.pageX)-((U=(X=j.current)===null||X===void 0?void 0:X.x)!==null&&U!==void 0?U:0)),y:Math.abs(Math.round(O.pageY)-((ee=(J=j.current)===null||J===void 0?void 0:J.y)!==null&&ee!==void 0?ee:0))}},D=O=>{S.x<=10&&S.y<=10?O.preventDefault():x.contains(O.target)||W(!1),document.removeEventListener("pointermove",$),j.current=null};return j.current!==null&&(document.addEventListener("pointermove",$),document.addEventListener("pointerup",D,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",$),document.removeEventListener("pointerup",D,{capture:!0})}}},[x,W,j]),g.useEffect(()=>{const S=()=>W(!1);return window.addEventListener("blur",S),window.addEventListener("resize",S),()=>{window.removeEventListener("blur",S),window.removeEventListener("resize",S)}},[W]);const[Z,K]=KD(S=>{const $=L().filter(U=>!U.disabled),D=$.find(U=>U.ref.current===document.activeElement),O=XD($,S,D);O&&setTimeout(()=>O.ref.current.focus())}),Q=g.useCallback((S,$,D)=>{const O=!V.current&&!D;(y.value!==void 0&&y.value===$||O)&&(N(S),O&&(V.current=!0))},[y.value]),ae=g.useCallback(()=>x==null?void 0:x.focus(),[x]),B=g.useCallback((S,$,D)=>{const O=!V.current&&!D;(y.value!==void 0&&y.value===$||O)&&M(S)},[y.value]),I=r==="popper"?oA:Sq,z=I===oA?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:w}:{};return g.createElement(HD,{scope:n,content:x,viewport:_,onViewportChange:P,itemRefCallback:Q,selectedItem:C,onItemLeave:ae,itemTextRefCallback:B,focusSelectedItem:te,selectedItemText:R,position:r,isPositioned:H,searchRef:Z},g.createElement(wS,{as:_l,allowPinchZoom:!0},g.createElement(aS,{asChild:!0,trapped:y.open,onMountAutoFocus:S=>{S.preventDefault()},onUnmountAutoFocus:ve(i,S=>{var $;($=y.trigger)===null||$===void 0||$.focus({preventScroll:!0}),S.preventDefault()})},g.createElement(wv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:S=>S.preventDefault(),onDismiss:()=>y.onOpenChange(!1)},g.createElement(I,we({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:S=>S.preventDefault()},v,z,{onPlaced:()=>T(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ve(v.onKeyDown,S=>{const $=S.ctrlKey||S.altKey||S.metaKey;if(S.key==="Tab"&&S.preventDefault(),!$&&S.key.length===1&&K(S.key),["ArrowUp","ArrowDown","Home","End"].includes(S.key)){let O=L().filter(U=>!U.disabled).map(U=>U.ref.current);if(["ArrowUp","End"].includes(S.key)&&(O=O.slice().reverse()),["ArrowUp","ArrowDown"].includes(S.key)){const U=S.target,X=O.indexOf(U);O=O.slice(X+1)}setTimeout(()=>q(O)),S.preventDefault()}})}))))))}),Sq=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=zl(mu,n),o=Kv(mu,n),[a,l]=g.useState(null),[c,u]=g.useState(null),d=st(e,A=>u(A)),f=yk(n),h=g.useRef(!1),p=g.useRef(!0),{viewport:m,selectedItem:w,selectedItemText:v,focusSelectedItem:y}=o,x=g.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&w&&v){const A=s.trigger.getBoundingClientRect(),C=c.getBoundingClientRect(),N=s.valueNode.getBoundingClientRect(),R=v.getBoundingClientRect();if(s.dir!=="rtl"){const U=R.left-C.left,X=N.left-U,ee=A.left-X,J=A.width+ee,ie=Math.max(J,C.width),Me=window.innerWidth-Is,he=Mg(X,[Is,Me-ie]);a.style.minWidth=J+"px",a.style.left=he+"px"}else{const U=C.right-R.right,X=window.innerWidth-N.right-U,ee=window.innerWidth-A.right-X,J=A.width+ee,ie=Math.max(J,C.width),Me=window.innerWidth-Is,he=Mg(X,[Is,Me-ie]);a.style.minWidth=J+"px",a.style.right=he+"px"}const M=f(),L=window.innerHeight-Is*2,H=m.scrollHeight,T=window.getComputedStyle(c),V=parseInt(T.borderTopWidth,10),q=parseInt(T.paddingTop,10),te=parseInt(T.borderBottomWidth,10),W=parseInt(T.paddingBottom,10),j=V+q+H+W+te,Z=Math.min(w.offsetHeight*5,j),K=window.getComputedStyle(m),Q=parseInt(K.paddingTop,10),ae=parseInt(K.paddingBottom,10),B=A.top+A.height/2-Is,I=L-B,z=w.offsetHeight/2,S=w.offsetTop+z,$=V+q+S,D=j-$;if($<=B){const U=w===M[M.length-1].ref.current;a.style.bottom="0px";const X=c.clientHeight-m.offsetTop-m.offsetHeight,ee=Math.max(I,z+(U?ae:0)+X+te),J=$+ee;a.style.height=J+"px"}else{const U=w===M[0].ref.current;a.style.top="0px";const ee=Math.max(B,V+m.offsetTop+(U?Q:0)+z)+D;a.style.height=ee+"px",m.scrollTop=$-B+m.offsetTop}a.style.margin=`${Is}px 0`,a.style.minHeight=Z+"px",a.style.maxHeight=L+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,w,v,s.dir,r]);bi(()=>x(),[x]);const[k,_]=g.useState();bi(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const P=g.useCallback(A=>{A&&p.current===!0&&(x(),y==null||y(),p.current=!1)},[x,y]);return g.createElement(kq,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:h,onScrollButtonChange:P},g.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k}},g.createElement(Ge.div,we({},i,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}}))))}),oA=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Is,...s}=t,o=wk(n);return g.createElement(vS,we({},o,s,{ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[kq,_q]=Ou(mu,{}),aA="SelectViewport",Cq=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Kv(aA,n),s=_q(aA,n),o=st(e,i.onViewportChange),a=g.useRef(0);return g.createElement(g.Fragment,null,g.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),g.createElement(Gv.Slot,{scope:n},g.createElement(Ge.div,we({"data-radix-select-viewport":"",role:"presentation"},r,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:ve(r.onScroll,l=>{const c=l.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&u){const f=Math.abs(a.current-c.scrollTop);if(f>0){const h=window.innerHeight-Is*2,p=parseFloat(u.style.minHeight),m=parseFloat(u.style.height),w=Math.max(p,m);if(w<h){const v=w+f,y=Math.min(h,v),x=v-y;u.style.height=y+"px",u.style.bottom==="0px"&&(c.scrollTop=x>0?x:0,u.style.justifyContent="flex-end")}}}a.current=c.scrollTop})}))))}),Eq="SelectGroup";Ou(Eq);const g1="SelectItem",[Aq,Pq]=Ou(g1),$q=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=zl(g1,n),l=Kv(g1,n),c=a.value===r,[u,d]=g.useState(s??""),[f,h]=g.useState(!1),p=st(e,v=>{var y;return(y=l.itemRefCallback)===null||y===void 0?void 0:y.call(l,v,r,i)}),m=Cl(),w=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g.createElement(Aq,{scope:n,value:r,disabled:i,textId:m,isSelected:c,onItemTextChange:g.useCallback(v=>{d(y=>{var x;return y||((x=v==null?void 0:v.textContent)!==null&&x!==void 0?x:"").trim()})},[])},g.createElement(Gv.ItemSlot,{scope:n,value:r,disabled:i,textValue:u},g.createElement(Ge.div,we({role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},o,{ref:p,onFocus:ve(o.onFocus,()=>h(!0)),onBlur:ve(o.onBlur,()=>h(!1)),onPointerUp:ve(o.onPointerUp,w),onPointerMove:ve(o.onPointerMove,v=>{if(i){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}else v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ve(o.onPointerLeave,v=>{if(v.currentTarget===document.activeElement){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}}),onKeyDown:ve(o.onKeyDown,v=>{var y;((y=l.searchRef)===null||y===void 0?void 0:y.current)!==""&&v.key===" "||(lq.includes(v.key)&&w(),v.key===" "&&v.preventDefault())})}))))}),yp="SelectItemText",Tq=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=zl(yp,n),a=Kv(yp,n),l=Pq(yp,n),c=fq(yp,n),[u,d]=g.useState(null),f=st(e,v=>d(v),l.onItemTextChange,v=>{var y;return(y=a.itemTextRefCallback)===null||y===void 0?void 0:y.call(a,v,l.value,l.disabled)}),h=u==null?void 0:u.textContent,p=g.useMemo(()=>g.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},h),[l.disabled,l.value,h]),{onNativeOptionAdd:m,onNativeOptionRemove:w}=c;return bi(()=>(m(p),()=>w(p)),[m,w,p]),g.createElement(g.Fragment,null,g.createElement(Ge.span,we({id:l.textId},s,{ref:f})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?vo.createPortal(s.children,o.valueNode):null)});function WD(t){return t===""||t===void 0}const GD=g.forwardRef((t,e)=>{const{value:n,...r}=t,i=g.useRef(null),s=st(e,i),o=gk(n);return g.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&u){const d=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[o,n]),g.createElement(vk,{asChild:!0},g.createElement("select",we({},r,{ref:s,defaultValue:n})))});GD.displayName="BubbleSelect";function KD(t){const e=er(t),n=g.useRef(""),r=g.useRef(0),i=g.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function XD(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Oq(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Oq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const Nq=hq,qD=mq,Rq=vq,Mq=yq,Dq=wq,YD=bq,Iq=Cq,JD=$q,Lq=Tq,R0=Nq,M0=Rq,vm=g.forwardRef(({className:t,children:e,...n},r)=>b.jsxs(qD,{ref:r,className:Fe("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,b.jsx(Mq,{asChild:!0,children:b.jsx("span",{className:"icon-[lucide--chevron-down] h-4 w-4 opacity-50"})})]}));vm.displayName=qD.displayName;const ym=g.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>b.jsx(Dq,{children:b.jsx(YD,{ref:i,className:Fe("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...r,children:b.jsx(Iq,{className:"p-1",children:e})})}));ym.displayName=YD.displayName;const wd=g.forwardRef(({className:t,children:e,...n},r)=>b.jsx(JD,{ref:r,className:Fe("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:b.jsx(Lq,{children:e})}));wd.displayName=JD.displayName;const ZD=["PageUp","PageDown"],QD=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],eI={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},gh="Slider",[v1,Bq,Fq]=nh(gh),[tI,Mne]=Ji(gh,[Fq]),[jq,Xv]=tI(gh),zq=g.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:h=!1,...p}=t,[m,w]=g.useState(null),v=st(e,T=>w(T)),y=g.useRef(new Set),x=g.useRef(0),k=o==="horizontal",_=m?!!m.closest("form"):!0,P=k?Uq:Vq,[A=[],C]=ao({prop:u,defaultProp:c,onChange:T=>{var V;(V=[...y.current][x.current])===null||V===void 0||V.focus(),d(T)}}),N=g.useRef(A);function R(T){const V=Zq(A,T);H(T,V)}function M(T){H(T,x.current)}function L(){const T=N.current[x.current];A[x.current]!==T&&f(A)}function H(T,V,{commit:q}={commit:!1}){const te=nY(s),W=rY(Math.round((T-r)/s)*s+r,te),j=Mg(W,[r,i]);C((Z=[])=>{const K=Yq(Z,j,V);if(tY(K,l*s)){x.current=K.indexOf(j);const Q=String(K)!==String(Z);return Q&&q&&f(K),Q?K:Z}else return Z})}return g.createElement(jq,{scope:t.__scopeSlider,disabled:a,min:r,max:i,valueIndexToChangeRef:x,thumbs:y.current,values:A,orientation:o},g.createElement(v1.Provider,{scope:t.__scopeSlider},g.createElement(v1.Slot,{scope:t.__scopeSlider},g.createElement(P,bt({"aria-disabled":a,"data-disabled":a?"":void 0},p,{ref:v,onPointerDown:ve(p.onPointerDown,()=>{a||(N.current=A)}),min:r,max:i,inverted:h,onSlideStart:a?void 0:R,onSlideMove:a?void 0:M,onSlideEnd:a?void 0:L,onHomeKeyDown:()=>!a&&H(r,0,{commit:!0}),onEndKeyDown:()=>!a&&H(i,A.length-1,{commit:!0}),onStepKeyDown:({event:T,direction:V})=>{if(!a){const W=ZD.includes(T.key)||T.shiftKey&&QD.includes(T.key)?10:1,j=x.current,Z=A[j],K=s*W*V;H(Z+K,j,{commit:!0})}}})))),_&&A.map((T,V)=>g.createElement(qq,{key:V,name:n?n+(A.length>1?"[]":""):void 0,value:T})))}),[nI,rI]=tI(gh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Uq=g.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=g.useState(null),h=st(e,x=>f(x)),p=g.useRef(),m=rh(i),w=m==="ltr",v=w&&!s||!w&&s;function y(x){const k=p.current||d.getBoundingClientRect(),_=[0,k.width],A=bk(_,v?[n,r]:[r,n]);return p.current=k,A(x-k.left)}return g.createElement(nI,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width"},g.createElement(iI,bt({dir:m,"data-orientation":"horizontal"},u,{ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const k=y(x.clientX);o==null||o(k)},onSlideMove:x=>{const k=y(x.clientX);a==null||a(k)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:x=>{const _=eI[v?"from-left":"from-right"].includes(x.key);c==null||c({event:x,direction:_?-1:1})}})))}),Vq=g.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=g.useRef(null),d=st(e,u),f=g.useRef(),h=!i;function p(m){const w=f.current||u.current.getBoundingClientRect(),v=[0,w.height],x=bk(v,h?[r,n]:[n,r]);return f.current=w,x(m-w.top)}return g.createElement(nI,{scope:t.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1},g.createElement(iI,bt({"data-orientation":"vertical"},c,{ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const w=p(m.clientY);s==null||s(w)},onSlideMove:m=>{const w=p(m.clientY);o==null||o(w)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:m=>{const v=eI[h?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:v?-1:1})}})))}),iI=g.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=Xv(gh,n);return g.createElement(Ge.span,bt({},c,{ref:e,onKeyDown:ve(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):ZD.concat(QD).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ve(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():r(d)}),onPointerMove:ve(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:ve(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})}))}),Hq="SliderTrack",Wq=g.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Xv(Hq,n);return g.createElement(Ge.span,bt({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},r,{ref:e}))}),lA="SliderRange",Gq=g.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Xv(lA,n),s=rI(lA,n),o=g.useRef(null),a=st(e,o),l=i.values.length,c=i.values.map(f=>sI(f,i.min,i.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return g.createElement(Ge.span,bt({"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0},r,{ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}}))}),cA="SliderThumb",Kq=g.forwardRef((t,e)=>{const n=Bq(t.__scopeSlider),[r,i]=g.useState(null),s=st(e,a=>i(a)),o=g.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return g.createElement(Xq,bt({},t,{ref:s,index:o}))}),Xq=g.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,...i}=t,s=Xv(cA,n),o=rI(cA,n),[a,l]=g.useState(null),c=st(e,w=>l(w)),u=pS(a),d=s.values[r],f=d===void 0?0:sI(d,s.min,s.max),h=Jq(r,s.values.length),p=u==null?void 0:u[o.size],m=p?Qq(p,f,o.direction):0;return g.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),g.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${f}% + ${m}px)`}},g.createElement(v1.ItemSlot,{scope:t.__scopeSlider},g.createElement(Ge.span,bt({role:"slider","aria-label":t["aria-label"]||h,"aria-valuemin":s.min,"aria-valuenow":d,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},i,{ref:c,style:d===void 0?{display:"none"}:t.style,onFocus:ve(t.onFocus,()=>{s.valueIndexToChangeRef.current=r})}))))}),qq=t=>{const{value:e,...n}=t,r=g.useRef(null),i=gk(e);return g.useEffect(()=>{const s=r.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==e&&l){const c=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(c)}},[i,e]),g.createElement("input",bt({style:{display:"none"}},n,{ref:r,defaultValue:e}))};function Yq(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function sI(t,e,n){const s=100/(n-e)*(t-e);return Mg(s,[0,100])}function Jq(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Zq(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function Qq(t,e,n){const r=t/2,s=bk([0,50],[0,r]);return(r-s(e)*n)*n}function eY(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function tY(t,e){if(e>0){const n=eY(t);return Math.min(...n)>=e}return!0}function bk(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function nY(t){return(String(t).split(".")[1]||"").length}function rY(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const oI=zq,iY=Wq,sY=Gq,oY=Kq,Ga=g.forwardRef(({className:t,...e},n)=>b.jsxs(oI,{ref:n,className:Fe("relative flex touch-none select-none items-center",t),...e,children:[b.jsx(iY,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:b.jsx(sY,{className:"absolute h-full bg-mantis-400"})}),b.jsx(oY,{className:"block h-5 w-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Ga.displayName=oI.displayName;const aI="Switch",[aY,Dne]=Ji(aI),[lY,cY]=aY(aI),uY=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,...u}=t,[d,f]=g.useState(null),h=st(e,y=>f(y)),p=g.useRef(!1),m=d?!!d.closest("form"):!0,[w=!1,v]=ao({prop:i,defaultProp:s,onChange:c});return g.createElement(lY,{scope:n,checked:w,disabled:a},g.createElement(Ge.button,bt({type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":lI(w),"data-disabled":a?"":void 0,disabled:a,value:l},u,{ref:h,onClick:ve(t.onClick,y=>{v(x=>!x),m&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})})),m&&g.createElement(hY,{control:d,bubbles:!p.current,name:r,value:l,checked:w,required:o,disabled:a,style:{transform:"translateX(-100%)"}}))}),dY="SwitchThumb",fY=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=cY(dY,n);return g.createElement(Ge.span,bt({"data-state":lI(i.checked),"data-disabled":i.disabled?"":void 0},r,{ref:e}))}),hY=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,s=g.useRef(null),o=gk(n),a=pS(e);return g.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&d){const f=new Event("click",{bubbles:r});d.call(l,n),l.dispatchEvent(f)}},[o,n,r]),g.createElement("input",bt({type:"checkbox","aria-hidden":!0,defaultChecked:n},i,{tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function lI(t){return t?"checked":"unchecked"}const cI=uY,pY=fY,Dg=g.forwardRef(({className:t,...e},n)=>b.jsx(cI,{className:Fe("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:b.jsx(pY,{className:Fe("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Dg.displayName=cI.displayName;const xk=Ae(!1);function uI({className:t}){const e=pt(),[n,r]=SM(),{status:i}=mn();return b.jsxs("div",{className:Fe("overflow-auto scrollbar-stone-700",t),children:[b.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[b.jsx("span",{className:"icon-[lucide--settings] h-6 w-6"})," ",e("settings.title")]}),b.jsxs(Os,{children:[b.jsx(Ns,{children:b.jsxs(Rs,{children:[b.jsx("span",{className:"icon-[lucide--languages] h-6 w-6"}),e("settings.language.label")]})}),b.jsxs(R0,{value:n.language,onValueChange:s=>r(o=>({...o,language:s})),children:[b.jsx(vm,{className:"w-32",children:b.jsx(M0,{})}),b.jsxs(ym,{children:[b.jsx(wd,{value:"en",children:b.jsxs("span",{className:"inline-flex items-center gap-2",children:[b.jsx("span",{className:"icon-[circle-flags--uk] h-4 w-4"})," English"]})}),b.jsx(wd,{value:"es",children:b.jsxs("span",{className:"inline-flex items-center gap-2",children:[b.jsx("span",{className:"icon-[circle-flags--ar] h-4 w-4"})," Espaol"]})})]})]})]}),b.jsxs(Os,{children:[b.jsx(Ns,{children:b.jsxs(Rs,{children:[b.jsx("span",{className:"icon-[lucide--pilcrow-square] h-6 w-6"}),e("settings.editorFontSize.label")]})}),b.jsxs("div",{className:"flex items-center rounded-lg border border-stone-600 bg-stone-900",children:[b.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize<=8,onClick:()=>r(s=>({...s,editorFontSize:s.editorFontSize-1})),title:e("settings.editorFontSize.decrease"),children:b.jsx("span",{className:"icon-[lucide--minus] h-4 w-4"})}),b.jsx("span",{className:"w-8 text-center text-sm font-normal",children:n.editorFontSize}),b.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize>=64,onClick:()=>r(s=>({...s,editorFontSize:s.editorFontSize+1})),title:e("settings.editorFontSize.increase"),children:b.jsx("span",{className:"icon-[lucide--plus] h-4 w-4"})})]})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs(Os,{children:[b.jsxs(Ns,{children:[b.jsxs(Rs,{children:[b.jsx("span",{className:"icon-[lucide--memory-stick] h-6 w-6"}),e("settings.dataOnLoad.label")]}),b.jsx(wp,{children:e("settings.dataOnLoad.description")})]}),b.jsxs(R0,{value:n.dataOnLoad,onValueChange:s=>r(o=>({...o,dataOnLoad:s})),children:[b.jsx(vm,{className:"w-32 min-w-[theme(width.32)]",children:b.jsx(M0,{})}),b.jsx(ym,{children:bM.map(s=>b.jsx(wd,{value:s,children:e(`settings.dataOnLoad.${s}`)},s))})]})]}),b.jsxs(Os,{children:[b.jsxs(Ns,{children:[b.jsxs(Rs,{children:[b.jsx("span",{className:"icon-[lucide--monitor-smartphone] h-6 w-6"}),e("settings.devices.label")]}),b.jsx(wp,{children:e("settings.devices.description")})]}),b.jsxs(R0,{value:n.devices,onValueChange:s=>r(o=>({...o,devices:s})),disabled:i.type!=="stopped",children:[b.jsx(vm,{className:"w-52 min-w-[theme(width.52)]",children:b.jsx(M0,{})}),b.jsx(ym,{children:xM.map(s=>b.jsx(wd,{value:s,children:e(`settings.devices.${s}`)},s))})]})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs(Os,{children:[b.jsxs(Ns,{children:[b.jsxs(Rs,{children:[b.jsx("span",{className:"icon-[lucide--rotate-3d] h-6 w-6"}),e("settings.animations.label")]}),b.jsx(wp,{children:e("settings.animations.description")})]}),b.jsx(Dg,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{r(o=>({...o,animations:s})),s===!1&&pD()}})]}),b.jsxs(Os,{children:[b.jsx(Ns,{children:b.jsxs(Rs,{children:[b.jsx("span",{className:"icon-[lucide--gauge] h-6 w-6"}),e("settings.speeds.executionUnit")]})}),b.jsx(Ga,{className:"w-44",...D0({value:n.executionUnit,onValueChange:s=>r(o=>({...o,executionUnit:s})),min:500,max:1})})]}),b.jsxs(Os,{children:[b.jsx(Ns,{children:b.jsxs(Rs,{children:[b.jsx("span",{className:"icon-[lucide--clock] h-6 w-6"}),e("settings.speeds.clockSpeed")]})}),b.jsx(Ga,{className:"w-44",...D0({value:n.clockSpeed,onValueChange:s=>r(o=>({...o,clockSpeed:s})),min:3e3,max:100})})]}),b.jsxs(Os,{children:[b.jsx(Ns,{children:b.jsxs(Rs,{children:[b.jsx("span",{className:"icon-[lucide--printer] h-6 w-6"}),e("settings.speeds.printerSpeed")]})}),b.jsx(Ga,{className:"w-44",...D0({value:n.printerSpeed,onValueChange:s=>r(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs(Os,{children:[b.jsxs(Ns,{children:[b.jsxs(Rs,{children:[b.jsx("span",{className:"icon-[lucide--contrast] h-6 w-6"}),e("settings.filters.label")]}),b.jsxs(wp,{children:[e("settings.filters.description"),b.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>r(s=>({...s,filterBightness:nc.filterBightness,filterContrast:nc.filterContrast,filterInvert:nc.filterInvert,filterSaturation:nc.filterSaturation})),children:e("settings.filters.revert")})]})]}),b.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[b.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),b.jsx(Ga,{value:[n.filterBightness],onValueChange:([s])=>r(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),b.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),b.jsx(Ga,{value:[n.filterContrast],onValueChange:([s])=>r(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),b.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),b.jsx(Dg,{checked:n.filterInvert,onCheckedChange:s=>r(o=>({...o,filterInvert:s}))}),b.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),b.jsx(Ga,{value:[n.filterSaturation],onValueChange:([s])=>r(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("div",{className:"flex justify-end p-4",children:b.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>r(s=>({...nc,language:s.language,devices:s.devices})),children:[b.jsx("span",{className:"icon-[lucide--trash-2] h-4 w-4"}),e("settings.reset")]})})]})}function Os({children:t}){return b.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Ns({children:t}){return b.jsx("div",{className:"grow",children:t})}function Rs({children:t}){return b.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function wp({children:t}){return b.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function D0({value:t,onValueChange:e,min:n,max:r}){const i=Math.log(n),o=(Math.log(r)-i)/100;return{value:[(Math.log(t)-i)/o],onValueChange:a=>e(Math.exp(i+o*a[0])),min:0,max:100}}function mY(){const t=pt(),[e,n]=Cu(xk);return b.jsxs("header",{className:"relative p-2 text-sm text-white",children:[b.jsx(oq,{className:" absolute inset-0"}),b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex select-none items-center justify-center",children:[b.jsx("img",{src:"/favicon.svg",className:"mr-2 h-10 w-10"}),b.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",b.jsx("span",{className:"text-mantis-400",children:"Sim"})]})]}),b.jsx("button",{className:Fe("h-min w-min rounded-full p-2 transition-colors focus:outline-stone-400",e?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:t("settings.title"),onClick:()=>n(!e),children:b.jsx("span",{className:"icon-[lucide--settings] block h-6 w-6"})})]})]})}const dI="ToastProvider",[Sk,gY,vY]=nh("Toast"),[fI,Ine]=Ji("Toast",[vY]),[yY,qv]=fI(dI),hI=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=g.useState(null),[c,u]=g.useState(0),d=g.useRef(!1),f=g.useRef(!1);return g.createElement(Sk.Provider,{scope:e},g.createElement(yY,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:g.useCallback(()=>u(h=>h+1),[]),onToastRemove:g.useCallback(()=>u(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f},o))};hI.propTypes={label(t){if(t.label&&typeof t.label=="string"&&!t.label.trim()){const e=`Invalid prop \`label\` supplied to \`${dI}\`. Expected non-empty \`string\`.`;return new Error(e)}return null}};const wY="ToastViewport",bY=["F8"],y1="toast.viewportPause",w1="toast.viewportResume",xY=g.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=bY,label:i="Notifications ({hotkey})",...s}=t,o=qv(wY,n),a=gY(n),l=g.useRef(null),c=g.useRef(null),u=g.useRef(null),d=g.useRef(null),f=st(e,d,o.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;g.useEffect(()=>{const w=v=>{var y;r.every(k=>v[k]||v.code===k)&&((y=d.current)===null||y===void 0||y.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),g.useEffect(()=>{const w=l.current,v=d.current;if(p&&w&&v){const y=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(y1);v.dispatchEvent(P),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(w1);v.dispatchEvent(P),o.isClosePausedRef.current=!1}},k=P=>{!w.contains(P.relatedTarget)&&x()},_=()=>{w.contains(document.activeElement)||x()};return w.addEventListener("focusin",y),w.addEventListener("focusout",k),w.addEventListener("pointermove",y),w.addEventListener("pointerleave",_),window.addEventListener("blur",y),window.addEventListener("focus",x),()=>{w.removeEventListener("focusin",y),w.removeEventListener("focusout",k),w.removeEventListener("pointermove",y),w.removeEventListener("pointerleave",_),window.removeEventListener("blur",y),window.removeEventListener("focus",x)}}},[p,o.isClosePausedRef]);const m=g.useCallback(({tabbingDirection:w})=>{const y=a().map(x=>{const k=x.ref.current,_=[k,...LY(k)];return w==="forwards"?_:_.reverse()});return(w==="forwards"?y.reverse():y).flat()},[a]);return g.useEffect(()=>{const w=d.current;if(w){const v=y=>{const x=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!x){const C=document.activeElement,N=y.shiftKey;if(y.target===w&&N){var _;(_=c.current)===null||_===void 0||_.focus();return}const L=m({tabbingDirection:N?"backwards":"forwards"}),H=L.findIndex(T=>T===C);if(I0(L.slice(H+1)))y.preventDefault();else{var P,A;N?(P=c.current)===null||P===void 0||P.focus():(A=u.current)===null||A===void 0||A.focus()}}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[a,m]),g.createElement(M7,{ref:l,role:"region","aria-label":i.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:p?void 0:"none"}},p&&g.createElement(uA,{ref:c,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"forwards"});I0(w)}}),g.createElement(Sk.Slot,{scope:n},g.createElement(Ge.ol,we({tabIndex:-1},s,{ref:f}))),p&&g.createElement(uA,{ref:u,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"backwards"});I0(w)}}))}),SY="ToastFocusProxy",uA=g.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=qv(SY,n);return g.createElement(vk,we({"aria-hidden":!0,tabIndex:0},i,{ref:e,style:{position:"fixed"},onFocus:o=>{var a;const l=o.relatedTarget;!((a=s.viewport)!==null&&a!==void 0&&a.contains(l))&&r()}}))}),Yv="Toast",kY="toast.swipeStart",_Y="toast.swipeMove",CY="toast.swipeCancel",EY="toast.swipeEnd",AY=g.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a=!0,l]=ao({prop:r,defaultProp:i,onChange:s});return g.createElement(yo,{present:n||a},g.createElement(pI,we({open:a},o,{ref:e,onClose:()=>l(!1),onPause:er(t.onPause),onResume:er(t.onResume),onSwipeStart:ve(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ve(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ve(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ve(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})))}),[PY,$Y]=fI(Yv,{onClose(){}}),pI=g.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:h,...p}=t,m=qv(Yv,n),[w,v]=g.useState(null),y=st(e,T=>v(T)),x=g.useRef(null),k=g.useRef(null),_=i||m.duration,P=g.useRef(0),A=g.useRef(_),C=g.useRef(0),{onToastAdd:N,onToastRemove:R}=m,M=er(()=>{var T;(w==null?void 0:w.contains(document.activeElement))&&((T=m.viewport)===null||T===void 0||T.focus()),o()}),L=g.useCallback(T=>{!T||T===1/0||(window.clearTimeout(C.current),P.current=new Date().getTime(),C.current=window.setTimeout(M,T))},[M]);g.useEffect(()=>{const T=m.viewport;if(T){const V=()=>{L(A.current),c==null||c()},q=()=>{const te=new Date().getTime()-P.current;A.current=A.current-te,window.clearTimeout(C.current),l==null||l()};return T.addEventListener(y1,q),T.addEventListener(w1,V),()=>{T.removeEventListener(y1,q),T.removeEventListener(w1,V)}}},[m.viewport,_,l,c,L]),g.useEffect(()=>{s&&!m.isClosePausedRef.current&&L(_)},[s,_,m.isClosePausedRef,L]),g.useEffect(()=>(N(),()=>R()),[N,R]);const H=g.useMemo(()=>w?yI(w):null,[w]);return m.viewport?g.createElement(g.Fragment,null,H&&g.createElement(TY,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0},H),g.createElement(PY,{scope:n,onClose:M},vo.createPortal(g.createElement(Sk.ItemSlot,{scope:n},g.createElement(R7,{asChild:!0,onEscapeKeyDown:ve(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||M(),m.isFocusedToastEscapeKeyDownRef.current=!1})},g.createElement(Ge.li,we({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection},p,{ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ve(t.onKeyDown,T=>{T.key==="Escape"&&(a==null||a(T.nativeEvent),T.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:ve(t.onPointerDown,T=>{T.button===0&&(x.current={x:T.clientX,y:T.clientY})}),onPointerMove:ve(t.onPointerMove,T=>{if(!x.current)return;const V=T.clientX-x.current.x,q=T.clientY-x.current.y,te=!!k.current,W=["left","right"].includes(m.swipeDirection),j=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,Z=W?j(0,V):0,K=W?0:j(0,q),Q=T.pointerType==="touch"?10:2,ae={x:Z,y:K},B={originalEvent:T,delta:ae};te?(k.current=ae,bp(_Y,d,B,{discrete:!1})):dA(ae,m.swipeDirection,Q)?(k.current=ae,bp(kY,u,B,{discrete:!1}),T.target.setPointerCapture(T.pointerId)):(Math.abs(V)>Q||Math.abs(q)>Q)&&(x.current=null)}),onPointerUp:ve(t.onPointerUp,T=>{const V=k.current,q=T.target;if(q.hasPointerCapture(T.pointerId)&&q.releasePointerCapture(T.pointerId),k.current=null,x.current=null,V){const te=T.currentTarget,W={originalEvent:T,delta:V};dA(V,m.swipeDirection,m.swipeThreshold)?bp(EY,h,W,{discrete:!0}):bp(CY,f,W,{discrete:!0}),te.addEventListener("click",j=>j.preventDefault(),{once:!0})}})})))),m.viewport))):null});pI.propTypes={type(t){if(t.type&&!["foreground","background"].includes(t.type)){const e=`Invalid prop \`type\` supplied to \`${Yv}\`. Expected \`foreground | background\`.`;return new Error(e)}return null}};const TY=t=>{const{__scopeToast:e,children:n,...r}=t,i=qv(Yv,e),[s,o]=g.useState(!1),[a,l]=g.useState(!1);return DY(()=>o(!0)),g.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:g.createElement(Sv,{asChild:!0},g.createElement(vk,r,s&&g.createElement(g.Fragment,null,i.label," ",n)))},OY=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return g.createElement(Ge.div,we({},r,{ref:e}))}),NY=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return g.createElement(Ge.div,we({},r,{ref:e}))}),RY="ToastAction",mI=g.forwardRef((t,e)=>{const{altText:n,...r}=t;return n?g.createElement(vI,{altText:n,asChild:!0},g.createElement(gI,we({},r,{ref:e}))):null});mI.propTypes={altText(t){return t.altText?null:new Error(`Missing prop \`altText\` expected on \`${RY}\``)}};const MY="ToastClose",gI=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=$Y(MY,n);return g.createElement(vI,{asChild:!0},g.createElement(Ge.button,we({type:"button"},r,{ref:e,onClick:ve(t.onClick,i.onClose)})))}),vI=g.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return g.createElement(Ge.div,we({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0},i,{ref:e}))});function yI(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),IY(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...yI(r))}}),e}function bp(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Ux(i,s):i.dispatchEvent(s)}const dA=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function DY(t=()=>{}){const e=er(t);bi(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function IY(t){return t.nodeType===t.ELEMENT_NODE}function LY(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function I0(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}const BY=hI,wI=xY,bI=AY,xI=OY,SI=NY,kI=mI,_I=gI,FY=BY,CI=g.forwardRef(({className:t,...e},n)=>b.jsx(wI,{ref:n,className:Fe("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));CI.displayName=wI.displayName;const EI=g.forwardRef(({className:t,variant:e="default",...n},r)=>b.jsx(bI,{ref:r,"data-variant":e,className:Fe("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-bottom-full data-[state=open]:slide-in-from-top-full",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"group bg-red-900 text-red-50",t),...n}));EI.displayName=bI.displayName;const AI=g.forwardRef(({className:t,...e},n)=>b.jsx(kI,{ref:n,className:Fe("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));AI.displayName=kI.displayName;const PI=g.forwardRef(({className:t,...e},n)=>b.jsx(_I,{ref:n,className:Fe("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-data-[variant=error]:text-red-300 group-data-[variant=error]:hover:text-red-50 group-data-[variant=error]:focus:ring-red-400 group-data-[variant=error]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:b.jsx("span",{className:"icon-[lucide--x] block h-4 w-4"})}));PI.displayName=_I.displayName;const $I=g.forwardRef(({className:t,...e},n)=>b.jsx(xI,{ref:n,className:Fe("text-sm font-semibold",t),...e}));$I.displayName=xI.displayName;const TI=g.forwardRef(({className:t,...e},n)=>b.jsx(SI,{ref:n,className:Fe("text-sm opacity-90",t),...e}));TI.displayName=SI.displayName;var ui=function(t,e){return Number(t.toFixed(e))},jY=function(t,e){return typeof t=="number"?t:e},Rt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},zY=function(t){return-Math.cos(t*Math.PI)/2+.5},UY=function(t){return t},VY=function(t){return t*t},HY=function(t){return t*(2-t)},WY=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},GY=function(t){return t*t*t},KY=function(t){return--t*t*t+1},XY=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},qY=function(t){return t*t*t*t},YY=function(t){return 1- --t*t*t*t},JY=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},ZY=function(t){return t*t*t*t*t},QY=function(t){return 1+--t*t*t*t*t},eJ=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},OI={easeOut:zY,linear:UY,easeInQuad:VY,easeOutQuad:HY,easeInOutQuad:WY,easeInCubic:GY,easeOutCubic:KY,easeInOutCubic:XY,easeInQuart:qY,easeOutQuart:YY,easeInOutQuart:JY,easeInQuint:ZY,easeOutQuint:QY,easeInOutQuint:eJ},NI=function(t){typeof t=="number"&&cancelAnimationFrame(t)},ys=function(t){t.mounted&&(NI(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function RI(t,e,n,r){if(t.mounted){var i=new Date().getTime(),s=1;ys(t),t.animation=function(){if(!t.mounted)return NI(t.animation);var o=new Date().getTime()-i,a=o/n,l=OI[e],c=l(a);o>=n?(r(s),t.animation=null):t.animation&&(r(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function tJ(t){var e=t.scale,n=t.positionX,r=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(r))}function Da(t,e,n,r){var i=tJ(e);if(!(!t.mounted||!i)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,f=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):RI(t,r,n,function(h){var p=a+u*h,m=l+d*h,w=c+f*h;s(p,m,w)})}}function nJ(t,e,n){var r=t.offsetWidth,i=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=r-a,u=i-l;return{wrapperWidth:r,wrapperHeight:i,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var rJ=function(t,e,n,r,i,s,o){var a=t>e?n*(o?1:.5):0,l=r>i?s*(o?1:.5):0,c=t-e-a,u=a,d=r-i-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},kk=function(t,e){var n=t.wrapperComponent,r=t.contentComponent,i=t.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var s=nJ(n,r,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,f=rJ(o,l,c,a,u,d,!!i);return f},b1=function(t,e,n,r){return r?t<e?ui(e,2):t>n?ui(n,2):ui(t,2):ui(t,2)},gu=function(t,e){var n=kk(t,e);return t.bounds=n,n};function Jv(t,e,n,r,i,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;o&&(d=i,f=s);var h=b1(t,a-d,c+d,r),p=b1(e,l-f,u+f,r);return{x:h,y:p}}function Zv(t,e,n,r,i,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=r-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,f=c-n*u,h=Jv(d,f,i,s,0,0,null);return h}function vh(t,e,n,r,i){var s=i?r:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var fA=function(t,e){var n=t.setup.panning.excluded,r=t.isInitialized,i=t.wrapperComponent,s=e.target,o=i==null?void 0:i.contains(s),a=r&&s&&o;if(!a)return!1;var l=Qv(s,n);return!l},hA=function(t){var e=t.isInitialized,n=t.isPanning,r=t.setup,i=r.panning.disabled,s=e&&n&&!i;return!!s},iJ=function(t,e){var n=t.transformState,r=n.positionX,i=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-r,y:o-i}},sJ=function(t,e){var n=e.touches,r=t.transformState,i=r.positionX,s=r.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-i,y:l-s}}};function oJ(t){var e=t.transformState,n=e.positionX,r=e.positionY,i=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,f=u.minPositionX,h=u.maxPositionY,p=u.minPositionY,m=n>d||n<f,w=r>h||r<p,v=n>d?c.offsetWidth:t.setup.minPositionX||0,y=r>h?c.offsetHeight:t.setup.minPositionY||0,x=Zv(t,v,y,i,t.bounds,a||l),k=x.x,_=x.y;return{scale:i,positionX:m?k:n,positionY:w?_:r}}}function aJ(t,e,n,r,i){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var f=Jv(e,n,a,s,r,i,o),h=f.x,p=f.y;t.setTransformState(c,h,p)}}var lJ=function(t,e,n){var r=t.startCoords,i=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=i.positionX,c=i.positionY;if(!r)return{x:l,y:c};var u=e-r.x,d=n-r.y,f=o?l:u,h=a?c:d;return{x:f,y:h}},Ig=function(t,e){var n=t.setup,r=t.transformState,i=r.scale,s=n.minScale,o=n.disablePadding;return e>0&&i>=s&&!o?e:0},cJ=function(t){var e=t.mounted,n=t.setup,r=n.disabled,i=n.velocityAnimation,s=t.transformState.scale,o=i.disabled,a=!o||s>1||!r||e;return!!a},uJ=function(t){var e=t.mounted,n=t.velocity,r=t.bounds,i=t.setup,s=i.disabled,o=i.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!r)};function dJ(t,e){var n=t.setup.velocityAnimation,r=n.equalToMove,i=n.animationTime,s=n.sensitivity;return r?i*e*s:i}function pA(t,e,n,r,i,s,o,a,l,c){if(i){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return r?e:b1(t,s,o,i)}function fJ(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function hJ(t,e){var n=cJ(t);if(n){var r=t.lastMousePosition,i=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(r&&i&&o){var c=fJ(o,a),u=e.x-r.x,d=e.y-r.y,f=u/c,h=d/c,p=l-i,m=u*u+d*d,w=Math.sqrt(m)/p;t.velocity={velocityX:f,velocityY:h,total:w}}t.lastMousePosition=e,t.velocityTime=l}}function pJ(t){var e=t.velocity,n=t.bounds,r=t.setup,i=t.wrapperComponent,s=uJ(t);if(!(!s||!e||!n||!i)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,h=r.limitToBounds,p=r.alignmentAnimation,m=r.zoomAnimation,w=r.panning,v=w.lockAxisY,y=w.lockAxisX,x=m.animationType,k=p.sizeX,_=p.sizeY,P=p.velocityAlignmentTime,A=P,C=dJ(t,l),N=Math.max(C,A),R=Ig(t,k),M=Ig(t,_),L=R*i.offsetWidth/100,H=M*i.offsetHeight/100,T=c+L,V=u-L,q=d+H,te=f-H,W=t.transformState,j=new Date().getTime();RI(t,x,N,function(Z){var K=t.transformState,Q=K.scale,ae=K.positionX,B=K.positionY,I=new Date().getTime()-j,z=I/A,S=OI[p.animationType],$=1-S(Math.min(1,z)),D=1-Z,O=ae+o*D,U=B+a*D,X=pA(O,W.positionX,ae,y,h,u,c,V,T,$),ee=pA(U,W.positionY,B,v,h,f,d,te,q,$);(ae!==O||B!==U)&&t.setTransformState(Q,X,ee)})}}function mA(t,e){var n=t.transformState.scale;ys(t),gu(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?sJ(t,e):iJ(t,e)}function MI(t){var e=t.transformState.scale,n=t.setup,r=n.minScale,i=n.alignmentAnimation,s=i.disabled,o=i.sizeX,a=i.sizeY,l=i.animationTime,c=i.animationType,u=s||e<r||!o&&!a;if(!u){var d=oJ(t);d&&Da(t,d,l,c)}}function gA(t,e,n){var r=t.startCoords,i=t.setup,s=i.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(r){var l=lJ(t,e,n),c=l.x,u=l.y,d=Ig(t,o),f=Ig(t,a);hJ(t,{x:c,y:u}),aJ(t,c,u,d,f)}}function mJ(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,r=t.wrapperComponent,i=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=r==null?void 0:r.getBoundingClientRect(),o=i==null?void 0:i.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,f=!e&&n&&(n==null?void 0:n.total)>.1&&d;f?pJ(t):MI(t)}}function _k(t,e,n,r){var i=t.setup,s=i.minScale,o=i.maxScale,a=i.limitToBounds,l=vh(ui(e,2),s,o,0,!1),c=gu(t,l),u=Zv(t,n,r,l,c,a),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function DI(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||r>=o;if((r>=1||a)&&MI(t),!(f||!i||!t.mounted)){var h=e||i.offsetWidth/2,p=n||i.offsetHeight/2,m=_k(t,o,h,p);m&&Da(t,m,u,d)}}var ha=function(){return ha=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ha.apply(this,arguments)};function vA(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var xp={previousScale:1,scale:1,positionX:0,positionY:0},nd={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},II=function(t){var e,n,r,i;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:xp.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:xp.scale,positionX:(r=t.initialPositionX)!==null&&r!==void 0?r:xp.positionX,positionY:(i=t.initialPositionY)!==null&&i!==void 0?i:xp.positionY}},yA=function(t){var e=ha({},nd);return Object.keys(t).forEach(function(n){var r=typeof t[n]<"u",i=typeof nd[n]<"u";if(i&&r){var s=Object.prototype.toString.call(nd[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=ha(ha({},nd[n]),t[n]):a?e[n]=vA(vA([],nd[n],!0),t[n],!0):e[n]=t[n]}}),e},LI=function(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!i)throw new Error("Wrapper is not mounted");var d=c?r*Math.exp(e*n):r+e*n,f=vh(ui(d,3),a,o,u,!1);return f};function BI(t,e,n,r,i){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,f=(u/2-l)/a,h=(d/2-c)/a,p=LI(t,e,n),m=_k(t,p,f,h);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");Da(t,m,r,i)}function FI(t,e,n,r){var i=t.setup,s=t.wrapperComponent,o=i.limitToBounds,a=II(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var f=kk(t,a.scale),h=Jv(a.positionX,a.positionY,f,o,0,0,s),p={scale:a.scale,positionX:h.x,positionY:h.y};c===a.scale&&u===a.positionX&&d===a.positionY||(r==null||r(),Da(t,p,e,n))}}function gJ(t,e,n,r){var i=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*r.scale,l=s.y*r.scale;return{x:(i.x-o.x+a)/r.scale,y:(i.y-o.y+l)/r.scale}}function vJ(t,e,n){var r=t.wrapperComponent,i=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!r||!i)return s;var u=r.getBoundingClientRect(),d=e.getBoundingClientRect(),f=gJ(e,r,i,s),h=f.x,p=f.y,m=d.width/s.scale,w=d.height/s.scale,v=r.offsetWidth/m,y=r.offsetHeight/w,x=vh(n||Math.min(v,y),l,c,0,!1),k=(u.width-m*x)/2,_=(u.height-w*x)/2,P=(u.left-h)*x+k,A=(u.top-p)*x+_,C=kk(t,x),N=Jv(P,A,C,a,0,0,r),R=N.x,M=N.y;return{positionX:R,positionY:M,scale:x}}var yJ=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),BI(t,1,e,n,r)}},wJ=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),BI(t,-1,e,n,r)}},bJ=function(t){return function(e,n,r,i,s){i===void 0&&(i=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!u||!d)){var h={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(r)?c:r};Da(t,h,i,s)}}},xJ=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),FI(t,e,n)}},SJ=function(t){return function(e,n,r){n===void 0&&(n=200),r===void 0&&(r="easeOut");var i=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=jI(e||i.scale,s,o);Da(t,a,n,r)}}},kJ=function(t){return function(e,n,r,i){r===void 0&&(r=600),i===void 0&&(i="easeOut"),ys(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=vJ(t,o,n);Da(t,a,r,i)}}},x1=function(t){return{instance:t,zoomIn:yJ(t),zoomOut:wJ(t),setTransform:bJ(t),resetTransform:xJ(t),centerView:SJ(t),zoomToElement:kJ(t)}},_J=function(t){return{instance:t,state:t.transformState}},gt=function(t){var e={};return Object.assign(e,_J(t)),Object.assign(e,x1(t)),e},L0=!1;function B0(){try{var t={get passive(){return L0=!0,!1}};return t}catch{return L0=!1,L0}}var Qv=function(t,e){var n=t.tagName.toUpperCase(),r=e.find(function(s){return s.toUpperCase()===n});if(r)return!0;var i=e.find(function(s){return t.classList.contains(s)});return!!i},S1=function(t){t&&clearTimeout(t)},CJ=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},jI=function(t,e,n){var r=n.offsetWidth*t,i=n.offsetHeight*t,s=(e.offsetWidth-r)/2,o=(e.offsetHeight-i)/2;return{scale:t,positionX:s,positionY:o}};function EJ(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var AJ=function(t,e){var n=t.setup.wheel,r=n.disabled,i=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!r&&c;if(!u||i&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Qv(c,o);return!d},PJ=function(t){return t?t.deltaY<0?1:-1:0};function $J(t,e){var n=PJ(t),r=jY(e,n);return r}function zI(t,e,n){var r=e.getBoundingClientRect(),i=0,s=0;if("clientX"in t)i=(t.clientX-r.left)/n,s=(t.clientY-r.top)/n;else{var o=t.touches[0];i=(o.clientX-r.left)/n,s=(o.clientY-r.top)/n}return(Number.isNaN(i)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:i,y:s}}var TJ=function(t,e,n,r,i){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,f=u.size,h=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n;if(i)return p;var m=r?!1:!h,w=vh(ui(p,3),c,l,f,m&&!d);return w},OJ=function(t,e){var n=t.previousWheelEvent,r=t.transformState.scale,i=t.setup,s=i.maxScale,o=i.minScale;return n?r<s||r>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},NJ=function(t,e){var n=t.setup.pinch,r=n.disabled,i=n.excluded,s=t.isInitialized,o=e.target,a=s&&!r&&o;if(!a)return!1;var l=Qv(o,i);return!l},RJ=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,r=t.pinchStartDistance,i=n&&!e&&r;return!!i},MJ=function(t,e,n){var r=n.getBoundingClientRect(),i=t.touches,s=ui(i[0].clientX-r.left,5),o=ui(i[0].clientY-r.top,5),a=ui(i[1].clientX-r.left,5),l=ui(i[1].clientY-r.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},UI=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},DJ=function(t,e){var n=t.pinchStartScale,r=t.pinchStartDistance,i=t.setup,s=i.maxScale,o=i.minScale,a=i.zoomAnimation,l=i.disablePadding,c=a.size,u=a.disabled;if(!n||r===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/r,f=d*n;return vh(ui(f,2),o,s,c,!u&&!l)},IJ=160,LJ=100,BJ=function(t,e){var n=t.props,r=n.onWheelStart,i=n.onZoomStart;t.wheelStopEventTimer||(ys(t),Rt(gt(t),e,r),Rt(gt(t),e,i))},FJ=function(t,e){var n=t.props,r=n.onWheel,i=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,h=o.disablePadding,p=o.smooth,m=d.size,w=d.disabled,v=f.step,y=f.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var x=$J(e,null),k=p?y*Math.abs(e.deltaY):v,_=TJ(t,x,k,!e.ctrlKey);if(l!==_){var P=gu(t,_),A=zI(e,s,l),C=w||m===0||u||h,N=c&&C,R=Zv(t,A.x,A.y,_,P,N),M=R.x,L=R.y;t.previousWheelEvent=e,t.setTransformState(_,M,L),Rt(gt(t),e,r),Rt(gt(t),e,i)}},jJ=function(t,e){var n=t.props,r=n.onWheelStop,i=n.onZoomStop;S1(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(DI(t,e.x,e.y),t.wheelAnimationTimer=null)},LJ);var s=OJ(t,e);s&&(S1(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Rt(gt(t),e,r),Rt(gt(t),e,i))},IJ))},zJ=function(t,e){var n=UI(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,ys(t)},UJ=function(t,e){var n=t.contentComponent,r=t.pinchStartDistance,i=t.transformState.scale,s=t.setup,o=s.limitToBounds,a=s.centerZoomedOut,l=s.zoomAnimation,c=l.disabled,u=l.size;if(!(r===null||!n)){var d=MJ(e,i,n);if(!(!Number.isFinite(d.x)||!Number.isFinite(d.y))){var f=UI(e),h=DJ(t,f);if(h!==i){var p=gu(t,h),m=c||u===0||a,w=o&&m,v=Zv(t,d.x,d.y,h,p,w),y=v.x,x=v.y;t.pinchMidpoint=d,t.lastDistance=f,t.setTransformState(h,y,x)}}}},VJ=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,DI(t,e==null?void 0:e.x,e==null?void 0:e.y)},VI=function(t,e){var n=t.props.onZoomStop,r=t.setup.doubleClick.animationTime;S1(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Rt(gt(t),e,n)},r)},HJ=function(t,e){var n=t.props,r=n.onZoomStart,i=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Rt(gt(t),e,r),FI(t,o,a,function(){return Rt(gt(t),e,i)}),VI(t,e)};function WJ(t,e){var n=t.setup,r=t.doubleClickStopEventTimer,i=t.transformState,s=t.contentComponent,o=i.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,h=u.step,p=u.animationTime,m=u.animationType;if(!d&&!r){if(f==="reset")return HJ(t,e);if(!s)return console.error("No ContentComponent found");var w=f==="zoomOut"?-1:1,v=LI(t,w,h);if(o!==v){Rt(gt(t),e,l);var y=zI(e,s,o),x=_k(t,v,y.x,y.y);if(!x)return console.error("Error during zoom event. New transformation state was not calculated.");Rt(gt(t),e,c),Da(t,x,p,m),VI(t,e)}}}var GJ=function(t,e){var n=t.isInitialized,r=t.setup,i=t.wrapperComponent,s=r.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=i==null?void 0:i.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=Qv(l,a);return!d},KJ=function(){function t(e){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(r){gu(n,n.transformState.scale),n.setup=yA(r)},this.initializeWindowEvents=function(){var r,i=B0(),s=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,o=s==null?void 0:s.defaultView;o==null||o.addEventListener("mousedown",n.onPanningStart,i),o==null||o.addEventListener("mousemove",n.onPanning,i),o==null||o.addEventListener("mouseup",n.onPanningStop,i),s==null||s.addEventListener("mouseleave",n.clearPanning,i),o==null||o.addEventListener("keyup",n.setKeyUnPressed,i),o==null||o.addEventListener("keydown",n.setKeyPressed,i)},this.cleanupWindowEvents=function(){var r,i,s=B0(),o=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),ys(n),(i=n.observer)===null||i===void 0||i.disconnect()},this.handleInitializeWrapperEvents=function(r){var i=B0();r.addEventListener("wheel",n.onWheelZoom,i),r.addEventListener("dblclick",n.onDoubleClick,i),r.addEventListener("touchstart",n.onTouchPanningStart,i),r.addEventListener("touchmove",n.onTouchPanning,i),r.addEventListener("touchend",n.onTouchPanningStop,i)},this.handleInitialize=function(r){var i=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(gt(n))}),i&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s;n.onInitCallbacks.forEach(function(o){return o(gt(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect()}),n.observer.observe(r))},this.onWheelZoom=function(r){var i=n.setup.disabled;if(!i){var s=AJ(n,r);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(BJ(n,r),FJ(n,r),jJ(n,r))}}},this.onPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=fA(n,r);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.button===0&&!n.setup.panning.allowLeftClickPan||r.button===1&&!n.setup.panning.allowMiddleClickPan||r.button===2&&!n.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),ys(n),mA(n,r),Rt(gt(n),r,s)))}}},this.onPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(!i){var o=hA(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.preventDefault(),r.stopPropagation(),gA(n,r.clientX,r.clientY),Rt(gt(n),r,s))}}},this.onPanningStop=function(r){var i=n.props.onPanningStop;n.isPanning&&(mJ(n),Rt(gt(n),r,i))},this.onPinchStart=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!i){var l=NJ(n,r);l&&(zJ(n,r),ys(n),Rt(gt(n),r,o),Rt(gt(n),r,a))}},this.onPinch=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!i){var l=RJ(n);l&&(r.preventDefault(),r.stopPropagation(),UJ(n,r),Rt(gt(n),r,o),Rt(gt(n),r,a))}},this.onPinchStop=function(r){var i=n.props,s=i.onPinchingStop,o=i.onZoomStop;n.pinchStartScale&&(VJ(n),Rt(gt(n),r,s),Rt(gt(n),r,o))},this.onTouchPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=fA(n,r);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200;if(a&&r.touches.length===1)n.onDoubleClick(r);else{n.lastTouch=+new Date,ys(n);var l=r.touches,c=l.length===1,u=l.length===2;c&&(ys(n),mA(n,r),Rt(gt(n),r,s)),u&&n.onPinchStart(r)}}}},this.onTouchPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&r.touches.length===1){if(i)return;var o=hA(n);if(!o)return;r.preventDefault(),r.stopPropagation();var a=r.touches[0];gA(n,a.clientX,a.clientY),Rt(gt(n),r,s)}else r.touches.length>1&&n.onPinch(r)},this.onTouchPanningStop=function(r){n.onPanningStop(r),n.onPinchStop(r)},this.onDoubleClick=function(r){var i=n.setup.disabled;if(!i){var s=GJ(n,r);s&&WJ(n,r)}},this.clearPanning=function(r){n.isPanning&&n.onPanningStop(r)},this.setKeyPressed=function(r){n.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){n.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(i){return n.pressedKeys[i]}):!0},this.setTransformState=function(r,i,s){var o=n.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(s)){r!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=r),n.transformState.positionX=i,n.transformState.positionY=s,n.applyTransformation();var a=gt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Rt(a,{scale:r,positionX:i,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var r=jI(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,i,s){return n.props.customTransform?n.props.customTransform(r,i,s):CJ(r,i,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var r=n.transformState,i=r.scale,s=r.positionX,o=r.positionY,a=n.handleTransformStyles(s,o,i);n.contentComponent.style.transform=a}},this.getContext=function(){return gt(n)},this.onChange=function(r){return n.onChangeCallbacks.has(r)||n.onChangeCallbacks.add(r),function(){n.onChangeCallbacks.delete(r)}},this.onInit=function(r){return n.onInitCallbacks.has(r)||n.onInitCallbacks.add(r),function(){n.onInitCallbacks.delete(r)}},this.init=function(r,i){n.cleanupWindowEvents(),n.wrapperComponent=r,n.contentComponent=i,gu(n,n.transformState.scale),n.handleInitializeWrapperEvents(r),n.handleInitialize(i),n.initializeWindowEvents(),n.isInitialized=!0;var s=gt(n);Rt(s,void 0,n.props.onInit)},this.props=e,this.setup=yA(this.props),this.transformState=II(this.props)}return t}(),Ck=Ht.createContext(null),XJ=function(t,e){return typeof t=="function"?t(e):t},qJ=Ht.forwardRef(function(t,e){var n=g.useRef(new KJ(t)).current,r=XJ(t.children,x1(n));return g.useImperativeHandle(e,function(){return x1(n)},[n]),g.useEffect(function(){n.update(t)},[n,t]),Ht.createElement(Ck.Provider,{value:n},r)});Ht.forwardRef(function(t,e){var n=g.useRef(null),r=g.useContext(Ck);return g.useEffect(function(){return r.onChange(function(i){if(n.current){var s=0,o=0;n.current.style.transform=r.handleTransformStyles(s,o,1/i.instance.transformState.scale)}})},[r]),Ht.createElement("div",ha({},t,{ref:EJ([n,e])}))});function YJ(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var JJ=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,wA={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};YJ(JJ);var ZJ=function(t){var e=t.children,n=t.wrapperClass,r=n===void 0?"":n,i=t.contentClass,s=i===void 0?"":i,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,f=g.useContext(Ck),h=f.init,p=f.cleanupWindowEvents,m=g.useRef(null),w=g.useRef(null);return g.useEffect(function(){var v=m.current,y=w.current;return v!==null&&y!==null&&h&&(h==null||h(v,y)),function(){p==null||p()}},[]),Ht.createElement("div",ha({},c,{ref:m,className:"react-transform-wrapper ".concat(wA.wrapper," ").concat(r),style:o}),Ht.createElement("div",ha({},d,{ref:w,className:"react-transform-component ".concat(wA.content," ").concat(s),style:a}),e))};function QJ({wrapperRef:t}){const e=pt();return b.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[b.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:b.jsx("span",{className:"icon-[lucide--zoom-in] h-4 w-4"})}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:b.jsx("span",{className:"icon-[lucide--zoom-out] h-4 w-4"})})]})}function eZ(){const t=pt(),{devices:e}=mn();return e.hasIOBus?b.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:b.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function tZ(){const{devices:t}=mn(),e=["M 380 420 H 800",t.hasIOBus&&"M 780 420 V 805",t.hasIOBus&&"M 450 805 H 900",t.hasIOBus&&"M 583 805 V 875"].filter(Boolean).join(" "),n=["M 380 440 H 800",t.hasIOBus&&"M 790 440 V 815",t.hasIOBus&&"M 450 815 H 900",t.hasIOBus&&"M 573 815 V 875"].filter(Boolean).join(" "),r="M 750 545 H 860 V 460";return b.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] h-full w-full",children:[b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:e}),b.jsx(Gt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:e,style:ft("bus.rd")}),b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),b.jsx(Gt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:n,style:ft("bus.wr")}),t.hasIOBus&&b.jsxs(b.Fragment,{children:[b.jsx(dn,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:r}),b.jsx(Gt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:r,style:ft("bus.mem")})]}),t.pic&&b.jsx(dn,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&b.jsx(dn,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&b.jsx(dn,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&b.jsx(dn,{springs:"bus.handshake",d:"M 635 595 V 730 H 900"}),t.pic&&b.jsxs(b.Fragment,{children:[b.jsx(dn,{springs:"bus.intr",d:"M 110 700 V 470"}),b.jsx(dn,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&b.jsx(dn,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&b.jsx(dn,{springs:"bus.int1",d:"M 500 955 H 400 V 900"}),t.pic&&t.handshake&&b.jsx(dn,{springs:"bus.int2",d:"M 930 866 V 1050 H 300 V 900"}),t.preset==="pio-switches-and-leds"&&b.jsxs(b.Fragment,{children:[b.jsx(dn,{springs:"bus.switches->pio",d:"M 1300 768 H 1120"}),b.jsx(dn,{springs:"bus.pio->leds",d:"M 1120 858 H 1300"})]}),t.preset==="pio-printer"&&b.jsxs(b.Fragment,{children:[b.jsx(dn,{springs:"bus.printer.strobe",d:"M 1120 767 H 1250"}),b.jsx(dn,{springs:"bus.printer.busy",d:"M 1250 782 H 1120"}),b.jsx(dn,{springs:"bus.printer.data",d:"M 1120 837 H 1250"})]}),t.preset==="handshake"&&b.jsxs(b.Fragment,{children:[b.jsx(dn,{springs:"bus.printer.strobe",d:"M 1120 767 H 1250"}),b.jsx(dn,{springs:"bus.printer.busy",d:"M 1250 782 H 1120"}),b.jsx(dn,{springs:"bus.printer.data",d:"M 1120 837 H 1250"})]})]})}function dn({d:t,springs:e}){return b.jsxs(b.Fragment,{children:[b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),b.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),b.jsx(Gt.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:ft(e)})]})}function nZ(){const t=pt(),{devices:e}=mn();return b.jsxs(b.Fragment,{children:[b.jsx(Er,{className:"left-[384px] top-[403px]",children:"rd"}),b.jsx(Er,{className:"left-[384px] top-[423px]",children:"wr"}),e.hasIOBus&&b.jsxs(b.Fragment,{children:[b.jsx(Er,{className:"left-[384px] top-[443px]",children:"io/m"}),b.jsx(Er,{className:"left-[715px] top-[538px]",children:t("computer.chip-select.mem")})]}),e.pic&&b.jsx(Er,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")}),e.timer&&b.jsx(Er,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")}),e.pio&&b.jsx(Er,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")}),e.handshake&&b.jsx(Er,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.handshake")}),e.pic&&b.jsxs(b.Fragment,{children:[b.jsx(Er,{className:"left-[75px] top-[478px]",children:"intr"}),b.jsx(Er,{className:"left-[125px] top-[478px]",children:"inta"})]}),e.printer&&b.jsxs(b.Fragment,{children:[b.jsx(Er,{className:"left-[1260px] top-[758px]",children:"strobe"}),b.jsx(Er,{className:"left-[1260px] top-[773px]",children:"busy"}),b.jsx(Er,{className:"left-[1260px] top-[828px]",children:"data"})]})]})}function Er({className:t,children:e}){return b.jsx("span",{className:Fe("pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",t),children:e})}function rZ(){const{devices:t}=mn(),e=["M 699 349 H 800",t.hasIOBus&&"M 725 349 V 770",t.hasIOBus&&"M 450 770 H 900",t.hasIOBus&&"M 618 770 V 875"].filter(Boolean).join(" "),n=["M 687 249 H 800",t.hasIOBus&&"M 765 249 V 790",t.hasIOBus&&"M 450 790 H 900",t.hasIOBus&&"M 598 790 V 875"].filter(Boolean).join(" ");return b.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] h-full w-full",children:[b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),b.jsx(Gt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:n,style:ft("bus.data")}),b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),b.jsx(Gt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:e,style:ft("bus.address")})]})}function iZ(){return b.jsxs(b.Fragment,{children:[b.jsx(rZ,{}),b.jsx(tZ,{}),b.jsx(nZ,{}),b.jsx(eZ,{})]})}function sZ(){const{devices:t}=mn();if(!t.clock)return null;const e=ft("clock.angle");return b.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 h-12 w-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:b.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-full w-full fill-none stroke-white stroke-2",children:[b.jsx("circle",{cx:"12",cy:"12",r:"10"}),b.jsx(Gt.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}const HI="Popover",[WI,Lne]=Ji(HI,[Pu]),Ek=Pu(),[oZ,Nu]=WI(HI),aZ=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=Ek(e),l=g.useRef(null),[c,u]=g.useState(!1),[d=!1,f]=ao({prop:r,defaultProp:i,onChange:s});return g.createElement(mS,a,g.createElement(oZ,{scope:e,contentId:Cl(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:o},n))},lZ="PopoverTrigger",cZ=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Nu(lZ,n),s=Ek(n),o=st(e,i.triggerRef),a=g.createElement(Ge.button,we({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":XI(i.open)},r,{ref:o,onClick:ve(t.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?a:g.createElement(gS,we({asChild:!0},s),a)}),GI="PopoverPortal",[uZ,dZ]=WI(GI,{forceMount:void 0}),fZ=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=Nu(GI,e);return g.createElement(uZ,{scope:e,forceMount:n},g.createElement(yo,{present:n||s.open},g.createElement(Sv,{asChild:!0,container:i},r)))},Wf="PopoverContent",hZ=g.forwardRef((t,e)=>{const n=dZ(Wf,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=Nu(Wf,t.__scopePopover);return g.createElement(yo,{present:r||s.open},s.modal?g.createElement(pZ,we({},i,{ref:e})):g.createElement(mZ,we({},i,{ref:e})))}),pZ=g.forwardRef((t,e)=>{const n=Nu(Wf,t.__scopePopover),r=g.useRef(null),i=st(e,r),s=g.useRef(!1);return g.useEffect(()=>{const o=r.current;if(o)return yS(o)},[]),g.createElement(wS,{as:_l,allowPinchZoom:!0},g.createElement(KI,we({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:ve(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ve(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})))}),mZ=g.forwardRef((t,e)=>{const n=Nu(Wf,t.__scopePopover),r=g.useRef(!1),i=g.useRef(!1);return g.createElement(KI,we({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=t.onCloseAutoFocus)===null||o===void 0||o.call(t,s),!s.defaultPrevented){var a;r.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:s=>{var o,a;(o=t.onInteractOutside)===null||o===void 0||o.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=s.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}}))}),KI=g.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=Nu(Wf,n),h=Ek(n);return oS(),g.createElement(aS,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},g.createElement(wv,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1)},g.createElement(vS,we({"data-state":XI(f.open),role:"dialog",id:f.contentId},h,d,{ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function XI(t){return t?"open":"closed"}const gZ=aZ,vZ=cZ,yZ=fZ,qI=hZ,YI=gZ,JI=vZ,Ak=g.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>b.jsx(yZ,{children:b.jsx(qI,{ref:i,align:e,sideOffset:n,className:Fe("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...r})}));Ak.displayName=qI.displayName;function jr({name:t,title:e,valueAtom:n,springs:r,emphasis:i=!1,className:s}){const o=pt(),a=Xt(n),l=a.low,c=a.is16bits()?a.high:null;return b.jsxs(YI,{children:[b.jsx(JI,{asChild:!0,children:b.jsxs(Gt.button,{title:e,className:Fe("flex w-min cursor-pointer items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",i?"border-mantis-400 text-lg":"border-stone-600 text-base",s),style:ft(r),children:[b.jsx("span",{className:"mr-2 font-bold",children:t}),c&&b.jsx("span",{className:"mr-0.5 rounded bg-stone-900 p-0.5 font-light",children:c.toString("hex")}),b.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:l.toString("hex")})]})}),b.jsxs(Ak,{className:"w-60",children:[b.jsx("p",{className:"px-4 py-2 font-medium text-white",children:e}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(u=>b.jsxs("li",{children:[b.jsx("b",{className:"font-medium",children:o(`generics.byte-representation.${u}`)}),":"," ",b.jsx("span",{className:"font-mono text-mantis-400",children:a.toString(u)})]},u))})]})]})}function wZ(){const t=Xt(Et.FLAGS),e=Xt(FM),n=t.bit(0),r=t.bit(6),i=t.bit(7),s=t.bit(9),o=t.bit(11);return b.jsxs(b.Fragment,{children:[b.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[b.jsx(Gt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 173 85 H 220",pathLength:1,strokeDasharray:1,style:ft("cpu.alu.operands")}),b.jsx(Gt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 182 145 H 220",pathLength:1,strokeDasharray:1,style:ft("cpu.alu.operands")}),b.jsx(Gt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 272 115 h 28",pathLength:1,strokeDasharray:1,style:ft("cpu.alu.results")}),b.jsx(Gt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 250 145 v 46",pathLength:1,strokeDasharray:1,style:ft("cpu.alu.results")}),b.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),b.jsx(Gt.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:ft("cpu.alu.cog").rot.to(a=>`rotate(${a*60}deg)`)}}),b.jsx(Gt.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:ft("cpu.alu.operation"),children:e}),b.jsxs(Gt.div,{className:"absolute left-[165px] top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",style:ft("cpu.FLAGS"),children:[b.jsx("span",{className:Fe("rounded p-1 font-light",n?"bg-mantis-400":"bg-stone-900"),children:"CF"}),b.jsx("span",{className:Fe("rounded p-1 font-light",r?"bg-mantis-400":"bg-stone-900"),children:"ZF"}),b.jsx("span",{className:Fe("rounded p-1 font-light",i?"bg-mantis-400":"bg-stone-900"),children:"SF"}),b.jsx("span",{className:Fe("rounded p-1 font-light",s?"bg-mantis-400":"bg-stone-900"),children:"IF"}),b.jsx("span",{className:Fe("rounded p-1 font-light",o?"bg-mantis-400":"bg-stone-900"),children:"OF"})]})]})}function bZ(){const t=pt(),{status:e}=mn(),n=Xt(as),r=g.useMemo(()=>{if(!("metadata"in n)||n.metadata.operands.length===0)return"";if(n.phase==="fetching-operands"){let s=" __";for(let o=1;o<n.metadata.operands.length;o++)s+=", __";return s}else return" "+n.metadata.operands.join(", ")},[n]),i=g.useMemo(()=>e.type==="running"&&e.waitingForInput?"waiting-for-input":e.type==="stopped"?e.error?"stopped-error":"stopped":n.phase==="stopped"&&n.error?"stopped-error":n.phase,[e,n]);return b.jsxs(b.Fragment,{children:[b.jsx("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:b.jsx(Gt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:ft("cpu.decoder.path")})}),b.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:b.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:t("computer.cpu.control-unit")})}),b.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[b.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[b.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),b.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:b.jsx(Gt.div,{className:"h-full bg-mantis-400",style:{width:ft("cpu.decoder.progress.progress").to(s=>`${s*100}%`),opacity:ft("cpu.decoder.progress.opacity")}})})]}),b.jsx("span",{className:Fe("mt-4 w-48 rounded-lg border border-stone-600 py-2 text-center text-sm leading-none transition-colors",i==="stopped-error"?"bg-red-500":i==="waiting-for-input"?"bg-amber-600":i==="int6"||i==="int7"?"bg-blue-600":"bg-stone-900"),children:t(`computer.cpu.status.${i}`)}),b.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:b.jsx("p",{className:"text-center font-mono",children:!("metadata"in n)||n.phase==="fetching"?b.jsx("span",{className:"italic text-stone-400",children:"???"}):b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"text-mantis-400",children:n.metadata.name}),b.jsx("span",{className:"text-white",children:r})]})})})]})]})}function xZ(){const t=pt();return b.jsxs("div",{className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),b.jsx(YG,{}),b.jsx(PX,{}),b.jsx(ar,{name:"left",className:"left-[60px] top-[70px]"}),b.jsx(ar,{name:"right",className:"left-[60px] top-[130px]"}),b.jsx(ar,{name:"result",className:"left-[300px] top-[100px]"}),b.jsx(wZ,{}),b.jsx(ar,{name:"AX",emphasis:!0,className:"left-[520px] top-[30px]"}),b.jsx(ar,{name:"BX",emphasis:!0,className:"left-[520px] top-[70px]"}),b.jsx(ar,{name:"CX",emphasis:!0,className:"left-[520px] top-[110px]"}),b.jsx(ar,{name:"DX",emphasis:!0,className:"left-[520px] top-[150px]"}),b.jsx(ar,{name:"id",className:"left-[520px] top-[190px]"}),b.jsx(ar,{name:"MBR",className:"right-[-38px] top-[233px]"}),b.jsx(ar,{name:"IR",className:"left-[171px] top-[270px]"}),b.jsx(bZ,{}),b.jsx(ar,{name:"IP",emphasis:!0,className:"left-[450px] top-[292px]"}),b.jsx(ar,{name:"SP",emphasis:!0,className:"left-[450px] top-[332px]"}),b.jsx(ar,{name:"ri",className:"left-[450px] top-[372px]"}),b.jsx(ar,{name:"MAR",className:"right-[-51px] top-[333px]"})]})}function ar({name:t,emphasis:e,className:n}){const r=pt();return b.jsx(jr,{name:t,valueAtom:Et[t],springs:`cpu.${t}`,emphasis:e,title:r("computer.cpu.register",t),className:Fe("absolute",n)})}const SZ="_pushable_1q0ek_2",kZ="_front_1q0ek_15",_Z="_shadow_1q0ek_20",CZ="_edge_1q0ek_52",Sp={pushable:SZ,front:kZ,shadow:_Z,edge:CZ};function EZ(){const t=pt(),{status:e,dispatch:n,devices:r}=mn();return eo("F10",i=>{i.preventDefault(),r.f10&&n("f10.press")},void 0,[n,r.f10]),r.f10?b.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:b.jsxs("button",{className:Sp.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[b.jsx("div",{className:Sp.shadow}),b.jsx("div",{className:Sp.edge}),b.jsx("span",{className:Sp.front,children:t("computer.f10")})]})}):null}function AZ(){const t=pt(),{devices:e}=mn();return e.handshake?b.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),b.jsx(jr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:nk,springs:"handshake.STATE",className:"mx-auto my-4"}),b.jsx("hr",{className:"border-stone-600"}),b.jsx(jr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:tk,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var ZI={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.7.63 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,r){t.exports=r(g)})(kL,function(n){return function(){var r={689:function(a){a.exports=function(){var l={d:function(B,I){for(var z in I)l.o(I,z)&&!l.o(B,z)&&Object.defineProperty(B,z,{enumerable:!0,get:I[z]})},o:function(B,I){return Object.prototype.hasOwnProperty.call(B,I)},r:function(B){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(B,"__esModule",{value:!0})}},c={};function u(B){return function(I){if(Array.isArray(I))return f(I)}(B)||function(I){if(typeof Symbol<"u"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}(B)||d(B)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(B,I){if(B){if(typeof B=="string")return f(B,I);var z=Object.prototype.toString.call(B).slice(8,-1);return z==="Object"&&B.constructor&&(z=B.constructor.name),z==="Map"||z==="Set"?Array.from(B):z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?f(B,I):void 0}}function f(B,I){(I==null||I>B.length)&&(I=B.length);for(var z=0,S=new Array(I);z<I;z++)S[z]=B[z];return S}function h(B){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},h(B)}function p(B,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(B,w(S.key),S)}}function m(B,I,z){return(I=w(I))in B?Object.defineProperty(B,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):B[I]=z,B}function w(B){var I=function(z,S){if(h(z)!="object"||!z)return z;var $=z[Symbol.toPrimitive];if($!==void 0){var D=$.call(z,S||"default");if(h(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(B,"string");return h(I)=="symbol"?I:String(I)}l.r(c),l.d(c,{SimpleKeyboard:function(){return Q},default:function(){return ae}});var v=function(){function B($){var D=$.getOptions,O=$.getCaretPosition,U=$.getCaretPositionEnd,X=$.dispatch;(function(ee,J){if(!(ee instanceof J))throw new TypeError("Cannot call a class as a function")})(this,B),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(ee){return ee&&!(ee[0]==="{"&&ee[ee.length-1]==="}")}),this.getOptions=D,this.getCaretPosition=O,this.getCaretPositionEnd=U,this.dispatch=X,B.bindMethods(B,this)}var I,z,S;return I=B,z=[{key:"getButtonType",value:function($){return $.includes("{")&&$.includes("}")&&$!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function($){var D=this.getButtonType($),O=$.replace("{","").replace("}",""),U="";return D!=="standardBtn"&&(U=" hg-button-".concat(O)),"hg-".concat(D).concat(U)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"","{arrowleft}":"","{arrowdown}":"","{arrowright}":"","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function($,D){return(D=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),D):D||this.getDefaultDiplay())[$]||$}},{key:"getUpdatedInput",value:function($,D,O){var U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:O,X=arguments.length>4&&arguments[4]!==void 0&&arguments[4],ee=this.getOptions(),J=[O,U,X],ie=D;return($==="{bksp}"||$==="{backspace}")&&ie.length>0?ie=this.removeAt.apply(this,[ie].concat(J)):($==="{delete}"||$==="{forwarddelete}")&&ie.length>0?ie=this.removeForwardsAt.apply(this,[ie].concat(J)):$==="{space}"?ie=this.addStringAt.apply(this,[ie," "].concat(J)):$!=="{tab}"||typeof ee.tabCharOnTab=="boolean"&&ee.tabCharOnTab===!1?$!=="{enter}"&&$!=="{numpadenter}"||!ee.newLineOnEnter?$.includes("numpad")&&Number.isInteger(Number($[$.length-2]))?ie=this.addStringAt.apply(this,[ie,$[$.length-2]].concat(J)):$==="{numpaddivide}"?ie=this.addStringAt.apply(this,[ie,"/"].concat(J)):$==="{numpadmultiply}"?ie=this.addStringAt.apply(this,[ie,"*"].concat(J)):$==="{numpadsubtract}"?ie=this.addStringAt.apply(this,[ie,"-"].concat(J)):$==="{numpadadd}"?ie=this.addStringAt.apply(this,[ie,"+"].concat(J)):$==="{numpaddecimal}"?ie=this.addStringAt.apply(this,[ie,"."].concat(J)):$==="{"||$==="}"?ie=this.addStringAt.apply(this,[ie,$].concat(J)):$.includes("{")||$.includes("}")||(ie=this.addStringAt.apply(this,[ie,$].concat(J))):ie=this.addStringAt.apply(this,[ie,`
`].concat(J)):ie=this.addStringAt.apply(this,[ie,"	"].concat(J)),ee.debug&&console.log("Input will be: "+ie),ie}},{key:"updateCaretPos",value:function($){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=this.updateCaretPosAction($,D);this.dispatch(function(U){U.setCaretPosition(O)})}},{key:"updateCaretPosAction",value:function($){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=this.getOptions(),U=this.getCaretPosition();return U!=null&&(D?U>0&&(U-=$):U+=$),O.debug&&console.log("Caret at:",U),U}},{key:"addStringAt",value:function($,D){var O,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$.length,X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:$.length,ee=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return U||U===0?(O=[$.slice(0,U),D,$.slice(X)].join(""),this.isMaxLengthReached()||ee&&this.updateCaretPos(D.length)):O=$+D,O}},{key:"removeAt",value:function($){var D,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.length,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$.length,X=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(O===0&&U===0)return $;if(O===U){var ee=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;O&&O>=0?$.substring(O-2,O).match(ee)?(D=$.substr(0,O-2)+$.substr(O),X&&this.updateCaretPos(2,!0)):(D=$.substr(0,O-1)+$.substr(O),X&&this.updateCaretPos(1,!0)):$.slice(-2).match(ee)?(D=$.slice(0,-2),X&&this.updateCaretPos(2,!0)):(D=$.slice(0,-1),X&&this.updateCaretPos(1,!0))}else D=$.slice(0,O)+$.slice(U),X&&this.dispatch(function(J){J.setCaretPosition(O)});return D}},{key:"removeForwardsAt",value:function($){var D,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.length,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$.length,X=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return $!=null&&$.length&&O!==null?(O===U?D=$.substring(O,O+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?$.substr(0,O)+$.substr(O+2):$.substr(0,O)+$.substr(O+1):(D=$.slice(0,O)+$.slice(U),X&&this.dispatch(function(ee){ee.setCaretPosition(O)})),D):$}},{key:"handleMaxLength",value:function($,D){var O=this.getOptions(),U=O.maxLength,X=$[O.inputName||"default"],ee=D.length-1>=U;if(D.length<=X.length)return!1;if(Number.isInteger(U))return O.debug&&console.log("maxLength (num) reached:",ee),ee?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(h(U)==="object"){var J=D.length-1>=U[O.inputName||"default"];return O.debug&&console.log("maxLength (obj) reached:",J),J?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function($){return $?$.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(D,O){return O.length?D+O[0].toUpperCase()+O.slice(1):D}):""}},{key:"chunkArray",value:function($,D){return u(Array(Math.ceil($.length/D))).map(function(O,U){return $.slice(D*U,D+D*U)})}},{key:"escapeRegex",value:function($){return $.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function($,D){var O=$,U=D.indexOf("");return U<$&&U!=-1&&O--,D.indexOf("")<$&&U!=-1&&O--,O<0?0:O}}],S=[{key:"bindMethods",value:function($,D){var O,U=function(ee,J){var ie=typeof Symbol<"u"&&ee[Symbol.iterator]||ee["@@iterator"];if(!ie){if(Array.isArray(ee)||(ie=d(ee))||J&&ee&&typeof ee.length=="number"){ie&&(ee=ie);var Me=0,he=function(){};return{s:he,n:function(){return Me>=ee.length?{done:!0}:{done:!1,value:ee[Me++]}},e:function(rt){throw rt},f:he}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Le,ze=!0,be=!1;return{s:function(){ie=ie.call(ee)},n:function(){var rt=ie.next();return ze=rt.done,rt},e:function(rt){be=!0,Le=rt},f:function(){try{ze||ie.return==null||ie.return()}finally{if(be)throw Le}}}}(Object.getOwnPropertyNames($.prototype));try{for(U.s();!(O=U.n()).done;){var X=O.value;X==="constructor"||X==="bindMethods"||(D[X]=D[X].bind(D))}}catch(ee){U.e(ee)}finally{U.f()}}}],z&&p(I.prototype,z),S&&p(I,S),Object.defineProperty(I,"prototype",{writable:!1}),B}();m(v,"noop",function(){});var y=v;function x(B){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},x(B)}function k(B,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(B,P(S.key),S)}}function _(B,I,z){return(I=P(I))in B?Object.defineProperty(B,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):B[I]=z,B}function P(B){var I=function(z,S){if(x(z)!="object"||!z)return z;var $=z[Symbol.toPrimitive];if($!==void 0){var D=$.call(z,S||"default");if(x(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(B,"string");return x(I)=="symbol"?I:String(I)}var A=function(){function B(S){var $=this,D=S.dispatch,O=S.getOptions;(function(U,X){if(!(U instanceof X))throw new TypeError("Cannot call a class as a function")})(this,B),_(this,"getOptions",void 0),_(this,"dispatch",void 0),_(this,"isMofifierKey",function(U){return U.altKey||U.ctrlKey||U.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(U.code||U.key||$.keyCodeToKey(U==null?void 0:U.keyCode))}),this.dispatch=D,this.getOptions=O,y.bindMethods(B,this)}var I,z;return I=B,(z=[{key:"handleHighlightKeyDown",value:function(S){var $=this.getOptions();$.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(O){var U,X,ee=O.getButtonElement(D),J=O.getButtonElement("{".concat(D,"}"));if(ee)U=ee,X=D;else{if(!J)return;U=J,X="{".concat(D,"}")}var ie,Me,he,Le,ze=function(rt){rt.style.background=$.physicalKeyboardHighlightBgColor||"#dadce4",rt.style.color=$.physicalKeyboardHighlightTextColor||"black"};if(U)if(Array.isArray(U)){if(U.forEach(function(rt){return ze(rt)}),$.physicalKeyboardHighlightPress)if($.physicalKeyboardHighlightPressUsePointerEvents)(ie=U[0])===null||ie===void 0||(Me=ie.onpointerdown)===null||Me===void 0||Me.call(ie,S);else if($.physicalKeyboardHighlightPressUseClick){var be;(be=U[0])===null||be===void 0||be.click()}else O.handleButtonClicked(X,S)}else ze(U),$.physicalKeyboardHighlightPress&&($.physicalKeyboardHighlightPressUsePointerEvents?(he=U)===null||he===void 0||(Le=he.onpointerdown)===null||Le===void 0||Le.call(he,S):$.physicalKeyboardHighlightPressUseClick?U.click():O.handleButtonClicked(X,S))})}},{key:"handleHighlightKeyUp",value:function(S){var $=this.getOptions();$.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(O){var U,X,ee,J=O.getButtonElement(D)||O.getButtonElement("{".concat(D,"}")),ie=function(Me){Me.removeAttribute&&Me.removeAttribute("style")};J&&(Array.isArray(J)?(J.forEach(function(Me){return ie(Me)}),$.physicalKeyboardHighlightPressUsePointerEvents&&((U=J[0])===null||U===void 0||(X=U.onpointerup)===null||X===void 0||X.call(U,S))):(ie(J),$.physicalKeyboardHighlightPressUsePointerEvents&&(J==null||(ee=J.onpointerup)===null||ee===void 0||ee.call(J,S))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(S){var $,D="",O=S.code||S.key||this.keyCodeToKey(S==null?void 0:S.keyCode);return(D=O!=null&&O.includes("Numpad")||O!=null&&O.includes("Shift")||O!=null&&O.includes("Space")||O!=null&&O.includes("Backspace")||O!=null&&O.includes("Control")||O!=null&&O.includes("Alt")||O!=null&&O.includes("Meta")?S.code||"":S.key||this.keyCodeToKey(S==null?void 0:S.keyCode)||"").length>1?($=D)===null||$===void 0?void 0:$.toLowerCase():D}},{key:"keyCodeToKey",value:function(S){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[S]||""}}])&&k(I.prototype,z),Object.defineProperty(I,"prototype",{writable:!1}),B}();function C(B){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},C(B)}function N(B,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(B,M(S.key),S)}}function R(B,I,z){return(I=M(I))in B?Object.defineProperty(B,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):B[I]=z,B}function M(B){var I=function(z,S){if(C(z)!="object"||!z)return z;var $=z[Symbol.toPrimitive];if($!==void 0){var D=$.call(z,S||"default");if(C(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(B,"string");return C(I)=="symbol"?I:String(I)}var L=function(){function B(S){var $=S.utilities,D=S.options;(function(O,U){if(!(O instanceof U))throw new TypeError("Cannot call a class as a function")})(this,B),R(this,"utilities",void 0),R(this,"options",void 0),R(this,"candidateBoxElement",void 0),R(this,"pageIndex",0),R(this,"pageSize",void 0),this.utilities=$,this.options=D,y.bindMethods(B,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5}var I,z;return I=B,z=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(S){var $=this,D=S.candidateValue,O=S.targetElement,U=S.onSelect;if(D&&D.length){var X=this.utilities.chunkArray(D.split(" "),this.pageSize);this.renderPage({candidateListPages:X,targetElement:O,pageIndex:this.pageIndex,nbPages:X.length,onItemSelected:function(ee,J){U(ee,J),$.destroy()}})}}},{key:"renderPage",value:function(S){var $,D=this,O=S.candidateListPages,U=S.targetElement,X=S.pageIndex,ee=S.nbPages,J=S.onItemSelected;($=this.candidateBoxElement)===null||$===void 0||$.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var ie=document.createElement("ul");ie.className="hg-candidate-box-list",O[X].forEach(function(or){var Fa,Zi=document.createElement("li"),ko=function(){var _o=new(D.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(_o,"target",{value:Zi}),_o};Zi.className="hg-candidate-box-list-item",Zi.innerHTML=((Fa=D.options.display)===null||Fa===void 0?void 0:Fa[or])||or,D.options.useTouchEvents?Zi.ontouchstart=function(_o){return J(or,_o||ko())}:Zi.onclick=function(){var _o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ko();return J(or,_o)},ie.appendChild(Zi)});var Me=X>0,he=document.createElement("div");he.classList.add("hg-candidate-box-prev"),Me&&he.classList.add("hg-candidate-box-btn-active");var Le=function(){Me&&D.renderPage({candidateListPages:O,targetElement:U,pageIndex:X-1,nbPages:ee,onItemSelected:J})};this.options.useTouchEvents?he.ontouchstart=Le:he.onclick=Le,this.candidateBoxElement.appendChild(he),this.candidateBoxElement.appendChild(ie);var ze=X<ee-1,be=document.createElement("div");be.classList.add("hg-candidate-box-next"),ze&&be.classList.add("hg-candidate-box-btn-active");var rt=function(){ze&&D.renderPage({candidateListPages:O,targetElement:U,pageIndex:X+1,nbPages:ee,onItemSelected:J})};this.options.useTouchEvents?be.ontouchstart=rt:be.onclick=rt,this.candidateBoxElement.appendChild(be),U.prepend(this.candidateBoxElement)}}],z&&N(I.prototype,z),Object.defineProperty(I,"prototype",{writable:!1}),B}(),H=L;function T(B){return function(I){if(Array.isArray(I))return V(I)}(B)||function(I){if(typeof Symbol<"u"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}(B)||function(I,z){if(I){if(typeof I=="string")return V(I,z);var S=Object.prototype.toString.call(I).slice(8,-1);return S==="Object"&&I.constructor&&(S=I.constructor.name),S==="Map"||S==="Set"?Array.from(I):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?V(I,z):void 0}}(B)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function V(B,I){(I==null||I>B.length)&&(I=B.length);for(var z=0,S=new Array(I);z<I;z++)S[z]=B[z];return S}function q(B){return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},q(B)}function te(B,I){var z=Object.keys(B);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(B);I&&(S=S.filter(function($){return Object.getOwnPropertyDescriptor(B,$).enumerable})),z.push.apply(z,S)}return z}function W(B,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(B,Z(S.key),S)}}function j(B,I,z){return(I=Z(I))in B?Object.defineProperty(B,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):B[I]=z,B}function Z(B){var I=function(z,S){if(q(z)!="object"||!z)return z;var $=z[Symbol.toPrimitive];if($!==void 0){var D=$.call(z,S||"default");if(q(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(B,"string");return q(I)=="symbol"?I:String(I)}var K=function(){function B(S,$){var D=this;if(function(he,Le){if(!(he instanceof Le))throw new TypeError("Cannot call a class as a function")}(this,B),j(this,"input",void 0),j(this,"options",void 0),j(this,"utilities",void 0),j(this,"caretPosition",void 0),j(this,"caretPositionEnd",void 0),j(this,"keyboardDOM",void 0),j(this,"keyboardPluginClasses",void 0),j(this,"keyboardDOMClass",void 0),j(this,"buttonElements",void 0),j(this,"currentInstanceName",void 0),j(this,"allKeyboardInstances",void 0),j(this,"keyboardInstanceNames",void 0),j(this,"isFirstKeyboardInstance",void 0),j(this,"physicalKeyboard",void 0),j(this,"modules",void 0),j(this,"activeButtonClass",void 0),j(this,"holdInteractionTimeout",void 0),j(this,"holdTimeout",void 0),j(this,"isMouseHold",void 0),j(this,"initialized",void 0),j(this,"candidateBox",void 0),j(this,"keyboardRowsDOM",void 0),j(this,"defaultName","default"),j(this,"activeInputElement",null),j(this,"handleParams",function(he,Le){var ze,be,rt;if(typeof he=="string")ze=he.split(".").join(""),be=document.querySelector(".".concat(ze)),rt=Le;else if(he instanceof HTMLDivElement){if(!he.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");ze=he.className.split(" ")[0],be=he,rt=Le}else ze="simple-keyboard",be=document.querySelector(".".concat(ze)),rt=he;return{keyboardDOMClass:ze,keyboardDOM:be,options:rt}}),j(this,"getOptions",function(){return D.options}),j(this,"getCaretPosition",function(){return D.caretPosition}),j(this,"getCaretPositionEnd",function(){return D.caretPositionEnd}),j(this,"registerModule",function(he,Le){D.modules[he]||(D.modules[he]={}),Le(D.modules[he])}),j(this,"getKeyboardClassString",function(){for(var he=arguments.length,Le=new Array(he),ze=0;ze<he;ze++)Le[ze]=arguments[ze];return[D.keyboardDOMClass].concat(Le).filter(function(be){return!!be}).join(" ")}),typeof window<"u"){var O=this.handleParams(S,$),U=O.keyboardDOMClass,X=O.keyboardDOM,ee=O.options,J=ee===void 0?{}:ee;this.utilities=new y({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=X,this.options=function(he){for(var Le=1;Le<arguments.length;Le++){var ze=arguments[Le]!=null?arguments[Le]:{};Le%2?te(Object(ze),!0).forEach(function(be){j(he,be,ze[be])}):Object.getOwnPropertyDescriptors?Object.defineProperties(he,Object.getOwnPropertyDescriptors(ze)):te(Object(ze)).forEach(function(be){Object.defineProperty(he,be,Object.getOwnPropertyDescriptor(ze,be))})}return he}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},J),this.keyboardPluginClasses="",y.bindMethods(B,this);var ie=this.options.inputName,Me=ie===void 0?this.defaultName:ie;if(this.input={},this.input[Me]="",this.keyboardDOMClass=U,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new A({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new H({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(U,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}}var I,z;return I=B,z=[{key:"setCaretPosition",value:function(S){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S;this.caretPosition=S,this.caretPositionEnd=$}},{key:"getInputCandidates",value:function(S){var $=this,D=this.options,O=D.layoutCandidates,U=D.layoutCandidatesCaseSensitiveMatch;if(!O||q(O)!=="object")return{};var X=Object.keys(O).filter(function(ie){var Me=S.substring(0,$.getCaretPositionEnd()||0)||S,he=new RegExp("".concat($.utilities.escapeRegex(ie),"$"),U?"g":"gi");return!!T(Me.matchAll(he)).length});if(X.length>1){var ee=X.sort(function(ie,Me){return Me.length-ie.length})[0];return{candidateKey:ee,candidateValue:O[ee]}}if(X.length){var J=X[0];return{candidateKey:J,candidateValue:O[J]}}return{}}},{key:"showCandidatesBox",value:function(S,$,D){var O=this;this.candidateBox&&this.candidateBox.show({candidateValue:$,targetElement:D,onSelect:function(U,X){var ee=O.options,J=ee.layoutCandidatesCaseSensitiveMatch,ie=ee.disableCandidateNormalization,Me=ee.enableLayoutCandidatesKeyPress,he=U;ie||(he=U.normalize("NFD"));var Le=O.getInput(O.options.inputName,!0),ze=O.getCaretPositionEnd()||0,be=Le.substring(0,ze||0)||Le,rt=new RegExp("".concat(O.utilities.escapeRegex(S),"$"),J?"g":"gi"),or=be.replace(rt,he),Fa=Le.replace(be,or),Zi=or.length-be.length,ko=(ze||Le.length)+Zi;ko<0&&(ko=0),O.setInput(Fa,O.options.inputName,!0),O.setCaretPosition(ko),Me&&typeof O.options.onKeyPress=="function"&&O.options.onKeyPress(U,X),typeof O.options.onChange=="function"&&O.options.onChange(O.getInput(O.options.inputName,!0),X),typeof O.options.onChangeAll=="function"&&O.options.onChangeAll(O.getAllInputs(),X)}})}},{key:"handleButtonClicked",value:function(S,$){var D=this.options,O=D.inputName,U=O===void 0?this.defaultName:O,X=D.debug;if(S!=="{//}"){this.input[U]||(this.input[U]="");var ee=this.utilities.getUpdatedInput(S,this.input[U],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(S)&&this.activeInputElement&&this.input[U]&&this.input[U]===ee&&this.caretPosition===0&&this.caretPositionEnd===ee.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(S,$);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(S,$),this.input[U]!==ee&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(ee))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,ee))return;var J=this.utilities.getUpdatedInput(S,this.input[U],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(J,this.options.inputName,!0),X&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),$==null?void 0:$.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),$),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),$),$!=null&&$.target&&this.options.enableLayoutCandidates){var ie,Me=this.getInputCandidates(ee),he=Me.candidateKey,Le=Me.candidateValue;he&&Le?this.showCandidatesBox(he,Le,this.keyboardDOM):(ie=this.candidateBox)===null||ie===void 0||ie.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),X&&console.log("Key pressed:",S)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(S){this.options.syncInstanceInputs?this.dispatch(function($){$.isMouseHold=S}):this.isMouseHold=S}},{key:"handleButtonMouseDown",value:function(S,$){var D=this;$&&(this.options.preventMouseDownDefault&&$.preventDefault(),this.options.stopMouseDownPropagation&&$.stopPropagation(),$.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(D.getMouseHold()&&(!S.includes("{")&&!S.includes("}")||S==="{delete}"||S==="{backspace}"||S==="{bksp}"||S==="{space}"||S==="{tab}")||S==="{arrowright}"||S==="{arrowleft}"||S==="{arrowup}"||S==="{arrowdown}")&&(D.options.debug&&console.log("Button held:",S),D.handleButtonHold(S)),clearTimeout(D.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(S,$){var D=this;$&&(this.options.preventMouseUpDefault&&$.preventDefault&&$.preventDefault(),this.options.stopMouseUpPropagation&&$.stopPropagation&&$.stopPropagation(),!($.target===this.keyboardDOM||$.target&&this.keyboardDOM.contains($.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&($.target===this.candidateBox.candidateBoxElement||$.target&&this.candidateBox.candidateBoxElement.contains($.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(O){O.classList.remove(D.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),S&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(S,$)}},{key:"handleKeyboardContainerMouseDown",value:function(S){this.options.preventMouseDownDefault&&S.preventDefault()}},{key:"handleButtonHold",value:function(S){var $=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){$.getMouseHold()?($.handleButtonClicked(S),$.handleButtonHold(S)):clearTimeout($.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var S=this;this.dispatch(function($){$.replaceInput(S.input),$.setCaretPosition(S.caretPosition,S.caretPositionEnd)})}},{key:"clearInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[S]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,$=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!$&&this.syncInstanceInputs(),this.options.rtl?""+this.input[S].replace("","").replace("","")+"":this.input[S]}},{key:"getAllInputs",value:function(){var S=this,$={};return Object.keys(this.input).forEach(function(D){$[D]=S.getInput(D,!0)}),$}},{key:"setInput",value:function(S){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,D=arguments.length>2?arguments[2]:void 0;this.input[$]=S,!D&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(S){this.input=S}},{key:"setOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$=this.changedOptions(S);this.options=Object.assign(this.options,S),$.length&&(this.options.debug&&console.log("changedOptions",$),this.onSetOptions($),this.render())}},{key:"changedOptions",value:function(S){var $=this;return Object.keys(S).filter(function(D){return JSON.stringify(S[D])!==JSON.stringify($.options[D])})}},{key:"onSetOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];S.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(S.includes("layoutCandidatesPageSize")||S.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new H({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(S){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function($){S(window.SimpleKeyboardInstances[$],$)})}},{key:"addButtonTheme",value:function(S,$){var D=this;$&&S&&(S.split(" ").forEach(function(O){$.split(" ").forEach(function(U){D.options.buttonTheme||(D.options.buttonTheme=[]);var X=!1;D.options.buttonTheme.map(function(ee){if(ee!=null&&ee.class.split(" ").includes(U)){X=!0;var J=ee.buttons.split(" ");J.includes(O)||(X=!0,J.push(O),ee.buttons=J.join(" "))}return ee}),X||D.options.buttonTheme.push({class:U,buttons:S})})}),this.render())}},{key:"removeButtonTheme",value:function(S,$){var D=this;if(!S&&!$)return this.options.buttonTheme=[],void this.render();S&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(S.split(" ").forEach(function(O){var U;(U=D.options)===null||U===void 0||(U=U.buttonTheme)===null||U===void 0||U.map(function(X,ee){if(X&&$&&$.includes(X.class)||!$){var J,ie,Me=(J=X)===null||J===void 0?void 0:J.buttons.split(" ").filter(function(he){return he!==O});X&&Me!=null&&Me.length?X.buttons=Me.join(" "):((ie=D.options.buttonTheme)===null||ie===void 0||ie.splice(ee,1),X=null)}return X})}),this.render())}},{key:"getButtonElement",value:function(S){var $,D=this.buttonElements[S];return D&&($=D.length>1?D:D[0]),$}},{key:"inputPatternIsValid",value:function(S){var $,D=this.options.inputPattern;if(($=D instanceof RegExp?D:D[this.options.inputName||this.defaultName])&&S){var O=$.test(S);return this.options.debug&&console.log('inputPattern ("'.concat($,'"): ').concat(O?"passed":"did not pass!")),O}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var S=this.options.physicalKeyboardHighlightPreventDefault,$=S!==void 0&&S;document.addEventListener("keyup",this.handleKeyUp,$),document.addEventListener("keydown",this.handleKeyDown,$),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(S){this.caretEventHandler(S),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(S)}},{key:"handleKeyDown",value:function(S){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(S)}},{key:"handleMouseUp",value:function(S){this.caretEventHandler(S)}},{key:"handleTouchEnd",value:function(S){this.caretEventHandler(S)}},{key:"handleSelect",value:function(S){this.caretEventHandler(S)}},{key:"handleSelectionChange",value:function(S){navigator.userAgent.includes("Firefox")||this.caretEventHandler(S)}},{key:"caretEventHandler",value:function(S){var $,D=this;S.target.tagName&&($=S.target.tagName.toLowerCase()),this.dispatch(function(O){var U=S.target===O.keyboardDOM||S.target&&O.keyboardDOM.contains(S.target);if(D.options.syncInstanceInputs&&Array.isArray(S.path)&&(U=S.path.some(function(J){var ie;return J==null||(ie=J.hasAttribute)===null||ie===void 0?void 0:ie.call(J,"data-skInstance")})),($==="textarea"||$==="input"&&["text","search","url","tel","password"].includes(S.target.type))&&!O.options.disableCaretPositioning){var X=S.target.selectionStart,ee=S.target.selectionEnd;O.options.rtl&&(X=O.utilities.getRtlOffset(X,O.getInput()),ee=O.utilities.getRtlOffset(ee,O.getInput())),O.setCaretPosition(X,ee),D.activeInputElement=S.target,O.options.debug&&console.log("Caret at: ",O.getCaretPosition(),O.getCaretPositionEnd(),S&&S.target.tagName.toLowerCase(),"(".concat(O.keyboardDOMClass,")"),S==null?void 0:S.type)}else!O.options.disableCaretPositioning&&U||(S==null?void 0:S.type)==="selectionchange"||(O.setCaretPosition(null),D.activeInputElement=null,O.options.debug&&console.log('Caret position reset due to "'.concat(S==null?void 0:S.type,'" event'),S))})}},{key:"recurseButtons",value:function(S){var $=this;S&&Object.keys(this.buttonElements).forEach(function(D){return $.buttonElements[D].forEach(S)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var S=this.options.physicalKeyboardHighlightPreventDefault,$=S!==void 0&&S;document.removeEventListener("keyup",this.handleKeyUp,$),document.removeEventListener("keydown",this.handleKeyDown,$),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(D){D&&(D.onpointerdown=null,D.onpointerup=null,D.onpointercancel=null,D.ontouchstart=null,D.ontouchend=null,D.ontouchcancel=null,D.onclick=null,D.onmousedown=null,D.onmouseup=null,D.remove(),D=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(S){var $=this.options.buttonTheme,D=[];return Array.isArray($)&&$.forEach(function(O){if(O&&O.class&&typeof O.class=="string"&&O.buttons&&typeof O.buttons=="string"){var U=O.class.split(" ");O.buttons.split(" ").includes(S)&&(D=[].concat(T(D),T(U)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',O)}),D}},{key:"setDOMButtonAttributes",value:function(S,$){var D=this.options.buttonAttributes;Array.isArray(D)&&D.forEach(function(O){O.attribute&&typeof O.attribute=="string"&&O.value&&typeof O.value=="string"&&O.buttons&&typeof O.buttons=="string"?O.buttons.split(" ").includes(S)&&$(O.attribute,O.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',O)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(S){if(S.target.classList.contains("hg-button"))return S.preventDefault(),S.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var S=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function($){var D=new $(S);D.init&&D.init(S)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(S,$){return!!this.modules[S]&&this.modules[S][$]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(S,$,D,O){var U=this,X=Array.from(S.children),ee=0;return X.length&&D.forEach(function(J,ie){var Me=O[ie];if(!(Me&&Me>J))return!1;var he=J-ee,Le=Me-ee,ze=document.createElement("div");ze.className+="hg-button-container";var be="".concat(U.options.layoutName,"-r").concat($,"c").concat(ie);ze.setAttribute("data-skUID",be);var rt=X.splice(he,Le-he+1);ee=Le-he,rt.forEach(function(or){return ze.appendChild(or)}),X.splice(he,0,ze),S.innerHTML="",X.forEach(function(or){return S.appendChild(or)}),U.options.debug&&console.log("rowDOMContainer",rt,he,Le,ee+1)}),S}},{key:"render",value:function(){var S=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var $="hg-layout-".concat(this.options.layoutName),D=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},O=this.options.useTouchEvents||!1,U=O?"hg-touch-events":"",X=this.options.useMouseEvents||!1,ee=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,$,this.keyboardPluginClasses,U),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",D[this.options.layoutName||this.defaultName].forEach(function(J,ie){var Me=J.split(" ");S.options.excludeFromLayout&&S.options.excludeFromLayout[S.options.layoutName||S.defaultName]&&(Me=Me.filter(function(be){return S.options.excludeFromLayout&&!S.options.excludeFromLayout[S.options.layoutName||S.defaultName].includes(be)}));var he=document.createElement("div");he.className+="hg-row";var Le=[],ze=[];Me.forEach(function(be,rt){var or,Fa=!ee&&typeof be=="string"&&be.length>1&&be.indexOf("[")===0,Zi=!ee&&typeof be=="string"&&be.length>1&&be.indexOf("]")===be.length-1;Fa&&(Le.push(rt),be=be.replace(/\[/g,"")),Zi&&(ze.push(rt),be=be.replace(/\]/g,""));var ko=S.utilities.getButtonClass(be),_o=S.utilities.getButtonDisplayName(be,S.options.display,S.options.mergeDisplay),vL=S.options.useButtonTag?"button":"div",gn=document.createElement(vL);gn.className+="hg-button ".concat(ko),(or=gn.classList).add.apply(or,T(S.getButtonThemeClasses(be))),S.setDOMButtonAttributes(be,function(zt,wL){gn.setAttribute(zt,wL)}),S.activeButtonClass="hg-activeButton",!S.utilities.pointerEventsSupported()||O||X?O?(gn.ontouchstart=function(zt){S.handleButtonClicked(be,zt),S.handleButtonMouseDown(be,zt)},gn.ontouchend=function(zt){S.handleButtonMouseUp(be,zt)},gn.ontouchcancel=function(zt){S.handleButtonMouseUp(be,zt)}):(gn.onclick=function(zt){S.setMouseHold(!1),typeof S.options.onKeyReleased!="function"&&S.handleButtonClicked(be,zt)},gn.onmousedown=function(zt){typeof S.options.onKeyReleased!="function"||S.isMouseHold||S.handleButtonClicked(be,zt),S.handleButtonMouseDown(be,zt)},gn.onmouseup=function(zt){S.handleButtonMouseUp(be,zt)}):(gn.onpointerdown=function(zt){S.handleButtonClicked(be,zt),S.handleButtonMouseDown(be,zt)},gn.onpointerup=function(zt){S.handleButtonMouseUp(be,zt)},gn.onpointercancel=function(zt){S.handleButtonMouseUp(be,zt)}),gn.setAttribute("data-skBtn",be);var yL="".concat(S.options.layoutName,"-r").concat(ie,"b").concat(rt);gn.setAttribute("data-skBtnUID",yL);var Yk=document.createElement("span");Yk.innerHTML=_o,gn.appendChild(Yk),S.buttonElements[be]||(S.buttonElements[be]=[]),S.buttonElements[be].push(gn),he.appendChild(gn)}),he=S.parseRowDOMContainers(he,ie,Le,ze),S.keyboardRowsDOM.appendChild(he)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||O||X?O?(document.ontouchend=function(J){return S.handleButtonMouseUp(void 0,J)},document.ontouchcancel=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.ontouchstart=function(J){return S.handleKeyboardContainerMouseDown(J)}):O||(document.onmouseup=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.onmousedown=function(J){return S.handleKeyboardContainerMouseDown(J)}):(document.onpointerup=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.onpointerdown=function(J){return S.handleKeyboardContainerMouseDown(J)}),this.onInit())}}],z&&W(I.prototype,z),Object.defineProperty(I,"prototype",{writable:!1}),B}(),Q=K,ae=Q;return c}()},787:function(a){a.exports=n}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var c=i[a]={exports:{}};return r[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return m},default:function(){return w}});var a=s(787);function l(v){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},l(v)}function c(v,y){var x=Object.keys(v);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(v);y&&(k=k.filter(function(_){return Object.getOwnPropertyDescriptor(v,_).enumerable})),x.push.apply(x,k)}return x}function u(v){for(var y=1;y<arguments.length;y++){var x=arguments[y]!=null?arguments[y]:{};y%2?c(Object(x),!0).forEach(function(k){d(v,k,x[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(x)):c(Object(x)).forEach(function(k){Object.defineProperty(v,k,Object.getOwnPropertyDescriptor(x,k))})}return v}function d(v,y,x){var k;return k=function(_,P){if(l(_)!="object"||!_)return _;var A=_[Symbol.toPrimitive];if(A!==void 0){var C=A.call(_,P||"default");if(l(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(_)}(y,"string"),(y=l(k)=="symbol"?k:String(k))in v?Object.defineProperty(v,y,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[y]=x,v}var f=function(v){return u(u({},v),{},{keyboardRef:null})},h=s(689),p=s.n(h),m=function(v){var y=v.baseClass||"react-simple-keyboard",x=a.useRef(null),k=a.useRef(null),_=a.useRef(null),P=a.useRef(v);return a.useEffect(function(){return function(){_.current&&_.current.destroy(),x.current=!1}},[]),a.useEffect(function(){var A=function(L){return u(u({},L),{},{theme:"simple-keyboard ".concat(L.theme||"hg-theme-default")})}(v);if(!x.current){x.current=!0,A.debug&&console.log("ReactSimpleKeyboard: Init");var C=k.current,N=".".concat(y);_.current=new(p())(C||N,A),A.keyboardRef&&A.keyboardRef(_.current)}var R=function(L,H){var T=f(H),V=f(L);return Object.keys(T).filter(function(q){return T[q]!==V[q]})}(P.current,A);if(R.length){var M=_.current;P.current=A,M==null||M.setOptions(A),A.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",R)}},[x,y,P,v]),a.createElement("div",{className:y,ref:k})},w=m}(),o}()})})(ZI);var PZ=ZI.exports;const $Z=xu(PZ),TZ={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w  r t y    p  +","{lock}  s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W  R T Y    P  *","{lock}  S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y  i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y  I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},OZ={en:{"{bksp}":"Backspace ","{enter}":"Enter ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Caps Lock ","{space}":"Space"},es:{"{bksp}":"","{enter}":"Intro ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Bloq Mays ","{space}":"Espacio"}},bA="          ",xA="  ";function NZ(){const t=AS(),e=pt(),{status:n,dispatch:r,devices:i}=mn(),[s,o]=g.useState("none"),[a,l]=g.useState(!1),[c,u]=g.useState(!1),d=g.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),f=g.useCallback(h=>{i.keyboard&&n.type==="running"&&n.waitingForInput&&r("keyboard.sendChar",h)},[n,r,i.keyboard]);return i.keyboard?b.jsxs("div",{className:"absolute left-[1200px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),b.jsx($Z,{theme:Fe("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:TZ,display:OZ[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:bA},{class:"hg-diaeresisDeadKeyButton",buttons:xA}],disableButtonHold:!0,onKeyPress:h=>{if(h==="{shiftleft}"||h==="{shiftright}"){o(p=>p==="none"?"once":"none");return}if(h==="{lock}"){o(p=>p==="none"?"lock":"none");return}if(t==="es"){if(a){bA.includes(h)&&(l(!1),s==="once"&&o("none"),f(h));return}else if(h===""){l(!0);return}if(c){xA.includes(h)&&(u(!1),s==="once"&&o("none"),f(h));return}else if(h===""){u(!0);return}}s==="once"&&o("none"),f(h==="{bksp}"?"\b":h==="{enter}"?`
`:h==="{tab}"?"	":h==="{space}"?" ":h)}})]}):null}function RZ(){const t=pt(),{devices:e}=mn(),n=Xt(rk).toArray();return e.leds?b.jsxs("div",{className:"absolute left-[1300px] top-[828px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),b.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((r,i)=>b.jsx("div",{className:Fe("relative h-7 w-7 rounded-full transition",r?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:b.jsx("div",{className:Fe("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",r?"opacity-100":"opacity-0")})},i))})]}):null}const QI=g.forwardRef(({className:t,type:e,...n},r)=>b.jsx("input",{type:e,className:Fe("flex h-10 w-full rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-900 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-stone-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));QI.displayName="Input";const MZ=g.forwardRef((t,e)=>g.createElement(Ge.label,bt({},t,{ref:e,onMouseDown:n=>{var r;(r=t.onMouseDown)===null||r===void 0||r.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),e3=MZ,t3=g.forwardRef(({className:t,...e},n)=>b.jsx(e3,{ref:n,className:Fe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...e}));t3.displayName=e3.displayName;function DZ(){const t=pt(),e=Xt(IX),n=Math.ceil(e.length/2),r=Xt(hu),[i,s]=Cu(VD),o=g.useId(),[a,l]=g.useState(""),c=g.useCallback(()=>{const f=/^([\da-f]+)h?$/i.exec(a);if(!f||!f[1]){pr({title:t("computer.memory.address-must-be-integer"),variant:"error"});return}let h=parseInt(f[1],16);if(h===ge.MAX_ADDRESS+1)h-=1;else if(!ge.inRange(h)){pr({title:t("computer.memory.address-out-of-range"),variant:"error"});return}s(ge.from(h))},[t,a,s]),u=g.useCallback(()=>{try{let h=(i??r).value+e.length;h===ge.MAX_ADDRESS+1&&(h-=1);const p=ge.from(h);l(p.toString()),s(p)}catch{console.error("Invalid PageUp")}},[r,i,s,e.length]);eo("PageUp",f=>{f.preventDefault(),u()},void 0,[u]);const d=g.useCallback(()=>{try{const f=i??r,h=ge.from(f.value-e.length);l(h.toString()),s(h)}catch{console.error("Invalid PageUp")}},[r,i,s,e.length]);return eo("PageDown",f=>{f.preventDefault(),d()},void 0,[u]),b.jsxs("div",{className:"absolute left-[800px] top-0 z-10 h-[460px] w-[250px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.memory.name")}),b.jsxs("div",{className:"mx-4 my-2",children:[b.jsx(t3,{htmlFor:o,children:t("computer.memory.fix-address")}),b.jsxs("div",{className:"mt-1 flex items-center gap-1",children:[b.jsx("button",{className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-2 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",disabled:e.at(0).address.value===ge.MIN_ADDRESS,title:t("computer.memory.address-decrement"),onClick:d,children:b.jsx("span",{className:"icon-[lucide--chevron-left] h-4 w-4"})}),b.jsxs("div",{className:"relative",children:[b.jsx(QI,{className:"font-mono",placeholder:"2000h",type:"text",enterKeyHint:"go",id:o,value:a,onChange:f=>l(f.currentTarget.value),onKeyDown:f=>{f.key==="Enter"&&c()}}),b.jsx("button",{title:t("computer.memory.unfix-address"),className:Fe("absolute right-2 top-3",!i&&"hidden"),onClick:()=>{l(""),s(null)},children:b.jsx("span",{className:"icon-[lucide--x] h-4 w-4 text-stone-500 transition-colors hover:text-stone-300"})})]}),b.jsx("button",{className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-2 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",disabled:e.at(-1).address.value===ge.MAX_ADDRESS,title:t("computer.memory.address-decrement"),onClick:u,children:b.jsx("span",{className:"icon-[lucide--chevron-right] h-4 w-4"})})]})]}),b.jsxs("div",{className:"m-4 flex w-min items-start overflow-hidden rounded-lg border border-stone-600",children:[b.jsx("table",{className:"border-r border-stone-600 font-mono text-lg",children:b.jsx("tbody",{children:e.slice(0,n).map((f,h)=>g.createElement(SA,{...f,key:h}))})}),b.jsx("table",{className:"font-mono text-lg",children:b.jsx("tbody",{children:e.slice(n).map((f,h)=>g.createElement(SA,{...f,key:h}))})})]})]})}function SA({address:t,value:e}){const n=pt(),r=Xt(hu),i=n("computer.memory.cell",t);return b.jsxs(YI,{children:[b.jsx(JI,{asChild:!0,children:b.jsxs(Gt.tr,{title:i,className:"cursor-pointer border-b border-stone-600 odd:bg-stone-900 even:bg-stone-800 last-of-type:border-b-0",style:t.value===r.value?ft("memory.operating-cell"):void 0,children:[b.jsx("td",{className:"border-r border-stone-600 px-2 py-1 font-thin",children:t.toString()}),b.jsx("td",{className:"border-r border-stone-600 px-2 py-1 last-of-type:border-r-0",children:e.toString("hex")})]})}),b.jsxs(Ak,{className:"w-60",children:[b.jsx("p",{className:"px-4 py-2 font-medium text-white",children:i}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(s=>b.jsxs("li",{children:[b.jsx("b",{className:"font-medium",children:n(`generics.byte-representation.${s}`)}),":"," ",b.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(s)})]},s))})]})]})}function IZ(){const t=pt(),{devices:e}=mn();return e.pic?b.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsxs("div",{className:"flex items-start",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),b.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[b.jsx(jr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:sk,springs:"pic.IMR",emphasis:!0}),b.jsx(jr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:ok,springs:"pic.IRR",emphasis:!0}),b.jsx(jr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:ak,springs:"pic.ISR",emphasis:!0})]})]}),b.jsx("hr",{className:"mb-2 border-stone-600"}),b.jsx("div",{className:"grid h-full w-full grid-cols-4 items-center",children:Og.map((n,r)=>b.jsx(jr,{name:`INT${r}`,title:t("generics.io-register",`INT${r}`,36+r),valueAtom:n,springs:`pic.INT${r}`,className:"mx-auto"},r))})]}):null}function LZ(){const t=pt(),{devices:e}=mn();return e.pio?b.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"mb-2 block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[b.jsx(jr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:lk,springs:"pio.PA"}),b.jsx(jr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:uk,springs:"pio.CA"})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[b.jsx(jr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:ck,springs:"pio.PB"}),b.jsx(jr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:dk,springs:"pio.CB"})]})]}):null}const BZ="_printer_fbkny_2",FZ="_shadow_fbkny_6",jZ="_sides_fbkny_11",zZ="_front_fbkny_22",UZ="_trailContainer_fbkny_27",VZ="_trail_fbkny_27",HZ="_paper_fbkny_33",Ua={printer:BZ,shadow:FZ,sides:jZ,front:zZ,trailContainer:UZ,trail:VZ,paper:HZ},WZ=Array.from({length:5},(t,e)=>e);function GZ(){const t=pt(),{devices:e}=mn(),n=Xt(Ng),r=Xt(Rg);return e.printer?b.jsx("div",{className:"absolute left-[1250px] top-[750px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:b.jsxs("div",{className:Ua.printer,title:t("computer.printer.name"),children:[b.jsx("div",{className:Ua.shadow}),b.jsx("div",{className:Ua.sides}),b.jsxs("div",{className:Ua.front,children:[b.jsx("div",{className:Ua.trailContainer,children:b.jsx("div",{className:Ua.trail,children:b.jsx("pre",{className:Ua.paper,children:r})})}),b.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:WZ.map(i=>{const s=n[i]?kM(n[i].unsigned):null;return b.jsx("span",{className:Fe("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},i)})}),b.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:b.jsx(Gt.div,{className:"h-full bg-mantis-400",style:{width:ft("printer.printing.progress").to(i=>`${i*100}%`),opacity:ft("printer.printing.opacity")}})})]})]})}):null}const KZ="_container_6nvz7_2",XZ="_text_6nvz7_22",kA={container:KZ,text:XZ};function qZ(){const t=pt(),{devices:e}=mn(),n=Xt(fk);return e.screen?b.jsxs("div",{className:"absolute left-[1200px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),b.jsx("div",{className:kA.container,children:b.jsx("pre",{className:kA.text,children:n})})]}):null}function YZ(){const t=pt(),{status:e,dispatch:n,devices:r}=mn(),i=Xt(hk).toArray();return r.switches?b.jsxs("div",{className:"absolute left-[1300px] top-[698px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),b.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((s,o)=>b.jsx("div",{className:"w-6",children:b.jsx(Dg,{checked:s,onCheckedChange:()=>n("switch.toggle",o),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800",disabled:e.type!=="running"})},o))})]}):null}function JZ(){const t=pt(),{devices:e}=mn();return e.timer?b.jsxs("div",{className:"absolute left-[500px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),b.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-evenly",children:[b.jsx(jr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:pk,springs:"timer.CONT"}),b.jsx(jr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:mk,springs:"timer.COMP"})]})]}):null}function n3(){const t=g.useRef(null);return b.jsx("div",{className:"relative h-full w-full",children:b.jsxs(qJ,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[b.jsx(ZJ,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:b.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[b.jsx(iZ,{}),b.jsx(xZ,{}),b.jsx(DZ,{}),b.jsx(AZ,{}),b.jsx(IZ,{}),b.jsx(LZ,{}),b.jsx(JZ,{}),b.jsx(sZ,{}),b.jsx(EZ,{}),b.jsx(NZ,{}),b.jsx(RZ,{}),b.jsx(GZ,{}),b.jsx(YZ,{}),b.jsx(qZ,{})]})}),b.jsx(QJ,{wrapperRef:t})]})})}const ZZ=1024;let QZ=0;class F0{constructor(e,n){this.from=e,this.to=n}}class nt{constructor(e={}){this.id=QZ++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=_r.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}nt.closedBy=new nt({deserialize:t=>t.split(" ")});nt.openedBy=new nt({deserialize:t=>t.split(" ")});nt.group=new nt({deserialize:t=>t.split(" ")});nt.isolate=new nt({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});nt.contextHash=new nt({perNode:!0});nt.lookAhead=new nt({perNode:!0});nt.mounted=new nt({perNode:!0});class Lg{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[nt.mounted.id]}}const eQ=Object.create(null);class _r{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):eQ,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new _r(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(nt.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(nt.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}_r.none=new _r("",Object.create(null),0,8);class Pk{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}n.push(i?new _r(r.name,i,r.id,r.flags):r)}return new Pk(n)}}const kp=new WeakMap,_A=new WeakMap;var Cn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Cn||(Cn={}));class Bt{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Lg.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new _1(this.topNode,e)}cursorAt(e,n=0,r=0){let i=kp.get(this)||this.topNode,s=new _1(i);return s.moveTo(e,n),kp.set(this,s._tree),s}get topNode(){return new vi(this,0,0,null)}resolve(e,n=0){let r=Gf(kp.get(this)||this.topNode,e,n,!1);return kp.set(this,r),r}resolveInner(e,n=0){let r=Gf(_A.get(this)||this.topNode,e,n,!0);return _A.set(this,r),r}resolveStack(e,n=0){return rQ(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&Cn.IncludeAnonymous)>0;for(let l=this.cursor(o|Cn.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:Ok(_r.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new Bt(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new Bt(_r.none,n,r,i)))}static build(e){return iQ(e)}}Bt.empty=new Bt(_r.none,[],[],0);class $k{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new $k(this.buffer,this.index)}}class Pa{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return _r.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(r3(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let c=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,c)}return new Pa(s,o,this.set)}}function r3(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Gf(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof vi&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:Cn.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof vi&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class i3{cursor(e=0){return new _1(this,e)}getChild(e,n=null,r=null){let i=CA(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return CA(this,e,n,r)}resolve(e,n=0){return Gf(this,e,n,!1)}resolveInner(e,n=0){return Gf(this,e,n,!0)}matchContext(e){return k1(this,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class vi extends i3{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(r3(i,r,d,d+u.length)){if(u instanceof Pa){if(s&Cn.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,n,r-d,i);if(f>-1)return new ta(new tQ(o,u,e,d),null,f)}else if(s&Cn.IncludeAnonymous||!u.type.isAnonymous||Tk(u)){let f;if(!(s&Cn.IgnoreMounts)&&(f=Lg.get(u))&&!f.overlay)return new vi(f.tree,d,e,o);let h=new vi(u,d,e,o);return s&Cn.IncludeAnonymous||!h.type.isAnonymous?h:h.nextChild(n<0?u.children.length-1:0,n,r,i)}}}if(s&Cn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Cn.IgnoreOverlays)&&(i=Lg.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new vi(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function CA(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(;!i.type.is(n);)if(!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function k1(t,e,n=e.length-1){for(let r=t.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class tQ{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class ta extends i3{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new ta(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Cn.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new ta(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ta(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new ta(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new Bt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function s3(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let r=n instanceof vi&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new nQ(i,n)}class nQ{constructor(e,n){this.heads=e,this.node=n}get next(){return s3(this.heads)}}function rQ(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof vi?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,n)),s=o}else{let o=Lg.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new vi(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Gf(a,e,n,!1))}}return i?s3(i):r}class _1{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof vi)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof vi?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Cn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Cn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Cn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&Cn.IncludeAnonymous||a instanceof Pa||!a.type.isAnonymous||Tk(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new ta(this.buffer,n,this.stack[i]);return this.bufferNode=new ta(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&n&&n(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return k1(this.node,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return k1(this.node,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function Tk(t){return t.children.some(e=>e instanceof Pa||!e.type.isAnonymous||Tk(e))}function iQ(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=ZZ,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new $k(n,n.length):n,l=r.types,c=0,u=0;function d(_,P,A,C,N,R){let{id:M,start:L,end:H,size:T}=a,V=u;for(;T<0;)if(a.next(),T==-1){let Z=s[M];A.push(Z),C.push(L-_);return}else if(T==-3){c=M;return}else if(T==-4){u=M;return}else throw new RangeError(`Unrecognized record size: ${T}`);let q=l[M],te,W,j=L-_;if(H-L<=i&&(W=w(a.pos-P,N))){let Z=new Uint16Array(W.size-W.skip),K=a.pos-W.size,Q=Z.length;for(;a.pos>K;)Q=v(W.start,Z,Q);te=new Pa(Z,H-W.start,r),j=W.start-_}else{let Z=a.pos-T;a.next();let K=[],Q=[],ae=M>=o?M:-1,B=0,I=H;for(;a.pos>Z;)ae>=0&&a.id==ae&&a.size>=0?(a.end<=I-i&&(p(K,Q,L,B,a.end,I,ae,V),B=K.length,I=a.end),a.next()):R>2500?f(L,Z,K,Q):d(L,Z,K,Q,ae,R+1);if(ae>=0&&B>0&&B<K.length&&p(K,Q,L,B,L,I,ae,V),K.reverse(),Q.reverse(),ae>-1&&B>0){let z=h(q);te=Ok(q,K,Q,0,K.length,0,H-L,z,z)}else te=m(q,K,Q,H-L,V-H)}A.push(te),C.push(j)}function f(_,P,A,C){let N=[],R=0,M=-1;for(;a.pos>P;){let{id:L,start:H,end:T,size:V}=a;if(V>4)a.next();else{if(M>-1&&H<M)break;M<0&&(M=T-i),N.push(L,H,T),R++,a.next()}}if(R){let L=new Uint16Array(R*4),H=N[N.length-2];for(let T=N.length-3,V=0;T>=0;T-=3)L[V++]=N[T],L[V++]=N[T+1]-H,L[V++]=N[T+2]-H,L[V++]=V;A.push(new Pa(L,N[2]-H,r)),C.push(H-_)}}function h(_){return(P,A,C)=>{let N=0,R=P.length-1,M,L;if(R>=0&&(M=P[R])instanceof Bt){if(!R&&M.type==_&&M.length==C)return M;(L=M.prop(nt.lookAhead))&&(N=A[R]+M.length+L)}return m(_,P,A,C,N)}}function p(_,P,A,C,N,R,M,L){let H=[],T=[];for(;_.length>C;)H.push(_.pop()),T.push(P.pop()+A-N);_.push(m(r.types[M],H,T,R-N,L-R)),P.push(N-A)}function m(_,P,A,C,N=0,R){if(c){let M=[nt.contextHash,c];R=R?[M].concat(R):[M]}if(N>25){let M=[nt.lookAhead,N];R=R?[M].concat(R):[M]}return new Bt(_,P,A,C,R)}function w(_,P){let A=a.fork(),C=0,N=0,R=0,M=A.end-i,L={size:0,start:0,skip:0};e:for(let H=A.pos-_;A.pos>H;){let T=A.size;if(A.id==P&&T>=0){L.size=C,L.start=N,L.skip=R,R+=4,C+=4,A.next();continue}let V=A.pos-T;if(T<0||V<H||A.start<M)break;let q=A.id>=o?4:0,te=A.start;for(A.next();A.pos>V;){if(A.size<0)if(A.size==-3)q+=4;else break e;else A.id>=o&&(q+=4);A.next()}N=te,C+=T,R+=q}return(P<0||C==_)&&(L.size=C,L.start=N,L.skip=R),L.size>4?L:void 0}function v(_,P,A){let{id:C,start:N,end:R,size:M}=a;if(a.next(),M>=0&&C<o){let L=A;if(M>4){let H=a.pos-(M-4);for(;a.pos>H;)A=v(_,P,A)}P[--A]=L,P[--A]=R-_,P[--A]=N-_,P[--A]=C}else M==-3?c=C:M==-4&&(u=C);return A}let y=[],x=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,y,x,-1,0);let k=(e=t.length)!==null&&e!==void 0?e:y.length?x[0]+y[0].length:0;return new Bt(l[t.topID],y.reverse(),x.reverse(),k)}const EA=new WeakMap;function wm(t,e){if(!t.isAnonymous||e instanceof Pa||e.type!=t)return 1;let n=EA.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Bt)){n=1;break}n+=wm(t,r)}EA.set(e,n)}return n}function Ok(t,e,n,r,i,s,o,a,l){let c=0;for(let p=r;p<i;p++)c+=wm(t,e[p]);let u=Math.ceil(c*1.5/8),d=[],f=[];function h(p,m,w,v,y){for(let x=w;x<v;){let k=x,_=m[x],P=wm(t,p[x]);for(x++;x<v;x++){let A=wm(t,p[x]);if(P+A>=u)break;P+=A}if(x==k+1){if(P>u){let A=p[k];h(A.children,A.positions,0,A.children.length,m[k]+y);continue}d.push(p[k])}else{let A=m[x-1]+p[x-1].length-_;d.push(Ok(t,p,m,k,x,_,A,null,l))}f.push(_+y-s)}}return h(e,n,r,i,0),(a||l)(d,f,o)}class pl{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new pl(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=r)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let h=Math.max(f.from,l)-c,p=Math.min(f.to,d)-c;f=h>=p?null:new pl(h,p,f.tree,f.offset+c,a>0,!!u)}if(f&&i.push(f),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}class o3{startParse(e,n,r){return typeof e=="string"&&(e=new sQ(e)),r=r?r.length?r.map(i=>new F0(i.from,i.to)):[new F0(0,0)]:[new F0(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class sQ{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new nt({perNode:!0});let oQ=0;class Sn{constructor(e,n,r){this.set=e,this.base=n,this.modified=r,this.id=oQ++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new Sn([],null,[]);if(n.set.push(n),e)for(let r of e.set)n.set.push(r);return n}static defineModifier(){let e=new Bg;return n=>n.modified.indexOf(e)>-1?n:Bg.get(n.base||n,n.modified.concat(e).sort((r,i)=>r.id-i.id))}}let aQ=0;class Bg{constructor(){this.instances=[],this.id=aQ++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&lQ(n,a.modified));if(r)return r;let i=[],s=new Sn(i,e,n);for(let a of n)a.instances.push(s);let o=cQ(n);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(Bg.get(a,l));return s}}function lQ(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function cQ(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function uQ(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let d=0;;){if(a=="..."&&d>0&&d+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==i.length)break;let h=i[d++];if(d==i.length&&h=="!"){o=0;break}if(h!="/")throw new RangeError("Invalid path: "+i);a=i.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new Fg(r,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return a3.add(e)}const a3=new nt;class Fg{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Fg.empty=new Fg([],2,null);function l3(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function dQ(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function fQ(t,e,n,r=0,i=t.length){let s=new hQ(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class hQ{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(h=>!h.scope||h.scope(o)));let c=i,u=pQ(e)||Fg.empty,d=dQ(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(nt.mounted);if(f&&f.overlay){let h=e.node.enter(f.overlay[0].from+a,1),p=this.highlighters.filter(w=>!w.scope||w.scope(f.tree.type)),m=e.firstChild();for(let w=0,v=a;;w++){let y=w<f.overlay.length?f.overlay[w]:null,x=y?y.from+a:l,k=Math.max(n,v),_=Math.min(r,x);if(k<_&&m)for(;e.from<_&&(this.highlightRange(e,k,_,i,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=x||!e.nextSibling())););if(!y||x>r)break;v=y.to+a,v>n&&(this.highlightRange(h.cursor(),Math.max(n,y.from+a),Math.min(r,v),"",p),this.startSpan(Math.min(r,v),c))}m&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function pQ(t){let e=t.type.prop(a3);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const de=Sn.define,_p=de(),No=de(),AA=de(No),PA=de(No),Ro=de(),Cp=de(Ro),j0=de(Ro),rs=de(),Va=de(rs),ts=de(),ns=de(),C1=de(),rd=de(C1),Ep=de(),Ie={comment:_p,lineComment:de(_p),blockComment:de(_p),docComment:de(_p),name:No,variableName:de(No),typeName:AA,tagName:de(AA),propertyName:PA,attributeName:de(PA),className:de(No),labelName:de(No),namespace:de(No),macroName:de(No),literal:Ro,string:Cp,docString:de(Cp),character:de(Cp),attributeValue:de(Cp),number:j0,integer:de(j0),float:de(j0),bool:de(Ro),regexp:de(Ro),escape:de(Ro),color:de(Ro),url:de(Ro),keyword:ts,self:de(ts),null:de(ts),atom:de(ts),unit:de(ts),modifier:de(ts),operatorKeyword:de(ts),controlKeyword:de(ts),definitionKeyword:de(ts),moduleKeyword:de(ts),operator:ns,derefOperator:de(ns),arithmeticOperator:de(ns),logicOperator:de(ns),bitwiseOperator:de(ns),compareOperator:de(ns),updateOperator:de(ns),definitionOperator:de(ns),typeOperator:de(ns),controlOperator:de(ns),punctuation:C1,separator:de(C1),bracket:rd,angleBracket:de(rd),squareBracket:de(rd),paren:de(rd),brace:de(rd),content:rs,heading:Va,heading1:de(Va),heading2:de(Va),heading3:de(Va),heading4:de(Va),heading5:de(Va),heading6:de(Va),contentSeparator:de(rs),list:de(rs),quote:de(rs),emphasis:de(rs),strong:de(rs),link:de(rs),monospace:de(rs),strikethrough:de(rs),inserted:de(),deleted:de(),changed:de(),invalid:de(),meta:Ep,documentMeta:de(Ep),annotation:de(Ep),processingInstruction:de(Ep),definition:Sn.defineModifier(),constant:Sn.defineModifier(),function:Sn.defineModifier(),standard:Sn.defineModifier(),local:Sn.defineModifier(),special:Sn.defineModifier()};l3([{tag:Ie.link,class:"tok-link"},{tag:Ie.heading,class:"tok-heading"},{tag:Ie.emphasis,class:"tok-emphasis"},{tag:Ie.strong,class:"tok-strong"},{tag:Ie.keyword,class:"tok-keyword"},{tag:Ie.atom,class:"tok-atom"},{tag:Ie.bool,class:"tok-bool"},{tag:Ie.url,class:"tok-url"},{tag:Ie.labelName,class:"tok-labelName"},{tag:Ie.inserted,class:"tok-inserted"},{tag:Ie.deleted,class:"tok-deleted"},{tag:Ie.literal,class:"tok-literal"},{tag:Ie.string,class:"tok-string"},{tag:Ie.number,class:"tok-number"},{tag:[Ie.regexp,Ie.escape,Ie.special(Ie.string)],class:"tok-string2"},{tag:Ie.variableName,class:"tok-variableName"},{tag:Ie.local(Ie.variableName),class:"tok-variableName tok-local"},{tag:Ie.definition(Ie.variableName),class:"tok-variableName tok-definition"},{tag:Ie.special(Ie.variableName),class:"tok-variableName2"},{tag:Ie.definition(Ie.propertyName),class:"tok-propertyName tok-definition"},{tag:Ie.typeName,class:"tok-typeName"},{tag:Ie.namespace,class:"tok-namespace"},{tag:Ie.className,class:"tok-className"},{tag:Ie.macroName,class:"tok-macroName"},{tag:Ie.propertyName,class:"tok-propertyName"},{tag:Ie.operator,class:"tok-operator"},{tag:Ie.comment,class:"tok-comment"},{tag:Ie.meta,class:"tok-meta"},{tag:Ie.invalid,class:"tok-invalid"},{tag:Ie.punctuation,class:"tok-punctuation"}]);var z0;const kc=new nt;function mQ(t){return Ee.define({combine:t?e=>e.concat(t):void 0})}const gQ=new nt;class Li{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Ye.prototype.hasOwnProperty("tree")||Object.defineProperty(Ye.prototype,"tree",{get(){return Yi(this)}}),this.parser=n,this.extension=[wu.of(this),Ye.languageData.of((s,o,a)=>{let l=$A(s,o,a),c=l.type.prop(kc);if(!c)return[];let u=s.facet(c),d=l.type.prop(gQ);if(d){let f=l.resolve(o-l.from,a);for(let h of d)if(h.test(f,s)){let p=s.facet(h.facet);return h.type=="replace"?p:p.concat(u)}}return u})].concat(r)}isActiveAt(e,n,r=-1){return $A(e,n,r).type.prop(kc)==this.data}findRegions(e){let n=e.facet(wu);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(kc)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(nt.mounted);if(a){if(a.tree.prop(kc)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof Bt&&i(c,s.positions[l]+o)}};return i(Yi(e),0),r}get allowsNesting(){return!0}}Li.setState=Ke.define();function $A(t,e,n){let r=t.facet(wu),i=Yi(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Cn.ExcludeBuffers))s.type.isTop&&(i=s);return i}function Yi(t){let e=t.field(Li.state,!1);return e?e.tree:Bt.empty}class vQ{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let id=null;class vu{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new vu(e,n,[],Bt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new vQ(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Bt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(pl.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(pl.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=id;id=this;try{return e()}finally{id=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=TA(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),r=pl.applyChanges(r,l),i=Bt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new vu(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=TA(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends o3{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=id;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Bt(_r.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return id}}function TA(t,e,n){return pl.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class yu{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new yu(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=vu.create(e.facet(wu).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new yu(r)}}Li.state=ir.define({create:yu.init,update(t,e){for(let n of e.effects)if(n.is(Li.setState))return n.value;return e.startState.facet(wu)!=e.state.facet(wu)?yu.init(e.state):t.apply(e)}});let c3=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(c3=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const U0=typeof navigator<"u"&&(!((z0=navigator.scheduling)===null||z0===void 0)&&z0.isInputPending)?()=>navigator.scheduling.isInputPending():null,yQ=Rn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Li.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Li.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=c3(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Li.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!U0?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>U0&&U0()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Li.setState.of(new yu(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>zi(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),wu=Ee.define({combine(t){return t.length?t[0]:null},enables:t=>[Li.state,yQ,Pe.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class wQ{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const u3=Ee.define(),Nk=Ee.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Dl(t){let e=t.facet(Nk);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function E1(t,e){let n="",r=t.tabSize,i=t.facet(Nk)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function bQ(t,e){t instanceof Ye&&(t=new Rk(t));for(let r of t.state.facet(u3)){let i=r(t,e);if(i!==void 0)return i}let n=Yi(t.state);return n.length>=e?SQ(t,n,e):null}class Rk{constructor(e,n={}){this.state=e,this.options=n,this.unit=Dl(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return oh(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const xQ=new nt;function SQ(t,e,n){let r=e.resolveStack(n),i=r.node.enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let o=i;o!=r.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return d3(r,t,n)}function d3(t,e,n){for(let r=t;r;r=r.next){let i=_Q(r.node);if(i)return i(Mk.create(e,n,r))}return 0}function kQ(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function _Q(t){let e=t.type.prop(xQ);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(nt.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>PQ(o,!0,1,void 0,s&&!kQ(o)?i.from:void 0)}return t.parent==null?CQ:null}function CQ(){return 0}class Mk extends Rk{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new Mk(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(EQ(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return d3(this.context.next,this.base,this.pos)}}function EQ(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function AQ(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?n:null;a=l.to}}function PQ(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=e?AQ(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const $Q=Ee.define(),TQ=new nt;function OQ(t,e,n){let r=Yi(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(TQ);if(l&&(a.to<r.length-50||r.length==t.doc.length||!NQ(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function NQ(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function f3(t,e,n){for(let r of t.facet($Q)){let i=r(t,e,n);if(i)return i}return OQ(t,e,n)}function h3(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Dk=Ke.define({map:h3}),ey=Ke.define({map:h3});function p3(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const yh=ir.define({create(){return Xe.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(Dk)&&!RQ(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(Ik),i=r?Xe.replace({widget:new jQ(r(e.state,n.value))}):OA;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(ey)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,(i,s)=>{i<r&&s>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return t},provide:t=>Pe.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(OA.range(r,i))}return Xe.set(e,!0)}});function m3(t,e,n){var r;let i=null;return(r=t.field(yh,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function RQ(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}function g3(t,e){return t.field(yh,!1)?e:e.concat(Ke.appendConfig.of(FQ()))}const MQ=t=>{for(let e of p3(t)){let n=f3(t.state,e.from,e.to);if(n)return t.dispatch({effects:g3(t.state,[Dk.of(n),v3(t,n)])}),!0}return!1},DQ=t=>{if(!t.state.field(yh,!1))return!1;let e=[];for(let n of p3(t)){let r=m3(t.state,n.from,n.to);r&&e.push(ey.of(r),v3(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function v3(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return Pe.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const IQ=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),s=f3(e,i.from,i.to);s&&n.push(Dk.of(s)),r=(s?t.lineBlockAt(s.to):i).to+1}return n.length&&t.dispatch({effects:g3(t.state,n)}),!!n.length},LQ=t=>{let e=t.state.field(yh,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(ey.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},BQ={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Ik=Ee.define({combine(t){return Na(t,BQ)}});function FQ(t){let e=[yh,zQ];return t&&e.push(Ik.of(t)),e}function y3(t,e){let{state:n}=t,r=n.facet(Ik),i=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=m3(t.state,a.from,a.to);l&&t.dispatch({effects:ey.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const OA=Xe.replace({widget:new class extends Ra{toDOM(t){return y3(t,null)}}});class jQ extends Ra{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return y3(e,this.value)}}const zQ=Pe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ty{constructor(e,n){this.specs=e;let r;function i(a){let l=va.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof Li?a=>a.prop(kc)==o.data:o?a=>a==o:void 0,this.style=l3(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new va(r):null,this.themeType=n.themeType}static define(e,n){return new ty(e,n||{})}}const A1=Ee.define(),w3=Ee.define({combine(t){return t.length?[t[0]]:null}});function V0(t){let e=t.facet(A1);return e.length?e:t.facet(w3)}function UQ(t,e){let n=[HQ],r;return t instanceof ty&&(t.module&&n.push(Pe.styleModule.of(t.module)),r=t.themeType),e!=null&&e.fallback?n.push(w3.of(t)):r?n.push(A1.computeN([Pe.darkTheme],i=>i.facet(Pe.darkTheme)==(r=="dark")?[t]:[])):n.push(A1.of(t)),n}class VQ{constructor(e){this.markCache=Object.create(null),this.tree=Yi(e.state),this.decorations=this.buildDeco(e,V0(e.state))}update(e){let n=Yi(e.state),r=V0(e.state),i=r!=V0(e.startState);n.length<e.view.viewport.to&&!i&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,n){if(!n||!this.tree.length)return Xe.none;let r=new Al;for(let{from:i,to:s}of e.visibleRanges)fQ(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Xe.mark({class:l})))},i,s);return r.finish()}}const HQ=ih.high(Rn.fromClass(VQ,{decorations:t=>t.decorations})),WQ=1e4,GQ="()[]{}",KQ=new nt;function P1(t,e,n){let r=t.prop(e<0?nt.openedBy:nt.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function $1(t){let e=t.type.prop(KQ);return e?e(t.node):t}function Ap(t,e,n,r={}){let i=r.maxScanDistance||WQ,s=r.brackets||GQ,o=Yi(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=P1(l.type,n,s);if(c&&l.from<l.to){let u=$1(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return XQ(t,e,n,l,u,c,s)}}return qQ(t,e,n,o,a.type,i,s)}function XQ(t,e,n,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do if(n<0?u.to<=r.from:u.from>=r.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=$1(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(P1(u.type,n,o))c++;else if(P1(u.type,-n,o)){if(c==0){let d=$1(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function qQ(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let f=0;!u.next().done&&f<=s;){let h=u.value;n<0&&(f+=h.length);let p=e+f*n;for(let m=n>0?0:h.length-1,w=n>0?h.length:-1;m!=w;m+=n){let v=o.indexOf(h[m]);if(!(v<0||r.resolveInner(p+m,1).type!=i))if(v%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:p+m,to:p+m+1},matched:v>>1==l>>1};d--}}n>0&&(f+=h.length)}return u.done?{start:c,matched:!1}:null}function NA(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let o=r;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class b3{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=NA(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:NA(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=o=>r?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function YQ(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||JQ,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||Fk}}function JQ(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const RA=new WeakMap;class Lk extends Li{constructor(e){let n=mQ(e.languageData),r=YQ(e),i,s=new class extends o3{createParse(o,a,l){return new QQ(i,o,a,l)}};super(n,s,[u3.of((o,a)=>this.getIndent(o,a))],e.name),this.topNode=nee(n),i=this,this.streamParser=r,this.stateAfter=new nt({perNode:!0}),this.tokenTable=e.tokenTable?new _3(r.tokenTable):tee}static define(e){return new Lk(e)}getIndent(e,n){let r=Yi(e.state),i=r.resolve(n);for(;i&&i.type!=this.topNode;)i=i.parent;if(!i)return null;let s,{overrideIndentation:o}=e.options;o&&(s=RA.get(e.state),s!=null&&s<n-1e4&&(s=void 0));let a=Bk(this,r,0,i.from,s??n),l,c;if(a?(c=a.state,l=a.pos+1):(c=this.streamParser.startState(e.unit),l=0),n-l>1e4)return null;for(;l<n;){let d=e.state.doc.lineAt(l),f=Math.min(n,d.to);if(d.length){let h=o?o(d.from):-1,p=new b3(d.text,e.state.tabSize,e.unit,h<0?void 0:h);for(;p.pos<f-d.from;)S3(this.streamParser.token,p,c)}else this.streamParser.blankLine(c,e.unit);if(f==n)break;l=d.to+1}let u=e.lineAt(n);return o&&s==null&&RA.set(e.state,u.from),this.streamParser.indent(c,/^\s*(.*)/.exec(u.text)[1],e)}get allowsNesting(){return!1}}function Bk(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof Bt&&l<i&&Bk(t,a,l,r,i);if(c)return c}return null}function x3(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<r&&a instanceof Bt){if(!(l=x3(t,a,n-o,r-o,i)))break;return i?new Bt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function ZQ(t,e,n,r){for(let i of e){let s=i.from+(i.openStart?25:0),o=i.to-(i.openEnd?25:0),a=s<=n&&o>n&&Bk(t,i.tree,0-i.offset,n,o),l;if(a&&(l=x3(t,i.tree,n+i.offset,a.pos+i.offset,!1)))return{state:a.state,tree:l}}return{state:t.streamParser.startState(r?Dl(r):4),tree:Bt.empty}}class QQ{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=vu.get(),o=i[0].from,{state:a,tree:l}=ZQ(e,r,o,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Dl(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=vu.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+2048);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,a=this.lineAfter(o);n+=a,r=o+a.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i,s){if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let o=this.chunk.length;s=this.skipGapsTo(r,s,-1),r+=s,i+=this.chunk.length-o}return this.chunk.push(e,n,r,i),s}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,o=new b3(n,e?e.state.tabSize:4,e?Dl(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=S3(s.token,o,this.state);if(a&&(i=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,4,i)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Bt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:eee,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Bt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Bt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function S3(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const Fk=Object.create(null),Kf=[_r.none],eee=new Pk(Kf),MA=[],DA=Object.create(null),k3=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])k3[t]=C3(Fk,e);class _3{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),k3)}resolve(e){return e?this.table[e]||(this.table[e]=C3(this.extra,e)):0}}const tee=new _3(Fk);function H0(t,e){MA.indexOf(t)>-1||(MA.push(t),console.warn(e))}function C3(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Ie[c];u?typeof u=="function"?l.length?l=l.map(u):H0(c,`Modifier ${c} used at start of tag`):l.length?H0(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:H0(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(a=>a.id),s=DA[i];if(s)return s.id;let o=DA[i]=_r.define({id:Kf.length,name:r,props:[uQ({[r]:n})]});return Kf.push(o),o.id}function nee(t){let e=_r.define({id:Kf.length,name:"Document",props:[kc.add(()=>t)],top:!0});return Kf.push(e),e}Ot.RTL,Ot.LTR;const ree=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=jk(t.state,n.from);return r.line?iee(t):r.block?lee(t):!1};function wh(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const iee=wh(zk,0),see=wh(zk,1),oee=wh(zk,2),aee=wh(E3,0),lee=wh((t,e)=>E3(t,e,uee(e)),0);function jk(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const sd=50;function cee(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-sd,r),o=t.sliceDoc(i,i+sd),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let u,d;i-r<=2*sd?u=d=t.sliceDoc(r,i):(u=t.sliceDoc(r,r+sd),d=t.sliceDoc(i-sd,i));let f=/^\s*/.exec(u)[0].length,h=/\s*$/.exec(d)[0].length,p=d.length-h-n.length;return u.slice(f,f+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:i-h-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function uee(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function E3(t,e,n=e.selection.ranges){let r=n.map(s=>jk(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>cee(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function zk(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,l=1e9,c=jk(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>i&&(s==o||o>d.from)){i=d.from;let f=/^\s*/.exec(d.text)[0].length,h=f==d.length,p=d.text.slice(f,f+c.length)==c?f:-1;f<d.text.length&&f<l&&(l=f),r.push({line:d,comment:p,token:c,indent:f,empty:h,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of r)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const T1=wo.define(),dee=wo.define(),fee=Ee.define(),A3=Ee.define({combine(t){return Na(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),P3=ir.define({create(){return xs.empty},update(t,e){let n=e.state.facet(A3),r=e.annotation(T1);if(r){let l=br.fromTransaction(e,r.selection),c=r.side,u=c==0?t.undone:t.done;return l?u=jg(u,u.length,n.minDepth,l):u=O3(u,e.startState.selection),new xs(c==0?r.rest:u,c==0?u:r.rest)}let i=e.annotation(dee);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(cn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=br.fromTransaction(e),o=e.annotation(cn.time),a=e.annotation(cn.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new xs(t.done.map(br.fromJSON),t.undone.map(br.fromJSON))}});function hee(t={}){return[P3,A3.of(t),Pe.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?$3:e.inputType=="historyRedo"?O1:null;return r?(e.preventDefault(),r(n)):!1}})]}function Uk(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(P3,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const $3=Uk(0,!1),O1=Uk(1,!1),pee=Uk(0,!0);class br{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new br(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new br(e.changes&&sn.fromJSON(e.changes),[],e.mapped&&Cs.fromJSON(e.mapped),e.startSelection&&re.fromJSON(e.startSelection),e.selectionsAfter.map(re.fromJSON))}static fromTransaction(e,n){let r=di;for(let i of e.startState.facet(fee)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new br(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,di)}static selection(e){return new br(void 0,di,void 0,void 0,e)}}function jg(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function mee(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(r=!0)}}),r}function gee(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function T3(t,e){return t.length?e.length?t.concat(e):t:e}const di=[],vee=200;function O3(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-vee));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),jg(t,t.length-1,1e9,n.setSelAfter(r)))}else return[br.selection([e])]}function yee(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function W0(t,e){if(!t.length)return t;let n=t.length,r=di;for(;n;){let i=wee(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[br.selection(r)]:di}function wee(t,e,n){let r=T3(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):di,n);if(!t.changes)return br.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new br(i,Ke.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const bee=/^(input\.type|delete)($|\.)/;class xs{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new xs(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||bee.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,mee(a.changes,e.changes))||r=="input.type.compose")?o=jg(o,o.length-1,i.minDepth,new br(e.changes.compose(a.changes),T3(e.effects,a.effects),a.mapped,a.startSelection,di)):o=jg(o,o.length,i.minDepth,e),new xs(o,di,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:di;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&gee(s[s.length-1],e)?this:new xs(O3(this.done,e),this.undone,n,r)}addMapping(e){return new xs(W0(this.done,e),W0(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:T1.of({side:e,rest:yee(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?di:i.slice(0,i.length-1);return s.mapped&&(a=W0(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:T1.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}xs.empty=new xs(di,di);function bh(t,e){return re.create(t.ranges.map(e),t.mainIndex)}function Ia(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ul({state:t,dispatch:e},n){let r=bh(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Ia(t,r)),!0)}function ny(t,e){return re.cursor(e?t.to:t.from)}function N3(t,e){return Ul(t,n=>n.empty?t.moveByChar(n,e):ny(n,e))}function La(t){return t.textDirectionAt(t.state.selection.main.head)==Ot.LTR}const IA=t=>N3(t,!La(t)),LA=t=>N3(t,La(t));function R3(t,e){return Ul(t,n=>n.empty?t.moveByGroup(n,e):ny(n,e))}const xee=t=>R3(t,!La(t)),See=t=>R3(t,La(t));function M3(t,e){return Ul(t,n=>{if(!n.empty)return ny(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const BA=t=>M3(t,!1),FA=t=>M3(t,!0);function D3(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(Pe.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function I3(t,e){let n=D3(t),{state:r}=t,i=bh(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):ny(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=Pe.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Ia(r,i),{effects:s}),!0}const G0=t=>I3(t,!1),K0=t=>I3(t,!0);function ry(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=re.cursor(r.from+s))}return i}const jA=t=>Ul(t,e=>ry(t,e,!0)),zA=t=>Ul(t,e=>ry(t,e,!1)),kee=t=>Ul(t,e=>re.cursor(t.lineBlockAt(e.head).from,1)),_ee=t=>Ul(t,e=>re.cursor(t.lineBlockAt(e.head).to,-1));function Cee(t,e,n){let r=!1,i=bh(t.selection,s=>{let o=Ap(t,s.head,-1)||Ap(t,s.head,1)||s.head>0&&Ap(t,s.head-1,1)||s.head<t.doc.length&&Ap(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return n?re.range(s.anchor,a):re.cursor(a)});return r?(e(Ia(t,i)),!0):!1}const Eee=({state:t,dispatch:e})=>Cee(t,e,!1);function Ba(t,e){let n=bh(t.state.selection,r=>{let i=e(r);return re.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Ia(t.state,n)),!0)}function L3(t,e){return Ba(t,n=>t.moveByChar(n,e))}const UA=t=>L3(t,!La(t)),VA=t=>L3(t,La(t));function B3(t,e){return Ba(t,n=>t.moveByGroup(n,e))}const Aee=t=>B3(t,!La(t)),Pee=t=>B3(t,La(t));function F3(t,e){return Ba(t,n=>t.moveVertically(n,e))}const HA=t=>F3(t,!1),WA=t=>F3(t,!0);function j3(t,e){return Ba(t,n=>t.moveVertically(n,e,D3(t).height))}const GA=t=>j3(t,!1),KA=t=>j3(t,!0),XA=t=>Ba(t,e=>ry(t,e,!0)),qA=t=>Ba(t,e=>ry(t,e,!1)),$ee=t=>Ba(t,e=>re.cursor(t.lineBlockAt(e.head).from)),Tee=t=>Ba(t,e=>re.cursor(t.lineBlockAt(e.head).to)),YA=({state:t,dispatch:e})=>(e(Ia(t,{anchor:0})),!0),JA=({state:t,dispatch:e})=>(e(Ia(t,{anchor:t.doc.length})),!0),ZA=({state:t,dispatch:e})=>(e(Ia(t,{anchor:t.selection.main.anchor,head:0})),!0),QA=({state:t,dispatch:e})=>(e(Ia(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Oee=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Nee=({state:t,dispatch:e})=>{let n=sy(t).map(({from:r,to:i})=>re.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:re.create(n),userEvent:"select"})),!0};function iy(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=Pp(t,l,!1)):l>o&&(n="delete.forward",l=Pp(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Pp(t,o,!1),a=Pp(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:re.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Pe.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Pp(t,e,n){if(t instanceof Pe)for(let r of t.state.facet(Pe.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const z3=(t,e)=>iy(t,n=>{let r=n.from,{state:i}=t,s=i.doc.lineAt(r),o,a;if(!e&&r>s.from&&r<s.from+200&&!/[^ \t]/.test(o=s.text.slice(0,r-s.from))){if(o[o.length-1]=="	")return r-1;let l=oh(o,i.tabSize),c=l%Dl(i)||Dl(i);for(let u=0;u<c&&o[o.length-1-u]==" ";u++)r--;a=r}else a=Pn(s.text,r-s.from,e,e)+s.from,a==r&&s.number!=(e?i.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(a-s.from,r-s.from))&&(a=Pn(s.text,a-s.from,!1,!1)+s.from);return a}),X0=t=>z3(t,!1),eP=t=>z3(t,!0),U3=(t,e)=>iy(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Pn(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||r!=n.head)&&(a=u),r=l}return r}),tP=t=>U3(t,!1),Ree=t=>U3(t,!0),nP=t=>iy(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Mee=t=>iy(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),Dee=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:lt.of(["",""])},range:re.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Iee=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:Pn(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Pn(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:re.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function sy(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function V3(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of sy(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(re.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(re.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:re.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Lee=({state:t,dispatch:e})=>V3(t,e,!1),Bee=({state:t,dispatch:e})=>V3(t,e,!0);function H3(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of sy(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Fee=({state:t,dispatch:e})=>H3(t,e,!1),jee=({state:t,dispatch:e})=>H3(t,e,!0),zee=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(sy(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=bh(e.selection,i=>t.moveVertically(i,!0)).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Uee(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Yi(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(nt.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const rP=Vee(!1);function Vee(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&Uee(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new Rk(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=bQ(c,s);for(u==null&&(u=oh(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",E1(e,u)];return l&&d.push(E1(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:lt.of(d)},range:re.cursor(s+1+d[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function W3(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:re.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const N1=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(W3(t,(n,r)=>{r.push({from:n.from,insert:t.facet(Nk)})}),{userEvent:"input.indent"})),!0),iP=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(W3(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=oh(i,t.tabSize),o=0,a=E1(t,Math.max(0,s-Dl(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0);function St(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)G3(t,arguments[e]);return t}function G3(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)G3(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const sP=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Xf{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(sP(a)):sP,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Xn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Kx(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Mi(e);let i=this.normalize(n);for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n){let r=null;for(let i=0;i<this.matches.length;i+=2){let s=this.matches[i],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[i+1],to:n+1}:(this.matches[i]++,o=!0)),o||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:n+1}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Xf.prototype[Symbol.iterator]=function(){return this});const K3={from:-1,to:-1,match:/.*/.exec("")},Vk="gm"+(/x/.unicode==null?"":"u");class X3{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=K3,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new q3(e,n,r,i,s);this.re=new RegExp(n,Vk+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=zg(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=zg(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const q0=new WeakMap;class zc{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=q0.get(e);if(!i||i.from>=r||i.to<=n){let a=new zc(n,e.sliceString(n,r));return q0.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),q0.set(e,new zc(o,s)),new zc(n,s.slice(n-o,r-o))}}class q3{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=K3,this.matchPos=zg(e,i),this.re=new RegExp(n,Vk+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=zc.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=zg(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=zc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(X3.prototype[Symbol.iterator]=q3.prototype[Symbol.iterator]=function(){return this});function Hee(t){try{return new RegExp(t,Vk),!0}catch{return!1}}function zg(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function R1(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=St("input",{class:"cm-textfield",name:"line",value:e}),r=St("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Ug.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},St("label",t.state.phrase("Go to line"),": ",n)," ",St("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,f=u?+u.slice(1):0,h=c?+c:a.number;if(c&&d){let w=h/100;l&&(w=w*(l=="-"?-1:1)+a.number/o.doc.lines),h=Math.round(o.doc.lines*w)}else c&&l&&(h=h*(l=="-"?-1:1)+a.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,h))),m=re.cursor(p.from+Math.max(0,Math.min(f,p.length)));t.dispatch({effects:[Ug.of(!1),Pe.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:r}}const Ug=Ke.define(),oP=ir.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Ug)&&(t=n.value);return t},provide:t=>wf.from(t,e=>e?R1:null)}),Wee=t=>{let e=yf(t,R1);if(!e){let n=[Ug.of(!0)];t.state.field(oP,!1)==null&&n.push(Ke.appendConfig.of([oP,Gee])),t.dispatch({effects:n}),e=yf(t,R1)}return e&&e.dom.querySelector("input").select(),!0},Gee=Pe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Kee=({state:t,dispatch:e})=>{let{selection:n}=t,r=re.create(n.ranges.map(i=>t.wordAt(i.head)||re.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function Xee(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new Xf(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Xf(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const qee=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Kee({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=Xee(t,r);return i?(e(t.update({selection:t.selection.addRange(re.range(i.from,i.to),!1),effects:Pe.scrollIntoView(i.to)})),!0):!1},Ru=Ee.define({combine(t){return Na(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new ite(e),scrollToMatch:e=>Pe.scrollIntoView(e)})}});class Y3{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Hee(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Qee(this):new Jee(this)}getCursor(e,n=0,r){let i=e.doc?e:Ye.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?sc(this,i,n,r):ic(this,i,n,r)}}class J3{constructor(e){this.spec=e}}function ic(t,e,n,r){return new Xf(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?Yee(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Yee(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Vg(i,n-s))!=$n.Word||e(Hg(i,n-s))!=$n.Word)&&(e(Hg(i,r-s))!=$n.Word||e(Vg(i,r-s))!=$n.Word))}class Jee extends J3{constructor(e){super(e)}nextMatch(e,n,r){let i=ic(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=ic(this.spec,e,0,n).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=ic(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=ic(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=ic(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function sc(t,e,n,r){return new X3(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Zee(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Vg(t,e){return t.slice(Pn(t,e,!1),e)}function Hg(t,e){return t.slice(e,Pn(t,e))}function Zee(t){return(e,n,r)=>!r[0].length||(t(Vg(r.input,r.index))!=$n.Word||t(Hg(r.input,r.index))!=$n.Word)&&(t(Hg(r.input,r.index+r[0].length))!=$n.Word||t(Vg(r.input,r.index+r[0].length))!=$n.Word)}class Qee extends J3{nextMatch(e,n,r){let i=sc(this.spec,e,r,e.doc.length).next();return i.done&&(i=sc(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=sc(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:n)}matchAll(e,n){let r=sc(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=sc(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const qf=Ke.define(),Hk=Ke.define(),pa=ir.define({create(t){return new Y0(M1(t).create(),null)},update(t,e){for(let n of e.effects)n.is(qf)?t=new Y0(n.value.create(),t.panel):n.is(Hk)&&(t=new Y0(t.query,n.value?Wk:null));return t},provide:t=>wf.from(t,e=>e.panel)});class Y0{constructor(e,n){this.query=e,this.panel=n}}const ete=Xe.mark({class:"cm-searchMatch"}),tte=Xe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),nte=Rn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(pa))}update(t){let e=t.state.field(pa);(e!=t.startState.field(pa)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Xe.none;let{view:n}=this,r=new Al;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(f=>f.from==c&&f.to==u);r.add(c,u,d?tte:ete)})}return r.finish()}},{decorations:t=>t.decorations});function xh(t){return e=>{let n=e.state.field(pa,!1);return n&&n.query.spec.valid?t(e,n):nL(e)}}const aP=xh((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=re.single(r.from,r.to),s=t.state.facet(Ru);return t.dispatch({selection:i,effects:[Gk(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),tL(t),!0}),lP=xh((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=re.single(i.from,i.to),o=t.state.facet(Ru);return t.dispatch({selection:s,effects:[Gk(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),tL(t),!0}),Z3=xh((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:re.create(n.map(r=>re.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),rte=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new Xf(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(re.range(a.value.from,a.value.to))}return e(t.update({selection:re.create(s,o),userEvent:"select.search.matches"})),!0},cP=xh((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=[],a,l,c=[];if(s.from==r&&s.to==i&&(l=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(n,s.from,s.to),c.push(Pe.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),s){let u=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a=re.single(s.from-u,s.to-u),c.push(Gk(t,s)),c.push(n.facet(Ru).scrollToMatch(a.main,t))}return t.dispatch({changes:o,selection:a,effects:c,userEvent:"input.replace"}),!0}),Q3=xh((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Pe.announce.of(r),userEvent:"input.replace.all"}),!0});function Wk(t){return t.state.facet(Ru).createPanel(t)}function M1(t,e){var n,r,i,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(Ru);return new Y3({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function eL(t){let e=yf(t,Wk);return e&&e.dom.querySelector("[main-field]")}function tL(t){let e=eL(t);e&&e==t.root.activeElement&&e.select()}const nL=t=>{let e=t.state.field(pa,!1);if(e&&e.panel){let n=eL(t);if(n&&n!=t.root.activeElement){let r=M1(t.state,e.query.spec);r.valid&&t.dispatch({effects:qf.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[Hk.of(!0),e?qf.of(M1(t.state,e.query.spec)):Ke.appendConfig.of(ote)]});return!0},rL=t=>{let e=t.state.field(pa,!1);if(!e||!e.panel)return!1;let n=yf(t,Wk);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Hk.of(!1)}),!0};class ite{constructor(e){this.view=e;let n=this.query=e.state.field(pa).query.spec;this.commit=this.commit.bind(this),this.searchField=St("input",{value:n.search,placeholder:Ar(e,"Find"),"aria-label":Ar(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=St("input",{value:n.replace,placeholder:Ar(e,"Replace"),"aria-label":Ar(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=St("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=St("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=St("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return St("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=St("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>aP(e),[Ar(e,"next")]),r("prev",()=>lP(e),[Ar(e,"previous")]),r("select",()=>Z3(e),[Ar(e,"all")]),St("label",null,[this.caseField,Ar(e,"match case")]),St("label",null,[this.reField,Ar(e,"regexp")]),St("label",null,[this.wordField,Ar(e,"by word")]),...e.state.readOnly?[]:[St("br"),this.replaceField,r("replace",()=>cP(e),[Ar(e,"replace")]),r("replaceAll",()=>Q3(e),[Ar(e,"replace all")])],St("button",{name:"close",onclick:()=>rL(e),"aria-label":Ar(e,"close"),type:"button"},[""])])}commit(){let e=new Y3({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:qf.of(e)}))}keydown(e){Rj(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?lP:aP)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),cP(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(qf)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ru).top}}function Ar(t,e){return t.state.phrase(e)}const $p=30,Tp=/[\s\.,:;?!]/;function Gk(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-$p),o=Math.min(i,n+$p),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<$p;l++)if(!Tp.test(a[l+1])&&Tp.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-$p;l--)if(!Tp.test(a[l-1])&&Tp.test(a[l])){a=a.slice(0,l);break}}return Pe.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const ste=Pe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),ote=[pa,ih.low(nte),ste];class ate{constructor(e,n,r){this.state=e,this.pos=n,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let n=Yi(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(iL(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function uP(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function lte(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=uP(e)+uP(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function cte(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:lte(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}class dP{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function Uc(t){return t.selection.main.from}function iL(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const ute=wo.define();function dte(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return Object.assign(Object.assign({},t.changeByRange(a=>a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r)?{range:a}:{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:e},range:re.cursor(a.from+s+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const fP=new WeakMap;function fte(t){if(!Array.isArray(t))return t;let e=fP.get(t);return e||fP.set(t,e=cte(t)),e}const sL=Ke.define(),Kk=Ke.define();class hte{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=Xn(e,n),i=Mi(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(Xn(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let y=Xn(e,0),x=Mi(y),k=x==e.length?0:-100;if(y!=n[0])if(y==r[0])k+=-200;else return!1;return this.ret(k,[0,x])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let y=0,x=Math.min(e.length,200);y<x&&c<l;){let k=Xn(e,y);(k==n[c]||k==r[c])&&(i[c++]=y),y+=Mi(k)}if(c<l)return!1}let u=0,d=0,f=!1,h=0,p=-1,m=-1,w=/[a-z]/.test(e),v=!0;for(let y=0,x=Math.min(e.length,200),k=0;y<x&&d<l;){let _=Xn(e,y);a<0&&(u<l&&_==n[u]&&(s[u++]=y),h<l&&(_==n[h]||_==r[h]?(h==0&&(p=y),m=y+1,h++):h=0));let P,A=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(P=Kx(_))!=P.toLowerCase()?1:P!=P.toUpperCase()?2:0;(!y||A==1&&w||k==0&&A!=0)&&(n[d]==_||r[d]==_&&(f=!0)?o[d++]=y:o.length&&(v=!1)),k=A,y+=Mi(_)}return d==l&&o[0]==0&&v?this.result(-100+(f?-200:0),o,e):h==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):h==l?this.ret(-900-e.length,[p,m]):d==l?this.result(-100+(f?-200:0)+-700+(v?0:-1100),o,e):n.length==2?!1:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?Mi(Xn(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}const ws=Ee.define({combine(t){return Na(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:pte,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>hP(e(r),n(r)),optionClass:(e,n)=>r=>hP(e(r),n(r)),addToOptions:(e,n)=>e.concat(n)})}});function hP(t,e){return t?e?t+" "+e:t:e}function pte(t,e,n,r,i,s){let o=t.textDirection==Ot.RTL,a=o,l=!1,c="top",u,d,f=e.left-i.left,h=i.right-e.right,p=r.right-r.left,m=r.bottom-r.top;if(a&&f<Math.min(p,h)?a=!1:!a&&h<Math.min(p,f)&&(a=!0),p<=(a?f:h))u=Math.max(i.top,Math.min(n.top,i.bottom-m))-e.top,d=Math.min(400,a?f:h);else{l=!0,d=Math.min(400,(o?e.right:i.right-e.left)-30);let y=i.bottom-e.bottom;y>=m||y>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let w=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/w}px; max-width: ${d/v}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function mte(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function J0(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class gte{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(ws);this.optionContent=mte(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=J0(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(ws).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:Kk.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=J0(s.length,o,e.state.facet(ws).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=J0(n.options.length,n.selected,this.view.state.facet(ws).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>zi(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&yte(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(ws).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>r.from||r.from==0))if(s=f,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let h=i.appendChild(document.createElement("completion-section"));h.textContent=f}}const u=i.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let f of this.optionContent){let h=f(a,this.view.state,this.view,l);h&&u.appendChild(h)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function vte(t,e){return n=>new gte(n,t,e)}function yte(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function pP(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function wte(t,e){let n=[],r=null,i=l=>{n.push(l);let{section:c}=l.completion;if(c){r||(r=[]);let u=typeof c=="string"?c:c.name;r.some(d=>d.name==u)||r.push(typeof c=="string"?{name:u}:c)}};for(let l of t)if(l.hasResult()){let c=l.result.getMatch;if(l.result.filter===!1)for(let u of l.result.options)i(new dP(u,l.source,c?c(u):[],1e9-n.length));else{let u=new hte(e.sliceDoc(l.from,l.to));for(let d of l.result.options)if(u.match(d.label)){let f=d.displayLabel?c?c(d,u.matched):[]:u.matched;i(new dP(d,l.source,f,u.score+(d.boost||0)))}}}if(r){let l=Object.create(null),c=0,u=(d,f)=>{var h,p;return((h=d.rank)!==null&&h!==void 0?h:1e9)-((p=f.rank)!==null&&p!==void 0?p:1e9)||(d.name<f.name?-1:1)};for(let d of r.sort(u))c-=1e5,l[d.name]=c;for(let d of n){let{section:f}=d.completion;f&&(d.score+=l[typeof f=="string"?f:f.name])}}let s=[],o=null,a=e.facet(ws).compareCompletions;for(let l of n.sort((c,u)=>u.score-c.score||a(c.completion,u.completion))){let c=l.completion;!o||o.label!=c.label||o.detail!=c.detail||o.type!=null&&c.type!=null&&o.type!=c.type||o.apply!=c.apply||o.boost!=c.boost?s.push(l):pP(l.completion)>pP(o)&&(s[s.length-1]=l),o=l.completion}return s}class _c{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new _c(this.options,mP(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s){let o=wte(e,n);if(!o.length)return i&&e.some(l=>l.state==1)?new _c(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let a=n.facet(ws).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let l=i.options[i.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==l){a=c;break}}return new _c(o,mP(r,a),{pos:e.reduce((l,c)=>c.hasResult()?Math.min(l,c.from):l,1e8),create:Ete,above:s.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new _c(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Wg{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new Wg(Ste,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(ws),s=(r.override||n.languageDataAt("autocomplete",Uc(n)).map(fte)).map(a=>(this.active.find(c=>c.source==a)||new Lr(a,this.active.some(c=>c.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!bte(s,this.active)?o=_c.build(s,n,this.id,o,r):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new Lr(a.source,0):a));for(let a of e.effects)a.is(oL)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new Wg(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:xte}}function bte(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;r<e.length&&!e[r].hasResult;)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const xte={"aria-autocomplete":"list"};function mP(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Ste=[];function kte(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Lr{constructor(e,n,r=-1){this.source=e,this.state=n,this.explicitPos=r}hasResult(){return!1}update(e,n){let r=kte(e),i=this;r?i=i.handleUserEvent(e,r,n):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Lr(i.source,0));for(let s of e.effects)if(s.is(sL))i=new Lr(i.source,1,s.value?Uc(e.state):-1);else if(s.is(Kk))i=new Lr(i.source,0);else if(s.is(Cte))for(let o of s.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,n,r){return n=="delete"||!r.activateOnTyping?this.map(e.changes):new Lr(this.source,1)}handleChange(e){return e.changes.touchesRange(Uc(e.startState))?new Lr(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Lr(this.source,this.state,e.mapPos(this.explicitPos))}}class zd extends Lr{constructor(e,n,r,i,s){super(e,2,n),this.result=r,this.from=i,this.to=s}hasResult(){return!0}handleUserEvent(e,n,r){var i;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Uc(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||n=="delete"&&Uc(e.startState)==this.from)return new Lr(this.source,n=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return _te(this.result.validFor,e.state,s,o)?new zd(this.source,l,this.result,s,o):this.result.update&&(c=this.result.update(this.result,s,o,new ate(e.state,a,l>=0)))?new zd(this.source,l,c,c.from,(i=c.to)!==null&&i!==void 0?i:Uc(e.state)):new Lr(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Lr(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new zd(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function _te(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):iL(t,!0).test(i)}const Cte=Ke.define({map(t,e){return t.map(n=>n.map(e))}}),oL=Ke.define(),Mu=ir.define({create(){return Wg.start()},update(t,e){return t.update(e)},provide:t=>[sS.from(t,e=>e.tooltip),Pe.contentAttributes.from(t,e=>e.attrs)]});function aL(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(Mu).active.find(i=>i.source==e.source);return r instanceof zd?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},dte(t.state,n,r.from,r.to)),{annotations:ute.of(e.completion)})):n(t,e.completion,r.from,r.to),!0):!1}const Ete=vte(Mu,aL);function Op(t,e="option"){return n=>{let r=n.state.field(Mu,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(ws).interactionDelay)return!1;let i=1,s;e=="page"&&(s=d7(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:oL.of(a)}),!0}}const gP=t=>{let e=t.state.field(Mu,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(ws).interactionDelay?!1:aL(t,e.open.options[e.open.selected])},Ate=t=>t.state.field(Mu,!1)?(t.dispatch({effects:sL.of(!0)}),!0):!1,Pte=t=>{let e=t.state.field(Mu,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:Kk.of(null)}),!0)},lL={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},cL=new class extends El{};cL.startSide=1;cL.endSide=-1;const Z0="()[]{}<>";function $te(t){for(let e=0;e<Z0.length;e+=2)if(Z0.charCodeAt(e)==t)return Z0.charAt(e+1);return Kx(t<128?t:t+1)}function Tte(t,e){return t.languageDataAt("closeBrackets",e)[0]||lL}const Ote=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=Tte(t,t.selection.main.head).brackets||lL.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=Rte(t.doc,o.head);for(let l of r)if(l==a&&Nte(t.doc,o.head)==$te(Xn(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:re.cursor(o.head-l.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i};function Nte(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Mi(Xn(n,0)))}function Rte(t,e){let n=t.sliceString(e-2,e);return Mi(Xn(n,0))==n.length?n:n.slice(1)}class Mte{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class Qa{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=e,s=r.facet(ol).markerFilter;s&&(i=s(i));let o=Xe.set(i.map(a=>a.from==a.to||a.from==a.to-1&&r.doc.lineAt(a.from).to==a.from?Xe.widget({widget:new Hte(a),diagnostic:a}).range(a.from):Xe.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new Qa(o,n,bu(o))}}function bu(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return r=new Mte(i,s,o.diagnostic),!1}),r}function Dte(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(r=>r.is(Xk))||t.changes.touchesRange(n.from,n.to))}function uL(t,e){return t.field(zr,!1)?e:e.concat(Ke.appendConfig.of(pL))}function Ite(t,e){return{effects:uL(t,[Xk.of(e)])}}const Xk=Ke.define(),qk=Ke.define(),dL=Ke.define(),zr=ir.define({create(){return new Qa(Xe.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),r=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);r=bu(n,t.selected.diagnostic,i)||bu(n,null,i)}t=new Qa(n,t.panel,r)}for(let n of e.effects)n.is(Xk)?t=Qa.init(n.value,t.panel,e.state):n.is(qk)?t=new Qa(t.diagnostics,n.value?oy.open:null,t.selected):n.is(dL)&&(t=new Qa(t.diagnostics,t.panel,n.value));return t},provide:t=>[wf.from(t,e=>e.panel),Pe.decorations.from(t,e=>e.diagnostics)]}),Lte=Xe.mark({class:"cm-lintRange cm-lintRange-active"});function Bte(t,e,n){let{diagnostics:r}=t.state.field(zr),i=[],s=2e8,o=0;r.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0))&&(i.push(u.diagnostic),s=Math.min(l,s),o=Math.max(c,o))});let a=t.state.facet(ol).tooltipFilter;return a&&(i=a(i)),i.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Fte(t,i)}}}:null}function Fte(t,e){return St("ul",{class:"cm-tooltip-lint"},e.map(n=>hL(t,n,!1)))}const jte=t=>{let e=t.state.field(zr,!1);(!e||!e.panel)&&t.dispatch({effects:uL(t.state,[qk.of(!0)])});let n=yf(t,oy.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},vP=t=>{let e=t.state.field(zr,!1);return!e||!e.panel?!1:(t.dispatch({effects:qk.of(!1)}),!0)},zte=t=>{let e=t.state.field(zr,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},Ute=Rn.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(ol);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(ol);Promise.all(n.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(Ite(this.view.state,i))},r=>{zi(this.view.state,r)})}}update(t){let e=t.state.facet(ol);(t.docChanged||e!=t.startState.facet(ol)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),ol=Ee.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},Na(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n}))}});function Vte(t,e={}){return[ol.of({source:t,config:e}),Ute,pL]}function fL(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function hL(t,e,n){var r;let i=n?fL(e.actions):[];return St("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},St("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let h=bu(t.state.field(zr).diagnostics,e);h&&s.apply(t,h.from,h.to)},{name:c}=s,u=i[o]?c.indexOf(i[o]):-1,d=u<0?c:[c.slice(0,u),St("u",c.slice(u,u+1)),c.slice(u+1)];return St("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&St("div",{class:"cm-diagnosticSource"},e.source))}class Hte extends Ra{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return St("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class yP{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=hL(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class oy{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)vP(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=fL(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=bu(this.view.state.field(zr).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=St("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=St("div",{class:"cm-panel-lint"},this.list,St("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>vP(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(zr).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(zr),r=0,i=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let c=-1,u;for(let d=r;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){c=d;break}c<0?(u=new yP(this.view,l.diagnostic),this.items.splice(r,0,u),i=!0):(u=this.items[c],c>r&&(this.items.splice(r,c-r),i=!0)),n&&u.diagnostic==n.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),s=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new yP(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{let l=a.height/this.list.offsetHeight;o.top<a.top?this.list.scrollTop-=(a.top-o.top)/l:o.bottom>a.bottom&&(this.list.scrollTop+=(o.bottom-a.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(zr),r=bu(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:dL.of(r)})}static open(e){return new oy(e)}}function Wte(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Np(t){return Wte(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Gte=Pe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Np("#d11")},".cm-lintRange-warning":{backgroundImage:Np("orange")},".cm-lintRange-info":{backgroundImage:Np("#999")},".cm-lintRange-hint":{backgroundImage:Np("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),pL=[zr,Pe.decorations.compute([zr],t=>{let{selected:e,panel:n}=t.field(zr);return!e||!n||e.from==e.to?Xe.none:Xe.set([Lte.range(e.from,e.to)])}),u7(Bte,{hideOn:Dte}),Gte],mL=t=>e=>{const n=t==="down";let r=e.state.selection;for(const i of r.ranges)r=r.addRange(e.moveVertically(i,n));return e.dispatch({selection:r}),!0},Kte=mL("up"),Xte=mL("down"),qte=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let r=n.from;r<=n.to;){const i=t.state.doc.lineAt(r),s=Math.min(i.to,n.to);e?e=e.addRange(re.range(s,s)):e=re.single(s),r=i.to+1}return e?(t.dispatch({selection:e}),!0):!1},Yte=[{key:"Ctrl-Space",run:Ate},{key:"Escape",run:Pte},{key:"ArrowDown",run:Op(!0)},{key:"ArrowUp",run:Op(!1)},{key:"PageDown",run:Op(!0,"page")},{key:"PageUp",run:Op(!1,"page")},{key:"Enter",run:gP},{key:"Tab",run:gP},{key:"Mod-f",run:nL,scope:"editor search-panel"},{key:"Escape",run:rL,scope:"editor search-panel"},{key:"Alt-Enter",run:Z3,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:Q3,scope:"editor search-panel"},{key:"Ctrl-g",run:Wee},{key:"Mod-d",run:qee,preventDefault:!0},{key:"Shift-Mod-l",run:rte},{key:"Enter",run:rP,shift:rP},{key:"ArrowLeft",run:IA,shift:UA,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:xee,shift:Aee},{key:"ArrowRight",run:LA,shift:VA,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:See,shift:Pee},{key:"ArrowUp",run:BA,shift:HA,preventDefault:!0},{key:"ArrowDown",run:FA,shift:WA,preventDefault:!0},{key:"Home",run:zA,shift:qA},{mac:"Cmd-ArrowLeft",run:zA,shift:qA},{key:"Mod-Home",run:YA,shift:ZA},{mac:"Cmd-ArrowUp",run:YA,shift:ZA},{key:"PageUp",run:G0,shift:GA},{mac:"Ctrl-ArrowUp",run:G0,shift:GA},{key:"PageDown",run:K0,shift:KA},{mac:"Ctrl-ArrowDown",run:K0,shift:KA},{key:"End",run:jA,shift:XA},{mac:"Cmd-ArrowRight",run:jA,shift:XA},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Kte,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:Xte,preventDefault:!0},{key:"Shift-Alt-i",run:qte},{key:"Mod-End",run:JA,shift:QA},{mac:"Cmd-ArrowDown",run:JA,shift:QA},{key:"Mod-a",run:Oee},{key:"Backspace",run:Ote},{key:"Backspace",run:X0,shift:X0},{key:"Delete",run:eP},{key:"Mod-Backspace",mac:"Alt-Backspace",run:tP},{key:"Mod-Delete",mac:"Alt-Delete",run:Ree},{mac:"Mod-Backspace",run:Mee},{mac:"Mod-Delete",run:nP},{mac:"Ctrl-b",run:IA,shift:UA,preventDefault:!0},{mac:"Ctrl-f",run:LA,shift:VA},{mac:"Ctrl-p",run:BA,shift:HA},{mac:"Ctrl-n",run:FA,shift:WA},{mac:"Ctrl-a",run:kee,shift:$ee},{mac:"Ctrl-e",run:_ee,shift:Tee},{mac:"Ctrl-d",run:eP},{mac:"Ctrl-h",run:X0},{mac:"Ctrl-k",run:nP},{mac:"Ctrl-Alt-h",run:tP},{mac:"Ctrl-o",run:Dee},{mac:"Ctrl-t",run:Iee},{mac:"Ctrl-v",run:K0},{mac:"Alt-v",run:G0},{key:"Shift-Mod-k",run:zee},{key:"Alt-ArrowDown",run:Bee},{key:"Alt-ArrowUp",run:Lee},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:jee},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Fee},{key:"Mod-l",run:Nee,preventDefault:!0},{key:"Shift-Mod-\\",run:Eee},{key:"Tab",run:N1,shift:iP,preventDefault:!0},{key:"Mod-[",run:iP},{key:"Mod-]",run:N1},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:MQ},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:DQ},{key:"Mod-k Mod-0",run:IQ},{key:"Mod-k Mod-j",run:LQ},{key:"Mod-k Mod-c",run:see},{key:"Mod-k Mod-u",run:oee},{key:"Mod-/",run:ree},{key:"Shift-Alt-a",run:aee},{key:"Mod-z",run:$3,preventDefault:!0},{key:"Mod-y",run:O1,preventDefault:!0},{key:"Mod-Shift-z",run:O1,preventDefault:!0},{key:"Mod-u",run:pee,preventDefault:!0},{key:"Mod-Shift-m",run:jte},{key:"F8",run:zte}],D1=Ae(0);function Jte(){const t=pt(),e=Xt(D1);return b.jsxs("div",{className:"flex items-center justify-between border-t border-stone-600 bg-stone-800 px-3 font-sans text-xs tracking-wider text-stone-400",children:[b.jsx(sH,{}),b.jsx("span",{className:Fe(e>0&&"font-semibold text-red-400"),children:t("editor.lintSummary",e)})]})}const lr={character:Ie.character,comment:Ie.comment,"data-directive":Sn.define(),identifier:Ie.variableName,instruction:Sn.define(),label:Ie.labelName,number:Ie.number,operator:Ie.operator,offset:Sn.define(),"ptr-size":Sn.define(),punctuation:Ie.punctuation,register:Sn.define(),special:Sn.define(),string:Ie.string,unassigned:Sn.define()},Zte=Lk.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":TS.includes(e)?"data-directive":OS.includes(e)?"instruction":Sg.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:lr}),Qte=UQ(ty.define([{tag:lr.character,class:"text-orange-300"},{tag:lr.comment,class:"text-stone-500 italic"},{tag:lr["data-directive"],class:"text-rose-400/80"},{tag:lr.instruction,class:"text-mantis-400"},{tag:lr.number,class:"text-cyan-300/60"},{tag:lr.operator,class:"text-rose-300"},{tag:lr.offset,class:"text-rose-400/80 italic"},{tag:lr["ptr-size"],class:"text-rose-400/80 italic"},{tag:lr.punctuation,class:"text-stone-600"},{tag:lr.register,class:"text-emerald-400/80"},{tag:lr.special,class:"text-yellow-300/80"},{tag:lr.string,class:"text-orange-300"},{tag:lr.unassigned,class:"text-rose-400/80"}])),ene=Vte(t=>{const e=t.state.doc.toString(),n=PM(e);if(n.success)return ne.set(D1,0),[];const r=yr().language,i=n.errors.map(s=>{var l,c;const o=((l=s.position)==null?void 0:l.start)??0,a=((c=s.position)==null?void 0:c.end)??e.length;return{message:s.translate(r),severity:"error",from:o,to:a}});return ne.set(D1,i.length),i},{delay:200});function tne(){return new wQ(Zte,[Qte,ene])}function gL({className:t}){const[e,n]=g.useState(),r=LV(),i=g.useCallback(s=>{s&&n(s)},[]);return g.useEffect(()=>{if(e)return window.codemirror=new Pe({state:Ye.create({doc:tH(),extensions:[Ye.tabSize.of(2),MM.of(Ye.readOnly.of(!1)),nH,w7(),xW,S7(),Xj(),hee(),Fj(),Pe.domEventHandlers({drop:s=>s.preventDefault()}),Ye.allowMultipleSelections.of(!0),e7(),nR.of([{key:"Escape",run:s=>(s.dispatch({selection:re.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?N1(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...Yte]),tne()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),b.jsxs("div",{className:Fe("flex flex-col",t),children:[b.jsx("div",{ref:i,className:"grow overflow-auto font-mono",style:{fontSize:`${r}px`,lineHeight:1.25}}),b.jsx(Jte,{})]})}function nne(){const t=AS(),e=pt(),n=zV(),r=RB("(max-width: 640px)"),{updateServiceWorker:i}=BB({onNeedRefresh(){pr({title:e("update.update-available"),action:b.jsx(AI,{altText:e("update.reload"),onClick:()=>i(!0),children:e("update.reload")}),duration:1/0})}});return b.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",lang:t,style:{filter:n},children:[b.jsx(mY,{}),r?b.jsx(ine,{}):b.jsx(rne,{}),b.jsx(oH,{})]})}function rne(){const[t]=Cu(xk);return b.jsxs(zO,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[b.jsx(Jp,{id:"panel-editor",order:1,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:b.jsx(gL,{className:"h-full w-full"})}),b.jsx(fb,{className:"w-2"}),b.jsx(Jp,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"computer-background rounded-lg border border-stone-600",children:b.jsx(n3,{})}),t&&b.jsxs(b.Fragment,{children:[b.jsx(fb,{className:"w-2"}),b.jsx(Jp,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:b.jsx(uI,{className:"h-full w-full"})})]})]})}function ine(){const t=pt(),[e,n]=g.useState("editor"),[r,i]=Cu(xk),s=r?"settings":e,o=a=>{r&&i(!1),n(a)};return b.jsx(X8,{value:s,onValueChange:o,asChild:!0,children:b.jsxs(b.Fragment,{children:[b.jsx(jy,{value:"editor",asChild:!0,children:b.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:b.jsx(gL,{className:"h-full w-full"})})}),b.jsx(jy,{value:"computer",asChild:!0,children:b.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:b.jsx(n3,{})})}),b.jsx(jy,{value:"settings",asChild:!0,children:b.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:b.jsx(uI,{className:"h-full w-full"})})}),b.jsxs(Y8,{className:"grid grid-cols-2 gap-2 p-2",children:[b.jsxs(zC,{value:"editor",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[b.jsx("span",{className:"icon-[lucide--file-terminal] mr-2 h-4 w-4"}),t("control.tabs.editor")]}),b.jsxs(zC,{value:"computer",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[b.jsx("span",{className:"icon-[lucide--computer] mr-2 h-4 w-4"}),t("control.tabs.computer")]})]})]})})}function sne(){const{toastList:t}=QV();return b.jsxs(FY,{children:[t.map(({id:e,title:n,description:r,action:i,variant:s,otherProps:o})=>b.jsxs(EI,{...o,variant:s,children:[b.jsxs("div",{className:"grid gap-1",children:[n&&b.jsx($I,{children:n}),r&&b.jsx(TI,{children:r})]}),i,b.jsx(PI,{})]},e)),b.jsx(CI,{})]})}window.codemirror=null;gw.createRoot(document.getElementById("root")).render(b.jsx(Ht.StrictMode,{children:b.jsxs(g6,{client:LM,children:[b.jsx(DU,{children:b.jsx(nne,{})}),b.jsx(sne,{})]})}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
