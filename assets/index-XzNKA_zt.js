var j7=Object.defineProperty;var OA=t=>{throw TypeError(t)};var L7=(t,e,n)=>e in t?j7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pe=(t,e,n)=>L7(t,typeof e!="symbol"?e+"":e,n),ex=(t,e,n)=>e.has(t)||OA("Cannot "+n);var A=(t,e,n)=>(ex(t,e,"read from private field"),n?n.call(t):e.get(t)),je=(t,e,n)=>e.has(t)?OA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ee=(t,e,n,i)=>(ex(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Pt=(t,e,n)=>(ex(t,e,"access private method"),n);function D7(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var $7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var QT={exports:{}},Ey={},e5={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp=Symbol.for("react.element"),F7=Symbol.for("react.portal"),z7=Symbol.for("react.fragment"),B7=Symbol.for("react.strict_mode"),U7=Symbol.for("react.profiler"),V7=Symbol.for("react.provider"),H7=Symbol.for("react.context"),W7=Symbol.for("react.forward_ref"),G7=Symbol.for("react.suspense"),K7=Symbol.for("react.memo"),q7=Symbol.for("react.lazy"),IA=Symbol.iterator;function Y7(t){return t===null||typeof t!="object"?null:(t=IA&&t[IA]||t["@@iterator"],typeof t=="function"?t:null)}var t5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},n5=Object.assign,i5={};function Zd(t,e,n){this.props=t,this.context=e,this.refs=i5,this.updater=n||t5}Zd.prototype.isReactComponent={};Zd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function r5(){}r5.prototype=Zd.prototype;function Kk(t,e,n){this.props=t,this.context=e,this.refs=i5,this.updater=n||t5}var qk=Kk.prototype=new r5;qk.constructor=Kk;n5(qk,Zd.prototype);qk.isPureReactComponent=!0;var jA=Array.isArray,s5=Object.prototype.hasOwnProperty,Yk={current:null},o5={key:!0,ref:!0,__self:!0,__source:!0};function a5(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)s5.call(e,i)&&!o5.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Zp,type:t,key:s,ref:o,props:r,_owner:Yk.current}}function X7(t,e){return{$$typeof:Zp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xk(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zp}function J7(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var LA=/\/+/g;function tx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?J7(""+t.key):e.toString(36)}function Qg(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zp:case F7:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+tx(o,0):i,jA(r)?(n="",t!=null&&(n=t.replace(LA,"$&/")+"/"),Qg(r,e,n,"",function(c){return c})):r!=null&&(Xk(r)&&(r=X7(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(LA,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",jA(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+tx(s,a);o+=Qg(s,e,n,l,r)}else if(l=Y7(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+tx(s,a++),o+=Qg(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rm(t,e,n){if(t==null)return t;var i=[],r=0;return Qg(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Z7(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _i={current:null},e0={transition:null},Q7={ReactCurrentDispatcher:_i,ReactCurrentBatchConfig:e0,ReactCurrentOwner:Yk};function l5(){throw Error("act(...) is not supported in production builds of React.")}ct.Children={map:Rm,forEach:function(t,e,n){Rm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rm(t,function(){e++}),e},toArray:function(t){return Rm(t,function(e){return e})||[]},only:function(t){if(!Xk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ct.Component=Zd;ct.Fragment=z7;ct.Profiler=U7;ct.PureComponent=Kk;ct.StrictMode=B7;ct.Suspense=G7;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q7;ct.act=l5;ct.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=n5({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Yk.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)s5.call(e,l)&&!o5.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Zp,type:t.type,key:r,ref:s,props:i,_owner:o}};ct.createContext=function(t){return t={$$typeof:H7,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:V7,_context:t},t.Consumer=t};ct.createElement=a5;ct.createFactory=function(t){var e=a5.bind(null,t);return e.type=t,e};ct.createRef=function(){return{current:null}};ct.forwardRef=function(t){return{$$typeof:W7,render:t}};ct.isValidElement=Xk;ct.lazy=function(t){return{$$typeof:q7,_payload:{_status:-1,_result:t},_init:Z7}};ct.memo=function(t,e){return{$$typeof:K7,type:t,compare:e===void 0?null:e}};ct.startTransition=function(t){var e=e0.transition;e0.transition={};try{t()}finally{e0.transition=e}};ct.unstable_act=l5;ct.useCallback=function(t,e){return _i.current.useCallback(t,e)};ct.useContext=function(t){return _i.current.useContext(t)};ct.useDebugValue=function(){};ct.useDeferredValue=function(t){return _i.current.useDeferredValue(t)};ct.useEffect=function(t,e){return _i.current.useEffect(t,e)};ct.useId=function(){return _i.current.useId()};ct.useImperativeHandle=function(t,e,n){return _i.current.useImperativeHandle(t,e,n)};ct.useInsertionEffect=function(t,e){return _i.current.useInsertionEffect(t,e)};ct.useLayoutEffect=function(t,e){return _i.current.useLayoutEffect(t,e)};ct.useMemo=function(t,e){return _i.current.useMemo(t,e)};ct.useReducer=function(t,e,n){return _i.current.useReducer(t,e,n)};ct.useRef=function(t){return _i.current.useRef(t)};ct.useState=function(t){return _i.current.useState(t)};ct.useSyncExternalStore=function(t,e,n){return _i.current.useSyncExternalStore(t,e,n)};ct.useTransition=function(){return _i.current.useTransition()};ct.version="18.3.1";e5.exports=ct;var b=e5.exports;const Ft=qc(b),Ay=D7({__proto__:null,default:Ft},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eU=b,tU=Symbol.for("react.element"),nU=Symbol.for("react.fragment"),iU=Object.prototype.hasOwnProperty,rU=eU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sU={key:!0,ref:!0,__self:!0,__source:!0};function c5(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)iU.call(e,i)&&!sU.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:tU,type:t,key:s,ref:o,props:r,_owner:rU.current}}Ey.Fragment=nU;Ey.jsx=c5;Ey.jsxs=c5;QT.exports=Ey;var f=QT.exports,q=typeof window<"u"?window:void 0,Hi=typeof globalThis<"u"?globalThis:q,u5=Array.prototype,DA=u5.forEach,$A=u5.indexOf,cr=Hi==null?void 0:Hi.navigator,Ce=Hi==null?void 0:Hi.document,zi=Hi==null?void 0:Hi.location,fw=Hi==null?void 0:Hi.fetch,hw=Hi!=null&&Hi.XMLHttpRequest&&"withCredentials"in new Hi.XMLHttpRequest?Hi.XMLHttpRequest:void 0,FA=Hi==null?void 0:Hi.AbortController,Di=cr==null?void 0:cr.userAgent,Ke=q??{},Eo={DEBUG:!1,LIB_VERSION:"1.256.2"},nx="$copy_autocapture",oU=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],Fo=function(t){return t.GZipJS="gzip-js",t.Base64="base64",t}({}),aU=["fatal","error","warning","log","info","debug"];function at(t,e){return t.indexOf(e)!==-1}var Ny=function(t){return t.trim()},pw=function(t){return t.replace(/^\$/,"")},lU=Array.isArray,d5=Object.prototype,f5=d5.hasOwnProperty,Py=d5.toString,qt=lU||function(t){return Py.call(t)==="[object Array]"},zr=t=>typeof t=="function",an=t=>t===Object(t)&&!qt(t),Eu=t=>{if(an(t)){for(var e in t)if(f5.call(t,e))return!1;return!0}return!1},ve=t=>t===void 0,ln=t=>Py.call(t)=="[object String]",mw=t=>ln(t)&&t.trim().length===0,El=t=>t===null,St=t=>ve(t)||El(t),ai=t=>Py.call(t)=="[object Number]",Ys=t=>Py.call(t)==="[object Boolean]",cU=t=>t instanceof FormData,uU=t=>at(oU,t),h5=t=>{var e={t:function(n){if(q&&(Eo.DEBUG||Ke.POSTHOG_DEBUG)&&!ve(q.console)&&q.console){for(var i=("__rrweb_original__"in q.console[n])?q.console[n].__rrweb_original__:q.console[n],r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];i(t,...s)}},info:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("log",...i)},warn:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("warn",...i)},error:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("error",...i)},critical:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console.error(t,...i)},uninitializedWarning:n=>{e.error("You must initialize PostHog before calling "+n)},createLogger:n=>h5(t+" "+n)};return e},Ae=h5("[PostHog.js]"),In=Ae.createLogger,dU=In("[ExternalScriptsLoader]"),zA=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return dU.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var i=Ce==null?void 0:Ce.querySelectorAll("script");if(i){for(var r=0;r<i.length;r++)if(i[r].src===e)return n()}var s=()=>{if(!Ce)return n("document not found");var o=Ce.createElement("script");if(o.type="text/javascript",o.crossOrigin="anonymous",o.src=e,o.onload=c=>n(void 0,c),o.onerror=c=>n(c),t.config.prepare_external_dependency_script&&(o=t.config.prepare_external_dependency_script(o)),!o)return n("prepare_external_dependency_script returned null");var a,l=Ce.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(o,l[0]):Ce.body.appendChild(o)};Ce!=null&&Ce.body?s():Ce==null||Ce.addEventListener("DOMContentLoaded",s)};function Se(){return Se=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Se.apply(null,arguments)}function p5(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}Ke.__PosthogExtensions__=Ke.__PosthogExtensions__||{},Ke.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var i="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(i="/array/"+t.config.token+"/config.js"),e==="toolbar"){var r=3e5;i=i+"&t="+Math.floor(Date.now()/r)*r}var s=t.requestRouter.endpointFor("assets",i);zA(t,s,n)},Ke.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var i=t.requestRouter.endpointFor("api",e);zA(t,i,n)};var F0={};function qa(t,e,n){if(qt(t)){if(DA&&t.forEach===DA)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===F0)return}}}function At(t,e,n){if(!St(t)){if(qt(t))return qa(t,e,n);if(cU(t)){for(var i of t.entries())if(e.call(n,i[1],i[0])===F0)return}else for(var r in t)if(f5.call(t,r)&&e.call(n,t[r],r)===F0)return}}var dn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return qa(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t},My=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return qa(n,function(r){qa(r,function(s){t.push(s)})}),t};function t0(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var BA=function(t){try{return t()}catch{return}},fU=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){Ae.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Ae.critical(r)}}},Jk=function(t){var e={};return At(t,function(n,i){(ln(n)&&n.length>0||ai(n))&&(e[i]=n)}),e};function hU(t,e){return n=t,i=s=>ln(s)&&!El(e)?s.slice(0,e):s,r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),qt(o)?(l=[],qa(o,c=>{l.push(s(c))})):(l={},At(o,(c,u)=>{r.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,i,r}var pU=["herokuapp.com","vercel.app","netlify.app"];function mU(t){var e=t==null?void 0:t.hostname;if(!ln(e))return!1;var n=e.split(".").slice(-2).join(".");for(var i of pU)if(n===i)return!1;return!0}function m5(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function Qt(t,e,n,i){var{capture:r=!1,passive:s=!0}=i??{};t==null||t.addEventListener(e,n,{capture:r,passive:s})}var g5="$people_distinct_id",Vf="__alias",Hf="__timers",UA="$autocapture_disabled_server_side",gw="$heatmaps_enabled_server_side",VA="$exception_capture_enabled_server_side",vw="$error_tracking_suppression_rules",HA="$web_vitals_enabled_server_side",v5="$dead_clicks_enabled_server_side",WA="$web_vitals_allowed_metrics",yw="$session_recording_enabled_server_side",GA="$console_log_recording_enabled_server_side",KA="$session_recording_network_payload_capture",qA="$session_recording_masking",YA="$session_recording_canvas_recording",XA="$replay_sample_rate",JA="$replay_minimum_duration",ZA="$replay_script_config",z0="$sesid",Wf="$session_is_sampled",bw="$session_recording_url_trigger_activated_session",xw="$session_recording_event_trigger_activated_session",Au="$enabled_feature_flags",n0="$early_access_features",ww="$feature_flag_details",Gf="$stored_person_properties",Zl="$stored_group_properties",Sw="$surveys",Tm="$surveys_activated",B0="$flag_call_reported",wo="$user_state",kw="$client_session_props",_w="$capture_rate_limit",Cw="$initial_campaign_params",Ew="$initial_referrer_info",U0="$initial_person_info",V0="$epp",y5="__POSTHOG_TOOLBAR__",Om="$posthog_cookieless",gU=[g5,Vf,"__cmpns",Hf,yw,gw,z0,Au,vw,wo,n0,ww,Zl,Gf,Sw,B0,kw,_w,Cw,Ew,V0,U0];function QA(t){return t instanceof Element&&(t.id===y5||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function Ry(t){return!!t&&t.nodeType===1}function Ya(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function b5(t){return!!t&&t.nodeType===3}function x5(t){return!!t&&t.nodeType===11}function Zk(t){return t?Ny(t).split(/\s+/):[]}function eN(t){var e=q==null?void 0:q.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function H0(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return Zk(e)}function w5(t){return St(t)?null:Ny(t).split(/(\s+)/).filter(e=>xd(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Ty(t){var e="";return Nw(t)&&!_5(t)&&t.childNodes&&t.childNodes.length&&At(t.childNodes,function(n){var i;b5(n)&&n.textContent&&(e+=(i=w5(n.textContent))!==null&&i!==void 0?i:"")}),Ny(e)}function S5(t){return ve(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var Aw=["a","button","form","input","select","textarea","label"];function k5(t){var e=t.parentNode;return!(!e||!Ry(e))&&e}function vU(t,e,n,i,r){var s,o,a;if(n===void 0&&(n=void 0),!q||!t||Ya(t,"html")||!Ry(t)||(s=n)!=null&&s.url_allowlist&&!eN(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&eN(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(v=>e.type===v))return!1}for(var c=!1,u=[t],d=!0,h=t;h.parentNode&&!Ya(h,"body");)if(x5(h.parentNode))u.push(h.parentNode.host),h=h.parentNode.host;else{if(!(d=k5(h)))break;if(i||Aw.indexOf(d.tagName.toLowerCase())>-1)c=!0;else{var p=q.getComputedStyle(d);p&&p.getPropertyValue("cursor")==="pointer"&&(c=!0)}u.push(d),h=d}if(!function(v,y){var x=y==null?void 0:y.element_allowlist;if(ve(x))return!0;var w,S=function(E){if(x.some(C=>E.tagName.toLowerCase()===C))return{v:!0}};for(var _ of v)if(w=S(_))return w.v;return!1}(u,n)||!function(v,y){var x=y==null?void 0:y.css_selector_allowlist;if(ve(x))return!0;var w,S=function(E){if(x.some(C=>E.matches(C)))return{v:!0}};for(var _ of v)if(w=S(_))return w.v;return!1}(u,n))return!1;var g=q.getComputedStyle(t);if(g&&g.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var m=t.tagName.toLowerCase();switch(m){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return c?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(Aw.indexOf(m)>-1||t.getAttribute("contenteditable")==="true")}}function Nw(t){for(var e=t;e.parentNode&&!Ya(e,"body");e=e.parentNode){var n=H0(e);if(at(n,"ph-sensitive")||at(n,"ph-no-capture"))return!1}if(at(H0(t),"ph-include"))return!0;var i=t.type||"";if(ln(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(ln(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function _5(t){return!!(Ya(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||Ya(t,"select")||Ya(t,"textarea")||t.getAttribute("contenteditable")==="true")}var C5="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",yU=new RegExp("^(?:"+C5+")$"),bU=new RegExp(C5),E5="\\d{3}-?\\d{2}-?\\d{4}",xU=new RegExp("^("+E5+")$"),wU=new RegExp("("+E5+")");function xd(t,e){return e===void 0&&(e=!0),!(St(t)||ln(t)&&(t=Ny(t),(e?yU:bU).test((t||"").replace(/[- ]/g,""))||(e?xU:wU).test(t)))}function A5(t){var e=Ty(t);return xd(e=(e+" "+N5(t)).trim())?e:""}function N5(t){var e="";return t&&t.childNodes&&t.childNodes.length&&At(t.childNodes,function(n){var i;if(n&&((i=n.tagName)==null?void 0:i.toLowerCase())==="span")try{var r=Ty(n);e=(e+" "+r).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+N5(n)).trim())}catch(s){Ae.error("[AutoCapture]",s)}}),e}function SU(t){return function(e){var n=e.map(i=>{var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class)for(var a of(i.attr_class.sort(),i.attr_class))o+="."+a.replace(/"/g,"");var l=Se({},i.text?{text:i.text}:{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{},i.attr_id?{attr_id:i.attr_id}:{},i.attributes),c={};return t0(l).sort((u,d)=>{var[h]=u,[p]=d;return h.localeCompare(p)}).forEach(u=>{var[d,h]=u;return c[tN(d.toString())]=tN(h.toString())}),o+=":",o+=t0(c).map(u=>{var[d,h]=u;return d+'="'+h+'"'}).join("")});return n.join(";")}(function(e){return e.map(n=>{var i,r,s={text:(i=n.$el_text)==null?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)==null?void 0:r.slice(0,2048),attr_class:kU(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return t0(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function tN(t){return t.replace(/"|\\"/g,'\\"')}function kU(t){var e=t.attr__class;return e?qt(e)?e:Zk(e):void 0}let P5=class{constructor(){this.clicks=[]}isRageClick(e,n,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}};var _U=["localhost","127.0.0.1"],wd=t=>{var e=Ce==null?void 0:Ce.createElement("a");return ve(e)?null:(e.href=t,e)},CU=function(t,e){var n,i;e===void 0&&(e="&");var r=[];return At(t,function(s,o){ve(s)||ve(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),i=encodeURIComponent(o),r[r.length]=i+"="+n)}),r.join(e)},W0=function(t,e){for(var n,i=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!qt(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{Ae.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},Qk=function(t,e,n){if(!t||!e||!e.length)return t;for(var i=t.split("#"),r=i[0]||"",s=i[1],o=r.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),u=[],d=0;d<c.length;d++){var h=c[d].split("=");qt(h)&&(e.includes(h[0])?u.push(h[0]+"="+n):u.push(c[d]))}var p=l;return a!=null&&(p+="?"+u.join("&")),s!=null&&(p+="#"+s),p},G0=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},nN=In("[AutoCapture]");function ix(t,e){return e.length>t?e.slice(0,t)+"...":e}function EU(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!Ry(e));return e}function AU(t,e,n,i){var r=t.tagName.toLowerCase(),s={tag_name:r};Aw.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=ix(1024,A5(t)):s.$el_text=ix(1024,Ty(t)));var o=H0(t);o.length>0&&(s.classes=o.filter(function(u){return u!==""})),At(t.attributes,function(u){var d;if((!_5(t)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(i==null||!i.includes(u.name))&&!e&&xd(u.value)&&(d=u.name,!ln(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var h=u.value;u.name==="class"&&(h=Zk(h).join(" ")),s["attr__"+u.name]=ix(1024,h)}});for(var a=1,l=1,c=t;c=EU(c);)a++,c.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function NU(t,e){for(var n,i,{e:r,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,c=[t],u=t;u.parentNode&&!Ya(u,"body");)x5(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,h=[],p={},g=!1,m=!1;if(At(c,S=>{var _=Nw(S);S.tagName.toLowerCase()==="a"&&(g=S.getAttribute("href"),g=_&&g&&xd(g)&&g),at(H0(S),"ph-no-capture")&&(m=!0),h.push(AU(S,s,o,a));var E=function(C){if(!Nw(C))return{};var N={};return At(C.attributes,function(M){if(M.name&&M.name.indexOf("data-ph-capture-attribute")===0){var I=M.name.replace("data-ph-capture-attribute-",""),O=M.value;I&&O&&xd(O)&&(N[I]=O)}}),N}(S);dn(p,E)}),m)return{props:{},explicitNoCapture:m};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?h[0].$el_text=A5(t):h[0].$el_text=Ty(t)),g){var v,y;h[0].attr__href=g;var x=(v=wd(g))==null?void 0:v.host,w=q==null||(y=q.location)==null?void 0:y.host;x&&w&&x!==w&&(d=g)}return{props:dn({$event_type:r.type,$ce_version:1},l?{}:{$elements:h},{$elements_chain:SU(h)},(n=h[0])!=null&&n.$el_text?{$el_text:(i=h[0])==null?void 0:i.$el_text}:{},d&&r.type==="click"?{$external_click_url:d}:{},p)}}let PU=class{constructor(e){this.i=!1,this.o=null,this.rageclicks=new P5,this.h=!1,this.instance=e,this.m=null}get S(){var e,n,i=an(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=(e=i.url_allowlist)==null?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=(n=i.url_ignorelist)==null?void 0:n.map(r=>new RegExp(r)),i}$(){if(this.isBrowserSupported()){if(q&&Ce){var e=i=>{i=i||(q==null?void 0:q.event);try{this.k(i)}catch(r){nN.error("Failed to capture event",r)}};if(Qt(Ce,"submit",e,{capture:!0}),Qt(Ce,"change",e,{capture:!0}),Qt(Ce,"click",e,{capture:!0}),this.S.capture_copied_text){var n=i=>{i=i||(q==null?void 0:q.event),this.k(i,nx)};Qt(Ce,"copy",n,{capture:!0}),Qt(Ce,"cut",n,{capture:!0})}}}else nN.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[UA]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var n,i=[];return(n=this.m)==null||n.forEach(r=>{var s=Ce==null?void 0:Ce.querySelectorAll(r);s==null||s.forEach(o=>{e===o&&i.push(r)})}),i}get isEnabled(){var e,n,i=(e=this.instance.persistence)==null?void 0:e.props[UA],r=this.o;if(El(r)&&!Ys(i)&&!this.instance.I())return!1;var s=(n=this.o)!==null&&n!==void 0?n:!!i;return!!this.instance.config.autocapture&&!s}k(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var i,r=S5(e);b5(r)&&(r=r.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.k(e,"$rageclick");var s=n===nx;if(r&&vU(r,e,this.S,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=NU(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(o.$element_selectors=l),n===nx){var c,u=w5(q==null||(c=q.getSelection())==null?void 0:c.toString()),d=e.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return zr(Ce==null?void 0:Ce.querySelectorAll)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return ai(t)&&isFinite(t)&&Math.floor(t)===t});var iN="0123456789abcdef";let MU=class Pw{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new Pw(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+iN.charAt(this.bytes[n]>>>4)+iN.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new Pw(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}},RU=class{constructor(){this.P=0,this.R=0,this.T=new TU}generate(){var e=this.generateOrAbort();if(ve(e)){this.P=0;var n=this.generateOrAbort();if(ve(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.P)this.P=e,this.M();else{if(!(e+1e4>this.P))return;this.R++,this.R>4398046511103&&(this.P++,this.M())}return MU.fromFieldsV7(this.P,Math.trunc(this.R/Math.pow(2,30)),this.R&Math.pow(2,30)-1,this.T.nextUint32())}M(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}};var rN,M5=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};q&&!ve(q.crypto)&&crypto.getRandomValues&&(M5=t=>crypto.getRandomValues(t));let TU=class{constructor(){this.C=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.C.length&&(M5(this.C),this.F=0),this.C[this.F++]}};var La=()=>OU().toString(),OU=()=>(rN||(rN=new RU)).generate(),mf="",IU=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function jU(t,e){if(e){var n=function(r,s){if(s===void 0&&(s=Ce),mf)return mf;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+La();!mf&&a--;){var c=o.slice(a).join("."),u=l+"=1;domain=."+c+";path=/";s.cookie=u+";max-age=3",s.cookie.includes(l)&&(s.cookie=u+";max-age=0",mf=c)}return mf}(t);if(!n){var i=(r=>{var s=r.match(IU);return s?s[0]:""})(t);i!==n&&Ae.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var no={O:()=>!!Ce,A:function(t){Ae.error("cookieStore error: "+t)},D:function(t){if(Ce){try{for(var e=t+"=",n=Ce.cookie.split(";").filter(s=>s.length),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},L:function(t){var e;try{e=JSON.parse(no.D(t))||{}}catch{}return e},j:function(t,e,n,i,r){if(Ce)try{var s="",o="",a=jU(Ce.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&Ae.warn("cookieStore warning: large cookie, len="+c.length),Ce.cookie=c,c}catch{return}},N:function(t,e){try{no.j(t,"",-1,e)}catch{return}}},rx=null,Sn={O:function(){if(!El(rx))return rx;var t=!0;if(ve(q))t=!1;else try{var e="__mplssupport__";Sn.j(e,"xyz"),Sn.D(e)!=='"xyz"'&&(t=!1),Sn.N(e)}catch{t=!1}return t||Ae.error("localStorage unsupported; falling back to cookie store"),rx=t,t},A:function(t){Ae.error("localStorage error: "+t)},D:function(t){try{return q==null?void 0:q.localStorage.getItem(t)}catch(e){Sn.A(e)}return null},L:function(t){try{return JSON.parse(Sn.D(t))||{}}catch{}return null},j:function(t,e){try{q==null||q.localStorage.setItem(t,JSON.stringify(e))}catch(n){Sn.A(n)}},N:function(t){try{q==null||q.localStorage.removeItem(t)}catch(e){Sn.A(e)}}},LU=["distinct_id",z0,Wf,V0,U0],Im=Se({},Sn,{L:function(t){try{var e={};try{e=no.L(t)||{}}catch{}var n=dn(e,JSON.parse(Sn.D(t)||"{}"));return Sn.j(t,n),n}catch{}return null},j:function(t,e,n,i,r,s){try{Sn.j(t,e,void 0,void 0,s);var o={};LU.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&no.j(t,o,n,i,r,s)}catch(a){Sn.A(a)}},N:function(t,e){try{q==null||q.localStorage.removeItem(t),no.N(t,e)}catch(n){Sn.A(n)}}}),jm={},DU={O:function(){return!0},A:function(t){Ae.error("memoryStorage error: "+t)},D:function(t){return jm[t]||null},L:function(t){return jm[t]||null},j:function(t,e){jm[t]=e},N:function(t){delete jm[t]}},Bl=null,Un={O:function(){if(!El(Bl))return Bl;if(Bl=!0,ve(q))Bl=!1;else try{var t="__support__";Un.j(t,"xyz"),Un.D(t)!=='"xyz"'&&(Bl=!1),Un.N(t)}catch{Bl=!1}return Bl},A:function(t){Ae.error("sessionStorage error: ",t)},D:function(t){try{return q==null?void 0:q.sessionStorage.getItem(t)}catch(e){Un.A(e)}return null},L:function(t){try{return JSON.parse(Un.D(t))||null}catch{}return null},j:function(t,e){try{q==null||q.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Un.A(n)}},N:function(t){try{q==null||q.sessionStorage.removeItem(t)}catch(e){Un.A(e)}}},tu=function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t}({});let $U=class{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.U()?tu.DENIED:this.q}isOptedOut(){return this.consent===tu.DENIED||this.consent===tu.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.B.j(this.H,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:e,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+e}get q(){var e=this.B.D(this.H);return e==="1"?tu.GRANTED:e==="0"?tu.DENIED:tu.PENDING}get B(){if(!this.W){var e=this.S.opt_out_capturing_persistence_type;this.W=e==="localStorage"?Sn:no;var n=e==="localStorage"?no:Sn;n.D(this.H)&&(this.W.D(this.H)||this.optInOut(n.D(this.H)==="1"),n.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!m5([cr==null?void 0:cr.doNotTrack,cr==null?void 0:cr.msDoNotTrack,Ke.doNotTrack],e=>at([!0,1,"1","yes"],e))}};var Lm=In("[Dead Clicks]"),FU=()=>!0,zU=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property(v5)),i=t.instance.config.capture_dead_clicks;return Ys(i)?i:n};let R5=class{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(e,n,i){this.instance=e,this.isEnabled=n,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[v5]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(e){var n,i;(n=Ke.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(i=Ke.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this.instance,"dead-clicks-autocapture",r=>{r?Lm.error("failed to load script",r):e()})}V(){var e;if(Ce){if(!this.G&&(e=Ke.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=an(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.G=Ke.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.G.start(Ce),Lm.info("starting...")}}else Lm.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,Lm.info("stopping..."))}};function ur(t,e,n,i,r){return e>n&&(Ae.warn("min cannot be greater than max."),e=n),ai(t)?t>n?(i&&Ae.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(i&&Ae.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):t:(i&&Ae.warn(i+" must be a number. using max or fallback. max: "+n+", fallback: "+r),ur(r||n,e,n,i))}let T5=class{constructor(e){this.K={},this.Y=()=>{Object.keys(this.K).forEach(n=>{var i=this.X(n)+this.Z;i>=this.tt?delete this.K[n]:this.it(n,i)})},this.X=n=>this.K[String(n)],this.it=(n,i)=>{this.K[String(n)]=i},this.consumeRateLimit=n=>{var i,r=(i=this.X(n))!==null&&i!==void 0?i:this.tt;if((r=Math.max(r-1,0))===0)return!0;this.it(n,r);var s,o=r===0;return o&&((s=this.et)==null||s.call(this,n)),o},this.rt=e,this.et=this.rt.et,this.tt=ur(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=ur(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=ur(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}};var Dm=In("[ExceptionAutocapture]");let BU=class{constructor(e){var n,i,r;this.nt=()=>{var s;if(q&&this.isEnabled&&(s=Ke.__PosthogExtensions__)!=null&&s.errorWrappingFunctions){var o=Ke.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=Ke.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=Ke.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=o(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=a(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=l(this.captureException.bind(this)))}catch(c){Dm.error("failed to start",c),this.ht()}}},this._instance=e,this.dt=!((n=this._instance.persistence)==null||!n.props[VA]),this.S=this.vt(),this.ct=new T5({refillRate:(i=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&i!==void 0?i:1,bucketSize:(r=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&r!==void 0?r:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return an(e)?n=Se({},n,e):(ve(e)?this.dt:e)&&(n=Se({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Dm.info("enabled"),this.J(this.nt))}J(e){var n,i;(n=Ke.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(i=Ke.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"exception-autocapture",r=>{if(r)return Dm.error("failed to load script",r);e()})}ht(){var e,n,i;(e=this.ot)==null||e.call(this),this.ot=void 0,(n=this.lt)==null||n.call(this),this.lt=void 0,(i=this.ut)==null||i.call(this),this.ut=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.dt=!!n||!1,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[VA]:this.dt}),this.startIfEnabled()}captureException(e){var n,i=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=i+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var r=(n=e.$exception_list[0].type)!==null&&n!==void 0?n:"Exception";this.ct.consumeRateLimit(r)?Dm.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}};function O5(t){return!ve(Event)&&I5(t,Event)}function I5(t,e){try{return t instanceof e}catch{return!1}}function j5(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return I5(t,Error)}}function i0(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function sx(t){return i0(t,"DOMError")}var sN=/\(error: (.*)\)/,oN=50,Nu="?";function ox(t,e,n,i){var r={platform:"web:javascript",filename:t,function:e==="<anonymous>"?Nu:e,in_app:!0};return ve(n)||(r.lineno=n),ve(i)||(r.colno=i),r}var UU=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,VU=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,HU=/\((\S*)(?::(\d+))(?::(\d+))\)/,WU=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,GU=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,KU=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.sort((r,s)=>r[0]-s[0]).map(r=>r[1]);return function(r,s){s===void 0&&(s=0);for(var o=[],a=r.split(`
`),l=s;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var u=sN.test(c)?c.replace(sN,"$1"):c;if(!u.match(/\S*Error: /)){for(var d of i){var h=d(u);if(h){o.push(h);break}}if(o.length>=oN)break}}}return function(p){if(!p.length)return[];var g=Array.from(p);return g.reverse(),g.slice(0,oN).map(m=>Se({},m,{filename:m.filename||qU(g).filename,function:m.function||Nu}))}(o)}}([30,t=>{var e=UU.exec(t);if(e){var[,n,i,r]=e;return ox(n,Nu,+i,+r)}var s=VU.exec(t);if(s){if(s[2]&&s[2].indexOf("eval")===0){var o=HU.exec(s[2]);o&&(s[2]=o[1],s[3]=o[2],s[4]=o[3])}var[a,l]=lN(s[1]||Nu,s[2]);return ox(l,a,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}}],[50,t=>{var e=WU.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=GU.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var i=e[3],r=e[1]||Nu;return[r,i]=lN(r,i),ox(i,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function qU(t){return t[t.length-1]||{}}var $m,aN,ax,lN=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,i=t.indexOf("safari-web-extension")!==-1;return n||i?[t.indexOf("@")!==-1?t.split("@")[0]:Nu,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},YU=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function e_(t,e){e===void 0&&(e=0);var n=t.stacktrace||t.stack||"",i=function(o){return o&&XU.test(o.message)?1:0}(t);try{var r=KU,s=function(o,a){var l=function(c){var u=globalThis._posthogChunkIds;if(!u)return{};var d=Object.keys(u);return ax&&d.length===aN||(aN=d.length,ax=d.reduce((h,p)=>{$m||($m={});var g=$m[p];if(g)h[g[0]]=g[1];else for(var m=c(p),v=m.length-1;v>=0;v--){var y=m[v],x=y==null?void 0:y.filename,w=u[p];if(x&&w){h[x]=w,$m[p]=[x,w];break}}return h},{})),ax}(a);return o.forEach(c=>{c.filename&&(c.chunk_id=l[c.filename])}),o}(r(n,i),r);return s.slice(0,s.length-e)}catch{}return[]}var XU=/Minified React error #\d+;/i;function JU(t,e){var n,i,r=e_(t),s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)!==null&&i!==void 0&&i;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(t),stacktrace:{frames:r,type:"raw"},mechanism:{handled:s,synthetic:o}}}function L5(t,e){var n=JU(t,e);return t.cause&&j5(t.cause)&&t.cause!==t?[n,...L5(t.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[n]}function lx(t,e){return{$exception_list:L5(t,e),$exception_level:"error"}}function cx(t,e){var n,i,r,s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,a={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(r=e==null?void 0:e.defaultExceptionType)!==null&&r!==void 0?r:"Error",value:t||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:s,synthetic:o}};if(e!=null&&e.syntheticException){var l=e_(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function ZU(t){return ln(t)&&!mw(t)&&aU.indexOf(t)>=0}function QU(t,e){var n,i,r=(n=e==null?void 0:e.handled)===null||n===void 0||n,s=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,o=e!=null&&e.overrideExceptionType?e.overrideExceptionType:O5(t)?t.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(u,d){d===void 0&&(d=40);var h=Object.keys(u);if(h.sort(),!h.length)return"[object has no keys]";for(var p=h.length;p>0;p--){var g=h.slice(0,p).join(", ");if(!(g.length>d))return p===h.length||g.length<=d?g:g.slice(0,d)+"..."}return""}(t),l={type:o,value:a,mechanism:{handled:r,synthetic:s}};if(e!=null&&e.syntheticException){var c=e_(e==null?void 0:e.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:ZU(t.level)?t.level:"error"}}function eV(t,e){var{error:n,event:i}=t,r={$exception_list:[]},s=n||i;if(sx(s)||function(h){return i0(h,"DOMException")}(s)){var o=s;if(function(h){return"stack"in h}(s))r=lx(s,e);else{var a=o.name||(sx(o)?"DOMError":"DOMException"),l=o.message?a+": "+o.message:a;r=cx(l,Se({},e,{overrideExceptionType:sx(o)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in o&&(r.$exception_DOMException_code=""+o.code),r}if(function(h){return i0(h,"ErrorEvent")}(s)&&s.error)return lx(s.error,e);if(j5(s))return lx(s,e);if(function(h){return i0(h,"Object")}(s)||O5(s))return QU(s,e);if(ve(n)&&ln(i)){var c="Error",u=i,d=i.match(YU);return d&&(c=d[1],u=d[2]),cx(u,Se({},e,{overrideExceptionType:c,defaultExceptionMessage:u}))}return cx(s,e)}function cN(t,e,n){try{if(!(e in t))return()=>{};var i=t[e],r=n(i);return zr(r)&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=r,()=>{t[e]=i}}catch{return()=>{}}}let tV=class{constructor(e){var n;this._instance=e,this.ft=(q==null||(n=q.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(Ae.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.gt&&this.gt(),this.gt=void 0,Ae.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(q&&q.history){var i=this;(e=q.history.pushState)!=null&&e.__posthog_wrapped__||cN(q.history,"pushState",r=>function(s,o,a){r.call(this,s,o,a),i._t("pushState")}),(n=q.history.replaceState)!=null&&n.__posthog_wrapped__||cN(q.history,"replaceState",r=>function(s,o,a){r.call(this,s,o,a),i._t("replaceState")}),this.bt()}}_t(e){try{var n,i=q==null||(n=q.location)==null?void 0:n.pathname;if(!i)return;i!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ft=i}catch(r){Ae.error("Error capturing "+e+" pageview",r)}}bt(){if(!this.gt){var e=()=>{this._t("popstate")};Qt(q,"popstate",e),this.gt=()=>{q&&q.removeEventListener("popstate",e)}}}};function K0(t){var e,n;return((e=JSON.stringify(t,(n=[],function(i,r){if(an(r)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(r)?"[Circular]":(n.push(r),r)}return r})))==null?void 0:e.length)||0}function Mw(t,e){if(e===void 0&&(e=66060288e-1),t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[Mw({size:K0(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),Mw({size:K0(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var So=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(So||{}),is=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(is||{}),Rw="[SessionRecording]",Tw="redacted",Fm={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},nV=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],iV=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],rV=["/s/","/e/","/i/"];function uN(t,e,n,i){if(St(t))return t;var r=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return ln(r)&&(r=parseInt(r)),r>n?Rw+" "+i+" body too large to record ("+r+" bytes)":t}function dN(t,e){if(St(t))return t;var n=t;return xd(n,!1)||(n=Rw+" "+e+" body "+Tw),At(iV,i=>{var r,s;(r=n)!=null&&r.length&&((s=n)==null?void 0:s.indexOf(i))!==-1&&(n=Rw+" "+e+" body "+Tw+" as might contain: "+i)}),n}var sV=(t,e)=>{var n,i,r,s={payloadSizeLimitBytes:Fm.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...Fm.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...Fm.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,c=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),h=>(h!=null&&h.requestBody&&(h.requestBody=uN(h.requestBody,h.requestHeaders,r,"Request")),h!=null&&h.responseBody&&(h.responseBody=uN(h.responseBody,h.responseHeaders,r,"Response")),h)),u=h=>{return c(((m,v)=>{var y,x=wd(m.name),w=v.indexOf("http")===0?(y=wd(v))==null?void 0:y.pathname:v;w==="/"&&(w="");var S=x==null?void 0:x.pathname.replace(w||"","");if(!(x&&S&&rV.some(_=>S.indexOf(_)===0)))return m})((g=(p=h).requestHeaders,St(g)||At(Object.keys(g??{}),m=>{nV.includes(m.toLowerCase())&&(g[m]=Tw)}),p),t.api_host));var p,g},d=zr(t.session_recording.maskNetworkRequestFn);return d&&zr(t.session_recording.maskCapturedNetworkRequestFn)&&Ae.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=h=>{var p=t.session_recording.maskNetworkRequestFn({url:h.name});return Se({},h,{name:p==null?void 0:p.url})}),s.maskRequestFn=zr(t.session_recording.maskCapturedNetworkRequestFn)?h=>{var p,g=u(h);return g&&(p=t.session_recording.maskCapturedNetworkRequestFn==null?void 0:t.session_recording.maskCapturedNetworkRequestFn(g))!==null&&p!==void 0?p:void 0}:h=>function(p){if(!ve(p))return p.requestBody=dN(p.requestBody,"Request"),p.responseBody=dN(p.responseBody,"Response"),p}(u(h)),Se({},Fm,s,{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};let oV=class{constructor(e,n){var i,r;n===void 0&&(n={}),this.yt={},this.wt=s=>{if(!this.yt[s]){var o,a;this.yt[s]=!0;var l=this.St(s);(o=(a=this.rt).onBlockedNode)==null||o.call(a,s,l)}},this.$t=s=>{var o=this.St(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[s,o]},this.St=s=>this._rrweb.mirror.getNode(s),this.kt=s=>{var o,a,l,c,u,d,h,p;return((o=(a=s.removes)==null?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(c=s.attributes)==null?void 0:c.length)!==null&&l!==void 0?l:0)+((u=(d=s.texts)==null?void 0:d.length)!==null&&u!==void 0?u:0)+((h=(p=s.adds)==null?void 0:p.length)!==null&&h!==void 0?h:0)},this.throttleMutations=s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.kt(o);o.attributes&&(o.attributes=o.attributes.filter(c=>{var[u]=this.$t(c.id);return!this.ct.consumeRateLimit(u)&&c}));var l=this.kt(o);return l!==0||a===l?s:void 0},this._rrweb=e,this.rt=n,this.ct=new T5({bucketSize:(i=this.rt.bucketSize)!==null&&i!==void 0?i:100,refillRate:(r=this.rt.refillRate)!==null&&r!==void 0?r:10,refillInterval:1e3,et:this.wt})}};var Br=Uint8Array,Wi=Uint16Array,Sd=Uint32Array,t_=new Br([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),n_=new Br([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fN=new Br([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),D5=function(t,e){for(var n=new Wi(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new Sd(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},$5=D5(t_,2),aV=$5[0],Ow=$5[1];aV[28]=258,Ow[258]=28;for(var hN=D5(n_,0)[1],F5=new Wi(32768),zt=0;zt<32768;++zt){var Ul=(43690&zt)>>>1|(21845&zt)<<1;Ul=(61680&(Ul=(52428&Ul)>>>2|(13107&Ul)<<2))>>>4|(3855&Ul)<<4,F5[zt]=((65280&Ul)>>>8|(255&Ul)<<8)>>>1}var ph=function(t,e,n){for(var i=t.length,r=0,s=new Wi(e);r<i;++r)++s[t[r]-1];var o,a=new Wi(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;for(o=new Wi(i),r=0;r<i;++r)o[r]=F5[a[t[r]-1]++]>>>15-t[r];return o},Ec=new Br(288);for(zt=0;zt<144;++zt)Ec[zt]=8;for(zt=144;zt<256;++zt)Ec[zt]=9;for(zt=256;zt<280;++zt)Ec[zt]=7;for(zt=280;zt<288;++zt)Ec[zt]=8;var q0=new Br(32);for(zt=0;zt<32;++zt)q0[zt]=5;var lV=ph(Ec,9),cV=ph(q0,5),z5=function(t){return(t/8>>0)+(7&t&&1)},B5=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Wi?Wi:t instanceof Sd?Sd:Br)(n-e);return i.set(t.subarray(e,n)),i},yo=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},gf=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},ux=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new Br(0),0];if(r==1){var o=new Br(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(_,E){return _.f-E.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var h=s[0].s;for(i=1;i<r;++i)s[i].s>h&&(h=s[i].s);var p=new Wi(h+1),g=Iw(n[u-1],p,0);if(g>e){i=0;var m=0,v=g-e,y=1<<v;for(s.sort(function(_,E){return p[E.s]-p[_.s]||_.f-E.f});i<r;++i){var x=s[i].s;if(!(p[x]>e))break;m+=y-(1<<g-p[x]),p[x]=e}for(m>>>=v;m>0;){var w=s[i].s;p[w]<e?m-=1<<e-p[w]++-1:++i}for(;i>=0&&m;--i){var S=s[i].s;p[S]==e&&(--p[S],++m)}g=e}return[new Br(p),g]},Iw=function(t,e,n){return t.s==-1?Math.max(Iw(t.l,e,n+1),Iw(t.r,e,n+1)):e[t.s]=n},pN=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Wi(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},vf=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},jw=function(t,e,n){var i=n.length,r=z5(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},mN=function(t,e,n,i,r,s,o,a,l,c,u){yo(e,u++,n),++r[256];for(var d=ux(r,15),h=d[0],p=d[1],g=ux(s,15),m=g[0],v=g[1],y=pN(h),x=y[0],w=y[1],S=pN(m),_=S[0],E=S[1],C=new Wi(19),N=0;N<x.length;++N)C[31&x[N]]++;for(N=0;N<_.length;++N)C[31&_[N]]++;for(var M=ux(C,7),I=M[0],O=M[1],T=19;T>4&&!I[fN[T-1]];--T);var H,L,K,X,te=c+5<<3,U=vf(r,Ec)+vf(s,q0)+o,z=vf(r,h)+vf(s,m)+o+14+3*T+vf(C,I)+(2*C[16]+3*C[17]+7*C[18]);if(te<=U&&te<=z)return jw(e,u,t.subarray(l,l+c));if(yo(e,u,1+(z<U)),u+=2,z<U){H=ph(h,p),L=h,K=ph(m,v),X=m;var ie=ph(I,O);for(yo(e,u,w-257),yo(e,u+5,E-1),yo(e,u+10,T-4),u+=14,N=0;N<T;++N)yo(e,u+3*N,I[fN[N]]);u+=3*T;for(var be=[x,_],J=0;J<2;++J){var le=be[J];for(N=0;N<le.length;++N){var F=31&le[N];yo(e,u,ie[F]),u+=I[F],F>15&&(yo(e,u,le[N]>>>5&127),u+=le[N]>>>12)}}}else H=lV,L=Ec,K=cV,X=q0;for(N=0;N<a;++N)if(i[N]>255){F=i[N]>>>18&31,gf(e,u,H[F+257]),u+=L[F+257],F>7&&(yo(e,u,i[N]>>>23&31),u+=t_[F]);var $=31&i[N];gf(e,u,K[$]),u+=X[$],$>3&&(gf(e,u,i[N]>>>5&8191),u+=n_[$])}else gf(e,u,H[i[N]]),u+=L[i[N]];return gf(e,u,H[256]),u+L[256]},uV=new Sd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),dV=function(){for(var t=new Sd(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),fV=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=dV[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},hV=function(t,e,n,i,r){return function(s,o,a,l,c,u){var d=s.length,h=new Br(l+d+5*(1+Math.floor(d/7e3))+c),p=h.subarray(l,h.length-c),g=0;if(!o||d<8)for(var m=0;m<=d;m+=65535){var v=m+65535;v<d?g=jw(p,g,s.subarray(m,v)):(p[m]=u,g=jw(p,g,s.subarray(m,d)))}else{for(var y=uV[o-1],x=y>>>13,w=8191&y,S=(1<<a)-1,_=new Wi(32768),E=new Wi(S+1),C=Math.ceil(a/3),N=2*C,M=function(Ue){return(s[Ue]^s[Ue+1]<<C^s[Ue+2]<<N)&S},I=new Sd(25e3),O=new Wi(288),T=new Wi(32),H=0,L=0,K=(m=0,0),X=0,te=0;m<d;++m){var U=M(m),z=32767&m,ie=E[U];if(_[z]=ie,E[U]=z,X<=m){var be=d-m;if((H>7e3||K>24576)&&be>423){g=mN(s,p,0,I,O,T,L,K,te,m-te,g),K=H=L=0,te=m;for(var J=0;J<286;++J)O[J]=0;for(J=0;J<30;++J)T[J]=0}var le=2,F=0,$=w,V=z-ie&32767;if(be>2&&U==M(m-V))for(var k=Math.min(x,be)-1,P=Math.min(32767,m),j=Math.min(258,be);V<=P&&--$&&z!=ie;){if(s[m+le]==s[m+le-V]){for(var R=0;R<j&&s[m+R]==s[m+R-V];++R);if(R>le){if(le=R,F=V,R>k)break;var Y=Math.min(V,R-2),G=0;for(J=0;J<Y;++J){var ne=m-V+J+32768&32767,Z=ne-_[ne]+32768&32767;Z>G&&(G=Z,ie=ne)}}}V+=(z=ie)-(ie=_[z])+32768&32767}if(F){I[K++]=268435456|Ow[le]<<18|hN[F];var Pe=31&Ow[le],ze=31&hN[F];L+=t_[Pe]+n_[ze],++O[257+Pe],++T[ze],X=m+le,++H}else I[K++]=s[m],++O[s[m]]}}g=mN(s,p,u,I,O,T,L,K,te,m-te,g)}return B5(h,0,l+z5(g)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!0)},Lw=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},pV=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&Lw(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},mV=function(t){return 10+(t.filename&&t.filename.length+1||0)};function U5(t,e){e===void 0&&(e={});var n=fV(),i=t.length;n.p(t);var r=hV(t,e,mV(e),8),s=r.length;return pV(r,e),Lw(r,s-8,n.d()),Lw(r,s-4,i),r}function V5(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new Br(t.length+(t.length>>>1)),r=0,s=function(c){i[r++]=c},o=0;o<n;++o){if(r+5>i.length){var a=new Br(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return B5(i,0,r)}function gV(t,e){return function(n){for(var i=0,r=0;r<n.length;r++)i=(i<<5)-i+n.charCodeAt(r),i|=0;return Math.abs(i)}(t)%100<ur(100*e,0,100)}var ll="disabled",i_="sampled",Y0="active",Ac="buffering",r_="paused",s_="trigger",io=s_+"_activated",ui=s_+"_pending",uo=s_+"_"+ll;function gN(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class H5{constructor(e){this.xt=e}triggerStatus(e){var n=this.xt.map(i=>i.triggerStatus(e));return n.includes(io)?io:n.includes(ui)?ui:uo}stop(){this.xt.forEach(e=>e.stop())}}class W5{constructor(e){this.xt=e}triggerStatus(e){var n=new Set;for(var i of this.xt)n.add(i.triggerStatus(e));switch(n.delete(uo),n.size){case 0:return uo;case 1:return Array.from(n)[0];default:return ui}}stop(){this.xt.forEach(e=>e.stop())}}class vV{triggerStatus(){return ui}stop(){}}class yV{constructor(e){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var n,i;this.Et=((n=e.sessionRecording)==null?void 0:n.urlTriggers)||[],this.It=((i=e.sessionRecording)==null?void 0:i.urlBlocklist)||[]}Pt(e){var n;return this.Et.length===0?uo:((n=this._instance)==null?void 0:n.get_property(bw))===e?io:ui}triggerStatus(e){var n=this.Pt(e),i=n===io?io:n===ui?ui:uo;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:i}),i}checkUrlTriggerConditions(e,n,i){if(q!==void 0&&q.location.href){var r=q.location.href,s=this.urlBlocked,o=gN(r,this.It);s&&o||(o&&!s?e():!o&&s&&n(),gN(r,this.Et)&&i("url"))}}stop(){}}class bV{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=e}triggerStatus(){var e=ui;return St(this.linkedFlag)&&(e=uo),this.linkedFlagSeen&&(e=io),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,n){var i;if(this.linkedFlag=((i=e.sessionRecording)==null?void 0:i.linkedFlag)||null,!St(this.linkedFlag)&&!this.linkedFlagSeen){var r=ln(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,s=ln(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((o,a)=>{var l=!1;if(an(a)&&r in a){var c=a[r];l=Ys(c)?c===!0:s?c===s:!!c}this.linkedFlagSeen=l,l&&n(r,s)})}}stop(){this.Rt()}}let xV=class{constructor(e){this.Tt=[],this._instance=e}onRemoteConfig(e){var n;this.Tt=((n=e.sessionRecording)==null?void 0:n.eventTriggers)||[]}Mt(e){var n;return this.Tt.length===0?uo:((n=this._instance)==null?void 0:n.get_property(xw))===e?io:ui}triggerStatus(e){var n=this.Mt(e),i=n===io?io:n===ui?ui:uo;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:i}),i}stop(){}};function wV(t){return t.isRecordingEnabled?Ac:ll}function SV(t){if(!t.receivedFlags)return Ac;if(!t.isRecordingEnabled)return ll;if(t.urlTriggerMatching.urlBlocked)return r_;var e=t.isSampled===!0,n=new H5([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId);return e?i_:n===io?Y0:n===ui?Ac:t.isSampled===!1?ll:Y0}function kV(t){if(!t.receivedFlags)return Ac;if(!t.isRecordingEnabled)return ll;if(t.urlTriggerMatching.urlBlocked)return r_;var e=new W5([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId),n=e!==uo,i=Ys(t.isSampled);return n&&e===ui?Ac:n&&e===uo||i&&!t.isSampled?ll:t.isSampled===!0?i_:Y0}var Kf="[SessionRecording]",ni=In(Kf);function zm(){var t;return Ke==null||(t=Ke.__PosthogExtensions__)==null||(t=t.rrweb)==null?void 0:t.record}var _V=3e5,CV=[is.MouseMove,is.MouseInteraction,is.Scroll,is.ViewportResize,is.Input,is.TouchMove,is.MediaInteraction,is.Drag],vN=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function Vl(t){return function(e,n){for(var i="",r=0;r<e.length;){var s=e[r++];i+=String.fromCharCode(s)}return i}(U5(V5(JSON.stringify(t))))}function yN(t){return t.type===So.Custom&&t.data.tag==="sessionIdle"}class EV{get sessionId(){return this.Ct}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw new Error(Kf+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var e,n;return this.Lt.triggerStatus(this.sessionId)===ui?6e4:(e=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:_V}get jt(){var e=this._instance.get_property(Wf);return Ys(e)?e:null}get Nt(){var e,n,i=(e=this.C)==null?void 0:e.data[((n=this.C)==null?void 0:n.data.length)-1],{sessionStartTimestamp:r}=this.At.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get zt(){var e=!!this._instance.get_property(yw),n=!this._instance.config.disable_session_recording;return q&&e&&n}get Ut(){var e=!!this._instance.get_property(GA),n=this._instance.config.enable_recording_console_log;return n??e}get qt(){var e,n,i,r,s,o,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(YA),c=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,u=(i=(r=a==null?void 0:a.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&i!==void 0?i:4,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:.4;if(typeof d=="string"){var h=parseFloat(d);d=isNaN(h)?.4:h}return{enabled:c,fps:ur(u,0,12,"canvas recording fps",4),quality:ur(d,0,1,"canvas recording quality",.4)}}get Bt(){var e,n,i=this._instance.get_property(KA),r={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=an(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(Ys(a)?a:i!=null&&i.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get Ht(){var e,n,i,r,s,o,a=this._instance.get_property(qA),l={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(i=this._instance.config.session_recording)==null?void 0:i.blockSelector},c=(r=l==null?void 0:l.maskAllInputs)!==null&&r!==void 0?r:a==null?void 0:a.maskAllInputs,u=(s=l==null?void 0:l.maskTextSelector)!==null&&s!==void 0?s:a==null?void 0:a.maskTextSelector,d=(o=l==null?void 0:l.blockSelector)!==null&&o!==void 0?o:a==null?void 0:a.blockSelector;return ve(c)&&ve(u)&&ve(d)?void 0:{maskAllInputs:c==null||c,maskTextSelector:u,blockSelector:d}}get Wt(){var e=this._instance.get_property(XA);return ai(e)?e:null}get Gt(){var e=this._instance.get_property(JA);return ai(e)?e:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.jt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):Ac}constructor(e){if(this.Vt=wV,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.Lt=new vV,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(Ce!=null&&Ce.visibilityState){var r="window "+Ce.visibilityState;this.ui(r,{})}},this._instance=e,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw ni.error("started without valid sessionManager"),new Error(Kf+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(Kf+" cannot be used with __preview_experimental_cookieless_mode.");this.Xt=new bV(this._instance),this.Kt=new yV(this._instance),this.Yt=new xV(this._instance);var{sessionId:n,windowId:i}=this.At.checkAndGetSessionAndWindowId();this.Ct=n,this.fi=i,this.C=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&ni.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.zt?(this.gi(e),Qt(q,"beforeunload",this.oi),Qt(q,"offline",this.li),Qt(q,"online",this.hi),Qt(q,"visibilitychange",this.di),this.mi(),this.bi(),St(this.ii)&&(this.ii=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var i=n!=null&&n.properties.$current_url?this.yi(n==null?void 0:n.properties.$current_url):"";if(!i)return;this.ui("$pageview",{href:i})}}catch(r){ni.error("Could not add $pageview to rrweb session",r)}})),this.ei||(this.ei=this.At.onSessionId((n,i,r)=>{var s,o;r&&(this.ui("$session_id_change",{sessionId:n,windowId:i,changeReason:r}),(s=this._instance)==null||(s=s.persistence)==null||s.unregister(xw),(o=this._instance)==null||(o=o.persistence)==null||o.unregister(bw))}))):this.stopRecording()}stopRecording(){var e,n,i,r;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,q==null||q.removeEventListener("beforeunload",this.oi),q==null||q.removeEventListener("offline",this.li),q==null||q.removeEventListener("online",this.hi),q==null||q.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),(e=this.ii)==null||e.call(this),this.ii=void 0,(n=this.ni)==null||n.call(this),this.ni=void 0,(i=this.ei)==null||i.call(this),this.ei=void 0,(r=this.si)==null||r.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),ni.info("stopped"))}Si(){var e;(e=this._instance.persistence)==null||e.unregister(Wf)}$i(e){var n,i=this.Ct!==e,r=this.Wt;if(ai(r)){var s=this.jt,o=i||!Ys(s),a=o?gV(e,r):s;o&&(a?this.ki(i_):ni.warn("Sample rate ("+r+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:r,isSampled:a})),(n=this._instance.persistence)==null||n.register({[Wf]:a})}else this.Si()}onRemoteConfig(e){var n,i,r,s;this.ui("$remote_config_received",e),this.xi(e),(n=e.sessionRecording)!=null&&n.endpoint&&(this.vi=(s=e.sessionRecording)==null?void 0:s.endpoint),this.mi(),((i=e.sessionRecording)==null?void 0:i.triggerMatchType)==="any"?(this.Vt=SV,this.Lt=new H5([this.Yt,this.Kt])):(this.Vt=kV,this.Lt=new W5([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(r=e.sessionRecording)==null?void 0:r.triggerMatchType}),this.Kt.onRemoteConfig(e),this.Yt.onRemoteConfig(e),this.Xt.onRemoteConfig(e,(o,a)=>{this.ki("linked_flag_matched",{flag:o,variant:a})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){ai(this.Wt)&&St(this.si)&&(this.si=this.At.onSessionId(e=>{this.$i(e)}))}xi(e){if(this._instance.persistence){var n,i=this._instance.persistence,r=()=>{var s,o,a,l,c,u,d,h,p,g=(s=e.sessionRecording)==null?void 0:s.sampleRate,m=St(g)?null:parseFloat(g);St(m)&&this.Si();var v=(o=e.sessionRecording)==null?void 0:o.minimumDurationMilliseconds;i.register({[yw]:!!e.sessionRecording,[GA]:(a=e.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[KA]:Se({capturePerformance:e.capturePerformance},(l=e.sessionRecording)==null?void 0:l.networkPayloadCapture),[qA]:(c=e.sessionRecording)==null?void 0:c.masking,[YA]:{enabled:(u=e.sessionRecording)==null?void 0:u.recordCanvas,fps:(d=e.sessionRecording)==null?void 0:d.canvasFps,quality:(h=e.sessionRecording)==null?void 0:h.canvasQuality},[XA]:m,[JA]:ve(v)?null:v,[ZA]:(p=e.sessionRecording)==null?void 0:p.scriptConfig})};r(),(n=this.ri)==null||n.call(this),this.ri=this.At.onSessionId(r)}}log(e,n){var i;n===void 0&&(n="log"),(i=this._instance.sessionRecording)==null||i.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}gi(e){if(!ve(Object.assign)&&!ve(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),zm()?this.Ei():(n=Ke.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.Ii,i=>{if(i)return ni.error("could not load recorder",i);this.Ei()}),ni.info("starting"),this.status===Y0&&this.ki(e||"recording_initialized")}}get Ii(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(ZA))==null?void 0:e.script)||"recorder"}Pi(e){var n;return e.type===3&&CV.indexOf((n=e.data)==null?void 0:n.source)!==-1}Ri(e){var n=this.Pi(e);n||this.Zt||e.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.C.data.length,bufferSize:this.C.size}),this.ai());var i=!1;if(n&&(this.ti=e.timestamp,this.Zt)){var r=this.Zt==="unknown";this.Zt=!1,r||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)}if(!this.Zt){var{windowId:s,sessionId:o}=this.At.checkAndGetSessionAndWindowId(!n,e.timestamp),a=this.Ct!==o,l=this.fi!==s;this.fi=s,this.Ct=o,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this.Ti()}}Mi(e){try{return e.rrwebMethod(),!0}catch(n){return this.Qt.length<10?this.Qt.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):ni.warn("could not emit queued rrweb event.",n,e),!1}}ui(e,n){return this.Mi(vN(()=>zm().addCustomEvent(e,n)))}Ci(){return this.Mi(vN(()=>zm().takeFullSnapshot()))}Ei(){var e,n,i,r,s={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},o=this._instance.config.session_recording;for(var[a,l]of Object.entries(o||{}))a in s&&(a==="maskInputOptions"?s.maskInputOptions=Se({password:!0},l):s[a]=l);this.qt&&this.qt.enabled&&(s.recordCanvas=!0,s.sampling={canvas:this.qt.fps},s.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(s.maskAllInputs=(n=this.Ht.maskAllInputs)===null||n===void 0||n,s.maskTextSelector=(i=this.Ht.maskTextSelector)!==null&&i!==void 0?i:void 0,s.blockSelector=(r=this.Ht.blockSelector)!==null&&r!==void 0?r:void 0);var c=zm();if(c){this.Fi=(e=this.Fi)!==null&&e!==void 0?e:new oV(c,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(d,h)=>{var p="Too many mutations on node '"+d+"'. Rate limiting. This could be due to SVG animations or something similar";ni.info(p,{node:h}),this.log(Kf+" "+p,"warn")}});var u=this.Oi();this.ci=c(Se({emit:d=>{this.onRRwebEmit(d)},plugins:u},s)),this.ti=Date.now(),this.Zt=Ys(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:s,activePlugins:u.map(d=>d==null?void 0:d.name)}),this.ui("$posthog_config",{config:this._instance.config})}else ni.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),this.Zt!==!0){var e=this.Dt;e&&(this.wi=setInterval(()=>{this.Ci()},e))}}Oi(){var e,n,i=[],r=(e=Ke.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;r&&this.Ut&&i.push(r());var s=(n=Ke.__PosthogExtensions__)==null||(n=n.rrwebPlugins)==null?void 0:n.getRecordNetworkPlugin;return this.Bt&&zr(s)&&(!_U.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?i.push(s(sV(this._instance.config,this.Bt))):ni.info("NetworkCapture not started because we are on localhost.")),i}onRRwebEmit(e){var n;if(this.Ai(),e&&an(e)){if(e.type===So.Meta){var i=this.yi(e.data.href);if(this.Di=i,!i)return;e.data.href=i}else this.Li();if(this.Kt.checkUrlTriggerConditions(()=>this.ji(),()=>this.Ni(),h=>this.zi(h)),!this.Kt.urlBlocked||(r=e).type===So.Custom&&r.data.tag==="recording paused"){var r;e.type===So.FullSnapshot&&this.Ti(),e.type===So.FullSnapshot&&this.Jt&&this.Lt.triggerStatus(this.sessionId)===ui&&this.pi();var s=this.Fi?this.Fi.throttleMutations(e):e;if(s){var o=function(h){var p=h;if(p&&an(p)&&p.type===6&&an(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var g=[],m=0;m<p.data.payload.payload.length;m++)p.data.payload.payload[m]&&p.data.payload.payload[m].length>2e3?g.push(p.data.payload.payload[m].slice(0,2e3)+"...[truncated]"):g.push(p.data.payload.payload[m]);return p.data.payload.payload=g,h}return h}(s);if(this.Ri(o),this.Zt!==!0||yN(o)){if(yN(o)){var a=o.data.payload;if(a){var l=a.lastActivityTimestamp,c=a.threshold;o.timestamp=l+c}}var u=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(h){if(K0(h)<1024)return h;try{if(h.type===So.FullSnapshot)return Se({},h,{data:Vl(h.data),cv:"2024-10"});if(h.type===So.IncrementalSnapshot&&h.data.source===is.Mutation)return Se({},h,{cv:"2024-10",data:Se({},h.data,{texts:Vl(h.data.texts),attributes:Vl(h.data.attributes),removes:Vl(h.data.removes),adds:Vl(h.data.adds)})});if(h.type===So.IncrementalSnapshot&&h.data.source===is.StyleSheetRule)return Se({},h,{cv:"2024-10",data:Se({},h.data,{adds:h.data.adds?Vl(h.data.adds):void 0,removes:h.data.removes?Vl(h.data.removes):void 0})})}catch(p){ni.error("could not compress event - will use uncompressed event",p)}return h}(o):o,d={$snapshot_bytes:K0(u),$snapshot_data:u,$session_id:this.Ct,$window_id:this.fi};this.status!==ll?this.Ui(d):this.pi()}}}}}Li(){if(!this._instance.config.capture_pageview&&q){var e=this.yi(q.location.href);this.Di!==e&&(this.ui("$url_changed",{href:e}),this.Di=e)}}Ai(){if(this.Qt.length){var e=[...this.Qt];this.Qt=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.Mi(n)})}}yi(e){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))==null?void 0:i.url}return e}pi(){return this.C={size:0,data:[],sessionId:this.Ct,windowId:this.fi},this.C}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var e=this.Gt,n=this.Nt,i=ai(n)&&n>=0,r=ai(e)&&i&&n<e;return this.status===Ac||this.status===r_||this.status===ll||r?(this.qi=setTimeout(()=>{this.ai()},2e3),this.C):(this.C.data.length>0&&Mw(this.C).forEach(s=>{this.Bi({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId,$lib:"web",$lib_version:Eo.LIB_VERSION})}),this.pi())}Ui(e){var n,i=2+(((n=this.C)==null?void 0:n.data.length)||0);!this.Zt&&(this.C.size+e.$snapshot_bytes+i>943718.4||this.C.sessionId!==this.Ct)&&(this.C=this.ai()),this.C.size+=e.$snapshot_bytes,this.C.data.push(e.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(e){var n;this.Lt.triggerStatus(this.sessionId)===ui&&((n=this._instance)==null||(n=n.persistence)==null||n.register({[e==="url"?bw:xw]:this.Ct}),this.ai(),this.ki(e+"_trigger_matched"))}ji(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),ni.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Ci(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),ni.info("recording resumed"))}bi(){this.Yt.Tt.length!==0&&St(this.ni)&&(this.ni=this._instance.on("eventCaptured",e=>{try{this.Yt.Tt.includes(e.event)&&this.zi("event")}catch(n){ni.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Ci(),this.ki("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[Wf]:!0}),this.Ci(),this.ki("sampling_overridden")}overrideTrigger(e){this.zi(e)}ki(e,n){this._instance.register_for_session({$session_recording_start_reason:e}),ni.info(e.replace("_"," "),n),at(["recording_initialized","session_id_changed"],e)||this.ui(e,n)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.C.data.length,$sdk_debug_replay_internal_buffer_size:this.C.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:e}}}var dx=In("[SegmentIntegration]");function AV(t,e){var n=t.config.segment;if(!n)return e();(function(i,r){var s=i.config.segment;if(!s)return r();var o=l=>{var c=()=>l.anonymousId()||La();i.config.get_device_id=c,l.id()&&(i.register({distinct_id:l.id(),$device_id:c()}),i.persistence.set_property(wo,"identified")),r()},a=s.user();"then"in a&&zr(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((i=>{Promise&&Promise.resolve||dx.warn("This browser does not have Promise support, and can not use the segment integration");var r=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(dx.info("No userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(dx.info("UserId set, identifying with PostHog"),i.identify(s.event.userId));var a=i.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},a,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(t)).then(()=>{e()})})}var G5="posthog-js";function K5(t,e){var{organization:n,projectId:i,prefix:r,severityAllowList:s=["error"]}=e===void 0?{}:e;return o=>{var a,l,c,u,d;if(!(s==="*"||s.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var h=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());o.tags["PostHog Person URL"]=h,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var p=((a=o.exception)==null?void 0:a.values)||[],g=p.map(v=>Se({},v,{stacktrace:v.stacktrace?Se({},v.stacktrace,{type:"raw",frames:(v.stacktrace.frames||[]).map(y=>Se({},y,{platform:"web:javascript"}))}):void 0})),m={$exception_message:((l=p[0])==null?void 0:l.value)||o.message,$exception_type:(c=p[0])==null?void 0:c.type,$exception_personURL:h,$exception_level:o.level,$exception_list:g,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((u=p[0])==null?void 0:u.value)||o.message,$sentry_exception_type:(d=p[0])==null?void 0:d.type,$sentry_tags:o.tags};return n&&i&&(m.$sentry_url=(r||"https://sentry.io/organizations/")+n+"/issues/?project="+i+"&query="+o.event_id),t.exceptions.sendExceptionEvent(m),o}}class NV{constructor(e,n,i,r,s){this.name=G5,this.setupOnce=function(o){o(K5(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}}}var PV=q!=null&&q.location?G0(q.location.hash,"__posthog")||G0(location.hash,"state"):null,bN="_postHogToolbarParams",xN=In("[Toolbar]"),ya=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t}(ya||{});class MV{constructor(e){this.instance=e}Hi(e){Ke.ph_toolbar_state=e}Wi(){var e;return(e=Ke.ph_toolbar_state)!==null&&e!==void 0?e:ya.UNINITIALIZED}maybeLoadToolbar(e,n,i){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),!q||!Ce)return!1;e=e??q.location,i=i??q.history;try{if(!n){try{q.localStorage.setItem("test","test"),q.localStorage.removeItem("test")}catch{return!1}n=q==null?void 0:q.localStorage}var r,s=PV||G0(e.hash,"__posthog")||G0(e.hash,"state"),o=s?BA(()=>JSON.parse(atob(decodeURIComponent(s))))||BA(()=>JSON.parse(decodeURIComponent(s))):null;return o&&o.action==="ph_authorize"?((r=o).source="url",r&&Object.keys(r).length>0&&(o.desiredHash?e.hash=o.desiredHash:i?i.replaceState(i.state,"",e.pathname+e.search):e.hash="")):((r=JSON.parse(n.getItem(bN)||"{}")).source="localstorage",delete r.userIntent),!(!r.token||this.instance.config.token!==r.token)&&(this.loadToolbar(r),!0)}catch{return!1}}Gi(e){var n=Ke.ph_load_toolbar||Ke.ph_load_editor;!St(n)&&zr(n)?n(e,this.instance):xN.warn("No toolbar load function found")}loadToolbar(e){var n=!(Ce==null||!Ce.getElementById(y5));if(!q||n)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=Se({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(q.localStorage.setItem(bN,JSON.stringify(Se({},r,{source:void 0}))),this.Wi()===ya.LOADED)this.Gi(r);else if(this.Wi()===ya.UNINITIALIZED){var s;this.Hi(ya.LOADING),(s=Ke.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return xN.error("[Toolbar] Failed to load",o),void this.Hi(ya.UNINITIALIZED);this.Hi(ya.LOADED),this.Gi(r)}),Qt(q,"turbolinks:load",()=>{this.Hi(ya.UNINITIALIZED),this.loadToolbar(r)})}return!0}Ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,i){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),this.maybeLoadToolbar(e,n,i)}}var RV=In("[TracingHeaders]");class TV{constructor(e){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var n,i;ve(this.Vi)&&((n=Ke.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.get_distinct_id(),this._instance.sessionManager)),ve(this.Ki)&&((i=Ke.__PosthogExtensions__)==null||(i=i.tracingHeadersPatchFns)==null||i._patchFetch(this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}J(e){var n,i;(n=Ke.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(i=Ke.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"tracing-headers",r=>{if(r)return RV.error("failed to load script",r);e()})}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.J(this.nt):((e=this.Vi)==null||e.call(this),(n=this.Ki)==null||n.call(this),this.Vi=void 0,this.Ki=void 0)}}var da=In("[Web Vitals]"),wN=9e5;class OV{constructor(e){var n;this.Yi=!1,this.i=!1,this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),this.C.metrics.length!==0&&(this._instance.capture("$web_vitals",this.C.metrics.reduce((i,r)=>Se({},i,{["$web_vitals_"+r.name+"_event"]:Se({},r),["$web_vitals_"+r.name+"_value"]:r.value}),{})),this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=i=>{var r,s=(r=this._instance.sessionManager)==null?void 0:r.checkAndGetSessionAndWindowId(!0);if(ve(s))da.error("Could not read session ID. Dropping metrics!");else{this.C=this.C||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.te();ve(o)||(St(i==null?void 0:i.name)||St(i==null?void 0:i.value)?da.error("Invalid metric received",i):this.ie&&i.value>=this.ie?da.error("Ignoring metric with value >= "+this.ie,i):(this.C.url!==o&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),ve(this.C.url)&&(this.C.url=o),this.C.firstMetricTimestamp=ve(this.C.firstMetricTimestamp)?Date.now():this.C.firstMetricTimestamp,i.attribution&&i.attribution.interactionTargetElement&&(i.attribution.interactionTargetElement=void 0),this.C.metrics.push(Se({},i,{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.C.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var i,r,s,o,a=Ke.__PosthogExtensions__;ve(a)||ve(a.postHogWebVitalsCallbacks)||({onLCP:i,onCLS:r,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),i&&r&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&i(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Zi.bind(this)),this.i=!0):da.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Yi=!((n=this._instance.persistence)==null||!n.props[HA]),this.startIfEnabled()}get allowedMetrics(){var e,n,i=an(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return ve(i)?((n=this._instance.persistence)==null?void 0:n.props[WA])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(an(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var e=an(this._instance.config.capture_performance)&&ai(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:wN;return 0<e&&e<=6e4?wN:e}get isEnabled(){var e=zi==null?void 0:zi.protocol;if(e!=="http:"&&e!=="https:")return da.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=an(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Ys(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Ys(n)?n:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(da.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(e){var n=an(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=an(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[HA]:n}),this._instance.persistence.register({[WA]:i})),this.Yi=n,this.startIfEnabled()}J(e){var n,i;(n=Ke.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&e(),(i=Ke.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"web-vitals",r=>{r?da.error("failed to load script",r):e()})}te(){var e=q?q.location.href:void 0;return e||da.error("Could not determine current URL"),e}}var IV=In("[Heatmaps]");function SN(t){return an(t)&&"clientX"in t&&"clientY"in t&&ai(t.clientX)&&ai(t.clientY)}class jV{constructor(e){var n;this.rageclicks=new P5,this.Yi=!1,this.i=!1,this.ee=null,this.instance=e,this.Yi=!((n=this.instance.persistence)==null||!n.props[gw])}get flushIntervalMilliseconds(){var e=5e3;return an(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return ve(this.instance.config.capture_heatmaps)?ve(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;IV.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this.ee)!==null&&e!==void 0?e:void 0),(n=this.ne)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[gw]:n}),this.Yi=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.C;return this.C=void 0,e}oe(e){this.ae(e.originalEvent,"deadclick")}re(){q&&Ce&&(Qt(q,"beforeunload",this.se.bind(this)),Qt(Ce,"click",e=>this.ae(e||(q==null?void 0:q.event)),{capture:!0}),Qt(Ce,"mousemove",e=>this.le(e||(q==null?void 0:q.event)),{capture:!0}),this.ne=new R5(this.instance,FU,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(e,n){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,c){for(var u=a;u&&Ry(u)&&!Ya(u,"body");){if(u===c)return!1;if(at(l,q==null?void 0:q.getComputedStyle(u).position))return!0;u=k5(u)}return!1}(S5(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:i),target_fixed:o,type:n}}ae(e,n){var i;if(n===void 0&&(n="click"),!QA(e.target)&&SN(e)){var r=this.ue(e,n);(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.he(Se({},r,{type:"rageclick"})),this.he(r)}}le(e){!QA(e.target)&&SN(e)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(e,"mousemove"))},500))}he(e){if(q){var n=q.location.href;this.C=this.C||{},this.C[n]||(this.C[n]=[]),this.C[n].push(e)}}se(){this.C&&!Eu(this.C)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class LV{constructor(e){this._instance=e}doPageView(e,n){var i,r=this.ve(e,n);return this.ce={pathname:(i=q==null?void 0:q.location.pathname)!==null&&i!==void 0?i:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var n;return this.ve(e,(n=this.ce)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.ce)==null?void 0:e.pageViewId}}ve(e,n){var i=this.ce;if(!i)return{$pageview_id:n};var r={$pageview_id:n,$prev_pageview_id:i.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:u,maxContentY:d}=s;if(!(ve(o)||ve(a)||ve(l)||ve(c)||ve(u)||ve(d))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),d=Math.ceil(d);var h=o<=1?1:ur(a/o,0,1),p=o<=1?1:ur(l/o,0,1),g=c<=1?1:ur(u/c,0,1),m=c<=1?1:ur(d/c,0,1);r=dn(r,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:h,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:g,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:m})}}return i.pathname&&(r.$prev_pageview_pathname=i.pathname),i.timestamp&&(r.$prev_pageview_duration=(e.getTime()-i.timestamp.getTime())/1e3),r}}var DV=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),El(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},$V=!!hw||!!fw,kN="text/plain",X0=(t,e)=>{var[n,i]=t.split("?"),r=Se({},e);i==null||i.split("&").forEach(o=>{var[a]=o.split("=");delete r[a]});var s=CU(r);return n+"?"+(s=s?(i?i+"&":"")+s:i)},qf=(t,e)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,e),fx=t=>{var{data:e,compression:n}=t;if(e){if(n===Fo.GZipJS){var i=U5(V5(qf(e)),{mtime:0}),r=new Blob([i],{type:kN});return{contentType:kN,body:r,estimatedSize:r.size}}if(n===Fo.Base64){var s=function(l){var c,u,d,h,p,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m=0,v=0,y="",x=[];if(!l)return l;l=DV(l);do c=(p=l.charCodeAt(m++)<<16|l.charCodeAt(m++)<<8|l.charCodeAt(m++))>>18&63,u=p>>12&63,d=p>>6&63,h=63&p,x[v++]=g.charAt(c)+g.charAt(u)+g.charAt(d)+g.charAt(h);while(m<l.length);switch(y=x.join(""),l.length%3){case 1:y=y.slice(0,-2)+"==";break;case 2:y=y.slice(0,-1)+"="}return y}(qf(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:qf(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=qf(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},mh=[];fw&&mh.push({transport:"fetch",method:t=>{var e,n,{contentType:i,body:r,estimatedSize:s}=(e=fx(t))!==null&&e!==void 0?e:{},o=new Headers;At(t.headers,function(u,d){o.append(d,u)}),i&&o.append("Content-Type",i);var a=t.url,l=null;if(FA){var c=new FA;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),t.timeout)}}fw(a,Se({method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:r,signal:(n=l)==null?void 0:n.signal},t.fetchOptions)).then(u=>u.text().then(d=>{var h={statusCode:u.status,text:d};if(u.status===200)try{h.json=JSON.parse(d)}catch(p){Ae.error(p)}t.callback==null||t.callback(h)})).catch(u=>{Ae.error(u),t.callback==null||t.callback({statusCode:0,text:u})}).finally(()=>l?clearTimeout(l.timeout):null)}}),hw&&mh.push({transport:"XHR",method:t=>{var e,n=new hw;n.open(t.method||"GET",t.url,!0);var{contentType:i,body:r}=(e=fx(t))!==null&&e!==void 0?e:{};At(t.headers,function(s,o){n.setRequestHeader(o,s)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s={statusCode:n.status,text:n.responseText};if(n.status===200)try{s.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(s)}},n.send(r)}}),cr!=null&&cr.sendBeacon&&mh.push({transport:"sendBeacon",method:t=>{var e=X0(t.url,{beacon:"1"});try{var n,{contentType:i,body:r}=(n=fx(t))!==null&&n!==void 0?n:{},s=typeof r=="string"?new Blob([r],{type:i}):r;cr.sendBeacon(e,s)}catch{}}});var kd=function(t,e){if(!function(n){try{new RegExp(n)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function _N(t,e,n){return qf({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var FV={exact:(t,e)=>e.some(n=>t.some(i=>n===i)),is_not:(t,e)=>e.every(n=>t.every(i=>n!==i)),regex:(t,e)=>e.some(n=>t.some(i=>kd(n,i))),not_regex:(t,e)=>e.every(n=>t.every(i=>!kd(n,i))),icontains:(t,e)=>e.map(Bm).some(n=>t.map(Bm).some(i=>n.includes(i))),not_icontains:(t,e)=>e.map(Bm).every(n=>t.map(Bm).every(i=>!n.includes(i)))},Bm=t=>t.toLowerCase(),zV=In("[Error tracking]");class BV{constructor(e){var n,i;this.fe=[],this._instance=e,this.fe=(n=(i=this._instance.persistence)==null?void 0:i.get_property(vw))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,i,r=(n=(i=e.errorTracking)==null?void 0:i.suppressionRules)!==null&&n!==void 0?n:[];this.fe=r,this._instance.persistence&&this._instance.persistence.register({[vw]:this.fe})}sendExceptionEvent(e){this.pe(e)?zV.info("Skipping exception capture because a suppression rule matched"):this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}pe(e){var n=e.$exception_list;if(!n||!qt(n)||n.length===0)return!1;var i=n.reduce((r,s)=>{var{type:o,value:a}=s;return ln(o)&&o.length>0&&r.$exception_types.push(o),ln(a)&&a.length>0&&r.$exception_values.push(a),r},{$exception_types:[],$exception_values:[]});return this.fe.some(r=>{var s=r.values.map(o=>{var a,l=FV[o.operator],c=qt(o.value)?o.value:[o.value],u=(a=i[o.key])!==null&&a!==void 0?a:[];return c.length>0&&l(c,u)});return r.type==="OR"?s.some(Boolean):s.every(Boolean)})}}var Ur="Mobile",J0="iOS",Xs="Android",Vh="Tablet",q5=Xs+" "+Vh,Y5="iPad",X5="Apple",J5=X5+" Watch",Hh="Safari",_d="BlackBerry",Z5="Samsung",Q5=Z5+"Browser",eO=Z5+" Internet",Nc="Chrome",UV=Nc+" OS",tO=Nc+" "+J0,o_="Internet Explorer",nO=o_+" "+Ur,a_="Opera",VV=a_+" Mini",l_="Edge",iO="Microsoft "+l_,qu="Firefox",rO=qu+" "+J0,Wh="Nintendo",Gh="PlayStation",Yu="Xbox",sO=Xs+" "+Ur,oO=Ur+" "+Hh,Yf="Windows",Dw=Yf+" Phone",CN="Nokia",$w="Ouya",aO="Generic",HV=aO+" "+Ur.toLowerCase(),lO=aO+" "+Vh.toLowerCase(),Fw="Konqueror",hi="(\\d+(\\.\\d+)?)",hx=new RegExp("Version/"+hi),WV=new RegExp(Yu,"i"),GV=new RegExp(Gh+" \\w+","i"),KV=new RegExp(Wh+" \\w+","i"),c_=new RegExp(_d+"|PlayBook|BB10","i"),qV={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},YV=(t,e)=>e&&at(e,X5)||function(n){return at(n,Hh)&&!at(n,Nc)&&!at(n,Xs)}(t),cO=function(t,e){return e=e||"",at(t," OPR/")&&at(t,"Mini")?VV:at(t," OPR/")?a_:c_.test(t)?_d:at(t,"IE"+Ur)||at(t,"WPDesktop")?nO:at(t,Q5)?eO:at(t,l_)||at(t,"Edg/")?iO:at(t,"FBIOS")?"Facebook "+Ur:at(t,"UCWEB")||at(t,"UCBrowser")?"UC Browser":at(t,"CriOS")?tO:at(t,"CrMo")||at(t,Nc)?Nc:at(t,Xs)&&at(t,Hh)?sO:at(t,"FxiOS")?rO:at(t.toLowerCase(),Fw.toLowerCase())?Fw:YV(t,e)?at(t,Ur)?oO:Hh:at(t,qu)?qu:at(t,"MSIE")||at(t,"Trident/")?o_:at(t,"Gecko")?qu:""},XV={[nO]:[new RegExp("rv:"+hi)],[iO]:[new RegExp(l_+"?\\/"+hi)],[Nc]:[new RegExp("("+Nc+"|CrMo)\\/"+hi)],[tO]:[new RegExp("CriOS\\/"+hi)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+hi)],[Hh]:[hx],[oO]:[hx],[a_]:[new RegExp("(Opera|OPR)\\/"+hi)],[qu]:[new RegExp(qu+"\\/"+hi)],[rO]:[new RegExp("FxiOS\\/"+hi)],[Fw]:[new RegExp("Konqueror[:/]?"+hi,"i")],[_d]:[new RegExp(_d+" "+hi),hx],[sO]:[new RegExp("android\\s"+hi,"i")],[eO]:[new RegExp(Q5+"\\/"+hi)],[o_]:[new RegExp("(rv:|MSIE )"+hi)],Mozilla:[new RegExp("rv:"+hi)]},JV=function(t,e){var n=cO(t,e),i=XV[n];if(ve(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},EN=[[new RegExp(Yu+"; "+Yu+" (.*?)[);]","i"),t=>[Yu,t&&t[1]||""]],[new RegExp(Wh,"i"),[Wh,""]],[new RegExp(Gh,"i"),[Gh,""]],[c_,[_d,""]],[new RegExp(Yf,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[Dw,""];if(new RegExp(Ur).test(e)&&!/IEMobile\b/.test(e))return[Yf+" "+Ur,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=qV[i]||"";return/arm/i.test(e)&&(r="RT"),[Yf,r]}return[Yf,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[J0,e.join(".")]}return[J0,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=ve(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+Xs+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Xs+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[Xs,e.join(".")]}return[Xs,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[UV,""]],[/Linux|debian/i,["Linux",""]]],AN=function(t){return KV.test(t)?Wh:GV.test(t)?Gh:WV.test(t)?Yu:new RegExp($w,"i").test(t)?$w:new RegExp("("+Dw+"|WPDesktop)","i").test(t)?Dw:/iPad/.test(t)?Y5:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?J5:c_.test(t)?_d:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(CN,"i").test(t)?CN:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Ur).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?Xs:q5:Xs:new RegExp("(pda|"+Ur+")","i").test(t)?HV:new RegExp(Vh,"i").test(t)&&!new RegExp(Vh+" pc","i").test(t)?lO:""},Um="https?://(.*)",Oy=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],ZV=My(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],Oy),u_="<masked>",QV=["li_fat_id"];function uO(t,e,n){if(!Ce)return{};var i,r=e?My([],Oy,n||[]):[],s=dO(Qk(Ce.URL,r,u_),t),o=(i={},At(QV,function(a){var l=no.D(a);i[a]=l||null}),i);return dn(o,s)}function dO(t,e){var n=ZV.concat(e||[]),i={};return At(n,function(r){var s=W0(t,r);i[r]=s||null}),i}function fO(t){var e=function(s){return s?s.search(Um+"google.([^/?]*)")===0?"google":s.search(Um+"bing.com")===0?"bing":s.search(Um+"yahoo.com")===0?"yahoo":s.search(Um+"duckduckgo.com")===0?"duckduckgo":null:null}(t),n=e!="yahoo"?"q":"p",i={};if(!El(e)){i.$search_engine=e;var r=Ce?W0(Ce.referrer,n):"";r.length&&(i.ph_keyword=r)}return i}function NN(){return navigator.language||navigator.userLanguage}function hO(){return(Ce==null?void 0:Ce.referrer)||"$direct"}function pO(t,e){var n=t?My([],Oy,e||[]):[],i=zi==null?void 0:zi.href.substring(0,1e3);return{r:hO().substring(0,1e3),u:i?Qk(i,n,u_):void 0}}function mO(t){var e,{r:n,u:i}=t,r={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=wd(n))==null?void 0:e.host};if(i){r.$current_url=i;var s=wd(i);r.$host=s==null?void 0:s.host,r.$pathname=s==null?void 0:s.pathname;var o=dO(i);dn(r,o)}if(n){var a=fO(n);dn(r,a)}return r}function gO(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function eH(){try{return new Date().getTimezoneOffset()}catch{return}}function tH(t,e){if(!Di)return{};var n,i,r,s=t?My([],Oy,e||[]):[],[o,a]=function(l){for(var c=0;c<EN.length;c++){var[u,d]=EN[c],h=u.exec(l),p=h&&(zr(d)?d(h,l):d);if(p)return p}return["",""]}(Di);return dn(Jk({$os:o,$os_version:a,$browser:cO(Di,navigator.vendor),$device:AN(Di),$device_type:(i=Di,r=AN(i),r===Y5||r===q5||r==="Kobo"||r==="Kindle Fire"||r===lO?Vh:r===Wh||r===Yu||r===Gh||r===$w?"Console":r===J5?"Wearable":r?Ur:"Desktop"),$timezone:gO(),$timezone_offset:eH()}),{$current_url:Qk(zi==null?void 0:zi.href,s,u_),$host:zi==null?void 0:zi.host,$pathname:zi==null?void 0:zi.pathname,$raw_user_agent:Di.length>1e3?Di.substring(0,997)+"...":Di,$browser_version:JV(Di,navigator.vendor),$browser_language:NN(),$browser_language_prefix:(n=NN(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:q==null?void 0:q.screen.height,$screen_width:q==null?void 0:q.screen.width,$viewport_height:q==null?void 0:q.innerHeight,$viewport_width:q==null?void 0:q.innerWidth,$lib:"web",$lib_version:Eo.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var Rs=In("[FeatureFlags]"),px="$active_feature_flags",nu="$override_feature_flags",PN="$feature_flag_payloads",yf="$override_feature_flag_payloads",MN="$feature_flag_request_id",RN=t=>{var e={};for(var[n,i]of t0(t||{}))i&&(e[n]=i);return e},nH=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map(n=>{var i;return[n,(i=e[n].variant)!==null&&i!==void 0?i:e[n].enabled]})),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(n=>e[n].enabled).filter(n=>{var i;return(i=e[n].metadata)==null?void 0:i.payload}).map(n=>{var i;return[n,(i=e[n].metadata)==null?void 0:i.payload]}))):Rs.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},iH=function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t}({}),TN=new Set(["7c6f7b45","66c1f69c","2727f65a","f3287528","8cc9a311","eb9f671b","c0e1c6f9","057989ec","723f4019","7b102104","563359d3","bad973ea","f6f2c4f4","59454a61","89ad1076","4edd0da1","26c52e72","a970bd2e","89cf4454","16e2b4e7","fba0e7b6","301c8488","bc65d69e","fe66a3c5","37926ca6","52a196df","d32a7577","42c4c9ef","6883bd5a","04809ff7","e59430a8","61be3dd8","7fa5500b","bf027177","8cfdba9b","96f6df5f","569798e9","0ebc61a5","1b5d7b92","17ebb0a4","f97ea965","85cc817b","3044dfc1","0c3fe5c3","b1f95fa3","8a6342e8","72365c68","12d34ad9","733853ec","3beeb69a","0645bb64","32de7f98","5dcbee21","3fe85053","ad960278","9466e5dd","7ca97b2d","2ee2a65c","28fde5f2","85c52f49","0ad823f4","f11b6cc9","aacf8af9","ab3e62b3","3a85ff15","8a67d3c4","f5e91ef1","4b873698","c5dae949","5b643d76","9599c892","34377448","2189e408","3be9ad53","1a14ce7c","2a164ded","8d53ea86","53bdb37d","bfc3f590","8df38ede","bdb81e49","38fde5c0","8d707e6d","73cbc496","f9d8a5ef","d3a9f8c4","a980d8cd","5bcfe086","e4818f68","4f11fb39","a13c6ae3","150c7fbb","98f3d658","f84f7377","1924dd9c","1f6b63b3","24748755","7c0f717c","8a87f11b","49f57f22","3c9e9234","3772f65b","dff631b6","cd609d40","f853c7f7","952db5ee","c5aa8a79","2d21b6fd","79b7164c","4110e26c","a7d3b43f","84e1b8f6","75cc0998","07f78e33","10ca9b1a","ce441b18","01eb8256","c0ac4b67","8e8e5216","db7943dd","fa133a95","498a4508","21bbda67","7dbfed69","be3ec24c","fc80b8e2"]);class rH{constructor(e){this.ge=!1,this._e=!1,this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.we=!0;else{var e=!this.$e&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ke({disableFlags:e})}}get hasLoadedFlags(){return this._e}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(ww),n=this._instance.get_property(nu),i=this._instance.get_property(yf);if(!i&&!n)return e||{};var r=dn({},e||{}),s=[...new Set([...Object.keys(i||{}),...Object.keys(n||{})])];for(var o of s){var a,l,c=r[o],u=n==null?void 0:n[o],d=ve(u)?(a=c==null?void 0:c.enabled)!==null&&a!==void 0&&a:!!u,h=ve(u)?c.variant:typeof u=="string"?u:void 0,p=i==null?void 0:i[o],g=Se({},c,{enabled:d,variant:d?h??(c==null?void 0:c.variant):void 0});d!==(c==null?void 0:c.enabled)&&(g.original_enabled=c==null?void 0:c.enabled),h!==(c==null?void 0:c.variant)&&(g.original_variant=c==null?void 0:c.variant),p&&(g.metadata=Se({},c==null?void 0:c.metadata,{payload:p,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),r[o]=g}return this.ge||(Rs.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:i,finalDetails:r}),this.ge=!0),r}getFlagVariants(){var e=this._instance.get_property(Au),n=this._instance.get_property(nu);if(!n)return e||{};for(var i=dn({},e),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Rs.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this.ge=!0),i}getFlagPayloads(){var e=this._instance.get_property(PN),n=this._instance.get_property(yf);if(!n)return e||{};for(var i=dn({},e||{}),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Rs.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:i}),this.ge=!0),i}reloadFeatureFlags(){this.be||this._instance.config.advanced_disable_feature_flags||this.$e||(this.$e=setTimeout(()=>{this.ke()},5))}xe(){clearTimeout(this.$e),this.$e=void 0}ensureFlagsLoaded(){this._e||this.me||this.$e||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.be=e}ke(e){var n;if(this.xe(),!this._instance.I())if(this.me)this.ye=!0;else{var i={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:Se({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(Gf)||{}),group_properties:this._instance.get_property(Zl)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0);var r=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config,s=function(l){var c=function(u){for(var d=2166136261,h=0;h<u.length;h++)d^=u.charCodeAt(h),d+=(d<<1)+(d<<4)+(d<<7)+(d<<8)+(d<<24);return("00000000"+(d>>>0).toString(16)).slice(-8)}(l);return TN==null?void 0:TN.has(c)}(this._instance.config.token)?"/decide?v=4":r?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("api",s+o);r&&(i.timezone=gO()),this.me=!0,this._instance.Ee({method:"POST",url:a,data:i,compression:this._instance.config.disable_compression?void 0:Fo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var c,u,d=!0;if(l.statusCode===200&&(this.ye||(this.$anon_distinct_id=void 0),d=!1),this.me=!1,this.we||(this.we=!0,this._instance.Ie((u=l.json)!==null&&u!==void 0?u:{})),!i.disable_flags||this.ye)if(this.Se=!d,l.json&&(c=l.json.quotaLimited)!=null&&c.includes(iH.FeatureFlags))Rs.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var h;i.disable_flags||this.receivedFeatureFlags((h=l.json)!==null&&h!==void 0?h:{},d),this.ye&&(this.ye=!1,this.ke())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0){var i=this.getFlagVariants()[e],r=""+i,s=this._instance.get_property(MN)||void 0,o=this._instance.get_property(B0)||{};if((n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(r))){var a,l,c,u,d,h,p,g,m;qt(o[e])?o[e].push(r):o[e]=[r],(a=this._instance.persistence)==null||a.register({[B0]:o});var v=this.getFeatureFlagDetails(e),y={$feature_flag:e,$feature_flag_response:i,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[e])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(c=c.featureFlagPayloads)==null?void 0:c[e])||null,$used_bootstrap_value:!this.Se};ve(v==null||(u=v.metadata)==null?void 0:u.version)||(y.$feature_flag_version=v.metadata.version);var x,w=(d=v==null||(h=v.reason)==null?void 0:h.description)!==null&&d!==void 0?d:v==null||(p=v.reason)==null?void 0:p.code;w&&(y.$feature_flag_reason=w),v!=null&&(g=v.metadata)!=null&&g.id&&(y.$feature_flag_id=v.metadata.id),ve(v==null?void 0:v.original_variant)&&ve(v==null?void 0:v.original_enabled)||(y.$feature_flag_original_response=ve(v.original_variant)?v.original_enabled:v.original_variant),v!=null&&(m=v.metadata)!=null&&m.original_payload&&(y.$feature_flag_original_payload=v==null||(x=v.metadata)==null?void 0:x.original_payload),this._instance.capture("$feature_flag_called",y)}return i}Rs.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var i=this._instance.config.token;this._instance.Ee({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:i},compression:this._instance.config.disable_compression?void 0:Fo.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var s,o=(s=r.json)==null?void 0:s.featureFlagPayloads;n((o==null?void 0:o[e])||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);Rs.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this._instance.persistence){this._e=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads(),s=this.getFlagsWithDetails();(function(o,a,l,c,u){l===void 0&&(l={}),c===void 0&&(c={}),u===void 0&&(u={});var d=nH(o),h=d.flags,p=d.featureFlags,g=d.featureFlagPayloads;if(p){var m=o.requestId;if(qt(p)){Rs.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var v={};if(p)for(var y=0;y<p.length;y++)v[p[y]]=!0;a&&a.register({[px]:p,[Au]:v})}else{var x=p,w=g,S=h;o.errorsWhileComputingFlags&&(x=Se({},l,x),w=Se({},c,w),S=Se({},u,S)),a&&a.register(Se({[px]:Object.keys(RN(x)),[Au]:x||{},[PN]:w||{},[ww]:S||{}},m?{[MN]:m}:{}))}}})(e,this._instance.persistence,i,r,s),this.Pe(n)}}override(e,n){n===void 0&&(n=!1),Rs.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return Rs.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(nu),this._instance.persistence.unregister(yf),void this.Pe();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,i=e;if(this.ge=!!((n=i.suppressWarning)!==null&&n!==void 0&&n),"flags"in i){if(i.flags===!1)this._instance.persistence.unregister(nu);else if(i.flags)if(qt(i.flags)){for(var r={},s=0;s<i.flags.length;s++)r[i.flags[s]]=!0;this._instance.persistence.register({[nu]:r})}else this._instance.persistence.register({[nu]:i.flags})}return"payloads"in i&&(i.payloads===!1?this._instance.persistence.unregister(yf):i.payloads&&this._instance.persistence.register({[yf]:i.payloads})),void this.Pe()}this.Pe()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._e){var{flags:n,flagVariants:i}=this.Re();e(n,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var i,r=(this._instance.get_property(n0)||[]).find(l=>l.flagKey===e),s={["$feature_enrollment/"+e]:n},o={$feature_flag:e,$feature_enrollment:n,$set:s};r&&(o.$early_access_feature_name=r.name),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(s,!1);var a=Se({},this.getFlagVariants(),{[e]:n});(i=this._instance.persistence)==null||i.register({[px]:Object.keys(RN(a)),[Au]:a}),this.Pe()}getEarlyAccessFeatures(e,n,i){n===void 0&&(n=!1);var r=this._instance.get_property(n0),s=i?"&"+i.map(o=>"stage="+o).join("&"):"";if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:o=>{var a;if(o.json){var l=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[n0]:l}),e(l)}}})}Re(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(i=>n[i]),flagVariants:Object.keys(n).filter(i=>n[i]).reduce((i,r)=>(i[r]=n[r],i),{})}}Pe(e){var{flags:n,flagVariants:i}=this.Re();this.featureFlagEventHandlers.forEach(r=>r(n,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(Gf)||{};this._instance.register({[Gf]:Se({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Gf)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(Zl)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(r=>{i[r]=Se({},i[r],e[r]),delete e[r]}),this._instance.register({[Zl]:Se({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(Zl)||{};this._instance.register({[Zl]:Se({},n,{[e]:{}})})}else this._instance.unregister(Zl)}}var sH=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class mx{constructor(e){this.S=e,this.props={},this.Te=!1,this.Me=(n=>{var i="";return n.token&&(i=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+i+"_posthog"})(e),this.B=this.Ce(e),this.load(),e.debug&&Ae.info("Persistence loaded",e.persistence,Se({},this.props)),this.update_config(e,e),this.save()}Ce(e){sH.indexOf(e.persistence.toLowerCase())===-1&&(Ae.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&Sn.O()?Sn:n==="localstorage+cookie"&&Im.O()?Im:n==="sessionstorage"&&Un.O()?Un:n==="memory"?DU:n==="cookie"?no:Im.O()?Im:no}properties(){var e={};return At(this.props,function(n,i){if(i===Au&&an(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/"+r[s]]=n[r[s]];else a=i,l=!1,(El(o=gU)?l:$A&&o.indexOf===$A?o.indexOf(a)!=-1:(At(o,function(c){if(l||(l=c===a))return F0}),l))||(e[i]=n);var o,a,l}),e}load(){if(!this.Fe){var e=this.B.L(this.Me);e&&(this.props=dn({},e))}}save(){this.Fe||this.B.j(this.Me,this.props,this.Oe,this.Ae,this.De,this.S.debug)}remove(){this.B.N(this.Me,!1),this.B.N(this.Me,!0)}clear(){this.remove(),this.props={}}register_once(e,n,i){if(an(e)){ve(n)&&(n="None"),this.Oe=ve(i)?this.Le:i;var r=!1;if(At(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,n){if(an(e)){this.Oe=ve(n)?this.Le:n;var i=!1;if(At(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Te){var e=uO(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);Eu(Jk(e))||this.register(e),this.Te=!0}}update_search_keyword(){var e;this.register((e=Ce==null?void 0:Ce.referrer)?fO(e):{})}update_referrer_info(){var e;this.register_once({$referrer:hO(),$referring_domain:Ce!=null&&Ce.referrer&&((e=wd(Ce.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[Cw]||this.props[Ew]||this.register_once({[U0]:pO(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};At([Ew,Cw],o=>{var a=this.props[o];a&&At(a,function(l,c){e["$initial_"+pw(c)]=l})});var n,i,r=this.props[U0];if(r){var s=(n=mO(r),i={},At(n,function(o,a){i["$initial_"+pw(a)]=o}),i);dn(e,s)}return e}safe_merge(e){return At(this.props,function(n,i){i in e||(e[i]=n)}),e}update_config(e,n){if(this.Le=this.Oe=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.Ce(e),r=this.props;this.clear(),this.B=i,this.props=r,this.save()}}set_disabled(e){this.Fe=e,this.Fe?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ae&&(this.Ae=e,this.remove(),this.save())}set_secure(e){e!==this.De&&(this.De=e,this.remove(),this.save())}set_event_timer(e,n){var i=this.props[Hf]||{};i[e]=n,this.props[Hf]=i,this.save()}remove_event_timer(e){var n=(this.props[Hf]||{})[e];return ve(n)||(delete this.props[Hf][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}class vO{constructor(){this.je={},this.je={}}on(e,n){return this.je[e]||(this.je[e]=[]),this.je[e].push(n),()=>{this.je[e]=this.je[e].filter(i=>i!==n)}}emit(e,n){for(var i of this.je[e]||[])i(n);for(var r of this.je["*"]||[])r(e,n)}}class ic{constructor(e){this.Ne=new vO,this.ze=(n,i)=>this.Ue(n,i)&&this.qe(n,i)&&this.Be(n,i),this.Ue=(n,i)=>i==null||!i.event||(n==null?void 0:n.event)===(i==null?void 0:i.event),this._instance=e,this.He=new Set,this.We=new Set}init(){var e;if(!ve((e=this._instance)==null?void 0:e.Ge)){var n;(n=this._instance)==null||n.Ge((i,r)=>{this.on(i,r)})}}register(e){var n,i;if(!ve((n=this._instance)==null?void 0:n.Ge)&&(e.forEach(o=>{var a,l;(a=this.We)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var u;(u=this.He)==null||u.add((c==null?void 0:c.event)||"")})}),(i=this._instance)!=null&&i.autocapture)){var r,s=new Set;e.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(r=this._instance)==null||r.autocapture.setElementSelectors(s)}}on(e,n){var i;n!=null&&e.length!=0&&(this.He.has(e)||this.He.has(n==null?void 0:n.event))&&this.We&&((i=this.We)==null?void 0:i.size)>0&&this.We.forEach(r=>{this.Je(n,r)&&this.Ne.emit("actionCaptured",r.name)})}Ve(e){this.onAction("actionCaptured",n=>e(n))}Je(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var i of n.steps)if(this.ze(e,i))return!0;return!1}onAction(e,n){return this.Ne.on(e,n)}qe(e,n){if(n!=null&&n.url){var i,r=e==null||(i=e.properties)==null?void 0:i.$current_url;if(!r||typeof r!="string"||!ic.Ke(r,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static Ke(e,n,i){switch(i){case"regex":return!!q&&kd(e,n);case"exact":return n===e;case"contains":var r=ic.Ye(n).replace(/_/g,".").replace(/%/g,".*");return kd(e,r);default:return!1}}static Ye(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Be(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.Xe(e).some(s=>!(n!=null&&n.href&&!ic.Ke(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!ic.Ke(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!ic.Ke(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var i,r=e==null||(i=e.properties)==null?void 0:i.$element_selectors;if(!r||!r.includes(n==null?void 0:n.selector))return!1}return!0}Xe(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}var Mn=In("[Surveys]"),zw="seenSurvey_",oH=(t,e)=>{var n="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(n="$survey_"+e+"/"+t.id+"/"+t.current_iteration),n};class aH{constructor(e){this._instance=e,this.Qe=new Map,this.Ze=new Map}register(e){var n;ve((n=this._instance)==null?void 0:n.Ge)||(this.tr(e),this.ir(e))}ir(e){var n=e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.actions)&&((s=i.conditions)==null||(s=s.actions)==null||(s=s.values)==null?void 0:s.length)>0});n.length!==0&&(this.er==null&&(this.er=new ic(this._instance),this.er.init(),this.er.Ve(i=>{this.onAction(i)})),n.forEach(i=>{var r,s,o,a,l;i.conditions&&(r=i.conditions)!=null&&r.actions&&(s=i.conditions)!=null&&(s=s.actions)!=null&&s.values&&((o=i.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.er)==null||a.register(i.conditions.actions.values),(l=i.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var u=this.Ze.get(c.name);u&&u.push(i.id),this.Ze.set(c.name,u||[i.id])}}))}))}tr(e){var n;e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.events)&&((s=i.conditions)==null||(s=s.events)==null||(s=s.values)==null?void 0:s.length)>0}).length!==0&&((n=this._instance)==null||n.Ge((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r;(r=i.conditions)==null||(r=r.events)==null||(r=r.values)==null||r.forEach(s=>{if(s&&s.name){var o=this.Qe.get(s.name);o&&o.push(i.id),this.Qe.set(s.name,o||[i.id])}})}))}onEvent(e,n){var i,r=((i=this._instance)==null||(i=i.persistence)==null?void 0:i.props[Tm])||[];if(e==="survey shown"&&n&&r.length>0){var s;Mn.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:n,existingActivatedSurveys:r});var o=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(o){var a=r.indexOf(o);a>=0&&(r.splice(a,1),this.rr(r))}}else this.Qe.has(e)&&(Mn.info("survey event matched, updating activated surveys",{event:e,surveys:this.Qe.get(e)}),this.rr(r.concat(this.Qe.get(e)||[])))}onAction(e){var n,i=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[Tm])||[];this.Ze.has(e)&&this.rr(i.concat(this.Ze.get(e)||[]))}rr(e){var n;(n=this._instance)==null||(n=n.persistence)==null||n.register({[Tm]:[...new Set(e)]})}getSurveys(){var e,n=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[Tm];return n||[]}getEventToSurveys(){return this.Qe}sr(){return this.er}}class lH{constructor(e){this.nr=void 0,this.ar=null,this.lr=!1,this.ur=!1,this.hr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var n=e.surveys;if(St(n))return Mn.warn("Flags not loaded yet. Not loading surveys.");var i=qt(n);this.nr=i?n.length>0:n,Mn.info("flags response received, isSurveysEnabled: "+this.nr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var i=localStorage.key(n);(i!=null&&i.startsWith(zw)||i!=null&&i.startsWith("inProgressSurvey_"))&&e.push(i)}e.forEach(r=>localStorage.removeItem(r))}loadIfEnabled(){if(!this.ar)if(this.ur)Mn.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Mn.info("Disabled. Not loading surveys.");else{var e=Ke==null?void 0:Ke.__PosthogExtensions__;if(e){var n=this.nr;if(!ve(n)){this.ur=!0;try{var i=e.generateSurveys;if(i)return void this.dr(i,n);var r=e.loadExternalDependency;if(!r)return void this.vr("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",s=>{s||!e.generateSurveys?this.vr("Could not load surveys script",s):this.dr(e.generateSurveys,n)})}catch(s){throw this.vr("Error initializing surveys",s),s}finally{this.ur=!1}}}else Mn.error("PostHog Extensions not found.")}}dr(e,n){this.ar=e(this._instance,n),this._surveyEventReceiver=new aH(this._instance),Mn.info("Surveys loaded successfully"),this.cr({isLoaded:!0})}vr(e,n){Mn.error(e,n),this.cr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.hr.push(e),this.ar&&this.cr({isLoaded:!0}),()=>{this.hr=this.hr.filter(n=>n!==e)}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return Mn.info("Disabled. Not loading surveys."),e([]);var i=this._instance.get_property(Sw);if(i&&!n)return e(i,{isLoaded:!0});if(this.lr)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.lr=!0,this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:r=>{var s;this.lr=!1;var o=r.statusCode;if(o!==200||!r.json){var a="Surveys API could not be loaded, status: "+o;return Mn.error(a),e([],{isLoaded:!1,error:a})}var l,c=r.json.surveys||[],u=c.filter(d=>function(h){return!(!h.start_date||h.end_date)}(d)&&(function(h){var p;return!((p=h.conditions)==null||(p=p.events)==null||(p=p.values)==null||!p.length)}(d)||function(h){var p;return!((p=h.conditions)==null||(p=p.actions)==null||(p=p.values)==null||!p.length)}(d)));return u.length>0&&((l=this._surveyEventReceiver)==null||l.register(u)),(s=this._instance.persistence)==null||s.register({[Sw]:c}),e(c,{isLoaded:!0})}})}catch(r){throw this.lr=!1,r}}cr(e){for(var n of this.hr)try{e.isLoaded?this.getSurveys(n):n([],e)}catch(i){Mn.error("Error in survey callback",i)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!St(this.ar))return this.ar.getActiveMatchingSurveys(e,n);Mn.warn("init was not called")}pr(e){var n=null;return this.getSurveys(i=>{var r;n=(r=i.find(s=>s.id===e))!==null&&r!==void 0?r:null}),n}gr(e){if(St(this.ar))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.pr(e):e;return n?this.ar.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(St(this.ar))return Mn.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.gr(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return St(this.ar)?(Mn.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(i=>{this.getSurveys(r=>{var s,o=(s=r.find(l=>l.id===e))!==null&&s!==void 0?s:null;if(o){var a=this.gr(o);i({visible:a.eligible,disabledReason:a.reason})}else i({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(e,n){if(St(this.ar))Mn.warn("init was not called");else{var i=this.pr(e),r=Ce==null?void 0:Ce.querySelector(n);i?r?this.ar.renderSurvey(i,r):Mn.warn("Survey element not found"):Mn.warn("Survey not found")}}}(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t})({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var gx=function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t}({}),ON=function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t}({}),IN=In("[RateLimiter]");let cH=class{constructor(e){var n,i;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=r=>{var s=r.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{IN.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void IN.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:s})}},this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((i=e.config.rate_limiting)==null?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var n,i,r;e===void 0&&(e=!1);var s=new Date().getTime(),o=(n=(i=this.instance.persistence)==null?void 0:i.get_property(_w))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(r=this.instance.persistence)==null||r.set_property(_w,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}};var Hl=In("[RemoteConfig]");class uH{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=Ke._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}_r(e){var n,i;(n=Ke.__PosthogExtensions__)!=null&&n.loadExternalDependency?(i=Ke.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(Hl.error("PostHog Extensions not found. Cannot load remote config."),e())}mr(e){this._instance.Ee({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return Hl.info("Using preloaded remote config",this.remoteConfig),void this.Ie(this.remoteConfig);if(this._instance.I())return void Hl.warn("Remote config is disabled. Falling back to local config.");this._r(e=>{if(!e)return Hl.info("No config found after loading remote JS config. Falling back to JSON."),void this.mr(n=>{this.Ie(n)});this.Ie(e)})}catch(e){Hl.error("Error loading remote config",e)}}Ie(e){e?this._instance.config.__preview_remote_config?(this._instance.Ie(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):Hl.info("__preview_remote_config is disabled. Logging config instead",e):Hl.error("Failed to fetch remote config from PostHog.")}}var Bw=3e3;class dH{constructor(e,n){this.br=!0,this.yr=[],this.wr=ur((n==null?void 0:n.flush_interval_ms)||Bw,250,5e3,"flush interval",Bw),this.Sr=e}enqueue(e){this.yr.push(e),this.$r||this.kr()}unload(){this.Er();var e=this.yr.length>0?this.Ir():{},n=Object.values(e);[...n.filter(i=>i.url.indexOf("/e")===0),...n.filter(i=>i.url.indexOf("/e")!==0)].map(i=>{this.Sr(Se({},i,{transport:"sendBeacon"}))})}enable(){this.br=!1,this.kr()}kr(){var e=this;this.br||(this.$r=setTimeout(()=>{if(this.Er(),this.yr.length>0){var n=this.Ir(),i=function(){var s=n[r],o=new Date().getTime();s.data&&qt(s.data)&&At(s.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),e.Sr(s)};for(var r in n)i()}},this.wr))}Er(){clearTimeout(this.$r),this.$r=void 0}Ir(){var e={};return At(this.yr,n=>{var i,r=n,s=(r?r.batchKey:null)||r.url;ve(e[s])&&(e[s]=Se({},r,{data:[]})),(i=e[s].data)==null||i.push(r.data)}),this.yr=[],e}}var fH=["retriesPerformedSoFar"];class hH{constructor(e){this.Pr=!1,this.Rr=3e3,this.yr=[],this._instance=e,this.yr=[],this.Tr=!0,!ve(q)&&"onLine"in q.navigator&&(this.Tr=q.navigator.onLine,Qt(q,"online",()=>{this.Tr=!0,this.se()}),Qt(q,"offline",()=>{this.Tr=!1}))}get length(){return this.yr.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,i=p5(e,fH);ai(n)&&n>0&&(i.url=X0(i.url,{retry_count:n})),this._instance.Ee(Se({},i,{callback:r=>{r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(n??0)<10?this.Mr(Se({retriesPerformedSoFar:n},i)):i.callback==null||i.callback(r)}}))}Mr(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var i=function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),u=(Math.random()-.5)*(c-l);return Math.ceil(c+u)}(n),r=Date.now()+i;this.yr.push({retryAt:r,requestOptions:e});var s="Enqueued failed request for retry in "+i;navigator.onLine||(s+=" (Browser is offline)"),Ae.warn(s),this.Pr||(this.Pr=!0,this.Cr())}Cr(){this.Fr&&clearTimeout(this.Fr),this.Fr=setTimeout(()=>{this.Tr&&this.yr.length>0&&this.se(),this.Cr()},this.Rr)}se(){var e=Date.now(),n=[],i=this.yr.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.yr=n,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.Fr&&(clearTimeout(this.Fr),this.Fr=void 0),this.yr))try{this._instance.Ee(Se({},e,{transport:"sendBeacon"}))}catch(n){Ae.error(n)}this.yr=[]}}class pH{constructor(e){this.Or=()=>{var n,i,r,s;this.Ar||(this.Ar={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+((o==null?void 0:o.clientHeight)||0),u=(o==null?void 0:o.scrollHeight)||0;this.Ar.lastScrollY=Math.ceil(a),this.Ar.maxScrollY=Math.max(a,(n=this.Ar.maxScrollY)!==null&&n!==void 0?n:0),this.Ar.maxScrollHeight=Math.max(l,(i=this.Ar.maxScrollHeight)!==null&&i!==void 0?i:0),this.Ar.lastContentY=c,this.Ar.maxContentY=Math.max(c,(r=this.Ar.maxContentY)!==null&&r!==void 0?r:0),this.Ar.maxContentHeight=Math.max(u,(s=this.Ar.maxContentHeight)!==null&&s!==void 0?s:0)},this._instance=e}getContext(){return this.Ar}resetContext(){var e=this.Ar;return setTimeout(this.Or,0),e}startMeasuringScrollPosition(){Qt(q,"scroll",this.Or,{capture:!0}),Qt(q,"scrollend",this.Or,{capture:!0}),Qt(q,"resize",this.Or)}scrollElement(){if(!this._instance.config.scroll_root_selector)return q==null?void 0:q.document.documentElement;var e=qt(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var i=q==null?void 0:q.document.querySelector(n);if(i)return i}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return q&&(q.scrollY||q.pageYOffset||q.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return q&&(q.scrollX||q.pageXOffset||q.document.documentElement.scrollLeft)||0}}var mH=t=>pO(t==null?void 0:t.config.mask_personal_data_properties,t==null?void 0:t.config.custom_personal_data_properties);class gH{constructor(e,n,i,r){this.Dr=s=>{var o=this.Lr();if(!o||o.sessionId!==s){var a={sessionId:s,props:this.jr(this._instance)};this.Nr.register({[kw]:a})}},this._instance=e,this.zr=n,this.Nr=i,this.jr=r||mH,this.zr.onSessionId(this.Dr)}Lr(){return this.Nr.props[kw]}getSetOnceProps(){var e,n=(e=this.Lr())==null?void 0:e.props;return n?"r"in n?mO(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return At(Jk(this.getSetOnceProps()),(n,i)=>{i==="$current_url"&&(i="url"),e["$session_entry_"+pw(i)]=n}),e}}var jN=In("[SessionId]");class vH{constructor(e,n,i){var r;if(this.Ur=[],!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Nr=e.persistence,this.fi=void 0,this.Ct=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.qr=n||La,this.Br=i||La;var s=this.S.persistence_name||this.S.token,o=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*ur(o,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Hr(),this.Wr="ph_"+s+"_window_id",this.Gr="ph_"+s+"_primary_window_exists",this.Jr()){var a=Un.L(this.Wr),l=Un.L(this.Gr);a&&!l?this.fi=a:Un.N(this.Wr),Un.j(this.Gr,!0)}if((r=this.S.bootstrap)!=null&&r.sessionID)try{var c=(u=>{var d=u.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Vr(this.S.bootstrap.sessionID,new Date().getTime(),c)}catch(u){jN.error("Invalid sessionID in bootstrap",u)}this.Kr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return ve(this.Ur)&&(this.Ur=[]),this.Ur.push(e),this.Ct&&e(this.Ct,this.fi),()=>{this.Ur=this.Ur.filter(n=>n!==e)}}Jr(){return this.S.persistence!=="memory"&&!this.Nr.Fe&&Un.O()}Yr(e){e!==this.fi&&(this.fi=e,this.Jr()&&Un.j(this.Wr,e))}Xr(){return this.fi?this.fi:this.Jr()?Un.L(this.Wr):null}Vr(e,n,i){e===this.Ct&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this.Ct=e,this.Nr.register({[z0]:[n,e,i]}))}Qr(){if(this.Ct&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ct,this._sessionStartTimestamp];var e=this.Nr.props[z0];return qt(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Vr(null,null,null)}Kr(){Qt(q,"beforeunload",()=>{this.Jr()&&Un.N(this.Gr)},{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var i=n||new Date().getTime(),[r,s,o]=this.Qr(),a=this.Xr(),l=ai(o)&&o>0&&Math.abs(i-o)>864e5,c=!1,u=!s,d=!e&&Math.abs(i-r)>this.sessionTimeoutMs;u||d||l?(s=this.qr(),a=this.Br(),jN.info("new session ID generated",{sessionId:s,windowId:a,changeReason:{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}}),o=i,c=!0):a||(a=this.Br(),c=!0);var h=r===0||!e||l?i:r,p=o===0?new Date().getTime():o;return this.Yr(a),this.Vr(s,h,p),e||this.Hr(),c&&this.Ur.forEach(g=>g(s,a,c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0)),{sessionId:s,windowId:a,sessionStartTimestamp:p,changeReason:c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:r}}Hr(){clearTimeout(this.Zr),this.Zr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var yH=["$set_once","$set"],fa=In("[SiteApps]");class bH{constructor(e){this._instance=e,this.ts=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}es(e,n){if(n){var i=this.globalsForEvent(n);this.ts.push(i),this.ts.length>1e3&&(this.ts=this.ts.slice(10))}}get siteAppLoaders(){var e;return(e=Ke._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ge(this.es.bind(this));this.rs=()=>{e(),this.ts=[],this.rs=void 0}}}globalsForEvent(e){var n,i,r,s,o,a,l;if(!e)throw new Error("Event payload is required");var c={},u=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[h,p]of Object.entries(d))c[h]={id:u[h],type:h,properties:p};var{$set_once:g,$set:m}=e;return{event:Se({},p5(e,yH),{properties:Se({},e.properties,m?{$set:Se({},(n=(i=e.properties)==null?void 0:i.$set)!==null&&n!==void 0?n:{},m)}:{},g?{$set_once:Se({},(r=(s=e.properties)==null?void 0:s.$set_once)!==null&&r!==void 0?r:{},g)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var n=this.apps[e.id],i=()=>{var a;!n.errored&&this.ts.length&&(fa.info("Processing "+this.ts.length+" events for site app with id "+e.id),this.ts.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.rs)==null||a.call(this))},r=!1,s=a=>{n.errored=!a,n.loaded=!0,fa.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),r&&i()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{s(a)}});o&&(n.processEvent=o),r=!0}catch(a){fa.error("Error while initializing PostHog app with config id "+e.id,a),s(!1)}if(r&&n.loaded)try{i()}catch(a){fa.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}ss(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var i of e)this.setupSiteApp(i)}ns(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var i of Object.values(this.apps))try{i.processEvent==null||i.processEvent(n)}catch(r){fa.error("Error while processing event "+e.event+" for site app "+i.id,r)}}}onRemoteConfig(e){var n,i,r,s=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.ss(),void this._instance.on("eventCaptured",c=>this.ns(c))):void fa.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((i=this.rs)==null||i.call(this),(r=e.siteApps)!=null&&r.length)if(this.isEnabled){var o=function(c){var u;Ke["__$$ph_site_app_"+c]=s._instance,(u=Ke.__PosthogExtensions__)==null||u.loadSiteApp==null||u.loadSiteApp(s._instance,l,d=>{if(d)return fa.error("Error while initializing PostHog app with config id "+c,d)})};for(var{id:a,url:l}of e.siteApps)o(a)}else fa.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var xH=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],LN=function(t,e){if(!t)return!1;var n=t.toLowerCase();return xH.concat(e||[]).some(i=>{var r=i.toLowerCase();return n.indexOf(r)!==-1})},yO=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&LN(n,e))return!0;try{var i=t==null?void 0:t.userAgentData;if(i!=null&&i.brands&&i.brands.some(r=>LN(r==null?void 0:r.brand,e)))return!0}catch{}return!!t.webdriver},Xf=function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t}({}),DN="i.posthog.com";class wH{constructor(e){this.os={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+DN,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.os[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Xf.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Xf.EU:this.os[this.apiHost]=Xf.CUSTOM),this.os[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(this.region===Xf.CUSTOM)return this.apiHost+n;var i=DN+n;switch(e){case"assets":return"https://"+this.region+"-assets."+i;case"api":return"https://"+this.region+"."+i}}}var SH={icontains:(t,e)=>!!q&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!q&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!q&&kd(e.href,t),not_regex:(t,e)=>!!q&&!kd(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};let kH=class pi{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(i){i===void 0&&(i=!1),n.getWebExperiments(r=>{pi.ls("retrieved web experiments from the server"),n.us=new Map,r.forEach(s=>{if(s.feature_flag_key){var o;n.us&&(pi.ls("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n.us)==null||o.set(s.feature_flag_key,s));var a=n._instance.getFeatureFlag(s.feature_flag_key);ln(a)&&s.variants[a]&&n.hs(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var c=s.variants[l];pi.ds(c)&&n.hs(s.name,l,c.transforms)}})},i)},this._instance=e,this._instance.onFeatureFlags(i=>{this.onFeatureFlags(i)})}onFeatureFlags(e){if(this._is_bot())pi.ls("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(St(this.us))return this.us=new Map,this.loadIfEnabled(),void this.previewWebExperiment();pi.ls("applying feature flags",e),e.forEach(n=>{var i;if(this.us&&(i=this.us)!=null&&i.has(n)){var r,s=this._instance.getFeatureFlag(n),o=(r=this.us)==null?void 0:r.get(n);s&&o!=null&&o.variants[s]&&this.hs(o.name,s,o.variants[s].transforms)}})}}previewWebExperiment(){var e=pi.getWindowLocation();if(e!=null&&e.search){var n=W0(e==null?void 0:e.search,"__experiment_id"),i=W0(e==null?void 0:e.search,"__experiment_variant");n&&i&&(pi.ls("previewing web experiments "+n+" && "+i),this.getWebExperiments(r=>{this.vs(parseInt(n),i,r)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,i){if(this._instance.config.disable_web_experiments&&!i)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}vs(e,n,i){var r=i.filter(s=>s.id===e);r&&r.length>0&&(pi.ls("Previewing web experiment ["+r[0].name+"] with variant ["+n+"]"),this.hs(r[0].name,n,r[0].variants[n].transforms))}static ds(e){return!St(e.conditions)&&pi.cs(e)&&pi.fs(e)}static cs(e){var n;if(St(e.conditions)||St((n=e.conditions)==null?void 0:n.url))return!0;var i,r,s,o=pi.getWindowLocation();return!!o&&((i=e.conditions)==null||!i.url||SH[(r=(s=e.conditions)==null?void 0:s.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,o))}static getWindowLocation(){return q==null?void 0:q.location}static fs(e){var n;if(St(e.conditions)||St((n=e.conditions)==null?void 0:n.utm))return!0;var i=uO();if(i.utm_source){var r,s,o,a,l,c,u,d,h=(r=e.conditions)==null||(r=r.utm)==null||!r.utm_campaign||((s=e.conditions)==null||(s=s.utm)==null?void 0:s.utm_campaign)==i.utm_campaign,p=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==i.utm_source,g=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=e.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==i.utm_medium,m=(u=e.conditions)==null||(u=u.utm)==null||!u.utm_term||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_term)==i.utm_term;return h&&g&&m&&p}return!1}static ls(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];Ae.info("[WebExperiments] "+e,i)}hs(e,n,i){this._is_bot()?pi.ls("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?i.forEach(r=>{if(r.selector){var s;pi.ls("applying transform of variant "+n+" for experiment "+e+" ",r);var o=(s=document)==null?void 0:s.querySelectorAll(r.selector);o==null||o.forEach(a=>{var l=a;r.html&&(l.innerHTML=r.html),r.css&&l.setAttribute("style",r.css)})}}):pi.ls("Control variants leave the page unmodified.")}_is_bot(){return cr&&this._instance?yO(cr,this._instance.config.custom_blocked_useragents):void 0}};var _H=In("[PostHog ExternalIntegrations]"),CH={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};let EH=class{constructor(e){this._instance=e}J(e,n){var i;(i=Ke.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,e,r=>{if(r)return _H.error("failed to load script",r);n()})}startIfEnabledOrStop(){var e=this,n=function(o){var a,l,c;!r||(a=Ke.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.J(CH[o],()=>{var u;(u=Ke.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.start(e._instance)}),!r&&(l=Ke.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((c=Ke.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.stop())};for(var[i,r]of Object.entries((s=this._instance.config.integrations)!==null&&s!==void 0?s:{})){var s;n(i)}}};var gh={},Uw=()=>{},gu="posthog",bO=!$V&&(Di==null?void 0:Di.indexOf("MSIE"))===-1&&(Di==null?void 0:Di.indexOf("Mozilla"))===-1,$N=t=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:mU(Ce==null?void 0:Ce.location),persistence:"localStorage+cookie",persistence_name:"",loaded:Uw,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:t!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:t??"unset",debug:zi&&ln(zi==null?void 0:zi.search)&&zi.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(q==null||(e=q.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var i="Bad HTTP status: "+n.statusCode+" "+n.text;Ae.error(i)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:Bw},error_tracking:{},_onCapture:Uw}},FN=t=>{var e={};ve(t.process_person)||(e.person_profiles=t.process_person),ve(t.xhr_headers)||(e.request_headers=t.xhr_headers),ve(t.cookie_name)||(e.persistence_name=t.cookie_name),ve(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),ve(t.store_google)||(e.save_campaign_params=t.store_google),ve(t.verbose)||(e.debug=t.verbose);var n=dn({},e,t);return qt(t.property_blacklist)&&(ve(t.property_denylist)?n.property_denylist=t.property_blacklist:qt(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:Ae.error("Invalid value for property_denylist config: "+t.property_denylist)),n};let AH=class{constructor(){this.__forceAllowLocalhost=!1}get ps(){return this.__forceAllowLocalhost}set ps(e){Ae.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}},xO=class wO{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new AH,this.gs=!1,this.version=Eo.LIB_VERSION,this._s=new vO,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=$N(),this.SentryIntegration=NV,this.sentryIntegration=e=>function(n,i){var r=K5(n,i);return{name:G5,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.bs=!1,this.ys=null,this.ws=null,this.Ss=null,this.featureFlags=new rH(this),this.toolbar=new MV(this),this.scrollManager=new pH(this),this.pageViewManager=new LV(this),this.surveys=new lH(this),this.experiments=new kH(this),this.exceptions=new BV(this),this.rateLimiter=new cH(this),this.requestRouter=new wH(this),this.consent=new $U(this),this.externalIntegrations=new EH(this),this.people={set:(e,n,i)=>{var r=ln(e)?{[e]:n}:e;this.setPersonProperties(r),i==null||i({})},set_once:(e,n,i)=>{var r=ln(e)?{[e]:n}:e;this.setPersonProperties(void 0,r),i==null||i({})}},this.on("eventCaptured",e=>Ae.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,n,i){if(i&&i!==gu){var r,s=(r=gh[i])!==null&&r!==void 0?r:new wO;return s._init(e,n,i),gh[i]=s,gh[gu][i]=s,s}return this._init(e,n,i)}_init(e,n,i){var r,s;if(n===void 0&&(n={}),ve(e)||mw(e))return Ae.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Ae.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.$s=n,this.ks=[],n.person_profiles&&(this.ws=n.person_profiles),this.set_config(dn({},$N(n.defaults),FN(n),{name:i,token:e})),this.config.on_xhr_error&&Ae.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:Fo.GZipJS,this.persistence=new mx(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new mx(Se({},this.config,{persistence:"sessionStorage"}));var o=Se({},this.persistence.props),a=Se({},this.sessionPersistence.props);if(this.register({$initialization_time:new Date().toISOString()}),this.xs=new dH(y=>this.Es(y),this.config.request_queue_config),this.Is=new hH(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new vH(this),this.sessionPropsManager=new gH(this,this.sessionManager,this.persistence)),new TV(this).startIfEnabledOrStop(),this.siteApps=new bH(this),(r=this.siteApps)==null||r.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new EV(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new PU(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new jV(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new OV(this),this.exceptionObserver=new BU(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new R5(this,zU),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new tV(this),this.historyAutocapture.startIfEnabled(),Eo.DEBUG=Eo.DEBUG||this.config.debug,Eo.DEBUG&&Ae.info("Starting in debug mode",{this:this,config:n,thisC:Se({},this.config),p:o,s:a}),this.Ps(),((s=n.bootstrap)==null?void 0:s.distinctID)!==void 0){var l,c,u=this.config.get_device_id(La()),d=(l=n.bootstrap)!=null&&l.isIdentifiedID?u:n.bootstrap.distinctID;this.persistence.set_property(wo,(c=n.bootstrap)!=null&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:d})}if(this.Rs()){var h,p,g=Object.keys(((h=n.bootstrap)==null?void 0:h.featureFlags)||{}).filter(y=>{var x;return!((x=n.bootstrap)==null||(x=x.featureFlags)==null||!x[y])}).reduce((y,x)=>{var w;return y[x]=((w=n.bootstrap)==null||(w=w.featureFlags)==null?void 0:w[x])||!1,y},{}),m=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(y=>g[y]).reduce((y,x)=>{var w,S;return(w=n.bootstrap)!=null&&(w=w.featureFlagPayloads)!=null&&w[x]&&(y[x]=(S=n.bootstrap)==null||(S=S.featureFlagPayloads)==null?void 0:S[x]),y},{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:m})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Om,$device_id:null},"");else if(!this.get_distinct_id()){var v=this.config.get_device_id(La());this.register_once({distinct_id:v,$device_id:v},""),this.persistence.set_property(wo,"anonymous")}return Qt(q,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?AV(this,()=>this.Ts()):this.Ts(),zr(this.config._onCapture)&&this.config._onCapture!==Uw&&(Ae.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",y=>this.config._onCapture(y.event,y))),this.config.ip&&Ae.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Ie(e){var n,i,r,s,o,a,l,c;if(!Ce||!Ce.body)return Ae.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Ie(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=at(e.supportedCompression,Fo.GZipJS)?Fo.GZipJS:at(e.supportedCompression,Fo.Base64)?Fo.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.ws?this.ws:"identified_only"}),(i=this.siteApps)==null||i.onRemoteConfig(e),(r=this.sessionRecording)==null||r.onRemoteConfig(e),(s=this.autocapture)==null||s.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(e)}Ts(){try{this.config.loaded(this)}catch(e){Ae.critical("`loaded` function failed",e)}this.Ms(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Cs()},1),new uH(this).load(),this.featureFlags.flags()}Ms(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this.xs)==null||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||qa(this.__request_queue,e=>this.Es(e)),this.__request_queue=[],this.Ms()}_handle_unload(){var e,n;this.config.request_batching?(this.Fs()&&this.capture("$pageleave"),(e=this.xs)==null||e.unload(),(n=this.Is)==null||n.unload()):this.Fs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Ee(e){this.__loaded&&(bO?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=X0(e.url,{ip:this.config.ip?1:0}),e.headers=Se({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var i,r,s,o=Se({},n);o.timeout=o.timeout||6e4,o.url=X0(o.url,{_:new Date().getTime().toString(),ver:Eo.LIB_VERSION,compression:o.compression});var a=(i=o.transport)!==null&&i!==void 0?i:"fetch",l=(r=(s=m5(mh,c=>c.transport===a))==null?void 0:s.method)!==null&&r!==void 0?r:mh[0].method;if(!l)throw new Error("No available transport method");l(o)})(Se({},e,{callback:n=>{var i,r;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((i=(r=this.config).on_request_error)==null||i.call(r,n)),e.callback==null||e.callback(n)}}))))}Es(e){this.Is?this.Is.retriableRequest(e):this.Ee(e)}_execute_array(e){var n,i=[],r=[],s=[];qa(e,a=>{a&&(n=a[0],qt(n)?s.push(a):zr(a)?a.call(this):qt(a)&&n==="alias"?i.push(a):qt(a)&&n.indexOf("capture")!==-1&&zr(this[n])?s.push(a):r.push(a))});var o=function(a,l){qa(a,function(c){if(qt(c[0])){var u=l;At(c,function(d){u=u[d[0]].apply(u,d.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(i,this),o(r,this),o(s,this)}Rs(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.xs){if(!this.consent.isOptedOut())if(!ve(e)&&ln(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=i!=null&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){n!=null&&n.$current_url&&!ln(n==null?void 0:n.$current_url)&&(Ae.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(i==null?void 0:i.timestamp)||o,l=La(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,n||{},a,l)};s&&(c.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),i!=null&&i.$set&&(c.$set=i==null?void 0:i.$set);var u,d,h=this.Os(i==null?void 0:i.$set_once);if(h&&(c.$set_once=h),(c=hU(c,i!=null&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,ve(i==null?void 0:i.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=o),e===gx.DISMISSED||e===gx.SENT){var p=n==null?void 0:n[ON.SURVEY_ID],g=n==null?void 0:n[ON.SURVEY_ITERATION];localStorage.setItem((d=""+zw+(u={id:p,current_iteration:g}).id,u.current_iteration&&u.current_iteration>0&&(d=""+zw+u.id+"_"+u.current_iteration),d),"true"),c.$set=Se({},c.$set,{[oH({id:p,current_iteration:g},e===gx.SENT?"responded":"dismissed")]:!0})}var m=Se({},c.properties.$set,c.$set);if(Eu(m)||this.setPersonPropertiesForFlags(m),!St(this.config.before_send)){var v=this.As(c);if(!v)return;c=v}this._s.emit("eventCaptured",c);var y={method:"POST",url:(r=i==null?void 0:i._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:i==null?void 0:i._batchKey};return!this.config.request_batching||i&&(i==null||!i._batchKey)||i!=null&&i.send_instantly?this.Es(y):this.xs.enqueue(y),c}Ae.critical("This capture call is ignored due to client rate limiting.")}}else Ae.error("No event name provided to posthog.capture")}else Ae.uninitializedWarning("posthog.capture")}Ge(e){return this.on("eventCaptured",n=>e(n.event,n))}calculateEventProperties(e,n,i,r,s){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;var o=s?void 0:this.persistence.remove_event_timer(e),a=Se({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(a.$cookieless_mode=!0),e==="$snapshot"){var l=Se({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!ln(a.distinct_id)&&!ai(a.distinct_id)||mw(a.distinct_id))&&Ae.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,u=tH(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:h}=this.sessionManager.checkAndGetSessionAndWindowId(s,i.getTime());a.$session_id=d,a.$window_id=h}this.sessionPropsManager&&dn(a,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&dn(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(p=this.Is)==null?void 0:p.length}catch(y){a.$sdk_debug_error_capturing_properties=String(y)}if(this.requestRouter.region===Xf.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=e!=="$pageview"||s?e!=="$pageleave"||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(i):this.pageViewManager.doPageView(i,r),a=dn(a,c),e==="$pageview"&&Ce&&(a.title=Ce.title),!ve(o)){var g=i.getTime()-o;a.$duration=parseFloat((g/1e3).toFixed(3))}Di&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=dn({},u,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),qt(this.config.property_denylist)?At(this.config.property_denylist,function(y){delete a[y]}):Ae.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var m=this.config.sanitize_properties;m&&(Ae.error("sanitize_properties is deprecated. Use before_send instead"),a=m(a,e));var v=this.Ds();return a.$process_person_profile=v,v&&!s&&this.Ls("_calculate_event_properties"),a}Os(e){var n;if(!this.persistence||!this.Ds()||this.gs)return e;var i=this.persistence.get_initial_props(),r=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),s=dn({},i,r||{},e||{}),o=this.config.sanitize_properties;return o&&(Ae.error("sanitize_properties is deprecated. Use before_send instead"),s=o(s,"$set_once")),this.gs=!0,Eu(s)?void 0:s}register(e,n){var i;(i=this.persistence)==null||i.register(e,n)}register_once(e,n,i){var r;(r=this.persistence)==null||r.register_once(e,n,i)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}js(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e,n,i){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,i)}on(e,n){return this._s.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,i;return(n=(i=this.sessionManager)==null?void 0:i.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,i){if(!this.__loaded||!this.persistence)return Ae.uninitializedWarning("posthog.identify");if(ai(e)&&(e=e.toString(),Ae.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Ae.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==Om){if(this.Ls("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(Vf)&&(this.unregister(Vf),this.register({distinct_id:e}));var o=(this.persistence.get_property(wo)||"anonymous")==="anonymous";e!==r&&o?(this.persistence.set_property(wo,"identified"),this.setPersonPropertiesForFlags(Se({},i||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.Ss=_N(e,n,i),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(B0))}}else Ae.critical('The string "'+Om+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Ae.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.Ls("posthog.setPersonProperties")){var i=_N(this.get_distinct_id(),e,n);this.Ss!==i?(this.setPersonPropertiesForFlags(Se({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.Ss=i):Ae.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,i){if(e&&n){if(this.Ls("posthog.group")){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:Se({},r,{[e]:n})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===n||i||this.reloadFeatureFlags()}}else Ae.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.Ls("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,i,r,s;if(Ae.info("reset"),!this.__loaded)return Ae.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(i=this.sessionPersistence)==null||i.clear(),this.surveys.reset(),(r=this.persistence)==null||r.set_property(wo,"anonymous"),(s=this.sessionManager)==null||s.resetSessionId(),this.Ss=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Om,$device_id:null},"");else{var a=this.config.get_device_id(La());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&i){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return r;r+="?t="+Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0)}return r}alias(e,n){return e===this.get_property(g5)?(Ae.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ls("posthog.alias")?(ve(n)&&(n=this.get_distinct_id()),e!==n?(this.js(Vf,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(Ae.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,i,r,s,o,a=Se({},this.config);an(e)&&(dn(this.config,FN(e)),(n=this.persistence)==null||n.update_config(this.config,a),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new mx(Se({},this.config,{persistence:"sessionStorage"})),Sn.O()&&Sn.D("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(Eo.DEBUG=!0,Ae.info("set_config",{config:e,oldConfig:a,newConfig:Se({},this.config)})),(i=this.sessionRecording)==null||i.startIfEnabledOrStop(),(r=this.autocapture)==null||r.startIfEnabled(),(s=this.heatmaps)==null||s.startIfEnabled(),this.surveys.loadIfEnabled(),this.Ps(),(o=this.externalIntegrations)==null||o.startIfEnabledOrStop())}startSessionRecording(e){var n=e===!0,i={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(i).some(Boolean)){var r,s,o,a,l;(r=this.sessionManager)==null||r.checkAndGetSessionAndWindowId(),i.sampling&&((s=this.sessionRecording)==null||s.overrideSampling()),i.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),i.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),i.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var i=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(Se({},eV((r=>r instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:i}),n))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:gu;return n!==gu&&(n=gu+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(wo))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(wo))==="identified"}Ds(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Eu(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Vf])&&((n=this.persistence)==null||(n=n.props)==null||!n[V0]))}Fs(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Ds()||this.Ls("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ls(e){return this.config.person_profiles==="never"?(Ae.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.js(V0,!0),!0)}Ps(){var e,n,i,r,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)==null?void 0:e.Fe)!==a&&((i=this.persistence)==null||i.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.Fe)!==a&&((r=this.sessionPersistence)==null||r.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this.Ps(),(ve(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Cs()}opt_out_capturing(){this.consent.optInOut(!1),this.Ps()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Ps()}_is_bot(){return cr?yO(cr,this.config.custom_blocked_useragents):void 0}Cs(){Ce&&(Ce.visibilityState==="visible"?this.bs||(this.bs=!0,this.capture("$pageview",{title:Ce.title},{send_instantly:!0}),this.ys&&(Ce.removeEventListener("visibilitychange",this.ys),this.ys=null)):this.ys||(this.ys=this.Cs.bind(this),Qt(Ce,"visibilitychange",this.ys)))}debug(e){e===!1?(q==null||q.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(q==null||q.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var e,n,i,r,s,o,a,l=this.$s||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(Ae.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(i="advanced_disable_decide",r=!1,s=Ae,o=(n="advanced_disable_flags")in(e=l)&&!ve(e[n]),a=i in e&&!ve(e[i]),o?e[n]:a?(s&&s.warn("Config field '"+i+"' is deprecated. Please use '"+n+"' instead. The old field will be removed in a future major version."),e[i]):r)}As(e){if(St(this.config.before_send))return e;var n=qt(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of n){if(i=r(i),St(i)){var s="Event '"+e.event+"' was rejected in beforeSend function";return uU(e.event)?Ae.warn(s+". This can cause unexpected behavior."):Ae.info(s),null}i.properties&&!Eu(i.properties)||Ae.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return i}getPageViewId(){var e;return(e=this.pageViewManager.ce)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,i){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(i)})}};(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=fU(t.prototype[e[n]])})(xO,["identify"]);var zN,Na=(zN=gh[gu]=new xO,function(){function t(){t.done||(t.done=!0,bO=!1,At(gh,function(e){e._dom_loaded()}))}Ce!=null&&Ce.addEventListener?Ce.readyState==="complete"?t():Qt(Ce,"DOMContentLoaded",t,{capture:!1}):q&&Ae.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),zN),SO=b.createContext({client:Na});function kO(t,e,n){if(n===void 0&&(n=new WeakMap),t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(n.has(t)&&n.get(t)===e)return!0;n.set(t,e);var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var s=0,o=i;s<o.length;s++){var a=o[s];if(!r.includes(a)||!kO(t[a],e[a],n))return!1}return!0}function NH(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=b.useRef(null),o=b.useMemo(function(){return n?(i&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),r&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(i||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),Na)},[n,i,JSON.stringify(r)]);return b.useEffect(function(){if(!n){var a=s.current;a?(i!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),r&&!kO(r,a.options)&&Na.set_config(r),s.current={apiKey:i,options:r??{}}):(Na.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),Na.init(i,r),s.current={apiKey:i,options:r??{}})}},[n,i,JSON.stringify(r)]),Ft.createElement(SO.Provider,{value:{client:o}},e)}var Vw=function(t,e){return Vw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},Vw(t,e)};function PH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Vw(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var vx=function(t){return typeof t=="function"},MH={componentStack:null,error:null},RH={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(t){PH(e,t);function e(n){var i=t.call(this,n)||this;return i.state=MH,i}return e.prototype.componentDidCatch=function(n,i){var r=i.componentStack,s=this.props.additionalProperties;this.setState({error:n,componentStack:r});var o;vx(s)?o=s(n):typeof s=="object"&&(o=s);var a=this.context.client;a.captureException(n,o)},e.prototype.render=function(){var n=this.props,i=n.children,r=n.fallback,s=this.state;if(s.componentStack==null)return vx(i)?i():i;var o=vx(r)?Ft.createElement(r,{error:s.error,componentStack:s.componentStack}):r;return Ft.isValidElement(o)?o:(console.warn(RH.INVALID_FALLBACK),Ft.createElement(Ft.Fragment,null))},e.contextType=SO,e})(Ft.Component);var _O={exports:{}},kr={},CO={exports:{}},EO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,z){var ie=U.length;U.push(z);e:for(;0<ie;){var be=ie-1>>>1,J=U[be];if(0<r(J,z))U[be]=z,U[ie]=J,ie=be;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var z=U[0],ie=U.pop();if(ie!==z){U[0]=ie;e:for(var be=0,J=U.length,le=J>>>1;be<le;){var F=2*(be+1)-1,$=U[F],V=F+1,k=U[V];if(0>r($,ie))V<J&&0>r(k,$)?(U[be]=k,U[V]=ie,be=V):(U[be]=$,U[F]=ie,be=F);else if(V<J&&0>r(k,ie))U[be]=k,U[V]=ie,be=V;else break e}}return z}function r(U,z){var ie=U.sortIndex-z.sortIndex;return ie!==0?ie:U.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,p=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(U){for(var z=n(c);z!==null;){if(z.callback===null)i(c);else if(z.startTime<=U)i(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function S(U){if(m=!1,w(U),!g)if(n(l)!==null)g=!0,X(_);else{var z=n(c);z!==null&&te(S,z.startTime-U)}}function _(U,z){g=!1,m&&(m=!1,y(N),N=-1),p=!0;var ie=h;try{for(w(z),d=n(l);d!==null&&(!(d.expirationTime>z)||U&&!O());){var be=d.callback;if(typeof be=="function"){d.callback=null,h=d.priorityLevel;var J=be(d.expirationTime<=z);z=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(l)&&i(l),w(z)}else i(l);d=n(l)}if(d!==null)var le=!0;else{var F=n(c);F!==null&&te(S,F.startTime-z),le=!1}return le}finally{d=null,h=ie,p=!1}}var E=!1,C=null,N=-1,M=5,I=-1;function O(){return!(t.unstable_now()-I<M)}function T(){if(C!==null){var U=t.unstable_now();I=U;var z=!0;try{z=C(!0,U)}finally{z?H():(E=!1,C=null)}}else E=!1}var H;if(typeof x=="function")H=function(){x(T)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,K=L.port2;L.port1.onmessage=T,H=function(){K.postMessage(null)}}else H=function(){v(T,0)};function X(U){C=U,E||(E=!0,H())}function te(U,z){N=v(function(){U(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,X(_))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var ie=h;h=z;try{return U()}finally{h=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ie=h;h=U;try{return z()}finally{h=ie}},t.unstable_scheduleCallback=function(U,z,ie){var be=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?be+ie:be):ie=be,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ie+J,U={id:u++,callback:z,priorityLevel:U,startTime:ie,expirationTime:J,sortIndex:-1},ie>be?(U.sortIndex=ie,e(c,U),n(l)===null&&U===n(c)&&(m?(y(N),N=-1):m=!0,te(S,ie-be))):(U.sortIndex=J,e(l,U),g||p||(g=!0,X(_))),U},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(U){var z=h;return function(){var ie=h;h=z;try{return U.apply(this,arguments)}finally{h=ie}}}})(EO);CO.exports=EO;var TH=CO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OH=b,br=TH;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AO=new Set,Kh={};function Yc(t,e){Cd(t,e),Cd(t+"Capture",e)}function Cd(t,e){for(Kh[t]=e,t=0;t<e.length;t++)AO.add(e[t])}var Ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hw=Object.prototype.hasOwnProperty,IH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,BN={},UN={};function jH(t){return Hw.call(UN,t)?!0:Hw.call(BN,t)?!1:IH.test(t)?UN[t]=!0:(BN[t]=!0,!1)}function LH(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DH(t,e,n,i){if(e===null||typeof e>"u"||LH(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ci(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qn[t]=new Ci(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qn[e]=new Ci(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qn[t]=new Ci(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qn[t]=new Ci(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qn[t]=new Ci(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qn[t]=new Ci(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qn[t]=new Ci(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qn[t]=new Ci(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qn[t]=new Ci(t,5,!1,t.toLowerCase(),null,!1,!1)});var d_=/[\-:]([a-z])/g;function f_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(d_,f_);Qn[e]=new Ci(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(d_,f_);Qn[e]=new Ci(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(d_,f_);Qn[e]=new Ci(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qn[t]=new Ci(t,1,!1,t.toLowerCase(),null,!1,!1)});Qn.xlinkHref=new Ci("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qn[t]=new Ci(t,1,!1,t.toLowerCase(),null,!0,!0)});function h_(t,e,n,i){var r=Qn.hasOwnProperty(e)?Qn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DH(e,n,r,i)&&(n=null),i||r===null?jH(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ia=OH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vm=Symbol.for("react.element"),Pu=Symbol.for("react.portal"),Mu=Symbol.for("react.fragment"),p_=Symbol.for("react.strict_mode"),Ww=Symbol.for("react.profiler"),NO=Symbol.for("react.provider"),PO=Symbol.for("react.context"),m_=Symbol.for("react.forward_ref"),Gw=Symbol.for("react.suspense"),Kw=Symbol.for("react.suspense_list"),g_=Symbol.for("react.memo"),xa=Symbol.for("react.lazy"),MO=Symbol.for("react.offscreen"),VN=Symbol.iterator;function bf(t){return t===null||typeof t!="object"?null:(t=VN&&t[VN]||t["@@iterator"],typeof t=="function"?t:null)}var rn=Object.assign,yx;function Jf(t){if(yx===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yx=e&&e[1]||""}return`
`+yx+t}var bx=!1;function xx(t,e){if(!t||bx)return"";bx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{bx=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Jf(t):""}function $H(t){switch(t.tag){case 5:return Jf(t.type);case 16:return Jf("Lazy");case 13:return Jf("Suspense");case 19:return Jf("SuspenseList");case 0:case 2:case 15:return t=xx(t.type,!1),t;case 11:return t=xx(t.type.render,!1),t;case 1:return t=xx(t.type,!0),t;default:return""}}function qw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mu:return"Fragment";case Pu:return"Portal";case Ww:return"Profiler";case p_:return"StrictMode";case Gw:return"Suspense";case Kw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case PO:return(t.displayName||"Context")+".Consumer";case NO:return(t._context.displayName||"Context")+".Provider";case m_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case g_:return e=t.displayName||null,e!==null?e:qw(t.type)||"Memo";case xa:e=t._payload,t=t._init;try{return qw(t(e))}catch{}}return null}function FH(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qw(e);case 8:return e===p_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function RO(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zH(t){var e=RO(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Hm(t){t._valueTracker||(t._valueTracker=zH(t))}function TO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=RO(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Z0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yw(t,e){var n=e.checked;return rn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function HN(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=cl(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function OO(t,e){e=e.checked,e!=null&&h_(t,"checked",e,!1)}function Xw(t,e){OO(t,e);var n=cl(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Jw(t,e.type,n):e.hasOwnProperty("defaultValue")&&Jw(t,e.type,cl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function WN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Jw(t,e,n){(e!=="number"||Z0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zf=Array.isArray;function Xu(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+cl(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Zw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return rn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function GN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(Zf(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cl(n)}}function IO(t,e){var n=cl(e.value),i=cl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function KN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jO(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wm,LO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wm=Wm||document.createElement("div"),Wm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BH=["Webkit","ms","Moz","O"];Object.keys(vh).forEach(function(t){BH.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vh[e]=vh[t]})});function DO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vh.hasOwnProperty(t)&&vh[t]?(""+e).trim():e+"px"}function $O(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=DO(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var UH=rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eS(t,e){if(e){if(UH[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function tS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nS=null;function v_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var iS=null,Ju=null,Zu=null;function qN(t){if(t=tm(t)){if(typeof iS!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=$y(e),iS(t.stateNode,t.type,e))}}function FO(t){Ju?Zu?Zu.push(t):Zu=[t]:Ju=t}function zO(){if(Ju){var t=Ju,e=Zu;if(Zu=Ju=null,qN(t),e)for(t=0;t<e.length;t++)qN(e[t])}}function BO(t,e){return t(e)}function UO(){}var wx=!1;function VO(t,e,n){if(wx)return t(e,n);wx=!0;try{return BO(t,e,n)}finally{wx=!1,(Ju!==null||Zu!==null)&&(UO(),zO())}}function Yh(t,e){var n=t.stateNode;if(n===null)return null;var i=$y(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var rS=!1;if(Ko)try{var xf={};Object.defineProperty(xf,"passive",{get:function(){rS=!0}}),window.addEventListener("test",xf,xf),window.removeEventListener("test",xf,xf)}catch{rS=!1}function VH(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var yh=!1,Q0=null,ev=!1,sS=null,HH={onError:function(t){yh=!0,Q0=t}};function WH(t,e,n,i,r,s,o,a,l){yh=!1,Q0=null,VH.apply(HH,arguments)}function GH(t,e,n,i,r,s,o,a,l){if(WH.apply(this,arguments),yh){if(yh){var c=Q0;yh=!1,Q0=null}else throw Error(ae(198));ev||(ev=!0,sS=c)}}function Xc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function HO(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function YN(t){if(Xc(t)!==t)throw Error(ae(188))}function KH(t){var e=t.alternate;if(!e){if(e=Xc(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return YN(r),t;if(s===i)return YN(r),e;s=s.sibling}throw Error(ae(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==i)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function WO(t){return t=KH(t),t!==null?GO(t):null}function GO(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=GO(t);if(e!==null)return e;t=t.sibling}return null}var KO=br.unstable_scheduleCallback,XN=br.unstable_cancelCallback,qH=br.unstable_shouldYield,YH=br.unstable_requestPaint,fn=br.unstable_now,XH=br.unstable_getCurrentPriorityLevel,y_=br.unstable_ImmediatePriority,qO=br.unstable_UserBlockingPriority,tv=br.unstable_NormalPriority,JH=br.unstable_LowPriority,YO=br.unstable_IdlePriority,Iy=null,ro=null;function ZH(t){if(ro&&typeof ro.onCommitFiberRoot=="function")try{ro.onCommitFiberRoot(Iy,t,void 0,(t.current.flags&128)===128)}catch{}}var gs=Math.clz32?Math.clz32:tW,QH=Math.log,eW=Math.LN2;function tW(t){return t>>>=0,t===0?32:31-(QH(t)/eW|0)|0}var Gm=64,Km=4194304;function Qf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nv(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Qf(a):(s&=o,s!==0&&(i=Qf(s)))}else o=n&~r,o!==0?i=Qf(o):s!==0&&(i=Qf(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-gs(e),r=1<<n,i|=t[n],e&=~r;return i}function nW(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iW(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-gs(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=nW(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function oS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function XO(){var t=Gm;return Gm<<=1,!(Gm&4194240)&&(Gm=64),t}function Sx(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gs(e),t[e]=n}function rW(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-gs(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function b_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-gs(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ct=0;function JO(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ZO,x_,QO,eI,tI,aS=!1,qm=[],Xa=null,Ja=null,Za=null,Xh=new Map,Jh=new Map,Pa=[],sW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JN(t,e){switch(t){case"focusin":case"focusout":Xa=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":Xh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jh.delete(e.pointerId)}}function wf(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=tm(e),e!==null&&x_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function oW(t,e,n,i,r){switch(e){case"focusin":return Xa=wf(Xa,t,e,n,i,r),!0;case"dragenter":return Ja=wf(Ja,t,e,n,i,r),!0;case"mouseover":return Za=wf(Za,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Xh.set(s,wf(Xh.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Jh.set(s,wf(Jh.get(s)||null,t,e,n,i,r)),!0}return!1}function nI(t){var e=uc(t.target);if(e!==null){var n=Xc(e);if(n!==null){if(e=n.tag,e===13){if(e=HO(n),e!==null){t.blockedOn=e,tI(t.priority,function(){QO(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function r0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);nS=i,n.target.dispatchEvent(i),nS=null}else return e=tm(n),e!==null&&x_(e),t.blockedOn=n,!1;e.shift()}return!0}function ZN(t,e,n){r0(t)&&n.delete(e)}function aW(){aS=!1,Xa!==null&&r0(Xa)&&(Xa=null),Ja!==null&&r0(Ja)&&(Ja=null),Za!==null&&r0(Za)&&(Za=null),Xh.forEach(ZN),Jh.forEach(ZN)}function Sf(t,e){t.blockedOn===e&&(t.blockedOn=null,aS||(aS=!0,br.unstable_scheduleCallback(br.unstable_NormalPriority,aW)))}function Zh(t){function e(r){return Sf(r,t)}if(0<qm.length){Sf(qm[0],t);for(var n=1;n<qm.length;n++){var i=qm[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Xa!==null&&Sf(Xa,t),Ja!==null&&Sf(Ja,t),Za!==null&&Sf(Za,t),Xh.forEach(e),Jh.forEach(e),n=0;n<Pa.length;n++)i=Pa[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Pa.length&&(n=Pa[0],n.blockedOn===null);)nI(n),n.blockedOn===null&&Pa.shift()}var Qu=ia.ReactCurrentBatchConfig,iv=!0;function lW(t,e,n,i){var r=Ct,s=Qu.transition;Qu.transition=null;try{Ct=1,w_(t,e,n,i)}finally{Ct=r,Qu.transition=s}}function cW(t,e,n,i){var r=Ct,s=Qu.transition;Qu.transition=null;try{Ct=4,w_(t,e,n,i)}finally{Ct=r,Qu.transition=s}}function w_(t,e,n,i){if(iv){var r=lS(t,e,n,i);if(r===null)Tx(t,e,i,rv,n),JN(t,i);else if(oW(r,t,e,n,i))i.stopPropagation();else if(JN(t,i),e&4&&-1<sW.indexOf(t)){for(;r!==null;){var s=tm(r);if(s!==null&&ZO(s),s=lS(t,e,n,i),s===null&&Tx(t,e,i,rv,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Tx(t,e,i,null,n)}}var rv=null;function lS(t,e,n,i){if(rv=null,t=v_(i),t=uc(t),t!==null)if(e=Xc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=HO(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rv=t,null}function iI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XH()){case y_:return 1;case qO:return 4;case tv:case JH:return 16;case YO:return 536870912;default:return 16}default:return 16}}var Da=null,S_=null,s0=null;function rI(){if(s0)return s0;var t,e=S_,n=e.length,i,r="value"in Da?Da.value:Da.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return s0=r.slice(t,1<i?1-i:void 0)}function o0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ym(){return!0}function QN(){return!1}function _r(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ym:QN,this.isPropagationStopped=QN,this}return rn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ym)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ym)},persist:function(){},isPersistent:Ym}),e}var Qd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},k_=_r(Qd),em=rn({},Qd,{view:0,detail:0}),uW=_r(em),kx,_x,kf,jy=rn({},em,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:__,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kf&&(kf&&t.type==="mousemove"?(kx=t.screenX-kf.screenX,_x=t.screenY-kf.screenY):_x=kx=0,kf=t),kx)},movementY:function(t){return"movementY"in t?t.movementY:_x}}),eP=_r(jy),dW=rn({},jy,{dataTransfer:0}),fW=_r(dW),hW=rn({},em,{relatedTarget:0}),Cx=_r(hW),pW=rn({},Qd,{animationName:0,elapsedTime:0,pseudoElement:0}),mW=_r(pW),gW=rn({},Qd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vW=_r(gW),yW=rn({},Qd,{data:0}),tP=_r(yW),bW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SW(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wW[t])?!!e[t]:!1}function __(){return SW}var kW=rn({},em,{key:function(t){if(t.key){var e=bW[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=o0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xW[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:__,charCode:function(t){return t.type==="keypress"?o0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?o0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_W=_r(kW),CW=rn({},jy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nP=_r(CW),EW=rn({},em,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:__}),AW=_r(EW),NW=rn({},Qd,{propertyName:0,elapsedTime:0,pseudoElement:0}),PW=_r(NW),MW=rn({},jy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RW=_r(MW),TW=[9,13,27,32],C_=Ko&&"CompositionEvent"in window,bh=null;Ko&&"documentMode"in document&&(bh=document.documentMode);var OW=Ko&&"TextEvent"in window&&!bh,sI=Ko&&(!C_||bh&&8<bh&&11>=bh),iP=" ",rP=!1;function oI(t,e){switch(t){case"keyup":return TW.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ru=!1;function IW(t,e){switch(t){case"compositionend":return aI(e);case"keypress":return e.which!==32?null:(rP=!0,iP);case"textInput":return t=e.data,t===iP&&rP?null:t;default:return null}}function jW(t,e){if(Ru)return t==="compositionend"||!C_&&oI(t,e)?(t=rI(),s0=S_=Da=null,Ru=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sI&&e.locale!=="ko"?null:e.data;default:return null}}var LW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LW[t.type]:e==="textarea"}function lI(t,e,n,i){FO(i),e=sv(e,"onChange"),0<e.length&&(n=new k_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var xh=null,Qh=null;function DW(t){bI(t,0)}function Ly(t){var e=Iu(t);if(TO(e))return t}function $W(t,e){if(t==="change")return e}var cI=!1;if(Ko){var Ex;if(Ko){var Ax="oninput"in document;if(!Ax){var oP=document.createElement("div");oP.setAttribute("oninput","return;"),Ax=typeof oP.oninput=="function"}Ex=Ax}else Ex=!1;cI=Ex&&(!document.documentMode||9<document.documentMode)}function aP(){xh&&(xh.detachEvent("onpropertychange",uI),Qh=xh=null)}function uI(t){if(t.propertyName==="value"&&Ly(Qh)){var e=[];lI(e,Qh,t,v_(t)),VO(DW,e)}}function FW(t,e,n){t==="focusin"?(aP(),xh=e,Qh=n,xh.attachEvent("onpropertychange",uI)):t==="focusout"&&aP()}function zW(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ly(Qh)}function BW(t,e){if(t==="click")return Ly(e)}function UW(t,e){if(t==="input"||t==="change")return Ly(e)}function VW(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ys=typeof Object.is=="function"?Object.is:VW;function ep(t,e){if(ys(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Hw.call(e,r)||!ys(t[r],e[r]))return!1}return!0}function lP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cP(t,e){var n=lP(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lP(n)}}function dI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fI(){for(var t=window,e=Z0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Z0(t.document)}return e}function E_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function HW(t){var e=fI(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dI(n.ownerDocument.documentElement,n)){if(i!==null&&E_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=cP(n,s);var o=cP(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WW=Ko&&"documentMode"in document&&11>=document.documentMode,Tu=null,cS=null,wh=null,uS=!1;function uP(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uS||Tu==null||Tu!==Z0(i)||(i=Tu,"selectionStart"in i&&E_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),wh&&ep(wh,i)||(wh=i,i=sv(cS,"onSelect"),0<i.length&&(e=new k_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Tu)))}function Xm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ou={animationend:Xm("Animation","AnimationEnd"),animationiteration:Xm("Animation","AnimationIteration"),animationstart:Xm("Animation","AnimationStart"),transitionend:Xm("Transition","TransitionEnd")},Nx={},hI={};Ko&&(hI=document.createElement("div").style,"AnimationEvent"in window||(delete Ou.animationend.animation,delete Ou.animationiteration.animation,delete Ou.animationstart.animation),"TransitionEvent"in window||delete Ou.transitionend.transition);function Dy(t){if(Nx[t])return Nx[t];if(!Ou[t])return t;var e=Ou[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hI)return Nx[t]=e[n];return t}var pI=Dy("animationend"),mI=Dy("animationiteration"),gI=Dy("animationstart"),vI=Dy("transitionend"),yI=new Map,dP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Al(t,e){yI.set(t,e),Yc(e,[t])}for(var Px=0;Px<dP.length;Px++){var Mx=dP[Px],GW=Mx.toLowerCase(),KW=Mx[0].toUpperCase()+Mx.slice(1);Al(GW,"on"+KW)}Al(pI,"onAnimationEnd");Al(mI,"onAnimationIteration");Al(gI,"onAnimationStart");Al("dblclick","onDoubleClick");Al("focusin","onFocus");Al("focusout","onBlur");Al(vI,"onTransitionEnd");Cd("onMouseEnter",["mouseout","mouseover"]);Cd("onMouseLeave",["mouseout","mouseover"]);Cd("onPointerEnter",["pointerout","pointerover"]);Cd("onPointerLeave",["pointerout","pointerover"]);Yc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qW=new Set("cancel close invalid load scroll toggle".split(" ").concat(eh));function fP(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,GH(i,e,void 0,t),t.currentTarget=null}function bI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;fP(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;fP(r,a,c),s=l}}}if(ev)throw t=sS,ev=!1,sS=null,t}function Dt(t,e){var n=e[mS];n===void 0&&(n=e[mS]=new Set);var i=t+"__bubble";n.has(i)||(xI(e,t,2,!1),n.add(i))}function Rx(t,e,n){var i=0;e&&(i|=4),xI(n,t,i,e)}var Jm="_reactListening"+Math.random().toString(36).slice(2);function tp(t){if(!t[Jm]){t[Jm]=!0,AO.forEach(function(n){n!=="selectionchange"&&(qW.has(n)||Rx(n,!1,t),Rx(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jm]||(e[Jm]=!0,Rx("selectionchange",!1,e))}}function xI(t,e,n,i){switch(iI(e)){case 1:var r=lW;break;case 4:r=cW;break;default:r=w_}n=r.bind(null,e,n,t),r=void 0,!rS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Tx(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=uc(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}VO(function(){var c=s,u=v_(n),d=[];e:{var h=yI.get(t);if(h!==void 0){var p=k_,g=t;switch(t){case"keypress":if(o0(n)===0)break e;case"keydown":case"keyup":p=_W;break;case"focusin":g="focus",p=Cx;break;case"focusout":g="blur",p=Cx;break;case"beforeblur":case"afterblur":p=Cx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=eP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=fW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=AW;break;case pI:case mI:case gI:p=mW;break;case vI:p=PW;break;case"scroll":p=uW;break;case"wheel":p=RW;break;case"copy":case"cut":case"paste":p=vW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=nP}var m=(e&4)!==0,v=!m&&t==="scroll",y=m?h!==null?h+"Capture":null:h;m=[];for(var x=c,w;x!==null;){w=x;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,y!==null&&(S=Yh(x,y),S!=null&&m.push(np(x,S,w)))),v)break;x=x.return}0<m.length&&(h=new p(h,g,null,n,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==nS&&(g=n.relatedTarget||n.fromElement)&&(uc(g)||g[qo]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?uc(g):null,g!==null&&(v=Xc(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(m=eP,S="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=nP,S="onPointerLeave",y="onPointerEnter",x="pointer"),v=p==null?h:Iu(p),w=g==null?h:Iu(g),h=new m(S,x+"leave",p,n,u),h.target=v,h.relatedTarget=w,S=null,uc(u)===c&&(m=new m(y,x+"enter",g,n,u),m.target=w,m.relatedTarget=v,S=m),v=S,p&&g)t:{for(m=p,y=g,x=0,w=m;w;w=iu(w))x++;for(w=0,S=y;S;S=iu(S))w++;for(;0<x-w;)m=iu(m),x--;for(;0<w-x;)y=iu(y),w--;for(;x--;){if(m===y||y!==null&&m===y.alternate)break t;m=iu(m),y=iu(y)}m=null}else m=null;p!==null&&hP(d,h,p,m,!1),g!==null&&v!==null&&hP(d,v,g,m,!0)}}e:{if(h=c?Iu(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var _=$W;else if(sP(h))if(cI)_=UW;else{_=zW;var E=FW}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=BW);if(_&&(_=_(t,c))){lI(d,_,n,u);break e}E&&E(t,h,c),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Jw(h,"number",h.value)}switch(E=c?Iu(c):window,t){case"focusin":(sP(E)||E.contentEditable==="true")&&(Tu=E,cS=c,wh=null);break;case"focusout":wh=cS=Tu=null;break;case"mousedown":uS=!0;break;case"contextmenu":case"mouseup":case"dragend":uS=!1,uP(d,n,u);break;case"selectionchange":if(WW)break;case"keydown":case"keyup":uP(d,n,u)}var C;if(C_)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ru?oI(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(sI&&n.locale!=="ko"&&(Ru||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ru&&(C=rI()):(Da=u,S_="value"in Da?Da.value:Da.textContent,Ru=!0)),E=sv(c,N),0<E.length&&(N=new tP(N,t,null,n,u),d.push({event:N,listeners:E}),C?N.data=C:(C=aI(n),C!==null&&(N.data=C)))),(C=OW?IW(t,n):jW(t,n))&&(c=sv(c,"onBeforeInput"),0<c.length&&(u=new tP("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}bI(d,e)})}function np(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sv(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Yh(t,n),s!=null&&i.unshift(np(t,s,r)),s=Yh(t,e),s!=null&&i.push(np(t,s,r))),t=t.return}return i}function iu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hP(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Yh(n,s),l!=null&&o.unshift(np(n,l,a))):r||(l=Yh(n,s),l!=null&&o.push(np(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var YW=/\r\n?/g,XW=/\u0000|\uFFFD/g;function pP(t){return(typeof t=="string"?t:""+t).replace(YW,`
`).replace(XW,"")}function Zm(t,e,n){if(e=pP(e),pP(t)!==e&&n)throw Error(ae(425))}function ov(){}var dS=null,fS=null;function hS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pS=typeof setTimeout=="function"?setTimeout:void 0,JW=typeof clearTimeout=="function"?clearTimeout:void 0,mP=typeof Promise=="function"?Promise:void 0,ZW=typeof queueMicrotask=="function"?queueMicrotask:typeof mP<"u"?function(t){return mP.resolve(null).then(t).catch(QW)}:pS;function QW(t){setTimeout(function(){throw t})}function Ox(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Zh(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Zh(e)}function Qa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ef=Math.random().toString(36).slice(2),Hs="__reactFiber$"+ef,ip="__reactProps$"+ef,qo="__reactContainer$"+ef,mS="__reactEvents$"+ef,eG="__reactListeners$"+ef,tG="__reactHandles$"+ef;function uc(t){var e=t[Hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qo]||n[Hs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gP(t);t!==null;){if(n=t[Hs])return n;t=gP(t)}return e}t=n,n=t.parentNode}return null}function tm(t){return t=t[Hs]||t[qo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Iu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function $y(t){return t[ip]||null}var gS=[],ju=-1;function Nl(t){return{current:t}}function Bt(t){0>ju||(t.current=gS[ju],gS[ju]=null,ju--)}function Lt(t,e){ju++,gS[ju]=t.current,t.current=e}var ul={},di=Nl(ul),qi=Nl(!1),Pc=ul;function Ed(t,e){var n=t.type.contextTypes;if(!n)return ul;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Yi(t){return t=t.childContextTypes,t!=null}function av(){Bt(qi),Bt(di)}function vP(t,e,n){if(di.current!==ul)throw Error(ae(168));Lt(di,e),Lt(qi,n)}function wI(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ae(108,FH(t)||"Unknown",r));return rn({},n,i)}function lv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ul,Pc=di.current,Lt(di,t),Lt(qi,qi.current),!0}function yP(t,e,n){var i=t.stateNode;if(!i)throw Error(ae(169));n?(t=wI(t,e,Pc),i.__reactInternalMemoizedMergedChildContext=t,Bt(qi),Bt(di),Lt(di,t)):Bt(qi),Lt(qi,n)}var Ao=null,Fy=!1,Ix=!1;function SI(t){Ao===null?Ao=[t]:Ao.push(t)}function nG(t){Fy=!0,SI(t)}function Pl(){if(!Ix&&Ao!==null){Ix=!0;var t=0,e=Ct;try{var n=Ao;for(Ct=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ao=null,Fy=!1}catch(r){throw Ao!==null&&(Ao=Ao.slice(t+1)),KO(y_,Pl),r}finally{Ct=e,Ix=!1}}return null}var Lu=[],Du=0,cv=null,uv=0,Tr=[],Or=0,Mc=null,Uo=1,Vo="";function Ql(t,e){Lu[Du++]=uv,Lu[Du++]=cv,cv=t,uv=e}function kI(t,e,n){Tr[Or++]=Uo,Tr[Or++]=Vo,Tr[Or++]=Mc,Mc=t;var i=Uo;t=Vo;var r=32-gs(i)-1;i&=~(1<<r),n+=1;var s=32-gs(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Uo=1<<32-gs(e)+r|n<<r|i,Vo=s+t}else Uo=1<<s|n<<r|i,Vo=t}function A_(t){t.return!==null&&(Ql(t,1),kI(t,1,0))}function N_(t){for(;t===cv;)cv=Lu[--Du],Lu[Du]=null,uv=Lu[--Du],Lu[Du]=null;for(;t===Mc;)Mc=Tr[--Or],Tr[Or]=null,Vo=Tr[--Or],Tr[Or]=null,Uo=Tr[--Or],Tr[Or]=null}var gr=null,dr=null,Yt=!1,cs=null;function _I(t,e){var n=Dr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gr=t,dr=Qa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gr=t,dr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mc!==null?{id:Uo,overflow:Vo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,gr=t,dr=null,!0):!1;default:return!1}}function vS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yS(t){if(Yt){var e=dr;if(e){var n=e;if(!bP(t,e)){if(vS(t))throw Error(ae(418));e=Qa(n.nextSibling);var i=gr;e&&bP(t,e)?_I(i,n):(t.flags=t.flags&-4097|2,Yt=!1,gr=t)}}else{if(vS(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Yt=!1,gr=t}}}function xP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gr=t}function Qm(t){if(t!==gr)return!1;if(!Yt)return xP(t),Yt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hS(t.type,t.memoizedProps)),e&&(e=dr)){if(vS(t))throw CI(),Error(ae(418));for(;e;)_I(t,e),e=Qa(e.nextSibling)}if(xP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dr=Qa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dr=null}}else dr=gr?Qa(t.stateNode.nextSibling):null;return!0}function CI(){for(var t=dr;t;)t=Qa(t.nextSibling)}function Ad(){dr=gr=null,Yt=!1}function P_(t){cs===null?cs=[t]:cs.push(t)}var iG=ia.ReactCurrentBatchConfig;function _f(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var i=n.stateNode}if(!i)throw Error(ae(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function eg(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wP(t){var e=t._init;return e(t._payload)}function EI(t){function e(y,x){if(t){var w=y.deletions;w===null?(y.deletions=[x],y.flags|=16):w.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function i(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function r(y,x){return y=il(y,x),y.index=0,y.sibling=null,y}function s(y,x,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<x?(y.flags|=2,x):w):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,x,w,S){return x===null||x.tag!==6?(x=Bx(w,y.mode,S),x.return=y,x):(x=r(x,w),x.return=y,x)}function l(y,x,w,S){var _=w.type;return _===Mu?u(y,x,w.props.children,S,w.key):x!==null&&(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===xa&&wP(_)===x.type)?(S=r(x,w.props),S.ref=_f(y,x,w),S.return=y,S):(S=h0(w.type,w.key,w.props,null,y.mode,S),S.ref=_f(y,x,w),S.return=y,S)}function c(y,x,w,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=Ux(w,y.mode,S),x.return=y,x):(x=r(x,w.children||[]),x.return=y,x)}function u(y,x,w,S,_){return x===null||x.tag!==7?(x=bc(w,y.mode,S,_),x.return=y,x):(x=r(x,w),x.return=y,x)}function d(y,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Bx(""+x,y.mode,w),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Vm:return w=h0(x.type,x.key,x.props,null,y.mode,w),w.ref=_f(y,null,x),w.return=y,w;case Pu:return x=Ux(x,y.mode,w),x.return=y,x;case xa:var S=x._init;return d(y,S(x._payload),w)}if(Zf(x)||bf(x))return x=bc(x,y.mode,w,null),x.return=y,x;eg(y,x)}return null}function h(y,x,w,S){var _=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:a(y,x,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vm:return w.key===_?l(y,x,w,S):null;case Pu:return w.key===_?c(y,x,w,S):null;case xa:return _=w._init,h(y,x,_(w._payload),S)}if(Zf(w)||bf(w))return _!==null?null:u(y,x,w,S,null);eg(y,w)}return null}function p(y,x,w,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(w)||null,a(x,y,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Vm:return y=y.get(S.key===null?w:S.key)||null,l(x,y,S,_);case Pu:return y=y.get(S.key===null?w:S.key)||null,c(x,y,S,_);case xa:var E=S._init;return p(y,x,w,E(S._payload),_)}if(Zf(S)||bf(S))return y=y.get(w)||null,u(x,y,S,_,null);eg(x,S)}return null}function g(y,x,w,S){for(var _=null,E=null,C=x,N=x=0,M=null;C!==null&&N<w.length;N++){C.index>N?(M=C,C=null):M=C.sibling;var I=h(y,C,w[N],S);if(I===null){C===null&&(C=M);break}t&&C&&I.alternate===null&&e(y,C),x=s(I,x,N),E===null?_=I:E.sibling=I,E=I,C=M}if(N===w.length)return n(y,C),Yt&&Ql(y,N),_;if(C===null){for(;N<w.length;N++)C=d(y,w[N],S),C!==null&&(x=s(C,x,N),E===null?_=C:E.sibling=C,E=C);return Yt&&Ql(y,N),_}for(C=i(y,C);N<w.length;N++)M=p(C,y,N,w[N],S),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?N:M.key),x=s(M,x,N),E===null?_=M:E.sibling=M,E=M);return t&&C.forEach(function(O){return e(y,O)}),Yt&&Ql(y,N),_}function m(y,x,w,S){var _=bf(w);if(typeof _!="function")throw Error(ae(150));if(w=_.call(w),w==null)throw Error(ae(151));for(var E=_=null,C=x,N=x=0,M=null,I=w.next();C!==null&&!I.done;N++,I=w.next()){C.index>N?(M=C,C=null):M=C.sibling;var O=h(y,C,I.value,S);if(O===null){C===null&&(C=M);break}t&&C&&O.alternate===null&&e(y,C),x=s(O,x,N),E===null?_=O:E.sibling=O,E=O,C=M}if(I.done)return n(y,C),Yt&&Ql(y,N),_;if(C===null){for(;!I.done;N++,I=w.next())I=d(y,I.value,S),I!==null&&(x=s(I,x,N),E===null?_=I:E.sibling=I,E=I);return Yt&&Ql(y,N),_}for(C=i(y,C);!I.done;N++,I=w.next())I=p(C,y,N,I.value,S),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?N:I.key),x=s(I,x,N),E===null?_=I:E.sibling=I,E=I);return t&&C.forEach(function(T){return e(y,T)}),Yt&&Ql(y,N),_}function v(y,x,w,S){if(typeof w=="object"&&w!==null&&w.type===Mu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Vm:e:{for(var _=w.key,E=x;E!==null;){if(E.key===_){if(_=w.type,_===Mu){if(E.tag===7){n(y,E.sibling),x=r(E,w.props.children),x.return=y,y=x;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===xa&&wP(_)===E.type){n(y,E.sibling),x=r(E,w.props),x.ref=_f(y,E,w),x.return=y,y=x;break e}n(y,E);break}else e(y,E);E=E.sibling}w.type===Mu?(x=bc(w.props.children,y.mode,S,w.key),x.return=y,y=x):(S=h0(w.type,w.key,w.props,null,y.mode,S),S.ref=_f(y,x,w),S.return=y,y=S)}return o(y);case Pu:e:{for(E=w.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(y,x.sibling),x=r(x,w.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=Ux(w,y.mode,S),x.return=y,y=x}return o(y);case xa:return E=w._init,v(y,x,E(w._payload),S)}if(Zf(w))return g(y,x,w,S);if(bf(w))return m(y,x,w,S);eg(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(y,x.sibling),x=r(x,w),x.return=y,y=x):(n(y,x),x=Bx(w,y.mode,S),x.return=y,y=x),o(y)):n(y,x)}return v}var Nd=EI(!0),AI=EI(!1),dv=Nl(null),fv=null,$u=null,M_=null;function R_(){M_=$u=fv=null}function T_(t){var e=dv.current;Bt(dv),t._currentValue=e}function bS(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ed(t,e){fv=t,M_=$u=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gi=!0),t.firstContext=null)}function qr(t){var e=t._currentValue;if(M_!==t)if(t={context:t,memoizedValue:e,next:null},$u===null){if(fv===null)throw Error(ae(308));$u=t,fv.dependencies={lanes:0,firstContext:t}}else $u=$u.next=t;return e}var dc=null;function O_(t){dc===null?dc=[t]:dc.push(t)}function NI(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,O_(e)):(n.next=r.next,r.next=n),e.interleaved=n,Yo(t,i)}function Yo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wa=!1;function I_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function PI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ho(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function el(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,vt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Yo(t,n)}return r=i.interleaved,r===null?(e.next=e,O_(i)):(e.next=r.next,r.next=e),i.interleaved=e,Yo(t,n)}function a0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,b_(t,n)}}function SP(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hv(t,e,n,i){var r=t.updateQueue;wa=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,p=a.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(h=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){d=g.call(p,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,h=typeof g=="function"?g.call(p,d,h):g,h==null)break e;d=rn({},d,h);break e;case 2:wa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Tc|=o,t.lanes=o,t.memoizedState=d}}function kP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ae(191,r));r.call(i)}}}var nm={},so=Nl(nm),rp=Nl(nm),sp=Nl(nm);function fc(t){if(t===nm)throw Error(ae(174));return t}function j_(t,e){switch(Lt(sp,e),Lt(rp,t),Lt(so,nm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qw(e,t)}Bt(so),Lt(so,e)}function Pd(){Bt(so),Bt(rp),Bt(sp)}function MI(t){fc(sp.current);var e=fc(so.current),n=Qw(e,t.type);e!==n&&(Lt(rp,t),Lt(so,n))}function L_(t){rp.current===t&&(Bt(so),Bt(rp))}var Zt=Nl(0);function pv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jx=[];function D_(){for(var t=0;t<jx.length;t++)jx[t]._workInProgressVersionPrimary=null;jx.length=0}var l0=ia.ReactCurrentDispatcher,Lx=ia.ReactCurrentBatchConfig,Rc=0,nn=null,wn=null,Rn=null,mv=!1,Sh=!1,op=0,rG=0;function ii(){throw Error(ae(321))}function $_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ys(t[n],e[n]))return!1;return!0}function F_(t,e,n,i,r,s){if(Rc=s,nn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,l0.current=t===null||t.memoizedState===null?lG:cG,t=n(i,r),Sh){s=0;do{if(Sh=!1,op=0,25<=s)throw Error(ae(301));s+=1,Rn=wn=null,e.updateQueue=null,l0.current=uG,t=n(i,r)}while(Sh)}if(l0.current=gv,e=wn!==null&&wn.next!==null,Rc=0,Rn=wn=nn=null,mv=!1,e)throw Error(ae(300));return t}function z_(){var t=op!==0;return op=0,t}function Is(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?nn.memoizedState=Rn=t:Rn=Rn.next=t,Rn}function Yr(){if(wn===null){var t=nn.alternate;t=t!==null?t.memoizedState:null}else t=wn.next;var e=Rn===null?nn.memoizedState:Rn.next;if(e!==null)Rn=e,wn=t;else{if(t===null)throw Error(ae(310));wn=t,t={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},Rn===null?nn.memoizedState=Rn=t:Rn=Rn.next=t}return Rn}function ap(t,e){return typeof e=="function"?e(t):e}function Dx(t){var e=Yr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=wn,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Rc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,nn.lanes|=u,Tc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,ys(i,e.memoizedState)||(Gi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,nn.lanes|=s,Tc|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $x(t){var e=Yr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);ys(s,e.memoizedState)||(Gi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function RI(){}function TI(t,e){var n=nn,i=Yr(),r=e(),s=!ys(i.memoizedState,r);if(s&&(i.memoizedState=r,Gi=!0),i=i.queue,B_(jI.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Rn!==null&&Rn.memoizedState.tag&1){if(n.flags|=2048,lp(9,II.bind(null,n,i,r,e),void 0,null),On===null)throw Error(ae(349));Rc&30||OI(n,e,r)}return r}function OI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nn.updateQueue,e===null?(e={lastEffect:null,stores:null},nn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function II(t,e,n,i){e.value=n,e.getSnapshot=i,LI(e)&&DI(t)}function jI(t,e,n){return n(function(){LI(e)&&DI(t)})}function LI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ys(t,n)}catch{return!0}}function DI(t){var e=Yo(t,1);e!==null&&vs(e,t,1,-1)}function _P(t){var e=Is();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ap,lastRenderedState:t},e.queue=t,t=t.dispatch=aG.bind(null,nn,t),[e.memoizedState,t]}function lp(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=nn.updateQueue,e===null?(e={lastEffect:null,stores:null},nn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function $I(){return Yr().memoizedState}function c0(t,e,n,i){var r=Is();nn.flags|=t,r.memoizedState=lp(1|e,n,void 0,i===void 0?null:i)}function zy(t,e,n,i){var r=Yr();i=i===void 0?null:i;var s=void 0;if(wn!==null){var o=wn.memoizedState;if(s=o.destroy,i!==null&&$_(i,o.deps)){r.memoizedState=lp(e,n,s,i);return}}nn.flags|=t,r.memoizedState=lp(1|e,n,s,i)}function CP(t,e){return c0(8390656,8,t,e)}function B_(t,e){return zy(2048,8,t,e)}function FI(t,e){return zy(4,2,t,e)}function zI(t,e){return zy(4,4,t,e)}function BI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function UI(t,e,n){return n=n!=null?n.concat([t]):null,zy(4,4,BI.bind(null,e,t),n)}function U_(){}function VI(t,e){var n=Yr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&$_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function HI(t,e){var n=Yr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&$_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function WI(t,e,n){return Rc&21?(ys(n,e)||(n=XO(),nn.lanes|=n,Tc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gi=!0),t.memoizedState=n)}function sG(t,e){var n=Ct;Ct=n!==0&&4>n?n:4,t(!0);var i=Lx.transition;Lx.transition={};try{t(!1),e()}finally{Ct=n,Lx.transition=i}}function GI(){return Yr().memoizedState}function oG(t,e,n){var i=nl(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},KI(t))qI(e,n);else if(n=NI(t,e,n,i),n!==null){var r=xi();vs(n,t,i,r),YI(n,e,i)}}function aG(t,e,n){var i=nl(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(KI(t))qI(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ys(a,o)){var l=e.interleaved;l===null?(r.next=r,O_(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=NI(t,e,r,i),n!==null&&(r=xi(),vs(n,t,i,r),YI(n,e,i))}}function KI(t){var e=t.alternate;return t===nn||e!==null&&e===nn}function qI(t,e){Sh=mv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function YI(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,b_(t,n)}}var gv={readContext:qr,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useInsertionEffect:ii,useLayoutEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useMutableSource:ii,useSyncExternalStore:ii,useId:ii,unstable_isNewReconciler:!1},lG={readContext:qr,useCallback:function(t,e){return Is().memoizedState=[t,e===void 0?null:e],t},useContext:qr,useEffect:CP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,c0(4194308,4,BI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return c0(4194308,4,t,e)},useInsertionEffect:function(t,e){return c0(4,2,t,e)},useMemo:function(t,e){var n=Is();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Is();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=oG.bind(null,nn,t),[i.memoizedState,t]},useRef:function(t){var e=Is();return t={current:t},e.memoizedState=t},useState:_P,useDebugValue:U_,useDeferredValue:function(t){return Is().memoizedState=t},useTransition:function(){var t=_P(!1),e=t[0];return t=sG.bind(null,t[1]),Is().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=nn,r=Is();if(Yt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),On===null)throw Error(ae(349));Rc&30||OI(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,CP(jI.bind(null,i,s,t),[t]),i.flags|=2048,lp(9,II.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Is(),e=On.identifierPrefix;if(Yt){var n=Vo,i=Uo;n=(i&~(1<<32-gs(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=op++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cG={readContext:qr,useCallback:VI,useContext:qr,useEffect:B_,useImperativeHandle:UI,useInsertionEffect:FI,useLayoutEffect:zI,useMemo:HI,useReducer:Dx,useRef:$I,useState:function(){return Dx(ap)},useDebugValue:U_,useDeferredValue:function(t){var e=Yr();return WI(e,wn.memoizedState,t)},useTransition:function(){var t=Dx(ap)[0],e=Yr().memoizedState;return[t,e]},useMutableSource:RI,useSyncExternalStore:TI,useId:GI,unstable_isNewReconciler:!1},uG={readContext:qr,useCallback:VI,useContext:qr,useEffect:B_,useImperativeHandle:UI,useInsertionEffect:FI,useLayoutEffect:zI,useMemo:HI,useReducer:$x,useRef:$I,useState:function(){return $x(ap)},useDebugValue:U_,useDeferredValue:function(t){var e=Yr();return wn===null?e.memoizedState=t:WI(e,wn.memoizedState,t)},useTransition:function(){var t=$x(ap)[0],e=Yr().memoizedState;return[t,e]},useMutableSource:RI,useSyncExternalStore:TI,useId:GI,unstable_isNewReconciler:!1};function rs(t,e){if(t&&t.defaultProps){e=rn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function xS(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:rn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var By={isMounted:function(t){return(t=t._reactInternals)?Xc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=xi(),r=nl(t),s=Ho(i,r);s.payload=e,n!=null&&(s.callback=n),e=el(t,s,r),e!==null&&(vs(e,t,r,i),a0(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=xi(),r=nl(t),s=Ho(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=el(t,s,r),e!==null&&(vs(e,t,r,i),a0(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xi(),i=nl(t),r=Ho(n,i);r.tag=2,e!=null&&(r.callback=e),e=el(t,r,i),e!==null&&(vs(e,t,i,n),a0(e,t,i))}};function EP(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ep(n,i)||!ep(r,s):!0}function XI(t,e,n){var i=!1,r=ul,s=e.contextType;return typeof s=="object"&&s!==null?s=qr(s):(r=Yi(e)?Pc:di.current,i=e.contextTypes,s=(i=i!=null)?Ed(t,r):ul),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=By,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function AP(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&By.enqueueReplaceState(e,e.state,null)}function wS(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},I_(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=qr(s):(s=Yi(e)?Pc:di.current,r.context=Ed(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(xS(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&By.enqueueReplaceState(r,r.state,null),hv(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Md(t,e){try{var n="",i=e;do n+=$H(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Fx(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function SS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dG=typeof WeakMap=="function"?WeakMap:Map;function JI(t,e,n){n=Ho(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){yv||(yv=!0,TS=i),SS(t,e)},n}function ZI(t,e,n){n=Ho(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){SS(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){SS(t,e),typeof i!="function"&&(tl===null?tl=new Set([this]):tl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function NP(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new dG;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=CG.bind(null,t,e,n),e.then(t,t))}function PP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function MP(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ho(-1,1),e.tag=2,el(n,e,1))),n.lanes|=1),t)}var fG=ia.ReactCurrentOwner,Gi=!1;function yi(t,e,n,i){e.child=t===null?AI(e,null,n,i):Nd(e,t.child,n,i)}function RP(t,e,n,i,r){n=n.render;var s=e.ref;return ed(e,r),i=F_(t,e,n,i,s,r),n=z_(),t!==null&&!Gi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Xo(t,e,r)):(Yt&&n&&A_(e),e.flags|=1,yi(t,e,i,r),e.child)}function TP(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!X_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,QI(t,e,s,i,r)):(t=h0(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ep,n(o,i)&&t.ref===e.ref)return Xo(t,e,r)}return e.flags|=1,t=il(s,i),t.ref=e.ref,t.return=e,e.child=t}function QI(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(ep(s,i)&&t.ref===e.ref)if(Gi=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Gi=!0);else return e.lanes=t.lanes,Xo(t,e,r)}return kS(t,e,n,i,r)}function ej(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(zu,sr),sr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Lt(zu,sr),sr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Lt(zu,sr),sr|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Lt(zu,sr),sr|=i;return yi(t,e,r,n),e.child}function tj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kS(t,e,n,i,r){var s=Yi(n)?Pc:di.current;return s=Ed(e,s),ed(e,r),n=F_(t,e,n,i,s,r),i=z_(),t!==null&&!Gi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Xo(t,e,r)):(Yt&&i&&A_(e),e.flags|=1,yi(t,e,n,r),e.child)}function OP(t,e,n,i,r){if(Yi(n)){var s=!0;lv(e)}else s=!1;if(ed(e,r),e.stateNode===null)u0(t,e),XI(e,n,i),wS(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=qr(c):(c=Yi(n)?Pc:di.current,c=Ed(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&AP(e,o,i,c),wa=!1;var h=e.memoizedState;o.state=h,hv(e,i,o,r),l=e.memoizedState,a!==i||h!==l||qi.current||wa?(typeof u=="function"&&(xS(e,n,u,i),l=e.memoizedState),(a=wa||EP(e,n,a,i,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,PI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:rs(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=qr(l):(l=Yi(n)?Pc:di.current,l=Ed(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&AP(e,o,i,l),wa=!1,h=e.memoizedState,o.state=h,hv(e,i,o,r);var g=e.memoizedState;a!==d||h!==g||qi.current||wa?(typeof p=="function"&&(xS(e,n,p,i),g=e.memoizedState),(c=wa||EP(e,n,c,i,h,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return _S(t,e,n,i,s,r)}function _S(t,e,n,i,r,s){tj(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&yP(e,n,!1),Xo(t,e,s);i=e.stateNode,fG.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Nd(e,t.child,null,s),e.child=Nd(e,null,a,s)):yi(t,e,a,s),e.memoizedState=i.state,r&&yP(e,n,!0),e.child}function nj(t){var e=t.stateNode;e.pendingContext?vP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vP(t,e.context,!1),j_(t,e.containerInfo)}function IP(t,e,n,i,r){return Ad(),P_(r),e.flags|=256,yi(t,e,n,i),e.child}var CS={dehydrated:null,treeContext:null,retryLane:0};function ES(t){return{baseLanes:t,cachePool:null,transitions:null}}function ij(t,e,n){var i=e.pendingProps,r=Zt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Lt(Zt,r&1),t===null)return yS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Hy(o,i,0,null),t=bc(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ES(n),e.memoizedState=CS,t):V_(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return hG(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=il(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=il(a,s):(s=bc(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?ES(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=CS,i}return s=t.child,t=s.sibling,i=il(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function V_(t,e){return e=Hy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function tg(t,e,n,i){return i!==null&&P_(i),Nd(e,t.child,null,n),t=V_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hG(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Fx(Error(ae(422))),tg(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Hy({mode:"visible",children:i.children},r,0,null),s=bc(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Nd(e,t.child,null,o),e.child.memoizedState=ES(o),e.memoizedState=CS,s);if(!(e.mode&1))return tg(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ae(419)),i=Fx(s,i,void 0),tg(t,e,o,i)}if(a=(o&t.childLanes)!==0,Gi||a){if(i=On,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Yo(t,r),vs(i,t,r,-1))}return Y_(),i=Fx(Error(ae(421))),tg(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=EG.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,dr=Qa(r.nextSibling),gr=e,Yt=!0,cs=null,t!==null&&(Tr[Or++]=Uo,Tr[Or++]=Vo,Tr[Or++]=Mc,Uo=t.id,Vo=t.overflow,Mc=e),e=V_(e,i.children),e.flags|=4096,e)}function jP(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),bS(t.return,e,n)}function zx(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function rj(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(yi(t,e,i.children,n),i=Zt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jP(t,n,e);else if(t.tag===19)jP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Lt(Zt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&pv(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),zx(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&pv(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}zx(e,!0,n,null,s);break;case"together":zx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function u0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Tc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=il(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=il(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pG(t,e,n){switch(e.tag){case 3:nj(e),Ad();break;case 5:MI(e);break;case 1:Yi(e.type)&&lv(e);break;case 4:j_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Lt(dv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Lt(Zt,Zt.current&1),e.flags|=128,null):n&e.child.childLanes?ij(t,e,n):(Lt(Zt,Zt.current&1),t=Xo(t,e,n),t!==null?t.sibling:null);Lt(Zt,Zt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return rj(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Lt(Zt,Zt.current),i)break;return null;case 22:case 23:return e.lanes=0,ej(t,e,n)}return Xo(t,e,n)}var sj,AS,oj,aj;sj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};AS=function(){};oj=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,fc(so.current);var s=null;switch(n){case"input":r=Yw(t,r),i=Yw(t,i),s=[];break;case"select":r=rn({},r,{value:void 0}),i=rn({},i,{value:void 0}),s=[];break;case"textarea":r=Zw(t,r),i=Zw(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=ov)}eS(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Kh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Kh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Dt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};aj=function(t,e,n,i){n!==i&&(e.flags|=4)};function Cf(t,e){if(!Yt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ri(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function mG(t,e,n){var i=e.pendingProps;switch(N_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(e),null;case 1:return Yi(e.type)&&av(),ri(e),null;case 3:return i=e.stateNode,Pd(),Bt(qi),Bt(di),D_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Qm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cs!==null&&(jS(cs),cs=null))),AS(t,e),ri(e),null;case 5:L_(e);var r=fc(sp.current);if(n=e.type,t!==null&&e.stateNode!=null)oj(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ae(166));return ri(e),null}if(t=fc(so.current),Qm(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Hs]=e,i[ip]=s,t=(e.mode&1)!==0,n){case"dialog":Dt("cancel",i),Dt("close",i);break;case"iframe":case"object":case"embed":Dt("load",i);break;case"video":case"audio":for(r=0;r<eh.length;r++)Dt(eh[r],i);break;case"source":Dt("error",i);break;case"img":case"image":case"link":Dt("error",i),Dt("load",i);break;case"details":Dt("toggle",i);break;case"input":HN(i,s),Dt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Dt("invalid",i);break;case"textarea":GN(i,s),Dt("invalid",i)}eS(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Zm(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Zm(i.textContent,a,t),r=["children",""+a]):Kh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Dt("scroll",i)}switch(n){case"input":Hm(i),WN(i,s,!0);break;case"textarea":Hm(i),KN(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=ov)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jO(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Hs]=e,t[ip]=i,sj(t,e,!1,!1),e.stateNode=t;e:{switch(o=tS(n,i),n){case"dialog":Dt("cancel",t),Dt("close",t),r=i;break;case"iframe":case"object":case"embed":Dt("load",t),r=i;break;case"video":case"audio":for(r=0;r<eh.length;r++)Dt(eh[r],t);r=i;break;case"source":Dt("error",t),r=i;break;case"img":case"image":case"link":Dt("error",t),Dt("load",t),r=i;break;case"details":Dt("toggle",t),r=i;break;case"input":HN(t,i),r=Yw(t,i),Dt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=rn({},i,{value:void 0}),Dt("invalid",t);break;case"textarea":GN(t,i),r=Zw(t,i),Dt("invalid",t);break;default:r=i}eS(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?$O(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&LO(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&qh(t,l):typeof l=="number"&&qh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Kh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Dt("scroll",t):l!=null&&h_(t,s,l,o))}switch(n){case"input":Hm(t),WN(t,i,!1);break;case"textarea":Hm(t),KN(t);break;case"option":i.value!=null&&t.setAttribute("value",""+cl(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Xu(t,!!i.multiple,s,!1):i.defaultValue!=null&&Xu(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=ov)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ri(e),null;case 6:if(t&&e.stateNode!=null)aj(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ae(166));if(n=fc(sp.current),fc(so.current),Qm(e)){if(i=e.stateNode,n=e.memoizedProps,i[Hs]=e,(s=i.nodeValue!==n)&&(t=gr,t!==null))switch(t.tag){case 3:Zm(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zm(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Hs]=e,e.stateNode=i}return ri(e),null;case 13:if(Bt(Zt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Yt&&dr!==null&&e.mode&1&&!(e.flags&128))CI(),Ad(),e.flags|=98560,s=!1;else if(s=Qm(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[Hs]=e}else Ad(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ri(e),s=!1}else cs!==null&&(jS(cs),cs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Zt.current&1?En===0&&(En=3):Y_())),e.updateQueue!==null&&(e.flags|=4),ri(e),null);case 4:return Pd(),AS(t,e),t===null&&tp(e.stateNode.containerInfo),ri(e),null;case 10:return T_(e.type._context),ri(e),null;case 17:return Yi(e.type)&&av(),ri(e),null;case 19:if(Bt(Zt),s=e.memoizedState,s===null)return ri(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Cf(s,!1);else{if(En!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pv(t),o!==null){for(e.flags|=128,Cf(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Lt(Zt,Zt.current&1|2),e.child}t=t.sibling}s.tail!==null&&fn()>Rd&&(e.flags|=128,i=!0,Cf(s,!1),e.lanes=4194304)}else{if(!i)if(t=pv(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Cf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Yt)return ri(e),null}else 2*fn()-s.renderingStartTime>Rd&&n!==1073741824&&(e.flags|=128,i=!0,Cf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=fn(),e.sibling=null,n=Zt.current,Lt(Zt,i?n&1|2:n&1),e):(ri(e),null);case 22:case 23:return q_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?sr&1073741824&&(ri(e),e.subtreeFlags&6&&(e.flags|=8192)):ri(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function gG(t,e){switch(N_(e),e.tag){case 1:return Yi(e.type)&&av(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pd(),Bt(qi),Bt(di),D_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return L_(e),null;case 13:if(Bt(Zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));Ad()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Bt(Zt),null;case 4:return Pd(),null;case 10:return T_(e.type._context),null;case 22:case 23:return q_(),null;case 24:return null;default:return null}}var ng=!1,li=!1,vG=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function Fu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){on(t,e,i)}else n.current=null}function NS(t,e,n){try{n()}catch(i){on(t,e,i)}}var LP=!1;function yG(t,e){if(dS=iv,t=fI(),E_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===t)break t;if(h===n&&++c===r&&(a=o),h===s&&++u===i&&(l=o),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(fS={focusedElem:t,selectionRange:n},iv=!1,Ne=e;Ne!==null;)if(e=Ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ne=t;else for(;Ne!==null;){e=Ne;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:rs(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(S){on(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Ne=t;break}Ne=e.return}return g=LP,LP=!1,g}function kh(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&NS(e,n,s)}r=r.next}while(r!==i)}}function Uy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function PS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lj(t){var e=t.alternate;e!==null&&(t.alternate=null,lj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hs],delete e[ip],delete e[mS],delete e[eG],delete e[tG])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cj(t){return t.tag===5||t.tag===3||t.tag===4}function DP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function MS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ov));else if(i!==4&&(t=t.child,t!==null))for(MS(t,e,n),t=t.sibling;t!==null;)MS(t,e,n),t=t.sibling}function RS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(RS(t,e,n),t=t.sibling;t!==null;)RS(t,e,n),t=t.sibling}var zn=null,ls=!1;function ha(t,e,n){for(n=n.child;n!==null;)uj(t,e,n),n=n.sibling}function uj(t,e,n){if(ro&&typeof ro.onCommitFiberUnmount=="function")try{ro.onCommitFiberUnmount(Iy,n)}catch{}switch(n.tag){case 5:li||Fu(n,e);case 6:var i=zn,r=ls;zn=null,ha(t,e,n),zn=i,ls=r,zn!==null&&(ls?(t=zn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zn.removeChild(n.stateNode));break;case 18:zn!==null&&(ls?(t=zn,n=n.stateNode,t.nodeType===8?Ox(t.parentNode,n):t.nodeType===1&&Ox(t,n),Zh(t)):Ox(zn,n.stateNode));break;case 4:i=zn,r=ls,zn=n.stateNode.containerInfo,ls=!0,ha(t,e,n),zn=i,ls=r;break;case 0:case 11:case 14:case 15:if(!li&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&NS(n,e,o),r=r.next}while(r!==i)}ha(t,e,n);break;case 1:if(!li&&(Fu(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){on(n,e,a)}ha(t,e,n);break;case 21:ha(t,e,n);break;case 22:n.mode&1?(li=(i=li)||n.memoizedState!==null,ha(t,e,n),li=i):ha(t,e,n);break;default:ha(t,e,n)}}function $P(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vG),e.forEach(function(i){var r=AG.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function es(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:zn=a.stateNode,ls=!1;break e;case 3:zn=a.stateNode.containerInfo,ls=!0;break e;case 4:zn=a.stateNode.containerInfo,ls=!0;break e}a=a.return}if(zn===null)throw Error(ae(160));uj(s,o,r),zn=null,ls=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){on(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dj(e,t),e=e.sibling}function dj(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(es(e,t),As(t),i&4){try{kh(3,t,t.return),Uy(3,t)}catch(m){on(t,t.return,m)}try{kh(5,t,t.return)}catch(m){on(t,t.return,m)}}break;case 1:es(e,t),As(t),i&512&&n!==null&&Fu(n,n.return);break;case 5:if(es(e,t),As(t),i&512&&n!==null&&Fu(n,n.return),t.flags&32){var r=t.stateNode;try{qh(r,"")}catch(m){on(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&OO(r,s),tS(a,o);var c=tS(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?$O(r,d):u==="dangerouslySetInnerHTML"?LO(r,d):u==="children"?qh(r,d):h_(r,u,d,c)}switch(a){case"input":Xw(r,s);break;case"textarea":IO(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Xu(r,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?Xu(r,!!s.multiple,s.defaultValue,!0):Xu(r,!!s.multiple,s.multiple?[]:"",!1))}r[ip]=s}catch(m){on(t,t.return,m)}}break;case 6:if(es(e,t),As(t),i&4){if(t.stateNode===null)throw Error(ae(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){on(t,t.return,m)}}break;case 3:if(es(e,t),As(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Zh(e.containerInfo)}catch(m){on(t,t.return,m)}break;case 4:es(e,t),As(t);break;case 13:es(e,t),As(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(G_=fn())),i&4&&$P(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(li=(c=li)||u,es(e,t),li=c):es(e,t),As(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ne=t,u=t.child;u!==null;){for(d=Ne=u;Ne!==null;){switch(h=Ne,p=h.child,h.tag){case 0:case 11:case 14:case 15:kh(4,h,h.return);break;case 1:Fu(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){on(i,n,m)}}break;case 5:Fu(h,h.return);break;case 22:if(h.memoizedState!==null){zP(d);continue}}p!==null?(p.return=h,Ne=p):zP(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=DO("display",o))}catch(m){on(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){on(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:es(e,t),As(t),i&4&&$P(t);break;case 21:break;default:es(e,t),As(t)}}function As(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cj(n)){var i=n;break e}n=n.return}throw Error(ae(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(qh(r,""),i.flags&=-33);var s=DP(t);RS(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=DP(t);MS(t,a,o);break;default:throw Error(ae(161))}}catch(l){on(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bG(t,e,n){Ne=t,fj(t)}function fj(t,e,n){for(var i=(t.mode&1)!==0;Ne!==null;){var r=Ne,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||ng;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||li;a=ng;var c=li;if(ng=o,(li=l)&&!c)for(Ne=r;Ne!==null;)o=Ne,l=o.child,o.tag===22&&o.memoizedState!==null?BP(r):l!==null?(l.return=o,Ne=l):BP(r);for(;s!==null;)Ne=s,fj(s),s=s.sibling;Ne=r,ng=a,li=c}FP(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ne=s):FP(t)}}function FP(t){for(;Ne!==null;){var e=Ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:li||Uy(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!li)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:rs(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&kP(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kP(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Zh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}li||e.flags&512&&PS(e)}catch(h){on(e,e.return,h)}}if(e===t){Ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function zP(t){for(;Ne!==null;){var e=Ne;if(e===t){Ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function BP(t){for(;Ne!==null;){var e=Ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Uy(4,e)}catch(l){on(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){on(e,r,l)}}var s=e.return;try{PS(e)}catch(l){on(e,s,l)}break;case 5:var o=e.return;try{PS(e)}catch(l){on(e,o,l)}}}catch(l){on(e,e.return,l)}if(e===t){Ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ne=a;break}Ne=e.return}}var xG=Math.ceil,vv=ia.ReactCurrentDispatcher,H_=ia.ReactCurrentOwner,Vr=ia.ReactCurrentBatchConfig,vt=0,On=null,yn=null,Zn=0,sr=0,zu=Nl(0),En=0,cp=null,Tc=0,Vy=0,W_=0,_h=null,Bi=null,G_=0,Rd=1/0,ko=null,yv=!1,TS=null,tl=null,ig=!1,$a=null,bv=0,Ch=0,OS=null,d0=-1,f0=0;function xi(){return vt&6?fn():d0!==-1?d0:d0=fn()}function nl(t){return t.mode&1?vt&2&&Zn!==0?Zn&-Zn:iG.transition!==null?(f0===0&&(f0=XO()),f0):(t=Ct,t!==0||(t=window.event,t=t===void 0?16:iI(t.type)),t):1}function vs(t,e,n,i){if(50<Ch)throw Ch=0,OS=null,Error(ae(185));Qp(t,n,i),(!(vt&2)||t!==On)&&(t===On&&(!(vt&2)&&(Vy|=n),En===4&&Ma(t,Zn)),Xi(t,i),n===1&&vt===0&&!(e.mode&1)&&(Rd=fn()+500,Fy&&Pl()))}function Xi(t,e){var n=t.callbackNode;iW(t,e);var i=nv(t,t===On?Zn:0);if(i===0)n!==null&&XN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&XN(n),e===1)t.tag===0?nG(UP.bind(null,t)):SI(UP.bind(null,t)),ZW(function(){!(vt&6)&&Pl()}),n=null;else{switch(JO(i)){case 1:n=y_;break;case 4:n=qO;break;case 16:n=tv;break;case 536870912:n=YO;break;default:n=tv}n=xj(n,hj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hj(t,e){if(d0=-1,f0=0,vt&6)throw Error(ae(327));var n=t.callbackNode;if(td()&&t.callbackNode!==n)return null;var i=nv(t,t===On?Zn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=xv(t,i);else{e=i;var r=vt;vt|=2;var s=mj();(On!==t||Zn!==e)&&(ko=null,Rd=fn()+500,yc(t,e));do try{kG();break}catch(a){pj(t,a)}while(!0);R_(),vv.current=s,vt=r,yn!==null?e=0:(On=null,Zn=0,e=En)}if(e!==0){if(e===2&&(r=oS(t),r!==0&&(i=r,e=IS(t,r))),e===1)throw n=cp,yc(t,0),Ma(t,i),Xi(t,fn()),n;if(e===6)Ma(t,i);else{if(r=t.current.alternate,!(i&30)&&!wG(r)&&(e=xv(t,i),e===2&&(s=oS(t),s!==0&&(i=s,e=IS(t,s))),e===1))throw n=cp,yc(t,0),Ma(t,i),Xi(t,fn()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ae(345));case 2:ec(t,Bi,ko);break;case 3:if(Ma(t,i),(i&130023424)===i&&(e=G_+500-fn(),10<e)){if(nv(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){xi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=pS(ec.bind(null,t,Bi,ko),e);break}ec(t,Bi,ko);break;case 4:if(Ma(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-gs(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=fn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*xG(i/1960))-i,10<i){t.timeoutHandle=pS(ec.bind(null,t,Bi,ko),i);break}ec(t,Bi,ko);break;case 5:ec(t,Bi,ko);break;default:throw Error(ae(329))}}}return Xi(t,fn()),t.callbackNode===n?hj.bind(null,t):null}function IS(t,e){var n=_h;return t.current.memoizedState.isDehydrated&&(yc(t,e).flags|=256),t=xv(t,e),t!==2&&(e=Bi,Bi=n,e!==null&&jS(e)),t}function jS(t){Bi===null?Bi=t:Bi.push.apply(Bi,t)}function wG(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ys(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ma(t,e){for(e&=~W_,e&=~Vy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gs(e),i=1<<n;t[n]=-1,e&=~i}}function UP(t){if(vt&6)throw Error(ae(327));td();var e=nv(t,0);if(!(e&1))return Xi(t,fn()),null;var n=xv(t,e);if(t.tag!==0&&n===2){var i=oS(t);i!==0&&(e=i,n=IS(t,i))}if(n===1)throw n=cp,yc(t,0),Ma(t,e),Xi(t,fn()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ec(t,Bi,ko),Xi(t,fn()),null}function K_(t,e){var n=vt;vt|=1;try{return t(e)}finally{vt=n,vt===0&&(Rd=fn()+500,Fy&&Pl())}}function Oc(t){$a!==null&&$a.tag===0&&!(vt&6)&&td();var e=vt;vt|=1;var n=Vr.transition,i=Ct;try{if(Vr.transition=null,Ct=1,t)return t()}finally{Ct=i,Vr.transition=n,vt=e,!(vt&6)&&Pl()}}function q_(){sr=zu.current,Bt(zu)}function yc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,JW(n)),yn!==null)for(n=yn.return;n!==null;){var i=n;switch(N_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&av();break;case 3:Pd(),Bt(qi),Bt(di),D_();break;case 5:L_(i);break;case 4:Pd();break;case 13:Bt(Zt);break;case 19:Bt(Zt);break;case 10:T_(i.type._context);break;case 22:case 23:q_()}n=n.return}if(On=t,yn=t=il(t.current,null),Zn=sr=e,En=0,cp=null,W_=Vy=Tc=0,Bi=_h=null,dc!==null){for(e=0;e<dc.length;e++)if(n=dc[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}dc=null}return t}function pj(t,e){do{var n=yn;try{if(R_(),l0.current=gv,mv){for(var i=nn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}mv=!1}if(Rc=0,Rn=wn=nn=null,Sh=!1,op=0,H_.current=null,n===null||n.return===null){En=1,cp=e,yn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Zn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=PP(o);if(p!==null){p.flags&=-257,MP(p,o,a,s,e),p.mode&1&&NP(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){NP(s,c,e),Y_();break e}l=Error(ae(426))}}else if(Yt&&a.mode&1){var v=PP(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),MP(v,o,a,s,e),P_(Md(l,a));break e}}s=l=Md(l,a),En!==4&&(En=2),_h===null?_h=[s]:_h.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=JI(s,l,e);SP(s,y);break e;case 1:a=l;var x=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(tl===null||!tl.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=ZI(s,a,e);SP(s,S);break e}}s=s.return}while(s!==null)}vj(n)}catch(_){e=_,yn===n&&n!==null&&(yn=n=n.return);continue}break}while(!0)}function mj(){var t=vv.current;return vv.current=gv,t===null?gv:t}function Y_(){(En===0||En===3||En===2)&&(En=4),On===null||!(Tc&268435455)&&!(Vy&268435455)||Ma(On,Zn)}function xv(t,e){var n=vt;vt|=2;var i=mj();(On!==t||Zn!==e)&&(ko=null,yc(t,e));do try{SG();break}catch(r){pj(t,r)}while(!0);if(R_(),vt=n,vv.current=i,yn!==null)throw Error(ae(261));return On=null,Zn=0,En}function SG(){for(;yn!==null;)gj(yn)}function kG(){for(;yn!==null&&!qH();)gj(yn)}function gj(t){var e=bj(t.alternate,t,sr);t.memoizedProps=t.pendingProps,e===null?vj(t):yn=e,H_.current=null}function vj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gG(n,e),n!==null){n.flags&=32767,yn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{En=6,yn=null;return}}else if(n=mG(n,e,sr),n!==null){yn=n;return}if(e=e.sibling,e!==null){yn=e;return}yn=e=t}while(e!==null);En===0&&(En=5)}function ec(t,e,n){var i=Ct,r=Vr.transition;try{Vr.transition=null,Ct=1,_G(t,e,n,i)}finally{Vr.transition=r,Ct=i}return null}function _G(t,e,n,i){do td();while($a!==null);if(vt&6)throw Error(ae(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(rW(t,s),t===On&&(yn=On=null,Zn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ig||(ig=!0,xj(tv,function(){return td(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Vr.transition,Vr.transition=null;var o=Ct;Ct=1;var a=vt;vt|=4,H_.current=null,yG(t,n),dj(n,t),HW(fS),iv=!!dS,fS=dS=null,t.current=n,bG(n),YH(),vt=a,Ct=o,Vr.transition=s}else t.current=n;if(ig&&(ig=!1,$a=t,bv=r),s=t.pendingLanes,s===0&&(tl=null),ZH(n.stateNode),Xi(t,fn()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(yv)throw yv=!1,t=TS,TS=null,t;return bv&1&&t.tag!==0&&td(),s=t.pendingLanes,s&1?t===OS?Ch++:(Ch=0,OS=t):Ch=0,Pl(),null}function td(){if($a!==null){var t=JO(bv),e=Vr.transition,n=Ct;try{if(Vr.transition=null,Ct=16>t?16:t,$a===null)var i=!1;else{if(t=$a,$a=null,bv=0,vt&6)throw Error(ae(331));var r=vt;for(vt|=4,Ne=t.current;Ne!==null;){var s=Ne,o=s.child;if(Ne.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ne=c;Ne!==null;){var u=Ne;switch(u.tag){case 0:case 11:case 15:kh(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ne=d;else for(;Ne!==null;){u=Ne;var h=u.sibling,p=u.return;if(lj(u),u===c){Ne=null;break}if(h!==null){h.return=p,Ne=h;break}Ne=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}Ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ne=o;else e:for(;Ne!==null;){if(s=Ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:kh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Ne=y;break e}Ne=s.return}}var x=t.current;for(Ne=x;Ne!==null;){o=Ne;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ne=w;else e:for(o=x;Ne!==null;){if(a=Ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Uy(9,a)}}catch(_){on(a,a.return,_)}if(a===o){Ne=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Ne=S;break e}Ne=a.return}}if(vt=r,Pl(),ro&&typeof ro.onPostCommitFiberRoot=="function")try{ro.onPostCommitFiberRoot(Iy,t)}catch{}i=!0}return i}finally{Ct=n,Vr.transition=e}}return!1}function VP(t,e,n){e=Md(n,e),e=JI(t,e,1),t=el(t,e,1),e=xi(),t!==null&&(Qp(t,1,e),Xi(t,e))}function on(t,e,n){if(t.tag===3)VP(t,t,n);else for(;e!==null;){if(e.tag===3){VP(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(tl===null||!tl.has(i))){t=Md(n,t),t=ZI(e,t,1),e=el(e,t,1),t=xi(),e!==null&&(Qp(e,1,t),Xi(e,t));break}}e=e.return}}function CG(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=xi(),t.pingedLanes|=t.suspendedLanes&n,On===t&&(Zn&n)===n&&(En===4||En===3&&(Zn&130023424)===Zn&&500>fn()-G_?yc(t,0):W_|=n),Xi(t,e)}function yj(t,e){e===0&&(t.mode&1?(e=Km,Km<<=1,!(Km&130023424)&&(Km=4194304)):e=1);var n=xi();t=Yo(t,e),t!==null&&(Qp(t,e,n),Xi(t,n))}function EG(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yj(t,n)}function AG(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ae(314))}i!==null&&i.delete(e),yj(t,n)}var bj;bj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qi.current)Gi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Gi=!1,pG(t,e,n);Gi=!!(t.flags&131072)}else Gi=!1,Yt&&e.flags&1048576&&kI(e,uv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;u0(t,e),t=e.pendingProps;var r=Ed(e,di.current);ed(e,n),r=F_(null,e,i,t,r,n);var s=z_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yi(i)?(s=!0,lv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,I_(e),r.updater=By,e.stateNode=r,r._reactInternals=e,wS(e,i,t,n),e=_S(null,e,i,!0,s,n)):(e.tag=0,Yt&&s&&A_(e),yi(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(u0(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=PG(i),t=rs(i,t),r){case 0:e=kS(null,e,i,t,n);break e;case 1:e=OP(null,e,i,t,n);break e;case 11:e=RP(null,e,i,t,n);break e;case 14:e=TP(null,e,i,rs(i.type,t),n);break e}throw Error(ae(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rs(i,r),kS(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rs(i,r),OP(t,e,i,r,n);case 3:e:{if(nj(e),t===null)throw Error(ae(387));i=e.pendingProps,s=e.memoizedState,r=s.element,PI(t,e),hv(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Md(Error(ae(423)),e),e=IP(t,e,i,n,r);break e}else if(i!==r){r=Md(Error(ae(424)),e),e=IP(t,e,i,n,r);break e}else for(dr=Qa(e.stateNode.containerInfo.firstChild),gr=e,Yt=!0,cs=null,n=AI(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ad(),i===r){e=Xo(t,e,n);break e}yi(t,e,i,n)}e=e.child}return e;case 5:return MI(e),t===null&&yS(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,hS(i,r)?o=null:s!==null&&hS(i,s)&&(e.flags|=32),tj(t,e),yi(t,e,o,n),e.child;case 6:return t===null&&yS(e),null;case 13:return ij(t,e,n);case 4:return j_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Nd(e,null,i,n):yi(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rs(i,r),RP(t,e,i,r,n);case 7:return yi(t,e,e.pendingProps,n),e.child;case 8:return yi(t,e,e.pendingProps.children,n),e.child;case 12:return yi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Lt(dv,i._currentValue),i._currentValue=o,s!==null)if(ys(s.value,o)){if(s.children===r.children&&!qi.current){e=Xo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ho(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),bS(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),bS(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}yi(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ed(e,n),r=qr(r),i=i(r),e.flags|=1,yi(t,e,i,n),e.child;case 14:return i=e.type,r=rs(i,e.pendingProps),r=rs(i.type,r),TP(t,e,i,r,n);case 15:return QI(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rs(i,r),u0(t,e),e.tag=1,Yi(i)?(t=!0,lv(e)):t=!1,ed(e,n),XI(e,i,r),wS(e,i,r,n),_S(null,e,i,!0,t,n);case 19:return rj(t,e,n);case 22:return ej(t,e,n)}throw Error(ae(156,e.tag))};function xj(t,e){return KO(t,e)}function NG(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(t,e,n,i){return new NG(t,e,n,i)}function X_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PG(t){if(typeof t=="function")return X_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===m_)return 11;if(t===g_)return 14}return 2}function il(t,e){var n=t.alternate;return n===null?(n=Dr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function h0(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")X_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Mu:return bc(n.children,r,s,e);case p_:o=8,r|=8;break;case Ww:return t=Dr(12,n,e,r|2),t.elementType=Ww,t.lanes=s,t;case Gw:return t=Dr(13,n,e,r),t.elementType=Gw,t.lanes=s,t;case Kw:return t=Dr(19,n,e,r),t.elementType=Kw,t.lanes=s,t;case MO:return Hy(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case NO:o=10;break e;case PO:o=9;break e;case m_:o=11;break e;case g_:o=14;break e;case xa:o=16,i=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Dr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function bc(t,e,n,i){return t=Dr(7,t,i,e),t.lanes=n,t}function Hy(t,e,n,i){return t=Dr(22,t,i,e),t.elementType=MO,t.lanes=n,t.stateNode={isHidden:!1},t}function Bx(t,e,n){return t=Dr(6,t,null,e),t.lanes=n,t}function Ux(t,e,n){return e=Dr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function MG(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sx(0),this.expirationTimes=Sx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sx(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function J_(t,e,n,i,r,s,o,a,l){return t=new MG(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Dr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},I_(s),t}function RG(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function wj(t){if(!t)return ul;t=t._reactInternals;e:{if(Xc(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(Yi(n))return wI(t,n,e)}return e}function Sj(t,e,n,i,r,s,o,a,l){return t=J_(n,i,!0,t,r,s,o,a,l),t.context=wj(null),n=t.current,i=xi(),r=nl(n),s=Ho(i,r),s.callback=e??null,el(n,s,r),t.current.lanes=r,Qp(t,r,i),Xi(t,i),t}function Wy(t,e,n,i){var r=e.current,s=xi(),o=nl(r);return n=wj(n),e.context===null?e.context=n:e.pendingContext=n,e=Ho(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=el(r,e,o),t!==null&&(vs(t,r,o,s),a0(t,r,o)),o}function wv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function HP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Z_(t,e){HP(t,e),(t=t.alternate)&&HP(t,e)}function TG(){return null}var kj=typeof reportError=="function"?reportError:function(t){console.error(t)};function Q_(t){this._internalRoot=t}Gy.prototype.render=Q_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Wy(t,e,null,null)};Gy.prototype.unmount=Q_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Oc(function(){Wy(null,t,null,null)}),e[qo]=null}};function Gy(t){this._internalRoot=t}Gy.prototype.unstable_scheduleHydration=function(t){if(t){var e=eI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pa.length&&e!==0&&e<Pa[n].priority;n++);Pa.splice(n,0,t),n===0&&nI(t)}};function eC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ky(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function WP(){}function OG(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=wv(o);s.call(c)}}var o=Sj(e,i,t,0,null,!1,!1,"",WP);return t._reactRootContainer=o,t[qo]=o.current,tp(t.nodeType===8?t.parentNode:t),Oc(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=wv(l);a.call(c)}}var l=J_(t,0,!1,null,null,!1,!1,"",WP);return t._reactRootContainer=l,t[qo]=l.current,tp(t.nodeType===8?t.parentNode:t),Oc(function(){Wy(e,l,n,i)}),l}function qy(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=wv(o);a.call(l)}}Wy(e,o,t,r)}else o=OG(n,e,t,r,i);return wv(o)}ZO=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qf(e.pendingLanes);n!==0&&(b_(e,n|1),Xi(e,fn()),!(vt&6)&&(Rd=fn()+500,Pl()))}break;case 13:Oc(function(){var i=Yo(t,1);if(i!==null){var r=xi();vs(i,t,1,r)}}),Z_(t,1)}};x_=function(t){if(t.tag===13){var e=Yo(t,134217728);if(e!==null){var n=xi();vs(e,t,134217728,n)}Z_(t,134217728)}};QO=function(t){if(t.tag===13){var e=nl(t),n=Yo(t,e);if(n!==null){var i=xi();vs(n,t,e,i)}Z_(t,e)}};eI=function(){return Ct};tI=function(t,e){var n=Ct;try{return Ct=t,e()}finally{Ct=n}};iS=function(t,e,n){switch(e){case"input":if(Xw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=$y(i);if(!r)throw Error(ae(90));TO(i),Xw(i,r)}}}break;case"textarea":IO(t,n);break;case"select":e=n.value,e!=null&&Xu(t,!!n.multiple,e,!1)}};BO=K_;UO=Oc;var IG={usingClientEntryPoint:!1,Events:[tm,Iu,$y,FO,zO,K_]},Ef={findFiberByHostInstance:uc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jG={bundleType:Ef.bundleType,version:Ef.version,rendererPackageName:Ef.rendererPackageName,rendererConfig:Ef.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ia.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=WO(t),t===null?null:t.stateNode},findFiberByHostInstance:Ef.findFiberByHostInstance||TG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rg.isDisabled&&rg.supportsFiber)try{Iy=rg.inject(jG),ro=rg}catch{}}kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IG;kr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eC(e))throw Error(ae(200));return RG(t,e,null,n)};kr.createRoot=function(t,e){if(!eC(t))throw Error(ae(299));var n=!1,i="",r=kj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=J_(t,1,!1,null,null,n,!1,i,r),t[qo]=e.current,tp(t.nodeType===8?t.parentNode:t),new Q_(e)};kr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=WO(e),t=t===null?null:t.stateNode,t};kr.flushSync=function(t){return Oc(t)};kr.hydrate=function(t,e,n){if(!Ky(e))throw Error(ae(200));return qy(null,t,e,!0,n)};kr.hydrateRoot=function(t,e,n){if(!eC(t))throw Error(ae(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=kj;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Sj(e,null,t,1,n??null,r,!1,s,o),t[qo]=e.current,tp(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Gy(e)};kr.render=function(t,e,n){if(!Ky(e))throw Error(ae(200));return qy(null,t,e,!1,n)};kr.unmountComponentAtNode=function(t){if(!Ky(t))throw Error(ae(40));return t._reactRootContainer?(Oc(function(){qy(null,null,t,!1,function(){t._reactRootContainer=null,t[qo]=null})}),!0):!1};kr.unstable_batchedUpdates=K_;kr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Ky(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return qy(t,e,n,!1,i)};kr.version="18.3.1-next-f1338f8080-20240426";function _j(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_j)}catch(t){console.error(t)}}_j(),_O.exports=kr;var Ml=_O.exports;const LG=qc(Ml);var Cj,GP=Ml;Cj=GP.createRoot,GP.hydrateRoot;function ye(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function _s(t,e=[]){let n=[];function i(s,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=d=>{var y;const{scope:h,children:p,...g}=d,m=((y=h==null?void 0:h[t])==null?void 0:y[l])||a,v=b.useMemo(()=>g,Object.values(g));return f.jsx(m.Provider,{value:v,children:p})};c.displayName=s+"Provider";function u(d,h){var m;const p=((m=h==null?void 0:h[t])==null?void 0:m[l])||a,g=b.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,DG(r,...e)]}function DG(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function KP(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Yy(...t){return e=>{let n=!1;const i=t.map(r=>{const s=KP(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():KP(t[r],null)}}}}function ut(...t){return b.useCallback(Yy(...t),t)}function Td(t){const e=$G(t),n=b.forwardRef((i,r)=>{const{children:s,...o}=i,a=b.Children.toArray(s),l=a.find(zG);if(l){const c=l.props.children,u=a.map(d=>d===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:d);return f.jsx(e,{...o,ref:r,children:b.isValidElement(c)?b.cloneElement(c,void 0,u):null})}return f.jsx(e,{...o,ref:r,children:s})});return n.displayName=`${t}.Slot`,n}function $G(t){const e=b.forwardRef((n,i)=>{const{children:r,...s}=n;if(b.isValidElement(r)){const o=UG(r),a=BG(s,r.props);return r.type!==b.Fragment&&(a.ref=i?Yy(i,o):o),b.cloneElement(r,a)}return b.Children.count(r)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var FG=Symbol("radix.slottable");function zG(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===FG}function BG(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function UG(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function im(t){const e=t+"CollectionProvider",[n,i]=_s(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:y}=m,x=Ft.useRef(null),w=Ft.useRef(new Map).current;return f.jsx(r,{scope:v,itemMap:w,collectionRef:x,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=Td(a),c=Ft.forwardRef((m,v)=>{const{scope:y,children:x}=m,w=s(a,y),S=ut(v,w.collectionRef);return f.jsx(l,{ref:S,children:x})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=Td(u),p=Ft.forwardRef((m,v)=>{const{scope:y,children:x,...w}=m,S=Ft.useRef(null),_=ut(v,S),E=s(u,y);return Ft.useEffect(()=>(E.itemMap.set(S,{ref:S,...w}),()=>void E.itemMap.delete(S))),f.jsx(h,{[d]:"",ref:_,children:x})});p.displayName=u;function g(m){const v=s(t+"CollectionConsumer",m);return Ft.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const w=Array.from(x.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((E,C)=>w.indexOf(E.ref.current)-w.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},g,i]}var ei=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},VG=Ay[" useId ".trim().toString()]||(()=>{}),HG=0;function tf(t){const[e,n]=b.useState(VG());return ei(()=>{n(i=>i??String(HG++))},[t]),e?`radix-${e}`:""}var WG=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],He=WG.reduce((t,e)=>{const n=Td(`Primitive.${e}`),i=b.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(l,{...a,ref:s})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function tC(t,e){t&&Ml.flushSync(()=>t.dispatchEvent(e))}function xr(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}var GG=Ay[" useInsertionEffect ".trim().toString()]||ei;function dl({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,s,o]=KG({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:r;{const u=b.useRef(t!==void 0);b.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const c=b.useCallback(u=>{var d;if(a){const h=qG(u)?u(t):u;h!==t&&((d=o.current)==null||d.call(o,h))}else s(u)},[a,t,s,o]);return[l,c]}function KG({defaultProp:t,onChange:e}){const[n,i]=b.useState(t),r=b.useRef(n),s=b.useRef(e);return GG(()=>{s.current=e},[e]),b.useEffect(()=>{var o;r.current!==n&&((o=s.current)==null||o.call(s,n),r.current=n)},[n,r]),[n,i,s]}function qG(t){return typeof t=="function"}var YG=b.createContext(void 0);function Xy(t){const e=b.useContext(YG);return t||e||"ltr"}var Vx="rovingFocusGroup.onEntryFocus",XG={bubbles:!1,cancelable:!0},rm="RovingFocusGroup",[LS,Ej,JG]=im(rm),[ZG,Jy]=_s(rm,[JG]),[QG,eK]=ZG(rm),Aj=b.forwardRef((t,e)=>f.jsx(LS.Provider,{scope:t.__scopeRovingFocusGroup,children:f.jsx(LS.Slot,{scope:t.__scopeRovingFocusGroup,children:f.jsx(tK,{...t,ref:e})})}));Aj.displayName=rm;var tK=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=b.useRef(null),p=ut(e,h),g=Xy(s),[m,v]=dl({prop:o,defaultProp:a??null,onChange:l,caller:rm}),[y,x]=b.useState(!1),w=xr(c),S=Ej(n),_=b.useRef(!1),[E,C]=b.useState(0);return b.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(Vx,w),()=>N.removeEventListener(Vx,w)},[w]),f.jsx(QG,{scope:n,orientation:i,dir:g,loop:r,currentTabStopId:m,onItemFocus:b.useCallback(N=>v(N),[v]),onItemShiftTab:b.useCallback(()=>x(!0),[]),onFocusableItemAdd:b.useCallback(()=>C(N=>N+1),[]),onFocusableItemRemove:b.useCallback(()=>C(N=>N-1),[]),children:f.jsx(He.div,{tabIndex:y||E===0?-1:0,"data-orientation":i,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:ye(t.onMouseDown,()=>{_.current=!0}),onFocus:ye(t.onFocus,N=>{const M=!_.current;if(N.target===N.currentTarget&&M&&!y){const I=new CustomEvent(Vx,XG);if(N.currentTarget.dispatchEvent(I),!I.defaultPrevented){const O=S().filter(X=>X.focusable),T=O.find(X=>X.active),H=O.find(X=>X.id===m),K=[T,H,...O].filter(Boolean).map(X=>X.ref.current);Mj(K,u)}}_.current=!1}),onBlur:ye(t.onBlur,()=>x(!1))})})}),Nj="RovingFocusGroupItem",Pj=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,children:o,...a}=t,l=tf(),c=s||l,u=eK(Nj,n),d=u.currentTabStopId===c,h=Ej(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:m}=u;return b.useEffect(()=>{if(i)return p(),()=>g()},[i,p,g]),f.jsx(LS.ItemSlot,{scope:n,id:c,focusable:i,active:r,children:f.jsx(He.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:ye(t.onMouseDown,v=>{i?u.onItemFocus(c):v.preventDefault()}),onFocus:ye(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:ye(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=rK(v,u.orientation,u.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=h().filter(S=>S.focusable).map(S=>S.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const S=w.indexOf(v.currentTarget);w=u.loop?sK(w,S+1):w.slice(S+1)}setTimeout(()=>Mj(w))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:m!=null}):o})})});Pj.displayName=Nj;var nK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function iK(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function rK(t,e,n){const i=iK(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return nK[i]}function Mj(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function sK(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Rj=Aj,Tj=Pj;function oK(t,e){return b.useReducer((n,i)=>e[n][i]??n,t)}var ra=t=>{const{present:e,children:n}=t,i=aK(e),r=typeof n=="function"?n({present:i.isPresent}):b.Children.only(n),s=ut(i.ref,lK(r));return typeof n=="function"||i.isPresent?b.cloneElement(r,{ref:s}):null};ra.displayName="Presence";function aK(t){const[e,n]=b.useState(),i=b.useRef(null),r=b.useRef(t),s=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=oK(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=sg(i.current);s.current=a==="mounted"?c:"none"},[a]),ei(()=>{const c=i.current,u=r.current;if(u!==t){const h=s.current,p=sg(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),ei(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const m=sg(i.current).includes(p.animationName);if(p.target===e&&m&&(l("ANIMATION_END"),!r.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},h=p=>{p.target===e&&(s.current=sg(i.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{i.current=c?getComputedStyle(c):null,n(c)},[])}}function sg(t){return(t==null?void 0:t.animationName)||"none"}function lK(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Zy="Tabs",[cK,h0e]=_s(Zy,[Jy]),Oj=Jy(),[uK,nC]=cK(Zy),Ij=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=Xy(a),[d,h]=dl({prop:i,onChange:r,defaultProp:s??"",caller:Zy});return f.jsx(uK,{scope:n,baseId:tf(),value:d,onValueChange:h,orientation:o,dir:u,activationMode:l,children:f.jsx(He.div,{dir:u,"data-orientation":o,...c,ref:e})})});Ij.displayName=Zy;var jj="TabsList",Lj=b.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=nC(jj,n),o=Oj(n);return f.jsx(Rj,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:f.jsx(He.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});Lj.displayName=jj;var Dj="TabsTrigger",p0=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=nC(Dj,n),a=Oj(n),l=Fj(o.baseId,i),c=zj(o.baseId,i),u=i===o.value;return f.jsx(Tj,{asChild:!0,...a,focusable:!r,active:u,children:f.jsx(He.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:ye(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:ye(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:ye(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});p0.displayName=Dj;var $j="TabsContent",m0=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=nC($j,n),l=Fj(a.baseId,i),c=zj(a.baseId,i),u=i===a.value,d=b.useRef(u);return b.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),f.jsx(ra,{present:r||u,children:({present:h})=>f.jsx(He.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});m0.displayName=$j;function Fj(t,e){return`${t}-trigger-${e}`}function zj(t,e){return`${t}-content-${e}`}const th={},qP=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,YP=t=>"init"in t,Hx=t=>!!t.write,XP=t=>"v"in t||"e"in t,og=t=>{if("e"in t)throw t.e;if((th?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},Sv=new WeakMap,JP=t=>{var e;return kv(t)&&!!((e=Sv.get(t))!=null&&e[0])},dK=t=>{const e=Sv.get(t);e!=null&&e[0]&&(e[0]=!1,e[1].forEach(n=>n()))},Bj=(t,e)=>{let n=Sv.get(t);if(!n){n=[!0,new Set],Sv.set(t,n);const i=()=>{n[0]=!1};t.then(i,i)}n[1].add(e)},kv=t=>typeof(t==null?void 0:t.then)=="function",Uj=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},Wx=(t,e,n)=>{const i=n(t),r="v"in i,s=i.v;if(kv(e))for(const o of i.d.keys())Uj(t,e,n(o));i.v=e,delete i.e,(!r||!Object.is(s,i.v))&&(++i.n,kv(s)&&dK(s))},ZP=(t,e,n)=>{var i;const r=new Set;for(const s of((i=n.get(t))==null?void 0:i.t)||[])n.has(s)&&r.add(s);for(const s of e.p)r.add(s);return r},fK=()=>{const t=new Set,e=()=>{t.forEach(n=>n())};return e.add=n=>(t.add(n),()=>{t.delete(n)}),e},Gx=()=>{const t={},e=new WeakMap,n=i=>{var r,s;(r=e.get(t))==null||r.forEach(o=>o(i)),(s=e.get(i))==null||s.forEach(o=>o())};return n.add=(i,r)=>{const s=i||t,o=(e.has(s)?e:e.set(s,new Set)).get(s);return o.add(r),()=>{o==null||o.delete(r),o.size||e.delete(s)}},n},hK=t=>(t.c||(t.c=Gx()),t.m||(t.m=Gx()),t.u||(t.u=Gx()),t.f||(t.f=fK()),t),pK=Symbol(),mK=(t=new WeakMap,e=new WeakMap,n=new WeakMap,i=new Set,r=new Set,s=new Set,o={},a=(h,...p)=>h.read(...p),l=(h,...p)=>h.write(...p),c=(h,p)=>{var g;return(g=h.unstable_onInit)==null?void 0:g.call(h,p)},u=(h,p)=>{var g;return(g=h.onMount)==null?void 0:g.call(h,p)},...d)=>{const h=d[0]||(C=>{if((th?"production":void 0)!=="production"&&!C)throw new Error("Atom is undefined or null");let N=t.get(C);return N||(N={d:new Map,p:new Set,n:0},t.set(C,N),c==null||c(C,E)),N}),p=d[1]||(()=>{const C=[],N=M=>{try{M()}catch(I){C.push(I)}};do{o.f&&N(o.f);const M=new Set,I=M.add.bind(M);i.forEach(O=>{var T;return(T=e.get(O))==null?void 0:T.l.forEach(I)}),i.clear(),s.forEach(I),s.clear(),r.forEach(I),r.clear(),M.forEach(N),i.size&&g()}while(i.size||s.size||r.size);if(C.length)throw new AggregateError(C)}),g=d[2]||(()=>{const C=[],N=new WeakSet,M=new WeakSet,I=Array.from(i);for(;I.length;){const O=I[I.length-1],T=h(O);if(M.has(O)){I.pop();continue}if(N.has(O)){if(n.get(O)===T.n)C.push([O,T]);else if((th?"production":void 0)!=="production"&&n.has(O))throw new Error("[Bug] invalidated atom exists");M.add(O),I.pop();continue}N.add(O);for(const H of ZP(O,T,e))N.has(H)||I.push(H)}for(let O=C.length-1;O>=0;--O){const[T,H]=C[O];let L=!1;for(const K of H.d.keys())if(K!==T&&i.has(K)){L=!0;break}L&&(m(T),x(T)),n.delete(T)}}),m=d[3]||(C=>{var N;const M=h(C);if(XP(M)&&(e.has(C)&&n.get(C)!==M.n||Array.from(M.d).every(([te,U])=>m(te).n===U)))return M;M.d.clear();let I=!0;const O=()=>{e.has(C)&&(x(C),g(),p())},T=te=>{var U;if(qP(C,te)){const ie=h(te);if(!XP(ie))if(YP(te))Wx(te,te.init,h);else throw new Error("no atom init");return og(ie)}const z=m(te);try{return og(z)}finally{M.d.set(te,z.n),JP(M.v)&&Uj(C,M.v,z),(U=e.get(te))==null||U.t.add(C),I||O()}};let H,L;const K={get signal(){return H||(H=new AbortController),H.signal},get setSelf(){return(th?"production":void 0)!=="production"&&!Hx(C)&&console.warn("setSelf function cannot be used with read-only atom"),!L&&Hx(C)&&(L=(...te)=>{if((th?"production":void 0)!=="production"&&I&&console.warn("setSelf function cannot be called in sync"),!I)try{return y(C,...te)}finally{g(),p()}}),L}},X=M.n;try{const te=a(C,T,K);return Wx(C,te,h),kv(te)&&(Bj(te,()=>H==null?void 0:H.abort()),te.then(O,O)),M}catch(te){return delete M.v,M.e=te,++M.n,M}finally{I=!1,X!==M.n&&n.get(C)===X&&(n.set(C,M.n),i.add(C),(N=o.c)==null||N.call(o,C))}}),v=d[4]||(C=>{const N=[C];for(;N.length;){const M=N.pop(),I=h(M);for(const O of ZP(M,I,e)){const T=h(O);n.set(O,T.n),N.push(O)}}}),y=d[5]||((C,...N)=>{let M=!0;const I=T=>og(m(T)),O=(T,...H)=>{var L;const K=h(T);try{if(qP(C,T)){if(!YP(T))throw new Error("atom not writable");const X=K.n,te=H[0];Wx(T,te,h),x(T),X!==K.n&&(i.add(T),(L=o.c)==null||L.call(o,T),v(T));return}else return y(T,...H)}finally{M||(g(),p())}};try{return l(C,I,O,...N)}finally{M=!1}}),x=d[6]||(C=>{var N;const M=h(C),I=e.get(C);if(I&&!JP(M.v)){for(const[O,T]of M.d)if(!I.d.has(O)){const H=h(O);w(O).t.add(C),I.d.add(O),T!==H.n&&(i.add(O),(N=o.c)==null||N.call(o,O),v(O))}for(const O of I.d||[])if(!M.d.has(O)){I.d.delete(O);const T=S(O);T==null||T.t.delete(C)}}}),w=d[7]||(C=>{var N;const M=h(C);let I=e.get(C);if(!I){m(C);for(const O of M.d.keys())w(O).t.add(C);if(I={l:new Set,d:new Set(M.d.keys()),t:new Set},e.set(C,I),(N=o.m)==null||N.call(o,C),Hx(C)){const O=()=>{let T=!0;const H=(...L)=>{try{return y(C,...L)}finally{T||(g(),p())}};try{const L=u(C,H);L&&(I.u=()=>{T=!0;try{L()}finally{T=!1}})}finally{T=!1}};r.add(O)}}return I}),S=d[8]||(C=>{var N;const M=h(C);let I=e.get(C);if(I&&!I.l.size&&!Array.from(I.t).some(O=>{var T;return(T=e.get(O))==null?void 0:T.d.has(C)})){I.u&&s.add(I.u),I=void 0,e.delete(C),(N=o.u)==null||N.call(o,C);for(const O of M.d.keys()){const T=S(O);T==null||T.t.delete(C)}return}return I}),_=[t,e,n,i,r,s,o,a,l,c,u,h,p,g,m,v,y,x,w,S],E={get:C=>og(m(C)),set:(C,...N)=>{try{return y(C,...N)}finally{g(),p()}},sub:(C,N)=>{const I=w(C).l;return I.add(N),p(),()=>{I.delete(N),S(C),p()}}};return Object.defineProperty(E,pK,{value:_}),E},Vj=mK,gK=hK,QP=Bj,iC={};let vK=0;function ue(t,e){const n=`atom${++vK}`,i={toString(){return(iC?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?i.read=t:(i.init=t,i.read=yK,i.write=bK),e&&(i.write=e),i}function yK(t){return t(this)}function bK(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const xK=()=>{let t=0;const e=gK({}),n=new WeakMap,i=new WeakMap,r=Vj(n,i,void 0,void 0,void 0,void 0,e,void 0,(a,l,c,...u)=>t?c(a,...u):a.write(l,c,...u)),s=new Set;return e.m.add(void 0,a=>{s.add(a);const l=n.get(a);l.m=i.get(a)}),e.u.add(void 0,a=>{s.delete(a);const l=n.get(a);delete l.m}),Object.assign(r,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),n),dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:a=>{const l={read:()=>null,write:(c,u)=>{++t;try{for(const[d,h]of a)"init"in d&&u(d,h)}finally{--t}}};r.set(l)}})};function rC(){return(iC?"production":void 0)!=="production"?xK():Vj()}let Af;function wK(){return Af||(Af=rC(),(iC?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Af),globalThis.__JOTAI_DEFAULT_STORE__!==Af&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Af}const SK={},Hj=b.createContext(void 0);function Wj(t){return b.useContext(Hj)||wK()}function kK({children:t,store:e}){const n=b.useRef(void 0);return!e&&!n.current&&(n.current=rC()),b.createElement(Hj.Provider,{value:e||n.current},t)}const DS=t=>typeof(t==null?void 0:t.then)=="function",$S=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},_K=Ft.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:($S(t),t)}),Kx=new WeakMap,e3=(t,e)=>{let n=Kx.get(t);return n||(n=new Promise((i,r)=>{let s=t;const o=c=>u=>{s===c&&i(u)},a=c=>u=>{s===c&&r(u)},l=()=>{try{const c=e();DS(c)?(Kx.set(c,n),s=c,c.then(o(c),a(c)),QP(c,l)):i(c)}catch(c){r(c)}};t.then(o(t),a(t)),QP(t,l)}),Kx.set(t,n)),n};function it(t,e){const{delay:n,unstable_promiseStatus:i=!Ft.use}={},r=Wj(),[[s,o,a],l]=b.useReducer(u=>{const d=r.get(t);return Object.is(u[0],d)&&u[1]===r&&u[2]===t?u:[d,r,t]},void 0,()=>[r.get(t),r,t]);let c=s;if((o!==r||a!==t)&&(l(),c=r.get(t)),b.useEffect(()=>{const u=r.sub(t,()=>{if(i)try{const d=r.get(t);DS(d)&&$S(e3(d,()=>r.get(t)))}catch{}if(typeof n=="number"){setTimeout(l,n);return}l()});return l(),u},[r,t,n,i]),b.useDebugValue(c),DS(c)){const u=e3(c,()=>r.get(t));return i&&$S(u),_K(u)}return c}function up(t,e){const n=Wj();return b.useCallback((...r)=>{if((SK?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function sm(t,e){return[it(t),up(t)]}const{createElement:Od,createContext:CK,forwardRef:Gj,useCallback:Ri,useContext:Kj,useEffect:xc,useImperativeHandle:qj,useLayoutEffect:EK,useMemo:AK,useRef:ar,useState:_v}=Ay,t3=Ay.useId,Qy=CK(null);Qy.displayName="PanelGroupContext";const dp=EK,NK=typeof t3=="function"?t3:()=>null;let PK=0;function sC(t=null){const e=NK(),n=ar(t||e||null);return n.current===null&&(n.current=""+PK++),t??n.current}function Yj({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:h,style:p,tagName:g="div",...m}){const v=Kj(Qy);if(v===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:x,getPanelSize:w,getPanelStyle:S,groupId:_,isPanelCollapsed:E,reevaluatePanelConstraints:C,registerPanel:N,resizePanel:M,unregisterPanel:I}=v,O=sC(o),T=ar({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:O,idIsFromProps:o!==void 0,order:h});ar({didLogMissingDefaultSizeWarning:!1}),dp(()=>{const{callbacks:L,constraints:K}=T.current,X={...K};T.current.id=O,T.current.idIsFromProps=o!==void 0,T.current.order=h,L.onCollapse=c,L.onExpand=u,L.onResize=d,K.collapsedSize=n,K.collapsible=i,K.defaultSize=r,K.maxSize=a,K.minSize=l,(X.collapsedSize!==K.collapsedSize||X.collapsible!==K.collapsible||X.maxSize!==K.maxSize||X.minSize!==K.minSize)&&C(T.current,X)}),dp(()=>{const L=T.current;return N(L),()=>{I(L)}},[h,O,N,I]),qj(s,()=>({collapse:()=>{y(T.current)},expand:()=>{x(T.current)},getId(){return O},getSize(){return w(T.current)},isCollapsed(){return E(T.current)},isExpanded(){return!E(T.current)},resize:L=>{M(T.current,L)}}),[y,x,w,E,O,M]);const H=S(T.current,r);return Od(g,{...m,children:t,className:e,style:{...H,...p},"data-panel":"","data-panel-id":O,"data-panel-group-id":_,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const g0=Gj((t,e)=>Od(Yj,{...t,forwardedRef:e}));Yj.displayName="Panel";g0.displayName="forwardRef(Panel)";function et(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const Xj=10;function fp(t,e,n=Xj){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function rr(t,e,n){return fp(t,e,n)===0}function Bu({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];et(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if(fp(n,a)<0)if(s){const l=(r+a)/2;fp(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(Xj)),n}function nh({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(rr(t,0))return e;const s=[...e],[o,a]=i;et(o!=null),et(a!=null);let l=0;if(r==="keyboard"){{const u=t<0?a:o,d=n[u];if(et(d),d.collapsible){const h=e[u];et(h!=null);const p=n[u];et(p);const{collapsedSize:g=0,minSize:m=0}=p;if(rr(h,g)){const v=m-h;fp(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}{const u=t<0?o:a,d=n[u];et(d);const{collapsible:h}=d;if(h){const p=e[u];et(p!=null);const g=n[u];et(g);const{collapsedSize:m=0,minSize:v=0}=g;if(rr(p,v)){const y=p-m;fp(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}}{const u=t<0?1:-1;let d=t<0?a:o,h=0;for(;;){const g=e[d];et(g!=null);const v=Bu({panelConstraints:n,panelIndex:d,size:100})-g;if(h+=v,d+=u,d<0||d>=n.length)break}const p=Math.min(Math.abs(t),Math.abs(h));t=t<0?0-p:p}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const h=Math.abs(t)-Math.abs(l),p=e[d];et(p!=null);const g=p-h,m=Bu({panelConstraints:n,panelIndex:d,size:g});if(!rr(p,m)&&(l+=p-m,s[d]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(rr(l,0))return e;{const u=t<0?a:o,d=e[u];et(d!=null);const h=d+l,p=Bu({panelConstraints:n,panelIndex:u,size:h});if(s[u]=p,!rr(p,h)){let g=h-p,v=t<0?a:o;for(;v>=0&&v<n.length;){const y=s[v];et(y!=null);const x=y+g,w=Bu({panelConstraints:n,panelIndex:v,size:x});if(rr(y,w)||(g-=w-y,s[v]=w),rr(g,0))break;t>0?v--:v++}}}const c=s.reduce((u,d)=>d+u,0);return rr(c,100)?s:e}function MK({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];et(a!=null),e.forEach((d,h)=>{const{constraints:p}=d,{maxSize:g=100,minSize:m=0}=p;h===a?(i=m,r=g):(s+=m,o+=g)});const l=Math.min(r,100-s),c=Math.max(i,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function hp(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function Jj(t,e,n=document){const r=hp(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function Zj(t,e,n){const i=Jj(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function Qj(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function eb(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function RK(t,e,n,i=document){var r,s,o,a;const l=eb(e,i),c=hp(t,i),u=l?c.indexOf(l):-1,d=(r=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,h=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,h]}function TK({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){ar({didWarnAboutMissingResizeHandle:!1}),dp(()=>{if(!s)return;const a=hp(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=MK({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),h=a[l];if(h!=null){const p=r[l];et(p),h.setAttribute("aria-controls",p.id),h.setAttribute("aria-valuemax",""+Math.round(c)),h.setAttribute("aria-valuemin",""+Math.round(u)),h.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),xc(()=>{if(!s)return;const a=e.current;et(a);const{panelDataArray:l}=a,c=Qj(n,s);et(c!=null,`No group found for id "${n}"`);const u=hp(n,s);et(u);const d=u.map(h=>{const p=h.getAttribute("data-panel-resize-handle-id");et(p);const[g,m]=RK(n,p,l,s);if(g==null||m==null)return()=>{};const v=y=>{if(!y.defaultPrevented)switch(y.key){case"Enter":{y.preventDefault();const x=l.findIndex(w=>w.id===g);if(x>=0){const w=l[x];et(w);const S=i[x],{collapsedSize:_=0,collapsible:E,minSize:C=0}=w.constraints;if(S!=null&&E){const N=nh({delta:rr(S,_)?C-_:_-S,layout:i,panelConstraints:l.map(M=>M.constraints),pivotIndices:Zj(n,p,s),trigger:"keyboard"});i!==N&&o(N)}}break}}};return h.addEventListener("keydown",v),()=>{h.removeEventListener("keydown",v)}});return()=>{d.forEach(h=>h())}},[s,t,e,n,i,r,o])}function n3(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function eL(t){return t.type==="keydown"}function tL(t){return t.type.startsWith("mouse")}function nL(t){return t.type.startsWith("touch")}function iL(t,e){const n=t==="horizontal";if(tL(e))return n?e.clientX:e.clientY;if(nL(e)){const i=e.touches[0];return et(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function OK(t,e,n,i,r){const s=n==="horizontal",o=eb(e,r);et(o);const a=o.getAttribute("data-panel-group-id");et(a);let{initialCursorPosition:l}=i;const c=iL(n,t),u=Qj(a,r);et(u);const d=u.getBoundingClientRect(),h=s?d.width:d.height;return(c-l)/h*100}function IK(t,e,n,i,r,s){if(eL(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:OK(t,e,n,i,s)}function jK({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];et(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];et(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,c=r/l;i++,e[s]=c,r-=c}return e}function ru(t,e,n){e.forEach((i,r)=>{const s=t[r];et(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:h,onExpand:p,onResize:g}=o;g&&g(i,d),u&&(h||p)&&(p&&(d==null||d===c)&&i!==c&&p(),h&&(d==null||d!==c)&&i===c&&h())}})}function ag(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function LK({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let FS=null,hc=null;function rL(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function DK(){hc!==null&&(document.head.removeChild(hc),FS=null,hc=null)}function qx(t){if(FS===t)return;FS=t;const e=rL(t);hc===null&&(hc=document.createElement("style"),document.head.appendChild(hc)),hc.innerHTML=`*{cursor: ${e}!important;}`}function $K(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function i3(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function sL(t){return`react-resizable-panels:${t}`}function oL(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function aL(t,e){try{const n=sL(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function FK(t,e,n){var i,r;const s=(i=aL(t,n))!==null&&i!==void 0?i:{},o=oL(e);return(r=s[o])!==null&&r!==void 0?r:null}function zK(t,e,n,i,r){var s;const o=sL(t),a=oL(e),l=(s=aL(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function r3({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!rr(i,100))for(let s=0;s<e.length;s++){const o=n[s];et(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];et(o!=null);const a=Bu({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!rr(r,0))for(let s=0;s<e.length;s++){const o=n[s];et(o!=null);const a=o+r,l=Bu({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,rr(r,0)))break}return n}const BK=100,ih={getItem:t=>(i3(ih),ih.getItem(t)),setItem:(t,e)=>{i3(ih),ih.setItem(t,e)}},s3={};function lL({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=ih,style:c,tagName:u="div",...d}){const h=sC(s),p=ar(null),[g,m]=_v(null),[v,y]=_v([]),x=ar({}),w=ar(new Map),S=ar(0),_=ar({autoSaveId:t,direction:i,dragState:g,id:h,keyboardResizeBy:a,onLayout:o,storage:l}),E=ar({layout:v,panelDataArray:[],panelDataArrayChanged:!1});ar({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),qj(r,()=>({getId:()=>_.current.id,getLayout:()=>{const{layout:J}=E.current;return J},setLayout:J=>{const{onLayout:le}=_.current,{layout:F,panelDataArray:$}=E.current,V=r3({layout:J,panelConstraints:$.map(k=>k.constraints)});n3(F,V)||(y(V),E.current.layout=V,le&&le(V),ru($,V,x.current))}}),[]),dp(()=>{_.current.autoSaveId=t,_.current.direction=i,_.current.dragState=g,_.current.id=h,_.current.onLayout=o,_.current.storage=l}),TK({committedValuesRef:_,eagerValuesRef:E,groupId:h,layout:v,panelDataArray:E.current.panelDataArray,setLayout:y,panelGroupElement:p.current}),xc(()=>{const{panelDataArray:J}=E.current;if(t){if(v.length===0||v.length!==J.length)return;let le=s3[t];le==null&&(le=$K(zK,BK),s3[t]=le);const F=[...J],$=new Map(w.current);le(t,F,$,v,l)}},[t,v,l]),xc(()=>{});const C=Ri(J=>{const{onLayout:le}=_.current,{layout:F,panelDataArray:$}=E.current;if(J.constraints.collapsible){const V=$.map(R=>R.constraints),{collapsedSize:k=0,panelSize:P,pivotIndices:j}=Wl($,J,F);if(et(P!=null),P!==k){w.current.set(J.id,P);const Y=vu($,J)===$.length-1?P-k:k-P,G=nh({delta:Y,layout:F,panelConstraints:V,pivotIndices:j,trigger:"imperative-api"});ag(F,G)||(y(G),E.current.layout=G,le&&le(G),ru($,G,x.current))}}},[]),N=Ri(J=>{const{onLayout:le}=_.current,{layout:F,panelDataArray:$}=E.current;if(J.constraints.collapsible){const V=$.map(Y=>Y.constraints),{collapsedSize:k=0,panelSize:P,minSize:j=0,pivotIndices:R}=Wl($,J,F);if(P===k){const Y=w.current.get(J.id),G=Y!=null&&Y>=j?Y:j,Z=vu($,J)===$.length-1?P-G:G-P,Pe=nh({delta:Z,layout:F,panelConstraints:V,pivotIndices:R,trigger:"imperative-api"});ag(F,Pe)||(y(Pe),E.current.layout=Pe,le&&le(Pe),ru($,Pe,x.current))}}},[]),M=Ri(J=>{const{layout:le,panelDataArray:F}=E.current,{panelSize:$}=Wl(F,J,le);return et($!=null),$},[]),I=Ri((J,le)=>{const{panelDataArray:F}=E.current,$=vu(F,J);return LK({defaultSize:le,dragState:g,layout:v,panelData:F,panelIndex:$})},[g,v]),O=Ri(J=>{const{layout:le,panelDataArray:F}=E.current,{collapsedSize:$=0,collapsible:V,panelSize:k}=Wl(F,J,le);return V===!0&&k===$},[]),T=Ri(J=>{const{layout:le,panelDataArray:F}=E.current,{collapsedSize:$=0,collapsible:V,panelSize:k}=Wl(F,J,le);return et(k!=null),!V||k>$},[]),H=Ri(J=>{const{panelDataArray:le}=E.current;le.push(J),le.sort((F,$)=>{const V=F.order,k=$.order;return V==null&&k==null?0:V==null?-1:k==null?1:V-k}),E.current.panelDataArrayChanged=!0},[]);dp(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:J,onLayout:le,storage:F}=_.current,{layout:$,panelDataArray:V}=E.current;let k=null;if(J){const j=FK(J,V,F);j&&(w.current=new Map(Object.entries(j.expandToSizes)),k=j.layout)}k==null&&(k=jK({panelDataArray:V}));const P=r3({layout:k,panelConstraints:V.map(j=>j.constraints)});n3($,P)||(y(P),E.current.layout=P,le&&le(P),ru(V,P,x.current))}});const L=Ri(J=>function(F){F.preventDefault();const $=p.current;if(!$)return()=>null;const{direction:V,dragState:k,id:P,keyboardResizeBy:j,onLayout:R}=_.current,{layout:Y,panelDataArray:G}=E.current,{initialLayout:ne}=k??{},Z=Zj(P,J,$);let Pe=IK(F,J,V,k,j,$);if(Pe===0)return;const ze=V==="horizontal";document.dir==="rtl"&&ze&&(Pe=-Pe);const Ue=G.map(ge=>ge.constraints),De=nh({delta:Pe,layout:ne??Y,panelConstraints:Ue,pivotIndices:Z,trigger:eL(F)?"keyboard":"mouse-or-touch"}),Je=!ag(Y,De);(tL(F)||nL(F))&&S.current!=Pe&&(S.current=Pe,qx(Je?ze?"horizontal":"vertical":ze?Pe<0?"horizontal-min":"horizontal-max":Pe<0?"vertical-min":"vertical-max")),Je&&(y(De),E.current.layout=De,R&&R(De),ru(G,De,x.current))},[]),K=Ri((J,le)=>{const{onLayout:F}=_.current,{layout:$,panelDataArray:V}=E.current,k=V.map(ne=>ne.constraints),{panelSize:P,pivotIndices:j}=Wl(V,J,$);et(P!=null);const Y=vu(V,J)===V.length-1?P-le:le-P,G=nh({delta:Y,layout:$,panelConstraints:k,pivotIndices:j,trigger:"imperative-api"});ag($,G)||(y(G),E.current.layout=G,F&&F(G),ru(V,G,x.current))},[]),X=Ri((J,le)=>{const{layout:F,panelDataArray:$}=E.current,{collapsedSize:V=0,collapsible:k}=le,{collapsedSize:P=0,collapsible:j,maxSize:R=100,minSize:Y=0}=J.constraints,{panelSize:G}=Wl($,J,F);et(G!=null),k&&j&&G===V?V!==P&&K(J,P):G<Y?K(J,Y):G>R&&K(J,R)},[K]),te=Ri((J,le)=>{const{direction:F}=_.current,{layout:$}=E.current;if(!p.current)return;const V=eb(J,p.current);et(V);const k=iL(F,le);m({dragHandleId:J,dragHandleRect:V.getBoundingClientRect(),initialCursorPosition:k,initialLayout:$})},[]),U=Ri(()=>{DK(),m(null)},[]),z=Ri(J=>{const{panelDataArray:le}=E.current,F=vu(le,J);F>=0&&(le.splice(F,1),delete x.current[J.id],E.current.panelDataArrayChanged=!0)},[]),ie=AK(()=>({collapsePanel:C,direction:i,dragState:g,expandPanel:N,getPanelSize:M,getPanelStyle:I,groupId:h,isPanelCollapsed:O,isPanelExpanded:T,reevaluatePanelConstraints:X,registerPanel:H,registerResizeHandle:L,resizePanel:K,startDragging:te,stopDragging:U,unregisterPanel:z,panelGroupElement:p.current}),[C,g,i,N,M,I,h,O,T,X,H,L,K,te,U,z]),be={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Od(Qy.Provider,{value:ie},Od(u,{...d,children:e,className:n,style:{...be,...c},ref:p,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":h}))}const cL=Gj((t,e)=>Od(lL,{...t,forwardedRef:e}));lL.displayName="PanelGroup";cL.displayName="forwardRef(PanelGroup)";function vu(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Wl(t,e,n){const i=vu(t,e),s=i===t.length-1?[i-1,i]:[i,i+1],o=n[i];return{...e.constraints,panelSize:o,pivotIndices:s}}function UK({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){xc(()=>{if(t||n==null||i==null)return;const r=eb(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");et(a);const l=hp(a,i),c=Jj(a,e,i);et(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function zS({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=ar(null),u=ar({onDragging:r});xc(()=>{u.current.onDragging=r});const d=Kj(Qy);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:h,dragState:p,groupId:g,registerResizeHandle:m,startDragging:v,stopDragging:y,panelGroupElement:x}=d,w=sC(i),S=(p==null?void 0:p.dragHandleId)===w,[_,E]=_v(!1),[C,N]=_v(null),M=Ri(()=>{const O=c.current;et(O),O.blur(),y();const{onDragging:T}=u.current;T&&T(!1)},[y]);xc(()=>{if(n)N(null);else{const O=m(w);N(()=>O)}},[n,w,m]),xc(()=>{if(n||C==null||!S)return;const O=K=>{C(K)},T=K=>{C(K)},H=c.current;et(H);const L=H.ownerDocument;return L.body.addEventListener("contextmenu",M),L.body.addEventListener("mousemove",O),L.body.addEventListener("touchmove",O),L.body.addEventListener("mouseleave",T),window.addEventListener("mouseup",M),window.addEventListener("touchend",M),()=>{L.body.removeEventListener("contextmenu",M),L.body.removeEventListener("mousemove",O),L.body.removeEventListener("touchmove",O),L.body.removeEventListener("mouseleave",T),window.removeEventListener("mouseup",M),window.removeEventListener("touchend",M)}},[h,n,S,C,M]),UK({disabled:n,handleId:w,resizeHandler:C,panelGroupElement:x});const I={cursor:rL(h),touchAction:"none",userSelect:"none"};return Od(a,{...l,children:t,className:e,onBlur:()=>E(!1),onFocus:()=>E(!0),onMouseDown:O=>{v(w,O.nativeEvent);const T=u.current;et(T);const{onDragging:H}=T;H&&H(!0)},onMouseUp:M,onTouchCancel:M,onTouchEnd:M,onTouchStart:O=>{v(w,O.nativeEvent);const T=u.current;et(T);const{onDragging:H}=T;H&&H(!0)},ref:c,role:"separator",style:{...I,...s},tabIndex:o,"data-panel-group-direction":h,"data-panel-group-id":g,"data-resize-handle":"","data-resize-handle-active":S?"pointer":_?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":w})}zS.displayName="PanelResizeHandle";var Ws=function(){return Ws=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ws.apply(this,arguments)};function uL(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function VK(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var HK=function(){};function WK(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function GK(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var dL=typeof window<"u",KK=dL?window:null,o3=function(t){return!!t.addEventListener},a3=function(t){return!!t.on},qK=function(t,e,n,i){n===void 0&&(n=KK),b.useEffect(function(){if(e&&n)return o3(n)?WK(n,t,e,i):a3(n)&&n.on(t,e,i),function(){o3(n)?GK(n,t,e,i):a3(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},YK=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},yu=function(t,e,n,i){e===void 0&&(e=HK),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=b.useMemo(function(){var c=YK(t),u=function(d){if(c(d))return e(d)};return u},i);qK(s,l,o,a)},XK=function(t,e){return dL?window.matchMedia(t).matches:!1},JK=function(t,e){var n=b.useState(XK(t)),i=n[0],r=n[1];return b.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addEventListener("change",a),r(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),i};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const ZK={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function QK(t,e,n){return(e=tq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l3(Object(n),!0).forEach(function(i){QK(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function eq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tq(t){var e=eq(t,"string");return typeof e=="symbol"?e:e+""}const c3=()=>{};let oC={},fL={},hL=null,pL={mark:c3,measure:c3};try{typeof window<"u"&&(oC=window),typeof document<"u"&&(fL=document),typeof MutationObserver<"u"&&(hL=MutationObserver),typeof performance<"u"&&(pL=performance)}catch{}const{userAgent:u3=""}=oC.navigator||{},fl=oC,Ut=fL,d3=hL,lg=pL;fl.document;const sa=!!Ut.documentElement&&!!Ut.head&&typeof Ut.addEventListener=="function"&&typeof Ut.createElement=="function",mL=~u3.indexOf("MSIE")||~u3.indexOf("Trident/");var nq=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,iq=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,gL={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},rq={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},vL=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],fi="classic",tb="duotone",sq="sharp",oq="sharp-duotone",yL=[fi,tb,sq,oq],aq={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},lq={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},cq=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),uq={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},dq=["fak","fa-kit","fakd","fa-kit-duotone"],f3={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},fq=["kit"],hq={kit:{"fa-kit":"fak"}},pq=["fak","fakd"],mq={kit:{fak:"fa-kit"}},h3={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},cg={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},gq=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],vq=["fak","fa-kit","fakd","fa-kit-duotone"],yq={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},bq={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},xq={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},BS={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},wq=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],US=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...gq,...wq],Sq=["solid","regular","light","thin","duotone","brands"],bL=[1,2,3,4,5,6,7,8,9,10],kq=bL.concat([11,12,13,14,15,16,17,18,19,20]),_q=[...Object.keys(xq),...Sq,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",cg.GROUP,cg.SWAP_OPACITY,cg.PRIMARY,cg.SECONDARY].concat(bL.map(t=>"".concat(t,"x"))).concat(kq.map(t=>"w-".concat(t))),Cq={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Jo="___FONT_AWESOME___",VS=16,xL="fa",wL="svg-inline--fa",Ic="data-fa-i2svg",HS="data-fa-pseudo-element",Eq="data-fa-pseudo-element-pending",aC="data-prefix",lC="data-icon",p3="fontawesome-i2svg",Aq="async",Nq=["HTML","HEAD","STYLE","SCRIPT"],SL=(()=>{try{return!0}catch{return!1}})();function om(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[fi]}})}const kL=oe({},gL);kL[fi]=oe(oe(oe(oe({},{"fa-duotone":"duotone"}),gL[fi]),f3.kit),f3["kit-duotone"]);const Pq=om(kL),WS=oe({},uq);WS[fi]=oe(oe(oe(oe({},{duotone:"fad"}),WS[fi]),h3.kit),h3["kit-duotone"]);const m3=om(WS),GS=oe({},BS);GS[fi]=oe(oe({},GS[fi]),mq.kit);const cC=om(GS),KS=oe({},bq);KS[fi]=oe(oe({},KS[fi]),hq.kit);om(KS);const Mq=nq,_L="fa-layers-text",Rq=iq,Tq=oe({},aq);om(Tq);const Oq=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Yx=rq,Iq=[...fq,..._q],Eh=fl.FontAwesomeConfig||{};function jq(t){var e=Ut.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function Lq(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}Ut&&typeof Ut.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=Lq(jq(n));r!=null&&(Eh[i]=r)});const CL={styleDefault:"solid",familyDefault:fi,cssPrefix:xL,replacementClass:wL,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Eh.familyPrefix&&(Eh.cssPrefix=Eh.familyPrefix);const Id=oe(oe({},CL),Eh);Id.autoReplaceSvg||(Id.observeMutations=!1);const Ie={};Object.keys(CL).forEach(t=>{Object.defineProperty(Ie,t,{enumerable:!0,set:function(e){Id[t]=e,Ah.forEach(n=>n(Ie))},get:function(){return Id[t]}})});Object.defineProperty(Ie,"familyPrefix",{enumerable:!0,set:function(t){Id.cssPrefix=t,Ah.forEach(e=>e(Ie))},get:function(){return Id.cssPrefix}});fl.FontAwesomeConfig=Ie;const Ah=[];function Dq(t){return Ah.push(t),()=>{Ah.splice(Ah.indexOf(t),1)}}const pa=VS,Js={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function $q(t){if(!t||!sa)return;const e=Ut.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=Ut.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return Ut.head.insertBefore(e,i),t}const Fq="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function pp(){let t=12,e="";for(;t-- >0;)e+=Fq[Math.random()*62|0];return e}function nf(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function uC(t){return t.classList?nf(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function EL(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function zq(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(EL(t[n]),'" '),"").trim()}function nb(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function dC(t){return t.size!==Js.size||t.x!==Js.x||t.y!==Js.y||t.rotate!==Js.rotate||t.flipX||t.flipY}function Bq(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:c}}function Uq(t){let{transform:e,width:n=VS,height:i=VS,startCentered:r=!1}=t,s="";return r&&mL?s+="translate(".concat(e.x/pa-n/2,"em, ").concat(e.y/pa-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/pa,"em), calc(-50% + ").concat(e.y/pa,"em)) "):s+="translate(".concat(e.x/pa,"em, ").concat(e.y/pa,"em) "),s+="scale(".concat(e.size/pa*(e.flipX?-1:1),", ").concat(e.size/pa*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var Vq=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function AL(){const t=xL,e=wL,n=Ie.cssPrefix,i=Ie.replacementClass;let r=Vq;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let g3=!1;function Xx(){Ie.autoAddCss&&!g3&&($q(AL()),g3=!0)}var Hq={mixout(){return{dom:{css:AL,insertCss:Xx}}},hooks(){return{beforeDOMElementCreation(){Xx()},beforeI2svg(){Xx()}}}};const Zo=fl||{};Zo[Jo]||(Zo[Jo]={});Zo[Jo].styles||(Zo[Jo].styles={});Zo[Jo].hooks||(Zo[Jo].hooks={});Zo[Jo].shims||(Zo[Jo].shims=[]);var Zs=Zo[Jo];const NL=[],PL=function(){Ut.removeEventListener("DOMContentLoaded",PL),Cv=1,NL.map(t=>t())};let Cv=!1;sa&&(Cv=(Ut.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ut.readyState),Cv||Ut.addEventListener("DOMContentLoaded",PL));function Wq(t){sa&&(Cv?setTimeout(t,0):NL.push(t))}function am(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?EL(t):"<".concat(e," ").concat(zq(n),">").concat(i.map(am).join(""),"</").concat(e,">")}function v3(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var Jx=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,c,u;for(i===void 0?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function Gq(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function qS(t){const e=Gq(t);return e.length===1?e[0].toString(16):null}function Kq(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function y3(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function YS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=y3(e);typeof Zs.hooks.addPack=="function"&&!i?Zs.hooks.addPack(t,y3(e)):Zs.styles[t]=oe(oe({},Zs.styles[t]||{}),r),t==="fas"&&YS("fa",e)}const{styles:mp,shims:qq}=Zs,ML=Object.keys(cC),Yq=ML.reduce((t,e)=>(t[e]=Object.keys(cC[e]),t),{});let fC=null,RL={},TL={},OL={},IL={},jL={};function Xq(t){return~Iq.indexOf(t)}function Jq(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!Xq(r)?r:null}const LL=()=>{const t=i=>Jx(mp,(r,s,o)=>(r[o]=Jx(s,i,{}),r),{});RL=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),TL=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),jL=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in mp||Ie.autoFetchSvg,n=Jx(qq,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});OL=n.names,IL=n.unicodes,fC=ib(Ie.styleDefault,{family:Ie.familyDefault})};Dq(t=>{fC=ib(t.styleDefault,{family:Ie.familyDefault})});LL();function hC(t,e){return(RL[t]||{})[e]}function Zq(t,e){return(TL[t]||{})[e]}function pc(t,e){return(jL[t]||{})[e]}function DL(t){return OL[t]||{prefix:null,iconName:null}}function Qq(t){const e=IL[t],n=hC("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function hl(){return fC}const $L=()=>({prefix:null,iconName:null,rest:[]});function eY(t){let e=fi;const n=ML.reduce((i,r)=>(i[r]="".concat(Ie.cssPrefix,"-").concat(r),i),{});return yL.forEach(i=>{(t.includes(n[i])||t.some(r=>Yq[i].includes(r)))&&(e=i)}),e}function ib(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=fi}=e,i=Pq[n][t];if(n===tb&&!t)return"fad";const r=m3[n][t]||m3[n][i],s=t in Zs.styles?t:null;return r||s||null}function tY(t){let e=[],n=null;return t.forEach(i=>{const r=Jq(Ie.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function b3(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function rb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=US.concat(vq),s=b3(t.filter(d=>r.includes(d))),o=b3(t.filter(d=>!US.includes(d))),a=s.filter(d=>(i=d,!vL.includes(d))),[l=null]=a,c=eY(s),u=oe(oe({},tY(o)),{},{prefix:ib(l,{family:c})});return oe(oe(oe({},u),sY({values:t,family:c,styles:mp,config:Ie,canonical:u,givenPrefix:i})),nY(n,i,u))}function nY(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?DL(r):{},o=pc(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!mp.far&&mp.fas&&!Ie.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const iY=yL.filter(t=>t!==fi||t!==tb),rY=Object.keys(BS).filter(t=>t!==fi).map(t=>Object.keys(BS[t])).flat();function sY(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===tb,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||c||u)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&iY.includes(n)&&(Object.keys(s).find(h=>rY.includes(h))||o.autoFetchSvg)){const h=cq.get(n).defaultShortPrefixId;i.prefix=h,i.iconName=pc(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=hl()||"fas"),i}class oY{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=oe(oe({},this.definitions[s]||{}),r[s]),YS(s,r[s]);const o=cC[fi][s];o&&YS(o,r[s]),LL()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=a)}),e[s][o]=a}),e}}let x3=[],Uu={};const nd={},aY=Object.keys(nd);function lY(t,e){let{mixoutsTo:n}=e;return x3=t,Uu={},Object.keys(nd).forEach(i=>{aY.indexOf(i)===-1&&delete nd[i]}),x3.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{Uu[o]||(Uu[o]=[]),Uu[o].push(s[o])})}i.provides&&i.provides(nd)}),n}function XS(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(Uu[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function jc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(Uu[t]||[]).forEach(s=>{s.apply(null,n)})}function pl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return nd[t]?nd[t].apply(null,e):void 0}function JS(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||hl();if(e)return e=pc(n,e)||e,v3(FL.definitions,n,e)||v3(Zs.styles,n,e)}const FL=new oY,cY=()=>{Ie.autoReplaceSvg=!1,Ie.observeMutations=!1,jc("noAuto")},uY={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return sa?(jc("beforeI2svg",t),pl("pseudoElements2svg",t),pl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Ie.autoReplaceSvg===!1&&(Ie.autoReplaceSvg=!0),Ie.observeMutations=!0,Wq(()=>{fY({autoReplaceSvgRoot:e}),jc("watch",t)})}},dY={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:pc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=ib(t[0]);return{prefix:n,iconName:pc(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Ie.cssPrefix,"-"))>-1||t.match(Mq))){const e=rb(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||hl(),iconName:pc(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=hl();return{prefix:e,iconName:pc(e,t)||t}}}},Cr={noAuto:cY,config:Ie,dom:uY,parse:dY,library:FL,findIconDefinition:JS,toHtml:am},fY=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Ut}=t;(Object.keys(Zs.styles).length>0||Ie.autoFetchSvg)&&sa&&Ie.autoReplaceSvg&&Cr.dom.i2svg({node:e})};function sb(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>am(n))}}),Object.defineProperty(t,"node",{get:function(){if(!sa)return;const n=Ut.createElement("div");return n.innerHTML=t.html,n.children}}),t}function hY(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(dC(o)&&n.found&&!i.found){const{width:a,height:l}=n,c={x:a/l/2,y:.5};r.style=nb(oe(oe({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function pY(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(Ie.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:oe(oe({},r),{},{id:o}),children:i}]}]}function pC(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:d=!1}=t,{width:h,height:p}=n.found?n:e,g=pq.includes(i),m=[Ie.replacementClass,r?"".concat(Ie.cssPrefix,"-").concat(r):""].filter(_=>u.classes.indexOf(_)===-1).filter(_=>_!==""||!!_).concat(u.classes).join(" ");let v={children:[],attributes:oe(oe({},u.attributes),{},{"data-prefix":i,"data-icon":r,class:m,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h," ").concat(p)})};const y=g&&!~u.classes.indexOf("fa-fw")?{width:"".concat(h/p*16*.0625,"em")}:{};d&&(v.attributes[Ic]=""),a&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(c||pp())},children:[a]}),delete v.attributes.title);const x=oe(oe({},v),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:oe(oe({},y),u.styles)}),{children:w,attributes:S}=n.found&&e.found?pl("generateAbstractMask",x)||{children:[],attributes:{}}:pl("generateAbstractIcon",x)||{children:[],attributes:{}};return x.children=w,x.attributes=S,o?pY(x):hY(x)}function w3(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=oe(oe(oe({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Ic]="");const c=oe({},o.styles);dC(r)&&(c.transform=Uq({transform:r,startCentered:!0,width:n,height:i}),c["-webkit-transform"]=c.transform);const u=nb(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function mY(t){const{content:e,title:n,extra:i}=t,r=oe(oe(oe({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=nb(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:Zx}=Zs;function ZS(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat(Ie.cssPrefix,"-").concat(Yx.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ie.cssPrefix,"-").concat(Yx.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(Ie.cssPrefix,"-").concat(Yx.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const gY={found:!1,width:512,height:512};function vY(t,e){!SL&&!Ie.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function QS(t,e){let n=e;return e==="fa"&&Ie.styleDefault!==null&&(e=hl()),new Promise((i,r)=>{if(n==="fa"){const s=DL(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&Zx[e]&&Zx[e][t]){const s=Zx[e][t];return i(ZS(s))}vY(t,e),i(oe(oe({},gY),{},{icon:Ie.showMissingIcons&&t?pl("missingIconAbstract")||{}:{}}))})}const S3=()=>{},e2=Ie.measurePerformance&&lg&&lg.mark&&lg.measure?lg:{mark:S3,measure:S3},rh='FA "6.7.1"',yY=t=>(e2.mark("".concat(rh," ").concat(t," begins")),()=>zL(t)),zL=t=>{e2.mark("".concat(rh," ").concat(t," ends")),e2.measure("".concat(rh," ").concat(t),"".concat(rh," ").concat(t," begins"),"".concat(rh," ").concat(t," ends"))};var mC={begin:yY,end:zL};const v0=()=>{};function k3(t){return typeof(t.getAttribute?t.getAttribute(Ic):null)=="string"}function bY(t){const e=t.getAttribute?t.getAttribute(aC):null,n=t.getAttribute?t.getAttribute(lC):null;return e&&n}function xY(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Ie.replacementClass)}function wY(){return Ie.autoReplaceSvg===!0?y0.replace:y0[Ie.autoReplaceSvg]||y0.replace}function SY(t){return Ut.createElementNS("http://www.w3.org/2000/svg",t)}function kY(t){return Ut.createElement(t)}function BL(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?SY:kY}=e;if(typeof t=="string")return Ut.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild(BL(s,{ceFn:n}))}),i}function _Y(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const y0={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(BL(n),e)}),e.getAttribute(Ic)===null&&Ie.keepOriginalSource){let n=Ut.createComment(_Y(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~uC(e).indexOf(Ie.replacementClass))return y0.replace(t);const i=new RegExp("".concat(Ie.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===Ie.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>am(s)).join(`
`);e.setAttribute(Ic,""),e.innerHTML=r}};function _3(t){t()}function UL(t,e){const n=typeof e=="function"?e:v0;if(t.length===0)n();else{let i=_3;Ie.mutateApproach===Aq&&(i=fl.requestAnimationFrame||_3),i(()=>{const r=wY(),s=mC.begin("mutate");t.map(r),s(),n()})}}let gC=!1;function VL(){gC=!0}function t2(){gC=!1}let Ev=null;function C3(t){if(!d3||!Ie.observeMutations)return;const{treeCallback:e=v0,nodeCallback:n=v0,pseudoElementsCallback:i=v0,observeMutationsRoot:r=Ut}=t;Ev=new d3(s=>{if(gC)return;const o=hl();nf(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!k3(a.addedNodes[0])&&(Ie.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Ie.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&k3(a.target)&&~Oq.indexOf(a.attributeName))if(a.attributeName==="class"&&bY(a.target)){const{prefix:l,iconName:c}=rb(uC(a.target));a.target.setAttribute(aC,l||o),c&&a.target.setAttribute(lC,c)}else xY(a.target)&&n(a.target)})}),sa&&Ev.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function CY(){Ev&&Ev.disconnect()}function EY(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function AY(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=rb(uC(t));return r.prefix||(r.prefix=hl()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=Zq(r.prefix,t.innerText)||hC(r.prefix,qS(t.innerText))),!r.iconName&&Ie.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function NY(t){const e=nf(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return Ie.autoA11y&&(n?e["aria-labelledby"]="".concat(Ie.replacementClass,"-title-").concat(i||pp()):(e["aria-hidden"]="true",e.focusable="false")),e}function PY(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Js,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function E3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=AY(t),s=NY(t),o=XS("parseNodeAttributes",{},t);let a=e.styleParser?EY(t):[];return oe({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:Js,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:MY}=Zs;function HL(t){const e=Ie.autoReplaceSvg==="nest"?E3(t,{styleParser:!1}):E3(t);return~e.extra.classes.indexOf(_L)?pl("generateLayersText",t,e):pl("generateSvgReplacementMutation",t,e)}function RY(){return[...dq,...US]}function A3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!sa)return Promise.resolve();const n=Ut.documentElement.classList,i=u=>n.add("".concat(p3,"-").concat(u)),r=u=>n.remove("".concat(p3,"-").concat(u)),s=Ie.autoFetchSvg?RY():vL.concat(Object.keys(MY));s.includes("fa")||s.push("fa");const o=[".".concat(_L,":not([").concat(Ic,"])")].concat(s.map(u=>".".concat(u,":not([").concat(Ic,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=nf(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=mC.begin("onTree"),c=a.reduce((u,d)=>{try{const h=HL(d);h&&u.push(h)}catch(h){SL||h.name==="MissingIcon"&&console.error(h)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(h=>{UL(h,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),u()})}).catch(h=>{l(),d(h)})})}function TY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;HL(t).then(n=>{n&&UL([n],e)})}function OY(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:JS(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:JS(r||{})),t(i,oe(oe({},n),{},{mask:r}))}}const IY=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Js,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!t)return;const{prefix:d,iconName:h,icon:p}=t;return sb(oe({type:"icon"},t),()=>(jc("beforeDOMElementCreation",{iconDefinition:t,params:e}),Ie.autoA11y&&(o?c["aria-labelledby"]="".concat(Ie.replacementClass,"-title-").concat(a||pp()):(c["aria-hidden"]="true",c.focusable="false")),pC({icons:{main:ZS(p),mask:r?ZS(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:h,transform:oe(oe({},Js),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var jY={mixout(){return{icon:OY(IY)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=A3,t.nodeCallback=TY,t}}},provides(t){t.i2svg=function(e){const{node:n=Ut,callback:i=()=>{}}=e;return A3(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:d}=n;return new Promise((h,p)=>{Promise.all([QS(i,o),c.iconName?QS(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(g=>{let[m,v]=g;h([e,pC({icons:{main:m,mask:v},prefix:o,iconName:i,transform:a,symbol:l,maskId:u,title:r,titleId:s,extra:d,watchable:!0})])}).catch(p)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=nb(o);a.length>0&&(i.style=a);let l;return dC(s)&&(l=pl("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},LY={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return sb({type:"layer"},()=>{jc("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat(Ie.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},DY={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return sb({type:"counter",content:t},()=>(jc("beforeDOMElementCreation",{content:t,params:e}),mY({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat(Ie.cssPrefix,"-layers-counter"),...i]}})))}}}},$Y={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Js,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return sb({type:"text",content:t},()=>(jc("beforeDOMElementCreation",{content:t,params:e}),w3({content:t,transform:oe(oe({},Js),n),title:i,extra:{attributes:s,styles:o,classes:["".concat(Ie.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(mL){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return Ie.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,w3({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const FY=new RegExp('"',"ug"),N3=[1105920,1112319],P3=oe(oe(oe(oe({},{FontAwesome:{normal:"fas",400:"fas"}}),lq),Cq),yq),n2=Object.keys(P3).reduce((t,e)=>(t[e.toLowerCase()]=P3[e],t),{}),zY=Object.keys(n2).reduce((t,e)=>{const n=n2[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function BY(t){const e=t.replace(FY,""),n=Kq(e,0),i=n>=N3[0]&&n<=N3[1],r=e.length===2?e[0]===e[1]:!1;return{value:qS(r?e[0]:e),isSecondary:i||r}}function UY(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(n2[n]||{})[r]||zY[n]}function M3(t,e){const n="".concat(Eq).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=nf(t.children).filter(h=>h.getAttribute(HS)===e)[0],a=fl.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),c=l.match(Rq),u=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return t.removeChild(o),i();if(c&&d!=="none"&&d!==""){const h=a.getPropertyValue("content");let p=UY(l,u);const{value:g,isSecondary:m}=BY(h),v=c[0].startsWith("FontAwesome");let y=hC(p,g),x=y;if(v){const w=Qq(g);w.iconName&&w.prefix&&(y=w.iconName,p=w.prefix)}if(y&&!m&&(!o||o.getAttribute(aC)!==p||o.getAttribute(lC)!==x)){t.setAttribute(n,x),o&&t.removeChild(o);const w=PY(),{extra:S}=w;S.attributes[HS]=e,QS(y,p).then(_=>{const E=pC(oe(oe({},w),{},{icons:{main:_,mask:$L()},prefix:p,iconName:x,extra:S,watchable:!0})),C=Ut.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(C,t.firstChild):t.appendChild(C),C.outerHTML=E.map(N=>am(N)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function VY(t){return Promise.all([M3(t,"::before"),M3(t,"::after")])}function HY(t){return t.parentNode!==document.head&&!~Nq.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(HS)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function R3(t){if(sa)return new Promise((e,n)=>{const i=nf(t.querySelectorAll("*")).filter(HY).map(VY),r=mC.begin("searchPseudoElements");VL(),Promise.all(i).then(()=>{r(),t2(),e()}).catch(()=>{r(),t2(),n()})})}var WY={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=R3,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=Ut}=e;Ie.searchPseudoElements&&R3(n)}}};let T3=!1;var GY={mixout(){return{dom:{unwatch(){VL(),T3=!0}}}},hooks(){return{bootstrap(){C3(XS("mutationObserverCallbacks",{}))},noAuto(){CY()},watch(t){const{observeMutationsRoot:e}=t;T3?t2():C3(XS("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const O3=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var KY={mixout(){return{parse:{transform:t=>O3(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=O3(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),c="rotate(".concat(i.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},d={transform:"translate(".concat(s/2*-1," -256)")},h={outer:o,inner:u,path:d};return{tag:"g",attributes:oe({},h.outer),children:[{tag:"g",attributes:oe({},h.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:oe(oe({},n.icon.attributes),h.path)}]}]}}}};const Qx={x:0,y:0,width:"100%",height:"100%"};function I3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function qY(t){return t.tag==="g"?t.children:[t]}var YY={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?rb(n.split(" ").map(r=>r.trim())):$L();return i.prefix||(i.prefix=hl()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:c}=r,{width:u,icon:d}=s,h=Bq({transform:a,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:oe(oe({},Qx),{},{fill:"white"})},g=c.children?{children:c.children.map(I3)}:{},m={tag:"g",attributes:oe({},h.inner),children:[I3(oe({tag:c.tag,attributes:oe(oe({},c.attributes),h.path)},g))]},v={tag:"g",attributes:oe({},h.outer),children:[m]},y="mask-".concat(o||pp()),x="clip-".concat(o||pp()),w={tag:"mask",attributes:oe(oe({},Qx),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},S={tag:"defs",children:[{tag:"clipPath",attributes:{id:x},children:qY(d)},w]};return n.push(S,{tag:"rect",attributes:oe({fill:"currentColor","clip-path":"url(#".concat(x,")"),mask:"url(#".concat(y,")")},Qx)}),{children:n,attributes:i}}}},XY={provides(t){let e=!1;fl.matchMedia&&(e=fl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:oe(oe({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=oe(oe({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:oe(oe({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:oe(oe({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:oe(oe({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:oe(oe({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:oe(oe({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},JY={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},ZY=[Hq,jY,LY,DY,$Y,WY,GY,KY,YY,XY,JY];lY(ZY,{mixoutsTo:Cr});Cr.noAuto;Cr.config;Cr.library;Cr.dom;const i2=Cr.parse;Cr.findIconDefinition;Cr.toHtml;const QY=Cr.icon;Cr.layer;Cr.text;Cr.counter;var WL={exports:{}},eX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",tX=eX,nX=tX;function GL(){}function KL(){}KL.resetWarningCache=GL;var iX=function(){function t(i,r,s,o,a,l){if(l!==nX){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:KL,resetWarningCache:GL};return n.PropTypes=n,n};WL.exports=iX();var rX=WL.exports;const ot=qc(rX);function j3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Vs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j3(Object(n),!0).forEach(function(i){Vu(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Av(t){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Av(t)}function Vu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sX(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function oX(t,e){if(t==null)return{};var n=sX(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function r2(t){return aX(t)||lX(t)||cX(t)||uX()}function aX(t){if(Array.isArray(t))return s2(t)}function lX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cX(t,e){if(t){if(typeof t=="string")return s2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s2(t,e)}}function s2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function uX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dX(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,d=t.pulse,h=t.fixedWidth,p=t.inverse,g=t.border,m=t.listItem,v=t.flip,y=t.size,x=t.rotation,w=t.pull,S=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":h,"fa-inverse":p,"fa-border":g,"fa-li":m,"fa-flip":v===!0,"fa-flip-horizontal":v==="horizontal"||v==="both","fa-flip-vertical":v==="vertical"||v==="both"},Vu(e,"fa-".concat(y),typeof y<"u"&&y!==null),Vu(e,"fa-rotate-".concat(x),typeof x<"u"&&x!==null&&x!==0),Vu(e,"fa-pull-".concat(w),typeof w<"u"&&w!==null),Vu(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(S).map(function(_){return S[_]?_:null}).filter(function(_){return _})}function fX(t){return t=t-0,t===t}function qL(t){return fX(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var hX=["style"];function pX(t){return t.charAt(0).toUpperCase()+t.slice(1)}function mX(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=qL(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[pX(r)]=s:e[r]=s,e},{})}function YL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return YL(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=mX(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[qL(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=oX(n,hX);return r.attrs.style=Vs(Vs({},r.attrs.style),o),t.apply(void 0,[e.tag,Vs(Vs({},r.attrs),a)].concat(r2(i)))}var XL=!1;try{XL=!0}catch{}function gX(){if(!XL&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function L3(t){if(t&&Av(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(i2.icon)return i2.icon(t);if(t===null)return null;if(t&&Av(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function e1(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Vu({},t,e):{}}var D3={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Oe=Ft.forwardRef(function(t,e){var n=Vs(Vs({},D3),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=L3(i),d=e1("classes",[].concat(r2(dX(n)),r2((o||"").split(" ")))),h=e1("transform",typeof n.transform=="string"?i2.transform(n.transform):n.transform),p=e1("mask",L3(r)),g=QY(u,Vs(Vs(Vs(Vs({},d),h),p),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!g)return gX("Could not find icon",u),null;var m=g.abstract,v={ref:e};return Object.keys(n).forEach(function(y){D3.hasOwnProperty(y)||(v[y]=n[y])}),vX(m[0],v)});Oe.displayName="FontAwesomeIcon";Oe.propTypes={beat:ot.bool,border:ot.bool,beatFade:ot.bool,bounce:ot.bool,className:ot.string,fade:ot.bool,flash:ot.bool,mask:ot.oneOfType([ot.object,ot.array,ot.string]),maskId:ot.string,fixedWidth:ot.bool,inverse:ot.bool,flip:ot.oneOf([!0,!1,"horizontal","vertical","both"]),icon:ot.oneOfType([ot.object,ot.array,ot.string]),listItem:ot.bool,pull:ot.oneOf(["right","left"]),pulse:ot.bool,rotation:ot.oneOf([0,90,180,270]),shake:ot.bool,size:ot.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:ot.bool,spinPulse:ot.bool,spinReverse:ot.bool,symbol:ot.oneOfType([ot.bool,ot.string]),title:ot.string,titleId:ot.string,transform:ot.oneOfType([ot.string,ot.object]),swapOpacity:ot.bool};var vX=YL.bind(null,Ft.createElement);function JL(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=JL(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Q(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=JL(t))&&(i&&(i+=" "),i+=e);return i}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const $3={prefix:"fas",iconName:"info",icon:[192,512,[],"f129","M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"]},yX={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},vC=yX,id={prefix:"fas",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"]},bX={prefix:"fas",iconName:"compress",icon:[448,512,[],"f066","M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"]},xX={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},wX={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},SX={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},kX={prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"]},_X={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},CX=_X,Nh={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},EX={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},AX=EX,NX={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},PX={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},MX=PX,F3={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},RX={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},ZL=RX,TX={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},QL=TX,OX={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},z3=OX,IX={prefix:"fas",iconName:"backward-step",icon:[320,512,["step-backward"],"f048","M267.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-320c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160L64 241 64 96c0-17.7-14.3-32-32-32S0 78.3 0 96L0 416c0 17.7 14.3 32 32 32s32-14.3 32-32l0-145 11.5 9.6 192 160z"]},eD=IX,Nv={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},Pv={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]},gp={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},jX={prefix:"fas",iconName:"expand",icon:[448,512,[],"f065","M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"]},LX={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},lm=LX,tD={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},DX={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},$X={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},yC={prefix:"fas",iconName:"trophy",icon:[576,512,[127942],"f091","M400 0L176 0c-26.5 0-48.1 21.8-47.1 48.2c.2 5.3 .4 10.6 .7 15.8L24 64C10.7 64 0 74.7 0 88c0 92.6 33.5 157 78.5 200.7c44.3 43.1 98.3 64.8 138.1 75.8c23.4 6.5 39.4 26 39.4 45.6c0 20.9-17 37.9-37.9 37.9L192 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-26.1 0C337 448 320 431 320 410.1c0-19.6 15.9-39.2 39.4-45.6c39.9-11 93.9-32.7 138.2-75.8C542.5 245 576 180.6 576 88c0-13.3-10.7-24-24-24L446.4 64c.3-5.2 .5-10.4 .7-15.8C448.1 21.8 426.5 0 400 0zM48.9 112l84.4 0c9.1 90.1 29.2 150.3 51.9 190.6c-24.9-11-50.8-26.5-73.2-48.3c-32-31.1-58-76-63-142.3zM464.1 254.3c-22.4 21.8-48.3 37.3-73.2 48.3c22.7-40.3 42.8-100.5 51.9-190.6l84.4 0c-5.1 66.3-31.1 111.2-63 142.3z"]},nD={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},FX={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},zX=FX,BX={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]},UX={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M96 0C43 0 0 43 0 96L0 416c0 53 43 96 96 96l288 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64c17.7 0 32-14.3 32-32l0-320c0-17.7-14.3-32-32-32L384 0 96 0zm0 384l256 0 0 64L96 448c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16zm16 48l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},iD={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},VX={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},o2=VX,HX={prefix:"fas",iconName:"database",icon:[448,512,[],"f1c0","M448 80l0 48c0 44.2-100.3 80-224 80S0 172.2 0 128L0 80C0 35.8 100.3 0 224 0S448 35.8 448 80zM393.2 214.7c20.8-7.4 39.9-16.9 54.8-28.6L448 288c0 44.2-100.3 80-224 80S0 332.2 0 288L0 186.1c14.9 11.8 34 21.2 54.8 28.6C99.7 230.7 159.5 240 224 240s124.3-9.3 169.2-25.3zM0 346.1c14.9 11.8 34 21.2 54.8 28.6C99.7 390.7 159.5 400 224 400s124.3-9.3 169.2-25.3c20.8-7.4 39.9-16.9 54.8-28.6l0 85.9c0 44.2-100.3 80-224 80S0 476.2 0 432l0-85.9z"]},cm={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[127891,"mortar-board"],"f19d","M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9l0 28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5l0-24.6c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"]},rD={default:"bg-stone-800 text-white hover:bg-stone-700 focus:ring-stone-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-stone-600 bg-transparent text-white hover:bg-stone-800 focus:ring-stone-500",secondary:"bg-stone-700 text-white hover:bg-stone-600 focus:ring-stone-500",ghost:"bg-transparent text-stone-300 hover:bg-stone-800 hover:text-white focus:ring-stone-500",link:"bg-transparent text-mantis-400 hover:text-mantis-300 hover:underline focus:ring-mantis-500",primary:"bg-mantis-600 text-white hover:bg-mantis-700 focus:ring-mantis-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",error:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},WX={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg"},lt=b.memo(b.forwardRef(({variant:t="default",size:e="md",isLoading:n=!1,loadingText:i,leftIcon:r,rightIcon:s,disabled:o=!1,fullWidth:a=!1,className:l,children:c,onClick:u,type:d="button","aria-label":h,title:p,...g},m)=>{const v=o||n;return f.jsxs("button",{ref:m,type:d,disabled:v,onClick:u,"aria-label":h,title:p,className:Q("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",rD[t],WX[e],a&&"w-full",l),...g,children:[n&&f.jsx(Oe,{icon:nD,className:"animate-spin","aria-hidden":"true"}),!n&&r&&f.jsx("span",{className:"flex items-center","aria-hidden":"true",children:r}),f.jsx("span",{children:n&&i?i:c}),!n&&s&&f.jsx("span",{className:"flex items-center","aria-hidden":"true",children:s})]})}));lt.displayName="Button";const b0=b.memo(b.forwardRef(({icon:t,variant:e="ghost",size:n="md",isLoading:i=!1,disabled:r=!1,className:s,onClick:o,"aria-label":a,title:l,...c},u)=>{const d=r||i,h={sm:"size-8",md:"size-10",lg:"size-12",xl:"size-14"};return f.jsx("button",{ref:u,disabled:d,onClick:o,"aria-label":a,title:l,className:Q("inline-flex items-center justify-center rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",rD[e],h[n],s),...c,children:i?f.jsx(Oe,{icon:nD,className:"animate-spin","aria-hidden":"true"}):f.jsx("span",{className:"flex items-center justify-center","aria-hidden":"true",children:t})})}));b0.displayName="IconButton";const GX=b.memo(({children:t,orientation:e="horizontal",className:n})=>f.jsx("div",{className:Q("inline-flex",e==="horizontal"?"flex-row":"flex-col",n),role:"group",children:t}));GX.displayName="ButtonGroup";const sD={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2","top-start":"bottom-full left-0 mb-2","top-end":"bottom-full right-0 mb-2","bottom-start":"top-full left-0 mt-2","bottom-end":"top-full right-0 mt-2"},oD={top:"top-full left-1/2 transform -translate-x-1/2 border-t-stone-800",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-b-stone-800",left:"left-full top-1/2 transform -translate-y-1/2 border-l-stone-800",right:"right-full top-1/2 transform -translate-y-1/2 border-r-stone-800","top-start":"top-full left-4 border-t-stone-800","top-end":"top-full right-4 border-t-stone-800","bottom-start":"bottom-full left-4 border-b-stone-800","bottom-end":"bottom-full right-4 border-b-stone-800"},vr=b.memo(({content:t,children:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=b.useState(!1),[u,d]=b.useState(n),h=b.useRef(null),p=b.useRef(null),g=b.useRef(),m=b.useCallback(()=>{a||(document.body.classList.add("tooltip-open"),g.current=setTimeout(()=>{c(!0)},i))},[a,i]),v=b.useCallback(()=>{g.current&&clearTimeout(g.current),document.body.classList.remove("tooltip-open"),c(!1)},[]);return b.useEffect(()=>{if(!l||!p.current||!h.current)return;const y=p.current,w=h.current.getBoundingClientRect(),S=y.getBoundingClientRect();let _=n;w.left+S.width>window.innerWidth&&(n.includes("right")?_="left":n.includes("top")?_="top-end":n.includes("bottom")&&(_="bottom-end")),w.left-S.width<0&&(n.includes("left")?_="right":n.includes("top")?_="top-start":n.includes("bottom")&&(_="bottom-start")),w.top-S.height<0&&n.includes("top")&&(_="bottom"),w.bottom+S.height>window.innerHeight&&n.includes("bottom")&&(_="top"),d(_)},[l,n]),f.jsxs("div",{ref:h,className:Q("relative inline-block",r),onMouseEnter:m,onMouseLeave:v,onFocus:m,onBlur:v,children:[e,l&&f.jsxs("div",{ref:p,className:Q("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",sD[u]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&f.jsx("div",{className:Q("absolute size-0 border-4 border-transparent",oD[u])})]})]})});vr.displayName="Tooltip";const KX=b.memo(({content:t,className:e,size:n="md"})=>{const i={sm:"size-3",md:"size-4",lg:"size-5"};return f.jsx(vr,{content:t,className:e,children:f.jsx(Oe,{icon:QL,className:Q("cursor-help text-stone-400 transition-colors hover:text-stone-300",i[n])})})});KX.displayName="InfoTooltip";const qX=b.memo(({content:t,trigger:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=b.useState(!1),u=b.useRef(null),d=b.useRef(null),h=b.useRef(),p=b.useCallback(()=>{a||(h.current=setTimeout(()=>{c(!0)},i))},[a,i]),g=b.useCallback(()=>{h.current&&clearTimeout(h.current),c(!1)},[]);return f.jsxs("div",{ref:u,className:Q("relative inline-block",r),onMouseEnter:p,onMouseLeave:g,onFocus:p,onBlur:g,children:[e,l&&f.jsxs("div",{ref:d,className:Q("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",sD[n]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&f.jsx("div",{className:Q("absolute size-0 border-4 border-transparent",oD[n])})]})]})});qX.displayName="CustomTooltip";function aD(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const lD=["en","es"];function bC(t){return function(n,i,...r){const s=aD(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const xC={},YX=Symbol((xC?"production":void 0)!=="production"?"RESET":""),cD=t=>typeof(t==null?void 0:t.then)=="function";function XX(t=()=>{try{return window.localStorage}catch(n){(xC?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let i,r;const s={getItem:(l,c)=>{var u,d;const h=g=>{if(g=g||"",i!==g){try{r=JSON.parse(g,e==null?void 0:e.reviver)}catch{return c}i=g}return r},p=(d=(u=t())==null?void 0:u.getItem(l))!=null?d:null;return cD(p)?p.then(h):h(p)},setItem:(l,c)=>{var u;return(u=t())==null?void 0:u.setItem(l,JSON.stringify(c,void 0))},removeItem:l=>{var c;return(c=t())==null?void 0:c.removeItem(l)}},o=l=>(c,u,d)=>l(c,h=>{let p;try{p=JSON.parse(h||"")}catch{p=d}u(p)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,c)=>{if(!(t()instanceof window.Storage))return()=>{};const u=d=>{d.storageArea===t()&&d.key===l&&c(d.newValue)};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}}),a&&(s.subscribe=o(a)),s}const JX=XX();function uD(t,e,n=JX,i){const r=i==null?void 0:i.getOnInit,s=ue(r?n.getItem(t,e):e);return(xC?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},ue(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===YX?(l(s,e),n.removeItem(t)):cD(u)?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}const D=rC();function ZX(t){return f.jsx(kK,{store:D,children:t.children})}var bt;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(bt||(bt={}));var B3;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(B3||(B3={}));const Me=bt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Sa=t=>{switch(typeof t){case"undefined":return Me.undefined;case"string":return Me.string;case"number":return Number.isNaN(t)?Me.nan:Me.number;case"boolean":return Me.boolean;case"function":return Me.function;case"bigint":return Me.bigint;case"symbol":return Me.symbol;case"object":return Array.isArray(t)?Me.array:t===null?Me.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Me.promise:typeof Map<"u"&&t instanceof Map?Me.map:typeof Set<"u"&&t instanceof Set?Me.set:typeof Date<"u"&&t instanceof Date?Me.date:Me.object;default:return Me.unknown}},ce=bt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Qo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return r(this),i}static assert(e){if(!(e instanceof Qo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,bt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)if(r.path.length>0){const s=r.path[0];n[s]=n[s]||[],n[s].push(e(r))}else i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}Qo.create=t=>new Qo(t);const a2=(t,e)=>{let n;switch(t.code){case ce.invalid_type:t.received===Me.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,bt.jsonStringifyReplacer)}`;break;case ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${bt.joinValues(t.keys,", ")}`;break;case ce.invalid_union:n="Invalid input";break;case ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${bt.joinValues(t.options)}`;break;case ce.invalid_enum_value:n=`Invalid enum value. Expected ${bt.joinValues(t.options)}, received '${t.received}'`;break;case ce.invalid_arguments:n="Invalid function arguments";break;case ce.invalid_return_type:n="Invalid function return type";break;case ce.invalid_date:n="Invalid date";break;case ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:bt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ce.custom:n="Invalid input";break;case ce.invalid_intersection_types:n="Intersection results could not be merged";break;case ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,bt.assertNever(t)}return{message:n}};let QX=a2;function eJ(){return QX}const tJ=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=i.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}};function we(t,e){const n=eJ(),i=tJ({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===a2?void 0:a2].filter(r=>!!r)});t.common.issues.push(i)}class wr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Ye;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return wr.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Ye;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Ye=Object.freeze({status:"aborted"}),sh=t=>({status:"dirty",value:t}),Zr=t=>({status:"valid",value:t}),U3=t=>t.status==="aborted",V3=t=>t.status==="dirty",jd=t=>t.status==="valid",Mv=t=>typeof Promise<"u"&&t instanceof Promise;var Te;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Te||(Te={}));class ml{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const H3=(t,e)=>{if(jd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Qo(t.common.issues);return this._error=n,this._error}}};function st(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??i??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:r}}class yt{get description(){return this._def.description}_getType(e){return Sa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Sa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new wr,ctx:{common:e.parent.common,data:e.data,parsedType:Sa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Mv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sa(e)},r=this._parseSync({data:e,path:i.path,parent:i});return H3(i,r)}"~validate"(e){var i,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sa(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return jd(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(r=(i=s==null?void 0:s.message)==null?void 0:i.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>jd(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sa(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(Mv(r)?r:Promise.resolve(r));return H3(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:ce.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new $d({schema:this,typeName:Xe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return rl.create(this,this._def)}nullable(){return Fd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return oo.create(this)}promise(){return Iv.create(this,this._def)}or(e){return Tv.create([this,e],this._def)}and(e){return Ov.create(this,e,this._def)}transform(e){return new $d({...st(this._def),schema:this,typeName:Xe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new u2({...st(this._def),innerType:this,defaultValue:n,typeName:Xe.ZodDefault})}brand(){return new _J({typeName:Xe.ZodBranded,type:this,...st(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new d2({...st(this._def),innerType:this,catchValue:n,typeName:Xe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return wC.create(this,e)}readonly(){return f2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const nJ=/^c[^\s-]{8,}$/i,iJ=/^[0-9a-z]+$/,rJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,sJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,oJ=/^[a-z0-9_-]{21}$/i,aJ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,lJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,cJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,uJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let t1;const dJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,fJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,hJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,pJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,mJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,gJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vJ=new RegExp(`^${dD}$`);function fD(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function yJ(t){return new RegExp(`^${fD(t)}$`)}function bJ(t){let e=`${dD}T${fD(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function xJ(t,e){return!!((e==="v4"||!e)&&dJ.test(t)||(e==="v6"||!e)&&hJ.test(t))}function wJ(t,e){if(!aJ.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(i));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function SJ(t,e){return!!((e==="v4"||!e)&&fJ.test(t)||(e==="v6"||!e)&&pJ.test(t))}class mc extends yt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Me.string){const s=this._getOrReturnCtx(e);return we(s,{code:ce.invalid_type,expected:Me.string,received:s.parsedType}),Ye}const i=new wr;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?we(r,{code:ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&we(r,{code:ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")cJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"email",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")t1||(t1=new RegExp(uJ,"u")),t1.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"emoji",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")sJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"uuid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")oJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"nanoid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")nJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"cuid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")iJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"cuid2",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")rJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"ulid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),we(r,{validation:"url",code:ce.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"regex",code:ce.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?bJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?vJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?yJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?lJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"duration",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?xJ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"ip",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?wJ(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"jwt",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?SJ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"cidr",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?mJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"base64",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?gJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"base64url",code:ce.invalid_string,message:s.message}),i.dirty()):bt.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:ce.invalid_string,...Te.errToObj(i)})}_addCheck(e){return new mc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Te.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Te.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Te.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Te.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Te.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Te.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Te.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Te.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Te.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Te.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Te.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Te.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Te.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Te.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Te.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Te.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Te.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Te.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Te.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Te.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Te.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Te.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Te.errToObj(n)})}nonempty(e){return this.min(1,Te.errToObj(e))}trim(){return new mc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new mc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new mc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}mc.create=t=>new mc({checks:[],typeName:Xe.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...st(t)});function kJ(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=Number.parseInt(t.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return s%o/10**r}class Ld extends yt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Me.number){const s=this._getOrReturnCtx(e);return we(s,{code:ce.invalid_type,expected:Me.number,received:s.parsedType}),Ye}let i;const r=new wr;for(const s of this._def.checks)s.kind==="int"?bt.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{code:ce.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?kJ(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{code:ce.not_finite,message:s.message}),r.dirty()):bt.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Te.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Te.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Te.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Te.toString(n))}setLimit(e,n,i,r){return new Ld({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Te.toString(r)}]})}_addCheck(e){return new Ld({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Te.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Te.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Te.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Te.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Te.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Te.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&bt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ld.create=t=>new Ld({checks:[],typeName:Xe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...st(t)});class vp extends yt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Me.bigint)return this._getInvalidInput(e);let i;const r=new wr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):bt.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return we(n,{code:ce.invalid_type,expected:Me.bigint,received:n.parsedType}),Ye}gte(e,n){return this.setLimit("min",e,!0,Te.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Te.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Te.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Te.toString(n))}setLimit(e,n,i,r){return new vp({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Te.toString(r)}]})}_addCheck(e){return new vp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Te.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Te.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}vp.create=t=>new vp({checks:[],typeName:Xe.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...st(t)});class l2 extends yt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Me.boolean){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.boolean,received:i.parsedType}),Ye}return Zr(e.data)}}l2.create=t=>new l2({typeName:Xe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...st(t)});class Rv extends yt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Me.date){const s=this._getOrReturnCtx(e);return we(s,{code:ce.invalid_type,expected:Me.date,received:s.parsedType}),Ye}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return we(s,{code:ce.invalid_date}),Ye}const i=new wr;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:ce.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:ce.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):bt.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Rv({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Te.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Te.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Rv.create=t=>new Rv({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Xe.ZodDate,...st(t)});class W3 extends yt{_parse(e){if(this._getType(e)!==Me.symbol){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.symbol,received:i.parsedType}),Ye}return Zr(e.data)}}W3.create=t=>new W3({typeName:Xe.ZodSymbol,...st(t)});class G3 extends yt{_parse(e){if(this._getType(e)!==Me.undefined){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.undefined,received:i.parsedType}),Ye}return Zr(e.data)}}G3.create=t=>new G3({typeName:Xe.ZodUndefined,...st(t)});class K3 extends yt{_parse(e){if(this._getType(e)!==Me.null){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.null,received:i.parsedType}),Ye}return Zr(e.data)}}K3.create=t=>new K3({typeName:Xe.ZodNull,...st(t)});class q3 extends yt{constructor(){super(...arguments),this._any=!0}_parse(e){return Zr(e.data)}}q3.create=t=>new q3({typeName:Xe.ZodAny,...st(t)});class Y3 extends yt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Zr(e.data)}}Y3.create=t=>new Y3({typeName:Xe.ZodUnknown,...st(t)});class gl extends yt{_parse(e){const n=this._getOrReturnCtx(e);return we(n,{code:ce.invalid_type,expected:Me.never,received:n.parsedType}),Ye}}gl.create=t=>new gl({typeName:Xe.ZodNever,...st(t)});class X3 extends yt{_parse(e){if(this._getType(e)!==Me.undefined){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.void,received:i.parsedType}),Ye}return Zr(e.data)}}X3.create=t=>new X3({typeName:Xe.ZodVoid,...st(t)});class oo extends yt{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==Me.array)return we(n,{code:ce.invalid_type,expected:Me.array,received:n.parsedType}),Ye;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(we(n,{code:o?ce.too_big:ce.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(we(n,{code:ce.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(we(n,{code:ce.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new ml(n,o,n.path,a)))).then(o=>wr.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new ml(n,o,n.path,a)));return wr.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new oo({...this._def,minLength:{value:e,message:Te.toString(n)}})}max(e,n){return new oo({...this._def,maxLength:{value:e,message:Te.toString(n)}})}length(e,n){return new oo({...this._def,exactLength:{value:e,message:Te.toString(n)}})}nonempty(e){return this.min(1,e)}}oo.create=(t,e)=>new oo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Xe.ZodArray,...st(e)});function bu(t){if(t instanceof gn){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=rl.create(bu(i))}return new gn({...t._def,shape:()=>e})}else return t instanceof oo?new oo({...t._def,type:bu(t.element)}):t instanceof rl?rl.create(bu(t.unwrap())):t instanceof Fd?Fd.create(bu(t.unwrap())):t instanceof Lc?Lc.create(t.items.map(e=>bu(e))):t}class gn extends yt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=bt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Me.object){const c=this._getOrReturnCtx(e);return we(c,{code:ce.invalid_type,expected:Me.object,received:c.parsedType}),Ye}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof gl&&this._def.unknownKeys==="strip"))for(const c in r.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new ml(r,d,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof gl){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")a.length>0&&(we(r,{code:ce.unrecognized_keys,keys:a}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new ml(r,d,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,h=await u.value;c.push({key:d,value:h,alwaysSet:u.alwaysSet})}return c}).then(c=>wr.mergeObjectSync(i,c)):wr.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Te.errToObj,new gn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var s,o;const r=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,i).message)??i.defaultError;return n.code==="unrecognized_keys"?{message:Te.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new gn({...this._def,unknownKeys:"strip"})}passthrough(){return new gn({...this._def,unknownKeys:"passthrough"})}extend(e){return new gn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new gn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Xe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new gn({...this._def,catchall:e})}pick(e){const n={};for(const i of bt.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new gn({...this._def,shape:()=>n})}omit(e){const n={};for(const i of bt.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new gn({...this._def,shape:()=>n})}deepPartial(){return bu(this)}partial(e){const n={};for(const i of bt.objectKeys(this.shape)){const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}return new gn({...this._def,shape:()=>n})}required(e){const n={};for(const i of bt.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof rl;)s=s._def.innerType;n[i]=s}return new gn({...this._def,shape:()=>n})}keyof(){return hD(bt.objectKeys(this.shape))}}gn.create=(t,e)=>new gn({shape:()=>t,unknownKeys:"strip",catchall:gl.create(),typeName:Xe.ZodObject,...st(e)});gn.strictCreate=(t,e)=>new gn({shape:()=>t,unknownKeys:"strict",catchall:gl.create(),typeName:Xe.ZodObject,...st(e)});gn.lazycreate=(t,e)=>new gn({shape:t,unknownKeys:"strip",catchall:gl.create(),typeName:Xe.ZodObject,...st(e)});class Tv extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Qo(a.ctx.common.issues));return we(n,{code:ce.invalid_union,unionErrors:o}),Ye}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Qo(l));return we(n,{code:ce.invalid_union,unionErrors:a}),Ye}}get options(){return this._def.options}}Tv.create=(t,e)=>new Tv({options:t,typeName:Xe.ZodUnion,...st(e)});function c2(t,e){const n=Sa(t),i=Sa(e);if(t===e)return{valid:!0,data:t};if(n===Me.object&&i===Me.object){const r=bt.objectKeys(e),s=bt.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=c2(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===Me.array&&i===Me.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=c2(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===Me.date&&i===Me.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ov extends yt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(U3(s)||U3(o))return Ye;const a=c2(s.value,o.value);return a.valid?((V3(s)||V3(o))&&n.dirty(),{status:n.value,value:a.data}):(we(i,{code:ce.invalid_intersection_types}),Ye)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Ov.create=(t,e,n)=>new Ov({left:t,right:e,typeName:Xe.ZodIntersection,...st(n)});class Lc extends yt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.array)return we(i,{code:ce.invalid_type,expected:Me.array,received:i.parsedType}),Ye;if(i.data.length<this._def.items.length)return we(i,{code:ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ye;!this._def.rest&&i.data.length>this._def.items.length&&(we(i,{code:ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new ml(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>wr.mergeArray(n,o)):wr.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Lc({...this._def,rest:e})}}Lc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Lc({items:t,typeName:Xe.ZodTuple,rest:null,...st(e)})};class J3 extends yt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.map)return we(i,{code:ce.invalid_type,expected:Me.map,received:i.parsedType}),Ye;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],c)=>({key:r._parse(new ml(i,a,i.path,[c,"key"])),value:s._parse(new ml(i,l,i.path,[c,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Ye;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Ye;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}J3.create=(t,e,n)=>new J3({valueType:e,keyType:t,typeName:Xe.ZodMap,...st(n)});class yp extends yt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.set)return we(i,{code:ce.invalid_type,expected:Me.set,received:i.parsedType}),Ye;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(we(i,{code:ce.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(we(i,{code:ce.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Ye;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...i.data.values()].map((l,c)=>s._parse(new ml(i,l,i.path,c)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new yp({...this._def,minSize:{value:e,message:Te.toString(n)}})}max(e,n){return new yp({...this._def,maxSize:{value:e,message:Te.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}yp.create=(t,e)=>new yp({valueType:t,minSize:null,maxSize:null,typeName:Xe.ZodSet,...st(e)});class Z3 extends yt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Z3.create=(t,e)=>new Z3({getter:t,typeName:Xe.ZodLazy,...st(e)});class Q3 extends yt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return we(n,{received:n.data,code:ce.invalid_literal,expected:this._def.value}),Ye}return{status:"valid",value:e.data}}get value(){return this._def.value}}Q3.create=(t,e)=>new Q3({value:t,typeName:Xe.ZodLiteral,...st(e)});function hD(t,e){return new Dd({values:t,typeName:Xe.ZodEnum,...st(e)})}class Dd extends yt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return we(n,{expected:bt.joinValues(i),received:n.parsedType,code:ce.invalid_type}),Ye}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return we(n,{received:n.data,code:ce.invalid_enum_value,options:i}),Ye}return Zr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Dd.create(e,{...this._def,...n})}exclude(e,n=this._def){return Dd.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Dd.create=hD;class e4 extends yt{_parse(e){const n=bt.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==Me.string&&i.parsedType!==Me.number){const r=bt.objectValues(n);return we(i,{expected:bt.joinValues(r),received:i.parsedType,code:ce.invalid_type}),Ye}if(this._cache||(this._cache=new Set(bt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=bt.objectValues(n);return we(i,{received:i.data,code:ce.invalid_enum_value,options:r}),Ye}return Zr(e.data)}get enum(){return this._def.values}}e4.create=(t,e)=>new e4({values:t,typeName:Xe.ZodNativeEnum,...st(e)});class Iv extends yt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Me.promise&&n.common.async===!1)return we(n,{code:ce.invalid_type,expected:Me.promise,received:n.parsedType}),Ye;const i=n.parsedType===Me.promise?n.data:Promise.resolve(n.data);return Zr(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Iv.create=(t,e)=>new Iv({type:t,typeName:Xe.ZodPromise,...st(e)});class $d extends yt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Xe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{we(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ye;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?Ye:l.status==="dirty"||n.value==="dirty"?sh(l.value):l});{if(n.value==="aborted")return Ye;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?Ye:a.status==="dirty"||n.value==="dirty"?sh(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Ye:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Ye:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!jd(o))return Ye;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>jd(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):Ye);bt.assertNever(r)}}$d.create=(t,e,n)=>new $d({schema:t,typeName:Xe.ZodEffects,effect:e,...st(n)});$d.createWithPreprocess=(t,e,n)=>new $d({schema:e,effect:{type:"preprocess",transform:t},typeName:Xe.ZodEffects,...st(n)});class rl extends yt{_parse(e){return this._getType(e)===Me.undefined?Zr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rl.create=(t,e)=>new rl({innerType:t,typeName:Xe.ZodOptional,...st(e)});class Fd extends yt{_parse(e){return this._getType(e)===Me.null?Zr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fd.create=(t,e)=>new Fd({innerType:t,typeName:Xe.ZodNullable,...st(e)});class u2 extends yt{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===Me.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}u2.create=(t,e)=>new u2({innerType:t,typeName:Xe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...st(e)});class d2 extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Mv(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Qo(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Qo(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}d2.create=(t,e)=>new d2({innerType:t,typeName:Xe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...st(e)});class t4 extends yt{_parse(e){if(this._getType(e)!==Me.nan){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.nan,received:i.parsedType}),Ye}return{status:"valid",value:e.data}}}t4.create=t=>new t4({typeName:Xe.ZodNaN,...st(t)});class _J extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class wC extends yt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Ye:s.status==="dirty"?(n.dirty(),sh(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Ye:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new wC({in:e,out:n,typeName:Xe.ZodPipeline})}}class f2 extends yt{_parse(e){const n=this._def.innerType._parse(e),i=r=>(jd(r)&&(r.value=Object.freeze(r.value)),r);return Mv(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}f2.create=(t,e)=>new f2({innerType:t,typeName:Xe.ZodReadonly,...st(e)});var Xe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Xe||(Xe={}));const Gl=Ld.create,su=l2.create;gl.create;oo.create;const n4=gn.create;Tv.create;Ov.create;Lc.create;const ou=Dd.create;Iv.create;rl.create;Fd.create;const CJ=["randomize","clean","unchanged"],EJ=["switches-and-leds","printer","null"],AJ=["printer","null"],h2=n4({showInstructionCycle:su().catch(!1),showStatsCPU:su().catch(!0),language:ou(lD).catch(NJ),editorFontSize:Gl().int().min(8).max(64).catch(14),dataOnLoad:ou(CJ).catch("clean"),devices:n4({keyboardAndScreen:su(),pic:su(),pio:ou(["switches-and-leds","printer"]).nullable(),handshake:ou(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:su().catch(!0),executionUnit:Gl().min(1).max(500).catch(150),clockSpeed:Gl().min(100).max(1e3).catch(1e3),cpuSpeed:ou(["1","2","4","10"]).catch("1"),printerSpeed:Gl().min(500).max(2e4).catch(5e3),flagsVisibility:ou(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:Gl().min(0).catch(1),filterContrast:Gl().min(0).catch(1),filterInvert:su().catch(!1),filterSaturation:Gl().min(0).catch(1)}),xu=h2.parse({});function NJ(){const t=navigator.language.toLowerCase();for(const e of lD)if(t.startsWith(e))return e;return"en"}const Qr=uD("vonsim-settings",xu,{getItem(t,e){try{const n=localStorage.getItem(t);return h2.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=h2.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),Tn=()=>D.get(Qr),rf=()=>sm(Qr);ue(t=>t(Qr).showInstructionCycle);ue(t=>t(Qr).showStatsCPU);const PJ=ue(t=>t(Qr).language),SC=()=>it(PJ);ue(t=>t(Qr).flagsVisibility);const MJ=ue(t=>t(Qr).editorFontSize),RJ=()=>it(MJ);ue(t=>t(Qr).dataOnLoad);const TJ=ue(t=>t(Qr).devices),pD=()=>it(TJ);ue(t=>{const e=t(Qr);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});const OJ=ue(t=>{const e=t(Qr);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")}),IJ=()=>it(OJ);function bp(t){const e=t.charCodeAt(0);return B.fitsUnsigned(e,8)?e:null}function kC(t){return B.fitsUnsigned(t,8)?String.fromCharCode(t):null}function mD(t){return jJ.at(t)??null}const jJ=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","","","","","","","","","","","","","SHY","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];var Wt,Jt;const ht=class ht{constructor(e,n){je(this,Wt);je(this,Jt);ee(this,Wt,e|0),ee(this,Jt,n)}get size(){return A(this,Jt)}is8bits(){return A(this,Jt)===8}is16bits(){return A(this,Jt)===16}get unsigned(){return A(this,Wt)}get signed(){return A(this,Wt)<=ht.maxSignedValue(A(this,Jt))?A(this,Wt):A(this,Wt)-(ht.maxValue(A(this,Jt))+1)}get low(){return this.is8bits()?this:ht.fromUnsigned(A(this,Wt)&ht.maxValue(8),8)}get high(){return this.is8bits()?new ht(0,8):ht.fromUnsigned(A(this,Wt)>>8&ht.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return ht.fromUnsigned(A(this,Wt)&~ht.maxValue(8)|e.unsigned,A(this,Jt))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return ht.fromUnsigned(A(this,Wt)&ht.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Jt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Jt)}`);return(A(this,Wt)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Jt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Jt)}`);return n?ht.fromUnsigned(A(this,Wt)|1<<e,A(this,Jt)):ht.fromUnsigned(A(this,Wt)&~(1<<e),A(this,Jt))}add(e){return e=Number(e),ht.fromUnsigned(A(this,Wt)+e,A(this,Jt))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,Wt)===A(e,Wt)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,Jt));for(let n=0;n<A(this,Jt);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,Wt).toString(16).padStart(A(this,Jt)/4,"0").toUpperCase();case"bin":return A(this,Wt).toString(2).padStart(A(this,Jt),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,Jt)===8?kC(A(this,Wt))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,Jt)===8?mD(A(this,Wt))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,Wt)}valueOf(){return A(this,Wt)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=ht.minSignedValue(n)&&e<=ht.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=ht.minValue()&&e<=ht.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=ht.minSignedValue(n)&&e<=ht.maxSignedValue(n)}static fromUnsigned(e,n){if(!ht.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new ht(e,n)}static fromSigned(e,n){if(!ht.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new ht(e+ht.maxValue(n)+1,n):new ht(e,n)}static fromNumber(e,n){return e<0?ht.fromSigned(e,n):ht.fromUnsigned(e,n)}static fromChar(e){const n=bp(e)??-1;return ht.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*ht.maxValue(e));return new ht(n,e)}static zero(e){return new ht(0,e)}};Wt=new WeakMap,Jt=new WeakMap;let B=ht;var No;const Ea=class Ea{constructor(e){je(this,No);ee(this,No,e)}get value(){return A(this,No).unsigned}get byte(){return A(this,No)}toString(e=!1){let n=A(this,No).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,No).toJSON()}valueOf(){return A(this,No).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Ea.MIN_ADDRESS&&e<=Ea.MAX_ADDRESS}static from(e){if(e=Number(e),!Ea.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=B.fromUnsigned(e,16);return new Ea(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};No=new WeakMap,pe(Ea,"MIN_ADDRESS",0),pe(Ea,"MAX_ADDRESS",255);let ke=Ea;var Po;const Aa=class Aa{constructor(e){je(this,Po);ee(this,Po,e)}get value(){return A(this,Po).unsigned}get byte(){return A(this,Po)}toString(e=!0){let n=A(this,Po).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,Po).toJSON()}valueOf(){return A(this,Po).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Aa.MIN_ADDRESS&&e<=Aa.MAX_ADDRESS}static from(e){if(e=Number(e),!Aa.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=B.fromUnsigned(e,8);return new Aa(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};Po=new WeakMap,pe(Aa,"MIN_ADDRESS",0),pe(Aa,"MAX_ADDRESS",127);let Sr=Aa;function i4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function r4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i4(Object(n),!0).forEach(function(i){LJ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i4(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function LJ(t,e,n){return e=DJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DJ(t){var e=$J(t,"string");return typeof e=="symbol"?e:String(e)}function $J(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const jv=gD({});function gD(t){return e.withOptions=n=>gD(r4(r4({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n),trimWhitespace:o=!0}=t;let a="";for(let u=0;u<r.length;u++){let d=r[u];s&&(d=d.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),a+=d,u<i.length&&(a+=i[u])}const l=a.split(`
`);let c=null;for(const u of l){const d=u.match(/^(\s+)\S+/);if(d){const h=d[1].length;c?c=Math.min(c,h):c=h}}if(c!==null){const u=c;a=l.map(d=>d[0]===" "||d[0]==="	"?d.slice(u):d).join(`
`)}return o&&(a=a.trim()),s&&(a=a.replace(/\\n/g,`
`)),a}}const FJ=ke.from(ke.MAX_ADDRESS).toString(),zJ={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${Sr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!","new-version-available":"There's a new version available in the repository.","local-update":"A new local version has been detected.",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:jv`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"Cycle","end-of-instruction":"Instruction",infinity:"End"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instruccin",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."},"total-cycles":"Total cycles","instruction-count":"Instruction count",cpi:"Cycles per instruction (CPI)","cpi-help":"Average clock cycles per executed instruction (CPI = total cycles / total instructions)","cpu-time":"CPU time","cpu-time-help":"Total CPU time = total cycles  cycle time (current: {cycleTime} ms)"},memory:{name:"Memory",cell:t=>`Cell ${ke.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${FJ}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"READ MEMORY","write-memory":"WRITE MEMORY"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Enabling animations."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>jv`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"f788950"}](https://github.com/ruiz-jose/VonSim8/commit/${"f788950"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},BJ=ke.from(ke.MAX_ADDRESS).toString(),UJ={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${Sr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"Hay una nueva versin disponible!","new-version-available":"Hay una nueva versin disponible en el repositorio.","local-update":"Se ha detectado una nueva versin local.",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Accin invlida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la FileSystem API","no-file":"No hay ningn archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:jv`
      ; Bienvenido a VonSim 8!
      ; Este es un ejemplo de cdigo que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Ciclo","end-of-instruction":"Instruccin",infinity:"Final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadsticas CPU","instruction-cycle":"Ciclo de instruccin",status:{fetching:"Captacin instruccin...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupcin...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."},"total-cycles":"Total de ciclos","instruction-count":"Recuento de instrucciones",cpi:"Ciclos por instruccin (CPI)","cpi-help":"Promedio de ciclos de reloj por instruccin ejecutada (CPI = ciclos totales / instrucciones totales)","cpu-time":"Tiempo de CPU","cpu-time-help":"Tiempo total de CPU = ciclos totales  tiempo de ciclo (actual: {cycleTime} ms)"},memory:{name:"Memoria",cell:t=>`Celda ${ke.format(t)}`,"fix-address":"Fijar direccin","unfix-address":"Desfijar direccin","address-must-be-integer":"El valor de inicio debe ser un nmero entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${BJ}.`,"address-increment":"Incrementar direccin (Page Up)","address-decrement":"Decrementar direccin (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"LEER MEMORIA","write-memory":"ESCRIBIR MEMORIA"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuracin",instructionCycle:{label:"Ciclo de Instruccin"},statsCPU:{label:"Estadsticas CPU"},flags:{label:"Banderas",description:"Selecciona qu banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamao de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qu hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qu dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"Tambin agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Habilitacin de animaciones."].join(" ")},speeds:{executionUnit:"Velocidad de simulacin",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresin"},filters:{label:"Filtros",description:"Filtros aplicados a la pgina. til cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturacin"},reset:"Restablecer configuracin"},footer:{documentation:"Documentacin",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>jv`
        <!-- Por favor, describa el problema que est teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Informacin extra (POR FAVOR, NO BORRAR)</summary>

          **Versin**: [${"f788950"}](https://github.com/ruiz-jose/VonSim8/commit/${"f788950"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuracin

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},ob=bC({en:zJ,es:UJ});function Ht(){const t=SC();return b.useCallback((e,...n)=>ob(t,e,...n),[t])}const VJ=[{name:"Documentacin",url:"https://ruiz-jose.github.io/VonSim8/docs/",icon:"icon-[lucide--book-open]"},{name:"GitHub",url:"https://github.com/ruiz-jose/VonSim8",icon:ZK}],vD=b.memo(({name:t,url:e,icon:n})=>f.jsx(vr,{content:t,position:"top",children:f.jsx(lt,{variant:"ghost",size:"sm",onClick:()=>window.open(e,"_blank"),className:"hover-lift","aria-label":t,children:typeof n=="string"?f.jsx("span",{className:Q(n,"size-4")}):f.jsx(Oe,{icon:n,className:"size-4"})})}));vD.displayName="SocialLink";const yD=b.memo(()=>{const t=Ht(),[e]=rf(),n=b.useMemo(()=>{var s;const i=((s=window.codemirror)==null?void 0:s.state.doc.toString())||"",r=t("footer.issue.body",e,i);return`https://github.com/ruiz-jose/VonSim8/issues/new?body=${encodeURIComponent(r)}`},[t,e]);return f.jsx("footer",{className:"bg-black px-3 py-1.5 text-xs text-white","data-testid":"footer",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:"text-stone-400",children:[" Copyright 2017-2025  III-LIDI, FI, UNLP, UNER  v","f788950"]}),f.jsxs("div",{className:"flex items-center gap-1","data-testid":"footer-links",children:[VJ.map(i=>f.jsx(vD,{name:i.name,url:i.url,icon:i.icon},i.name)),f.jsx(vr,{content:t("footer.issue.report"),position:"top",children:f.jsx(lt,{variant:"ghost",size:"sm",onClick:()=>window.open(n,"_blank"),className:"hover-lift","aria-label":t("footer.issue.report"),children:f.jsx("span",{className:"icon-[lucide--bug] size-4"})})})]})]})})});yD.displayName="Footer";const HJ="modulepreload",WJ=function(t){return"/VonSim8/"+t},s4={},bD=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=WJ(l),l in s4)return;s4[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":HJ,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function xp(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class un{constructor(e,n){pe(this,"start");pe(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new un(i,r)}toJSON(){return this.range}}const o4=ke.from(ke.MAX_ADDRESS).toString(),GJ=Sr.from(Sr.MAX_ADDRESS).toString(),KJ={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${ke.format(t)} is out of range (max memory address: ${o4}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":`The program is empty or does not contain executable instructions.

Remember: a valid program must have at least one instruction and end with the END directive.

For example:

    org 1000h
    mov al, 3
    hlt
    end

See the documentation or examples for more help.`,"end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","instruction-out-of-range":t=>`This instruction would be placed in address ${ke.format(t)}, which is outside the memory range (max memory address: ${o4}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${GJ}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction  cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea."}},a4=ke.from(ke.MAX_ADDRESS).toString(),qJ=Sr.from(Sr.MAX_ADDRESS).toString(),YJ={"address-has-code":t=>`La direccin de memoria ${ke.format(t)} tiene instrucciones. No se puede usar como direccin de datos.`,"address-out-of-range":t=>`La direccin de memoria ${ke.format(t)} est fuera de rango (direccin mxima de memoria: ${a4}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una direccin de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detect una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instruccin.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":`El programa est vaco o no contiene instrucciones ejecutables.

Recuerda que un programa vlido debe tener al menos una instruccin y finalizar con la directiva END.

Por ejemplo:

    org 1000h
    mov al, 3
    hlt
    end

Consulta la documentacin o los ejemplos para ms ayuda.`,"end-must-be-the-last-statement":"END debe ser la ltima instruccin.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El nico registro vlido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instruccin no espera ningn operando.","expects-one-operand":"Esta instruccin espera un operando.","expects-two-operands":"Esta instruccin espera dos operandos.","expects-word-register":"Esta instruccin espera un registro de 16 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parmetros. Solo se permiten comentarios en la misma lnea.","instruction-out-of-range":t=>`Esta instruccin se colocara en la direccin ${ke.format(t)}, la cual se encuentra fuera del rango de memoria (direccin mxima de memoria: ${a4}).`,"invalid-interrupt":t=>`${t} no es un nmero de interrupcin vlido.`,"io-address-out-of-range":t=>`La direccin de E/S ${t} est fuera de rango (direccin mxima de memoria E/S: ${qJ}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debera apuntar a una constante EQU o a una instruccin. Quizs quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debera apuntar a una instruccin.`,"missing-org":"No hay ningn ORG antes de esta instruccin, por lo que no se puede determinar su ubicacin en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instruccin sera colocada en la direccin ${ke.format(t)}, la cual ya est ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instruccin sera colocada en la direccin ${ke.format(t)}, la cual ya est reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamao.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una direccin de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la direccin.","value-out-of-range":(t,e)=>`El nmero ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carcter solo puede contener un carcter.","empty-character":"Los carcter no puede estar vaco.","invalid-binary":"Nmero binario invlido. Solo puede contener ceros y unos.","invalid-decimal":"Nmero decimal invlido. Solo puede contener dgitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carcter inesperado "${t}".`,"unterminated-character":"Carcter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detect una expresin unaria ambigua. Use parntesis para evitar ambigedades.","expected-address-after-org":"Se esperaba una direccin despus de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instruccin termine.","expected-instruction":t=>`Se esperaba una instruccin, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta despus de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instruccin despus de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" despus de la expresin.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" despus de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El nico registro vlido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Parntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parmetros. Solo se permiten comentarios en la misma lnea."}},XJ=bC({en:KJ,es:YJ});class se extends Error{constructor(n,...i){super();pe(this,"code");pe(this,"context");pe(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof un?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return XJ(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof se?n:new se("unexpected-error",n)}}const _C=[[0,B.fromUnsigned(160,8)],[3,B.fromUnsigned(176,8)],[6,B.fromUnsigned(192,8)],[7,B.fromUnsigned(208,8)]],l4=new Set(..._C.map(([t])=>[t]));var Ta,hd;class JJ{constructor(){pe(this,"codeMemory",new Set);pe(this,"labels",new Map);pe(this,"hasORG",!1);je(this,Ta,!1);je(this,hd,!1)}loadStatements(e){if(A(this,Ta))throw new Error("Tried to load statements twice");ee(this,Ta,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new se("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:ke.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:ke.from(0)})}return n}computeAddresses(e){if(A(this,hd))throw new Error("Tried to compute addresses twice");ee(this,hd,!0),this.codeMemory.clear();const n=new Set,i=e.some(u=>u.isInstruction()&&u.instruction==="INT");if(this.hasORG=e.some(u=>u.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new se("missing-org").at(e[0].position);let r=i&&!this.hasORG?8:this.hasORG?32:0,s=null,o=r;const a=[],l=[],c=[];for(const u of e)u.isInstruction()?a.push(u):u.isOriginChange()?l.push(u):u.isDataDirective()&&c.push(u);if(this.hasORG){const u=[],d=[];return xp(e,h=>{if(h.isEnd()||h.isDataDirective()&&h.directive==="EQU")return;if(h.isOriginChange()){r=h.newAddress;return}const p=r;if(p===null)throw new se("missing-org").at(h);const g=h.length,m=p,v=p+g-1;for(const x of d)if(Math.max(m,x.start)<=Math.min(v,x.end)){u.push(new se("occupied-address",ke.from(m)).at(h));return}d.push({start:m,end:v,statement:h});for(let x=0;x<g;x++){if(!ke.inRange(p+x))throw new se("instruction-out-of-range",p+x).at(h);const w=ke.from(p+x);if(n.has(w.value))throw new se("occupied-address",w).at(h);if(i&&l4.has(w.value))throw new se("reserved-address",w).at(h);n.add(w.value),h.isInstruction()&&this.codeMemory.add(w.value)}const y=ke.from(p);h.setStart(y),h.label&&this.labels.set(h.label,{type:h.isInstruction()?"instruction":h.directive,address:y}),(h.isDataDirective()||h.isInstruction())&&(r+=g,o=Math.max(o,r))},se.from),u}else return xp([...a,...l,...c],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const m=d.newAddress;m<32?s=m:r=m;return}let h;if(d.isDataDirective())s===null&&(s=o),h=s;else if(d.isInstruction())h=r;else throw new se("missing-org").at(d);const p=d.length;for(let m=0;m<p;m++){if(!ke.inRange(h+m))throw new se("instruction-out-of-range",h+m).at(d);const v=ke.from(h+m);if(n.has(v.value))throw new se("occupied-address",v).at(d);if(i&&l4.has(v.value))throw new se("reserved-address",v).at(d);n.add(v.value),d.isInstruction()&&this.codeMemory.add(v.value)}const g=ke.from(h);if(d.setStart(g),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:g}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=p}else d.isInstruction()&&(r+=p,o=Math.max(o,r))},se.from)}labelExists(e){if(!A(this,Ta))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,Ta))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,Ta))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,hd))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof ke&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}Ta=new WeakMap,hd=new WeakMap;const ZJ=["AL","BL","CL","DL","AH","BH","CH","DH"],xD=["AX","BX","CX","DX","SP"],Lv=[...ZJ,...xD],CC=["DB","DW","EQU"],EC=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],QJ=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...Lv,...EC,...CC];class eZ{constructor(e,n,i){pe(this,"type");pe(this,"lexeme");pe(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class tZ{constructor(e){pe(this,"scanned",!1);pe(this,"tokens",[]);pe(this,"position",new un(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new un(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-character").at(this.position);if(bp(this.peek())===null)throw new se("lexer.only-ascii").at(new un(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new se("lexer.empty-character").at(this.position);if(n>=2)throw new se("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-string").at(this.position);if(bp(this.peek())===null)throw new se("lexer.only-ascii").at(new un(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()===".")throw new se("lexer.unexpected-character",".").at(new un(this.position.end,this.position.end+1));if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new se("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new se("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){if(e==="."&&this.isDigit(this.peek()))throw new se("lexer.unexpected-character",".").at(new un(this.position.start,this.position.start+1));for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();QJ.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new se("lexer.unexpected-character",e).at(this.position)}return this.position=new un(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new eZ(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new un(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class Vn{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}pe(Vn,"numberLiteral",(...e)=>new nZ(...e)),pe(Vn,"label",(...e)=>new iZ(...e)),pe(Vn,"unaryOperation",(...e)=>new rZ(...e)),pe(Vn,"binaryOperation",(...e)=>new sZ(...e));class nZ extends Vn{constructor(n,i){super(i);pe(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let iZ=class extends Vn{constructor(n,i,r){super(r);pe(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new se("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new se("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new se("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class rZ extends Vn{constructor(n,i,r){super(r);pe(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class sZ extends Vn{constructor(n,i,r,s){super(s);pe(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class ab{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var Mo;class wD extends ab{constructor(n,i,r){super(r);pe(this,"type","data-directive");pe(this,"label");pe(this,"values");je(this,Mo,null);this.values=n,this.label=i}get start(){if(A(this,Mo)===null)throw new Error("Start not set");return A(this,Mo)}setStart(n){if(A(this,Mo)!==null)throw new Error("Start already set");ee(this,Mo,n)}toJSON(){return{...super.toJSON(),...A(this,Mo)?{start:A(this,Mo).toJSON()}:{},directive:this.directive,label:this.label}}}Mo=new WeakMap;var vc,Oa,pd;class oZ extends wD{constructor(n,i,r){super(n,i,r);pe(this,"directive","EQU");je(this,vc,"not-processed");je(this,Oa,null);je(this,pd,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,pd)??((n=A(this,Oa))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(A(this,Oa))throw new Error("Constant already validated");if(!this.label)throw new se("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new se("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new se("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new se("cannot-be-unassinged","EQU").at(n);ee(this,Oa,n.value)}evaluateExpressions(n){if(!A(this,Oa))throw new Error("Constant not validated");if(A(this,vc)==="processed")return A(this,pd);if(A(this,vc)==="processing")throw new se("circular-reference").at(this.position);ee(this,vc,"processed");const i=A(this,Oa).evaluate(n);return ee(this,vc,"processed"),ee(this,pd,i),i}evaluate(n){return this.evaluateExpressions(n)}}vc=new WeakMap,Oa=new WeakMap,pd=new WeakMap;const oh=Symbol("unassigned");var Ii,ss;class aZ extends wD{constructor(n,i,r,s){super(i,r,s);pe(this,"size");je(this,Ii,null);je(this,ss,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,Ii))throw new Error("Data directive not validated");return A(this,Ii).length*(this.size/8)}getValues(){if(!A(this,ss))throw new Error("Data directive not evaluated");return A(this,ss)}toJSON(){return{...super.toJSON(),values:(A(this,ss)??A(this,Ii)??this.values).map(n=>n===oh?"?":n.toJSON())}}validate(){if(A(this,Ii))throw new Error("Data directive already validated");ee(this,Ii,[]);for(const n of this.values)if(n.isUnassigned())A(this,Ii).push(oh);else if(n.isString()){if(this.directive!=="DB")throw new se("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=bp(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new un(n.position.start+r,n.position.start+r+1),a=Vn.numberLiteral(s,o);A(this,Ii).push(a)}}else A(this,Ii).push(n.value);if(A(this,Ii).length===0)throw new se("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,Ii))throw new Error("Data directive not validated");if(A(this,ss))throw new Error("Data directive already evaluated");ee(this,ss,[]);const i=xp(A(this,Ii),r=>{if(r===oh)A(this,ss).push(oh);else{const s=r.evaluate(n);if(!B.fits(s,this.size))throw new se("value-out-of-range",s,this.size).at(this);const o=B.fromNumber(s,this.size);A(this,ss).push(o)}},se.from);return i.length>0&&ee(this,ss,null),i}}Ii=new WeakMap,ss=new WeakMap;class AC{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class lZ extends AC{constructor(n,i){super(i);pe(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class cZ extends AC{constructor(n){super(n);pe(this,"type","unassigned")}}class uZ extends AC{constructor(n){super(n.position);pe(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function dZ(t,e,n){const i=un.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new aZ(t.type,e,n,i);case"EQU":return new oZ(e,n,i)}}class n1 extends ab{constructor(n){super(n);pe(this,"type","end")}}function rc(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var Ro;class Jc extends ab{constructor(n,i,r){super(r);pe(this,"type","instruction");pe(this,"label");pe(this,"operands");je(this,Ro,null);this.operands=n,this.label=i}getOperands(){return this.operands}get start(){if(A(this,Ro)===null)throw new Error("Start not set");return A(this,Ro)}setStart(n){if(A(this,Ro)!==null)throw new Error("Start already set");ee(this,Ro,n)}toJSON(){return{...super.toJSON(),...A(this,Ro)?{start:A(this,Ro).toJSON()}:{},instruction:this.instruction,label:this.label}}}Ro=new WeakMap;var si,Nr;class fZ extends Jc{constructor(n,i,r,s){super(i,r,s);je(this,si,null);je(this,Nr,null);this.instruction=n}get length(){if(!A(this,si))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=A(this,si);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!A(this,Nr))throw new Error("Instruction not evaluated");return A(this,Nr)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(rc(r)&3)<<2,o[0]|=(rc(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(rc(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(rc(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(rc(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,Nr)??A(this,si)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,si))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new se("size-mismatch",r.size,i.size).at(this);ee(this,si,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);ee(this,si,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);ee(this,si,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new se("size-mismatch",s.size,i.size).at(this);ee(this,si,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}ee(this,si,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new se("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new se("size-mismatch",s,r.size).at(this);ee(this,si,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new se("double-memory-access").at(this);s==="auto"&&(s=8),ee(this,si,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new se("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,si))throw new Error("Instruction not validated");if(A(this,Nr))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=A(this,si),a=l=>{const c=l.evaluate(n);if(!ke.inRange(c))throw new se("address-out-of-range",c).at(l);const u=ke.from(c);if(n.addressIsReserved(u))throw new se("address-has-code",u).at(l);return u};switch(i){case"reg<-reg":{ee(this,Nr,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{ee(this,Nr,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!B.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const c=B.fromNumber(l,r);ee(this,Nr,{mode:i,size:r,out:s,src:c});return}case"mem<-reg":{ee(this,Nr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!B.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const c=B.fromNumber(l,r);ee(this,Nr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return i}}}si=new WeakMap,Nr=new WeakMap;var $s,To;class hZ extends Jc{constructor(n,i,r,s){super(i,r,s);je(this,$s,null);je(this,To,null);pe(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,To))throw new Error("Instruction not evaluated");return A(this,To)}toJSON(){return{...super.toJSON(),...A(this,To)?{value:A(this,To).toJSON()}:A(this,$s)?{initialValue:A(this,$s).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,$s))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new se("expects-immediate").at(n);ee(this,$s,n.value)}evaluateExpressions(n){if(!A(this,$s))throw new Error("Instruction not validated");if(A(this,To))throw new Error("Instruction aready evaluated");const i=A(this,$s).evaluate(n);if(!B.fitsUnsigned(i,8))throw new se("invalid-interrupt",i).at(A(this,$s));ee(this,To,B.fromUnsigned(i,8))}}$s=new WeakMap,To=new WeakMap;var os,Oo,VT;let pZ=(VT=class extends Jc{constructor(n,i,r,s){super(i,r,s);je(this,os,null);je(this,Oo,null);this.instruction=n}get length(){if(!A(this,os))throw new Error("Instruction not validated");return A(this,os).port==="fixed"?2:1}toBytes(){const n=[],i={IN:216,OUT:220};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,Oo)===null)throw new Error("Operation not set");return A(this,Oo)}toJSON(){return{...super.toJSON(),...A(this,Oo)??A(this,os)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,os))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new se("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new se("expects-dx").at(i);ee(this,os,{port:"variable",size:r});return}if(i.isNumberExpression()){ee(this,os,{port:"fixed",size:r,address:i.value});return}throw new se("expects-immediate").at(i)}evaluateExpressions(n){if(!A(this,os))throw new Error("Instruction not validated");if(A(this,Oo))throw new Error("Instruction aready evaluated");const i=A(this,os);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!Sr.inRange(r))throw new se("io-address-out-of-range",r).at(this);const s=Sr.from(r);ee(this,Oo,{port:"fixed",size:i.size,address:s})}else ee(this,Oo,{port:"variable",size:i.size})}},os=new WeakMap,Oo=new WeakMap,VT);var Io,Fs,HT;let mZ=(HT=class extends Jc{constructor(n,i,r,s){super(i,r,s);je(this,Io,null);je(this,Fs,null);pe(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,Fs)===null)throw new Error("Instruction not evaluated");return A(this,Fs)}toJSON(){return{...super.toJSON(),...A(this,Fs)?{address:A(this,Fs).toJSON()}:A(this,Io)?{jumpTo:A(this,Io)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Io))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel()&&!i.value.isNumberLiteral())throw new se("expects-label").at(i);if(i.value.isLabel()){const r=i.value.value,s=n.getLabelType(r);if(!s)throw new se("label-not-found",r).at(i);if(s!=="instruction")throw new se("label-should-be-an-instruction",r).at(i);ee(this,Io,r)}else if(i.value.isNumberLiteral()){const r=i.value.value;if(!ke.inRange(r))throw new se("address-out-of-range",r).at(i);ee(this,Fs,ke.from(r))}}evaluateExpressions(n){if(!A(this,Fs)&&A(this,Io)){const i=n.getLabelValue(A(this,Io));if(!ke.inRange(i))throw new se("address-out-of-range",i).at(this);ee(this,Fs,ke.from(i))}}},Io=new WeakMap,Fs=new WeakMap,HT);var zs,WT;let gZ=(WT=class extends Jc{constructor(n,i,r,s){super(i,r,s);je(this,zs,null);pe(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:208,POP:212}[this.instruction];return i|=rc(this.register),new Uint8Array([i])}get register(){if(!A(this,zs))throw new Error("Instruction not evaluated");return A(this,zs)}toJSON(){return{...super.toJSON(),...A(this,zs)?{register:A(this,zs)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,zs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new se("expects-word-register").at(n);ee(this,zs,n.value)}evaluateExpressions(){if(!A(this,zs))throw new Error("Instruction not validated")}},zs=new WeakMap,WT);var tr,Bs;class vZ extends Jc{constructor(n,i,r,s){super(i,r,s);je(this,tr,null);je(this,Bs,null);this.instruction=n}get length(){if(!A(this,tr))throw new Error("Instruction not validated");const{mode:n}=A(this,tr);let i=1;return n==="mem-direct"&&(i+=1),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=rc(this.operation.reg);break}case"mem-direct":{const r=this.operation.address.byte;n.push(r.low.unsigned);break}case"mem-indirect":break;default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,Bs))throw new Error("Instruction not evaluated");return A(this,Bs)}toJSON(){return{...super.toJSON(),...A(this,Bs)??A(this,tr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,tr))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){ee(this,tr,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);ee(this,tr,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);ee(this,tr,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){ee(this,tr,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new se("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!A(this,tr))throw new Error("Instruction not validated");if(A(this,Bs))throw new Error("Instruction aready evaluated");const i=A(this,tr);switch(i.mode){case"reg":{ee(this,Bs,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!ke.inRange(r))throw new se("address-out-of-range",r).at(i.address);const s=ke.from(r);if(n.addressIsReserved(s))throw new se("address-has-code",s).at(i.address);ee(this,Bs,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{ee(this,Bs,{mode:"mem-indirect",size:i.size});return}default:return i}}}tr=new WeakMap,Bs=new WeakMap;var md;class yZ extends Jc{constructor(n,i,r,s){super(i,r,s);je(this,md,!1);pe(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,md))throw new Error("Instruction already validated");if(this.operands.length>0)throw new se("expects-no-operands").at(this);ee(this,md,!0)}evaluateExpressions(){if(!A(this,md))throw new Error("Instruction not validated")}}md=new WeakMap;class lb{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class bZ extends lb{constructor(n){super(n.position);pe(this,"type","register");pe(this,"value");this.value=n.type}get size(){return xD.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class xZ extends lb{constructor(n,i){super(i);pe(this,"type","indirect-address");pe(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class wZ extends lb{constructor(n,i,r){super(r);pe(this,"type","direct-address");pe(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class Dv extends lb{constructor(n){super(n.position);pe(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return Dv.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new se("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:Vn.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=Dv.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:Vn.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function c4(t,e,n){const i=un.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new yZ(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new fZ(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new vZ(t.type,e,n,i);case"PUSH":case"POP":return new gZ(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new mZ(t.type,e,n,i);case"IN":case"OUT":return new pZ(t.type,e,n,i);case"INT":return new hZ(t.type,e,n,i)}}class SZ extends ab{constructor(n,i){super(i);pe(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let kZ=class{constructor(e){pe(this,"tokens");pe(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new se("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new se("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new SZ(i,un.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new se("end-must-be-the-last-statement").at(e);return new n1(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new n1(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new n1(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...CC);if(e&&!n)throw new se("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),dZ(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new lZ(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new cZ(e.position)}return new uZ(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...EC);if(e&&!n){const s=this.peek();throw new se("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return c4(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),c4(n,r,i)}instructionOperand(){if(this.match(...Lv)){const n=this.previous();return new bZ(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new se("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Lv)){if(!this.check("BX","BL"))throw new se("parser.indirect-addressing-must-be-bx");const i=this.advance(),r=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-literal","]",i.lexeme));return new xZ(e==null?void 0:e.type,un.merge(e==null?void 0:e.position,n.position,r.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-expression","]"));return new wZ(i,e==null?void 0:e.type,un.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new se("parser.expected-literal-after-literal","[","PTR");return new Dv(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new se("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new se("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return Vn.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=bp(i.lexeme.slice(1,-1));return Vn.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new se("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new se("parser.expected-label-after-offset").at(this.peek());if(!n)throw new se("parser.expected-argument").at(this.peek());return Vn.label(n.lexeme.toUpperCase(),e!==null,un.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new se("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return Vn.unaryOperation(e.type==="PLUS"?"+":"-",n,un.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=Vn.binaryOperation(e,"*",n,un.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=Vn.binaryOperation(e,n.type==="PLUS"?"+":"-",i,un.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function SD(t){try{const n=new tZ(t).scanTokens(),r=new kZ(n).parse();if(!r.at(-1))throw new se("empty-program");let o=[];const a=new JJ;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=xp(r,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},se.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=xp(r,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},se.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[se.from(e)]}}}class Cs{constructor(e){pe(this,"computer");this.computer=e.computer}}const _Z=t=>ke.format(t).slice(-2),CZ=_Z(ke.MAX_ADDRESS),EZ={"address-has-instruction":t=>`Memory address ${ke.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${ke.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${ke.format(t)} is out of range (max memory address: ${CZ}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${Sr.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${ke.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},AZ=ke.from(ke.MAX_ADDRESS).toString(),NZ={"address-has-instruction":t=>`La direccin de memoria ${ke.format(t)} tiene una instruccin, y no se puede escribir.`,"address-is-reserved":t=>`La direccin de memoria ${ke.format(t)} est reservada, y no se puede escribir.`,"address-out-of-range":t=>`La direccin de memoria ${ke.format(t)} est fuera de rango (direccin mxima de memoria: ${AZ}).`,"device-not-connected":t=>`"${t}" no est conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontr ningn mdulo conectado a la direccin de memoria E/S ${Sr.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instruccin en la direccin de memoria ${ke.format(t)} pero no se encontr ninguna.`,"no-program":"No hay ningn programa cargado. Ensambl antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},PZ=bC({en:EZ,es:NZ});class en extends Error{constructor(n,...i){super();pe(this,"code");pe(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return PZ(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof en?n:new en("unexpected-error",n)}}class oa{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,i){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new en("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),i||(yield*e.cpu.getMBR(n))}}var Sy,kD;class MZ extends oa{constructor(){super(...arguments);je(this,Sy)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Pt(this,Sy,kD).call(this),willUse:{id:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct",ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"&&this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")i!=="reg<-mem"?r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"):(typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!0),typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!1));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(this.operation.mode==="mem<-imd"?yield*n.cpu.getMBR("id.l"):yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}i==="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}i==="mem<-imd"&&(yield*n.cpu.copyByteRegister("id.l","left.l")),yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=B.fromSigned(d,r),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned+l.unsigned+d;h>B.maxValue(r)?(u.CF=!0,c=B.fromUnsigned(h-B.maxValue(r)-1,r)):(u.CF=!1,c=B.fromUnsigned(h,r)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,h=a.unsigned-l.unsigned-d;h<0?(u.CF=!0,c=B.fromUnsigned(h+B.maxValue(r)+1,r)):(u.CF=!1,c=B.fromUnsigned(h,r)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Sy=new WeakSet,kD=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var ky,_D;class RZ extends oa{constructor(){super(...arguments);je(this,ky)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Pt(this,ky,_D).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=B.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=B.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===B.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",B.fromSigned(1,16));const o=i.unsigned+1;o>B.maxValue(this.operation.size)?(s.CF=!0,r=B.fromUnsigned(o-B.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=B.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",B.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=B.fromUnsigned(o+B.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=B.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}ky=new WeakSet,_D=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class TZ extends oa{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var _y,CD;class OZ extends oa{constructor(){super(...arguments);je(this,_y)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Pt(this,_y,CD).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new en("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new en("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new en("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}_y=new WeakSet,CD=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class IZ extends oa{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:!1,ri:this.name==="CALL"}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l",!0),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(!(yield*e.cpu.pushToStack("IP.l")))return!1;yield*e.cpu.copyByteRegister("ri.l","IP.l")}else yield*e.cpu.getMBR("ri.l"),yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class jZ extends oa{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"halting"},yield{type:"cpu:halt"},!1;return!0}}function p2(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function i1(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var Cy,ED;class LZ extends oa{constructor(){super(...arguments);je(this,Cy)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Pt(this,Cy,ED).call(this),willUse:{id:!1,ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):(this.operation.mode==="mem<-reg"||this.operation.mode==="reg<-mem")&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"ri.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":{if(r===8)yield{type:"cpu:register.buscopy",src:o,dest:s,size:8};else{const[a,l]=i1(o),[c,u]=i1(s);yield{type:"cpu:register.buscopy",src:a,dest:c,size:8},l&&u&&(yield{type:"cpu:register.buscopy",src:l,dest:u,size:8})}return!0}case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=i1(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"||(yield*n.cpu.copyByteRegister("BL","ri.l")),yield*n.cpu.setMAR("ri"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}Cy=new WeakSet,ED=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class DZ extends oa{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class $Z extends oa{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(i)}else{const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(i))}}}function FZ(t){switch(t.instruction){case"MOV":return new LZ(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new MZ(t);case"NOT":case"NEG":case"INC":case"DEC":return new RZ(t);case"IN":case"OUT":return new OZ(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new $Z(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new IZ(t);case"RET":case"IRET":return new DZ(t);case"INT":return new TZ(t);case"CLI":case"STI":case"NOP":case"HLT":return new jZ(t)}}function zZ(t){for(const[e,n]of _C)if(n.unsigned===t.unsigned)return e;return null}function*BZ(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new en("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",r=>r.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new en("device-not-connected","keyboard")},!1;const i=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",i),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new en("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",B.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(i);else return yield{type:"cpu:error",error:new en("device-not-connected","screen")},!1;n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",B.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",B.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===B.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var gd,Qe,Pr,ji,mn,wu,Ar,GT;let UZ=(GT=class extends Cs{constructor(n){super(n);je(this,mn);je(this,gd);je(this,Qe);je(this,Pr);je(this,ji);n.data==="unchanged"?(ee(this,Qe,A(n.previous.cpu,Qe)),ee(this,Pr,A(n.previous.cpu,Pr)),ee(this,ji,A(n.previous.cpu,ji))):(ee(this,Qe,{AX:B.zero(16),BX:B.zero(16),CX:B.zero(16),DX:B.zero(16),SP:B.zero(16),IP:B.zero(16),IR:B.zero(8),ri:B.zero(16),id:B.zero(16),left:B.zero(16),right:B.zero(16),result:B.zero(16),FLAGS:B.zero(16)}),ee(this,Pr,B.zero(16)),ee(this,ji,B.zero(8))),A(this,Qe).SP=B.fromUnsigned(ke.MAX_ADDRESS,16);const i=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),r=n.hasORG??!1;let s;r?s=32:i?s=8:s=0,A(this,Qe).IP=B.fromUnsigned(s,16),A(this,Qe).ri=B.fromUnsigned(0,16),A(this,Qe).id=B.fromUnsigned(0,16),Pt(this,mn,Ar).call(this,"IF",!0),ee(this,gd,new Map);for(const o of n.program.instructions){const a=FZ(o);A(this,gd).set(a.start.value,a)}}*run(){var n;for(;;){const i=A(this,Qe).IP,r=zZ(i);if(r!==null){if(!(yield*BZ(this.computer,r)))return}else{const s=A(this,gd).get(i.unsigned);if(!s){yield{type:"cpu:error",error:new en("no-instruction",A(this,Qe).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",B.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l"))))return!1;const i=B.fromUnsigned(n.unsigned,8);return yield*this.updateByteRegister("ri.l",i),yield*this.copyWordRegister("ri","IP"),yield*this.setMAR("ri"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("IP.l"),!0):!1}toJSON(){return{...Object.entries(A(this,Qe)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:A(this,Pr).toJSON(),MBR:A(this,ji).toJSON()}}getRegister(n){const[i,r]=p2(n);return r==="low"?A(this,Qe)[i].low:r==="high"?A(this,Qe)[i].high:A(this,Qe)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Pt(this,mn,wu).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Pt(this,mn,wu).call(this,i,r.withHigh(B.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Pt(this,mn,wu).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Pt(this,mn,wu).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return A(this,Qe).FLAGS.bit(1);case"ZF":return A(this,Qe).FLAGS.bit(0);case"SF":return A(this,Qe).FLAGS.bit(3);case"IF":return A(this,Qe).FLAGS.bit(4);case"OF":return A(this,Qe).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Pt(this,mn,Ar).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Pt(this,mn,Ar).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Pt(this,mn,Ar).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Pt(this,mn,Ar).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Pt(this,mn,Ar).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,Qe).FLAGS}}*aluExecute(n,i,r){A(this,Qe).result=i.is8bits()?A(this,Qe).result.withLow(i):i,typeof r.CF=="boolean"&&Pt(this,mn,Ar).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Pt(this,mn,Ar).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Pt(this,mn,Ar).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Pt(this,mn,Ar).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Pt(this,mn,Ar).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:A(this,Qe).result,flags:A(this,Qe).FLAGS}}*setMAR(n){const i=this.getRegister(n);ee(this,Pr,i.withHigh(B.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Pt(this,mn,wu).call(this,n,A(this,ji)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);ee(this,ji,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(A(this,Pr));return i?(ee(this,ji,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,Pr),A(this,ji)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,Pr).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(ee(this,ji,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,Pr).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,A(this,ji))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const i=yield*this.computer.io.pic.handleINTR();return ee(this,ji,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return ke.inRange(i.unsigned-1)?(i=i.add(-1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?ke.inRange(i.unsigned-1)?!0:(yield{type:"cpu:error",error:new en("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new en("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return ke.inRange(i)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),i=i.add(1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new en("stack-underflow")},!1)}},gd=new WeakMap,Qe=new WeakMap,Pr=new WeakMap,ji=new WeakMap,mn=new WeakSet,wu=function(n,i){const[r,s]=p2(n);if(s===null){if(A(this,Qe)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);A(this,Qe)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?A(this,Qe)[r]=A(this,Qe)[r].withLow(i):A(this,Qe)[r]=A(this,Qe)[r].withHigh(i)}},Ar=function(n,i){switch(n){case"CF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(1,i);return;case"ZF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(0,i);return;case"SF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(3,i);return;case"IF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(4,i);return;case"OF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},GT);var Ga,nr,jo,Ia;let AD=(Ga=class extends Cs{constructor(n){super(n);je(this,nr);je(this,jo);je(this,Ia,!1);n.data==="unchanged"&&n.previous.io.printer?(ee(this,nr,A(n.previous.io.printer,nr)),ee(this,jo,A(n.previous.io.printer,jo)),ee(this,Ia,A(n.previous.io.printer,Ia))):(ee(this,nr,[]),ee(this,jo,""),ee(this,Ia,!1))}get busy(){return A(this,nr).length>=Ga.BUFFER_SIZE}*setStrobe(n){const i=A(this,Ia);if(i===n)return;if(ee(this,Ia,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();A(this,nr).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){ee(this,jo,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,nr).length===0)return;const[n,...i]=A(this,nr);if(ee(this,nr,i),yield{type:"printer:buffer.pop",char:n},i.length===Ga.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=kC(n.unsigned);ee(this,jo,A(this,jo)+r),yield{type:"printer:paper.print",char:r}}}get hasPending(){return A(this,nr).length>0}toJSON(){return{paper:A(this,jo),buffer:[...A(this,nr).map(n=>n.unsigned)]}}},nr=new WeakMap,jo=new WeakMap,Ia=new WeakMap,pe(Ga,"BUFFER_SIZE",5),Ga);class cb extends Cs{}let ND=class extends cb{constructor(n){super(n);pe(this,"PA");pe(this,"PB");pe(this,"CA");pe(this,"CB");pe(this,"leds",null);pe(this,"printer",null);pe(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=B.random(8),this.PB=B.random(8),this.CA=B.random(8),this.CB=B.random(8)):(this.PA=B.zero(8),this.PB=B.zero(8),this.CA=B.zero(8),this.CB=B.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class u4 extends ND{constructor(e){super(e),this.PA=this.PA.withBit(1,!1);const n=this;this.printer=new class extends AD{*readData(){const i=n.readData();return yield{type:"printer:data.read",char:i},i}*updateBusy(i){i?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*n.updatePort("A")}}(e)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return B.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=B.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var Lo,KT;let VZ=(KT=class extends Cs{constructor(n){super(n);je(this,Lo);n.data==="unchanged"&&n.previous.io.leds?ee(this,Lo,A(n.previous.io.leds,Lo)):n.data==="randomize"?ee(this,Lo,B.random(8)):ee(this,Lo,B.zero(8))}get state(){return A(this,Lo)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,Lo).toJSON()}},Lo=new WeakMap,KT);var Mr,qT;let HZ=(qT=class extends Cs{constructor(n){super(n);je(this,Mr);n.data==="unchanged"&&n.previous.io.switches?ee(this,Mr,A(n.previous.io.switches,Mr)):n.data==="randomize"?ee(this,Mr,B.random(8)):ee(this,Mr,B.zero(8))}get state(){return A(this,Mr)}*toggle(n){ee(this,Mr,A(this,Mr).withBit(n,!A(this,Mr).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,Mr).toJSON()}},Mr=new WeakMap,qT);class WZ extends ND{constructor(e){super(e);const n=this;this.leds=new class extends VZ{}(e),this.switches=new class extends HZ{*toggle(i){yield*super.toggle(i),yield*n.updatePort("A")}}(e)}*updatePort(e){if(e==="A"){const n=this.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=B.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.leds.update(B.fromUnsigned(n,8))}}}let GZ=class extends Cs{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},KZ=class extends Cs{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var vd,YT;let qZ=(YT=class extends Cs{constructor(){super(...arguments);je(this,vd,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,vd);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},ee(this,vd,null),n}setLastCharRead(n){ee(this,vd,n)}toJSON(){return null}},vd=new WeakMap,YT);var ir,XT;let YZ=(XT=class extends Cs{constructor(n){super(n);je(this,ir);n.data==="unchanged"&&n.previous.io.screen?ee(this,ir,A(n.previous.io.screen,ir)):ee(this,ir,"")}clear(){return this.sendChar(B.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:ee(this,ir,A(this,ir).slice(0,-1));break;case 10:ee(this,ir,A(this,ir)+`
`);break;case 12:ee(this,ir,"");break;default:ee(this,ir,A(this,ir)+kC(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,ir)}}toJSON(){return A(this,ir)}},ir=new WeakMap,XT);var Do,mi,JT;let XZ=(JT=class extends cb{constructor(n){super(n);je(this,Do);je(this,mi);pe(this,"printer");n.data==="randomize"?ee(this,Do,B.random(8)):ee(this,Do,B.zero(8)),ee(this,mi,B.zero(8));const i=this;this.printer=new class extends AD{*readData(){const r=A(i,Do);return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updateBusy(r)}}(n)}get interrupts(){return A(this,mi).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=A(this,Do);else if(n==="STATE")i=A(this,mi);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")ee(this,Do,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.printer.busy),ee(this,mi,i),yield{type:"handshake:register.update",register:n,value:i},A(this,mi).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),ee(this,mi,A(this,mi).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,mi)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){ee(this,mi,A(this,mi).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,mi)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,Do).toJSON(),STATE:A(this,mi).toJSON()}}},Do=new WeakMap,mi=new WeakMap,JT);var fs,$o,Li,gi,as,co,x0,w0;let JZ=(fs=class extends cb{constructor(n){super(n);je(this,co);je(this,$o);je(this,Li);je(this,gi);je(this,as);ee(this,$o,B.fromUnsigned(255,8)),ee(this,Li,B.fromUnsigned(0,8)),ee(this,gi,B.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?ee(this,as,A(n.previous.io.pic,as)):n.data==="randomize"?ee(this,as,new Array(fs.LINES).fill(B.zero(8)).map(()=>B.random(8))):ee(this,as,new Array(fs.LINES).fill(B.zero(8)))}chipSelect(n){const r=4+fs.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=B.zero(8);else if(n==="IMR")i=A(this,$o);else if(n==="IRR")i=A(this,Li);else if(n==="ISR")i=A(this,gi);else{const r=Number(n.slice(3));i=A(this,as)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")A(this,gi).isZero()||(yield{type:"pic:intr.off"},ee(this,gi,B.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,gi)},yield*Pt(this,co,w0).call(this));else if(n==="IMR")ee(this,$o,i),yield{type:"pic:register.update",register:"IMR",value:A(this,$o)},yield*Pt(this,co,w0).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));A(this,as)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=fs.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,Li).bit(n)||(ee(this,Li,A(this,Li).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,Li)},yield*Pt(this,co,w0).call(this))}isINTRActive(){return A(this,gi).isZero()&&Pt(this,co,x0).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,gi).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Pt(this,co,x0).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");ee(this,gi,A(this,gi).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,gi)},ee(this,Li,A(this,Li).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,Li)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=A(this,as)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:A(this,$o).toJSON(),IRR:A(this,Li).toJSON(),ISR:A(this,gi).toJSON(),lines:A(this,as).map(n=>n.toJSON())}}},$o=new WeakMap,Li=new WeakMap,gi=new WeakMap,as=new WeakMap,co=new WeakSet,x0=function(){for(let n=0;n<fs.LINES;n++)if(A(this,Li).bit(n)&&!A(this,$o).bit(n))return n;return null},w0=function*(){A(this,gi).isZero()&&Pt(this,co,x0).call(this)!==null&&(yield{type:"pic:intr.on"})},pe(fs,"LINES",8),fs);var Us,ja,ZT;let ZZ=(ZT=class extends cb{constructor(n){super(n);je(this,Us);je(this,ja);ee(this,Us,B.zero(8)),ee(this,ja,B.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=A(this,Us);else if(n==="COMP")i=A(this,ja);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")ee(this,Us,i);else if(n==="COMP")ee(this,ja,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=A(this,Us).unsigned===B.maxValue(8)?B.zero(8):A(this,Us).add(1);ee(this,Us,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,ja).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,Us).toJSON(),COMP:A(this,ja).toJSON()}}},Us=new WeakMap,ja=new WeakMap,ZT);class QZ extends Cs{constructor(n){super(n);pe(this,"clock",null);pe(this,"f10",null);pe(this,"keyboard",null);pe(this,"screen",null);pe(this,"handshake",null);pe(this,"pic",null);pe(this,"pio",null);pe(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new qZ(n),this.screen=new YZ(n)),n.devices.pic&&(this.clock=new GZ(n),this.f10=new KZ(n),this.timer=new ZZ(n),this.pic=new JZ(n)),this.pio=n.devices.pio==="switches-and-leds"?new WZ(n):n.devices.pio==="printer"?new u4(n):null,n.devices.handshake){if(this.pio instanceof u4)throw new en("io-printer-conflict");this.handshake=new XZ(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,i;return((n=this.pio)==null?void 0:n.printer)??((i=this.handshake)==null?void 0:i.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,c,u;const i=(a=this.handshake)==null?void 0:a.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=(l=this.pic)==null?void 0:l.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=(c=this.pio)==null?void 0:c.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(u=this.timer)==null?void 0:u.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new en("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return this[i]?yield*this[i].read(r):(yield{type:"bus:io.error",error:new en("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return this[r]?(yield*this[r].write(s,i),!0):(yield{type:"bus:io.error",error:new en("device-not-connected",r)},!1)}toJSON(){var n,i,r,s,o,a,l,c,u,d,h;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((i=this.f10)==null?void 0:i.toJSON())??null,keyboard:((r=this.keyboard)==null?void 0:r.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((c=this.handshake)==null?void 0:c.toJSON())??null,pic:((u=this.pic)==null?void 0:u.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((h=this.timer)==null?void 0:h.toJSON())??null}}}var Ka,vi,yd,bd;let eQ=(Ka=class extends Cs{constructor(n){super(n);je(this,vi);je(this,yd);je(this,bd);n.data==="unchanged"?ee(this,vi,A(n.previous.memory,vi)):n.data==="randomize"?ee(this,vi,new Uint8Array(Ka.SIZE).map(()=>B.random(8).unsigned)):ee(this,vi,new Uint8Array(Ka.SIZE).fill(0)),A(this,vi)[255]=1;const i=n.program.instructions.some(r=>r.instruction==="INT");if(ee(this,bd,new Set),i)for(const[r,s]of _C){const o=r;if(A(this,vi)[o]=s.unsigned,A(this,bd).add(o),r===6){const a=[208,216,48,18,1,193,193,216,49,212,65,225],l=s.unsigned;for(let c=0;c<a.length;c++)A(this,vi)[l+c]=a[c],A(this,bd).add(l+c)}}for(const r of n.program.data){let s=r.start.value;for(const o of r.getValues())o!==oh&&A(this,vi).set(o.toUint8Array(),s),s+=r.size/8}ee(this,yd,new Set);for(const r of n.program.instructions){A(this,vi).set(r.toBytes(),r.start.value);for(let s=0;s<r.length;s++)A(this,yd).add(r.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!ke.inRange(n))return yield{type:"memory:read.error",error:new en("address-out-of-range",n)},null;const i=B.fromUnsigned(A(this,vi).at(n),8);return yield{type:"memory:read.ok",address:ke.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},ke.inRange(n)?(A(this,yd).has(n)&&(yield{type:"memory:write.warning",warning:`Sobrescribiendo instruccin en la direccin ${ke.format(n)}`},console.warn(`Advertencia: Sobrescribiendo instruccin en la direccin ${ke.format(n)}`)),A(this,vi).set([i.unsigned],n),yield{type:"memory:write.ok",address:ke.from(n),value:i},!0):(yield{type:"memory:write.error",error:new en("address-out-of-range",n)},!1)}toJSON(){return[...A(this,vi)]}},vi=new WeakMap,yd=new WeakMap,bd=new WeakMap,pe(Ka,"SIZE",ke.MAX_ADDRESS+1),Ka);class d4{constructor(e){pe(this,"cpu");pe(this,"memory");pe(this,"io");const n={computer:this,...e};this.cpu=new UZ(n),this.memory=new eQ(n),this.io=new QZ(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var wt;class tQ{constructor(){je(this,wt,new d4({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){ee(this,wt,new d4({...e,previous:A(this,wt)}))}getComputerState(){var e;return((e=A(this,wt))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,wt))throw new en("no-program");return A(this,wt).cpu.run()}get devices(){if(!A(this,wt))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,wt).io.clock!==null,tick:()=>{if(A(this,wt).io.clock)return A(this,wt).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,wt).io,press:()=>{if(A(this,wt).io.f10)return A(this,wt).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,wt).io,readChar:e=>{if(A(this,wt).io.keyboard)return A(this,wt).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,wt).io},printer:{connected:()=>A(this,wt).io.printer!==null,clear:()=>{if(A(this,wt).io.printer)return A(this,wt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,wt).io.printer)return A(this,wt).io.printer.print();console.warn("No printer connected to the computer!")},hasPending:()=>{var e;return((e=A(this,wt).io.printer)==null?void 0:e.hasPending)??!1}},screen:{connected:()=>"screen"in A(this,wt).io,clear:()=>{if(A(this,wt).io.screen)return A(this,wt).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,wt).io,toggle:e=>{if(A(this,wt).io.switches)return A(this,wt).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}wt=new WeakMap;const r1=ue(B.zero(16)),s1=ue(B.zero(16)),nQ=ue(B.zero(8)),o1=ue(B.zero(16)),a1=ue(B.zero(16)),l1=ue(B.zero(16)),c1=ue(B.zero(16)),u1=ue(B.zero(16)),d1=ue(B.zero(16)),NC=ue(B.zero(16)),wc=ue(B.zero(8)),mt=ue(""),wp=ue(0),Fn=ue(0),PC=ue(!1),iQ=ue(!1),ub=ue(0),Ph=ue([]),PD=ue(!1);ue(!0);ue(!0);const m2=ue(!1),ma=t=>ue(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),ga=t=>ue(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),Le={AL:ue(B.zero(8)),BL:ue(B.zero(8)),CL:ue(B.zero(8)),DL:ue(B.zero(8)),SP:r1,"SP.l":ma(r1),"SP.h":ga(r1),IP:s1,"IP.l":ma(s1),"IP.h":ga(s1),IR:nQ,ri:o1,"ri.l":ma(o1),"ri.h":ga(o1),id:a1,"id.l":ma(a1),"id.h":ga(a1),left:l1,"left.l":ma(l1),"left.h":ga(l1),right:c1,"right.l":ma(c1),"right.h":ga(c1),result:u1,"result.l":ma(u1),"result.h":ga(u1),FLAGS:d1,"FLAGS.l":ma(d1),"FLAGS.h":ga(d1),MAR:NC,MBR:wc},bi=ue({phase:"stopped"}),MD=ue("ADD");function rQ(t,e=!1){e?(D.set(Le.AL,B.zero(8)),D.set(Le.BL,B.zero(8)),D.set(Le.CL,B.zero(8)),D.set(Le.DL,B.zero(8)),D.set(Le.SP,B.fromUnsigned(255,16)),D.set(Le.IP,B.zero(16)),D.set(Le.IR,B.zero(8)),D.set(Le.ri,B.zero(16)),D.set(Le.id,B.zero(16)),D.set(Le.left,B.zero(16)),D.set(Le.right,B.zero(16)),D.set(Le.result,B.zero(16)),D.set(Le.FLAGS,B.zero(16)),D.set(Le.MAR,B.zero(16)),D.set(Le.MBR,B.zero(8))):(D.set(Le.AL,B.fromUnsigned(t.cpu.AX&255,8)),D.set(Le.BL,B.fromUnsigned(t.cpu.BX&255,8)),D.set(Le.CL,B.fromUnsigned(t.cpu.CX&255,8)),D.set(Le.DL,B.fromUnsigned(t.cpu.DX&255,8)),D.set(Le.SP,B.fromUnsigned(t.cpu.SP,16)),D.set(Le.IP,B.fromUnsigned(t.cpu.IP,16)),D.set(Le.IR,B.fromUnsigned(t.cpu.IR,8)),D.set(Le.ri,B.fromUnsigned(t.cpu.ri,16)),D.set(Le.id,B.fromUnsigned(t.cpu.id,16)),D.set(Le.left,B.fromUnsigned(t.cpu.left,16)),D.set(Le.right,B.fromUnsigned(t.cpu.right,16)),D.set(Le.result,B.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,D.set(Le.FLAGS,B.fromUnsigned(t.cpu.FLAGS,16)),D.set(Le.MAR,B.fromUnsigned(t.cpu.MAR,16)),D.set(Le.MBR,B.fromUnsigned(t.cpu.MBR,8))),D.set(bi,{phase:"stopped"})}const RD=ue([]),TD=ue([]),$v=ue(new Array(ke.MAX_ADDRESS+1).fill(B.zero(8))),Sp=ue(ke.from(32)),sQ=ue(null),ug=256,oQ=ue(t=>{const e=t(sQ)??t(Sp);let n=e.value-e.value%ug,i=n+ug-1;i>ke.MAX_ADDRESS&&(i=ke.MAX_ADDRESS,n=i-ug+1);const r=t($v),s=[];for(let o=0;o<ug;o++)s.push({address:ke.from(n+o),value:r[n+o]});return s});function aQ(t,e=!1){e?D.set($v,new Array(ke.MAX_ADDRESS+1).fill(B.zero(8))):D.set($v,t.memory.map(n=>B.fromUnsigned(n,8))),D.set(Sp,ke.from(32))}let g2=[],OD=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?OD:g2).push(n=n+t[e])})();function lQ(t){if(t<768)return!1;for(let e=0,n=g2.length;;){let i=e+n>>1;if(t<g2[i])n=i;else if(t>=OD[i])e=i+1;else return!0;if(e==n)return!1}}function f4(t){return t>=127462&&t<=127487}const h4=8205;function cQ(t,e,n=!0,i=!0){return(n?ID:uQ)(t,e,i)}function ID(t,e,n){if(e==t.length)return e;e&&jD(t.charCodeAt(e))&&LD(t.charCodeAt(e-1))&&e--;let i=f1(t,e);for(e+=p4(i);e<t.length;){let r=f1(t,e);if(i==h4||r==h4||n&&lQ(r))e+=p4(r),i=r;else if(f4(r)){let s=0,o=e-2;for(;o>=0&&f4(f1(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function uQ(t,e,n){for(;e>0;){let i=ID(t,e-2,n);if(i<e)return i;e--}return 0}function f1(t,e){let n=t.charCodeAt(e);if(!LD(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return jD(i)?(n-55296<<10)+(i-56320)+65536:n}function jD(t){return t>=56320&&t<57344}function LD(t){return t>=55296&&t<56320}function p4(t){return t<65536?1:2}class gt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=zd(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Gs.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=zd(this,e,n);let i=[];return this.decompose(e,n,i,0),Gs.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Mh(this),s=new Mh(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new Mh(this,e)}iterRange(e,n=this.length){return new DD(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new $D(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?gt.empty:e.length<=32?new cn(e):Gs.from(cn.split(e,[]))}}class cn extends gt{constructor(e,n=dQ(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new fQ(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new cn(m4(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=S0(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new cn(a,o.length+s.length));else{let l=a.length>>1;i.push(new cn(a.slice(0,l)),new cn(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof cn))return super.replace(e,n,i);[e,n]=zd(this,e,n);let r=S0(this.text,S0(i.text,m4(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new cn(r,s):Gs.from(cn.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=zd(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new cn(i,r)),i=[],r=-1);return r>-1&&n.push(new cn(i,r)),n}}class Gs extends gt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?i.push(a):a.decompose(e-o,n-o,i,c)}o=l+1}}replace(e,n,i){if([e,n]=zd(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[r]=l,new Gs(u,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=zd(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Gs))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],c=e.children[s];if(l!=c)return i+l.scanIdentical(c,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let g of e)g.flatten(p);return new cn(p,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,c=-1,u=[];function d(p){let g;if(p.lines>s&&p instanceof Gs)for(let m of p.children)d(m);else p.lines>o&&(l>o||!l)?(h(),a.push(p)):p instanceof cn&&l&&(g=u[u.length-1])instanceof cn&&p.lines+g.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new cn(g.text.concat(p.text),g.length+1+p.length)):(l+p.lines>r&&h(),l+=p.lines,c+=p.length+1,u.push(p))}function h(){l!=0&&(a.push(u.length==1?u[0]:Gs.from(u,c)),c=-1,l=u.length=0)}for(let p of e)d(p);return h(),a.length==1?a[0]:new Gs(a,n)}}gt.empty=new cn([""],0);function dQ(t){let e=-1;for(let n of t)e+=n.length+1;return e}function S0(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function m4(t,e,n){return S0(t,[""],e,n)}class Mh{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof cn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof cn?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof cn){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof cn?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class DD{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new Mh(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class $D{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(gt.prototype[Symbol.iterator]=function(){return this.iter()},Mh.prototype[Symbol.iterator]=DD.prototype[Symbol.iterator]=$D.prototype[Symbol.iterator]=function(){return this});class fQ{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function zd(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Xn(t,e,n=!0,i=!0){return cQ(t,e,n,i)}function hQ(t){return t>=56320&&t<57344}function pQ(t){return t>=55296&&t<56320}function Ir(t,e){let n=t.charCodeAt(e);if(!pQ(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return hQ(i)?(n-55296<<10)+(i-56320)+65536:n}function MC(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function zo(t){return t<65536?1:2}const v2=/\r\n?|\n/;var Vi=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Vi||(Vi={}));class ao{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){y2(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new ao(e)}composeDesc(e){return this.empty?e:e.empty?this:FD(this,e)}mapDesc(e,n=!1){return e.empty?this:b2(this,e,n)}mapPos(e,n=-1,i=Vi.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=r+a;if(l<0){if(c>e)return s+(e-r);s+=a}else{if(i!=Vi.Simple&&c>=e&&(i==Vi.TrackDel&&r<e&&c>e||i==Vi.TrackBefore&&r<e||i==Vi.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ao(e)}static create(e){return new ao(e)}}class kn extends ao{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return y2(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return b2(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(gt.empty);i.push(o?e.slice(s,s+o):gt.empty)}s+=o}return new kn(n,i)}compose(e){return this.empty?e:e.empty?this:FD(this,e,!0)}map(e,n=!1){return e.empty?this:b2(this,e,n,!0)}iterChanges(e,n=!1){y2(this,e,n)}get desc(){return ao.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new kp(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);oi(r,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;oi(n,u,d),d>0&&Fa(i,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);oi(n,u,-1),oi(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new kn(n,i),filtered:ao.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!r.length)return;o<n&&oi(r,n-o,-1);let d=new kn(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof kn){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:h=d,insert:p}=u;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let g=p?typeof p=="string"?gt.of(p.split(i||v2)):p:gt.empty,m=g.length;if(d==h&&m==0)return;d<o&&l(),d>o&&oi(r,d-o,-1),oi(r,h-d,m),Fa(s,r,g),o=h}}return c(e),l(!a),a}static empty(e){return new kn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(gt.empty);i[r]=gt.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new kn(n,i)}static createSet(e,n){return new kn(e,n)}}function oi(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:r>=0&&e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Fa(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(gt.empty);t.push(n)}}function y2(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let c=r,u=s,d=gt.empty;for(;c+=a,u+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,c,s,u,d),r=c,s=u}}}function b2(t,e,n,i=!1){let r=[],s=i?[]:null,o=new kp(t),a=new kp(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);oi(r,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(oi(r,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(oi(r,0,o.ins),s&&Fa(s,r,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;oi(r,c,l<o.i?o.ins:0),s&&l<o.i&&Fa(s,r,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?kn.createSet(r,s):ao.create(r);throw new Error("Mismatched change set lengths")}}}function FD(t,e,n=!1){let i=[],r=n?[]:null,s=new kp(t),o=new kp(e);for(let a=!1;;){if(s.done&&o.done)return r?kn.createSet(i,r):ao.create(i);if(s.ins==0)oi(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)oi(i,0,o.ins,a),r&&Fa(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;oi(i,l,u,a),r&&u&&Fa(r,i,o.text)}else o.ins==-1?(oi(i,s.off?0:s.len,l,a),r&&Fa(r,i,s.textBit(l))):(oi(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Fa(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>c),s.forward2(l),o.forward(l)}}}}class kp{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?gt.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?gt.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class gc{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new gc(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return re.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return re.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return re.range(e.anchor,e.head)}static create(e,n,i){return new gc(e,n,i)}}class re{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:re.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new re([this.main],0)}addRange(e,n=!0){return re.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,re.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new re(e.ranges.map(n=>gc.fromJSON(n)),e.main)}static single(e,n=e){return new re([re.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return re.normalized(e.slice(),n);i=s.to}return new re(e,n)}static cursor(e,n=0,i,r){return gc.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?gc.create(n,e,48|s):gc.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?re.range(l,a):re.range(a,l))}}return new re(e,n)}}function zD(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let RC=0;class Ee{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=RC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ee(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:TC),!!e.static,e.enables)}of(e){return new k0([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new k0(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new k0(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function TC(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class k0{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=RC++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(l&&h.docChanged||c&&(h.docChanged||h.selection)||x2(d,u)){let p=i(d);if(a?!g4(p,d.values[o],r):!r(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,h)=>{let p,g=h.config.address[s];if(g!=null){let m=zv(h,g);if(this.dependencies.every(v=>v instanceof Ee?h.facet(v)===d.facet(v):v instanceof Ei?h.field(v,!1)==d.field(v,!1):!0)||(a?g4(p=i(d),m,r):r(p=i(d),m)))return d.values[o]=m,0}else p=i(d);return d.values[o]=p,1}}}}function g4(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function x2(t,e){let n=!1;for(let i of e)Rh(t,i)&1&&(n=!0);return n}function mQ(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<i.length;u++){let d=zv(l,i[u]);if(r[u]==2)for(let h of d)c.push(h);else c.push(d)}return e.combine(c)}return{create(l){for(let c of i)Rh(l,c);return l.values[o]=a(l),1},update(l,c){if(!x2(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=x2(l,i),d=c.config.facets[e.id],h=c.facet(e);if(d&&!u&&TC(n,d))return l.values[o]=h,0;let p=a(l);return e.compare(p,h)?(l.values[o]=h,0):(l.values[o]=p,1)}}}const dg=Ee.define({static:!0});class Ei{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new Ei(RC++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(dg).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>{let s=i.facet(dg),o=r.facet(dg),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(i.values[n]=a.create(i),1):r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,dg.of({field:this,create:e})]}get extension(){return this}}const sc={lowest:4,low:3,default:2,high:1,highest:0};function Nf(t){return e=>new BD(e,t)}const um={highest:Nf(sc.highest),high:Nf(sc.high),default:Nf(sc.default),low:Nf(sc.low),lowest:Nf(sc.lowest)};class BD{constructor(e,n){this.inner=e,this.prec=n}}class dm{of(e){return new w2(this,e)}reconfigure(e){return dm.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class w2{constructor(e,n){this.compartment=e,this.inner=n}}class Fv{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let h of gQ(e,n,o))h instanceof Ei?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],c=[];for(let h of r)a[h.id]=c.length<<1,c.push(p=>h.slot(p));let u=i==null?void 0:i.config.facets;for(let h in s){let p=s[h],g=p[0].facet,m=u&&u[h]||[];if(p.every(v=>v.type==0))if(a[g.id]=l.length<<1|1,TC(m,p))l.push(i.facet(g));else{let v=g.combine(p.map(y=>y.value));l.push(i&&g.compare(v,i.facet(g))?i.facet(g):v)}else{for(let v of p)v.type==0?(a[v.id]=l.length<<1|1,l.push(v.value)):(a[v.id]=c.length<<1,c.push(y=>v.dynamicSlot(y)));a[g.id]=c.length<<1,c.push(v=>mQ(v,g,p))}}let d=c.map(h=>h(a));return new Fv(e,o,d,a,l,s)}}function gQ(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let c=i[l].indexOf(o);c>-1&&i[l].splice(c,1),o instanceof w2&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof w2){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof BD)s(o.inner,o.prec);else if(o instanceof Ei)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof k0)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,sc.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,sc.default),i.reduce((o,a)=>o.concat(a))}function Rh(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function zv(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const UD=Ee.define(),S2=Ee.define({combine:t=>t.some(e=>e),static:!0}),VD=Ee.define({combine:t=>t.length?t[0]:void 0,static:!0}),HD=Ee.define(),WD=Ee.define(),GD=Ee.define(),KD=Ee.define({combine:t=>t.length?t[0]:!1});class aa{constructor(e,n){this.type=e,this.value=n}static define(){return new vQ}}class vQ{of(e){return new aa(this,e)}}class yQ{constructor(e){this.map=e}of(e){return new tt(this,e)}}class tt{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new tt(this.type,n)}is(e){return this.type==e}static define(e={}){return new yQ(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}tt.reconfigure=tt.define();tt.appendConfig=tt.define();class An{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&zD(i,n.newLength),s.some(a=>a.type==An.time)||(this.annotations=s.concat(An.time.of(Date.now())))}static create(e,n,i,r,s,o){return new An(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(An.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}An.time=aa.define();An.userEvent=aa.define();An.addToHistory=aa.define();An.remote=aa.define();function bQ(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function qD(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=kn.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:tt.mapEffects(t.effects,r).concat(tt.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function k2(t,e,n){let i=e.selection,r=rd(e.annotations);return e.userEvent&&(r=r.concat(An.userEvent.of(e.userEvent))),{changes:e.changes instanceof kn?e.changes:kn.of(e.changes||[],n,t.facet(VD)),selection:i&&(i instanceof re?i:re.single(i.anchor,i.head)),effects:rd(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function YD(t,e,n){let i=k2(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=qD(i,k2(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=An.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return wQ(n?xQ(r):r)}function xQ(t){let e=t.startState,n=!0;for(let r of e.facet(HD)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:bQ(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=kn.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=An.create(e,r,t.selection&&t.selection.map(s),tt.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(WD);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof An?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof An?t=s[0]:t=YD(e,rd(s),!1)}return t}function wQ(t){let e=t.startState,n=e.facet(GD),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=qD(i,k2(e,s,t.changes.newLength),!0))}return i==t?t:An.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const SQ=[];function rd(t){return t==null?SQ:Array.isArray(t)?t:[t]}var Jn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Jn||(Jn={}));const kQ=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let _2;try{_2=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function _Q(t){if(_2)return _2.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||kQ.test(n)))return!0}return!1}function CQ(t){return e=>{if(!/\S/.test(e))return Jn.Space;if(_Q(e))return Jn.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Jn.Word;return Jn.Other}}class dt{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Rh(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return Rh(this,i),zv(this,i)}update(...e){return YD(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(dm.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,c)=>r.set(c,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(tt.reconfigure)?(n=null,i=a.value):a.is(tt.appendConfig)&&(n=null,i=rd(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=Fv.resolve(i,r,this),s=new dt(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(S2)?e.newSelection:e.newSelection.asSingle();new dt(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:re.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=rd(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(r);for(let h=0;h<a;h++)s[h]=s[h].map(u);let d=r.mapDesc(c,!0);s.push(l.range.map(d)),r=r.compose(u),o=tt.mapEffects(o,u).concat(tt.mapEffects(rd(l.effects),d))}return{changes:r,selection:re.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof kn?e:kn.of(e,this.doc.length,this.facet(dt.lineSeparator))}toText(e){return gt.of(e.split(this.facet(dt.lineSeparator)||v2))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Rh(this,n),zv(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Ei&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return dt.create({doc:e.doc,selection:re.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=Fv.resolve(e.extensions||[],new Map),i=e.doc instanceof gt?e.doc:gt.of((e.doc||"").split(n.staticFacet(dt.lineSeparator)||v2)),r=e.selection?e.selection instanceof re?e.selection:re.single(e.selection.anchor,e.selection.head):re.single(0);return zD(r,i.length),n.staticFacet(S2)||(r=r.asSingle()),new dt(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(dt.tabSize)}get lineBreak(){return this.facet(dt.lineSeparator)||`
`}get readOnly(){return this.facet(KD)}phrase(e,...n){for(let i of this.facet(dt.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(UD))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return CQ(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=Xn(n,o,!1);if(s(n.slice(l,o))!=Jn.Word)break;o=l}for(;a<r;){let l=Xn(n,a);if(s(n.slice(a,l))!=Jn.Word)break;a=l}return o==a?null:re.range(o+i,a+i)}}dt.allowMultipleSelections=S2;dt.tabSize=Ee.define({combine:t=>t.length?t[0]:4});dt.lineSeparator=VD;dt.readOnly=KD;dt.phrases=Ee.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});dt.languageData=UD;dt.changeFilter=HD;dt.transactionFilter=WD;dt.transactionExtender=GD;dm.reconfigure=tt.define();function Rl(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Dc{eq(e){return this==e}range(e,n=e){return C2.create(e,n,this)}}Dc.prototype.startSide=Dc.prototype.endSide=0;Dc.prototype.point=!1;Dc.prototype.mapMode=Vi.TrackDel;let C2=class XD{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new XD(e,n,i)}};function E2(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class OC{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,h,p;if(u==d){let g=n.mapPos(u,c.startSide,c.mapMode);if(g==null||(h=p=g,c.startSide!=c.endSide&&(p=n.mapPos(u,c.endSide),p<h)))continue}else if(h=n.mapPos(u,c.startSide),p=n.mapPos(d,c.endSide),h>p||h==p&&c.startSide>0&&c.endSide<=0)continue;(p-h||c.endSide-c.startSide)<0||(o<0&&(o=h),c.point&&(a=Math.max(a,p-h)),i.push(c),r.push(h-o),s.push(p-o))}return{mapped:i.length?new OC(r,s,i,a):null,pos:o}}}class kt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new kt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(E2)),this.isEmpty)return n.length?kt.of(n):this;let a=new JD(this,null,-1).goto(0),l=0,c=[],u=new vl;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(C2.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?kt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new kt(i,n,s||kt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return _p.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return _p.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=v4(o,a,i),c=new Pf(o,l,s),u=new Pf(a,l,s);i.iterGaps((d,h,p)=>y4(c,d,u,h,p,r)),i.empty&&i.length==0&&y4(c,0,u,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=v4(s,o),l=new Pf(s,a,0).goto(i),c=new Pf(o,a,0).goto(i);for(;;){if(l.to!=c.to||!A2(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>r)return!0;l.next(),c.next()}}static spans(e,n,i,r,s=-1){let o=new Pf(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);r.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(r.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new vl;for(let r of e instanceof C2?[e]:n?EQ(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return kt.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=kt.empty;r=r.nextLayer)n=new kt(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}kt.empty=new kt([],[],null,-1);function EQ(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(E2(e,i)>0)return t.slice().sort(E2);e=i}return t}kt.empty.nextLayer=kt.empty;class vl{finishChunk(e){this.chunks.push(new OC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new vl)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(kt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=kt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function v4(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class JD{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class _p{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new JD(o,n,i,s));return r.length==1?r[0]:new _p(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)h1(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)h1(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),h1(this.heap,0)}}}function h1(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Pf{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=_p.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){fg(this.active,e),fg(this.activeTo,e),fg(this.activeRank,e),this.minActive=b4(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;hg(this.active,n,i),hg(this.activeTo,n,r),hg(this.activeRank,n,s),e&&hg(e,n,this.cursor.from),this.minActive=b4(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&fg(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function y4(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let c=t.to+l-n.to,u=c||t.endSide-n.endSide,d=u<0?t.to+l:n.to,h=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&A2(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,h,t.point,n.point):h>a&&!A2(t.active,n.active)&&s.compareRange(a,h,t.active,n.active),d>o)break;(c||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(d),a=d,u<=0&&t.next(),u>=0&&n.next()}}function A2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function fg(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function hg(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function b4(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function fm(t,e,n=t.length){let i=0;for(let r=0;r<n&&r<t.length;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Xn(t,r));return i}function AQ(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=Xn(t,r)}return t.length}const N2="",x4=typeof Symbol>"u"?"__"+N2:Symbol.for(N2),P2=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),w4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class yl{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let p in a){let g=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(m=>o.map(v=>m.replace(/&/,v))).reduce((m,v)=>m.concat(v)),g,l);else if(g&&typeof g=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(r(p),g,u,h)}else g!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+g+";")}(u.length||h)&&l.push((i&&!d&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=w4[x4]||1;return w4[x4]=e+1,N2+e.toString(36)}static mount(e,n,i){let r=e[P2],s=i&&i.nonce;r?s&&r.setNonce(s):r=new NQ(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let S4=new Map;class NQ{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=S4.get(i);if(s)return e[P2]=s;this.sheet=new r.CSSStyleSheet,S4.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[P2]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let c=0;c<a.rules.length;c++)i.insertRule(a.rules[c],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var bl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Cp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},PQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),MQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Hn=0;Hn<10;Hn++)bl[48+Hn]=bl[96+Hn]=String(Hn);for(var Hn=1;Hn<=24;Hn++)bl[Hn+111]="F"+Hn;for(var Hn=65;Hn<=90;Hn++)bl[Hn]=String.fromCharCode(Hn+32),Cp[Hn]=String.fromCharCode(Hn);for(var p1 in bl)Cp.hasOwnProperty(p1)||(Cp[p1]=bl[p1]);function RQ(t){var e=PQ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||MQ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Cp:bl)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Rt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)ZD(t,arguments[e]);return t}function ZD(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)ZD(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Ep(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function M2(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function _0(t,e){if(!e.anchorNode)return!1;try{return M2(t,e.anchorNode)}catch{return!1}}function Ap(t){return t.nodeType==3?Fc(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Th(t,e,n,i){return n?k4(t,e,n,i,-1)||k4(t,e,n,i,1):!1}function $c(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Bv(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function k4(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:fo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=$c(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?fo(t):0}else return!1}}function fo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function db(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function TQ(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function QD(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function OQ(t,e,n,i,r,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let h,p=u==l.body,g=1,m=1;if(p)h=TQ(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let x=u.getBoundingClientRect();({scaleX:g,scaleY:m}=QD(u,x)),h={left:x.left,right:x.left+u.clientWidth*g,top:x.top,bottom:x.top+u.clientHeight*m}}let v=0,y=0;if(r=="nearest")e.top<h.top?(y=e.top-(h.top+o),n>0&&e.bottom>h.bottom+y&&(y=e.bottom-h.bottom+o)):e.bottom>h.bottom&&(y=e.bottom-h.bottom+o,n<0&&e.top-y<h.top&&(y=e.top-(h.top+o)));else{let x=e.bottom-e.top,w=h.bottom-h.top;y=(r=="center"&&x<=w?e.top+x/2-w/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-w+o)-h.top}if(i=="nearest"?e.left<h.left?(v=e.left-(h.left+s),n>0&&e.right>h.right+v&&(v=e.right-h.right+s)):e.right>h.right&&(v=e.right-h.right+s,n<0&&e.left<h.left+v&&(v=e.left-(h.left+s))):v=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==a?e.left-s:e.right-(h.right-h.left)+s)-h.left,v||y)if(p)c.scrollBy(v,y);else{let x=0,w=0;if(y){let S=u.scrollTop;u.scrollTop+=y/m,w=(u.scrollTop-S)*m}if(v){let S=u.scrollLeft;u.scrollLeft+=v/g,x=(u.scrollLeft-S)*g}e={left:e.left-x,top:e.top-w,right:e.right-x,bottom:e.bottom-w},x&&Math.abs(x-v)<1&&(i="nearest"),w&&Math.abs(w-y)<1&&(r="nearest")}if(p)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function IQ(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class jQ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?fo(n):0),i,Math.min(e.focusOffset,i?fo(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let au=null;function e8(t){if(t.setActive)return t.setActive();if(au)return t.focus(au);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(au==null?{get preventScroll(){return au={preventScroll:!0},!0}}:void 0),!au){au=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let _4;function Fc(t,e,n=e){let i=_4||(_4=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function sd(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function LQ(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function t8(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function DQ(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,fo(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=fo(n))}else{if(n==t)return!0;i=$c(n),n=n.parentNode}}function n8(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function i8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=fo(n)}else if(n.parentNode&&!Bv(n))i=$c(n),n=n.parentNode;else return null}}function r8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!Bv(n))i=$c(n)+1,n=n.parentNode;else return null}}class ci{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new ci(e.parentNode,$c(e),n)}static after(e,n){return new ci(e.parentNode,$c(e)+1,n)}}const IC=[];class Ot{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=Ot.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=C4(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=C4(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=fo(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ot.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,c=i,u=i;l<this.children.length;l++){let d=this.children[l],h=c+d.length;if(c<e&&h>n)return d.domBoundsAround(e,n,c);if(h>=e&&r==-1&&(r=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=h,c=h+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=IC){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new s8(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Ot.prototype.breakAfter=0;function C4(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class s8{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function o8(t,e,n,i,r,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&u&&!o&&!h&&s.length<2&&u.merge(n,r,s.length?d:null,n==0,a,l))){if(i<c.length){let p=c[i];p&&(r<p.length||p.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(p=p.split(r),r=0),!h&&d&&p.merge(0,r,d,!0,0,l)?s[s.length-1]=p:((r||p.children.length&&!p.children[0].length)&&p.merge(0,r,null,!1,0,l),s.push(p))):p!=null&&p.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function a8(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let h of i)d+=h.length;t.length+=d,o8(t,c,u,a,l,i,0,r,s)}let Ui=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},R2=typeof document<"u"?document:{documentElement:{style:{}}};const T2=/Edge\/(\d+)/.exec(Ui.userAgent),l8=/MSIE \d/.test(Ui.userAgent),O2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ui.userAgent),fb=!!(l8||O2||T2),E4=!fb&&/gecko\/(\d+)/i.test(Ui.userAgent),m1=!fb&&/Chrome\/(\d+)/.exec(Ui.userAgent),$Q="webkitFontSmoothing"in R2.documentElement.style,c8=!fb&&/Apple Computer/.test(Ui.vendor),A4=c8&&(/Mobile\/\w+/.test(Ui.userAgent)||Ui.maxTouchPoints>2);var _e={mac:A4||/Mac/.test(Ui.platform),windows:/Win/.test(Ui.platform),linux:/Linux|X11/.test(Ui.platform),ie:fb,ie_version:l8?R2.documentMode||6:O2?+O2[1]:T2?+T2[1]:0,gecko:E4,gecko_version:E4?+(/Firefox\/(\d+)/.exec(Ui.userAgent)||[0,0])[1]:0,chrome:!!m1,chrome_version:m1?+m1[1]:0,ios:A4,android:/Android\b/.test(Ui.userAgent),safari:c8,webkit_version:$Q?+(/\bAppleWebKit\/(\d+)/.exec(Ui.userAgent)||[0,0])[1]:0,tabSize:R2.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const FQ=256;class bs extends Ot{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof bs)||this.length-(n-e)+i.length>FQ||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new bs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new ci(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return zQ(this.dom,e,n)}}class ea extends Ot{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(t8(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof ea&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(a8(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new ea(this.mark,n,o)}domAtPos(e){return u8(this,e)}coordsAt(e,n){return f8(this,e,n)}}function zQ(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?_e.chrome||_e.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Fc(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return _e.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?db(l,o<0):l||null}class za extends Ot{static create(e,n,i){return new za(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=za.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof za)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof za&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return gt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):gt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ci.before(this.dom):ci.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return db(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Bd extends Ot{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Bd&&e.side==this.side}split(){return new Bd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ci.before(this.dom):ci.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return gt.empty}get isHidden(){return!0}}bs.prototype.children=za.prototype.children=Bd.prototype.children=IC;function u8(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new ci(n,0)}function d8(t,e,n){let i,{children:r}=t;n>0&&e instanceof ea&&r.length&&(i=r[r.length-1])instanceof ea&&i.mark.eq(e.mark)?d8(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function f8(t,e,n){let i=null,r=-1,s=null,o=-1;function a(c,u){for(let d=0,h=0;d<c.children.length&&h<=u;d++){let p=c.children[d],g=h+p.length;g>=u&&(p.children.length?a(p,u-h):(!s||s.isHidden&&(n>0||UQ(s,p)))&&(g>u||h==g&&p.getSide()>0)?(s=p,o=u-h):(h<u||h==g&&p.getSide()<0&&!p.isHidden)&&(i=p,r=u-h)),h=g}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):BQ(t)}function BQ(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Ap(e);return n[n.length-1]||null}function UQ(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function I2(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const N4=Object.create(null);function Uv(t,e,n){if(t==e)return!0;t||(t=N4),e||(e=N4);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function j2(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function VQ(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Tl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var wi=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(wi||(wi={}));class nt extends Dc{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new hm(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new xl(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=h8(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new xl(e,i,r,n,e.widget||null,!0)}static line(e){return new pm(e)}static set(e,n=!1){return kt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}nt.none=kt.empty;class hm extends nt{constructor(e){let{start:n,end:i}=h8(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof hm&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Uv(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}hm.prototype.point=!1;class pm extends nt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof pm&&this.spec.class==e.spec.class&&Uv(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}pm.prototype.mapMode=Vi.TrackBefore;pm.prototype.point=!0;class xl extends nt{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?Vi.TrackBefore:Vi.TrackAfter:Vi.TrackDel}get type(){return this.startSide!=this.endSide?wi.WidgetRange:this.startSide<=0?wi.WidgetBefore:wi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof xl&&HQ(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}xl.prototype.point=!0;function h8(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function HQ(t,e){return t==e||!!(t&&e&&t.compare(e))}function C0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class vn extends Ot{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof vn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),a8(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new vn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Uv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){d8(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=I2(n,this.attrs||{})),i&&(this.attrs=I2({class:i},this.attrs||{}))}domAtPos(e){return u8(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(t8(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(j2(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Ot.get(r)instanceof ea;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Ot.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!_e.ios||!this.children.some(s=>s instanceof bs))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof bs)||/[^ -~]/.test(i.text))return null;let r=Ap(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=f8(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof vn&&this.children.length==0&&e.children.length==0&&Uv(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof vn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class Wo extends Ot{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof Wo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?ci.before(this.dom):ci.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new Wo(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return IC}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):gt.empty}domBoundsAround(){return null}become(e){return e instanceof Wo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof L2?null:db(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class L2 extends Tl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Oh{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Wo&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new vn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(pg(new Bd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Wo)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(pg(new bs(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof xl){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof xl)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Wo(i.widget||Ud.block,a,i));else{let l=za.create(i.widget||Ud.inline,a,a?0:i.startSide),c=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),u=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(d.append(pg(new Bd(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(pg(l,r),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new Oh(e,n,i,s);return o.openEnd=kt.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function pg(t,e){for(let n of e)t=new ea(n,[t],t.length);return t}class Ud extends Tl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ud.inline=new Ud("span");Ud.block=new Ud("div");var Vt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Vt||(Vt={}));const zc=Vt.LTR,jC=Vt.RTL;function p8(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const WQ=p8("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),GQ=p8("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),D2=Object.create(null),Ns=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);D2[e]=n,D2[n]=-e}function m8(t){return t<=247?WQ[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?GQ[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const KQ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ba{get dir(){return this.level%2?jC:zc}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function g8(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!g8(i.inner,r.inner))return!1}return!0}const Tt=[];function qQ(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let c=o,u=l,d=l;c<a;c++){let h=m8(t.charCodeAt(c));h==512?h=u:h==8&&d==4&&(h=16),Tt[c]=h==4?2:h,h&7&&(d=h),u=h}for(let c=o,u=l,d=l;c<a;c++){let h=Tt[c];if(h==128)c<a-1&&u==Tt[c+1]&&u&24?h=Tt[c]=u:Tt[c]=256;else if(h==64){let p=c+1;for(;p<a&&Tt[p]==64;)p++;let g=c&&u==8||p<n&&Tt[p]==8?d==1?1:8:256;for(let m=c;m<p;m++)Tt[m]=g;c=p-1}else h==8&&d==1&&(Tt[c]=1);u=h,h&7&&(d=h)}}}function YQ(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:n;for(let d=c,h,p,g;d<u;d++)if(p=D2[h=t.charCodeAt(d)])if(p<0){for(let m=a-3;m>=0;m-=3)if(Ns[m+1]==-p){let v=Ns[m+2],y=v&2?r:v&4?v&1?s:r:0;y&&(Tt[d]=Tt[Ns[m]]=y),a=m;break}}else{if(Ns.length==189)break;Ns[a++]=d,Ns[a++]=h,Ns[a++]=l}else if((g=Tt[d])==2||g==1){let m=g==r;l=m?0:1;for(let v=a-3;v>=0;v-=3){let y=Ns[v+2];if(y&2)break;if(m)Ns[v+2]|=2;else{if(y&4)break;Ns[v+2]|=4}}}}}function XQ(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let c=Tt[l];if(c==256){let u=l+1;for(;;)if(u==a){if(r==n.length)break;u=n[r++].to,a=r<n.length?n[r].from:e}else if(Tt[u]==256)u++;else break;let d=s==1,h=(u<e?Tt[u]:i)==1,p=d==h?d?1:2:i;for(let g=u,m=r,v=m?n[m-1].to:t;g>l;)g==v&&(g=n[--m].from,v=m?n[m-1].to:t),Tt[--g]=p;l=u}else s=c,l++}}}function $2(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let m=Tt[l];m!=a&&(u=!1,d=m==16)}let h=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c<s.length&&g==s[c].from){if(d)break e;let m=s[c];if(!u)for(let v=m.to,y=c+1;;){if(v==n)break e;if(y<s.length&&s[y].from==v)v=s[y++].to;else{if(Tt[v]==a)break e;break}}if(c++,h)h.push(m);else{m.from>l&&o.push(new Ba(l,m.from,p));let v=m.direction==zc!=!(p%2);F2(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.to}g=m.to}else{if(g==n||(u?Tt[g]!=a:Tt[g]==a))break;g++}h?$2(t,l,g,i+1,r,h,o):l<g&&o.push(new Ba(l,g,p)),l=g}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let m=Tt[l-1];m!=a&&(u=!1,d=m==16)}let h=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c&&g==s[c-1].to){if(d)break e;let m=s[--c];if(!u)for(let v=m.from,y=c;;){if(v==e)break e;if(y&&s[y-1].to==v)v=s[--y].from;else{if(Tt[v-1]==a)break e;break}}if(h)h.push(m);else{m.to<l&&o.push(new Ba(m.to,l,p));let v=m.direction==zc!=!(p%2);F2(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.from}g=m.from}else{if(g==e||(u?Tt[g-1]!=a:Tt[g-1]==a))break;g--}h?$2(t,g,l,i+1,r,h,o):g<l&&o.push(new Ba(g,l,p)),l=g}}function F2(t,e,n,i,r,s,o){let a=e%2?2:1;qQ(t,r,s,i,a),YQ(t,r,s,i,a),XQ(r,s,i,a),$2(t,r,s,e,n,i,o)}function JQ(t,e,n){if(!t)return[new Ba(0,0,e==jC?1:0)];if(e==zc&&!n.length&&!KQ.test(t))return v8(t.length);if(n.length)for(;t.length>Tt.length;)Tt[Tt.length]=256;let i=[],r=e==zc?0:1;return F2(t,r,r,n,0,t.length,i),i}function v8(t){return[new Ba(0,t,0)]}let y8="";function ZQ(t,e,n,i,r){var s;let o=i.head-t.from,a=Ba.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],c=l.side(r,n);if(o==c){let h=a+=r?1:-1;if(h<0||h>=e.length)return null;l=e[a=h],o=l.side(!r,n),c=l.side(r,n)}let u=Xn(t.text,o,l.forward(r,n));(u<l.from||u>l.to)&&(u=c),y8=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&u==c&&d.level+(r?0:1)<l.level?re.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):re.cursor(u+t.from,l.forward(r,n)?-1:1,l.level)}function QQ(t,e,n){for(let i=e;i<n;i++){let r=m8(t.charCodeAt(i));if(r==1)return zc;if(r==2||r==4)return jC}return zc}const b8=Ee.define(),x8=Ee.define(),w8=Ee.define(),S8=Ee.define(),z2=Ee.define(),k8=Ee.define(),_8=Ee.define(),LC=Ee.define(),DC=Ee.define(),C8=Ee.define({combine:t=>t.some(e=>e)}),E8=Ee.define({combine:t=>t.some(e=>e)}),A8=Ee.define();class od{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new od(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new od(re.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const mg=tt.define({map:(t,e)=>t.map(e)}),N8=tt.define();function fr(t,e,n){let i=t.facet(S8);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Bo=Ee.define({combine:t=>t.length?t[0]:!0});let eee=0;const Hu=Ee.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class ti{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Hu.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Hu.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new ti(eee++,e,i,r,a=>{let l=[];return o&&l.push(Np.of(c=>{let u=c.plugin(a);return u?o(u):nt.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return ti.define((i,r)=>new e(i,r),n)}}class g1{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(fr(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){fr(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){fr(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const P8=Ee.define(),$C=Ee.define(),Np=Ee.define(),M8=Ee.define(),FC=Ee.define(),R8=Ee.define();function P4(t,e){let n=t.state.facet(R8);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return kt.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=r;for(let h=a.length-1;h>=0;h--,l--){let p=a[h].spec.bidiIsolate,g;if(p==null&&(p=QQ(e.text,c,u)),l>0&&d.length&&(g=d[d.length-1]).to==c&&g.direction==p)g.to=u,d=g.inner;else{let m={from:c,to:u,direction:p,inner:[]};d.push(m),d=m.inner}}}}),r}const T8=Ee.define();function zC(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(T8)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const ah=Ee.define();class Hr{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Hr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],h=n[s+1],p=Math.max(a,d),g=Math.min(u,h);if(p<=g&&new Hr(p+c,g+c,p,g).addToSet(i),h>u)break;s+=2}if(!l)return i;new Hr(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class Vv{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=kn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Hr(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new Vv(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class M4 extends Ot{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=nt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new vn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Hr(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!aee(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?nee(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new Hr(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(_e.ie||_e.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=see(o,a,e.changes);return i=Hr.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=_e.chrome||_e.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Wo&&o.widget instanceof L2&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,h,p,g,m;if(i&&i.range.fromB<d&&i.range.toB>u){let S=Oh.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),_=Oh.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);p=S.breakAtStart,g=S.openStart,m=_.openEnd;let E=this.compositionView(i);_.breakAtStart?E.breakAfter=1:_.content.length&&E.merge(E.length,E.length,_.content[0],!1,_.openStart,0)&&(E.breakAfter=_.content[0].breakAfter,_.content.shift()),S.content.length&&E.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),h=S.content.concat(E).concat(_.content)}else({content:h,breakAtStart:p,openStart:g,openEnd:m}=Oh.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:y}=s.findPos(c,1),{i:x,off:w}=s.findPos(l,-1);o8(this,x,w,v,y,h,p,g,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(N8)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new bs(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new ea(r,[n],n.length);let i=new vn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Ot.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&!(this.view.state.facet(Bo)||this.dom.tabIndex>-1)&&_0(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(_e.gecko&&a.empty&&!this.hasComposition&&tee(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new ci(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Th(l.node,l.offset,u.anchorNode,u.anchorOffset)||!Th(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{_e.android&&_e.chrome&&this.dom.contains(u.focusNode)&&oee(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Ep(this.view.root);if(d)if(a.empty){if(_e.gecko){let h=iee(l.node,l.offset);if(h&&h!=3){let p=(h==1?i8:r8)(l.node,l.offset);p&&(l=new ci(p.node,p.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),h.setEnd(c.node,c.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new ci(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new ci(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Th(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Ep(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=vn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);i.collapse(u.node,u.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=Ot.get(n.childNodes[r]);s instanceof vn&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=Ot.get(n.childNodes[r]);s instanceof vn&&(i=s.domAtPos(s.length))}return i?new ci(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=Ot.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof vn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof vn&&!(i instanceof vn&&n>=0)))i=a,r=c;else if(i&&c==e&&l==e&&a instanceof Wo&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=c}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof vn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof bs))return null;let s=Xn(r.text,i);if(s==i)return null;let o=Fc(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Vt.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],h=c+d.length;if(h>r)break;if(c>=i){let p=d.dom.getBoundingClientRect();if(n.push(p.height),o){let g=d.dom.lastChild,m=g?Ap(g):[];if(m.length){let v=m[m.length-1],y=l?v.right-p.left:p.right-v.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Vt.RTL:Vt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof vn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Ap(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new s8(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(nt.replace({widget:new L2(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return nt.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Np).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(M8).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(kt.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(A8))try{if(c(this.view,e.range,e))return!0}catch(u){fr(this.view.state,u,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=zC(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;OQ(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Vt.LTR)}}function tee(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function O8(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=i8(n.focusNode,n.focusOffset),r=r8(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=Ot.get(r.node);if(!a||a instanceof bs&&a.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let l=Ot.get(i.node);!l||l instanceof bs&&l.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function nee(t,e,n){let i=O8(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new Hr(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=r.parentNode;;d=d.parentNode){let h=Ot.get(d);if(h instanceof ea)u.push({node:d,deco:h.mark});else{if(h instanceof vn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:r,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new hm({inclusive:!0,attributes:VQ(d),tagName:d.tagName.toLowerCase()})});else return null}}}function iee(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let ree=class{constructor(){this.changes=[]}compareRange(e,n){C0(e,n,this.changes)}comparePoint(e,n){C0(e,n,this.changes)}boundChange(e){C0(e,e,this.changes)}};function see(t,e,n){let i=new ree;return kt.compare(t,e,n,i),i.changes}function oee(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function aee(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function lee(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return re.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=Xn(r.text,s,!1):a=Xn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let c=Xn(r.text,o,!1);if(i(r.text.slice(c,o))!=l)break;o=c}for(;a<r.length;){let c=Xn(r.text,a);if(i(r.text.slice(a,c))!=l)break;a=c}return re.range(o+r.from,a+r.from)}function cee(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function uee(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function v1(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function R4(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function T4(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function B2(t,e,n){let i,r,s,o,a=!1,l,c,u,d;for(let g=t.firstChild;g;g=g.nextSibling){let m=Ap(g);for(let v=0;v<m.length;v++){let y=m[v];r&&v1(r,y)&&(y=R4(T4(y,r.bottom),r.top));let x=cee(e,y),w=uee(n,y);if(x==0&&w==0)return g.nodeType==3?O4(g,e,n):B2(g,e,n);(!i||o>w||o==w&&s>x)&&(i=g,r=y,s=x,o=w,a=x?e<y.left?v>0:v<m.length-1:!0),x==0?n>y.bottom&&(!u||u.bottom<y.bottom)?(l=g,u=y):n<y.top&&(!d||d.top>y.top)&&(c=g,d=y):u&&v1(u,y)?u=T4(u,y.bottom):d&&v1(d,y)&&(d=R4(d,y.top))}}if(u&&u.bottom>=n?(i=l,r=u):d&&d.top<=n&&(i=c,r=d),!i)return{node:t,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return O4(i,h,n);if(a&&i.contentEditable!="false")return B2(i,h,n);let p=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:p}}function O4(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=Fc(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let h=e>=(u.left+u.right)/2,p=h;if((_e.chrome||_e.gecko)&&Fc(t,a).getBoundingClientRect().left==u.right&&(p=!h),d<=0)return{node:t,offset:a+(p?1:0)};r=a+(p?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function I8(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,h=d-a;if(h<0)return 0;if(h>c)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,_=!1;l=t.elementAtHeight(h),l.type!=wi.Text;)for(;h=i>0?l.bottom+S:l.top-S,!(h>=0&&h<=c);){if(_)return n?null:0;_=!0,i=-i}d=a+h;let p=l.from;if(p<t.viewport.from)return t.viewport.from==0?0:n?null:I4(t,o,l,u,d);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:I4(t,o,l,u,d);let g=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:g,v=m.elementFromPoint(u,d);v&&!t.contentDOM.contains(v)&&(v=null),v||(u=Math.max(o.left+1,Math.min(o.right-1,u)),v=m.elementFromPoint(u,d),v&&!t.contentDOM.contains(v)&&(v=null));let y,x=-1;if(v&&((r=t.docView.nearest(v))===null||r===void 0?void 0:r.isEditable)!=!1){if(g.caretPositionFromPoint){let S=g.caretPositionFromPoint(u,d);S&&({offsetNode:y,offset:x}=S)}else if(g.caretRangeFromPoint){let S=g.caretRangeFromPoint(u,d);S&&({startContainer:y,startOffset:x}=S,(!t.contentDOM.contains(y)||_e.safari&&dee(y,x,u)||_e.chrome&&fee(y,x,u))&&(y=void 0))}y&&(x=Math.min(fo(y),x))}if(!y||!t.docView.dom.contains(y)){let S=vn.find(t.docView,p);if(!S)return h>l.top+l.height/2?l.to:l.from;({node:y,offset:x}=B2(S.dom,u,d))}let w=t.docView.nearest(y);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=w.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(y,x)+w.posAtStart}function I4(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+AQ(o,s,t.state.tabSize)}function dee(t,e,n){let i,r=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let s=r.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return Fc(t,i-1,i).getBoundingClientRect().right>n}function fee(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Fc(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function U2(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let s of i.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!r||s.type==wi.Text&&(r.type!=s.type||(n<0?s.from<e:s.to>e)))&&(r=s)}}return r||i}return i}function hee(t,e,n,i){let r=U2(t,e.head,e.assoc||-1),s=!i||r.type!=wi.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==Vt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return re.cursor(l,n?-1:1)}return re.cursor(n?r.to:r.from,n?-1:1)}function j4(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let c=ZQ(r,s,o,a,n),u=y8;if(!c){if(r.number==(n?t.state.doc.lines:1))return a;u=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),c=t.visualLineSide(r,!n)}if(l){if(!l(u))return a}else{if(!i)return c;l=i(u)}a=c}}function pee(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Jn.Space&&(r=o),r==o}}function mee(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return re.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-p.from))),a=(s<0?p.top:p.bottom)+u}let d=l.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=a+(h+p)*s,m=I8(t,{x:d,y:g},!1,s);if(g<l.top||g>l.bottom||(s<0?m<r:m>r)){let v=t.docView.coordsForChar(m),y=!v||g<v.top?-1:1;return re.cursor(m,y,void 0,o)}}}function E0(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function y1(t,e,n){let i=E0(t.state.facet(FC).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:re.cursor(i,i<n.from?1:-1)}const lh="";class gee{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(dt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=lh}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=Ot.get(r),l=Ot.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Bv(r))||Bv(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Ot.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(vee(e,i.node,i.offset)?n:0))}}function vee(t,e,n){for(;;){if(!e||n<fo(e))return!1;if(e==t)return!0;n=$c(e)+1,e=e.parentNode}}class L4{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class yee{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:wee(e),l=new gee(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=See(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!M2(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!M2(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((_e.ios||_e.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),h=Math.max(l,c),p=u.from-d,g=u.to-h;(p==0||p==1||d==0)&&(g==0||g==-1||h==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=re.single(c,l)}}}function j8(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,c=null;(s===8||_e.android&&e.text.length<a-o)&&(l=r.to,c="end");let u=xee(t.state.doc.sliceString(o,a,lh),e.text,l-o,c);u&&(_e.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==lh+lh&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:gt.of(e.text.slice(u.from,u.toB).split(lh))})}else i&&(!t.hasFocus&&t.state.facet(Bo)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(_e.mac||_e.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=re.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:gt.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:_e.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=re.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:gt.of([" "])}),n)return BC(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function BC(t,e,n,i=-1){if(_e.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(_e.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&sd(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&sd(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&sd(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=bee(t,e,n));return t.state.facet(k8).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function bee(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&O8(t,n.main.head);if(d){let g=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-g}}else u=t.state.doc.lineAt(s.head);let h=s.to-e.to,p=s.to-s.from;i=r.changeByRange(g=>{if(g.from==s.from&&g.to==s.to)return{changes:a,range:l||g.map(a)};let m=g.to-h,v=m-c.length;if(g.to-g.from!=p||t.state.sliceDoc(v,m)!=c||g.to>=u.from&&g.from<=u.to)return{range:g};let y=r.changes({from:v,to:m,insert:e.insert}),x=g.to-s.to;return{changes:y,range:l?re.range(Math.max(0,l.anchor+x),Math.max(0,l.head+x)):g.map(y)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function xee(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function wee(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new L4(n,i)),(r!=n||s!=i)&&e.push(new L4(r,s))),e}function See(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?re.single(n+e,i+e):null}class kee{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,_e.safari&&e.contentDOM.addEventListener("input",()=>null),_e.gecko&&Fee(e.contentDOM.ownerDocument)}handleEvent(e){!Ree(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=_ee(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&D8.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),_e.android&&_e.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return _e.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=L8.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Cee.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,sd(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:_e.safari&&!_e.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function D4(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){fr(n.state,r)}}}function _ee(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec,s=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(D4(i.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(D4(i.value,l))}}for(let i in xs)n(i).handlers.push(xs[i]);for(let i in Xr)n(i).observers.push(Xr[i]);return e}const L8=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Cee="dthko",D8=[16,17,18,20,91,92,224,225],gg=6;function vg(t){return Math.max(0,t)*.7+8}function Eee(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Aee{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=IQ(e.contentDOM),this.atoms=e.state.facet(FC).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(dt.allowMultipleSelections)&&Nee(e,n),this.dragging=Mee(e,n)&&z8(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Eee(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=zC(this.view);e.clientX-l.left<=r+gg?n=-vg(r-e.clientX):e.clientX+l.right>=o-gg&&(n=vg(e.clientX-o)),e.clientY-l.top<=s+gg?i=-vg(s-e.clientY):e.clientY+l.bottom>=a-gg&&(i=vg(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=E0(this.atoms,r.from,0);o!=r.from&&(s=re.cursor(o,-1))}else{let o=E0(this.atoms,r.from,-1),a=E0(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=re.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?re.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Nee(t,e){let n=t.state.facet(b8);return n.length?n[0](e):_e.mac?e.metaKey:e.ctrlKey}function Pee(t,e){let n=t.state.facet(x8);return n.length?n[0](e):_e.mac?!e.altKey:!e.ctrlKey}function Mee(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Ep(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Ree(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Ot.get(n))&&i.ignoreEvent(e))return!1;return!0}const xs=Object.create(null),Xr=Object.create(null),$8=_e.ie&&_e.ie_version<15||_e.ios&&_e.webkit_version<604;function Tee(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),F8(t,n.value)},50)}function hb(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function F8(t,e){e=hb(t.state,LC,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(V2!=null&&n.selection.ranges.every(l=>l.empty)&&V2==s.toString()){let l=-1;i=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:re.cursor(c.from+d.length)}})}else o?i=n.changeByRange(l=>{let c=s.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:re.cursor(l.from+c.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Xr.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};xs.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Xr.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Xr.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};xs.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(w8))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=jee(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new Aee(t,e,n,i)),i&&t.observer.ignore(()=>{e8(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function $4(t,e,n,i){if(i==1)return re.cursor(e,n);if(i==2)return lee(t.state,e,n);{let r=vn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,re.range(o,a)}}let F4=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function Oee(t,e,n,i){let r=vn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&F4(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&F4(n,i,a)?1:o&&o.bottom>=i?-1:1}function z4(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Oee(t,n,e.clientX,e.clientY)}}const Iee=_e.ie&&_e.ie_version<=11;let B4=null,U4=0,V4=0;function z8(t){if(!Iee)return t.detail;let e=B4,n=V4;return B4=t,V4=Date.now(),U4=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(U4+1)%3:1}function jee(t,e){let n=z4(t,e),i=z8(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=z4(t,s),c,u=$4(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=$4(t,n.pos,n.bias,i),h=Math.min(d.from,u.from),p=Math.max(d.to,u.to);u=h<u.from?re.range(h,p):re.range(p,h)}return o?r.replaceRange(r.main.extend(u.from,u.to)):a&&i==1&&r.ranges.length>1&&(c=Lee(r,l.pos))?c:a?r.addRange(u):re.create([u])}}}function Lee(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return re.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}xs.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=re.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",hb(t.state,DC,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};xs.dragend=t=>(t.inputState.draggedContent=null,!1);function H4(t,e,n,i){if(n=hb(t.state,LC,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&Pee(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}xs.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&H4(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return H4(t,e,i,!0),!0}return!1};xs.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=$8?null:e.clipboardData;return n?(F8(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(Tee(t),!1)};function Dee(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function $ee(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:hb(t,DC,e.join(t.lineBreak)),ranges:n,linewise:i}}let V2=null;xs.copy=xs.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=$ee(t.state);if(!n&&!r)return!1;V2=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=$8?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(Dee(t,n),!1)};const B8=aa.define();function U8(t,e){let n=[];for(let i of t.facet(_8)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:B8.of(!0)}):null}function V8(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=U8(t.state,e);n?t.dispatch(n):t.update([])}},10)}Xr.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),V8(t)};Xr.blur=t=>{t.observer.clearSelectionRange(),V8(t)};Xr.compositionstart=Xr.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Xr.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,_e.chrome&&_e.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Xr.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};xs.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return BC(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let r;if(_e.chrome&&_e.android&&(r=L8.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return _e.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),_e.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Xr.compositionend(t,e),20),!1};const W4=new Set;function Fee(t){W4.has(t)||(W4.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const G4=["pre-wrap","normal","pre-line","break-spaces"];let Vd=!1;function K4(){Vd=!1}class zee{constructor(e){this.lineWrapping=e,this.doc=gt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return G4.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=G4.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class Bee{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Ks{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?wi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof xl?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ks(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var $t=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}($t||($t={}));const A0=.001;class Si{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>A0&&(Vd=!0),this.height=e)}replace(e,n,i){return Si.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=r[a],h=s.lineAt(l,$t.ByPosNoHeight,i.setDoc(n),0,0),p=h.to>=c?h:s.lineAt(c,$t.ByPosNoHeight,i,0,0);for(d+=p.to-c,c=p.to;a>0&&h.from<=r[a-1].toA;)l=r[a-1].fromA,u=r[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,$t.ByPosNoHeight,i,0,0));u+=h.from-l,l=h.from;let g=UC.build(i.setDoc(o),e,u,d);s=Hv(s,s.replace(l,c,g))}return s.updateHeight(i,0)}static empty(){return new or(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new Uee(Si.of(e.slice(0,n)),o,Si.of(e.slice(i)))}}function Hv(t,e){return t==e?t:(t.constructor!=e.constructor&&(Vd=!0),e)}Si.prototype.size=1;class H8 extends Si{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new Ks(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class or extends H8{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new Ks(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof or||r instanceof Bn&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Bn?r=new or(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Si.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Bn extends Si{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let c=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=n.doc.lineAt(c),d=a+u.length*l,h=Math.max(i,e-d/2);return new Ks(u.from,u.length,h,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:u,length:d}=n.doc.line(s+c);return new Ks(u,d,i+a*c,a,0)}}lineAt(e,n,i,r,s){if(n==$t.ByHeight)return this.blockAt(e,i,r,s);if(n==$t.ByPosNoHeight){let{from:p,to:g}=i.doc.lineAt(e);return new Ks(p,g-p,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),c=i.doc.lineAt(e),u=a+c.length*l,d=c.number-o,h=r+a*d+l*(c.from-s-d);return new Ks(c.from,c.length,Math.max(r,Math.min(h,r+this.height-u)),u,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,s);for(let u=e,d=r;u<=n;){let h=i.doc.lineAt(u);if(u==e){let g=h.number-a;d+=l*g+c*(e-s-g)}let p=l+c*h.length;o(new Ks(h.from,h.length,d,p,0)),d+=p,u=h.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Bn?i[i.length-1]=new Bn(s.length+r):i.push(null,new Bn(r-1))}if(e>0){let s=i[0];s instanceof Bn?i[0]=new Bn(e+s.length):i.unshift(new Bn(e-1),null)}return Si.of(i)}decomposeLeft(e,n){n.push(new Bn(e-1),null)}decomposeRight(e,n){n.push(null,new Bn(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new Bn(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=A0&&(l=-2);let h=new or(u,d);h.outdated=!1,o.push(h),a+=u+1}a<=s&&o.push(null,new Bn(s-a).updateHeight(e,a));let c=Si.of(o);return(l<0||Math.abs(c.height-this.height)>=A0||Math.abs(l-this.heightMetrics(e,n).perLine)>=A0)&&(Vd=!0),Hv(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Uee extends Si{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==$t.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==$t.ByPosNoHeight?$t.ByPosNoHeight:$t.ByPos;return l?c.join(this.right.lineAt(a,u,i,o,a)):this.left.lineAt(a,u,i,r,s).join(c)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let c=this.lineAt(l,$t.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&q4(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),q4(s,a)}return Si.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Si.of(this.break?[e,null,n]:[e,n]):(this.left=Hv(this.left,e),this.right=Hv(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function q4(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Bn&&(i=t[e+1])instanceof Bn&&t.splice(e-1,3,new Bn(n.length+1+i.length))}const Vee=5;class UC{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof or?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new or(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new H8(o,r,i)):(o||s||r>=Vee)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new or(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Bn(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof or)return e;let n=new or(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof or)&&!this.isCovered?this.nodes.push(new or(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof or&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new UC(i,e);return kt.spans(n,i,r,s,0),s.finish(i)}}function Hee(t,e,n){let i=new Wee;return kt.compare(t,e,n,i,0),i.changes}class Wee{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&C0(e,n,this.changes,5)}}function Gee(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let h=u.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=Math.min(c==t.parentNode?r.innerHeight:l,h.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function Kee(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function qee(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class b1{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return nt.replace({widget:new Yee(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class Yee extends Tl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Y4{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=X4,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Vt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet($C).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new zee(n),this.stateDeco=e.facet(Np).filter(i=>typeof i!="function"),this.heightMap=Si.empty().applyChanges(this.stateDeco,gt.empty,this.heightOracle.setDoc(e.doc),[new Hr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=nt.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new yg(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?X4:new VC(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(ch(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Np).filter(u=>typeof u!="function");let r=e.changedRanges,s=Hr.extendWithRanges(r,Hee(i,this.stateDeco,e?e.changes:kn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);K4(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Vd)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(E8)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Vt.RTL:Vt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:S,scaleY:_}=QD(n,a);(S>.005&&Math.abs(this.scaleX-S)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=S,this.scaleY=_,c|=16,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=n8(e.scrollDOM);let g=(this.printing?qee:Gee)(n,this.paddingTop),m=g.top-this.pixelViewport.top,v=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!Kee(e.dom))return 0;let x=a.width;if((this.contentDOMWidth!=x||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let S=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(S)&&(o=!0),o||r.lineWrapping&&Math.abs(x-this.contentDOMWidth)>r.charWidth){let{lineHeight:_,charWidth:E,textHeight:C}=e.docView.measureTextSize();o=_>0&&r.refresh(s,_,E,C,x/E,S),o&&(e.docView.minWidth=0,c|=16)}m>0&&v>0?u=Math.max(m,v):m<0&&v<0&&(u=Math.min(m,v)),K4();for(let _ of this.viewports){let E=_.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?Si.empty().applyChanges(this.stateDeco,gt.empty,this.heightOracle,[new Hr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new Bee(_.from,E))}Vd&&(c|=2)}let w=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new yg(r.lineAt(o-i*1e3,$t.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,$t.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(c,$t.ByPos,s,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?h=d.top:h=d.bottom-u,l=new yg(r.lineAt(h-1e3/2,$t.ByHeight,s,0,0).from,r.lineAt(h+u+1e3/2,$t.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new yg(this.heightMap.lineAt(i,$t.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,$t.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,$t.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,$t.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new b1(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Vt.LTR&&!i)return[];let a=[],l=(u,d,h,p)=>{if(d-u<s)return;let g=this.state.selection.main,m=[g.from];g.empty||m.push(g.to);for(let y of m)if(y>u&&y<d){l(u,y-10,h,p),l(y+10,d,h,p);return}let v=Jee(e,y=>y.from>=h.from&&y.to<=h.to&&Math.abs(y.from-u)<s&&Math.abs(y.to-d)<s&&!m.some(x=>y.from<x&&y.to>x));if(!v){if(d<h.to&&n&&i&&n.visibleRanges.some(w=>w.from<=d&&w.to>=d)){let w=n.moveToLineBoundary(re.cursor(d),!1,!0).head;w>u&&(d=w)}let y=this.gapSize(h,u,d,p),x=i||y<2e6?y:2e6;v=new b1(u,d,y,x)}a.push(v)},c=u=>{if(u.length<o||u.type!=wi.Text)return;let d=Xee(u.from,u.to,this.stateDeco);if(d.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(i){let m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,y;if(h!=null){let x=xg(d,h),w=((this.visibleBottom-this.visibleTop)/2+m)/u.height;v=x-w,y=x+w}else v=(this.visibleTop-u.top-m)/u.height,y=(this.visibleBottom-u.top+m)/u.height;p=bg(d,v),g=bg(d,y)}else{let m=d.total*this.heightOracle.charWidth,v=r*this.heightOracle.charWidth,y=0;if(m>2e6)for(let E of e)E.from>=u.from&&E.from<u.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=E.size-E.displaySize);let x=this.pixelViewport.left+y,w=this.pixelViewport.right+y,S,_;if(h!=null){let E=xg(d,h),C=((w-x)/2+v)/m;S=E-C,_=E+C}else S=(x-v)/m,_=(w+v)/m;p=bg(d,S),g=bg(d,_)}p>u.from&&l(u.from,p,u,d),g<u.to&&l(g,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,i,r){let s=xg(r,i)-xg(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){b1.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=nt.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];kt.spans(n,this.viewport.from,this.viewport.to,{span(s,o){i.push({from:s,to:o})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let o=this.visibleRanges[s],a=i[s];(o.from!=a.from||o.to!=a.to)&&(r|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||ch(this.heightMap.lineAt(e,$t.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||ch(this.heightMap.lineAt(this.scaler.fromDOM(e),$t.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return ch(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let yg=class{constructor(e,n){this.from=e,this.to=n}};function Xee(t,e,n){let i=[],r=t,s=0;return kt.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function bg({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function xg(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function Jee(t,e){for(let n of t)if(e(n))return n}const X4={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class VC{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let c=n.lineAt(a,$t.ByPos,e,0,0).top,u=n.lineAt(l,$t.ByPos,e,0,0).bottom;return r+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof VC?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function ch(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new Ks(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>ch(r,e)):t._content)}const wg=Ee.define({combine:t=>t.join(" ")}),H2=Ee.define({combine:t=>t.indexOf(!0)>-1}),W2=yl.newName(),W8=yl.newName(),G8=yl.newName(),K8={"&light":"."+W8,"&dark":"."+G8};function G2(t,e,n){return new yl(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const Zee=G2("."+W2,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},K8),Qee={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},x1=_e.ie&&_e.ie_version<=11;class ete{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new jQ,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(_e.ie&&_e.ie_version<=11||_e.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&_e.android&&e.constructor.EDIT_CONTEXT!==!1&&!(_e.chrome&&_e.chrome_version<126)&&(this.editContext=new nte(e),e.state.facet(Bo)&&(e.contentDOM.editContext=this.editContext.editContext)),x1&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Bo)?i.root.activeElement!=this.dom:!_0(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(_e.ie&&_e.ie_version<=11||_e.android&&_e.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Th(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Ep(e.root);if(!n)return!1;let i=_e.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&tte(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=_0(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&DQ(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Qee),x1&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),x1&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&sd(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&_0(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new yee(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=j8(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=J4(n,e.previousSibling||e.target.previousSibling,-1),r=J4(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Bo)!=e.state.facet(Bo)&&(e.view.contentDOM.editContext=e.state.facet(Bo)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function J4(t,e,n){for(;e;){let i=Ot.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function Z4(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return Th(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function tte(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return Z4(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?Z4(t,n):null}class nte{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:s,head:o}=r,a=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:gt.of(i.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=re.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));u.main.eq(r)||e.dispatch({selection:u,userEvent:"select"});return}if((_e.mac||_e.android)&&c.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:gt.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);BC(e,c,re.single(this.toEditorPos(i.selectionStart,u),this.toEditorPos(i.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(nt.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:N8.of(nt.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Ep(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(i)return;let u=c.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(c)){r=this.pendingContextChange=null,n+=u,this.to+=u;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Re{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||LQ(e.parent)||document,this.viewState=new Y4(e.state||dt.create(e)),e.scrollTo&&e.scrollTo.is(mg)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Hu).map(r=>new g1(r));for(let r of this.plugins)r.update(this);this.observer=new ete(this),this.inputState=new kee(this),this.inputState.ensureHandlers(this.plugins),this.docView=new M4(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof An?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(B8))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=U8(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(dt.phrases)!=this.state.facet(dt.phrases))return this.setState(s);r=Vv.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:p}=h.state.selection;d=new od(p.empty?p:re.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of h.effects)p.is(mg)&&(d=p.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=Wv.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(ah)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(wg)!=r.state.facet(wg)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let h of this.state.facet(z2))try{h(r)}catch(p){fr(this.state,p,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!j8(this,u)&&c.force&&sd(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Y4(e),this.plugins=e.facet(Hu).map(i=>new g1(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new M4(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Hu),i=e.state.facet(Hu);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new g1(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){fr(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(n8(i))s=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(r);s=p.from,o=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(g){return fr(this.state,g),Q4}}),d=Vv.create(this,this.state,[]),h=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d),h&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=Q4)try{let g=c[p];g.write&&g.write(u[p],this)}catch(g){fr(this.state,g)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(g>1||g<-1){r=r+g,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(z2))a(n)}get themeClasses(){return W2+" "+(this.state.facet(H2)?G8:W8)+" "+this.state.facet(wg)}updateAttrs(){let e=eM(this,P8,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Bo)?"true":"false",class:"cm-content",style:`${_e.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),eM(this,$C,n);let i=this.observer.ignore(()=>{let r=j2(this.contentDOM,this.contentAttrs,n),s=j2(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Re.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(ah);let e=this.state.facet(Re.cspNonce);yl.mount(this.root,this.styleModules.concat(Zee).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return y1(this,e,j4(this,e,n,i))}moveByGroup(e,n){return y1(this,e,j4(this,e,n,i=>pee(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return re.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return hee(this,e,n,i)}moveVertically(e,n,i){return y1(this,e,mee(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),I8(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Ba.find(s,e-r.from,-1,n)];return db(i,o.dir==Vt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(C8)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>ite)return v8(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||g8(s.isolates,i=P4(this,e))))return s.order;i||(i=P4(this,e));let r=JQ(e.text,n,i);return this.bidiCache.push(new Wv(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||_e.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{e8(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return mg.of(new od(typeof e=="number"?re.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return mg.of(new od(re.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ti.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ti.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=yl.newName(),r=[wg.of(i),ah.of(G2(`.${i}`,e))];return n&&n.dark&&r.push(H2.of(!0)),r}static baseTheme(e){return um.lowest(ah.of(G2("."+W2,e,K8)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Ot.get(i)||Ot.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Re.styleModule=ah;Re.inputHandler=k8;Re.clipboardInputFilter=LC;Re.clipboardOutputFilter=DC;Re.scrollHandler=A8;Re.focusChangeEffect=_8;Re.perLineTextDirection=C8;Re.exceptionSink=S8;Re.updateListener=z2;Re.editable=Bo;Re.mouseSelectionStyle=w8;Re.dragMovesSelection=x8;Re.clickAddsSelectionRange=b8;Re.decorations=Np;Re.outerDecorations=M8;Re.atomicRanges=FC;Re.bidiIsolatedRanges=R8;Re.scrollMargins=T8;Re.darkTheme=H2;Re.cspNonce=Ee.define({combine:t=>t.length?t[0]:""});Re.contentAttributes=$C;Re.editorAttributes=P8;Re.lineWrapping=Re.contentAttributes.of({class:"cm-lineWrapping"});Re.announce=tt.define();const ite=4096,Q4={};class Wv{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Vt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new Wv(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function eM(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&I2(o,n)}return n}const rte=_e.mac?"mac":_e.windows?"win":_e.linux?"linux":"key";function ste(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Sg(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const ote=um.default(Re.domEventHandlers({keydown(t,e){return X8(Y8(e.state),t,e,"editor")}})),q8=Ee.define({enables:ote}),tM=new WeakMap;function Y8(t){let e=t.facet(q8),n=tM.get(e);return n||tM.set(e,n=cte(e.reduce((i,r)=>i.concat(r),[]))),n}function ate(t,e,n){return X8(Y8(t.state),e,t,n)}let Ra=null;const lte=4e3;function cte(t,e=rte){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,h;let p=n[o]||(n[o]=Object.create(null)),g=a.split(/ (?!$)/).map(y=>ste(y,e));for(let y=1;y<g.length;y++){let x=g.slice(0,y).join(" ");r(x,!0),p[x]||(p[x]={preventDefault:!0,stopPropagation:!1,run:[w=>{let S=Ra={view:w,prefix:x,scope:o};return setTimeout(()=>{Ra==S&&(Ra=null)},lte),!0}]})}let m=g.join(" ");r(m,!1);let v=p[m]||(p[m]={preventDefault:!1,stopPropagation:!1,run:((h=(d=p._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&v.run.push(l),c&&(v.preventDefault=!0),u&&(v.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let h in u)u[h].run.push(p=>d(p,K2))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let K2=null;function X8(t,e,n,i){K2=e;let r=RQ(e),s=Ir(r,0),o=zo(s)==r.length&&r!=" ",a="",l=!1,c=!1,u=!1;Ra&&Ra.view==n&&Ra.scope==i&&(a=Ra.prefix+" ",D8.indexOf(e.keyCode)<0&&(c=!0,Ra=null));let d=new Set,h=v=>{if(v){for(let y of v.run)if(!d.has(y)&&(d.add(y),y(n)))return v.stopPropagation&&(u=!0),!0;v.preventDefault&&(v.stopPropagation&&(u=!0),c=!0)}return!1},p=t[i],g,m;return p&&(h(p[a+Sg(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(_e.windows&&e.ctrlKey&&e.altKey)&&(g=bl[e.keyCode])&&g!=r?(h(p[a+Sg(g,e,!0)])||e.shiftKey&&(m=Cp[e.keyCode])!=r&&m!=g&&h(p[a+Sg(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(p[a+Sg(r,e,!0)])&&(l=!0),!l&&h(p._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),K2=null,l}class mm{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=J8(e);return[new mm(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return ute(e,n,i)}}function J8(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Vt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function nM(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function ute(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==Vt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=J8(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=a.right-(u?parseInt(u.paddingRight):0),p=U2(t,i,1),g=U2(t,r,-1),m=p.type==wi.Text?p:null,v=g.type==wi.Text?g:null;if(m&&(t.lineWrapping||p.widgetLineBreaks)&&(m=nM(t,i,1,m)),v&&(t.lineWrapping||g.widgetLineBreaks)&&(v=nM(t,r,-1,v)),m&&v&&m.from==v.from&&m.to==v.to)return x(w(n.from,n.to,m));{let _=m?w(n.from,null,m):S(p,!1),E=v?w(null,n.to,v):S(g,!0),C=[];return(m||p).to<(v||g).from-(m&&v?1:0)||p.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<E.top?C.push(y(d,_.bottom,h,E.top)):_.bottom<E.top&&t.elementAtHeight((_.bottom+E.top)/2).type==wi.Text&&(_.bottom=E.top=(_.bottom+E.top)/2),x(_).concat(C).concat(x(E))}function y(_,E,C,N){return new mm(e,_-l.left,E-l.top,C-_,N-E)}function x({top:_,bottom:E,horizontal:C}){let N=[];for(let M=0;M<C.length;M+=2)N.push(y(C[M],_,C[M+1],E));return N}function w(_,E,C){let N=1e9,M=-1e9,I=[];function O(L,K,X,te,U){let z=t.coordsAtPos(L,L==C.to?-2:2),ie=t.coordsAtPos(X,X==C.from?2:-2);!z||!ie||(N=Math.min(z.top,ie.top,N),M=Math.max(z.bottom,ie.bottom,M),U==Vt.LTR?I.push(s&&K?d:z.left,s&&te?h:ie.right):I.push(!s&&te?d:ie.left,!s&&K?h:z.right))}let T=_??C.from,H=E??C.to;for(let L of t.visibleRanges)if(L.to>T&&L.from<H)for(let K=Math.max(L.from,T),X=Math.min(L.to,H);;){let te=t.state.doc.lineAt(K);for(let U of t.bidiSpans(te)){let z=U.from+te.from,ie=U.to+te.from;if(z>=X)break;ie>K&&O(Math.max(z,K),_==null&&z<=T,Math.min(ie,X),E==null&&ie>=H,U.dir)}if(K=te.to+1,K>=X)break}return I.length==0&&O(T,_==null,H,E==null,t.textDirection),{top:N,bottom:M,horizontal:I}}function S(_,E){let C=a.top+(E?_.top:_.bottom);return{top:C,bottom:C,horizontal:[]}}}function dte(t,e){return t.constructor==e.constructor&&t.eq(e)}class fte{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(N0)!=e.state.facet(N0)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(N0);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!dte(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const N0=Ee.define();function Z8(t){return[ti.define(e=>new fte(e,t)),N0.of(t)]}const Pp=Ee.define({combine(t){return Rl(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function hte(t={}){return[Pp.of(t),pte,mte,gte,E8.of(!0)]}function Q8(t){return t.startState.facet(Pp)!=t.state.facet(Pp)}const pte=Z8({above:!0,markers(t){let{state:e}=t,n=e.facet(Pp),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:re.cursor(r.head,r.head>r.anchor?-1:1);for(let l of mm.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=Q8(t);return n&&iM(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){iM(e.state,t)},class:"cm-cursorLayer"});function iM(t,e){e.style.animationDuration=t.facet(Pp).cursorBlinkRate+"ms"}const mte=Z8({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:mm.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||Q8(t)},class:"cm-selectionLayer"}),gte=um.highest(Re.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function rM(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function vte(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class yte{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,c,u)=>r(u,c,c+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,c,u)=>{let d=i(a,l,c);d&&u(c,c+a[0].length,d)};else if(i)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new vl,i=n.add.bind(n);for(let{from:r,to:s}of vte(e,this.maxLength))rM(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let h=[],p,g=(m,v,y)=>h.push(y.range(m,v));if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<d-l.from;)this.addMatch(p,e,p.index+l.from,g);else rM(e.state.doc,this.regexp,u,d,(m,v)=>this.addMatch(v,e,m,g));n=n.update({filterFrom:u,filterTo:d,filter:(m,v)=>m<u||v>d,add:h})}}return n}}const q2=/x/.unicode!=null?"gu":"g",bte=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,q2),xte={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let w1=null;function wte(){var t;if(w1==null&&typeof document<"u"&&document.body){let e=document.body.style;w1=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return w1||!1}const P0=Ee.define({combine(t){let e=Rl(t,{render:null,specialChars:bte,addSpecialChars:null});return(e.replaceTabs=!wte())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,q2)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,q2)),e}});function Ste(t={}){return[P0.of(t),kte()]}let sM=null;function kte(){return sM||(sM=ti.fromClass(class{constructor(t){this.view=t,this.decorations=nt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(P0)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new yte({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=Ir(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=fm(o.text,a,i-o.from);return nt.replace({widget:new Ate((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=nt.replace({widget:new Ete(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(P0);t.startState.facet(P0)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const _te="";function Cte(t){return t>=32?_te:t==10?"":String.fromCharCode(9216+t)}class Ete extends Tl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=Cte(this.code),i=e.state.phrase("Control character")+" "+(xte[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Ate extends Tl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Nte(){return Mte}const Pte=nt.line({class:"cm-activeLine"}),Mte=ti.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(Pte.range(r.from)),e=r.from)}return nt.set(n)}},{decorations:t=>t.decorations}),Mf="-10000px";class e6{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let h=this.tooltips[d];h&&h.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function Rte(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const S1=Ee.define({combine:t=>{var e,n,i;return{position:_e.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Rte}}}),oM=new WeakMap,HC=ti.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(S1);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new e6(t,WC,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(S1);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=Mf,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(_e.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Mf&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=zC(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(S1).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],h=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){u.style.top=Mf;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,m=h.right-h.left,v=(e=oM.get(c))!==null&&e!==void 0?e:h.bottom-h.top,y=c.offset||Ote,x=this.view.textDirection==Vt.LTR,w=h.width>i.right-i.left?x?i.left:i.right-h.width:x?Math.max(i.left,Math.min(d.left-(p?14:0)+y.x,i.right-m)):Math.min(Math.max(i.left,d.left-m+(p?14:0)-y.x),i.right-m),S=this.above[a];!l.strictSide&&(S?d.top-v-g-y.y<i.top:d.bottom+v+g+y.y>i.bottom)&&S==i.bottom-d.bottom>d.top-i.top&&(S=this.above[a]=!S);let _=(S?d.top-i.top:i.bottom-d.bottom)-g;if(_<v&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=Mf;continue}oM.set(c,v),u.style.height=(v=_)/s+"px"}else u.style.height&&(u.style.height="");let E=S?d.top-v-g-y.y:d.bottom+g+y.y,C=w+m;if(c.overlap!==!0)for(let N of o)N.left<C&&N.right>w&&N.top<E+v&&N.bottom>E&&(E=S?N.top-v-2-g:N.bottom+g+2);if(this.position=="absolute"?(u.style.top=(E-t.parent.top)/s+"px",aM(u,(w-t.parent.left)/r)):(u.style.top=E/s+"px",aM(u,w/r)),p){let N=d.left+(x?y.x:-y.x)-(w+14-7);p.style.left=N/r+"px"}c.overlap!==!0&&o.push({left:w,top:E,right:C,bottom:E+v}),u.classList.toggle("cm-tooltip-above",S),u.classList.toggle("cm-tooltip-below",!S),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Mf}},{eventObservers:{scroll(){this.maybeMeasure()}}});function aM(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const Tte=Re.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Ote={x:0,y:0},WC=Ee.define({enables:[HC,Tte]}),Gv=Ee.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class pb{static create(e){return new pb(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new e6(e,Gv,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Ite=WC.compute([Gv],t=>{let e=t.facet(Gv);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:pb.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class jte{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof za)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),c=l&&l.dir==Vt.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>fr(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(HC),n=e?e.manager.tooltips.findIndex(i=>i.create==pb.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!Lte(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!Dte(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const kg=4;function Lte(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=n-kg&&e.clientX<=i+kg&&e.clientY>=r-kg&&e.clientY<=s+kg}function Dte(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function $te(t,e={}){let n=tt.define(),i=Ei.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,Vi.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(zte)&&(r=[]);return r},provide:r=>Gv.from(r)});return{active:i,extension:[i,ti.define(r=>new jte(r,t,i,n,e.hoverTime||300)),Ite]}}function Fte(t,e){let n=t.plugin(HC);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const zte=tt.define(),lM=Ee.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Mp(t,e){let n=t.plugin(t6),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const t6=ti.fromClass(class{constructor(t){this.input=t.state.facet(Rp),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(lM);this.top=new _g(t,!0,e.topContainer),this.bottom=new _g(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(lM);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new _g(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new _g(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Rp);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),r.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class _g{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=cM(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=cM(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function cM(t){let e=t.nextSibling;return t.remove(),e}const Rp=Ee.define({enables:t6});class wl extends Dc{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}wl.prototype.elementClass="";wl.prototype.toDOM=void 0;wl.prototype.mapMode=Vi.TrackBefore;wl.prototype.startSide=wl.prototype.endSide=-1;wl.prototype.point=!0;const M0=Ee.define(),Bte=Ee.define(),R0=Ee.define(),uM=Ee.define({combine:t=>t.some(e=>e)});function Ute(t){return[Vte]}const Vte=ti.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(R0).map(e=>new fM(t,e)),this.fixed=!t.state.facet(uM);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(uM)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=kt.iter(this.view.state.facet(M0),this.view.viewport.from),i=[],r=this.gutters.map(s=>new Hte(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==wi.Text&&o){Y2(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==wi.Text){Y2(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(R0),n=t.state.facet(R0),i=t.docChanged||t.heightChanged||t.viewportChanged||!kt.eq(t.startState.facet(M0),t.state.facet(M0),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new fM(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,r=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Vt.LTR?{left:i,right:r}:{right:i,left:r}})});function dM(t){return Array.isArray(t)?t:[t]}function Y2(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Hte{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=kt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new n6(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];Y2(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(Bte)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class fM{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=dM(n.markers(e)),n.initialSpacer&&(this.spacer=new n6(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=dM(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!kt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class n6{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Wte(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(i+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function Wte(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const Gte=Ee.define(),Kte=Ee.define(),Wu=Ee.define({combine(t){return Rl(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return i}})}});class k1 extends wl{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function _1(t,e){return t.state.facet(Wu).formatNumber(e,t.state)}const qte=R0.compute([Wu],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Gte)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new k1(_1(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(Kte)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Wu)!=e.state.facet(Wu),initialSpacer(e){return new k1(_1(e,hM(e.state.doc.lines)))},updateSpacer(e,n){let i=_1(n.view,hM(n.view.state.doc.lines));return i==e.number?e:new k1(i)},domEventHandlers:t.facet(Wu).domEventHandlers,side:"before"}));function Yte(t={}){return[Wu.of(t),Ute(),qte]}function hM(t){let e=9;for(;e<t;)e=e*10+9;return e}const Xte=new class extends wl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Jte=M0.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(Xte.range(r)))}return kt.of(e)});function Zte(){return Jte}const i6=new dm;function Qte(t){window.codemirror&&window.codemirror.dispatch({effects:i6.reconfigure(dt.readOnly.of(t))})}const r6=tt.define(),X2=tt.define(),ene=Ei.define({create(){return nt.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(r6)&&(n=nt.none,i.value!==null&&(n=n.update({add:[tne.range(i.value)]}))),i.is(X2)&&(n=nt.none,i.value!==null&&(n=n.update({add:[nne.range(i.value)]})));return n},provide:t=>Re.decorations.from(t)}),tne=nt.line({class:"!bg-gradient-to-r !from-mantis-500/8 !via-mantis-500/5 !to-transparent !border-l-2 !border-mantis-400/40 !shadow-sm"}),nne=nt.line({class:"cm-current-instruction"});function ine(t){window.codemirror&&window.codemirror.dispatch({effects:r6.of(null)})}function s6(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:X2.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:X2.of(e)})}}const Kv=ue(!1),o6=Na.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||Na,rne=1,pM=5e3,js=new Map,Ih=[];function sne(){let t=0;for(const e of js.keys())e>t&&(t=e);return t+1}function one(){let t=1/0;for(const e of js.keys())e<t&&(t=e);return t}function Ua(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??pM,s=Number.isFinite(r)?setTimeout(()=>Ua({type:"DISMISS_TOAST",toastId:n}),r):null;js.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Ua({type:"DISMISS_TOAST",toastId:n})}}}),js.size>rne&&Ua({type:"DISMISS_TOAST",toastId:one()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=js.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??pM,o=Number.isFinite(s)?setTimeout(()=>Ua({type:"DISMISS_TOAST",toastId:n}),s):null;js.set(n,{...r,...i,timeout:o})}else js.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=js.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),js.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&Ih.length>0){const n=Array.from(js.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of Ih)i(n)}}function $i(t){const e=sne(),n=r=>Ua({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>Ua({type:"DISMISS_TOAST",toastId:e});return Ua({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function ane(){const[t,e]=b.useState([]);return b.useEffect(()=>(Ih.push(e),()=>{const n=Ih.indexOf(e);n>-1&&Ih.splice(n,1)}),[]),{toastList:t,toast:$i,dismiss:n=>Ua({type:"DISMISS_TOAST",toastId:n})}}var GC=vm(),Ze=t=>gm(t,GC),KC=vm();Ze.write=t=>gm(t,KC);var mb=vm();Ze.onStart=t=>gm(t,mb);var qC=vm();Ze.onFrame=t=>gm(t,qC);var YC=vm();Ze.onFinish=t=>gm(t,YC);var ad=[];Ze.setTimeout=(t,e)=>{const n=Ze.now()+e,i=()=>{const s=ad.findIndex(o=>o.cancel==i);~s&&ad.splice(s,1),Ha-=~s?1:0},r={time:n,handler:t,cancel:i};return ad.splice(a6(n),0,r),Ha+=1,l6(),r};var a6=t=>~(~ad.findIndex(e=>e.time>t)||~ad.length);Ze.cancel=t=>{mb.delete(t),qC.delete(t),YC.delete(t),GC.delete(t),KC.delete(t)};Ze.sync=t=>{J2=!0,Ze.batchedUpdates(t),J2=!1};Ze.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Ze.onStart(n)}return i.handler=t,i.cancel=()=>{mb.delete(n),e=null},i};var XC=typeof window<"u"?window.requestAnimationFrame:()=>{};Ze.use=t=>XC=t;Ze.now=typeof performance<"u"?()=>performance.now():Date.now;Ze.batchedUpdates=t=>t();Ze.catch=console.error;Ze.frameLoop="always";Ze.advance=()=>{Ze.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):u6()};var Va=-1,Ha=0,J2=!1;function gm(t,e){J2?(e.delete(t),t(0)):(e.add(t),l6())}function l6(){Va<0&&(Va=0,Ze.frameLoop!=="demand"&&XC(c6))}function lne(){Va=-1}function c6(){~Va&&(XC(c6),Ze.batchedUpdates(u6))}function u6(){const t=Va;Va=Ze.now();const e=a6(Va);if(e&&(d6(ad.splice(0,e),n=>n.handler()),Ha-=e),!Ha){lne();return}mb.flush(),GC.flush(t?Math.min(64,Va-t):16.667),qC.flush(),KC.flush(),YC.flush()}function vm(){let t=new Set,e=t;return{add(n){Ha+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Ha-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Ha-=e.size,d6(e,i=>i(n)&&t.add(i)),Ha+=t.size,e=t)}}}function d6(t,e){t.forEach(n=>{try{e(n)}catch(i){Ze.catch(i)}})}var cne=Object.defineProperty,une=(t,e)=>{for(var n in e)cne(t,n,{get:e[n],enumerable:!0})},ws={};une(ws,{assign:()=>fne,colors:()=>sl,createStringInterpolator:()=>ZC,skipAnimation:()=>h6,to:()=>f6,willAdvance:()=>QC});function Z2(){}var dne=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),de={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function _o(t,e){if(de.arr(t)){if(!de.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var ft=(t,e)=>t.forEach(e);function ho(t,e,n){if(de.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var hr=t=>de.und(t)?[]:de.arr(t)?t:[t];function jh(t,e){if(t.size){const n=Array.from(t);t.clear(),ft(n,e)}}var uh=(t,...e)=>jh(t,n=>n(...e)),JC=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),ZC,f6,sl=null,h6=!1,QC=Z2,fne=t=>{t.to&&(f6=t.to),t.now&&(Ze.now=t.now),t.colors!==void 0&&(sl=t.colors),t.skipAnimation!=null&&(h6=t.skipAnimation),t.createStringInterpolator&&(ZC=t.createStringInterpolator),t.requestAnimationFrame&&Ze.use(t.requestAnimationFrame),t.batchedUpdates&&(Ze.batchedUpdates=t.batchedUpdates),t.willAdvance&&(QC=t.willAdvance),t.frameLoop&&(Ze.frameLoop=t.frameLoop)},Lh=new Set,Lr=[],C1=[],qv=0,gb={get idle(){return!Lh.size&&!Lr.length},start(t){qv>t.priority?(Lh.add(t),Ze.onStart(hne)):(p6(t),Ze(Q2))},advance:Q2,sort(t){if(qv)Ze.onFrame(()=>gb.sort(t));else{const e=Lr.indexOf(t);~e&&(Lr.splice(e,1),m6(t))}},clear(){Lr=[],Lh.clear()}};function hne(){Lh.forEach(p6),Lh.clear(),Ze(Q2)}function p6(t){Lr.includes(t)||m6(t)}function m6(t){Lr.splice(pne(Lr,e=>e.priority>t.priority),0,t)}function Q2(t){const e=C1;for(let n=0;n<Lr.length;n++){const i=Lr[n];qv=i.priority,i.idle||(QC(i),i.advance(t),i.idle||e.push(i))}return qv=0,C1=Lr,C1.length=0,Lr=e,Lr.length>0}function pne(t,e){const n=t.findIndex(e);return n<0?t.length:n}var mne=(t,e,n)=>Math.min(Math.max(n,t),e),gne={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},hs="[-+]?\\d*\\.?\\d+",Yv=hs+"%";function vb(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var vne=new RegExp("rgb"+vb(hs,hs,hs)),yne=new RegExp("rgba"+vb(hs,hs,hs,hs)),bne=new RegExp("hsl"+vb(hs,Yv,Yv)),xne=new RegExp("hsla"+vb(hs,Yv,Yv,hs)),wne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Sne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,kne=/^#([0-9a-fA-F]{6})$/,_ne=/^#([0-9a-fA-F]{8})$/;function Cne(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=kne.exec(t))?parseInt(e[1]+"ff",16)>>>0:sl&&sl[t]!==void 0?sl[t]:(e=vne.exec(t))?(lu(e[1])<<24|lu(e[2])<<16|lu(e[3])<<8|255)>>>0:(e=yne.exec(t))?(lu(e[1])<<24|lu(e[2])<<16|lu(e[3])<<8|vM(e[4]))>>>0:(e=wne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=_ne.exec(t))?parseInt(e[1],16)>>>0:(e=Sne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=bne.exec(t))?(mM(gM(e[1]),Cg(e[2]),Cg(e[3]))|255)>>>0:(e=xne.exec(t))?(mM(gM(e[1]),Cg(e[2]),Cg(e[3]))|vM(e[4]))>>>0:null}function E1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function mM(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=E1(r,i,t+1/3),o=E1(r,i,t),a=E1(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function lu(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function gM(t){return(parseFloat(t)%360+360)%360/360}function vM(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Cg(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function yM(t){let e=Cne(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Tp=(t,e,n)=>{if(de.fun(t))return t;if(de.arr(t))return Tp({range:t,output:e,extrapolate:n});if(de.str(t.output[0]))return ZC(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=Ane(c,s);return Ene(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function Ene(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function Ane(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Nne=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return mne(0,1,r/t)},Xv=1.70158,Eg=Xv*1.525,bM=Xv+1,xM=2*Math.PI/3,wM=2*Math.PI/4.5,Ag=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,g6={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>bM*t*t*t-Xv*t*t,easeOutBack:t=>1+bM*Math.pow(t-1,3)+Xv*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Eg+1)*2*t-Eg)/2:(Math.pow(2*t-2,2)*((Eg+1)*(t*2-2)+Eg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*xM),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*xM)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*wM))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*wM)/2+1,easeInBounce:t=>1-Ag(1-t),easeOutBounce:Ag,easeInOutBounce:t=>t<.5?(1-Ag(1-2*t))/2:(1+Ag(2*t-1))/2,steps:Nne},Op=Symbol.for("FluidValue.get"),Hd=Symbol.for("FluidValue.observers"),jr=t=>!!(t&&t[Op]),Fi=t=>t&&t[Op]?t[Op]():t,SM=t=>t[Hd]||null;function Pne(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Ip(t,e){const n=t[Hd];n&&n.forEach(i=>{Pne(i,e)})}var v6=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Mne(this,t)}},Mne=(t,e)=>y6(t,Op,e);function sf(t,e){if(t[Op]){let n=t[Hd];n||y6(t,Hd,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function jp(t,e){const n=t[Hd];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Hd]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var y6=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),T0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Rne=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,kM=new RegExp(`(${T0.source})(%|[a-z]+)`,"i"),Tne=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,yb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,b6=t=>{const[e,n]=One(t);if(!e||JC())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&yb.test(n))return b6(n);if(n)return n}return t},One=t=>{const e=yb.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},A1,Ine=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,x6=t=>{A1||(A1=sl?new RegExp(`(${Object.keys(sl).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Fi(s).replace(yb,b6).replace(Rne,yM).replace(A1,yM)),n=e.map(s=>s.match(T0).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Tp({...t,output:s}));return s=>{var l;const o=!kM.test(e[0])&&((l=e.find(c=>kM.test(c)))==null?void 0:l.replace(T0,""));let a=0;return e[0].replace(T0,()=>`${r[a++](s)}${o||""}`).replace(Tne,Ine)}},eE="react-spring: ",w6=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${eE}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},jne=w6(console.warn);function Lne(){jne(`${eE}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Dne=w6(console.warn);function $ne(){Dne(`${eE}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function bb(t){return de.str(t)&&(t[0]=="#"||/\d/.test(t)||!JC()&&yb.test(t)||t in(sl||{}))}var tE=JC()?b.useEffect:b.useLayoutEffect,Fne=()=>{const t=b.useRef(!1);return tE(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function S6(){const t=b.useState()[1],e=Fne();return()=>{e.current&&t(Math.random())}}function zne(t,e){const[n]=b.useState(()=>({inputs:e,result:t()})),i=b.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&Bne(e,s.inputs)||(s={inputs:e,result:t()}):s=n,b.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Bne(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var k6=t=>b.useEffect(t,Une),Une=[];function _M(t){const e=b.useRef();return b.useEffect(()=>{e.current=t}),e.current}var Lp=Symbol.for("Animated:node"),Vne=t=>!!t&&t[Lp]===t,Ds=t=>t&&t[Lp],nE=(t,e)=>dne(t,Lp,e),xb=t=>t&&t[Lp]&&t[Lp].getPayload(),_6=class{constructor(){nE(this,this)}getPayload(){return this.payload||[]}},ym=class extends _6{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,de.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new ym(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return de.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,de.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Dp=class extends ym{constructor(t){super(0),this._string=null,this._toString=Tp({output:[t,t]})}static create(t){return new Dp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(de.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Tp({output:[this.getValue(),t]})),this._value=0,super.reset()}},Jv={dependencies:null},wb=class extends _6{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return ho(this.source,(n,i)=>{Vne(n)?e[i]=n.getValue(t):jr(n)?e[i]=Fi(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&ft(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return ho(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Jv.dependencies&&jr(t)&&Jv.dependencies.add(t);const e=xb(t);e&&ft(e,n=>this.add(n))}},C6=class extends wb{constructor(t){super(t)}static create(t){return new C6(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(Hne)),!0)}};function Hne(t){return(bb(t)?Dp:ym).create(t)}function ek(t){const e=Ds(t);return e?e.constructor:de.arr(t)?C6:bb(t)?Dp:ym}var CM=(t,e)=>{const n=!de.fun(t)||t.prototype&&t.prototype.isReactComponent;return b.forwardRef((i,r)=>{const s=b.useRef(null),o=n&&b.useCallback(g=>{s.current=Kne(r,g)},[r]),[a,l]=Gne(i,e),c=S6(),u=()=>{const g=s.current;if(n&&!g)return;(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&c()},d=new Wne(u,l),h=b.useRef();tE(()=>(h.current=d,ft(l,g=>sf(g,d)),()=>{h.current&&(ft(h.current.deps,g=>jp(g,h.current)),Ze.cancel(h.current.update))})),b.useEffect(u,[]),k6(()=>()=>{const g=h.current;ft(g.deps,m=>jp(m,g))});const p=e.getComponentProps(a.getValue());return b.createElement(t,{...p,ref:o})})},Wne=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Ze.write(this.update)}};function Gne(t,e){const n=new Set;return Jv.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new wb(t),Jv.dependencies=null,[t,n]}function Kne(t,e){return t&&(de.fun(t)?t(e):t.current=e),e}var EM=Symbol.for("AnimatedComponent"),qne=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new wb(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=AM(o)||"Anonymous";return de.str(o)?o=s[o]||(s[o]=CM(o,r)):o=o[EM]||(o[EM]=CM(o,r)),o.displayName=`Animated(${a})`,o};return ho(t,(o,a)=>{de.arr(t)&&(a=AM(o)),s[a]=s(o)}),{animated:s}},AM=t=>de.str(t)?t:t&&de.str(t.displayName)?t.displayName:de.fun(t)&&t.name||null;function oc(t,...e){return de.fun(t)?t(...e):t}var Dh=(t,e)=>t===!0||!!(e&&t&&(de.fun(t)?t(e):hr(t).includes(e))),E6=(t,e)=>de.obj(t)?e&&t[e]:t,A6=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Yne=t=>t,iE=(t,e=Yne)=>{let n=Xne;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);de.und(s)||(i[r]=s)}return i},Xne=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Jne={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Zne(t){const e={};let n=0;if(ho(t,(i,r)=>{Jne[r]||(e[r]=i,n++)}),n)return e}function N6(t){const e=Zne(t);if(e){const n={to:e};return ho(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function $p(t){return t=Fi(t),de.arr(t)?t.map($p):bb(t)?ws.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function Qne(t){for(const e in t)return!0;return!1}function tk(t){return de.fun(t)||de.arr(t)&&de.obj(t[0])}function eie(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function tie(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var nie={default:{tension:170,friction:26}},nk={...nie.default,mass:1,damping:1,easing:g6.linear,clamp:!1},iie=class{constructor(){this.velocity=0,Object.assign(this,nk)}};function rie(t,e,n){n&&(n={...n},NM(n,e),e={...n,...e}),NM(t,e),Object.assign(t,e);for(const o in nk)t[o]==null&&(t[o]=nk[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return de.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function NM(t,e){if(!de.und(e.decay))t.duration=void 0;else{const n=!de.und(e.tension)||!de.und(e.friction);(n||!de.und(e.frequency)||!de.und(e.damping)||!de.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var PM=[],sie=class{constructor(){this.changed=!1,this.values=PM,this.toValues=null,this.fromValues=PM,this.config=new iie,this.immediate=!1}};function P6(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,u=Dh(n.cancel??(i==null?void 0:i.cancel),e);if(u)p();else{de.und(n.pause)||(r.paused=Dh(n.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||Dh(g,e)),l=oc(n.delay||0,e),g?(r.resumeQueue.add(h),s.pause()):(s.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(c),c.cancel(),l=c.time-Ze.now()}function h(){l>0&&!ws.skipAnimation?(r.delayed=!0,c=Ze.setTimeout(p,l),r.pauseQueue.add(d),r.timeouts.add(c)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(c),t<=(r.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(g){a(g)}}})}var rE=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?ld(t.get()):e.every(n=>n.noop)?M6(t.get()):us(t.get(),e.every(n=>n.finished)),M6=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),us=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),ld=t=>({value:t,cancelled:!0,finished:!1});function R6(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=iE(e,(v,y)=>y==="onRest"?void 0:v);let u,d;const h=new Promise((v,y)=>(u=v,d=y)),p=v=>{const y=r<=(n.cancelId||0)&&ld(i)||r!==n.asyncId&&us(i,!1);if(y)throw v.result=y,d(v),v},g=(v,y)=>{const x=new MM,w=new RM;return(async()=>{if(ws.skipAnimation)throw Fp(n),w.result=us(i,!1),d(w),w;p(x);const S=de.obj(v)?{...v}:{...y,to:v};S.parentId=r,ho(c,(E,C)=>{de.und(S[C])&&(S[C]=E)});const _=await i.start(S);return p(x),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),_})()};let m;if(ws.skipAnimation)return Fp(n),us(i,!1);try{let v;de.arr(t)?v=(async y=>{for(const x of y)await g(x)})(t):v=Promise.resolve(t(g,i.stop.bind(i))),await Promise.all([v.then(u),h]),m=us(i.get(),!0,!1)}catch(v){if(v instanceof MM)m=v.result;else if(v instanceof RM)m=v.result;else throw v}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return de.fun(o)&&Ze.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function Fp(t,e){jh(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var MM=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},RM=class extends Error{constructor(){super("SkipAnimationSignal")}},ik=t=>t instanceof sE,oie=1,sE=class extends v6{constructor(){super(...arguments),this.id=oie++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Ds(this);return t&&t.getValue()}to(...t){return ws.to(this,t)}interpolate(...t){return Lne(),ws.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Ip(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||gb.sort(this),Ip(this,{type:"priority",parent:this,priority:t})}},Bc=Symbol.for("SpringPhase"),T6=1,rk=2,sk=4,N1=t=>(t[Bc]&T6)>0,va=t=>(t[Bc]&rk)>0,Rf=t=>(t[Bc]&sk)>0,TM=(t,e)=>e?t[Bc]|=rk|T6:t[Bc]&=~rk,OM=(t,e)=>e?t[Bc]|=sk:t[Bc]&=~sk,We=class extends sE{constructor(t,e){if(super(),this.animation=new sie,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!de.und(t)||!de.und(e)){const n=de.obj(t)?{...t}:{...e,from:t};de.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(va(this)||this._state.asyncTo)||Rf(this)}get goal(){return Fi(this.animation.to)}get velocity(){const t=Ds(this);return t instanceof ym?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return N1(this)}get isAnimating(){return va(this)}get isPaused(){return Rf(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=xb(i.to);!o&&jr(i.to)&&(r=hr(Fi(i.to))),i.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==Dp?1:o?o[u].lastPosition:r[u];let h=i.immediate,p=d;if(!h){if(p=c.lastPosition,s.tension<=0){c.done=!0;return}let g=c.elapsedTime+=t;const m=i.fromValues[u],v=c.v0!=null?c.v0:c.v0=de.arr(s.velocity)?s.velocity[u]:s.velocity;let y;const x=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(de.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,S=Math.exp(-(1-w)*g);p=m+v/(1-w)*(1-S),h=Math.abs(c.lastPosition-p)<=x,y=v*S}else{y=c.lastVelocity==null?v:c.lastVelocity;const w=s.restVelocity||x/10,S=s.clamp?0:s.bounce,_=!de.und(S),E=m==d?c.v0>0:m<d;let C,N=!1;const M=1,I=Math.ceil(t/M);for(let O=0;O<I&&(C=Math.abs(y)>w,!(!C&&(h=Math.abs(d-p)<=x,h)));++O){_&&(N=p==d||p>d==E,N&&(y=-y*S,p=d));const T=-s.tension*1e-6*(p-d),H=-s.friction*.001*y,L=(T+H)/s.mass;y=y+L*M,p=p+y*M}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,g=c.elapsedTime+=t)),w=(s.progress||0)+g/this._memoizedDuration,w=w>1?1:w<0?0:w,c.durationProgress=w),p=m+s.easing(w)*(d-m),y=(p-c.lastPosition)/t,h=w==1}c.lastVelocity=y,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[u].done&&(h=!1),h?c.done=!0:e=!1,c.setValue(p,s.round)&&(n=!0)});const a=Ds(this),l=a.getValue();if(e){const c=Fi(i.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Ze.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(va(this)){const{to:t,config:e}=this.animation;Ze.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return de.und(t)?(n=this.queue||[],this.queue=[]):n=[de.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>rE(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Fp(this._state,t&&this._lastCallId),Ze.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=de.obj(n)?n[e]:n,(n==null||tk(n))&&(n=void 0),i=de.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return N1(this)||(t.reverse&&([n,i]=[i,n]),i=Fi(i),de.und(i)?Ds(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,iE(t,(o,a)=>/^on/.test(a)?E6(o,n):o)),jM(this,t,"onProps"),Of(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return P6(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{Rf(this)||(OM(this,!0),uh(s.pauseQueue),Of(this,"onPause",us(this,Tf(this,this.animation.to)),this))},resume:()=>{Rf(this)&&(OM(this,!1),va(this)&&this._resume(),uh(s.resumeQueue),Of(this,"onResume",us(this,Tf(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=O6(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(ld(this));const i=!de.und(t.to),r=!de.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(ld(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;r&&!i&&(!e.default||de.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const h=!_o(d,c);h&&(a.from=d),d=Fi(d);const p=!_o(u,l);p&&this._focus(u);const g=tk(e.to),{config:m}=a,{decay:v,velocity:y}=m;(i||r)&&(m.velocity=0),e.config&&!g&&rie(m,oc(e.config,s),e.config!==o.config?oc(o.config,s):void 0);let x=Ds(this);if(!x||de.und(u))return n(us(this,!0));const w=de.und(e.reset)?r&&!e.default:!de.und(d)&&Dh(e.reset,s),S=w?d:this.get(),_=$p(u),E=de.num(_)||de.arr(_)||bb(_),C=!g&&(!E||Dh(o.immediate||e.immediate,s));if(p){const O=ek(u);if(O!==x.constructor)if(C)x=this._set(_);else throw Error(`Cannot animate between ${x.constructor.name} and ${O.name}, as the "to" prop suggests`)}const N=x.constructor;let M=jr(u),I=!1;if(!M){const O=w||!N1(this)&&h;(p||O)&&(I=_o($p(S),_),M=!I),(!_o(a.immediate,C)&&!C||!_o(m.decay,v)||!_o(m.velocity,y))&&(M=!0)}if(I&&va(this)&&(a.changed&&!w?M=!0:M||this._stop(l)),!g&&((M||jr(l))&&(a.values=x.getPayload(),a.toValues=jr(u)?null:N==Dp?[1]:hr(_)),a.immediate!=C&&(a.immediate=C,!C&&!w&&this._set(l)),M)){const{onRest:O}=a;ft(lie,H=>jM(this,e,H));const T=us(this,Tf(this,l));uh(this._pendingCalls,T),this._pendingCalls.add(n),a.changed&&Ze.batchedUpdates(()=>{var H;a.changed=!w,O==null||O(T,this),w?oc(o.onRest,T):(H=a.onStart)==null||H.call(a,T,this)})}w&&this._set(S),g?n(R6(e.to,e,this._state,this)):M?this._start():va(this)&&!p?this._pendingCalls.add(n):n(M6(S))}_focus(t){const e=this.animation;t!==e.to&&(SM(this)&&this._detach(),e.to=t,SM(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;jr(e)&&(sf(e,this),ik(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;jr(t)&&jp(t,this)}_set(t,e=!0){const n=Fi(t);if(!de.und(n)){const i=Ds(this);if(!i||!_o(n,i.getValue())){const r=ek(n);!i||i.constructor!=r?nE(this,r.create(n)):i.setValue(n),i&&Ze.batchedUpdates(()=>{this._onChange(n,e)})}}return Ds(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Of(this,"onStart",us(this,Tf(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),oc(this.animation.onChange,t,this)),oc(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Ds(this).reset(Fi(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),va(this)||(TM(this,!0),Rf(this)||this._resume())}_resume(){ws.skipAnimation?this.finish():gb.start(this)}_stop(t,e){if(va(this)){TM(this,!1);const n=this.animation;ft(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ip(this,{type:"idle",parent:this});const i=e?ld(this.get()):us(this.get(),Tf(this,t??n.to));uh(this._pendingCalls,i),n.changed&&(n.changed=!1,Of(this,"onRest",i,this))}}};function Tf(t,e){const n=$p(e),i=$p(t.get());return _o(i,n)}function O6(t,e=t.loop,n=t.to){const i=oc(e);if(i){const r=i!==!0&&N6(i),s=(r||t).reverse,o=!r||r.reset;return zp({...t,loop:e,default:!1,pause:void 0,to:!s||tk(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function zp(t){const{to:e,from:n}=t=N6(t),i=new Set;return de.obj(e)&&IM(e,i),de.obj(n)&&IM(n,i),t.keys=i.size?Array.from(i):null,t}function aie(t){const e=zp(t);return de.und(e.default)&&(e.default=iE(e)),e}function IM(t,e){ho(t,(n,i)=>n!=null&&e.add(i))}var lie=["onStart","onRest","onChange","onPause","onResume"];function jM(t,e,n){t.animation[n]=e[n]!==A6(e,n)?E6(e[n],t.key):void 0}function Of(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var cie=["onStart","onChange","onRest"],uie=1,die=class{constructor(t,e){this.id=uie++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];de.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(zp(t)),this}start(t){let{queue:e}=this;return t?e=hr(t).map(zp):this.queue=[],this._flush?this._flush(this,e):($6(this,e),ok(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;ft(hr(e),i=>n[i].stop(!!t))}else Fp(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(de.und(t))this.start({pause:!0});else{const e=this.springs;ft(hr(t),n=>e[n].pause())}return this}resume(t){if(de.und(t))this.start({pause:!1});else{const e=this.springs;ft(hr(t),n=>e[n].resume())}return this}each(t){ho(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,jh(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&jh(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,jh(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Ze.onFrame(this._onFrame)}};function ok(t,e){return Promise.all(e.map(n=>I6(t,n))).then(n=>rE(t,n))}async function I6(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=de.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=de.arr(r)||de.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):ft(cie,m=>{const v=e[m];if(de.fun(v)){const y=t._events[m];e[m]=({finished:x,cancelled:w})=>{const S=y.get(v);S?(x||(S.finished=!1),w&&(S.cancelled=!0)):y.set(v,{value:null,finished:x||!1,cancelled:w||!1})},c&&(c[m]=e[m])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,uh(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const h=(i||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),p=e.cancel===!0||A6(e,"cancel")===!0;(u||p&&d.asyncId)&&h.push(P6(++t._lastAsyncId,{props:e,state:d,actions:{pause:Z2,resume:Z2,start(m,v){p?(Fp(d,t._lastAsyncId),v(ld(t))):(m.onRest=a,v(R6(u,m,d,t)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const g=rE(t,await Promise.all(h));if(o&&g.finished&&!(n&&g.noop)){const m=O6(e,o,r);if(m)return $6(t,[m]),I6(t,m,!0)}return l&&Ze.batchedUpdates(()=>l(g,t,t.item)),g}function LM(t,e){const n={...t.springs};return e&&ft(hr(e),i=>{de.und(i.keys)&&(i=zp(i)),de.obj(i.to)||(i={...i,to:void 0}),D6(n,i,r=>L6(r))}),j6(t,n),n}function j6(t,e){ho(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,sf(n,t))})}function L6(t,e){const n=new We;return n.key=t,e&&sf(n,e),n}function D6(t,e,n){e.keys&&ft(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function $6(t,e){ft(e,n=>{D6(t.springs,n,i=>L6(i,t))})}var Sb=({children:t,...e})=>{const n=b.useContext(Zv),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=zne(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=Zv;return b.createElement(s,{value:e},t)},Zv=fie(Sb,{});Sb.Provider=Zv.Provider;Sb.Consumer=Zv.Consumer;function fie(t,e){return Object.assign(t,b.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var hie=()=>{const t=[],e=function(i){$ne();const r=[];return ft(t,(s,o)=>{if(de.und(i))r.push(s.start());else{const a=n(i,s,o);a&&r.push(s.start(a))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return ft(t,i=>i.pause(...arguments)),this},e.resume=function(){return ft(t,i=>i.resume(...arguments)),this},e.set=function(i){ft(t,(r,s)=>{const o=de.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return ft(t,(s,o)=>{if(de.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return ft(t,i=>i.stop(...arguments)),this},e.update=function(i){return ft(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return de.fun(i)?i(s,r):i};return e._getProps=n,e};function pie(t,e,n){const i=de.fun(e)&&e;i&&!n&&(n=[]);const r=b.useMemo(()=>i||arguments.length==3?hie():void 0,[]),s=b.useRef(0),o=S6(),a=b.useMemo(()=>({ctrls:[],queue:[],flush(y,x){const w=LM(y,x);return s.current>0&&!a.queue.length&&!Object.keys(w).some(_=>!y.springs[_])?ok(y,x):new Promise(_=>{j6(y,w),a.queue.push(()=>{_(ok(y,x))}),o()})}}),[]),l=b.useRef([...a.ctrls]),c=[],u=_M(t)||0;b.useMemo(()=>{ft(l.current.slice(t,u),y=>{eie(y,r),y.stop(!0)}),l.current.length=t,d(u,t)},[t]),b.useMemo(()=>{d(0,Math.min(u,t))},n);function d(y,x){for(let w=y;w<x;w++){const S=l.current[w]||(l.current[w]=new die(null,a.flush)),_=i?i(w,S):e[w];_&&(c[w]=aie(_))}}const h=l.current.map((y,x)=>LM(y,c[x])),p=b.useContext(Sb),g=_M(p),m=p!==g&&Qne(p);tE(()=>{s.current++,a.ctrls=l.current;const{queue:y}=a;y.length&&(a.queue=[],ft(y,x=>x())),ft(l.current,(x,w)=>{r==null||r.add(x),m&&x.start({default:p});const S=c[w];S&&(tie(x,S.ref),x.ref?x.queue.push(S):x.start(S))})}),k6(()=>()=>{ft(a.ctrls,y=>y.stop(!0))});const v=h.map(y=>({...y}));return r?[v,r]:v}function F6(t,e){const n=de.fun(t),[[i],r]=pie(1,n?t:[t],n?[]:e);return n||arguments.length==2?[i,r]:i}var mie=class extends sE{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Tp(...e);const n=this._get(),i=ek(n);nE(this,i.create(n))}advance(t){const e=this._get(),n=this.get();_o(e,n)||(Ds(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&DM(this._active)&&P1(this)}_get(){const t=de.arr(this.source)?this.source.map(Fi):hr(Fi(this.source));return this.calc(...t)}_start(){this.idle&&!DM(this._active)&&(this.idle=!1,ft(xb(this),t=>{t.done=!1}),ws.skipAnimation?(Ze.batchedUpdates(()=>this.advance()),P1(this)):gb.start(this))}_attach(){let t=1;ft(hr(this.source),e=>{jr(e)&&sf(e,this),ik(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){ft(hr(this.source),t=>{jr(t)&&jp(t,this)}),this._active.clear(),P1(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=hr(this.source).reduce((e,n)=>Math.max(e,(ik(n)?n.priority:0)+1),0))}};function gie(t){return t.idle!==!1}function DM(t){return!t.size||Array.from(t).every(gie)}function P1(t){t.idle||(t.idle=!0,ft(xb(t),e=>{e.done=!0}),Ip(t,{type:"idle",parent:t}))}ws.assign({createStringInterpolator:x6,to:(t,e)=>new mie(t,e)});var z6=/^--/;function vie(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!z6.test(t)&&!($h.hasOwnProperty(t)&&$h[t])?e+"px":(""+e).trim()}var $M={};function yie(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...c}=e,u=Object.values(c),d=Object.keys(c).map(h=>n||t.hasAttribute(h)?h:$M[h]||($M[h]=h.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));s!==void 0&&(t.textContent=s);for(const h in r)if(r.hasOwnProperty(h)){const p=vie(h,r[h]);z6.test(h)?t.style.setProperty(h,p):t.style[h]=p}d.forEach((h,p)=>{t.setAttribute(h,u[p])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var $h={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bie=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),xie=["Webkit","Ms","Moz","O"];$h=Object.keys($h).reduce((t,e)=>(xie.forEach(n=>t[bie(n,e)]=t[e]),t),$h);var wie=/^(matrix|translate|scale|rotate|skew)/,Sie=/^(translate)/,kie=/^(rotate|skew)/,M1=(t,e)=>de.num(t)&&t!==0?t+e:t,O0=(t,e)=>de.arr(t)?t.every(n=>O0(n,e)):de.num(t)?t===e:parseFloat(t)===e,_ie=class extends wb{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>M1(a,"px")).join(",")})`,O0(o,0)])),ho(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(wie.test(a)){if(delete i[a],de.und(o))return;const l=Sie.test(a)?"px":kie.test(a)?"deg":"";r.push(hr(o)),s.push(a==="rotate3d"?([c,u,d,h])=>[`rotate3d(${c},${u},${d},${M1(h,l)})`,O0(h,0)]:c=>[`${a}(${c.map(u=>M1(u,l)).join(",")})`,O0(c,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new Cie(r,s)),super(i)}},Cie=class extends v6{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return ft(this.inputs,(n,i)=>{const r=Fi(n[0]),[s,o]=this.transforms[i](de.arr(r)?r:n.map(Fi));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&ft(this.inputs,e=>ft(e,n=>jr(n)&&sf(n,this)))}observerRemoved(t){t==0&&ft(this.inputs,e=>ft(e,n=>jr(n)&&jp(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Ip(this,t)}},Eie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];ws.assign({batchedUpdates:Ml.unstable_batchedUpdates,createStringInterpolator:x6,colors:gne});var Aie=qne(Eie,{applyAnimatedValues:yie,createAnimatedStyle:t=>new _ie(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),qe=Aie.animated;const Xt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},$e=(t=Xt.stone[800])=>({backgroundColor:new We(t),opacity:new We(1)}),Nn=()=>({strokeDashoffset:new We(1),opacity:new We(1)}),Ng=()=>({strokeDashoffset:new We(1),opacity:new We(1),path:new We("")}),Qv={bus:{address:Ng(),data:Ng(),rd:Ng(),wr:Ng(),iom:Nn(),mem:{stroke:new We(Xt.red[500])},handshake:Nn(),pic:Nn(),pio:Nn(),timer:Nn(),intr:Nn(),inta:Nn(),int0:Nn(),int1:Nn(),int2:Nn(),"switches->pio":Nn(),"pio->leds":Nn(),printer:{data:Nn(),strobe:Nn(),busy:Nn()}},clock:{angle:new We(0)},controlMemory:{overlay:{opacity:new We(0)},container:{opacity:new We(0),scale:new We(.8)},currentInstruction:{glow:new We(0)},microop:{0:{opacity:new We(0),translateX:new We(-20)},1:{opacity:new We(0),translateX:new We(-20)},2:{opacity:new We(0),translateX:new We(-20)},3:{opacity:new We(0),translateX:new We(-20)},4:{opacity:new We(0),translateX:new We(-20)}}},sequencer:{overlay:{opacity:new We(0)},container:{opacity:new We(0),scale:new We(.8)}},cpu:{internalBus:{address:{strokeDashoffset:new We(1),opacity:new We(1),path:new We("")},data:{strokeDashoffset:new We(1),opacity:new We(1),path:new We("")}},alu:{operands:Nn(),results:Nn(),cog:{rot:new We(0)},operation:{backgroundColor:new We(Xt.stone[800])}},decoder:{path:Nn(),progress:{progress:new We(0),opacity:new We(1)}},AX:$e(),BX:$e(),CX:$e(),DX:$e(),AL:$e(),BL:$e(),CL:$e(),DL:$e(),SP:$e(),"SP.l":$e(),"SP.h":$e(),IP:$e(),"IP.l":$e(),"IP.h":$e(),IR:$e(),ri:{...$e(),opacity:new We(0)},"ri.l":$e(),"ri.h":$e(),id:{...$e(),opacity:new We(0)},"id.l":$e(),"id.h":$e(),left:$e(),"left.l":$e(),"left.h":$e(),right:$e(),"right.l":$e(),"right.h":$e(),result:$e(),"result.l":$e(),"result.h":$e(),FLAGS:$e(),"FLAGS.l":$e(),"FLAGS.h":$e(),MAR:$e(),MBR:$e()},handshake:{DATA:$e(),STATE:$e()},memory:{"operating-cell":{color:new We(Xt.white)}},pic:{IMR:$e(),IRR:$e(),ISR:$e(),INT0:$e(),INT1:$e(),INT2:$e(),INT3:$e(),INT4:$e(),INT5:$e(),INT6:$e(),INT7:$e()},pio:{PA:$e(),PB:$e(),CA:$e(),CB:$e()},printer:{printing:{progress:new We(0),opacity:new We(1)}},timer:{CONT:$e(),COMP:$e()}};function Ge(t){try{return aD(Qv,t)}catch{const n=t.split(".");let i=Qv;for(const r of n)if(r in i)i=i[r];else return console.warn(`Path not found: ${t}`),{backgroundColor:new We(Xt.stone[800]),opacity:new We(1),stop(){},pause(){},resume(){},start:()=>Promise.resolve(),set(){},get:()=>Xt.stone[800],isPaused:!1};return i}}function B6(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof We?e[n]=i.get():e[n]=B6(i)}return e}const Nie=B6(Qv);function U6(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof We?i.set(e[n]):U6(t[n],e[n])}}const Pie=()=>U6(Qv,Nie),Bp=new Set;async function Fe(t,e){const n=D.get(hn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=D.sub(hn,()=>{D.get(hn).type!=="paused"&&(o(),s())})}),await Fe(t,e);const i=Tn();if(!i.animations&&!e.forceMs)return null;const r={duration:e.forceMs?e.duration:i.animations?e.duration*i.executionUnit:1,easing:g6[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;try{const l=Ge(s);if(a===void 0)return l.set(o);{Bp.add(s);const c=await Ge(s).start({from:o,to:a,config:r});return Bp.delete(s),c}}catch(l){return console.warn(`Error animando la clave ${s}:`,l),null}}))}const V6=()=>Bp.forEach(t=>{try{const e=Ge(t);e&&typeof e.pause=="function"&&e.pause()}catch(e){console.warn(`Error pausing animation for key ${t}:`,e)}}),H6=()=>Bp.forEach(t=>{try{const e=Ge(t);e&&typeof e.resume=="function"&&e.resume()}catch(e){console.warn(`Error resuming animation for key ${t}:`,e)}});function oE(){Bp.forEach(t=>{try{const e=Ge(t);e&&typeof e.stop=="function"&&(e.stop(!0),e.isPaused&&typeof e.resume=="function"&&e.resume())}catch(e){console.warn(`Error stopping animation for key ${t}:`,e)}}),setTimeout(()=>Pie(),10)}const Mie={AX:Xt.blue[500],BX:"#4F46E5",CX:"#3B82F6",DX:"#1E40AF",IP:Xt.red[500],SP:"#DC2626",MAR:Xt.blue[500],MBR:Xt.blue[500],IR:Xt.blue[500],FLAGS:"#F59E0B",result:"#10B981",id:"#F97316",ri:"#06B6D4",left:"#22C55E",right:"#16A34A"};function W6(t){const e=t.replace("cpu.","").split(".")[0];return Mie[e]||Xt.stone[600]}async function Wn(t,e){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP||t==="cpu.right.l"||t==="cpu.left.l")return;const n=e||W6(t);await Fe({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutCubic"}),await Fe({key:`${t}.backgroundColor`,to:Xt.stone[750]},{duration:3,easing:"easeInCubic"});return}catch(n){return console.warn(`No se pudo animar el registro ${t}:`,n),null}}async function Gn(t){try{return t==="cpu.right.l"||t==="cpu.left.l"?void 0:await Fe({key:`${t}.backgroundColor`,to:Xt.stone[800]},{duration:2,easing:"easeInOutQuart"})}catch(e){return console.warn(`No se pudo desactivar el registro ${t}:`,e),null}}async function Up(t){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP)return;const e=Tn(),n=W6(t);await Fe({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutQuart"});const i=e.animations?1e3:1;await new Promise(r=>setTimeout(r,i)),await Fe({key:`${t}.backgroundColor`,to:Xt.stone[800]},{duration:2,easing:"easeInQuart"});return}catch(e){return console.warn(`No se pudo actualizar el registro ${t}:`,e),null}}async function Wd(t){await Wn("cpu.MBR"),D.set(wc,t),await Gn("cpu.MBR")}function G6(){setTimeout(()=>{try{Ge("bus.rd.opacity").set(0)}catch{}try{Ge("bus.wr.opacity").set(0)}catch{}},0)}function ak(){try{Ge("bus.rd.opacity").start({to:1})}catch{}}function lk(){try{Ge("bus.rd.opacity").start({to:0})}catch{}}function K6(){try{Ge("bus.wr.opacity").start({to:1})}catch{}}function q6(){try{Ge("bus.wr.opacity").start({to:0})}catch{}}async function ki(t,e){return await Fe([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function qn(t){return await Fe({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}const Rie=Object.freeze(Object.defineProperty({__proto__:null,activateRegister:Wn,anim:Fe,deactivateRegister:Gn,hideControlBusTextsOnInit:G6,hideReadControlText:lk,hideWriteControlText:q6,pauseAllAnimations:V6,populateDataBus:Wd,resumeAllAnimations:H6,showReadControlText:ak,showWriteControlText:K6,stopAllAnimations:oE,turnLineOff:qn,turnLineOn:ki,updateRegisterWithGlow:Up},Symbol.toStringTag,{value:"Module"}));async function Tie(t){switch(t.type){case"bus:io.selected":{await Promise.all([Fe({key:"bus.mem.stroke",to:Xt.stone[700]},{duration:1,easing:"easeInSine"}),ki(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Vc(t.error);return}case"bus:reset":{await Promise.all([Fe([{key:"bus.address.strokeDashoffset",to:1},{key:"bus.data.strokeDashoffset",to:1},{key:"bus.rd.strokeDashoffset",to:1},{key:"bus.wr.strokeDashoffset",to:1}],{duration:1,easing:"easeInSine"}),Fe({key:"bus.mem.stroke",to:Xt.red[500]},{duration:1,easing:"easeOutSine"}),qn("bus.iom"),qn("bus.handshake"),qn("bus.pio"),qn("bus.pic"),qn("bus.timer")]);return}default:return t}}async function Oie(t){switch(t.type){case"clock:tick":return;default:return t.type}}function Y6(t,e,n){switch(t){case"SP":return"M 460 309 H 550 V 349 H 659";case"IP":return"M 460 349 H 659";case"ri":return"";default:throw new Error(`Invalid register ${t}`)}}function Iie({showSP:t,showri:e}){const{path:n,...i}=Ge("cpu.internalBus.address"),r=[t?"M 400 309 H 550 V 250":"","M 400 349 H 550 V 255",e?"M 420 388 H 550 V 300":"","M 400 349 H 659"];return f.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-30",children:[r.map((s,o)=>f.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:s},o)),f.jsx(qe.path,{d:n,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i}),f.jsx(qe.path,{d:n,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}var aE={exports:{}},cd=typeof Reflect=="object"?Reflect:null,FM=cd&&typeof cd.apply=="function"?cd.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},I0;cd&&typeof cd.ownKeys=="function"?I0=cd.ownKeys:Object.getOwnPropertySymbols?I0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:I0=function(e){return Object.getOwnPropertyNames(e)};function jie(t){console&&console.warn&&console.warn(t)}var X6=Number.isNaN||function(e){return e!==e};function Nt(){Nt.init.call(this)}aE.exports=Nt;aE.exports.once=Fie;Nt.EventEmitter=Nt;Nt.prototype._events=void 0;Nt.prototype._eventsCount=0;Nt.prototype._maxListeners=void 0;var zM=10;function kb(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Nt,"defaultMaxListeners",{enumerable:!0,get:function(){return zM},set:function(t){if(typeof t!="number"||t<0||X6(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");zM=t}});Nt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Nt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||X6(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function J6(t){return t._maxListeners===void 0?Nt.defaultMaxListeners:t._maxListeners}Nt.prototype.getMaxListeners=function(){return J6(this)};Nt.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")FM(l,this,n);else for(var c=l.length,u=n$(l,c),i=0;i<c;++i)FM(u[i],this,n);return!0};function Z6(t,e,n,i){var r,s,o;if(kb(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=J6(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,jie(a)}return t}Nt.prototype.addListener=function(e,n){return Z6(this,e,n,!1)};Nt.prototype.on=Nt.prototype.addListener;Nt.prototype.prependListener=function(e,n){return Z6(this,e,n,!0)};function Lie(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Q6(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=Lie.bind(i);return r.listener=n,i.wrapFn=r,r}Nt.prototype.once=function(e,n){return kb(n),this.on(e,Q6(this,e,n)),this};Nt.prototype.prependOnceListener=function(e,n){return kb(n),this.prependListener(e,Q6(this,e,n)),this};Nt.prototype.removeListener=function(e,n){var i,r,s,o,a;if(kb(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():Die(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Nt.prototype.off=Nt.prototype.removeListener;Nt.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function e$(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?$ie(r):n$(r,r.length)}Nt.prototype.listeners=function(e){return e$(this,e,!0)};Nt.prototype.rawListeners=function(e){return e$(this,e,!1)};Nt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):t$.call(t,e)};Nt.prototype.listenerCount=t$;function t$(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Nt.prototype.eventNames=function(){return this._eventsCount>0?I0(this._events):[]};function n$(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function Die(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function $ie(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Fie(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}i$(t,e,s,{once:!0}),e!=="error"&&zie(t,r,{once:!0})})}function zie(t,e,n){typeof t.on=="function"&&i$(t,"error",e,n)}function i$(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Bie=aE.exports;function po(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(po.prototype[Symbol.iterator]=function(){return this});po.of=function(){var t=arguments,e=t.length,n=0;return new po(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};po.empty=function(){var t=new po(function(){return{done:!0}});return t};po.fromSequence=function(t){var e=0,n=t.length;return new po(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};po.is=function(t){return t instanceof po?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var _b=po;const Jr=qc(_b);var Cb={};Cb.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Cb.SYMBOL_SUPPORT=typeof Symbol<"u";var Uie=_b,r$=Cb,Vie=r$.ARRAY_BUFFER_SUPPORT,Hie=r$.SYMBOL_SUPPORT;function Wie(t){return typeof t=="string"||Array.isArray(t)||Vie&&ArrayBuffer.isView(t)?Uie.fromSequence(t):typeof t!="object"||t===null?null:Hie&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var s$=function(e){var n=Wie(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},Gie=s$,Kie=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=Gie(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const o$=qc(Kie);var qie=_b,Yie=s$,Xie=function(){var e=arguments,n=null,i=-1;return new qie(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=Yie(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Go=qc(Xie);function Jie(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let _n=Jie;typeof Object.assign=="function"&&(_n=Object.assign);function Wr(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function Yn(t){return typeof t=="object"&&t!==null}function a$(t){let e;for(e in t)return!1;return!0}function Er(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function ts(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function BM(t){return!(!Yn(t)||t.attributes&&!Array.isArray(t.attributes))}function Zie(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class lE extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class xe extends lE{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,xe.prototype.constructor)}}class fe extends lE{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,fe.prototype.constructor)}}class Be extends lE{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Be.prototype.constructor)}}function l$(t,e){this.key=t,this.attributes=e,this.clear()}l$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function c$(t,e){this.key=t,this.attributes=e,this.clear()}c$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function u$(t,e){this.key=t,this.attributes=e,this.clear()}u$.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function of(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}of.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};of.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};of.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};of.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const d$=0,f$=1,Qie=2,h$=3;function la(t,e,n,i,r,s,o){let a,l,c,u;if(i=""+i,n===d$){if(a=t._nodes.get(i),!a)throw new fe(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,u=s}else if(n===h$){if(r=""+r,l=t._edges.get(r),!l)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(i===d)a=l.target;else if(i===h)a=l.source;else throw new fe(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${h}).`);c=s,u=o}else{if(l=t._edges.get(i),!l)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===f$?a=l.source:a=l.target,c=r,u=s}return[a,c,u]}function ere(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=la(this,e,n,i,r,s);return o.attributes[a]}}function tre(t,e,n){t.prototype[e]=function(i,r){const[s]=la(this,e,n,i,r);return s.attributes}}function nre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=la(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function ire(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=la(this,e,n,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function rre(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=la(this,e,n,i,r,s,o);if(typeof c!="function")throw new xe(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function sre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=la(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function ore(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=la(this,e,n,i,r,s);if(!Yn(a))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function are(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=la(this,e,n,i,r,s);if(!Yn(a))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return _n(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function lre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=la(this,e,n,i,r,s);if(typeof a!="function")throw new xe(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const cre=[{name:t=>`get${t}Attribute`,attacher:ere},{name:t=>`get${t}Attributes`,attacher:tre},{name:t=>`has${t}Attribute`,attacher:nre},{name:t=>`set${t}Attribute`,attacher:ire},{name:t=>`update${t}Attribute`,attacher:rre},{name:t=>`remove${t}Attribute`,attacher:sre},{name:t=>`replace${t}Attributes`,attacher:ore},{name:t=>`merge${t}Attributes`,attacher:are},{name:t=>`update${t}Attributes`,attacher:lre}];function ure(t){cre.forEach(function({name:e,attacher:n}){n(t,e("Node"),d$),n(t,e("Source"),f$),n(t,e("Target"),Qie),n(t,e("Opposite"),h$)})}function dre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Wr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function fre(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=Wr(this,s,o,n),!r)throw new fe(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function hre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Wr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function pre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Wr(this,a,l,n),!o)throw new fe(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function mre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Wr(this,a,l,n),!o)throw new fe(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new xe(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function gre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Wr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function vre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Wr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Yn(r))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function yre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Wr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Yn(r))throw new xe(`Graph.${e}: provided attributes are not a plain object.`);return _n(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function bre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Wr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new xe(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const xre=[{name:t=>`get${t}Attribute`,attacher:dre},{name:t=>`get${t}Attributes`,attacher:fre},{name:t=>`has${t}Attribute`,attacher:hre},{name:t=>`set${t}Attribute`,attacher:pre},{name:t=>`update${t}Attribute`,attacher:mre},{name:t=>`remove${t}Attribute`,attacher:gre},{name:t=>`replace${t}Attributes`,attacher:vre},{name:t=>`merge${t}Attributes`,attacher:yre},{name:t=>`update${t}Attributes`,attacher:bre}];function wre(t){xre.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const Sre=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function kre(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function _re(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function R1(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new Jr(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function Cre(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function Ere(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function T1(t,e){let n=t[e];return n.next!==void 0?new Jr(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Jr.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function Are(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):o$(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function p$(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:u,attributes:d,source:h,target:p}=a;if(l=i(u,d,h.key,p.key,h.attributes,p.attributes,a.undirected),t&&l)return u}}function Nre(t,e){if(t.size===0)return Jr.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Jr(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function cE(t,e,n,i,r,s){const o=e?_re:kre;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function Pre(t,e,n,i){const r=[];return cE(!1,t,e,n,i,function(s){r.push(s)}),r}function Mre(t,e,n){let i=Jr.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=Go(i,R1(n.in))),e!=="in"&&typeof n.out<"u"&&(i=Go(i,R1(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=Go(i,R1(n.undirected))),i}function uE(t,e,n,i,r,s,o){const a=n?Ere:Cre;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function Rre(t,e,n,i,r){const s=[];return uE(!1,t,e,n,i,r,function(o){s.push(o)}),s}function Tre(t,e,n,i){let r=Jr.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=Go(r,T1(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=Go(r,T1(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Go(r,T1(n.undirected,i))),r}function Ore(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return Are(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new fe(`Graph.${n}: could not find the "${s}" node in the graph.`);return Pre(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new fe(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new fe(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return Rre(i,this.multi,r,a,o)}throw new xe(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Ire(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=c,p$(!1,this,i,d);if(arguments.length===2){c=""+c,d=u;const h=this._nodes.get(c);if(typeof h>"u")throw new fe(`Graph.${s}: could not find the "${c}" node in the graph.`);return cE(!1,this.multi,i==="mixed"?this.type:i,r,h,d)}if(arguments.length===3){c=""+c,u=""+u;const h=this._nodes.get(c);if(!h)throw new fe(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new fe(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return uE(!1,i,this.multi,r,h,u,d)}throw new xe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),d=new Array(h);let p=0;c.push((g,m,v,y,x,w,S)=>{d[p++]=u(g,m,v,y,x,w,S)})}else d=[],c.push((h,p,g,m,v,y,x)=>{d.push(u(h,p,g,m,v,y,x))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((h,p,g,m,v,y,x)=>{u(h,p,g,m,v,y,x)&&d.push(h)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new xe(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new xe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let h=d;return c.push((p,g,m,v,y,x,w)=>{h=u(h,p,g,m,v,y,x,w)}),this[s].apply(this,c),h}}function jre(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return u=l,p$(!0,this,i,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new fe(`Graph.${s}: could not find the "${l}" node in the graph.`);return cE(!0,this.multi,i==="mixed"?this.type:i,r,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new fe(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new fe(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return uE(!0,i,this.multi,r,d,c,u)}throw new xe(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,h,p,g,m,v,y)=>c(d,h,p,g,m,v,y)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,h,p,g,m,v,y)=>!c(d,h,p,g,m,v,y)),!this[s].apply(this,l)}}function Lre(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Jr.empty();if(!arguments.length)return Nre(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new fe(`Graph.${s}: could not find the "${o}" node in the graph.`);return Mre(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new fe(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new fe(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return Tre(i,r,l,a)}throw new xe(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Dre(t){Sre.forEach(e=>{Ore(t,e),Ire(t,e),jre(t,e),Lre(t,e)})}const $re=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Eb(){this.A=null,this.B=null}Eb.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Eb.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function If(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=r(c.key,c.attributes);if(t&&u)return c.key}}function dE(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return If(t,null,i,i.undirected,r);if(typeof n=="string")return If(t,null,i,i[n],r)}const s=new Eb;let o;if(e!=="undirected"){if(n!=="out"){if(o=If(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=If(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=If(t,s,i,i.undirected,r),t&&o))return o}function Fre(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return dE(!1,t,e,n,function(r){i.push(r)}),i}function jf(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new Jr(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function zre(t,e,n){if(t!=="mixed"){if(t==="undirected")return jf(null,n,n.undirected);if(typeof e=="string")return jf(null,n,n[e])}let i=Jr.empty();const r=new Eb;return t!=="undirected"&&(e!=="out"&&(i=Go(i,jf(r,n,n.in))),e!=="in"&&(i=Go(i,jf(r,n,n.out)))),t!=="directed"&&(i=Go(i,jf(r,n,n.undirected))),i}function Bre(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new fe(`Graph.${n}: could not find the "${s}" node in the graph.`);return Fre(i==="mixed"?this.type:i,r,o)}}function Ure(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new fe(`Graph.${s}: could not find the "${c}" node in the graph.`);dE(!1,i==="mixed"?this.type:i,r,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(h,p)=>{d.push(u(h,p))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(h,p)=>{u(h,p)&&d.push(h)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new xe(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](c,(p,g)=>{h=u(h,p,g)}),h}}function Vre(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new fe(`Graph.${o}: could not find the "${c}" node in the graph.`);return dE(!0,i==="mixed"?this.type:i,r,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(h,p)=>!u(h,p))}}function Hre(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Jr.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new fe(`Graph.${s}: could not find the "${o}" node in the graph.`);return zre(i==="mixed"?this.type:i,r,a)}}function Wre(t){$re.forEach(e=>{Bre(t,e),Ure(t,e),Vre(t,e),Hre(t,e)})}function Pg(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,u,d,h;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do h=d.target,p=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do h=d.target,h.key!==c&&(h=d.source),p=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!p&&r(l.key,null,l.attributes,null,null,null,null)}}function Gre(t,e){const n={key:t};return a$(e.attributes)||(n.attributes=_n({},e.attributes)),n}function Kre(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return a$(n.attributes)||(i.attributes=_n({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function qre(t){if(!Yn(t))throw new xe('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new xe("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Yn(t.attributes)||t.attributes===null))throw new xe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Yre(t){if(!Yn(t))throw new xe('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new xe("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new xe("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Yn(t.attributes)||t.attributes===null))throw new xe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new xe("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Xre=Zie(),Jre=new Set(["directed","undirected","mixed"]),UM=new Set(["domain","_events","_eventsCount","_maxListeners"]),Zre=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],Qre={allowSelfLoops:!0,multi:!1,type:"mixed"};function ese(t,e,n){if(n&&!Yn(n))throw new xe(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new Be(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function VM(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function m$(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new Be(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Be(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Yn(a))throw new xe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new Be(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new fe(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new fe(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Be(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Be(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new of(i,r,l,c,a);t._edges.set(r,d);const h=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,h&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,h&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,u.key=r,t.emit("edgeAdded",u),r}function tse(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new Be(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Be(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new xe(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Yn(a))throw new xe(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new Be(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),h,p;if(!n&&(h=t._edges.get(r),h)){if((h.source.key!==s||h.target.key!==o)&&(!i||h.source.key!==o||h.target.key!==s))throw new Be(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);p=h}if(!p&&!t.multi&&u&&(p=i?u.undirected[o]:u.out[o]),p){const x=[p.key,!1,!1,!1];if(l?!c:!a)return x;if(l){const w=p.attributes;p.attributes=c(w),t.emit("edgeAttributesUpdated",{type:"replace",key:p.key,attributes:p.attributes})}else _n(p.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:p.key,attributes:p.attributes,data:a});return x}a=a||{},l&&c&&(a=c(a));const g={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Be(`Graph.${e}: the "${r}" edge already exists in the graph.`);let m=!1,v=!1;u||(u=VM(t,s,{}),m=!0,s===o&&(d=u,v=!0)),d||(d=VM(t,o,{}),v=!0),h=new of(i,r,u,d,a),t._edges.set(r,h);const y=s===o;return i?(u.undirectedDegree++,d.undirectedDegree++,y&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,y&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?h.attachMulti():h.attach(),i?t._undirectedSize++:t._directedSize++,g.key=r,t.emit("edgeAdded",g),[r,!0,m,v]}function cu(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class It extends Bie.EventEmitter{constructor(e){if(super(),e=_n({},Qre,e),typeof e.multi!="boolean")throw new xe(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Jre.has(e.type))throw new xe(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new xe(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?l$:e.type==="directed"?c$:u$;Er(this,"NodeDataClass",n);const i="geid_"+Xre()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};Er(this,"_attributes",{}),Er(this,"_nodes",new Map),Er(this,"_edges",new Map),Er(this,"_directedSize",0),Er(this,"_undirectedSize",0),Er(this,"_directedSelfLoopCount",0),Er(this,"_undirectedSelfLoopCount",0),Er(this,"_edgeKeyGenerator",s),Er(this,"_options",e),UM.forEach(o=>Er(this,o,this[o])),ts(this,"order",()=>this._nodes.size),ts(this,"size",()=>this._edges.size),ts(this,"directedSize",()=>this._directedSize),ts(this,"undirectedSize",()=>this._undirectedSize),ts(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),ts(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),ts(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),ts(this,"multi",this._options.multi),ts(this,"type",this._options.type),ts(this,"allowSelfLoops",this._options.allowSelfLoops),ts(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new xe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new xe(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new xe(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new Be("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new fe(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new fe(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new Be("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new fe(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new fe(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new Be("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new fe(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new fe(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new fe(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new fe(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return ese(this,e,n).key}mergeNode(e,n){if(n&&!Yn(n))throw new xe(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(_n(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new xe(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do cu(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do cu(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do cu(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=Wr(this,i,r,this.type),!n)throw new fe(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new fe(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return cu(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new Be("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Be("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=Wr(this,e,n,"directed");if(!i)throw new fe(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return cu(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new Be("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Be("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=Wr(this,e,n,"undirected");if(!i)throw new fe(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return cu(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new xe("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Yn(e))throw new xe("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Yn(e))throw new xe("Graph.mergeAttributes: provided attributes are not a plain object.");return _n(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new xe("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new xe("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!BM(n))throw new xe("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new xe("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!BM(n))throw new xe("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new xe("Graph.forEachAdjacencyEntry: expecting a callback.");Pg(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new xe("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Pg(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new xe("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Pg(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new xe("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Pg(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):o$(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new xe("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new xe("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new xe("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new xe("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new xe("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new xe("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new xe("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new xe("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Jr(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=Gre(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=Kre(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof It)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,h,p,g)=>{n?g?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):g?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!Yn(e))throw new xe("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Yn(e.attributes))throw new xe("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new xe("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],qre(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new xe("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],Yre(a);const{source:c,target:u,attributes:d,undirected:h=l}=a;let p;"key"in a?(p=n?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,p.call(this,a.key,c,u,d)):(p=n?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,p.call(this,c,u,d))}}return this}nullCopy(e){const n=new It(_n({},this._options,e));return n.replaceAttributes(_n({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=_n({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Be(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Be("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Be("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,m$(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,_n({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const h=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,l+=`${i[h]}. `):l+=`[${o}]: `,l+=h,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!UM.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,Er(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(It.prototype[Symbol.for("nodejs.util.inspect.custom")]=It.prototype.inspect);Zre.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?m$:tse;t.generateKey?It.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:It.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});ure(It);wre(It);Dre(It);Wre(It);class g$ extends It{constructor(e){const n=_n({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new xe("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new xe('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class fE extends It{constructor(e){const n=_n({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new xe("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new xe('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class v$ extends It{constructor(e){const n=_n({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new xe("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class y$ extends It{constructor(e){const n=_n({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new xe("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new xe('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class b$ extends It{constructor(e){const n=_n({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new xe("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new xe('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function af(t){t.from=function(e,n){const i=_n({},e.options,n),r=new t(i);return r.import(e),r}}af(It);af(g$);af(fE);af(v$);af(y$);af(b$);It.Graph=It;It.DirectedGraph=g$;It.UndirectedGraph=fE;It.MultiGraph=v$;It.MultiDirectedGraph=y$;It.MultiUndirectedGraph=b$;It.InvalidArgumentsGraphError=xe;It.NotFoundGraphError=fe;It.UsageGraphError=Be;var nse=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},x$=Cb,ise=x$.ARRAY_BUFFER_SUPPORT,rse=x$.SYMBOL_SUPPORT,sse=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||ise&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(rse&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},w$=_b,ose=sse;function bn(){this.clear()}bn.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};bn.prototype.enqueue=function(t){return this.items.push(t),++this.size};bn.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};bn.prototype.peek=function(){if(this.size)return this.items[this.offset]};bn.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};bn.prototype.toArray=function(){return this.items.slice(this.offset)};bn.prototype.values=function(){var t=this.items,e=this.offset;return new w$(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};bn.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new w$(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(bn.prototype[Symbol.iterator]=bn.prototype.values);bn.prototype.toString=function(){return this.toArray().join(",")};bn.prototype.toJSON=function(){return this.toArray()};bn.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:bn,enumerable:!1}),t};typeof Symbol<"u"&&(bn.prototype[Symbol.for("nodejs.util.inspect.custom")]=bn.prototype.inspect);bn.from=function(t){var e=new bn;return ose(t,function(n){e.enqueue(n)}),e};bn.of=function(){return bn.from(arguments)};var ase=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},S$=nse,lse=ase;function cse(t,e,n){if(!S$(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,h,p,g,m,v,y=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=r(u),g=0,v=d.length;g<v;g++)if(h=d[g],h in s||(a.push(h),s[h]=u),h in o){y=!0;break e}}else for(c=l,l=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=i(u),g=0,v=d.length;g<v;g++)if(h=d[g],h in o||(l.push(h),o[h]=u),h in s){y=!0;break e}if(!y)return null;for(var x=[];h;)x.unshift(h),h=s[h];for(h=o[x[x.length-1]];h;)x.push(h),h=o[h];return x.length?x:null}function k$(t,e,n){if(!S$(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!i.has(c)&&(i.add(c),lse(u,e[t](c)),r[c]=s);s++,o=u}return r}k$.bind(null,"outboundNeighbors");k$.bind(null,"neighbors");var use=cse;const W=new fE({allowSelfLoops:!1});W.addNode("MBR",{position:[620,250]});W.addNode("AL",{position:[455,45]});W.addNode("BL",{position:[455,85]});W.addNode("CL",{position:[455,125]});W.addNode("DL",{position:[455,165]});W.addNode("id",{position:[451,205]});W.addNode("SP",{position:[451,309]});W.addNode("IP",{position:[455,349]});W.addNode("ri",{position:[455,388]});W.addNode("MAR",{position:[698,349]});W.addNode("result",{position:[272,115]});W.addNode("NodoRegIn",{position:[390,115]});W.addNode("NodoRegOut",{position:[550,115]});W.addNode("FLAGS",{position:[250,225]});W.addNode("IR",{position:[250,275]});W.addNode("IR mbr join",{position:[250,250]});W.addNode("left",{position:[130,85]});W.addNode("right",{position:[125,145]});W.addNode("left end",{position:[220,85]});W.addNode("right end",{position:[220,145]});W.addNode("result start",{position:[280,115]});W.addNode("rmbr",{position:[250,390]});W.addNode("bleft1",{position:[550,16]});W.addNode("bleft2",{position:[90,16]});W.addNode("bleft3",{position:[90,85]});W.addNode("AL join",{position:[425,45]});W.addNode("BL join",{position:[425,85]});W.addNode("CL join",{position:[425,125]});W.addNode("DL join",{position:[425,165]});W.addNode("id join",{position:[250,205]});W.addNode("data mbr join",{position:[390,250]});W.addNode("SP join",{position:[390,309]});W.addNode("IP join",{position:[390,349]});W.addNode("ri join",{position:[390,388]});W.addNode("MAR join1",{position:[550,388]});W.addNode("MAR join2",{position:[550,349]});W.addNode("result mbr join",{position:[370,250]});W.addNode("FLAGS mbr join",{position:[155,250]});W.addNode("left join",{position:[30,85]});W.addNode("right join",{position:[90,145]});W.addNode("operands mbr join",{position:[90,250]});W.addNode("outr mbr join",{position:[550,250]});W.addNode("mbr reg join",{position:[390,250]});W.addNode("AL out",{position:[483,45]});W.addNode("BL out",{position:[483,85]});W.addNode("CL out",{position:[483,125]});W.addNode("DL out",{position:[483,165]});W.addNode("id out",{position:[441,205]});W.addNode("MBR out",{position:[630,250]});W.addNode("MBR out join",{position:[550,250]});W.addNode("SP out",{position:[510,309]});W.addNode("IP out",{position:[510,349]});W.addNode("IP out join",{position:[550,349]});W.addNode("ri out join",{position:[550,388]});W.addNode("SP out join",{position:[550,309]});W.addNode("AL out join",{position:[525,45]});W.addNode("BL out join",{position:[525,85]});W.addNode("CL out join",{position:[525,125]});W.addNode("DL out join",{position:[525,165]});W.addNode("id out join",{position:[521,205]});W.addUndirectedEdge("AL","AL out");W.addUndirectedEdge("BL","BL out");W.addUndirectedEdge("CL","CL out");W.addUndirectedEdge("DL","DL out");W.addUndirectedEdge("id","id out");W.addUndirectedEdge("IP","IP out");W.addUndirectedEdge("SP","SP out");W.addUndirectedEdge("AL out","AL out join");W.addUndirectedEdge("BL out","BL out join");W.addUndirectedEdge("CL out","CL out join");W.addUndirectedEdge("DL out","DL out join");W.addUndirectedEdge("id out","id out join");W.addUndirectedEdge("AL out join","NodoRegOut");W.addUndirectedEdge("BL out join","NodoRegOut");W.addUndirectedEdge("CL out join","NodoRegOut");W.addUndirectedEdge("DL out join","NodoRegOut");W.addUndirectedEdge("id out join","NodoRegOut");W.addUndirectedEdge("NodoRegOut","outr mbr join");W.addUndirectedEdge("NodoRegOut","bleft1");W.addUndirectedEdge("bleft1","bleft2");W.addUndirectedEdge("bleft2","bleft3");W.addUndirectedEdge("bleft3","left");W.addUndirectedEdge("left","left end");W.addUndirectedEdge("IP out join","outr mbr join");W.addUndirectedEdge("ri out join","outr mbr join");W.addUndirectedEdge("SP out join","outr mbr join");W.addUndirectedEdge("SP out join","MAR join2");W.addUndirectedEdge("outr mbr join","mbr reg join");W.addUndirectedEdge("MBR","outr mbr join");W.addUndirectedEdge("MBR","MBR out");W.addUndirectedEdge("MBR out","outr mbr join");W.addUndirectedEdge("mbr reg join","NodoRegIn");W.addUndirectedEdge("NodoRegIn","AL join");W.addUndirectedEdge("NodoRegIn","BL join");W.addUndirectedEdge("NodoRegIn","CL join");W.addUndirectedEdge("NodoRegIn","DL join");W.addUndirectedEdge("NodoRegIn","id join");W.addUndirectedEdge("outr mbr join","operands mbr join");W.addUndirectedEdge("AL join","AL");W.addUndirectedEdge("BL join","BL");W.addUndirectedEdge("CL join","CL");W.addUndirectedEdge("DL join","DL");W.addUndirectedEdge("MBR","data mbr join");W.addUndirectedEdge("data mbr join","NodoRegIn");W.addUndirectedEdge("IP","IP join");W.addUndirectedEdge("SP","SP join");W.addUndirectedEdge("ri","ri join");W.addUndirectedEdge("MAR join1","ri");W.addUndirectedEdge("MAR join2","MAR join1");W.addUndirectedEdge("MAR","MAR join2");W.addUndirectedEdge("IP join","SP join");W.addUndirectedEdge("SP join","ri join");W.addUndirectedEdge("result start","result");W.addUndirectedEdge("result","NodoRegIn");W.addUndirectedEdge("FLAGS","FLAGS mbr join");W.addUndirectedEdge("FLAGS mbr join","data mbr join");W.addUndirectedEdge("IR","IR mbr join");W.addUndirectedEdge("IR mbr join","FLAGS mbr join");W.addUndirectedEdge("left","left join");W.addUndirectedEdge("right","right join");W.addUndirectedEdge("left join","right join");W.addUndirectedEdge("right join","operands mbr join");W.addUndirectedEdge("right","right end");W.addNode("NodoRegOutLeft",{position:[550,90]});W.addUndirectedEdge("MBR out join","NodoRegOutLeft");W.addUndirectedEdge("NodoRegOutLeft","bleft1");W.addNode("NodoRegOutRight",{position:[550,140]});W.addUndirectedEdge("MBR out join","NodoRegOutRight");W.addUndirectedEdge("NodoRegOutRight","outr mbr join");W.addNode("NodoRegOutToRight",{position:[540,115]});W.addUndirectedEdge("NodoRegOut","NodoRegOutToRight");W.addUndirectedEdge("NodoRegOutToRight","outr mbr join");W.addNode("outr mbr join left",{position:[560,250]});W.addNode("NodoRegOutToLeft",{position:[560,115]});W.addUndirectedEdge("outr mbr join left","NodoRegOutToLeft");W.addUndirectedEdge("NodoRegOutToLeft","NodoRegOut");function dse(t,e,n){const r=(a=>a.replace(/\.(l|h)$/,""))(t);if(!W.hasNode(r))return console.warn(`Nodo origen '${r}' no existe en el grafo`),"";const s=Rr(t,"left end",e,n,{separateMBRPaths:!0,direction:"left"}),o=Rr(t,"right end",e,n,{separateMBRPaths:!0,direction:"right"});return s&&o?`${s} ${o}`:s||o||""}function Rr(t,e,n,i,r){console.log(" generateDataPath llamado con:",{from:t,to:e,instruction:n,mode:i,options:r});const s=h=>h.replace(/\.(l|h)$/,""),o=s(t),a=s(e),l=["AL","BL","CL","DL","id","SP","IP","ri","MAR","left","right","left end","right end"];let c=[];if(console.log(" Evaluando condicin ri  MAR:",{normalizedFrom:o,normalizedTo:a,mode:i,condition:o==="ri"&&a==="MAR"&&i==="mem<-imd"}),o==="ri"&&a==="MAR"&&i==="mem<-imd")return console.log(" Usando ruta especial ri  MAR:","M 455 388 H 550 V 349 H 659"),"M 455 388 H 550 V 349 H 659";if(!W.hasNode(o))return console.warn(`Nodo origen '${o}' no existe en el grafo`),"";if(!W.hasNode(a))return console.warn(`Nodo destino '${a}' no existe en el grafo`),"";if(o==="MAR"||a==="MAR")return"";if(r!=null&&r.separateMBRPaths&&t==="MBR"&&(e==="left"||e==="right"))e==="left"?c=[o,`${o} out`,`${o} out join`,"outr mbr join left","NodoRegOutToLeft","NodoRegOut","bleft1","bleft2","bleft3","left","left end"]:e==="right"&&(c=[o,`${o} out`,`${o} out join`,"outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"]);else if(a==="left")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","bleft1","bleft2","bleft3","left","left end"];else if(a==="right")if(o==="MBR"){const h="MBR_down300";W.hasNode(h)||(W.addNode(h,{position:[620,300]}),W.addUndirectedEdge("MBR",h));const p="MBR_right125_300";W.hasNode(p)||(W.addNode(p,{position:[125,300]}),W.addUndirectedEdge(h,p)),c=["MBR",h,p,"right","right end"]}else c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"];else if(o==="BL"&&a==="ri")c=["BL","BL out","BL out join","NodoRegOut","outr mbr join","MAR join2","MAR"];else if(l.includes(o)&&l.includes(a))["SP","IP","ri"].includes(a)?c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegDir",`${a} join`,a]:c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegIn",`${a} join`,a];else if(l.includes(o)&&a==="MBR")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","MBR"];else if(o==="MBR"&&a==="ri"){if(["JMP","JC","JZ"].includes(n??""))c=["MBR","mbr reg join","IP join","IP"];else if((n==="MOV"||n==="INT")&&i==="mem<-imd")c=["MBR","mbr reg join","ri join","ri"];else if(i==="mem<-imd"&&(n==="ADD"||n==="SUB"))c=["MBR","mbr reg join","ri join","ri"];else return"M 629 250 H 550 V 349 H 659";const h=W.getNodeAttribute(c[0],"position");let p=`M ${h[0]} ${h[1]}`;for(let g=1;g<c.length;g++){const[m,v]=W.getNodeAttribute(c[g],"position");p+=` L ${m} ${v}`}return p}else if(o==="MBR"&&a==="IR"){const h=W.getNodeAttribute("MBR","position"),p=W.getNodeAttribute("IR","position");return`M ${h[0]} ${h[1]} L ${p[0]} ${h[1]} L ${p[0]} ${p[1]}`}else try{c=use(W,o,a)||[]}catch(h){return console.warn(`Error calculando ruta de ${o} a ${a}:`,h),""}if(o==="MBR"&&a==="IP"&&["JMP","JZ","JC"].includes(n??"")){const h=W.getNodeAttribute("MBR","position"),p=W.getNodeAttribute("mbr reg join","position"),g=W.getNodeAttribute("IP","position");return`M ${h[0]} ${h[1]} L ${p[0]} ${p[1]} L ${p[0]} ${g[1]} L ${g[0]} ${g[1]}`}if(o==="ri"&&a==="IP")return"M 455 388 H 550 V 349 H 455";if(o==="ri"&&a==="IP"&&(c=["MBR","mbr reg join","NodoRegIn","IP join","IP"]),o==="ri"&&a==="IP"&&n==="CALL"&&(c=["ri","ri out join","NodoRegOut","outr mbr join","mbr reg join","NodoRegIn","IP join","IP"]),o==="MBR"&&a==="ri"&&["JMP","JZ","JC"].includes(n??""))return"";if(o==="MBR"&&a==="ri"&&n==="CALL"&&(c=["MBR","mbr reg join","NodoRegIn","ri join","ri"]),o==="IP"&&a==="MBR"&&(n==="INT"||n==="CALL"))return"M 510 349 H 550 V 250 H 620";if(c.length===0)return console.warn(`No se encontr ruta de ${o} a ${a}`),"";const u=W.getNodeAttribute(c[0],"position");let d=`M ${u[0]} ${u[1]}`;for(let h=1;h<c.length;h++){const[p,g]=W.getNodeAttribute(c[h],"position");d+=` L ${p} ${g}`}return console.log(" generateDataPath retornando:",d),d}function fse({showSP:t,showid:e,showri:n}){const{path:i,...r}=Ge("cpu.internalBus.data"),{path:s,...o}=Ge("cpu.internalBus.address");return f.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-20",children:[f.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 630","M 90 145 H 90","M 272 115 H 390","M 250 225 V 250","M 250 145 v 46","M 250 250 V 272","M 250 300 V 320","M 451 349 H 390 V 250",t?"M 451 309 H 390":"M 451 309",n?"M 455 388 H 390 V 300":"","M 455 45 H 425","M 455 85 H 425","M 455 125 H 425","M 455 165 H 425",e?"M 455 205 H 425":"",n?"M 550 388 H 480":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220","M 390 250 V 115","M 390 115 L 425 45 L 455 45","M 390 115 L 425 85 L 455 85","M 390 115 L 425 125 L 455 125","M 390 115 L 425 165 L 455 165","M 550 115 L 525 45 L 445 45","M 550 115 L 525 85 L 445 85","M 550 115 L 525 125 L 445 125","M 550 115 L 525 165 L 445 165",e?"M 550 115 L 521 205 L 441 205":""].join(" ")}),f.jsx("circle",{cx:390,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),f.jsx("circle",{cx:550,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),f.jsx("circle",{cx:250,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),f.jsx("circle",{cx:390,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),f.jsx("circle",{cx:550,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),f.jsx("circle",{cx:550,cy:348,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),f.jsx(qe.path,{d:i,className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),f.jsx(qe.path,{d:i,className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),f.jsx(qe.path,{d:s,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o}),f.jsx(qe.path,{d:s,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o})]})}console.log(" generateDataPath importado:",typeof Rr);const _$=5;let tc=null,nc=null,Ls="fetching";const Ts=(t,e,n,i)=>{console.log(" drawDataPath llamado con:",{from:t,to:e,instruction:n,mode:i});try{console.log(" Antes de llamar generateDataPath"),console.log(" generateDataPath es:",typeof Rr);const r=Rr(t,e,n,i);return console.log(" Despus de llamar generateDataPath"),console.log(" Ruta generada en drawDataPath:",r),r?Fe([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:_$,easing:"easeInOutSine"}):(console.log(" No hay ruta, retornando Promise.resolve()"),Promise.resolve())}catch(r){return console.error(" Error en drawDataPath:",r),console.error(" Stack trace:",r instanceof Error?r.stack:"No stack trace"),Promise.resolve()}},hse=(t,e,n)=>{try{const i=dse(t,e,n);return i?Fe([{key:"cpu.internalBus.data.path",from:i},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:_$,easing:"easeInOutSine"}):Promise.resolve()}catch(i){return console.warn("Error en drawSimultaneousLeftRightPath:",i),Promise.resolve()}},Co=()=>Fe({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"}),pse=async(t,e,n)=>{console.log(" Animacin simultnea detectada: left y right desde",t),Ls!=="fetching-operands"&&(console.log(" Esperando fase fetching-operands para animacin simultnea..."),await new Promise(i=>{const r=()=>{Ls==="fetching-operands"?i():setTimeout(r,50)};r()}),console.log(" Fase fetching-operands alcanzada, procediendo con animacin simultnea")),await hse(t,e,n),await Promise.all([Wn("cpu.left"),Wn("cpu.right")]),D.set(Le.left,D.get(Le[t])),D.set(Le.right,D.get(Le[t])),await Promise.all([Gn("cpu.left"),Gn("cpu.right")]),tc=null,nc=null,await Co()};let Mt="",Et="",O1=null,dh=null,ck=null;const bo=t=>t.replace(/\.(l|h)$/,"");async function HM(){await Promise.all([Up("cpu.MBR"),Up("cpu.IP"),new Promise(t=>{window.dispatchEvent(new CustomEvent("ip-register-update")),t()})])}async function mse(){dh&&ck&&(console.log(" Ejecutando animaciones simultneas para modo mem<-imd"),await Promise.all([Ts("MBR","ri",dh.instruction,dh.mode),Fe([{key:"cpu.internalBus.address.path",from:Y6("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})]),D.set(Le.ri,D.get(wc)),D.set(NC,D.get(Le.IP)),await Promise.all([Wn("cpu.ri"),Wn("cpu.MAR")]),await Promise.all([Gn("cpu.ri"),Gn("cpu.MAR")]),await Promise.all([Co(),Fe({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),dh=null,ck=null)}async function gse(t){switch(console.log(" CPU Event:",t.type,t),window.VONSIM_PARALLEL_ANIMATIONS&&t.type==="cpu:mar.set"&&window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-read-visual")),t.type){case"cpu:alu.execute":{console.log(" Evento cpu:alu.execute recibido, fase actual:",Ls);const e={duration:3,easing:"easeInOutSine"};Ls!=="executing"?(console.log(" Esperando fase executing para animacin de la ALU..."),await new Promise(n=>{let i=0;const r=200,s=()=>{console.log(" Verificando fase actual:",Ls),i++,Ls==="executing"?n():i>=r?(console.warn(" Timeout esperando fase executing, procediendo de todas formas"),n()):setTimeout(s,50)};s()}),console.log(" Fase executing alcanzada, procediendo con animacin de la ALU")):console.log(" Ya estamos en fase executing, procediendo directamente"),await Fe([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),D.set(MD,t.operation),console.log(" Iniciando animacin del engranaje de la ALU..."),await Promise.all([Fe({key:"cpu.alu.operation.backgroundColor",to:Xt.mantis[400]},{duration:1,easing:"easeOutQuart"}),Fe({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),console.log(" Animacin del engranaje completada"),await Fe({key:"cpu.alu.operation.backgroundColor",to:Xt.stone[800]},{duration:1,easing:"easeOutQuart"}),console.log(" Iniciando animacin del bus de resultado..."),await Fe([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e),await Promise.all([Wn("cpu.result"),Wn("cpu.FLAGS")]),D.set(Le.FLAGS,t.flags),D.set(Le.result,t.result),await Promise.all([Gn("cpu.result"),Gn("cpu.FLAGS")]),await Fe({key:"cpu.alu.results.opacity",to:0},{duration:1,easing:"easeInSine"}),await Fe({key:"cpu.alu.operands.opacity",to:0},{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":{tc=null,nc=null,Ls="fetching";return}case"cpu:cycle.interrupt":{D.set(bi,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await Fe([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{Mt=t.instruction.name,Et=t.instruction.willUse.ri?"mem<-imd":"",console.log("[cpu:cycle.start] instructionName:",Mt,"willUse.ri:",t.instruction.willUse.ri,"mode:",Et,"position:",t.instruction.position),t.instruction.willUse.ri,t.instruction.willUse.ri,tc=null,nc=null,Ls="fetching",s6(t.instruction.position.start),D.set(bi,{phase:"fetching",metadata:t.instruction}),await Fe([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{const e=t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":t.next==="halting"?"halting":"fetching";Ls=e,console.log(" Fase del ciclo actualizada:",Ls),D.set(bi,n=>"metadata"in n?{...n,phase:e}:n);return}case"cpu:decode":{await Fe([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await Fe([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await Fe([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{D.set(bi,{phase:"stopped",error:t.error}),Vc(t.error);return}case"cpu:halt":case"cpu:int.0":{if(t.type==="cpu:halt"){const e=D.get(bi);"metadata"in e&&(D.set(bi,{phase:"halting",metadata:e.metadata}),await new Promise(n=>setTimeout(n,1e3)))}D.set(bi,{phase:"stopped"}),Vc();return}case"cpu:int.6":{D.set(bi,{phase:"int6"});return}case"cpu:int.7":{D.set(bi,{phase:"int7"});return}case"cpu:inta.off":{await qn("bus.inta");return}case"cpu:inta.on":{await ki("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-write-visual")),await ki(`bus.${e}`,10);return}case"cpu:iom.on":{await ki("bus.iom",15);return}case"cpu:mar.set":{const e=bo(t.register),n=e==="MBR",i=n?"M 629 250 H 550 V 349 H 659":Y6(e);if(console.log("[cpu:mar.set] event.register:",t.register,"| Animacin especial:",n,"| regNorm:",e,"| mode:",Et,"| instructionName:",Mt),e==="IP"&&Et==="mem<-imd"||(await Fe([{key:"cpu.internalBus.address.path",from:i},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await Wn("cpu.MAR",Xt.blue[500]),D.set(NC,D.get(Le[e]))),e==="ri"){if(console.log("[cpu:mar.set] ri detectado, mode:",Et,"instructionName:",Mt),Et==="mem<-imd"){console.log(" Animando bus especial: ri  MAR (modo mem<-imd)",{instructionName:Mt,mode:Et}),console.log(" Llamando drawDataPath con:",{from:"ri",to:"MAR",instructionName:Mt,mode:Et});const r=await Ts("ri","MAR",Mt,Et);console.log(" Ruta generada para ri  MAR:",r),await Co()}else console.log(" No es modo mem<-imd, usando lgica alternativa"),await Ts(bo(O1||"BL"),"MAR",Mt,Et),await Co();O1=null}else e==="IP"&&Et==="mem<-imd"?(ck={instruction:Mt,mode:Et},console.log(" Marcando animacin IP  MAR como pendiente para modo mem<-imd"),await mse()):n||(await Ts(e,"MAR",Mt,Et),await Co());e==="IP"&&Et==="mem<-imd"||await Promise.all([Gn("cpu.MAR"),Fe({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const e=bo(t.register);e==="IP"&&(window.__nextTransferMBRtoIP=!0);const i=["ADD","SUB","AND","OR","XOR","CMP"].some(s=>Mt.startsWith(s));let r=!1;if((e==="MAR"||e.startsWith("MAR."))&&!["ADD","SUB","CMP"].some(a=>Mt.startsWith(a))){const a=D.get(Le.IP),l=D.get(wc);a===l&&(r=!0)}if(e==="IR")await Ts("MBR","IR",Mt,Et);else if((e==="MAR"||e.startsWith("MAR."))&&!r)console.log("Animando bus de datos: MBR  MAR",{instructionName:Mt,mode:Et}),await Ts("MBR","MAR",Mt,Et);else if(["AL","BL","CL","DL","ri"].includes(e)){const o=["ADD","SUB","CMP"].some(a=>Mt.startsWith(a));e==="ri"&&Et==="mem<-imd"?(dh={instruction:Mt,mode:Et},console.log(" Marcando animacin MBR  ri como pendiente para modo mem<-imd")):(!i||o)&&await Ts("MBR",e,Mt,Et)}e==="ri"&&Et==="mem<-imd"||D.set(Le[t.register],D.get(wc)),e==="IR"?await Up(`cpu.${e}`):e==="IP"||e==="ri"&&Et==="mem<-imd"||(await Wn(`cpu.${e}`),await Gn(`cpu.${e}`)),e==="ri"&&Et==="mem<-imd"||await Co();return}case"cpu:mbr.set":{if(bo(t.register)==="IP")await HM();else{const n=t.register.replace(/\.(l|h)$/,"");await Ts(n,"MBR",Mt,Et),D.set(wc,D.get(Le[t.register])),await Co()}return}case"cpu:register.copy":{const e=bo(t.src),n=bo(t.dest);if(n==="left"||n==="right"){const i={from:e,instruction:Mt,mode:Et};if(n==="left"?tc=i:n==="right"&&(nc=i),tc&&nc&&tc.from===nc.from&&tc.instruction===nc.instruction){await pse(e,Mt,Et);return}n==="left"?D.set(Le.left,D.get(Le[e])):D.set(Le.right,D.get(Le[e]));return}e==="ri"&&n==="IP"||await Ts(e,n,Mt,Et),await Wn(`cpu.${n}`),D.set(Le[n],D.get(Le[e])),await Gn(`cpu.${n}`),await Co();return}case"cpu:register.update":{const[e]=p2(t.register),n=bo(e);n==="IP"||n==="MBR"?await HM():await Up(n==="ri"?"cpu.ri":`cpu.${n}`),D.set(Le[n],t.value);return}case"cpu:register.buscopy":{const e=bo(t.src),n=bo(t.dest);n==="ri"&&(O1=e),e==="ri"&&n.toLowerCase()==="mar"||e==="ri"&&n==="IP"||(await Ts(e,n,Mt,Et),await new Promise(i=>setTimeout(i,150))),D.set(Le[n],D.get(Le[e])),await Wn(`cpu.${n}`),await Gn(`cpu.${n}`),n!=="ri"&&await Co();return}default:return t}}async function vse(t){switch(t.type){case"f10:press":await ki("bus.int0",2),await qn("bus.int0");return;default:return t.type}}const hE=ue(B.zero(8)),pE=ue(B.zero(8));function yse(t){t.io.handshake&&(D.set(hE,B.fromUnsigned(t.io.handshake.DATA,8)),D.set(pE,B.fromUnsigned(t.io.handshake.STATE,8)))}async function bse(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await Wd(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await Wn(`handshake.${t.register}`),t.register){case"DATA":{D.set(hE,t.value);break}case"STATE":{D.set(pE,t.value);break}default:return t.register}await Gn(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await qn("bus.int2");return}case"handshake:int.on":{await ki("bus.int2",10);return}default:return t}}async function xse(t){switch(t.type){case"keyboard:listen-key":{D.set(hn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{D.sub(hn,()=>{const n=D.get(hn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const mE=ue(B.zero(8));function wse(t){t.io.leds!==null&&D.set(mE,B.fromUnsigned(t.io.leds,8))}async function Sse(t){switch(t.type){case"leds:update":{await ki("bus.pio->leds",2),D.set(mE,t.state),await qn("bus.pio->leds");return}default:return t.type}}const ey=ue(!1),ty=ue(!1);function kse(t){return t==="memory-to-mbr"?"M 800 249 L 629 249":"M 629 249 L 800 249"}const Sc=5,WM=(t,e=Sc)=>{try{const n=kse(t);return n?Fe([{key:"bus.data.path",from:n},{key:"bus.data.opacity",from:1},{key:"bus.data.strokeDashoffset",from:1,to:0}],{duration:e,easing:"easeInOutSine"}):Promise.resolve()}catch(n){return console.warn("Error en drawExternalDataPath:",n),Promise.resolve()}},GM=()=>Fe({key:"bus.data.opacity",to:0},{duration:1,easing:"easeInSine"});function _se(){return"M 610 349 H 800"}const I1=(t=Sc)=>{try{const e=_se();return Fe([{key:"bus.address.path",from:e},{key:"bus.address.opacity",from:1},{key:"bus.address.strokeDashoffset",from:1,to:0}],{duration:t,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawExternalAddressPath:",e),Promise.resolve()}},j1=()=>Fe({key:"bus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),KM=(t=Sc)=>{try{return Fe([{key:"bus.rd.path",from:"M 380 420 H 800"},{key:"bus.rd.opacity",from:1},{key:"bus.rd.strokeDashoffset",from:1,to:0}],{duration:t,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawRDControlPath:",e),Promise.resolve()}},Cse=()=>{try{return Fe([{key:"bus.wr.path",from:"M 380 440 H 800"},{key:"bus.wr.opacity",from:1},{key:"bus.wr.strokeDashoffset",from:1,to:0}],{duration:Sc,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawWRControlPath:",t),Promise.resolve()}},qM=()=>Fe({key:"bus.rd.opacity",to:0},{duration:1,easing:"easeInSine"}),YM=()=>Fe({key:"bus.wr.opacity",to:0},{duration:1,easing:"easeInSine"});async function Ese(t){switch(typeof window<"u"&&window.VONSIM_PARALLEL_ANIMATIONS&&window.addEventListener("vonsim:parallel-memory-read-visual",()=>{D.set(ey,!0),Fe([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{Fe([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})}),Promise.all([I1(),(async()=>{ak(),await KM(),lk()})()])}),t.type){case"memory:read":{if(!window.VONSIM_PARALLEL_ANIMATIONS){D.set(ey,!0),Fe([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{Fe([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})});const e=Sc;await Promise.all([I1(e),(async()=>{ak(),await KM(e),lk()})()]),await j1()}return}case"memory:read.ok":{D.set(Sp,ke.from(t.address)),await Fe({key:"memory.operating-cell.color",to:Xt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await WM("memory-to-mbr",Sc),D.set(wc,t.value),await Promise.all([Fe({key:"memory.operating-cell.color",to:Xt.white},{duration:1,easing:"easeOutQuart"}),GM(),j1(),qM(),YM()]);return}case"memory:write":{D.set(ty,!0),K6();const e=Sc;await Promise.all([I1(e),Cse()]),q6(),D.set(ty,!1);return}case"memory:write.ok":{D.set(Sp,ke.from(t.address)),await Wn("cpu.MBR"),await WM("mbr-to-memory"),await Fe({key:"memory.operating-cell.color",to:Xt.mantis[400]},{duration:1,easing:"easeOutQuart"}),D.set($v,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Promise.all([Gn("cpu.MBR"),Fe({key:"memory.operating-cell.color",to:Xt.white},{duration:1,easing:"easeOutQuart"}),GM(),j1(),qM(),YM()]);return}case"memory:read.error":case"memory:write.error":{Vc(t.error);return}case"memory:write.warning":{Use("Advertencia de Memoria",`${t.warning}`);return}default:return t}}const gE=ue(B.fromUnsigned(255,8)),vE=ue(B.fromUnsigned(0,8)),yE=ue(B.fromUnsigned(0,8)),ny=[ue(B.zero(8)),ue(B.zero(8)),ue(B.zero(8)),ue(B.zero(8)),ue(B.zero(8)),ue(B.zero(8)),ue(B.zero(8)),ue(B.zero(8))];function Ase(t){if(t.io.pic){D.set(gE,B.fromUnsigned(t.io.pic.IMR,8)),D.set(vE,B.fromUnsigned(t.io.pic.IRR,8)),D.set(yE,B.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<ny.length;e++)D.set(ny[e],B.fromUnsigned(t.io.pic.lines[e],8))}}async function Nse(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await Wd(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await Wn(`pic.${t.register}`),t.register){case"IMR":{D.set(gE,t.value);break}case"IRR":{D.set(vE,t.value);break}case"ISR":{D.set(yE,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));D.set(ny[e],t.value);break}default:return t}await Gn(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await qn("bus.intr");return}case"pic:intr.on":{await ki("bus.intr",10);return}case"pic:int.send":{await Wd(t.number);return}default:return t}}const bE=ue(B.zero(8)),xE=ue(B.zero(8)),wE=ue(B.zero(8)),SE=ue(B.zero(8));function Pse(t){t.io.pio&&(D.set(bE,B.fromUnsigned(t.io.pio.PA,8)),D.set(xE,B.fromUnsigned(t.io.pio.PB,8)),D.set(wE,B.fromUnsigned(t.io.pio.CA,8)),D.set(SE,B.fromUnsigned(t.io.pio.CB,8)))}async function Mse(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await Wd(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await Wn(`pio.${t.register}`),t.register){case"PA":{D.set(bE,t.value);break}case"PB":{D.set(xE,t.value);break}case"CA":{D.set(wE,t.value);break}case"CB":{D.set(SE,t.value);break}default:return t.register}await Gn(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const iy=ue([]),ry=ue("");function Rse(t){t.io.printer&&(D.set(iy,t.io.printer.buffer.map(e=>B.fromUnsigned(e,8))),D.set(ry,t.io.printer.paper))}async function Tse(t){switch(t.type){case"printer:buffer.add":{D.set(iy,e=>[...e,t.char]);return}case"printer:buffer.pop":{D.set(iy,e=>e.slice(1));return}case"printer:busy.off":{await qn("bus.printer.busy");return}case"printer:busy.on":{await ki("bus.printer.busy",15);return}case"printer:data.read":{await ki("bus.printer.data",15),await qn("bus.printer.data");return}case"printer:paper.print":{D.set(ry,e=>e+t.char);return}case"printer:paper.replace":{D.set(ry,"");return}case"printer:strobe.off":{await qn("bus.printer.strobe");return}case"printer:strobe.on":{await ki("bus.printer.strobe",15);return}default:return t}}const kE=ue("");function Ose(t){"screen"in t.io&&t.io.screen!==null&&D.set(kE,t.io.screen)}async function Ise(t){switch(t.type){case"screen:send-char":{D.set(kE,t.output);return}default:return t.type}}const Ab=ue(B.zero(8));function jse(t){t.io.switches!==null&&D.set(Ab,B.fromUnsigned(t.io.switches,8))}async function Lse(t){switch(t.type){case"switches:toggle":{D.set(Ab,e=>e.withBit(t.index,!e.bit(t.index))),await ki("bus.switches->pio",2),await qn("bus.switches->pio");return}default:return t}}const sy=ue(B.zero(8)),_E=ue(B.zero(8));function Dse(t){t.io.timer&&(D.set(sy,B.fromUnsigned(t.io.timer.CONT,8)),D.set(_E,B.fromUnsigned(t.io.timer.COMP,8)))}async function $se(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await Wd(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await Wn(`timer.${t.register}`),t.register){case"CONT":{D.set(sy,t.value);break}case"COMP":{D.set(_E,t.value);break}default:return t.register}await Gn(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await qn("bus.int1");return}case"timer:int.on":{await ki("bus.int1",10);return}case"timer:tick":{D.set(sy,t.cont),await ki("bus.int1",2),await qn("bus.int1");return}default:return t}}const uk=new Set;async function C$(t){zse(t);const[e]=t.type.split(":",2);switch(uk.add(t.type),e){case"bus":{await Tie(t);break}case"clock":{await Oie(t);break}case"cpu":{await gse(t);break}case"f10":{await vse(t);break}case"handshake":{await bse(t);break}case"keyboard":{await xse(t);break}case"leds":{await Sse(t);break}case"memory":{await Ese(t);break}case"pic":{await Nse(t);break}case"pio":{await Mse(t);break}case"printer":{await Tse(t);break}case"screen":{await Ise(t);break}case"switches":{await Lse(t);break}case"timer":{await $se(t);break}default:return e}uk.delete(t.type)}function XM(...t){for(const e of t)if(uk.has(e))return!0;return!1}const Fse={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function zse(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${Fse[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof B?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof ke?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof Sr?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const pn=new tQ,hn=ue({type:"stopped"});let Uc=null;try{window.VonSimAddNotification&&(Uc=window.VonSimAddNotification)}catch{}function CE(t,e=10){window.VonSimAddNotification?window.VonSimAddNotification(t):e>0&&setTimeout(()=>CE(t,e-1),100)}function Bse(t){const e=t.translate(Tn().language);$i({title:e,variant:"error"}),Uc?Uc({type:"error",title:"Error de simulacin",message:e}):CE({type:"error",title:"Error de simulacin",message:e})}function Use(t,e){$i({title:t,description:e,variant:"info"}),Uc&&Uc({type:"warning",title:t,message:e})}function Vc(t){if(t&&(Bse(t),t.code==="no-instruction")){D.set(hn,{type:"paused"});return}ine(),s6(null),Qte(!1),D.set(hn,{type:"stopped",error:t}),D.set(bi,{phase:"stopped",error:t}),oE()}function $n(){D.set(hn,{type:"paused"}),V6()}function Vse(){const t=ob(Tn().language,"messages.assemble-error");$i({title:t,variant:"error"}),Uc?Uc({type:"error",title:"Error de ensamblado",message:t}):CE({type:"error",title:"Error de ensamblado",message:t})}function uu(){$i({title:ob(Tn().language,"messages.invalid-action"),variant:"error"})}function JM(t,e=!1){rQ(t,e),aQ(t,e),yse(t),Ase(t),Pse(t),Dse(t),wse(t),Rse(t),Ose(t),jse(t),Gt=0,kc=0,D.set(wp,Gt),D.set(ub,kc),D.set(mt,""),e&&D.set(Ph,[])}let he=null,Kl=0,rt=0,ql="",xo=!0,L1=!1,Dn=!1,Gt=0,xt=0,kc=0,Yl="",ZM="",QM="",Lf=!1,Mg=!1,Rg="",eR="";async function ac(t){try{for(;;){const e=D.get(hn);if(D.get(Kv)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),D.set(Kv,!1),Vc();break}if(e.type==="stopped"){Kl=0,rt=0,ql="";break}if(e.type==="paused"){await new Promise(s=>{const o=D.sub(hn,()=>{o(),s()})});continue}const i=t.next();if(i.done)break;if(i.value&&typeof i.value<"u")await C$(i.value);else continue;if(i.value.type==="cpu:cycle.start"&&(he=i.value.instruction.name,L1=!!i.value.instruction.willUse.id,Dn=!!i.value.instruction.willUse.ri,D.set(iQ,Dn),xt=0,D.set(Fn,xt),console.log(" Nueva instruccin iniciada:",he,"- Contador reiniciado a 0"),Lf=!1,Mg=!1,Rg=""),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(i.value.type==="cpu:cycle.end"||i.value.type==="cpu:halt"){Kl=0,rt=0,xo=!0,ql="",kc++,console.log(`Instrucciones: ${kc}`),D.set(ub,kc),i.value.type==="cpu:halt"?(Gt++,D.set(wp,Gt),D.set(mt,"Ejecucin: Detenido")):(e.until==="cycle-change"||e.until==="end-of-instruction")&&$n();continue}else i.value.type==="cpu:int.6"?D.set(mt,"Interrupcin: Rutina leer caracter del teclado"):i.value.type==="cpu:int.7"&&(D.set(mt,"Interrupcin: Rutina mostrar por pantalla"),e.until==="cycle-change"&&$n());if(Kl<3)i.value.type==="cpu:mar.set"?(i.value.register==="SP"?(Kl=3,rt=3,D.set(mt,"Ejecucin: MAR  SP")):(D.set(mt,"Captacin: MAR  IP"),rt++),e.until==="cycle-change"&&$n(),Kl++,Gt++,xt++,D.set(Fn,xt)):i.value.type==="cpu:register.update"?(D.set(mt,"Captacin: MBR  read(Memoria[MAR]); IP  IP + 1"),e.until==="cycle-change"&&$n(),rt++,Kl++,Gt++,xt++,D.set(Fn,xt)):i.value.type==="cpu:mbr.get"&&(D.set(mt,"Captacin: IR  MBR"),e.until==="cycle-change"&&$n(),Kl++,Gt++,xt++,D.set(Fn,xt));else if(i.value.type==="cpu:rd.on"&&rt>1?ql="Ejecucin: MBR  read(Memoria[MAR])":i.value.type==="cpu:wr.on"?ql="Ejecucin: write(Memoria[MAR])  MBR":i.value.type==="pio:write.ok"&&(D.set(mt,"Ejecucin: write(PIO[MAR])  MBR"),rt++,Gt++,xt++,D.set(Fn,xt)),i.value.type==="cpu:mar.set"){const s=i.value.register,o=s==="ri"?"MBR":s;let a=!1,l=!1;Dn&&rt===5&&(he==="ADD"||he==="SUB")&&(a=!0),Dn&&rt===9&&(a=!0),Dn&&rt===2&&(he==="ADD"||he==="SUB")&&(l=!0),console.log("executeStageCounter:",rt),console.log("mbridirmar:",Lf),console.log("resultmbrimar:",Mg),console.log("displayMessageresultmbr:",Rg),console.log("shouldDisplayMessage:",xo),(xo||s==="SP")&&(Mg?D.set(mt,Rg):a?D.set(mt,`Ejecucin: MAR  ${s}`):l?D.set(mt,"Ejecucin: ri  MBR; MAR  MBR"):rt===2&&Dn&&he==="MOV"?D.set(mt,"Ejecucin: ri  MBR; MAR  IP"):rt===4&&Dn&&he==="MOV"?D.set(mt,`Ejecucin: MAR  ${s}`):Lf?D.set(mt,"Ejecucin: id  MBR; MAR  IP"):rt===2&&Dn&&he==="INT"?D.set(mt,"Ejecucin: ri  MBR; MAR  SP"):D.set(mt,`Ejecucin: MAR  ${o}`)),e.until==="cycle-change"&&$n(),rt++,Gt++,xt++,D.set(Fn,xt)}else if(i.value.type==="cpu:register.update"){const s=i.value.register;let o="";xo=!0;let a=!0;s==="SP"?(Dn&&rt===4&&he==="INT"&&(a=!1,xo=!1),he==="PUSH"&&(o="Ejecucin: SP = SP - 1"),(he==="RET"||he==="IRET")&&(o="Ejecucin: SP = SP + 1"),rt===3&&he==="POP"&&(o=eR+"; SP = SP + 1")):s==="FLAGS"?(o="Ejecucin: IF = 0",Dn&&rt===5&&he==="INT"&&(o="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1; IF = 0")):s==="DL"&&he==="INT"?o="Interrupcin: AL  ASCII":s==="right.l"&&he==="INT"?o="Interrupcin: SUB AL, 1":s==="right"&&he==="INT"?o="Interrupcin: ADD BL, 1":s==="ri.l"&&he==="INT"?(o="Interrupcin: MAR  (video)",xo=!1):Dn&&rt===3&&he==="MOV"?(o="Ejecucin: MBR  read(Memoria[MAR]); IP  IP + 1; MAR  ri",a=!1,xo=!1):rt===4&&he==="CALL"?a=!1:o=s==="IP"?"Ejecucin: MBR  read(Memoria[MAR]); IP  IP + 1":`Ejecucin: MBR  ${s}`,Dn&&rt===8&&he==="INT"&&(o="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1"),rt===2&&he==="CALL"&&(o="Ejecucin: ri  MBR; SP  SP - 1"),rt===4&&he==="CALL"&&(o="Ejecucin: write(Memoria[MAR])  MBR; SP  SP - 1"),console.log("displayMessage:",o),console.log("currentInstructionName:",he),console.log("currentInstructionModeri:",Dn),console.log("executeStageCounter:",rt),console.log("pause:",a),rt++,he!=="DEC"&&he!=="INC"&&he!=="NOT"&&he!=="NEG"&&!(he==="INT"&&rt===5)&&(D.set(mt,o),Gt++,xt++,D.set(Fn,xt)),o!=="Interrupcin: MAR  (video)"&&e.until==="cycle-change"&&he!=="DEC"&&he!=="INC"&&he!=="NOT"&&he!=="NEG"&&a&&$n()}else if(i.value.type==="cpu:alu.execute")he==="CMP"&&(D.set(mt,`Ejecucin: ${ZM} ${he} ${Yl} ; write(FLAGS)`),Gt++,xt++,D.set(Fn,xt),e.until==="cycle-change"&&$n());else if(i.value.type==="cpu:mbr.get"){const s=i.value.register==="id.l"?"id":i.value.register==="IP.l"?"IP":i.value.register==="FLAGS.l"?"FLAGS":i.value.register;(String(s)==="right.l"||String(s)==="left.l")&&(Yl="MBR"),(Dn&&rt===3&&(he==="ADD"||he==="SUB"||he==="CMP")||rt===3&&he==="POP")&&(Lf=!0),he==="POP"&&rt===3&&(eR=`Ejecucin: ${s}  MBR`),Lf||String(s)!=="ri.l"&&String(s)!=="right.l"&&String(s)!=="left.l"&&(D.set(mt,`Ejecucin: ${s}  MBR`),Gt++,xt++,D.set(Fn,xt),e.until==="cycle-change"&&$n())}else if(i.value.type==="cpu:register.buscopy"){console.log(" Evento cpu:register.buscopy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");if(he==="MOV"){const a=`Ejecucin: ${o}  ${s}`;D.set(mt,a),Gt++,xt++,D.set(Fn,xt),console.log(" Ciclo contabilizado para MOV register.buscopy - cycleCount:",Gt,"currentInstructionCycleCount:",xt)}}else if(i.value.type==="cpu:register.copy"){console.log(" Evento cpu:register.copy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");let a="";he==="DEC"||he==="INC"||he==="NOT"||he==="NEG"?a=s==="result"?`${he} ${Yl}`:s:(a=s==="result"?`${o} ${he} ${Yl}`:s,QM=`${s} ${he} ${Yl}; write(FLAGS)`),he==="CMP"&&String(o)==="right"&&(Yl=s),he==="CMP"&&String(o)==="left"&&(ZM=s);let l=`Ejecucin: ${o}  ${a}`;(he==="ADD"||he==="SUB"||he==="CMP")&&(l+="; write(FLAGS)"),s==="ri"&&o==="IP"?(l="Ejecucin: IP  MBR",he==="CALL"&&(l="Ejecucin: IP  ri"),D.set(mt,l),e.until==="cycle-change"&&$n()):o==="left"&&he==="INT"?l="ADD BL, 1":s==="result"&&he==="INT"?e.until==="cycle-change"&&$n():s==="IP"&&o==="id"?(l="Ejecucin: id  IP",D.set(mt,l),e.until==="cycle-change"&&$n()):s==="id"&&o==="ri"?(l="Ejecucin: MAR  id",xo=!1,D.set(mt,l)):s==="MBR"&&o==="ri"?(l="Ejecucin: MAR  MBR",D.set(mt,l)):s==="id"&&o==="IP"?(l="Ejecucin: IP  MBR",D.set(mt,l),e.until==="cycle-change"&&$n()):s==="BL"&&o==="ri"||s==="BX"&&o==="ri"?(l="Ejecucin: MAR  BL",D.set(mt,l),xo=!1,rt++):String(s)==="right.l"&&(Yl=s),console.log("cpu:register.copy - sourceRegister:",s,"destRegister:",o,"currentInstructionName:",he),he==="MOV"?(D.set(mt,l),Gt++,xt++,D.set(Fn,xt),console.log(" Ciclo contabilizado para MOV register.copy - cycleCount:",Gt,"currentInstructionCycleCount:",xt)):o!=="result"&&o!=="left"&&o!=="right"&&s!=="result"&&s!=="left"&&s!=="right"||s==="result"&&o!=="MBR"?(D.set(mt,l),Gt++,xt++,D.set(Fn,xt),console.log(" Ciclo contabilizado para register.copy - cycleCount:",Gt,"currentInstructionCycleCount:",xt)):console.log(" Ciclo NO contabilizado para register.copy - condicin no cumplida")}else if(i.value.type==="bus:reset"&&rt>1&&(he==="MOV"||he==="ADD"||he==="SUB"||he==="CMP"||he==="CALL"||he==="INT"||he==="PUSH"||he==="POP"||he==="IN"||he==="RET")){he==="RET"&&(ql="Ejecucin: MBR  read(Memoria[MAR])"),he==="IN"&&(ql="Ejecucin: MBR  read(PIO[MAR])");let s=!1;(Dn&&(rt===4||rt===8)&&he==="INT"||rt===3&&he==="MOV"||L1&&rt===4&&(he==="CALL"||he==="ADD"||he==="SUB"||he==="CMP"))&&(s=!0),console.log("executeStageCounter:",rt),s||(D.set(mt,ql),Gt++,xt++,D.set(Fn,xt),e.until==="cycle-change"&&$n())}else if(i.value.type==="cpu:mbr.set"){const s=i.value.register==="id.l"?"id":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="IP.l"?"IP":i.value.register==="result.l"?QM:i.value.register;Dn&&rt===5&&(he==="ADD"||he==="SUB")?(Mg=!0,Rg=`Ejecucin: MBR  ${s} ; MAR  ri`):(D.set(mt,`Ejecucin: MBR  ${s}`),e.until==="cycle-change"&&$n(),rt++,Gt++,xt++,D.set(Fn,xt))}}else D.set(mt,"");console.log(`Ciclos ejecutados: ${Gt}`),D.set(wp,Gt);const r=new CustomEvent("instructionChange",{detail:{instruction:he,modeid:L1,moderi:Dn}});window.dispatchEvent(r),i.value.type==="cpu:cycle.update"||i.value.type==="cpu:cycle.interrupt"?e.until:i.value.type==="cpu:cycle.end"&&(e.until==="cycle-change"||e.until==="end-of-instruction")&&$n()}t.return()}catch(e){const n=en.from(e);Vc(n)}}async function Hse(...t){const e=t[0],n=D.get(hn);switch(e){case"cpu.run":{if(n.type==="running")return uu();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;Gt=0,kc=0,D.set(wp,Gt),D.set(ub,kc),D.set(Ph,[]);const r=window.codemirror.state.doc.toString(),s=SD(r);if(!s.success)return Vse();const o=s.instructions.map(w=>w.instruction),a=o.some(w=>["CALL","RET","INT","IRET","POP","PUSH"].includes(w));D.set(PC,a);const l=o.includes("INT");D.set(m2,l);const c=s.instructions.some(w=>w.instruction==="INT"?w.operands.some(S=>S.type==="number-expression"&&typeof S.value.value=="number"?S.value.value===6||S.value.value===7:!1):!1),u=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(S=>S.type==="number-expression"&&typeof S.value.value=="number"?S.value.value===48||S.value.value===50:!1):!1),d=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value>=32&&S.value.value<=43;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _>=32&&_<=43}}catch(_){console.warn("No se pudo resolver operando PIC:",_)}}return!1}):!1),h=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value===64||S.value.value===65;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _===64||_===65}}catch(_){console.warn("No se pudo resolver operando Handshake:",_)}}return!1}):!1),p=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value===16||S.value.value===17;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _===16||_===17}}catch(_){console.warn("No se pudo resolver operando Timer:",_)}}return!1}):!1),g=Tn();D.set(Qr,w=>({...w,devices:{...w.devices,keyboardAndScreen:c,pio:u?"switches-and-leds":h?"printer":w.devices.pio,handshake:h?"printer":w.devices.handshake,pic:d||w.devices.pic,"switches-and-leds":u}})),D.set(PD,c);const m=l||d||h||p||c;D.set(m2,m),console.log("Detectado - PIC:",d,"Handshake:",h,"Timer:",p,"INT:",l),console.log("Habilitando vector de interrupciones:",m),pn.loadProgram({program:s,data:g.dataOnLoad,devices:{keyboardAndScreen:Tn().devices.keyboardAndScreen??!1,pic:Tn().devices.pic??!1,pio:Tn().devices.pio??null,handshake:Tn().devices.handshake??null},hasORG:s.hasORG}),console.log("result:",s);const v=s.instructions.filter(w=>w.type==="instruction").flatMap(w=>{const S=w.operands.map(C=>{if(C.type==="register")return C.value;if(C.type==="number-expression"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h";if(N.isLabel())return N.value}else{if(C.type==="indirect-address")return"[BL]";if(C.type==="direct-address"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h"}}return""}).join(", "),_=`${w.instruction} ${S}`.trim(),E=[{address:w.start.value,name:_,length:w.length.toString().trim()}];if(w.operands.some(C=>C.type==="number-expression"||C.type==="direct-address")){const C=w.start.value+1,N=w.operands.filter((M,I)=>w.length===3?I===0&&M.type==="number-expression":M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const I=M.value;if(I.isNumberLiteral())return I.value.toString(16)+"h";if(I.isLabel())return I.value}else if(M.type==="direct-address"){const I=M.value;if(I.isNumberLiteral())return I.value.toString(16)+"h"}return""}).join(", ");E.push({address:C,name:N,length:""})}if(w.length===3){const C=w.start.value+2,N=w.operands.filter(M=>M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const I=M.value;if(I.isNumberLiteral())return I.value.toString(16)+"h"}return""}).join(" ");E.push({address:C,name:N,length:""})}return E}),y=s.data.filter(w=>w.type==="data-directive").flatMap(w=>{const S=w.start.value;return w.getValues().map(E=>typeof E=="object"&&E!==null&&"toNumber"in E&&typeof E.toNumber=="function"?E.toNumber():typeof E=="number"?E:0).map((E,C)=>({address:S+C,label:C===0&&w.label||null,value:E}))});console.log("Direcciones de las instrucciones:",v),console.log("Direcciones de los datos:",y),D.set(RD,v),D.set(TD,y.map(w=>({...w,length:""}))),JM(pn.getComputerState());const x=["Start CPU",{until:i,devices:Tn().devices,language:Tn().language,animations:Tn().animations?"yes":"no"}];o6.capture(...x),D.set(hn,{type:"running",until:i,waitingForInput:!1}),ac(pn.startCPU()),Wse(),Gse()}else D.set(hn,{type:"running",until:i,waitingForInput:!1}),H6();return}case"cpu.stop":{const i=t[1];if(i){Vc(),JM(pn.getComputerState(),i);const{anim:r}=await bD(async()=>{const{anim:o}=await Promise.resolve().then(()=>Rie);return{anim:o}},void 0);await Promise.all([r({key:"cpu.internalBus.data.opacity",to:0},{duration:.1,easing:"easeInSine"}),r({key:"cpu.internalBus.address.opacity",to:0},{duration:.1,easing:"easeInSine"})]);const s=new CustomEvent("instructionChange",{detail:{instruction:"",modeid:!1,moderi:!1}});window.dispatchEvent(s)}else $n();return}case"f10.press":{if(!pn.devices.f10.connected()||n.type!=="running")return uu();if(XM("f10:press"))return;ac(pn.devices.f10.press());return}case"switch.toggle":{if(!pn.devices.switches.connected())return uu();if(XM("switches:toggle"))return;const i=t[1];n.type==="running"?ac(pn.devices.switches.toggle(i)):D.set(Ab,r=>r.withBit(i,!r.bit(i)));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return uu();pn.devices.keyboard.readChar(B.fromChar(t[1])),D.set(hn,{...n,waitingForInput:!1});return}case"screen.clean":{if(!pn.devices.screen.connected())return uu();ac(pn.devices.screen.clear());return}case"printer.clean":{if(!pn.devices.printer.connected())return uu();ac(pn.devices.printer.clear());return}default:return e}}async function Wse(){if(pn.devices.clock.connected())for(;D.get(hn).type!=="stopped";){const t=Tn().clockSpeed;await Fe({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),ac(pn.devices.clock.tick())}}async function Gse(){if(pn.devices.printer.connected()){for(;D.get(hn).type!=="stopped";){const t=Tn().printerSpeed;await Fe([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Fe({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),await ac(pn.devices.printer.print())}if(D.get(hn).type==="stopped"&&pn.devices.printer.hasPending())for(;D.get(hn).type!=="stopped"||pn.devices.printer.hasPending();){const t=Tn().printerSpeed;await Fe([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Fe({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"});const e=pn.devices.printer.print();let n=e.next();for(;!n.done;)n.value&&typeof n.value<"u"&&await C$(n.value),n=e.next()}}}function jn(){const t=it(hn),e=pD(),n=b.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:Hse,devices:n}}function Kse({className:t}){const e=Ht(),{status:n,dispatch:i}=jn(),[r,s]=b.useState(null),[o,a]=b.useState("desktop");b.useEffect(()=>{const m=()=>{const v=window.innerWidth;v<=480?a("mobile"):v<=768?a("compact"):v<=1024?a("tablet"):a("desktop")};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),b.useEffect(()=>{n.type!=="running"&&s(null)},[n.type]);const l=b.useCallback(()=>{n.type!=="running"&&(s("cycle-change"),i("cpu.run","cycle-change"))},[n.type,i]);yu("F7",m=>{m.preventDefault(),l()},void 0,[l]);const c=b.useCallback(()=>{n.type!=="running"&&(s("end-of-instruction"),i("cpu.run","end-of-instruction"))},[n.type,i]);yu("F8",m=>{m.preventDefault(),c()},void 0,[c]);const u=b.useCallback(()=>{n.type!=="running"&&(s("infinity"),i("cpu.run","infinity"))},[n.type,i]);yu("F4",m=>{m.preventDefault(),u()},void 0,[u]);const d=b.useCallback(()=>{n.type==="running"&&i("cpu.stop",!1)},[n.type,i]),h=b.useCallback(()=>{n.type!=="running"&&i("cpu.stop",!0)},[n.type,i]);yu("F9",m=>{m.preventDefault(),h()},void 0,[h]),yu(" ",m=>{const v=m.target;v.tagName==="INPUT"||v.tagName==="TEXTAREA"||v.contentEditable==="true"||(m.preventDefault(),n.type==="running"&&d())},{event:"keydown"},[n.type,d]);const p=o==="desktop"||o==="tablet",g=o==="desktop";return f.jsxs("div",{"data-testid":"controls",className:Q("flex items-center justify-center gap-4 rounded-xl border border-stone-700 bg-stone-900/80 shadow-lg",o==="mobile"?"px-2 py-0.5 gap-2":o==="compact"?"px-2 py-1 gap-3":"px-3 py-1 gap-4",t),children:[n.type==="running"&&r==="cycle-change"?f.jsxs("button",{"data-testid":"cycle-button",onClick:d,title:e("control.action.pause"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[f.jsxs("span",{className:"flex items-center justify-center",children:[f.jsx(Oe,{icon:Nh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&f.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&f.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):f.jsxs("button",{"data-testid":"cycle-button",disabled:n.type==="running",onClick:l,title:e("control.action.run.cycle-change"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-mantis-600/20 focus-visible:ring-2 focus-visible:ring-mantis-400 disabled:opacity-50",n.type==="running"&&n.until==="cycle-change"&&"animate-pulse-glow-mantis",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[f.jsxs("span",{className:"flex items-center justify-center",children:[f.jsx(Oe,{icon:gp,size:"lg",className:"text-mantis-400 transition group-hover:scale-110"}),g&&f.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F7"})]}),p&&f.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.cycle-change")})]}),n.type==="running"&&r==="end-of-instruction"?f.jsxs("button",{"data-testid":"new-button",onClick:d,title:e("control.action.pause"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[f.jsxs("span",{className:"flex items-center justify-center",children:[f.jsx(Oe,{icon:Nh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&f.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&f.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):f.jsxs("button",{"data-testid":"new-button",disabled:n.type==="running",onClick:c,title:e("control.action.run.end-of-instruction"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-blue-600/20 focus-visible:ring-2 focus-visible:ring-blue-400 disabled:opacity-50",n.type==="running"&&n.until==="end-of-instruction"&&"animate-pulse-glow-blue",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[f.jsxs("span",{className:"flex items-center justify-center",children:[f.jsx(Oe,{icon:vC,size:"lg",className:"text-blue-400 transition group-hover:scale-110"}),g&&f.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F8"})]}),p&&f.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.end-of-instruction")})]}),n.type==="running"&&r==="infinity"?f.jsxs("button",{"data-testid":"open-button",onClick:d,title:e("control.action.pause"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[f.jsxs("span",{className:"flex items-center justify-center",children:[f.jsx(Oe,{icon:Nh,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&f.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&f.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):f.jsxs("button",{"data-testid":"open-button",disabled:n.type==="running",onClick:u,title:e("control.action.run.infinity"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-orange-600/20 focus-visible:ring-2 focus-visible:ring-orange-400 disabled:opacity-50",n.type==="running"&&n.until==="infinity"&&"animate-pulse-glow-orange",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[f.jsxs("span",{className:"flex items-center justify-center",children:[f.jsx(Oe,{icon:BX,size:"lg",className:"text-orange-400 transition group-hover:scale-110"}),g&&f.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F4"})]}),p&&f.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.infinity")})]}),f.jsxs("button",{"data-testid":"assemble-button",onClick:h,disabled:n.type==="stopped"||n.type==="running",title:e("control.action.reset"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400 disabled:opacity-50",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[f.jsxs("span",{className:"flex items-center justify-center",children:[f.jsx(Oe,{icon:ZL,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),g&&f.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),p&&f.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.reset")})]})]})}const E$=b.memo(({currentPhase:t="idle",className:e})=>{const[n,i]=b.useState("idle"),[r,s]=b.useState(!1);b.useEffect(()=>{if(t!=="idle"){i(t);const a=setTimeout(()=>i("idle"),1e3);return()=>clearTimeout(a)}},[t]);const o=[{id:"captacion",label:"Captacin",color:"text-blue-400",icon:"",descripcion:"Captando instruccin desde memoria",pasos:["IP apunta a la direccin de memoria, el MAR recibe la direccin del IP","Se lee el contenido de memoria y se almacena en el MBR, IP se incrementa automticamente","La instruccin se transfiere al IR"]},{id:"ejecucion",label:"Ejecucin",color:"text-green-400",icon:"",descripcion:"Ejecutando instruccin",subfases:[{id:"operandos",label:"Obtencin de operandos",color:"text-yellow-400",icon:"",descripcion:"Obteniendo operandos de la instruccin",pasos:["Se identifican y preparan los operandos necesarios para la operacin."]},{id:"alu",label:"Procesar en ALU",color:"text-green-400",icon:"",descripcion:"Procesando en la ALU",pasos:["La ALU ejecuta la operacin aritmtica o lgica con los operandos."]},{id:"escritura",label:"Escribir resultado",color:"text-purple-400",icon:"",descripcion:"Escribiendo resultado en registros",pasos:["El resultado de la operacin se almacena en el registro destino."]}]}];return f.jsxs("div",{className:Q("flex flex-col gap-2 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 p-3 shadow-lg ring-1 ring-stone-300","min-w-[280px] max-w-[320px]",e),children:[f.jsx("div",{className:"mb-2 flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"CICLO CPU"}),f.jsx("button",{onClick:()=>s(!r),className:Q("rounded border px-2 py-1 text-[10px] font-bold transition-all duration-200",r?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300 hover:border-stone-400 hover:bg-stone-700"),children:r?"":"+"})]})}),f.jsx("div",{className:"mt-2 flex items-center justify-center gap-2",children:o.map((a,l)=>f.jsxs("div",{className:"flex items-center",children:[f.jsxs("div",{className:Q("flex cursor-pointer flex-col items-center gap-1 rounded border-2 px-2 py-1 transition-all duration-200","hover:border-stone-300 hover:bg-stone-700",t===a.id?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300",n===a.id&&"animate-pulse"),onClick:()=>{var c;if(r)if(a.subfases){let u="";a.subfases.forEach(d=>{u+=`${d.label}
${d.descripcion}
Pasos:
${d.pasos.map((h,p)=>`${p+1}. ${h}`).join(`
`)}`,u+=`

`}),alert(u)}else alert(`${a.label}

${a.descripcion}

Pasos:
${(c=a.pasos)==null?void 0:c.map((u,d)=>`${d+1}. ${u}`).join(`
`)}`)},children:[f.jsx("div",{className:Q("text-lg transition-transform duration-300",t===a.id&&"scale-110"),children:a.icon}),f.jsx("span",{className:Q("text-[10px] font-bold uppercase tracking-wide transition-colors",t===a.id?"text-stone-950":"text-stone-300"),children:a.label}),f.jsx("span",{className:"max-w-16 text-center text-[9px] leading-tight text-stone-500",children:a.descripcion})]}),l<o.length-1&&f.jsx("div",{className:"mx-1 font-bold text-stone-400",children:""})]},a.id))}),r&&f.jsx("div",{className:"mt-2 rounded border-2 border-stone-600 bg-stone-800/80 p-2",children:f.jsxs("div",{className:"text-xs text-stone-300",children:[f.jsx("div",{className:"mb-1 font-bold text-stone-200",children:"Estado actual:"}),t==="fetch"&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),f.jsx("span",{children:"Leyendo instruccin desde memoria"})]}),t==="decode"&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),f.jsx("span",{children:"Interpretando cdigo de operacin"})]}),t==="execute"&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),f.jsx("span",{children:"Ejecutando operacin en ALU"})]}),t==="idle"&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"size-2 rounded-full bg-stone-400"}),f.jsx("span",{children:"CPU en espera de instrucciones"})]})]})}),f.jsx("div",{className:"text-center text-[8px] text-stone-500",children:"Haz clic en las fases para ver detalles"})]})});E$.displayName="ExecutionPhases";const qse=b.memo(({steps:t,onStepChange:e,onComplete:n,className:i})=>{const[r,s]=b.useState(0),[o,a]=b.useState(!1),[l,c]=b.useState(2e3),u=t[r],d=r===0,h=r===t.length-1,p=b.useCallback(x=>{const w=Math.max(0,Math.min(x,t.length-1));s(w),e==null||e(w)},[t.length,e]),g=b.useCallback(()=>{h?(a(!1),n==null||n()):p(r+1)},[r,h,p,n]),m=b.useCallback(()=>{d||p(r-1)},[r,d,p]),v=b.useCallback(()=>{p(0),a(!1)},[p]),y=b.useCallback(()=>{a(!o)},[o]);return o&&!h&&setTimeout(g,l),f.jsxs("div",{className:Q("rounded-lg border border-stone-600 bg-stone-900 p-4",i),children:[f.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[f.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:"Modo Paso a Paso"}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("span",{className:"text-sm text-stone-400",children:["Paso ",r+1," de ",t.length]})})]}),f.jsx(E$,{currentPhase:u==null?void 0:u.phase,className:"mb-4"}),f.jsxs("div",{className:"mb-4 rounded-lg bg-stone-800 p-4",children:[f.jsx("div",{className:"mb-2 flex items-center gap-2",children:f.jsx("span",{className:"text-sm font-medium text-mantis-400",children:u==null?void 0:u.title})}),f.jsx("p",{className:"mb-3 text-sm text-stone-300",children:u==null?void 0:u.description}),(u==null?void 0:u.instruction)&&f.jsxs("div",{className:"mb-3 rounded bg-stone-700 p-2",children:[f.jsx("span",{className:"text-xs text-stone-400",children:"Instruccin:"}),f.jsx("div",{className:"font-mono text-sm text-mantis-400",children:u.instruction})]}),(u==null?void 0:u.registers)&&f.jsx("div",{className:"mb-3 grid grid-cols-2 gap-4",children:f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-stone-400",children:"Registros:"}),f.jsx("div",{className:"mt-1 space-y-1",children:Object.entries(u.registers).map(([x,w])=>f.jsxs("div",{className:"flex justify-between text-xs",children:[f.jsxs("span",{className:"text-stone-300",children:[x,":"]}),f.jsx("span",{className:"font-mono text-mantis-400",children:w})]},x))})]})}),(u==null?void 0:u.memory)&&f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-stone-400",children:"Memoria:"}),f.jsx("div",{className:"mt-1 grid grid-cols-4 gap-1",children:Object.entries(u.memory).map(([x,w])=>f.jsxs("div",{className:"text-center text-xs",children:[f.jsx("div",{className:"text-stone-500",children:x}),f.jsx("div",{className:"font-mono text-mantis-400",children:w})]},x))})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs(lt,{variant:"outline",size:"sm",onClick:v,disabled:d&&!o,className:"flex items-center gap-1",children:[f.jsx(Oe,{icon:ZL}),"Reiniciar"]})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(lt,{variant:"outline",size:"sm",onClick:m,disabled:d,className:"flex items-center gap-1",children:[f.jsx(Oe,{icon:eD}),"Anterior"]}),f.jsxs(lt,{variant:o?"secondary":"default",size:"sm",onClick:y,className:"flex items-center gap-1",children:[f.jsx(Oe,{icon:o?Nh:gp}),o?"Pausar":"Reproducir"]}),f.jsxs(lt,{variant:"outline",size:"sm",onClick:g,disabled:h,className:"flex items-center gap-1",children:["Siguiente",f.jsx(Oe,{icon:vC})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs text-stone-400",children:"Velocidad:"}),f.jsxs("select",{value:l,onChange:x=>c(Number(x.target.value)),className:"rounded border border-stone-600 bg-stone-800 px-2 py-1 text-xs",children:[f.jsx("option",{value:1e3,children:"Rpida"}),f.jsx("option",{value:2e3,children:"Normal"}),f.jsx("option",{value:4e3,children:"Lenta"})]})]})]}),f.jsx("div",{className:"mt-4",children:f.jsx("div",{className:"h-2 w-full rounded-full bg-stone-700",children:f.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(r+1)/t.length*100}%`}})})})]})});qse.displayName="StepByStepMode";const Yse=b.memo(({from:t,to:e,data:n,duration:i=2e3,className:r,onComplete:s})=>{const[o,a]=b.useState(!1),[l,c]=b.useState(0);return b.useEffect(()=>{a(!0),c(0);const u=Date.now(),d=()=>{const h=Date.now()-u,p=Math.min(h/i,1);c(p),p<1?requestAnimationFrame(d):setTimeout(()=>{a(!1),s==null||s()},500)};requestAnimationFrame(d)},[t,e,n,i,s]),o?f.jsxs("div",{className:Q("pointer-events-none absolute inset-0",r),children:[f.jsxs("svg",{className:"absolute inset-0 size-full",children:[f.jsx("defs",{children:f.jsxs("linearGradient",{id:"dataFlowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[f.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),f.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),f.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),f.jsx("path",{d:`M ${t} L ${e}`,stroke:"url(#dataFlowGradient)",strokeWidth:"3",strokeDasharray:"10,5",strokeDashoffset:20-l*20,fill:"none",className:"animate-pulse"})]}),["Read","Write"].includes(n)?(()=>{const[u,d]=t.split(" ").map(Number),[h,p]=e.split(" ").map(Number),g=u+(h-u)*l,m=d+(p-d)*l;return f.jsx("div",{className:`absolute z-[100] select-none text-lg font-extrabold ${n==="Read"?"text-red-500":"text-orange-400"}`,style:{left:g,top:m-32,textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:o?1:0,pointerEvents:"none"},children:n})})():f.jsxs("div",{className:Q("absolute rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white","border border-mantis-400 shadow-lg","transition-all duration-300 ease-out"),style:{left:`${l*100}%`,transform:"translateX(-50%)",top:"50%",marginTop:"-12px"},children:[n,f.jsx("div",{className:"absolute -top-1 left-1/2 size-0 -translate-x-1/2 border-x-4 border-b-4 border-transparent border-b-mantis-500"})]})]}):null});Yse.displayName="DataFlowAnimation";const Xse={"fetch-decode-execute":{title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instruccin",steps:[{id:"fetch",title:"Fase Fetch",description:"La CPU lee la instruccin desde memoria",duration:2e3,animation:{type:"flow",targets:["IP","MAR","MBR"],data:{from:"IP",to:"MBR",value:"A1"}}},{id:"decode",title:"Fase Decode",description:"La CPU interpreta la instruccin",duration:2e3,animation:{type:"highlight",targets:["IR"],data:{instruction:"MOV AL, 5"}}},{id:"execute",title:"Fase Execute",description:"La CPU ejecuta la operacin",duration:2e3,animation:{type:"transform",targets:["AL"],data:{newValue:"05"}}}]},"memory-access":{title:"Acceso a Memoria",description:"Cmo la CPU lee y escribe en memoria RAM",steps:[{id:"address-setup",title:"Configurar Direccin",description:"La CPU coloca la direccin en el MAR",duration:1500,animation:{type:"highlight",targets:["MAR"],data:{address:"A0"}}},{id:"memory-read",title:"Lectura de Memoria",description:"El contenido se transfiere al MBR",duration:1500,animation:{type:"flow",targets:["memory-cell-A0","MBR"],data:{from:"memory",to:"MBR",value:"42"}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se mueven al registro destino",duration:1500,animation:{type:"flow",targets:["MBR","AL"],data:{from:"MBR",to:"AL",value:"42"}}}]},"register-transfer":{title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU",steps:[{id:"source-read",title:"Leer Registro Origen",description:"El valor se lee del registro origen",duration:1e3,animation:{type:"highlight",targets:["AL"],data:{value:"25"}}},{id:"bus-transfer",title:"Transferencia por Bus",description:"Los datos viajan por el bus interno",duration:1500,animation:{type:"flow",targets:["AL","BL"],data:{from:"AL",to:"BL",value:"25"}}},{id:"destination-write",title:"Escribir Registro Destino",description:"El valor se almacena en el registro destino",duration:1e3,animation:{type:"transform",targets:["BL"],data:{newValue:"25"}}}]},"alu-operation":{title:"Operacin ALU",description:"Proceso de operacin aritmtica o lgica",steps:[{id:"operand-load",title:"Cargar Operandos",description:"Los operandos se cargan en la ALU",duration:1500,animation:{type:"highlight",targets:["AL","BL"],data:{operand1:"10",operand2:"05"}}},{id:"operation-execute",title:"Ejecutar Operacin",description:"La ALU realiza la operacin",duration:2e3,animation:{type:"sequence",targets:["ALU"],data:{operation:"ADD",result:"15"}}},{id:"result-store",title:"Almacenar Resultado",description:"El resultado se guarda en el registro destino",duration:1500,animation:{type:"transform",targets:["AL"],data:{newValue:"15"}}}]},"bus-communication":{title:"Comunicacin por Bus",description:"Cmo los componentes se comunican a travs del bus",steps:[{id:"bus-request",title:"Solicitud de Bus",description:"Un componente solicita acceso al bus",duration:1e3,animation:{type:"highlight",targets:["CPU"],data:{requesting:!0}}},{id:"bus-grant",title:"Concesin de Bus",description:"El bus se concede al componente solicitante",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{granted:!0}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se transfieren por el bus",duration:2e3,animation:{type:"flow",targets:["data-bus"],data:{data:"A1B2",direction:"CPU-to-Memory"}}},{id:"bus-release",title:"Liberacin de Bus",description:"El bus se libera para otros componentes",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{released:!0}}}]}},A$=b.memo(({concept:t,onClose:e,className:n})=>{const[i,r]=b.useState(0),[s,o]=b.useState(!1),[a,l]=b.useState(!1),[c,u]=b.useState(!1),d=Xse[t],h=d.steps[i],p=i===0,g=i===d.steps.length-1;b.useEffect(()=>{if(s){const _=setTimeout(()=>{g?o(!1):r(E=>E+1)},h.duration);return()=>clearTimeout(_)}},[s,i,g,h.duration]);const m=b.useCallback(()=>{g||r(_=>_+1)},[g]),v=b.useCallback(()=>{p||r(_=>_-1)},[p]),y=b.useCallback(()=>{r(0),o(!1)},[]),x=b.useCallback(()=>{o(!s)},[s]),w=b.useCallback(()=>{l(!a)},[a]),S=()=>{const{type:_,targets:E,data:C}=h.animation;switch(_){case"highlight":return f.jsxs("div",{className:"relative",children:[E.map((N,M)=>f.jsx("div",{className:"absolute inset-0 animate-pulse rounded border-2 border-mantis-400 bg-mantis-400/20",style:{animationDelay:`${M*200}ms`}},M)),C&&f.jsx("div",{className:"absolute right-2 top-2 rounded bg-mantis-500 px-2 py-1 text-xs text-white",children:Object.entries(C).map(([N,M])=>f.jsxs("div",{children:[N,": ",String(M)]},N))})]});case"flow":return f.jsxs("div",{className:"relative",children:[f.jsxs("svg",{className:"absolute inset-0 size-full",children:[f.jsx("defs",{children:f.jsxs("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[f.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),f.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),f.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),f.jsx("path",{d:`M ${"from"in C&&C.from||"0,0"} L ${"to"in C&&C.to||"100,100"}`,stroke:"url(#flowGradient)",strokeWidth:"3",strokeDasharray:"10,5",className:"animate-pulse"})]}),"value"in C&&C.value&&f.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:f.jsx("div",{className:"rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:C.value})})]});case"transform":return f.jsxs("div",{className:"relative",children:[E.map((N,M)=>f.jsx("div",{className:"absolute inset-0 animate-ping rounded bg-mantis-400/30",style:{animationDelay:`${M*300}ms`}},M)),"newValue"in C&&C.newValue&&f.jsxs("div",{className:"absolute left-2 top-2 rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:["Nuevo: ",C.newValue]})]});case"sequence":return f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:f.jsx("div",{className:"rounded-lg bg-mantis-500 px-4 py-2 font-mono text-sm text-white",children:"operation"in C&&C.operation?C.operation:"Operacin"})}),"result"in C&&C.result&&f.jsxs("div",{className:"absolute bottom-2 right-2 rounded bg-green-500 px-2 py-1 font-mono text-xs text-white",children:["= ",C.result]})]});default:return null}};return f.jsx("div",{className:Q("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",a&&"p-0",n),children:f.jsxs("div",{className:Q("rounded-lg border border-stone-600 bg-stone-900 shadow-xl",a?"size-full":"max-h-[90vh] w-full max-w-4xl"),children:[f.jsxs("div",{className:"border-b border-stone-600 p-4",children:[f.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[f.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:d.title}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(lt,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"text-stone-400 hover:text-mantis-400",children:f.jsx(Oe,{icon:QL})}),f.jsx(lt,{variant:"ghost",size:"sm",onClick:w,className:"text-stone-400 hover:text-mantis-400",children:f.jsx(Oe,{icon:a?bX:jX})}),f.jsx(lt,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:""})]})]}),f.jsxs("div",{className:"flex items-center gap-4 text-sm text-stone-400",children:[f.jsxs("span",{children:["Paso ",i+1," de ",d.steps.length]}),f.jsx("span",{children:""}),f.jsxs("span",{children:[h.duration/1e3,"s"]})]}),f.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:f.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(i+1)/d.steps.length*100}%`}})})]}),f.jsxs("div",{className:"flex-1 p-4",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:h.title}),f.jsx("p",{className:"text-sm text-stone-300",children:h.description})]}),f.jsxs("div",{className:"relative h-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-800",children:[S(),c&&f.jsxs("div",{className:"absolute left-2 top-2 max-w-xs rounded border border-stone-600 bg-stone-900/90 p-3",children:[f.jsx("h4",{className:"mb-2 font-medium text-mantis-400",children:"Informacin"}),f.jsx("p",{className:"text-xs text-stone-300",children:d.description}),f.jsxs("div",{className:"mt-2 text-xs text-stone-400",children:[f.jsxs("div",{children:["Tipo de animacin: ",h.animation.type]}),f.jsxs("div",{children:["Elementos: ",h.animation.targets.join(", ")]})]})]})]})]}),f.jsx("div",{className:"border-t border-stone-600 p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(lt,{variant:"outline",size:"sm",onClick:y,className:"flex items-center gap-1",children:[f.jsx(Oe,{icon:kX}),"Reiniciar"]}),f.jsx(lt,{variant:"outline",size:"sm",onClick:v,disabled:p,className:"flex items-center gap-1",children:"Anterior"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(lt,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-1",children:[f.jsx(Oe,{icon:s?Nh:gp}),s?"Pausar":"Reproducir"]}),f.jsx(lt,{variant:"outline",size:"sm",onClick:m,disabled:g,className:"flex items-center gap-1",children:"Siguiente"})]})]})})]})})});A$.displayName="ConceptVisualizer";const Jse=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Aprende cmo funciona una CPU y sus componentes principales",difficulty:"beginner",estimatedTime:10,steps:[{id:"intro",title:"Introduccin a la CPU",description:"Qu es una CPU y para qu sirve?",content:"La CPU (Unidad Central de Procesamiento) es el cerebro de la computadora. Se encarga de ejecutar instrucciones y procesar datos.",type:"explanation",completed:!1},{id:"registers",title:"Registros de la CPU",description:"Los registros son memoria rpida dentro de la CPU",content:"Los registros almacenan datos temporalmente durante la ejecucin. Son ms rpidos que la RAM pero tienen menos capacidad.",type:"explanation",completed:!1},{id:"program-counter",title:"Puntero de Instruccin",description:"El IP indica la siguiente instruccin a ejecutar",content:"El Puntero de Instruccin (IP) se incrementa automticamente despus de cada instruccin.",type:"explanation",completed:!1}]},{id:"memory-basics",title:"Memoria RAM",description:"Comprende cmo funciona la memoria principal",difficulty:"beginner",estimatedTime:8,steps:[{id:"memory-intro",title:"Qu es la Memoria RAM?",description:"La memoria de acceso aleatorio",content:"La RAM almacena programas y datos temporalmente. Cada ubicacin tiene una direccin nica.",type:"explanation",completed:!1},{id:"memory-access",title:"Acceso a Memoria",description:"Cmo la CPU lee y escribe en memoria",content:"La CPU usa el bus de direcciones para especificar qu celda de memoria acceder.",type:"explanation",completed:!1},{id:"memory-quiz",title:"Quiz: Direccionamiento",description:"Pon a prueba tu conocimiento",content:"Responde correctamente para continuar.",type:"quiz",exercise:{question:"Cuntas direcciones de memoria tiene VonSim8?",options:["128 bytes","256 bytes","512 bytes","1024 bytes"],correctAnswer:1,explanation:"VonSim8 tiene 256 bytes de memoria (direcciones 00-FF en hexadecimal)."},completed:!1}]},{id:"instruction-cycle",title:"Ciclo de Instruccin",description:"Ciclo bsico de ejecucin de instrucciones",difficulty:"intermediate",estimatedTime:15,steps:[{id:"cycle-intro",title:"El Ciclo de Instruccin",description:"Las dos fases principales",content:"Cada instruccin pasa por dos fases: Fetch (leer) y Execute (ejecutar). La decodificacin est incluida en la ejecucin.",type:"explanation",completed:!1},{id:"fetch-phase",title:"Fase Fetch",description:"Leer la instruccin de memoria",content:"La CPU lee la instruccin desde la direccin apuntada por el IP.",type:"explanation",completed:!1},{id:"execute-phase",title:"Fase Execute",description:"Ejecutar la operacin",content:"La CPU realiza la operacin especificada por la instruccin.",type:"explanation",completed:!1}]}],N$=b.memo(({tutorial:t,onComplete:e,onClose:n,className:i})=>{var T,H;const[r,s]=b.useState(0),[o,a]=b.useState(t.steps),[l,c]=b.useState(!1),[u,d]=b.useState(!1),[h,p]=b.useState(""),[g,m]=b.useState(null),v=o[r],y=r===0,x=r===o.length-1,S=o.filter(L=>L.completed).length/o.length*100,_=b.useCallback(()=>{e==null||e(t.id)},[t.id,e]),E=b.useCallback(()=>{x?_():(s(L=>L+1),m(null),p(""))},[x,_]),C=b.useCallback(()=>{y||(s(L=>L-1),m(null),p(""))},[y]),N=b.useCallback(()=>{a(L=>L.map((K,X)=>X===r?{...K,completed:!0}:K))},[r]),M=b.useCallback(()=>{if(!v.exercise)return;const L=h===v.exercise.correctAnswer.toString();m({correct:L,message:L?"Correcto!":`Incorrecto. ${v.exercise.explanation}`}),L&&(N(),setTimeout(()=>{E()},2e3))},[v,h,N,E]);b.useEffect(()=>{if(l&&v.type==="explanation"){const L=setTimeout(()=>{x?c(!1):E()},5e3);return()=>clearTimeout(L)}},[l,r,x,v.type,E]);const I=L=>{switch(L){case"beginner":return"text-blue-400";case"intermediate":return"text-yellow-400";case"advanced":return"text-purple-400";default:return"text-stone-400"}},O=L=>{switch(L){case"beginner":return id;case"intermediate":return cm;case"advanced":return tD;default:return id}};return f.jsx("div",{className:Q("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",i),children:f.jsxs("div",{className:"max-h-[90vh] w-full max-w-2xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[f.jsxs("div",{className:"border-b border-stone-600 p-4",children:[f.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[f.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:t.title}),f.jsx(lt,{variant:"ghost",size:"sm",onClick:n,className:"text-stone-400 hover:text-white",children:""})]}),f.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Oe,{icon:O(t.difficulty),className:I(t.difficulty)}),f.jsx("span",{className:I(t.difficulty),children:t.difficulty==="beginner"?"Bsico":t.difficulty==="intermediate"?"Intermedio":"Avanzado"})]}),f.jsx("span",{className:"text-stone-400",children:""}),f.jsxs("span",{className:"text-stone-400",children:[t.estimatedTime," min"]}),f.jsx("span",{className:"text-stone-400",children:""}),f.jsxs("span",{className:"text-stone-400",children:["Paso ",r+1," de ",o.length]})]}),f.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:f.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${S}%`}})})]}),f.jsxs("div",{className:"max-h-96 overflow-y-auto p-4",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:v.title}),f.jsx("p",{className:"mb-3 text-sm text-stone-300",children:v.description}),f.jsx("div",{className:"text-sm leading-relaxed text-stone-400",children:v.content})]}),v.type==="exercise"||v.type==="quiz"?f.jsxs("div",{className:"rounded-lg border border-stone-600 bg-stone-800 p-4",children:[f.jsx("h4",{className:"mb-3 font-medium text-white",children:(T=v.exercise)==null?void 0:T.question}),(H=v.exercise)!=null&&H.options?f.jsx("div",{className:"space-y-2",children:v.exercise.options.map((L,K)=>f.jsxs("label",{className:Q("flex cursor-pointer items-center gap-3 rounded border p-3 transition-colors",h===K.toString()?"border-mantis-400 bg-mantis-400/20":"border-stone-600 bg-stone-700 hover:bg-stone-600"),children:[f.jsx("input",{type:"radio",name:"answer",value:K,checked:h===K.toString(),onChange:X=>p(X.target.value),className:"text-mantis-400"}),f.jsx("span",{className:"text-stone-300",children:L})]},K))}):f.jsx("input",{type:"text",value:h,onChange:L=>p(L.target.value),placeholder:"Escribe tu respuesta...",className:"w-full rounded border border-stone-600 bg-stone-700 p-2 text-white"}),g&&f.jsx("div",{className:Q("mt-3 rounded border p-3",g.correct?"border-green-400 bg-green-400/20 text-green-400":"border-red-400 bg-red-400/20 text-red-400"),children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Oe,{icon:g.correct?iD:lm}),g.message]})}),v.hints&&v.hints.length>0&&f.jsxs("div",{className:"mt-3",children:[f.jsxs(lt,{variant:"ghost",size:"sm",onClick:()=>d(!u),className:"text-mantis-400 hover:text-mantis-300",children:[f.jsx(Oe,{icon:id,className:"mr-2"}),u?"Ocultar":"Mostrar"," Pistas"]}),u&&f.jsx("div",{className:"mt-2 rounded border border-stone-600 bg-stone-700 p-3",children:f.jsx("ul",{className:"space-y-1 text-sm text-stone-300",children:v.hints.map((L,K)=>f.jsxs("li",{children:[" ",L]},K))})})]})]}):null]}),f.jsx("div",{className:"border-t border-stone-600 p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs(lt,{variant:"outline",size:"sm",onClick:C,disabled:y,className:"flex items-center gap-1",children:[f.jsx(Oe,{icon:eD}),"Anterior"]})}),f.jsx("div",{className:"flex items-center gap-2",children:v.type==="exercise"||v.type==="quiz"?f.jsx(lt,{size:"sm",onClick:M,disabled:!h,className:"bg-mantis-600 hover:bg-mantis-700",children:"Verificar Respuesta"}):f.jsxs(lt,{size:"sm",onClick:E,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700",children:[x?"Completar Tutorial":"Siguiente",!x&&f.jsx(Oe,{icon:vC})]})})]})})]})})});N$.displayName="InteractiveTutorial";const P$=b.memo(({isOpen:t=!1,onShowProgress:e})=>{const[n,i]=b.useState(!1),[r]=b.useState(!1),[s,o]=b.useState(!1),[a,l]=b.useState(!1),[c,u]=b.useState(null),[d,h]=b.useState(null),p=S=>{console.log("Tutorial seleccionado:",S),u(S),o(!0)},g=S=>{h(S),l(!0)},m=()=>{o(!1),u(null)},v=()=>{l(!1),h(null)},y=[{id:"progress",title:"Progreso Educativo",description:"Ver logros y estadsticas de aprendizaje",icon:yC,color:"text-yellow-400",action:()=>e==null?void 0:e()},{id:"tutorials",title:"Tutoriales Interactivos",description:"Aprende paso a paso con ejercicios",icon:UX,color:"text-blue-400",action:()=>i(!n)}],x=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Conceptos bsicos de CPU y registros",difficulty:"Bsico",duration:"10 min"},{id:"memory-basics",title:"Memoria RAM",description:"Funcionamiento de la memoria principal",difficulty:"Bsico",duration:"8 min"},{id:"instruction-cycle",title:"Ciclo de Instruccin",description:"Fases fetch-decode-execute",difficulty:"Intermedio",duration:"15 min"}],w=[{id:"fetch-decode-execute",title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instruccin"},{id:"memory-access",title:"Acceso a Memoria",description:"Cmo la CPU lee y escribe en memoria RAM"},{id:"register-transfer",title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU"},{id:"alu-operation",title:"Operacin ALU",description:"Proceso de operacin aritmtica o lgica"},{id:"bus-communication",title:"Comunicacin por Bus",description:"Cmo los componentes se comunican a travs del bus"}];return f.jsxs(f.Fragment,{children:[t&&f.jsx("div",{className:"fixed bottom-12 left-1/2 z-50 -translate-x-1/2",children:f.jsxs("div",{className:"min-w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[f.jsxs("div",{className:"mb-4 text-center",children:[f.jsx("h3",{className:"mb-1 text-lg font-semibold text-mantis-400",children:"Centro de Aprendizaje"}),f.jsx("p",{className:"text-sm text-stone-400",children:"Explora herramientas educativas interactivas"})]}),f.jsx("div",{className:"space-y-2",children:y.map(S=>f.jsx("div",{children:S.id==="tutorials"?f.jsxs("div",{children:[f.jsxs("button",{onClick:S.action,className:Q("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[f.jsx(Oe,{icon:S.icon,className:Q("text-lg",S.color)}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-white",children:S.title}),f.jsx("div",{className:"text-sm text-stone-400",children:S.description})]}),f.jsx(Oe,{icon:gp,className:Q("text-sm text-stone-400",n&&"text-blue-400")})]}),n&&f.jsx("div",{className:"ml-8 mt-2 space-y-1",children:x.map(_=>f.jsx("button",{onClick:()=>p(_.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium text-white",children:_.title}),f.jsx("div",{className:"text-xs text-stone-400",children:_.description})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("div",{className:"text-xs text-blue-400",children:_.difficulty}),f.jsx("div",{className:"text-xs text-stone-500",children:_.duration})]})]})},_.id))})]}):S.id==="visualizations"?f.jsxs("div",{children:[f.jsxs("button",{onClick:S.action,className:Q("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[f.jsx(Oe,{icon:S.icon,className:Q("text-lg",S.color)}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-white",children:S.title}),f.jsx("div",{className:"text-sm text-stone-400",children:S.description})]}),f.jsx(Oe,{icon:F3,className:Q("text-sm text-stone-400",r&&"text-green-400")})]}),r&&f.jsx("div",{className:"ml-8 mt-2 space-y-1",children:w.map(_=>f.jsx("button",{onClick:()=>g(_.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium text-white",children:_.title}),f.jsx("div",{className:"text-xs text-stone-400",children:_.description})]})},_.id))})]}):f.jsxs("button",{onClick:S.action,className:Q("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[f.jsx(Oe,{icon:S.icon,className:Q("text-lg",S.color)}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-white",children:S.title}),f.jsx("div",{className:"text-sm text-stone-400",children:S.description})]})]})},S.id))}),f.jsx("div",{className:"mt-4 border-t border-stone-600 pt-3",children:f.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[f.jsx("span",{children:"Herramientas educativas"}),f.jsx("span",{children:"VonSim8"})]})})]})}),s&&c&&(()=>{const S=Jse.find(_=>_.id===c);return console.log("Tutorial encontrado:",S),S?f.jsx(N$,{tutorial:S,onComplete:m,onClose:()=>{console.log("Cerrando tutorial"),o(!1),u(null)}}):(console.error("Tutorial no encontrado:",c),null)})(),a&&d&&f.jsx(A$,{concept:d,onClose:v})]})});P$.displayName="EducationalMenu";const tR=[{id:"first_program",type:"programs_written",title:"Primer Programa",description:"Escribe tu primer programa en ensamblador",icon:id,requirement:1,current:0,unlocked:!1,points:10},{id:"instruction_master",type:"instructions_executed",title:"Maestro de Instrucciones",description:"Ejecuta 100 instrucciones",icon:SX,requirement:100,current:0,unlocked:!1,points:25},{id:"memory_explorer",type:"concept_mastered",title:"Explorador de Memoria",description:"Comprende el funcionamiento de la memoria RAM",icon:HX,requirement:1,current:0,unlocked:!1,points:15},{id:"cpu_architect",type:"concept_mastered",title:"Arquitecto de CPU",description:"Domina los conceptos de arquitectura de CPU",icon:zX,requirement:1,current:0,unlocked:!1,points:30},{id:"persistent_learner",type:"time_spent",title:"Estudiante Persistente",description:"Pasa 30 minutos aprendiendo",icon:cm,requirement:30,current:0,unlocked:!1,points:20},{id:"tutorial_master",type:"tutorials_completed",title:"Maestro de Tutoriales",description:"Completa un tutorial interactivo educativo",icon:yC,requirement:1,current:0,unlocked:!1,points:40}],nR=[{id:"beginner",name:"Principiante",description:"Conceptos bsicos de programacin y arquitectura",concepts:["register","memory","instruction"],requiredPoints:0,unlocked:!0,completed:!1},{id:"intermediate",name:"Intermedio",description:"Operaciones aritmticas y lgicas",concepts:["alu","bus","program-counter"],requiredPoints:50,unlocked:!1,completed:!1},{id:"advanced",name:"Avanzado",description:"Interrupciones y programacin compleja",concepts:["flags","stack","interrupts"],requiredPoints:100,unlocked:!1,completed:!1}],M$=b.memo(({className:t,isVisible:e=!1,onClose:n})=>{const[i,r]=b.useState(tR),[s,o]=b.useState(nR),[a,l]=b.useState(0),[c,u]=b.useState(0);b.useEffect(()=>{const v=localStorage.getItem("vonsim8-educational-progress");if(v)try{const y=JSON.parse(v);r(y.achievements||tR),o(y.levels||nR),l(y.totalPoints||0),u(y.sessionTime||0)}catch{}},[]);const d=b.useCallback(()=>{const v={achievements:i,levels:s,totalPoints:a,sessionTime:c,lastSaved:Date.now()};localStorage.setItem("vonsim8-educational-progress",JSON.stringify(v))},[i,s,a,c]),h=b.useCallback((v,y)=>{r(x=>{const w=x.map(_=>{if(_.type===v){const E=Math.min(_.current+y,_.requirement),C=_.unlocked,N=E>=_.requirement;return!C&&N&&p(_),{..._,current:E,unlocked:N}}return _}),S=w.filter(_=>_.unlocked).reduce((_,E)=>_+E.points,0);return l(S),o(_=>_.map(E=>({...E,unlocked:S>=E.requiredPoints}))),w})},[]),p=v=>{const y=document.createElement("div");y.className=Q("fixed right-4 top-4 z-50 rounded-lg border-2 p-4 shadow-lg","animate-slide-in-right bg-mantis-500 text-white"),y.innerHTML=`
      <div class="flex items-center gap-3">
        <FontAwesomeIcon icon="${v.icon}" class="text-2xl" />
        <div>
          <div class="font-bold">Logro Desbloqueado!</div>
          <div class="text-sm">${v.title}</div>
        </div>
      </div>
    `,document.body.appendChild(y),setTimeout(()=>{y.remove()},3e3)};if(b.useEffect(()=>{const v=y=>{const{type:x,value:w=1}=y.detail;h(x,w)};return window.addEventListener("educational-progress",v),()=>window.removeEventListener("educational-progress",v)},[h]),b.useEffect(()=>{const v=setInterval(()=>{u(y=>{const x=y+1;return x%60===0&&h("time_spent",1),x})},1e3);return()=>clearInterval(v)},[h]),b.useEffect(()=>{const v=setInterval(d,3e4);return()=>clearInterval(v)},[d]),!e)return null;const g=i.filter(v=>v.unlocked),m=s.filter(v=>v.unlocked);return f.jsxs("div",{className:Q("fixed bottom-20 right-4 z-50 h-80 w-96 rounded-lg border border-stone-600 bg-stone-900 shadow-xl",t),children:[f.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-3",children:[f.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-mantis-400",children:[f.jsx(Oe,{icon:yC}),"Progreso Educativo"]}),f.jsx(lt,{variant:"ghost",size:"sm",onClick:n,className:"text-xs text-stone-400 hover:text-white",children:""})]}),f.jsxs("div",{className:"h-64 space-y-3 overflow-y-auto p-3",children:[f.jsxs("div",{className:"rounded-lg bg-stone-800 p-3 text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-mantis-400",children:a}),f.jsx("div",{className:"text-xs text-stone-400",children:"Puntos Totales"})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[f.jsx(Oe,{icon:cm}),"Niveles de Aprendizaje"]}),f.jsx("div",{className:"space-y-1",children:s.map(v=>f.jsxs("div",{className:Q("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10 text-mantis-400":"border-stone-600 bg-stone-800 text-stone-500"),children:[f.jsx("div",{className:"font-medium",children:v.name}),f.jsx("div",{className:"text-stone-400",children:v.description}),!v.unlocked&&f.jsxs("div",{className:"mt-1 text-stone-500",children:["Requiere ",v.requiredPoints," puntos"]})]},v.id))})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[f.jsx(Oe,{icon:wX}),"Logros (",g.length,"/",i.length,")"]}),f.jsx("div",{className:"space-y-1",children:i.map(v=>f.jsx("div",{className:Q("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10":"border-stone-600 bg-stone-800"),children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Oe,{icon:v.icon,className:v.unlocked?"text-mantis-400":"text-stone-500"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:Q("font-medium",v.unlocked?"text-mantis-400":"text-stone-400"),children:v.title}),f.jsx("div",{className:"text-stone-500",children:v.description}),f.jsxs("div",{className:"mt-1",children:[f.jsx("div",{className:"h-1 w-full rounded-full bg-stone-700",children:f.jsx("div",{className:"h-1 rounded-full bg-mantis-400 transition-all duration-300",style:{width:`${v.current/v.requirement*100}%`}})}),f.jsxs("div",{className:"mt-1 text-stone-500",children:[v.current,"/",v.requirement]})]})]})]})},v.id))})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[f.jsx(Oe,{icon:NX}),"Estadsticas"]}),f.jsxs("div",{className:"text-xs text-stone-400",children:[f.jsxs("div",{children:["Tiempo de sesin: ",Math.floor(c/60),"m ",c%60,"s"]}),f.jsxs("div",{children:["Niveles completados: ",m.length,"/",s.length]})]})]})]})]})});M$.displayName="EducationalProgress";const R$=b.createContext(null),EE=()=>{const t=b.useContext(R$);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},T$=()=>{const[t,e]=b.useState([]),[n,i]=b.useState(!1);b.useEffect(()=>{const c=localStorage.getItem("vonsim8-notifications");if(c)try{const d=JSON.parse(c);if(Array.isArray(d)){const h=d.filter(p=>p&&typeof p=="object"&&"id"in p&&"type"in p&&"title"in p&&"message"in p&&"timestamp"in p&&"read"in p).map(p=>({id:String(p.id),type:p.type,title:String(p.title),message:String(p.message),timestamp:new Date(p.timestamp),read:!!p.read}));e(h)}}catch{e([])}if(!localStorage.getItem("vonsim8-welcome-notification")){const d={id:"welcome",type:"info",title:"Bienvenido a VonSim8!",message:"Gracias por usar nuestro simulador. Aqu encontrars notificaciones importantes sobre el funcionamiento de la aplicacin.",timestamp:new Date,read:!1};e(h=>[d,...h]),localStorage.setItem("vonsim8-welcome-notification","true")}},[]),b.useEffect(()=>{localStorage.setItem("vonsim8-notifications",JSON.stringify(t))},[t]);const r=b.useCallback(c=>{const u={...c,id:Date.now().toString(),timestamp:new Date,read:!1};e(d=>[u,...d])},[]),s=b.useCallback(c=>{e(u=>u.map(d=>d.id===c?{...d,read:!0}:d))},[]),o=b.useCallback(()=>{e(c=>c.map(u=>({...u,read:!0})))},[]),a=b.useCallback(c=>{e(u=>u.filter(d=>d.id!==c))},[]),l=b.useCallback(()=>{e([])},[]);return{notifications:t,isOpen:n,setIsOpen:i,addNotification:r,markAsRead:s,markAllAsRead:o,deleteNotification:a,clearAll:l}},Zse=t=>b.useMemo(()=>{const e=t.length,n=t.filter(r=>!r.read).length,i=t.reduce((r,s)=>(r[s.type]=(r[s.type]||0)+1,r),{});return{total:e,unread:n,byType:i}},[t]),O$=b.memo(({type:t})=>{const e=b.useMemo(()=>{switch(t){case"info":return{icon:$3,className:"text-blue-400"};case"success":return{icon:iD,className:"text-green-400"};case"warning":return{icon:o2,className:"text-yellow-400"};case"error":return{icon:o2,className:"text-red-400"};default:return{icon:$3,className:"text-blue-400"}}},[t]);return f.jsx(Oe,{icon:e.icon,className:Q("size-4",e.className)})});O$.displayName="NotificationIcon";const dk=b.memo(({notification:t,onMarkAsRead:e,onDelete:n})=>{const i=b.useCallback(r=>{const o=new Date().getTime()-r.getTime(),a=Math.floor(o/6e4),l=Math.floor(o/36e5),c=Math.floor(o/864e5);return c>0?`${c}d`:l>0?`${l}h`:a>0?`${a}m`:"Ahora"},[]);return f.jsx("div",{className:Q("rounded-lg border p-3 transition-colors",t.read?"border-stone-600 bg-stone-800":"border-mantis-500 bg-stone-800/80"),children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(O$,{type:t.type}),f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsx("h4",{className:"font-medium text-white",children:t.title}),f.jsx("button",{onClick:()=>n(t.id),className:"ml-2 rounded p-1 text-stone-400 transition-colors hover:text-white",children:f.jsx(Oe,{icon:lm,size:"sm"})})]}),f.jsx("p",{className:"mt-1 text-sm text-stone-300",children:t.message}),f.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[f.jsx("span",{className:"text-xs text-stone-500",children:i(t.timestamp)}),f.jsxs("div",{className:"flex gap-2",children:[t.title==="Nueva versin disponible"&&f.jsx("button",{onClick:()=>{window.updateVonSim8&&window.updateVonSim8(),e(t.id)},className:"rounded bg-mantis-600 px-2 py-1 text-xs text-white transition-colors hover:bg-mantis-500",children:"Actualizar"}),!t.read&&f.jsx("button",{onClick:()=>e(t.id),className:"text-xs text-mantis-400 transition-colors hover:text-mantis-300",children:"Marcar como leda"})]})]})]})]})})});dk.displayName="NotificationItem";const I$=b.memo(()=>{const{notifications:t,isOpen:e,setIsOpen:n,markAsRead:i,markAllAsRead:r,deleteNotification:s,clearAll:o}=T$(),{total:a,unread:l}=Zse(t),c=b.useCallback(()=>{n(h=>!h)},[n]),u=b.useMemo(()=>t.filter(h=>!h.read),[t]),d=b.useMemo(()=>t.filter(h=>h.read),[t]);return e?f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[f.jsx(Oe,{icon:Pv,className:"size-4"}),l>0&&f.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]}),f.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[f.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[f.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Notificaciones (",a,")"]}),f.jsxs("div",{className:"flex gap-2",children:[l>0&&f.jsx(lt,{variant:"ghost",size:"sm",onClick:r,className:"text-xs text-stone-400 hover:text-white",children:"Marcar todas"}),a>0&&f.jsx(lt,{variant:"ghost",size:"sm",onClick:o,className:"text-xs text-red-400 hover:text-red-300",children:"Limpiar"})]})]}),f.jsx("div",{className:"max-h-96 space-y-3 overflow-y-auto",children:t.length===0?f.jsx("p",{className:"text-center text-sm text-stone-500",children:"No hay notificaciones"}):f.jsxs(f.Fragment,{children:[u.length>0&&f.jsx("div",{className:"space-y-2",children:u.map(h=>f.jsx(dk,{notification:h,onMarkAsRead:i,onDelete:s},h.id))}),d.length>0&&u.length>0&&f.jsx("hr",{className:"border-stone-600"}),d.length>0&&f.jsx("div",{className:"space-y-2",children:d.map(h=>f.jsx(dk,{notification:h,onMarkAsRead:i,onDelete:s},h.id))})]})})]})]}):f.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[f.jsx(Oe,{icon:Pv,className:"size-4"}),l>0&&f.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]})});I$.displayName="NotificationCenter";const Qse=({children:t})=>{const e=T$(),n=b.useMemo(()=>({addNotification:e.addNotification,markAsRead:e.markAsRead,markAllAsRead:e.markAllAsRead,deleteNotification:e.deleteNotification,clearAll:e.clearAll,notifications:e.notifications}),[e]);return f.jsx(R$.Provider,{value:n,children:t})};function oy(t,[e,n]){return Math.min(n,Math.max(e,t))}function eoe(t,e=globalThis==null?void 0:globalThis.document){const n=xr(t);b.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var toe="DismissableLayer",fk="dismissableLayer.update",noe="dismissableLayer.pointerDownOutside",ioe="dismissableLayer.focusOutside",iR,j$=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bm=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(j$),[u,d]=b.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=b.useState({}),g=ut(e,C=>d(C)),m=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(v),x=u?m.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,S=x>=y,_=soe(C=>{const N=C.target,M=[...c.branches].some(I=>I.contains(N));!S||M||(r==null||r(C),o==null||o(C),C.defaultPrevented||a==null||a())},h),E=ooe(C=>{const N=C.target;[...c.branches].some(I=>I.contains(N))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},h);return eoe(C=>{x===c.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},h),b.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(iR=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),rR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=iR)}},[u,h,n,c]),b.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),rR())},[u,c]),b.useEffect(()=>{const C=()=>p({});return document.addEventListener(fk,C),()=>document.removeEventListener(fk,C)},[]),f.jsx(He.div,{...l,ref:g,style:{pointerEvents:w?S?"auto":"none":void 0,...t.style},onFocusCapture:ye(t.onFocusCapture,E.onFocusCapture),onBlurCapture:ye(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ye(t.onPointerDownCapture,_.onPointerDownCapture)})});bm.displayName=toe;var roe="DismissableLayerBranch",L$=b.forwardRef((t,e)=>{const n=b.useContext(j$),i=b.useRef(null),r=ut(e,i);return b.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),f.jsx(He.div,{...t,ref:r})});L$.displayName=roe;function soe(t,e=globalThis==null?void 0:globalThis.document){const n=xr(t),i=b.useRef(!1),r=b.useRef(()=>{});return b.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){D$(noe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function ooe(t,e=globalThis==null?void 0:globalThis.document){const n=xr(t),i=b.useRef(!1);return b.useEffect(()=>{const r=s=>{s.target&&!i.current&&D$(ioe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function rR(){const t=new CustomEvent(fk);document.dispatchEvent(t)}function D$(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?tC(r,s):r.dispatchEvent(s)}var aoe=bm,loe=L$,D1=0;function AE(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??sR()),document.body.insertAdjacentElement("beforeend",t[1]??sR()),D1++,()=>{D1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),D1--}},[])}function sR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var $1="focusScope.autoFocusOnMount",F1="focusScope.autoFocusOnUnmount",oR={bubbles:!1,cancelable:!0},coe="FocusScope",Nb=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=b.useState(null),c=xr(r),u=xr(s),d=b.useRef(null),h=ut(e,m=>l(m)),p=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(i){let m=function(w){if(p.paused||!a)return;const S=w.target;a.contains(S)?d.current=S:ba(d.current,{select:!0})},v=function(w){if(p.paused||!a)return;const S=w.relatedTarget;S!==null&&(a.contains(S)||ba(d.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&ba(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const x=new MutationObserver(y);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),x.disconnect()}}},[i,a,p.paused]),b.useEffect(()=>{if(a){lR.add(p);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent($1,oR);a.addEventListener($1,c),a.dispatchEvent(y),y.defaultPrevented||(uoe(moe($$(a)),{select:!0}),document.activeElement===m&&ba(a))}return()=>{a.removeEventListener($1,c),setTimeout(()=>{const y=new CustomEvent(F1,oR);a.addEventListener(F1,u),a.dispatchEvent(y),y.defaultPrevented||ba(m??document.body,{select:!0}),a.removeEventListener(F1,u),lR.remove(p)},0)}}},[a,c,u,p]);const g=b.useCallback(m=>{if(!n&&!i||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(v&&y){const x=m.currentTarget,[w,S]=doe(x);w&&S?!m.shiftKey&&y===S?(m.preventDefault(),n&&ba(w,{select:!0})):m.shiftKey&&y===w&&(m.preventDefault(),n&&ba(S,{select:!0})):y===x&&m.preventDefault()}},[n,i,p.paused]);return f.jsx(He.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});Nb.displayName=coe;function uoe(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(ba(i,{select:e}),document.activeElement!==n)return}function doe(t){const e=$$(t),n=aR(e,t),i=aR(e.reverse(),t);return[n,i]}function $$(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function aR(t,e){for(const n of t)if(!foe(n,{upTo:e}))return n}function foe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function hoe(t){return t instanceof HTMLInputElement&&"select"in t}function ba(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&hoe(t)&&e&&t.select()}}var lR=poe();function poe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=cR(t,e),t.unshift(e)},remove(e){var n;t=cR(t,e),(n=t[0])==null||n.resume()}}}function cR(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function moe(t){return t.filter(e=>e.tagName!=="A")}const goe=["top","right","bottom","left"],Sl=Math.min,lr=Math.max,ay=Math.round,Tg=Math.floor,lo=t=>({x:t,y:t}),voe={left:"right",right:"left",bottom:"top",top:"bottom"},yoe={start:"end",end:"start"};function hk(t,e,n){return lr(t,Sl(e,n))}function ta(t,e){return typeof t=="function"?t(e):t}function na(t){return t.split("-")[0]}function lf(t){return t.split("-")[1]}function NE(t){return t==="x"?"y":"x"}function PE(t){return t==="y"?"height":"width"}const boe=new Set(["top","bottom"]);function Qs(t){return boe.has(na(t))?"y":"x"}function ME(t){return NE(Qs(t))}function xoe(t,e,n){n===void 0&&(n=!1);const i=lf(t),r=ME(t),s=PE(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=ly(o)),[o,ly(o)]}function woe(t){const e=ly(t);return[pk(t),e,pk(e)]}function pk(t){return t.replace(/start|end/g,e=>yoe[e])}const uR=["left","right"],dR=["right","left"],Soe=["top","bottom"],koe=["bottom","top"];function _oe(t,e,n){switch(t){case"top":case"bottom":return n?e?dR:uR:e?uR:dR;case"left":case"right":return e?Soe:koe;default:return[]}}function Coe(t,e,n,i){const r=lf(t);let s=_oe(na(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(pk)))),s}function ly(t){return t.replace(/left|right|bottom|top/g,e=>voe[e])}function Eoe(t){return{top:0,right:0,bottom:0,left:0,...t}}function F$(t){return typeof t!="number"?Eoe(t):{top:t,right:t,bottom:t,left:t}}function cy(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function fR(t,e,n){let{reference:i,floating:r}=t;const s=Qs(e),o=ME(e),a=PE(o),l=na(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,h=i[a]/2-r[a]/2;let p;switch(l){case"top":p={x:u,y:i.y-r.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-r.width,y:d};break;default:p={x:i.x,y:i.y}}switch(lf(e)){case"start":p[o]-=h*(n&&c?-1:1);break;case"end":p[o]+=h*(n&&c?-1:1);break}return p}const Aoe=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:d}=fR(c,i,l),h=i,p={},g=0;for(let m=0;m<a.length;m++){const{name:v,fn:y}=a[m],{x,y:w,data:S,reset:_}=await y({x:u,y:d,initialPlacement:i,placement:h,strategy:r,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=x??u,d=w??d,p={...p,[v]:{...p[v],...S}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:u,y:d}=fR(c,h,l)),m=-1)}return{x:u,y:d,placement:h,strategy:r,middlewareData:p}};async function Vp(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=ta(e,t),g=F$(p),v=a[h?d==="floating"?"reference":"floating":d],y=cy(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},_=cy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:w,strategy:l}):x);return{top:(y.top-_.top+g.top)/S.y,bottom:(_.bottom-y.bottom+g.bottom)/S.y,left:(y.left-_.left+g.left)/S.x,right:(_.right-y.right+g.right)/S.x}}const Noe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=ta(t,e)||{};if(c==null)return{};const d=F$(u),h={x:n,y:i},p=ME(r),g=PE(p),m=await o.getDimensions(c),v=p==="y",y=v?"top":"left",x=v?"bottom":"right",w=v?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[p]-h[p]-s.floating[g],_=h[p]-s.reference[p],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=E?E[w]:0;(!C||!await(o.isElement==null?void 0:o.isElement(E)))&&(C=a.floating[w]||s.floating[g]);const N=S/2-_/2,M=C/2-m[g]/2-1,I=Sl(d[y],M),O=Sl(d[x],M),T=I,H=C-m[g]-O,L=C/2-m[g]/2+N,K=hk(T,L,H),X=!l.arrow&&lf(r)!=null&&L!==K&&s.reference[g]/2-(L<T?I:O)-m[g]/2<0,te=X?L<T?L-T:L-H:0;return{[p]:h[p]+te,data:{[p]:K,centerOffset:L-K-te,...X&&{alignmentOffset:te}},reset:X}}}),Poe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...v}=ta(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=na(r),x=Qs(a),w=na(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=h||(w||!m?[ly(a)]:woe(a)),E=g!=="none";!h&&E&&_.push(...Coe(a,m,g,S));const C=[a,..._],N=await Vp(e,v),M=[];let I=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&M.push(N[y]),d){const L=xoe(r,o,S);M.push(N[L[0]],N[L[1]])}if(I=[...I,{placement:r,overflows:M}],!M.every(L=>L<=0)){var O,T;const L=(((O=s.flip)==null?void 0:O.index)||0)+1,K=C[L];if(K&&(!(d==="alignment"?x!==Qs(K):!1)||I.every(U=>U.overflows[0]>0&&Qs(U.placement)===x)))return{data:{index:L,overflows:I},reset:{placement:K}};let X=(T=I.filter(te=>te.overflows[0]<=0).sort((te,U)=>te.overflows[1]-U.overflows[1])[0])==null?void 0:T.placement;if(!X)switch(p){case"bestFit":{var H;const te=(H=I.filter(U=>{if(E){const z=Qs(U.placement);return z===x||z==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(z=>z>0).reduce((z,ie)=>z+ie,0)]).sort((U,z)=>U[1]-z[1])[0])==null?void 0:H[0];te&&(X=te);break}case"initialPlacement":X=a;break}if(r!==X)return{reset:{placement:X}}}return{}}}};function hR(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function pR(t){return goe.some(e=>t[e]>=0)}const Moe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=ta(t,e);switch(i){case"referenceHidden":{const s=await Vp(e,{...r,elementContext:"reference"}),o=hR(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:pR(o)}}}case"escaped":{const s=await Vp(e,{...r,altBoundary:!0}),o=hR(s,n.floating);return{data:{escapedOffsets:o,escaped:pR(o)}}}default:return{}}}}},z$=new Set(["left","top"]);async function Roe(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=na(n),a=lf(n),l=Qs(n)==="y",c=z$.has(o)?-1:1,u=s&&l?-1:1,d=ta(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const Toe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await Roe(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},Ooe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:y,y:x}=v;return{x:y,y:x}}},...l}=ta(t,e),c={x:n,y:i},u=await Vp(e,l),d=Qs(na(r)),h=NE(d);let p=c[h],g=c[d];if(s){const v=h==="y"?"top":"left",y=h==="y"?"bottom":"right",x=p+u[v],w=p-u[y];p=hk(x,p,w)}if(o){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",x=g+u[v],w=g-u[y];g=hk(x,g,w)}const m=a.fn({...e,[h]:p,[d]:g});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[h]:s,[d]:o}}}}}},Ioe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ta(t,e),u={x:n,y:i},d=Qs(r),h=NE(d);let p=u[h],g=u[d];const m=ta(a,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=h==="y"?"height":"width",S=s.reference[h]-s.floating[w]+v.mainAxis,_=s.reference[h]+s.reference[w]-v.mainAxis;p<S?p=S:p>_&&(p=_)}if(c){var y,x;const w=h==="y"?"width":"height",S=z$.has(na(r)),_=s.reference[d]-s.floating[w]+(S&&((y=o.offset)==null?void 0:y[d])||0)+(S?0:v.crossAxis),E=s.reference[d]+s.reference[w]+(S?0:((x=o.offset)==null?void 0:x[d])||0)-(S?v.crossAxis:0);g<_?g=_:g>E&&(g=E)}return{[h]:p,[d]:g}}}},joe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ta(t,e),u=await Vp(e,c),d=na(r),h=lf(r),p=Qs(r)==="y",{width:g,height:m}=s.floating;let v,y;d==="top"||d==="bottom"?(v=d,y=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,v=h==="end"?"top":"bottom");const x=m-u.top-u.bottom,w=g-u.left-u.right,S=Sl(m-u[v],x),_=Sl(g-u[y],w),E=!e.middlewareData.shift;let C=S,N=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=w),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(C=x),E&&!h){const I=lr(u.left,0),O=lr(u.right,0),T=lr(u.top,0),H=lr(u.bottom,0);p?N=g-2*(I!==0||O!==0?I+O:lr(u.left,u.right)):C=m-2*(T!==0||H!==0?T+H:lr(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:C});const M=await o.getDimensions(a.floating);return g!==M.width||m!==M.height?{reset:{rects:!0}}:{}}}};function Pb(){return typeof window<"u"}function cf(t){return B$(t)?(t.nodeName||"").toLowerCase():"#document"}function yr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function vo(t){var e;return(e=(B$(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function B$(t){return Pb()?t instanceof Node||t instanceof yr(t).Node:!1}function Ss(t){return Pb()?t instanceof Element||t instanceof yr(t).Element:!1}function mo(t){return Pb()?t instanceof HTMLElement||t instanceof yr(t).HTMLElement:!1}function mR(t){return!Pb()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof yr(t).ShadowRoot}const Loe=new Set(["inline","contents"]);function xm(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=ks(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!Loe.has(r)}const Doe=new Set(["table","td","th"]);function $oe(t){return Doe.has(cf(t))}const Foe=[":popover-open",":modal"];function Mb(t){return Foe.some(e=>{try{return t.matches(e)}catch{return!1}})}const zoe=["transform","translate","scale","rotate","perspective"],Boe=["transform","translate","scale","rotate","perspective","filter"],Uoe=["paint","layout","strict","content"];function RE(t){const e=TE(),n=Ss(t)?ks(t):t;return zoe.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Boe.some(i=>(n.willChange||"").includes(i))||Uoe.some(i=>(n.contain||"").includes(i))}function Voe(t){let e=kl(t);for(;mo(e)&&!Gd(e);){if(RE(e))return e;if(Mb(e))return null;e=kl(e)}return null}function TE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Hoe=new Set(["html","body","#document"]);function Gd(t){return Hoe.has(cf(t))}function ks(t){return yr(t).getComputedStyle(t)}function Rb(t){return Ss(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function kl(t){if(cf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||mR(t)&&t.host||vo(t);return mR(e)?e.host:e}function U$(t){const e=kl(t);return Gd(e)?t.ownerDocument?t.ownerDocument.body:t.body:mo(e)&&xm(e)?e:U$(e)}function Hp(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=U$(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=yr(r);if(s){const a=mk(o);return e.concat(o,o.visualViewport||[],xm(r)?r:[],a&&n?Hp(a):[])}return e.concat(r,Hp(r,[],n))}function mk(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function V$(t){const e=ks(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=mo(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=ay(n)!==s||ay(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function OE(t){return Ss(t)?t:t.contextElement}function ud(t){const e=OE(t);if(!mo(e))return lo(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=V$(e);let o=(s?ay(n.width):n.width)/i,a=(s?ay(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Woe=lo(0);function H$(t){const e=yr(t);return!TE()||!e.visualViewport?Woe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Goe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==yr(t)?!1:e}function Hc(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=OE(t);let o=lo(1);e&&(i?Ss(i)&&(o=ud(i)):o=ud(t));const a=Goe(s,n,i)?H$(s):lo(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const h=yr(s),p=i&&Ss(i)?yr(i):i;let g=h,m=mk(g);for(;m&&i&&p!==g;){const v=ud(m),y=m.getBoundingClientRect(),x=ks(m),w=y.left+(m.clientLeft+parseFloat(x.paddingLeft))*v.x,S=y.top+(m.clientTop+parseFloat(x.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=w,c+=S,g=yr(m),m=mk(g)}}return cy({width:u,height:d,x:l,y:c})}function IE(t,e){const n=Rb(t).scrollLeft;return e?e.left+n:Hc(vo(t)).left+n}function W$(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:IE(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function Koe(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=vo(i),a=e?Mb(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=lo(1);const u=lo(0),d=mo(i);if((d||!d&&!s)&&((cf(i)!=="body"||xm(o))&&(l=Rb(i)),mo(i))){const p=Hc(i);c=ud(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}const h=o&&!d&&!s?W$(o,l,!0):lo(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function qoe(t){return Array.from(t.getClientRects())}function Yoe(t){const e=vo(t),n=Rb(t),i=t.ownerDocument.body,r=lr(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=lr(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+IE(t);const a=-n.scrollTop;return ks(i).direction==="rtl"&&(o+=lr(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function Xoe(t,e){const n=yr(t),i=vo(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=TE();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}const Joe=new Set(["absolute","fixed"]);function Zoe(t,e){const n=Hc(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=mo(t)?ud(t):lo(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function gR(t,e,n){let i;if(e==="viewport")i=Xoe(t,n);else if(e==="document")i=Yoe(vo(t));else if(Ss(e))i=Zoe(e,n);else{const r=H$(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return cy(i)}function G$(t,e){const n=kl(t);return n===e||!Ss(n)||Gd(n)?!1:ks(n).position==="fixed"||G$(n,e)}function Qoe(t,e){const n=e.get(t);if(n)return n;let i=Hp(t,[],!1).filter(a=>Ss(a)&&cf(a)!=="body"),r=null;const s=ks(t).position==="fixed";let o=s?kl(t):t;for(;Ss(o)&&!Gd(o);){const a=ks(o),l=RE(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&Joe.has(r.position)||xm(o)&&!l&&G$(t,o))?i=i.filter(u=>u!==o):r=a,o=kl(o)}return e.set(t,i),i}function eae(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?Mb(e)?[]:Qoe(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=gR(e,u,r);return c.top=lr(d.top,c.top),c.right=Sl(d.right,c.right),c.bottom=Sl(d.bottom,c.bottom),c.left=lr(d.left,c.left),c},gR(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function tae(t){const{width:e,height:n}=V$(t);return{width:e,height:n}}function nae(t,e,n){const i=mo(e),r=vo(e),s=n==="fixed",o=Hc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=lo(0);function c(){l.x=IE(r)}if(i||!i&&!s)if((cf(e)!=="body"||xm(r))&&(a=Rb(e)),i){const p=Hc(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&c();s&&!i&&r&&c();const u=r&&!i&&!s?W$(r,a):lo(0),d=o.left+a.scrollLeft-l.x-u.x,h=o.top+a.scrollTop-l.y-u.y;return{x:d,y:h,width:o.width,height:o.height}}function z1(t){return ks(t).position==="static"}function vR(t,e){if(!mo(t)||ks(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return vo(t)===n&&(n=n.ownerDocument.body),n}function K$(t,e){const n=yr(t);if(Mb(t))return n;if(!mo(t)){let r=kl(t);for(;r&&!Gd(r);){if(Ss(r)&&!z1(r))return r;r=kl(r)}return n}let i=vR(t,e);for(;i&&$oe(i)&&z1(i);)i=vR(i,e);return i&&Gd(i)&&z1(i)&&!RE(i)?n:i||Voe(t)||n}const iae=async function(t){const e=this.getOffsetParent||K$,n=this.getDimensions,i=await n(t.floating);return{reference:nae(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function rae(t){return ks(t).direction==="rtl"}const sae={convertOffsetParentRelativeRectToViewportRelativeRect:Koe,getDocumentElement:vo,getClippingRect:eae,getOffsetParent:K$,getElementRects:iae,getClientRects:qoe,getDimensions:tae,getScale:ud,isElement:Ss,isRTL:rae};function q$(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function oae(t,e){let n=null,i;const r=vo(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=c;if(a||e(),!h||!p)return;const g=Tg(d),m=Tg(r.clientWidth-(u+h)),v=Tg(r.clientHeight-(d+p)),y=Tg(u),w={rootMargin:-g+"px "+-m+"px "+-v+"px "+-y+"px",threshold:lr(0,Sl(1,l))||1};let S=!0;function _(E){const C=E[0].intersectionRatio;if(C!==l){if(!S)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!q$(c,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(_,{...w,root:r.ownerDocument})}catch{n=new IntersectionObserver(_,w)}n.observe(t)}return o(!0),s}function aae(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=OE(t),u=r||s?[...c?Hp(c):[],...Hp(e)]:[];u.forEach(y=>{r&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=c&&a?oae(c,n):null;let h=-1,p=null;o&&(p=new ResizeObserver(y=>{let[x]=y;x&&x.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let g,m=l?Hc(t):null;l&&v();function v(){const y=Hc(t);m&&!q$(m,y)&&n(),m=y,g=requestAnimationFrame(v)}return n(),()=>{var y;u.forEach(x=>{r&&x.removeEventListener("scroll",n),s&&x.removeEventListener("resize",n)}),d==null||d(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const lae=Toe,cae=Ooe,uae=Poe,dae=joe,fae=Moe,yR=Noe,hae=Ioe,pae=(t,e,n)=>{const i=new Map,r={platform:sae,...n},s={...r.platform,_c:i};return Aoe(t,e,{...r,platform:s})};var mae=typeof document<"u",gae=function(){},j0=mae?b.useLayoutEffect:gae;function uy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!uy(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!uy(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function Y$(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function bR(t,e){const n=Y$(t);return Math.round(e*n)/n}function B1(t){const e=b.useRef(t);return j0(()=>{e.current=t}),e}function vae(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,p]=b.useState(i);uy(h,i)||p(i);const[g,m]=b.useState(null),[v,y]=b.useState(null),x=b.useCallback(U=>{U!==E.current&&(E.current=U,m(U))},[]),w=b.useCallback(U=>{U!==C.current&&(C.current=U,y(U))},[]),S=s||g,_=o||v,E=b.useRef(null),C=b.useRef(null),N=b.useRef(u),M=l!=null,I=B1(l),O=B1(r),T=B1(c),H=b.useCallback(()=>{if(!E.current||!C.current)return;const U={placement:e,strategy:n,middleware:h};O.current&&(U.platform=O.current),pae(E.current,C.current,U).then(z=>{const ie={...z,isPositioned:T.current!==!1};L.current&&!uy(N.current,ie)&&(N.current=ie,Ml.flushSync(()=>{d(ie)}))})},[h,e,n,O,T]);j0(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(U=>({...U,isPositioned:!1})))},[c]);const L=b.useRef(!1);j0(()=>(L.current=!0,()=>{L.current=!1}),[]),j0(()=>{if(S&&(E.current=S),_&&(C.current=_),S&&_){if(I.current)return I.current(S,_,H);H()}},[S,_,H,I,M]);const K=b.useMemo(()=>({reference:E,floating:C,setReference:x,setFloating:w}),[x,w]),X=b.useMemo(()=>({reference:S,floating:_}),[S,_]),te=b.useMemo(()=>{const U={position:n,left:0,top:0};if(!X.floating)return U;const z=bR(X.floating,u.x),ie=bR(X.floating,u.y);return a?{...U,transform:"translate("+z+"px, "+ie+"px)",...Y$(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:ie}},[n,a,X.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:H,refs:K,elements:X,floatingStyles:te}),[u,H,K,X,te])}const yae=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?yR({element:i.current,padding:r}).fn(n):{}:i?yR({element:i,padding:r}).fn(n):{}}}},bae=(t,e)=>({...lae(t),options:[t,e]}),xae=(t,e)=>({...cae(t),options:[t,e]}),wae=(t,e)=>({...hae(t),options:[t,e]}),Sae=(t,e)=>({...uae(t),options:[t,e]}),kae=(t,e)=>({...dae(t),options:[t,e]}),_ae=(t,e)=>({...fae(t),options:[t,e]}),Cae=(t,e)=>({...yae(t),options:[t,e]});var Eae="Arrow",X$=b.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return f.jsx(He.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});X$.displayName=Eae;var Aae=X$;function jE(t){const[e,n]=b.useState(void 0);return ei(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var LE="Popper",[J$,uf]=_s(LE),[Nae,Z$]=J$(LE),Q$=t=>{const{__scopePopper:e,children:n}=t,[i,r]=b.useState(null);return f.jsx(Nae,{scope:e,anchor:i,onAnchorChange:r,children:n})};Q$.displayName=LE;var eF="PopperAnchor",tF=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=Z$(eF,n),o=b.useRef(null),a=ut(e,o);return b.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:f.jsx(He.div,{...r,ref:a})});tF.displayName=eF;var DE="PopperContent",[Pae,Mae]=J$(DE),nF=b.forwardRef((t,e)=>{var k,P,j,R,Y,G;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=t,v=Z$(DE,n),[y,x]=b.useState(null),w=ut(e,ne=>x(ne)),[S,_]=b.useState(null),E=jE(S),C=(E==null?void 0:E.width)??0,N=(E==null?void 0:E.height)??0,M=i+(s!=="center"?"-"+s:""),I=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(c)?c:[c],T=O.length>0,H={padding:I,boundary:O.filter(Tae),altBoundary:T},{refs:L,floatingStyles:K,placement:X,isPositioned:te,middlewareData:U}=vae({strategy:"fixed",placement:M,whileElementsMounted:(...ne)=>aae(...ne,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[bae({mainAxis:r+N,alignmentAxis:o}),l&&xae({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?wae():void 0,...H}),l&&Sae({...H}),kae({...H,apply:({elements:ne,rects:Z,availableWidth:Pe,availableHeight:ze})=>{const{width:Ue,height:De}=Z.reference,Je=ne.floating.style;Je.setProperty("--radix-popper-available-width",`${Pe}px`),Je.setProperty("--radix-popper-available-height",`${ze}px`),Je.setProperty("--radix-popper-anchor-width",`${Ue}px`),Je.setProperty("--radix-popper-anchor-height",`${De}px`)}}),S&&Cae({element:S,padding:a}),Oae({arrowWidth:C,arrowHeight:N}),h&&_ae({strategy:"referenceHidden",...H})]}),[z,ie]=sF(X),be=xr(g);ei(()=>{te&&(be==null||be())},[te,be]);const J=(k=U.arrow)==null?void 0:k.x,le=(P=U.arrow)==null?void 0:P.y,F=((j=U.arrow)==null?void 0:j.centerOffset)!==0,[$,V]=b.useState();return ei(()=>{y&&V(window.getComputedStyle(y).zIndex)},[y]),f.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:te?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$,"--radix-popper-transform-origin":[(R=U.transformOrigin)==null?void 0:R.x,(Y=U.transformOrigin)==null?void 0:Y.y].join(" "),...((G=U.hide)==null?void 0:G.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:f.jsx(Pae,{scope:n,placedSide:z,onArrowChange:_,arrowX:J,arrowY:le,shouldHideArrow:F,children:f.jsx(He.div,{"data-side":z,"data-align":ie,...m,ref:w,style:{...m.style,animation:te?void 0:"none"}})})})});nF.displayName=DE;var iF="PopperArrow",Rae={top:"bottom",right:"left",bottom:"top",left:"right"},rF=b.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=Mae(iF,i),o=Rae[s.placedSide];return f.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:f.jsx(Aae,{...r,ref:n,style:{...r.style,display:"block"}})})});rF.displayName=iF;function Tae(t){return t!==null}var Oae=t=>({name:"transformOrigin",options:t,fn(e){var v,y,x;const{placement:n,rects:i,middlewareData:r}=e,o=((v=r.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=sF(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((y=r.arrow)==null?void 0:y.x)??0)+a/2,p=(((x=r.arrow)==null?void 0:x.y)??0)+l/2;let g="",m="";return c==="bottom"?(g=o?d:`${h}px`,m=`${-l}px`):c==="top"?(g=o?d:`${h}px`,m=`${i.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=o?d:`${p}px`):c==="left"&&(g=`${i.floating.width+l}px`,m=o?d:`${p}px`),{data:{x:g,y:m}}}});function sF(t){const[e,n="center"]=t.split("-");return[e,n]}var oF=Q$,Tb=tF,$E=nF,FE=rF,Iae="Portal",wm=b.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=b.useState(!1);ei(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?LG.createPortal(f.jsx(He.div,{...i,ref:e}),o):null});wm.displayName=Iae;function zE(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var aF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),jae="VisuallyHidden",BE=b.forwardRef((t,e)=>f.jsx(He.span,{...t,ref:e,style:{...aF,...t.style}}));BE.displayName=jae;var Lae=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},du=new WeakMap,Og=new WeakMap,Ig={},U1=0,lF=function(t){return t&&(t.host||lF(t.parentNode))},Dae=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=lF(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},$ae=function(t,e,n,i){var r=Dae(e,Array.isArray(t)?t:[t]);Ig[n]||(Ig[n]=new WeakMap);var s=Ig[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var p=h.getAttribute(i),g=p!==null&&p!=="false",m=(du.get(h)||0)+1,v=(s.get(h)||0)+1;du.set(h,m),s.set(h,v),o.push(h),m===1&&g&&Og.set(h,!0),v===1&&h.setAttribute(n,"true"),g||h.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return u(e),a.clear(),U1++,function(){o.forEach(function(d){var h=du.get(d)-1,p=s.get(d)-1;du.set(d,h),s.set(d,p),h||(Og.has(d)||d.removeAttribute(i),Og.delete(d)),p||d.removeAttribute(n)}),U1--,U1||(du=new WeakMap,du=new WeakMap,Og=new WeakMap,Ig={})}},cF=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=Lae(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),$ae(i,r,n,"aria-hidden")):function(){return null}},L0="right-scroll-bar-position",D0="width-before-scroll-bar",Fae="with-scroll-bars-hidden",zae="--removed-body-scroll-bar-size";function V1(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Bae(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var Uae=typeof window<"u"?b.useLayoutEffect:b.useEffect,xR=new WeakMap;function Vae(t,e){var n=Bae(null,function(i){return t.forEach(function(r){return V1(r,i)})});return Uae(function(){var i=xR.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||V1(a,null)}),s.forEach(function(a){r.has(a)||V1(a,o)})}xR.set(n,t)},[t]),n}function Hae(t){return t}function Wae(t,e){e===void 0&&(e=Hae);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function Gae(t){t===void 0&&(t={});var e=Wae(null);return e.options=Ws({async:!0,ssr:!1},t),e}var uF=function(t){var e=t.sideCar,n=uL(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return b.createElement(i,Ws({},n))};uF.isSideCarExport=!0;function Kae(t,e){return t.useMedium(e),uF}var dF=Gae(),H1=function(){},Ob=b.forwardRef(function(t,e){var n=b.useRef(null),i=b.useState({onScrollCapture:H1,onWheelCapture:H1,onTouchMoveCapture:H1}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,p=t.noRelative,g=t.noIsolation,m=t.inert,v=t.allowPinchZoom,y=t.as,x=y===void 0?"div":y,w=t.gapMode,S=uL(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,E=Vae([n,e]),C=Ws(Ws({},S),r);return b.createElement(b.Fragment,null,u&&b.createElement(_,{sideCar:dF,removeScrollBar:c,shards:d,noRelative:p,noIsolation:g,inert:m,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:w}),o?b.cloneElement(b.Children.only(a),Ws(Ws({},C),{ref:E})):b.createElement(x,Ws({},C,{className:l,ref:E}),a))});Ob.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ob.classNames={fullWidth:D0,zeroRight:L0};var qae=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Yae(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=qae();return e&&t.setAttribute("nonce",e),t}function Xae(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Jae(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Zae=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Yae())&&(Xae(e,n),Jae(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Qae=function(){var t=Zae();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},fF=function(){var t=Qae(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},ele={left:0,top:0,right:0,gap:0},W1=function(t){return parseInt(t||"",10)||0},tle=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[W1(n),W1(i),W1(r)]},nle=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return ele;var e=tle(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},ile=fF(),dd="data-scroll-locked",rle=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Fae,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(dd,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(L0,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(D0,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(L0," .").concat(L0,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(D0," .").concat(D0,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(dd,`] {
    `).concat(zae,": ").concat(a,`px;
  }
`)},wR=function(){var t=parseInt(document.body.getAttribute(dd)||"0",10);return isFinite(t)?t:0},sle=function(){b.useEffect(function(){return document.body.setAttribute(dd,(wR()+1).toString()),function(){var t=wR()-1;t<=0?document.body.removeAttribute(dd):document.body.setAttribute(dd,t.toString())}},[])},ole=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;sle();var s=b.useMemo(function(){return nle(r)},[r]);return b.createElement(ile,{styles:rle(s,!e,r,n?"":"!important")})},gk=!1;if(typeof window<"u")try{var jg=Object.defineProperty({},"passive",{get:function(){return gk=!0,!0}});window.addEventListener("test",jg,jg),window.removeEventListener("test",jg,jg)}catch{gk=!1}var fu=gk?{passive:!1}:!1,ale=function(t){return t.tagName==="TEXTAREA"},hF=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!ale(t)&&n[e]==="visible")},lle=function(t){return hF(t,"overflowY")},cle=function(t){return hF(t,"overflowX")},SR=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=pF(t,i);if(r){var s=mF(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},ule=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},dle=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},pF=function(t,e){return t==="v"?lle(e):cle(e)},mF=function(t,e){return t==="v"?ule(e):dle(e)},fle=function(t,e){return t==="h"&&e==="rtl"?-1:1},hle=function(t,e,n,i,r){var s=fle(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,h=0;do{if(!a)break;var p=mF(t,a),g=p[0],m=p[1],v=p[2],y=m-v-s*g;(g||y)&&pF(t,a)&&(d+=y,h+=g);var x=a.parentNode;a=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},Lg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},kR=function(t){return[t.deltaX,t.deltaY]},_R=function(t){return t&&"current"in t?t.current:t},ple=function(t,e){return t[0]===e[0]&&t[1]===e[1]},mle=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},gle=0,hu=[];function vle(t){var e=b.useRef([]),n=b.useRef([0,0]),i=b.useRef(),r=b.useState(gle++)[0],s=b.useState(fF)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var m=VK([t.lockRef.current],(t.shards||[]).map(_R),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var y=Lg(m),x=n.current,w="deltaX"in m?m.deltaX:x[0]-y[0],S="deltaY"in m?m.deltaY:x[1]-y[1],_,E=m.target,C=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in m&&C==="h"&&E.type==="range")return!1;var N=SR(C,E);if(!N)return!0;if(N?_=C:(_=C==="v"?"h":"v",N=SR(C,E)),!N)return!1;if(!i.current&&"changedTouches"in m&&(w||S)&&(i.current=_),!_)return!0;var M=i.current||_;return hle(M,v,m,M==="h"?w:S)},[]),l=b.useCallback(function(m){var v=m;if(!(!hu.length||hu[hu.length-1]!==s)){var y="deltaY"in v?kR(v):Lg(v),x=e.current.filter(function(_){return _.name===v.type&&(_.target===v.target||v.target===_.shadowParent)&&ple(_.delta,y)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var w=(o.current.shards||[]).map(_R).filter(Boolean).filter(function(_){return _.contains(v.target)}),S=w.length>0?a(v,w[0]):!o.current.noIsolation;S&&v.cancelable&&v.preventDefault()}}},[]),c=b.useCallback(function(m,v,y,x){var w={name:m,delta:v,target:y,should:x,shadowParent:yle(y)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(S){return S!==w})},1)},[]),u=b.useCallback(function(m){n.current=Lg(m),i.current=void 0},[]),d=b.useCallback(function(m){c(m.type,kR(m),m.target,a(m,t.lockRef.current))},[]),h=b.useCallback(function(m){c(m.type,Lg(m),m.target,a(m,t.lockRef.current))},[]);b.useEffect(function(){return hu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,fu),document.addEventListener("touchmove",l,fu),document.addEventListener("touchstart",u,fu),function(){hu=hu.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,fu),document.removeEventListener("touchmove",l,fu),document.removeEventListener("touchstart",u,fu)}},[]);var p=t.removeScrollBar,g=t.inert;return b.createElement(b.Fragment,null,g?b.createElement(s,{styles:mle(r)}):null,p?b.createElement(ole,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function yle(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const ble=Kae(dF,vle);var Ib=b.forwardRef(function(t,e){return b.createElement(Ob,Ws({},t,{ref:e,sideCar:ble}))});Ib.classNames=Ob.classNames;var xle=[" ","Enter","ArrowUp","ArrowDown"],wle=[" ","Enter"],Wc="Select",[jb,Lb,Sle]=im(Wc),[df,R0e]=_s(Wc,[Sle,uf]),Db=uf(),[kle,Ol]=df(Wc),[_le,Cle]=df(Wc),gF=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:p,form:g}=t,m=Db(e),[v,y]=b.useState(null),[x,w]=b.useState(null),[S,_]=b.useState(!1),E=Xy(c),[C,N]=dl({prop:i,defaultProp:r??!1,onChange:s,caller:Wc}),[M,I]=dl({prop:o,defaultProp:a,onChange:l,caller:Wc}),O=b.useRef(null),T=v?g||!!v.closest("form"):!0,[H,L]=b.useState(new Set),K=Array.from(H).map(X=>X.props.value).join(";");return f.jsx(oF,{...m,children:f.jsxs(kle,{required:p,scope:e,trigger:v,onTriggerChange:y,valueNode:x,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:_,contentId:tf(),value:M,onValueChange:I,open:C,onOpenChange:N,dir:E,triggerPointerDownPosRef:O,disabled:h,children:[f.jsx(jb.Provider,{scope:e,children:f.jsx(_le,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(X=>{L(te=>new Set(te).add(X))},[]),onNativeOptionRemove:b.useCallback(X=>{L(te=>{const U=new Set(te);return U.delete(X),U})},[]),children:n})}),T?f.jsxs(jF,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:M,onChange:X=>I(X.target.value),disabled:h,form:g,children:[M===void 0?f.jsx("option",{value:""}):null,Array.from(H)]},K):null]})})};gF.displayName=Wc;var vF="SelectTrigger",yF=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=Db(n),o=Ol(vF,n),a=o.disabled||i,l=ut(e,o.onTriggerChange),c=Lb(n),u=b.useRef("touch"),[d,h,p]=DF(m=>{const v=c().filter(w=>!w.disabled),y=v.find(w=>w.value===o.value),x=$F(v,m,y);x!==void 0&&o.onValueChange(x.value)}),g=m=>{a||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return f.jsx(Tb,{asChild:!0,...s,children:f.jsx(He.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":LF(o.value)?"":void 0,...r,ref:l,onClick:ye(r.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:ye(r.onPointerDown,m=>{u.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:ye(r.onKeyDown,m=>{const v=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&h(m.key),!(v&&m.key===" ")&&xle.includes(m.key)&&(g(),m.preventDefault())})})})});yF.displayName=vF;var bF="SelectValue",xF=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=Ol(bF,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=ut(e,l.onValueNodeChange);return ei(()=>{c(u)},[c,u]),f.jsx(He.span,{...a,ref:d,style:{pointerEvents:"none"},children:LF(l.value)?f.jsx(f.Fragment,{children:o}):s})});xF.displayName=bF;var Ele="SelectIcon",wF=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return f.jsx(He.span,{"aria-hidden":!0,...r,ref:e,children:i||""})});wF.displayName=Ele;var Ale="SelectPortal",SF=t=>f.jsx(wm,{asChild:!0,...t});SF.displayName=Ale;var Gc="SelectContent",kF=b.forwardRef((t,e)=>{const n=Ol(Gc,t.__scopeSelect),[i,r]=b.useState();if(ei(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?Ml.createPortal(f.jsx(_F,{scope:t.__scopeSelect,children:f.jsx(jb.Slot,{scope:t.__scopeSelect,children:f.jsx("div",{children:t.children})})}),s):null}return f.jsx(CF,{...t,ref:e})});kF.displayName=Gc;var ns=10,[_F,Il]=df(Gc),Nle="SelectContentImpl",Ple=Td("SelectContent.RemoveScroll"),CF=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v,...y}=t,x=Ol(Gc,n),[w,S]=b.useState(null),[_,E]=b.useState(null),C=ut(e,k=>S(k)),[N,M]=b.useState(null),[I,O]=b.useState(null),T=Lb(n),[H,L]=b.useState(!1),K=b.useRef(!1);b.useEffect(()=>{if(w)return cF(w)},[w]),AE();const X=b.useCallback(k=>{const[P,...j]=T().map(G=>G.ref.current),[R]=j.slice(-1),Y=document.activeElement;for(const G of k)if(G===Y||(G==null||G.scrollIntoView({block:"nearest"}),G===P&&_&&(_.scrollTop=0),G===R&&_&&(_.scrollTop=_.scrollHeight),G==null||G.focus(),document.activeElement!==Y))return},[T,_]),te=b.useCallback(()=>X([N,w]),[X,N,w]);b.useEffect(()=>{H&&te()},[H,te]);const{onOpenChange:U,triggerPointerDownPosRef:z}=x;b.useEffect(()=>{if(w){let k={x:0,y:0};const P=R=>{var Y,G;k={x:Math.abs(Math.round(R.pageX)-(((Y=z.current)==null?void 0:Y.x)??0)),y:Math.abs(Math.round(R.pageY)-(((G=z.current)==null?void 0:G.y)??0))}},j=R=>{k.x<=10&&k.y<=10?R.preventDefault():w.contains(R.target)||U(!1),document.removeEventListener("pointermove",P),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",j,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",j,{capture:!0})}}},[w,U,z]),b.useEffect(()=>{const k=()=>U(!1);return window.addEventListener("blur",k),window.addEventListener("resize",k),()=>{window.removeEventListener("blur",k),window.removeEventListener("resize",k)}},[U]);const[ie,be]=DF(k=>{const P=T().filter(Y=>!Y.disabled),j=P.find(Y=>Y.ref.current===document.activeElement),R=$F(P,k,j);R&&setTimeout(()=>R.ref.current.focus())}),J=b.useCallback((k,P,j)=>{const R=!K.current&&!j;(x.value!==void 0&&x.value===P||R)&&(M(k),R&&(K.current=!0))},[x.value]),le=b.useCallback(()=>w==null?void 0:w.focus(),[w]),F=b.useCallback((k,P,j)=>{const R=!K.current&&!j;(x.value!==void 0&&x.value===P||R)&&O(k)},[x.value]),$=i==="popper"?vk:EF,V=$===vk?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v}:{};return f.jsx(_F,{scope:n,content:w,viewport:_,onViewportChange:E,itemRefCallback:J,selectedItem:N,onItemLeave:le,itemTextRefCallback:F,focusSelectedItem:te,selectedItemText:I,position:i,isPositioned:H,searchRef:ie,children:f.jsx(Ib,{as:Ple,allowPinchZoom:!0,children:f.jsx(Nb,{asChild:!0,trapped:x.open,onMountAutoFocus:k=>{k.preventDefault()},onUnmountAutoFocus:ye(r,k=>{var P;(P=x.trigger)==null||P.focus({preventScroll:!0}),k.preventDefault()}),children:f.jsx(bm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:k=>k.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:f.jsx($,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:k=>k.preventDefault(),...y,...V,onPlaced:()=>L(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ye(y.onKeyDown,k=>{const P=k.ctrlKey||k.altKey||k.metaKey;if(k.key==="Tab"&&k.preventDefault(),!P&&k.key.length===1&&be(k.key),["ArrowUp","ArrowDown","Home","End"].includes(k.key)){let R=T().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(k.key)&&(R=R.slice().reverse()),["ArrowUp","ArrowDown"].includes(k.key)){const Y=k.target,G=R.indexOf(Y);R=R.slice(G+1)}setTimeout(()=>X(R)),k.preventDefault()}})})})})})})});CF.displayName=Nle;var Mle="SelectItemAlignedPosition",EF=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=Ol(Gc,n),o=Il(Gc,n),[a,l]=b.useState(null),[c,u]=b.useState(null),d=ut(e,C=>u(C)),h=Lb(n),p=b.useRef(!1),g=b.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:y,focusSelectedItem:x}=o,w=b.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&v&&y){const C=s.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),M=s.valueNode.getBoundingClientRect(),I=y.getBoundingClientRect();if(s.dir!=="rtl"){const Y=I.left-N.left,G=M.left-Y,ne=C.left-G,Z=C.width+ne,Pe=Math.max(Z,N.width),ze=window.innerWidth-ns,Ue=oy(G,[ns,Math.max(ns,ze-Pe)]);a.style.minWidth=Z+"px",a.style.left=Ue+"px"}else{const Y=N.right-I.right,G=window.innerWidth-M.right-Y,ne=window.innerWidth-C.right-G,Z=C.width+ne,Pe=Math.max(Z,N.width),ze=window.innerWidth-ns,Ue=oy(G,[ns,Math.max(ns,ze-Pe)]);a.style.minWidth=Z+"px",a.style.right=Ue+"px"}const O=h(),T=window.innerHeight-ns*2,H=m.scrollHeight,L=window.getComputedStyle(c),K=parseInt(L.borderTopWidth,10),X=parseInt(L.paddingTop,10),te=parseInt(L.borderBottomWidth,10),U=parseInt(L.paddingBottom,10),z=K+X+H+U+te,ie=Math.min(v.offsetHeight*5,z),be=window.getComputedStyle(m),J=parseInt(be.paddingTop,10),le=parseInt(be.paddingBottom,10),F=C.top+C.height/2-ns,$=T-F,V=v.offsetHeight/2,k=v.offsetTop+V,P=K+X+k,j=z-P;if(P<=F){const Y=O.length>0&&v===O[O.length-1].ref.current;a.style.bottom="0px";const G=c.clientHeight-m.offsetTop-m.offsetHeight,ne=Math.max($,V+(Y?le:0)+G+te),Z=P+ne;a.style.height=Z+"px"}else{const Y=O.length>0&&v===O[0].ref.current;a.style.top="0px";const ne=Math.max(F,K+m.offsetTop+(Y?J:0)+V)+j;a.style.height=ne+"px",m.scrollTop=P-F+m.offsetTop}a.style.margin=`${ns}px 0`,a.style.minHeight=ie+"px",a.style.maxHeight=T+"px",i==null||i(),requestAnimationFrame(()=>p.current=!0)}},[h,s.trigger,s.valueNode,a,c,m,v,y,s.dir,i]);ei(()=>w(),[w]);const[S,_]=b.useState();ei(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const E=b.useCallback(C=>{C&&g.current===!0&&(w(),x==null||x(),g.current=!1)},[w,x]);return f.jsx(Tle,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:f.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:f.jsx(He.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});EF.displayName=Mle;var Rle="SelectPopperPosition",vk=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=ns,...s}=t,o=Db(n);return f.jsx($E,{...o,...s,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vk.displayName=Rle;var[Tle,UE]=df(Gc,{}),yk="SelectViewport",AF=b.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,s=Il(yk,n),o=UE(yk,n),a=ut(e,s.onViewportChange),l=b.useRef(0);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),f.jsx(jb.Slot,{scope:n,children:f.jsx(He.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:ye(r.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const g=window.innerHeight-ns*2,m=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),y=Math.max(m,v);if(y<g){const x=y+p,w=Math.min(g,x),S=x-w;d.style.height=w+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});AF.displayName=yk;var NF="SelectGroup",[Ole,Ile]=df(NF),jle=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=tf();return f.jsx(Ole,{scope:n,id:r,children:f.jsx(He.div,{role:"group","aria-labelledby":r,...i,ref:e})})});jle.displayName=NF;var PF="SelectLabel",Lle=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Ile(PF,n);return f.jsx(He.div,{id:r.id,...i,ref:e})});Lle.displayName=PF;var dy="SelectItem",[Dle,MF]=df(dy),RF=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=Ol(dy,n),l=Il(dy,n),c=a.value===i,[u,d]=b.useState(s??""),[h,p]=b.useState(!1),g=ut(e,x=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,x,i,r)}),m=tf(),v=b.useRef("touch"),y=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.jsx(Dle,{scope:n,value:i,disabled:r,textId:m,isSelected:c,onItemTextChange:b.useCallback(x=>{d(w=>w||((x==null?void 0:x.textContent)??"").trim())},[]),children:f.jsx(jb.ItemSlot,{scope:n,value:i,disabled:r,textValue:u,children:f.jsx(He.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:g,onFocus:ye(o.onFocus,()=>p(!0)),onBlur:ye(o.onBlur,()=>p(!1)),onClick:ye(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:ye(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:ye(o.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:ye(o.onPointerMove,x=>{var w;v.current=x.pointerType,r?(w=l.onItemLeave)==null||w.call(l):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ye(o.onPointerLeave,x=>{var w;x.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:ye(o.onKeyDown,x=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&x.key===" "||(wle.includes(x.key)&&y(),x.key===" "&&x.preventDefault())})})})})});RF.displayName=dy;var fh="SelectItemText",TF=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=Ol(fh,n),a=Il(fh,n),l=MF(fh,n),c=Cle(fh,n),[u,d]=b.useState(null),h=ut(e,y=>d(y),l.onItemTextChange,y=>{var x;return(x=a.itemTextRefCallback)==null?void 0:x.call(a,y,l.value,l.disabled)}),p=u==null?void 0:u.textContent,g=b.useMemo(()=>f.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=c;return ei(()=>(m(g),()=>v(g)),[m,v,g]),f.jsxs(f.Fragment,{children:[f.jsx(He.span,{id:l.textId,...s,ref:h}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ml.createPortal(s.children,o.valueNode):null]})});TF.displayName=fh;var OF="SelectItemIndicator",$le=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return MF(OF,n).isSelected?f.jsx(He.span,{"aria-hidden":!0,...i,ref:e}):null});$le.displayName=OF;var bk="SelectScrollUpButton",Fle=b.forwardRef((t,e)=>{const n=Il(bk,t.__scopeSelect),i=UE(bk,t.__scopeSelect),[r,s]=b.useState(!1),o=ut(e,i.onScrollButtonChange);return ei(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?f.jsx(IF,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});Fle.displayName=bk;var xk="SelectScrollDownButton",zle=b.forwardRef((t,e)=>{const n=Il(xk,t.__scopeSelect),i=UE(xk,t.__scopeSelect),[r,s]=b.useState(!1),o=ut(e,i.onScrollButtonChange);return ei(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?f.jsx(IF,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});zle.displayName=xk;var IF=b.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,s=Il("SelectScrollButton",n),o=b.useRef(null),a=Lb(n),l=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>l(),[l]),ei(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),f.jsx(He.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:ye(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:ye(r.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:ye(r.onPointerLeave,()=>{l()})})}),Ble="SelectSeparator",Ule=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return f.jsx(He.div,{"aria-hidden":!0,...i,ref:e})});Ule.displayName=Ble;var wk="SelectArrow",Vle=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Db(n),s=Ol(wk,n),o=Il(wk,n);return s.open&&o.position==="popper"?f.jsx(FE,{...r,...i,ref:e}):null});Vle.displayName=wk;var Hle="SelectBubbleInput",jF=b.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const r=b.useRef(null),s=ut(i,r),o=zE(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),f.jsx(He.select,{...n,style:{...aF,...n.style},ref:s,defaultValue:e})});jF.displayName=Hle;function LF(t){return t===""||t===void 0}function DF(t){const e=xr(t),n=b.useRef(""),i=b.useRef(0),r=b.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=b.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function $F(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Wle(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Wle(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Gle=gF,FF=yF,Kle=xF,qle=wF,Yle=SF,zF=kF,Xle=AF,BF=RF,Jle=TF;const Df=Gle,$f=Kle,Su=b.forwardRef(({className:t,children:e,...n},i)=>f.jsxs(FF,{ref:i,className:Q("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,f.jsx(qle,{asChild:!0,children:f.jsx("span",{className:"icon-[lucide--chevron-down] size-4 opacity-50"})})]}));Su.displayName=FF.displayName;const ku=b.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>f.jsx(Yle,{children:f.jsx(zF,{ref:r,className:Q("relative z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:f.jsx(Xle,{className:"p-1",children:e})})}));ku.displayName=zF.displayName;const Ti=b.forwardRef(({className:t,children:e,...n},i)=>f.jsx(BF,{ref:i,className:Q("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:f.jsx(Jle,{children:e})}));Ti.displayName=BF.displayName;var UF=["PageUp","PageDown"],VF=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],HF={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ff="Slider",[Sk,Zle,Qle]=im(ff),[WF,T0e]=_s(ff,[Qle]),[ece,$b]=WF(ff),GF=b.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[i],value:u,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:p=!1,form:g,...m}=t,v=b.useRef(new Set),y=b.useRef(0),w=o==="horizontal"?tce:nce,[S=[],_]=dl({prop:u,defaultProp:c,onChange:O=>{var H;(H=[...v.current][y.current])==null||H.focus(),d(O)}}),E=b.useRef(S);function C(O){const T=ace(S,O);I(O,T)}function N(O){I(O,y.current)}function M(){const O=E.current[y.current];S[y.current]!==O&&h(S)}function I(O,T,{commit:H}={commit:!1}){const L=dce(s),K=fce(Math.round((O-i)/s)*s+i,L),X=oy(K,[i,r]);_((te=[])=>{const U=sce(te,X,T);if(uce(U,l*s)){y.current=U.indexOf(X);const z=String(U)!==String(te);return z&&H&&h(U),z?U:te}else return te})}return f.jsx(ece,{scope:t.__scopeSlider,name:n,disabled:a,min:i,max:r,valueIndexToChangeRef:y,thumbs:v.current,values:S,orientation:o,form:g,children:f.jsx(Sk.Provider,{scope:t.__scopeSlider,children:f.jsx(Sk.Slot,{scope:t.__scopeSlider,children:f.jsx(w,{"aria-disabled":a,"data-disabled":a?"":void 0,...m,ref:e,onPointerDown:ye(m.onPointerDown,()=>{a||(E.current=S)}),min:i,max:r,inverted:p,onSlideStart:a?void 0:C,onSlideMove:a?void 0:N,onSlideEnd:a?void 0:M,onHomeKeyDown:()=>!a&&I(i,0,{commit:!0}),onEndKeyDown:()=>!a&&I(r,S.length-1,{commit:!0}),onStepKeyDown:({event:O,direction:T})=>{if(!a){const K=UF.includes(O.key)||O.shiftKey&&VF.includes(O.key)?10:1,X=y.current,te=S[X],U=s*K*T;I(te+U,X,{commit:!0})}}})})})})});GF.displayName=ff;var[KF,qF]=WF(ff,{startEdge:"left",endEdge:"right",size:"width",direction:1}),tce=b.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,h]=b.useState(null),p=ut(e,w=>h(w)),g=b.useRef(void 0),m=Xy(r),v=m==="ltr",y=v&&!s||!v&&s;function x(w){const S=g.current||d.getBoundingClientRect(),_=[0,S.width],C=VE(_,y?[n,i]:[i,n]);return g.current=S,C(w-S.left)}return f.jsx(KF,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:f.jsx(YF,{dir:m,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const S=x(w.clientX);o==null||o(S)},onSlideMove:w=>{const S=x(w.clientX);a==null||a(S)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:w=>{const _=HF[y?"from-left":"from-right"].includes(w.key);c==null||c({event:w,direction:_?-1:1})}})})}),nce=b.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=b.useRef(null),d=ut(e,u),h=b.useRef(void 0),p=!r;function g(m){const v=h.current||u.current.getBoundingClientRect(),y=[0,v.height],w=VE(y,p?[i,n]:[n,i]);return h.current=v,w(m-v.top)}return f.jsx(KF,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:f.jsx(YF,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const v=g(m.clientY);s==null||s(v)},onSlideMove:m=>{const v=g(m.clientY);o==null||o(v)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:m=>{const y=HF[p?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:y?-1:1})}})})}),YF=b.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=$b(ff,n);return f.jsx(He.span,{...c,ref:e,onKeyDown:ye(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):UF.concat(VF).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ye(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(h)?h.focus():i(d)}),onPointerMove:ye(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:ye(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})})}),XF="SliderTrack",JF=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=$b(XF,n);return f.jsx(He.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});JF.displayName=XF;var kk="SliderRange",ZF=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=$b(kk,n),s=qF(kk,n),o=b.useRef(null),a=ut(e,o),l=r.values.length,c=r.values.map(h=>t9(h,r.min,r.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return f.jsx(He.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});ZF.displayName=kk;var _k="SliderThumb",QF=b.forwardRef((t,e)=>{const n=Zle(t.__scopeSlider),[i,r]=b.useState(null),s=ut(e,a=>r(a)),o=b.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return f.jsx(ice,{...t,ref:s,index:o})}),ice=b.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,name:r,...s}=t,o=$b(_k,n),a=qF(_k,n),[l,c]=b.useState(null),u=ut(e,x=>c(x)),d=l?o.form||!!l.closest("form"):!0,h=jE(l),p=o.values[i],g=p===void 0?0:t9(p,o.min,o.max),m=oce(i,o.values.length),v=h==null?void 0:h[a.size],y=v?lce(v,g,a.direction):0;return b.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),f.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${g}% + ${y}px)`},children:[f.jsx(Sk.ItemSlot,{scope:t.__scopeSlider,children:f.jsx(He.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:ye(t.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),d&&f.jsx(e9,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},i)]})});QF.displayName=_k;var rce="RadioBubbleInput",e9=b.forwardRef(({__scopeSlider:t,value:e,...n},i)=>{const r=b.useRef(null),s=ut(r,i),o=zE(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),f.jsx(He.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});e9.displayName=rce;function sce(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function t9(t,e,n){const s=100/(n-e)*(t-e);return oy(s,[0,100])}function oce(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function ace(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function lce(t,e,n){const i=t/2,s=VE([0,50],[0,i]);return(i-s(e)*n)*n}function cce(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function uce(t,e){if(e>0){const n=cce(t);return Math.min(...n)>=e}return!0}function VE(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function dce(t){return(String(t).split(".")[1]||"").length}function fce(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var n9=GF,hce=JF,pce=ZF,mce=QF;const lc=b.forwardRef(({className:t,...e},n)=>f.jsxs(n9,{ref:n,className:Q("relative flex touch-none select-none items-center",t),...e,children:[f.jsx(hce,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:f.jsx(pce,{className:"absolute h-full bg-mantis-400"})}),f.jsx(mce,{className:"block size-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));lc.displayName=n9.displayName;var Fb="Switch",[gce,O0e]=_s(Fb),[vce,yce]=gce(Fb),i9=b.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[h,p]=b.useState(null),g=ut(e,w=>p(w)),m=b.useRef(!1),v=h?u||!!h.closest("form"):!0,[y,x]=dl({prop:r,defaultProp:s??!1,onChange:c,caller:Fb});return f.jsxs(vce,{scope:n,checked:y,disabled:a,children:[f.jsx(He.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":a9(y),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:g,onClick:ye(t.onClick,w=>{x(S=>!S),v&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})}),v&&f.jsx(o9,{control:h,bubbles:!m.current,name:i,value:l,checked:y,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});i9.displayName=Fb;var r9="SwitchThumb",s9=b.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=yce(r9,n);return f.jsx(He.span,{"data-state":a9(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})});s9.displayName=r9;var bce="SwitchBubbleInput",o9=b.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:i=!0,...r},s)=>{const o=b.useRef(null),a=ut(o,s),l=zE(n),c=jE(e);return b.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&p){const g=new Event("click",{bubbles:i});p.call(u,n),u.dispatchEvent(g)}},[l,n,i]),f.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:a,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});o9.displayName=bce;function a9(t){return t?"checked":"unchecked"}var l9=i9,xce=s9;const ka=b.forwardRef(({className:t,...e},n)=>f.jsx(l9,{className:Q("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:f.jsx(xce,{className:Q("pointer-events-none block size-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ka.displayName=l9.displayName;const zb=ue(!1);function wce(t){return(1e3/t).toFixed(1)}function c9({className:t}){const e=Ht(),[n,i]=rf(),{status:r}=jn();return f.jsxs("div",{className:Q("overflow-auto scrollbar-stone-700",t),children:[f.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[f.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),f.jsxs(Ai,{children:[f.jsxs(Ni,{children:[f.jsxs(Pi,{children:[f.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),f.jsx(pu,{children:e("settings.animations.description")})]}),f.jsx(ka,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&oE()}})]}),f.jsxs(Ai,{children:[f.jsx(Ni,{children:f.jsxs(Pi,{children:[f.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),f.jsx(lc,{className:"w-44",...CR({value:n.executionUnit,onValueChange:s=>i(o=>({...o,executionUnit:s})),min:500,max:1})})]}),f.jsx("hr",{className:"border-stone-600"}),f.jsxs(Ai,{children:[f.jsx(Ni,{children:f.jsx(Pi,{children:e("settings.instructionCycle.label")})}),f.jsx(ka,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>i(o=>({...o,showInstructionCycle:s}))})]}),f.jsxs(Ai,{children:[f.jsx(Ni,{children:f.jsx(Pi,{children:e("settings.statsCPU.label")})}),f.jsx(ka,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>i(o=>({...o,showStatsCPU:s}))})]}),f.jsxs(Ai,{children:[f.jsxs(Ni,{children:[f.jsxs(Pi,{children:[f.jsx("span",{className:"icon-[lucide--cpu] size-6"}),"Velocidad CPU (Hz)"]}),f.jsx(pu,{children:"Velocidad del procesador. Determina el tiempo de ciclo de la CPU."})]}),f.jsxs(Df,{value:n.cpuSpeed,onValueChange:s=>i(o=>({...o,cpuSpeed:s})),children:[f.jsx(Su,{className:"w-32",children:f.jsx($f,{})}),f.jsxs(ku,{children:[f.jsx(Ti,{value:"1",title:"1 Hz = 1 segundo por ciclo - Muy lenta",children:"1 Hz (1.0s)"}),f.jsx(Ti,{value:"2",title:"2 Hz = 0.5 segundos por ciclo - Lenta",children:"2 Hz (0.5s)"}),f.jsx(Ti,{value:"4",title:"4 Hz = 0.25 segundos por ciclo - Normal",children:"4 Hz (0.25s)"}),f.jsx(Ti,{value:"10",title:"10 Hz = 0.1 segundos por ciclo - Rpida",children:"10 Hz (0.1s)"})]})]})]}),f.jsxs(Ai,{children:[f.jsxs(Ni,{children:[f.jsxs(Pi,{children:[f.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),f.jsx(pu,{children:e("settings.flags.description")})]}),f.jsxs(Df,{value:n.flagsVisibility,onValueChange:s=>i(o=>({...o,flagsVisibility:s})),children:[f.jsx(Su,{className:"w-32",children:f.jsx($f,{})}),f.jsxs(ku,{children:[f.jsx(Ti,{value:"CF_ZF",children:"C Z"}),f.jsx(Ti,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),f.jsx("hr",{className:"border-stone-600"}),f.jsx(Ai,{children:f.jsxs(Ni,{children:[f.jsxs(Pi,{children:[f.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),f.jsx(pu,{children:e("settings.devices.description")})]})}),f.jsxs(Ai,{children:[f.jsx(Ni,{children:f.jsx(Pi,{children:e("settings.devices.keyboard-and-screen")})}),f.jsx(ka,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),f.jsxs(Ai,{children:[f.jsxs(Ni,{children:[f.jsx(Pi,{children:e("settings.devices.pic.label")}),f.jsx(pu,{children:e("settings.devices.pic.description")})]}),f.jsx(ka,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,pic:s}}))})]}),f.jsxs(Ai,{children:[f.jsx(Ni,{children:f.jsx(Pi,{children:e("settings.devices.pio.label")})}),f.jsxs(Df,{value:n.devices.pio??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[f.jsx(Su,{className:"w-52 min-w-[theme(width.52)]",children:f.jsx($f,{})}),f.jsx(ku,{children:EJ.map(s=>f.jsx(Ti,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),f.jsxs(Ai,{children:[f.jsx(Ni,{children:f.jsx(Pi,{children:e("settings.devices.handshake.label")})}),f.jsxs(Df,{value:n.devices.handshake??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:r.type!=="stopped",children:[f.jsx(Su,{className:"w-52 min-w-[theme(width.52)]",children:f.jsx($f,{})}),f.jsx(ku,{children:AJ.map(s=>f.jsx(Ti,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),(n.devices.pio==="printer"||n.devices.handshake==="printer")&&f.jsxs(Ai,{children:[f.jsx(Ni,{children:f.jsxs(Pi,{children:[f.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),f.jsx(lc,{className:"w-44",...CR({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),n.devices.pic&&f.jsxs(Ai,{children:[f.jsx(Ni,{children:f.jsxs(Pi,{children:[f.jsx("span",{className:"icon-[lucide--timer] size-6"}),"Frecuencia del Timer"]})}),f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsxs(Df,{value:n.clockSpeed.toString(),onValueChange:s=>i(o=>({...o,clockSpeed:parseInt(s)})),children:[f.jsx(Su,{className:"w-40",children:f.jsx($f,{})}),f.jsxs(ku,{children:[f.jsx(Ti,{value:"100",title:"Timer muy frecuente - Interrupciones cada 0.1 segundos",children:f.jsxs("div",{className:"flex w-full items-center justify-between",children:[f.jsx("span",{children:"Muy Frecuente"}),f.jsx("span",{className:"text-xs text-stone-400",children:"0.1s"})]})}),f.jsx(Ti,{value:"400",title:"Timer frecuente - Interrupciones cada 0.4 segundos",children:f.jsxs("div",{className:"flex w-full items-center justify-between",children:[f.jsx("span",{children:"Frecuente"}),f.jsx("span",{className:"text-xs text-stone-400",children:"0.4s"})]})}),f.jsx(Ti,{value:"600",title:"Timer normal - Interrupciones cada 0.6 segundos",children:f.jsxs("div",{className:"flex w-full items-center justify-between",children:[f.jsx("span",{children:"Normal"}),f.jsx("span",{className:"text-xs text-stone-400",children:"0.6s"})]})}),f.jsx(Ti,{value:"800",title:"Timer lento - Interrupciones cada 0.8 segundos",children:f.jsxs("div",{className:"flex w-full items-center justify-between",children:[f.jsx("span",{children:"Lento"}),f.jsx("span",{className:"text-xs text-stone-400",children:"0.8s"})]})}),f.jsx(Ti,{value:"1000",title:"Timer muy lento - Interrupciones cada 1 segundo",children:f.jsxs("div",{className:"flex w-full items-center justify-between",children:[f.jsx("span",{children:"Muy Lento"}),f.jsx("span",{className:"text-xs text-stone-400",children:"1.0s"})]})})]})]}),f.jsxs("div",{className:"flex items-center gap-1 text-xs text-stone-400",children:[f.jsx("span",{className:"icon-[lucide--info] size-4"}),f.jsxs("span",{children:["Frecuencia: ",wce(n.clockSpeed)," Hz"]})]})]})]}),f.jsx("hr",{className:"border-stone-600"}),f.jsxs(Ai,{children:[f.jsxs(Ni,{children:[f.jsxs(Pi,{children:[f.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),f.jsxs(pu,{children:[e("settings.filters.description"),f.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:xu.filterBightness,filterContrast:xu.filterContrast,filterInvert:xu.filterInvert,filterSaturation:xu.filterSaturation})),children:e("settings.filters.revert")})]})]}),f.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[f.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),f.jsx(lc,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),f.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),f.jsx(lc,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),f.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),f.jsx(ka,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),f.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),f.jsx(lc,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),f.jsx("hr",{className:"border-stone-600"}),f.jsx("div",{className:"flex justify-end p-4",children:f.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...xu,language:s.language,devices:s.devices})),children:[f.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function Ai({children:t}){return f.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Ni({children:t}){return f.jsx("div",{className:"grow",children:t})}function Pi({children:t}){return f.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function pu({children:t}){return f.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function CR({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}function Sce(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await bD(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:e}).then(d=>{s?s("/VonSim8/sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const HE=()=>{const{addNotification:t}=EE(),[e,n]=b.useState({available:!1,updating:!1,lastUpdate:null}),i=b.useRef(null);return b.useEffect(()=>{const r=Sce({onNeedRefresh(){n(l=>({...l,available:!0})),t({type:"info",title:"Nueva versin disponible",message:"Hay una nueva versin de VonSim8 disponible. Haz clic en 'Actualizar' para aplicar los cambios."}),typeof window<"u"&&window.VonSimAddNotification&&window.VonSimAddNotification({type:"info",title:"Actualizacin disponible",message:"Una nueva versin est lista para instalar."})},onOfflineReady(){t({type:"success",title:"Modo offline disponible",message:"VonSim8 ahora est disponible para uso offline."})},onRegistered(l){console.log("Service Worker registrado:",l),l.waiting&&n(c=>({...c,available:!0}))},onRegisterError(l){console.error("Error al registrar Service Worker:",l),t({type:"error",title:"Error de actualizacin",message:"No se pudo configurar la actualizacin automtica. Algunas funciones pueden no estar disponibles."})}});i.current=r;const s=async()=>{if(i.current){n(l=>({...l,updating:!0}));try{i.current(),n(l=>({...l,available:!1,updating:!1,lastUpdate:new Date})),t({type:"success",title:"Actualizacin aplicada",message:"La nueva versin se ha aplicado correctamente."})}catch(l){console.error("Error al actualizar:",l),n(c=>({...c,updating:!1})),t({type:"error",title:"Error al actualizar",message:"No se pudo aplicar la actualizacin. Intntalo de nuevo."})}}};window.updateVonSim8=s;const o=()=>{i.current&&i.current()};window.checkVonSim8Updates=o;const a=setInterval(o,30*60*1e3);return()=>{delete window.updateVonSim8,delete window.checkVonSim8Updates,clearInterval(a)}},[t]),{updateInfo:e,updateApp:()=>{i.current&&i.current()},checkForUpdates:()=>{i.current&&i.current()}}},ER="vonsim8-commit-hash",kce=5*60*1e3,WE=()=>{const{addNotification:t}=EE(),[e,n]=b.useState({currentHash:"f788950",lastKnownHash:null,hasUpdate:!1,lastCheck:null}),i=b.useCallback(()=>{const o=localStorage.getItem(ER),a="f788950";return n(l=>({...l,currentHash:a,lastKnownHash:o,lastCheck:new Date})),o&&o!==a?(n(l=>({...l,hasUpdate:!0})),t({type:"info",title:"Nueva versin detectada",message:`Se ha detectado una nueva versin de VonSim8 (${a.substring(0,7)}). Recarga la pgina para actualizar.`}),!0):!1},[t]),r=b.useCallback(()=>{localStorage.setItem(ER,"f788950"),window.location.reload()},[]),s=b.useCallback(()=>{n(o=>({...o,hasUpdate:!1}))},[]);return b.useEffect(()=>{i()},[i]),b.useEffect(()=>{const o=setInterval(i,kce);return()=>clearInterval(o)},[i]),b.useEffect(()=>{const o=()=>{document.hidden||i()};return document.addEventListener("visibilitychange",o),()=>{document.removeEventListener("visibilitychange",o)}},[i]),b.useEffect(()=>{const o=()=>{i()};return window.addEventListener("online",o),()=>{window.removeEventListener("online",o)}},[i]),{versionInfo:e,checkForVersionUpdate:i,updateToNewVersion:r,dismissUpdate:s}},G1={autoCheck:!0,showBanner:!0,showNotifications:!0,checkInterval:30},AR="vonsim8-update-settings",u9=b.memo(()=>{const[t,e]=b.useState(G1),[n,i]=b.useState(!1),{updateInfo:r,checkForUpdates:s}=HE(),{versionInfo:o,checkForVersionUpdate:a}=WE();b.useEffect(()=>{const d=localStorage.getItem(AR);if(d)try{const h=JSON.parse(d);e({...G1,...h})}catch{e(G1)}},[]),b.useEffect(()=>{localStorage.setItem(AR,JSON.stringify(t))},[t]);const l=b.useCallback((d,h)=>{e(p=>({...p,[d]:h}))},[]),c=b.useCallback(()=>{s(),a()},[s,a]),u=b.useCallback(()=>{i(d=>!d)},[]);return n?f.jsxs("div",{className:"relative",children:[f.jsx(lt,{onClick:u,variant:"ghost",size:"sm",className:"text-stone-400 hover:text-white",title:"Configuracin de actualizaciones",children:f.jsx(Oe,{icon:z3,className:"size-4"})}),f.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[f.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[f.jsx("h3",{className:"text-lg font-semibold text-white",children:"Configuracin de actualizaciones"}),f.jsx(lt,{onClick:u,variant:"ghost",size:"sm",className:"text-stone-400 hover:text-white",children:""})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"rounded-lg border border-stone-600 p-3",children:[f.jsx("h4",{className:"mb-2 font-medium text-white",children:"Estado actual"}),f.jsxs("div",{className:"space-y-1 text-sm",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-stone-400",children:"PWA Update:"}),f.jsx("span",{className:r.available?"text-green-400":"text-stone-500",children:r.available?"Disponible":"Actualizado"})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-stone-400",children:"Versin:"}),f.jsx("span",{className:o.hasUpdate?"text-green-400":"text-stone-500",children:o.hasUpdate?"Nueva disponible":"Actualizada"})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-stone-400",children:"ltima verificacin:"}),f.jsx("span",{className:"text-stone-500",children:o.lastCheck?new Date(o.lastCheck).toLocaleTimeString():"Nunca"})]})]})]}),f.jsx("div",{className:"flex justify-center",children:f.jsxs(lt,{onClick:c,disabled:r.updating,className:"bg-mantis-600 hover:bg-mantis-500",size:"sm",children:[f.jsx(Oe,{icon:Nv,className:"mr-2"}),"Verificar actualizaciones"]})}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Oe,{icon:Nv,className:"size-4 text-stone-400"}),f.jsx("span",{className:"text-sm text-white",children:"Verificacin automtica"})]}),f.jsx("input",{type:"checkbox",checked:t.autoCheck,onChange:d=>l("autoCheck",d.target.checked),className:"rounded border-stone-600 bg-stone-800 text-mantis-500 focus:ring-mantis-500"})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Oe,{icon:Pv,className:"size-4 text-stone-400"}),f.jsx("span",{className:"text-sm text-white",children:"Mostrar banner"})]}),f.jsx("input",{type:"checkbox",checked:t.showBanner,onChange:d=>l("showBanner",d.target.checked),className:"rounded border-stone-600 bg-stone-800 text-mantis-500 focus:ring-mantis-500"})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Oe,{icon:Pv,className:"size-4 text-stone-400"}),f.jsx("span",{className:"text-sm text-white",children:"Notificaciones"})]}),f.jsx("input",{type:"checkbox",checked:t.showNotifications,onChange:d=>l("showNotifications",d.target.checked),className:"rounded border-stone-600 bg-stone-800 text-mantis-500 focus:ring-mantis-500"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm text-white",children:"Intervalo de verificacin (minutos)"}),f.jsxs("select",{value:t.checkInterval,onChange:d=>l("checkInterval",parseInt(d.target.value)),className:"w-full rounded border border-stone-600 bg-stone-800 px-3 py-1 text-white focus:border-mantis-500 focus:outline-none",children:[f.jsx("option",{value:5,children:"5 minutos"}),f.jsx("option",{value:15,children:"15 minutos"}),f.jsx("option",{value:30,children:"30 minutos"}),f.jsx("option",{value:60,children:"1 hora"}),f.jsx("option",{value:120,children:"2 horas"})]})]})]})]})]})]}):f.jsx(lt,{onClick:u,variant:"ghost",size:"sm",className:"text-stone-400 hover:text-white",title:"Configuracin de actualizaciones",children:f.jsx(Oe,{icon:z3,className:"size-4"})})});u9.displayName="UpdateSettings";const _ce=()=>({handleShowTour:b.useCallback(()=>{window.startWelcomeTour?window.startWelcomeTour():(localStorage.removeItem("vonsim8-tour-completed"),window.location.reload())},[])}),Ck=b.memo(({status:t,isMobile:e,isCompact:n})=>{const i=it(bi),[r,s]=b.useState(null),[o,a]=b.useState(!1),l=b.useMemo(()=>{switch(t.type){case"running":return"Ejecutando";case"paused":return"Pausado";default:return"Detenido"}},[t.type]),c=b.useMemo(()=>{switch(t.type){case"running":return"bg-green-600";case"paused":return"bg-yellow-600";default:return"bg-stone-600"}},[t.type]);b.useEffect(()=>{if(i&&i.phase&&i.phase!==r){s(i.phase),a(!0);const p=setTimeout(()=>{a(!1)},800);return()=>clearTimeout(p)}},[i,r]);const u=b.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"Captacin";case"fetching-operands":return"Obtencin de operandos";case"executing":return"Ejecucin";case"writeback":return"Escritura";case"interrupt":return"Interrupcin";case"int6":case"int7":return"Interrupcin";case"halting":return"Detener CPU";default:return""}},[i,t.type]),d=b.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"fetching-operands":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"executing":return"bg-green-500/20 text-green-400 border-green-500/30";case"writeback":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"interrupt":return"bg-red-500/20 text-red-400 border-red-500/30";case"int6":case"int7":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"halting":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-stone-500/20 text-stone-400 border-stone-500/30"}},[i,t.type]),h=b.useMemo(()=>{if(!o||!i)return"";switch(i.phase){case"fetching":return"animate-phase-pulse-blue";case"fetching-operands":return"animate-phase-pulse-yellow";case"executing":return"animate-phase-pulse-green";case"writeback":return"animate-phase-pulse-purple";case"interrupt":return"animate-phase-pulse-red";case"int6":case"int7":return"animate-phase-pulse-orange";case"halting":return"animate-phase-pulse-red";default:return"animate-phase-pulse-stone"}},[o,i]);return f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{className:Q("flex items-center gap-1.5 rounded-full px-2 py-1 font-medium text-white",c,t.type==="running"&&"animate-pulse-glow",e&&"px-1.5 py-0.5",n&&"px-1 py-0.5"),children:[f.jsx("div",{className:Q("size-2 rounded-full",t.type==="running"?"bg-green-300":t.type==="paused"?"bg-yellow-300":"bg-stone-300")}),!e&&!n&&l]}),(t.type==="running"||i&&i.phase==="halting")&&u&&f.jsxs("div",{className:Q("rounded-xl border text-[10px] font-semibold uppercase tracking-wider backdrop-blur-sm transition-all duration-200 ease-in-out",d,h,e?"flex min-h-[20px] items-center justify-center whitespace-nowrap px-2 py-0.5 text-[8px]":n?"flex min-h-[18px] items-center justify-center whitespace-nowrap px-1.5 py-0.5 text-[8px]":"px-2 py-1"),children:[u," "]})]})});Ck.displayName="SimulationStatus";const d9=b.memo(({onShowTour:t,onToggleSettings:e,settingsOpen:n,onToggleEducational:i,educationalOpen:r})=>{const s=Ht();return f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(I$,{}),f.jsx(u9,{}),f.jsx(vr,{content:"Centro de aprendizaje",position:"bottom",children:f.jsx(b0,{icon:f.jsx(Oe,{icon:cm,className:"size-4"}),onClick:i,variant:r?"secondary":"ghost",size:"md","aria-label":"Centro de aprendizaje",className:Q("hover-lift",r&&"animate-pulse-glow"),"data-testid":"educational-button"})}),f.jsx(vr,{content:"Mostrar tour de bienvenida",position:"bottom",children:f.jsx(b0,{icon:f.jsx(Oe,{icon:MX,className:"size-4"}),onClick:t,variant:"ghost",size:"md","aria-label":"Mostrar tour de bienvenida",className:"hover-lift"})}),f.jsx(vr,{content:s("settings.title"),position:"bottom",children:f.jsx(b0,{icon:f.jsx("span",{className:"icon-[lucide--settings] block size-5"}),onClick:e,variant:n?"secondary":"ghost",size:"md","aria-label":s("settings.title"),className:Q("hover-lift",n&&"animate-pulse-glow"),"data-testid":"settings-button"})})]})});d9.displayName="ActionButtons";const f9=b.memo(()=>{const[t,e]=sm(zb),[n,i]=b.useState(!1),[r,s]=b.useState(!1),{status:o}=jn(),{handleShowTour:a}=_ce(),[l,c]=b.useState("desktop");b.useEffect(()=>{const v=()=>{const y=window.innerWidth;y<=480?c("mobile"):y<=768?c("compact"):y<=1024?c("tablet"):c("desktop")};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const u=b.useCallback(()=>{e(v=>!v)},[e]),d=b.useCallback(()=>{i(v=>!v)},[]),h=b.useCallback(()=>{s(v=>!v)},[]),p=b.useMemo(()=>f.jsxs("div",{className:"hover-scale flex select-none items-center justify-center",children:[f.jsxs("div",{className:"group relative flex size-10 items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-mantis-500 to-mantis-600 shadow-lg hover:scale-105",children:[f.jsx("div",{className:"absolute inset-0 opacity-10",children:f.jsx("div",{className:"size-full bg-[radial-gradient(circle_at_30%_30%,rgba(255,255,255,0.1)_1px,transparent_1px),radial-gradient(circle_at_70%_70%,rgba(255,255,255,0.1)_1px,transparent_1px)] bg-[length:8px_8px]"})}),f.jsx("div",{className:"relative z-10 flex items-center justify-center",children:f.jsx("span",{className:"text-lg font-bold tracking-tight text-white",children:"V8"})}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/10 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),f.jsx("div",{className:"absolute -right-0.5 -top-0.5 size-2 animate-pulse rounded-full bg-mantis-300"})]}),f.jsxs("div",{className:"ml-3 flex flex-col",children:[f.jsxs("h1",{className:"text-lg font-bold max-sm:hidden",children:["Von",f.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]}),f.jsx("span",{className:"text-xs text-stone-400 max-sm:hidden",children:"Simulador CPU 8-bit"})]})]}),[]),m=(()=>{switch(l){case"mobile":return{gridCols:"grid-cols-2",showStatusLeft:!0,showStatusCenter:!1,showActionButtons:!1,isCompact:!0,isMobile:!0};case"compact":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!1,isCompact:!0,isMobile:!1};case"tablet":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1};case"desktop":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1}}})();return f.jsxs(f.Fragment,{children:[f.jsx("header",{className:Q("relative bg-black text-sm text-white",l==="mobile"?"header-mobile p-2":l==="compact"?"header-compact p-2":l==="tablet"?"header-tablet p-2":"p-2"),"data-testid":"header",children:f.jsxs("div",{className:Q("grid items-center",m.gridCols),children:[f.jsxs("div",{className:"flex items-center gap-3",children:[p,m.showStatusLeft&&f.jsx(Ck,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})]}),m.showStatusCenter&&f.jsx("div",{className:"flex justify-center",children:f.jsx(Ck,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})}),f.jsxs("div",{className:"flex items-center justify-end gap-6",children:[f.jsx("div",{className:"flex justify-end",children:f.jsx(Kse,{})}),m.showActionButtons&&f.jsx(d9,{onShowTour:a,onToggleSettings:u,settingsOpen:t,onToggleEducational:d,educationalOpen:n})]})]})}),!m.isMobile&&n&&f.jsx(P$,{isOpen:n,onClose:()=>i(!1),onShowProgress:h}),!m.isMobile&&r&&f.jsx(M$,{isVisible:r,onClose:()=>s(!1)})]})});f9.displayName="Header";const Cce=[{key:"F7",description:"Ejecutar un ciclo",category:"Simulacin"},{key:"F8",description:"Ejecutar una instruccin completa",category:"Simulacin"},{key:"F4",description:"Ejecucin infinita",category:"Simulacin"},{key:"F9",description:"Resetear simulacin",category:"Simulacin"},{key:"Espacio",description:"Pausar/Reanudar (cuando est ejecutando)",category:"Simulacin"},{key:"Ctrl+S",description:"Guardar archivo",category:"Editor"},{key:"Ctrl+O",description:"Abrir archivo",category:"Editor"},{key:"Ctrl+N",description:"Nuevo archivo",category:"Editor"},{key:"Ctrl+Z",description:"Deshacer",category:"Editor"},{key:"Ctrl+Y",description:"Rehacer",category:"Editor"},{key:"Ctrl+F",description:"Buscar",category:"Editor"},{key:"Ctrl+H",description:"Reemplazar",category:"Editor"},{key:"Tab",description:"Indentar",category:"Editor"},{key:"Shift+Tab",description:"Desindentar",category:"Editor"},{key:"F1",description:"Mostrar atajos de teclado",category:"Navegacin"},{key:"F2",description:"Abrir configuracin",category:"Navegacin"},{key:"F3",description:"Buscar en el cdigo",category:"Navegacin"},{key:"F5",description:"Actualizar pgina",category:"Navegacin"},{key:"F6",description:"Cambiar foco al editor",category:"Navegacin"},{key:"Escape",description:"Cerrar dilogos",category:"Interfaz"},{key:"Ctrl+Shift+P",description:"Paleta de comandos",category:"Interfaz"},{key:"Ctrl+B",description:"Mostrar/ocultar barra lateral",category:"Interfaz"},{key:"Ctrl+J",description:"Mostrar/ocultar terminal",category:"Interfaz"},{key:"Ctrl++",description:"Zoom in",category:"Vista"},{key:"Ctrl+-",description:"Zoom out",category:"Vista"},{key:"Ctrl+0",description:"Resetear zoom",category:"Vista"},{key:"Ctrl+Shift+Z",description:"Zoom a la seleccin",category:"Vista"},{key:"F12",description:"Herramientas de desarrollador",category:"Desarrollo"},{key:"Ctrl+Shift+I",description:"Inspeccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+C",description:"Seleccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+J",description:"Consola",category:"Desarrollo"},{key:"Ctrl+Shift+M",description:"Vista mvil",category:"Desarrollo"}],Ece=()=>{const[t,e]=b.useState(!1),n=b.useCallback(()=>{e(!0)},[]),i=b.useCallback(()=>{e(!1)},[]);return b.useEffect(()=>{const r=s=>{s.key==="F1"&&(s.preventDefault(),n())};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n]),{isOpen:t,openModal:n,closeModal:i}},Ace=()=>b.useMemo(()=>{const t=Cce.reduce((e,n)=>(e[n.category]||(e[n.category]=[]),e[n.category].push(n),e),{});return Object.entries(t).sort(([e],[n])=>e.localeCompare(n))},[]),h9=b.memo(({shortcut:t})=>f.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-stone-800 p-3 transition-colors hover:bg-stone-700",children:[f.jsx("span",{className:"text-sm text-stone-300",children:t.description}),f.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-2 py-1 font-mono text-xs text-white",children:t.key})]}));h9.displayName="ShortcutItem";const p9=b.memo(({category:t,shortcuts:e})=>f.jsxs("div",{className:"space-y-2",children:[f.jsx("h3",{className:"border-b border-stone-600 pb-2 text-lg font-semibold text-mantis-400",children:t}),f.jsx("div",{className:"space-y-2",children:e.map((n,i)=>f.jsx(h9,{shortcut:n},`${t}-${i}`))})]}));p9.displayName="ShortcutCategory";const m9=b.memo(()=>{const{isOpen:t,closeModal:e}=Ece(),n=Ace(),i=b.useCallback(s=>{s.target===s.currentTarget&&e()},[e]),r=b.useCallback(s=>{s.key==="Escape"&&e()},[e]);return b.useEffect(()=>{if(t)return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t,r]),t?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:i,children:f.jsxs("div",{className:"max-h-[80vh] w-full max-w-4xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[f.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"icon-[lucide--keyboard] size-6 text-mantis-400"}),f.jsx("h2",{className:"text-xl font-semibold text-white",children:"Atajos de Teclado"})]}),f.jsx("button",{onClick:e,className:"rounded p-2 text-stone-400 transition-colors hover:text-white",children:f.jsx(Oe,{icon:lm,size:"lg"})})]}),f.jsx("div",{className:"max-h-[calc(80vh-80px)] overflow-y-auto p-4",children:f.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:n.map(([s,o])=>f.jsx(p9,{category:s,shortcuts:o},s))})}),f.jsx("div",{className:"border-t border-stone-600 bg-stone-800 p-4",children:f.jsxs("div",{className:"flex items-center justify-between text-sm text-stone-400",children:[f.jsxs("span",{children:["Presiona"," ",f.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-1 py-0.5 font-mono text-xs",children:"F1"})," ","para abrir este dilogo"]}),f.jsx(lt,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"Cerrar"})]})})]})}):null});m9.displayName="KeyboardShortcuts";const g9=b.memo(()=>{const{updateInfo:t,updateApp:e}=HE(),{versionInfo:n,updateToNewVersion:i}=WE(),[r,s]=b.useState(!0),[o,a]=b.useState(!1),l=t.available||n.hasUpdate,c=b.useCallback(async()=>{a(!0);try{t.available?await e():n.hasUpdate&&i(),s(!1)}catch(d){console.error("Error al actualizar:",d)}finally{a(!1)}},[e,t.available,i,n.hasUpdate]),u=b.useCallback(()=>{s(!1)},[]);return!l||!r?null:f.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg",children:f.jsx("div",{className:"mx-auto max-w-7xl px-4 py-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx(Oe,{icon:Nv,className:"size-5 animate-pulse"}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold",children:"Nueva versin disponible"}),f.jsx("p",{className:"text-sm opacity-90",children:"Hay una nueva versin de VonSim8 lista para instalar"})]})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsxs(lt,{onClick:c,disabled:o,className:"bg-white text-blue-600 hover:bg-gray-100 disabled:opacity-50",size:"sm",children:[f.jsx(Oe,{icon:o?AX:Nv,className:Q("mr-2",o&&"animate-spin")}),o?"Actualizando...":"Actualizar ahora"]}),f.jsx(lt,{onClick:u,variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",children:f.jsx(Oe,{icon:lm})})]})]})})})});g9.displayName="UpdateBanner";ue(!1);const Fh=[{id:"welcome",target:"app-container",title:"Bienvenido a VonSim8!",content:"Te acompaar en un recorrido por las funciones principales de la plataforma. VonSim8 es un simulador de computadora de 8 bits que te permite programar en lenguaje ensamblador y ver cmo funciona internamente una computadora.",icon:xX,position:"top"},{id:"header",target:"header",title:"Barra de Navegacin",content:"Aqu encontrars el logo, el estado de la simulacin, los controles principales y acceso a notificaciones, tour de ayuda y configuracin.",icon:"icon-[lucide--navigation]",position:"bottom"},{id:"controls",target:"controls-container",title:"Controles de Simulacin",content:"Controla la simulacin: F7 (ejecutar ciclo), F8 (ejecutar instruccin), F4 (ejecucin infinita), F9 (resetear). Tambin puedes usar los botones visuales.",icon:"icon-[lucide--cpu]",position:"bottom"},{id:"editor-buttons",target:"panel-editor",title:"Editor de Cdigo",content:"Aqu es donde escribirs tu cdigo ensamblador. El editor tiene resaltado de sintaxis, autocompletado y validacin en tiempo real. Usa los botones de arriba para crear, abrir, guardar y ensamblar tu programa.",icon:"icon-[lucide--file-terminal]",position:"right"},{id:"computer-view",target:"panel-computer",title:"Simulador de Computadora",content:"Aqu vers la computadora virtual con CPU, memoria RAM, registros, ALU, buses de datos y control, y todos los perifricos como pantalla, teclado, LEDs y switches.",icon:"icon-[lucide--monitor]",position:"left"},{id:"cpu-architecture",target:"cpu-component",title:"Arquitectura CPU",content:"Observa cmo la CPU ejecuta instrucciones paso a paso: fetch, decode, execute. Ve los valores en los registros, el contador de programa y el estado de las banderas.",icon:"icon-[lucide--microchip]",position:"left"},{id:"memory-ram",target:"memory-component",title:"Memoria RAM",content:"Explora la memoria RAM de 256 bytes. Ve cmo se almacenan datos e instrucciones, y cmo la CPU accede a diferentes direcciones de memoria. Cada celda muestra su direccin y valor en hexadecimal.",icon:"icon-[lucide--database]",position:"left"},{id:"settings-button",target:"settings-button",title:"Botn de Configuracin",content:"Haz clic en este engranaje para acceder a las configuraciones avanzadas. Aqu podrs ajustar la velocidad de simulacin, cambiar el tema visual, seleccionar el idioma y personalizar atajos de teclado.",icon:"icon-[lucide--settings]",position:"bottom"},{id:"settings-panel",target:"panel-settings",title:"Panel de Configuracin",content:"En este panel encontrars todas las opciones de configuracin organizadas por categoras: simulacin, interfaz, idioma y atajos de teclado. Los cambios se aplican automticamente.",icon:"icon-[lucide--settings]",position:"left"},{id:"footer",target:"footer-links",title:"Recursos y Soporte",content:"Encuentra documentacin completa, cdigo fuente en GitHub, reporta bugs y accede a recursos de aprendizaje para dominar la programacin en ensamblador.",icon:"icon-[lucide--help-circle]",position:"top"},{id:"final",target:"cycle-button",title:"Listo para Programar!",content:"Ya conoces las funciones principales de VonSim8. Comienza escribiendo cdigo en el editor, ejecuta la simulacin paso a paso con el botn 'Por Ciclo' y observa cmo funciona tu programa en la computadora virtual. Disfruta programando!",icon:"icon-[lucide--rocket]",position:"bottom"}],Nce=()=>{const[t,e]=b.useState(0),[n,i]=b.useState(!1),[r,s]=b.useState(!0),[,o]=sm(zb),a=b.useMemo(()=>t===Fh.length-1,[t]),l=b.useMemo(()=>t===0,[t]),c=b.useCallback(()=>{i(!1),localStorage.setItem("vonsim8-tour-completed","true")},[]),u=b.useCallback(()=>{e(g=>Math.min(g+1,Fh.length-1))},[]),d=b.useCallback(()=>{e(g=>Math.max(g-1,0))},[]),h=b.useCallback(()=>{c()},[c]),p=b.useCallback(()=>{i(!0),e(0)},[]);return b.useEffect(()=>{},[]),b.useEffect(()=>{const g=Fh[t],m=document.querySelector(`[data-testid="${g.target}"]`);s(!!m),g.id==="settings-button"?o(!0):g.id!=="settings-panel"&&g.id!=="settings-button"&&o(!1)},[t,o]),{currentStep:t,isVisible:n,isLastStep:a,isFirstStep:l,handleNext:u,handlePrev:d,handleSkip:h,completeTour:c,startTour:p,targetFound:r}},Pce=t=>b.useMemo(()=>{const e=document.querySelector(`[data-testid="${t.target}"]`);if(!e)return null;const n=e.getBoundingClientRect(),i=window.innerWidth,r=window.innerHeight;if(t.id==="welcome"&&t.position==="top")return{positionStyles:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},highlightStyles:{top:0,left:0,width:"100vw",height:"100vh"}};if(t.id==="footer"){let g=n.top-200-60,m=n.right+20;const v="translateX(0)";g<40&&(g=40),g+200>r-100&&(g=Math.max(40,r/2-200/2)),m+320>i&&(m=i-320-20);const y={top:g,left:m,transform:v},x={top:n.top-2,left:n.left-2,width:n.width+4,height:n.height+4};return{positionStyles:y,highlightStyles:x}}let s,o,a;switch(t.position){case"top":s=n.top-20,o=n.left+n.width/2,a="translateX(-50%)";break;case"bottom":s=n.bottom+20,o=n.left+n.width/2,a="translateX(-50%)";break;case"left":s=n.top+n.height/2,o=n.left-20,a="translateY(-50%)";break;case"right":s=n.top+n.height/2,o=n.right+20,a="translateY(-50%)";break}const l=320,c=200;o+l/2>i?o=i-l/2-20:o-l/2<0&&(o=l/2+20),s+c>r?s=r-c-20:s<0&&(s=20);const u={top:s,left:o,transform:a},d={top:n.top-8,left:n.left-8,width:n.width+16,height:n.height+16};return{positionStyles:u,highlightStyles:d}},[t]),v9=b.memo(({current:t,total:e})=>f.jsx("div",{className:"mb-2 h-2 w-full overflow-hidden rounded-full bg-stone-700",children:f.jsx("div",{className:"h-full bg-mantis-500 transition-all duration-300",style:{width:`${(t+1)/e*100}%`}})}));v9.displayName="ProgressBar";const y9=b.memo(({step:t,currentStep:e,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:l,targetFound:c})=>{const u=Pce(t),d=b.useRef(null);b.useEffect(()=>{var m;(m=d.current)==null||m.focus()},[e]);const h="animate-fade-in";if(!c||!u)return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:f.jsxs("div",{className:"max-w-sm rounded-lg border-2 border-mantis-400 bg-stone-900 p-8 text-center shadow-2xl",children:[f.jsx(Oe,{icon:o2,className:"mb-4 text-4xl text-yellow-400"}),f.jsx("h3",{className:"mb-2 text-lg font-semibold text-mantis-400",children:"Elemento no encontrado"}),f.jsx("p",{className:"mb-4 text-stone-300",children:"No se pudo encontrar el elemento de la interfaz para este paso del tour."}),f.jsx(lt,{onClick:o,className:"bg-mantis-600 hover:bg-mantis-700",children:"Saltar tour"})]})});const{positionStyles:p,highlightStyles:g}=u;return f.jsx("div",{className:"fixed inset-0 z-50 bg-black/50",children:f.jsxs("div",{className:"relative size-full",children:[f.jsx("div",{className:"absolute rounded-lg border-2 border-mantis-400 bg-transparent shadow-2xl transition-all duration-300",style:g}),f.jsxs("div",{ref:d,tabIndex:-1,role:"dialog","aria-modal":"true",className:`absolute max-w-sm rounded-lg border border-mantis-400 bg-stone-900 p-6 text-white shadow-xl focus:outline-none ${h}`,style:p,children:[f.jsx(v9,{current:e,total:l}),f.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[t.icon&&(typeof t.icon=="string"?f.jsx("span",{className:`${t.icon} text-2xl text-mantis-400`}):f.jsx(Oe,{icon:t.icon,className:"text-2xl text-mantis-400"})),f.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:t.title})]}),f.jsx("p",{className:"mb-4 text-sm text-stone-300",children:t.content}),f.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[f.jsx(lt,{variant:"ghost",size:"sm",onClick:o,className:"text-stone-400 hover:text-white","aria-label":"Saltar tour",children:"Saltar"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(lt,{variant:"outline",size:"sm",onClick:s,disabled:i,className:"flex items-center gap-1","aria-label":"Anterior",children:[f.jsx(Oe,{icon:DX}),"Anterior"]}),n?f.jsxs(lt,{size:"sm",onClick:a,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Finalizar",children:["Finalizar",f.jsx(Oe,{icon:CX})]}):f.jsxs(lt,{size:"sm",onClick:r,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Siguiente",children:["Siguiente",f.jsx(Oe,{icon:$X})]})]})]}),f.jsxs("div",{className:"mt-2 text-right text-xs text-stone-500",children:["Paso ",e+1," de ",l]}),f.jsx("button",{onClick:o,className:"absolute right-2 top-2 rounded p-1 text-stone-400 hover:text-white focus:outline-none","aria-label":"Cerrar",children:f.jsx(Oe,{icon:lm,size:"sm"})})]})]})})});y9.displayName="TourTooltip";const b9=b.memo(()=>{const{currentStep:t,isVisible:e,isLastStep:n,isFirstStep:i,handleNext:r,handlePrev:s,handleSkip:o,completeTour:a,startTour:l,targetFound:c}=Nce();b.useEffect(()=>(window.startWelcomeTour=l,()=>{delete window.startWelcomeTour}),[l]);const u=b.useMemo(()=>Fh[t],[t]);return b.useEffect(()=>{if(!e)return;const d=h=>{h.key==="Escape"&&o(),h.key==="ArrowRight"&&r(),h.key==="ArrowLeft"&&s()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[e,o,r,s]),!e||!u?null:f.jsx(y9,{step:u,currentStep:t,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:Fh.length,targetFound:c})});b9.displayName="WelcomeTour";var $r=function(t,e){return Number(t.toFixed(e))},Mce=function(t,e){return e},Kt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},Rce=function(t){return-Math.cos(t*Math.PI)/2+.5},Tce=function(t){return t},Oce=function(t){return t*t},Ice=function(t){return t*(2-t)},jce=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},Lce=function(t){return t*t*t},Dce=function(t){return--t*t*t+1},$ce=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},Fce=function(t){return t*t*t*t},zce=function(t){return 1- --t*t*t*t},Bce=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},Uce=function(t){return t*t*t*t*t},Vce=function(t){return 1+--t*t*t*t*t},Hce=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},x9={easeOut:Rce,linear:Tce,easeInQuad:Oce,easeOutQuad:Ice,easeInOutQuad:jce,easeInCubic:Lce,easeOutCubic:Dce,easeInOutCubic:$ce,easeInQuart:Fce,easeOutQuart:zce,easeInOutQuart:Bce,easeInQuint:Uce,easeOutQuint:Vce,easeInOutQuint:Hce},w9=function(t){typeof t=="number"&&cancelAnimationFrame(t)},ds=function(t){t.mounted&&(w9(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function S9(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;ds(t),t.animation=function(){if(!t.mounted)return w9(t.animation);var o=new Date().getTime()-r,a=o/n,l=x9[e],c=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function Wce(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function jl(t,e,n,i){var r=Wce(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,h=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):S9(t,i,n,function(p){var g=a+u*p,m=l+d*p,v=c+h*p;s(g,m,v)})}}function Gce(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=i-a,u=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var Kce=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,c=t-e-a,u=a,d=i-r-l,h=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:h}},GE=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=Gce(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,h=Kce(o,l,c,a,u,d,!!r);return h},Ek=function(t,e,n,i){return i?t<e?$r(e,2):t>n?$r(n,2):$r(t,2):$r(t,2)},_c=function(t,e){var n=GE(t,e);return t.bounds=n,n};function Sm(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,h=0;o&&(d=r,h=s);var p=Ek(t,a-d,c+d,i),g=Ek(e,l-h,u+h,i);return{x:p,y:g}}function Bb(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,h=c-n*u,p=Sm(d,h,r,s,0,0,null);return p}function km(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var NR=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(u){return u instanceof Element?r==null?void 0:r.contains(u):!1}):r==null?void 0:r.contains(s),l=i&&s&&a;if(!l)return!1;var c=Ub(s,n);return!c},PR=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},qce=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},Yce=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function Xce(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,h=u.minPositionX,p=u.maxPositionY,g=u.minPositionY,m=n>d||n<h,v=i>p||i<g,y=n>d?c.offsetWidth:t.setup.minPositionX||0,x=i>p?c.offsetHeight:t.setup.minPositionY||0,w=Bb(t,y,x,r,t.bounds,a||l),S=w.x,_=w.y;return{scale:r,positionX:m?S:n,positionY:v?_:i}}}function k9(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var h=Sm(e,n,a,s,i,r,o),p=h.x,g=h.y;t.setTransformState(c,p,g)}}var Jce=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,c=r.positionY;if(!i)return{x:l,y:c};var u=e-i.x,d=n-i.y,h=o?l:u,p=a?c:d;return{x:h,y:p}},_l=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},Zce=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},Qce=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!i)};function eue(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function MR(t,e,n,i,r,s,o,a,l,c){if(r){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return i?e:Ek(t,s,o,r)}function tue(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function nue(t,e){var n=Zce(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var c=tue(o,a),u=e.x-i.x,d=e.y-i.y,h=u/c,p=d/c,g=l-r,m=u*u+d*d,v=Math.sqrt(m)/g;t.velocity={velocityX:h,velocityY:p,total:v}}t.lastMousePosition=e,t.velocityTime=l}}function iue(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=Qce(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,h=n.minPositionY,p=i.limitToBounds,g=i.alignmentAnimation,m=i.zoomAnimation,v=i.panning,y=v.lockAxisY,x=v.lockAxisX,w=m.animationType,S=g.sizeX,_=g.sizeY,E=g.velocityAlignmentTime,C=E,N=eue(t,l),M=Math.max(N,C),I=_l(t,S),O=_l(t,_),T=I*r.offsetWidth/100,H=O*r.offsetHeight/100,L=c+T,K=u-T,X=d+H,te=h-H,U=t.transformState,z=new Date().getTime();S9(t,w,M,function(ie){var be=t.transformState,J=be.scale,le=be.positionX,F=be.positionY,$=new Date().getTime()-z,V=$/C,k=x9[g.animationType],P=1-k(Math.min(1,V)),j=1-ie,R=le+o*j,Y=F+a*j,G=MR(R,U.positionX,le,x,p,u,c,K,L,P),ne=MR(Y,U.positionY,F,y,p,h,d,te,X,P);(le!==R||F!==Y)&&t.setTransformState(J,G,ne)})}}function RR(t,e){var n=t.transformState.scale;ds(t),_c(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?Yce(t,e):qce(t,e)}function KE(t,e){var n=t.transformState.scale,i=t.setup,r=i.minScale,s=i.alignmentAnimation,o=s.disabled,a=s.sizeX,l=s.sizeY,c=s.animationTime,u=s.animationType,d=o||n<r||!a&&!l;if(!d){var h=Xce(t);h&&jl(t,h,e??c,u)}}function TR(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=Jce(t,e,n),c=l.x,u=l.y,d=_l(t,o),h=_l(t,a);nue(t,{x:c,y:u}),k9(t,c,u,d,h)}}function rue(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,h=!e&&n&&(n==null?void 0:n.total)>.1&&d;h?iue(t):KE(t)}}function qE(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=km($r(e,2),s,o,0,!1),c=_c(t,l),u=Bb(t,n,i,l,c,a),d=u.x,h=u.y;return{scale:l,positionX:d,positionY:h}}function _9(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,h=c||i>=o;if((i>=1||a)&&KE(t),!(h||!r||!t.mounted)){var p=e||r.offsetWidth/2,g=n||r.offsetHeight/2,m=qE(t,o,p,g);m&&jl(t,m,u,d)}}var ol=function(){return ol=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ol.apply(this,arguments)};function OR(t,e,n){for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var Dg={scale:1,positionX:0,positionY:0},Ff={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},Ak={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},C9=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Dg.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:Dg.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:Dg.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:Dg.positionY}},IR=function(t){var e=ol({},Ff);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof Ff[n]<"u";if(r&&i){var s=Object.prototype.toString.call(Ff[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=ol(ol({},Ff[n]),t[n]):a?e[n]=OR(OR([],Ff[n],!0),t[n]):e[n]=t[n]}}),e},E9=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=c?i*Math.exp(e*n):i+e*n,h=km($r(d,3),a,o,u,!1);return h};function A9(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,h=(u/2-l)/a,p=(d/2-c)/a,g=E9(t,e,n),m=qE(t,g,h,p);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");jl(t,m,i,r)}function N9(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=C9(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var h=GE(t,a.scale),p=Sm(a.positionX,a.positionY,h,o,0,0,s),g={scale:a.scale,positionX:p.x,positionY:p.y};c===a.scale&&u===a.positionX&&d===a.positionY||(i==null||i(),jl(t,g,e,n))}}function sue(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function oue(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!i||!r)return s;var u=i.getBoundingClientRect(),d=e.getBoundingClientRect(),h=sue(e,i,r,s),p=h.x,g=h.y,m=d.width/s.scale,v=d.height/s.scale,y=i.offsetWidth/m,x=i.offsetHeight/v,w=km(n||Math.min(y,x),l,c,0,!1),S=(u.width-m*w)/2,_=(u.height-v*w)/2,E=(u.left-p)*w+S,C=(u.top-g)*w+_,N=GE(t,w),M=Sm(E,C,N,a,0,0,i),I=M.x,O=M.y;return{positionX:I,positionY:O,scale:w}}var aue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),A9(t,1,e,n,i)}},lue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),A9(t,-1,e,n,i)}},cue=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,h=t.setup.disabled;if(!(h||!u||!d)){var p={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?c:i};jl(t,p,r,s)}}},uue=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),N9(t,e,n)}},due=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=P9(e||r.scale,s,o);jl(t,a,n,i)}}},fue=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),ds(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=oue(t,o,n);jl(t,a,i,r)}}},Nk=function(t){return{instance:t,zoomIn:aue(t),zoomOut:lue(t),setTransform:cue(t),resetTransform:uue(t),centerView:due(t),zoomToElement:fue(t)}},hue=function(t){return{instance:t,state:t.transformState}},jt=function(t){var e={};return Object.assign(e,hue(t)),Object.assign(e,Nk(t)),e},K1=!1;function q1(){try{var t={get passive(){return K1=!0,!1}};return t}catch{return K1=!1,K1}}var $g=".".concat(Ak.wrapperClass),Ub=function(t,e){return e.some(function(n){return t.matches("".concat($g," ").concat(n,", ").concat($g," .").concat(n,", ").concat($g," ").concat(n," *, ").concat($g," .").concat(n," *"))})},Pk=function(t){t&&clearTimeout(t)},pue=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},P9=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function mue(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var gue=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!i&&c;if(!u||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Ub(c,o);return!d},vue=function(t){return t?t.deltaY<0?1:-1:0};function yue(t,e){var n=vue(t),i=Mce(e,n);return i}function M9(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var bue=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,h=u.size,p=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var g=s+e*n,m=i?!1:!p,v=km($r(g,3),c,l,h,m&&!d);return v},xue=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},wue=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=Ub(o,r);return!l},Sue=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},kue=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=$r(r[0].clientX-i.left,5),o=$r(r[0].clientY-i.top,5),a=$r(r[1].clientX-i.left,5),l=$r(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},R9=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},_ue=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,c=a.size,u=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,h=d*n;return km($r(h,2),o,s,c,!u&&!l)},Cue=160,Eue=100,Aue=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(ds(t),Kt(jt(t),e,i),Kt(jt(t),e,r))},Nue=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,h=o.wheel,p=o.disablePadding,g=o.smooth,m=d.size,v=d.disabled,y=h.step,x=h.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=yue(e,null),S=g?x*Math.abs(e.deltaY):y,_=bue(t,w,S,!e.ctrlKey);if(l!==_){var E=_c(t,_),C=M9(e,s,l),N=v||m===0||u||p,M=c&&N,I=Bb(t,C.x,C.y,_,E,M),O=I.x,T=I.y;t.previousWheelEvent=e,t.setTransformState(_,O,T),Kt(jt(t),e,i),Kt(jt(t),e,r)}},Pue=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;Pk(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(_9(t,e.x,e.y),t.wheelAnimationTimer=null)},Eue);var s=xue(t,e);s&&(Pk(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Kt(jt(t),e,i),Kt(jt(t),e,r))},Cue))},T9=function(t){for(var e=0,n=0,i=0;i<2;i+=1)e+=t.touches[i].clientX,n+=t.touches[i].clientY;var r=e/2,s=n/2;return{x:r,y:s}},Mue=function(t,e){var n=R9(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var i=T9(e);t.pinchLastCenterX=i.x,t.pinchLastCenterY=i.y,ds(t)},Rue=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,c=o.zoomAnimation,u=o.alignmentAnimation,d=c.disabled,h=c.size;if(!(i===null||!n)){var p=kue(e,s,n);if(!(!Number.isFinite(p.x)||!Number.isFinite(p.y))){var g=R9(e),m=_ue(t,g),v=T9(e),y=v.x-(t.pinchLastCenterX||0),x=v.y-(t.pinchLastCenterY||0);if(!(m===s&&y===0&&x===0)){t.pinchLastCenterX=v.x,t.pinchLastCenterY=v.y;var w=_c(t,m),S=d||h===0||l,_=a&&S,E=Bb(t,p.x,p.y,m,w,_),C=E.x,N=E.y;t.pinchMidpoint=p,t.lastDistance=g;var M=u.sizeX,I=u.sizeY,O=_l(t,M),T=_l(t,I),H=C+y,L=N+x,K=Sm(H,L,w,a,O,T,r),X=K.x,te=K.y;t.setTransformState(m,X,te)}}}},Tue=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,_9(t,e==null?void 0:e.x,e==null?void 0:e.y)},O9=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;Pk(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Kt(jt(t),e,n)},i)},Oue=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Kt(jt(t),e,i),N9(t,o,a,function(){return Kt(jt(t),e,r)}),O9(t,e)};function Iue(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function jue(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,h=u.mode,p=u.step,g=u.animationTime,m=u.animationType;if(!d&&!i){if(h==="reset")return Oue(t,e);if(!s)return console.error("No ContentComponent found");var v=Iue(h,t.transformState.scale),y=E9(t,v,p);if(o!==y){Kt(jt(t),e,l);var x=M9(e,s,o),w=qE(t,y,x.x,x.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");Kt(jt(t),e,c),jl(t,w,g,m),O9(t,e)}}}var Lue=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=r==null?void 0:r.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=Ub(l,a);return!d},Due=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){n.props=i,_c(n,n.transformState.scale),n.setup=IR(i)},this.initializeWindowEvents=function(){var i,r,s=q1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;(r=n.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var i,r,s=q1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),ds(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=q1();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i,r){var s=!1,o=n.setup.centerOnInit,a=function(l,c){for(var u=0,d=l;u<d.length;u++){var h=d[u];if(h.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(l){l(jt(n))}),n.observer=new ResizeObserver(function(l){if(a(l,i)||a(l,r))if(o&&!s){var c=r.offsetWidth,u=r.offsetHeight;(c>0||u>0)&&(s=!0,n.setCenter())}else ds(n),_c(n,n.transformState.scale),KE(n,0)}),n.observer.observe(i),n.observer.observe(r)},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=gue(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(Aue(n,i),Nue(n,i),Pue(n,i))}}},this.onWheelPanning=function(i){var r=n.setup,s=r.disabled,o=r.wheel,a=r.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var l=n.transformState,c=l.positionX,u=l.positionY,d=c-i.deltaX,h=u-i.deltaY,p=a.lockAxisX?c:d,g=a.lockAxisY?u:h,m=n.setup.alignmentAnimation,v=m.sizeX,y=m.sizeY,x=_l(n,v),w=_l(n,y);p===c&&g===u||k9(n,p,g,x,w)}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=NR(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),ds(n),RR(n,i),Kt(jt(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=PR(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),TR(n,i.clientX,i.clientY),Kt(jt(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(rue(n),Kt(jt(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=wue(n,i);l&&(Mue(n,i),ds(n),Kt(jt(n),i,o),Kt(jt(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=Sue(n);l&&(i.preventDefault(),i.stopPropagation(),Rue(n,i),Kt(jt(n),i,o),Kt(jt(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(Tue(n),Kt(jt(n),i,s),Kt(jt(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=NR(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200&&i.touches.length===1;if(!a){n.lastTouch=+new Date,ds(n);var l=i.touches,c=l.length===1,u=l.length===2;c&&(ds(n),RR(n,i),Kt(jt(n),i,s)),u&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=PR(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];TR(n,a.clientX,a.clientY),Kt(jt(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=Lue(n,i);s&&jue(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=jt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Kt(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=P9(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):pue(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return jt(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,_c(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(i,r),n.initializeWindowEvents(),n.isInitialized=!0;var s=jt(n);Kt(s,void 0,n.props.onInit)},this.props=e,this.setup=IR(this.props),this.transformState=C9(this.props)}return t}(),YE=Ft.createContext(null),$ue=function(t,e){return typeof t=="function"?t(e):t},Fue=Ft.forwardRef(function(t,e){var n=b.useRef(new Due(t)).current,i=$ue(t.children,Nk(n));return b.useImperativeHandle(e,function(){return Nk(n)},[n]),b.useEffect(function(){n.update(t)},[n,t]),Ft.createElement(YE.Provider,{value:n},i)});Ft.forwardRef(function(t,e){var n=b.useRef(null),i=b.useContext(YE);return b.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),Ft.createElement("div",ol({},t,{ref:mue([n,e])}))});function zue(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var Bue=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,jR={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};zue(Bue);var Uue=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,h=b.useContext(YE),p=h.init,g=h.cleanupWindowEvents,m=b.useRef(null),v=b.useRef(null);return b.useEffect(function(){var y=m.current,x=v.current;return y!==null&&x!==null&&p&&(p==null||p(y,x)),function(){g==null||g()}},[]),Ft.createElement("div",ol({},c,{ref:m,className:"".concat(Ak.wrapperClass," ").concat(jR.wrapper," ").concat(i),style:o}),Ft.createElement("div",ol({},d,{ref:v,className:"".concat(Ak.contentClass," ").concat(jR.content," ").concat(s),style:a}),e))};function Vue({wrapperRef:t}){const e=Ht();return f.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[f.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:f.jsx("span",{className:"size-4",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),f.jsx("hr",{className:"border-stone-600"}),f.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:f.jsx("span",{className:"size-4",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function Hue(t){switch(t){case"Captacin":return"text-blue-400";case"Obtencin de operandos":return"text-yellow-400";case"Ejecucin":return"text-green-400";case"Escritura":return"text-purple-400";default:return"text-stone-400"}}function LR(t,e){if(t==="Ejecucin")return/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-400":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-400":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-400");switch(t){case"Captacin":return"text-blue-400";case"Obtencin de operandos":return"text-yellow-400";case"Ejecucin":return"text-green-400";case"Escritura":return"text-purple-400";default:return"text-stone-400"}}function Wue(t){switch(t){case"Captacin":return"";case"Obtencin de operandos":return"";case"Ejecucin":return"";case"Escritura":return"";case"Interrupcin":return"";default:return""}}function Gue(t){return/obten/i.test(t)||/operando/i.test(t)||/leer/i.test(t)||/cargar/i.test(t)?"bg-yellow-500/5 border-yellow-400/20":/escrib/i.test(t)||/guardar/i.test(t)||/almacenar/i.test(t)||/resultado/i.test(t)?"bg-purple-500/5 border-purple-400/20":(/procesar/i.test(t)||/alu/i.test(t)||/calcular/i.test(t)||/operar/i.test(t)||/ejecut/i.test(t),"bg-green-500/5 border-green-400/20")}const Kue=[{id:"captacion",label:"Captacin",color:"text-blue-400",icon:"",descripcion:"Captando instruccin desde memoria",pasos:["IP apunta a la direccin de memoria, el MAR recibe la direccin del IP","Se lee el contenido de memoria y se almacena en el MBR, IP se incrementa automticamente","La instruccin se transfiere al IR"]},{id:"ejecucion",label:"Ejecucin",color:"text-green-400",icon:"",descripcion:"Ejecutando instruccin",subfases:[{id:"operandos",label:"Obtencin de operandos",color:"text-yellow-400",icon:"",descripcion:"Obteniendo operandos de la instruccin",pasos:["Se identifican y preparan los operandos necesarios para la operacin."]},{id:"alu",label:"Procesar en ALU",color:"text-green-400",icon:"",descripcion:"Procesando en la ALU",pasos:["La ALU ejecuta la operacin aritmtica o lgica con los operandos."]},{id:"escritura",label:"Escribir resultado",color:"text-purple-400",icon:"",descripcion:"Escribiendo resultado en registros",pasos:["El resultado de la operacin se almacena en el registro destino."]}]}];function que(t,e){return t==="Captacin"?"text-blue-400":t==="Ejecucin"?/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-400":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-400":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-400"):t==="Escritura"?"text-purple-400":t==="Obtencin de operandos"?"text-yellow-400":"text-stone-400"}function Yue(){const t=it(mt),e=it(Ph),n=it(hn),i=it(Kv),[r]=rf(),[s,o]=b.useState(!1),a=b.useRef(null),l=(c,u)=>{const[d,...h]=c.split(":"),p=h.join(":").trim();return{cycle:u,stage:d.trim(),action:p}};return b.useEffect(()=>{if(t){const c=D.get(Fn),u=l(t,c);D.set(Ph,d=>[...d,u])}},[t]),b.useEffect(()=>D.sub(Fn,u=>{u===0&&D.set(Ph,[])}),[]),b.useEffect(()=>{n.type==="running"&&i&&$i({title:"El programa ha sido modificado",description:"La ejecucin se reiniciar desde el principio para aplicar los cambios.",variant:"info"})},[n,i]),b.useEffect(()=>{const c=a.current;c&&(c.scrollTop=c.scrollHeight)},[e]),r.showInstructionCycle?f.jsx("div",{className:"absolute left-[120px] top-[520px] z-10 h-min w-[360px]",children:f.jsxs("div",{className:"rounded-lg border-2 border-stone-400 bg-stone-800 shadow-lg",children:[f.jsx("div",{className:"border-b-2 border-stone-600 bg-stone-700 px-4 py-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-lg",children:""}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-bold text-stone-200",children:"Ciclo de Instruccin"}),f.jsx("p",{className:"text-xs text-stone-400",children:"Seguimiento paso a paso"})]})]}),f.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-green-500/20 px-2 py-1",children:[f.jsx("div",{className:"size-2 animate-pulse rounded-full bg-green-400"}),f.jsx("span",{className:"text-xs font-medium text-green-300",children:"Activo"})]})]})}),f.jsxs("div",{ref:a,className:"max-h-80 overflow-y-auto p-3",children:[e.map((c,u)=>{var p;const d=u===0||e[u-1].stage!==c.stage,h=u===e.length-1;return f.jsxs("div",{className:"mb-3",children:[d&&f.jsx("div",{className:"mb-3",children:f.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-stone-700/50 p-2",children:[f.jsx("span",{className:"text-lg",children:Wue(c.stage)}),f.jsxs("div",{children:[f.jsx("h4",{className:`text-sm font-bold ${Hue(c.stage)}`,children:c.stage}),f.jsxs("p",{className:"text-xs text-stone-400",children:[c.stage==="Captacin"&&f.jsxs(f.Fragment,{children:["Leer instruccin",f.jsx("button",{className:"ml-2 rounded bg-mantis-400/20 px-1 py-0.5 text-xs text-mantis-400 transition-colors hover:bg-mantis-400/40",onClick:()=>o(g=>!g),children:s?" Ocultar pasos":"+ Ver pasos"})]}),c.stage==="Obtencin de operandos"&&"Preparar datos",c.stage==="Ejecucin"&&"Procesar instruccin",c.stage==="Escritura"&&"Guardar resultado",c.stage==="Interrupcin"&&"Manejar interrupcin"]}),c.stage==="Captacin"&&s&&f.jsx("ul",{className:"ml-2 mt-2 list-decimal text-xs text-blue-300",children:(p=Kue.find(g=>g.id==="captacion"))==null?void 0:p.pasos.map((g,m)=>f.jsx("li",{children:g},m))})]})]})}),c.stage==="Interrupcin"?f.jsx("div",{className:`rounded-lg border-l-4 border-red-400 bg-red-900/20 p-3 ${h?"ring-2 ring-red-400/30":""}`,children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm",children:""}),f.jsx("span",{className:`text-sm font-medium ${LR(c.stage,c.action)}`,children:c.action})]})}):f.jsxs("div",{className:`flex items-center gap-3 rounded-lg border p-3 ${c.stage==="Ejecucin"?`${Gue(c.action)} ${h?"ring-2 ring-stone-400/30":""}`:`border-stone-600 bg-stone-800/50 ${h?"bg-stone-700/50 ring-2 ring-stone-400/30":""}`}`,children:[f.jsx("div",{className:`flex size-8 items-center justify-center rounded-full bg-stone-700 text-sm font-bold ${que(c.stage,c.action)}`,children:c.cycle}),f.jsx("div",{className:"flex-1",children:f.jsx("span",{className:`text-sm font-medium ${LR(c.stage,c.action)}`,children:c.action})}),h&&f.jsx("div",{className:"flex size-2 animate-pulse rounded-full bg-stone-400"})]})]},u)}),e.length===0&&f.jsx("div",{className:"flex items-center justify-center py-8",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mb-3 text-4xl",children:""}),f.jsx("h4",{className:"mb-1 text-sm font-bold text-stone-300",children:"Esperando instrucciones"}),f.jsx("p",{className:"text-xs text-stone-500",children:"Ejecuta un programa para ver el ciclo"})]})})]}),f.jsx("div",{className:"border-t border-stone-600 bg-stone-800/50 px-4 py-2",children:f.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[f.jsxs("span",{children:["Ciclos de instruccin: ",D.get(Fn)]}),f.jsx("span",{children:"Monitor en tiempo real"})]})})]})}):null}function Xue(){const t=Ht(),{devices:e}=jn();return e.hasIOBus?f.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:f.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function Jue(){const{devices:t}=jn(),e=it(ey),n=it(ty),i=b.useRef(null),r=b.useRef(null),s=b.useRef(null),o=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),a=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),l="M 750 545 H 800",{path:c,strokeDashoffset:u,opacity:d}=Ge("bus.rd"),{path:h,strokeDashoffset:p,opacity:g}=Ge("bus.wr");return f.jsxs(f.Fragment,{children:[e&&f.jsx(Que,{pathRef:r,progressSpring:u}),n&&f.jsx(ede,{pathRef:s,progressSpring:p}),f.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[f.jsx("path",{ref:i,className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:o}),f.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:o}),e&&f.jsx(qe.path,{ref:r,d:c,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),e&&f.jsx(qe.path,{d:c,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),f.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:a}),f.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:a}),n&&f.jsx(qe.path,{ref:s,d:h,className:"fill-none stroke-orange-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,146,60,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),n&&f.jsx(qe.path,{d:h,className:"fill-none stroke-orange-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),t.hasIOBus&&f.jsxs(f.Fragment,{children:[f.jsx(Pn,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),f.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:l}),f.jsx(qe.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:l,style:Ge("bus.mem")})]}),t.pic&&f.jsx(Pn,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&f.jsx(Pn,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&f.jsx(Pn,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&f.jsx(Pn,{springs:"bus.handshake",d:"M 710 595 V 950 H 900"}),t.pic&&f.jsxs(f.Fragment,{children:[f.jsx(Pn,{springs:"bus.intr",d:"M 110 700 V 470"}),f.jsx(Pn,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&f.jsx(Pn,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&f.jsx(Pn,{springs:"bus.int1",d:"M 475 955 H 400 V 900"}),t.pic&&t.handshake&&f.jsx(Pn,{springs:"bus.int2",d:"M 900 1075 H 300 V 900"}),t.pio==="switches-and-leds"&&f.jsxs(f.Fragment,{children:[f.jsx(Pn,{springs:"bus.switches->pio",d:"M 1300 758 H 1120"}),f.jsx(Pn,{springs:"bus.pio->leds",d:"M 1120 868 H 1300"})]}),t.pio==="printer"&&f.jsxs(f.Fragment,{children:[f.jsx(Pn,{springs:"bus.printer.strobe",d:"M 1120 770 H 1225 V 992 H 1300"}),f.jsx(Pn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1210 V 782 H 1120"}),f.jsx(Pn,{springs:"bus.printer.data",d:"M 1120 850 H 1175 V 1062 H 1300"})]}),t.handshake==="printer"&&f.jsxs(f.Fragment,{children:[f.jsx(Pn,{springs:"bus.printer.strobe",d:"M 1120 992 H 1300"}),f.jsx(Pn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1120"}),f.jsx(Pn,{springs:"bus.printer.data",d:"M 1120 1062 H 1300"})]})]})]})}function Pn({d:t,springs:e}){return f.jsxs(f.Fragment,{children:[f.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),f.jsx("path",{className:"fill-none stroke-stone-700 stroke-[3px]",strokeLinejoin:"round",d:t}),f.jsx(qe.path,{d:t,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Ge(e)}),f.jsx(qe.path,{d:t,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Ge(e)})]})}function Zue(){const t=Ht(),{devices:e}=jn();return f.jsxs(f.Fragment,{children:[f.jsx(Qi,{style:{left:385,top:405},children:"rd"}),f.jsx(Qi,{style:{left:385,top:425},children:"wr"}),e.hasIOBus&&f.jsxs(f.Fragment,{children:[f.jsx(Qi,{children:"io/m"}),f.jsx(Qi,{children:t("computer.chip-select.mem")})]}),e.pic&&f.jsx(Qi,{children:t("computer.chip-select.pic")}),e.timer&&f.jsx(Qi,{children:t("computer.chip-select.timer")}),e.pio&&f.jsx(Qi,{children:t("computer.chip-select.pio")}),e.handshake&&f.jsx(Qi,{children:t("computer.chip-select.handshake")}),e.pic&&f.jsxs(f.Fragment,{children:[f.jsx(Qi,{children:"intr"}),f.jsx(Qi,{children:"inta"})]}),e.printer&&f.jsxs(f.Fragment,{children:[f.jsx(Qi,{children:"strobe"}),f.jsx(Qi,{children:"busy"}),f.jsx(Qi,{children:"data"})]})]})}function Qi({children:t,style:e}){return f.jsx("span",{className:"pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",style:e,children:t})}function Que({pathRef:t,progressSpring:e}){const[n,i]=b.useState(!0),r=up(ey),[s,o]=b.useState(!1),[a,l]=b.useState(0);if(b.useEffect(()=>{if(!e||typeof e.get!="function")return;let d=!0;function h(){if(!d)return;const p=e.get();l(1-p),p>0&&requestAnimationFrame(h)}return h(),()=>{d=!1}},[e]),b.useEffect(()=>{if(!t.current){const d=setTimeout(()=>o(h=>!h),10);return()=>clearTimeout(d)}o(!0)},[t]),b.useEffect(()=>{s&&a>=1&&(i(!1),setTimeout(()=>r(!1),100))},[a,s,r]),!n||!s)return null;let c=0,u=0;if(t.current){const d=t.current,h=d.getTotalLength(),p=d.getPointAtLength(a*h);c=p.x+40,u=p.y}else c=380+420*a+40,u=420;return f.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:c,top:u-32,color:"#ef4444",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:n?1:0},children:"Read"})}function ede({pathRef:t,progressSpring:e}){const[n,i]=b.useState(!0),r=up(ty),[s,o]=b.useState(!1),[a,l]=b.useState(0);if(b.useEffect(()=>{if(!e||typeof e.get!="function")return;let d=!0;function h(){if(!d)return;const p=e.get();l(1-p),p>0&&requestAnimationFrame(h)}return h(),()=>{d=!1}},[e]),b.useEffect(()=>{if(!t.current){const d=setTimeout(()=>o(h=>!h),10);return()=>clearTimeout(d)}o(!0)},[t]),b.useEffect(()=>{s&&a>=1&&(i(!1),setTimeout(()=>r(!1),100))},[a,s,r]),!n||!s)return null;let c=0,u=0;if(t.current){const d=t.current,h=d.getTotalLength(),p=d.getPointAtLength(a*h);c=p.x+40,u=p.y}else c=380+420*a+40,u=440;return f.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:c,top:u+12,color:"#f59e42",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:n?1:0},children:"Write"})}function tde(){const{devices:t}=jn(),e=["M 610 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 629 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" "),{path:i,strokeDashoffset:r,opacity:s}=Ge("bus.data"),{path:o,strokeDashoffset:a,opacity:l}=Ge("bus.address");return f.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] size-full",children:[f.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),f.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:n}),f.jsx(qe.path,{d:i,className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),f.jsx(qe.path,{d:i,className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),f.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),f.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:e}),f.jsx(qe.path,{d:o,className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}}),f.jsx(qe.path,{d:o,className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}})]})}function nde(){return f.jsxs(f.Fragment,{children:[f.jsx(tde,{}),f.jsx(Jue,{}),f.jsx(Zue,{}),f.jsx(Xue,{})]})}function ide(){const{devices:t}=jn();if(!t.clock)return null;const e=Ge("clock.angle");return f.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:f.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx(qe.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}const rde={register:{beginner:"Un registro es como una caja pequea donde la CPU guarda datos temporalmente. Es muy rpido de acceder.",intermediate:"Los registros son memoria de acceso rpido dentro de la CPU. Son ms rpidos que la RAM pero tienen menos capacidad.",advanced:"Registros de propsito general (AL, BL, CL, DL) para operaciones aritmticas. Cada uno puede almacenar 8 bits."},memory:{beginner:"La memoria RAM es como un gran almacn donde se guardan programas y datos. Cada ubicacin tiene una direccin nica.",intermediate:"Memoria de acceso aleatorio (RAM) de 256 bytes. La CPU puede leer y escribir en cualquier direccin.",advanced:"Memoria principal de 256 bytes con direccionamiento de 8 bits (00-FF). Organizada en celdas de 8 bits cada una."},alu:{beginner:'La ALU (Unidad Aritmtico-Lgica) es el "cerebro matemtico" de la CPU. Realiza sumas, restas y comparaciones.',intermediate:"Arithmetic Logic Unit procesa operaciones matemticas y lgicas. Recibe operandos y devuelve resultados.",advanced:"ALU de 8 bits que ejecuta operaciones: ADD, SUB, AND, OR, XOR, NOT, CMP. Incluye flags de estado (Z, N, C)."},bus:{beginner:'Los buses son como "carreteras" por donde viajan los datos entre los componentes de la computadora.',intermediate:"Buses de datos y control conectan CPU, memoria y perifricos. El bus de datos transporta informacin.",advanced:"Bus de datos de 8 bits bidireccional, bus de direcciones de 8 bits, y lneas de control para sincronizacin."},instruction:{beginner:"Una instruccin es un comando que le dice a la CPU qu operacin realizar, como sumar dos nmeros.",intermediate:"Cada instruccin tiene un cdigo de operacin (opcode) y operandos. La CPU las ejecuta secuencialmente.",advanced:"Formato de instruccin: opcode (1 byte) + operandos. Ejemplos: MOV, ADD, JMP, CALL. Ciclo fetch-decode-execute."},"program-counter":{beginner:"El contador de programa (IP) indica qu instruccin ejecutar a continuacin. Se incrementa automticamente.",intermediate:"Program Counter (IP) contiene la direccin de la siguiente instruccin. Se actualiza en cada ciclo.",advanced:"Instruction Pointer (IP) de 8 bits. Incrementa en 1-2 bytes segn el tamao de la instruccin actual."},flags:{beginner:"Las banderas son indicadores que muestran el resultado de operaciones, como si el resultado fue cero.",intermediate:"Flags de estado: Zero (Z), Negative (N), Carry (C). Se actualizan automticamente en operaciones.",advanced:"Flags de 1 bit: Z (resultado cero), N (resultado negativo), C (acarreo/overflow). Controlan saltos condicionales."},stack:{beginner:"La pila es como una pila de platos. Solo puedes agregar o quitar del tope. til para guardar direcciones de retorno.",intermediate:"Stack Pointer (SP) apunta al tope de la pila. PUSH agrega datos, POP los retira. LIFO (Last In, First Out).",advanced:"Pila de 256 bytes con SP de 8 bits. PUSH decrementa SP, POP lo incrementa. Usada para CALL/RET y variables locales."},interrupt:{beginner:"Una interrupcin es como un timbre que interrumpe lo que est haciendo la CPU para atender algo urgente.",intermediate:"Las interrupciones permiten que dispositivos externos notifiquen a la CPU eventos importantes.",advanced:"Sistema de interrupciones con PIC (Programmable Interrupt Controller). IRET retorna de la rutina de interrupcin."},peripheral:{beginner:"Los perifricos son dispositivos externos como teclado, pantalla y LEDs que se conectan a la computadora.",intermediate:"Perifricos se comunican con la CPU a travs de puertos de entrada/salida (I/O).",advanced:"Sistema de I/O con PIO (Programmable I/O) y mdulos especficos para cada perifrico."},assembly:{beginner:"El lenguaje ensamblador es un lenguaje de programacin que usa palabras en lugar de nmeros para las instrucciones.",intermediate:"Cada instruccin de ensamblador se traduce a cdigo de mquina. El ensamblador hace esta traduccin.",advanced:"Sintaxis: etiqueta, mnemnico, operandos, comentarios. Directivas como ORG, DB, DW para datos."},addressing:{beginner:"El direccionamiento es cmo la CPU encuentra los datos que necesita en la memoria.",intermediate:"Modos de direccionamiento: inmediato, directo, indirecto. Cada uno accede a datos de forma diferente.",advanced:"Direccionamiento inmediato (valor en instruccin), directo (direccin en instruccin), indirecto (direccin en registro)."}},sde={beginner:id,intermediate:cm,advanced:tD},DR={beginner:"text-blue-400",intermediate:"text-yellow-400",advanced:"text-purple-400"},I9=b.memo(({concept:t,level:e="beginner",children:n,className:i})=>{const[r,s]=b.useState(e),o=rde[t];if(!o)return console.warn(`No educational content found for concept: ${t}`),f.jsx(f.Fragment,{children:n});const a=o[r],l=sde[r],c=f.jsxs("div",{className:"max-w-xs p-3",children:[f.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[f.jsx(Oe,{icon:l,className:Q("text-sm",DR[r])}),f.jsxs("span",{className:Q("text-sm font-medium",DR[r]),children:["Nivel"," ",r==="beginner"?"Bsico":r==="intermediate"?"Intermedio":"Avanzado"]})]}),f.jsx("p",{className:"mb-3 text-sm text-stone-300",children:a}),f.jsx("div",{className:"flex gap-1",children:["beginner","intermediate","advanced"].map(u=>f.jsx("button",{onClick:d=>{d.stopPropagation(),s(u)},className:Q("rounded px-2 py-1 text-xs transition-colors",r===u?"bg-mantis-600 text-white":"bg-stone-700 text-stone-400 hover:bg-stone-600"),children:u==="beginner"?"B":u==="intermediate"?"I":"A"},u))})]});return f.jsx(vr,{content:c,position:"top",children:f.jsxs("span",{className:Q("inline-flex cursor-help items-center gap-1",i),children:[n,f.jsx(Oe,{icon:id,className:"text-xs text-mantis-400 opacity-70 transition-opacity hover:opacity-100"})]})})});I9.displayName="EducationalTooltip";var Vb="Popover",[j9,I0e]=_s(Vb,[uf]),_m=uf(),[ode,Ll]=j9(Vb),L9=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=_m(e),l=b.useRef(null),[c,u]=b.useState(!1),[d,h]=dl({prop:i,defaultProp:r??!1,onChange:s,caller:Vb});return f.jsx(oF,{...a,children:f.jsx(ode,{scope:e,contentId:tf(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:c,onCustomAnchorAdd:b.useCallback(()=>u(!0),[]),onCustomAnchorRemove:b.useCallback(()=>u(!1),[]),modal:o,children:n})})};L9.displayName=Vb;var D9="PopoverAnchor",ade=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Ll(D9,n),s=_m(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return b.useEffect(()=>(o(),()=>a()),[o,a]),f.jsx(Tb,{...s,...i,ref:e})});ade.displayName=D9;var $9="PopoverTrigger",F9=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Ll($9,n),s=_m(n),o=ut(e,r.triggerRef),a=f.jsx(He.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":H9(r.open),...i,ref:o,onClick:ye(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:f.jsx(Tb,{asChild:!0,...s,children:a})});F9.displayName=$9;var XE="PopoverPortal",[lde,cde]=j9(XE,{forceMount:void 0}),z9=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=Ll(XE,e);return f.jsx(lde,{scope:e,forceMount:n,children:f.jsx(ra,{present:n||s.open,children:f.jsx(wm,{asChild:!0,container:r,children:i})})})};z9.displayName=XE;var Kd="PopoverContent",B9=b.forwardRef((t,e)=>{const n=cde(Kd,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=Ll(Kd,t.__scopePopover);return f.jsx(ra,{present:i||s.open,children:s.modal?f.jsx(dde,{...r,ref:e}):f.jsx(fde,{...r,ref:e})})});B9.displayName=Kd;var ude=Td("PopoverContent.RemoveScroll"),dde=b.forwardRef((t,e)=>{const n=Ll(Kd,t.__scopePopover),i=b.useRef(null),r=ut(e,i),s=b.useRef(!1);return b.useEffect(()=>{const o=i.current;if(o)return cF(o)},[]),f.jsx(Ib,{as:ude,allowPinchZoom:!0,children:f.jsx(U9,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ye(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ye(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),fde=b.forwardRef((t,e)=>{const n=Ll(Kd,t.__scopePopover),i=b.useRef(!1),r=b.useRef(!1);return f.jsx(U9,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),U9=b.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,h=Ll(Kd,n),p=_m(n);return AE(),f.jsx(Nb,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:f.jsx(bm,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:f.jsx($E,{"data-state":H9(h.open),role:"dialog",id:h.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),V9="PopoverClose",hde=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Ll(V9,n);return f.jsx(He.button,{type:"button",...i,ref:e,onClick:ye(t.onClick,()=>r.onOpenChange(!1))})});hde.displayName=V9;var pde="PopoverArrow",mde=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=_m(n);return f.jsx(FE,{...r,...i,ref:e})});mde.displayName=pde;function H9(t){return t?"open":"closed"}var gde=L9,vde=F9,yde=z9,W9=B9;const JE=gde,ZE=vde,Hb=b.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>f.jsx(yde,{children:f.jsx(W9,{ref:r,align:e,sideOffset:n,className:Q("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));Hb.displayName=W9.displayName;function pr({name:t,valueAtom:e,springs:n,emphasis:i=!1,className:r}){const s=Ht(),o=it(e),a=o.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t,u=["AL","BL","CL","DL"].includes(t),d=t==="IP",h=t==="SP",p=t==="MBR",g=t==="MAR",m=t==="IR",v=["id","ri"].includes(t),y=c==="FLAGS";return f.jsxs(JE,{children:[f.jsx(ZE,{asChild:!0,children:f.jsxs(qe.button,{title:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c,className:Q("flex cursor-pointer items-center font-mono leading-none transition-opacity",u||d||h||p||g||m||v?"size-10 justify-center rounded border-2 text-lg font-bold shadow-[0_2px_8px_0_rgba(60,180,120,0.10)] transition-all duration-200 hover:scale-110 hover:shadow-xl":y?"min-h-[32px] min-w-[90px] gap-2 rounded border-2 border-yellow-400 bg-gradient-to-br from-yellow-900 via-yellow-800 to-stone-900 px-2.5 py-0.5 font-bold text-yellow-200 shadow-[0_2px_8px_0_rgba(250,204,21,0.10)]":"rounded-md border bg-stone-800 px-2 py-1",u?"border-mantis-500 bg-stone-800 text-mantis-300":d?"border-red-500 bg-stone-800 text-red-300":h?"border-yellow-400 bg-stone-800 text-yellow-300":p||g||m?"border-indigo-400 bg-stone-800 text-indigo-300":v?"border-cyan-400 bg-stone-800 text-cyan-300":y?"":i?"border-mantis-400 text-lg":"border-stone-600 text-base",r),style:c==="left"||c==="right"||c==="result"?{backgroundColor:"transparent"}:Ge(n),children:[u||h||p||g||m||v?f.jsx(f.Fragment,{children:f.jsx("span",{className:Q(u||v||m||g||p?"mt-4":"mt-2","font-mono text-base font-bold"),children:a.toString("hex")})}):d?f.jsx(f.Fragment,{children:f.jsx("span",{className:Q("mt-4 font-mono text-base font-bold text-red-300"),children:a.toString("hex")})}):c==="left"||c==="right"||c==="result"?f.jsx("span",{className:"ml-12 font-mono text-xs font-bold",style:{color:c==="left"?"#34D399":c==="right"?"#60A5FA":"#F59E0B",fontSize:"12px",fontWeight:"bold",textShadow:c==="left"?"0 0 8px rgba(52, 211, 153, 0.6)":c==="right"?"0 0 8px rgba(96, 165, 250, 0.6)":"0 0 8px rgba(245, 158, 11, 0.6)"},children:a.toString("hex")}):f.jsxs(f.Fragment,{children:[f.jsx("span",{className:Q("mr-2 font-extrabold tracking-wide",u&&"text-mantis-300 drop-shadow",y&&"text-yellow-200",v&&"text-cyan-300",(c==="left"||c==="right")&&"text-xs"),children:c}),f.jsx("span",{className:Q("rounded px-1 py-0.5 font-light",u?"border border-mantis-400 bg-stone-950 text-mantis-300":y?"border border-yellow-400 bg-yellow-950 text-yellow-200":v?"border border-cyan-400 bg-cyan-950 text-cyan-200":"border border-stone-600 bg-stone-900 text-white"),children:a.toString("hex")})]}),y&&f.jsxs("span",{className:"ml-2 flex gap-1",children:[f.jsx("span",{className:Q("rounded border px-1 text-xs font-bold",Number(a)&2?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"Z"}),f.jsx("span",{className:Q("rounded border px-1 text-xs font-bold",Number(a)&1?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"C"})]})]})}),f.jsxs(Hb,{className:"w-60",children:[f.jsx("div",{className:"px-4 py-2",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("p",{className:"font-medium text-white",children:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c}),c!=="left"&&c!=="right"&&c!=="result"&&f.jsx(I9,{concept:"register",level:"beginner",children:f.jsx("span",{className:"text-xs text-mantis-400",children:""})})]})}),f.jsx("hr",{className:"border-stone-600"}),f.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(x=>f.jsxs("li",{children:[f.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${x}`)}),":"," ",f.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(x)})]},x))})]})]})}function bde(){const t=it(Le.FLAGS),e=it(MD),n=it(bi),[i,r]=b.useState(!1),[s,o]=b.useState(""),[a,l]=b.useState(""),[c,u]=b.useState(""),[d,h]=b.useState(""),[p,g]=b.useState(""),[m,v]=b.useState(""),y=it(PD),[x]=rf(),w=b.useCallback(()=>n&&"metadata"in n&&n.metadata?`${n.metadata.name}${n.metadata.operands.length?" "+n.metadata.operands.join(", "):""}`:"",[n]),S=O=>["ADD","SUB","CMP","AND","OR","XOR"].some(H=>O.startsWith(H)),_=O=>{let T="AL",H="BL",L="AL";const K=[/ADD\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/SUB\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/CMP\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/AND\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/OR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/XOR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/];for(const te of K){const U=O.match(te);if(U){T=U[1],H=U[2],/\[.*\]/.test(T)&&(T="MBR"),/\[.*\]/.test(H)&&(H="MBR"),L=U[1];break}}const X=["AL","BL","CL","DL","MBR"];return X.includes(T)||(T="AL"),X.includes(H)||(H="BL"),X.includes(L)||(L="AL"),{left:T,right:H,destination:L}};b.useEffect(()=>{const O=L=>{console.log(" handleInstruction llamado con:",L);const X=w()||L;if(console.log(" Instruccin completa a usar:",X),L)if(S(X)){r(!0);const{left:U,right:z,destination:ie}=_(X);console.log(" Registros detectados:",{left:U,right:z,destination:ie}),h(U),g(z),v(ie);let be,J;U==="MBR"&&z!=="MBR"?(be=Rr(U,"left",L,void 0,{separateMBRPaths:!0,direction:"left"}),J=Rr(z,"right",L)):z==="MBR"&&U!=="MBR"?(be=Rr(U,"left",L),J=Rr(z,"right",L,void 0,{separateMBRPaths:!0,direction:"right"})):(be=Rr(U,"left",L),J=Rr(z,"right",L));const le=Rr("result start",ie,L),F="M 455 45 L 465 45 L 550 45 L 550 16 L 90 16 L 90 85 L 130 85 L 220 85",$="M 455 85 L 465 85 L 550 85 L 550 250 L 90 250 L 90 145 L 125 145 L 220 145",V="M 280 115 L 272 115 L 370 115 L 370 250 L 421 250 L 425 45";o(be||F),l(J||$),u(le||V)}else r(!1),o(""),l(""),u(""),h(""),g(""),v("");else r(!1),o(""),l(""),u(""),h(""),g(""),v("")},T=L=>{const K=L,X=w();O(X||K.detail.instruction)},H=L=>{const K=L;if(K.detail&&K.detail.instruction){const X=w();O(X||K.detail.instruction)}};return window.addEventListener("instructionChange",T),window.addEventListener("cpu:alu.execute",H),()=>{window.removeEventListener("instructionChange",T),window.removeEventListener("cpu:alu.execute",H)}},[n,w]);const E=t.bit(1),C=t.bit(0),N=t.bit(3),M=t.bit(4),I=t.bit(2);return f.jsxs(f.Fragment,{children:[f.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[s&&f.jsx(qe.path,{className:"fill-none stroke-green-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",d:s,pathLength:1,strokeDasharray:1,style:Ge("cpu.alu.operands")}),a&&f.jsx(qe.path,{className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",d:a,pathLength:1,strokeDasharray:1,style:Ge("cpu.alu.operands")}),c&&f.jsx(qe.path,{className:"fill-none stroke-amber-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,191,36,0.6)]",strokeLinejoin:"round",d:c,pathLength:1,strokeDasharray:1,style:Ge("cpu.alu.results")}),s&&f.jsx(qe.path,{className:"fill-none stroke-green-300 stroke-1 opacity-50",strokeLinejoin:"round",d:s,pathLength:1,strokeDasharray:1,style:Ge("cpu.alu.operands")}),a&&f.jsx(qe.path,{className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",d:a,pathLength:1,strokeDasharray:1,style:Ge("cpu.alu.operands")}),c&&f.jsx(qe.path,{className:"fill-none stroke-amber-300 stroke-1 opacity-50",strokeLinejoin:"round",d:c,pathLength:1,strokeDasharray:1,style:Ge("cpu.alu.results")}),d&&p&&i&&s&&a&&f.jsxs(qe.text,{x:"125",y:"65",fill:"#34D399",fontSize:"12",fontWeight:"bold",style:Ge("cpu.alu.cog"),children:[d,"="]}),d&&p&&i&&s&&a&&f.jsxs(qe.text,{x:"125",y:"168",fill:"#60A5FA",fontSize:"12",fontWeight:"bold",style:Ge("cpu.alu.cog"),children:[p,"="]}),m&&i&&c&&f.jsxs(qe.text,{x:"310",y:"95",fill:"#F59E0B",fontSize:"12",fontWeight:"bold",style:Ge("cpu.alu.cog"),children:[m,"="]}),f.jsxs("defs",{children:[f.jsxs("linearGradient",{id:"aluGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[f.jsx("stop",{offset:"0%",stopColor:"#374151"}),f.jsx("stop",{offset:"50%",stopColor:"#4B5563"}),f.jsx("stop",{offset:"100%",stopColor:"#1F2937"})]}),f.jsx("filter",{id:"aluShadow",children:f.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"rgba(0,0,0,0.3)"})})]}),f.jsx("path",{d:"M 220 60 v 50 l 20 12 l -20 12 v 50 l 60 -36 v -52 Z",fill:"url(#aluGradient)",stroke:"#6B7280",strokeWidth:"2",strokeLinejoin:"round",filter:"url(#aluShadow)"}),f.jsx("text",{x:"250",y:"105",fill:"#E5E7EB",fontSize:"12",fontWeight:"bold",textAnchor:"middle",children:"ALU"})]}),f.jsx(qe.span,{className:"icon-[lucide--settings] absolute left-[244px] top-[120px] block size-5 text-stone-300",style:{transform:Ge("cpu.alu.cog").rot.to(O=>`rotate(${O*60}deg)`)}}),i&&f.jsx(qe.span,{className:"absolute left-[244px] top-[40px] z-30 flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:Ge("cpu.alu.operation"),children:e}),f.jsxs(qe.div,{className:Q("absolute flex min-h-[30px] w-min min-w-[38px] items-center gap-0.5 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 px-0.5 py-1 font-bold text-stone-200 shadow-lg ring-1 ring-stone-300",x.flagsVisibility==="SF_OF_CF_ZF"?"left-[210px] top-[190px]":"left-[230px] top-[190px]"),style:Ge("cpu.FLAGS"),children:[f.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"FLAGS"}),f.jsxs("div",{className:"mt-2 flex items-center gap-0.5",children:[y&&f.jsx("span",{className:Q("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",M?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"I"}),x.flagsVisibility==="SF_OF_CF_ZF"&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:Q("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",N?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"S"}),f.jsx("span",{className:Q("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",I?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"O"})]}),f.jsx("span",{className:Q("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",E?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"C"}),f.jsx("span",{className:Q("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",C?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"Z"})]})]})]})}function xde({progress:t,phase:e,memAnimKey:n}){const{opacity:r,filterIntensity:s}=F6({opacity:t.to(o=>o===0?.4:o===1?1:.4),filterIntensity:t.to(o=>o===0?.25:o===1?.6:.25),config:{tension:280,friction:60,duration:300}});return t.to(o=>o===1),f.jsx(qe.div,{style:{opacity:r,filter:s.to(o=>`drop-shadow(0 0 ${8*o}px rgba(56,189,248,${o}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:f.jsxs("svg",{width:"90",height:"42",viewBox:"0 0 90 42",children:[f.jsx("rect",{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"#0369a1",stroke:"#38bdf8",strokeWidth:"2.5"}),Array.from({length:4}).map((o,a)=>f.jsx("rect",{x:2,y:10+a*5,width:8,height:2.5,rx:1.2,fill:"#38bdf8"},a)),Array.from({length:8}).map((o,a)=>f.jsx(qe.rect,{x:60,y:8+a*3.2,width:24,height:2.5,rx:1.2,fill:t.to(l=>l===1?"#7dd3fc":"#0ea5e9"),style:{filter:t.to(l=>l===1?"drop-shadow(0 0 8px #38bdf8)":"none")}},a)),Array.from({length:5}).map((o,a)=>f.jsx(qe.rect,{x:15,y:t.to(()=>12+a*3.5),width:40,height:2.8,rx:1.4,fill:t.to(l=>l!==1?"#0c4a6e":l===1?"#7dd3fc":"#0c4a6e"),style:{filter:t.to(l=>l!==1?"none":l===1?"drop-shadow(0 0 6px #38bdf8)":"none"),transition:"fill 0.7s, filter 0.7s"}},a)),f.jsx(qe.rect,{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"none",stroke:"#7dd3fc",strokeWidth:"2.5",strokeDasharray:"160",strokeDashoffset:t.to(o=>o===1?0:160),style:{opacity:t.to(o=>o===1?.8:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})})}function wde({progress:t,phase:e}){return f.jsxs(f.Fragment,{children:[Array.from({length:5}).map((i,r)=>f.jsx(qe.rect,{x:16,y:t.to(()=>10+r*4),width:38,height:3,rx:1,fill:t.to(s=>e==="fetching"&&s===0||s===0?"#581c87":s>=(r+1)/5?"#f0abfc":Math.floor(s*5)===r&&s>0&&s<1?"#fff1fb":"#581c87"),style:{filter:t.to(s=>e==="fetching"&&s===0||s===0?"none":s>=(r+1)/5?"drop-shadow(0 0 6px #e879f9)":Math.floor(s*5)===r&&s>0&&s<1?"drop-shadow(0 0 12px #e879f9)":"none"),transition:"fill 0.7s, filter 0.7s"}},r)),f.jsx(qe.rect,{x:15,y:t.to(i=>10+Math.floor(i*5)*4-.5),width:40,height:3.5,rx:1.5,fill:"#e879f9",style:{opacity:t.to(i=>i>0&&i<1?.25+.25*Math.sin(i*Math.PI):0),transition:"y 0.3s, opacity 0.2s"}}),f.jsx(qe.rect,{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"none",stroke:"#f0abfc",strokeWidth:"2",strokeDasharray:"160",strokeDashoffset:t.to(i=>e==="fetching"&&i===0||i===0?160:160-160*i),style:{opacity:t.to(i=>i>0&&i<1&&e==="fetching-operands"?.7:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})}function Sde({progress:t,phase:e,memAnimKey:n}){const{opacity:i,filterIntensity:r}=F6({opacity:t.to(s=>s===0?.4:s>0&&s<1?1:.8),filterIntensity:t.to(s=>s===0?.25:s>0&&s<1?.6:.4),config:{tension:280,friction:60,duration:300}});return f.jsx(qe.div,{style:{opacity:i,filter:r.to(s=>`drop-shadow(0 0 ${8*s}px rgba(232,121,249,${s}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:f.jsxs("svg",{width:"70",height:"38",viewBox:"0 0 70 38",className:"mb-0.5",children:[f.jsx("rect",{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"#a21caf",stroke:"#e879f9",strokeWidth:"2"}),Array.from({length:4}).map((s,o)=>f.jsx("rect",{x:2,y:9+o*6,width:6,height:2,rx:1,fill:"#e879f9"},o)),Array.from({length:4}).map((s,o)=>f.jsx("rect",{x:62,y:9+o*6,width:6,height:2,rx:1,fill:"#e879f9"},o)),f.jsx(wde,{progress:t,phase:e},n)]})})}function kde(){const[t,e]=b.useState(0);b.useEffect(()=>{let l=0;const c=Ge("cpu.decoder.progress.progress").to(u=>{l===0&&u>0&&e(d=>d+1),l=u});return()=>{typeof c=="function"&&c()}},[]);const n=Ht(),i=it(bi),[r,s]=b.useState(!1),[o,a]=b.useState(!1);return b.useEffect(()=>{let l=null;a(!1);let c;return r?c=Ge("cpu.decoder.progress.progress").to(u=>{u===1?l=setTimeout(()=>{a(!0)},1500):(l&&clearTimeout(l),a(!1))}):a(!1),()=>{l&&clearTimeout(l),typeof c=="function"&&c()}},[r]),f.jsxs(f.Fragment,{children:[f.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[f.jsx(qe.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Ge("cpu.decoder.path")}),f.jsx(qe.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:Ge("cpu.decoder.path")})]}),f.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:f.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:n("computer.cpu.control-unit")})}),f.jsxs("div",{className:"absolute bottom-[17px] left-[30px] flex h-[160px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[f.jsx("div",{className:"min-w-[180px] overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-3 py-1",children:f.jsxs("div",{style:{position:"relative",left:0},children:[f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{style:{position:"relative",left:0,display:"flex",alignItems:"center"},children:[f.jsx("span",{className:"text-sm leading-none",children:n("computer.cpu.decoder")}),f.jsx("button",{type:"button","aria-label":r?"Ocultar memoria de control":"Mostrar memoria de control",className:"ml-2 flex size-6 items-center justify-center rounded-lg bg-gradient-to-r from-mantis-600 to-mantis-500 text-white shadow-lg transition-all duration-300 hover:from-mantis-500 hover:to-mantis-400 focus:outline-none focus:ring-2 focus:ring-mantis-400",style:{fontSize:"1.2em",lineHeight:1,padding:0,minWidth:0,minHeight:0,transform:r?"rotate(180deg)":"rotate(0deg)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:r?"0 4px 12px rgba(34,197,94,0.4)":"0 2px 8px rgba(34,197,94,0.2)"},onClick:()=>s(l=>!l),children:f.jsx("span",{style:{fontWeight:"bold",transform:r?"scale(0.8)":"scale(1)",transition:"transform 0.2s ease-out"},children:r?"":"+"})})]})}),f.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:f.jsx(qe.div,{className:"h-full bg-mantis-400",style:{width:Ge("cpu.decoder.progress.progress").to(l=>`${l*100}%`),opacity:Ge("cpu.decoder.progress.opacity")}})}),f.jsx("div",{className:"flex w-full justify-center",children:r&&f.jsx("div",{className:"flex min-w-[120px] flex-col items-center",children:f.jsxs("div",{className:"flex flex-row items-start gap-4",children:[f.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[f.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-fuchsia-100 drop-shadow-[0_0_6px_rgba(232,121,249,0.6)]",style:{minHeight:"18px"},children:[f.jsx("span",{className:"flex size-4 animate-pulse items-center justify-center rounded-full bg-fuchsia-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(232,121,249,0.6)]",style:{fontVariantNumeric:"tabular-nums",fontFamily:"monospace"},title:"Lectura de microinstrucciones",children:"1"}),"Memoria de control"]}),f.jsx(Sde,{progress:Ge("cpu.decoder.progress.progress"),phase:i==null?void 0:i.phase,memAnimKey:t})]}),f.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[f.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-sky-100 drop-shadow-[0_0_6px_rgba(56,189,248,0.6)]",style:{minHeight:"18px"},children:[f.jsx("span",{className:"flex size-4 animate-pulse items-center justify-center rounded-full bg-sky-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(56,189,248,0.6)]",style:{fontVariantNumeric:"tabular-nums",fontFamily:"monospace"},title:"Envo de seales de control",children:"2"}),"Secuenciador"]}),f.jsx(xde,{progress:Ge("cpu.decoder.progress.progress"),phase:i==null?void 0:i.phase,memAnimKey:t})]})]})})}),f.jsx("div",{className:"flex w-full justify-center",style:{maxHeight:r?90:0,opacity:r?1:0,transform:r?"translateY(0)":"translateY(-10px)",transition:"max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease-out, transform 0.5s ease-out",overflow:"hidden"}})]})}),f.jsx("div",{className:"flex w-full flex-1 items-start justify-center p-1",children:f.jsxs("div",{className:"w-[220px] max-w-[220px]",children:[f.jsx("div",{className:"mb-1 flex items-center justify-between",children:f.jsx("span",{className:"w-16 whitespace-nowrap text-xs font-bold uppercase tracking-wide text-mantis-400",children:"Instruccin"})}),f.jsx("div",{className:"mb-0.5 rounded border border-stone-600 bg-stone-900/80 p-0.5",children:f.jsx("div",{className:"min-w-0 flex-1 text-center",children:i&&"metadata"in i&&i.metadata?f.jsxs("div",{className:"truncate text-xs text-stone-300",children:[f.jsx("span",{className:"font-mono text-mantis-300",children:i.metadata.name}),i.metadata.operands.length>0&&f.jsxs("span",{className:"text-white",children:[" ",i.metadata.operands.join(", ")]})]}):f.jsx("div",{className:"text-xs text-stone-500",children:(i==null?void 0:i.phase)==="stopped"?"CPU detenida":"Esperando..."})})})]})})]})]})}function _de(){const[t,e]=b.useState(!1),[n,i]=b.useState(0);return b.useEffect(()=>{const r=()=>{e(!0),i(s=>s+1),setTimeout(()=>{e(!1)},3e3)};return window.addEventListener("ip-register-update",r),()=>{window.removeEventListener("ip-register-update",r)}},[]),t?f.jsxs(f.Fragment,{children:[f.jsx("style",{children:`
        @keyframes slideUpAndFade {
          0% {
            opacity: 1;
            transform: translateY(0px);
          }
          30% {
            opacity: 1;
            transform: translateY(-30px);
          }
          70% {
            opacity: 1;
            transform: translateY(-30px);
          }
          100% {
            opacity: 0;
            transform: translateY(-50px);
          }
        }
      `}),f.jsx("div",{className:Q("pointer-events-none absolute left-[425px] top-[342px]","font-mono text-lg font-bold"),style:{color:"#ff6347",animation:"slideUpAndFade 3s ease-out forwards"},children:"+1"},n)]}):null}function Cde(){const t=Ht(),e=it(PC),[n,i]=b.useState(!1),[r,s]=b.useState(!1),[o,a]=b.useState(!1);return b.useEffect(()=>{const l=(u,d,h)=>{a(u==="ADD"||u==="SUB"||u==="CMP"||u==="AND"||u==="OR"||u==="XOR"||u==="NOT"||u==="NEG"||u==="DEC"||u==="INC"),i(!!(u==="IRET"||d)),s(!!h)},c=u=>{const d=u;l(d.detail.instruction,d.detail.modeid,d.detail.moderi)};return window.addEventListener("instructionChange",c),()=>{window.removeEventListener("instructionChange",c)}},[]),f.jsxs("div",{"data-testid":"cpu-component",className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),f.jsx(Iie,{showSP:e,showri:r}),f.jsx(fse,{showSP:e,showid:n,showri:r}),o&&f.jsxs(f.Fragment,{children:[f.jsx(Mi,{name:"left",className:Q("left-[96px] top-[49px]","border-transparent","bg-transparent")}),f.jsx(Mi,{name:"right",className:Q("left-[96px] top-[150px]","border-transparent","bg-transparent")}),f.jsx(Mi,{name:"result",className:Q("left-[280px] top-[79px]","border-transparent","bg-transparent")})]}),f.jsx(bde,{}),f.jsxs("div",{className:"absolute left-[450px] top-[30px] z-10",children:[f.jsx(Mi,{name:"AL",emphasis:!0,className:""}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"AL"})]}),f.jsxs("div",{className:"absolute left-[450px] top-[70px] z-10",children:[f.jsx(Mi,{name:"BL",emphasis:!0,className:""}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"BL"})]}),f.jsxs("div",{className:"absolute left-[450px] top-[110px] z-10",children:[f.jsx(Mi,{name:"CL",emphasis:!0,className:""}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"CL"})]}),f.jsxs("div",{className:"absolute left-[450px] top-[150px] z-10",children:[f.jsx(Mi,{name:"DL",emphasis:!0,className:""}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"DL"})]}),n&&f.jsx(Mi,{name:"id",className:Q("left-[450px] top-[190px]","border-cyan-400")}),f.jsxs("div",{className:"absolute left-[450px] top-[332px] z-10",children:[f.jsx(Mi,{name:"IP",emphasis:!0,className:"border-red-500"}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-red-500 bg-red-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-red-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IP"})]}),f.jsxs("div",{className:"absolute left-[610px] top-[332px] z-10",children:[f.jsx(Mi,{name:"MAR",className:"border-indigo-400"}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MAR"})]}),f.jsxs("div",{className:"absolute left-[610px] top-[233px] z-10",children:[f.jsx(Mi,{name:"MBR",className:"border-indigo-400"}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MBR"})]}),f.jsxs("div",{className:"absolute left-[230px] top-[270px] z-10",children:[f.jsx(Mi,{name:"IR",className:"border-indigo-400"}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IR"})]}),f.jsx(kde,{}),e&&f.jsx(Mi,{name:"SP",emphasis:!0,className:Q("left-[450px] top-[292px]","border-yellow-400")}),r&&f.jsxs("div",{className:"absolute left-[450px] top-[372px] z-10",children:[f.jsx(Mi,{name:"ri",emphasis:!0,className:"border-cyan-400"}),f.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-cyan-400 bg-cyan-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-cyan-400",children:"ri"})]}),f.jsx(_de,{})]})}function Mi({name:t,emphasis:e,className:n}){const i=r=>`cpu.${r}`;return f.jsx(pr,{name:t,valueAtom:Le[t],springs:i(t),emphasis:e,className:Q("absolute",n)})}const G9=b.memo(({className:t})=>{const e=Ht(),n=it(wp),i=it(ub),[r]=rf(),[s,o]=b.useState(!1),l=1e3/parseInt(r.cpuSpeed);if(!r.showStatsCPU)return null;const c=i>0?(n/i).toFixed(2):"-",u=n*l,d=l/1e3,h=()=>n===0?"":i===0?"":"",p=()=>n===0?"text-stone-400":i===0?"text-yellow-400":"text-mantis-400",g=f.jsxs("div",{className:"space-y-3 text-xs",children:[f.jsxs("div",{children:[f.jsx("strong",{className:"text-mantis-300",children:"CPI (Ciclos por Instruccin):"}),f.jsx("br",{}),f.jsx("span",{className:"text-stone-300",children:"Mtrica fundamental que indica la eficiencia del procesador. Calculada como el cociente entre ciclos totales e instrucciones ejecutadas. Un CPI ms bajo significa mejor rendimiento."})]}),f.jsxs("div",{children:[f.jsx("strong",{className:"text-mantis-300",children:"Tiempo de CPU:"}),f.jsx("br",{}),f.jsx("span",{className:"text-stone-300",children:"Tiempo real transcurrido durante la ejecucin del programa. Se calcula multiplicando los ciclos totales por el tiempo de cada ciclo segn la velocidad configurada."})]}),f.jsxs("div",{className:"border-t border-stone-600 pt-2",children:[f.jsx("strong",{className:"text-mantis-300",children:"Interpretacin:"}),f.jsx("br",{}),f.jsxs("span",{className:"text-stone-300",children:[" CPI = 1: Instrucciones simples (ideal)",f.jsx("br",{})," CPI > 1: Instrucciones complejas o mltiples ciclos",f.jsx("br",{})," Menor tiempo = mejor rendimiento"]})]})]}),m=f.jsxs("div",{className:"space-y-3 text-xs",children:[f.jsxs("div",{children:[f.jsx("strong",{className:"text-mantis-300",children:"Velocidad CPU (Hz):"}),f.jsx("br",{}),f.jsx("span",{className:"text-stone-300",children:"Frecuencia del reloj del procesador que determina la velocidad de ejecucin. Cada ciclo de reloj ejecuta una microoperacin del procesador."})]}),f.jsxs("div",{children:[f.jsx("strong",{className:"text-mantis-300",children:"Tiempo por Ciclo:"}),f.jsx("br",{}),f.jsx("span",{className:"text-stone-300",children:"Duracin de cada ciclo calculada como 1/velocidad. Por ejemplo, 1 MHz = 1 microsegundo por ciclo."})]}),f.jsxs("div",{className:"border-t border-stone-600 pt-2",children:[f.jsx("strong",{className:"text-mantis-300",children:"Impacto en Rendimiento:"}),f.jsx("br",{}),f.jsxs("span",{className:"text-stone-300",children:[" Mayor Hz = ciclos ms rpidos",f.jsx("br",{})," Menor tiempo total de ejecucin",f.jsx("br",{})," Mejor experiencia de simulacin"]})]})]});return f.jsxs("div",{className:Q("flex flex-col gap-2 rounded-lg border border-stone-600 bg-stone-900/95 p-3 shadow-lg","min-w-[300px] max-w-[350px]",t),children:[f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-bold uppercase tracking-wide text-mantis-400",children:e("computer.cpu.stats")}),f.jsx("button",{onClick:()=>o(!s),className:Q("rounded px-2 py-1 text-xs transition-colors",s?"bg-mantis-400/20 text-mantis-400":"text-stone-400 hover:bg-mantis-400/10 hover:text-mantis-400"),children:s?"":"+"})]})}),f.jsxs("div",{className:"flex items-center gap-3 rounded border border-stone-600 bg-stone-800/80 p-2",children:[f.jsx("div",{className:Q("text-2xl",p()),children:h()}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:Q("text-sm font-semibold",p()),children:n>0?"Ejecutando":"En espera"}),f.jsx("div",{className:"mt-1 text-xs text-stone-400",children:i>0?`${i} instrucciones ejecutadas`:"Sin instrucciones ejecutadas"})]})]}),s&&f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[f.jsx("div",{className:"mb-2 text-xs font-bold text-mantis-400",children:"Mtricas principales:"}),f.jsx("div",{className:"mb-2 text-xs text-stone-400",children:"Estadsticas acumuladas del programa completo"}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-stone-300",children:"Ciclos totales del programa"}),f.jsx("div",{className:"font-mono text-lg text-white",children:n})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-xs text-stone-300",children:e("computer.cpu.instruction-count")}),f.jsx("div",{className:"font-mono text-lg text-white",children:i})]})]})]}),f.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[f.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[f.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Mtricas de Rendimiento:"}),f.jsx(vr,{content:g,position:"top",maxWidth:400,className:"text-stone-400 hover:text-mantis-400 transition-colors",children:f.jsx("button",{className:"text-xs hover:scale-110 transition-transform",children:""})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:"text-xs text-stone-300",title:e("computer.cpu.cpi-help"),children:[e("computer.cpu.cpi"),":"]}),f.jsx("span",{className:"font-mono text-sm text-mantis-300",children:c})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-xs text-stone-300",title:`${e("computer.cpu.cpu-time-help")} (${d.toFixed(1)} s)`,children:e("computer.cpu.cpu-time")}),f.jsxs("span",{className:"font-mono text-sm text-mantis-300",children:[(u/1e3).toFixed(1)," s"]})]})]})]}),f.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[f.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[f.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Configuracin Actual:"}),f.jsx(vr,{content:m,position:"top",maxWidth:400,className:"text-stone-400 hover:text-mantis-400 transition-colors",children:f.jsx("button",{className:"text-xs hover:scale-110 transition-transform",children:""})})]}),f.jsx("div",{className:"space-y-1 text-xs text-stone-300",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-stone-300",children:f.jsx("strong",{children:"Velocidad CPU:"})}),f.jsxs("span",{className:"font-mono text-mantis-300",children:[r.cpuSpeed," Hz (",d.toFixed(1)," s/ciclo)"]})]})})]})]})]})});G9.displayName="CPUStats";const Ede="_pushable_1q0ek_2",Ade="_front_1q0ek_15",Nde="_shadow_1q0ek_20",Pde="_edge_1q0ek_52",Fg={pushable:Ede,front:Ade,shadow:Nde,edge:Pde};function Mde(){const t=Ht(),{status:e,dispatch:n,devices:i}=jn();return yu("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?f.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:f.jsxs("button",{className:Fg.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[f.jsx("div",{className:Fg.shadow}),f.jsx("div",{className:Fg.edge}),f.jsx("span",{className:Fg.front,children:t("computer.f10")})]})}):null}function Rde(){const t=Ht(),{devices:e}=jn();return e.handshake?f.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),f.jsx(pr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:pE,springs:"handshake.STATE",className:"mx-auto my-4"}),f.jsx("hr",{className:"border-stone-600"}),f.jsx(pr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:hE,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var K9={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.89 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(b)})($7,function(n){return function(){var i={442:function(a){a.exports=n},651:function(a){a.exports=function(){var l={d:function(F,$){for(var V in $)l.o($,V)&&!l.o(F,V)&&Object.defineProperty(F,V,{enumerable:!0,get:$[V]})},o:function(F,$){return Object.prototype.hasOwnProperty.call(F,$)},r:function(F){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})}},c={};function u(F){return function($){if(Array.isArray($))return h($)}(F)||function($){if(typeof Symbol<"u"&&$[Symbol.iterator]!=null||$["@@iterator"]!=null)return Array.from($)}(F)||d(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(F,$){if(F){if(typeof F=="string")return h(F,$);var V={}.toString.call(F).slice(8,-1);return V==="Object"&&F.constructor&&(V=F.constructor.name),V==="Map"||V==="Set"?Array.from(F):V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V)?h(F,$):void 0}}function h(F,$){($==null||$>F.length)&&($=F.length);for(var V=0,k=Array($);V<$;V++)k[V]=F[V];return k}function p(F){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},p(F)}function g(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,v(k.key),k)}}function m(F,$,V){return($=v($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function v(F){var $=function(V,k){if(p(V)!="object"||!V)return V;var P=V[Symbol.toPrimitive];if(P!==void 0){var j=P.call(V,k);if(p(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return p($)=="symbol"?$:$+""}l.r(c),l.d(c,{SimpleKeyboard:function(){return J},default:function(){return le}});var y=function(){return F=function k(P){var j=P.getOptions,R=P.getCaretPosition,Y=P.getCaretPositionEnd,G=P.dispatch;(function(ne,Z){if(!(ne instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,k),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(ne){return ne&&!(ne[0]==="{"&&ne[ne.length-1]==="}")}),this.getOptions=j,this.getCaretPosition=R,this.getCaretPositionEnd=Y,this.dispatch=G,k.bindMethods(k,this)},$=[{key:"getButtonType",value:function(k){return k.includes("{")&&k.includes("}")&&k!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(k){var P=this.getButtonType(k),j=k.replace("{","").replace("}",""),R="";return P!=="standardBtn"&&(R=" hg-button-".concat(j)),"hg-".concat(P).concat(R)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"","{arrowleft}":"","{arrowdown}":"","{arrowright}":"","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(k,P){return(P=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),P):P||this.getDefaultDiplay())[k]||k}},{key:"getUpdatedInput",value:function(k,P,j){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:j,Y=arguments.length>4&&arguments[4]!==void 0&&arguments[4],G=this.getOptions(),ne=[j,R,Y],Z=P;return(k==="{bksp}"||k==="{backspace}")&&Z.length>0?Z=this.removeAt.apply(this,[Z].concat(ne)):(k==="{delete}"||k==="{forwarddelete}")&&Z.length>0?Z=this.removeForwardsAt.apply(this,[Z].concat(ne)):k==="{space}"?Z=this.addStringAt.apply(this,[Z," "].concat(ne)):k!=="{tab}"||typeof G.tabCharOnTab=="boolean"&&G.tabCharOnTab===!1?k!=="{enter}"&&k!=="{numpadenter}"||!G.newLineOnEnter?k.includes("numpad")&&Number.isInteger(Number(k[k.length-2]))?Z=this.addStringAt.apply(this,[Z,k[k.length-2]].concat(ne)):k==="{numpaddivide}"?Z=this.addStringAt.apply(this,[Z,"/"].concat(ne)):k==="{numpadmultiply}"?Z=this.addStringAt.apply(this,[Z,"*"].concat(ne)):k==="{numpadsubtract}"?Z=this.addStringAt.apply(this,[Z,"-"].concat(ne)):k==="{numpadadd}"?Z=this.addStringAt.apply(this,[Z,"+"].concat(ne)):k==="{numpaddecimal}"?Z=this.addStringAt.apply(this,[Z,"."].concat(ne)):k==="{"||k==="}"?Z=this.addStringAt.apply(this,[Z,k].concat(ne)):k.includes("{")||k.includes("}")||(Z=this.addStringAt.apply(this,[Z,k].concat(ne))):Z=this.addStringAt.apply(this,[Z,`
`].concat(ne)):Z=this.addStringAt.apply(this,[Z,"	"].concat(ne)),G.debug&&console.log("Input will be: "+Z),Z}},{key:"updateCaretPos",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],j=this.updateCaretPosAction(k,P);this.dispatch(function(R){R.setCaretPosition(j)})}},{key:"updateCaretPosAction",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],j=this.getOptions(),R=this.getCaretPosition();return R!=null&&(P?R>0&&(R-=k):R+=k),j.debug&&console.log("Caret at:",R),R}},{key:"addStringAt",value:function(k,P){var j,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k.length,G=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return R||R===0?(j=[k.slice(0,R),P,k.slice(Y)].join(""),this.isMaxLengthReached()||G&&this.updateCaretPos(P.length)):j=k+P,j}},{key:"removeAt",value:function(k){var P,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.length,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(j===0&&R===0)return k;if(j===R){var G=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;j&&j>=0?k.substring(j-2,j).match(G)?(P=k.substr(0,j-2)+k.substr(j),Y&&this.updateCaretPos(2,!0)):(P=k.substr(0,j-1)+k.substr(j),Y&&this.updateCaretPos(1,!0)):k.slice(-2).match(G)?(P=k.slice(0,-2),Y&&this.updateCaretPos(2,!0)):(P=k.slice(0,-1),Y&&this.updateCaretPos(1,!0))}else P=k.slice(0,j)+k.slice(R),Y&&this.dispatch(function(ne){ne.setCaretPosition(j)});return P}},{key:"removeForwardsAt",value:function(k){var P,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.length,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return k!=null&&k.length&&j!==null?(j===R?P=k.substring(j,j+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?k.substr(0,j)+k.substr(j+2):k.substr(0,j)+k.substr(j+1):(P=k.slice(0,j)+k.slice(R),Y&&this.dispatch(function(G){G.setCaretPosition(j)})),P):k}},{key:"handleMaxLength",value:function(k,P){var j=this.getOptions(),R=j.maxLength,Y=k[j.inputName||"default"],G=P.length-1>=R;if(P.length<=Y.length)return!1;if(Number.isInteger(R))return j.debug&&console.log("maxLength (num) reached:",G),G?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(p(R)==="object"){var ne=P.length-1>=R[j.inputName||"default"];return j.debug&&console.log("maxLength (obj) reached:",ne),ne?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(k){return k?k.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(P,j){return j.length?P+j[0].toUpperCase()+j.slice(1):P}):""}},{key:"chunkArray",value:function(k,P){return u(Array(Math.ceil(k.length/P))).map(function(j,R){return k.slice(P*R,P+P*R)})}},{key:"escapeRegex",value:function(k){return k.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(k,P){var j=k,R=P.indexOf("");return R<k&&R!=-1&&j--,P.indexOf("")<k&&R!=-1&&j--,j<0?0:j}},{key:"isConstructor",value:function(k){try{Reflect.construct(String,[],k)}catch{return!1}return!0}}],V=[{key:"bindMethods",value:function(k,P){var j,R=function(G,ne){var Z=typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(!Z){if(Array.isArray(G)||(Z=d(G))||ne){Z&&(G=Z);var Pe=0,ze=function(){};return{s:ze,n:function(){return Pe>=G.length?{done:!0}:{done:!1,value:G[Pe++]}},e:function(ge){throw ge},f:ze}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ue,De=!0,Je=!1;return{s:function(){Z=Z.call(G)},n:function(){var ge=Z.next();return De=ge.done,ge},e:function(ge){Je=!0,Ue=ge},f:function(){try{De||Z.return==null||Z.return()}finally{if(Je)throw Ue}}}}(Object.getOwnPropertyNames(k.prototype));try{for(R.s();!(j=R.n()).done;){var Y=j.value;Y==="constructor"||Y==="bindMethods"||(P[Y]=P[Y].bind(P))}}catch(G){R.e(G)}finally{R.f()}}}],$&&g(F.prototype,$),V&&g(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}();m(y,"noop",function(){});var x=y;function w(F){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},w(F)}function S(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,E(k.key),k)}}function _(F,$,V){return($=E($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function E(F){var $=function(V,k){if(w(V)!="object"||!V)return V;var P=V[Symbol.toPrimitive];if(P!==void 0){var j=P.call(V,k);if(w(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return w($)=="symbol"?$:$+""}var C=function(){return F=function k(P){var j=this,R=P.dispatch,Y=P.getOptions;(function(G,ne){if(!(G instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,k),_(this,"getOptions",void 0),_(this,"dispatch",void 0),_(this,"isModifierKey",function(G){return G.altKey||G.ctrlKey||G.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(G.code||G.key||j.keyCodeToKey(G==null?void 0:G.keyCode))}),this.dispatch=R,this.getOptions=Y,x.bindMethods(k,this)},$=[{key:"handleHighlightKeyDown",value:function(k){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var j=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(R){var Y,G,ne=R.getButtonElement(j),Z=R.getButtonElement("{".concat(j,"}"));if(ne)Y=ne,G=j;else{if(!Z)return;Y=Z,G="{".concat(j,"}")}var Pe,ze,Ue,De,Je=function(_t){_t.style.background=P.physicalKeyboardHighlightBgColor||"#dadce4",_t.style.color=P.physicalKeyboardHighlightTextColor||"black"};if(Y)if(Array.isArray(Y)){if(Y.forEach(function(_t){return Je(_t)}),P.physicalKeyboardHighlightPress)if(P.physicalKeyboardHighlightPressUsePointerEvents)(Pe=Y[0])===null||Pe===void 0||(ze=Pe.onpointerdown)===null||ze===void 0||ze.call(Pe,k);else if(P.physicalKeyboardHighlightPressUseClick){var ge;(ge=Y[0])===null||ge===void 0||ge.click()}else R.handleButtonClicked(G,k)}else Je(Y),P.physicalKeyboardHighlightPress&&(P.physicalKeyboardHighlightPressUsePointerEvents?(Ue=Y)===null||Ue===void 0||(De=Ue.onpointerdown)===null||De===void 0||De.call(Ue,k):P.physicalKeyboardHighlightPressUseClick?Y.click():R.handleButtonClicked(G,k))})}},{key:"handleHighlightKeyUp",value:function(k){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var j=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(R){var Y,G,ne,Z=R.getButtonElement(j)||R.getButtonElement("{".concat(j,"}")),Pe=function(ze){ze.removeAttribute&&ze.removeAttribute("style")};Z&&(Array.isArray(Z)?(Z.forEach(function(ze){return Pe(ze)}),P.physicalKeyboardHighlightPressUsePointerEvents&&((Y=Z[0])===null||Y===void 0||(G=Y.onpointerup)===null||G===void 0||G.call(Y,k))):(Pe(Z),P.physicalKeyboardHighlightPressUsePointerEvents&&(Z==null||(ne=Z.onpointerup)===null||ne===void 0||ne.call(Z,k))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(k){var P,j="",R=k.code||k.key||this.keyCodeToKey(k==null?void 0:k.keyCode);return(j=R!=null&&R.includes("Numpad")||R!=null&&R.includes("Shift")||R!=null&&R.includes("Space")||R!=null&&R.includes("Backspace")||R!=null&&R.includes("Control")||R!=null&&R.includes("Alt")||R!=null&&R.includes("Meta")?k.code||"":k.key||this.keyCodeToKey(k==null?void 0:k.keyCode)||"").length>1?(P=j)===null||P===void 0?void 0:P.toLowerCase():j}},{key:"keyCodeToKey",value:function(k){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[k]||""}}],$&&S(F.prototype,$),V&&S(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}();function N(F){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},N(F)}function M(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,O(k.key),k)}}function I(F,$,V){return($=O($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function O(F){var $=function(V,k){if(N(V)!="object"||!V)return V;var P=V[Symbol.toPrimitive];if(P!==void 0){var j=P.call(V,k);if(N(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return N($)=="symbol"?$:$+""}var T=function(){return F=function k(P){var j=P.utilities,R=P.options;(function(Y,G){if(!(Y instanceof G))throw new TypeError("Cannot call a class as a function")})(this,k),I(this,"utilities",void 0),I(this,"options",void 0),I(this,"candidateBoxElement",void 0),I(this,"pageIndex",0),I(this,"pageSize",void 0),this.utilities=j,this.options=R,x.bindMethods(k,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},$=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(k){var P=this,j=k.candidateValue,R=k.targetElement,Y=k.onSelect;if(j&&j.length){var G=this.utilities.chunkArray(j.split(" "),this.pageSize);this.renderPage({candidateListPages:G,targetElement:R,pageIndex:this.pageIndex,nbPages:G.length,onItemSelected:function(ne,Z){Y(ne,Z),P.destroy()}})}}},{key:"renderPage",value:function(k){var P,j=this,R=k.candidateListPages,Y=k.targetElement,G=k.pageIndex,ne=k.nbPages,Z=k.onItemSelected;(P=this.candidateBoxElement)===null||P===void 0||P.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Pe=document.createElement("ul");Pe.className="hg-candidate-box-list",R[G].forEach(function(xn){var zl,Es=document.createElement("li"),ca=function(){var ua=new(j.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(ua,"target",{value:Es}),ua};Es.className="hg-candidate-box-list-item",Es.innerHTML=((zl=j.options.display)===null||zl===void 0?void 0:zl[xn])||xn,j.options.useTouchEvents?Es.ontouchstart=function(ua){return Z(xn,ua||ca())}:Es.onclick=function(){var ua=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ca();return Z(xn,ua)},Pe.appendChild(Es)});var ze=G>0,Ue=document.createElement("div");Ue.classList.add("hg-candidate-box-prev"),ze&&Ue.classList.add("hg-candidate-box-btn-active");var De=function(){ze&&j.renderPage({candidateListPages:R,targetElement:Y,pageIndex:G-1,nbPages:ne,onItemSelected:Z})};this.options.useTouchEvents?Ue.ontouchstart=De:Ue.onclick=De,this.candidateBoxElement.appendChild(Ue),this.candidateBoxElement.appendChild(Pe);var Je=G<ne-1,ge=document.createElement("div");ge.classList.add("hg-candidate-box-next"),Je&&ge.classList.add("hg-candidate-box-btn-active");var _t=function(){Je&&j.renderPage({candidateListPages:R,targetElement:Y,pageIndex:G+1,nbPages:ne,onItemSelected:Z})};this.options.useTouchEvents?ge.ontouchstart=_t:ge.onclick=_t,this.candidateBoxElement.appendChild(ge),Y.prepend(this.candidateBoxElement)}}],$&&M(F.prototype,$),V&&M(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}(),H=T;function L(F){return function($){if(Array.isArray($))return K($)}(F)||function($){if(typeof Symbol<"u"&&$[Symbol.iterator]!=null||$["@@iterator"]!=null)return Array.from($)}(F)||function($,V){if($){if(typeof $=="string")return K($,V);var k={}.toString.call($).slice(8,-1);return k==="Object"&&$.constructor&&(k=$.constructor.name),k==="Map"||k==="Set"?Array.from($):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?K($,V):void 0}}(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function K(F,$){($==null||$>F.length)&&($=F.length);for(var V=0,k=Array($);V<$;V++)k[V]=F[V];return k}function X(F){return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},X(F)}function te(F,$){var V=Object.keys(F);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(F);$&&(k=k.filter(function(P){return Object.getOwnPropertyDescriptor(F,P).enumerable})),V.push.apply(V,k)}return V}function U(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,ie(k.key),k)}}function z(F,$,V){return($=ie($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function ie(F){var $=function(V,k){if(X(V)!="object"||!V)return V;var P=V[Symbol.toPrimitive];if(P!==void 0){var j=P.call(V,k);if(X(j)!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return X($)=="symbol"?$:$+""}var be=function(){return F=function k(P,j){var R=this;if(function(De,Je){if(!(De instanceof Je))throw new TypeError("Cannot call a class as a function")}(this,k),z(this,"input",void 0),z(this,"options",void 0),z(this,"utilities",void 0),z(this,"caretPosition",void 0),z(this,"caretPositionEnd",void 0),z(this,"keyboardDOM",void 0),z(this,"keyboardPluginClasses",void 0),z(this,"keyboardDOMClass",void 0),z(this,"buttonElements",void 0),z(this,"currentInstanceName",void 0),z(this,"allKeyboardInstances",void 0),z(this,"keyboardInstanceNames",void 0),z(this,"isFirstKeyboardInstance",void 0),z(this,"physicalKeyboard",void 0),z(this,"modules",void 0),z(this,"activeButtonClass",void 0),z(this,"holdInteractionTimeout",void 0),z(this,"holdTimeout",void 0),z(this,"isMouseHold",void 0),z(this,"initialized",void 0),z(this,"candidateBox",void 0),z(this,"keyboardRowsDOM",void 0),z(this,"defaultName","default"),z(this,"activeInputElement",null),z(this,"handleParams",function(De,Je){var ge,_t,xn;if(typeof De=="string")ge=De.split(".").join(""),_t=document.querySelector(".".concat(ge)),xn=Je;else if(De instanceof HTMLDivElement){if(!De.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");ge=De.className.split(" ")[0],_t=De,xn=Je}else ge="simple-keyboard",_t=document.querySelector(".".concat(ge)),xn=De;return{keyboardDOMClass:ge,keyboardDOM:_t,options:xn}}),z(this,"getOptions",function(){return R.options}),z(this,"getCaretPosition",function(){return R.caretPosition}),z(this,"getCaretPositionEnd",function(){return R.caretPositionEnd}),z(this,"registerModule",function(De,Je){R.modules[De]||(R.modules[De]={}),Je(R.modules[De])}),z(this,"getKeyboardClassString",function(){for(var De=arguments.length,Je=new Array(De),ge=0;ge<De;ge++)Je[ge]=arguments[ge];return[R.keyboardDOMClass].concat(Je).filter(function(_t){return!!_t}).join(" ")}),typeof window<"u"){var Y=this.handleParams(P,j),G=Y.keyboardDOMClass,ne=Y.keyboardDOM,Z=Y.options,Pe=Z===void 0?{}:Z;this.utilities=new x({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=ne,this.options=function(De){for(var Je=1;Je<arguments.length;Je++){var ge=arguments[Je]!=null?arguments[Je]:{};Je%2?te(Object(ge),!0).forEach(function(_t){z(De,_t,ge[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(ge)):te(Object(ge)).forEach(function(_t){Object.defineProperty(De,_t,Object.getOwnPropertyDescriptor(ge,_t))})}return De}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Pe),this.keyboardPluginClasses="",x.bindMethods(k,this);var ze=this.options.inputName,Ue=ze===void 0?this.defaultName:ze;if(this.input={},this.input[Ue]="",this.keyboardDOMClass=G,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new C({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new H({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(G,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},$=[{key:"setCaretPosition",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k;this.caretPosition=k,this.caretPositionEnd=P}},{key:"getInputCandidates",value:function(k){var P=this,j=this.options,R=j.layoutCandidates,Y=j.layoutCandidatesCaseSensitiveMatch;if(!R||X(R)!=="object")return{};var G=Object.keys(R).filter(function(Pe){var ze=k.substring(0,P.getCaretPositionEnd()||0)||k,Ue=new RegExp("".concat(P.utilities.escapeRegex(Pe),"$"),Y?"g":"gi");return!!L(ze.matchAll(Ue)).length});if(G.length>1){var ne=G.sort(function(Pe,ze){return ze.length-Pe.length})[0];return{candidateKey:ne,candidateValue:R[ne]}}if(G.length){var Z=G[0];return{candidateKey:Z,candidateValue:R[Z]}}return{}}},{key:"showCandidatesBox",value:function(k,P,j){var R=this;this.candidateBox&&this.candidateBox.show({candidateValue:P,targetElement:j,onSelect:function(Y,G){var ne=R.options,Z=ne.layoutCandidatesCaseSensitiveMatch,Pe=ne.disableCandidateNormalization,ze=ne.enableLayoutCandidatesKeyPress,Ue=Y;Pe||(Ue=Y.normalize("NFD")),typeof R.options.beforeInputUpdate=="function"&&R.options.beforeInputUpdate(R);var De=R.getInput(R.options.inputName,!0),Je=R.getCaretPositionEnd()||0,ge=De.substring(0,Je||0)||De,_t=new RegExp("".concat(R.utilities.escapeRegex(k),"$"),Z?"g":"gi"),xn=ge.replace(_t,Ue),zl=De.replace(ge,xn),Es=xn.length-ge.length,ca=(Je||De.length)+Es;ca<0&&(ca=0),R.setInput(zl,R.options.inputName,!0),R.setCaretPosition(ca),ze&&typeof R.options.onKeyPress=="function"&&R.options.onKeyPress(Y,G),typeof R.options.onChange=="function"&&R.options.onChange(R.getInput(R.options.inputName,!0),G),typeof R.options.onChangeAll=="function"&&R.options.onChangeAll(R.getAllInputs(),G)}})}},{key:"handleButtonClicked",value:function(k,P){var j=this.options,R=j.inputName,Y=R===void 0?this.defaultName:R,G=j.debug;if(k!=="{//}"){this.input[Y]||(this.input[Y]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var ne=this.utilities.getUpdatedInput(k,this.input[Y],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(k)&&this.activeInputElement&&this.input[Y]&&this.input[Y]===ne&&this.caretPosition===0&&this.caretPositionEnd===ne.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(k,P);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(k,P),this.input[Y]!==ne&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(ne))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,ne))return;var Z=this.utilities.getUpdatedInput(k,this.input[Y],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(Z,this.options.inputName,!0),G&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),P==null?void 0:P.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),P),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),P),P!=null&&P.target&&this.options.enableLayoutCandidates){var Pe,ze=this.getInputCandidates(ne),Ue=ze.candidateKey,De=ze.candidateValue;Ue&&De?this.showCandidatesBox(Ue,De,this.keyboardDOM):(Pe=this.candidateBox)===null||Pe===void 0||Pe.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),G&&console.log("Key pressed:",k)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(k){this.options.syncInstanceInputs?this.dispatch(function(P){P.isMouseHold=k}):this.isMouseHold=k}},{key:"handleButtonMouseDown",value:function(k,P){var j=this;P&&(this.options.preventMouseDownDefault&&P.preventDefault(),this.options.stopMouseDownPropagation&&P.stopPropagation(),P.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(j.getMouseHold()&&(!k.includes("{")&&!k.includes("}")||k==="{delete}"||k==="{backspace}"||k==="{bksp}"||k==="{space}"||k==="{tab}")||k==="{arrowright}"||k==="{arrowleft}"||k==="{arrowup}"||k==="{arrowdown}")&&(j.options.debug&&console.log("Button held:",k),j.handleButtonHold(k)),clearTimeout(j.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(k,P){var j=this;P&&(this.options.preventMouseUpDefault&&P.preventDefault&&P.preventDefault(),this.options.stopMouseUpPropagation&&P.stopPropagation&&P.stopPropagation(),!(P.target===this.keyboardDOM||P.target&&this.keyboardDOM.contains(P.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(P.target===this.candidateBox.candidateBoxElement||P.target&&this.candidateBox.candidateBoxElement.contains(P.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(R){R.classList.remove(j.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),k&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(k,P)}},{key:"handleKeyboardContainerMouseDown",value:function(k){this.options.preventMouseDownDefault&&k.preventDefault()}},{key:"handleButtonHold",value:function(k){var P=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){P.getMouseHold()?(P.handleButtonClicked(k),P.handleButtonHold(k)):clearTimeout(P.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var k=this;this.dispatch(function(P){P.replaceInput(k.input),P.setCaretPosition(k.caretPosition,k.caretPositionEnd)})}},{key:"clearInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[k]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,P=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!P&&this.syncInstanceInputs(),this.options.rtl?""+this.input[k].replace("","").replace("","")+"":this.input[k]}},{key:"getAllInputs",value:function(){var k=this,P={};return Object.keys(this.input).forEach(function(j){P[j]=k.getInput(j,!0)}),P}},{key:"setInput",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,j=arguments.length>2?arguments[2]:void 0;this.input[P]=k,!j&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(k){this.input=k}},{key:"setOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=this.changedOptions(k);this.options=Object.assign(this.options,k),P.length&&(this.options.debug&&console.log("changedOptions",P),this.onSetOptions(P),this.render())}},{key:"changedOptions",value:function(k){var P=this;return Object.keys(k).filter(function(j){return JSON.stringify(k[j])!==JSON.stringify(P.options[j])})}},{key:"onSetOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];k.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(k.includes("layoutCandidatesPageSize")||k.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new H({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(k){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(P){k(window.SimpleKeyboardInstances[P],P)})}},{key:"addButtonTheme",value:function(k,P){var j=this;P&&k&&(k.split(" ").forEach(function(R){P.split(" ").forEach(function(Y){j.options.buttonTheme||(j.options.buttonTheme=[]);var G=!1;j.options.buttonTheme.map(function(ne){if(ne!=null&&ne.class.split(" ").includes(Y)){G=!0;var Z=ne.buttons.split(" ");Z.includes(R)||(G=!0,Z.push(R),ne.buttons=Z.join(" "))}return ne}),G||j.options.buttonTheme.push({class:Y,buttons:k})})}),this.render())}},{key:"removeButtonTheme",value:function(k,P){var j=this;if(!k&&!P)return this.options.buttonTheme=[],void this.render();k&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(k.split(" ").forEach(function(R){var Y;(Y=j.options)===null||Y===void 0||(Y=Y.buttonTheme)===null||Y===void 0||Y.map(function(G,ne){if(G&&P&&P.includes(G.class)||!P){var Z,Pe,ze=(Z=G)===null||Z===void 0?void 0:Z.buttons.split(" ").filter(function(Ue){return Ue!==R});G&&ze!=null&&ze.length?G.buttons=ze.join(" "):((Pe=j.options.buttonTheme)===null||Pe===void 0||Pe.splice(ne,1),G=null)}return G})}),this.render())}},{key:"getButtonElement",value:function(k){var P,j=this.buttonElements[k];return j&&(P=j.length>1?j:j[0]),P}},{key:"inputPatternIsValid",value:function(k){var P,j=this.options.inputPattern;if((P=j instanceof RegExp?j:j[this.options.inputName||this.defaultName])&&k){var R=P.test(k);return this.options.debug&&console.log('inputPattern ("'.concat(P,'"): ').concat(R?"passed":"did not pass!")),R}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var k=this.options.physicalKeyboardHighlightPreventDefault,P=k!==void 0&&k;document.addEventListener("keyup",this.handleKeyUp,P),document.addEventListener("keydown",this.handleKeyDown,P),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(k){this.caretEventHandler(k),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(k)}},{key:"handleKeyDown",value:function(k){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(k)}},{key:"handleMouseUp",value:function(k){this.caretEventHandler(k)}},{key:"handleTouchEnd",value:function(k){this.caretEventHandler(k)}},{key:"handleSelect",value:function(k){this.caretEventHandler(k)}},{key:"handleSelectionChange",value:function(k){navigator.userAgent.includes("Firefox")||this.caretEventHandler(k)}},{key:"caretEventHandler",value:function(k){var P,j=this;k.target.tagName&&(P=k.target.tagName.toLowerCase()),this.dispatch(function(R){var Y=k.target===R.keyboardDOM||k.target&&R.keyboardDOM.contains(k.target);if(j.options.syncInstanceInputs&&Array.isArray(k.path)&&(Y=k.path.some(function(Z){var Pe;return Z==null||(Pe=Z.hasAttribute)===null||Pe===void 0?void 0:Pe.call(Z,"data-skInstance")})),(P==="textarea"||P==="input"&&["text","search","url","tel","password"].includes(k.target.type))&&!R.options.disableCaretPositioning){var G=k.target.selectionStart,ne=k.target.selectionEnd;R.options.rtl&&(G=R.utilities.getRtlOffset(G,R.getInput()),ne=R.utilities.getRtlOffset(ne,R.getInput())),R.setCaretPosition(G,ne),R.activeInputElement=k.target,R.options.debug&&console.log("Caret at: ",R.getCaretPosition(),R.getCaretPositionEnd(),k&&k.target.tagName.toLowerCase(),"(".concat(R.keyboardDOMClass,")"),k==null?void 0:k.type)}else!R.options.disableCaretPositioning&&Y||(k==null?void 0:k.type)==="selectionchange"||(R.setCaretPosition(null),R.activeInputElement=null,R.options.debug&&console.log('Caret position reset due to "'.concat(k==null?void 0:k.type,'" event'),k))})}},{key:"recurseButtons",value:function(k){var P=this;k&&Object.keys(this.buttonElements).forEach(function(j){return P.buttonElements[j].forEach(k)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var k=this.options.physicalKeyboardHighlightPreventDefault,P=k!==void 0&&k;document.removeEventListener("keyup",this.handleKeyUp,P),document.removeEventListener("keydown",this.handleKeyDown,P),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(j){j&&(j.onpointerdown=null,j.onpointerup=null,j.onpointercancel=null,j.ontouchstart=null,j.ontouchend=null,j.ontouchcancel=null,j.onclick=null,j.onmousedown=null,j.onmouseup=null,j.remove(),j=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(k){var P=this.options.buttonTheme,j=[];return Array.isArray(P)&&P.forEach(function(R){if(R&&R.class&&typeof R.class=="string"&&R.buttons&&typeof R.buttons=="string"){var Y=R.class.split(" ");R.buttons.split(" ").includes(k)&&(j=[].concat(L(j),L(Y)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',R)}),j}},{key:"setDOMButtonAttributes",value:function(k,P){var j=this.options.buttonAttributes;Array.isArray(j)&&j.forEach(function(R){R.attribute&&typeof R.attribute=="string"&&R.value&&typeof R.value=="string"&&R.buttons&&typeof R.buttons=="string"?R.buttons.split(" ").includes(k)&&P(R.attribute,R.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',R)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(k){var P;if((P=k.target.classList)!==null&&P!==void 0&&P.contains("hg-button"))return k.preventDefault(),k.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var k=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(P){var j=k.utilities.isConstructor(P)?new P(k):P(k);j.init&&j.init(k)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(k,P){return!!this.modules[k]&&this.modules[k][P]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(k,P,j,R){var Y=this,G=Array.from(k.children),ne=0;return G.length&&j.forEach(function(Z,Pe){var ze=R[Pe];if(!(ze&&ze>Z))return!1;var Ue=Z-ne,De=ze-ne,Je=document.createElement("div");Je.className+="hg-button-container";var ge="".concat(Y.options.layoutName,"-r").concat(P,"c").concat(Pe);Je.setAttribute("data-skUID",ge);var _t=G.splice(Ue,De-Ue+1);ne+=De-Ue,_t.forEach(function(xn){return Je.appendChild(xn)}),G.splice(Ue,0,Je),k.innerHTML="",G.forEach(function(xn){return k.appendChild(xn)}),Y.options.debug&&console.log("rowDOMContainer",_t,Ue,De,ne+1)}),k}},{key:"render",value:function(){var k=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var P="hg-layout-".concat(this.options.layoutName),j=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},R=this.options.useTouchEvents||!1,Y=R?"hg-touch-events":"",G=this.options.useMouseEvents||!1,ne=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,P,this.keyboardPluginClasses,Y),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",j[this.options.layoutName||this.defaultName].forEach(function(Z,Pe){var ze=Z.split(" ");k.options.excludeFromLayout&&k.options.excludeFromLayout[k.options.layoutName||k.defaultName]&&(ze=ze.filter(function(ge){return k.options.excludeFromLayout&&!k.options.excludeFromLayout[k.options.layoutName||k.defaultName].includes(ge)}));var Ue=document.createElement("div");Ue.className+="hg-row";var De=[],Je=[];ze.forEach(function(ge,_t){var xn,zl=!ne&&typeof ge=="string"&&ge.length>1&&ge.indexOf("[")===0,Es=!ne&&typeof ge=="string"&&ge.length>1&&ge.indexOf("]")===ge.length-1;zl&&(De.push(_t),ge=ge.replace(/\[/g,"")),Es&&(Je.push(_t),ge=ge.replace(/\]/g,""));var ca=k.utilities.getButtonClass(ge),ua=k.utilities.getButtonDisplayName(ge,k.options.display,k.options.mergeDisplay),T7=k.options.useButtonTag?"button":"div",Ln=document.createElement(T7);Ln.className+="hg-button ".concat(ca),(xn=Ln.classList).add.apply(xn,L(k.getButtonThemeClasses(ge))),k.setDOMButtonAttributes(ge,function(sn,I7){Ln.setAttribute(sn,I7)}),k.activeButtonClass="hg-activeButton",!k.utilities.pointerEventsSupported()||R||G?R?(Ln.ontouchstart=function(sn){k.handleButtonClicked(ge,sn),k.handleButtonMouseDown(ge,sn)},Ln.ontouchend=function(sn){k.handleButtonMouseUp(ge,sn)},Ln.ontouchcancel=function(sn){k.handleButtonMouseUp(ge,sn)}):(Ln.onclick=function(sn){k.setMouseHold(!1),typeof k.options.onKeyReleased=="function"||k.options.useMouseEvents&&k.options.clickOnMouseDown||k.handleButtonClicked(ge,sn)},Ln.onmousedown=function(sn){(typeof k.options.onKeyReleased=="function"||k.options.useMouseEvents&&k.options.clickOnMouseDown)&&!k.isMouseHold&&k.handleButtonClicked(ge,sn),k.handleButtonMouseDown(ge,sn)},Ln.onmouseup=function(sn){k.handleButtonMouseUp(ge,sn)}):(Ln.onpointerdown=function(sn){k.handleButtonClicked(ge,sn),k.handleButtonMouseDown(ge,sn)},Ln.onpointerup=function(sn){k.handleButtonMouseUp(ge,sn)},Ln.onpointercancel=function(sn){k.handleButtonMouseUp(ge,sn)}),Ln.setAttribute("data-skBtn",ge);var O7="".concat(k.options.layoutName,"-r").concat(Pe,"b").concat(_t);Ln.setAttribute("data-skBtnUID",O7);var TA=document.createElement("span");TA.innerHTML=ua,Ln.appendChild(TA),k.buttonElements[ge]||(k.buttonElements[ge]=[]),k.buttonElements[ge].push(Ln),Ue.appendChild(Ln)}),Ue=k.parseRowDOMContainers(Ue,Pe,De,Je),k.keyboardRowsDOM.appendChild(Ue)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||R||G?R?(document.ontouchend=function(Z){return k.handleButtonMouseUp(void 0,Z)},document.ontouchcancel=function(Z){return k.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.ontouchstart=function(Z){return k.handleKeyboardContainerMouseDown(Z)}):R||(document.onmouseup=function(Z){return k.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.onmousedown=function(Z){return k.handleKeyboardContainerMouseDown(Z)}):(document.onpointerup=function(Z){return k.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.onpointerdown=function(Z){return k.handleKeyboardContainerMouseDown(Z)}),this.onInit())}}],$&&U(F.prototype,$),V&&U(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}(),J=be,le=J;return c}()}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return m},default:function(){return v}});var a=s(442);function l(y){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},l(y)}function c(y,x){var w=Object.keys(y);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(y);x&&(S=S.filter(function(_){return Object.getOwnPropertyDescriptor(y,_).enumerable})),w.push.apply(w,S)}return w}function u(y){for(var x=1;x<arguments.length;x++){var w=arguments[x]!=null?arguments[x]:{};x%2?c(Object(w),!0).forEach(function(S){d(y,S,w[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(w)):c(Object(w)).forEach(function(S){Object.defineProperty(y,S,Object.getOwnPropertyDescriptor(w,S))})}return y}function d(y,x,w){return(x=function(S){var _=function(E,C){if(l(E)!="object"||!E)return E;var N=E[Symbol.toPrimitive];if(N!==void 0){var M=N.call(E,C);if(l(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(E)}(S,"string");return l(_)=="symbol"?_:_+""}(x))in y?Object.defineProperty(y,x,{value:w,enumerable:!0,configurable:!0,writable:!0}):y[x]=w,y}var h=function(y){return u(u({},y),{},{keyboardRef:null})},p=s(651),g=s.n(p),m=function(y){var x=y.baseClass||"react-simple-keyboard",w=a.useRef(null),S=a.useRef(null),_=a.useRef(null),E=a.useRef(y);return a.useEffect(function(){return function(){_.current&&_.current.destroy(),w.current=!1}},[]),a.useEffect(function(){var C=function(T){return u(u({},T),{},{theme:"simple-keyboard ".concat(T.theme||"hg-theme-default")})}(y);if(!w.current){w.current=!0,C.debug&&console.log("ReactSimpleKeyboard: Init");var N=S.current,M=".".concat(x);_.current=new(g())(N||M,C),C.keyboardRef&&C.keyboardRef(_.current)}var I=function(T,H){var L=h(H),K=h(T);return Object.keys(L).filter(function(X){return L[X]!==K[X]})}(E.current,C);if(I.length){var O=_.current;E.current=C,O==null||O.setOptions(C),C.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",I)}},[w,x,E,y]),a.createElement("div",{className:x,ref:S})},v=m}(),o}()})})(K9);var Tde=K9.exports;const Ode=qc(Tde),Ide={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w  r t y    p  +","{lock}  s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W  R T Y    P  *","{lock}  S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y  i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y  I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},jde={en:{"{bksp}":"Backspace ","{enter}":"Enter ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Caps Lock ","{space}":"Space"},es:{"{bksp}":"","{enter}":"Intro ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Bloq Mays ","{space}":"Espacio"}},$R="          ",FR="  ";function Lde(){const t=SC(),e=Ht(),{status:n,dispatch:i,devices:r}=jn(),[s,o]=b.useState("none"),[a,l]=b.useState(!1),[c,u]=b.useState(!1),d=b.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),h=b.useCallback(p=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",p)},[n,i,r.keyboard]);return r.keyboard?f.jsxs("div",{className:"absolute left-[1600px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),f.jsx(Ode,{theme:Q("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:Ide,display:jde[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:$R},{class:"hg-diaeresisDeadKeyButton",buttons:FR}],disableButtonHold:!0,onKeyPress:p=>{if(p==="{shiftleft}"||p==="{shiftright}"){o(g=>g==="none"?"once":"none");return}if(p==="{lock}"){o(g=>g==="none"?"lock":"none");return}if(t==="es"){if(a){$R.includes(p)&&(l(!1),s==="once"&&o("none"),h(p));return}else if(p===""){l(!0);return}if(c){FR.includes(p)&&(u(!1),s==="once"&&o("none"),h(p));return}else if(p===""){u(!0);return}}s==="once"&&o("none"),h(p==="{bksp}"?"\b":p==="{enter}"?`
`:p==="{tab}"?"	":p==="{space}"?" ":p)}})]}):null}function Dde(){const t=Ht(),{devices:e}=jn(),n=it(mE).toArray();return e.leds?f.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),f.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>f.jsxs("div",{className:"flex w-7 flex-col items-center",children:[f.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:r}),f.jsx("div",{className:Q("relative size-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:f.jsx("div",{className:Q("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})})]},r))})]}):null}function $de(){const t=Ht(),e=it(oQ),n=it(Le.IP),i=it(RD),r=it(TD),s=it(Le.SP),o=it(PC),a=it(m2),l=pD(),c=a||l.pic||l.handshake!==null,u=()=>{const g=[];for(let m=0;m<256;m+=16){const v=e.slice(m,m+16);g.push(v)}return g},d=16,h=Math.floor(Number(n.valueOf())/d),p=Number(n.valueOf())%d;return f.jsxs("div",{className:"absolute left-[800px] top-[-160px] z-10 size-auto rounded-lg border border-stone-600 bg-stone-900 shadow-2xl [&_*]:z-20","data-testid":"memory-component",children:[f.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white shadow",children:t("computer.memory.name")}),f.jsx("div",{className:"m-4 overflow-x-auto",children:f.jsxs("table",{className:"mx-auto w-auto min-w-[600px] border-separate text-center font-mono text-base",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{}),Array.from({length:16}).map((g,m)=>f.jsx("th",{className:Q("relative size-10 border border-gray-500 bg-mantis-500",m%4===0&&m!==0?"border-l-4 border-mantis-600":""),children:f.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===p&&f.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:""})]})},m))]})}),f.jsx("tbody",{children:u().map((g,m)=>f.jsxs("tr",{className:m%4===0&&m!==0?"border-t-4 border-mantis-600":"",children:[f.jsx("th",{className:"relative size-10 border border-gray-500 bg-mantis-500",children:f.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===h&&f.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:""})]})}),g.map((v,y)=>{var x,w,S;return f.jsx("td",{className:Q("size-10 border border-gray-500 p-0 transition-shadow duration-200",y%4===0&&y!==0?"border-l-4 border-mantis-600":""),children:f.jsx(Fde,{address:v.address,value:v.value,isIP:v.address.valueOf()===n.valueOf(),isSP:o&&v.address.valueOf()===s.valueOf(),isStackData:o&&v.address.valueOf()>s.valueOf(),isProgramAddress:!!i.find(_=>_.address===v.address.value),isDataAddress:!!r.find(_=>_.address===v.address.value),isInterruptVector:c&&v.address.valueOf()>=0&&v.address.valueOf()<=7,label:((x=i.find(_=>_.address===v.address.value))==null?void 0:x.name)||((w=r.find(_=>_.address===v.address.value))==null?void 0:w.label)||null,length:((S=i.find(_=>_.address===v.address.value))==null?void 0:S.length)??null})},y)})]},m))})]})})]})}function Fde({address:t,value:e,isIP:n,isSP:i,isStackData:r,isProgramAddress:s,isDataAddress:o,isInterruptVector:a,label:l,length:c}){const u=Ht(),d=it(Sp),[h,p]=b.useState(!1),g=b.useRef(e);b.useEffect(()=>{g.current!==e&&(p(!0),setTimeout(()=>p(!1),300),g.current=e)},[e]);const m=u("computer.memory.cell",t);return f.jsxs(JE,{children:[f.jsx(ZE,{asChild:!0,children:f.jsxs(qe.div,{title:m,className:Q("relative flex size-10 cursor-pointer select-none items-center justify-center border font-mono text-base transition-all duration-200",n?"z-10 shadow-lg shadow-red-500/50 outline outline-2 outline-red-500 ring-2 ring-red-500 ring-offset-2":i?"z-10 shadow-lg shadow-yellow-400/50 outline outline-2 outline-yellow-400 ring-2 ring-yellow-400 ring-offset-2":"","bg-stone-800",a&&!i&&!r?"border-l-4 border-purple-500":"",s&&!i&&!r&&!a?"border-l-4 border-blue-500":"",o&&!i&&!r&&!s&&!a?"border-l-4 border-green-500":"",r&&!i?"border-l-4 border-yellow-500":"",i?"border-l-4 border-yellow-400":"","text-stone-100","hover:z-20 hover:scale-110 hover:shadow-xl",h&&"animate-pulse"),style:t.value===d.value?Ge("memory.operating-cell"):void 0,children:[a&&!i&&!r&&f.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-purple-400",title:"Vector de interrupcin",style:{lineHeight:1},children:""}),s&&!i&&!r&&!a&&f.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-blue-400",title:"Instruccin",style:{lineHeight:1},children:""}),o&&!i&&!r&&!s&&!a&&f.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-green-400",title:"Dato",style:{lineHeight:1},children:""}),r&&!i&&f.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-400",title:"Dato de la pila",style:{lineHeight:1},children:""}),i&&f.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-300",title:"Stack Pointer",style:{lineHeight:1},children:""}),f.jsx("span",{className:"z-10 mt-3 block font-mono text-lg font-bold",children:e.toString("hex")}),n&&f.jsx("span",{className:"absolute right-0 top-0 text-xs text-red-500",title:"IP",style:{lineHeight:1},children:""}),i&&f.jsx("span",{className:"absolute right-0 top-0 text-xs text-yellow-500",title:"SP",style:{lineHeight:1},children:""})]})}),f.jsxs(Hb,{className:"w-60",children:[f.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[m," ",l?f.jsxs("span",{className:"font-bold text-mantis-400",children:["(",l,")",c!==null&&c!==""&&f.jsxs("span",{className:"text-xs font-normal text-white",children:[" Bytes: ",c]})]}):""]}),f.jsx("hr",{className:"border-stone-600"}),f.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(v=>f.jsxs("li",{children:[f.jsx("b",{className:"font-medium",children:u(`generics.byte-representation.${v}`)}),":"," ",f.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(v)})]},v))})]})]})}function zde(){const t=Ht(),{devices:e}=jn();return e.pic?f.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsxs("div",{className:"flex items-start",children:[f.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),f.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[f.jsx(pr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:gE,springs:"pic.IMR",emphasis:!0}),f.jsx(pr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:vE,springs:"pic.IRR",emphasis:!0}),f.jsx(pr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:yE,springs:"pic.ISR",emphasis:!0})]})]}),f.jsx("hr",{className:"mb-2 border-stone-600"}),f.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:ny.map((n,i)=>f.jsx(pr,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function Bde(){const t=Ht(),{devices:e}=jn();return e.pio?f.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"mb-2 block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),f.jsx("hr",{className:"border-stone-600"}),f.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[f.jsx(pr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:bE,springs:"pio.PA"}),f.jsx(pr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:wE,springs:"pio.CA"})]}),f.jsx("hr",{className:"border-stone-600"}),f.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[f.jsx(pr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:xE,springs:"pio.PB"}),f.jsx(pr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:SE,springs:"pio.CB"})]})]}):null}const Ude="_printer_fbkny_2",Vde="_shadow_fbkny_6",Hde="_sides_fbkny_11",Wde="_front_fbkny_22",Gde="_trailContainer_fbkny_27",Kde="_trail_fbkny_27",qde="_paper_fbkny_33",Xl={printer:Ude,shadow:Vde,sides:Hde,front:Wde,trailContainer:Gde,trail:Kde,paper:qde},Yde=Array.from({length:5},(t,e)=>e);function Xde(){const t=Ht(),{devices:e}=jn(),n=it(iy),i=it(ry);return e.printer?f.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:f.jsxs("div",{className:Xl.printer,title:t("computer.printer.name"),children:[f.jsx("div",{className:Xl.shadow}),f.jsx("div",{className:Xl.sides}),f.jsxs("div",{className:Xl.front,children:[f.jsx("div",{className:Xl.trailContainer,children:f.jsx("div",{className:Xl.trail,children:f.jsx("pre",{className:Xl.paper,children:i})})}),f.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:Yde.map(r=>{const s=n[r]?mD(n[r].unsigned):null;return f.jsx("span",{className:Q("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),f.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:f.jsx(qe.div,{className:"h-full bg-mantis-400",style:{width:Ge("printer.printing.progress").to(r=>`${r*100}%`),opacity:Ge("printer.printing.opacity")}})})]})]})}):null}const Jde="_container_6nvz7_2",Zde="_text_6nvz7_22",zR={container:Jde,text:Zde};function Qde(){const t=Ht(),{devices:e}=jn(),n=it(kE);return e.screen?f.jsxs("div",{className:"absolute left-[1600px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),f.jsx("div",{className:zR.container,children:f.jsx("pre",{className:zR.text,children:n})})]}):null}function efe(){const t=Ht(),{dispatch:e,devices:n}=jn(),i=it(Ab).toArray();return n.switches?f.jsxs("div",{className:"absolute left-[1300px] top-[680px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),f.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((r,s)=>f.jsxs("div",{className:"flex w-8 flex-col items-center",children:[f.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:s}),f.jsx(ka,{checked:r,onCheckedChange:()=>e("switch.toggle",s),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800"})]},s))})]}):null}function tfe(){const t=Ht(),{devices:e}=jn();return e.timer?f.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[f.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),f.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[f.jsx(pr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:sy,springs:"timer.CONT"}),f.jsx(pr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:_E,springs:"timer.COMP"})]})]}):null}function q9(){const t=b.useRef(null);return b.useEffect(()=>{G6()},[]),f.jsx("div",{className:"relative size-full",children:f.jsxs(Fue,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[f.jsx(Uue,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:f.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[f.jsx(nde,{}),f.jsx("div",{className:"absolute left-[120px] top-[-120px] z-20",children:f.jsx(G9,{})}),f.jsx(Cde,{}),f.jsx(Yue,{}),f.jsx($de,{}),f.jsx(Rde,{}),f.jsx(zde,{}),f.jsx(Bde,{}),f.jsx(tfe,{}),f.jsx(ide,{}),f.jsx(Mde,{}),f.jsx(Lde,{}),f.jsx(Dde,{}),f.jsx(Xde,{}),f.jsx(efe,{}),f.jsx(Qde,{})]})}),f.jsx(Vue,{wrapperRef:t})]})})}const nfe=1024;let ife=0;class Y1{constructor(e,n){this.from=e,this.to=n}}class pt{constructor(e={}){this.id=ife++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ji.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}pt.closedBy=new pt({deserialize:t=>t.split(" ")});pt.openedBy=new pt({deserialize:t=>t.split(" ")});pt.group=new pt({deserialize:t=>t.split(" ")});pt.isolate=new pt({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});pt.contextHash=new pt({perNode:!0});pt.lookAhead=new pt({perNode:!0});pt.mounted=new pt({perNode:!0});class fy{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[pt.mounted.id]}}const rfe=Object.create(null);class Ji{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):rfe,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Ji(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(pt.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(pt.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Ji.none=new Ji("",Object.create(null),0,8);class QE{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Ji(i.name,r,i.id,i.flags):i)}return new QE(n)}}const zg=new WeakMap,BR=new WeakMap;var Kn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Kn||(Kn={}));class tn{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=fy.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Rk(this.topNode,e)}cursorAt(e,n=0,i=0){let r=zg.get(this)||this.topNode,s=new Rk(r);return s.moveTo(e,n),zg.set(this,s._tree),s}get topNode(){return new Gr(this,0,0,null)}resolve(e,n=0){let i=Wp(zg.get(this)||this.topNode,e,n,!1);return zg.set(this,i),i}resolveInner(e,n=0){let i=Wp(BR.get(this)||this.topNode,e,n,!0);return BR.set(this,i),i}resolveStack(e,n=0){return afe(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&Kn.IncludeAnonymous)>0;for(let l=this.cursor(o|Kn.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:nA(Ji.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new tn(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new tn(Ji.none,n,i,r)))}static build(e){return lfe(e)}}tn.empty=new tn(Ji.none,[],[],0);class eA{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new eA(this.buffer,this.index)}}class Cl{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Ji.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(Y9(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let c=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,c)}return new Cl(s,o,this.set)}}function Y9(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Wp(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Gr&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:Kn.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Gr&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class X9{cursor(e=0){return new Rk(this,e)}getChild(e,n=null,i=null){let r=UR(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return UR(this,e,n,i)}resolve(e,n=0){return Wp(this,e,n,!1)}resolveInner(e,n=0){return Wp(this,e,n,!0)}matchContext(e){return Mk(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class Gr extends X9{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(Y9(r,i,d,d+u.length)){if(u instanceof Cl){if(s&Kn.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,n,i-d,r);if(h>-1)return new Wa(new sfe(o,u,e,d),null,h)}else if(s&Kn.IncludeAnonymous||!u.type.isAnonymous||tA(u)){let h;if(!(s&Kn.IgnoreMounts)&&(h=fy.get(u))&&!h.overlay)return new Gr(h.tree,d,e,o);let p=new Gr(u,d,e,o);return s&Kn.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?u.children.length-1:0,n,i,r)}}}if(s&Kn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&Kn.IgnoreOverlays)&&(r=fy.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Gr(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function UR(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Mk(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class sfe{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class Wa extends X9{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new Wa(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&Kn.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Wa(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Wa(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Wa(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new tn(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function J9(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof Gr&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new ofe(r,n)}class ofe{constructor(e,n){this.heads=e,this.node=n}get next(){return J9(this.heads)}}function afe(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof Gr?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=fy.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Gr(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Wp(a,e,n,!1))}}return r?J9(r):i}class Rk{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Gr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Gr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&Kn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Kn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Kn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&Kn.IncludeAnonymous||a instanceof Cl||!a.type.isAnonymous||tA(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new Wa(this.buffer,n,this.stack[r]);return this.bufferNode=new Wa(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Mk(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Mk(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function tA(t){return t.children.some(e=>e instanceof Cl||!e.type.isAnonymous||tA(e))}function lfe(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=nfe,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new eA(n,n.length):n,l=i.types,c=0,u=0;function d(_,E,C,N,M,I){let{id:O,start:T,end:H,size:L}=a,K=u,X=c;for(;L<0;)if(a.next(),L==-1){let be=s[O];C.push(be),N.push(T-_);return}else if(L==-3){c=O;return}else if(L==-4){u=O;return}else throw new RangeError(`Unrecognized record size: ${L}`);let te=l[O],U,z,ie=T-_;if(H-T<=r&&(z=v(a.pos-E,M))){let be=new Uint16Array(z.size-z.skip),J=a.pos-z.size,le=be.length;for(;a.pos>J;)le=y(z.start,be,le);U=new Cl(be,H-z.start,i),ie=z.start-_}else{let be=a.pos-L;a.next();let J=[],le=[],F=O>=o?O:-1,$=0,V=H;for(;a.pos>be;)F>=0&&a.id==F&&a.size>=0?(a.end<=V-r&&(g(J,le,T,$,a.end,V,F,K,X),$=J.length,V=a.end),a.next()):I>2500?h(T,be,J,le):d(T,be,J,le,F,I+1);if(F>=0&&$>0&&$<J.length&&g(J,le,T,$,T,V,F,K,X),J.reverse(),le.reverse(),F>-1&&$>0){let k=p(te,X);U=nA(te,J,le,0,J.length,0,H-T,k,k)}else U=m(te,J,le,H-T,K-H,X)}C.push(U),N.push(ie)}function h(_,E,C,N){let M=[],I=0,O=-1;for(;a.pos>E;){let{id:T,start:H,end:L,size:K}=a;if(K>4)a.next();else{if(O>-1&&H<O)break;O<0&&(O=L-r),M.push(T,H,L),I++,a.next()}}if(I){let T=new Uint16Array(I*4),H=M[M.length-2];for(let L=M.length-3,K=0;L>=0;L-=3)T[K++]=M[L],T[K++]=M[L+1]-H,T[K++]=M[L+2]-H,T[K++]=K;C.push(new Cl(T,M[2]-H,i)),N.push(H-_)}}function p(_,E){return(C,N,M)=>{let I=0,O=C.length-1,T,H;if(O>=0&&(T=C[O])instanceof tn){if(!O&&T.type==_&&T.length==M)return T;(H=T.prop(pt.lookAhead))&&(I=N[O]+T.length+H)}return m(_,C,N,M,I,E)}}function g(_,E,C,N,M,I,O,T,H){let L=[],K=[];for(;_.length>N;)L.push(_.pop()),K.push(E.pop()+C-M);_.push(m(i.types[O],L,K,I-M,T-I,H)),E.push(M-C)}function m(_,E,C,N,M,I,O){if(I){let T=[pt.contextHash,I];O=O?[T].concat(O):[T]}if(M>25){let T=[pt.lookAhead,M];O=O?[T].concat(O):[T]}return new tn(_,E,C,N,O)}function v(_,E){let C=a.fork(),N=0,M=0,I=0,O=C.end-r,T={size:0,start:0,skip:0};e:for(let H=C.pos-_;C.pos>H;){let L=C.size;if(C.id==E&&L>=0){T.size=N,T.start=M,T.skip=I,I+=4,N+=4,C.next();continue}let K=C.pos-L;if(L<0||K<H||C.start<O)break;let X=C.id>=o?4:0,te=C.start;for(C.next();C.pos>K;){if(C.size<0)if(C.size==-3)X+=4;else break e;else C.id>=o&&(X+=4);C.next()}M=te,N+=L,I+=X}return(E<0||N==_)&&(T.size=N,T.start=M,T.skip=I),T.size>4?T:void 0}function y(_,E,C){let{id:N,start:M,end:I,size:O}=a;if(a.next(),O>=0&&N<o){let T=C;if(O>4){let H=a.pos-(O-4);for(;a.pos>H;)C=y(_,E,C)}E[--C]=T,E[--C]=I-_,E[--C]=M-_,E[--C]=N}else O==-3?c=N:O==-4&&(u=N);return C}let x=[],w=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,x,w,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:x.length?w[0]+x[0].length:0;return new tn(l[t.topID],x.reverse(),w.reverse(),S)}const VR=new WeakMap;function $0(t,e){if(!t.isAnonymous||e instanceof Cl||e.type!=t)return 1;let n=VR.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof tn)){n=1;break}n+=$0(t,i)}VR.set(e,n)}return n}function nA(t,e,n,i,r,s,o,a,l){let c=0;for(let g=i;g<r;g++)c+=$0(t,e[g]);let u=Math.ceil(c*1.5/8),d=[],h=[];function p(g,m,v,y,x){for(let w=v;w<y;){let S=w,_=m[w],E=$0(t,g[w]);for(w++;w<y;w++){let C=$0(t,g[w]);if(E+C>=u)break;E+=C}if(w==S+1){if(E>u){let C=g[S];p(C.children,C.positions,0,C.children.length,m[S]+x);continue}d.push(g[S])}else{let C=m[w-1]+g[w-1].length-_;d.push(nA(t,g,m,S,w,_,C,null,l))}h.push(_+x-s)}}return p(e,n,i,r,0),(a||l)(d,h,o)}class Cc{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new Cc(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||c){let p=Math.max(h.from,l)-c,g=Math.min(h.to,d)-c;h=p>=g?null:new Cc(p,g,h.tree,h.offset+c,a>0,!!u)}if(h&&r.push(h),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r}}class Z9{startParse(e,n,i){return typeof e=="string"&&(e=new cfe(e)),i=i?i.length?i.map(r=>new Y1(r.from,r.to)):[new Y1(0,0)]:[new Y1(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class cfe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new pt({perNode:!0});let ufe=0;class Cn{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=ufe++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof Cn&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new Cn(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new hy(e);return i=>i.modified.indexOf(n)>-1?i:hy.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let dfe=0;class hy{constructor(e){this.name=e,this.instances=[],this.id=dfe++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&ffe(n,a.modified));if(i)return i;let r=[],s=new Cn(e.name,r,e,n);for(let a of n)a.instances.push(s);let o=hfe(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(hy.get(a,l));return s}}function ffe(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function hfe(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function pfe(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==r.length)break;let p=r[d++];if(d==r.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+r);let u=new py(i,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return Q9.add(e)}const Q9=new pt;class py{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}py.empty=new py([],2,null);function ez(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function mfe(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function gfe(t,e,n,i=0,r=t.length){let s=new vfe(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class vfe{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=r,u=yfe(e)||py.empty,d=mfe(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let h=e.tree&&e.tree.prop(pt.mounted);if(h&&h.overlay){let p=e.node.enter(h.overlay[0].from+a,1),g=this.highlighters.filter(v=>!v.scope||v.scope(h.tree.type)),m=e.firstChild();for(let v=0,y=a;;v++){let x=v<h.overlay.length?h.overlay[v]:null,w=x?x.from+a:l,S=Math.max(n,y),_=Math.min(i,w);if(S<_&&m)for(;e.from<_&&(this.highlightRange(e,S,_,r,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=w||!e.nextSibling())););if(!x||w>i)break;y=x.to+a,y>n&&(this.highlightRange(p.cursor(),Math.max(n,x.from+a),Math.min(i,y),"",g),this.startSpan(Math.min(i,y),c))}m&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function yfe(t){let e=t.type.prop(Q9);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const me=Cn.define,Bg=me(),_a=me(),HR=me(_a),WR=me(_a),Ca=me(),Ug=me(Ca),X1=me(Ca),Os=me(),Jl=me(Os),Ps=me(),Ms=me(),Tk=me(),zf=me(Tk),Vg=me(),Ve={comment:Bg,lineComment:me(Bg),blockComment:me(Bg),docComment:me(Bg),name:_a,variableName:me(_a),typeName:HR,tagName:me(HR),propertyName:WR,attributeName:me(WR),className:me(_a),labelName:me(_a),namespace:me(_a),macroName:me(_a),literal:Ca,string:Ug,docString:me(Ug),character:me(Ug),attributeValue:me(Ug),number:X1,integer:me(X1),float:me(X1),bool:me(Ca),regexp:me(Ca),escape:me(Ca),color:me(Ca),url:me(Ca),keyword:Ps,self:me(Ps),null:me(Ps),atom:me(Ps),unit:me(Ps),modifier:me(Ps),operatorKeyword:me(Ps),controlKeyword:me(Ps),definitionKeyword:me(Ps),moduleKeyword:me(Ps),operator:Ms,derefOperator:me(Ms),arithmeticOperator:me(Ms),logicOperator:me(Ms),bitwiseOperator:me(Ms),compareOperator:me(Ms),updateOperator:me(Ms),definitionOperator:me(Ms),typeOperator:me(Ms),controlOperator:me(Ms),punctuation:Tk,separator:me(Tk),bracket:zf,angleBracket:me(zf),squareBracket:me(zf),paren:me(zf),brace:me(zf),content:Os,heading:Jl,heading1:me(Jl),heading2:me(Jl),heading3:me(Jl),heading4:me(Jl),heading5:me(Jl),heading6:me(Jl),contentSeparator:me(Os),list:me(Os),quote:me(Os),emphasis:me(Os),strong:me(Os),link:me(Os),monospace:me(Os),strikethrough:me(Os),inserted:me(),deleted:me(),changed:me(),invalid:me(),meta:Vg,documentMeta:me(Vg),annotation:me(Vg),processingInstruction:me(Vg),definition:Cn.defineModifier("definition"),constant:Cn.defineModifier("constant"),function:Cn.defineModifier("function"),standard:Cn.defineModifier("standard"),local:Cn.defineModifier("local"),special:Cn.defineModifier("special")};for(let t in Ve){let e=Ve[t];e instanceof Cn&&(e.name=t)}ez([{tag:Ve.link,class:"tok-link"},{tag:Ve.heading,class:"tok-heading"},{tag:Ve.emphasis,class:"tok-emphasis"},{tag:Ve.strong,class:"tok-strong"},{tag:Ve.keyword,class:"tok-keyword"},{tag:Ve.atom,class:"tok-atom"},{tag:Ve.bool,class:"tok-bool"},{tag:Ve.url,class:"tok-url"},{tag:Ve.labelName,class:"tok-labelName"},{tag:Ve.inserted,class:"tok-inserted"},{tag:Ve.deleted,class:"tok-deleted"},{tag:Ve.literal,class:"tok-literal"},{tag:Ve.string,class:"tok-string"},{tag:Ve.number,class:"tok-number"},{tag:[Ve.regexp,Ve.escape,Ve.special(Ve.string)],class:"tok-string2"},{tag:Ve.variableName,class:"tok-variableName"},{tag:Ve.local(Ve.variableName),class:"tok-variableName tok-local"},{tag:Ve.definition(Ve.variableName),class:"tok-variableName tok-definition"},{tag:Ve.special(Ve.variableName),class:"tok-variableName2"},{tag:Ve.definition(Ve.propertyName),class:"tok-propertyName tok-definition"},{tag:Ve.typeName,class:"tok-typeName"},{tag:Ve.namespace,class:"tok-namespace"},{tag:Ve.className,class:"tok-className"},{tag:Ve.macroName,class:"tok-macroName"},{tag:Ve.propertyName,class:"tok-propertyName"},{tag:Ve.operator,class:"tok-operator"},{tag:Ve.comment,class:"tok-comment"},{tag:Ve.meta,class:"tok-meta"},{tag:Ve.invalid,class:"tok-invalid"},{tag:Ve.punctuation,class:"tok-punctuation"}]);var J1;const Gu=new pt;function bfe(t){return Ee.define({combine:t?e=>e.concat(t):void 0})}const xfe=new pt;class ps{constructor(e,n,i=[],r=""){this.data=e,this.name=r,dt.prototype.hasOwnProperty("tree")||Object.defineProperty(dt.prototype,"tree",{get(){return go(this)}}),this.parser=n,this.extension=[Xd.of(this),dt.languageData.of((s,o,a)=>{let l=GR(s,o,a),c=l.type.prop(Gu);if(!c)return[];let u=s.facet(c),d=l.type.prop(xfe);if(d){let h=l.resolve(o-l.from,a);for(let p of d)if(p.test(h,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(u)}}return u})].concat(i)}isActiveAt(e,n,i=-1){return GR(e,n,i).type.prop(Gu)==this.data}findRegions(e){let n=e.facet(Xd);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Gu)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(pt.mounted);if(a){if(a.tree.prop(Gu)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof tn&&r(c,s.positions[l]+o)}};return r(go(e),0),i}get allowsNesting(){return!0}}ps.setState=tt.define();function GR(t,e,n){let i=t.facet(Xd),r=go(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,Kn.ExcludeBuffers))s.type.isTop&&(r=s);return r}function go(t){let e=t.field(ps.state,!1);return e?e.tree:tn.empty}class wfe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Bf=null;class qd{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new qd(e,n,[],tn.empty,0,i,[],null)}startParse(){return this.parser.startParse(new wfe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=tn.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Cc.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Cc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Bf;Bf=this;try{return e()}finally{Bf=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=KR(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,h)=>l.push({fromA:c,toA:u,fromB:d,toB:h})),i=Cc.applyChanges(i,l),r=tn.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new qd(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=KR(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Z9{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=Bf;if(l){for(let c of r)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new tn(Ji.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Bf}}function KR(t,e,n){return Cc.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Yd{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Yd(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=qd.create(e.facet(Xd).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Yd(i)}}ps.state=Ei.define({create:Yd.init,update(t,e){for(let n of e.effects)if(n.is(ps.setState))return n.value;return e.startState.facet(Xd)!=e.state.facet(Xd)?Yd.init(e.state):t.apply(e)}});let tz=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(tz=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Z1=typeof navigator<"u"&&(!((J1=navigator.scheduling)===null||J1===void 0)&&J1.isInputPending)?()=>navigator.scheduling.isInputPending():null,Sfe=ti.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(ps.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(ps.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=tz(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(ps.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Z1?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>Z1&&Z1()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ps.setState.of(new Yd(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>fr(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Xd=Ee.define({combine(t){return t.length?t[0]:null},enables:t=>[ps.state,Sfe,Re.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class kfe{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const _fe=Ee.define(),iA=Ee.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Kc(t){let e=t.facet(iA);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Ok(t,e){let n="",i=t.tabSize,r=t.facet(iA)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function Cfe(t,e){t instanceof dt&&(t=new rA(t));for(let i of t.state.facet(_fe)){let r=i(t,e);if(r!==void 0)return r}let n=go(t.state);return n.length>=e?Efe(t,n,e):null}class rA{constructor(e,n={}){this.state=e,this.options=n,this.unit=Kc(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return fm(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const nz=new pt;function Efe(t,e,n){let i=e.resolveStack(n),r=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return iz(i,t,n)}function iz(t,e,n){for(let i=t;i;i=i.next){let r=Nfe(i.node);if(r)return r(sA.create(e,n,i))}return 0}function Afe(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Nfe(t){let e=t.type.prop(nz);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(pt.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>Tfe(o,!0,1,void 0,s&&!Afe(o)?r.from:void 0)}return t.parent==null?Pfe:null}function Pfe(){return 0}class sA extends rA{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new sA(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Mfe(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return iz(this.context.next,this.base,this.pos)}}function Mfe(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Rfe(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function Tfe(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=Rfe(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const Ofe=Ee.define(),Ife=new pt;function jfe(t,e,n){let i=go(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(Ife);if(l&&(a.to<i.length-50||i.length==t.doc.length||!Lfe(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function Lfe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function rz(t,e,n){for(let i of t.facet(Ofe)){let r=i(t,e,n);if(r)return r}return jfe(t,e,n)}function sz(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const oA=tt.define({map:sz}),Wb=tt.define({map:sz});function oz(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const Cm=Ei.define({create(){return nt.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=qR(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(oA)&&!Dfe(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(uz),r=i?nt.replace({widget:new Hfe(i(e.state,n.value))}):YR;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(Wb)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=qR(t,e.selection.main.head)),t},provide:t=>Re.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(YR.range(i,r))}return nt.set(e,!0)}});function qR(t,e,n=e){let i=!1;return t.between(e,n,(r,s)=>{r<n&&s>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(r,s)=>r>=n||s<=e}):t}function az(t,e,n){var i;let r=null;return(i=t.field(Cm,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function Dfe(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function lz(t,e){return t.field(Cm,!1)?e:e.concat(tt.appendConfig.of(Vfe()))}const $fe=t=>{for(let e of oz(t)){let n=rz(t.state,e.from,e.to);if(n)return t.dispatch({effects:lz(t.state,[oA.of(n),cz(t,n)])}),!0}return!1},Ffe=t=>{if(!t.state.field(Cm,!1))return!1;let e=[];for(let n of oz(t)){let i=az(t.state,n.from,n.to);i&&e.push(Wb.of(i),cz(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function cz(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Re.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const zfe=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=rz(e,r.from,r.to);s&&n.push(oA.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:lz(t.state,n)}),!!n.length},Bfe=t=>{let e=t.state.field(Cm,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(Wb.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},Ufe={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},uz=Ee.define({combine(t){return Rl(t,Ufe)}});function Vfe(t){return[Cm,Wfe]}function dz(t,e){let{state:n}=t,i=n.facet(uz),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=az(t.state,a.from,a.to);l&&t.dispatch({effects:Wb.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const YR=nt.replace({widget:new class extends Tl{toDOM(t){return dz(t,null)}}});class Hfe extends Tl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return dz(e,this.value)}}const Wfe=Re.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Gb{constructor(e,n){this.specs=e;let i;function r(a){let l=yl.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof ps?a=>a.prop(Gu)==o.data:o?a=>a==o:void 0,this.style=ez(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new yl(i):null,this.themeType=n.themeType}static define(e,n){return new Gb(e,n||{})}}const Ik=Ee.define(),Gfe=Ee.define({combine(t){return t.length?[t[0]]:null}});function Q1(t){let e=t.facet(Ik);return e.length?e:t.facet(Gfe)}function Kfe(t,e){let n=[Yfe],i;return t instanceof Gb&&(t.module&&n.push(Re.styleModule.of(t.module)),i=t.themeType),i?n.push(Ik.computeN([Re.darkTheme],r=>r.facet(Re.darkTheme)==(i=="dark")?[t]:[])):n.push(Ik.of(t)),n}class qfe{constructor(e){this.markCache=Object.create(null),this.tree=go(e.state),this.decorations=this.buildDeco(e,Q1(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=go(e.state),i=Q1(e.state),r=i!=Q1(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return nt.none;let i=new vl;for(let{from:r,to:s}of e.visibleRanges)gfe(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=nt.mark({class:l})))},r,s);return i.finish()}}const Yfe=um.high(ti.fromClass(qfe,{decorations:t=>t.decorations})),Xfe=1e4,Jfe="()[]{}",Zfe=new pt;function jk(t,e,n){let i=t.prop(e<0?pt.openedBy:pt.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function Lk(t){let e=t.type.prop(Zfe);return e?e(t.node):t}function Hg(t,e,n,i={}){let r=i.maxScanDistance||Xfe,s=i.brackets||Jfe,o=go(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=jk(l.type,n,s);if(c&&l.from<l.to){let u=Lk(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return Qfe(t,e,n,l,u,c,s)}}return ehe(t,e,n,o,a.type,r,s)}function Qfe(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do if(n<0?u.to<=i.from:u.from>=i.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=Lk(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(jk(u.type,n,o))c++;else if(jk(u.type,-n,o)){if(c==0){let d=Lk(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function ehe(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!u.next().done&&h<=s;){let p=u.value;n<0&&(h+=p.length);let g=e+h*n;for(let m=n>0?0:p.length-1,v=n>0?p.length:-1;m!=v;m+=n){let y=o.indexOf(p[m]);if(!(y<0||i.resolveInner(g+m,1).type!=r))if(y%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:g+m,to:g+m+1},matched:y>>1==l>>1};d--}}n>0&&(h+=p.length)}return u.done?{start:c,matched:!1}:null}function XR(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class fz{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=XR(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:XR(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function the(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||nhe,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||cA,mergeTokens:t.mergeTokens!==!1}}function nhe(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const JR=new WeakMap;class aA extends ps{constructor(e){let n=bfe(e.languageData),i=the(e),r,s=new class extends Z9{createParse(o,a,l){return new rhe(r,o,a,l)}};super(n,s,[],e.name),this.topNode=ahe(n,this),r=this,this.streamParser=i,this.stateAfter=new pt({perNode:!0}),this.tokenTable=e.tokenTable?new gz(i.tokenTable):ohe}static define(e){return new aA(e)}getIndent(e){let n,{overrideIndentation:i}=e.options;i&&(n=JR.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let r=lA(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),c=Math.min(e.pos,l.to);if(l.length){let u=i?i(l.from):-1,d=new fz(l.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;d.pos<c-l.from;)pz(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return i&&n==null&&JR.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function lA(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof tn&&l<r&&lA(t,a,l,i,r);if(c)return c}return null}function hz(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&n==0&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof tn){if(!(l=hz(t,a,n-o,i-o,r)))break;return r?new tn(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function ihe(t,e,n,i,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&lA(t,s.tree,0-s.offset,n,a),c;if(l&&l.pos<=i&&(c=hz(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:c}}return{state:t.streamParser.startState(r?Kc(r):4),tree:tn.empty}}class rhe{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=qd.get(),o=r[0].from,{state:a,tree:l}=ihe(e,i,o,this.to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&r.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Kc(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=qd.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(n,r,1),n+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=i:this.chunk.push(e,n,i,s),r}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new fz(n,e?e.state.tabSize:4,e?Kc(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=pz(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=tn.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:she,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new tn(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new tn(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function pz(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const cA=Object.create(null),Gp=[Ji.none],she=new QE(Gp),ZR=[],QR=Object.create(null),mz=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])mz[t]=vz(cA,e);class gz{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),mz)}resolve(e){return e?this.table[e]||(this.table[e]=vz(this.extra,e)):0}}const ohe=new gz(cA);function ew(t,e){ZR.indexOf(t)>-1||(ZR.push(t),console.warn(e))}function vz(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Ve[c];u?typeof u=="function"?l.length?l=l.map(u):ew(c,`Modifier ${c} used at start of tag`):l.length?ew(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:ew(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=QR[r];if(s)return s.id;let o=QR[r]=Ji.define({id:Gp.length,name:i,props:[pfe({[i]:n})]});return Gp.push(o),o.id}function ahe(t,e){let n=Ji.define({id:Gp.length,name:"Document",props:[Gu.add(()=>t),nz.add(()=>i=>e.getIndent(i))],top:!0});return Gp.push(n),n}Vt.RTL,Vt.LTR;const lhe=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=uA(t.state,n.from);return i.line?che(t):i.block?hhe(t):!1};function Em(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const che=Em(dA,0),uhe=Em(dA,1),dhe=Em(dA,2),fhe=Em(yz,0),hhe=Em((t,e)=>yz(t,e,mhe(e)),0);function uA(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Uf=50;function phe(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Uf,i),o=t.sliceDoc(r,r+Uf),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let u,d;r-i<=2*Uf?u=d=t.sliceDoc(i,r):(u=t.sliceDoc(i,i+Uf),d=t.sliceDoc(r-Uf,r));let h=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(d)[0].length,g=d.length-p-n.length;return u.slice(h,h+e.length)==e&&d.slice(g,g+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:r-p-n.length,margin:/\s/.test(d.charAt(g-1))?1:0}}:null}function mhe(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function yz(t,e,n=e.selection.ranges){let i=n.map(s=>uA(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>phe(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function dA(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,c=uA(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>r&&(s==o||o>d.from)){r=d.from;let h=/^\s*/.exec(d.text)[0].length,p=h==d.length,g=d.text.slice(h,h+c.length)==c?h:-1;h<d.text.length&&h<l&&(l=h),i.push({line:d,comment:g,token:c,indent:h,empty:p,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of i)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const Dk=aa.define(),ghe=aa.define(),vhe=Ee.define(),bz=Ee.define({combine(t){return Rl(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),xz=Ei.define({create(){return eo.empty},update(t,e){let n=e.state.facet(bz),i=e.annotation(Dk);if(i){let l=Ki.fromTransaction(e,i.selection),c=i.side,u=c==0?t.undone:t.done;return l?u=my(u,u.length,n.minDepth,l):u=kz(u,e.startState.selection),new eo(c==0?i.rest:u,c==0?u:i.rest)}let r=e.annotation(ghe);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(An.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Ki.fromTransaction(e),o=e.annotation(An.time),a=e.annotation(An.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new eo(t.done.map(Ki.fromJSON),t.undone.map(Ki.fromJSON))}});function yhe(t={}){return[xz,bz.of(t),Re.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?wz:e.inputType=="historyRedo"?$k:null;return i?(e.preventDefault(),i(n)):!1}})]}function fA(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(xz,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const wz=fA(0,!1),$k=fA(1,!1),bhe=fA(0,!0);class Ki{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Ki(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Ki(e.changes&&kn.fromJSON(e.changes),[],e.mapped&&ao.fromJSON(e.mapped),e.startSelection&&re.fromJSON(e.startSelection),e.selectionsAfter.map(re.fromJSON))}static fromTransaction(e,n){let i=Fr;for(let r of e.startState.facet(vhe)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Ki(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Fr)}static selection(e){return new Ki(void 0,Fr,void 0,void 0,e)}}function my(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function xhe(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(i=!0)}}),i}function whe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function Sz(t,e){return t.length?e.length?t.concat(e):t:e}const Fr=[],She=200;function kz(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-She));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),my(t,t.length-1,1e9,n.setSelAfter(i)))}else return[Ki.selection([e])]}function khe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function tw(t,e){if(!t.length)return t;let n=t.length,i=Fr;for(;n;){let r=_he(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[Ki.selection(i)]:Fr}function _he(t,e,n){let i=Sz(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Fr,n);if(!t.changes)return Ki.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Ki(r,tt.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const Che=/^(input\.type|delete)($|\.)/;class eo{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new eo(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||Che.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,xhe(a.changes,e.changes))||i=="input.type.compose")?o=my(o,o.length-1,r.minDepth,new Ki(e.changes.compose(a.changes),Sz(tt.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Fr)):o=my(o,o.length,r.minDepth,e),new eo(o,Fr,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Fr;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&whe(s[s.length-1],e)?this:new eo(kz(this.done,e),this.undone,n,i)}addMapping(e){return new eo(tw(this.done,e),tw(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Dk.of({side:e,rest:khe(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?Fr:r.slice(0,r.length-1);return s.mapped&&(a=tw(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Dk.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}eo.empty=new eo(Fr,Fr);function Am(t,e){return re.create(t.ranges.map(e),t.mainIndex)}function Dl(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Zc({state:t,dispatch:e},n){let i=Am(t.selection,n);return i.eq(t.selection,!0)?!1:(e(Dl(t,i)),!0)}function Kb(t,e){return re.cursor(e?t.to:t.from)}function _z(t,e){return Zc(t,n=>n.empty?t.moveByChar(n,e):Kb(n,e))}function $l(t){return t.textDirectionAt(t.state.selection.main.head)==Vt.LTR}const eT=t=>_z(t,!$l(t)),tT=t=>_z(t,$l(t));function Cz(t,e){return Zc(t,n=>n.empty?t.moveByGroup(n,e):Kb(n,e))}const Ehe=t=>Cz(t,!$l(t)),Ahe=t=>Cz(t,$l(t));function Ez(t,e){return Zc(t,n=>{if(!n.empty)return Kb(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const nT=t=>Ez(t,!1),iT=t=>Ez(t,!0);function Az(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Re.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function Nz(t,e){let n=Az(t),{state:i}=t,r=Am(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):Kb(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=Re.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Dl(i,r),{effects:s}),!0}const nw=t=>Nz(t,!1),iw=t=>Nz(t,!0);function qb(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=re.cursor(i.from+s))}return r}const rT=t=>Zc(t,e=>qb(t,e,!0)),sT=t=>Zc(t,e=>qb(t,e,!1)),Nhe=t=>Zc(t,e=>re.cursor(t.lineBlockAt(e.head).from,1)),Phe=t=>Zc(t,e=>re.cursor(t.lineBlockAt(e.head).to,-1));function Mhe(t,e,n){let i=!1,r=Am(t.selection,s=>{let o=Hg(t,s.head,-1)||Hg(t,s.head,1)||s.head>0&&Hg(t,s.head-1,1)||s.head<t.doc.length&&Hg(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return re.cursor(a)});return i?(e(Dl(t,r)),!0):!1}const Rhe=({state:t,dispatch:e})=>Mhe(t,e);function Fl(t,e){let n=Am(t.state.selection,i=>{let r=e(i);return re.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Dl(t.state,n)),!0)}function Pz(t,e){return Fl(t,n=>t.moveByChar(n,e))}const oT=t=>Pz(t,!$l(t)),aT=t=>Pz(t,$l(t));function Mz(t,e){return Fl(t,n=>t.moveByGroup(n,e))}const The=t=>Mz(t,!$l(t)),Ohe=t=>Mz(t,$l(t));function Rz(t,e){return Fl(t,n=>t.moveVertically(n,e))}const lT=t=>Rz(t,!1),cT=t=>Rz(t,!0);function Tz(t,e){return Fl(t,n=>t.moveVertically(n,e,Az(t).height))}const uT=t=>Tz(t,!1),dT=t=>Tz(t,!0),fT=t=>Fl(t,e=>qb(t,e,!0)),hT=t=>Fl(t,e=>qb(t,e,!1)),Ihe=t=>Fl(t,e=>re.cursor(t.lineBlockAt(e.head).from)),jhe=t=>Fl(t,e=>re.cursor(t.lineBlockAt(e.head).to)),pT=({state:t,dispatch:e})=>(e(Dl(t,{anchor:0})),!0),mT=({state:t,dispatch:e})=>(e(Dl(t,{anchor:t.doc.length})),!0),gT=({state:t,dispatch:e})=>(e(Dl(t,{anchor:t.selection.main.anchor,head:0})),!0),vT=({state:t,dispatch:e})=>(e(Dl(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Lhe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Dhe=({state:t,dispatch:e})=>{let n=Xb(t).map(({from:i,to:r})=>re.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:re.create(n),userEvent:"select"})),!0};function Yb(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=Wg(t,l,!1)):l>o&&(n="delete.forward",l=Wg(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Wg(t,o,!1),a=Wg(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:re.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Re.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Wg(t,e,n){if(t instanceof Re)for(let i of t.state.facet(Re.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const Oz=(t,e,n)=>Yb(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),a,l;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let c=fm(a,s.tabSize),u=c%Kc(s)||Kc(s);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)r--;l=r}else l=Xn(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=Xn(o.text,l-o.from,!1,!1)+o.from);return l}),rw=t=>Oz(t,!1,!0),yT=t=>Oz(t,!0,!1),Iz=(t,e)=>Yb(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=Xn(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||i!=n.head)&&(a=u),i=l}return i}),bT=t=>Iz(t,!1),$he=t=>Iz(t,!0),xT=t=>Yb(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Fhe=t=>Yb(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),zhe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:gt.of(["",""])},range:re.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Bhe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:Xn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:Xn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:re.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Xb(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function jz(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of Xb(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(re.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(re.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:re.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Uhe=({state:t,dispatch:e})=>jz(t,e,!1),Vhe=({state:t,dispatch:e})=>jz(t,e,!0);function Lz(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of Xb(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Hhe=({state:t,dispatch:e})=>Lz(t,e,!1),Whe=({state:t,dispatch:e})=>Lz(t,e,!0),Ghe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Xb(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=Am(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),a=t.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Khe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=go(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(pt.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const wT=qhe(!1);function qhe(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&Khe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new rA(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=Cfe(c,s);for(u==null&&(u=fm(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",Ok(e,u)];return l&&d.push(Ok(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:gt.of(d)},range:re.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Dz(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:re.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const Fk=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Dz(t,(n,i)=>{i.push({from:n.from,insert:t.facet(iA)})}),{userEvent:"input.indent"})),!0),ST=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Dz(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=fm(r,t.tabSize),o=0,a=Ok(t,Math.max(0,s-Kc(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),kT=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Kp{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(kT(a)):kT,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ir(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=MC(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=zo(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Kp.prototype[Symbol.iterator]=function(){return this});const $z={from:-1,to:-1,match:/.*/.exec("")},hA="gm"+(/x/.unicode==null?"":"u");class Fz{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=$z,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new zz(e,n,i,r,s);this.re=new RegExp(n,hA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=gy(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=gy(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const sw=new WeakMap;class fd{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=sw.get(e);if(!r||r.from>=i||r.to<=n){let a=new fd(n,e.sliceString(n,i));return sw.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),sw.set(e,new fd(o,s)),new fd(n,s.slice(n-o,i-o))}}class zz{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=$z,this.matchPos=gy(e,r),this.re=new RegExp(n,hA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=fd.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=gy(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=fd.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Fz.prototype[Symbol.iterator]=zz.prototype[Symbol.iterator]=function(){return this});function Yhe(t){try{return new RegExp(t,hA),!0}catch{return!1}}function gy(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function zk(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Rt("input",{class:"cm-textfield",name:"line",value:e}),i=Rt("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:zh.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},Rt("label",t.state.phrase("Go to line"),": ",n)," ",Rt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Rt("button",{name:"close",onclick:()=>{t.dispatch({effects:zh.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,h=u?+u.slice(1):0,p=c?+c:a.number;if(c&&d){let v=p/100;l&&(v=v*(l=="-"?-1:1)+a.number/o.doc.lines),p=Math.round(o.doc.lines*v)}else c&&l&&(p=p*(l=="-"?-1:1)+a.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),m=re.cursor(g.from+Math.max(0,Math.min(h,g.length)));t.dispatch({effects:[zh.of(!1),Re.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:i}}const zh=tt.define(),_T=Ei.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(zh)&&(t=n.value);return t},provide:t=>Rp.from(t,e=>e?zk:null)}),Xhe=t=>{let e=Mp(t,zk);if(!e){let n=[zh.of(!0)];t.state.field(_T,!1)==null&&n.push(tt.appendConfig.of([_T,Jhe])),t.dispatch({effects:n}),e=Mp(t,zk)}return e&&e.dom.querySelector("input").select(),!0},Jhe=Re.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Zhe=({state:t,dispatch:e})=>{let{selection:n}=t,i=re.create(n.ranges.map(r=>t.wordAt(r.head)||re.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function Qhe(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new Kp(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Kp(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const epe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Zhe({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=Qhe(t,i);return r?(e(t.update({selection:t.selection.addRange(re.range(r.from,r.to),!1),effects:Re.scrollIntoView(r.to)})),!0):!1},hf=Ee.define({combine(t){return Rl(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new cpe(e),scrollToMatch:e=>Re.scrollIntoView(e)})}});class Bz{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Yhe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new rpe(this):new npe(this)}getCursor(e,n=0,i){let r=e.doc?e:dt.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Cu(this,r,n,i):_u(this,r,n,i)}}class Uz{constructor(e){this.spec=e}}function _u(t,e,n,i){return new Kp(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?tpe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function tpe(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(vy(r,n-s))!=Jn.Word||e(yy(r,n-s))!=Jn.Word)&&(e(yy(r,i-s))!=Jn.Word||e(vy(r,i-s))!=Jn.Word))}class npe extends Uz{constructor(e){super(e)}nextMatch(e,n,i){let r=_u(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=_u(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=_u(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=_u(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=_u(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Cu(t,e,n,i){return new Fz(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?ipe(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function vy(t,e){return t.slice(Xn(t,e,!1),e)}function yy(t,e){return t.slice(e,Xn(t,e))}function ipe(t){return(e,n,i)=>!i[0].length||(t(vy(i.input,i.index))!=Jn.Word||t(yy(i.input,i.index))!=Jn.Word)&&(t(yy(i.input,i.index+i[0].length))!=Jn.Word||t(vy(i.input,i.index+i[0].length))!=Jn.Word)}class rpe extends Uz{nextMatch(e,n,i){let r=Cu(this.spec,e,i,e.doc.length).next();return r.done&&(r=Cu(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=Cu(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let s=+i.slice(0,r);if(s>0&&s<e.match.length)return e.match[s]+i.slice(r)}return n})}matchAll(e,n){let i=Cu(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Cu(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const qp=tt.define(),pA=tt.define(),al=Ei.define({create(t){return new ow(Bk(t).create(),null)},update(t,e){for(let n of e.effects)n.is(qp)?t=new ow(n.value.create(),t.panel):n.is(pA)&&(t=new ow(t.query,n.value?mA:null));return t},provide:t=>Rp.from(t,e=>e.panel)});class ow{constructor(e,n){this.query=e,this.panel=n}}const spe=nt.mark({class:"cm-searchMatch"}),ope=nt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),ape=ti.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(al))}update(t){let e=t.state.field(al);(e!=t.startState.field(al)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return nt.none;let{view:n}=this,i=new vl;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(h=>h.from==c&&h.to==u);i.add(c,u,d?ope:spe)})}return i.finish()}},{decorations:t=>t.decorations});function Nm(t){return e=>{let n=e.state.field(al,!1);return n&&n.query.spec.valid?t(e,n):Kz(e)}}const CT=Nm((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=re.single(i.from,i.to),s=t.state.facet(hf);return t.dispatch({selection:r,effects:[gA(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),Gz(t),!0}),ET=Nm((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=re.single(r.from,r.to),o=t.state.facet(hf);return t.dispatch({selection:s,effects:[gA(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),Gz(t),!0}),Vz=Nm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:re.create(n.map(i=>re.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),lpe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new Kp(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(re.range(a.value.from,a.value.to))}return e(t.update({selection:re.create(s,o),userEvent:"select.search.matches"})),!0},AT=Nm((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,a=[],l,c,u=[];o.from==i&&o.to==r&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(Re.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let d=t.state.changes(a);return o&&(l=re.single(o.from,o.to).map(d),u.push(gA(t,o)),u.push(n.facet(hf).scrollToMatch(l.main,t))),t.dispatch({changes:d,selection:l,effects:u,userEvent:"input.replace"}),!0}),Hz=Nm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Re.announce.of(i),userEvent:"input.replace.all"}),!0});function mA(t){return t.state.facet(hf).createPanel(t)}function Bk(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(hf);return new Bz({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function Wz(t){let e=Mp(t,mA);return e&&e.dom.querySelector("[main-field]")}function Gz(t){let e=Wz(t);e&&e==t.root.activeElement&&e.select()}const Kz=t=>{let e=t.state.field(al,!1);if(e&&e.panel){let n=Wz(t);if(n&&n!=t.root.activeElement){let i=Bk(t.state,e.query.spec);i.valid&&t.dispatch({effects:qp.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[pA.of(!0),e?qp.of(Bk(t.state,e.query.spec)):tt.appendConfig.of(dpe)]});return!0},qz=t=>{let e=t.state.field(al,!1);if(!e||!e.panel)return!1;let n=Mp(t,mA);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:pA.of(!1)}),!0};class cpe{constructor(e){this.view=e;let n=this.query=e.state.field(al).query.spec;this.commit=this.commit.bind(this),this.searchField=Rt("input",{value:n.search,placeholder:er(e,"Find"),"aria-label":er(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Rt("input",{value:n.replace,placeholder:er(e,"Replace"),"aria-label":er(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Rt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Rt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Rt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return Rt("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Rt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>CT(e),[er(e,"next")]),i("prev",()=>ET(e),[er(e,"previous")]),i("select",()=>Vz(e),[er(e,"all")]),Rt("label",null,[this.caseField,er(e,"match case")]),Rt("label",null,[this.reField,er(e,"regexp")]),Rt("label",null,[this.wordField,er(e,"by word")]),...e.state.readOnly?[]:[Rt("br"),this.replaceField,i("replace",()=>AT(e),[er(e,"replace")]),i("replaceAll",()=>Hz(e),[er(e,"replace all")])],Rt("button",{name:"close",onclick:()=>qz(e),"aria-label":er(e,"close"),type:"button"},[""])])}commit(){let e=new Bz({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:qp.of(e)}))}keydown(e){ate(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ET:CT)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),AT(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(qp)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(hf).top}}function er(t,e){return t.state.phrase(e)}const Gg=30,Kg=/[\s\.,:;?!]/;function gA(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-Gg),o=Math.min(r,n+Gg),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<Gg;l++)if(!Kg.test(a[l+1])&&Kg.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-Gg;l--)if(!Kg.test(a[l-1])&&Kg.test(a[l])){a=a.slice(0,l);break}}return Re.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const upe=Re.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),dpe=[al,um.low(ape),upe];class fpe{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=go(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(Yz(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function NT(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function hpe(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=NT(e)+NT(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function ppe(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:hpe(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class PT{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function Bh(t){return t.selection.main.from}function Yz(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const Xz=aa.define();function mpe(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:re.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const MT=new WeakMap;function gpe(t){if(!Array.isArray(t))return t;let e=MT.get(t);return e||MT.set(t,e=ppe(t)),e}const Jz=tt.define(),vA=tt.define();class vpe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=Ir(e,n),r=zo(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(Ir(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let x=Ir(e,0),w=zo(x),S=w==e.length?0:-100;if(x!=n[0])if(x==i[0])S+=-200;else return null;return this.ret(S,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let x=0,w=Math.min(e.length,200);x<w&&c<l;){let S=Ir(e,x);(S==n[c]||S==i[c])&&(r[c++]=x),x+=zo(S)}if(c<l)return null}let u=0,d=0,h=!1,p=0,g=-1,m=-1,v=/[a-z]/.test(e),y=!0;for(let x=0,w=Math.min(e.length,200),S=0;x<w&&d<l;){let _=Ir(e,x);a<0&&(u<l&&_==n[u]&&(s[u++]=x),p<l&&(_==n[p]||_==i[p]?(p==0&&(g=x),m=x+1,p++):p=0));let E,C=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(E=MC(_))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!x||C==1&&v||S==0&&C!=0)&&(n[d]==_||i[d]==_&&(h=!0)?o[d++]=x:o.length&&(y=!1)),S=C,x+=zo(_)}return d==l&&o[0]==0&&y?this.result(-100+(h?-200:0),o,e):p==l&&g==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):p==l?this.ret(-900-e.length,[g,m]):d==l?this.result(-100+(h?-200:0)+-700+(y?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?zo(Ir(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class ype{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const qs=Ee.define({combine(t){return Rl(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:bpe,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>RT(e(i),n(i)),optionClass:(e,n)=>i=>RT(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function RT(t,e){return t?e?t+" "+e:t:e}function bpe(t,e,n,i,r,s){let o=t.textDirection==Vt.RTL,a=o,l=!1,c="top",u,d,h=e.left-r.left,p=r.right-e.right,g=i.right-i.left,m=i.bottom-i.top;if(a&&h<Math.min(g,p)?a=!1:!a&&p<Math.min(g,h)&&(a=!0),g<=(a?h:p))u=Math.max(r.top,Math.min(n.top,r.bottom-m))-e.top,d=Math.min(400,a?h:p);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let x=r.bottom-e.bottom;x>=m||x>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let v=(e.bottom-e.top)/s.offsetHeight,y=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/v}px; max-width: ${d/y}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function xpe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(a.slice(u,d))),h.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function aw(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class wpe{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(qs);this.optionContent=xpe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=aw(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(qs).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:vA.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=aw(s.length,o,e.state.facet(qs).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=aw(n.options.length,n.selected,this.view.state.facet(qs).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>fr(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&kpe(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(qs).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",o=>{o.target==r&&o.preventDefault()});let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let h=typeof c=="string"?c:c.name;if(h!=s&&(o>i.from||i.from==0))if(s=h,typeof c!="string"&&c.header)r.appendChild(c.header(c));else{let p=r.appendChild(document.createElement("completion-section"));p.textContent=h}}const u=r.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let h of this.optionContent){let p=h(a,this.view.state,this.view,l);p&&u.appendChild(p)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Spe(t,e){return n=>new wpe(n,t,e)}function kpe(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function TT(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function _pe(t,e){let n=[],i=null,r=c=>{n.push(c);let{section:u}=c.completion;if(u){i||(i=[]);let d=typeof u=="string"?u:u.name;i.some(h=>h.name==d)||i.push(typeof u=="string"?{name:d}:u)}},s=e.facet(qs);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)r(new PT(d,c.source,u?u(d):[],1e9-n.length));else{let d=e.sliceDoc(c.from,c.to),h,p=s.filterStrict?new ype(d):new vpe(d);for(let g of c.result.options)if(h=p.match(g.label)){let m=g.displayLabel?u?u(g,h.matched):[]:h.matched;r(new PT(g,c.source,m,h.score+(g.boost||0)))}}}if(i){let c=Object.create(null),u=0,d=(h,p)=>{var g,m;return((g=h.rank)!==null&&g!==void 0?g:1e9)-((m=p.rank)!==null&&m!==void 0?m:1e9)||(h.name<p.name?-1:1)};for(let h of i.sort(d))u-=1e5,c[h.name]=u;for(let h of n){let{section:p}=h.completion;p&&(h.score+=c[typeof p=="string"?p:p.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of n.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):TT(c.completion)>TT(a)&&(o[o.length-1]=c),a=c.completion}return o}class Ku{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Ku(this.options,OT(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(c=>c.isPending))return r.setDisabled();let a=_pe(e,n);if(!a.length)return r&&e.some(c=>c.isPending)?r.setDisabled():null;let l=n.facet(qs).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let c=r.options[r.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new Ku(a,OT(i,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:Rpe,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new Ku(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Ku(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class by{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new by(Npe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(qs),s=(i.override||n.languageDataAt("autocomplete",Bh(n)).map(gpe)).map(l=>(this.active.find(u=>u.source==l)||new ms(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(Zz));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Cpe(s,this.active)||a?o=Ku.build(s,n,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new ms(l.source,0):l));for(let l of e.effects)l.is(Qz)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new by(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Epe:Ape}}function Cpe(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const Epe={"aria-autocomplete":"list"},Ape={};function OT(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Npe=[];function Ppe(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(Xz);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class ms{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=Ppe(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new ms(r.source,0)),i&4&&r.state==0&&(r=new ms(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(Jz))r=new ms(r.source,1,s.value);else if(s.is(vA))r=new ms(r.source,0);else if(s.is(Zz))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Bh(e.state))}}class Uh extends ms{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Bh(e.state);if(a>o||!r||n&2&&(Bh(e.startState)==this.from||a<this.limit))return new ms(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return Mpe(r.validFor,e.state,s,o)?new Uh(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new fpe(e.state,a,!1)))?new Uh(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:Bh(e.state)):new ms(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Uh(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ms(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Mpe(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):Yz(t,!0).test(r)}const Zz=tt.define({map(t,e){return t.map(n=>n.map(e))}}),Qz=tt.define(),pf=Ei.define({create(){return by.start()},update(t,e){return t.update(e)},provide:t=>[WC.from(t,e=>e.tooltip),Re.contentAttributes.from(t,e=>e.attrs)]});function eB(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(pf).active.find(r=>r.source==e.source);return i instanceof Uh?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},mpe(t.state,n,i.from,i.to)),{annotations:Xz.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const Rpe=Spe(pf,eB);function qg(t,e="option"){return n=>{let i=n.state.field(pf,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(qs).interactionDelay)return!1;let r=1,s;e=="page"&&(s=Fte(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:Qz.of(a)}),!0}}const IT=t=>{let e=t.state.field(pf,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(qs).interactionDelay?!1:eB(t,e.open.options[e.open.selected])},Tpe=t=>t.state.field(pf,!1)?(t.dispatch({effects:Jz.of(!0)}),!0):!1,Ope=t=>{let e=t.state.field(pf,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:vA.of(null)}),!0)},tB={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},nB=new class extends Dc{};nB.startSide=1;nB.endSide=-1;const lw="()[]{}<>";function Ipe(t){for(let e=0;e<lw.length;e+=2)if(lw.charCodeAt(e)==t)return lw.charAt(e+1);return MC(t<128?t:t+1)}function jpe(t,e){return t.languageDataAt("closeBrackets",e)[0]||tB}const Lpe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=jpe(t,t.selection.main.head).brackets||tB.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=$pe(t.doc,o.head);for(let l of i)if(l==a&&Dpe(t.doc,o.head)==Ipe(Ir(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:re.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function Dpe(t,e){let n=t.sliceString(e,e+2);return n.slice(0,zo(Ir(n,0)))}function $pe(t,e){let n=t.sliceString(e-2,e);return zo(Ir(n,0))==n.length?n:n.slice(1)}class jT{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class cc{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=i.facet(to).markerFilter;r&&(e=r(e,i));let s=e.slice().sort((u,d)=>u.from-d.from||u.to-d.to),o=new vl,a=[],l=0;for(let u=0;;){let d=u==s.length?null:s[u];if(!d&&!a.length)break;let h,p;for(a.length?(h=l,p=a.reduce((m,v)=>Math.min(m,v.to),d&&d.from>h?d.from:1e8)):(h=d.from,p=d.to,a.push(d),u++);u<s.length;){let m=s[u];if(m.from==h&&(m.to>m.from||m.to==h))a.push(m),u++,p=Math.min(m.to,p);else{p=Math.min(m.from,p);break}}let g=Qpe(a);if(a.some(m=>m.from==m.to||m.from==m.to-1&&i.doc.lineAt(m.from).to==m.from))o.add(h,h,nt.widget({widget:new Ype(g),diagnostics:a.slice()}));else{let m=a.reduce((v,y)=>y.markClass?v+" "+y.markClass:v,"");o.add(h,p,nt.mark({class:"cm-lintRange cm-lintRange-"+g+m,diagnostics:a.slice(),inclusiveEnd:a.some(v=>v.to>p)}))}l=p;for(let m=0;m<a.length;m++)a[m].to<=l&&a.splice(m--,1)}let c=o.finish();return new cc(c,n,Jd(c))}}function Jd(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new jT(r,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new jT(i.from,s,i.diagnostic)}}),i}function Fpe(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(to).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(yA))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function iB(t,e){return t.field(mr,!1)?e:e.concat(tt.appendConfig.of(aB))}function zpe(t,e){return{effects:iB(t,[yA.of(e)])}}const yA=tt.define(),bA=tt.define(),rB=tt.define(),mr=Ei.define({create(){return new cc(nt.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=Jd(n,t.selected.diagnostic,s)||Jd(n,null,s)}!n.size&&r&&e.state.facet(to).autoPanel&&(r=null),t=new cc(n,r,i)}for(let n of e.effects)if(n.is(yA)){let i=e.state.facet(to).autoPanel?n.value.length?Yp.open:null:t.panel;t=cc.init(n.value,i,e.state)}else n.is(bA)?t=new cc(t.diagnostics,n.value?Yp.open:null,t.selected):n.is(rB)&&(t=new cc(t.diagnostics,t.panel,n.value));return t},provide:t=>[Rp.from(t,e=>e.panel),Re.decorations.from(t,e=>e.diagnostics)]}),Bpe=nt.mark({class:"cm-lintRange cm-lintRange-active"});function Upe(t,e,n){let{diagnostics:i}=t.state.field(mr),r,s=-1,o=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0)))return r=u.diagnostics,s=l,o=c,!1});let a=t.state.facet(to).tooltipFilter;return r&&a&&(r=a(r,t.state)),r?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Vpe(t,r)}}}:null}function Vpe(t,e){return Rt("ul",{class:"cm-tooltip-lint"},e.map(n=>oB(t,n,!1)))}const Hpe=t=>{let e=t.state.field(mr,!1);(!e||!e.panel)&&t.dispatch({effects:iB(t.state,[bA.of(!0)])});let n=Mp(t,Yp.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},LT=t=>{let e=t.state.field(mr,!1);return!e||!e.panel?!1:(t.dispatch({effects:bA.of(!1)}),!0)},Wpe=t=>{let e=t.state.field(mr,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Gpe=ti.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(to);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(to);n.length&&Kpe(n.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(zpe(this.view.state,i.reduce((r,s)=>r.concat(s))))},i=>{fr(this.view.state,i)})}}update(t){let e=t.state.facet(to);(t.docChanged||e!=t.startState.facet(to)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function Kpe(t,e,n){let i=[],r=-1;for(let s of t)s.then(o=>{i.push(o),clearTimeout(r),i.length==t.length?e(i):r=setTimeout(()=>e(i),200)},n)}const to=Ee.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Rl(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function qpe(t,e={}){return[to.of({source:t,config:e}),Gpe,aB]}function sB(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function oB(t,e,n){var i;let r=n?sB(e.actions):[];return Rt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Rt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=h=>{if(h.preventDefault(),a)return;a=!0;let p=Jd(t.state.field(mr).diagnostics,e);p&&s.apply(t,p.from,p.to)},{name:c}=s,u=r[o]?c.indexOf(r[o]):-1,d=u<0?c:[c.slice(0,u),Rt("u",c.slice(u,u+1)),c.slice(u+1)];return Rt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&Rt("div",{class:"cm-diagnosticSource"},e.source))}class Ype extends Tl{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Rt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class DT{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=oB(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Yp{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)LT(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=sB(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=Jd(this.view.state.field(mr).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Rt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Rt("div",{class:"cm-panel-lint"},this.list,Rt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>LT(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(mr).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(mr),i=0,r=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,h;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==u){d=p;break}d<0?(h=new DT(this.view,u),this.items.splice(i,0,h),r=!0):(h=this.items[d],d>i&&(this.items.splice(i,d-i),r=!0)),n&&h.diagnostic==n.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),s=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new DT(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(mr),i=Jd(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:rB.of(i)})}static open(e){return new Yp(e)}}function Xpe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Yg(t){return Xpe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Jpe=Re.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Yg("#d11")},".cm-lintRange-warning":{backgroundImage:Yg("orange")},".cm-lintRange-info":{backgroundImage:Yg("#999")},".cm-lintRange-hint":{backgroundImage:Yg("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Zpe(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function Qpe(t){let e="hint",n=1;for(let i of t){let r=Zpe(i.severity);r>n&&(n=r,e=i.severity)}return e}const aB=[mr,Re.decorations.compute([mr],t=>{let{selected:e,panel:n}=t.field(mr);return!e||!n||e.from==e.to?nt.none:nt.set([Bpe.range(e.from,e.to)])}),$te(Upe,{hideOn:Fpe}),Jpe],lB=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},eme=lB("up"),tme=lB("down"),nme=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(re.range(s,s)):e=re.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},ime=[{key:"Ctrl-Space",run:Tpe},{key:"Escape",run:Ope},{key:"ArrowDown",run:qg(!0)},{key:"ArrowUp",run:qg(!1)},{key:"PageDown",run:qg(!0,"page")},{key:"PageUp",run:qg(!1,"page")},{key:"Enter",run:IT},{key:"Tab",run:IT},{key:"Mod-f",run:Kz,scope:"editor search-panel"},{key:"Escape",run:qz,scope:"editor search-panel"},{key:"Alt-Enter",run:Vz,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:Hz,scope:"editor search-panel"},{key:"Ctrl-g",run:Xhe},{key:"Mod-d",run:epe,preventDefault:!0},{key:"Shift-Mod-l",run:lpe},{key:"Enter",run:wT,shift:wT},{key:"ArrowLeft",run:eT,shift:oT,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Ehe,shift:The},{key:"ArrowRight",run:tT,shift:aT,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Ahe,shift:Ohe},{key:"ArrowUp",run:nT,shift:lT,preventDefault:!0},{key:"ArrowDown",run:iT,shift:cT,preventDefault:!0},{key:"Home",run:sT,shift:hT},{mac:"Cmd-ArrowLeft",run:sT,shift:hT},{key:"Mod-Home",run:pT,shift:gT},{mac:"Cmd-ArrowUp",run:pT,shift:gT},{key:"PageUp",run:nw,shift:uT},{mac:"Ctrl-ArrowUp",run:nw,shift:uT},{key:"PageDown",run:iw,shift:dT},{mac:"Ctrl-ArrowDown",run:iw,shift:dT},{key:"End",run:rT,shift:fT},{mac:"Cmd-ArrowRight",run:rT,shift:fT},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:eme,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:tme,preventDefault:!0},{key:"Shift-Alt-i",run:nme},{key:"Mod-End",run:mT,shift:vT},{mac:"Cmd-ArrowDown",run:mT,shift:vT},{key:"Mod-a",run:Lhe},{key:"Backspace",run:Lpe},{key:"Backspace",run:rw,shift:rw},{key:"Delete",run:yT},{key:"Mod-Backspace",mac:"Alt-Backspace",run:bT},{key:"Mod-Delete",mac:"Alt-Delete",run:$he},{mac:"Mod-Backspace",run:Fhe},{mac:"Mod-Delete",run:xT},{mac:"Ctrl-b",run:eT,shift:oT,preventDefault:!0},{mac:"Ctrl-f",run:tT,shift:aT},{mac:"Ctrl-p",run:nT,shift:lT},{mac:"Ctrl-n",run:iT,shift:cT},{mac:"Ctrl-a",run:Nhe,shift:Ihe},{mac:"Ctrl-e",run:Phe,shift:jhe},{mac:"Ctrl-d",run:yT},{mac:"Ctrl-h",run:rw},{mac:"Ctrl-k",run:xT},{mac:"Ctrl-Alt-h",run:bT},{mac:"Ctrl-o",run:zhe},{mac:"Ctrl-t",run:Bhe},{mac:"Ctrl-v",run:iw},{mac:"Alt-v",run:nw},{key:"Shift-Mod-k",run:Ghe},{key:"Alt-ArrowDown",run:Vhe},{key:"Alt-ArrowUp",run:Uhe},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:Whe},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Hhe},{key:"Mod-l",run:Dhe,preventDefault:!0},{key:"Shift-Mod-\\",run:Rhe},{key:"Tab",run:Fk,shift:ST,preventDefault:!0},{key:"Mod-[",run:ST},{key:"Mod-]",run:Fk},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:$fe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Ffe},{key:"Mod-k Mod-0",run:zfe},{key:"Mod-k Mod-j",run:Bfe},{key:"Mod-k Mod-c",run:uhe},{key:"Mod-k Mod-u",run:dhe},{key:"Mod-/",run:lhe},{key:"Shift-Alt-a",run:fhe},{key:"Mod-z",run:wz,preventDefault:!0},{key:"Mod-y",run:$k,preventDefault:!0},{key:"Mod-Shift-z",run:$k,preventDefault:!0},{key:"Mod-u",run:bhe,preventDefault:!0},{key:"Mod-Shift-m",run:Hpe},{key:"F8",run:Wpe}];var rme=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},mu=new WeakMap,Xg=new WeakMap,Jg={},cw=0,cB=function(t){return t&&(t.host||cB(t.parentNode))},sme=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=cB(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},ome=function(t,e,n,i){var r=sme(e,Array.isArray(t)?t:[t]);Jg[n]||(Jg[n]=new WeakMap);var s=Jg[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var p=h.getAttribute(i),g=p!==null&&p!=="false",m=(mu.get(h)||0)+1,v=(s.get(h)||0)+1;mu.set(h,m),s.set(h,v),o.push(h),m===1&&g&&Xg.set(h,!0),v===1&&h.setAttribute(n,"true"),g||h.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return u(e),a.clear(),cw++,function(){o.forEach(function(d){var h=mu.get(d)-1,p=s.get(d)-1;mu.set(d,h),s.set(d,p),h||(Xg.has(d)||d.removeAttribute(i),Xg.delete(d)),p||d.removeAttribute(n)}),cw--,cw||(mu=new WeakMap,mu=new WeakMap,Xg=new WeakMap,Jg={})}},ame=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=rme(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),ome(i,r,n,"aria-hidden")):function(){return null}},Uk=["Enter"," "],lme=["ArrowDown","PageUp","Home"],uB=["ArrowUp","PageDown","End"],cme=[...lme,...uB],ume={ltr:[...Uk,"ArrowRight"],rtl:[...Uk,"ArrowLeft"]},dme={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Jb="Menu",[Xp,fme,hme]=im(Jb),[Qc,dB]=_s(Jb,[hme,uf,Jy]),xA=uf(),fB=Jy(),[L0e,eu]=Qc(Jb),[D0e,Pm]=Qc(Jb),pme="MenuAnchor",wA=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=xA(n);return f.jsx(Tb,{...r,...i,ref:e})});wA.displayName=pme;var SA="MenuPortal",[mme,hB]=Qc(SA,{forceMount:void 0}),pB=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=eu(SA,e);return f.jsx(mme,{scope:e,forceMount:n,children:f.jsx(ra,{present:n||s.open,children:f.jsx(wm,{asChild:!0,container:r,children:i})})})};pB.displayName=SA;var Kr="MenuContent",[gme,kA]=Qc(Kr),mB=b.forwardRef((t,e)=>{const n=hB(Kr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=eu(Kr,t.__scopeMenu),o=Pm(Kr,t.__scopeMenu);return f.jsx(Xp.Provider,{scope:t.__scopeMenu,children:f.jsx(ra,{present:i||s.open,children:f.jsx(Xp.Slot,{scope:t.__scopeMenu,children:o.modal?f.jsx(vme,{...r,ref:e}):f.jsx(yme,{...r,ref:e})})})})}),vme=b.forwardRef((t,e)=>{const n=eu(Kr,t.__scopeMenu),i=b.useRef(null),r=ut(e,i);return b.useEffect(()=>{const s=i.current;if(s)return ame(s)},[]),f.jsx(_A,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ye(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),yme=b.forwardRef((t,e)=>{const n=eu(Kr,t.__scopeMenu);return f.jsx(_A,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),bme=Td("MenuContent.ScrollLock"),_A=b.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,disableOutsideScroll:g,...m}=t,v=eu(Kr,n),y=Pm(Kr,n),x=xA(n),w=fB(n),S=fme(n),[_,E]=b.useState(null),C=b.useRef(null),N=ut(e,C,v.onContentChange),M=b.useRef(0),I=b.useRef(""),O=b.useRef(0),T=b.useRef(null),H=b.useRef("right"),L=b.useRef(0),K=g?Ib:b.Fragment,X=g?{as:bme,allowPinchZoom:!0}:void 0,te=z=>{var k,P;const ie=I.current+z,be=S().filter(j=>!j.disabled),J=document.activeElement,le=(k=be.find(j=>j.ref.current===J))==null?void 0:k.textValue,F=be.map(j=>j.textValue),$=Rme(F,ie,le),V=(P=be.find(j=>j.textValue===$))==null?void 0:P.ref.current;(function j(R){I.current=R,window.clearTimeout(M.current),R!==""&&(M.current=window.setTimeout(()=>j(""),1e3))})(ie),V&&setTimeout(()=>V.focus())};b.useEffect(()=>()=>window.clearTimeout(M.current),[]),AE();const U=b.useCallback(z=>{var be,J;return H.current===((be=T.current)==null?void 0:be.side)&&Ome(z,(J=T.current)==null?void 0:J.area)},[]);return f.jsx(gme,{scope:n,searchRef:I,onItemEnter:b.useCallback(z=>{U(z)&&z.preventDefault()},[U]),onItemLeave:b.useCallback(z=>{var ie;U(z)||((ie=C.current)==null||ie.focus(),E(null))},[U]),onTriggerLeave:b.useCallback(z=>{U(z)&&z.preventDefault()},[U]),pointerGraceTimerRef:O,onPointerGraceIntentChange:b.useCallback(z=>{T.current=z},[]),children:f.jsx(K,{...X,children:f.jsx(Nb,{asChild:!0,trapped:r,onMountAutoFocus:ye(s,z=>{var ie;z.preventDefault(),(ie=C.current)==null||ie.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:f.jsx(bm,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,children:f.jsx(Rj,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:i,currentTabStopId:_,onCurrentTabStopIdChange:E,onEntryFocus:ye(l,z=>{y.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:f.jsx($E,{role:"menu","aria-orientation":"vertical","data-state":RB(v.open),"data-radix-menu-content":"",dir:y.dir,...x,...m,ref:N,style:{outline:"none",...m.style},onKeyDown:ye(m.onKeyDown,z=>{const be=z.target.closest("[data-radix-menu-content]")===z.currentTarget,J=z.ctrlKey||z.altKey||z.metaKey,le=z.key.length===1;be&&(z.key==="Tab"&&z.preventDefault(),!J&&le&&te(z.key));const F=C.current;if(z.target!==F||!cme.includes(z.key))return;z.preventDefault();const V=S().filter(k=>!k.disabled).map(k=>k.ref.current);uB.includes(z.key)&&V.reverse(),Pme(V)}),onBlur:ye(t.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(M.current),I.current="")}),onPointerMove:ye(t.onPointerMove,Jp(z=>{const ie=z.target,be=L.current!==z.clientX;if(z.currentTarget.contains(ie)&&be){const J=z.clientX>L.current?"right":"left";H.current=J,L.current=z.clientX}}))})})})})})})});mB.displayName=Kr;var xme="MenuGroup",CA=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return f.jsx(He.div,{role:"group",...i,ref:e})});CA.displayName=xme;var wme="MenuLabel",gB=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return f.jsx(He.div,{...i,ref:e})});gB.displayName=wme;var xy="MenuItem",$T="menu.itemSelect",Zb=b.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=b.useRef(null),o=Pm(xy,t.__scopeMenu),a=kA(xy,t.__scopeMenu),l=ut(e,s),c=b.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent($T,{bubbles:!0,cancelable:!0});d.addEventListener($T,p=>i==null?void 0:i(p),{once:!0}),tC(d,h),h.defaultPrevented?c.current=!1:o.onClose()}};return f.jsx(vB,{...r,ref:l,disabled:n,onClick:ye(t.onClick,u),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),c.current=!0},onPointerUp:ye(t.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:ye(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||Uk.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Zb.displayName=xy;var vB=b.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=kA(xy,n),a=fB(n),l=b.useRef(null),c=ut(e,l),[u,d]=b.useState(!1),[h,p]=b.useState("");return b.useEffect(()=>{const g=l.current;g&&p((g.textContent??"").trim())},[s.children]),f.jsx(Xp.ItemSlot,{scope:n,disabled:i,textValue:r??h,children:f.jsx(Tj,{asChild:!0,...a,focusable:!i,children:f.jsx(He.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:c,onPointerMove:ye(t.onPointerMove,Jp(g=>{i?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ye(t.onPointerLeave,Jp(g=>o.onItemLeave(g))),onFocus:ye(t.onFocus,()=>d(!0)),onBlur:ye(t.onBlur,()=>d(!1))})})})}),Sme="MenuCheckboxItem",yB=b.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return f.jsx(kB,{scope:t.__scopeMenu,checked:n,children:f.jsx(Zb,{role:"menuitemcheckbox","aria-checked":wy(n)?"mixed":n,...r,ref:e,"data-state":AA(n),onSelect:ye(r.onSelect,()=>i==null?void 0:i(wy(n)?!0:!n),{checkForDefaultPrevented:!1})})})});yB.displayName=Sme;var bB="MenuRadioGroup",[kme,_me]=Qc(bB,{value:void 0,onValueChange:()=>{}}),xB=b.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=xr(i);return f.jsx(kme,{scope:t.__scopeMenu,value:n,onValueChange:s,children:f.jsx(CA,{...r,ref:e})})});xB.displayName=bB;var wB="MenuRadioItem",SB=b.forwardRef((t,e)=>{const{value:n,...i}=t,r=_me(wB,t.__scopeMenu),s=n===r.value;return f.jsx(kB,{scope:t.__scopeMenu,checked:s,children:f.jsx(Zb,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":AA(s),onSelect:ye(i.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});SB.displayName=wB;var EA="MenuItemIndicator",[kB,Cme]=Qc(EA,{checked:!1}),_B=b.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=Cme(EA,n);return f.jsx(ra,{present:i||wy(s.checked)||s.checked===!0,children:f.jsx(He.span,{...r,ref:e,"data-state":AA(s.checked)})})});_B.displayName=EA;var Eme="MenuSeparator",CB=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return f.jsx(He.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});CB.displayName=Eme;var Ame="MenuArrow",EB=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=xA(n);return f.jsx(FE,{...r,...i,ref:e})});EB.displayName=Ame;var Nme="MenuSub",[$0e,AB]=Qc(Nme),hh="MenuSubTrigger",NB=b.forwardRef((t,e)=>{const n=eu(hh,t.__scopeMenu),i=Pm(hh,t.__scopeMenu),r=AB(hh,t.__scopeMenu),s=kA(hh,t.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>u,[u]),b.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),f.jsx(wA,{asChild:!0,...c,children:f.jsx(vB,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":RB(n.open),...t,ref:Yy(e,r.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ye(t.onPointerMove,Jp(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ye(t.onPointerLeave,Jp(d=>{var p,g;u();const h=(p=n.content)==null?void 0:p.getBoundingClientRect();if(h){const m=(g=n.content)==null?void 0:g.dataset.side,v=m==="right",y=v?-5:5,x=h[v?"left":"right"],w=h[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x,y:h.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ye(t.onKeyDown,d=>{var p;const h=s.searchRef.current!=="";t.disabled||h&&d.key===" "||ume[i.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});NB.displayName=hh;var PB="MenuSubContent",MB=b.forwardRef((t,e)=>{const n=hB(Kr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=eu(Kr,t.__scopeMenu),o=Pm(Kr,t.__scopeMenu),a=AB(PB,t.__scopeMenu),l=b.useRef(null),c=ut(e,l);return f.jsx(Xp.Provider,{scope:t.__scopeMenu,children:f.jsx(ra,{present:i||s.open,children:f.jsx(Xp.Slot,{scope:t.__scopeMenu,children:f.jsx(_A,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ye(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ye(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ye(t.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),h=dme[o.dir].includes(u.key);d&&h&&(s.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});MB.displayName=PB;function RB(t){return t?"open":"closed"}function wy(t){return t==="indeterminate"}function AA(t){return wy(t)?"indeterminate":t?"checked":"unchecked"}function Pme(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Mme(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function Rme(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Mme(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Tme(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,h=l.y;u>i!=h>i&&n<(d-c)*(i-u)/(h-u)+c&&(r=!r)}return r}function Ome(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Tme(n,e)}function Jp(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Ime=wA,jme=pB,Lme=mB,Dme=CA,$me=gB,Fme=Zb,zme=yB,Bme=xB,Ume=SB,Vme=_B,Hme=CB,Wme=EB,Gme=NB,Kme=MB,TB="DropdownMenu",[qme,F0e]=_s(TB,[dB]),Zi=dB(),[z0e,OB]=qme(TB),IB="DropdownMenuTrigger",Yme=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=OB(IB,n),o=Zi(n);return f.jsx(Ime,{asChild:!0,...o,children:f.jsx(He.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:Yy(e,s.triggerRef),onPointerDown:ye(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ye(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Yme.displayName=IB;var Xme="DropdownMenuPortal",jB=t=>{const{__scopeDropdownMenu:e,...n}=t,i=Zi(e);return f.jsx(jme,{...i,...n})};jB.displayName=Xme;var LB="DropdownMenuContent",DB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=OB(LB,n),s=Zi(n),o=b.useRef(!1);return f.jsx(Lme,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...i,ref:e,onCloseAutoFocus:ye(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ye(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!r.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DB.displayName=LB;var Jme="DropdownMenuGroup",Zme=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return f.jsx(Dme,{...r,...i,ref:e})});Zme.displayName=Jme;var Qme="DropdownMenuLabel",$B=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return f.jsx($me,{...r,...i,ref:e})});$B.displayName=Qme;var ege="DropdownMenuItem",FB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return f.jsx(Fme,{...r,...i,ref:e})});FB.displayName=ege;var tge="DropdownMenuCheckboxItem",zB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return f.jsx(zme,{...r,...i,ref:e})});zB.displayName=tge;var nge="DropdownMenuRadioGroup",ige=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return f.jsx(Bme,{...r,...i,ref:e})});ige.displayName=nge;var rge="DropdownMenuRadioItem",BB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return f.jsx(Ume,{...r,...i,ref:e})});BB.displayName=rge;var sge="DropdownMenuItemIndicator",UB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return f.jsx(Vme,{...r,...i,ref:e})});UB.displayName=sge;var oge="DropdownMenuSeparator",VB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return f.jsx(Hme,{...r,...i,ref:e})});VB.displayName=oge;var age="DropdownMenuArrow",lge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return f.jsx(Wme,{...r,...i,ref:e})});lge.displayName=age;var cge="DropdownMenuSubTrigger",HB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return f.jsx(Gme,{...r,...i,ref:e})});HB.displayName=cge;var uge="DropdownMenuSubContent",WB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Zi(n);return f.jsx(Kme,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});WB.displayName=uge;var dge=jB,GB=DB,KB=$B,qB=FB,YB=zB,XB=BB,JB=UB,ZB=VB,QB=HB,e7=WB;const fge=b.forwardRef(({className:t,inset:e,children:n,...i},r)=>f.jsxs(QB,{ref:r,className:Q("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,f.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block size-4"})]}));fge.displayName=QB.displayName;const hge=b.forwardRef(({className:t,...e},n)=>f.jsx(e7,{ref:n,className:Q("z-50 min-w-32 overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));hge.displayName=e7.displayName;const pge=b.forwardRef(({className:t,sideOffset:e=4,...n},i)=>f.jsx(dge,{children:f.jsx(GB,{ref:i,sideOffset:e,className:Q("z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));pge.displayName=GB.displayName;const mge=b.forwardRef(({className:t,inset:e,...n},i)=>f.jsx(qB,{ref:i,className:Q("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));mge.displayName=qB.displayName;const gge=b.forwardRef(({className:t,children:e,checked:n,...i},r)=>f.jsxs(YB,{ref:r,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[f.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:f.jsx(JB,{children:f.jsx("span",{className:"icon-[lucide--check] size-4"})})}),e]}));gge.displayName=YB.displayName;const vge=b.forwardRef(({className:t,children:e,...n},i)=>f.jsxs(XB,{ref:i,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[f.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:f.jsx(JB,{children:f.jsx("span",{className:"icon-[lucide--circle-dot] block size-4"})})}),e]}));vge.displayName=XB.displayName;const yge=b.forwardRef(({className:t,inset:e,...n},i)=>f.jsx(KB,{ref:i,className:Q("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));yge.displayName=KB.displayName;const bge=b.forwardRef(({className:t,...e},n)=>f.jsx(ZB,{ref:n,className:Q("-mx-1 my-1 h-px bg-stone-600",t),...e}));bge.displayName=ZB.displayName;const NA=uD("vonsim-program",ob(Tn().language,"editor.example"),void 0,{getOnInit:!0}),t7=()=>{const t=D.get(NA);return typeof t=="string"?t:""},xge=ti.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(D.set(NA,this.view.state.doc.toString()),D.set(Kv,!0))}}),FT=ue(null);ue(t=>t(FT),(t,e,n)=>{e(FT,n)});const wge=ue("");ue(t=>t(wge)!==t(NA));const Vk=ue(0),zT=ue(null),BT=ue(t=>t(zT),(t,e,n)=>{e(zT,n)}),n7=ue(""),Sge=ue(()=>typeof window<"u"&&window.codemirror?window.codemirror.state.doc.toString():t7()||""),kge=ue(t=>t(n7)!==t(Sge)),uw="showSaveFilePicker"in window;function _ge(){const[t,e]=rf(),n=it(Vk),i=it(BT),r=up(BT),s=up(n7),o=it(kge),a=i&&o;b.useEffect(()=>{if(window.codemirror){const d=()=>{};return window.codemirror.dom.addEventListener("input",d),()=>{window.codemirror.dom.removeEventListener("input",d)}}},[]);const l=b.useCallback(async()=>{if(!uw){$i({title:"editor.files.unsupported",variant:"error"});return}if(!(a&&!confirm("editor.files.unsaved")))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await d.requestPermission({mode:"readwrite"})==="granted"){r(d);const g=await(await d.getFile()).text();s(g),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:g}})}}catch(d){console.error(d),$i({title:"editor.files.open-error",variant:"error"})}},[a,r,s]),c=b.useCallback(async()=>{if(!uw){$i({title:"editor.files.unsupported",variant:"error"});return}if(!i){$i({title:"No hay archivo abierto para guardar",variant:"error"});return}if(a)try{const d=window.codemirror.state.doc.toString(),h=await i.createWritable({keepExistingData:!1});await h.write(d),await h.close(),s(d),$i({title:"Archivo guardado",variant:"info"})}catch(d){console.error(d),$i({title:"editor.files.save-error",variant:"error"})}},[i,a,s]),u=b.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),h=(i==null?void 0:i.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(uw)try{const p=await window.showSaveFilePicker({suggestedName:h,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await p.requestPermission({mode:"readwrite"})==="granted"){r(p);const m=await p.createWritable({keepExistingData:!1});await m.write(d),await m.close(),s(d),$i({title:"Archivo guardado",variant:"info"})}}catch(p){console.error(p),$i({title:"editor.files.save-error",variant:"error"})}else{const p=new Blob([d],{type:"text/plain"}),g=URL.createObjectURL(p),m=document.createElement("a");m.style.display="none",m.href=g,m.download=h,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(g)}},[i,r,s]);return f.jsxs("div",{"data-testid":"status-bar",className:"flex items-center justify-between border-t border-stone-700 bg-gradient-to-r from-stone-800 to-stone-900 px-4 py-0.5 font-sans text-xs text-stone-300 shadow-inner",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[i&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-medium text-white transition-colors",children:i.name}),a&&f.jsx("span",{className:"size-2 rounded-full bg-orange-400"})]}),i&&f.jsx("div",{className:"h-4 w-px bg-stone-600"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(vr,{content:"editor.files.open",position:"top",children:f.jsx(lt,{variant:"ghost",size:"sm",onClick:l,className:"hover-lift","aria-label":"editor.files.open",children:f.jsx("span",{className:"icon-[lucide--folder-open] size-4"})})}),f.jsx(vr,{content:"editor.files.save",position:"top",children:f.jsx(lt,{variant:"ghost",size:"sm",onClick:c,disabled:!i||!a,className:"hover-lift","aria-label":"editor.files.save",children:f.jsx("span",{className:"icon-[lucide--save] size-4"})})}),f.jsx(vr,{content:"editor.files.save-as",position:"top",children:f.jsx(lt,{variant:"ghost",size:"sm",onClick:u,className:"hover-lift","aria-label":"editor.files.save-as",children:f.jsx("span",{className:"icon-[lucide--save-all] size-4"})})})]})]}),f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs(JE,{children:[f.jsx(ZE,{asChild:!0,children:f.jsx("button",{className:"flex items-center justify-center rounded-lg p-1 text-stone-300 hover:bg-stone-800 focus:outline-none focus:ring-2 focus:ring-mantis-500","aria-label":"Ajustar tamao de fuente del editor",title:"Ajustar tamao de fuente del editor",type:"button",children:f.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5"})})}),f.jsxs(Hb,{align:"end",className:"w-56 p-4",children:[f.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[f.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5 text-mantis-400"}),f.jsx("span",{className:"text-sm font-medium text-white",children:"Tamao de fuente del editor"}),f.jsxs("span",{className:"ml-auto text-xs text-stone-400",children:[t.editorFontSize,"px"]})]}),f.jsx(lc,{value:[t.editorFontSize],min:8,max:64,step:1,onValueChange:([d])=>e(h=>({...h,editorFontSize:d})),className:"w-full"}),f.jsxs("div",{className:"mt-2 flex justify-between text-xs text-stone-500",children:[f.jsx("span",{children:"8"}),f.jsx("span",{children:"64"})]})]})]}),f.jsxs("div",{className:Q("flex items-center gap-1.5 rounded-full px-2 py-0.5 font-medium transition-colors",n>0?"border border-red-500/30 bg-red-500/20 text-red-300":"border border-green-500/30 bg-green-500/20 text-green-300"),children:[f.jsx("div",{className:Q("size-2 rounded-full",n>0?"bg-red-400":"bg-green-400")}),f.jsx("span",{className:"font-mono",children:n>0?`${n} error${n>1?"es":""}`:"Sin errores"})]})]})]})}const Oi={character:Ve.character,comment:Ve.comment,"data-directive":Cn.define(),identifier:Ve.variableName,instruction:Cn.define(),label:Ve.labelName,number:Ve.number,operator:Ve.operator,offset:Cn.define(),"ptr-size":Cn.define(),punctuation:Ve.punctuation,register:Cn.define(),special:Cn.define(),string:Ve.string,unassigned:Cn.define()},Cge=aA.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":CC.includes(e)?"data-directive":EC.includes(e)?"instruction":Lv.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Oi}),Ege=Kfe(Gb.define([{tag:Oi.character,class:"text-orange-300"},{tag:Oi.comment,class:"text-stone-500 italic"},{tag:Oi["data-directive"],class:"text-rose-400/80"},{tag:Oi.instruction,class:"text-mantis-400"},{tag:Oi.number,class:"text-cyan-300/60"},{tag:Oi.operator,class:"text-rose-300"},{tag:Oi.offset,class:"text-rose-400/80 italic"},{tag:Oi["ptr-size"],class:"text-rose-400/80 italic"},{tag:Oi.punctuation,class:"text-stone-600"},{tag:Oi.register,class:"text-emerald-400/80"},{tag:Oi.special,class:"text-yellow-300/80"},{tag:Oi.string,class:"text-orange-300"},{tag:Oi.unassigned,class:"text-rose-400/80"}])),Age=qpe(t=>{const e=t.state.doc.toString(),n=SD(e);if(n.success)return D.set(Vk,0),[];const i=n,r=Tn().language,s=i.errors.map(o=>{var c,u;const a=((c=o.position)==null?void 0:c.start)??0,l=((u=o.position)==null?void 0:u.end)??e.length;return{message:o.translate(r),severity:"error",from:a,to:l}});return D.set(Vk,s.length),s},{delay:200});function Nge(){return new kfe(Cge,[Ege,Age])}function i7({className:t}){const[e,n]=b.useState(),i=RJ(),r=b.useCallback(s=>{s&&n(s)},[]);return b.useEffect(()=>{if(e)return window.codemirror=new Re({state:dt.create({doc:t7()||"",extensions:[dt.tabSize.of(2),i6.of(dt.readOnly.of(!1)),xge,Yte(),ene,Zte(),Ste(),yhe(),hte(),Re.domEventHandlers({drop:s=>s.preventDefault()}),dt.allowMultipleSelections.of(!0),Nte(),Re.updateListener.of(s=>{s.selectionSet}),q8.of([{key:"Escape",run:s=>(s.dispatch({selection:re.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?Fk(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...ime]),Nge()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),f.jsxs("div",{className:Q("flex flex-col rounded-lg border border-stone-700 bg-gradient-to-br from-stone-900 to-stone-800 shadow-xl",t),children:[f.jsx("div",{ref:r,className:"grow overflow-auto rounded-t-lg font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),f.jsx(_ge,{})]})}const r7=b.memo(()=>{const t=SC(),e=IJ(),n=JK("(max-width: 640px)");Ht(),HE(),WE();const i=b.useMemo(()=>({filter:e}),[e]);return f.jsxs("div",{"data-testid":"app-container",className:"flex h-screen w-screen flex-col bg-black text-white",lang:t,style:i,children:[f.jsx(g9,{}),f.jsx(f9,{"data-testid":"header"}),n?f.jsx(o7,{}):f.jsx(s7,{}),f.jsx(yD,{"data-testid":"footer"}),f.jsx(b9,{}),f.jsx(m9,{})]})});r7.displayName="App";const s7=b.memo(()=>{const[t]=sm(zb);return f.jsxs(cL,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[f.jsx(g0,{id:"panel-editor",order:1,minSize:30,defaultSize:50,tagName:"section",className:"rounded-lg border border-stone-600 bg-black","data-testid":"panel-editor",children:f.jsx(i7,{className:"size-full"})}),f.jsx(zS,{className:"w-2"}),f.jsx(g0,{id:"panel-computer",order:2,minSize:20,defaultSize:50,tagName:"section",className:"computer-background rounded-lg border border-stone-600","data-testid":"panel-computer",children:f.jsx(q9,{})}),t&&f.jsxs(f.Fragment,{children:[f.jsx(zS,{className:"w-2"}),f.jsx(g0,{id:"panel-settings",order:3,minSize:30,defaultSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800","data-testid":"panel-settings",children:f.jsx(c9,{className:"size-full"})})]})]})});s7.displayName="DesktopLayout";const o7=b.memo(()=>{const t=Ht(),[e,n]=b.useState("editor"),[i,r]=sm(zb),s=it(bi),o=b.useMemo(()=>"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),a=b.useMemo(()=>i?"settings":e,[i,e]),l=b.useCallback(u=>{i&&r(!1),n(u)},[i,r]),c=b.useMemo(()=>{switch(a){case"editor":return"Editor";case"computer":return"Computadora";case"settings":return"Configuracin";default:return""}},[a]);return f.jsx(Ij,{value:a,onValueChange:l,asChild:!0,children:f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"sticky top-0 z-30 w-full border-b border-stone-700 bg-stone-900 px-4 py-2",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs text-stone-500",children:"Pestaa:"}),f.jsx("span",{className:"text-sm font-medium text-white",children:c})]}),a==="computer"&&f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-xs text-stone-500",children:"Instruccin actual:"}),f.jsx("div",{className:"font-mono text-sm text-mantis-400",children:o||f.jsx("span",{className:"italic text-stone-400",children:"Sin instruccin"})})]})]})}),f.jsx(m0,{value:"editor",asChild:!0,children:f.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-black data-[state=inactive]:hidden","data-testid":"panel-editor",children:f.jsx(i7,{className:"size-full"})})}),f.jsx(m0,{value:"computer",asChild:!0,children:f.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-computer",children:f.jsx(q9,{})})}),f.jsx(m0,{value:"settings",asChild:!0,children:f.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-settings",children:f.jsx(c9,{className:"size-full"})})}),f.jsx("div",{className:"border-t border-stone-700 bg-stone-900 p-2",children:f.jsxs(Lj,{className:"grid grid-cols-3 gap-2",children:[f.jsxs(p0,{value:"editor",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[f.jsx("span",{className:"icon-[lucide--file-terminal] mb-1 size-5"}),t("control.tabs.editor")]}),f.jsxs(p0,{value:"computer",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[f.jsx("span",{className:"icon-[lucide--computer] mb-1 size-5"}),t("control.tabs.computer")]}),f.jsxs(p0,{value:"settings",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[f.jsx("span",{className:"icon-[lucide--settings] mb-1 size-5"}),"Configuracin"]})]})})]})})});o7.displayName="MobileLayout";var PA="ToastProvider",[MA,Pge,Mge]=im("Toast"),[a7,B0e]=_s("Toast",[Mge]),[Rge,Qb]=a7(PA),l7=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=b.useState(null),[c,u]=b.useState(0),d=b.useRef(!1),h=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${PA}\`. Expected non-empty \`string\`.`),f.jsx(MA.Provider,{scope:e,children:f.jsx(Rge,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>u(p=>p+1),[]),onToastRemove:b.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};l7.displayName=PA;var c7="ToastViewport",Tge=["F8"],Hk="toast.viewportPause",Wk="toast.viewportResume",u7=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=Tge,label:r="Notifications ({hotkey})",...s}=t,o=Qb(c7,n),a=Pge(n),l=b.useRef(null),c=b.useRef(null),u=b.useRef(null),d=b.useRef(null),h=ut(e,d,o.onViewportChange),p=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;b.useEffect(()=>{const v=y=>{var w;i.length!==0&&i.every(S=>y[S]||y.code===S)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[i]),b.useEffect(()=>{const v=l.current,y=d.current;if(g&&v&&y){const x=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(Hk);y.dispatchEvent(E),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(Wk);y.dispatchEvent(E),o.isClosePausedRef.current=!1}},S=E=>{!v.contains(E.relatedTarget)&&w()},_=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",x),v.addEventListener("focusout",S),v.addEventListener("pointermove",x),v.addEventListener("pointerleave",_),window.addEventListener("blur",x),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",x),v.removeEventListener("focusout",S),v.removeEventListener("pointermove",x),v.removeEventListener("pointerleave",_),window.removeEventListener("blur",x),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const m=b.useCallback(({tabbingDirection:v})=>{const x=a().map(w=>{const S=w.ref.current,_=[S,...Wge(S)];return v==="forwards"?_:_.reverse()});return(v==="forwards"?x.reverse():x).flat()},[a]);return b.useEffect(()=>{const v=d.current;if(v){const y=x=>{var _,E,C;const w=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!w){const N=document.activeElement,M=x.shiftKey;if(x.target===v&&M){(_=c.current)==null||_.focus();return}const T=m({tabbingDirection:M?"backwards":"forwards"}),H=T.findIndex(L=>L===N);dw(T.slice(H+1))?x.preventDefault():M?(E=c.current)==null||E.focus():(C=u.current)==null||C.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[a,m]),f.jsxs(loe,{ref:l,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&f.jsx(Gk,{ref:c,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"forwards"});dw(v)}}),f.jsx(MA.Slot,{scope:n,children:f.jsx(He.ol,{tabIndex:-1,...s,ref:h})}),g&&f.jsx(Gk,{ref:u,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"backwards"});dw(v)}})]})});u7.displayName=c7;var d7="ToastFocusProxy",Gk=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=Qb(d7,n);return f.jsx(BE,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&i()}})});Gk.displayName=d7;var Mm="Toast",Oge="toast.swipeStart",Ige="toast.swipeMove",jge="toast.swipeCancel",Lge="toast.swipeEnd",f7=b.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a,l]=dl({prop:i,defaultProp:r??!0,onChange:s,caller:Mm});return f.jsx(ra,{present:n||a,children:f.jsx(Fge,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:xr(t.onPause),onResume:xr(t.onResume),onSwipeStart:ye(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ye(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ye(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ye(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});f7.displayName=Mm;var[Dge,$ge]=a7(Mm,{onClose(){}}),Fge=b.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:p,...g}=t,m=Qb(Mm,n),[v,y]=b.useState(null),x=ut(e,L=>y(L)),w=b.useRef(null),S=b.useRef(null),_=r||m.duration,E=b.useRef(0),C=b.useRef(_),N=b.useRef(0),{onToastAdd:M,onToastRemove:I}=m,O=xr(()=>{var K;(v==null?void 0:v.contains(document.activeElement))&&((K=m.viewport)==null||K.focus()),o()}),T=b.useCallback(L=>{!L||L===1/0||(window.clearTimeout(N.current),E.current=new Date().getTime(),N.current=window.setTimeout(O,L))},[O]);b.useEffect(()=>{const L=m.viewport;if(L){const K=()=>{T(C.current),c==null||c()},X=()=>{const te=new Date().getTime()-E.current;C.current=C.current-te,window.clearTimeout(N.current),l==null||l()};return L.addEventListener(Hk,X),L.addEventListener(Wk,K),()=>{L.removeEventListener(Hk,X),L.removeEventListener(Wk,K)}}},[m.viewport,_,l,c,T]),b.useEffect(()=>{s&&!m.isClosePausedRef.current&&T(_)},[s,_,m.isClosePausedRef,T]),b.useEffect(()=>(M(),()=>I()),[M,I]);const H=b.useMemo(()=>v?b7(v):null,[v]);return m.viewport?f.jsxs(f.Fragment,{children:[H&&f.jsx(zge,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:H}),f.jsx(Dge,{scope:n,onClose:O,children:Ml.createPortal(f.jsx(MA.ItemSlot,{scope:n,children:f.jsx(aoe,{asChild:!0,onEscapeKeyDown:ye(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||O(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:f.jsx(He.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ye(t.onKeyDown,L=>{L.key==="Escape"&&(a==null||a(L.nativeEvent),L.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:ye(t.onPointerDown,L=>{L.button===0&&(w.current={x:L.clientX,y:L.clientY})}),onPointerMove:ye(t.onPointerMove,L=>{if(!w.current)return;const K=L.clientX-w.current.x,X=L.clientY-w.current.y,te=!!S.current,U=["left","right"].includes(m.swipeDirection),z=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,ie=U?z(0,K):0,be=U?0:z(0,X),J=L.pointerType==="touch"?10:2,le={x:ie,y:be},F={originalEvent:L,delta:le};te?(S.current=le,Zg(Ige,d,F,{discrete:!1})):UT(le,m.swipeDirection,J)?(S.current=le,Zg(Oge,u,F,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(K)>J||Math.abs(X)>J)&&(w.current=null)}),onPointerUp:ye(t.onPointerUp,L=>{const K=S.current,X=L.target;if(X.hasPointerCapture(L.pointerId)&&X.releasePointerCapture(L.pointerId),S.current=null,w.current=null,K){const te=L.currentTarget,U={originalEvent:L,delta:K};UT(K,m.swipeDirection,m.swipeThreshold)?Zg(Lge,p,U,{discrete:!0}):Zg(jge,h,U,{discrete:!0}),te.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),zge=t=>{const{__scopeToast:e,children:n,...i}=t,r=Qb(Mm,e),[s,o]=b.useState(!1),[a,l]=b.useState(!1);return Vge(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:f.jsx(wm,{asChild:!0,children:f.jsx(BE,{...i,children:s&&f.jsxs(f.Fragment,{children:[r.label," ",n]})})})},Bge="ToastTitle",h7=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return f.jsx(He.div,{...i,ref:e})});h7.displayName=Bge;var Uge="ToastDescription",p7=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return f.jsx(He.div,{...i,ref:e})});p7.displayName=Uge;var m7="ToastAction",g7=b.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?f.jsx(y7,{altText:n,asChild:!0,children:f.jsx(RA,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${m7}\`. Expected non-empty \`string\`.`),null)});g7.displayName=m7;var v7="ToastClose",RA=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=$ge(v7,n);return f.jsx(y7,{asChild:!0,children:f.jsx(He.button,{type:"button",...i,ref:e,onClick:ye(t.onClick,r.onClose)})})});RA.displayName=v7;var y7=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return f.jsx(He.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function b7(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),Hge(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...b7(i))}}),e}function Zg(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?tC(r,s):r.dispatchEvent(s)}var UT=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function Vge(t=()=>{}){const e=xr(t);ei(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function Hge(t){return t.nodeType===t.ELEMENT_NODE}function Wge(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function dw(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Gge=l7,x7=u7,w7=f7,S7=h7,k7=p7,_7=g7,C7=RA;const Kge=Gge,E7=b.forwardRef(({className:t,...e},n)=>f.jsx(x7,{ref:n,className:Q("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));E7.displayName=x7.displayName;const A7=b.forwardRef(({className:t,variant:e="default",...n},i)=>f.jsx(w7,{ref:i,"data-variant":e,className:Q("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"border border-red-600 bg-red-900 text-red-50",e==="info"&&"border border-green-500 bg-stone-900 text-white",t),...n}));A7.displayName=w7.displayName;const qge=b.forwardRef(({className:t,...e},n)=>f.jsx(_7,{ref:n,className:Q("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));qge.displayName=_7.displayName;const N7=b.forwardRef(({className:t,...e},n)=>f.jsx(C7,{ref:n,className:Q("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100",t),"toast-close":"",...e,children:f.jsx("span",{className:"block size-4",children:""})}));N7.displayName=C7.displayName;const P7=b.forwardRef(({className:t,...e},n)=>f.jsx(S7,{ref:n,className:Q("text-sm font-semibold",t),...e}));P7.displayName=S7.displayName;const M7=b.forwardRef(({className:t,...e},n)=>f.jsx(k7,{ref:n,className:Q("text-sm opacity-90",t),...e}));M7.displayName=k7.displayName;function Yge(){const{toastList:t}=ane();return f.jsxs(Kge,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>f.jsxs(A7,{...o,variant:s,children:[f.jsxs("div",{className:"grid gap-1",children:[n&&f.jsx(P7,{children:n}),i&&f.jsx(M7,{children:i})]}),r,f.jsx(N7,{})]},e)),f.jsx(E7,{})]})}window.codemirror=null;function Xge(){const{addNotification:t}=EE();return window.VonSimAddNotification=t,null}function R7(t,e){const n={type:"error",title:"Error inesperado",message:e?`${t}
${e}`:t};function i(r=10){window.VonSimAddNotification?window.VonSimAddNotification(n):r>0&&setTimeout(()=>i(r-1),100)}i()}window.onerror=function(t,e,n,i,r){return R7(typeof t=="string"?t:"Error de JavaScript",r&&r.stack?r.stack:void 0),!1};window.onunhandledrejection=function(t){const e=t.reason instanceof Error?t.reason.stack||t.reason.message:String(t.reason);return R7("Promesa no manejada",e),!1};const Jge=Cj(document.getElementById("root"));Jge.render(f.jsx(b.StrictMode,{children:f.jsx(NH,{client:o6,children:f.jsxs(Qse,{children:[f.jsx(Xge,{}),f.jsx(ZX,{children:f.jsx(r7,{})}),f.jsx(Yge,{})]})})}));
