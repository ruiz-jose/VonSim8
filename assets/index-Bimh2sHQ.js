var z7=Object.defineProperty;var OA=t=>{throw TypeError(t)};var B7=(t,e,n)=>e in t?z7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var he=(t,e,n)=>B7(t,typeof e!="symbol"?e+"":e,n),iw=(t,e,n)=>e.has(t)||OA("Cannot "+n);var A=(t,e,n)=>(iw(t,e,"read from private field"),n?n.call(t):e.get(t)),je=(t,e,n)=>e.has(t)?OA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ee=(t,e,n,i)=>(iw(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Pt=(t,e,n)=>(iw(t,e,"access private method"),n);function U7(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var V7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var r5={exports:{}},Ny={},s5={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm=Symbol.for("react.element"),H7=Symbol.for("react.portal"),W7=Symbol.for("react.fragment"),G7=Symbol.for("react.strict_mode"),K7=Symbol.for("react.profiler"),q7=Symbol.for("react.provider"),Y7=Symbol.for("react.context"),X7=Symbol.for("react.forward_ref"),J7=Symbol.for("react.suspense"),Z7=Symbol.for("react.memo"),Q7=Symbol.for("react.lazy"),IA=Symbol.iterator;function eU(t){return t===null||typeof t!="object"?null:(t=IA&&t[IA]||t["@@iterator"],typeof t=="function"?t:null)}var o5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},a5=Object.assign,l5={};function tf(t,e,n){this.props=t,this.context=e,this.refs=l5,this.updater=n||o5}tf.prototype.isReactComponent={};tf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};tf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function c5(){}c5.prototype=tf.prototype;function Yk(t,e,n){this.props=t,this.context=e,this.refs=l5,this.updater=n||o5}var Xk=Yk.prototype=new c5;Xk.constructor=Yk;a5(Xk,tf.prototype);Xk.isPureReactComponent=!0;var jA=Array.isArray,u5=Object.prototype.hasOwnProperty,Jk={current:null},d5={key:!0,ref:!0,__self:!0,__source:!0};function f5(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)u5.call(e,i)&&!d5.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:tm,type:t,key:s,ref:o,props:r,_owner:Jk.current}}function tU(t,e){return{$$typeof:tm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zk(t){return typeof t=="object"&&t!==null&&t.$$typeof===tm}function nU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var LA=/\/+/g;function rw(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nU(""+t.key):e.toString(36)}function n0(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tm:case H7:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+rw(o,0):i,jA(r)?(n="",t!=null&&(n=t.replace(LA,"$&/")+"/"),n0(r,e,n,"",function(c){return c})):r!=null&&(Zk(r)&&(r=tU(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(LA,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",jA(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+rw(s,a);o+=n0(s,e,n,l,r)}else if(l=eU(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+rw(s,a++),o+=n0(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Im(t,e,n){if(t==null)return t;var i=[],r=0;return n0(t,i,"","",function(s){return e.call(n,s,r++)}),i}function iU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ki={current:null},i0={transition:null},rU={ReactCurrentDispatcher:ki,ReactCurrentBatchConfig:i0,ReactCurrentOwner:Jk};function h5(){throw Error("act(...) is not supported in production builds of React.")}at.Children={map:Im,forEach:function(t,e,n){Im(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Im(t,function(){e++}),e},toArray:function(t){return Im(t,function(e){return e})||[]},only:function(t){if(!Zk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};at.Component=tf;at.Fragment=W7;at.Profiler=K7;at.PureComponent=Yk;at.StrictMode=G7;at.Suspense=J7;at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rU;at.act=h5;at.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=a5({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Jk.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)u5.call(e,l)&&!d5.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:tm,type:t.type,key:r,ref:s,props:i,_owner:o}};at.createContext=function(t){return t={$$typeof:Y7,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:q7,_context:t},t.Consumer=t};at.createElement=f5;at.createFactory=function(t){var e=f5.bind(null,t);return e.type=t,e};at.createRef=function(){return{current:null}};at.forwardRef=function(t){return{$$typeof:X7,render:t}};at.isValidElement=Zk;at.lazy=function(t){return{$$typeof:Q7,_payload:{_status:-1,_result:t},_init:iU}};at.memo=function(t,e){return{$$typeof:Z7,type:t,compare:e===void 0?null:e}};at.startTransition=function(t){var e=i0.transition;i0.transition={};try{t()}finally{i0.transition=e}};at.unstable_act=h5;at.useCallback=function(t,e){return ki.current.useCallback(t,e)};at.useContext=function(t){return ki.current.useContext(t)};at.useDebugValue=function(){};at.useDeferredValue=function(t){return ki.current.useDeferredValue(t)};at.useEffect=function(t,e){return ki.current.useEffect(t,e)};at.useId=function(){return ki.current.useId()};at.useImperativeHandle=function(t,e,n){return ki.current.useImperativeHandle(t,e,n)};at.useInsertionEffect=function(t,e){return ki.current.useInsertionEffect(t,e)};at.useLayoutEffect=function(t,e){return ki.current.useLayoutEffect(t,e)};at.useMemo=function(t,e){return ki.current.useMemo(t,e)};at.useReducer=function(t,e,n){return ki.current.useReducer(t,e,n)};at.useRef=function(t){return ki.current.useRef(t)};at.useState=function(t){return ki.current.useState(t)};at.useSyncExternalStore=function(t,e,n){return ki.current.useSyncExternalStore(t,e,n)};at.useTransition=function(){return ki.current.useTransition()};at.version="18.3.1";s5.exports=at;var b=s5.exports;const Ft=Yc(b),Py=U7({__proto__:null,default:Ft},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sU=b,oU=Symbol.for("react.element"),aU=Symbol.for("react.fragment"),lU=Object.prototype.hasOwnProperty,cU=sU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uU={key:!0,ref:!0,__self:!0,__source:!0};function p5(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)lU.call(e,i)&&!uU.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:oU,type:t,key:s,ref:o,props:r,_owner:cU.current}}Ny.Fragment=aU;Ny.jsx=p5;Ny.jsxs=p5;r5.exports=Ny;var h=r5.exports,q=typeof window<"u"?window:void 0,Vi=typeof globalThis<"u"?globalThis:q,m5=Array.prototype,DA=m5.forEach,$A=m5.indexOf,lr=Vi==null?void 0:Vi.navigator,_e=Vi==null?void 0:Vi.document,Fi=Vi==null?void 0:Vi.location,p1=Vi==null?void 0:Vi.fetch,m1=Vi!=null&&Vi.XMLHttpRequest&&"withCredentials"in new Vi.XMLHttpRequest?Vi.XMLHttpRequest:void 0,FA=Vi==null?void 0:Vi.AbortController,Li=lr==null?void 0:lr.userAgent,qe=q??{},Co={DEBUG:!1,LIB_VERSION:"1.256.2"},sw="$copy_autocapture",dU=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],$o=function(t){return t.GZipJS="gzip-js",t.Base64="base64",t}({}),fU=["fatal","error","warning","log","info","debug"];function ot(t,e){return t.indexOf(e)!==-1}var My=function(t){return t.trim()},g1=function(t){return t.replace(/^\$/,"")},hU=Array.isArray,g5=Object.prototype,v5=g5.hasOwnProperty,Ry=g5.toString,Kt=hU||function(t){return Ry.call(t)==="[object Array]"},Fr=t=>typeof t=="function",ln=t=>t===Object(t)&&!Kt(t),Pu=t=>{if(ln(t)){for(var e in t)if(v5.call(t,e))return!1;return!0}return!1},ge=t=>t===void 0,cn=t=>Ry.call(t)=="[object String]",v1=t=>cn(t)&&t.trim().length===0,Cl=t=>t===null,wt=t=>ge(t)||Cl(t),ai=t=>Ry.call(t)=="[object Number]",Ys=t=>Ry.call(t)==="[object Boolean]",pU=t=>t instanceof FormData,mU=t=>ot(dU,t),y5=t=>{var e={t:function(n){if(q&&(Co.DEBUG||qe.POSTHOG_DEBUG)&&!ge(q.console)&&q.console){for(var i=("__rrweb_original__"in q.console[n])?q.console[n].__rrweb_original__:q.console[n],r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];i(t,...s)}},info:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("log",...i)},warn:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("warn",...i)},error:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("error",...i)},critical:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console.error(t,...i)},uninitializedWarning:n=>{e.error("You must initialize PostHog before calling "+n)},createLogger:n=>y5(t+" "+n)};return e},Ee=y5("[PostHog.js]"),Dn=Ee.createLogger,gU=Dn("[ExternalScriptsLoader]"),zA=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return gU.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var i=_e==null?void 0:_e.querySelectorAll("script");if(i){for(var r=0;r<i.length;r++)if(i[r].src===e)return n()}var s=()=>{if(!_e)return n("document not found");var o=_e.createElement("script");if(o.type="text/javascript",o.crossOrigin="anonymous",o.src=e,o.onload=c=>n(void 0,c),o.onerror=c=>n(c),t.config.prepare_external_dependency_script&&(o=t.config.prepare_external_dependency_script(o)),!o)return n("prepare_external_dependency_script returned null");var a,l=_e.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(o,l[0]):_e.body.appendChild(o)};_e!=null&&_e.body?s():_e==null||_e.addEventListener("DOMContentLoaded",s)};function xe(){return xe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xe.apply(null,arguments)}function b5(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}qe.__PosthogExtensions__=qe.__PosthogExtensions__||{},qe.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var i="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(i="/array/"+t.config.token+"/config.js"),e==="toolbar"){var r=3e5;i=i+"&t="+Math.floor(Date.now()/r)*r}var s=t.requestRouter.endpointFor("assets",i);zA(t,s,n)},qe.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var i=t.requestRouter.endpointFor("api",e);zA(t,i,n)};var U0={};function Ka(t,e,n){if(Kt(t)){if(DA&&t.forEach===DA)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===U0)return}}}function At(t,e,n){if(!wt(t)){if(Kt(t))return Ka(t,e,n);if(pU(t)){for(var i of t.entries())if(e.call(n,i[1],i[0])===U0)return}else for(var r in t)if(v5.call(t,r)&&e.call(n,t[r],r)===U0)return}}var fn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Ka(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t},Ty=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Ka(n,function(r){Ka(r,function(s){t.push(s)})}),t};function r0(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var BA=function(t){try{return t()}catch{return}},vU=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){Ee.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Ee.critical(r)}}},Qk=function(t){var e={};return At(t,function(n,i){(cn(n)&&n.length>0||ai(n))&&(e[i]=n)}),e};function yU(t,e){return n=t,i=s=>cn(s)&&!Cl(e)?s.slice(0,e):s,r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),Kt(o)?(l=[],Ka(o,c=>{l.push(s(c))})):(l={},At(o,(c,u)=>{r.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,i,r}var bU=["herokuapp.com","vercel.app","netlify.app"];function wU(t){var e=t==null?void 0:t.hostname;if(!cn(e))return!1;var n=e.split(".").slice(-2).join(".");for(var i of bU)if(n===i)return!1;return!0}function w5(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function Qt(t,e,n,i){var{capture:r=!1,passive:s=!0}=i??{};t==null||t.addEventListener(e,n,{capture:r,passive:s})}var x5="$people_distinct_id",Gf="__alias",Kf="__timers",UA="$autocapture_disabled_server_side",y1="$heatmaps_enabled_server_side",VA="$exception_capture_enabled_server_side",b1="$error_tracking_suppression_rules",HA="$web_vitals_enabled_server_side",S5="$dead_clicks_enabled_server_side",WA="$web_vitals_allowed_metrics",w1="$session_recording_enabled_server_side",GA="$console_log_recording_enabled_server_side",KA="$session_recording_network_payload_capture",qA="$session_recording_masking",YA="$session_recording_canvas_recording",XA="$replay_sample_rate",JA="$replay_minimum_duration",ZA="$replay_script_config",V0="$sesid",qf="$session_is_sampled",x1="$session_recording_url_trigger_activated_session",S1="$session_recording_event_trigger_activated_session",Mu="$enabled_feature_flags",s0="$early_access_features",k1="$feature_flag_details",Yf="$stored_person_properties",Jl="$stored_group_properties",_1="$surveys",jm="$surveys_activated",H0="$flag_call_reported",wo="$user_state",C1="$client_session_props",E1="$capture_rate_limit",A1="$initial_campaign_params",N1="$initial_referrer_info",W0="$initial_person_info",G0="$epp",k5="__POSTHOG_TOOLBAR__",Lm="$posthog_cookieless",xU=[x5,Gf,"__cmpns",Kf,w1,y1,V0,Mu,b1,wo,s0,k1,Jl,Yf,_1,H0,C1,E1,A1,N1,G0,W0];function QA(t){return t instanceof Element&&(t.id===k5||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function Oy(t){return!!t&&t.nodeType===1}function qa(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function _5(t){return!!t&&t.nodeType===3}function C5(t){return!!t&&t.nodeType===11}function e_(t){return t?My(t).split(/\s+/):[]}function eN(t){var e=q==null?void 0:q.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function K0(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return e_(e)}function E5(t){return wt(t)?null:My(t).split(/(\s+)/).filter(e=>kd(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Iy(t){var e="";return M1(t)&&!P5(t)&&t.childNodes&&t.childNodes.length&&At(t.childNodes,function(n){var i;_5(n)&&n.textContent&&(e+=(i=E5(n.textContent))!==null&&i!==void 0?i:"")}),My(e)}function A5(t){return ge(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var P1=["a","button","form","input","select","textarea","label"];function N5(t){var e=t.parentNode;return!(!e||!Oy(e))&&e}function SU(t,e,n,i,r){var s,o,a;if(n===void 0&&(n=void 0),!q||!t||qa(t,"html")||!Oy(t)||(s=n)!=null&&s.url_allowlist&&!eN(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&eN(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(v=>e.type===v))return!1}for(var c=!1,u=[t],d=!0,f=t;f.parentNode&&!qa(f,"body");)if(C5(f.parentNode))u.push(f.parentNode.host),f=f.parentNode.host;else{if(!(d=N5(f)))break;if(i||P1.indexOf(d.tagName.toLowerCase())>-1)c=!0;else{var p=q.getComputedStyle(d);p&&p.getPropertyValue("cursor")==="pointer"&&(c=!0)}u.push(d),f=d}if(!function(v,y){var w=y==null?void 0:y.element_allowlist;if(ge(w))return!0;var x,S=function(E){if(w.some(C=>E.tagName.toLowerCase()===C))return{v:!0}};for(var _ of v)if(x=S(_))return x.v;return!1}(u,n)||!function(v,y){var w=y==null?void 0:y.css_selector_allowlist;if(ge(w))return!0;var x,S=function(E){if(w.some(C=>E.matches(C)))return{v:!0}};for(var _ of v)if(x=S(_))return x.v;return!1}(u,n))return!1;var g=q.getComputedStyle(t);if(g&&g.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var m=t.tagName.toLowerCase();switch(m){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return c?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(P1.indexOf(m)>-1||t.getAttribute("contenteditable")==="true")}}function M1(t){for(var e=t;e.parentNode&&!qa(e,"body");e=e.parentNode){var n=K0(e);if(ot(n,"ph-sensitive")||ot(n,"ph-no-capture"))return!1}if(ot(K0(t),"ph-include"))return!0;var i=t.type||"";if(cn(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(cn(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function P5(t){return!!(qa(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||qa(t,"select")||qa(t,"textarea")||t.getAttribute("contenteditable")==="true")}var M5="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",kU=new RegExp("^(?:"+M5+")$"),_U=new RegExp(M5),R5="\\d{3}-?\\d{2}-?\\d{4}",CU=new RegExp("^("+R5+")$"),EU=new RegExp("("+R5+")");function kd(t,e){return e===void 0&&(e=!0),!(wt(t)||cn(t)&&(t=My(t),(e?kU:_U).test((t||"").replace(/[- ]/g,""))||(e?CU:EU).test(t)))}function T5(t){var e=Iy(t);return kd(e=(e+" "+O5(t)).trim())?e:""}function O5(t){var e="";return t&&t.childNodes&&t.childNodes.length&&At(t.childNodes,function(n){var i;if(n&&((i=n.tagName)==null?void 0:i.toLowerCase())==="span")try{var r=Iy(n);e=(e+" "+r).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+O5(n)).trim())}catch(s){Ee.error("[AutoCapture]",s)}}),e}function AU(t){return function(e){var n=e.map(i=>{var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class)for(var a of(i.attr_class.sort(),i.attr_class))o+="."+a.replace(/"/g,"");var l=xe({},i.text?{text:i.text}:{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{},i.attr_id?{attr_id:i.attr_id}:{},i.attributes),c={};return r0(l).sort((u,d)=>{var[f]=u,[p]=d;return f.localeCompare(p)}).forEach(u=>{var[d,f]=u;return c[tN(d.toString())]=tN(f.toString())}),o+=":",o+=r0(c).map(u=>{var[d,f]=u;return d+'="'+f+'"'}).join("")});return n.join(";")}(function(e){return e.map(n=>{var i,r,s={text:(i=n.$el_text)==null?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)==null?void 0:r.slice(0,2048),attr_class:NU(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return r0(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function tN(t){return t.replace(/"|\\"/g,'\\"')}function NU(t){var e=t.attr__class;return e?Kt(e)?e:e_(e):void 0}let I5=class{constructor(){this.clicks=[]}isRageClick(e,n,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}};var PU=["localhost","127.0.0.1"],_d=t=>{var e=_e==null?void 0:_e.createElement("a");return ge(e)?null:(e.href=t,e)},MU=function(t,e){var n,i;e===void 0&&(e="&");var r=[];return At(t,function(s,o){ge(s)||ge(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),i=encodeURIComponent(o),r[r.length]=i+"="+n)}),r.join(e)},q0=function(t,e){for(var n,i=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!Kt(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{Ee.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},t_=function(t,e,n){if(!t||!e||!e.length)return t;for(var i=t.split("#"),r=i[0]||"",s=i[1],o=r.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),u=[],d=0;d<c.length;d++){var f=c[d].split("=");Kt(f)&&(e.includes(f[0])?u.push(f[0]+"="+n):u.push(c[d]))}var p=l;return a!=null&&(p+="?"+u.join("&")),s!=null&&(p+="#"+s),p},Y0=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},nN=Dn("[AutoCapture]");function ow(t,e){return e.length>t?e.slice(0,t)+"...":e}function RU(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!Oy(e));return e}function TU(t,e,n,i){var r=t.tagName.toLowerCase(),s={tag_name:r};P1.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=ow(1024,T5(t)):s.$el_text=ow(1024,Iy(t)));var o=K0(t);o.length>0&&(s.classes=o.filter(function(u){return u!==""})),At(t.attributes,function(u){var d;if((!P5(t)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(i==null||!i.includes(u.name))&&!e&&kd(u.value)&&(d=u.name,!cn(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var f=u.value;u.name==="class"&&(f=e_(f).join(" ")),s["attr__"+u.name]=ow(1024,f)}});for(var a=1,l=1,c=t;c=RU(c);)a++,c.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function OU(t,e){for(var n,i,{e:r,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,c=[t],u=t;u.parentNode&&!qa(u,"body");)C5(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,f=[],p={},g=!1,m=!1;if(At(c,S=>{var _=M1(S);S.tagName.toLowerCase()==="a"&&(g=S.getAttribute("href"),g=_&&g&&kd(g)&&g),ot(K0(S),"ph-no-capture")&&(m=!0),f.push(TU(S,s,o,a));var E=function(C){if(!M1(C))return{};var N={};return At(C.attributes,function(M){if(M.name&&M.name.indexOf("data-ph-capture-attribute")===0){var j=M.name.replace("data-ph-capture-attribute-",""),I=M.value;j&&I&&kd(I)&&(N[j]=I)}}),N}(S);fn(p,E)}),m)return{props:{},explicitNoCapture:m};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?f[0].$el_text=T5(t):f[0].$el_text=Iy(t)),g){var v,y;f[0].attr__href=g;var w=(v=_d(g))==null?void 0:v.host,x=q==null||(y=q.location)==null?void 0:y.host;w&&x&&w!==x&&(d=g)}return{props:fn({$event_type:r.type,$ce_version:1},l?{}:{$elements:f},{$elements_chain:AU(f)},(n=f[0])!=null&&n.$el_text?{$el_text:(i=f[0])==null?void 0:i.$el_text}:{},d&&r.type==="click"?{$external_click_url:d}:{},p)}}let IU=class{constructor(e){this.i=!1,this.o=null,this.rageclicks=new I5,this.h=!1,this.instance=e,this.m=null}get S(){var e,n,i=ln(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=(e=i.url_allowlist)==null?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=(n=i.url_ignorelist)==null?void 0:n.map(r=>new RegExp(r)),i}$(){if(this.isBrowserSupported()){if(q&&_e){var e=i=>{i=i||(q==null?void 0:q.event);try{this.k(i)}catch(r){nN.error("Failed to capture event",r)}};if(Qt(_e,"submit",e,{capture:!0}),Qt(_e,"change",e,{capture:!0}),Qt(_e,"click",e,{capture:!0}),this.S.capture_copied_text){var n=i=>{i=i||(q==null?void 0:q.event),this.k(i,sw)};Qt(_e,"copy",n,{capture:!0}),Qt(_e,"cut",n,{capture:!0})}}}else nN.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[UA]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var n,i=[];return(n=this.m)==null||n.forEach(r=>{var s=_e==null?void 0:_e.querySelectorAll(r);s==null||s.forEach(o=>{e===o&&i.push(r)})}),i}get isEnabled(){var e,n,i=(e=this.instance.persistence)==null?void 0:e.props[UA],r=this.o;if(Cl(r)&&!Ys(i)&&!this.instance.I())return!1;var s=(n=this.o)!==null&&n!==void 0?n:!!i;return!!this.instance.config.autocapture&&!s}k(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var i,r=A5(e);_5(r)&&(r=r.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.k(e,"$rageclick");var s=n===sw;if(r&&SU(r,e,this.S,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=OU(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(o.$element_selectors=l),n===sw){var c,u=E5(q==null||(c=q.getSelection())==null?void 0:c.toString()),d=e.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Fr(_e==null?void 0:_e.querySelectorAll)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return ai(t)&&isFinite(t)&&Math.floor(t)===t});var iN="0123456789abcdef";let jU=class R1{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new R1(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+iN.charAt(this.bytes[n]>>>4)+iN.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new R1(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}},LU=class{constructor(){this.P=0,this.R=0,this.T=new DU}generate(){var e=this.generateOrAbort();if(ge(e)){this.P=0;var n=this.generateOrAbort();if(ge(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.P)this.P=e,this.M();else{if(!(e+1e4>this.P))return;this.R++,this.R>4398046511103&&(this.P++,this.M())}return jU.fromFieldsV7(this.P,Math.trunc(this.R/Math.pow(2,30)),this.R&Math.pow(2,30)-1,this.T.nextUint32())}M(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}};var rN,j5=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};q&&!ge(q.crypto)&&crypto.getRandomValues&&(j5=t=>crypto.getRandomValues(t));let DU=class{constructor(){this.C=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.C.length&&(j5(this.C),this.F=0),this.C[this.F++]}};var ja=()=>$U().toString(),$U=()=>(rN||(rN=new LU)).generate(),yf="",FU=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function zU(t,e){if(e){var n=function(r,s){if(s===void 0&&(s=_e),yf)return yf;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+ja();!yf&&a--;){var c=o.slice(a).join("."),u=l+"=1;domain=."+c+";path=/";s.cookie=u+";max-age=3",s.cookie.includes(l)&&(s.cookie=u+";max-age=0",yf=c)}return yf}(t);if(!n){var i=(r=>{var s=r.match(FU);return s?s[0]:""})(t);i!==n&&Ee.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var no={O:()=>!!_e,A:function(t){Ee.error("cookieStore error: "+t)},D:function(t){if(_e){try{for(var e=t+"=",n=_e.cookie.split(";").filter(s=>s.length),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},L:function(t){var e;try{e=JSON.parse(no.D(t))||{}}catch{}return e},j:function(t,e,n,i,r){if(_e)try{var s="",o="",a=zU(_e.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&Ee.warn("cookieStore warning: large cookie, len="+c.length),_e.cookie=c,c}catch{return}},N:function(t,e){try{no.j(t,"",-1,e)}catch{return}}},aw=null,Sn={O:function(){if(!Cl(aw))return aw;var t=!0;if(ge(q))t=!1;else try{var e="__mplssupport__";Sn.j(e,"xyz"),Sn.D(e)!=='"xyz"'&&(t=!1),Sn.N(e)}catch{t=!1}return t||Ee.error("localStorage unsupported; falling back to cookie store"),aw=t,t},A:function(t){Ee.error("localStorage error: "+t)},D:function(t){try{return q==null?void 0:q.localStorage.getItem(t)}catch(e){Sn.A(e)}return null},L:function(t){try{return JSON.parse(Sn.D(t))||{}}catch{}return null},j:function(t,e){try{q==null||q.localStorage.setItem(t,JSON.stringify(e))}catch(n){Sn.A(n)}},N:function(t){try{q==null||q.localStorage.removeItem(t)}catch(e){Sn.A(e)}}},BU=["distinct_id",V0,qf,G0,W0],Dm=xe({},Sn,{L:function(t){try{var e={};try{e=no.L(t)||{}}catch{}var n=fn(e,JSON.parse(Sn.D(t)||"{}"));return Sn.j(t,n),n}catch{}return null},j:function(t,e,n,i,r,s){try{Sn.j(t,e,void 0,void 0,s);var o={};BU.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&no.j(t,o,n,i,r,s)}catch(a){Sn.A(a)}},N:function(t,e){try{q==null||q.localStorage.removeItem(t),no.N(t,e)}catch(n){Sn.A(n)}}}),$m={},UU={O:function(){return!0},A:function(t){Ee.error("memoryStorage error: "+t)},D:function(t){return $m[t]||null},L:function(t){return $m[t]||null},j:function(t,e){$m[t]=e},N:function(t){delete $m[t]}},zl=null,Vn={O:function(){if(!Cl(zl))return zl;if(zl=!0,ge(q))zl=!1;else try{var t="__support__";Vn.j(t,"xyz"),Vn.D(t)!=='"xyz"'&&(zl=!1),Vn.N(t)}catch{zl=!1}return zl},A:function(t){Ee.error("sessionStorage error: ",t)},D:function(t){try{return q==null?void 0:q.sessionStorage.getItem(t)}catch(e){Vn.A(e)}return null},L:function(t){try{return JSON.parse(Vn.D(t))||null}catch{}return null},j:function(t,e){try{q==null||q.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){Vn.A(n)}},N:function(t){try{q==null||q.sessionStorage.removeItem(t)}catch(e){Vn.A(e)}}},nu=function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t}({});let VU=class{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.U()?nu.DENIED:this.q}isOptedOut(){return this.consent===nu.DENIED||this.consent===nu.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.B.j(this.H,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:e,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+e}get q(){var e=this.B.D(this.H);return e==="1"?nu.GRANTED:e==="0"?nu.DENIED:nu.PENDING}get B(){if(!this.W){var e=this.S.opt_out_capturing_persistence_type;this.W=e==="localStorage"?Sn:no;var n=e==="localStorage"?no:Sn;n.D(this.H)&&(this.W.D(this.H)||this.optInOut(n.D(this.H)==="1"),n.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!w5([lr==null?void 0:lr.doNotTrack,lr==null?void 0:lr.msDoNotTrack,qe.doNotTrack],e=>ot([!0,1,"1","yes"],e))}};var Fm=Dn("[Dead Clicks]"),HU=()=>!0,WU=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property(S5)),i=t.instance.config.capture_dead_clicks;return Ys(i)?i:n};let L5=class{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(e,n,i){this.instance=e,this.isEnabled=n,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[S5]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(e){var n,i;(n=qe.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(i=qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this.instance,"dead-clicks-autocapture",r=>{r?Fm.error("failed to load script",r):e()})}V(){var e;if(_e){if(!this.G&&(e=qe.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=ln(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.G=qe.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.G.start(_e),Fm.info("starting...")}}else Fm.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,Fm.info("stopping..."))}};function cr(t,e,n,i,r){return e>n&&(Ee.warn("min cannot be greater than max."),e=n),ai(t)?t>n?(i&&Ee.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(i&&Ee.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):t:(i&&Ee.warn(i+" must be a number. using max or fallback. max: "+n+", fallback: "+r),cr(r||n,e,n,i))}let D5=class{constructor(e){this.K={},this.Y=()=>{Object.keys(this.K).forEach(n=>{var i=this.X(n)+this.Z;i>=this.tt?delete this.K[n]:this.it(n,i)})},this.X=n=>this.K[String(n)],this.it=(n,i)=>{this.K[String(n)]=i},this.consumeRateLimit=n=>{var i,r=(i=this.X(n))!==null&&i!==void 0?i:this.tt;if((r=Math.max(r-1,0))===0)return!0;this.it(n,r);var s,o=r===0;return o&&((s=this.et)==null||s.call(this,n)),o},this.rt=e,this.et=this.rt.et,this.tt=cr(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=cr(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=cr(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}};var zm=Dn("[ExceptionAutocapture]");let GU=class{constructor(e){var n,i,r;this.nt=()=>{var s;if(q&&this.isEnabled&&(s=qe.__PosthogExtensions__)!=null&&s.errorWrappingFunctions){var o=qe.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=qe.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=qe.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=o(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=a(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=l(this.captureException.bind(this)))}catch(c){zm.error("failed to start",c),this.ht()}}},this._instance=e,this.dt=!((n=this._instance.persistence)==null||!n.props[VA]),this.S=this.vt(),this.ct=new D5({refillRate:(i=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&i!==void 0?i:1,bucketSize:(r=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&r!==void 0?r:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return ln(e)?n=xe({},n,e):(ge(e)?this.dt:e)&&(n=xe({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(zm.info("enabled"),this.J(this.nt))}J(e){var n,i;(n=qe.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(i=qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"exception-autocapture",r=>{if(r)return zm.error("failed to load script",r);e()})}ht(){var e,n,i;(e=this.ot)==null||e.call(this),this.ot=void 0,(n=this.lt)==null||n.call(this),this.lt=void 0,(i=this.ut)==null||i.call(this),this.ut=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.dt=!!n||!1,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[VA]:this.dt}),this.startIfEnabled()}captureException(e){var n,i=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=i+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var r=(n=e.$exception_list[0].type)!==null&&n!==void 0?n:"Exception";this.ct.consumeRateLimit(r)?zm.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}};function $5(t){return!ge(Event)&&F5(t,Event)}function F5(t,e){try{return t instanceof e}catch{return!1}}function z5(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return F5(t,Error)}}function o0(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function lw(t){return o0(t,"DOMError")}var sN=/\(error: (.*)\)/,oN=50,Ru="?";function cw(t,e,n,i){var r={platform:"web:javascript",filename:t,function:e==="<anonymous>"?Ru:e,in_app:!0};return ge(n)||(r.lineno=n),ge(i)||(r.colno=i),r}var KU=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,qU=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,YU=/\((\S*)(?::(\d+))(?::(\d+))\)/,XU=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,JU=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,ZU=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.sort((r,s)=>r[0]-s[0]).map(r=>r[1]);return function(r,s){s===void 0&&(s=0);for(var o=[],a=r.split(`
`),l=s;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var u=sN.test(c)?c.replace(sN,"$1"):c;if(!u.match(/\S*Error: /)){for(var d of i){var f=d(u);if(f){o.push(f);break}}if(o.length>=oN)break}}}return function(p){if(!p.length)return[];var g=Array.from(p);return g.reverse(),g.slice(0,oN).map(m=>xe({},m,{filename:m.filename||QU(g).filename,function:m.function||Ru}))}(o)}}([30,t=>{var e=KU.exec(t);if(e){var[,n,i,r]=e;return cw(n,Ru,+i,+r)}var s=qU.exec(t);if(s){if(s[2]&&s[2].indexOf("eval")===0){var o=YU.exec(s[2]);o&&(s[2]=o[1],s[3]=o[2],s[4]=o[3])}var[a,l]=lN(s[1]||Ru,s[2]);return cw(l,a,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}}],[50,t=>{var e=XU.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=JU.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var i=e[3],r=e[1]||Ru;return[r,i]=lN(r,i),cw(i,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function QU(t){return t[t.length-1]||{}}var Bm,aN,uw,lN=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,i=t.indexOf("safari-web-extension")!==-1;return n||i?[t.indexOf("@")!==-1?t.split("@")[0]:Ru,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},eV=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function n_(t,e){e===void 0&&(e=0);var n=t.stacktrace||t.stack||"",i=function(o){return o&&tV.test(o.message)?1:0}(t);try{var r=ZU,s=function(o,a){var l=function(c){var u=globalThis._posthogChunkIds;if(!u)return{};var d=Object.keys(u);return uw&&d.length===aN||(aN=d.length,uw=d.reduce((f,p)=>{Bm||(Bm={});var g=Bm[p];if(g)f[g[0]]=g[1];else for(var m=c(p),v=m.length-1;v>=0;v--){var y=m[v],w=y==null?void 0:y.filename,x=u[p];if(w&&x){f[w]=x,Bm[p]=[w,x];break}}return f},{})),uw}(a);return o.forEach(c=>{c.filename&&(c.chunk_id=l[c.filename])}),o}(r(n,i),r);return s.slice(0,s.length-e)}catch{}return[]}var tV=/Minified React error #\d+;/i;function nV(t,e){var n,i,r=n_(t),s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)!==null&&i!==void 0&&i;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(t),stacktrace:{frames:r,type:"raw"},mechanism:{handled:s,synthetic:o}}}function B5(t,e){var n=nV(t,e);return t.cause&&z5(t.cause)&&t.cause!==t?[n,...B5(t.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[n]}function dw(t,e){return{$exception_list:B5(t,e),$exception_level:"error"}}function fw(t,e){var n,i,r,s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,a={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(r=e==null?void 0:e.defaultExceptionType)!==null&&r!==void 0?r:"Error",value:t||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:s,synthetic:o}};if(e!=null&&e.syntheticException){var l=n_(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function iV(t){return cn(t)&&!v1(t)&&fU.indexOf(t)>=0}function rV(t,e){var n,i,r=(n=e==null?void 0:e.handled)===null||n===void 0||n,s=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,o=e!=null&&e.overrideExceptionType?e.overrideExceptionType:$5(t)?t.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(u,d){d===void 0&&(d=40);var f=Object.keys(u);if(f.sort(),!f.length)return"[object has no keys]";for(var p=f.length;p>0;p--){var g=f.slice(0,p).join(", ");if(!(g.length>d))return p===f.length||g.length<=d?g:g.slice(0,d)+"..."}return""}(t),l={type:o,value:a,mechanism:{handled:r,synthetic:s}};if(e!=null&&e.syntheticException){var c=n_(e==null?void 0:e.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:iV(t.level)?t.level:"error"}}function sV(t,e){var{error:n,event:i}=t,r={$exception_list:[]},s=n||i;if(lw(s)||function(f){return o0(f,"DOMException")}(s)){var o=s;if(function(f){return"stack"in f}(s))r=dw(s,e);else{var a=o.name||(lw(o)?"DOMError":"DOMException"),l=o.message?a+": "+o.message:a;r=fw(l,xe({},e,{overrideExceptionType:lw(o)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in o&&(r.$exception_DOMException_code=""+o.code),r}if(function(f){return o0(f,"ErrorEvent")}(s)&&s.error)return dw(s.error,e);if(z5(s))return dw(s,e);if(function(f){return o0(f,"Object")}(s)||$5(s))return rV(s,e);if(ge(n)&&cn(i)){var c="Error",u=i,d=i.match(eV);return d&&(c=d[1],u=d[2]),fw(u,xe({},e,{overrideExceptionType:c,defaultExceptionMessage:u}))}return fw(s,e)}function cN(t,e,n){try{if(!(e in t))return()=>{};var i=t[e],r=n(i);return Fr(r)&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=r,()=>{t[e]=i}}catch{return()=>{}}}let oV=class{constructor(e){var n;this._instance=e,this.ft=(q==null||(n=q.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(Ee.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.gt&&this.gt(),this.gt=void 0,Ee.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(q&&q.history){var i=this;(e=q.history.pushState)!=null&&e.__posthog_wrapped__||cN(q.history,"pushState",r=>function(s,o,a){r.call(this,s,o,a),i._t("pushState")}),(n=q.history.replaceState)!=null&&n.__posthog_wrapped__||cN(q.history,"replaceState",r=>function(s,o,a){r.call(this,s,o,a),i._t("replaceState")}),this.bt()}}_t(e){try{var n,i=q==null||(n=q.location)==null?void 0:n.pathname;if(!i)return;i!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ft=i}catch(r){Ee.error("Error capturing "+e+" pageview",r)}}bt(){if(!this.gt){var e=()=>{this._t("popstate")};Qt(q,"popstate",e),this.gt=()=>{q&&q.removeEventListener("popstate",e)}}}};function X0(t){var e,n;return((e=JSON.stringify(t,(n=[],function(i,r){if(ln(r)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(r)?"[Circular]":(n.push(r),r)}return r})))==null?void 0:e.length)||0}function T1(t,e){if(e===void 0&&(e=66060288e-1),t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[T1({size:X0(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),T1({size:X0(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var xo=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(xo||{}),ns=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(ns||{}),O1="[SessionRecording]",I1="redacted",Um={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},aV=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],lV=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],cV=["/s/","/e/","/i/"];function uN(t,e,n,i){if(wt(t))return t;var r=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return cn(r)&&(r=parseInt(r)),r>n?O1+" "+i+" body too large to record ("+r+" bytes)":t}function dN(t,e){if(wt(t))return t;var n=t;return kd(n,!1)||(n=O1+" "+e+" body "+I1),At(lV,i=>{var r,s;(r=n)!=null&&r.length&&((s=n)==null?void 0:s.indexOf(i))!==-1&&(n=O1+" "+e+" body "+I1+" as might contain: "+i)}),n}var uV=(t,e)=>{var n,i,r,s={payloadSizeLimitBytes:Um.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...Um.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...Um.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,c=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),f=>(f!=null&&f.requestBody&&(f.requestBody=uN(f.requestBody,f.requestHeaders,r,"Request")),f!=null&&f.responseBody&&(f.responseBody=uN(f.responseBody,f.responseHeaders,r,"Response")),f)),u=f=>{return c(((m,v)=>{var y,w=_d(m.name),x=v.indexOf("http")===0?(y=_d(v))==null?void 0:y.pathname:v;x==="/"&&(x="");var S=w==null?void 0:w.pathname.replace(x||"","");if(!(w&&S&&cV.some(_=>S.indexOf(_)===0)))return m})((g=(p=f).requestHeaders,wt(g)||At(Object.keys(g??{}),m=>{aV.includes(m.toLowerCase())&&(g[m]=I1)}),p),t.api_host));var p,g},d=Fr(t.session_recording.maskNetworkRequestFn);return d&&Fr(t.session_recording.maskCapturedNetworkRequestFn)&&Ee.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=f=>{var p=t.session_recording.maskNetworkRequestFn({url:f.name});return xe({},f,{name:p==null?void 0:p.url})}),s.maskRequestFn=Fr(t.session_recording.maskCapturedNetworkRequestFn)?f=>{var p,g=u(f);return g&&(p=t.session_recording.maskCapturedNetworkRequestFn==null?void 0:t.session_recording.maskCapturedNetworkRequestFn(g))!==null&&p!==void 0?p:void 0}:f=>function(p){if(!ge(p))return p.requestBody=dN(p.requestBody,"Request"),p.responseBody=dN(p.responseBody,"Response"),p}(u(f)),xe({},Um,s,{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};let dV=class{constructor(e,n){var i,r;n===void 0&&(n={}),this.yt={},this.wt=s=>{if(!this.yt[s]){var o,a;this.yt[s]=!0;var l=this.St(s);(o=(a=this.rt).onBlockedNode)==null||o.call(a,s,l)}},this.$t=s=>{var o=this.St(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[s,o]},this.St=s=>this._rrweb.mirror.getNode(s),this.kt=s=>{var o,a,l,c,u,d,f,p;return((o=(a=s.removes)==null?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(c=s.attributes)==null?void 0:c.length)!==null&&l!==void 0?l:0)+((u=(d=s.texts)==null?void 0:d.length)!==null&&u!==void 0?u:0)+((f=(p=s.adds)==null?void 0:p.length)!==null&&f!==void 0?f:0)},this.throttleMutations=s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.kt(o);o.attributes&&(o.attributes=o.attributes.filter(c=>{var[u]=this.$t(c.id);return!this.ct.consumeRateLimit(u)&&c}));var l=this.kt(o);return l!==0||a===l?s:void 0},this._rrweb=e,this.rt=n,this.ct=new D5({bucketSize:(i=this.rt.bucketSize)!==null&&i!==void 0?i:100,refillRate:(r=this.rt.refillRate)!==null&&r!==void 0?r:10,refillInterval:1e3,et:this.wt})}};var zr=Uint8Array,Hi=Uint16Array,Cd=Uint32Array,i_=new zr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),r_=new zr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fN=new zr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),U5=function(t,e){for(var n=new Hi(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new Cd(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},V5=U5(i_,2),fV=V5[0],j1=V5[1];fV[28]=258,j1[258]=28;for(var hN=U5(r_,0)[1],H5=new Hi(32768),zt=0;zt<32768;++zt){var Bl=(43690&zt)>>>1|(21845&zt)<<1;Bl=(61680&(Bl=(52428&Bl)>>>2|(13107&Bl)<<2))>>>4|(3855&Bl)<<4,H5[zt]=((65280&Bl)>>>8|(255&Bl)<<8)>>>1}var yh=function(t,e,n){for(var i=t.length,r=0,s=new Hi(e);r<i;++r)++s[t[r]-1];var o,a=new Hi(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;for(o=new Hi(i),r=0;r<i;++r)o[r]=H5[a[t[r]-1]++]>>>15-t[r];return o},Ac=new zr(288);for(zt=0;zt<144;++zt)Ac[zt]=8;for(zt=144;zt<256;++zt)Ac[zt]=9;for(zt=256;zt<280;++zt)Ac[zt]=7;for(zt=280;zt<288;++zt)Ac[zt]=8;var J0=new zr(32);for(zt=0;zt<32;++zt)J0[zt]=5;var hV=yh(Ac,9),pV=yh(J0,5),W5=function(t){return(t/8>>0)+(7&t&&1)},G5=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Hi?Hi:t instanceof Cd?Cd:zr)(n-e);return i.set(t.subarray(e,n)),i},yo=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},bf=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},hw=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new zr(0),0];if(r==1){var o=new zr(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(_,E){return _.f-E.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var f=s[0].s;for(i=1;i<r;++i)s[i].s>f&&(f=s[i].s);var p=new Hi(f+1),g=L1(n[u-1],p,0);if(g>e){i=0;var m=0,v=g-e,y=1<<v;for(s.sort(function(_,E){return p[E.s]-p[_.s]||_.f-E.f});i<r;++i){var w=s[i].s;if(!(p[w]>e))break;m+=y-(1<<g-p[w]),p[w]=e}for(m>>>=v;m>0;){var x=s[i].s;p[x]<e?m-=1<<e-p[x]++-1:++i}for(;i>=0&&m;--i){var S=s[i].s;p[S]==e&&(--p[S],++m)}g=e}return[new zr(p),g]},L1=function(t,e,n){return t.s==-1?Math.max(L1(t.l,e,n+1),L1(t.r,e,n+1)):e[t.s]=n},pN=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Hi(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},wf=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},D1=function(t,e,n){var i=n.length,r=W5(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},mN=function(t,e,n,i,r,s,o,a,l,c,u){yo(e,u++,n),++r[256];for(var d=hw(r,15),f=d[0],p=d[1],g=hw(s,15),m=g[0],v=g[1],y=pN(f),w=y[0],x=y[1],S=pN(m),_=S[0],E=S[1],C=new Hi(19),N=0;N<w.length;++N)C[31&w[N]]++;for(N=0;N<_.length;++N)C[31&_[N]]++;for(var M=hw(C,7),j=M[0],I=M[1],O=19;O>4&&!j[fN[O-1]];--O);var H,D,K,X,te=c+5<<3,U=wf(r,Ac)+wf(s,J0)+o,z=wf(r,f)+wf(s,m)+o+14+3*O+wf(C,j)+(2*C[16]+3*C[17]+7*C[18]);if(te<=U&&te<=z)return D1(e,u,t.subarray(l,l+c));if(yo(e,u,1+(z<U)),u+=2,z<U){H=yh(f,p),D=f,K=yh(m,v),X=m;var ie=yh(j,I);for(yo(e,u,x-257),yo(e,u+5,E-1),yo(e,u+10,O-4),u+=14,N=0;N<O;++N)yo(e,u+3*N,j[fN[N]]);u+=3*O;for(var ye=[w,_],J=0;J<2;++J){var le=ye[J];for(N=0;N<le.length;++N){var F=31&le[N];yo(e,u,ie[F]),u+=j[F],F>15&&(yo(e,u,le[N]>>>5&127),u+=le[N]>>>12)}}}else H=hV,D=Ac,K=pV,X=J0;for(N=0;N<a;++N)if(i[N]>255){F=i[N]>>>18&31,bf(e,u,H[F+257]),u+=D[F+257],F>7&&(yo(e,u,i[N]>>>23&31),u+=i_[F]);var $=31&i[N];bf(e,u,K[$]),u+=X[$],$>3&&(bf(e,u,i[N]>>>5&8191),u+=r_[$])}else bf(e,u,H[i[N]]),u+=D[i[N]];return bf(e,u,H[256]),u+D[256]},mV=new Cd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),gV=function(){for(var t=new Cd(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),vV=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=gV[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},yV=function(t,e,n,i,r){return function(s,o,a,l,c,u){var d=s.length,f=new zr(l+d+5*(1+Math.floor(d/7e3))+c),p=f.subarray(l,f.length-c),g=0;if(!o||d<8)for(var m=0;m<=d;m+=65535){var v=m+65535;v<d?g=D1(p,g,s.subarray(m,v)):(p[m]=u,g=D1(p,g,s.subarray(m,d)))}else{for(var y=mV[o-1],w=y>>>13,x=8191&y,S=(1<<a)-1,_=new Hi(32768),E=new Hi(S+1),C=Math.ceil(a/3),N=2*C,M=function(Ue){return(s[Ue]^s[Ue+1]<<C^s[Ue+2]<<N)&S},j=new Cd(25e3),I=new Hi(288),O=new Hi(32),H=0,D=0,K=(m=0,0),X=0,te=0;m<d;++m){var U=M(m),z=32767&m,ie=E[U];if(_[z]=ie,E[U]=z,X<=m){var ye=d-m;if((H>7e3||K>24576)&&ye>423){g=mN(s,p,0,j,I,O,D,K,te,m-te,g),K=H=D=0,te=m;for(var J=0;J<286;++J)I[J]=0;for(J=0;J<30;++J)O[J]=0}var le=2,F=0,$=x,V=z-ie&32767;if(ye>2&&U==M(m-V))for(var k=Math.min(w,ye)-1,P=Math.min(32767,m),L=Math.min(258,ye);V<=P&&--$&&z!=ie;){if(s[m+le]==s[m+le-V]){for(var R=0;R<L&&s[m+R]==s[m+R-V];++R);if(R>le){if(le=R,F=V,R>k)break;var Y=Math.min(V,R-2),G=0;for(J=0;J<Y;++J){var ne=m-V+J+32768&32767,Z=ne-_[ne]+32768&32767;Z>G&&(G=Z,ie=ne)}}}V+=(z=ie)-(ie=_[z])+32768&32767}if(F){j[K++]=268435456|j1[le]<<18|hN[F];var Ne=31&j1[le],ze=31&hN[F];D+=i_[Ne]+r_[ze],++I[257+Ne],++O[ze],X=m+le,++H}else j[K++]=s[m],++I[s[m]]}}g=mN(s,p,u,j,I,O,D,K,te,m-te,g)}return G5(f,0,l+W5(g)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!0)},$1=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},bV=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&$1(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},wV=function(t){return 10+(t.filename&&t.filename.length+1||0)};function K5(t,e){e===void 0&&(e={});var n=vV(),i=t.length;n.p(t);var r=yV(t,e,wV(e),8),s=r.length;return bV(r,e),$1(r,s-8,n.d()),$1(r,s-4,i),r}function q5(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new zr(t.length+(t.length>>>1)),r=0,s=function(c){i[r++]=c},o=0;o<n;++o){if(r+5>i.length){var a=new zr(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return G5(i,0,r)}function xV(t,e){return function(n){for(var i=0,r=0;r<n.length;r++)i=(i<<5)-i+n.charCodeAt(r),i|=0;return Math.abs(i)}(t)%100<cr(100*e,0,100)}var al="disabled",s_="sampled",Z0="active",Nc="buffering",o_="paused",a_="trigger",io=a_+"_activated",ui=a_+"_pending",uo=a_+"_"+al;function gN(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class Y5{constructor(e){this.xt=e}triggerStatus(e){var n=this.xt.map(i=>i.triggerStatus(e));return n.includes(io)?io:n.includes(ui)?ui:uo}stop(){this.xt.forEach(e=>e.stop())}}class X5{constructor(e){this.xt=e}triggerStatus(e){var n=new Set;for(var i of this.xt)n.add(i.triggerStatus(e));switch(n.delete(uo),n.size){case 0:return uo;case 1:return Array.from(n)[0];default:return ui}}stop(){this.xt.forEach(e=>e.stop())}}class SV{triggerStatus(){return ui}stop(){}}class kV{constructor(e){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var n,i;this.Et=((n=e.sessionRecording)==null?void 0:n.urlTriggers)||[],this.It=((i=e.sessionRecording)==null?void 0:i.urlBlocklist)||[]}Pt(e){var n;return this.Et.length===0?uo:((n=this._instance)==null?void 0:n.get_property(x1))===e?io:ui}triggerStatus(e){var n=this.Pt(e),i=n===io?io:n===ui?ui:uo;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:i}),i}checkUrlTriggerConditions(e,n,i){if(q!==void 0&&q.location.href){var r=q.location.href,s=this.urlBlocked,o=gN(r,this.It);s&&o||(o&&!s?e():!o&&s&&n(),gN(r,this.Et)&&i("url"))}}stop(){}}class _V{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=e}triggerStatus(){var e=ui;return wt(this.linkedFlag)&&(e=uo),this.linkedFlagSeen&&(e=io),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,n){var i;if(this.linkedFlag=((i=e.sessionRecording)==null?void 0:i.linkedFlag)||null,!wt(this.linkedFlag)&&!this.linkedFlagSeen){var r=cn(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,s=cn(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((o,a)=>{var l=!1;if(ln(a)&&r in a){var c=a[r];l=Ys(c)?c===!0:s?c===s:!!c}this.linkedFlagSeen=l,l&&n(r,s)})}}stop(){this.Rt()}}let CV=class{constructor(e){this.Tt=[],this._instance=e}onRemoteConfig(e){var n;this.Tt=((n=e.sessionRecording)==null?void 0:n.eventTriggers)||[]}Mt(e){var n;return this.Tt.length===0?uo:((n=this._instance)==null?void 0:n.get_property(S1))===e?io:ui}triggerStatus(e){var n=this.Mt(e),i=n===io?io:n===ui?ui:uo;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:i}),i}stop(){}};function EV(t){return t.isRecordingEnabled?Nc:al}function AV(t){if(!t.receivedFlags)return Nc;if(!t.isRecordingEnabled)return al;if(t.urlTriggerMatching.urlBlocked)return o_;var e=t.isSampled===!0,n=new Y5([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId);return e?s_:n===io?Z0:n===ui?Nc:t.isSampled===!1?al:Z0}function NV(t){if(!t.receivedFlags)return Nc;if(!t.isRecordingEnabled)return al;if(t.urlTriggerMatching.urlBlocked)return o_;var e=new X5([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId),n=e!==uo,i=Ys(t.isSampled);return n&&e===ui?Nc:n&&e===uo||i&&!t.isSampled?al:t.isSampled===!0?s_:Z0}var Xf="[SessionRecording]",ti=Dn(Xf);function Vm(){var t;return qe==null||(t=qe.__PosthogExtensions__)==null||(t=t.rrweb)==null?void 0:t.record}var PV=3e5,MV=[ns.MouseMove,ns.MouseInteraction,ns.Scroll,ns.ViewportResize,ns.Input,ns.TouchMove,ns.MediaInteraction,ns.Drag],vN=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function Ul(t){return function(e,n){for(var i="",r=0;r<e.length;){var s=e[r++];i+=String.fromCharCode(s)}return i}(K5(q5(JSON.stringify(t))))}function yN(t){return t.type===xo.Custom&&t.data.tag==="sessionIdle"}class RV{get sessionId(){return this.Ct}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw new Error(Xf+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var e,n;return this.Lt.triggerStatus(this.sessionId)===ui?6e4:(e=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:PV}get jt(){var e=this._instance.get_property(qf);return Ys(e)?e:null}get Nt(){var e,n,i=(e=this.C)==null?void 0:e.data[((n=this.C)==null?void 0:n.data.length)-1],{sessionStartTimestamp:r}=this.At.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get zt(){var e=!!this._instance.get_property(w1),n=!this._instance.config.disable_session_recording;return q&&e&&n}get Ut(){var e=!!this._instance.get_property(GA),n=this._instance.config.enable_recording_console_log;return n??e}get qt(){var e,n,i,r,s,o,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(YA),c=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,u=(i=(r=a==null?void 0:a.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&i!==void 0?i:4,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:.4;if(typeof d=="string"){var f=parseFloat(d);d=isNaN(f)?.4:f}return{enabled:c,fps:cr(u,0,12,"canvas recording fps",4),quality:cr(d,0,1,"canvas recording quality",.4)}}get Bt(){var e,n,i=this._instance.get_property(KA),r={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=ln(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(Ys(a)?a:i!=null&&i.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get Ht(){var e,n,i,r,s,o,a=this._instance.get_property(qA),l={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(i=this._instance.config.session_recording)==null?void 0:i.blockSelector},c=(r=l==null?void 0:l.maskAllInputs)!==null&&r!==void 0?r:a==null?void 0:a.maskAllInputs,u=(s=l==null?void 0:l.maskTextSelector)!==null&&s!==void 0?s:a==null?void 0:a.maskTextSelector,d=(o=l==null?void 0:l.blockSelector)!==null&&o!==void 0?o:a==null?void 0:a.blockSelector;return ge(c)&&ge(u)&&ge(d)?void 0:{maskAllInputs:c==null||c,maskTextSelector:u,blockSelector:d}}get Wt(){var e=this._instance.get_property(XA);return ai(e)?e:null}get Gt(){var e=this._instance.get_property(JA);return ai(e)?e:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.jt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):Nc}constructor(e){if(this.Vt=EV,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.Lt=new SV,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(_e!=null&&_e.visibilityState){var r="window "+_e.visibilityState;this.ui(r,{})}},this._instance=e,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw ti.error("started without valid sessionManager"),new Error(Xf+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(Xf+" cannot be used with __preview_experimental_cookieless_mode.");this.Xt=new _V(this._instance),this.Kt=new kV(this._instance),this.Yt=new CV(this._instance);var{sessionId:n,windowId:i}=this.At.checkAndGetSessionAndWindowId();this.Ct=n,this.fi=i,this.C=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&ti.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.zt?(this.gi(e),Qt(q,"beforeunload",this.oi),Qt(q,"offline",this.li),Qt(q,"online",this.hi),Qt(q,"visibilitychange",this.di),this.mi(),this.bi(),wt(this.ii)&&(this.ii=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var i=n!=null&&n.properties.$current_url?this.yi(n==null?void 0:n.properties.$current_url):"";if(!i)return;this.ui("$pageview",{href:i})}}catch(r){ti.error("Could not add $pageview to rrweb session",r)}})),this.ei||(this.ei=this.At.onSessionId((n,i,r)=>{var s,o;r&&(this.ui("$session_id_change",{sessionId:n,windowId:i,changeReason:r}),(s=this._instance)==null||(s=s.persistence)==null||s.unregister(S1),(o=this._instance)==null||(o=o.persistence)==null||o.unregister(x1))}))):this.stopRecording()}stopRecording(){var e,n,i,r;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,q==null||q.removeEventListener("beforeunload",this.oi),q==null||q.removeEventListener("offline",this.li),q==null||q.removeEventListener("online",this.hi),q==null||q.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),(e=this.ii)==null||e.call(this),this.ii=void 0,(n=this.ni)==null||n.call(this),this.ni=void 0,(i=this.ei)==null||i.call(this),this.ei=void 0,(r=this.si)==null||r.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),ti.info("stopped"))}Si(){var e;(e=this._instance.persistence)==null||e.unregister(qf)}$i(e){var n,i=this.Ct!==e,r=this.Wt;if(ai(r)){var s=this.jt,o=i||!Ys(s),a=o?xV(e,r):s;o&&(a?this.ki(s_):ti.warn("Sample rate ("+r+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:r,isSampled:a})),(n=this._instance.persistence)==null||n.register({[qf]:a})}else this.Si()}onRemoteConfig(e){var n,i,r,s;this.ui("$remote_config_received",e),this.xi(e),(n=e.sessionRecording)!=null&&n.endpoint&&(this.vi=(s=e.sessionRecording)==null?void 0:s.endpoint),this.mi(),((i=e.sessionRecording)==null?void 0:i.triggerMatchType)==="any"?(this.Vt=AV,this.Lt=new Y5([this.Yt,this.Kt])):(this.Vt=NV,this.Lt=new X5([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(r=e.sessionRecording)==null?void 0:r.triggerMatchType}),this.Kt.onRemoteConfig(e),this.Yt.onRemoteConfig(e),this.Xt.onRemoteConfig(e,(o,a)=>{this.ki("linked_flag_matched",{flag:o,variant:a})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){ai(this.Wt)&&wt(this.si)&&(this.si=this.At.onSessionId(e=>{this.$i(e)}))}xi(e){if(this._instance.persistence){var n,i=this._instance.persistence,r=()=>{var s,o,a,l,c,u,d,f,p,g=(s=e.sessionRecording)==null?void 0:s.sampleRate,m=wt(g)?null:parseFloat(g);wt(m)&&this.Si();var v=(o=e.sessionRecording)==null?void 0:o.minimumDurationMilliseconds;i.register({[w1]:!!e.sessionRecording,[GA]:(a=e.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[KA]:xe({capturePerformance:e.capturePerformance},(l=e.sessionRecording)==null?void 0:l.networkPayloadCapture),[qA]:(c=e.sessionRecording)==null?void 0:c.masking,[YA]:{enabled:(u=e.sessionRecording)==null?void 0:u.recordCanvas,fps:(d=e.sessionRecording)==null?void 0:d.canvasFps,quality:(f=e.sessionRecording)==null?void 0:f.canvasQuality},[XA]:m,[JA]:ge(v)?null:v,[ZA]:(p=e.sessionRecording)==null?void 0:p.scriptConfig})};r(),(n=this.ri)==null||n.call(this),this.ri=this.At.onSessionId(r)}}log(e,n){var i;n===void 0&&(n="log"),(i=this._instance.sessionRecording)==null||i.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}gi(e){if(!ge(Object.assign)&&!ge(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),Vm()?this.Ei():(n=qe.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.Ii,i=>{if(i)return ti.error("could not load recorder",i);this.Ei()}),ti.info("starting"),this.status===Z0&&this.ki(e||"recording_initialized")}}get Ii(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(ZA))==null?void 0:e.script)||"recorder"}Pi(e){var n;return e.type===3&&MV.indexOf((n=e.data)==null?void 0:n.source)!==-1}Ri(e){var n=this.Pi(e);n||this.Zt||e.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.C.data.length,bufferSize:this.C.size}),this.ai());var i=!1;if(n&&(this.ti=e.timestamp,this.Zt)){var r=this.Zt==="unknown";this.Zt=!1,r||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)}if(!this.Zt){var{windowId:s,sessionId:o}=this.At.checkAndGetSessionAndWindowId(!n,e.timestamp),a=this.Ct!==o,l=this.fi!==s;this.fi=s,this.Ct=o,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this.Ti()}}Mi(e){try{return e.rrwebMethod(),!0}catch(n){return this.Qt.length<10?this.Qt.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):ti.warn("could not emit queued rrweb event.",n,e),!1}}ui(e,n){return this.Mi(vN(()=>Vm().addCustomEvent(e,n)))}Ci(){return this.Mi(vN(()=>Vm().takeFullSnapshot()))}Ei(){var e,n,i,r,s={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},o=this._instance.config.session_recording;for(var[a,l]of Object.entries(o||{}))a in s&&(a==="maskInputOptions"?s.maskInputOptions=xe({password:!0},l):s[a]=l);this.qt&&this.qt.enabled&&(s.recordCanvas=!0,s.sampling={canvas:this.qt.fps},s.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(s.maskAllInputs=(n=this.Ht.maskAllInputs)===null||n===void 0||n,s.maskTextSelector=(i=this.Ht.maskTextSelector)!==null&&i!==void 0?i:void 0,s.blockSelector=(r=this.Ht.blockSelector)!==null&&r!==void 0?r:void 0);var c=Vm();if(c){this.Fi=(e=this.Fi)!==null&&e!==void 0?e:new dV(c,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(d,f)=>{var p="Too many mutations on node '"+d+"'. Rate limiting. This could be due to SVG animations or something similar";ti.info(p,{node:f}),this.log(Xf+" "+p,"warn")}});var u=this.Oi();this.ci=c(xe({emit:d=>{this.onRRwebEmit(d)},plugins:u},s)),this.ti=Date.now(),this.Zt=Ys(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:s,activePlugins:u.map(d=>d==null?void 0:d.name)}),this.ui("$posthog_config",{config:this._instance.config})}else ti.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),this.Zt!==!0){var e=this.Dt;e&&(this.wi=setInterval(()=>{this.Ci()},e))}}Oi(){var e,n,i=[],r=(e=qe.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;r&&this.Ut&&i.push(r());var s=(n=qe.__PosthogExtensions__)==null||(n=n.rrwebPlugins)==null?void 0:n.getRecordNetworkPlugin;return this.Bt&&Fr(s)&&(!PU.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?i.push(s(uV(this._instance.config,this.Bt))):ti.info("NetworkCapture not started because we are on localhost.")),i}onRRwebEmit(e){var n;if(this.Ai(),e&&ln(e)){if(e.type===xo.Meta){var i=this.yi(e.data.href);if(this.Di=i,!i)return;e.data.href=i}else this.Li();if(this.Kt.checkUrlTriggerConditions(()=>this.ji(),()=>this.Ni(),f=>this.zi(f)),!this.Kt.urlBlocked||(r=e).type===xo.Custom&&r.data.tag==="recording paused"){var r;e.type===xo.FullSnapshot&&this.Ti(),e.type===xo.FullSnapshot&&this.Jt&&this.Lt.triggerStatus(this.sessionId)===ui&&this.pi();var s=this.Fi?this.Fi.throttleMutations(e):e;if(s){var o=function(f){var p=f;if(p&&ln(p)&&p.type===6&&ln(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var g=[],m=0;m<p.data.payload.payload.length;m++)p.data.payload.payload[m]&&p.data.payload.payload[m].length>2e3?g.push(p.data.payload.payload[m].slice(0,2e3)+"...[truncated]"):g.push(p.data.payload.payload[m]);return p.data.payload.payload=g,f}return f}(s);if(this.Ri(o),this.Zt!==!0||yN(o)){if(yN(o)){var a=o.data.payload;if(a){var l=a.lastActivityTimestamp,c=a.threshold;o.timestamp=l+c}}var u=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(f){if(X0(f)<1024)return f;try{if(f.type===xo.FullSnapshot)return xe({},f,{data:Ul(f.data),cv:"2024-10"});if(f.type===xo.IncrementalSnapshot&&f.data.source===ns.Mutation)return xe({},f,{cv:"2024-10",data:xe({},f.data,{texts:Ul(f.data.texts),attributes:Ul(f.data.attributes),removes:Ul(f.data.removes),adds:Ul(f.data.adds)})});if(f.type===xo.IncrementalSnapshot&&f.data.source===ns.StyleSheetRule)return xe({},f,{cv:"2024-10",data:xe({},f.data,{adds:f.data.adds?Ul(f.data.adds):void 0,removes:f.data.removes?Ul(f.data.removes):void 0})})}catch(p){ti.error("could not compress event - will use uncompressed event",p)}return f}(o):o,d={$snapshot_bytes:X0(u),$snapshot_data:u,$session_id:this.Ct,$window_id:this.fi};this.status!==al?this.Ui(d):this.pi()}}}}}Li(){if(!this._instance.config.capture_pageview&&q){var e=this.yi(q.location.href);this.Di!==e&&(this.ui("$url_changed",{href:e}),this.Di=e)}}Ai(){if(this.Qt.length){var e=[...this.Qt];this.Qt=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.Mi(n)})}}yi(e){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))==null?void 0:i.url}return e}pi(){return this.C={size:0,data:[],sessionId:this.Ct,windowId:this.fi},this.C}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var e=this.Gt,n=this.Nt,i=ai(n)&&n>=0,r=ai(e)&&i&&n<e;return this.status===Nc||this.status===o_||this.status===al||r?(this.qi=setTimeout(()=>{this.ai()},2e3),this.C):(this.C.data.length>0&&T1(this.C).forEach(s=>{this.Bi({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId,$lib:"web",$lib_version:Co.LIB_VERSION})}),this.pi())}Ui(e){var n,i=2+(((n=this.C)==null?void 0:n.data.length)||0);!this.Zt&&(this.C.size+e.$snapshot_bytes+i>943718.4||this.C.sessionId!==this.Ct)&&(this.C=this.ai()),this.C.size+=e.$snapshot_bytes,this.C.data.push(e.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(e){var n;this.Lt.triggerStatus(this.sessionId)===ui&&((n=this._instance)==null||(n=n.persistence)==null||n.register({[e==="url"?x1:S1]:this.Ct}),this.ai(),this.ki(e+"_trigger_matched"))}ji(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),ti.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Ci(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),ti.info("recording resumed"))}bi(){this.Yt.Tt.length!==0&&wt(this.ni)&&(this.ni=this._instance.on("eventCaptured",e=>{try{this.Yt.Tt.includes(e.event)&&this.zi("event")}catch(n){ti.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Ci(),this.ki("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[qf]:!0}),this.Ci(),this.ki("sampling_overridden")}overrideTrigger(e){this.zi(e)}ki(e,n){this._instance.register_for_session({$session_recording_start_reason:e}),ti.info(e.replace("_"," "),n),ot(["recording_initialized","session_id_changed"],e)||this.ui(e,n)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.C.data.length,$sdk_debug_replay_internal_buffer_size:this.C.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:e}}}var pw=Dn("[SegmentIntegration]");function TV(t,e){var n=t.config.segment;if(!n)return e();(function(i,r){var s=i.config.segment;if(!s)return r();var o=l=>{var c=()=>l.anonymousId()||ja();i.config.get_device_id=c,l.id()&&(i.register({distinct_id:l.id(),$device_id:c()}),i.persistence.set_property(wo,"identified")),r()},a=s.user();"then"in a&&Fr(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((i=>{Promise&&Promise.resolve||pw.warn("This browser does not have Promise support, and can not use the segment integration");var r=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(pw.info("No userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(pw.info("UserId set, identifying with PostHog"),i.identify(s.event.userId));var a=i.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},a,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(t)).then(()=>{e()})})}var J5="posthog-js";function Z5(t,e){var{organization:n,projectId:i,prefix:r,severityAllowList:s=["error"]}=e===void 0?{}:e;return o=>{var a,l,c,u,d;if(!(s==="*"||s.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var f=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());o.tags["PostHog Person URL"]=f,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var p=((a=o.exception)==null?void 0:a.values)||[],g=p.map(v=>xe({},v,{stacktrace:v.stacktrace?xe({},v.stacktrace,{type:"raw",frames:(v.stacktrace.frames||[]).map(y=>xe({},y,{platform:"web:javascript"}))}):void 0})),m={$exception_message:((l=p[0])==null?void 0:l.value)||o.message,$exception_type:(c=p[0])==null?void 0:c.type,$exception_personURL:f,$exception_level:o.level,$exception_list:g,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((u=p[0])==null?void 0:u.value)||o.message,$sentry_exception_type:(d=p[0])==null?void 0:d.type,$sentry_tags:o.tags};return n&&i&&(m.$sentry_url=(r||"https://sentry.io/organizations/")+n+"/issues/?project="+i+"&query="+o.event_id),t.exceptions.sendExceptionEvent(m),o}}class OV{constructor(e,n,i,r,s){this.name=J5,this.setupOnce=function(o){o(Z5(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}}}var IV=q!=null&&q.location?Y0(q.location.hash,"__posthog")||Y0(location.hash,"state"):null,bN="_postHogToolbarParams",wN=Dn("[Toolbar]"),va=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t}(va||{});class jV{constructor(e){this.instance=e}Hi(e){qe.ph_toolbar_state=e}Wi(){var e;return(e=qe.ph_toolbar_state)!==null&&e!==void 0?e:va.UNINITIALIZED}maybeLoadToolbar(e,n,i){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),!q||!_e)return!1;e=e??q.location,i=i??q.history;try{if(!n){try{q.localStorage.setItem("test","test"),q.localStorage.removeItem("test")}catch{return!1}n=q==null?void 0:q.localStorage}var r,s=IV||Y0(e.hash,"__posthog")||Y0(e.hash,"state"),o=s?BA(()=>JSON.parse(atob(decodeURIComponent(s))))||BA(()=>JSON.parse(decodeURIComponent(s))):null;return o&&o.action==="ph_authorize"?((r=o).source="url",r&&Object.keys(r).length>0&&(o.desiredHash?e.hash=o.desiredHash:i?i.replaceState(i.state,"",e.pathname+e.search):e.hash="")):((r=JSON.parse(n.getItem(bN)||"{}")).source="localstorage",delete r.userIntent),!(!r.token||this.instance.config.token!==r.token)&&(this.loadToolbar(r),!0)}catch{return!1}}Gi(e){var n=qe.ph_load_toolbar||qe.ph_load_editor;!wt(n)&&Fr(n)?n(e,this.instance):wN.warn("No toolbar load function found")}loadToolbar(e){var n=!(_e==null||!_e.getElementById(k5));if(!q||n)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=xe({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(q.localStorage.setItem(bN,JSON.stringify(xe({},r,{source:void 0}))),this.Wi()===va.LOADED)this.Gi(r);else if(this.Wi()===va.UNINITIALIZED){var s;this.Hi(va.LOADING),(s=qe.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return wN.error("[Toolbar] Failed to load",o),void this.Hi(va.UNINITIALIZED);this.Hi(va.LOADED),this.Gi(r)}),Qt(q,"turbolinks:load",()=>{this.Hi(va.UNINITIALIZED),this.loadToolbar(r)})}return!0}Ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,i){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),this.maybeLoadToolbar(e,n,i)}}var LV=Dn("[TracingHeaders]");class DV{constructor(e){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var n,i;ge(this.Vi)&&((n=qe.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.get_distinct_id(),this._instance.sessionManager)),ge(this.Ki)&&((i=qe.__PosthogExtensions__)==null||(i=i.tracingHeadersPatchFns)==null||i._patchFetch(this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}J(e){var n,i;(n=qe.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(i=qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"tracing-headers",r=>{if(r)return LV.error("failed to load script",r);e()})}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.J(this.nt):((e=this.Vi)==null||e.call(this),(n=this.Ki)==null||n.call(this),this.Vi=void 0,this.Ki=void 0)}}var ua=Dn("[Web Vitals]"),xN=9e5;class $V{constructor(e){var n;this.Yi=!1,this.i=!1,this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),this.C.metrics.length!==0&&(this._instance.capture("$web_vitals",this.C.metrics.reduce((i,r)=>xe({},i,{["$web_vitals_"+r.name+"_event"]:xe({},r),["$web_vitals_"+r.name+"_value"]:r.value}),{})),this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=i=>{var r,s=(r=this._instance.sessionManager)==null?void 0:r.checkAndGetSessionAndWindowId(!0);if(ge(s))ua.error("Could not read session ID. Dropping metrics!");else{this.C=this.C||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.te();ge(o)||(wt(i==null?void 0:i.name)||wt(i==null?void 0:i.value)?ua.error("Invalid metric received",i):this.ie&&i.value>=this.ie?ua.error("Ignoring metric with value >= "+this.ie,i):(this.C.url!==o&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),ge(this.C.url)&&(this.C.url=o),this.C.firstMetricTimestamp=ge(this.C.firstMetricTimestamp)?Date.now():this.C.firstMetricTimestamp,i.attribution&&i.attribution.interactionTargetElement&&(i.attribution.interactionTargetElement=void 0),this.C.metrics.push(xe({},i,{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.C.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var i,r,s,o,a=qe.__PosthogExtensions__;ge(a)||ge(a.postHogWebVitalsCallbacks)||({onLCP:i,onCLS:r,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),i&&r&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&i(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Zi.bind(this)),this.i=!0):ua.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Yi=!((n=this._instance.persistence)==null||!n.props[HA]),this.startIfEnabled()}get allowedMetrics(){var e,n,i=ln(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return ge(i)?((n=this._instance.persistence)==null?void 0:n.props[WA])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(ln(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var e=ln(this._instance.config.capture_performance)&&ai(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:xN;return 0<e&&e<=6e4?xN:e}get isEnabled(){var e=Fi==null?void 0:Fi.protocol;if(e!=="http:"&&e!=="https:")return ua.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=ln(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Ys(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Ys(n)?n:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(ua.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(e){var n=ln(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=ln(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[HA]:n}),this._instance.persistence.register({[WA]:i})),this.Yi=n,this.startIfEnabled()}J(e){var n,i;(n=qe.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&e(),(i=qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"web-vitals",r=>{r?ua.error("failed to load script",r):e()})}te(){var e=q?q.location.href:void 0;return e||ua.error("Could not determine current URL"),e}}var FV=Dn("[Heatmaps]");function SN(t){return ln(t)&&"clientX"in t&&"clientY"in t&&ai(t.clientX)&&ai(t.clientY)}class zV{constructor(e){var n;this.rageclicks=new I5,this.Yi=!1,this.i=!1,this.ee=null,this.instance=e,this.Yi=!((n=this.instance.persistence)==null||!n.props[y1])}get flushIntervalMilliseconds(){var e=5e3;return ln(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return ge(this.instance.config.capture_heatmaps)?ge(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;FV.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this.ee)!==null&&e!==void 0?e:void 0),(n=this.ne)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[y1]:n}),this.Yi=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.C;return this.C=void 0,e}oe(e){this.ae(e.originalEvent,"deadclick")}re(){q&&_e&&(Qt(q,"beforeunload",this.se.bind(this)),Qt(_e,"click",e=>this.ae(e||(q==null?void 0:q.event)),{capture:!0}),Qt(_e,"mousemove",e=>this.le(e||(q==null?void 0:q.event)),{capture:!0}),this.ne=new L5(this.instance,HU,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(e,n){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,c){for(var u=a;u&&Oy(u)&&!qa(u,"body");){if(u===c)return!1;if(ot(l,q==null?void 0:q.getComputedStyle(u).position))return!0;u=N5(u)}return!1}(A5(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:i),target_fixed:o,type:n}}ae(e,n){var i;if(n===void 0&&(n="click"),!QA(e.target)&&SN(e)){var r=this.ue(e,n);(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.he(xe({},r,{type:"rageclick"})),this.he(r)}}le(e){!QA(e.target)&&SN(e)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(e,"mousemove"))},500))}he(e){if(q){var n=q.location.href;this.C=this.C||{},this.C[n]||(this.C[n]=[]),this.C[n].push(e)}}se(){this.C&&!Pu(this.C)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class BV{constructor(e){this._instance=e}doPageView(e,n){var i,r=this.ve(e,n);return this.ce={pathname:(i=q==null?void 0:q.location.pathname)!==null&&i!==void 0?i:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var n;return this.ve(e,(n=this.ce)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.ce)==null?void 0:e.pageViewId}}ve(e,n){var i=this.ce;if(!i)return{$pageview_id:n};var r={$pageview_id:n,$prev_pageview_id:i.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:u,maxContentY:d}=s;if(!(ge(o)||ge(a)||ge(l)||ge(c)||ge(u)||ge(d))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),d=Math.ceil(d);var f=o<=1?1:cr(a/o,0,1),p=o<=1?1:cr(l/o,0,1),g=c<=1?1:cr(u/c,0,1),m=c<=1?1:cr(d/c,0,1);r=fn(r,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:f,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:g,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:m})}}return i.pathname&&(r.$prev_pageview_pathname=i.pathname),i.timestamp&&(r.$prev_pageview_duration=(e.getTime()-i.timestamp.getTime())/1e3),r}}var UV=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),Cl(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},VV=!!m1||!!p1,kN="text/plain",Q0=(t,e)=>{var[n,i]=t.split("?"),r=xe({},e);i==null||i.split("&").forEach(o=>{var[a]=o.split("=");delete r[a]});var s=MU(r);return n+"?"+(s=s?(i?i+"&":"")+s:i)},Jf=(t,e)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,e),mw=t=>{var{data:e,compression:n}=t;if(e){if(n===$o.GZipJS){var i=K5(q5(Jf(e)),{mtime:0}),r=new Blob([i],{type:kN});return{contentType:kN,body:r,estimatedSize:r.size}}if(n===$o.Base64){var s=function(l){var c,u,d,f,p,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m=0,v=0,y="",w=[];if(!l)return l;l=UV(l);do c=(p=l.charCodeAt(m++)<<16|l.charCodeAt(m++)<<8|l.charCodeAt(m++))>>18&63,u=p>>12&63,d=p>>6&63,f=63&p,w[v++]=g.charAt(c)+g.charAt(u)+g.charAt(d)+g.charAt(f);while(m<l.length);switch(y=w.join(""),l.length%3){case 1:y=y.slice(0,-2)+"==";break;case 2:y=y.slice(0,-1)+"="}return y}(Jf(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:Jf(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=Jf(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},bh=[];p1&&bh.push({transport:"fetch",method:t=>{var e,n,{contentType:i,body:r,estimatedSize:s}=(e=mw(t))!==null&&e!==void 0?e:{},o=new Headers;At(t.headers,function(u,d){o.append(d,u)}),i&&o.append("Content-Type",i);var a=t.url,l=null;if(FA){var c=new FA;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),t.timeout)}}p1(a,xe({method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:r,signal:(n=l)==null?void 0:n.signal},t.fetchOptions)).then(u=>u.text().then(d=>{var f={statusCode:u.status,text:d};if(u.status===200)try{f.json=JSON.parse(d)}catch(p){Ee.error(p)}t.callback==null||t.callback(f)})).catch(u=>{Ee.error(u),t.callback==null||t.callback({statusCode:0,text:u})}).finally(()=>l?clearTimeout(l.timeout):null)}}),m1&&bh.push({transport:"XHR",method:t=>{var e,n=new m1;n.open(t.method||"GET",t.url,!0);var{contentType:i,body:r}=(e=mw(t))!==null&&e!==void 0?e:{};At(t.headers,function(s,o){n.setRequestHeader(o,s)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s={statusCode:n.status,text:n.responseText};if(n.status===200)try{s.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(s)}},n.send(r)}}),lr!=null&&lr.sendBeacon&&bh.push({transport:"sendBeacon",method:t=>{var e=Q0(t.url,{beacon:"1"});try{var n,{contentType:i,body:r}=(n=mw(t))!==null&&n!==void 0?n:{},s=typeof r=="string"?new Blob([r],{type:i}):r;lr.sendBeacon(e,s)}catch{}}});var Ed=function(t,e){if(!function(n){try{new RegExp(n)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function _N(t,e,n){return Jf({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var HV={exact:(t,e)=>e.some(n=>t.some(i=>n===i)),is_not:(t,e)=>e.every(n=>t.every(i=>n!==i)),regex:(t,e)=>e.some(n=>t.some(i=>Ed(n,i))),not_regex:(t,e)=>e.every(n=>t.every(i=>!Ed(n,i))),icontains:(t,e)=>e.map(Hm).some(n=>t.map(Hm).some(i=>n.includes(i))),not_icontains:(t,e)=>e.map(Hm).every(n=>t.map(Hm).every(i=>!n.includes(i)))},Hm=t=>t.toLowerCase(),WV=Dn("[Error tracking]");class GV{constructor(e){var n,i;this.fe=[],this._instance=e,this.fe=(n=(i=this._instance.persistence)==null?void 0:i.get_property(b1))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,i,r=(n=(i=e.errorTracking)==null?void 0:i.suppressionRules)!==null&&n!==void 0?n:[];this.fe=r,this._instance.persistence&&this._instance.persistence.register({[b1]:this.fe})}sendExceptionEvent(e){this.pe(e)?WV.info("Skipping exception capture because a suppression rule matched"):this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}pe(e){var n=e.$exception_list;if(!n||!Kt(n)||n.length===0)return!1;var i=n.reduce((r,s)=>{var{type:o,value:a}=s;return cn(o)&&o.length>0&&r.$exception_types.push(o),cn(a)&&a.length>0&&r.$exception_values.push(a),r},{$exception_types:[],$exception_values:[]});return this.fe.some(r=>{var s=r.values.map(o=>{var a,l=HV[o.operator],c=Kt(o.value)?o.value:[o.value],u=(a=i[o.key])!==null&&a!==void 0?a:[];return c.length>0&&l(c,u)});return r.type==="OR"?s.some(Boolean):s.every(Boolean)})}}var Br="Mobile",ev="iOS",Xs="Android",Gh="Tablet",Q5=Xs+" "+Gh,eO="iPad",tO="Apple",nO=tO+" Watch",Kh="Safari",Ad="BlackBerry",iO="Samsung",rO=iO+"Browser",sO=iO+" Internet",Pc="Chrome",KV=Pc+" OS",oO=Pc+" "+ev,l_="Internet Explorer",aO=l_+" "+Br,c_="Opera",qV=c_+" Mini",u_="Edge",lO="Microsoft "+u_,Ju="Firefox",cO=Ju+" "+ev,qh="Nintendo",Yh="PlayStation",Zu="Xbox",uO=Xs+" "+Br,dO=Br+" "+Kh,Zf="Windows",F1=Zf+" Phone",CN="Nokia",z1="Ouya",fO="Generic",YV=fO+" "+Br.toLowerCase(),hO=fO+" "+Gh.toLowerCase(),B1="Konqueror",hi="(\\d+(\\.\\d+)?)",gw=new RegExp("Version/"+hi),XV=new RegExp(Zu,"i"),JV=new RegExp(Yh+" \\w+","i"),ZV=new RegExp(qh+" \\w+","i"),d_=new RegExp(Ad+"|PlayBook|BB10","i"),QV={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},eH=(t,e)=>e&&ot(e,tO)||function(n){return ot(n,Kh)&&!ot(n,Pc)&&!ot(n,Xs)}(t),pO=function(t,e){return e=e||"",ot(t," OPR/")&&ot(t,"Mini")?qV:ot(t," OPR/")?c_:d_.test(t)?Ad:ot(t,"IE"+Br)||ot(t,"WPDesktop")?aO:ot(t,rO)?sO:ot(t,u_)||ot(t,"Edg/")?lO:ot(t,"FBIOS")?"Facebook "+Br:ot(t,"UCWEB")||ot(t,"UCBrowser")?"UC Browser":ot(t,"CriOS")?oO:ot(t,"CrMo")||ot(t,Pc)?Pc:ot(t,Xs)&&ot(t,Kh)?uO:ot(t,"FxiOS")?cO:ot(t.toLowerCase(),B1.toLowerCase())?B1:eH(t,e)?ot(t,Br)?dO:Kh:ot(t,Ju)?Ju:ot(t,"MSIE")||ot(t,"Trident/")?l_:ot(t,"Gecko")?Ju:""},tH={[aO]:[new RegExp("rv:"+hi)],[lO]:[new RegExp(u_+"?\\/"+hi)],[Pc]:[new RegExp("("+Pc+"|CrMo)\\/"+hi)],[oO]:[new RegExp("CriOS\\/"+hi)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+hi)],[Kh]:[gw],[dO]:[gw],[c_]:[new RegExp("(Opera|OPR)\\/"+hi)],[Ju]:[new RegExp(Ju+"\\/"+hi)],[cO]:[new RegExp("FxiOS\\/"+hi)],[B1]:[new RegExp("Konqueror[:/]?"+hi,"i")],[Ad]:[new RegExp(Ad+" "+hi),gw],[uO]:[new RegExp("android\\s"+hi,"i")],[sO]:[new RegExp(rO+"\\/"+hi)],[l_]:[new RegExp("(rv:|MSIE )"+hi)],Mozilla:[new RegExp("rv:"+hi)]},nH=function(t,e){var n=pO(t,e),i=tH[n];if(ge(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},EN=[[new RegExp(Zu+"; "+Zu+" (.*?)[);]","i"),t=>[Zu,t&&t[1]||""]],[new RegExp(qh,"i"),[qh,""]],[new RegExp(Yh,"i"),[Yh,""]],[d_,[Ad,""]],[new RegExp(Zf,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[F1,""];if(new RegExp(Br).test(e)&&!/IEMobile\b/.test(e))return[Zf+" "+Br,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=QV[i]||"";return/arm/i.test(e)&&(r="RT"),[Zf,r]}return[Zf,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[ev,e.join(".")]}return[ev,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=ge(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+Xs+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Xs+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[Xs,e.join(".")]}return[Xs,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[KV,""]],[/Linux|debian/i,["Linux",""]]],AN=function(t){return ZV.test(t)?qh:JV.test(t)?Yh:XV.test(t)?Zu:new RegExp(z1,"i").test(t)?z1:new RegExp("("+F1+"|WPDesktop)","i").test(t)?F1:/iPad/.test(t)?eO:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?nO:d_.test(t)?Ad:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(CN,"i").test(t)?CN:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Br).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?Xs:Q5:Xs:new RegExp("(pda|"+Br+")","i").test(t)?YV:new RegExp(Gh,"i").test(t)&&!new RegExp(Gh+" pc","i").test(t)?hO:""},Wm="https?://(.*)",jy=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],iH=Ty(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],jy),f_="<masked>",rH=["li_fat_id"];function mO(t,e,n){if(!_e)return{};var i,r=e?Ty([],jy,n||[]):[],s=gO(t_(_e.URL,r,f_),t),o=(i={},At(rH,function(a){var l=no.D(a);i[a]=l||null}),i);return fn(o,s)}function gO(t,e){var n=iH.concat(e||[]),i={};return At(n,function(r){var s=q0(t,r);i[r]=s||null}),i}function vO(t){var e=function(s){return s?s.search(Wm+"google.([^/?]*)")===0?"google":s.search(Wm+"bing.com")===0?"bing":s.search(Wm+"yahoo.com")===0?"yahoo":s.search(Wm+"duckduckgo.com")===0?"duckduckgo":null:null}(t),n=e!="yahoo"?"q":"p",i={};if(!Cl(e)){i.$search_engine=e;var r=_e?q0(_e.referrer,n):"";r.length&&(i.ph_keyword=r)}return i}function NN(){return navigator.language||navigator.userLanguage}function yO(){return(_e==null?void 0:_e.referrer)||"$direct"}function bO(t,e){var n=t?Ty([],jy,e||[]):[],i=Fi==null?void 0:Fi.href.substring(0,1e3);return{r:yO().substring(0,1e3),u:i?t_(i,n,f_):void 0}}function wO(t){var e,{r:n,u:i}=t,r={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=_d(n))==null?void 0:e.host};if(i){r.$current_url=i;var s=_d(i);r.$host=s==null?void 0:s.host,r.$pathname=s==null?void 0:s.pathname;var o=gO(i);fn(r,o)}if(n){var a=vO(n);fn(r,a)}return r}function xO(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function sH(){try{return new Date().getTimezoneOffset()}catch{return}}function oH(t,e){if(!Li)return{};var n,i,r,s=t?Ty([],jy,e||[]):[],[o,a]=function(l){for(var c=0;c<EN.length;c++){var[u,d]=EN[c],f=u.exec(l),p=f&&(Fr(d)?d(f,l):d);if(p)return p}return["",""]}(Li);return fn(Qk({$os:o,$os_version:a,$browser:pO(Li,navigator.vendor),$device:AN(Li),$device_type:(i=Li,r=AN(i),r===eO||r===Q5||r==="Kobo"||r==="Kindle Fire"||r===hO?Gh:r===qh||r===Zu||r===Yh||r===z1?"Console":r===nO?"Wearable":r?Br:"Desktop"),$timezone:xO(),$timezone_offset:sH()}),{$current_url:t_(Fi==null?void 0:Fi.href,s,f_),$host:Fi==null?void 0:Fi.host,$pathname:Fi==null?void 0:Fi.pathname,$raw_user_agent:Li.length>1e3?Li.substring(0,997)+"...":Li,$browser_version:nH(Li,navigator.vendor),$browser_language:NN(),$browser_language_prefix:(n=NN(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:q==null?void 0:q.screen.height,$screen_width:q==null?void 0:q.screen.width,$viewport_height:q==null?void 0:q.innerHeight,$viewport_width:q==null?void 0:q.innerWidth,$lib:"web",$lib_version:Co.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var Rs=Dn("[FeatureFlags]"),vw="$active_feature_flags",iu="$override_feature_flags",PN="$feature_flag_payloads",xf="$override_feature_flag_payloads",MN="$feature_flag_request_id",RN=t=>{var e={};for(var[n,i]of r0(t||{}))i&&(e[n]=i);return e},aH=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map(n=>{var i;return[n,(i=e[n].variant)!==null&&i!==void 0?i:e[n].enabled]})),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(n=>e[n].enabled).filter(n=>{var i;return(i=e[n].metadata)==null?void 0:i.payload}).map(n=>{var i;return[n,(i=e[n].metadata)==null?void 0:i.payload]}))):Rs.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},lH=function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t}({}),TN=new Set(["7c6f7b45","66c1f69c","2727f65a","f3287528","8cc9a311","eb9f671b","c0e1c6f9","057989ec","723f4019","7b102104","563359d3","bad973ea","f6f2c4f4","59454a61","89ad1076","4edd0da1","26c52e72","a970bd2e","89cf4454","16e2b4e7","fba0e7b6","301c8488","bc65d69e","fe66a3c5","37926ca6","52a196df","d32a7577","42c4c9ef","6883bd5a","04809ff7","e59430a8","61be3dd8","7fa5500b","bf027177","8cfdba9b","96f6df5f","569798e9","0ebc61a5","1b5d7b92","17ebb0a4","f97ea965","85cc817b","3044dfc1","0c3fe5c3","b1f95fa3","8a6342e8","72365c68","12d34ad9","733853ec","3beeb69a","0645bb64","32de7f98","5dcbee21","3fe85053","ad960278","9466e5dd","7ca97b2d","2ee2a65c","28fde5f2","85c52f49","0ad823f4","f11b6cc9","aacf8af9","ab3e62b3","3a85ff15","8a67d3c4","f5e91ef1","4b873698","c5dae949","5b643d76","9599c892","34377448","2189e408","3be9ad53","1a14ce7c","2a164ded","8d53ea86","53bdb37d","bfc3f590","8df38ede","bdb81e49","38fde5c0","8d707e6d","73cbc496","f9d8a5ef","d3a9f8c4","a980d8cd","5bcfe086","e4818f68","4f11fb39","a13c6ae3","150c7fbb","98f3d658","f84f7377","1924dd9c","1f6b63b3","24748755","7c0f717c","8a87f11b","49f57f22","3c9e9234","3772f65b","dff631b6","cd609d40","f853c7f7","952db5ee","c5aa8a79","2d21b6fd","79b7164c","4110e26c","a7d3b43f","84e1b8f6","75cc0998","07f78e33","10ca9b1a","ce441b18","01eb8256","c0ac4b67","8e8e5216","db7943dd","fa133a95","498a4508","21bbda67","7dbfed69","be3ec24c","fc80b8e2"]);class cH{constructor(e){this.ge=!1,this._e=!1,this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.we=!0;else{var e=!this.$e&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ke({disableFlags:e})}}get hasLoadedFlags(){return this._e}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(k1),n=this._instance.get_property(iu),i=this._instance.get_property(xf);if(!i&&!n)return e||{};var r=fn({},e||{}),s=[...new Set([...Object.keys(i||{}),...Object.keys(n||{})])];for(var o of s){var a,l,c=r[o],u=n==null?void 0:n[o],d=ge(u)?(a=c==null?void 0:c.enabled)!==null&&a!==void 0&&a:!!u,f=ge(u)?c.variant:typeof u=="string"?u:void 0,p=i==null?void 0:i[o],g=xe({},c,{enabled:d,variant:d?f??(c==null?void 0:c.variant):void 0});d!==(c==null?void 0:c.enabled)&&(g.original_enabled=c==null?void 0:c.enabled),f!==(c==null?void 0:c.variant)&&(g.original_variant=c==null?void 0:c.variant),p&&(g.metadata=xe({},c==null?void 0:c.metadata,{payload:p,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),r[o]=g}return this.ge||(Rs.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:i,finalDetails:r}),this.ge=!0),r}getFlagVariants(){var e=this._instance.get_property(Mu),n=this._instance.get_property(iu);if(!n)return e||{};for(var i=fn({},e),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Rs.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this.ge=!0),i}getFlagPayloads(){var e=this._instance.get_property(PN),n=this._instance.get_property(xf);if(!n)return e||{};for(var i=fn({},e||{}),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(Rs.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:i}),this.ge=!0),i}reloadFeatureFlags(){this.be||this._instance.config.advanced_disable_feature_flags||this.$e||(this.$e=setTimeout(()=>{this.ke()},5))}xe(){clearTimeout(this.$e),this.$e=void 0}ensureFlagsLoaded(){this._e||this.me||this.$e||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.be=e}ke(e){var n;if(this.xe(),!this._instance.I())if(this.me)this.ye=!0;else{var i={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:xe({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(Yf)||{}),group_properties:this._instance.get_property(Jl)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0);var r=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config,s=function(l){var c=function(u){for(var d=2166136261,f=0;f<u.length;f++)d^=u.charCodeAt(f),d+=(d<<1)+(d<<4)+(d<<7)+(d<<8)+(d<<24);return("00000000"+(d>>>0).toString(16)).slice(-8)}(l);return TN==null?void 0:TN.has(c)}(this._instance.config.token)?"/decide?v=4":r?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("api",s+o);r&&(i.timezone=xO()),this.me=!0,this._instance.Ee({method:"POST",url:a,data:i,compression:this._instance.config.disable_compression?void 0:$o.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var c,u,d=!0;if(l.statusCode===200&&(this.ye||(this.$anon_distinct_id=void 0),d=!1),this.me=!1,this.we||(this.we=!0,this._instance.Ie((u=l.json)!==null&&u!==void 0?u:{})),!i.disable_flags||this.ye)if(this.Se=!d,l.json&&(c=l.json.quotaLimited)!=null&&c.includes(lH.FeatureFlags))Rs.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var f;i.disable_flags||this.receivedFeatureFlags((f=l.json)!==null&&f!==void 0?f:{},d),this.ye&&(this.ye=!1,this.ke())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0){var i=this.getFlagVariants()[e],r=""+i,s=this._instance.get_property(MN)||void 0,o=this._instance.get_property(H0)||{};if((n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(r))){var a,l,c,u,d,f,p,g,m;Kt(o[e])?o[e].push(r):o[e]=[r],(a=this._instance.persistence)==null||a.register({[H0]:o});var v=this.getFeatureFlagDetails(e),y={$feature_flag:e,$feature_flag_response:i,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[e])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(c=c.featureFlagPayloads)==null?void 0:c[e])||null,$used_bootstrap_value:!this.Se};ge(v==null||(u=v.metadata)==null?void 0:u.version)||(y.$feature_flag_version=v.metadata.version);var w,x=(d=v==null||(f=v.reason)==null?void 0:f.description)!==null&&d!==void 0?d:v==null||(p=v.reason)==null?void 0:p.code;x&&(y.$feature_flag_reason=x),v!=null&&(g=v.metadata)!=null&&g.id&&(y.$feature_flag_id=v.metadata.id),ge(v==null?void 0:v.original_variant)&&ge(v==null?void 0:v.original_enabled)||(y.$feature_flag_original_response=ge(v.original_variant)?v.original_enabled:v.original_variant),v!=null&&(m=v.metadata)!=null&&m.original_payload&&(y.$feature_flag_original_payload=v==null||(w=v.metadata)==null?void 0:w.original_payload),this._instance.capture("$feature_flag_called",y)}return i}Rs.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var i=this._instance.config.token;this._instance.Ee({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:i},compression:this._instance.config.disable_compression?void 0:$o.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var s,o=(s=r.json)==null?void 0:s.featureFlagPayloads;n((o==null?void 0:o[e])||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);Rs.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this._instance.persistence){this._e=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads(),s=this.getFlagsWithDetails();(function(o,a,l,c,u){l===void 0&&(l={}),c===void 0&&(c={}),u===void 0&&(u={});var d=aH(o),f=d.flags,p=d.featureFlags,g=d.featureFlagPayloads;if(p){var m=o.requestId;if(Kt(p)){Rs.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var v={};if(p)for(var y=0;y<p.length;y++)v[p[y]]=!0;a&&a.register({[vw]:p,[Mu]:v})}else{var w=p,x=g,S=f;o.errorsWhileComputingFlags&&(w=xe({},l,w),x=xe({},c,x),S=xe({},u,S)),a&&a.register(xe({[vw]:Object.keys(RN(w)),[Mu]:w||{},[PN]:x||{},[k1]:S||{}},m?{[MN]:m}:{}))}}})(e,this._instance.persistence,i,r,s),this.Pe(n)}}override(e,n){n===void 0&&(n=!1),Rs.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return Rs.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(iu),this._instance.persistence.unregister(xf),void this.Pe();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,i=e;if(this.ge=!!((n=i.suppressWarning)!==null&&n!==void 0&&n),"flags"in i){if(i.flags===!1)this._instance.persistence.unregister(iu);else if(i.flags)if(Kt(i.flags)){for(var r={},s=0;s<i.flags.length;s++)r[i.flags[s]]=!0;this._instance.persistence.register({[iu]:r})}else this._instance.persistence.register({[iu]:i.flags})}return"payloads"in i&&(i.payloads===!1?this._instance.persistence.unregister(xf):i.payloads&&this._instance.persistence.register({[xf]:i.payloads})),void this.Pe()}this.Pe()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._e){var{flags:n,flagVariants:i}=this.Re();e(n,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var i,r=(this._instance.get_property(s0)||[]).find(l=>l.flagKey===e),s={["$feature_enrollment/"+e]:n},o={$feature_flag:e,$feature_enrollment:n,$set:s};r&&(o.$early_access_feature_name=r.name),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(s,!1);var a=xe({},this.getFlagVariants(),{[e]:n});(i=this._instance.persistence)==null||i.register({[vw]:Object.keys(RN(a)),[Mu]:a}),this.Pe()}getEarlyAccessFeatures(e,n,i){n===void 0&&(n=!1);var r=this._instance.get_property(s0),s=i?"&"+i.map(o=>"stage="+o).join("&"):"";if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:o=>{var a;if(o.json){var l=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[s0]:l}),e(l)}}})}Re(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(i=>n[i]),flagVariants:Object.keys(n).filter(i=>n[i]).reduce((i,r)=>(i[r]=n[r],i),{})}}Pe(e){var{flags:n,flagVariants:i}=this.Re();this.featureFlagEventHandlers.forEach(r=>r(n,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(Yf)||{};this._instance.register({[Yf]:xe({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Yf)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(Jl)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(r=>{i[r]=xe({},i[r],e[r]),delete e[r]}),this._instance.register({[Jl]:xe({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(Jl)||{};this._instance.register({[Jl]:xe({},n,{[e]:{}})})}else this._instance.unregister(Jl)}}var uH=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class yw{constructor(e){this.S=e,this.props={},this.Te=!1,this.Me=(n=>{var i="";return n.token&&(i=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+i+"_posthog"})(e),this.B=this.Ce(e),this.load(),e.debug&&Ee.info("Persistence loaded",e.persistence,xe({},this.props)),this.update_config(e,e),this.save()}Ce(e){uH.indexOf(e.persistence.toLowerCase())===-1&&(Ee.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&Sn.O()?Sn:n==="localstorage+cookie"&&Dm.O()?Dm:n==="sessionstorage"&&Vn.O()?Vn:n==="memory"?UU:n==="cookie"?no:Dm.O()?Dm:no}properties(){var e={};return At(this.props,function(n,i){if(i===Mu&&ln(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/"+r[s]]=n[r[s]];else a=i,l=!1,(Cl(o=xU)?l:$A&&o.indexOf===$A?o.indexOf(a)!=-1:(At(o,function(c){if(l||(l=c===a))return U0}),l))||(e[i]=n);var o,a,l}),e}load(){if(!this.Fe){var e=this.B.L(this.Me);e&&(this.props=fn({},e))}}save(){this.Fe||this.B.j(this.Me,this.props,this.Oe,this.Ae,this.De,this.S.debug)}remove(){this.B.N(this.Me,!1),this.B.N(this.Me,!0)}clear(){this.remove(),this.props={}}register_once(e,n,i){if(ln(e)){ge(n)&&(n="None"),this.Oe=ge(i)?this.Le:i;var r=!1;if(At(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,n){if(ln(e)){this.Oe=ge(n)?this.Le:n;var i=!1;if(At(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Te){var e=mO(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);Pu(Qk(e))||this.register(e),this.Te=!0}}update_search_keyword(){var e;this.register((e=_e==null?void 0:_e.referrer)?vO(e):{})}update_referrer_info(){var e;this.register_once({$referrer:yO(),$referring_domain:_e!=null&&_e.referrer&&((e=_d(_e.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[A1]||this.props[N1]||this.register_once({[W0]:bO(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};At([N1,A1],o=>{var a=this.props[o];a&&At(a,function(l,c){e["$initial_"+g1(c)]=l})});var n,i,r=this.props[W0];if(r){var s=(n=wO(r),i={},At(n,function(o,a){i["$initial_"+g1(a)]=o}),i);fn(e,s)}return e}safe_merge(e){return At(this.props,function(n,i){i in e||(e[i]=n)}),e}update_config(e,n){if(this.Le=this.Oe=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.Ce(e),r=this.props;this.clear(),this.B=i,this.props=r,this.save()}}set_disabled(e){this.Fe=e,this.Fe?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ae&&(this.Ae=e,this.remove(),this.save())}set_secure(e){e!==this.De&&(this.De=e,this.remove(),this.save())}set_event_timer(e,n){var i=this.props[Kf]||{};i[e]=n,this.props[Kf]=i,this.save()}remove_event_timer(e){var n=(this.props[Kf]||{})[e];return ge(n)||(delete this.props[Kf][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}class SO{constructor(){this.je={},this.je={}}on(e,n){return this.je[e]||(this.je[e]=[]),this.je[e].push(n),()=>{this.je[e]=this.je[e].filter(i=>i!==n)}}emit(e,n){for(var i of this.je[e]||[])i(n);for(var r of this.je["*"]||[])r(e,n)}}class nc{constructor(e){this.Ne=new SO,this.ze=(n,i)=>this.Ue(n,i)&&this.qe(n,i)&&this.Be(n,i),this.Ue=(n,i)=>i==null||!i.event||(n==null?void 0:n.event)===(i==null?void 0:i.event),this._instance=e,this.He=new Set,this.We=new Set}init(){var e;if(!ge((e=this._instance)==null?void 0:e.Ge)){var n;(n=this._instance)==null||n.Ge((i,r)=>{this.on(i,r)})}}register(e){var n,i;if(!ge((n=this._instance)==null?void 0:n.Ge)&&(e.forEach(o=>{var a,l;(a=this.We)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var u;(u=this.He)==null||u.add((c==null?void 0:c.event)||"")})}),(i=this._instance)!=null&&i.autocapture)){var r,s=new Set;e.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(r=this._instance)==null||r.autocapture.setElementSelectors(s)}}on(e,n){var i;n!=null&&e.length!=0&&(this.He.has(e)||this.He.has(n==null?void 0:n.event))&&this.We&&((i=this.We)==null?void 0:i.size)>0&&this.We.forEach(r=>{this.Je(n,r)&&this.Ne.emit("actionCaptured",r.name)})}Ve(e){this.onAction("actionCaptured",n=>e(n))}Je(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var i of n.steps)if(this.ze(e,i))return!0;return!1}onAction(e,n){return this.Ne.on(e,n)}qe(e,n){if(n!=null&&n.url){var i,r=e==null||(i=e.properties)==null?void 0:i.$current_url;if(!r||typeof r!="string"||!nc.Ke(r,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static Ke(e,n,i){switch(i){case"regex":return!!q&&Ed(e,n);case"exact":return n===e;case"contains":var r=nc.Ye(n).replace(/_/g,".").replace(/%/g,".*");return Ed(e,r);default:return!1}}static Ye(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Be(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.Xe(e).some(s=>!(n!=null&&n.href&&!nc.Ke(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!nc.Ke(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!nc.Ke(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var i,r=e==null||(i=e.properties)==null?void 0:i.$element_selectors;if(!r||!r.includes(n==null?void 0:n.selector))return!1}return!0}Xe(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}var Mn=Dn("[Surveys]"),U1="seenSurvey_",dH=(t,e)=>{var n="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(n="$survey_"+e+"/"+t.id+"/"+t.current_iteration),n};class fH{constructor(e){this._instance=e,this.Qe=new Map,this.Ze=new Map}register(e){var n;ge((n=this._instance)==null?void 0:n.Ge)||(this.tr(e),this.ir(e))}ir(e){var n=e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.actions)&&((s=i.conditions)==null||(s=s.actions)==null||(s=s.values)==null?void 0:s.length)>0});n.length!==0&&(this.er==null&&(this.er=new nc(this._instance),this.er.init(),this.er.Ve(i=>{this.onAction(i)})),n.forEach(i=>{var r,s,o,a,l;i.conditions&&(r=i.conditions)!=null&&r.actions&&(s=i.conditions)!=null&&(s=s.actions)!=null&&s.values&&((o=i.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.er)==null||a.register(i.conditions.actions.values),(l=i.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var u=this.Ze.get(c.name);u&&u.push(i.id),this.Ze.set(c.name,u||[i.id])}}))}))}tr(e){var n;e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.events)&&((s=i.conditions)==null||(s=s.events)==null||(s=s.values)==null?void 0:s.length)>0}).length!==0&&((n=this._instance)==null||n.Ge((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r;(r=i.conditions)==null||(r=r.events)==null||(r=r.values)==null||r.forEach(s=>{if(s&&s.name){var o=this.Qe.get(s.name);o&&o.push(i.id),this.Qe.set(s.name,o||[i.id])}})}))}onEvent(e,n){var i,r=((i=this._instance)==null||(i=i.persistence)==null?void 0:i.props[jm])||[];if(e==="survey shown"&&n&&r.length>0){var s;Mn.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:n,existingActivatedSurveys:r});var o=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(o){var a=r.indexOf(o);a>=0&&(r.splice(a,1),this.rr(r))}}else this.Qe.has(e)&&(Mn.info("survey event matched, updating activated surveys",{event:e,surveys:this.Qe.get(e)}),this.rr(r.concat(this.Qe.get(e)||[])))}onAction(e){var n,i=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[jm])||[];this.Ze.has(e)&&this.rr(i.concat(this.Ze.get(e)||[]))}rr(e){var n;(n=this._instance)==null||(n=n.persistence)==null||n.register({[jm]:[...new Set(e)]})}getSurveys(){var e,n=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[jm];return n||[]}getEventToSurveys(){return this.Qe}sr(){return this.er}}class hH{constructor(e){this.nr=void 0,this.ar=null,this.lr=!1,this.ur=!1,this.hr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var n=e.surveys;if(wt(n))return Mn.warn("Flags not loaded yet. Not loading surveys.");var i=Kt(n);this.nr=i?n.length>0:n,Mn.info("flags response received, isSurveysEnabled: "+this.nr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var i=localStorage.key(n);(i!=null&&i.startsWith(U1)||i!=null&&i.startsWith("inProgressSurvey_"))&&e.push(i)}e.forEach(r=>localStorage.removeItem(r))}loadIfEnabled(){if(!this.ar)if(this.ur)Mn.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Mn.info("Disabled. Not loading surveys.");else{var e=qe==null?void 0:qe.__PosthogExtensions__;if(e){var n=this.nr;if(!ge(n)){this.ur=!0;try{var i=e.generateSurveys;if(i)return void this.dr(i,n);var r=e.loadExternalDependency;if(!r)return void this.vr("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",s=>{s||!e.generateSurveys?this.vr("Could not load surveys script",s):this.dr(e.generateSurveys,n)})}catch(s){throw this.vr("Error initializing surveys",s),s}finally{this.ur=!1}}}else Mn.error("PostHog Extensions not found.")}}dr(e,n){this.ar=e(this._instance,n),this._surveyEventReceiver=new fH(this._instance),Mn.info("Surveys loaded successfully"),this.cr({isLoaded:!0})}vr(e,n){Mn.error(e,n),this.cr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.hr.push(e),this.ar&&this.cr({isLoaded:!0}),()=>{this.hr=this.hr.filter(n=>n!==e)}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return Mn.info("Disabled. Not loading surveys."),e([]);var i=this._instance.get_property(_1);if(i&&!n)return e(i,{isLoaded:!0});if(this.lr)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.lr=!0,this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:r=>{var s;this.lr=!1;var o=r.statusCode;if(o!==200||!r.json){var a="Surveys API could not be loaded, status: "+o;return Mn.error(a),e([],{isLoaded:!1,error:a})}var l,c=r.json.surveys||[],u=c.filter(d=>function(f){return!(!f.start_date||f.end_date)}(d)&&(function(f){var p;return!((p=f.conditions)==null||(p=p.events)==null||(p=p.values)==null||!p.length)}(d)||function(f){var p;return!((p=f.conditions)==null||(p=p.actions)==null||(p=p.values)==null||!p.length)}(d)));return u.length>0&&((l=this._surveyEventReceiver)==null||l.register(u)),(s=this._instance.persistence)==null||s.register({[_1]:c}),e(c,{isLoaded:!0})}})}catch(r){throw this.lr=!1,r}}cr(e){for(var n of this.hr)try{e.isLoaded?this.getSurveys(n):n([],e)}catch(i){Mn.error("Error in survey callback",i)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!wt(this.ar))return this.ar.getActiveMatchingSurveys(e,n);Mn.warn("init was not called")}pr(e){var n=null;return this.getSurveys(i=>{var r;n=(r=i.find(s=>s.id===e))!==null&&r!==void 0?r:null}),n}gr(e){if(wt(this.ar))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.pr(e):e;return n?this.ar.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(wt(this.ar))return Mn.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.gr(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return wt(this.ar)?(Mn.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(i=>{this.getSurveys(r=>{var s,o=(s=r.find(l=>l.id===e))!==null&&s!==void 0?s:null;if(o){var a=this.gr(o);i({visible:a.eligible,disabledReason:a.reason})}else i({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(e,n){if(wt(this.ar))Mn.warn("init was not called");else{var i=this.pr(e),r=_e==null?void 0:_e.querySelector(n);i?r?this.ar.renderSurvey(i,r):Mn.warn("Survey element not found"):Mn.warn("Survey not found")}}}(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t})({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var bw=function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t}({}),ON=function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t}({}),IN=Dn("[RateLimiter]");let pH=class{constructor(e){var n,i;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=r=>{var s=r.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{IN.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void IN.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:s})}},this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((i=e.config.rate_limiting)==null?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var n,i,r;e===void 0&&(e=!1);var s=new Date().getTime(),o=(n=(i=this.instance.persistence)==null?void 0:i.get_property(E1))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(r=this.instance.persistence)==null||r.set_property(E1,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}};var Vl=Dn("[RemoteConfig]");class mH{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=qe._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}_r(e){var n,i;(n=qe.__PosthogExtensions__)!=null&&n.loadExternalDependency?(i=qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(Vl.error("PostHog Extensions not found. Cannot load remote config."),e())}mr(e){this._instance.Ee({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return Vl.info("Using preloaded remote config",this.remoteConfig),void this.Ie(this.remoteConfig);if(this._instance.I())return void Vl.warn("Remote config is disabled. Falling back to local config.");this._r(e=>{if(!e)return Vl.info("No config found after loading remote JS config. Falling back to JSON."),void this.mr(n=>{this.Ie(n)});this.Ie(e)})}catch(e){Vl.error("Error loading remote config",e)}}Ie(e){e?this._instance.config.__preview_remote_config?(this._instance.Ie(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):Vl.info("__preview_remote_config is disabled. Logging config instead",e):Vl.error("Failed to fetch remote config from PostHog.")}}var V1=3e3;class gH{constructor(e,n){this.br=!0,this.yr=[],this.wr=cr((n==null?void 0:n.flush_interval_ms)||V1,250,5e3,"flush interval",V1),this.Sr=e}enqueue(e){this.yr.push(e),this.$r||this.kr()}unload(){this.Er();var e=this.yr.length>0?this.Ir():{},n=Object.values(e);[...n.filter(i=>i.url.indexOf("/e")===0),...n.filter(i=>i.url.indexOf("/e")!==0)].map(i=>{this.Sr(xe({},i,{transport:"sendBeacon"}))})}enable(){this.br=!1,this.kr()}kr(){var e=this;this.br||(this.$r=setTimeout(()=>{if(this.Er(),this.yr.length>0){var n=this.Ir(),i=function(){var s=n[r],o=new Date().getTime();s.data&&Kt(s.data)&&At(s.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),e.Sr(s)};for(var r in n)i()}},this.wr))}Er(){clearTimeout(this.$r),this.$r=void 0}Ir(){var e={};return At(this.yr,n=>{var i,r=n,s=(r?r.batchKey:null)||r.url;ge(e[s])&&(e[s]=xe({},r,{data:[]})),(i=e[s].data)==null||i.push(r.data)}),this.yr=[],e}}var vH=["retriesPerformedSoFar"];class yH{constructor(e){this.Pr=!1,this.Rr=3e3,this.yr=[],this._instance=e,this.yr=[],this.Tr=!0,!ge(q)&&"onLine"in q.navigator&&(this.Tr=q.navigator.onLine,Qt(q,"online",()=>{this.Tr=!0,this.se()}),Qt(q,"offline",()=>{this.Tr=!1}))}get length(){return this.yr.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,i=b5(e,vH);ai(n)&&n>0&&(i.url=Q0(i.url,{retry_count:n})),this._instance.Ee(xe({},i,{callback:r=>{r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(n??0)<10?this.Mr(xe({retriesPerformedSoFar:n},i)):i.callback==null||i.callback(r)}}))}Mr(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var i=function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),u=(Math.random()-.5)*(c-l);return Math.ceil(c+u)}(n),r=Date.now()+i;this.yr.push({retryAt:r,requestOptions:e});var s="Enqueued failed request for retry in "+i;navigator.onLine||(s+=" (Browser is offline)"),Ee.warn(s),this.Pr||(this.Pr=!0,this.Cr())}Cr(){this.Fr&&clearTimeout(this.Fr),this.Fr=setTimeout(()=>{this.Tr&&this.yr.length>0&&this.se(),this.Cr()},this.Rr)}se(){var e=Date.now(),n=[],i=this.yr.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.yr=n,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.Fr&&(clearTimeout(this.Fr),this.Fr=void 0),this.yr))try{this._instance.Ee(xe({},e,{transport:"sendBeacon"}))}catch(n){Ee.error(n)}this.yr=[]}}class bH{constructor(e){this.Or=()=>{var n,i,r,s;this.Ar||(this.Ar={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+((o==null?void 0:o.clientHeight)||0),u=(o==null?void 0:o.scrollHeight)||0;this.Ar.lastScrollY=Math.ceil(a),this.Ar.maxScrollY=Math.max(a,(n=this.Ar.maxScrollY)!==null&&n!==void 0?n:0),this.Ar.maxScrollHeight=Math.max(l,(i=this.Ar.maxScrollHeight)!==null&&i!==void 0?i:0),this.Ar.lastContentY=c,this.Ar.maxContentY=Math.max(c,(r=this.Ar.maxContentY)!==null&&r!==void 0?r:0),this.Ar.maxContentHeight=Math.max(u,(s=this.Ar.maxContentHeight)!==null&&s!==void 0?s:0)},this._instance=e}getContext(){return this.Ar}resetContext(){var e=this.Ar;return setTimeout(this.Or,0),e}startMeasuringScrollPosition(){Qt(q,"scroll",this.Or,{capture:!0}),Qt(q,"scrollend",this.Or,{capture:!0}),Qt(q,"resize",this.Or)}scrollElement(){if(!this._instance.config.scroll_root_selector)return q==null?void 0:q.document.documentElement;var e=Kt(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var i=q==null?void 0:q.document.querySelector(n);if(i)return i}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return q&&(q.scrollY||q.pageYOffset||q.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return q&&(q.scrollX||q.pageXOffset||q.document.documentElement.scrollLeft)||0}}var wH=t=>bO(t==null?void 0:t.config.mask_personal_data_properties,t==null?void 0:t.config.custom_personal_data_properties);class xH{constructor(e,n,i,r){this.Dr=s=>{var o=this.Lr();if(!o||o.sessionId!==s){var a={sessionId:s,props:this.jr(this._instance)};this.Nr.register({[C1]:a})}},this._instance=e,this.zr=n,this.Nr=i,this.jr=r||wH,this.zr.onSessionId(this.Dr)}Lr(){return this.Nr.props[C1]}getSetOnceProps(){var e,n=(e=this.Lr())==null?void 0:e.props;return n?"r"in n?wO(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return At(Qk(this.getSetOnceProps()),(n,i)=>{i==="$current_url"&&(i="url"),e["$session_entry_"+g1(i)]=n}),e}}var jN=Dn("[SessionId]");class SH{constructor(e,n,i){var r;if(this.Ur=[],!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Nr=e.persistence,this.fi=void 0,this.Ct=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.qr=n||ja,this.Br=i||ja;var s=this.S.persistence_name||this.S.token,o=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*cr(o,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Hr(),this.Wr="ph_"+s+"_window_id",this.Gr="ph_"+s+"_primary_window_exists",this.Jr()){var a=Vn.L(this.Wr),l=Vn.L(this.Gr);a&&!l?this.fi=a:Vn.N(this.Wr),Vn.j(this.Gr,!0)}if((r=this.S.bootstrap)!=null&&r.sessionID)try{var c=(u=>{var d=u.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Vr(this.S.bootstrap.sessionID,new Date().getTime(),c)}catch(u){jN.error("Invalid sessionID in bootstrap",u)}this.Kr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return ge(this.Ur)&&(this.Ur=[]),this.Ur.push(e),this.Ct&&e(this.Ct,this.fi),()=>{this.Ur=this.Ur.filter(n=>n!==e)}}Jr(){return this.S.persistence!=="memory"&&!this.Nr.Fe&&Vn.O()}Yr(e){e!==this.fi&&(this.fi=e,this.Jr()&&Vn.j(this.Wr,e))}Xr(){return this.fi?this.fi:this.Jr()?Vn.L(this.Wr):null}Vr(e,n,i){e===this.Ct&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this.Ct=e,this.Nr.register({[V0]:[n,e,i]}))}Qr(){if(this.Ct&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ct,this._sessionStartTimestamp];var e=this.Nr.props[V0];return Kt(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Vr(null,null,null)}Kr(){Qt(q,"beforeunload",()=>{this.Jr()&&Vn.N(this.Gr)},{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var i=n||new Date().getTime(),[r,s,o]=this.Qr(),a=this.Xr(),l=ai(o)&&o>0&&Math.abs(i-o)>864e5,c=!1,u=!s,d=!e&&Math.abs(i-r)>this.sessionTimeoutMs;u||d||l?(s=this.qr(),a=this.Br(),jN.info("new session ID generated",{sessionId:s,windowId:a,changeReason:{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}}),o=i,c=!0):a||(a=this.Br(),c=!0);var f=r===0||!e||l?i:r,p=o===0?new Date().getTime():o;return this.Yr(a),this.Vr(s,f,p),e||this.Hr(),c&&this.Ur.forEach(g=>g(s,a,c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0)),{sessionId:s,windowId:a,sessionStartTimestamp:p,changeReason:c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:r}}Hr(){clearTimeout(this.Zr),this.Zr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var kH=["$set_once","$set"],da=Dn("[SiteApps]");class _H{constructor(e){this._instance=e,this.ts=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}es(e,n){if(n){var i=this.globalsForEvent(n);this.ts.push(i),this.ts.length>1e3&&(this.ts=this.ts.slice(10))}}get siteAppLoaders(){var e;return(e=qe._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ge(this.es.bind(this));this.rs=()=>{e(),this.ts=[],this.rs=void 0}}}globalsForEvent(e){var n,i,r,s,o,a,l;if(!e)throw new Error("Event payload is required");var c={},u=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[f,p]of Object.entries(d))c[f]={id:u[f],type:f,properties:p};var{$set_once:g,$set:m}=e;return{event:xe({},b5(e,kH),{properties:xe({},e.properties,m?{$set:xe({},(n=(i=e.properties)==null?void 0:i.$set)!==null&&n!==void 0?n:{},m)}:{},g?{$set_once:xe({},(r=(s=e.properties)==null?void 0:s.$set_once)!==null&&r!==void 0?r:{},g)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var n=this.apps[e.id],i=()=>{var a;!n.errored&&this.ts.length&&(da.info("Processing "+this.ts.length+" events for site app with id "+e.id),this.ts.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.rs)==null||a.call(this))},r=!1,s=a=>{n.errored=!a,n.loaded=!0,da.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),r&&i()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{s(a)}});o&&(n.processEvent=o),r=!0}catch(a){da.error("Error while initializing PostHog app with config id "+e.id,a),s(!1)}if(r&&n.loaded)try{i()}catch(a){da.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}ss(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var i of e)this.setupSiteApp(i)}ns(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var i of Object.values(this.apps))try{i.processEvent==null||i.processEvent(n)}catch(r){da.error("Error while processing event "+e.event+" for site app "+i.id,r)}}}onRemoteConfig(e){var n,i,r,s=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.ss(),void this._instance.on("eventCaptured",c=>this.ns(c))):void da.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((i=this.rs)==null||i.call(this),(r=e.siteApps)!=null&&r.length)if(this.isEnabled){var o=function(c){var u;qe["__$$ph_site_app_"+c]=s._instance,(u=qe.__PosthogExtensions__)==null||u.loadSiteApp==null||u.loadSiteApp(s._instance,l,d=>{if(d)return da.error("Error while initializing PostHog app with config id "+c,d)})};for(var{id:a,url:l}of e.siteApps)o(a)}else da.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var CH=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],LN=function(t,e){if(!t)return!1;var n=t.toLowerCase();return CH.concat(e||[]).some(i=>{var r=i.toLowerCase();return n.indexOf(r)!==-1})},kO=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&LN(n,e))return!0;try{var i=t==null?void 0:t.userAgentData;if(i!=null&&i.brands&&i.brands.some(r=>LN(r==null?void 0:r.brand,e)))return!0}catch{}return!!t.webdriver},Qf=function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t}({}),DN="i.posthog.com";class EH{constructor(e){this.os={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+DN,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.os[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Qf.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Qf.EU:this.os[this.apiHost]=Qf.CUSTOM),this.os[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(this.region===Qf.CUSTOM)return this.apiHost+n;var i=DN+n;switch(e){case"assets":return"https://"+this.region+"-assets."+i;case"api":return"https://"+this.region+"."+i}}}var AH={icontains:(t,e)=>!!q&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!q&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!q&&Ed(e.href,t),not_regex:(t,e)=>!!q&&!Ed(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};let NH=class pi{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(i){i===void 0&&(i=!1),n.getWebExperiments(r=>{pi.ls("retrieved web experiments from the server"),n.us=new Map,r.forEach(s=>{if(s.feature_flag_key){var o;n.us&&(pi.ls("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n.us)==null||o.set(s.feature_flag_key,s));var a=n._instance.getFeatureFlag(s.feature_flag_key);cn(a)&&s.variants[a]&&n.hs(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var c=s.variants[l];pi.ds(c)&&n.hs(s.name,l,c.transforms)}})},i)},this._instance=e,this._instance.onFeatureFlags(i=>{this.onFeatureFlags(i)})}onFeatureFlags(e){if(this._is_bot())pi.ls("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(wt(this.us))return this.us=new Map,this.loadIfEnabled(),void this.previewWebExperiment();pi.ls("applying feature flags",e),e.forEach(n=>{var i;if(this.us&&(i=this.us)!=null&&i.has(n)){var r,s=this._instance.getFeatureFlag(n),o=(r=this.us)==null?void 0:r.get(n);s&&o!=null&&o.variants[s]&&this.hs(o.name,s,o.variants[s].transforms)}})}}previewWebExperiment(){var e=pi.getWindowLocation();if(e!=null&&e.search){var n=q0(e==null?void 0:e.search,"__experiment_id"),i=q0(e==null?void 0:e.search,"__experiment_variant");n&&i&&(pi.ls("previewing web experiments "+n+" && "+i),this.getWebExperiments(r=>{this.vs(parseInt(n),i,r)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,i){if(this._instance.config.disable_web_experiments&&!i)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}vs(e,n,i){var r=i.filter(s=>s.id===e);r&&r.length>0&&(pi.ls("Previewing web experiment ["+r[0].name+"] with variant ["+n+"]"),this.hs(r[0].name,n,r[0].variants[n].transforms))}static ds(e){return!wt(e.conditions)&&pi.cs(e)&&pi.fs(e)}static cs(e){var n;if(wt(e.conditions)||wt((n=e.conditions)==null?void 0:n.url))return!0;var i,r,s,o=pi.getWindowLocation();return!!o&&((i=e.conditions)==null||!i.url||AH[(r=(s=e.conditions)==null?void 0:s.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,o))}static getWindowLocation(){return q==null?void 0:q.location}static fs(e){var n;if(wt(e.conditions)||wt((n=e.conditions)==null?void 0:n.utm))return!0;var i=mO();if(i.utm_source){var r,s,o,a,l,c,u,d,f=(r=e.conditions)==null||(r=r.utm)==null||!r.utm_campaign||((s=e.conditions)==null||(s=s.utm)==null?void 0:s.utm_campaign)==i.utm_campaign,p=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==i.utm_source,g=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=e.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==i.utm_medium,m=(u=e.conditions)==null||(u=u.utm)==null||!u.utm_term||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_term)==i.utm_term;return f&&g&&m&&p}return!1}static ls(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];Ee.info("[WebExperiments] "+e,i)}hs(e,n,i){this._is_bot()?pi.ls("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?i.forEach(r=>{if(r.selector){var s;pi.ls("applying transform of variant "+n+" for experiment "+e+" ",r);var o=(s=document)==null?void 0:s.querySelectorAll(r.selector);o==null||o.forEach(a=>{var l=a;r.html&&(l.innerHTML=r.html),r.css&&l.setAttribute("style",r.css)})}}):pi.ls("Control variants leave the page unmodified.")}_is_bot(){return lr&&this._instance?kO(lr,this._instance.config.custom_blocked_useragents):void 0}};var PH=Dn("[PostHog ExternalIntegrations]"),MH={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};let RH=class{constructor(e){this._instance=e}J(e,n){var i;(i=qe.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,e,r=>{if(r)return PH.error("failed to load script",r);n()})}startIfEnabledOrStop(){var e=this,n=function(o){var a,l,c;!r||(a=qe.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.J(MH[o],()=>{var u;(u=qe.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.start(e._instance)}),!r&&(l=qe.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((c=qe.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.stop())};for(var[i,r]of Object.entries((s=this._instance.config.integrations)!==null&&s!==void 0?s:{})){var s;n(i)}}};var wh={},H1=()=>{},yu="posthog",_O=!VV&&(Li==null?void 0:Li.indexOf("MSIE"))===-1&&(Li==null?void 0:Li.indexOf("Mozilla"))===-1,$N=t=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:wU(_e==null?void 0:_e.location),persistence:"localStorage+cookie",persistence_name:"",loaded:H1,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:t!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:t??"unset",debug:Fi&&cn(Fi==null?void 0:Fi.search)&&Fi.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(q==null||(e=q.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var i="Bad HTTP status: "+n.statusCode+" "+n.text;Ee.error(i)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:V1},error_tracking:{},_onCapture:H1}},FN=t=>{var e={};ge(t.process_person)||(e.person_profiles=t.process_person),ge(t.xhr_headers)||(e.request_headers=t.xhr_headers),ge(t.cookie_name)||(e.persistence_name=t.cookie_name),ge(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),ge(t.store_google)||(e.save_campaign_params=t.store_google),ge(t.verbose)||(e.debug=t.verbose);var n=fn({},e,t);return Kt(t.property_blacklist)&&(ge(t.property_denylist)?n.property_denylist=t.property_blacklist:Kt(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:Ee.error("Invalid value for property_denylist config: "+t.property_denylist)),n};let TH=class{constructor(){this.__forceAllowLocalhost=!1}get ps(){return this.__forceAllowLocalhost}set ps(e){Ee.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}},CO=class EO{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new TH,this.gs=!1,this.version=Co.LIB_VERSION,this._s=new SO,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=$N(),this.SentryIntegration=OV,this.sentryIntegration=e=>function(n,i){var r=Z5(n,i);return{name:J5,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.bs=!1,this.ys=null,this.ws=null,this.Ss=null,this.featureFlags=new cH(this),this.toolbar=new jV(this),this.scrollManager=new bH(this),this.pageViewManager=new BV(this),this.surveys=new hH(this),this.experiments=new NH(this),this.exceptions=new GV(this),this.rateLimiter=new pH(this),this.requestRouter=new EH(this),this.consent=new VU(this),this.externalIntegrations=new RH(this),this.people={set:(e,n,i)=>{var r=cn(e)?{[e]:n}:e;this.setPersonProperties(r),i==null||i({})},set_once:(e,n,i)=>{var r=cn(e)?{[e]:n}:e;this.setPersonProperties(void 0,r),i==null||i({})}},this.on("eventCaptured",e=>Ee.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,n,i){if(i&&i!==yu){var r,s=(r=wh[i])!==null&&r!==void 0?r:new EO;return s._init(e,n,i),wh[i]=s,wh[yu][i]=s,s}return this._init(e,n,i)}_init(e,n,i){var r,s;if(n===void 0&&(n={}),ge(e)||v1(e))return Ee.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Ee.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.$s=n,this.ks=[],n.person_profiles&&(this.ws=n.person_profiles),this.set_config(fn({},$N(n.defaults),FN(n),{name:i,token:e})),this.config.on_xhr_error&&Ee.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:$o.GZipJS,this.persistence=new yw(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new yw(xe({},this.config,{persistence:"sessionStorage"}));var o=xe({},this.persistence.props),a=xe({},this.sessionPersistence.props);if(this.register({$initialization_time:new Date().toISOString()}),this.xs=new gH(y=>this.Es(y),this.config.request_queue_config),this.Is=new yH(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new SH(this),this.sessionPropsManager=new xH(this,this.sessionManager,this.persistence)),new DV(this).startIfEnabledOrStop(),this.siteApps=new _H(this),(r=this.siteApps)==null||r.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new RV(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new IU(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new zV(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new $V(this),this.exceptionObserver=new GU(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new L5(this,WU),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new oV(this),this.historyAutocapture.startIfEnabled(),Co.DEBUG=Co.DEBUG||this.config.debug,Co.DEBUG&&Ee.info("Starting in debug mode",{this:this,config:n,thisC:xe({},this.config),p:o,s:a}),this.Ps(),((s=n.bootstrap)==null?void 0:s.distinctID)!==void 0){var l,c,u=this.config.get_device_id(ja()),d=(l=n.bootstrap)!=null&&l.isIdentifiedID?u:n.bootstrap.distinctID;this.persistence.set_property(wo,(c=n.bootstrap)!=null&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:d})}if(this.Rs()){var f,p,g=Object.keys(((f=n.bootstrap)==null?void 0:f.featureFlags)||{}).filter(y=>{var w;return!((w=n.bootstrap)==null||(w=w.featureFlags)==null||!w[y])}).reduce((y,w)=>{var x;return y[w]=((x=n.bootstrap)==null||(x=x.featureFlags)==null?void 0:x[w])||!1,y},{}),m=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(y=>g[y]).reduce((y,w)=>{var x,S;return(x=n.bootstrap)!=null&&(x=x.featureFlagPayloads)!=null&&x[w]&&(y[w]=(S=n.bootstrap)==null||(S=S.featureFlagPayloads)==null?void 0:S[w]),y},{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:m})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Lm,$device_id:null},"");else if(!this.get_distinct_id()){var v=this.config.get_device_id(ja());this.register_once({distinct_id:v,$device_id:v},""),this.persistence.set_property(wo,"anonymous")}return Qt(q,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?TV(this,()=>this.Ts()):this.Ts(),Fr(this.config._onCapture)&&this.config._onCapture!==H1&&(Ee.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",y=>this.config._onCapture(y.event,y))),this.config.ip&&Ee.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Ie(e){var n,i,r,s,o,a,l,c;if(!_e||!_e.body)return Ee.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Ie(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=ot(e.supportedCompression,$o.GZipJS)?$o.GZipJS:ot(e.supportedCompression,$o.Base64)?$o.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.ws?this.ws:"identified_only"}),(i=this.siteApps)==null||i.onRemoteConfig(e),(r=this.sessionRecording)==null||r.onRemoteConfig(e),(s=this.autocapture)==null||s.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(e)}Ts(){try{this.config.loaded(this)}catch(e){Ee.critical("`loaded` function failed",e)}this.Ms(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Cs()},1),new mH(this).load(),this.featureFlags.flags()}Ms(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this.xs)==null||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||Ka(this.__request_queue,e=>this.Es(e)),this.__request_queue=[],this.Ms()}_handle_unload(){var e,n;this.config.request_batching?(this.Fs()&&this.capture("$pageleave"),(e=this.xs)==null||e.unload(),(n=this.Is)==null||n.unload()):this.Fs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Ee(e){this.__loaded&&(_O?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=Q0(e.url,{ip:this.config.ip?1:0}),e.headers=xe({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var i,r,s,o=xe({},n);o.timeout=o.timeout||6e4,o.url=Q0(o.url,{_:new Date().getTime().toString(),ver:Co.LIB_VERSION,compression:o.compression});var a=(i=o.transport)!==null&&i!==void 0?i:"fetch",l=(r=(s=w5(bh,c=>c.transport===a))==null?void 0:s.method)!==null&&r!==void 0?r:bh[0].method;if(!l)throw new Error("No available transport method");l(o)})(xe({},e,{callback:n=>{var i,r;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((i=(r=this.config).on_request_error)==null||i.call(r,n)),e.callback==null||e.callback(n)}}))))}Es(e){this.Is?this.Is.retriableRequest(e):this.Ee(e)}_execute_array(e){var n,i=[],r=[],s=[];Ka(e,a=>{a&&(n=a[0],Kt(n)?s.push(a):Fr(a)?a.call(this):Kt(a)&&n==="alias"?i.push(a):Kt(a)&&n.indexOf("capture")!==-1&&Fr(this[n])?s.push(a):r.push(a))});var o=function(a,l){Ka(a,function(c){if(Kt(c[0])){var u=l;At(c,function(d){u=u[d[0]].apply(u,d.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(i,this),o(r,this),o(s,this)}Rs(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.xs){if(!this.consent.isOptedOut())if(!ge(e)&&cn(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=i!=null&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){n!=null&&n.$current_url&&!cn(n==null?void 0:n.$current_url)&&(Ee.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(i==null?void 0:i.timestamp)||o,l=ja(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,n||{},a,l)};s&&(c.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),i!=null&&i.$set&&(c.$set=i==null?void 0:i.$set);var u,d,f=this.Os(i==null?void 0:i.$set_once);if(f&&(c.$set_once=f),(c=yU(c,i!=null&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,ge(i==null?void 0:i.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=o),e===bw.DISMISSED||e===bw.SENT){var p=n==null?void 0:n[ON.SURVEY_ID],g=n==null?void 0:n[ON.SURVEY_ITERATION];localStorage.setItem((d=""+U1+(u={id:p,current_iteration:g}).id,u.current_iteration&&u.current_iteration>0&&(d=""+U1+u.id+"_"+u.current_iteration),d),"true"),c.$set=xe({},c.$set,{[dH({id:p,current_iteration:g},e===bw.SENT?"responded":"dismissed")]:!0})}var m=xe({},c.properties.$set,c.$set);if(Pu(m)||this.setPersonPropertiesForFlags(m),!wt(this.config.before_send)){var v=this.As(c);if(!v)return;c=v}this._s.emit("eventCaptured",c);var y={method:"POST",url:(r=i==null?void 0:i._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:i==null?void 0:i._batchKey};return!this.config.request_batching||i&&(i==null||!i._batchKey)||i!=null&&i.send_instantly?this.Es(y):this.xs.enqueue(y),c}Ee.critical("This capture call is ignored due to client rate limiting.")}}else Ee.error("No event name provided to posthog.capture")}else Ee.uninitializedWarning("posthog.capture")}Ge(e){return this.on("eventCaptured",n=>e(n.event,n))}calculateEventProperties(e,n,i,r,s){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;var o=s?void 0:this.persistence.remove_event_timer(e),a=xe({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(a.$cookieless_mode=!0),e==="$snapshot"){var l=xe({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!cn(a.distinct_id)&&!ai(a.distinct_id)||v1(a.distinct_id))&&Ee.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,u=oH(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId(s,i.getTime());a.$session_id=d,a.$window_id=f}this.sessionPropsManager&&fn(a,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&fn(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(p=this.Is)==null?void 0:p.length}catch(y){a.$sdk_debug_error_capturing_properties=String(y)}if(this.requestRouter.region===Qf.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=e!=="$pageview"||s?e!=="$pageleave"||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(i):this.pageViewManager.doPageView(i,r),a=fn(a,c),e==="$pageview"&&_e&&(a.title=_e.title),!ge(o)){var g=i.getTime()-o;a.$duration=parseFloat((g/1e3).toFixed(3))}Li&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=fn({},u,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),Kt(this.config.property_denylist)?At(this.config.property_denylist,function(y){delete a[y]}):Ee.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var m=this.config.sanitize_properties;m&&(Ee.error("sanitize_properties is deprecated. Use before_send instead"),a=m(a,e));var v=this.Ds();return a.$process_person_profile=v,v&&!s&&this.Ls("_calculate_event_properties"),a}Os(e){var n;if(!this.persistence||!this.Ds()||this.gs)return e;var i=this.persistence.get_initial_props(),r=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),s=fn({},i,r||{},e||{}),o=this.config.sanitize_properties;return o&&(Ee.error("sanitize_properties is deprecated. Use before_send instead"),s=o(s,"$set_once")),this.gs=!0,Pu(s)?void 0:s}register(e,n){var i;(i=this.persistence)==null||i.register(e,n)}register_once(e,n,i){var r;(r=this.persistence)==null||r.register_once(e,n,i)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}js(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e,n,i){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,i)}on(e,n){return this._s.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,i;return(n=(i=this.sessionManager)==null?void 0:i.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,i){if(!this.__loaded||!this.persistence)return Ee.uninitializedWarning("posthog.identify");if(ai(e)&&(e=e.toString(),Ee.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Ee.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==Lm){if(this.Ls("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(Gf)&&(this.unregister(Gf),this.register({distinct_id:e}));var o=(this.persistence.get_property(wo)||"anonymous")==="anonymous";e!==r&&o?(this.persistence.set_property(wo,"identified"),this.setPersonPropertiesForFlags(xe({},i||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.Ss=_N(e,n,i),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(H0))}}else Ee.critical('The string "'+Lm+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Ee.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.Ls("posthog.setPersonProperties")){var i=_N(this.get_distinct_id(),e,n);this.Ss!==i?(this.setPersonPropertiesForFlags(xe({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.Ss=i):Ee.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,i){if(e&&n){if(this.Ls("posthog.group")){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:xe({},r,{[e]:n})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===n||i||this.reloadFeatureFlags()}}else Ee.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.Ls("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,i,r,s;if(Ee.info("reset"),!this.__loaded)return Ee.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(i=this.sessionPersistence)==null||i.clear(),this.surveys.reset(),(r=this.persistence)==null||r.set_property(wo,"anonymous"),(s=this.sessionManager)==null||s.resetSessionId(),this.Ss=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Lm,$device_id:null},"");else{var a=this.config.get_device_id(ja());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&i){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return r;r+="?t="+Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0)}return r}alias(e,n){return e===this.get_property(x5)?(Ee.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ls("posthog.alias")?(ge(n)&&(n=this.get_distinct_id()),e!==n?(this.js(Gf,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(Ee.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,i,r,s,o,a=xe({},this.config);ln(e)&&(fn(this.config,FN(e)),(n=this.persistence)==null||n.update_config(this.config,a),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new yw(xe({},this.config,{persistence:"sessionStorage"})),Sn.O()&&Sn.D("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(Co.DEBUG=!0,Ee.info("set_config",{config:e,oldConfig:a,newConfig:xe({},this.config)})),(i=this.sessionRecording)==null||i.startIfEnabledOrStop(),(r=this.autocapture)==null||r.startIfEnabled(),(s=this.heatmaps)==null||s.startIfEnabled(),this.surveys.loadIfEnabled(),this.Ps(),(o=this.externalIntegrations)==null||o.startIfEnabledOrStop())}startSessionRecording(e){var n=e===!0,i={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(i).some(Boolean)){var r,s,o,a,l;(r=this.sessionManager)==null||r.checkAndGetSessionAndWindowId(),i.sampling&&((s=this.sessionRecording)==null||s.overrideSampling()),i.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),i.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),i.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var i=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(xe({},sV((r=>r instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:i}),n))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:yu;return n!==yu&&(n=yu+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(wo))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(wo))==="identified"}Ds(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Pu(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Gf])&&((n=this.persistence)==null||(n=n.props)==null||!n[G0]))}Fs(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Ds()||this.Ls("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ls(e){return this.config.person_profiles==="never"?(Ee.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.js(G0,!0),!0)}Ps(){var e,n,i,r,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)==null?void 0:e.Fe)!==a&&((i=this.persistence)==null||i.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.Fe)!==a&&((r=this.sessionPersistence)==null||r.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this.Ps(),(ge(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Cs()}opt_out_capturing(){this.consent.optInOut(!1),this.Ps()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Ps()}_is_bot(){return lr?kO(lr,this.config.custom_blocked_useragents):void 0}Cs(){_e&&(_e.visibilityState==="visible"?this.bs||(this.bs=!0,this.capture("$pageview",{title:_e.title},{send_instantly:!0}),this.ys&&(_e.removeEventListener("visibilitychange",this.ys),this.ys=null)):this.ys||(this.ys=this.Cs.bind(this),Qt(_e,"visibilitychange",this.ys)))}debug(e){e===!1?(q==null||q.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(q==null||q.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var e,n,i,r,s,o,a,l=this.$s||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(Ee.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(i="advanced_disable_decide",r=!1,s=Ee,o=(n="advanced_disable_flags")in(e=l)&&!ge(e[n]),a=i in e&&!ge(e[i]),o?e[n]:a?(s&&s.warn("Config field '"+i+"' is deprecated. Please use '"+n+"' instead. The old field will be removed in a future major version."),e[i]):r)}As(e){if(wt(this.config.before_send))return e;var n=Kt(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of n){if(i=r(i),wt(i)){var s="Event '"+e.event+"' was rejected in beforeSend function";return mU(e.event)?Ee.warn(s+". This can cause unexpected behavior."):Ee.info(s),null}i.properties&&!Pu(i.properties)||Ee.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return i}getPageViewId(){var e;return(e=this.pageViewManager.ce)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,i){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(i)})}};(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=vU(t.prototype[e[n]])})(CO,["identify"]);var zN,Aa=(zN=wh[yu]=new CO,function(){function t(){t.done||(t.done=!0,_O=!1,At(wh,function(e){e._dom_loaded()}))}_e!=null&&_e.addEventListener?_e.readyState==="complete"?t():Qt(_e,"DOMContentLoaded",t,{capture:!1}):q&&Ee.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),zN),AO=b.createContext({client:Aa});function NO(t,e,n){if(n===void 0&&(n=new WeakMap),t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(n.has(t)&&n.get(t)===e)return!0;n.set(t,e);var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var s=0,o=i;s<o.length;s++){var a=o[s];if(!r.includes(a)||!NO(t[a],e[a],n))return!1}return!0}function OH(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=b.useRef(null),o=b.useMemo(function(){return n?(i&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),r&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(i||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),Aa)},[n,i,JSON.stringify(r)]);return b.useEffect(function(){if(!n){var a=s.current;a?(i!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),r&&!NO(r,a.options)&&Aa.set_config(r),s.current={apiKey:i,options:r??{}}):(Aa.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),Aa.init(i,r),s.current={apiKey:i,options:r??{}})}},[n,i,JSON.stringify(r)]),Ft.createElement(AO.Provider,{value:{client:o}},e)}var W1=function(t,e){return W1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},W1(t,e)};function IH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");W1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ww=function(t){return typeof t=="function"},jH={componentStack:null,error:null},LH={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(t){IH(e,t);function e(n){var i=t.call(this,n)||this;return i.state=jH,i}return e.prototype.componentDidCatch=function(n,i){var r=i.componentStack,s=this.props.additionalProperties;this.setState({error:n,componentStack:r});var o;ww(s)?o=s(n):typeof s=="object"&&(o=s);var a=this.context.client;a.captureException(n,o)},e.prototype.render=function(){var n=this.props,i=n.children,r=n.fallback,s=this.state;if(s.componentStack==null)return ww(i)?i():i;var o=ww(r)?Ft.createElement(r,{error:s.error,componentStack:s.componentStack}):r;return Ft.isValidElement(o)?o:(console.warn(LH.INVALID_FALLBACK),Ft.createElement(Ft.Fragment,null))},e.contextType=AO,e})(Ft.Component);var PO={exports:{}},Sr={},MO={exports:{}},RO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,z){var ie=U.length;U.push(z);e:for(;0<ie;){var ye=ie-1>>>1,J=U[ye];if(0<r(J,z))U[ye]=z,U[ie]=J,ie=ye;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var z=U[0],ie=U.pop();if(ie!==z){U[0]=ie;e:for(var ye=0,J=U.length,le=J>>>1;ye<le;){var F=2*(ye+1)-1,$=U[F],V=F+1,k=U[V];if(0>r($,ie))V<J&&0>r(k,$)?(U[ye]=k,U[V]=ie,ye=V):(U[ye]=$,U[F]=ie,ye=F);else if(V<J&&0>r(k,ie))U[ye]=k,U[V]=ie,ye=V;else break e}}return z}function r(U,z){var ie=U.sortIndex-z.sortIndex;return ie!==0?ie:U.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(U){for(var z=n(c);z!==null;){if(z.callback===null)i(c);else if(z.startTime<=U)i(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function S(U){if(m=!1,x(U),!g)if(n(l)!==null)g=!0,X(_);else{var z=n(c);z!==null&&te(S,z.startTime-U)}}function _(U,z){g=!1,m&&(m=!1,y(N),N=-1),p=!0;var ie=f;try{for(x(z),d=n(l);d!==null&&(!(d.expirationTime>z)||U&&!I());){var ye=d.callback;if(typeof ye=="function"){d.callback=null,f=d.priorityLevel;var J=ye(d.expirationTime<=z);z=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(l)&&i(l),x(z)}else i(l);d=n(l)}if(d!==null)var le=!0;else{var F=n(c);F!==null&&te(S,F.startTime-z),le=!1}return le}finally{d=null,f=ie,p=!1}}var E=!1,C=null,N=-1,M=5,j=-1;function I(){return!(t.unstable_now()-j<M)}function O(){if(C!==null){var U=t.unstable_now();j=U;var z=!0;try{z=C(!0,U)}finally{z?H():(E=!1,C=null)}}else E=!1}var H;if(typeof w=="function")H=function(){w(O)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,K=D.port2;D.port1.onmessage=O,H=function(){K.postMessage(null)}}else H=function(){v(O,0)};function X(U){C=U,E||(E=!0,H())}function te(U,z){N=v(function(){U(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,X(_))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var ie=f;f=z;try{return U()}finally{f=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ie=f;f=U;try{return z()}finally{f=ie}},t.unstable_scheduleCallback=function(U,z,ie){var ye=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ye+ie:ye):ie=ye,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ie+J,U={id:u++,callback:z,priorityLevel:U,startTime:ie,expirationTime:J,sortIndex:-1},ie>ye?(U.sortIndex=ie,e(c,U),n(l)===null&&U===n(c)&&(m?(y(N),N=-1):m=!0,te(S,ie-ye))):(U.sortIndex=J,e(l,U),g||p||(g=!0,X(_))),U},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(U){var z=f;return function(){var ie=f;f=z;try{return U.apply(this,arguments)}finally{f=ie}}}})(RO);MO.exports=RO;var DH=MO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $H=b,yr=DH;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TO=new Set,Xh={};function Xc(t,e){Nd(t,e),Nd(t+"Capture",e)}function Nd(t,e){for(Xh[t]=e,t=0;t<e.length;t++)TO.add(e[t])}var Go=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),G1=Object.prototype.hasOwnProperty,FH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,BN={},UN={};function zH(t){return G1.call(UN,t)?!0:G1.call(BN,t)?!1:FH.test(t)?UN[t]=!0:(BN[t]=!0,!1)}function BH(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function UH(t,e,n,i){if(e===null||typeof e>"u"||BH(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _i(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zn[t]=new _i(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zn[e]=new _i(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zn[t]=new _i(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zn[t]=new _i(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zn[t]=new _i(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zn[t]=new _i(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zn[t]=new _i(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zn[t]=new _i(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zn[t]=new _i(t,5,!1,t.toLowerCase(),null,!1,!1)});var h_=/[\-:]([a-z])/g;function p_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(h_,p_);Zn[e]=new _i(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(h_,p_);Zn[e]=new _i(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(h_,p_);Zn[e]=new _i(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zn[t]=new _i(t,1,!1,t.toLowerCase(),null,!1,!1)});Zn.xlinkHref=new _i("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zn[t]=new _i(t,1,!1,t.toLowerCase(),null,!0,!0)});function m_(t,e,n,i){var r=Zn.hasOwnProperty(e)?Zn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(UH(e,n,r,i)&&(n=null),i||r===null?zH(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var na=$H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gm=Symbol.for("react.element"),Tu=Symbol.for("react.portal"),Ou=Symbol.for("react.fragment"),g_=Symbol.for("react.strict_mode"),K1=Symbol.for("react.profiler"),OO=Symbol.for("react.provider"),IO=Symbol.for("react.context"),v_=Symbol.for("react.forward_ref"),q1=Symbol.for("react.suspense"),Y1=Symbol.for("react.suspense_list"),y_=Symbol.for("react.memo"),ba=Symbol.for("react.lazy"),jO=Symbol.for("react.offscreen"),VN=Symbol.iterator;function Sf(t){return t===null||typeof t!="object"?null:(t=VN&&t[VN]||t["@@iterator"],typeof t=="function"?t:null)}var sn=Object.assign,xw;function eh(t){if(xw===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xw=e&&e[1]||""}return`
`+xw+t}var Sw=!1;function kw(t,e){if(!t||Sw)return"";Sw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Sw=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?eh(t):""}function VH(t){switch(t.tag){case 5:return eh(t.type);case 16:return eh("Lazy");case 13:return eh("Suspense");case 19:return eh("SuspenseList");case 0:case 2:case 15:return t=kw(t.type,!1),t;case 11:return t=kw(t.type.render,!1),t;case 1:return t=kw(t.type,!0),t;default:return""}}function X1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ou:return"Fragment";case Tu:return"Portal";case K1:return"Profiler";case g_:return"StrictMode";case q1:return"Suspense";case Y1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case IO:return(t.displayName||"Context")+".Consumer";case OO:return(t._context.displayName||"Context")+".Provider";case v_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case y_:return e=t.displayName||null,e!==null?e:X1(t.type)||"Memo";case ba:e=t._payload,t=t._init;try{return X1(t(e))}catch{}}return null}function HH(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X1(e);case 8:return e===g_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ll(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function LO(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function WH(t){var e=LO(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Km(t){t._valueTracker||(t._valueTracker=WH(t))}function DO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=LO(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function tv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function J1(t,e){var n=e.checked;return sn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function HN(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ll(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $O(t,e){e=e.checked,e!=null&&m_(t,"checked",e,!1)}function Z1(t,e){$O(t,e);var n=ll(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Q1(t,e.type,n):e.hasOwnProperty("defaultValue")&&Q1(t,e.type,ll(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function WN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Q1(t,e,n){(e!=="number"||tv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var th=Array.isArray;function Qu(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ll(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function eS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return sn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function GN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(th(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ll(n)}}function FO(t,e){var n=ll(e.value),i=ll(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function KN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function zO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?zO(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qm,BO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qm=qm||document.createElement("div"),qm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GH=["Webkit","ms","Moz","O"];Object.keys(xh).forEach(function(t){GH.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xh[e]=xh[t]})});function UO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xh.hasOwnProperty(t)&&xh[t]?(""+e).trim():e+"px"}function VO(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=UO(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var KH=sn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nS(t,e){if(e){if(KH[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function iS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rS=null;function b_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sS=null,ed=null,td=null;function qN(t){if(t=rm(t)){if(typeof sS!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=zy(e),sS(t.stateNode,t.type,e))}}function HO(t){ed?td?td.push(t):td=[t]:ed=t}function WO(){if(ed){var t=ed,e=td;if(td=ed=null,qN(t),e)for(t=0;t<e.length;t++)qN(e[t])}}function GO(t,e){return t(e)}function KO(){}var _w=!1;function qO(t,e,n){if(_w)return t(e,n);_w=!0;try{return GO(t,e,n)}finally{_w=!1,(ed!==null||td!==null)&&(KO(),WO())}}function Zh(t,e){var n=t.stateNode;if(n===null)return null;var i=zy(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var oS=!1;if(Go)try{var kf={};Object.defineProperty(kf,"passive",{get:function(){oS=!0}}),window.addEventListener("test",kf,kf),window.removeEventListener("test",kf,kf)}catch{oS=!1}function qH(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Sh=!1,nv=null,iv=!1,aS=null,YH={onError:function(t){Sh=!0,nv=t}};function XH(t,e,n,i,r,s,o,a,l){Sh=!1,nv=null,qH.apply(YH,arguments)}function JH(t,e,n,i,r,s,o,a,l){if(XH.apply(this,arguments),Sh){if(Sh){var c=nv;Sh=!1,nv=null}else throw Error(ae(198));iv||(iv=!0,aS=c)}}function Jc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function YO(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function YN(t){if(Jc(t)!==t)throw Error(ae(188))}function ZH(t){var e=t.alternate;if(!e){if(e=Jc(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return YN(r),t;if(s===i)return YN(r),e;s=s.sibling}throw Error(ae(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==i)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function XO(t){return t=ZH(t),t!==null?JO(t):null}function JO(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=JO(t);if(e!==null)return e;t=t.sibling}return null}var ZO=yr.unstable_scheduleCallback,XN=yr.unstable_cancelCallback,QH=yr.unstable_shouldYield,eW=yr.unstable_requestPaint,hn=yr.unstable_now,tW=yr.unstable_getCurrentPriorityLevel,w_=yr.unstable_ImmediatePriority,QO=yr.unstable_UserBlockingPriority,rv=yr.unstable_NormalPriority,nW=yr.unstable_LowPriority,eI=yr.unstable_IdlePriority,Ly=null,ro=null;function iW(t){if(ro&&typeof ro.onCommitFiberRoot=="function")try{ro.onCommitFiberRoot(Ly,t,void 0,(t.current.flags&128)===128)}catch{}}var gs=Math.clz32?Math.clz32:oW,rW=Math.log,sW=Math.LN2;function oW(t){return t>>>=0,t===0?32:31-(rW(t)/sW|0)|0}var Ym=64,Xm=4194304;function nh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sv(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=nh(a):(s&=o,s!==0&&(i=nh(s)))}else o=n&~r,o!==0?i=nh(o):s!==0&&(i=nh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-gs(e),r=1<<n,i|=t[n],e&=~r;return i}function aW(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lW(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-gs(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=aW(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function lS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tI(){var t=Ym;return Ym<<=1,!(Ym&4194240)&&(Ym=64),t}function Cw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gs(e),t[e]=n}function cW(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-gs(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function x_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-gs(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ct=0;function nI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var iI,S_,rI,sI,oI,cS=!1,Jm=[],Ya=null,Xa=null,Ja=null,Qh=new Map,ep=new Map,Na=[],uW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JN(t,e){switch(t){case"focusin":case"focusout":Ya=null;break;case"dragenter":case"dragleave":Xa=null;break;case"mouseover":case"mouseout":Ja=null;break;case"pointerover":case"pointerout":Qh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ep.delete(e.pointerId)}}function _f(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=rm(e),e!==null&&S_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function dW(t,e,n,i,r){switch(e){case"focusin":return Ya=_f(Ya,t,e,n,i,r),!0;case"dragenter":return Xa=_f(Xa,t,e,n,i,r),!0;case"mouseover":return Ja=_f(Ja,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Qh.set(s,_f(Qh.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ep.set(s,_f(ep.get(s)||null,t,e,n,i,r)),!0}return!1}function aI(t){var e=uc(t.target);if(e!==null){var n=Jc(e);if(n!==null){if(e=n.tag,e===13){if(e=YO(n),e!==null){t.blockedOn=e,oI(t.priority,function(){rI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function a0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);rS=i,n.target.dispatchEvent(i),rS=null}else return e=rm(n),e!==null&&S_(e),t.blockedOn=n,!1;e.shift()}return!0}function ZN(t,e,n){a0(t)&&n.delete(e)}function fW(){cS=!1,Ya!==null&&a0(Ya)&&(Ya=null),Xa!==null&&a0(Xa)&&(Xa=null),Ja!==null&&a0(Ja)&&(Ja=null),Qh.forEach(ZN),ep.forEach(ZN)}function Cf(t,e){t.blockedOn===e&&(t.blockedOn=null,cS||(cS=!0,yr.unstable_scheduleCallback(yr.unstable_NormalPriority,fW)))}function tp(t){function e(r){return Cf(r,t)}if(0<Jm.length){Cf(Jm[0],t);for(var n=1;n<Jm.length;n++){var i=Jm[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ya!==null&&Cf(Ya,t),Xa!==null&&Cf(Xa,t),Ja!==null&&Cf(Ja,t),Qh.forEach(e),ep.forEach(e),n=0;n<Na.length;n++)i=Na[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Na.length&&(n=Na[0],n.blockedOn===null);)aI(n),n.blockedOn===null&&Na.shift()}var nd=na.ReactCurrentBatchConfig,ov=!0;function hW(t,e,n,i){var r=Ct,s=nd.transition;nd.transition=null;try{Ct=1,k_(t,e,n,i)}finally{Ct=r,nd.transition=s}}function pW(t,e,n,i){var r=Ct,s=nd.transition;nd.transition=null;try{Ct=4,k_(t,e,n,i)}finally{Ct=r,nd.transition=s}}function k_(t,e,n,i){if(ov){var r=uS(t,e,n,i);if(r===null)jw(t,e,i,av,n),JN(t,i);else if(dW(r,t,e,n,i))i.stopPropagation();else if(JN(t,i),e&4&&-1<uW.indexOf(t)){for(;r!==null;){var s=rm(r);if(s!==null&&iI(s),s=uS(t,e,n,i),s===null&&jw(t,e,i,av,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else jw(t,e,i,null,n)}}var av=null;function uS(t,e,n,i){if(av=null,t=b_(i),t=uc(t),t!==null)if(e=Jc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=YO(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return av=t,null}function lI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tW()){case w_:return 1;case QO:return 4;case rv:case nW:return 16;case eI:return 536870912;default:return 16}default:return 16}}var La=null,__=null,l0=null;function cI(){if(l0)return l0;var t,e=__,n=e.length,i,r="value"in La?La.value:La.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return l0=r.slice(t,1<i?1-i:void 0)}function c0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zm(){return!0}function QN(){return!1}function kr(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zm:QN,this.isPropagationStopped=QN,this}return sn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zm)},persist:function(){},isPersistent:Zm}),e}var nf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},C_=kr(nf),im=sn({},nf,{view:0,detail:0}),mW=kr(im),Ew,Aw,Ef,Dy=sn({},im,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:E_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ef&&(Ef&&t.type==="mousemove"?(Ew=t.screenX-Ef.screenX,Aw=t.screenY-Ef.screenY):Aw=Ew=0,Ef=t),Ew)},movementY:function(t){return"movementY"in t?t.movementY:Aw}}),eP=kr(Dy),gW=sn({},Dy,{dataTransfer:0}),vW=kr(gW),yW=sn({},im,{relatedTarget:0}),Nw=kr(yW),bW=sn({},nf,{animationName:0,elapsedTime:0,pseudoElement:0}),wW=kr(bW),xW=sn({},nf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),SW=kr(xW),kW=sn({},nf,{data:0}),tP=kr(kW),_W={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AW(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=EW[t])?!!e[t]:!1}function E_(){return AW}var NW=sn({},im,{key:function(t){if(t.key){var e=_W[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=c0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CW[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:E_,charCode:function(t){return t.type==="keypress"?c0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?c0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),PW=kr(NW),MW=sn({},Dy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nP=kr(MW),RW=sn({},im,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:E_}),TW=kr(RW),OW=sn({},nf,{propertyName:0,elapsedTime:0,pseudoElement:0}),IW=kr(OW),jW=sn({},Dy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LW=kr(jW),DW=[9,13,27,32],A_=Go&&"CompositionEvent"in window,kh=null;Go&&"documentMode"in document&&(kh=document.documentMode);var $W=Go&&"TextEvent"in window&&!kh,uI=Go&&(!A_||kh&&8<kh&&11>=kh),iP=" ",rP=!1;function dI(t,e){switch(t){case"keyup":return DW.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Iu=!1;function FW(t,e){switch(t){case"compositionend":return fI(e);case"keypress":return e.which!==32?null:(rP=!0,iP);case"textInput":return t=e.data,t===iP&&rP?null:t;default:return null}}function zW(t,e){if(Iu)return t==="compositionend"||!A_&&dI(t,e)?(t=cI(),l0=__=La=null,Iu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uI&&e.locale!=="ko"?null:e.data;default:return null}}var BW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!BW[t.type]:e==="textarea"}function hI(t,e,n,i){HO(i),e=lv(e,"onChange"),0<e.length&&(n=new C_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var _h=null,np=null;function UW(t){_I(t,0)}function $y(t){var e=Du(t);if(DO(e))return t}function VW(t,e){if(t==="change")return e}var pI=!1;if(Go){var Pw;if(Go){var Mw="oninput"in document;if(!Mw){var oP=document.createElement("div");oP.setAttribute("oninput","return;"),Mw=typeof oP.oninput=="function"}Pw=Mw}else Pw=!1;pI=Pw&&(!document.documentMode||9<document.documentMode)}function aP(){_h&&(_h.detachEvent("onpropertychange",mI),np=_h=null)}function mI(t){if(t.propertyName==="value"&&$y(np)){var e=[];hI(e,np,t,b_(t)),qO(UW,e)}}function HW(t,e,n){t==="focusin"?(aP(),_h=e,np=n,_h.attachEvent("onpropertychange",mI)):t==="focusout"&&aP()}function WW(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $y(np)}function GW(t,e){if(t==="click")return $y(e)}function KW(t,e){if(t==="input"||t==="change")return $y(e)}function qW(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ys=typeof Object.is=="function"?Object.is:qW;function ip(t,e){if(ys(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!G1.call(e,r)||!ys(t[r],e[r]))return!1}return!0}function lP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cP(t,e){var n=lP(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lP(n)}}function gI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vI(){for(var t=window,e=tv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=tv(t.document)}return e}function N_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function YW(t){var e=vI(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&gI(n.ownerDocument.documentElement,n)){if(i!==null&&N_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=cP(n,s);var o=cP(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var XW=Go&&"documentMode"in document&&11>=document.documentMode,ju=null,dS=null,Ch=null,fS=!1;function uP(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fS||ju==null||ju!==tv(i)||(i=ju,"selectionStart"in i&&N_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ch&&ip(Ch,i)||(Ch=i,i=lv(dS,"onSelect"),0<i.length&&(e=new C_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ju)))}function Qm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Lu={animationend:Qm("Animation","AnimationEnd"),animationiteration:Qm("Animation","AnimationIteration"),animationstart:Qm("Animation","AnimationStart"),transitionend:Qm("Transition","TransitionEnd")},Rw={},yI={};Go&&(yI=document.createElement("div").style,"AnimationEvent"in window||(delete Lu.animationend.animation,delete Lu.animationiteration.animation,delete Lu.animationstart.animation),"TransitionEvent"in window||delete Lu.transitionend.transition);function Fy(t){if(Rw[t])return Rw[t];if(!Lu[t])return t;var e=Lu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in yI)return Rw[t]=e[n];return t}var bI=Fy("animationend"),wI=Fy("animationiteration"),xI=Fy("animationstart"),SI=Fy("transitionend"),kI=new Map,dP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function El(t,e){kI.set(t,e),Xc(e,[t])}for(var Tw=0;Tw<dP.length;Tw++){var Ow=dP[Tw],JW=Ow.toLowerCase(),ZW=Ow[0].toUpperCase()+Ow.slice(1);El(JW,"on"+ZW)}El(bI,"onAnimationEnd");El(wI,"onAnimationIteration");El(xI,"onAnimationStart");El("dblclick","onDoubleClick");El("focusin","onFocus");El("focusout","onBlur");El(SI,"onTransitionEnd");Nd("onMouseEnter",["mouseout","mouseover"]);Nd("onMouseLeave",["mouseout","mouseover"]);Nd("onPointerEnter",["pointerout","pointerover"]);Nd("onPointerLeave",["pointerout","pointerover"]);Xc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QW=new Set("cancel close invalid load scroll toggle".split(" ").concat(ih));function fP(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,JH(i,e,void 0,t),t.currentTarget=null}function _I(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;fP(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;fP(r,a,c),s=l}}}if(iv)throw t=aS,iv=!1,aS=null,t}function Dt(t,e){var n=e[vS];n===void 0&&(n=e[vS]=new Set);var i=t+"__bubble";n.has(i)||(CI(e,t,2,!1),n.add(i))}function Iw(t,e,n){var i=0;e&&(i|=4),CI(n,t,i,e)}var eg="_reactListening"+Math.random().toString(36).slice(2);function rp(t){if(!t[eg]){t[eg]=!0,TO.forEach(function(n){n!=="selectionchange"&&(QW.has(n)||Iw(n,!1,t),Iw(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[eg]||(e[eg]=!0,Iw("selectionchange",!1,e))}}function CI(t,e,n,i){switch(lI(e)){case 1:var r=hW;break;case 4:r=pW;break;default:r=k_}n=r.bind(null,e,n,t),r=void 0,!oS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function jw(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=uc(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}qO(function(){var c=s,u=b_(n),d=[];e:{var f=kI.get(t);if(f!==void 0){var p=C_,g=t;switch(t){case"keypress":if(c0(n)===0)break e;case"keydown":case"keyup":p=PW;break;case"focusin":g="focus",p=Nw;break;case"focusout":g="blur",p=Nw;break;case"beforeblur":case"afterblur":p=Nw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=eP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=vW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=TW;break;case bI:case wI:case xI:p=wW;break;case SI:p=IW;break;case"scroll":p=mW;break;case"wheel":p=LW;break;case"copy":case"cut":case"paste":p=SW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=nP}var m=(e&4)!==0,v=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var w=c,x;w!==null;){x=w;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,y!==null&&(S=Zh(w,y),S!=null&&m.push(sp(w,S,x)))),v)break;w=w.return}0<m.length&&(f=new p(f,g,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==rS&&(g=n.relatedTarget||n.fromElement)&&(uc(g)||g[Ko]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?uc(g):null,g!==null&&(v=Jc(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(m=eP,S="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(m=nP,S="onPointerLeave",y="onPointerEnter",w="pointer"),v=p==null?f:Du(p),x=g==null?f:Du(g),f=new m(S,w+"leave",p,n,u),f.target=v,f.relatedTarget=x,S=null,uc(u)===c&&(m=new m(y,w+"enter",g,n,u),m.target=x,m.relatedTarget=v,S=m),v=S,p&&g)t:{for(m=p,y=g,w=0,x=m;x;x=ru(x))w++;for(x=0,S=y;S;S=ru(S))x++;for(;0<w-x;)m=ru(m),w--;for(;0<x-w;)y=ru(y),x--;for(;w--;){if(m===y||y!==null&&m===y.alternate)break t;m=ru(m),y=ru(y)}m=null}else m=null;p!==null&&hP(d,f,p,m,!1),g!==null&&v!==null&&hP(d,v,g,m,!0)}}e:{if(f=c?Du(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=VW;else if(sP(f))if(pI)_=KW;else{_=WW;var E=HW}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=GW);if(_&&(_=_(t,c))){hI(d,_,n,u);break e}E&&E(t,f,c),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Q1(f,"number",f.value)}switch(E=c?Du(c):window,t){case"focusin":(sP(E)||E.contentEditable==="true")&&(ju=E,dS=c,Ch=null);break;case"focusout":Ch=dS=ju=null;break;case"mousedown":fS=!0;break;case"contextmenu":case"mouseup":case"dragend":fS=!1,uP(d,n,u);break;case"selectionchange":if(XW)break;case"keydown":case"keyup":uP(d,n,u)}var C;if(A_)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Iu?dI(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(uI&&n.locale!=="ko"&&(Iu||N!=="onCompositionStart"?N==="onCompositionEnd"&&Iu&&(C=cI()):(La=u,__="value"in La?La.value:La.textContent,Iu=!0)),E=lv(c,N),0<E.length&&(N=new tP(N,t,null,n,u),d.push({event:N,listeners:E}),C?N.data=C:(C=fI(n),C!==null&&(N.data=C)))),(C=$W?FW(t,n):zW(t,n))&&(c=lv(c,"onBeforeInput"),0<c.length&&(u=new tP("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}_I(d,e)})}function sp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lv(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Zh(t,n),s!=null&&i.unshift(sp(t,s,r)),s=Zh(t,e),s!=null&&i.push(sp(t,s,r))),t=t.return}return i}function ru(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hP(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Zh(n,s),l!=null&&o.unshift(sp(n,l,a))):r||(l=Zh(n,s),l!=null&&o.push(sp(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var eG=/\r\n?/g,tG=/\u0000|\uFFFD/g;function pP(t){return(typeof t=="string"?t:""+t).replace(eG,`
`).replace(tG,"")}function tg(t,e,n){if(e=pP(e),pP(t)!==e&&n)throw Error(ae(425))}function cv(){}var hS=null,pS=null;function mS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gS=typeof setTimeout=="function"?setTimeout:void 0,nG=typeof clearTimeout=="function"?clearTimeout:void 0,mP=typeof Promise=="function"?Promise:void 0,iG=typeof queueMicrotask=="function"?queueMicrotask:typeof mP<"u"?function(t){return mP.resolve(null).then(t).catch(rG)}:gS;function rG(t){setTimeout(function(){throw t})}function Lw(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),tp(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);tp(e)}function Za(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var rf=Math.random().toString(36).slice(2),Hs="__reactFiber$"+rf,op="__reactProps$"+rf,Ko="__reactContainer$"+rf,vS="__reactEvents$"+rf,sG="__reactListeners$"+rf,oG="__reactHandles$"+rf;function uc(t){var e=t[Hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ko]||n[Hs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gP(t);t!==null;){if(n=t[Hs])return n;t=gP(t)}return e}t=n,n=t.parentNode}return null}function rm(t){return t=t[Hs]||t[Ko],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Du(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function zy(t){return t[op]||null}var yS=[],$u=-1;function Al(t){return{current:t}}function Bt(t){0>$u||(t.current=yS[$u],yS[$u]=null,$u--)}function Lt(t,e){$u++,yS[$u]=t.current,t.current=e}var cl={},di=Al(cl),Ki=Al(!1),Mc=cl;function Pd(t,e){var n=t.type.contextTypes;if(!n)return cl;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function qi(t){return t=t.childContextTypes,t!=null}function uv(){Bt(Ki),Bt(di)}function vP(t,e,n){if(di.current!==cl)throw Error(ae(168));Lt(di,e),Lt(Ki,n)}function EI(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ae(108,HH(t)||"Unknown",r));return sn({},n,i)}function dv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cl,Mc=di.current,Lt(di,t),Lt(Ki,Ki.current),!0}function yP(t,e,n){var i=t.stateNode;if(!i)throw Error(ae(169));n?(t=EI(t,e,Mc),i.__reactInternalMemoizedMergedChildContext=t,Bt(Ki),Bt(di),Lt(di,t)):Bt(Ki),Lt(Ki,n)}var Eo=null,By=!1,Dw=!1;function AI(t){Eo===null?Eo=[t]:Eo.push(t)}function aG(t){By=!0,AI(t)}function Nl(){if(!Dw&&Eo!==null){Dw=!0;var t=0,e=Ct;try{var n=Eo;for(Ct=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Eo=null,By=!1}catch(r){throw Eo!==null&&(Eo=Eo.slice(t+1)),ZO(w_,Nl),r}finally{Ct=e,Dw=!1}}return null}var Fu=[],zu=0,fv=null,hv=0,Rr=[],Tr=0,Rc=null,Bo=1,Uo="";function Zl(t,e){Fu[zu++]=hv,Fu[zu++]=fv,fv=t,hv=e}function NI(t,e,n){Rr[Tr++]=Bo,Rr[Tr++]=Uo,Rr[Tr++]=Rc,Rc=t;var i=Bo;t=Uo;var r=32-gs(i)-1;i&=~(1<<r),n+=1;var s=32-gs(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Bo=1<<32-gs(e)+r|n<<r|i,Uo=s+t}else Bo=1<<s|n<<r|i,Uo=t}function P_(t){t.return!==null&&(Zl(t,1),NI(t,1,0))}function M_(t){for(;t===fv;)fv=Fu[--zu],Fu[zu]=null,hv=Fu[--zu],Fu[zu]=null;for(;t===Rc;)Rc=Rr[--Tr],Rr[Tr]=null,Uo=Rr[--Tr],Rr[Tr]=null,Bo=Rr[--Tr],Rr[Tr]=null}var mr=null,ur=null,qt=!1,ls=null;function PI(t,e){var n=Lr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mr=t,ur=Za(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mr=t,ur=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rc!==null?{id:Bo,overflow:Uo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Lr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mr=t,ur=null,!0):!1;default:return!1}}function bS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wS(t){if(qt){var e=ur;if(e){var n=e;if(!bP(t,e)){if(bS(t))throw Error(ae(418));e=Za(n.nextSibling);var i=mr;e&&bP(t,e)?PI(i,n):(t.flags=t.flags&-4097|2,qt=!1,mr=t)}}else{if(bS(t))throw Error(ae(418));t.flags=t.flags&-4097|2,qt=!1,mr=t}}}function wP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mr=t}function ng(t){if(t!==mr)return!1;if(!qt)return wP(t),qt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mS(t.type,t.memoizedProps)),e&&(e=ur)){if(bS(t))throw MI(),Error(ae(418));for(;e;)PI(t,e),e=Za(e.nextSibling)}if(wP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ur=Za(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ur=null}}else ur=mr?Za(t.stateNode.nextSibling):null;return!0}function MI(){for(var t=ur;t;)t=Za(t.nextSibling)}function Md(){ur=mr=null,qt=!1}function R_(t){ls===null?ls=[t]:ls.push(t)}var lG=na.ReactCurrentBatchConfig;function Af(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var i=n.stateNode}if(!i)throw Error(ae(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function ig(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xP(t){var e=t._init;return e(t._payload)}function RI(t){function e(y,w){if(t){var x=y.deletions;x===null?(y.deletions=[w],y.flags|=16):x.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function i(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function r(y,w){return y=nl(y,w),y.index=0,y.sibling=null,y}function s(y,w,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<w?(y.flags|=2,w):x):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,x,S){return w===null||w.tag!==6?(w=Hw(x,y.mode,S),w.return=y,w):(w=r(w,x),w.return=y,w)}function l(y,w,x,S){var _=x.type;return _===Ou?u(y,w,x.props.children,S,x.key):w!==null&&(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ba&&xP(_)===w.type)?(S=r(w,x.props),S.ref=Af(y,w,x),S.return=y,S):(S=g0(x.type,x.key,x.props,null,y.mode,S),S.ref=Af(y,w,x),S.return=y,S)}function c(y,w,x,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=Ww(x,y.mode,S),w.return=y,w):(w=r(w,x.children||[]),w.return=y,w)}function u(y,w,x,S,_){return w===null||w.tag!==7?(w=wc(x,y.mode,S,_),w.return=y,w):(w=r(w,x),w.return=y,w)}function d(y,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Hw(""+w,y.mode,x),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Gm:return x=g0(w.type,w.key,w.props,null,y.mode,x),x.ref=Af(y,null,w),x.return=y,x;case Tu:return w=Ww(w,y.mode,x),w.return=y,w;case ba:var S=w._init;return d(y,S(w._payload),x)}if(th(w)||Sf(w))return w=wc(w,y.mode,x,null),w.return=y,w;ig(y,w)}return null}function f(y,w,x,S){var _=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(y,w,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Gm:return x.key===_?l(y,w,x,S):null;case Tu:return x.key===_?c(y,w,x,S):null;case ba:return _=x._init,f(y,w,_(x._payload),S)}if(th(x)||Sf(x))return _!==null?null:u(y,w,x,S,null);ig(y,x)}return null}function p(y,w,x,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(x)||null,a(w,y,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Gm:return y=y.get(S.key===null?x:S.key)||null,l(w,y,S,_);case Tu:return y=y.get(S.key===null?x:S.key)||null,c(w,y,S,_);case ba:var E=S._init;return p(y,w,x,E(S._payload),_)}if(th(S)||Sf(S))return y=y.get(x)||null,u(w,y,S,_,null);ig(w,S)}return null}function g(y,w,x,S){for(var _=null,E=null,C=w,N=w=0,M=null;C!==null&&N<x.length;N++){C.index>N?(M=C,C=null):M=C.sibling;var j=f(y,C,x[N],S);if(j===null){C===null&&(C=M);break}t&&C&&j.alternate===null&&e(y,C),w=s(j,w,N),E===null?_=j:E.sibling=j,E=j,C=M}if(N===x.length)return n(y,C),qt&&Zl(y,N),_;if(C===null){for(;N<x.length;N++)C=d(y,x[N],S),C!==null&&(w=s(C,w,N),E===null?_=C:E.sibling=C,E=C);return qt&&Zl(y,N),_}for(C=i(y,C);N<x.length;N++)M=p(C,y,N,x[N],S),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?N:M.key),w=s(M,w,N),E===null?_=M:E.sibling=M,E=M);return t&&C.forEach(function(I){return e(y,I)}),qt&&Zl(y,N),_}function m(y,w,x,S){var _=Sf(x);if(typeof _!="function")throw Error(ae(150));if(x=_.call(x),x==null)throw Error(ae(151));for(var E=_=null,C=w,N=w=0,M=null,j=x.next();C!==null&&!j.done;N++,j=x.next()){C.index>N?(M=C,C=null):M=C.sibling;var I=f(y,C,j.value,S);if(I===null){C===null&&(C=M);break}t&&C&&I.alternate===null&&e(y,C),w=s(I,w,N),E===null?_=I:E.sibling=I,E=I,C=M}if(j.done)return n(y,C),qt&&Zl(y,N),_;if(C===null){for(;!j.done;N++,j=x.next())j=d(y,j.value,S),j!==null&&(w=s(j,w,N),E===null?_=j:E.sibling=j,E=j);return qt&&Zl(y,N),_}for(C=i(y,C);!j.done;N++,j=x.next())j=p(C,y,N,j.value,S),j!==null&&(t&&j.alternate!==null&&C.delete(j.key===null?N:j.key),w=s(j,w,N),E===null?_=j:E.sibling=j,E=j);return t&&C.forEach(function(O){return e(y,O)}),qt&&Zl(y,N),_}function v(y,w,x,S){if(typeof x=="object"&&x!==null&&x.type===Ou&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Gm:e:{for(var _=x.key,E=w;E!==null;){if(E.key===_){if(_=x.type,_===Ou){if(E.tag===7){n(y,E.sibling),w=r(E,x.props.children),w.return=y,y=w;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ba&&xP(_)===E.type){n(y,E.sibling),w=r(E,x.props),w.ref=Af(y,E,x),w.return=y,y=w;break e}n(y,E);break}else e(y,E);E=E.sibling}x.type===Ou?(w=wc(x.props.children,y.mode,S,x.key),w.return=y,y=w):(S=g0(x.type,x.key,x.props,null,y.mode,S),S.ref=Af(y,w,x),S.return=y,y=S)}return o(y);case Tu:e:{for(E=x.key;w!==null;){if(w.key===E)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){n(y,w.sibling),w=r(w,x.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=Ww(x,y.mode,S),w.return=y,y=w}return o(y);case ba:return E=x._init,v(y,w,E(x._payload),S)}if(th(x))return g(y,w,x,S);if(Sf(x))return m(y,w,x,S);ig(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(n(y,w.sibling),w=r(w,x),w.return=y,y=w):(n(y,w),w=Hw(x,y.mode,S),w.return=y,y=w),o(y)):n(y,w)}return v}var Rd=RI(!0),TI=RI(!1),pv=Al(null),mv=null,Bu=null,T_=null;function O_(){T_=Bu=mv=null}function I_(t){var e=pv.current;Bt(pv),t._currentValue=e}function xS(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function id(t,e){mv=t,T_=Bu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wi=!0),t.firstContext=null)}function Kr(t){var e=t._currentValue;if(T_!==t)if(t={context:t,memoizedValue:e,next:null},Bu===null){if(mv===null)throw Error(ae(308));Bu=t,mv.dependencies={lanes:0,firstContext:t}}else Bu=Bu.next=t;return e}var dc=null;function j_(t){dc===null?dc=[t]:dc.push(t)}function OI(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,j_(e)):(n.next=r.next,r.next=n),e.interleaved=n,qo(t,i)}function qo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wa=!1;function L_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function II(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qa(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,mt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,qo(t,n)}return r=i.interleaved,r===null?(e.next=e,j_(i)):(e.next=r.next,r.next=e),i.interleaved=e,qo(t,n)}function u0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,x_(t,n)}}function SP(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function gv(t,e,n,i){var r=t.updateQueue;wa=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(f=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=sn({},d,f);break e;case 2:wa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Oc|=o,t.lanes=o,t.memoizedState=d}}function kP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ae(191,r));r.call(i)}}}var sm={},so=Al(sm),ap=Al(sm),lp=Al(sm);function fc(t){if(t===sm)throw Error(ae(174));return t}function D_(t,e){switch(Lt(lp,e),Lt(ap,t),Lt(so,sm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tS(e,t)}Bt(so),Lt(so,e)}function Td(){Bt(so),Bt(ap),Bt(lp)}function jI(t){fc(lp.current);var e=fc(so.current),n=tS(e,t.type);e!==n&&(Lt(ap,t),Lt(so,n))}function $_(t){ap.current===t&&(Bt(so),Bt(ap))}var Zt=Al(0);function vv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $w=[];function F_(){for(var t=0;t<$w.length;t++)$w[t]._workInProgressVersionPrimary=null;$w.length=0}var d0=na.ReactCurrentDispatcher,Fw=na.ReactCurrentBatchConfig,Tc=0,rn=null,xn=null,Tn=null,yv=!1,Eh=!1,cp=0,cG=0;function ni(){throw Error(ae(321))}function z_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ys(t[n],e[n]))return!1;return!0}function B_(t,e,n,i,r,s){if(Tc=s,rn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,d0.current=t===null||t.memoizedState===null?hG:pG,t=n(i,r),Eh){s=0;do{if(Eh=!1,cp=0,25<=s)throw Error(ae(301));s+=1,Tn=xn=null,e.updateQueue=null,d0.current=mG,t=n(i,r)}while(Eh)}if(d0.current=bv,e=xn!==null&&xn.next!==null,Tc=0,Tn=xn=rn=null,yv=!1,e)throw Error(ae(300));return t}function U_(){var t=cp!==0;return cp=0,t}function js(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?rn.memoizedState=Tn=t:Tn=Tn.next=t,Tn}function qr(){if(xn===null){var t=rn.alternate;t=t!==null?t.memoizedState:null}else t=xn.next;var e=Tn===null?rn.memoizedState:Tn.next;if(e!==null)Tn=e,xn=t;else{if(t===null)throw Error(ae(310));xn=t,t={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},Tn===null?rn.memoizedState=Tn=t:Tn=Tn.next=t}return Tn}function up(t,e){return typeof e=="function"?e(t):e}function zw(t){var e=qr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=xn,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Tc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,rn.lanes|=u,Oc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,ys(i,e.memoizedState)||(Wi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,rn.lanes|=s,Oc|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Bw(t){var e=qr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);ys(s,e.memoizedState)||(Wi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function LI(){}function DI(t,e){var n=rn,i=qr(),r=e(),s=!ys(i.memoizedState,r);if(s&&(i.memoizedState=r,Wi=!0),i=i.queue,V_(zI.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Tn!==null&&Tn.memoizedState.tag&1){if(n.flags|=2048,dp(9,FI.bind(null,n,i,r,e),void 0,null),Ln===null)throw Error(ae(349));Tc&30||$I(n,e,r)}return r}function $I(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rn.updateQueue,e===null?(e={lastEffect:null,stores:null},rn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function FI(t,e,n,i){e.value=n,e.getSnapshot=i,BI(e)&&UI(t)}function zI(t,e,n){return n(function(){BI(e)&&UI(t)})}function BI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ys(t,n)}catch{return!0}}function UI(t){var e=qo(t,1);e!==null&&vs(e,t,1,-1)}function _P(t){var e=js();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:up,lastRenderedState:t},e.queue=t,t=t.dispatch=fG.bind(null,rn,t),[e.memoizedState,t]}function dp(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=rn.updateQueue,e===null?(e={lastEffect:null,stores:null},rn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function VI(){return qr().memoizedState}function f0(t,e,n,i){var r=js();rn.flags|=t,r.memoizedState=dp(1|e,n,void 0,i===void 0?null:i)}function Uy(t,e,n,i){var r=qr();i=i===void 0?null:i;var s=void 0;if(xn!==null){var o=xn.memoizedState;if(s=o.destroy,i!==null&&z_(i,o.deps)){r.memoizedState=dp(e,n,s,i);return}}rn.flags|=t,r.memoizedState=dp(1|e,n,s,i)}function CP(t,e){return f0(8390656,8,t,e)}function V_(t,e){return Uy(2048,8,t,e)}function HI(t,e){return Uy(4,2,t,e)}function WI(t,e){return Uy(4,4,t,e)}function GI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function KI(t,e,n){return n=n!=null?n.concat([t]):null,Uy(4,4,GI.bind(null,e,t),n)}function H_(){}function qI(t,e){var n=qr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&z_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function YI(t,e){var n=qr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&z_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function XI(t,e,n){return Tc&21?(ys(n,e)||(n=tI(),rn.lanes|=n,Oc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wi=!0),t.memoizedState=n)}function uG(t,e){var n=Ct;Ct=n!==0&&4>n?n:4,t(!0);var i=Fw.transition;Fw.transition={};try{t(!1),e()}finally{Ct=n,Fw.transition=i}}function JI(){return qr().memoizedState}function dG(t,e,n){var i=tl(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ZI(t))QI(e,n);else if(n=OI(t,e,n,i),n!==null){var r=bi();vs(n,t,i,r),ej(n,e,i)}}function fG(t,e,n){var i=tl(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ZI(t))QI(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ys(a,o)){var l=e.interleaved;l===null?(r.next=r,j_(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=OI(t,e,r,i),n!==null&&(r=bi(),vs(n,t,i,r),ej(n,e,i))}}function ZI(t){var e=t.alternate;return t===rn||e!==null&&e===rn}function QI(t,e){Eh=yv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ej(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,x_(t,n)}}var bv={readContext:Kr,useCallback:ni,useContext:ni,useEffect:ni,useImperativeHandle:ni,useInsertionEffect:ni,useLayoutEffect:ni,useMemo:ni,useReducer:ni,useRef:ni,useState:ni,useDebugValue:ni,useDeferredValue:ni,useTransition:ni,useMutableSource:ni,useSyncExternalStore:ni,useId:ni,unstable_isNewReconciler:!1},hG={readContext:Kr,useCallback:function(t,e){return js().memoizedState=[t,e===void 0?null:e],t},useContext:Kr,useEffect:CP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,f0(4194308,4,GI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return f0(4194308,4,t,e)},useInsertionEffect:function(t,e){return f0(4,2,t,e)},useMemo:function(t,e){var n=js();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=js();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=dG.bind(null,rn,t),[i.memoizedState,t]},useRef:function(t){var e=js();return t={current:t},e.memoizedState=t},useState:_P,useDebugValue:H_,useDeferredValue:function(t){return js().memoizedState=t},useTransition:function(){var t=_P(!1),e=t[0];return t=uG.bind(null,t[1]),js().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=rn,r=js();if(qt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Ln===null)throw Error(ae(349));Tc&30||$I(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,CP(zI.bind(null,i,s,t),[t]),i.flags|=2048,dp(9,FI.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=js(),e=Ln.identifierPrefix;if(qt){var n=Uo,i=Bo;n=(i&~(1<<32-gs(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=cp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pG={readContext:Kr,useCallback:qI,useContext:Kr,useEffect:V_,useImperativeHandle:KI,useInsertionEffect:HI,useLayoutEffect:WI,useMemo:YI,useReducer:zw,useRef:VI,useState:function(){return zw(up)},useDebugValue:H_,useDeferredValue:function(t){var e=qr();return XI(e,xn.memoizedState,t)},useTransition:function(){var t=zw(up)[0],e=qr().memoizedState;return[t,e]},useMutableSource:LI,useSyncExternalStore:DI,useId:JI,unstable_isNewReconciler:!1},mG={readContext:Kr,useCallback:qI,useContext:Kr,useEffect:V_,useImperativeHandle:KI,useInsertionEffect:HI,useLayoutEffect:WI,useMemo:YI,useReducer:Bw,useRef:VI,useState:function(){return Bw(up)},useDebugValue:H_,useDeferredValue:function(t){var e=qr();return xn===null?e.memoizedState=t:XI(e,xn.memoizedState,t)},useTransition:function(){var t=Bw(up)[0],e=qr().memoizedState;return[t,e]},useMutableSource:LI,useSyncExternalStore:DI,useId:JI,unstable_isNewReconciler:!1};function is(t,e){if(t&&t.defaultProps){e=sn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function SS(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:sn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vy={isMounted:function(t){return(t=t._reactInternals)?Jc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=bi(),r=tl(t),s=Vo(i,r);s.payload=e,n!=null&&(s.callback=n),e=Qa(t,s,r),e!==null&&(vs(e,t,r,i),u0(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=bi(),r=tl(t),s=Vo(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Qa(t,s,r),e!==null&&(vs(e,t,r,i),u0(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bi(),i=tl(t),r=Vo(n,i);r.tag=2,e!=null&&(r.callback=e),e=Qa(t,r,i),e!==null&&(vs(e,t,i,n),u0(e,t,i))}};function EP(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ip(n,i)||!ip(r,s):!0}function tj(t,e,n){var i=!1,r=cl,s=e.contextType;return typeof s=="object"&&s!==null?s=Kr(s):(r=qi(e)?Mc:di.current,i=e.contextTypes,s=(i=i!=null)?Pd(t,r):cl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vy,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function AP(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Vy.enqueueReplaceState(e,e.state,null)}function kS(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},L_(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Kr(s):(s=qi(e)?Mc:di.current,r.context=Pd(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(SS(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Vy.enqueueReplaceState(r,r.state,null),gv(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Od(t,e){try{var n="",i=e;do n+=VH(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Uw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _S(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gG=typeof WeakMap=="function"?WeakMap:Map;function nj(t,e,n){n=Vo(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){xv||(xv=!0,IS=i),_S(t,e)},n}function ij(t,e,n){n=Vo(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){_S(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){_S(t,e),typeof i!="function"&&(el===null?el=new Set([this]):el.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function NP(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new gG;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=MG.bind(null,t,e,n),e.then(t,t))}function PP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function MP(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vo(-1,1),e.tag=2,Qa(n,e,1))),n.lanes|=1),t)}var vG=na.ReactCurrentOwner,Wi=!1;function yi(t,e,n,i){e.child=t===null?TI(e,null,n,i):Rd(e,t.child,n,i)}function RP(t,e,n,i,r){n=n.render;var s=e.ref;return id(e,r),i=B_(t,e,n,i,s,r),n=U_(),t!==null&&!Wi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Yo(t,e,r)):(qt&&n&&P_(e),e.flags|=1,yi(t,e,i,r),e.child)}function TP(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Z_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,rj(t,e,s,i,r)):(t=g0(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ip,n(o,i)&&t.ref===e.ref)return Yo(t,e,r)}return e.flags|=1,t=nl(s,i),t.ref=e.ref,t.return=e,e.child=t}function rj(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(ip(s,i)&&t.ref===e.ref)if(Wi=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Wi=!0);else return e.lanes=t.lanes,Yo(t,e,r)}return CS(t,e,n,i,r)}function sj(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(Vu,rr),rr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Lt(Vu,rr),rr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Lt(Vu,rr),rr|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Lt(Vu,rr),rr|=i;return yi(t,e,r,n),e.child}function oj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function CS(t,e,n,i,r){var s=qi(n)?Mc:di.current;return s=Pd(e,s),id(e,r),n=B_(t,e,n,i,s,r),i=U_(),t!==null&&!Wi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Yo(t,e,r)):(qt&&i&&P_(e),e.flags|=1,yi(t,e,n,r),e.child)}function OP(t,e,n,i,r){if(qi(n)){var s=!0;dv(e)}else s=!1;if(id(e,r),e.stateNode===null)h0(t,e),tj(e,n,i),kS(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Kr(c):(c=qi(n)?Mc:di.current,c=Pd(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&AP(e,o,i,c),wa=!1;var f=e.memoizedState;o.state=f,gv(e,i,o,r),l=e.memoizedState,a!==i||f!==l||Ki.current||wa?(typeof u=="function"&&(SS(e,n,u,i),l=e.memoizedState),(a=wa||EP(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,II(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:is(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Kr(l):(l=qi(n)?Mc:di.current,l=Pd(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&AP(e,o,i,l),wa=!1,f=e.memoizedState,o.state=f,gv(e,i,o,r);var g=e.memoizedState;a!==d||f!==g||Ki.current||wa?(typeof p=="function"&&(SS(e,n,p,i),g=e.memoizedState),(c=wa||EP(e,n,c,i,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return ES(t,e,n,i,s,r)}function ES(t,e,n,i,r,s){oj(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&yP(e,n,!1),Yo(t,e,s);i=e.stateNode,vG.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Rd(e,t.child,null,s),e.child=Rd(e,null,a,s)):yi(t,e,a,s),e.memoizedState=i.state,r&&yP(e,n,!0),e.child}function aj(t){var e=t.stateNode;e.pendingContext?vP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vP(t,e.context,!1),D_(t,e.containerInfo)}function IP(t,e,n,i,r){return Md(),R_(r),e.flags|=256,yi(t,e,n,i),e.child}var AS={dehydrated:null,treeContext:null,retryLane:0};function NS(t){return{baseLanes:t,cachePool:null,transitions:null}}function lj(t,e,n){var i=e.pendingProps,r=Zt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Lt(Zt,r&1),t===null)return wS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Gy(o,i,0,null),t=wc(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=NS(n),e.memoizedState=AS,t):W_(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return yG(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=nl(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=nl(a,s):(s=wc(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?NS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=AS,i}return s=t.child,t=s.sibling,i=nl(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function W_(t,e){return e=Gy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rg(t,e,n,i){return i!==null&&R_(i),Rd(e,t.child,null,n),t=W_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yG(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Uw(Error(ae(422))),rg(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Gy({mode:"visible",children:i.children},r,0,null),s=wc(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Rd(e,t.child,null,o),e.child.memoizedState=NS(o),e.memoizedState=AS,s);if(!(e.mode&1))return rg(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ae(419)),i=Uw(s,i,void 0),rg(t,e,o,i)}if(a=(o&t.childLanes)!==0,Wi||a){if(i=Ln,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,qo(t,r),vs(i,t,r,-1))}return J_(),i=Uw(Error(ae(421))),rg(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=RG.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,ur=Za(r.nextSibling),mr=e,qt=!0,ls=null,t!==null&&(Rr[Tr++]=Bo,Rr[Tr++]=Uo,Rr[Tr++]=Rc,Bo=t.id,Uo=t.overflow,Rc=e),e=W_(e,i.children),e.flags|=4096,e)}function jP(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),xS(t.return,e,n)}function Vw(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function cj(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(yi(t,e,i.children,n),i=Zt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jP(t,n,e);else if(t.tag===19)jP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Lt(Zt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&vv(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Vw(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&vv(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Vw(e,!0,n,null,s);break;case"together":Vw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function h0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Oc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=nl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=nl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bG(t,e,n){switch(e.tag){case 3:aj(e),Md();break;case 5:jI(e);break;case 1:qi(e.type)&&dv(e);break;case 4:D_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Lt(pv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Lt(Zt,Zt.current&1),e.flags|=128,null):n&e.child.childLanes?lj(t,e,n):(Lt(Zt,Zt.current&1),t=Yo(t,e,n),t!==null?t.sibling:null);Lt(Zt,Zt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return cj(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Lt(Zt,Zt.current),i)break;return null;case 22:case 23:return e.lanes=0,sj(t,e,n)}return Yo(t,e,n)}var uj,PS,dj,fj;uj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};PS=function(){};dj=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,fc(so.current);var s=null;switch(n){case"input":r=J1(t,r),i=J1(t,i),s=[];break;case"select":r=sn({},r,{value:void 0}),i=sn({},i,{value:void 0}),s=[];break;case"textarea":r=eS(t,r),i=eS(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=cv)}nS(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Xh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Xh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Dt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};fj=function(t,e,n,i){n!==i&&(e.flags|=4)};function Nf(t,e){if(!qt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ii(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function wG(t,e,n){var i=e.pendingProps;switch(M_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ii(e),null;case 1:return qi(e.type)&&uv(),ii(e),null;case 3:return i=e.stateNode,Td(),Bt(Ki),Bt(di),F_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ng(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ls!==null&&(DS(ls),ls=null))),PS(t,e),ii(e),null;case 5:$_(e);var r=fc(lp.current);if(n=e.type,t!==null&&e.stateNode!=null)dj(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ae(166));return ii(e),null}if(t=fc(so.current),ng(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Hs]=e,i[op]=s,t=(e.mode&1)!==0,n){case"dialog":Dt("cancel",i),Dt("close",i);break;case"iframe":case"object":case"embed":Dt("load",i);break;case"video":case"audio":for(r=0;r<ih.length;r++)Dt(ih[r],i);break;case"source":Dt("error",i);break;case"img":case"image":case"link":Dt("error",i),Dt("load",i);break;case"details":Dt("toggle",i);break;case"input":HN(i,s),Dt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Dt("invalid",i);break;case"textarea":GN(i,s),Dt("invalid",i)}nS(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&tg(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&tg(i.textContent,a,t),r=["children",""+a]):Xh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Dt("scroll",i)}switch(n){case"input":Km(i),WN(i,s,!0);break;case"textarea":Km(i),KN(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=cv)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zO(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Hs]=e,t[op]=i,uj(t,e,!1,!1),e.stateNode=t;e:{switch(o=iS(n,i),n){case"dialog":Dt("cancel",t),Dt("close",t),r=i;break;case"iframe":case"object":case"embed":Dt("load",t),r=i;break;case"video":case"audio":for(r=0;r<ih.length;r++)Dt(ih[r],t);r=i;break;case"source":Dt("error",t),r=i;break;case"img":case"image":case"link":Dt("error",t),Dt("load",t),r=i;break;case"details":Dt("toggle",t),r=i;break;case"input":HN(t,i),r=J1(t,i),Dt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=sn({},i,{value:void 0}),Dt("invalid",t);break;case"textarea":GN(t,i),r=eS(t,i),Dt("invalid",t);break;default:r=i}nS(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?VO(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&BO(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Jh(t,l):typeof l=="number"&&Jh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Dt("scroll",t):l!=null&&m_(t,s,l,o))}switch(n){case"input":Km(t),WN(t,i,!1);break;case"textarea":Km(t),KN(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ll(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Qu(t,!!i.multiple,s,!1):i.defaultValue!=null&&Qu(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=cv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ii(e),null;case 6:if(t&&e.stateNode!=null)fj(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ae(166));if(n=fc(lp.current),fc(so.current),ng(e)){if(i=e.stateNode,n=e.memoizedProps,i[Hs]=e,(s=i.nodeValue!==n)&&(t=mr,t!==null))switch(t.tag){case 3:tg(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tg(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Hs]=e,e.stateNode=i}return ii(e),null;case 13:if(Bt(Zt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qt&&ur!==null&&e.mode&1&&!(e.flags&128))MI(),Md(),e.flags|=98560,s=!1;else if(s=ng(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[Hs]=e}else Md(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ii(e),s=!1}else ls!==null&&(DS(ls),ls=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Zt.current&1?En===0&&(En=3):J_())),e.updateQueue!==null&&(e.flags|=4),ii(e),null);case 4:return Td(),PS(t,e),t===null&&rp(e.stateNode.containerInfo),ii(e),null;case 10:return I_(e.type._context),ii(e),null;case 17:return qi(e.type)&&uv(),ii(e),null;case 19:if(Bt(Zt),s=e.memoizedState,s===null)return ii(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Nf(s,!1);else{if(En!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vv(t),o!==null){for(e.flags|=128,Nf(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Lt(Zt,Zt.current&1|2),e.child}t=t.sibling}s.tail!==null&&hn()>Id&&(e.flags|=128,i=!0,Nf(s,!1),e.lanes=4194304)}else{if(!i)if(t=vv(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Nf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!qt)return ii(e),null}else 2*hn()-s.renderingStartTime>Id&&n!==1073741824&&(e.flags|=128,i=!0,Nf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=hn(),e.sibling=null,n=Zt.current,Lt(Zt,i?n&1|2:n&1),e):(ii(e),null);case 22:case 23:return X_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?rr&1073741824&&(ii(e),e.subtreeFlags&6&&(e.flags|=8192)):ii(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function xG(t,e){switch(M_(e),e.tag){case 1:return qi(e.type)&&uv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Td(),Bt(Ki),Bt(di),F_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $_(e),null;case 13:if(Bt(Zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));Md()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Bt(Zt),null;case 4:return Td(),null;case 10:return I_(e.type._context),null;case 22:case 23:return X_(),null;case 24:return null;default:return null}}var sg=!1,li=!1,SG=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function Uu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){an(t,e,i)}else n.current=null}function MS(t,e,n){try{n()}catch(i){an(t,e,i)}}var LP=!1;function kG(t,e){if(hS=ov,t=vI(),N_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(pS={focusedElem:t,selectionRange:n},ov=!1,Ae=e;Ae!==null;)if(e=Ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ae=t;else for(;Ae!==null;){e=Ae;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:is(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(S){an(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Ae=t;break}Ae=e.return}return g=LP,LP=!1,g}function Ah(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&MS(e,n,s)}r=r.next}while(r!==i)}}function Hy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function RS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hj(t){var e=t.alternate;e!==null&&(t.alternate=null,hj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hs],delete e[op],delete e[vS],delete e[sG],delete e[oG])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pj(t){return t.tag===5||t.tag===3||t.tag===4}function DP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function TS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cv));else if(i!==4&&(t=t.child,t!==null))for(TS(t,e,n),t=t.sibling;t!==null;)TS(t,e,n),t=t.sibling}function OS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(OS(t,e,n),t=t.sibling;t!==null;)OS(t,e,n),t=t.sibling}var Bn=null,as=!1;function fa(t,e,n){for(n=n.child;n!==null;)mj(t,e,n),n=n.sibling}function mj(t,e,n){if(ro&&typeof ro.onCommitFiberUnmount=="function")try{ro.onCommitFiberUnmount(Ly,n)}catch{}switch(n.tag){case 5:li||Uu(n,e);case 6:var i=Bn,r=as;Bn=null,fa(t,e,n),Bn=i,as=r,Bn!==null&&(as?(t=Bn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bn.removeChild(n.stateNode));break;case 18:Bn!==null&&(as?(t=Bn,n=n.stateNode,t.nodeType===8?Lw(t.parentNode,n):t.nodeType===1&&Lw(t,n),tp(t)):Lw(Bn,n.stateNode));break;case 4:i=Bn,r=as,Bn=n.stateNode.containerInfo,as=!0,fa(t,e,n),Bn=i,as=r;break;case 0:case 11:case 14:case 15:if(!li&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&MS(n,e,o),r=r.next}while(r!==i)}fa(t,e,n);break;case 1:if(!li&&(Uu(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){an(n,e,a)}fa(t,e,n);break;case 21:fa(t,e,n);break;case 22:n.mode&1?(li=(i=li)||n.memoizedState!==null,fa(t,e,n),li=i):fa(t,e,n);break;default:fa(t,e,n)}}function $P(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SG),e.forEach(function(i){var r=TG.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Qr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Bn=a.stateNode,as=!1;break e;case 3:Bn=a.stateNode.containerInfo,as=!0;break e;case 4:Bn=a.stateNode.containerInfo,as=!0;break e}a=a.return}if(Bn===null)throw Error(ae(160));mj(s,o,r),Bn=null,as=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){an(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gj(e,t),e=e.sibling}function gj(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qr(e,t),As(t),i&4){try{Ah(3,t,t.return),Hy(3,t)}catch(m){an(t,t.return,m)}try{Ah(5,t,t.return)}catch(m){an(t,t.return,m)}}break;case 1:Qr(e,t),As(t),i&512&&n!==null&&Uu(n,n.return);break;case 5:if(Qr(e,t),As(t),i&512&&n!==null&&Uu(n,n.return),t.flags&32){var r=t.stateNode;try{Jh(r,"")}catch(m){an(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&$O(r,s),iS(a,o);var c=iS(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?VO(r,d):u==="dangerouslySetInnerHTML"?BO(r,d):u==="children"?Jh(r,d):m_(r,u,d,c)}switch(a){case"input":Z1(r,s);break;case"textarea":FO(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Qu(r,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Qu(r,!!s.multiple,s.defaultValue,!0):Qu(r,!!s.multiple,s.multiple?[]:"",!1))}r[op]=s}catch(m){an(t,t.return,m)}}break;case 6:if(Qr(e,t),As(t),i&4){if(t.stateNode===null)throw Error(ae(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){an(t,t.return,m)}}break;case 3:if(Qr(e,t),As(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{tp(e.containerInfo)}catch(m){an(t,t.return,m)}break;case 4:Qr(e,t),As(t);break;case 13:Qr(e,t),As(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(q_=hn())),i&4&&$P(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(li=(c=li)||u,Qr(e,t),li=c):Qr(e,t),As(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ae=t,u=t.child;u!==null;){for(d=Ae=u;Ae!==null;){switch(f=Ae,p=f.child,f.tag){case 0:case 11:case 14:case 15:Ah(4,f,f.return);break;case 1:Uu(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){an(i,n,m)}}break;case 5:Uu(f,f.return);break;case 22:if(f.memoizedState!==null){zP(d);continue}}p!==null?(p.return=f,Ae=p):zP(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=UO("display",o))}catch(m){an(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){an(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Qr(e,t),As(t),i&4&&$P(t);break;case 21:break;default:Qr(e,t),As(t)}}function As(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(pj(n)){var i=n;break e}n=n.return}throw Error(ae(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Jh(r,""),i.flags&=-33);var s=DP(t);OS(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=DP(t);TS(t,a,o);break;default:throw Error(ae(161))}}catch(l){an(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _G(t,e,n){Ae=t,vj(t)}function vj(t,e,n){for(var i=(t.mode&1)!==0;Ae!==null;){var r=Ae,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||sg;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||li;a=sg;var c=li;if(sg=o,(li=l)&&!c)for(Ae=r;Ae!==null;)o=Ae,l=o.child,o.tag===22&&o.memoizedState!==null?BP(r):l!==null?(l.return=o,Ae=l):BP(r);for(;s!==null;)Ae=s,vj(s),s=s.sibling;Ae=r,sg=a,li=c}FP(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ae=s):FP(t)}}function FP(t){for(;Ae!==null;){var e=Ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:li||Hy(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!li)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:is(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&kP(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kP(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&tp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}li||e.flags&512&&RS(e)}catch(f){an(e,e.return,f)}}if(e===t){Ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function zP(t){for(;Ae!==null;){var e=Ae;if(e===t){Ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function BP(t){for(;Ae!==null;){var e=Ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hy(4,e)}catch(l){an(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){an(e,r,l)}}var s=e.return;try{RS(e)}catch(l){an(e,s,l)}break;case 5:var o=e.return;try{RS(e)}catch(l){an(e,o,l)}}}catch(l){an(e,e.return,l)}if(e===t){Ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ae=a;break}Ae=e.return}}var CG=Math.ceil,wv=na.ReactCurrentDispatcher,G_=na.ReactCurrentOwner,Ur=na.ReactCurrentBatchConfig,mt=0,Ln=null,yn=null,Jn=0,rr=0,Vu=Al(0),En=0,fp=null,Oc=0,Wy=0,K_=0,Nh=null,zi=null,q_=0,Id=1/0,So=null,xv=!1,IS=null,el=null,og=!1,Da=null,Sv=0,Ph=0,jS=null,p0=-1,m0=0;function bi(){return mt&6?hn():p0!==-1?p0:p0=hn()}function tl(t){return t.mode&1?mt&2&&Jn!==0?Jn&-Jn:lG.transition!==null?(m0===0&&(m0=tI()),m0):(t=Ct,t!==0||(t=window.event,t=t===void 0?16:lI(t.type)),t):1}function vs(t,e,n,i){if(50<Ph)throw Ph=0,jS=null,Error(ae(185));nm(t,n,i),(!(mt&2)||t!==Ln)&&(t===Ln&&(!(mt&2)&&(Wy|=n),En===4&&Pa(t,Jn)),Yi(t,i),n===1&&mt===0&&!(e.mode&1)&&(Id=hn()+500,By&&Nl()))}function Yi(t,e){var n=t.callbackNode;lW(t,e);var i=sv(t,t===Ln?Jn:0);if(i===0)n!==null&&XN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&XN(n),e===1)t.tag===0?aG(UP.bind(null,t)):AI(UP.bind(null,t)),iG(function(){!(mt&6)&&Nl()}),n=null;else{switch(nI(i)){case 1:n=w_;break;case 4:n=QO;break;case 16:n=rv;break;case 536870912:n=eI;break;default:n=rv}n=Cj(n,yj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function yj(t,e){if(p0=-1,m0=0,mt&6)throw Error(ae(327));var n=t.callbackNode;if(rd()&&t.callbackNode!==n)return null;var i=sv(t,t===Ln?Jn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=kv(t,i);else{e=i;var r=mt;mt|=2;var s=wj();(Ln!==t||Jn!==e)&&(So=null,Id=hn()+500,bc(t,e));do try{NG();break}catch(a){bj(t,a)}while(!0);O_(),wv.current=s,mt=r,yn!==null?e=0:(Ln=null,Jn=0,e=En)}if(e!==0){if(e===2&&(r=lS(t),r!==0&&(i=r,e=LS(t,r))),e===1)throw n=fp,bc(t,0),Pa(t,i),Yi(t,hn()),n;if(e===6)Pa(t,i);else{if(r=t.current.alternate,!(i&30)&&!EG(r)&&(e=kv(t,i),e===2&&(s=lS(t),s!==0&&(i=s,e=LS(t,s))),e===1))throw n=fp,bc(t,0),Pa(t,i),Yi(t,hn()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ae(345));case 2:Ql(t,zi,So);break;case 3:if(Pa(t,i),(i&130023424)===i&&(e=q_+500-hn(),10<e)){if(sv(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){bi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=gS(Ql.bind(null,t,zi,So),e);break}Ql(t,zi,So);break;case 4:if(Pa(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-gs(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=hn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*CG(i/1960))-i,10<i){t.timeoutHandle=gS(Ql.bind(null,t,zi,So),i);break}Ql(t,zi,So);break;case 5:Ql(t,zi,So);break;default:throw Error(ae(329))}}}return Yi(t,hn()),t.callbackNode===n?yj.bind(null,t):null}function LS(t,e){var n=Nh;return t.current.memoizedState.isDehydrated&&(bc(t,e).flags|=256),t=kv(t,e),t!==2&&(e=zi,zi=n,e!==null&&DS(e)),t}function DS(t){zi===null?zi=t:zi.push.apply(zi,t)}function EG(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ys(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pa(t,e){for(e&=~K_,e&=~Wy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gs(e),i=1<<n;t[n]=-1,e&=~i}}function UP(t){if(mt&6)throw Error(ae(327));rd();var e=sv(t,0);if(!(e&1))return Yi(t,hn()),null;var n=kv(t,e);if(t.tag!==0&&n===2){var i=lS(t);i!==0&&(e=i,n=LS(t,i))}if(n===1)throw n=fp,bc(t,0),Pa(t,e),Yi(t,hn()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ql(t,zi,So),Yi(t,hn()),null}function Y_(t,e){var n=mt;mt|=1;try{return t(e)}finally{mt=n,mt===0&&(Id=hn()+500,By&&Nl())}}function Ic(t){Da!==null&&Da.tag===0&&!(mt&6)&&rd();var e=mt;mt|=1;var n=Ur.transition,i=Ct;try{if(Ur.transition=null,Ct=1,t)return t()}finally{Ct=i,Ur.transition=n,mt=e,!(mt&6)&&Nl()}}function X_(){rr=Vu.current,Bt(Vu)}function bc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nG(n)),yn!==null)for(n=yn.return;n!==null;){var i=n;switch(M_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&uv();break;case 3:Td(),Bt(Ki),Bt(di),F_();break;case 5:$_(i);break;case 4:Td();break;case 13:Bt(Zt);break;case 19:Bt(Zt);break;case 10:I_(i.type._context);break;case 22:case 23:X_()}n=n.return}if(Ln=t,yn=t=nl(t.current,null),Jn=rr=e,En=0,fp=null,K_=Wy=Oc=0,zi=Nh=null,dc!==null){for(e=0;e<dc.length;e++)if(n=dc[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}dc=null}return t}function bj(t,e){do{var n=yn;try{if(O_(),d0.current=bv,yv){for(var i=rn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}yv=!1}if(Tc=0,Tn=xn=rn=null,Eh=!1,cp=0,G_.current=null,n===null||n.return===null){En=1,fp=e,yn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Jn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=PP(o);if(p!==null){p.flags&=-257,MP(p,o,a,s,e),p.mode&1&&NP(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){NP(s,c,e),J_();break e}l=Error(ae(426))}}else if(qt&&a.mode&1){var v=PP(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),MP(v,o,a,s,e),R_(Od(l,a));break e}}s=l=Od(l,a),En!==4&&(En=2),Nh===null?Nh=[s]:Nh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=nj(s,l,e);SP(s,y);break e;case 1:a=l;var w=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(el===null||!el.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=ij(s,a,e);SP(s,S);break e}}s=s.return}while(s!==null)}Sj(n)}catch(_){e=_,yn===n&&n!==null&&(yn=n=n.return);continue}break}while(!0)}function wj(){var t=wv.current;return wv.current=bv,t===null?bv:t}function J_(){(En===0||En===3||En===2)&&(En=4),Ln===null||!(Oc&268435455)&&!(Wy&268435455)||Pa(Ln,Jn)}function kv(t,e){var n=mt;mt|=2;var i=wj();(Ln!==t||Jn!==e)&&(So=null,bc(t,e));do try{AG();break}catch(r){bj(t,r)}while(!0);if(O_(),mt=n,wv.current=i,yn!==null)throw Error(ae(261));return Ln=null,Jn=0,En}function AG(){for(;yn!==null;)xj(yn)}function NG(){for(;yn!==null&&!QH();)xj(yn)}function xj(t){var e=_j(t.alternate,t,rr);t.memoizedProps=t.pendingProps,e===null?Sj(t):yn=e,G_.current=null}function Sj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xG(n,e),n!==null){n.flags&=32767,yn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{En=6,yn=null;return}}else if(n=wG(n,e,rr),n!==null){yn=n;return}if(e=e.sibling,e!==null){yn=e;return}yn=e=t}while(e!==null);En===0&&(En=5)}function Ql(t,e,n){var i=Ct,r=Ur.transition;try{Ur.transition=null,Ct=1,PG(t,e,n,i)}finally{Ur.transition=r,Ct=i}return null}function PG(t,e,n,i){do rd();while(Da!==null);if(mt&6)throw Error(ae(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(cW(t,s),t===Ln&&(yn=Ln=null,Jn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||og||(og=!0,Cj(rv,function(){return rd(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ur.transition,Ur.transition=null;var o=Ct;Ct=1;var a=mt;mt|=4,G_.current=null,kG(t,n),gj(n,t),YW(pS),ov=!!hS,pS=hS=null,t.current=n,_G(n),eW(),mt=a,Ct=o,Ur.transition=s}else t.current=n;if(og&&(og=!1,Da=t,Sv=r),s=t.pendingLanes,s===0&&(el=null),iW(n.stateNode),Yi(t,hn()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(xv)throw xv=!1,t=IS,IS=null,t;return Sv&1&&t.tag!==0&&rd(),s=t.pendingLanes,s&1?t===jS?Ph++:(Ph=0,jS=t):Ph=0,Nl(),null}function rd(){if(Da!==null){var t=nI(Sv),e=Ur.transition,n=Ct;try{if(Ur.transition=null,Ct=16>t?16:t,Da===null)var i=!1;else{if(t=Da,Da=null,Sv=0,mt&6)throw Error(ae(331));var r=mt;for(mt|=4,Ae=t.current;Ae!==null;){var s=Ae,o=s.child;if(Ae.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ae=c;Ae!==null;){var u=Ae;switch(u.tag){case 0:case 11:case 15:Ah(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ae=d;else for(;Ae!==null;){u=Ae;var f=u.sibling,p=u.return;if(hj(u),u===c){Ae=null;break}if(f!==null){f.return=p,Ae=f;break}Ae=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}Ae=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ae=o;else e:for(;Ae!==null;){if(s=Ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ah(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Ae=y;break e}Ae=s.return}}var w=t.current;for(Ae=w;Ae!==null;){o=Ae;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Ae=x;else e:for(o=w;Ae!==null;){if(a=Ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Hy(9,a)}}catch(_){an(a,a.return,_)}if(a===o){Ae=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Ae=S;break e}Ae=a.return}}if(mt=r,Nl(),ro&&typeof ro.onPostCommitFiberRoot=="function")try{ro.onPostCommitFiberRoot(Ly,t)}catch{}i=!0}return i}finally{Ct=n,Ur.transition=e}}return!1}function VP(t,e,n){e=Od(n,e),e=nj(t,e,1),t=Qa(t,e,1),e=bi(),t!==null&&(nm(t,1,e),Yi(t,e))}function an(t,e,n){if(t.tag===3)VP(t,t,n);else for(;e!==null;){if(e.tag===3){VP(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(el===null||!el.has(i))){t=Od(n,t),t=ij(e,t,1),e=Qa(e,t,1),t=bi(),e!==null&&(nm(e,1,t),Yi(e,t));break}}e=e.return}}function MG(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=bi(),t.pingedLanes|=t.suspendedLanes&n,Ln===t&&(Jn&n)===n&&(En===4||En===3&&(Jn&130023424)===Jn&&500>hn()-q_?bc(t,0):K_|=n),Yi(t,e)}function kj(t,e){e===0&&(t.mode&1?(e=Xm,Xm<<=1,!(Xm&130023424)&&(Xm=4194304)):e=1);var n=bi();t=qo(t,e),t!==null&&(nm(t,e,n),Yi(t,n))}function RG(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kj(t,n)}function TG(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ae(314))}i!==null&&i.delete(e),kj(t,n)}var _j;_j=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ki.current)Wi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wi=!1,bG(t,e,n);Wi=!!(t.flags&131072)}else Wi=!1,qt&&e.flags&1048576&&NI(e,hv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;h0(t,e),t=e.pendingProps;var r=Pd(e,di.current);id(e,n),r=B_(null,e,i,t,r,n);var s=U_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qi(i)?(s=!0,dv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,L_(e),r.updater=Vy,e.stateNode=r,r._reactInternals=e,kS(e,i,t,n),e=ES(null,e,i,!0,s,n)):(e.tag=0,qt&&s&&P_(e),yi(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(h0(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=IG(i),t=is(i,t),r){case 0:e=CS(null,e,i,t,n);break e;case 1:e=OP(null,e,i,t,n);break e;case 11:e=RP(null,e,i,t,n);break e;case 14:e=TP(null,e,i,is(i.type,t),n);break e}throw Error(ae(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:is(i,r),CS(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:is(i,r),OP(t,e,i,r,n);case 3:e:{if(aj(e),t===null)throw Error(ae(387));i=e.pendingProps,s=e.memoizedState,r=s.element,II(t,e),gv(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Od(Error(ae(423)),e),e=IP(t,e,i,n,r);break e}else if(i!==r){r=Od(Error(ae(424)),e),e=IP(t,e,i,n,r);break e}else for(ur=Za(e.stateNode.containerInfo.firstChild),mr=e,qt=!0,ls=null,n=TI(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Md(),i===r){e=Yo(t,e,n);break e}yi(t,e,i,n)}e=e.child}return e;case 5:return jI(e),t===null&&wS(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,mS(i,r)?o=null:s!==null&&mS(i,s)&&(e.flags|=32),oj(t,e),yi(t,e,o,n),e.child;case 6:return t===null&&wS(e),null;case 13:return lj(t,e,n);case 4:return D_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Rd(e,null,i,n):yi(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:is(i,r),RP(t,e,i,r,n);case 7:return yi(t,e,e.pendingProps,n),e.child;case 8:return yi(t,e,e.pendingProps.children,n),e.child;case 12:return yi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Lt(pv,i._currentValue),i._currentValue=o,s!==null)if(ys(s.value,o)){if(s.children===r.children&&!Ki.current){e=Yo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Vo(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),xS(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),xS(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}yi(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,id(e,n),r=Kr(r),i=i(r),e.flags|=1,yi(t,e,i,n),e.child;case 14:return i=e.type,r=is(i,e.pendingProps),r=is(i.type,r),TP(t,e,i,r,n);case 15:return rj(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:is(i,r),h0(t,e),e.tag=1,qi(i)?(t=!0,dv(e)):t=!1,id(e,n),tj(e,i,r),kS(e,i,r,n),ES(null,e,i,!0,t,n);case 19:return cj(t,e,n);case 22:return sj(t,e,n)}throw Error(ae(156,e.tag))};function Cj(t,e){return ZO(t,e)}function OG(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(t,e,n,i){return new OG(t,e,n,i)}function Z_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function IG(t){if(typeof t=="function")return Z_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===v_)return 11;if(t===y_)return 14}return 2}function nl(t,e){var n=t.alternate;return n===null?(n=Lr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function g0(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Z_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ou:return wc(n.children,r,s,e);case g_:o=8,r|=8;break;case K1:return t=Lr(12,n,e,r|2),t.elementType=K1,t.lanes=s,t;case q1:return t=Lr(13,n,e,r),t.elementType=q1,t.lanes=s,t;case Y1:return t=Lr(19,n,e,r),t.elementType=Y1,t.lanes=s,t;case jO:return Gy(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case OO:o=10;break e;case IO:o=9;break e;case v_:o=11;break e;case y_:o=14;break e;case ba:o=16,i=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Lr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function wc(t,e,n,i){return t=Lr(7,t,i,e),t.lanes=n,t}function Gy(t,e,n,i){return t=Lr(22,t,i,e),t.elementType=jO,t.lanes=n,t.stateNode={isHidden:!1},t}function Hw(t,e,n){return t=Lr(6,t,null,e),t.lanes=n,t}function Ww(t,e,n){return e=Lr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jG(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cw(0),this.expirationTimes=Cw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cw(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Q_(t,e,n,i,r,s,o,a,l){return t=new jG(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Lr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},L_(s),t}function LG(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Ej(t){if(!t)return cl;t=t._reactInternals;e:{if(Jc(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(qi(n))return EI(t,n,e)}return e}function Aj(t,e,n,i,r,s,o,a,l){return t=Q_(n,i,!0,t,r,s,o,a,l),t.context=Ej(null),n=t.current,i=bi(),r=tl(n),s=Vo(i,r),s.callback=e??null,Qa(n,s,r),t.current.lanes=r,nm(t,r,i),Yi(t,i),t}function Ky(t,e,n,i){var r=e.current,s=bi(),o=tl(r);return n=Ej(n),e.context===null?e.context=n:e.pendingContext=n,e=Vo(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Qa(r,e,o),t!==null&&(vs(t,r,o,s),u0(t,r,o)),o}function _v(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function HP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function eC(t,e){HP(t,e),(t=t.alternate)&&HP(t,e)}function DG(){return null}var Nj=typeof reportError=="function"?reportError:function(t){console.error(t)};function tC(t){this._internalRoot=t}qy.prototype.render=tC.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Ky(t,e,null,null)};qy.prototype.unmount=tC.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ic(function(){Ky(null,t,null,null)}),e[Ko]=null}};function qy(t){this._internalRoot=t}qy.prototype.unstable_scheduleHydration=function(t){if(t){var e=sI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Na.length&&e!==0&&e<Na[n].priority;n++);Na.splice(n,0,t),n===0&&aI(t)}};function nC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function WP(){}function $G(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=_v(o);s.call(c)}}var o=Aj(e,i,t,0,null,!1,!1,"",WP);return t._reactRootContainer=o,t[Ko]=o.current,rp(t.nodeType===8?t.parentNode:t),Ic(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=_v(l);a.call(c)}}var l=Q_(t,0,!1,null,null,!1,!1,"",WP);return t._reactRootContainer=l,t[Ko]=l.current,rp(t.nodeType===8?t.parentNode:t),Ic(function(){Ky(e,l,n,i)}),l}function Xy(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=_v(o);a.call(l)}}Ky(e,o,t,r)}else o=$G(n,e,t,r,i);return _v(o)}iI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nh(e.pendingLanes);n!==0&&(x_(e,n|1),Yi(e,hn()),!(mt&6)&&(Id=hn()+500,Nl()))}break;case 13:Ic(function(){var i=qo(t,1);if(i!==null){var r=bi();vs(i,t,1,r)}}),eC(t,1)}};S_=function(t){if(t.tag===13){var e=qo(t,134217728);if(e!==null){var n=bi();vs(e,t,134217728,n)}eC(t,134217728)}};rI=function(t){if(t.tag===13){var e=tl(t),n=qo(t,e);if(n!==null){var i=bi();vs(n,t,e,i)}eC(t,e)}};sI=function(){return Ct};oI=function(t,e){var n=Ct;try{return Ct=t,e()}finally{Ct=n}};sS=function(t,e,n){switch(e){case"input":if(Z1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=zy(i);if(!r)throw Error(ae(90));DO(i),Z1(i,r)}}}break;case"textarea":FO(t,n);break;case"select":e=n.value,e!=null&&Qu(t,!!n.multiple,e,!1)}};GO=Y_;KO=Ic;var FG={usingClientEntryPoint:!1,Events:[rm,Du,zy,HO,WO,Y_]},Pf={findFiberByHostInstance:uc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zG={bundleType:Pf.bundleType,version:Pf.version,rendererPackageName:Pf.rendererPackageName,rendererConfig:Pf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:na.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=XO(t),t===null?null:t.stateNode},findFiberByHostInstance:Pf.findFiberByHostInstance||DG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ag=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ag.isDisabled&&ag.supportsFiber)try{Ly=ag.inject(zG),ro=ag}catch{}}Sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FG;Sr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nC(e))throw Error(ae(200));return LG(t,e,null,n)};Sr.createRoot=function(t,e){if(!nC(t))throw Error(ae(299));var n=!1,i="",r=Nj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Q_(t,1,!1,null,null,n,!1,i,r),t[Ko]=e.current,rp(t.nodeType===8?t.parentNode:t),new tC(e)};Sr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=XO(e),t=t===null?null:t.stateNode,t};Sr.flushSync=function(t){return Ic(t)};Sr.hydrate=function(t,e,n){if(!Yy(e))throw Error(ae(200));return Xy(null,t,e,!0,n)};Sr.hydrateRoot=function(t,e,n){if(!nC(t))throw Error(ae(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Nj;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Aj(e,null,t,1,n??null,r,!1,s,o),t[Ko]=e.current,rp(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new qy(e)};Sr.render=function(t,e,n){if(!Yy(e))throw Error(ae(200));return Xy(null,t,e,!1,n)};Sr.unmountComponentAtNode=function(t){if(!Yy(t))throw Error(ae(40));return t._reactRootContainer?(Ic(function(){Xy(null,null,t,!1,function(){t._reactRootContainer=null,t[Ko]=null})}),!0):!1};Sr.unstable_batchedUpdates=Y_;Sr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Yy(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Xy(t,e,n,!1,i)};Sr.version="18.3.1-next-f1338f8080-20240426";function Pj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pj)}catch(t){console.error(t)}}Pj(),PO.exports=Sr;var Pl=PO.exports;const BG=Yc(Pl);var Mj,GP=Pl;Mj=GP.createRoot,GP.hydrateRoot;function ve(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function _s(t,e=[]){let n=[];function i(s,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=d=>{var y;const{scope:f,children:p,...g}=d,m=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,v=b.useMemo(()=>g,Object.values(g));return h.jsx(m.Provider,{value:v,children:p})};c.displayName=s+"Provider";function u(d,f){var m;const p=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,g=b.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,UG(r,...e)]}function UG(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function KP(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Jy(...t){return e=>{let n=!1;const i=t.map(r=>{const s=KP(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():KP(t[r],null)}}}}function lt(...t){return b.useCallback(Jy(...t),t)}function jd(t){const e=VG(t),n=b.forwardRef((i,r)=>{const{children:s,...o}=i,a=b.Children.toArray(s),l=a.find(WG);if(l){const c=l.props.children,u=a.map(d=>d===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:r,children:b.isValidElement(c)?b.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:r,children:s})});return n.displayName=`${t}.Slot`,n}function VG(t){const e=b.forwardRef((n,i)=>{const{children:r,...s}=n;if(b.isValidElement(r)){const o=KG(r),a=GG(s,r.props);return r.type!==b.Fragment&&(a.ref=i?Jy(i,o):o),b.cloneElement(r,a)}return b.Children.count(r)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var HG=Symbol("radix.slottable");function WG(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===HG}function GG(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function KG(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function om(t){const e=t+"CollectionProvider",[n,i]=_s(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:y}=m,w=Ft.useRef(null),x=Ft.useRef(new Map).current;return h.jsx(r,{scope:v,itemMap:x,collectionRef:w,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=jd(a),c=Ft.forwardRef((m,v)=>{const{scope:y,children:w}=m,x=s(a,y),S=lt(v,x.collectionRef);return h.jsx(l,{ref:S,children:w})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=jd(u),p=Ft.forwardRef((m,v)=>{const{scope:y,children:w,...x}=m,S=Ft.useRef(null),_=lt(v,S),E=s(u,y);return Ft.useEffect(()=>(E.itemMap.set(S,{ref:S,...x}),()=>void E.itemMap.delete(S))),h.jsx(f,{[d]:"",ref:_,children:w})});p.displayName=u;function g(m){const v=s(t+"CollectionConsumer",m);return Ft.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const x=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((E,C)=>x.indexOf(E.ref.current)-x.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},g,i]}var Qn=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},qG=Py[" useId ".trim().toString()]||(()=>{}),YG=0;function sf(t){const[e,n]=b.useState(qG());return Qn(()=>{n(i=>i??String(YG++))},[t]),e?`radix-${e}`:""}var XG=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ge=XG.reduce((t,e)=>{const n=jd(`Primitive.${e}`),i=b.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function iC(t,e){t&&Pl.flushSync(()=>t.dispatchEvent(e))}function br(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}var JG=Py[" useInsertionEffect ".trim().toString()]||Qn;function ul({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,s,o]=ZG({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:r;{const u=b.useRef(t!==void 0);b.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const c=b.useCallback(u=>{var d;if(a){const f=QG(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else s(u)},[a,t,s,o]);return[l,c]}function ZG({defaultProp:t,onChange:e}){const[n,i]=b.useState(t),r=b.useRef(n),s=b.useRef(e);return JG(()=>{s.current=e},[e]),b.useEffect(()=>{var o;r.current!==n&&((o=s.current)==null||o.call(s,n),r.current=n)},[n,r]),[n,i,s]}function QG(t){return typeof t=="function"}var eK=b.createContext(void 0);function Zy(t){const e=b.useContext(eK);return t||e||"ltr"}var Gw="rovingFocusGroup.onEntryFocus",tK={bubbles:!1,cancelable:!0},am="RovingFocusGroup",[$S,Rj,nK]=om(am),[iK,Qy]=_s(am,[nK]),[rK,sK]=iK(am),Tj=b.forwardRef((t,e)=>h.jsx($S.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx($S.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(oK,{...t,ref:e})})}));Tj.displayName=am;var oK=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=b.useRef(null),p=lt(e,f),g=Zy(s),[m,v]=ul({prop:o,defaultProp:a??null,onChange:l,caller:am}),[y,w]=b.useState(!1),x=br(c),S=Rj(n),_=b.useRef(!1),[E,C]=b.useState(0);return b.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(Gw,x),()=>N.removeEventListener(Gw,x)},[x]),h.jsx(rK,{scope:n,orientation:i,dir:g,loop:r,currentTabStopId:m,onItemFocus:b.useCallback(N=>v(N),[v]),onItemShiftTab:b.useCallback(()=>w(!0),[]),onFocusableItemAdd:b.useCallback(()=>C(N=>N+1),[]),onFocusableItemRemove:b.useCallback(()=>C(N=>N-1),[]),children:h.jsx(Ge.div,{tabIndex:y||E===0?-1:0,"data-orientation":i,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:ve(t.onMouseDown,()=>{_.current=!0}),onFocus:ve(t.onFocus,N=>{const M=!_.current;if(N.target===N.currentTarget&&M&&!y){const j=new CustomEvent(Gw,tK);if(N.currentTarget.dispatchEvent(j),!j.defaultPrevented){const I=S().filter(X=>X.focusable),O=I.find(X=>X.active),H=I.find(X=>X.id===m),K=[O,H,...I].filter(Boolean).map(X=>X.ref.current);jj(K,u)}}_.current=!1}),onBlur:ve(t.onBlur,()=>w(!1))})})}),Oj="RovingFocusGroupItem",Ij=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,children:o,...a}=t,l=sf(),c=s||l,u=sK(Oj,n),d=u.currentTabStopId===c,f=Rj(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:m}=u;return b.useEffect(()=>{if(i)return p(),()=>g()},[i,p,g]),h.jsx($S.ItemSlot,{scope:n,id:c,focusable:i,active:r,children:h.jsx(Ge.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:ve(t.onMouseDown,v=>{i?u.onItemFocus(c):v.preventDefault()}),onFocus:ve(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:ve(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=cK(v,u.orientation,u.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let x=f().filter(S=>S.focusable).map(S=>S.ref.current);if(y==="last")x.reverse();else if(y==="prev"||y==="next"){y==="prev"&&x.reverse();const S=x.indexOf(v.currentTarget);x=u.loop?uK(x,S+1):x.slice(S+1)}setTimeout(()=>jj(x))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:m!=null}):o})})});Ij.displayName=Oj;var aK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function lK(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function cK(t,e,n){const i=lK(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return aK[i]}function jj(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function uK(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Lj=Tj,Dj=Ij;function dK(t,e){return b.useReducer((n,i)=>e[n][i]??n,t)}var ia=t=>{const{present:e,children:n}=t,i=fK(e),r=typeof n=="function"?n({present:i.isPresent}):b.Children.only(n),s=lt(i.ref,hK(r));return typeof n=="function"||i.isPresent?b.cloneElement(r,{ref:s}):null};ia.displayName="Presence";function fK(t){const[e,n]=b.useState(),i=b.useRef(null),r=b.useRef(t),s=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=dK(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=lg(i.current);s.current=a==="mounted"?c:"none"},[a]),Qn(()=>{const c=i.current,u=r.current;if(u!==t){const f=s.current,p=lg(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),Qn(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const m=lg(i.current).includes(p.animationName);if(p.target===e&&m&&(l("ANIMATION_END"),!r.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(s.current=lg(i.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{i.current=c?getComputedStyle(c):null,n(c)},[])}}function lg(t){return(t==null?void 0:t.animationName)||"none"}function hK(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var eb="Tabs",[pK,A0e]=_s(eb,[Qy]),$j=Qy(),[mK,rC]=pK(eb),Fj=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=Zy(a),[d,f]=ul({prop:i,onChange:r,defaultProp:s??"",caller:eb});return h.jsx(mK,{scope:n,baseId:sf(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:h.jsx(Ge.div,{dir:u,"data-orientation":o,...c,ref:e})})});Fj.displayName=eb;var zj="TabsList",Bj=b.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=rC(zj,n),o=$j(n);return h.jsx(Lj,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:h.jsx(Ge.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});Bj.displayName=zj;var Uj="TabsTrigger",v0=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=rC(Uj,n),a=$j(n),l=Hj(o.baseId,i),c=Wj(o.baseId,i),u=i===o.value;return h.jsx(Dj,{asChild:!0,...a,focusable:!r,active:u,children:h.jsx(Ge.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:ve(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:ve(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:ve(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});v0.displayName=Uj;var Vj="TabsContent",y0=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=rC(Vj,n),l=Hj(a.baseId,i),c=Wj(a.baseId,i),u=i===a.value,d=b.useRef(u);return b.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(ia,{present:r||u,children:({present:f})=>h.jsx(Ge.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});y0.displayName=Vj;function Hj(t,e){return`${t}-trigger-${e}`}function Wj(t,e){return`${t}-content-${e}`}const rh={},qP=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,YP=t=>"init"in t,Kw=t=>!!t.write,XP=t=>"v"in t||"e"in t,cg=t=>{if("e"in t)throw t.e;if((rh?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},Cv=new WeakMap,JP=t=>{var e;return Ev(t)&&!!((e=Cv.get(t))!=null&&e[0])},gK=t=>{const e=Cv.get(t);e!=null&&e[0]&&(e[0]=!1,e[1].forEach(n=>n()))},Gj=(t,e)=>{let n=Cv.get(t);if(!n){n=[!0,new Set],Cv.set(t,n);const i=()=>{n[0]=!1};t.then(i,i)}n[1].add(e)},Ev=t=>typeof(t==null?void 0:t.then)=="function",Kj=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},qw=(t,e,n)=>{const i=n(t),r="v"in i,s=i.v;if(Ev(e))for(const o of i.d.keys())Kj(t,e,n(o));i.v=e,delete i.e,(!r||!Object.is(s,i.v))&&(++i.n,Ev(s)&&gK(s))},ZP=(t,e,n)=>{var i;const r=new Set;for(const s of((i=n.get(t))==null?void 0:i.t)||[])n.has(s)&&r.add(s);for(const s of e.p)r.add(s);return r},vK=()=>{const t=new Set,e=()=>{t.forEach(n=>n())};return e.add=n=>(t.add(n),()=>{t.delete(n)}),e},Yw=()=>{const t={},e=new WeakMap,n=i=>{var r,s;(r=e.get(t))==null||r.forEach(o=>o(i)),(s=e.get(i))==null||s.forEach(o=>o())};return n.add=(i,r)=>{const s=i||t,o=(e.has(s)?e:e.set(s,new Set)).get(s);return o.add(r),()=>{o==null||o.delete(r),o.size||e.delete(s)}},n},yK=t=>(t.c||(t.c=Yw()),t.m||(t.m=Yw()),t.u||(t.u=Yw()),t.f||(t.f=vK()),t),bK=Symbol(),wK=(t=new WeakMap,e=new WeakMap,n=new WeakMap,i=new Set,r=new Set,s=new Set,o={},a=(f,...p)=>f.read(...p),l=(f,...p)=>f.write(...p),c=(f,p)=>{var g;return(g=f.unstable_onInit)==null?void 0:g.call(f,p)},u=(f,p)=>{var g;return(g=f.onMount)==null?void 0:g.call(f,p)},...d)=>{const f=d[0]||(C=>{if((rh?"production":void 0)!=="production"&&!C)throw new Error("Atom is undefined or null");let N=t.get(C);return N||(N={d:new Map,p:new Set,n:0},t.set(C,N),c==null||c(C,E)),N}),p=d[1]||(()=>{const C=[],N=M=>{try{M()}catch(j){C.push(j)}};do{o.f&&N(o.f);const M=new Set,j=M.add.bind(M);i.forEach(I=>{var O;return(O=e.get(I))==null?void 0:O.l.forEach(j)}),i.clear(),s.forEach(j),s.clear(),r.forEach(j),r.clear(),M.forEach(N),i.size&&g()}while(i.size||s.size||r.size);if(C.length)throw new AggregateError(C)}),g=d[2]||(()=>{const C=[],N=new WeakSet,M=new WeakSet,j=Array.from(i);for(;j.length;){const I=j[j.length-1],O=f(I);if(M.has(I)){j.pop();continue}if(N.has(I)){if(n.get(I)===O.n)C.push([I,O]);else if((rh?"production":void 0)!=="production"&&n.has(I))throw new Error("[Bug] invalidated atom exists");M.add(I),j.pop();continue}N.add(I);for(const H of ZP(I,O,e))N.has(H)||j.push(H)}for(let I=C.length-1;I>=0;--I){const[O,H]=C[I];let D=!1;for(const K of H.d.keys())if(K!==O&&i.has(K)){D=!0;break}D&&(m(O),w(O)),n.delete(O)}}),m=d[3]||(C=>{var N;const M=f(C);if(XP(M)&&(e.has(C)&&n.get(C)!==M.n||Array.from(M.d).every(([te,U])=>m(te).n===U)))return M;M.d.clear();let j=!0;const I=()=>{e.has(C)&&(w(C),g(),p())},O=te=>{var U;if(qP(C,te)){const ie=f(te);if(!XP(ie))if(YP(te))qw(te,te.init,f);else throw new Error("no atom init");return cg(ie)}const z=m(te);try{return cg(z)}finally{M.d.set(te,z.n),JP(M.v)&&Kj(C,M.v,z),(U=e.get(te))==null||U.t.add(C),j||I()}};let H,D;const K={get signal(){return H||(H=new AbortController),H.signal},get setSelf(){return(rh?"production":void 0)!=="production"&&!Kw(C)&&console.warn("setSelf function cannot be used with read-only atom"),!D&&Kw(C)&&(D=(...te)=>{if((rh?"production":void 0)!=="production"&&j&&console.warn("setSelf function cannot be called in sync"),!j)try{return y(C,...te)}finally{g(),p()}}),D}},X=M.n;try{const te=a(C,O,K);return qw(C,te,f),Ev(te)&&(Gj(te,()=>H==null?void 0:H.abort()),te.then(I,I)),M}catch(te){return delete M.v,M.e=te,++M.n,M}finally{j=!1,X!==M.n&&n.get(C)===X&&(n.set(C,M.n),i.add(C),(N=o.c)==null||N.call(o,C))}}),v=d[4]||(C=>{const N=[C];for(;N.length;){const M=N.pop(),j=f(M);for(const I of ZP(M,j,e)){const O=f(I);n.set(I,O.n),N.push(I)}}}),y=d[5]||((C,...N)=>{let M=!0;const j=O=>cg(m(O)),I=(O,...H)=>{var D;const K=f(O);try{if(qP(C,O)){if(!YP(O))throw new Error("atom not writable");const X=K.n,te=H[0];qw(O,te,f),w(O),X!==K.n&&(i.add(O),(D=o.c)==null||D.call(o,O),v(O));return}else return y(O,...H)}finally{M||(g(),p())}};try{return l(C,j,I,...N)}finally{M=!1}}),w=d[6]||(C=>{var N;const M=f(C),j=e.get(C);if(j&&!JP(M.v)){for(const[I,O]of M.d)if(!j.d.has(I)){const H=f(I);x(I).t.add(C),j.d.add(I),O!==H.n&&(i.add(I),(N=o.c)==null||N.call(o,I),v(I))}for(const I of j.d||[])if(!M.d.has(I)){j.d.delete(I);const O=S(I);O==null||O.t.delete(C)}}}),x=d[7]||(C=>{var N;const M=f(C);let j=e.get(C);if(!j){m(C);for(const I of M.d.keys())x(I).t.add(C);if(j={l:new Set,d:new Set(M.d.keys()),t:new Set},e.set(C,j),(N=o.m)==null||N.call(o,C),Kw(C)){const I=()=>{let O=!0;const H=(...D)=>{try{return y(C,...D)}finally{O||(g(),p())}};try{const D=u(C,H);D&&(j.u=()=>{O=!0;try{D()}finally{O=!1}})}finally{O=!1}};r.add(I)}}return j}),S=d[8]||(C=>{var N;const M=f(C);let j=e.get(C);if(j&&!j.l.size&&!Array.from(j.t).some(I=>{var O;return(O=e.get(I))==null?void 0:O.d.has(C)})){j.u&&s.add(j.u),j=void 0,e.delete(C),(N=o.u)==null||N.call(o,C);for(const I of M.d.keys()){const O=S(I);O==null||O.t.delete(C)}return}return j}),_=[t,e,n,i,r,s,o,a,l,c,u,f,p,g,m,v,y,w,x,S],E={get:C=>cg(m(C)),set:(C,...N)=>{try{return y(C,...N)}finally{g(),p()}},sub:(C,N)=>{const j=x(C).l;return j.add(N),p(),()=>{j.delete(N),S(C),p()}}};return Object.defineProperty(E,bK,{value:_}),E},qj=wK,xK=yK,QP=Gj,sC={};let SK=0;function ue(t,e){const n=`atom${++SK}`,i={toString(){return(sC?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?i.read=t:(i.init=t,i.read=kK,i.write=_K),e&&(i.write=e),i}function kK(t){return t(this)}function _K(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const CK=()=>{let t=0;const e=xK({}),n=new WeakMap,i=new WeakMap,r=qj(n,i,void 0,void 0,void 0,void 0,e,void 0,(a,l,c,...u)=>t?c(a,...u):a.write(l,c,...u)),s=new Set;return e.m.add(void 0,a=>{s.add(a);const l=n.get(a);l.m=i.get(a)}),e.u.add(void 0,a=>{s.delete(a);const l=n.get(a);delete l.m}),Object.assign(r,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),n),dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:a=>{const l={read:()=>null,write:(c,u)=>{++t;try{for(const[d,f]of a)"init"in d&&u(d,f)}finally{--t}}};r.set(l)}})};function oC(){return(sC?"production":void 0)!=="production"?CK():qj()}let Mf;function EK(){return Mf||(Mf=oC(),(sC?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Mf),globalThis.__JOTAI_DEFAULT_STORE__!==Mf&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Mf}const AK={},Yj=b.createContext(void 0);function Xj(t){return b.useContext(Yj)||EK()}function NK({children:t,store:e}){const n=b.useRef(void 0);return!e&&!n.current&&(n.current=oC()),b.createElement(Yj.Provider,{value:e||n.current},t)}const FS=t=>typeof(t==null?void 0:t.then)=="function",zS=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},PK=Ft.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(zS(t),t)}),Xw=new WeakMap,e3=(t,e)=>{let n=Xw.get(t);return n||(n=new Promise((i,r)=>{let s=t;const o=c=>u=>{s===c&&i(u)},a=c=>u=>{s===c&&r(u)},l=()=>{try{const c=e();FS(c)?(Xw.set(c,n),s=c,c.then(o(c),a(c)),QP(c,l)):i(c)}catch(c){r(c)}};t.then(o(t),a(t)),QP(t,l)}),Xw.set(t,n)),n};function it(t,e){const{delay:n,unstable_promiseStatus:i=!Ft.use}={},r=Xj(),[[s,o,a],l]=b.useReducer(u=>{const d=r.get(t);return Object.is(u[0],d)&&u[1]===r&&u[2]===t?u:[d,r,t]},void 0,()=>[r.get(t),r,t]);let c=s;if((o!==r||a!==t)&&(l(),c=r.get(t)),b.useEffect(()=>{const u=r.sub(t,()=>{if(i)try{const d=r.get(t);FS(d)&&zS(e3(d,()=>r.get(t)))}catch{}if(typeof n=="number"){setTimeout(l,n);return}l()});return l(),u},[r,t,n,i]),b.useDebugValue(c),FS(c)){const u=e3(c,()=>r.get(t));return i&&zS(u),PK(u)}return c}function hp(t,e){const n=Xj();return b.useCallback((...r)=>{if((AK?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function lm(t,e){return[it(t),hp(t)]}const{createElement:Ld,createContext:MK,forwardRef:Jj,useCallback:Mi,useContext:Zj,useEffect:xc,useImperativeHandle:Qj,useLayoutEffect:RK,useMemo:TK,useRef:or,useState:Av}=Py,t3=Py.useId,tb=MK(null);tb.displayName="PanelGroupContext";const pp=RK,OK=typeof t3=="function"?t3:()=>null;let IK=0;function aC(t=null){const e=OK(),n=or(t||e||null);return n.current===null&&(n.current=""+IK++),t??n.current}function eL({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:f,style:p,tagName:g="div",...m}){const v=Zj(tb);if(v===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:w,getPanelSize:x,getPanelStyle:S,groupId:_,isPanelCollapsed:E,reevaluatePanelConstraints:C,registerPanel:N,resizePanel:M,unregisterPanel:j}=v,I=aC(o),O=or({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:I,idIsFromProps:o!==void 0,order:f});or({didLogMissingDefaultSizeWarning:!1}),pp(()=>{const{callbacks:D,constraints:K}=O.current,X={...K};O.current.id=I,O.current.idIsFromProps=o!==void 0,O.current.order=f,D.onCollapse=c,D.onExpand=u,D.onResize=d,K.collapsedSize=n,K.collapsible=i,K.defaultSize=r,K.maxSize=a,K.minSize=l,(X.collapsedSize!==K.collapsedSize||X.collapsible!==K.collapsible||X.maxSize!==K.maxSize||X.minSize!==K.minSize)&&C(O.current,X)}),pp(()=>{const D=O.current;return N(D),()=>{j(D)}},[f,I,N,j]),Qj(s,()=>({collapse:()=>{y(O.current)},expand:()=>{w(O.current)},getId(){return I},getSize(){return x(O.current)},isCollapsed(){return E(O.current)},isExpanded(){return!E(O.current)},resize:D=>{M(O.current,D)}}),[y,w,x,E,I,M]);const H=S(O.current,r);return Ld(g,{...m,children:t,className:e,style:{...H,...p},"data-panel":"","data-panel-id":I,"data-panel-group-id":_,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const b0=Jj((t,e)=>Ld(eL,{...t,forwardedRef:e}));eL.displayName="Panel";b0.displayName="forwardRef(Panel)";function et(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const tL=10;function mp(t,e,n=tL){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function ir(t,e,n){return mp(t,e,n)===0}function Hu({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];et(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if(mp(n,a)<0)if(s){const l=(r+a)/2;mp(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(tL)),n}function sh({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(ir(t,0))return e;const s=[...e],[o,a]=i;et(o!=null),et(a!=null);let l=0;if(r==="keyboard"){{const u=t<0?a:o,d=n[u];if(et(d),d.collapsible){const f=e[u];et(f!=null);const p=n[u];et(p);const{collapsedSize:g=0,minSize:m=0}=p;if(ir(f,g)){const v=m-f;mp(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}{const u=t<0?o:a,d=n[u];et(d);const{collapsible:f}=d;if(f){const p=e[u];et(p!=null);const g=n[u];et(g);const{collapsedSize:m=0,minSize:v=0}=g;if(ir(p,v)){const y=p-m;mp(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}}{const u=t<0?1:-1;let d=t<0?a:o,f=0;for(;;){const g=e[d];et(g!=null);const v=Hu({panelConstraints:n,panelIndex:d,size:100})-g;if(f+=v,d+=u,d<0||d>=n.length)break}const p=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-p:p}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(l),p=e[d];et(p!=null);const g=p-f,m=Hu({panelConstraints:n,panelIndex:d,size:g});if(!ir(p,m)&&(l+=p-m,s[d]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(ir(l,0))return e;{const u=t<0?a:o,d=e[u];et(d!=null);const f=d+l,p=Hu({panelConstraints:n,panelIndex:u,size:f});if(s[u]=p,!ir(p,f)){let g=f-p,v=t<0?a:o;for(;v>=0&&v<n.length;){const y=s[v];et(y!=null);const w=y+g,x=Hu({panelConstraints:n,panelIndex:v,size:w});if(ir(y,x)||(g-=x-y,s[v]=x),ir(g,0))break;t>0?v--:v++}}}const c=s.reduce((u,d)=>d+u,0);return ir(c,100)?s:e}function jK({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];et(a!=null),e.forEach((d,f)=>{const{constraints:p}=d,{maxSize:g=100,minSize:m=0}=p;f===a?(i=m,r=g):(s+=m,o+=g)});const l=Math.min(r,100-s),c=Math.max(i,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function gp(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function nL(t,e,n=document){const r=gp(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function iL(t,e,n){const i=nL(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function rL(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function nb(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function LK(t,e,n,i=document){var r,s,o,a;const l=nb(e,i),c=gp(t,i),u=l?c.indexOf(l):-1,d=(r=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,f=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,f]}function DK({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){or({didWarnAboutMissingResizeHandle:!1}),pp(()=>{if(!s)return;const a=gp(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=jK({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const p=r[l];et(p),f.setAttribute("aria-controls",p.id),f.setAttribute("aria-valuemax",""+Math.round(c)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),xc(()=>{if(!s)return;const a=e.current;et(a);const{panelDataArray:l}=a,c=rL(n,s);et(c!=null,`No group found for id "${n}"`);const u=gp(n,s);et(u);const d=u.map(f=>{const p=f.getAttribute("data-panel-resize-handle-id");et(p);const[g,m]=LK(n,p,l,s);if(g==null||m==null)return()=>{};const v=y=>{if(!y.defaultPrevented)switch(y.key){case"Enter":{y.preventDefault();const w=l.findIndex(x=>x.id===g);if(w>=0){const x=l[w];et(x);const S=i[w],{collapsedSize:_=0,collapsible:E,minSize:C=0}=x.constraints;if(S!=null&&E){const N=sh({delta:ir(S,_)?C-_:_-S,layout:i,panelConstraints:l.map(M=>M.constraints),pivotIndices:iL(n,p,s),trigger:"keyboard"});i!==N&&o(N)}}break}}};return f.addEventListener("keydown",v),()=>{f.removeEventListener("keydown",v)}});return()=>{d.forEach(f=>f())}},[s,t,e,n,i,r,o])}function n3(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function sL(t){return t.type==="keydown"}function oL(t){return t.type.startsWith("mouse")}function aL(t){return t.type.startsWith("touch")}function lL(t,e){const n=t==="horizontal";if(oL(e))return n?e.clientX:e.clientY;if(aL(e)){const i=e.touches[0];return et(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function $K(t,e,n,i,r){const s=n==="horizontal",o=nb(e,r);et(o);const a=o.getAttribute("data-panel-group-id");et(a);let{initialCursorPosition:l}=i;const c=lL(n,t),u=rL(a,r);et(u);const d=u.getBoundingClientRect(),f=s?d.width:d.height;return(c-l)/f*100}function FK(t,e,n,i,r,s){if(sL(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:$K(t,e,n,i,s)}function zK({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];et(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];et(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,c=r/l;i++,e[s]=c,r-=c}return e}function su(t,e,n){e.forEach((i,r)=>{const s=t[r];et(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:f,onExpand:p,onResize:g}=o;g&&g(i,d),u&&(f||p)&&(p&&(d==null||d===c)&&i!==c&&p(),f&&(d==null||d!==c)&&i===c&&f())}})}function ug(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function BK({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let BS=null,hc=null;function cL(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function UK(){hc!==null&&(document.head.removeChild(hc),BS=null,hc=null)}function Jw(t){if(BS===t)return;BS=t;const e=cL(t);hc===null&&(hc=document.createElement("style"),document.head.appendChild(hc)),hc.innerHTML=`*{cursor: ${e}!important;}`}function VK(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function i3(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function uL(t){return`react-resizable-panels:${t}`}function dL(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function fL(t,e){try{const n=uL(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function HK(t,e,n){var i,r;const s=(i=fL(t,n))!==null&&i!==void 0?i:{},o=dL(e);return(r=s[o])!==null&&r!==void 0?r:null}function WK(t,e,n,i,r){var s;const o=uL(t),a=dL(e),l=(s=fL(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function r3({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!ir(i,100))for(let s=0;s<e.length;s++){const o=n[s];et(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];et(o!=null);const a=Hu({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!ir(r,0))for(let s=0;s<e.length;s++){const o=n[s];et(o!=null);const a=o+r,l=Hu({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,ir(r,0)))break}return n}const GK=100,oh={getItem:t=>(i3(oh),oh.getItem(t)),setItem:(t,e)=>{i3(oh),oh.setItem(t,e)}},s3={};function hL({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=oh,style:c,tagName:u="div",...d}){const f=aC(s),p=or(null),[g,m]=Av(null),[v,y]=Av([]),w=or({}),x=or(new Map),S=or(0),_=or({autoSaveId:t,direction:i,dragState:g,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),E=or({layout:v,panelDataArray:[],panelDataArrayChanged:!1});or({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),Qj(r,()=>({getId:()=>_.current.id,getLayout:()=>{const{layout:J}=E.current;return J},setLayout:J=>{const{onLayout:le}=_.current,{layout:F,panelDataArray:$}=E.current,V=r3({layout:J,panelConstraints:$.map(k=>k.constraints)});n3(F,V)||(y(V),E.current.layout=V,le&&le(V),su($,V,w.current))}}),[]),pp(()=>{_.current.autoSaveId=t,_.current.direction=i,_.current.dragState=g,_.current.id=f,_.current.onLayout=o,_.current.storage=l}),DK({committedValuesRef:_,eagerValuesRef:E,groupId:f,layout:v,panelDataArray:E.current.panelDataArray,setLayout:y,panelGroupElement:p.current}),xc(()=>{const{panelDataArray:J}=E.current;if(t){if(v.length===0||v.length!==J.length)return;let le=s3[t];le==null&&(le=VK(WK,GK),s3[t]=le);const F=[...J],$=new Map(x.current);le(t,F,$,v,l)}},[t,v,l]),xc(()=>{});const C=Mi(J=>{const{onLayout:le}=_.current,{layout:F,panelDataArray:$}=E.current;if(J.constraints.collapsible){const V=$.map(R=>R.constraints),{collapsedSize:k=0,panelSize:P,pivotIndices:L}=Hl($,J,F);if(et(P!=null),P!==k){x.current.set(J.id,P);const Y=bu($,J)===$.length-1?P-k:k-P,G=sh({delta:Y,layout:F,panelConstraints:V,pivotIndices:L,trigger:"imperative-api"});ug(F,G)||(y(G),E.current.layout=G,le&&le(G),su($,G,w.current))}}},[]),N=Mi(J=>{const{onLayout:le}=_.current,{layout:F,panelDataArray:$}=E.current;if(J.constraints.collapsible){const V=$.map(Y=>Y.constraints),{collapsedSize:k=0,panelSize:P,minSize:L=0,pivotIndices:R}=Hl($,J,F);if(P===k){const Y=x.current.get(J.id),G=Y!=null&&Y>=L?Y:L,Z=bu($,J)===$.length-1?P-G:G-P,Ne=sh({delta:Z,layout:F,panelConstraints:V,pivotIndices:R,trigger:"imperative-api"});ug(F,Ne)||(y(Ne),E.current.layout=Ne,le&&le(Ne),su($,Ne,w.current))}}},[]),M=Mi(J=>{const{layout:le,panelDataArray:F}=E.current,{panelSize:$}=Hl(F,J,le);return et($!=null),$},[]),j=Mi((J,le)=>{const{panelDataArray:F}=E.current,$=bu(F,J);return BK({defaultSize:le,dragState:g,layout:v,panelData:F,panelIndex:$})},[g,v]),I=Mi(J=>{const{layout:le,panelDataArray:F}=E.current,{collapsedSize:$=0,collapsible:V,panelSize:k}=Hl(F,J,le);return V===!0&&k===$},[]),O=Mi(J=>{const{layout:le,panelDataArray:F}=E.current,{collapsedSize:$=0,collapsible:V,panelSize:k}=Hl(F,J,le);return et(k!=null),!V||k>$},[]),H=Mi(J=>{const{panelDataArray:le}=E.current;le.push(J),le.sort((F,$)=>{const V=F.order,k=$.order;return V==null&&k==null?0:V==null?-1:k==null?1:V-k}),E.current.panelDataArrayChanged=!0},[]);pp(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:J,onLayout:le,storage:F}=_.current,{layout:$,panelDataArray:V}=E.current;let k=null;if(J){const L=HK(J,V,F);L&&(x.current=new Map(Object.entries(L.expandToSizes)),k=L.layout)}k==null&&(k=zK({panelDataArray:V}));const P=r3({layout:k,panelConstraints:V.map(L=>L.constraints)});n3($,P)||(y(P),E.current.layout=P,le&&le(P),su(V,P,w.current))}});const D=Mi(J=>function(F){F.preventDefault();const $=p.current;if(!$)return()=>null;const{direction:V,dragState:k,id:P,keyboardResizeBy:L,onLayout:R}=_.current,{layout:Y,panelDataArray:G}=E.current,{initialLayout:ne}=k??{},Z=iL(P,J,$);let Ne=FK(F,J,V,k,L,$);if(Ne===0)return;const ze=V==="horizontal";document.dir==="rtl"&&ze&&(Ne=-Ne);const Ue=G.map(me=>me.constraints),De=sh({delta:Ne,layout:ne??Y,panelConstraints:Ue,pivotIndices:Z,trigger:sL(F)?"keyboard":"mouse-or-touch"}),Je=!ug(Y,De);(oL(F)||aL(F))&&S.current!=Ne&&(S.current=Ne,Jw(Je?ze?"horizontal":"vertical":ze?Ne<0?"horizontal-min":"horizontal-max":Ne<0?"vertical-min":"vertical-max")),Je&&(y(De),E.current.layout=De,R&&R(De),su(G,De,w.current))},[]),K=Mi((J,le)=>{const{onLayout:F}=_.current,{layout:$,panelDataArray:V}=E.current,k=V.map(ne=>ne.constraints),{panelSize:P,pivotIndices:L}=Hl(V,J,$);et(P!=null);const Y=bu(V,J)===V.length-1?P-le:le-P,G=sh({delta:Y,layout:$,panelConstraints:k,pivotIndices:L,trigger:"imperative-api"});ug($,G)||(y(G),E.current.layout=G,F&&F(G),su(V,G,w.current))},[]),X=Mi((J,le)=>{const{layout:F,panelDataArray:$}=E.current,{collapsedSize:V=0,collapsible:k}=le,{collapsedSize:P=0,collapsible:L,maxSize:R=100,minSize:Y=0}=J.constraints,{panelSize:G}=Hl($,J,F);et(G!=null),k&&L&&G===V?V!==P&&K(J,P):G<Y?K(J,Y):G>R&&K(J,R)},[K]),te=Mi((J,le)=>{const{direction:F}=_.current,{layout:$}=E.current;if(!p.current)return;const V=nb(J,p.current);et(V);const k=lL(F,le);m({dragHandleId:J,dragHandleRect:V.getBoundingClientRect(),initialCursorPosition:k,initialLayout:$})},[]),U=Mi(()=>{UK(),m(null)},[]),z=Mi(J=>{const{panelDataArray:le}=E.current,F=bu(le,J);F>=0&&(le.splice(F,1),delete w.current[J.id],E.current.panelDataArrayChanged=!0)},[]),ie=TK(()=>({collapsePanel:C,direction:i,dragState:g,expandPanel:N,getPanelSize:M,getPanelStyle:j,groupId:f,isPanelCollapsed:I,isPanelExpanded:O,reevaluatePanelConstraints:X,registerPanel:H,registerResizeHandle:D,resizePanel:K,startDragging:te,stopDragging:U,unregisterPanel:z,panelGroupElement:p.current}),[C,g,i,N,M,j,f,I,O,X,H,D,K,te,U,z]),ye={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Ld(tb.Provider,{value:ie},Ld(u,{...d,children:e,className:n,style:{...ye,...c},ref:p,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":f}))}const pL=Jj((t,e)=>Ld(hL,{...t,forwardedRef:e}));hL.displayName="PanelGroup";pL.displayName="forwardRef(PanelGroup)";function bu(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Hl(t,e,n){const i=bu(t,e),s=i===t.length-1?[i-1,i]:[i,i+1],o=n[i];return{...e.constraints,panelSize:o,pivotIndices:s}}function KK({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){xc(()=>{if(t||n==null||i==null)return;const r=nb(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");et(a);const l=gp(a,i),c=nL(a,e,i);et(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function US({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=or(null),u=or({onDragging:r});xc(()=>{u.current.onDragging=r});const d=Zj(tb);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,dragState:p,groupId:g,registerResizeHandle:m,startDragging:v,stopDragging:y,panelGroupElement:w}=d,x=aC(i),S=(p==null?void 0:p.dragHandleId)===x,[_,E]=Av(!1),[C,N]=Av(null),M=Mi(()=>{const I=c.current;et(I),I.blur(),y();const{onDragging:O}=u.current;O&&O(!1)},[y]);xc(()=>{if(n)N(null);else{const I=m(x);N(()=>I)}},[n,x,m]),xc(()=>{if(n||C==null||!S)return;const I=K=>{C(K)},O=K=>{C(K)},H=c.current;et(H);const D=H.ownerDocument;return D.body.addEventListener("contextmenu",M),D.body.addEventListener("mousemove",I),D.body.addEventListener("touchmove",I),D.body.addEventListener("mouseleave",O),window.addEventListener("mouseup",M),window.addEventListener("touchend",M),()=>{D.body.removeEventListener("contextmenu",M),D.body.removeEventListener("mousemove",I),D.body.removeEventListener("touchmove",I),D.body.removeEventListener("mouseleave",O),window.removeEventListener("mouseup",M),window.removeEventListener("touchend",M)}},[f,n,S,C,M]),KK({disabled:n,handleId:x,resizeHandler:C,panelGroupElement:w});const j={cursor:cL(f),touchAction:"none",userSelect:"none"};return Ld(a,{...l,children:t,className:e,onBlur:()=>E(!1),onFocus:()=>E(!0),onMouseDown:I=>{v(x,I.nativeEvent);const O=u.current;et(O);const{onDragging:H}=O;H&&H(!0)},onMouseUp:M,onTouchCancel:M,onTouchEnd:M,onTouchStart:I=>{v(x,I.nativeEvent);const O=u.current;et(O);const{onDragging:H}=O;H&&H(!0)},ref:c,role:"separator",style:{...j,...s},tabIndex:o,"data-panel-group-direction":f,"data-panel-group-id":g,"data-resize-handle":"","data-resize-handle-active":S?"pointer":_?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":x})}US.displayName="PanelResizeHandle";var Ws=function(){return Ws=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ws.apply(this,arguments)};function mL(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function qK(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var YK=function(){};function XK(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function JK(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var gL=typeof window<"u",ZK=gL?window:null,o3=function(t){return!!t.addEventListener},a3=function(t){return!!t.on},QK=function(t,e,n,i){n===void 0&&(n=ZK),b.useEffect(function(){if(e&&n)return o3(n)?XK(n,t,e,i):a3(n)&&n.on(t,e,i),function(){o3(n)?JK(n,t,e,i):a3(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},eq=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},wu=function(t,e,n,i){e===void 0&&(e=YK),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=b.useMemo(function(){var c=eq(t),u=function(d){if(c(d))return e(d)};return u},i);QK(s,l,o,a)},tq=function(t,e){return gL?window.matchMedia(t).matches:!1},nq=function(t,e){var n=b.useState(tq(t)),i=n[0],r=n[1];return b.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addEventListener("change",a),r(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),i};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const iq={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function rq(t,e,n){return(e=oq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l3(Object(n),!0).forEach(function(i){rq(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function sq(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oq(t){var e=sq(t,"string");return typeof e=="symbol"?e:e+""}const c3=()=>{};let lC={},vL={},yL=null,bL={mark:c3,measure:c3};try{typeof window<"u"&&(lC=window),typeof document<"u"&&(vL=document),typeof MutationObserver<"u"&&(yL=MutationObserver),typeof performance<"u"&&(bL=performance)}catch{}const{userAgent:u3=""}=lC.navigator||{},dl=lC,Ut=vL,d3=yL,dg=bL;dl.document;const ra=!!Ut.documentElement&&!!Ut.head&&typeof Ut.addEventListener=="function"&&typeof Ut.createElement=="function",wL=~u3.indexOf("MSIE")||~u3.indexOf("Trident/");var aq=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,lq=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,xL={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},cq={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},SL=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],fi="classic",ib="duotone",uq="sharp",dq="sharp-duotone",kL=[fi,ib,uq,dq],fq={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},hq={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},pq=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),mq={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},gq=["fak","fa-kit","fakd","fa-kit-duotone"],f3={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},vq=["kit"],yq={kit:{"fa-kit":"fak"}},bq=["fak","fakd"],wq={kit:{fak:"fa-kit"}},h3={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},fg={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},xq=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Sq=["fak","fa-kit","fakd","fa-kit-duotone"],kq={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},_q={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},Cq={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},VS={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},Eq=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],HS=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...xq,...Eq],Aq=["solid","regular","light","thin","duotone","brands"],_L=[1,2,3,4,5,6,7,8,9,10],Nq=_L.concat([11,12,13,14,15,16,17,18,19,20]),Pq=[...Object.keys(Cq),...Aq,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",fg.GROUP,fg.SWAP_OPACITY,fg.PRIMARY,fg.SECONDARY].concat(_L.map(t=>"".concat(t,"x"))).concat(Nq.map(t=>"w-".concat(t))),Mq={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Xo="___FONT_AWESOME___",WS=16,CL="fa",EL="svg-inline--fa",jc="data-fa-i2svg",GS="data-fa-pseudo-element",Rq="data-fa-pseudo-element-pending",cC="data-prefix",uC="data-icon",p3="fontawesome-i2svg",Tq="async",Oq=["HTML","HEAD","STYLE","SCRIPT"],AL=(()=>{try{return!0}catch{return!1}})();function cm(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[fi]}})}const NL=oe({},xL);NL[fi]=oe(oe(oe(oe({},{"fa-duotone":"duotone"}),xL[fi]),f3.kit),f3["kit-duotone"]);const Iq=cm(NL),KS=oe({},mq);KS[fi]=oe(oe(oe(oe({},{duotone:"fad"}),KS[fi]),h3.kit),h3["kit-duotone"]);const m3=cm(KS),qS=oe({},VS);qS[fi]=oe(oe({},qS[fi]),wq.kit);const dC=cm(qS),YS=oe({},_q);YS[fi]=oe(oe({},YS[fi]),yq.kit);cm(YS);const jq=aq,PL="fa-layers-text",Lq=lq,Dq=oe({},fq);cm(Dq);const $q=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Zw=cq,Fq=[...vq,...Pq],Mh=dl.FontAwesomeConfig||{};function zq(t){var e=Ut.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function Bq(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}Ut&&typeof Ut.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=Bq(zq(n));r!=null&&(Mh[i]=r)});const ML={styleDefault:"solid",familyDefault:fi,cssPrefix:CL,replacementClass:EL,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Mh.familyPrefix&&(Mh.cssPrefix=Mh.familyPrefix);const Dd=oe(oe({},ML),Mh);Dd.autoReplaceSvg||(Dd.observeMutations=!1);const Oe={};Object.keys(ML).forEach(t=>{Object.defineProperty(Oe,t,{enumerable:!0,set:function(e){Dd[t]=e,Rh.forEach(n=>n(Oe))},get:function(){return Dd[t]}})});Object.defineProperty(Oe,"familyPrefix",{enumerable:!0,set:function(t){Dd.cssPrefix=t,Rh.forEach(e=>e(Oe))},get:function(){return Dd.cssPrefix}});dl.FontAwesomeConfig=Oe;const Rh=[];function Uq(t){return Rh.push(t),()=>{Rh.splice(Rh.indexOf(t),1)}}const ha=WS,Js={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Vq(t){if(!t||!ra)return;const e=Ut.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=Ut.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return Ut.head.insertBefore(e,i),t}const Hq="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function vp(){let t=12,e="";for(;t-- >0;)e+=Hq[Math.random()*62|0];return e}function of(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function fC(t){return t.classList?of(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function RL(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Wq(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(RL(t[n]),'" '),"").trim()}function rb(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function hC(t){return t.size!==Js.size||t.x!==Js.x||t.y!==Js.y||t.rotate!==Js.rotate||t.flipX||t.flipY}function Gq(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:c}}function Kq(t){let{transform:e,width:n=WS,height:i=WS,startCentered:r=!1}=t,s="";return r&&wL?s+="translate(".concat(e.x/ha-n/2,"em, ").concat(e.y/ha-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/ha,"em), calc(-50% + ").concat(e.y/ha,"em)) "):s+="translate(".concat(e.x/ha,"em, ").concat(e.y/ha,"em) "),s+="scale(".concat(e.size/ha*(e.flipX?-1:1),", ").concat(e.size/ha*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var qq=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function TL(){const t=CL,e=EL,n=Oe.cssPrefix,i=Oe.replacementClass;let r=qq;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let g3=!1;function Qw(){Oe.autoAddCss&&!g3&&(Vq(TL()),g3=!0)}var Yq={mixout(){return{dom:{css:TL,insertCss:Qw}}},hooks(){return{beforeDOMElementCreation(){Qw()},beforeI2svg(){Qw()}}}};const Jo=dl||{};Jo[Xo]||(Jo[Xo]={});Jo[Xo].styles||(Jo[Xo].styles={});Jo[Xo].hooks||(Jo[Xo].hooks={});Jo[Xo].shims||(Jo[Xo].shims=[]);var Zs=Jo[Xo];const OL=[],IL=function(){Ut.removeEventListener("DOMContentLoaded",IL),Nv=1,OL.map(t=>t())};let Nv=!1;ra&&(Nv=(Ut.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ut.readyState),Nv||Ut.addEventListener("DOMContentLoaded",IL));function Xq(t){ra&&(Nv?setTimeout(t,0):OL.push(t))}function um(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?RL(t):"<".concat(e," ").concat(Wq(n),">").concat(i.map(um).join(""),"</").concat(e,">")}function v3(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var ex=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,c,u;for(i===void 0?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function Jq(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function XS(t){const e=Jq(t);return e.length===1?e[0].toString(16):null}function Zq(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function y3(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function JS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=y3(e);typeof Zs.hooks.addPack=="function"&&!i?Zs.hooks.addPack(t,y3(e)):Zs.styles[t]=oe(oe({},Zs.styles[t]||{}),r),t==="fas"&&JS("fa",e)}const{styles:yp,shims:Qq}=Zs,jL=Object.keys(dC),eY=jL.reduce((t,e)=>(t[e]=Object.keys(dC[e]),t),{});let pC=null,LL={},DL={},$L={},FL={},zL={};function tY(t){return~Fq.indexOf(t)}function nY(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!tY(r)?r:null}const BL=()=>{const t=i=>ex(yp,(r,s,o)=>(r[o]=ex(s,i,{}),r),{});LL=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),DL=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),zL=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in yp||Oe.autoFetchSvg,n=ex(Qq,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});$L=n.names,FL=n.unicodes,pC=sb(Oe.styleDefault,{family:Oe.familyDefault})};Uq(t=>{pC=sb(t.styleDefault,{family:Oe.familyDefault})});BL();function mC(t,e){return(LL[t]||{})[e]}function iY(t,e){return(DL[t]||{})[e]}function pc(t,e){return(zL[t]||{})[e]}function UL(t){return $L[t]||{prefix:null,iconName:null}}function rY(t){const e=FL[t],n=mC("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function fl(){return pC}const VL=()=>({prefix:null,iconName:null,rest:[]});function sY(t){let e=fi;const n=jL.reduce((i,r)=>(i[r]="".concat(Oe.cssPrefix,"-").concat(r),i),{});return kL.forEach(i=>{(t.includes(n[i])||t.some(r=>eY[i].includes(r)))&&(e=i)}),e}function sb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=fi}=e,i=Iq[n][t];if(n===ib&&!t)return"fad";const r=m3[n][t]||m3[n][i],s=t in Zs.styles?t:null;return r||s||null}function oY(t){let e=[],n=null;return t.forEach(i=>{const r=nY(Oe.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function b3(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function ob(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=HS.concat(Sq),s=b3(t.filter(d=>r.includes(d))),o=b3(t.filter(d=>!HS.includes(d))),a=s.filter(d=>(i=d,!SL.includes(d))),[l=null]=a,c=sY(s),u=oe(oe({},oY(o)),{},{prefix:sb(l,{family:c})});return oe(oe(oe({},u),uY({values:t,family:c,styles:yp,config:Oe,canonical:u,givenPrefix:i})),aY(n,i,u))}function aY(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?UL(r):{},o=pc(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!yp.far&&yp.fas&&!Oe.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const lY=kL.filter(t=>t!==fi||t!==ib),cY=Object.keys(VS).filter(t=>t!==fi).map(t=>Object.keys(VS[t])).flat();function uY(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===ib,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||c||u)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&lY.includes(n)&&(Object.keys(s).find(f=>cY.includes(f))||o.autoFetchSvg)){const f=pq.get(n).defaultShortPrefixId;i.prefix=f,i.iconName=pc(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=fl()||"fas"),i}class dY{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=oe(oe({},this.definitions[s]||{}),r[s]),JS(s,r[s]);const o=dC[fi][s];o&&JS(o,r[s]),BL()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=a)}),e[s][o]=a}),e}}let w3=[],Wu={};const sd={},fY=Object.keys(sd);function hY(t,e){let{mixoutsTo:n}=e;return w3=t,Wu={},Object.keys(sd).forEach(i=>{fY.indexOf(i)===-1&&delete sd[i]}),w3.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{Wu[o]||(Wu[o]=[]),Wu[o].push(s[o])})}i.provides&&i.provides(sd)}),n}function ZS(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(Wu[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function Lc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(Wu[t]||[]).forEach(s=>{s.apply(null,n)})}function hl(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return sd[t]?sd[t].apply(null,e):void 0}function QS(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||fl();if(e)return e=pc(n,e)||e,v3(HL.definitions,n,e)||v3(Zs.styles,n,e)}const HL=new dY,pY=()=>{Oe.autoReplaceSvg=!1,Oe.observeMutations=!1,Lc("noAuto")},mY={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ra?(Lc("beforeI2svg",t),hl("pseudoElements2svg",t),hl("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Oe.autoReplaceSvg===!1&&(Oe.autoReplaceSvg=!0),Oe.observeMutations=!0,Xq(()=>{vY({autoReplaceSvgRoot:e}),Lc("watch",t)})}},gY={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:pc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=sb(t[0]);return{prefix:n,iconName:pc(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Oe.cssPrefix,"-"))>-1||t.match(jq))){const e=ob(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||fl(),iconName:pc(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=fl();return{prefix:e,iconName:pc(e,t)||t}}}},_r={noAuto:pY,config:Oe,dom:mY,parse:gY,library:HL,findIconDefinition:QS,toHtml:um},vY=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Ut}=t;(Object.keys(Zs.styles).length>0||Oe.autoFetchSvg)&&ra&&Oe.autoReplaceSvg&&_r.dom.i2svg({node:e})};function ab(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>um(n))}}),Object.defineProperty(t,"node",{get:function(){if(!ra)return;const n=Ut.createElement("div");return n.innerHTML=t.html,n.children}}),t}function yY(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(hC(o)&&n.found&&!i.found){const{width:a,height:l}=n,c={x:a/l/2,y:.5};r.style=rb(oe(oe({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function bY(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(Oe.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:oe(oe({},r),{},{id:o}),children:i}]}]}function gC(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:d=!1}=t,{width:f,height:p}=n.found?n:e,g=bq.includes(i),m=[Oe.replacementClass,r?"".concat(Oe.cssPrefix,"-").concat(r):""].filter(_=>u.classes.indexOf(_)===-1).filter(_=>_!==""||!!_).concat(u.classes).join(" ");let v={children:[],attributes:oe(oe({},u.attributes),{},{"data-prefix":i,"data-icon":r,class:m,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(p)})};const y=g&&!~u.classes.indexOf("fa-fw")?{width:"".concat(f/p*16*.0625,"em")}:{};d&&(v.attributes[jc]=""),a&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(c||vp())},children:[a]}),delete v.attributes.title);const w=oe(oe({},v),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:oe(oe({},y),u.styles)}),{children:x,attributes:S}=n.found&&e.found?hl("generateAbstractMask",w)||{children:[],attributes:{}}:hl("generateAbstractIcon",w)||{children:[],attributes:{}};return w.children=x,w.attributes=S,o?bY(w):yY(w)}function x3(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=oe(oe(oe({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[jc]="");const c=oe({},o.styles);hC(r)&&(c.transform=Kq({transform:r,startCentered:!0,width:n,height:i}),c["-webkit-transform"]=c.transform);const u=rb(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function wY(t){const{content:e,title:n,extra:i}=t,r=oe(oe(oe({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=rb(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:tx}=Zs;function e2(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat(Oe.cssPrefix,"-").concat(Zw.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Oe.cssPrefix,"-").concat(Zw.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(Oe.cssPrefix,"-").concat(Zw.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const xY={found:!1,width:512,height:512};function SY(t,e){!AL&&!Oe.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function t2(t,e){let n=e;return e==="fa"&&Oe.styleDefault!==null&&(e=fl()),new Promise((i,r)=>{if(n==="fa"){const s=UL(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&tx[e]&&tx[e][t]){const s=tx[e][t];return i(e2(s))}SY(t,e),i(oe(oe({},xY),{},{icon:Oe.showMissingIcons&&t?hl("missingIconAbstract")||{}:{}}))})}const S3=()=>{},n2=Oe.measurePerformance&&dg&&dg.mark&&dg.measure?dg:{mark:S3,measure:S3},ah='FA "6.7.1"',kY=t=>(n2.mark("".concat(ah," ").concat(t," begins")),()=>WL(t)),WL=t=>{n2.mark("".concat(ah," ").concat(t," ends")),n2.measure("".concat(ah," ").concat(t),"".concat(ah," ").concat(t," begins"),"".concat(ah," ").concat(t," ends"))};var vC={begin:kY,end:WL};const w0=()=>{};function k3(t){return typeof(t.getAttribute?t.getAttribute(jc):null)=="string"}function _Y(t){const e=t.getAttribute?t.getAttribute(cC):null,n=t.getAttribute?t.getAttribute(uC):null;return e&&n}function CY(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Oe.replacementClass)}function EY(){return Oe.autoReplaceSvg===!0?x0.replace:x0[Oe.autoReplaceSvg]||x0.replace}function AY(t){return Ut.createElementNS("http://www.w3.org/2000/svg",t)}function NY(t){return Ut.createElement(t)}function GL(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?AY:NY}=e;if(typeof t=="string")return Ut.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild(GL(s,{ceFn:n}))}),i}function PY(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const x0={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(GL(n),e)}),e.getAttribute(jc)===null&&Oe.keepOriginalSource){let n=Ut.createComment(PY(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~fC(e).indexOf(Oe.replacementClass))return x0.replace(t);const i=new RegExp("".concat(Oe.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===Oe.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>um(s)).join(`
`);e.setAttribute(jc,""),e.innerHTML=r}};function _3(t){t()}function KL(t,e){const n=typeof e=="function"?e:w0;if(t.length===0)n();else{let i=_3;Oe.mutateApproach===Tq&&(i=dl.requestAnimationFrame||_3),i(()=>{const r=EY(),s=vC.begin("mutate");t.map(r),s(),n()})}}let yC=!1;function qL(){yC=!0}function i2(){yC=!1}let Pv=null;function C3(t){if(!d3||!Oe.observeMutations)return;const{treeCallback:e=w0,nodeCallback:n=w0,pseudoElementsCallback:i=w0,observeMutationsRoot:r=Ut}=t;Pv=new d3(s=>{if(yC)return;const o=fl();of(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!k3(a.addedNodes[0])&&(Oe.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Oe.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&k3(a.target)&&~$q.indexOf(a.attributeName))if(a.attributeName==="class"&&_Y(a.target)){const{prefix:l,iconName:c}=ob(fC(a.target));a.target.setAttribute(cC,l||o),c&&a.target.setAttribute(uC,c)}else CY(a.target)&&n(a.target)})}),ra&&Pv.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function MY(){Pv&&Pv.disconnect()}function RY(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function TY(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=ob(fC(t));return r.prefix||(r.prefix=fl()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=iY(r.prefix,t.innerText)||mC(r.prefix,XS(t.innerText))),!r.iconName&&Oe.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function OY(t){const e=of(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return Oe.autoA11y&&(n?e["aria-labelledby"]="".concat(Oe.replacementClass,"-title-").concat(i||vp()):(e["aria-hidden"]="true",e.focusable="false")),e}function IY(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Js,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function E3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=TY(t),s=OY(t),o=ZS("parseNodeAttributes",{},t);let a=e.styleParser?RY(t):[];return oe({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:Js,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:jY}=Zs;function YL(t){const e=Oe.autoReplaceSvg==="nest"?E3(t,{styleParser:!1}):E3(t);return~e.extra.classes.indexOf(PL)?hl("generateLayersText",t,e):hl("generateSvgReplacementMutation",t,e)}function LY(){return[...gq,...HS]}function A3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!ra)return Promise.resolve();const n=Ut.documentElement.classList,i=u=>n.add("".concat(p3,"-").concat(u)),r=u=>n.remove("".concat(p3,"-").concat(u)),s=Oe.autoFetchSvg?LY():SL.concat(Object.keys(jY));s.includes("fa")||s.push("fa");const o=[".".concat(PL,":not([").concat(jc,"])")].concat(s.map(u=>".".concat(u,":not([").concat(jc,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=of(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=vC.begin("onTree"),c=a.reduce((u,d)=>{try{const f=YL(d);f&&u.push(f)}catch(f){AL||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(f=>{KL(f,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),u()})}).catch(f=>{l(),d(f)})})}function DY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;YL(t).then(n=>{n&&KL([n],e)})}function $Y(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:QS(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:QS(r||{})),t(i,oe(oe({},n),{},{mask:r}))}}const FY=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Js,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!t)return;const{prefix:d,iconName:f,icon:p}=t;return ab(oe({type:"icon"},t),()=>(Lc("beforeDOMElementCreation",{iconDefinition:t,params:e}),Oe.autoA11y&&(o?c["aria-labelledby"]="".concat(Oe.replacementClass,"-title-").concat(a||vp()):(c["aria-hidden"]="true",c.focusable="false")),gC({icons:{main:e2(p),mask:r?e2(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:f,transform:oe(oe({},Js),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var zY={mixout(){return{icon:$Y(FY)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=A3,t.nodeCallback=DY,t}}},provides(t){t.i2svg=function(e){const{node:n=Ut,callback:i=()=>{}}=e;return A3(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:d}=n;return new Promise((f,p)=>{Promise.all([t2(i,o),c.iconName?t2(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(g=>{let[m,v]=g;f([e,gC({icons:{main:m,mask:v},prefix:o,iconName:i,transform:a,symbol:l,maskId:u,title:r,titleId:s,extra:d,watchable:!0})])}).catch(p)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=rb(o);a.length>0&&(i.style=a);let l;return hC(s)&&(l=hl("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},BY={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return ab({type:"layer"},()=>{Lc("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat(Oe.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},UY={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return ab({type:"counter",content:t},()=>(Lc("beforeDOMElementCreation",{content:t,params:e}),wY({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat(Oe.cssPrefix,"-layers-counter"),...i]}})))}}}},VY={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Js,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return ab({type:"text",content:t},()=>(Lc("beforeDOMElementCreation",{content:t,params:e}),x3({content:t,transform:oe(oe({},Js),n),title:i,extra:{attributes:s,styles:o,classes:["".concat(Oe.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(wL){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return Oe.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,x3({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const HY=new RegExp('"',"ug"),N3=[1105920,1112319],P3=oe(oe(oe(oe({},{FontAwesome:{normal:"fas",400:"fas"}}),hq),Mq),kq),r2=Object.keys(P3).reduce((t,e)=>(t[e.toLowerCase()]=P3[e],t),{}),WY=Object.keys(r2).reduce((t,e)=>{const n=r2[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function GY(t){const e=t.replace(HY,""),n=Zq(e,0),i=n>=N3[0]&&n<=N3[1],r=e.length===2?e[0]===e[1]:!1;return{value:XS(r?e[0]:e),isSecondary:i||r}}function KY(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(r2[n]||{})[r]||WY[n]}function M3(t,e){const n="".concat(Rq).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=of(t.children).filter(f=>f.getAttribute(GS)===e)[0],a=dl.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),c=l.match(Lq),u=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return t.removeChild(o),i();if(c&&d!=="none"&&d!==""){const f=a.getPropertyValue("content");let p=KY(l,u);const{value:g,isSecondary:m}=GY(f),v=c[0].startsWith("FontAwesome");let y=mC(p,g),w=y;if(v){const x=rY(g);x.iconName&&x.prefix&&(y=x.iconName,p=x.prefix)}if(y&&!m&&(!o||o.getAttribute(cC)!==p||o.getAttribute(uC)!==w)){t.setAttribute(n,w),o&&t.removeChild(o);const x=IY(),{extra:S}=x;S.attributes[GS]=e,t2(y,p).then(_=>{const E=gC(oe(oe({},x),{},{icons:{main:_,mask:VL()},prefix:p,iconName:w,extra:S,watchable:!0})),C=Ut.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(C,t.firstChild):t.appendChild(C),C.outerHTML=E.map(N=>um(N)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function qY(t){return Promise.all([M3(t,"::before"),M3(t,"::after")])}function YY(t){return t.parentNode!==document.head&&!~Oq.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(GS)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function R3(t){if(ra)return new Promise((e,n)=>{const i=of(t.querySelectorAll("*")).filter(YY).map(qY),r=vC.begin("searchPseudoElements");qL(),Promise.all(i).then(()=>{r(),i2(),e()}).catch(()=>{r(),i2(),n()})})}var XY={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=R3,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=Ut}=e;Oe.searchPseudoElements&&R3(n)}}};let T3=!1;var JY={mixout(){return{dom:{unwatch(){qL(),T3=!0}}}},hooks(){return{bootstrap(){C3(ZS("mutationObserverCallbacks",{}))},noAuto(){MY()},watch(t){const{observeMutationsRoot:e}=t;T3?i2():C3(ZS("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const O3=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var ZY={mixout(){return{parse:{transform:t=>O3(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=O3(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),c="rotate(".concat(i.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},d={transform:"translate(".concat(s/2*-1," -256)")},f={outer:o,inner:u,path:d};return{tag:"g",attributes:oe({},f.outer),children:[{tag:"g",attributes:oe({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:oe(oe({},n.icon.attributes),f.path)}]}]}}}};const nx={x:0,y:0,width:"100%",height:"100%"};function I3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function QY(t){return t.tag==="g"?t.children:[t]}var eX={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?ob(n.split(" ").map(r=>r.trim())):VL();return i.prefix||(i.prefix=fl()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:c}=r,{width:u,icon:d}=s,f=Gq({transform:a,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:oe(oe({},nx),{},{fill:"white"})},g=c.children?{children:c.children.map(I3)}:{},m={tag:"g",attributes:oe({},f.inner),children:[I3(oe({tag:c.tag,attributes:oe(oe({},c.attributes),f.path)},g))]},v={tag:"g",attributes:oe({},f.outer),children:[m]},y="mask-".concat(o||vp()),w="clip-".concat(o||vp()),x={tag:"mask",attributes:oe(oe({},nx),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},S={tag:"defs",children:[{tag:"clipPath",attributes:{id:w},children:QY(d)},x]};return n.push(S,{tag:"rect",attributes:oe({fill:"currentColor","clip-path":"url(#".concat(w,")"),mask:"url(#".concat(y,")")},nx)}),{children:n,attributes:i}}}},tX={provides(t){let e=!1;dl.matchMedia&&(e=dl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:oe(oe({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=oe(oe({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:oe(oe({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:oe(oe({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:oe(oe({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:oe(oe({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:oe(oe({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},nX={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},iX=[Yq,zY,BY,UY,VY,XY,JY,ZY,eX,tX,nX];hY(iX,{mixoutsTo:_r});_r.noAuto;_r.config;_r.library;_r.dom;const s2=_r.parse;_r.findIconDefinition;_r.toHtml;const rX=_r.icon;_r.layer;_r.text;_r.counter;var XL={exports:{}},sX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",oX=sX,aX=oX;function JL(){}function ZL(){}ZL.resetWarningCache=JL;var lX=function(){function t(i,r,s,o,a,l){if(l!==aX){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ZL,resetWarningCache:JL};return n.PropTypes=n,n};XL.exports=lX();var cX=XL.exports;const st=Yc(cX);function j3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Vs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j3(Object(n),!0).forEach(function(i){Gu(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Mv(t){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mv(t)}function Gu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uX(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function dX(t,e){if(t==null)return{};var n=uX(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function o2(t){return fX(t)||hX(t)||pX(t)||mX()}function fX(t){if(Array.isArray(t))return a2(t)}function hX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pX(t,e){if(t){if(typeof t=="string")return a2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a2(t,e)}}function a2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function mX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gX(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,d=t.pulse,f=t.fixedWidth,p=t.inverse,g=t.border,m=t.listItem,v=t.flip,y=t.size,w=t.rotation,x=t.pull,S=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":f,"fa-inverse":p,"fa-border":g,"fa-li":m,"fa-flip":v===!0,"fa-flip-horizontal":v==="horizontal"||v==="both","fa-flip-vertical":v==="vertical"||v==="both"},Gu(e,"fa-".concat(y),typeof y<"u"&&y!==null),Gu(e,"fa-rotate-".concat(w),typeof w<"u"&&w!==null&&w!==0),Gu(e,"fa-pull-".concat(x),typeof x<"u"&&x!==null),Gu(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(S).map(function(_){return S[_]?_:null}).filter(function(_){return _})}function vX(t){return t=t-0,t===t}function QL(t){return vX(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var yX=["style"];function bX(t){return t.charAt(0).toUpperCase()+t.slice(1)}function wX(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=QL(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[bX(r)]=s:e[r]=s,e},{})}function eD(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return eD(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=wX(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[QL(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=dX(n,yX);return r.attrs.style=Vs(Vs({},r.attrs.style),o),t.apply(void 0,[e.tag,Vs(Vs({},r.attrs),a)].concat(o2(i)))}var tD=!1;try{tD=!0}catch{}function xX(){if(!tD&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function L3(t){if(t&&Mv(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(s2.icon)return s2.icon(t);if(t===null)return null;if(t&&Mv(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function ix(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Gu({},t,e):{}}var D3={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Le=Ft.forwardRef(function(t,e){var n=Vs(Vs({},D3),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=L3(i),d=ix("classes",[].concat(o2(gX(n)),o2((o||"").split(" ")))),f=ix("transform",typeof n.transform=="string"?s2.transform(n.transform):n.transform),p=ix("mask",L3(r)),g=rX(u,Vs(Vs(Vs(Vs({},d),f),p),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!g)return xX("Could not find icon",u),null;var m=g.abstract,v={ref:e};return Object.keys(n).forEach(function(y){D3.hasOwnProperty(y)||(v[y]=n[y])}),SX(m[0],v)});Le.displayName="FontAwesomeIcon";Le.propTypes={beat:st.bool,border:st.bool,beatFade:st.bool,bounce:st.bool,className:st.string,fade:st.bool,flash:st.bool,mask:st.oneOfType([st.object,st.array,st.string]),maskId:st.string,fixedWidth:st.bool,inverse:st.bool,flip:st.oneOf([!0,!1,"horizontal","vertical","both"]),icon:st.oneOfType([st.object,st.array,st.string]),listItem:st.bool,pull:st.oneOf(["right","left"]),pulse:st.bool,rotation:st.oneOf([0,90,180,270]),shake:st.bool,size:st.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:st.bool,spinPulse:st.bool,spinReverse:st.bool,symbol:st.oneOfType([st.bool,st.string]),title:st.string,titleId:st.string,transform:st.oneOfType([st.string,st.object]),swapOpacity:st.bool};var SX=eD.bind(null,Ft.createElement);function nD(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=nD(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Q(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=nD(t))&&(i&&(i+=" "),i+=e);return i}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const $3={prefix:"fas",iconName:"info",icon:[192,512,[],"f129","M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"]},kX={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},bC=kX,od={prefix:"fas",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"]},_X={prefix:"fas",iconName:"compress",icon:[448,512,[],"f066","M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"]},CX={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},EX={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},AX={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},NX={prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"]},PX={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},iD=PX,Th={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},MX={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},RX=MX,TX={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},OX={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},IX=OX,F3={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},jX={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},rD=jX,LX={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},sD=LX,DX={prefix:"fas",iconName:"backward-step",icon:[320,512,["step-backward"],"f048","M267.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-320c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160L64 241 64 96c0-17.7-14.3-32-32-32S0 78.3 0 96L0 416c0 17.7 14.3 32 32 32s32-14.3 32-32l0-145 11.5 9.6 192 160z"]},oD=DX,$X={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},z3={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]},bp={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},FX={prefix:"fas",iconName:"expand",icon:[448,512,[],"f065","M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"]},zX={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},dm=zX,wC={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},BX={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},UX={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},xC={prefix:"fas",iconName:"trophy",icon:[576,512,[127942],"f091","M400 0L176 0c-26.5 0-48.1 21.8-47.1 48.2c.2 5.3 .4 10.6 .7 15.8L24 64C10.7 64 0 74.7 0 88c0 92.6 33.5 157 78.5 200.7c44.3 43.1 98.3 64.8 138.1 75.8c23.4 6.5 39.4 26 39.4 45.6c0 20.9-17 37.9-37.9 37.9L192 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-26.1 0C337 448 320 431 320 410.1c0-19.6 15.9-39.2 39.4-45.6c39.9-11 93.9-32.7 138.2-75.8C542.5 245 576 180.6 576 88c0-13.3-10.7-24-24-24L446.4 64c.3-5.2 .5-10.4 .7-15.8C448.1 21.8 426.5 0 400 0zM48.9 112l84.4 0c9.1 90.1 29.2 150.3 51.9 190.6c-24.9-11-50.8-26.5-73.2-48.3c-32-31.1-58-76-63-142.3zM464.1 254.3c-22.4 21.8-48.3 37.3-73.2 48.3c22.7-40.3 42.8-100.5 51.9-190.6l84.4 0c-5.1 66.3-31.1 111.2-63 142.3z"]},aD={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},VX={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},HX=VX,WX={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]},GX={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M96 0C43 0 0 43 0 96L0 416c0 53 43 96 96 96l288 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64c17.7 0 32-14.3 32-32l0-320c0-17.7-14.3-32-32-32L384 0 96 0zm0 384l256 0 0 64L96 448c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16zm16 48l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},lD={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},KX={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},l2=KX,qX={prefix:"fas",iconName:"database",icon:[448,512,[],"f1c0","M448 80l0 48c0 44.2-100.3 80-224 80S0 172.2 0 128L0 80C0 35.8 100.3 0 224 0S448 35.8 448 80zM393.2 214.7c20.8-7.4 39.9-16.9 54.8-28.6L448 288c0 44.2-100.3 80-224 80S0 332.2 0 288L0 186.1c14.9 11.8 34 21.2 54.8 28.6C99.7 230.7 159.5 240 224 240s124.3-9.3 169.2-25.3zM0 346.1c14.9 11.8 34 21.2 54.8 28.6C99.7 390.7 159.5 400 224 400s124.3-9.3 169.2-25.3c20.8-7.4 39.9-16.9 54.8-28.6l0 85.9c0 44.2-100.3 80-224 80S0 476.2 0 432l0-85.9z"]},fm={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[127891,"mortar-board"],"f19d","M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9l0 28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5l0-24.6c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"]},cD={default:"bg-stone-800 text-white hover:bg-stone-700 focus:ring-stone-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-stone-600 bg-transparent text-white hover:bg-stone-800 focus:ring-stone-500",secondary:"bg-stone-700 text-white hover:bg-stone-600 focus:ring-stone-500",ghost:"bg-transparent text-stone-300 hover:bg-stone-800 hover:text-white focus:ring-stone-500",link:"bg-transparent text-mantis-400 hover:text-mantis-300 hover:underline focus:ring-mantis-500",primary:"bg-mantis-600 text-white hover:bg-mantis-700 focus:ring-mantis-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",error:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},YX={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg"},ht=b.memo(b.forwardRef(({variant:t="default",size:e="md",isLoading:n=!1,loadingText:i,leftIcon:r,rightIcon:s,disabled:o=!1,fullWidth:a=!1,className:l,children:c,onClick:u,type:d="button","aria-label":f,title:p,...g},m)=>{const v=o||n;return h.jsxs("button",{ref:m,type:d,disabled:v,onClick:u,"aria-label":f,title:p,className:Q("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",cD[t],YX[e],a&&"w-full",l),...g,children:[n&&h.jsx(Le,{icon:aD,className:"animate-spin","aria-hidden":"true"}),!n&&r&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:r}),h.jsx("span",{children:n&&i?i:c}),!n&&s&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:s})]})}));ht.displayName="Button";const S0=b.memo(b.forwardRef(({icon:t,variant:e="ghost",size:n="md",isLoading:i=!1,disabled:r=!1,className:s,onClick:o,"aria-label":a,title:l,...c},u)=>{const d=r||i,f={sm:"size-8",md:"size-10",lg:"size-12",xl:"size-14"};return h.jsx("button",{ref:u,disabled:d,onClick:o,"aria-label":a,title:l,className:Q("inline-flex items-center justify-center rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",cD[e],f[n],s),...c,children:i?h.jsx(Le,{icon:aD,className:"animate-spin","aria-hidden":"true"}):h.jsx("span",{className:"flex items-center justify-center","aria-hidden":"true",children:t})})}));S0.displayName="IconButton";const XX=b.memo(({children:t,orientation:e="horizontal",className:n})=>h.jsx("div",{className:Q("inline-flex",e==="horizontal"?"flex-row":"flex-col",n),role:"group",children:t}));XX.displayName="ButtonGroup";const uD={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2","top-start":"bottom-full left-0 mb-2","top-end":"bottom-full right-0 mb-2","bottom-start":"top-full left-0 mt-2","bottom-end":"top-full right-0 mt-2"},dD={top:"top-full left-1/2 transform -translate-x-1/2 border-t-stone-800",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-b-stone-800",left:"left-full top-1/2 transform -translate-y-1/2 border-l-stone-800",right:"right-full top-1/2 transform -translate-y-1/2 border-r-stone-800","top-start":"top-full left-4 border-t-stone-800","top-end":"top-full right-4 border-t-stone-800","bottom-start":"bottom-full left-4 border-b-stone-800","bottom-end":"bottom-full right-4 border-b-stone-800"},gr=b.memo(({content:t,children:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=b.useState(!1),[u,d]=b.useState(n),f=b.useRef(null),p=b.useRef(null),g=b.useRef(),m=b.useCallback(()=>{a||(document.body.classList.add("tooltip-open"),g.current=setTimeout(()=>{c(!0)},i))},[a,i]),v=b.useCallback(()=>{g.current&&clearTimeout(g.current),document.body.classList.remove("tooltip-open"),c(!1)},[]);return b.useEffect(()=>{if(!l||!p.current||!f.current)return;const y=p.current,x=f.current.getBoundingClientRect(),S=y.getBoundingClientRect();let _=n;x.left+S.width>window.innerWidth&&(n.includes("right")?_="left":n.includes("top")?_="top-end":n.includes("bottom")&&(_="bottom-end")),x.left-S.width<0&&(n.includes("left")?_="right":n.includes("top")?_="top-start":n.includes("bottom")&&(_="bottom-start")),x.top-S.height<0&&n.includes("top")&&(_="bottom"),x.bottom+S.height>window.innerHeight&&n.includes("bottom")&&(_="top"),d(_)},[l,n]),h.jsxs("div",{ref:f,className:Q("relative inline-block",r),onMouseEnter:m,onMouseLeave:v,onFocus:m,onBlur:v,children:[e,l&&h.jsxs("div",{ref:p,className:Q("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",uD[u]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&h.jsx("div",{className:Q("absolute size-0 border-4 border-transparent",dD[u])})]})]})});gr.displayName="Tooltip";const JX=b.memo(({content:t,className:e,size:n="md"})=>{const i={sm:"size-3",md:"size-4",lg:"size-5"};return h.jsx(gr,{content:t,className:e,children:h.jsx(Le,{icon:sD,className:Q("cursor-help text-stone-400 transition-colors hover:text-stone-300",i[n])})})});JX.displayName="InfoTooltip";const ZX=b.memo(({content:t,trigger:e,position:n="top",delay:i=200,className:r,maxWidth:s=300,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=b.useState(!1),u=b.useRef(null),d=b.useRef(null),f=b.useRef(),p=b.useCallback(()=>{a||(f.current=setTimeout(()=>{c(!0)},i))},[a,i]),g=b.useCallback(()=>{f.current&&clearTimeout(f.current),c(!1)},[]);return h.jsxs("div",{ref:u,className:Q("relative inline-block",r),onMouseEnter:p,onMouseLeave:g,onFocus:p,onBlur:g,children:[e,l&&h.jsxs("div",{ref:d,className:Q("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-4 py-3 text-sm text-white shadow-lg","animate-fade-in",uD[n]),style:{maxWidth:`${s}px`,minWidth:"200px"},role:"tooltip",children:[t,o&&h.jsx("div",{className:Q("absolute size-0 border-4 border-transparent",dD[n])})]})]})});ZX.displayName="CustomTooltip";function fD(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const hD=["en","es"];function SC(t){return function(n,i,...r){const s=fD(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const kC={},QX=Symbol((kC?"production":void 0)!=="production"?"RESET":""),pD=t=>typeof(t==null?void 0:t.then)=="function";function eJ(t=()=>{try{return window.localStorage}catch(n){(kC?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let i,r;const s={getItem:(l,c)=>{var u,d;const f=g=>{if(g=g||"",i!==g){try{r=JSON.parse(g,e==null?void 0:e.reviver)}catch{return c}i=g}return r},p=(d=(u=t())==null?void 0:u.getItem(l))!=null?d:null;return pD(p)?p.then(f):f(p)},setItem:(l,c)=>{var u;return(u=t())==null?void 0:u.setItem(l,JSON.stringify(c,void 0))},removeItem:l=>{var c;return(c=t())==null?void 0:c.removeItem(l)}},o=l=>(c,u,d)=>l(c,f=>{let p;try{p=JSON.parse(f||"")}catch{p=d}u(p)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,c)=>{if(!(t()instanceof window.Storage))return()=>{};const u=d=>{d.storageArea===t()&&d.key===l&&c(d.newValue)};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}}),a&&(s.subscribe=o(a)),s}const tJ=eJ();function mD(t,e,n=tJ,i){const r=i==null?void 0:i.getOnInit,s=ue(r?n.getItem(t,e):e);return(kC?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},ue(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===QX?(l(s,e),n.removeItem(t)):pD(u)?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}const T=oC();function nJ(t){return h.jsx(NK,{store:T,children:t.children})}var yt;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(yt||(yt={}));var B3;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(B3||(B3={}));const Me=yt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),xa=t=>{switch(typeof t){case"undefined":return Me.undefined;case"string":return Me.string;case"number":return Number.isNaN(t)?Me.nan:Me.number;case"boolean":return Me.boolean;case"function":return Me.function;case"bigint":return Me.bigint;case"symbol":return Me.symbol;case"object":return Array.isArray(t)?Me.array:t===null?Me.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Me.promise:typeof Map<"u"&&t instanceof Map?Me.map:typeof Set<"u"&&t instanceof Set?Me.set:typeof Date<"u"&&t instanceof Date?Me.date:Me.object;default:return Me.unknown}},ce=yt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Zo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return r(this),i}static assert(e){if(!(e instanceof Zo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,yt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)if(r.path.length>0){const s=r.path[0];n[s]=n[s]||[],n[s].push(e(r))}else i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}Zo.create=t=>new Zo(t);const c2=(t,e)=>{let n;switch(t.code){case ce.invalid_type:t.received===Me.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,yt.jsonStringifyReplacer)}`;break;case ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${yt.joinValues(t.keys,", ")}`;break;case ce.invalid_union:n="Invalid input";break;case ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${yt.joinValues(t.options)}`;break;case ce.invalid_enum_value:n=`Invalid enum value. Expected ${yt.joinValues(t.options)}, received '${t.received}'`;break;case ce.invalid_arguments:n="Invalid function arguments";break;case ce.invalid_return_type:n="Invalid function return type";break;case ce.invalid_date:n="Invalid date";break;case ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:yt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ce.custom:n="Invalid input";break;case ce.invalid_intersection_types:n="Intersection results could not be merged";break;case ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,yt.assertNever(t)}return{message:n}};let iJ=c2;function rJ(){return iJ}const sJ=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=i.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}};function we(t,e){const n=rJ(),i=sJ({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===c2?void 0:c2].filter(r=>!!r)});t.common.issues.push(i)}class wr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Ye;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return wr.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Ye;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Ye=Object.freeze({status:"aborted"}),lh=t=>({status:"dirty",value:t}),Jr=t=>({status:"valid",value:t}),U3=t=>t.status==="aborted",V3=t=>t.status==="dirty",$d=t=>t.status==="valid",Rv=t=>typeof Promise<"u"&&t instanceof Promise;var Te;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Te||(Te={}));class pl{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const H3=(t,e)=>{if($d(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Zo(t.common.issues);return this._error=n,this._error}}};function rt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??i??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:r}}class gt{get description(){return this._def.description}_getType(e){return xa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:xa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new wr,ctx:{common:e.parent.common,data:e.data,parsedType:xa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Rv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xa(e)},r=this._parseSync({data:e,path:i.path,parent:i});return H3(i,r)}"~validate"(e){var i,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xa(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return $d(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(r=(i=s==null?void 0:s.message)==null?void 0:i.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>$d(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xa(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(Rv(r)?r:Promise.resolve(r));return H3(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:ce.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new Bd({schema:this,typeName:Xe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return il.create(this,this._def)}nullable(){return Ud.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return oo.create(this)}promise(){return jv.create(this,this._def)}or(e){return Ov.create([this,e],this._def)}and(e){return Iv.create(this,e,this._def)}transform(e){return new Bd({...rt(this._def),schema:this,typeName:Xe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new f2({...rt(this._def),innerType:this,defaultValue:n,typeName:Xe.ZodDefault})}brand(){return new NJ({typeName:Xe.ZodBranded,type:this,...rt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new h2({...rt(this._def),innerType:this,catchValue:n,typeName:Xe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return _C.create(this,e)}readonly(){return p2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const oJ=/^c[^\s-]{8,}$/i,aJ=/^[0-9a-z]+$/,lJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,cJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,uJ=/^[a-z0-9_-]{21}$/i,dJ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,fJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,hJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,pJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let rx;const mJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,gJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,vJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,yJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,bJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,wJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,gD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",xJ=new RegExp(`^${gD}$`);function vD(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function SJ(t){return new RegExp(`^${vD(t)}$`)}function kJ(t){let e=`${gD}T${vD(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function _J(t,e){return!!((e==="v4"||!e)&&mJ.test(t)||(e==="v6"||!e)&&vJ.test(t))}function CJ(t,e){if(!dJ.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(i));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function EJ(t,e){return!!((e==="v4"||!e)&&gJ.test(t)||(e==="v6"||!e)&&yJ.test(t))}class mc extends gt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Me.string){const s=this._getOrReturnCtx(e);return we(s,{code:ce.invalid_type,expected:Me.string,received:s.parsedType}),Ye}const i=new wr;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?we(r,{code:ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&we(r,{code:ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")hJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"email",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")rx||(rx=new RegExp(pJ,"u")),rx.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"emoji",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")cJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"uuid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")uJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"nanoid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")oJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"cuid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")aJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"cuid2",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")lJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"ulid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),we(r,{validation:"url",code:ce.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"regex",code:ce.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?kJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?xJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?SJ(s).test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:ce.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?fJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"duration",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?_J(e.data,s.version)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"ip",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?CJ(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"jwt",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?EJ(e.data,s.version)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"cidr",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?bJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"base64",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?wJ.test(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{validation:"base64url",code:ce.invalid_string,message:s.message}),i.dirty()):yt.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:ce.invalid_string,...Te.errToObj(i)})}_addCheck(e){return new mc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Te.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Te.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Te.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Te.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Te.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Te.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Te.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Te.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Te.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Te.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Te.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Te.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Te.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Te.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Te.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Te.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Te.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Te.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Te.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Te.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Te.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Te.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Te.errToObj(n)})}nonempty(e){return this.min(1,Te.errToObj(e))}trim(){return new mc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new mc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new mc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}mc.create=t=>new mc({checks:[],typeName:Xe.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...rt(t)});function AJ(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=Number.parseInt(t.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return s%o/10**r}class Fd extends gt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Me.number){const s=this._getOrReturnCtx(e);return we(s,{code:ce.invalid_type,expected:Me.number,received:s.parsedType}),Ye}let i;const r=new wr;for(const s of this._def.checks)s.kind==="int"?yt.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{code:ce.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?AJ(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),we(i,{code:ce.not_finite,message:s.message}),r.dirty()):yt.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Te.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Te.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Te.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Te.toString(n))}setLimit(e,n,i,r){return new Fd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Te.toString(r)}]})}_addCheck(e){return new Fd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Te.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Te.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Te.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Te.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Te.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Te.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&yt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Fd.create=t=>new Fd({checks:[],typeName:Xe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...rt(t)});class wp extends gt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Me.bigint)return this._getInvalidInput(e);let i;const r=new wr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),we(i,{code:ce.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):yt.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return we(n,{code:ce.invalid_type,expected:Me.bigint,received:n.parsedType}),Ye}gte(e,n){return this.setLimit("min",e,!0,Te.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Te.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Te.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Te.toString(n))}setLimit(e,n,i,r){return new wp({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Te.toString(r)}]})}_addCheck(e){return new wp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Te.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Te.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}wp.create=t=>new wp({checks:[],typeName:Xe.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...rt(t)});class u2 extends gt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Me.boolean){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.boolean,received:i.parsedType}),Ye}return Jr(e.data)}}u2.create=t=>new u2({typeName:Xe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...rt(t)});class Tv extends gt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Me.date){const s=this._getOrReturnCtx(e);return we(s,{code:ce.invalid_type,expected:Me.date,received:s.parsedType}),Ye}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return we(s,{code:ce.invalid_date}),Ye}const i=new wr;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:ce.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),we(r,{code:ce.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):yt.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Tv({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Te.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Te.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Tv.create=t=>new Tv({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Xe.ZodDate,...rt(t)});class W3 extends gt{_parse(e){if(this._getType(e)!==Me.symbol){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.symbol,received:i.parsedType}),Ye}return Jr(e.data)}}W3.create=t=>new W3({typeName:Xe.ZodSymbol,...rt(t)});class G3 extends gt{_parse(e){if(this._getType(e)!==Me.undefined){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.undefined,received:i.parsedType}),Ye}return Jr(e.data)}}G3.create=t=>new G3({typeName:Xe.ZodUndefined,...rt(t)});class K3 extends gt{_parse(e){if(this._getType(e)!==Me.null){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.null,received:i.parsedType}),Ye}return Jr(e.data)}}K3.create=t=>new K3({typeName:Xe.ZodNull,...rt(t)});class q3 extends gt{constructor(){super(...arguments),this._any=!0}_parse(e){return Jr(e.data)}}q3.create=t=>new q3({typeName:Xe.ZodAny,...rt(t)});class Y3 extends gt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Jr(e.data)}}Y3.create=t=>new Y3({typeName:Xe.ZodUnknown,...rt(t)});class ml extends gt{_parse(e){const n=this._getOrReturnCtx(e);return we(n,{code:ce.invalid_type,expected:Me.never,received:n.parsedType}),Ye}}ml.create=t=>new ml({typeName:Xe.ZodNever,...rt(t)});class X3 extends gt{_parse(e){if(this._getType(e)!==Me.undefined){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.void,received:i.parsedType}),Ye}return Jr(e.data)}}X3.create=t=>new X3({typeName:Xe.ZodVoid,...rt(t)});class oo extends gt{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==Me.array)return we(n,{code:ce.invalid_type,expected:Me.array,received:n.parsedType}),Ye;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(we(n,{code:o?ce.too_big:ce.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(we(n,{code:ce.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(we(n,{code:ce.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new pl(n,o,n.path,a)))).then(o=>wr.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new pl(n,o,n.path,a)));return wr.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new oo({...this._def,minLength:{value:e,message:Te.toString(n)}})}max(e,n){return new oo({...this._def,maxLength:{value:e,message:Te.toString(n)}})}length(e,n){return new oo({...this._def,exactLength:{value:e,message:Te.toString(n)}})}nonempty(e){return this.min(1,e)}}oo.create=(t,e)=>new oo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Xe.ZodArray,...rt(e)});function xu(t){if(t instanceof gn){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=il.create(xu(i))}return new gn({...t._def,shape:()=>e})}else return t instanceof oo?new oo({...t._def,type:xu(t.element)}):t instanceof il?il.create(xu(t.unwrap())):t instanceof Ud?Ud.create(xu(t.unwrap())):t instanceof Dc?Dc.create(t.items.map(e=>xu(e))):t}class gn extends gt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=yt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Me.object){const c=this._getOrReturnCtx(e);return we(c,{code:ce.invalid_type,expected:Me.object,received:c.parsedType}),Ye}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ml&&this._def.unknownKeys==="strip"))for(const c in r.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new pl(r,d,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof ml){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")a.length>0&&(we(r,{code:ce.unrecognized_keys,keys:a}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new pl(r,d,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,f=await u.value;c.push({key:d,value:f,alwaysSet:u.alwaysSet})}return c}).then(c=>wr.mergeObjectSync(i,c)):wr.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Te.errToObj,new gn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var s,o;const r=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,i).message)??i.defaultError;return n.code==="unrecognized_keys"?{message:Te.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new gn({...this._def,unknownKeys:"strip"})}passthrough(){return new gn({...this._def,unknownKeys:"passthrough"})}extend(e){return new gn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new gn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Xe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new gn({...this._def,catchall:e})}pick(e){const n={};for(const i of yt.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new gn({...this._def,shape:()=>n})}omit(e){const n={};for(const i of yt.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new gn({...this._def,shape:()=>n})}deepPartial(){return xu(this)}partial(e){const n={};for(const i of yt.objectKeys(this.shape)){const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}return new gn({...this._def,shape:()=>n})}required(e){const n={};for(const i of yt.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof il;)s=s._def.innerType;n[i]=s}return new gn({...this._def,shape:()=>n})}keyof(){return yD(yt.objectKeys(this.shape))}}gn.create=(t,e)=>new gn({shape:()=>t,unknownKeys:"strip",catchall:ml.create(),typeName:Xe.ZodObject,...rt(e)});gn.strictCreate=(t,e)=>new gn({shape:()=>t,unknownKeys:"strict",catchall:ml.create(),typeName:Xe.ZodObject,...rt(e)});gn.lazycreate=(t,e)=>new gn({shape:t,unknownKeys:"strip",catchall:ml.create(),typeName:Xe.ZodObject,...rt(e)});class Ov extends gt{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Zo(a.ctx.common.issues));return we(n,{code:ce.invalid_union,unionErrors:o}),Ye}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Zo(l));return we(n,{code:ce.invalid_union,unionErrors:a}),Ye}}get options(){return this._def.options}}Ov.create=(t,e)=>new Ov({options:t,typeName:Xe.ZodUnion,...rt(e)});function d2(t,e){const n=xa(t),i=xa(e);if(t===e)return{valid:!0,data:t};if(n===Me.object&&i===Me.object){const r=yt.objectKeys(e),s=yt.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=d2(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===Me.array&&i===Me.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=d2(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===Me.date&&i===Me.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Iv extends gt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(U3(s)||U3(o))return Ye;const a=d2(s.value,o.value);return a.valid?((V3(s)||V3(o))&&n.dirty(),{status:n.value,value:a.data}):(we(i,{code:ce.invalid_intersection_types}),Ye)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Iv.create=(t,e,n)=>new Iv({left:t,right:e,typeName:Xe.ZodIntersection,...rt(n)});class Dc extends gt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.array)return we(i,{code:ce.invalid_type,expected:Me.array,received:i.parsedType}),Ye;if(i.data.length<this._def.items.length)return we(i,{code:ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ye;!this._def.rest&&i.data.length>this._def.items.length&&(we(i,{code:ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new pl(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>wr.mergeArray(n,o)):wr.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Dc({...this._def,rest:e})}}Dc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Dc({items:t,typeName:Xe.ZodTuple,rest:null,...rt(e)})};class J3 extends gt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.map)return we(i,{code:ce.invalid_type,expected:Me.map,received:i.parsedType}),Ye;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],c)=>({key:r._parse(new pl(i,a,i.path,[c,"key"])),value:s._parse(new pl(i,l,i.path,[c,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Ye;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Ye;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}J3.create=(t,e,n)=>new J3({valueType:e,keyType:t,typeName:Xe.ZodMap,...rt(n)});class xp extends gt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.set)return we(i,{code:ce.invalid_type,expected:Me.set,received:i.parsedType}),Ye;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(we(i,{code:ce.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(we(i,{code:ce.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Ye;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...i.data.values()].map((l,c)=>s._parse(new pl(i,l,i.path,c)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new xp({...this._def,minSize:{value:e,message:Te.toString(n)}})}max(e,n){return new xp({...this._def,maxSize:{value:e,message:Te.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}xp.create=(t,e)=>new xp({valueType:t,minSize:null,maxSize:null,typeName:Xe.ZodSet,...rt(e)});class Z3 extends gt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Z3.create=(t,e)=>new Z3({getter:t,typeName:Xe.ZodLazy,...rt(e)});class Q3 extends gt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return we(n,{received:n.data,code:ce.invalid_literal,expected:this._def.value}),Ye}return{status:"valid",value:e.data}}get value(){return this._def.value}}Q3.create=(t,e)=>new Q3({value:t,typeName:Xe.ZodLiteral,...rt(e)});function yD(t,e){return new zd({values:t,typeName:Xe.ZodEnum,...rt(e)})}class zd extends gt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return we(n,{expected:yt.joinValues(i),received:n.parsedType,code:ce.invalid_type}),Ye}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return we(n,{received:n.data,code:ce.invalid_enum_value,options:i}),Ye}return Jr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return zd.create(e,{...this._def,...n})}exclude(e,n=this._def){return zd.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}zd.create=yD;class e4 extends gt{_parse(e){const n=yt.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==Me.string&&i.parsedType!==Me.number){const r=yt.objectValues(n);return we(i,{expected:yt.joinValues(r),received:i.parsedType,code:ce.invalid_type}),Ye}if(this._cache||(this._cache=new Set(yt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=yt.objectValues(n);return we(i,{received:i.data,code:ce.invalid_enum_value,options:r}),Ye}return Jr(e.data)}get enum(){return this._def.values}}e4.create=(t,e)=>new e4({values:t,typeName:Xe.ZodNativeEnum,...rt(e)});class jv extends gt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Me.promise&&n.common.async===!1)return we(n,{code:ce.invalid_type,expected:Me.promise,received:n.parsedType}),Ye;const i=n.parsedType===Me.promise?n.data:Promise.resolve(n.data);return Jr(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}jv.create=(t,e)=>new jv({type:t,typeName:Xe.ZodPromise,...rt(e)});class Bd extends gt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Xe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{we(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ye;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?Ye:l.status==="dirty"||n.value==="dirty"?lh(l.value):l});{if(n.value==="aborted")return Ye;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?Ye:a.status==="dirty"||n.value==="dirty"?lh(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Ye:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Ye:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!$d(o))return Ye;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>$d(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):Ye);yt.assertNever(r)}}Bd.create=(t,e,n)=>new Bd({schema:t,typeName:Xe.ZodEffects,effect:e,...rt(n)});Bd.createWithPreprocess=(t,e,n)=>new Bd({schema:e,effect:{type:"preprocess",transform:t},typeName:Xe.ZodEffects,...rt(n)});class il extends gt{_parse(e){return this._getType(e)===Me.undefined?Jr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}il.create=(t,e)=>new il({innerType:t,typeName:Xe.ZodOptional,...rt(e)});class Ud extends gt{_parse(e){return this._getType(e)===Me.null?Jr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ud.create=(t,e)=>new Ud({innerType:t,typeName:Xe.ZodNullable,...rt(e)});class f2 extends gt{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===Me.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}f2.create=(t,e)=>new f2({innerType:t,typeName:Xe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...rt(e)});class h2 extends gt{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Rv(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Zo(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Zo(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}h2.create=(t,e)=>new h2({innerType:t,typeName:Xe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...rt(e)});class t4 extends gt{_parse(e){if(this._getType(e)!==Me.nan){const i=this._getOrReturnCtx(e);return we(i,{code:ce.invalid_type,expected:Me.nan,received:i.parsedType}),Ye}return{status:"valid",value:e.data}}}t4.create=t=>new t4({typeName:Xe.ZodNaN,...rt(t)});class NJ extends gt{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class _C extends gt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Ye:s.status==="dirty"?(n.dirty(),lh(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Ye:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new _C({in:e,out:n,typeName:Xe.ZodPipeline})}}class p2 extends gt{_parse(e){const n=this._def.innerType._parse(e),i=r=>($d(r)&&(r.value=Object.freeze(r.value)),r);return Rv(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}p2.create=(t,e)=>new p2({innerType:t,typeName:Xe.ZodReadonly,...rt(e)});var Xe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Xe||(Xe={}));const Wl=Fd.create,ou=u2.create;ml.create;oo.create;const n4=gn.create;Ov.create;Iv.create;Dc.create;const au=zd.create;jv.create;il.create;Ud.create;const PJ=["randomize","clean","unchanged"],MJ=["switches-and-leds","printer","null"],RJ=["printer","null"],m2=n4({showInstructionCycle:ou().catch(!1),showStatsCPU:ou().catch(!0),language:au(hD).catch(TJ),editorFontSize:Wl().int().min(8).max(64).catch(14),dataOnLoad:au(PJ).catch("clean"),devices:n4({keyboardAndScreen:ou(),pic:ou(),pio:au(["switches-and-leds","printer"]).nullable(),handshake:au(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:ou().catch(!0),executionUnit:Wl().min(1).max(500).catch(150),clockSpeed:Wl().min(100).max(1e3).catch(1e3),cpuSpeed:au(["1","2","4","10"]).catch("1"),printerSpeed:Wl().min(500).max(2e4).catch(5e3),flagsVisibility:au(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:Wl().min(0).catch(1),filterContrast:Wl().min(0).catch(1),filterInvert:ou().catch(!1),filterSaturation:Wl().min(0).catch(1)}),Su=m2.parse({});function TJ(){const t=navigator.language.toLowerCase();for(const e of hD)if(t.startsWith(e))return e;return"en"}const Zr=mD("vonsim-settings",Su,{getItem(t,e){try{const n=localStorage.getItem(t);return m2.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=m2.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),On=()=>T.get(Zr),af=()=>lm(Zr);ue(t=>t(Zr).showInstructionCycle);ue(t=>t(Zr).showStatsCPU);const OJ=ue(t=>t(Zr).language),CC=()=>it(OJ);ue(t=>t(Zr).flagsVisibility);const IJ=ue(t=>t(Zr).editorFontSize),jJ=()=>it(IJ);ue(t=>t(Zr).dataOnLoad);const LJ=ue(t=>t(Zr).devices),bD=()=>it(LJ);ue(t=>{const e=t(Zr);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});ue(t=>{const e=t(Zr);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")});function Sp(t){const e=t.charCodeAt(0);return B.fitsUnsigned(e,8)?e:null}function EC(t){return B.fitsUnsigned(t,8)?String.fromCharCode(t):null}function wD(t){return DJ.at(t)??null}const DJ=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","¡","¢","£","¤","¥","¦","§","¨","©","ª","«","¬","SHY","®","¯","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷","ø","ù","ú","û","ü","ý","þ","ÿ"];var Ht,Jt;const dt=class dt{constructor(e,n){je(this,Ht);je(this,Jt);ee(this,Ht,e|0),ee(this,Jt,n)}get size(){return A(this,Jt)}is8bits(){return A(this,Jt)===8}is16bits(){return A(this,Jt)===16}get unsigned(){return A(this,Ht)}get signed(){return A(this,Ht)<=dt.maxSignedValue(A(this,Jt))?A(this,Ht):A(this,Ht)-(dt.maxValue(A(this,Jt))+1)}get low(){return this.is8bits()?this:dt.fromUnsigned(A(this,Ht)&dt.maxValue(8),8)}get high(){return this.is8bits()?new dt(0,8):dt.fromUnsigned(A(this,Ht)>>8&dt.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return dt.fromUnsigned(A(this,Ht)&~dt.maxValue(8)|e.unsigned,A(this,Jt))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return dt.fromUnsigned(A(this,Ht)&dt.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Jt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Jt)}`);return(A(this,Ht)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Jt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Jt)}`);return n?dt.fromUnsigned(A(this,Ht)|1<<e,A(this,Jt)):dt.fromUnsigned(A(this,Ht)&~(1<<e),A(this,Jt))}add(e){return e=Number(e),dt.fromUnsigned(A(this,Ht)+e,A(this,Jt))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,Ht)===A(e,Ht)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,Jt));for(let n=0;n<A(this,Jt);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,Ht).toString(16).padStart(A(this,Jt)/4,"0").toUpperCase();case"bin":return A(this,Ht).toString(2).padStart(A(this,Jt),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,Jt)===8?EC(A(this,Ht))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,Jt)===8?wD(A(this,Ht))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,Ht)}valueOf(){return A(this,Ht)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=dt.minSignedValue(n)&&e<=dt.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=dt.minValue()&&e<=dt.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=dt.minSignedValue(n)&&e<=dt.maxSignedValue(n)}static fromUnsigned(e,n){if(!dt.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new dt(e,n)}static fromSigned(e,n){if(!dt.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new dt(e+dt.maxValue(n)+1,n):new dt(e,n)}static fromNumber(e,n){return e<0?dt.fromSigned(e,n):dt.fromUnsigned(e,n)}static fromChar(e){const n=Sp(e)??-1;return dt.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*dt.maxValue(e));return new dt(n,e)}static zero(e){return new dt(0,e)}};Ht=new WeakMap,Jt=new WeakMap;let B=dt;var Ao;const Ca=class Ca{constructor(e){je(this,Ao);ee(this,Ao,e)}get value(){return A(this,Ao).unsigned}get byte(){return A(this,Ao)}toString(e=!1){let n=A(this,Ao).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,Ao).toJSON()}valueOf(){return A(this,Ao).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Ca.MIN_ADDRESS&&e<=Ca.MAX_ADDRESS}static from(e){if(e=Number(e),!Ca.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=B.fromUnsigned(e,16);return new Ca(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};Ao=new WeakMap,he(Ca,"MIN_ADDRESS",0),he(Ca,"MAX_ADDRESS",255);let Se=Ca;var No;const Ea=class Ea{constructor(e){je(this,No);ee(this,No,e)}get value(){return A(this,No).unsigned}get byte(){return A(this,No)}toString(e=!0){let n=A(this,No).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,No).toJSON()}valueOf(){return A(this,No).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Ea.MIN_ADDRESS&&e<=Ea.MAX_ADDRESS}static from(e){if(e=Number(e),!Ea.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=B.fromUnsigned(e,8);return new Ea(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};No=new WeakMap,he(Ea,"MIN_ADDRESS",0),he(Ea,"MAX_ADDRESS",127);let xr=Ea;function i4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function r4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i4(Object(n),!0).forEach(function(i){$J(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i4(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $J(t,e,n){return e=FJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FJ(t){var e=zJ(t,"string");return typeof e=="symbol"?e:String(e)}function zJ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Lv=xD({});function xD(t){return e.withOptions=n=>xD(r4(r4({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n),trimWhitespace:o=!0}=t;let a="";for(let u=0;u<r.length;u++){let d=r[u];s&&(d=d.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),a+=d,u<i.length&&(a+=i[u])}const l=a.split(`
`);let c=null;for(const u of l){const d=u.match(/^(\s+)\S+/);if(d){const f=d[1].length;c?c=Math.min(c,f):c=f}}if(c!==null){const u=c;a=l.map(d=>d[0]===" "||d[0]==="	"?d.slice(u):d).join(`
`)}return o&&(a=a.trim()),s&&(a=a.replace(/\\n/g,`
`)),a}}const BJ=Se.from(Se.MAX_ADDRESS).toString(),UJ={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${xr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!","new-version-available":"There's a new version available in the repository.","local-update":"A new local version has been detected.",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:Lv`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"Cycle","end-of-instruction":"Instruction",infinity:"End"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...","fetching-operands-completed":"Operands fetched",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."},"total-cycles":"Total cycles","instruction-count":"Instruction count",cpi:"Cycles per instruction (CPI)","cpi-help":"Average clock cycles per executed instruction (CPI = total cycles / total instructions)","cpu-time":"CPU time","cpu-time-help":"Total CPU time = total cycles × cycle time (current: {cycleTime} ms)"},memory:{name:"Memory",cell:t=>`Cell ${Se.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${BJ}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"READ MEMORY","write-memory":"WRITE MEMORY"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Enabling animations."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>Lv`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"e2bc0e2"}](https://github.com/ruiz-jose/VonSim8/commit/${"e2bc0e2"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},VJ=Se.from(Se.MAX_ADDRESS).toString(),HJ={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${xr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"¡Hay una nueva versión disponible!","new-version-available":"Hay una nueva versión disponible en el repositorio.","local-update":"Se ha detectado una nueva versión local.",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la “FileSystem API”","no-file":"No hay ningún archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, ¿desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:Lv`
      ; ¡Bienvenido a VonSim 8!
      ; Este es un ejemplo de código que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Ciclo","end-of-instruction":"Instrucción",infinity:"Final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadísticas CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Captación instrucción...","fetching-operands":"Leyendo operandos...","fetching-operands-completed":"Operandos obtenidos",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupción...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."},"total-cycles":"Total de ciclos","instruction-count":"Recuento de instrucciones",cpi:"Ciclos por instrucción (CPI)","cpi-help":"Promedio de ciclos de reloj por instrucción ejecutada (CPI = ciclos totales / instrucciones totales)","cpu-time":"Tiempo de CPU","cpu-time-help":"Tiempo total de CPU = ciclos totales × tiempo de ciclo (actual: {cycleTime} ms)"},memory:{name:"Memoria",cell:t=>`Celda ${Se.format(t)}`,"fix-address":"Fijar dirección","unfix-address":"Desfijar dirección","address-must-be-integer":"El valor de inicio debe ser un número entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${VJ}.`,"address-increment":"Incrementar dirección (Page Up)","address-decrement":"Decrementar dirección (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"LEER MEMORIA","write-memory":"ESCRIBIR MEMORIA"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuración",instructionCycle:{label:"Ciclo de Instrucción"},statsCPU:{label:"Estadísticas CPU"},flags:{label:"Banderas",description:"Selecciona qué banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamaño de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"También agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Habilitación de animaciones."].join(" ")},speeds:{executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión"},filters:{label:"Filtros",description:"Filtros aplicados a la página. Útil cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturación"},reset:"Restablecer configuración"},footer:{documentation:"Documentación",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>Lv`
        <!-- Por favor, describa el problema que está teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Información extra (POR FAVOR, NO BORRAR)</summary>

          **Versión**: [${"e2bc0e2"}](https://github.com/ruiz-jose/VonSim8/commit/${"e2bc0e2"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuración

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},lb=SC({en:UJ,es:HJ});function Xt(){const t=CC();return b.useCallback((e,...n)=>lb(t,e,...n),[t])}const WJ=[{name:"Documentación",url:"https://ruiz-jose.github.io/VonSim8/docs/",icon:"icon-[lucide--book-open]"},{name:"GitHub",url:"https://github.com/ruiz-jose/VonSim8",icon:iq}],SD=b.memo(({name:t,url:e,icon:n})=>h.jsx(gr,{content:t,position:"top",children:h.jsx(ht,{variant:"ghost",size:"sm",onClick:()=>window.open(e,"_blank"),className:"hover-lift","aria-label":t,children:typeof n=="string"?h.jsx("span",{className:Q(n,"size-4")}):h.jsx(Le,{icon:n,className:"size-4"})})}));SD.displayName="SocialLink";const kD=b.memo(()=>{const t=Xt(),[e]=af(),n=b.useMemo(()=>{var s;const i=((s=window.codemirror)==null?void 0:s.state.doc.toString())||"",r=t("footer.issue.body",e,i);return`https://github.com/ruiz-jose/VonSim8/issues/new?body=${encodeURIComponent(r)}`},[t,e]);return h.jsx("footer",{className:"bg-black px-3 py-1.5 text-xs text-white","data-testid":"footer",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-stone-400",children:["© Copyright 2017-2025 — III-LIDI, FI, UNLP, UNER — v","e2bc0e2"]}),h.jsxs("div",{className:"flex items-center gap-1","data-testid":"footer-links",children:[WJ.map(i=>h.jsx(SD,{name:i.name,url:i.url,icon:i.icon},i.name)),h.jsx(gr,{content:t("footer.issue.report"),position:"top",children:h.jsx(ht,{variant:"ghost",size:"sm",onClick:()=>window.open(n,"_blank"),className:"hover-lift","aria-label":t("footer.issue.report"),children:h.jsx("span",{className:"icon-[lucide--bug] size-4"})})})]})]})})});kD.displayName="Footer";const GJ="modulepreload",KJ=function(t){return"/VonSim8/"+t},s4={},_D=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=KJ(l),l in s4)return;s4[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":GJ,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function kp(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class dn{constructor(e,n){he(this,"start");he(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new dn(i,r)}toJSON(){return this.range}}const o4=Se.from(Se.MAX_ADDRESS).toString(),qJ=xr.from(xr.MAX_ADDRESS).toString(),YJ={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${Se.format(t)} is out of range (max memory address: ${o4}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":`The program is empty or does not contain executable instructions.

Remember: a valid program must have at least one instruction and end with the END directive.

For example:

    org 1000h
    mov al, 3
    hlt
    end

See the documentation or examples for more help.`,"end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`This instruction would be placed in address ${Se.format(t)}, which is outside the memory range (max memory address: ${o4}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${qJ}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},a4=Se.from(Se.MAX_ADDRESS).toString(),XJ=xr.from(xr.MAX_ADDRESS).toString(),JJ={"address-has-code":t=>`La dirección de memoria ${Se.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${Se.format(t)} está fuera de rango (dirección máxima de memoria: ${a4}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":`El programa está vacío o no contiene instrucciones ejecutables.

Recuerda que un programa válido debe tener al menos una instrucción y finalizar con la directiva END.

Por ejemplo:

    org 1000h
    mov al, 3
    hlt
    end

Consulta la documentación o los ejemplos para más ayuda.`,"end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El único registro válido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 16 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${Se.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${a4}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${XJ}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${Se.format(t)}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instrucción sería colocada en la dirección ${Se.format(t)}, la cual ya está reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carácter solo puede contener un carácter.","empty-character":"Los carácter no puede estar vacío.","invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-character":"Carácter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},ZJ=SC({en:YJ,es:JJ});class se extends Error{constructor(n,...i){super();he(this,"code");he(this,"context");he(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof dn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return ZJ(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof se?n:new se("unexpected-error",n)}}const AC=[[0,B.fromUnsigned(160,8)],[3,B.fromUnsigned(176,8)],[6,B.fromUnsigned(192,8)],[7,B.fromUnsigned(208,8)]],l4=new Set(...AC.map(([t])=>[t]));var Ra,gd;class QJ{constructor(){he(this,"codeMemory",new Set);he(this,"labels",new Map);he(this,"hasORG",!1);je(this,Ra,!1);je(this,gd,!1)}loadStatements(e){if(A(this,Ra))throw new Error("Tried to load statements twice");ee(this,Ra,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new se("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:Se.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:Se.from(0)})}return n}computeAddresses(e){if(A(this,gd))throw new Error("Tried to compute addresses twice");ee(this,gd,!0),this.codeMemory.clear();const n=new Set,i=e.some(u=>u.isInstruction()&&u.instruction==="INT");if(this.hasORG=e.some(u=>u.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new se("missing-org").at(e[0].position);let r=i&&!this.hasORG?8:this.hasORG?32:0,s=null,o=r;const a=[],l=[],c=[];for(const u of e)u.isInstruction()?a.push(u):u.isOriginChange()?l.push(u):u.isDataDirective()&&c.push(u);if(this.hasORG){const u=[],d=[];return kp(e,f=>{if(f.isEnd()||f.isDataDirective()&&f.directive==="EQU")return;if(f.isOriginChange()){r=f.newAddress;return}const p=r;if(p===null)throw new se("missing-org").at(f);const g=f.length,m=p,v=p+g-1;for(const w of d)if(Math.max(m,w.start)<=Math.min(v,w.end)){u.push(new se("occupied-address",Se.from(m)).at(f));return}d.push({start:m,end:v,statement:f});for(let w=0;w<g;w++){if(!Se.inRange(p+w))throw new se("instruction-out-of-range",p+w).at(f);const x=Se.from(p+w);if(n.has(x.value))throw new se("occupied-address",x).at(f);if(i&&l4.has(x.value))throw new se("reserved-address",x).at(f);n.add(x.value),f.isInstruction()&&this.codeMemory.add(x.value)}const y=Se.from(p);f.setStart(y),f.label&&this.labels.set(f.label,{type:f.isInstruction()?"instruction":f.directive,address:y}),(f.isDataDirective()||f.isInstruction())&&(r+=g,o=Math.max(o,r))},se.from),u}else return kp([...a,...l,...c],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const m=d.newAddress;m<32?s=m:r=m;return}let f;if(d.isDataDirective())s===null&&(s=o),f=s;else if(d.isInstruction())f=r;else throw new se("missing-org").at(d);const p=d.length;for(let m=0;m<p;m++){if(!Se.inRange(f+m))throw new se("instruction-out-of-range",f+m).at(d);const v=Se.from(f+m);if(n.has(v.value))throw new se("occupied-address",v).at(d);if(i&&l4.has(v.value))throw new se("reserved-address",v).at(d);n.add(v.value),d.isInstruction()&&this.codeMemory.add(v.value)}const g=Se.from(f);if(d.setStart(g),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:g}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=p}else d.isInstruction()&&(r+=p,o=Math.max(o,r))},se.from)}labelExists(e){if(!A(this,Ra))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,Ra))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,Ra))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,gd))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof Se&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}Ra=new WeakMap,gd=new WeakMap;const eZ=["AL","BL","CL","DL","AH","BH","CH","DH"],CD=["AX","BX","CX","DX","SP"],Dv=[...eZ,...CD],NC=["DB","DW","EQU"],PC=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],tZ=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...Dv,...PC,...NC];class nZ{constructor(e,n,i){he(this,"type");he(this,"lexeme");he(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class iZ{constructor(e){he(this,"scanned",!1);he(this,"tokens",[]);he(this,"position",new dn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new dn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-character").at(this.position);if(Sp(this.peek())===null)throw new se("lexer.only-ascii").at(new dn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new se("lexer.empty-character").at(this.position);if(n>=2)throw new se("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-string").at(this.position);if(Sp(this.peek())===null)throw new se("lexer.only-ascii").at(new dn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()===".")throw new se("lexer.unexpected-character",".").at(new dn(this.position.end,this.position.end+1));if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new se("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new se("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){if(e==="."&&this.isDigit(this.peek()))throw new se("lexer.unexpected-character",".").at(new dn(this.position.start,this.position.start+1));for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();tZ.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new se("lexer.unexpected-character",e).at(this.position)}return this.position=new dn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new nZ(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new dn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class Hn{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}he(Hn,"numberLiteral",(...e)=>new rZ(...e)),he(Hn,"label",(...e)=>new sZ(...e)),he(Hn,"unaryOperation",(...e)=>new oZ(...e)),he(Hn,"binaryOperation",(...e)=>new aZ(...e));class rZ extends Hn{constructor(n,i){super(i);he(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let sZ=class extends Hn{constructor(n,i,r){super(r);he(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new se("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new se("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new se("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class oZ extends Hn{constructor(n,i,r){super(r);he(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class aZ extends Hn{constructor(n,i,r,s){super(s);he(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class cb{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var Po;class ED extends cb{constructor(n,i,r){super(r);he(this,"type","data-directive");he(this,"label");he(this,"values");je(this,Po,null);this.values=n,this.label=i}get start(){if(A(this,Po)===null)throw new Error("Start not set");return A(this,Po)}setStart(n){if(A(this,Po)!==null)throw new Error("Start already set");ee(this,Po,n)}toJSON(){return{...super.toJSON(),...A(this,Po)?{start:A(this,Po).toJSON()}:{},directive:this.directive,label:this.label}}}Po=new WeakMap;var yc,Ta,vd;class lZ extends ED{constructor(n,i,r){super(n,i,r);he(this,"directive","EQU");je(this,yc,"not-processed");je(this,Ta,null);je(this,vd,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,vd)??((n=A(this,Ta))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(A(this,Ta))throw new Error("Constant already validated");if(!this.label)throw new se("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new se("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new se("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new se("cannot-be-unassinged","EQU").at(n);ee(this,Ta,n.value)}evaluateExpressions(n){if(!A(this,Ta))throw new Error("Constant not validated");if(A(this,yc)==="processed")return A(this,vd);if(A(this,yc)==="processing")throw new se("circular-reference").at(this.position);ee(this,yc,"processed");const i=A(this,Ta).evaluate(n);return ee(this,yc,"processed"),ee(this,vd,i),i}evaluate(n){return this.evaluateExpressions(n)}}yc=new WeakMap,Ta=new WeakMap,vd=new WeakMap;const ch=Symbol("unassigned");var Oi,rs;class cZ extends ED{constructor(n,i,r,s){super(i,r,s);he(this,"size");je(this,Oi,null);je(this,rs,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,Oi))throw new Error("Data directive not validated");return A(this,Oi).length*(this.size/8)}getValues(){if(!A(this,rs))throw new Error("Data directive not evaluated");return A(this,rs)}toJSON(){return{...super.toJSON(),values:(A(this,rs)??A(this,Oi)??this.values).map(n=>n===ch?"?":n.toJSON())}}validate(){if(A(this,Oi))throw new Error("Data directive already validated");ee(this,Oi,[]);for(const n of this.values)if(n.isUnassigned())A(this,Oi).push(ch);else if(n.isString()){if(this.directive!=="DB")throw new se("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=Sp(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new dn(n.position.start+r,n.position.start+r+1),a=Hn.numberLiteral(s,o);A(this,Oi).push(a)}}else A(this,Oi).push(n.value);if(A(this,Oi).length===0)throw new se("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,Oi))throw new Error("Data directive not validated");if(A(this,rs))throw new Error("Data directive already evaluated");ee(this,rs,[]);const i=kp(A(this,Oi),r=>{if(r===ch)A(this,rs).push(ch);else{const s=r.evaluate(n);if(!B.fits(s,this.size))throw new se("value-out-of-range",s,this.size).at(this);const o=B.fromNumber(s,this.size);A(this,rs).push(o)}},se.from);return i.length>0&&ee(this,rs,null),i}}Oi=new WeakMap,rs=new WeakMap;class MC{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class uZ extends MC{constructor(n,i){super(i);he(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class dZ extends MC{constructor(n){super(n);he(this,"type","unassigned")}}class fZ extends MC{constructor(n){super(n.position);he(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function hZ(t,e,n){const i=dn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new cZ(t.type,e,n,i);case"EQU":return new lZ(e,n,i)}}class sx extends cb{constructor(n){super(n);he(this,"type","end")}}function ic(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var Mo;class Zc extends cb{constructor(n,i,r){super(r);he(this,"type","instruction");he(this,"label");he(this,"operands");je(this,Mo,null);this.operands=n,this.label=i}getOperands(){return this.operands}get start(){if(A(this,Mo)===null)throw new Error("Start not set");return A(this,Mo)}setStart(n){if(A(this,Mo)!==null)throw new Error("Start already set");ee(this,Mo,n)}toJSON(){return{...super.toJSON(),...A(this,Mo)?{start:A(this,Mo).toJSON()}:{},instruction:this.instruction,label:this.label}}}Mo=new WeakMap;var ri,Nr;class pZ extends Zc{constructor(n,i,r,s){super(i,r,s);je(this,ri,null);je(this,Nr,null);this.instruction=n}get length(){if(!A(this,ri))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=A(this,ri);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!A(this,Nr))throw new Error("Instruction not evaluated");return A(this,Nr)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(ic(r)&3)<<2,o[0]|=(ic(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(ic(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(ic(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(ic(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,Nr)??A(this,ri)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,ri))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new se("size-mismatch",r.size,i.size).at(this);ee(this,ri,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);ee(this,ri,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);ee(this,ri,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new se("size-mismatch",s.size,i.size).at(this);ee(this,ri,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}ee(this,ri,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new se("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new se("size-mismatch",s,r.size).at(this);ee(this,ri,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new se("double-memory-access").at(this);s==="auto"&&(s=8),ee(this,ri,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new se("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,ri))throw new Error("Instruction not validated");if(A(this,Nr))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=A(this,ri),a=l=>{const c=l.evaluate(n);if(!Se.inRange(c))throw new se("address-out-of-range",c).at(l);const u=Se.from(c);if(n.addressIsReserved(u))throw new se("address-has-code",u).at(l);return u};switch(i){case"reg<-reg":{ee(this,Nr,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{ee(this,Nr,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!B.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const c=B.fromNumber(l,r);ee(this,Nr,{mode:i,size:r,out:s,src:c});return}case"mem<-reg":{ee(this,Nr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!B.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const c=B.fromNumber(l,r);ee(this,Nr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return i}}}ri=new WeakMap,Nr=new WeakMap;var $s,Ro;class mZ extends Zc{constructor(n,i,r,s){super(i,r,s);je(this,$s,null);je(this,Ro,null);he(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,Ro))throw new Error("Instruction not evaluated");return A(this,Ro)}toJSON(){return{...super.toJSON(),...A(this,Ro)?{value:A(this,Ro).toJSON()}:A(this,$s)?{initialValue:A(this,$s).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,$s))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new se("expects-immediate").at(n);ee(this,$s,n.value)}evaluateExpressions(n){if(!A(this,$s))throw new Error("Instruction not validated");if(A(this,Ro))throw new Error("Instruction aready evaluated");const i=A(this,$s).evaluate(n);if(!B.fitsUnsigned(i,8))throw new se("invalid-interrupt",i).at(A(this,$s));ee(this,Ro,B.fromUnsigned(i,8))}}$s=new WeakMap,Ro=new WeakMap;var ss,To,qT;let gZ=(qT=class extends Zc{constructor(n,i,r,s){super(i,r,s);je(this,ss,null);je(this,To,null);this.instruction=n}get length(){if(!A(this,ss))throw new Error("Instruction not validated");return A(this,ss).port==="fixed"?2:1}toBytes(){const n=[],i={IN:216,OUT:220};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,To)===null)throw new Error("Operation not set");return A(this,To)}toJSON(){return{...super.toJSON(),...A(this,To)??A(this,ss)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,ss))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new se("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new se("expects-dx").at(i);ee(this,ss,{port:"variable",size:r});return}if(i.isNumberExpression()){ee(this,ss,{port:"fixed",size:r,address:i.value});return}throw new se("expects-immediate").at(i)}evaluateExpressions(n){if(!A(this,ss))throw new Error("Instruction not validated");if(A(this,To))throw new Error("Instruction aready evaluated");const i=A(this,ss);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!xr.inRange(r))throw new se("io-address-out-of-range",r).at(this);const s=xr.from(r);ee(this,To,{port:"fixed",size:i.size,address:s})}else ee(this,To,{port:"variable",size:i.size})}},ss=new WeakMap,To=new WeakMap,qT);var Oo,Fs,YT;let vZ=(YT=class extends Zc{constructor(n,i,r,s){super(i,r,s);je(this,Oo,null);je(this,Fs,null);he(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,Fs)===null)throw new Error("Instruction not evaluated");return A(this,Fs)}toJSON(){return{...super.toJSON(),...A(this,Fs)?{address:A(this,Fs).toJSON()}:A(this,Oo)?{jumpTo:A(this,Oo)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Oo))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel()&&!i.value.isNumberLiteral())throw new se("expects-label").at(i);if(i.value.isLabel()){const r=i.value.value,s=n.getLabelType(r);if(!s)throw new se("label-not-found",r).at(i);if(s!=="instruction")throw new se("label-should-be-an-instruction",r).at(i);ee(this,Oo,r)}else if(i.value.isNumberLiteral()){const r=i.value.value;if(!Se.inRange(r))throw new se("address-out-of-range",r).at(i);ee(this,Fs,Se.from(r))}}evaluateExpressions(n){if(!A(this,Fs)&&A(this,Oo)){const i=n.getLabelValue(A(this,Oo));if(!Se.inRange(i))throw new se("address-out-of-range",i).at(this);ee(this,Fs,Se.from(i))}}},Oo=new WeakMap,Fs=new WeakMap,YT);var zs,XT;let yZ=(XT=class extends Zc{constructor(n,i,r,s){super(i,r,s);je(this,zs,null);he(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:208,POP:212}[this.instruction];return i|=ic(this.register),new Uint8Array([i])}get register(){if(!A(this,zs))throw new Error("Instruction not evaluated");return A(this,zs)}toJSON(){return{...super.toJSON(),...A(this,zs)?{register:A(this,zs)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,zs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new se("expects-word-register").at(n);ee(this,zs,n.value)}evaluateExpressions(){if(!A(this,zs))throw new Error("Instruction not validated")}},zs=new WeakMap,XT);var er,Bs;class bZ extends Zc{constructor(n,i,r,s){super(i,r,s);je(this,er,null);je(this,Bs,null);this.instruction=n}get length(){if(!A(this,er))throw new Error("Instruction not validated");const{mode:n}=A(this,er);let i=1;return n==="mem-direct"&&(i+=1),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=ic(this.operation.reg);break}case"mem-direct":{const r=this.operation.address.byte;n.push(r.low.unsigned);break}case"mem-indirect":break;default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,Bs))throw new Error("Instruction not evaluated");return A(this,Bs)}toJSON(){return{...super.toJSON(),...A(this,Bs)??A(this,er)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,er))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){ee(this,er,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);ee(this,er,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);ee(this,er,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){ee(this,er,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new se("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!A(this,er))throw new Error("Instruction not validated");if(A(this,Bs))throw new Error("Instruction aready evaluated");const i=A(this,er);switch(i.mode){case"reg":{ee(this,Bs,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!Se.inRange(r))throw new se("address-out-of-range",r).at(i.address);const s=Se.from(r);if(n.addressIsReserved(s))throw new se("address-has-code",s).at(i.address);ee(this,Bs,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{ee(this,Bs,{mode:"mem-indirect",size:i.size});return}default:return i}}}er=new WeakMap,Bs=new WeakMap;var yd;class wZ extends Zc{constructor(n,i,r,s){super(i,r,s);je(this,yd,!1);he(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,yd))throw new Error("Instruction already validated");if(this.operands.length>0)throw new se("expects-no-operands").at(this);ee(this,yd,!0)}evaluateExpressions(){if(!A(this,yd))throw new Error("Instruction not validated")}}yd=new WeakMap;class ub{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class xZ extends ub{constructor(n){super(n.position);he(this,"type","register");he(this,"value");this.value=n.type}get size(){return CD.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class SZ extends ub{constructor(n,i){super(i);he(this,"type","indirect-address");he(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class kZ extends ub{constructor(n,i,r){super(r);he(this,"type","direct-address");he(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class $v extends ub{constructor(n){super(n.position);he(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return $v.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new se("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:Hn.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=$v.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:Hn.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function c4(t,e,n){const i=dn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new wZ(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new pZ(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new bZ(t.type,e,n,i);case"PUSH":case"POP":return new yZ(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new vZ(t.type,e,n,i);case"IN":case"OUT":return new gZ(t.type,e,n,i);case"INT":return new mZ(t.type,e,n,i)}}class _Z extends cb{constructor(n,i){super(i);he(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let CZ=class{constructor(e){he(this,"tokens");he(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new se("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new se("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new _Z(i,dn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new se("end-must-be-the-last-statement").at(e);return new sx(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new sx(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new sx(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...NC);if(e&&!n)throw new se("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),hZ(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new uZ(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new dZ(e.position)}return new fZ(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...PC);if(e&&!n){const s=this.peek();throw new se("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return c4(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),c4(n,r,i)}instructionOperand(){if(this.match(...Dv)){const n=this.previous();return new xZ(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new se("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Dv)){if(!this.check("BX","BL"))throw new se("parser.indirect-addressing-must-be-bx");const i=this.advance(),r=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-literal","]",i.lexeme));return new SZ(e==null?void 0:e.type,dn.merge(e==null?void 0:e.position,n.position,r.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-expression","]"));return new kZ(i,e==null?void 0:e.type,dn.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new se("parser.expected-literal-after-literal","[","PTR");return new $v(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new se("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new se("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return Hn.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=Sp(i.lexeme.slice(1,-1));return Hn.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new se("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new se("parser.expected-label-after-offset").at(this.peek());if(!n)throw new se("parser.expected-argument").at(this.peek());return Hn.label(n.lexeme.toUpperCase(),e!==null,dn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new se("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return Hn.unaryOperation(e.type==="PLUS"?"+":"-",n,dn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=Hn.binaryOperation(e,"*",n,dn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=Hn.binaryOperation(e,n.type==="PLUS"?"+":"-",i,dn.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function AD(t){try{const n=new iZ(t).scanTokens(),r=new CZ(n).parse();if(!r.at(-1))throw new se("empty-program");let o=[];const a=new QJ;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=kp(r,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},se.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=kp(r,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},se.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[se.from(e)]}}}class Cs{constructor(e){he(this,"computer");this.computer=e.computer}}const EZ=t=>Se.format(t).slice(-2),AZ=EZ(Se.MAX_ADDRESS),NZ={"address-has-instruction":t=>`Memory address ${Se.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${Se.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${Se.format(t)} is out of range (max memory address: ${AZ}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${xr.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${Se.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},PZ=Se.from(Se.MAX_ADDRESS).toString(),MZ={"address-has-instruction":t=>`La dirección de memoria ${Se.format(t)} tiene una instrucción, y no se puede escribir.`,"address-is-reserved":t=>`La dirección de memoria ${Se.format(t)} está reservada, y no se puede escribir.`,"address-out-of-range":t=>`La dirección de memoria ${Se.format(t)} está fuera de rango (dirección máxima de memoria: ${PZ}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontró ningún módulo conectado a la dirección de memoria E/S ${xr.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${Se.format(t)} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},RZ=SC({en:NZ,es:MZ});class en extends Error{constructor(n,...i){super();he(this,"code");he(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return RZ(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof en?n:new en("unexpected-error",n)}}class sa{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,i){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new en("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),i||(yield*e.cpu.getMBR(n))}}var _y,ND;class TZ extends sa{constructor(){super(...arguments);je(this,_y)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Pt(this,_y,ND).call(this),willUse:{id:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct",ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"&&this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")i!=="reg<-mem"?r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"):(typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!0),typeof window<"u"&&window.setShowPath2&&i==="reg<-mem"&&o.mode==="direct"&&window.setShowPath2(!1));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(this.operation.mode==="mem<-imd"?yield*n.cpu.getMBR("id.l"):yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}i==="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}i==="mem<-imd"&&(yield*n.cpu.copyByteRegister("id.l","left.l")),yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=B.fromSigned(d,r),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned+l.unsigned+d;f>B.maxValue(r)?(u.CF=!0,c=B.fromUnsigned(f-B.maxValue(r)-1,r)):(u.CF=!1,c=B.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned-l.unsigned-d;f<0?(u.CF=!0,c=B.fromUnsigned(f+B.maxValue(r)+1,r)):(u.CF=!1,c=B.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}_y=new WeakSet,ND=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var Cy,PD;class OZ extends sa{constructor(){super(...arguments);je(this,Cy)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Pt(this,Cy,PD).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=B.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=B.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===B.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",B.fromSigned(1,16));const o=i.unsigned+1;o>B.maxValue(this.operation.size)?(s.CF=!0,r=B.fromUnsigned(o-B.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=B.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",B.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=B.fromUnsigned(o+B.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=B.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Cy=new WeakSet,PD=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class IZ extends sa{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var Ey,MD;class jZ extends sa{constructor(){super(...arguments);je(this,Ey)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Pt(this,Ey,MD).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new en("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new en("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new en("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}Ey=new WeakSet,MD=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class LZ extends sa{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:!1,ri:this.name==="CALL"}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l",!0),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(!(yield*e.cpu.pushToStack("IP.l")))return!1;yield*e.cpu.copyByteRegister("ri.l","IP.l")}else yield*e.cpu.getMBR("ri.l"),yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class DZ extends sa{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"halting"},yield{type:"cpu:halt"},!1;return!0}}function g2(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function ox(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var Ay,RD;class $Z extends sa{constructor(){super(...arguments);je(this,Ay)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Pt(this,Ay,RD).call(this),willUse:{id:!1,ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):(this.operation.mode==="mem<-reg"||this.operation.mode==="reg<-mem")&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"ri.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":{if(r===8)yield{type:"cpu:register.buscopy",src:o,dest:s,size:8};else{const[a,l]=ox(o),[c,u]=ox(s);yield{type:"cpu:register.buscopy",src:a,dest:c,size:8},l&&u&&(yield{type:"cpu:register.buscopy",src:l,dest:u,size:8})}return!0}case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=ox(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"||(yield*n.cpu.copyByteRegister("BL","ri.l")),yield*n.cpu.setMAR("ri"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}Ay=new WeakSet,RD=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class FZ extends sa{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class zZ extends sa{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(i)}else{const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(i))}}}function BZ(t){switch(t.instruction){case"MOV":return new $Z(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new TZ(t);case"NOT":case"NEG":case"INC":case"DEC":return new OZ(t);case"IN":case"OUT":return new jZ(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new zZ(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new LZ(t);case"RET":case"IRET":return new FZ(t);case"INT":return new IZ(t);case"CLI":case"STI":case"NOP":case"HLT":return new DZ(t)}}function UZ(t){for(const[e,n]of AC)if(n.unsigned===t.unsigned)return e;return null}function*VZ(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new en("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",r=>r.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new en("device-not-connected","keyboard")},!1;const i=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",i),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new en("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",B.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(i);else return yield{type:"cpu:error",error:new en("device-not-connected","screen")},!1;n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",B.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",B.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===B.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var bd,Qe,Pr,Ii,mn,ku,Er,JT;let HZ=(JT=class extends Cs{constructor(n){super(n);je(this,mn);je(this,bd);je(this,Qe);je(this,Pr);je(this,Ii);n.data==="unchanged"?(ee(this,Qe,A(n.previous.cpu,Qe)),ee(this,Pr,A(n.previous.cpu,Pr)),ee(this,Ii,A(n.previous.cpu,Ii))):(ee(this,Qe,{AX:B.zero(16),BX:B.zero(16),CX:B.zero(16),DX:B.zero(16),SP:B.zero(16),IP:B.zero(16),IR:B.zero(8),ri:B.zero(16),id:B.zero(16),left:B.zero(16),right:B.zero(16),result:B.zero(16),FLAGS:B.zero(16)}),ee(this,Pr,B.zero(16)),ee(this,Ii,B.zero(8))),A(this,Qe).SP=B.fromUnsigned(Se.MAX_ADDRESS,16);const i=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),r=n.hasORG??!1;let s;r?s=32:i?s=8:s=0,A(this,Qe).IP=B.fromUnsigned(s,16),A(this,Qe).ri=B.fromUnsigned(0,16),A(this,Qe).id=B.fromUnsigned(0,16),Pt(this,mn,Er).call(this,"IF",!0),ee(this,bd,new Map);for(const o of n.program.instructions){const a=BZ(o);A(this,bd).set(a.start.value,a)}}*run(){var n;for(;;){const i=A(this,Qe).IP,r=UZ(i);if(r!==null){if(!(yield*VZ(this.computer,r)))return}else{const s=A(this,bd).get(i.unsigned);if(!s){yield{type:"cpu:error",error:new en("no-instruction",A(this,Qe).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",B.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l"))))return!1;const i=B.fromUnsigned(n.unsigned,8);return yield*this.updateByteRegister("ri.l",i),yield*this.copyWordRegister("ri","IP"),yield*this.setMAR("ri"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("IP.l"),!0):!1}toJSON(){return{...Object.entries(A(this,Qe)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:A(this,Pr).toJSON(),MBR:A(this,Ii).toJSON()}}getRegister(n){const[i,r]=g2(n);return r==="low"?A(this,Qe)[i].low:r==="high"?A(this,Qe)[i].high:A(this,Qe)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Pt(this,mn,ku).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Pt(this,mn,ku).call(this,i,r.withHigh(B.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Pt(this,mn,ku).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Pt(this,mn,ku).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return A(this,Qe).FLAGS.bit(1);case"ZF":return A(this,Qe).FLAGS.bit(0);case"SF":return A(this,Qe).FLAGS.bit(3);case"IF":return A(this,Qe).FLAGS.bit(4);case"OF":return A(this,Qe).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Pt(this,mn,Er).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Pt(this,mn,Er).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Pt(this,mn,Er).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Pt(this,mn,Er).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Pt(this,mn,Er).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,Qe).FLAGS}}*aluExecute(n,i,r){A(this,Qe).result=i.is8bits()?A(this,Qe).result.withLow(i):i,typeof r.CF=="boolean"&&Pt(this,mn,Er).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Pt(this,mn,Er).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Pt(this,mn,Er).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Pt(this,mn,Er).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Pt(this,mn,Er).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:A(this,Qe).result,flags:A(this,Qe).FLAGS}}*setMAR(n){const i=this.getRegister(n);ee(this,Pr,i.withHigh(B.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Pt(this,mn,ku).call(this,n,A(this,Ii)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);ee(this,Ii,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(A(this,Pr));return i?(ee(this,Ii,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,Pr),A(this,Ii)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,Pr).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(ee(this,Ii,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,Pr).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,A(this,Ii))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const i=yield*this.computer.io.pic.handleINTR();return ee(this,Ii,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return Se.inRange(i.unsigned-1)?(i=i.add(-1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?Se.inRange(i.unsigned-1)?!0:(yield{type:"cpu:error",error:new en("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new en("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return Se.inRange(i)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),i=i.add(1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new en("stack-underflow")},!1)}},bd=new WeakMap,Qe=new WeakMap,Pr=new WeakMap,Ii=new WeakMap,mn=new WeakSet,ku=function(n,i){const[r,s]=g2(n);if(s===null){if(A(this,Qe)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);A(this,Qe)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?A(this,Qe)[r]=A(this,Qe)[r].withLow(i):A(this,Qe)[r]=A(this,Qe)[r].withHigh(i)}},Er=function(n,i){switch(n){case"CF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(1,i);return;case"ZF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(0,i);return;case"SF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(3,i);return;case"IF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(4,i);return;case"OF":A(this,Qe).FLAGS=A(this,Qe).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},JT);var Wa,tr,Io,Oa;let TD=(Wa=class extends Cs{constructor(n){super(n);je(this,tr);je(this,Io);je(this,Oa,!1);n.data==="unchanged"&&n.previous.io.printer?(ee(this,tr,A(n.previous.io.printer,tr)),ee(this,Io,A(n.previous.io.printer,Io)),ee(this,Oa,A(n.previous.io.printer,Oa))):(ee(this,tr,[]),ee(this,Io,""),ee(this,Oa,!1))}get busy(){return A(this,tr).length>=Wa.BUFFER_SIZE}*setStrobe(n){const i=A(this,Oa);if(i===n)return;if(ee(this,Oa,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();A(this,tr).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){ee(this,Io,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,tr).length===0)return;const[n,...i]=A(this,tr);if(ee(this,tr,i),yield{type:"printer:buffer.pop",char:n},i.length===Wa.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=EC(n.unsigned);ee(this,Io,A(this,Io)+r),yield{type:"printer:paper.print",char:r}}}get hasPending(){return A(this,tr).length>0}toJSON(){return{paper:A(this,Io),buffer:[...A(this,tr).map(n=>n.unsigned)]}}},tr=new WeakMap,Io=new WeakMap,Oa=new WeakMap,he(Wa,"BUFFER_SIZE",5),Wa);class db extends Cs{}let OD=class extends db{constructor(n){super(n);he(this,"PA");he(this,"PB");he(this,"CA");he(this,"CB");he(this,"leds",null);he(this,"printer",null);he(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=B.random(8),this.PB=B.random(8),this.CA=B.random(8),this.CB=B.random(8)):(this.PA=B.zero(8),this.PB=B.zero(8),this.CA=B.zero(8),this.CB=B.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class u4 extends OD{constructor(e){super(e),this.PA=this.PA.withBit(1,!1);const n=this;this.printer=new class extends TD{*readData(){const i=n.readData();return yield{type:"printer:data.read",char:i},i}*updateBusy(i){i?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*n.updatePort("A")}}(e)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return B.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=B.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var jo,ZT;let WZ=(ZT=class extends Cs{constructor(n){super(n);je(this,jo);n.data==="unchanged"&&n.previous.io.leds?ee(this,jo,A(n.previous.io.leds,jo)):n.data==="randomize"?ee(this,jo,B.random(8)):ee(this,jo,B.zero(8))}get state(){return A(this,jo)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,jo).toJSON()}},jo=new WeakMap,ZT);var Mr,QT;let GZ=(QT=class extends Cs{constructor(n){super(n);je(this,Mr);n.data==="unchanged"&&n.previous.io.switches?ee(this,Mr,A(n.previous.io.switches,Mr)):n.data==="randomize"?ee(this,Mr,B.random(8)):ee(this,Mr,B.zero(8))}get state(){return A(this,Mr)}*toggle(n){ee(this,Mr,A(this,Mr).withBit(n,!A(this,Mr).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,Mr).toJSON()}},Mr=new WeakMap,QT);class KZ extends OD{constructor(e){super(e);const n=this;this.leds=new class extends WZ{}(e),this.switches=new class extends GZ{*toggle(i){yield*super.toggle(i),yield*n.updatePort("A")}}(e)}*updatePort(e){if(e==="A"){const n=this.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=B.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.leds.update(B.fromUnsigned(n,8))}}}let qZ=class extends Cs{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},YZ=class extends Cs{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var wd,e5;let XZ=(e5=class extends Cs{constructor(){super(...arguments);je(this,wd,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,wd);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},ee(this,wd,null),n}setLastCharRead(n){ee(this,wd,n)}toJSON(){return null}},wd=new WeakMap,e5);var nr,t5;let JZ=(t5=class extends Cs{constructor(n){super(n);je(this,nr);n.data==="unchanged"&&n.previous.io.screen?ee(this,nr,A(n.previous.io.screen,nr)):ee(this,nr,"")}clear(){return this.sendChar(B.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:ee(this,nr,A(this,nr).slice(0,-1));break;case 10:ee(this,nr,A(this,nr)+`
`);break;case 12:ee(this,nr,"");break;default:ee(this,nr,A(this,nr)+EC(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,nr)}}toJSON(){return A(this,nr)}},nr=new WeakMap,t5);var Lo,mi,n5;let ZZ=(n5=class extends db{constructor(n){super(n);je(this,Lo);je(this,mi);he(this,"printer");n.data==="randomize"?ee(this,Lo,B.random(8)):ee(this,Lo,B.zero(8)),ee(this,mi,B.zero(8));const i=this;this.printer=new class extends TD{*readData(){const r=A(i,Lo);return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updateBusy(r)}}(n)}get interrupts(){return A(this,mi).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=A(this,Lo);else if(n==="STATE")i=A(this,mi);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")ee(this,Lo,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.printer.busy),ee(this,mi,i),yield{type:"handshake:register.update",register:n,value:i},A(this,mi).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),ee(this,mi,A(this,mi).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,mi)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){ee(this,mi,A(this,mi).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,mi)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,Lo).toJSON(),STATE:A(this,mi).toJSON()}}},Lo=new WeakMap,mi=new WeakMap,n5);var fs,Do,ji,gi,os,co,k0,_0;let QZ=(fs=class extends db{constructor(n){super(n);je(this,co);je(this,Do);je(this,ji);je(this,gi);je(this,os);ee(this,Do,B.fromUnsigned(255,8)),ee(this,ji,B.fromUnsigned(0,8)),ee(this,gi,B.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?ee(this,os,A(n.previous.io.pic,os)):n.data==="randomize"?ee(this,os,new Array(fs.LINES).fill(B.zero(8)).map(()=>B.random(8))):ee(this,os,new Array(fs.LINES).fill(B.zero(8)))}chipSelect(n){const r=4+fs.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=B.zero(8);else if(n==="IMR")i=A(this,Do);else if(n==="IRR")i=A(this,ji);else if(n==="ISR")i=A(this,gi);else{const r=Number(n.slice(3));i=A(this,os)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")A(this,gi).isZero()||(yield{type:"pic:intr.off"},ee(this,gi,B.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,gi)},yield*Pt(this,co,_0).call(this));else if(n==="IMR")ee(this,Do,i),yield{type:"pic:register.update",register:"IMR",value:A(this,Do)},yield*Pt(this,co,_0).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));A(this,os)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=fs.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,ji).bit(n)||(ee(this,ji,A(this,ji).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,ji)},yield*Pt(this,co,_0).call(this))}isINTRActive(){return A(this,gi).isZero()&&Pt(this,co,k0).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,gi).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Pt(this,co,k0).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");ee(this,gi,A(this,gi).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,gi)},ee(this,ji,A(this,ji).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,ji)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=A(this,os)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:A(this,Do).toJSON(),IRR:A(this,ji).toJSON(),ISR:A(this,gi).toJSON(),lines:A(this,os).map(n=>n.toJSON())}}},Do=new WeakMap,ji=new WeakMap,gi=new WeakMap,os=new WeakMap,co=new WeakSet,k0=function(){for(let n=0;n<fs.LINES;n++)if(A(this,ji).bit(n)&&!A(this,Do).bit(n))return n;return null},_0=function*(){A(this,gi).isZero()&&Pt(this,co,k0).call(this)!==null&&(yield{type:"pic:intr.on"})},he(fs,"LINES",8),fs);var Us,Ia,i5;let eQ=(i5=class extends db{constructor(n){super(n);je(this,Us);je(this,Ia);ee(this,Us,B.zero(8)),ee(this,Ia,B.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=A(this,Us);else if(n==="COMP")i=A(this,Ia);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")ee(this,Us,i);else if(n==="COMP")ee(this,Ia,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=A(this,Us).unsigned===B.maxValue(8)?B.zero(8):A(this,Us).add(1);ee(this,Us,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,Ia).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,Us).toJSON(),COMP:A(this,Ia).toJSON()}}},Us=new WeakMap,Ia=new WeakMap,i5);class tQ extends Cs{constructor(n){super(n);he(this,"clock",null);he(this,"f10",null);he(this,"keyboard",null);he(this,"screen",null);he(this,"handshake",null);he(this,"pic",null);he(this,"pio",null);he(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new XZ(n),this.screen=new JZ(n)),n.devices.pic&&(this.clock=new qZ(n),this.f10=new YZ(n),this.timer=new eQ(n),this.pic=new QZ(n)),this.pio=n.devices.pio==="switches-and-leds"?new KZ(n):n.devices.pio==="printer"?new u4(n):null,n.devices.handshake){if(this.pio instanceof u4)throw new en("io-printer-conflict");this.handshake=new ZZ(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,i;return((n=this.pio)==null?void 0:n.printer)??((i=this.handshake)==null?void 0:i.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,c,u;const i=(a=this.handshake)==null?void 0:a.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=(l=this.pic)==null?void 0:l.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=(c=this.pio)==null?void 0:c.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(u=this.timer)==null?void 0:u.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new en("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return this[i]?yield*this[i].read(r):(yield{type:"bus:io.error",error:new en("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return this[r]?(yield*this[r].write(s,i),!0):(yield{type:"bus:io.error",error:new en("device-not-connected",r)},!1)}toJSON(){var n,i,r,s,o,a,l,c,u,d,f;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((i=this.f10)==null?void 0:i.toJSON())??null,keyboard:((r=this.keyboard)==null?void 0:r.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((c=this.handshake)==null?void 0:c.toJSON())??null,pic:((u=this.pic)==null?void 0:u.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((f=this.timer)==null?void 0:f.toJSON())??null}}}var Ga,vi,xd,Sd;let nQ=(Ga=class extends Cs{constructor(n){super(n);je(this,vi);je(this,xd);je(this,Sd);n.data==="unchanged"?ee(this,vi,A(n.previous.memory,vi)):n.data==="randomize"?ee(this,vi,new Uint8Array(Ga.SIZE).map(()=>B.random(8).unsigned)):ee(this,vi,new Uint8Array(Ga.SIZE).fill(0)),A(this,vi)[255]=1;const i=n.program.instructions.some(r=>r.instruction==="INT");if(ee(this,Sd,new Set),i)for(const[r,s]of AC){const o=r;if(A(this,vi)[o]=s.unsigned,A(this,Sd).add(o),r===6){const a=[208,216,48,18,1,193,193,216,49,212,65,225],l=s.unsigned;for(let c=0;c<a.length;c++)A(this,vi)[l+c]=a[c],A(this,Sd).add(l+c)}}for(const r of n.program.data){let s=r.start.value;for(const o of r.getValues())o!==ch&&A(this,vi).set(o.toUint8Array(),s),s+=r.size/8}ee(this,xd,new Set);for(const r of n.program.instructions){A(this,vi).set(r.toBytes(),r.start.value);for(let s=0;s<r.length;s++)A(this,xd).add(r.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!Se.inRange(n))return yield{type:"memory:read.error",error:new en("address-out-of-range",n)},null;const i=B.fromUnsigned(A(this,vi).at(n),8);return yield{type:"memory:read.ok",address:Se.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},Se.inRange(n)?(A(this,xd).has(n)&&(yield{type:"memory:write.warning",warning:`Sobrescribiendo instrucción en la dirección ${Se.format(n)}`},console.warn(`Advertencia: Sobrescribiendo instrucción en la dirección ${Se.format(n)}`)),A(this,vi).set([i.unsigned],n),yield{type:"memory:write.ok",address:Se.from(n),value:i},!0):(yield{type:"memory:write.error",error:new en("address-out-of-range",n)},!1)}toJSON(){return[...A(this,vi)]}},vi=new WeakMap,xd=new WeakMap,Sd=new WeakMap,he(Ga,"SIZE",Se.MAX_ADDRESS+1),Ga);class d4{constructor(e){he(this,"cpu");he(this,"memory");he(this,"io");const n={computer:this,...e};this.cpu=new HZ(n),this.memory=new nQ(n),this.io=new tQ(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var bt;class iQ{constructor(){je(this,bt,new d4({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){ee(this,bt,new d4({...e,previous:A(this,bt)}))}getComputerState(){var e;return((e=A(this,bt))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,bt))throw new en("no-program");return A(this,bt).cpu.run()}get devices(){if(!A(this,bt))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,bt).io.clock!==null,tick:()=>{if(A(this,bt).io.clock)return A(this,bt).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,bt).io,press:()=>{if(A(this,bt).io.f10)return A(this,bt).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,bt).io,readChar:e=>{if(A(this,bt).io.keyboard)return A(this,bt).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,bt).io},printer:{connected:()=>A(this,bt).io.printer!==null,clear:()=>{if(A(this,bt).io.printer)return A(this,bt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,bt).io.printer)return A(this,bt).io.printer.print();console.warn("No printer connected to the computer!")},hasPending:()=>{var e;return((e=A(this,bt).io.printer)==null?void 0:e.hasPending)??!1}},screen:{connected:()=>"screen"in A(this,bt).io,clear:()=>{if(A(this,bt).io.screen)return A(this,bt).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,bt).io,toggle:e=>{if(A(this,bt).io.switches)return A(this,bt).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}bt=new WeakMap;const ax=ue(B.zero(16)),lx=ue(B.zero(16)),rQ=ue(B.zero(8)),cx=ue(B.zero(16)),ux=ue(B.zero(16)),dx=ue(B.zero(16)),fx=ue(B.zero(16)),hx=ue(B.zero(16)),px=ue(B.zero(16)),Fv=ue(B.zero(16)),Sc=ue(B.zero(8)),_t=ue(""),_p=ue(0),Rn=ue(0),RC=ue(!1),sQ=ue(!1),fb=ue(0),rc=ue([]),ID=ue(!1);ue(!0);ue(!0);const v2=ue(!1),gc=ue({canAnimate:!0,pendingMessage:null}),pa=t=>ue(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),ma=t=>ue(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),Ie={AL:ue(B.zero(8)),BL:ue(B.zero(8)),CL:ue(B.zero(8)),DL:ue(B.zero(8)),SP:ax,"SP.l":pa(ax),"SP.h":ma(ax),IP:lx,"IP.l":pa(lx),"IP.h":ma(lx),IR:rQ,ri:cx,"ri.l":pa(cx),"ri.h":ma(cx),id:ux,"id.l":pa(ux),"id.h":ma(ux),left:dx,"left.l":pa(dx),"left.h":ma(dx),right:fx,"right.l":pa(fx),"right.h":ma(fx),result:hx,"result.l":pa(hx),"result.h":ma(hx),FLAGS:px,"FLAGS.l":pa(px),"FLAGS.h":ma(px),MAR:Fv,MBR:Sc},si=ue({phase:"stopped"}),jD=ue("ADD");function oQ(t,e=!1){e?(T.set(Ie.AL,B.zero(8)),T.set(Ie.BL,B.zero(8)),T.set(Ie.CL,B.zero(8)),T.set(Ie.DL,B.zero(8)),T.set(Ie.SP,B.fromUnsigned(255,16)),T.set(Ie.IP,B.zero(16)),T.set(Ie.IR,B.zero(8)),T.set(Ie.ri,B.zero(16)),T.set(Ie.id,B.zero(16)),T.set(Ie.left,B.zero(16)),T.set(Ie.right,B.zero(16)),T.set(Ie.result,B.zero(16)),T.set(Ie.FLAGS,B.zero(16)),T.set(Ie.MAR,B.zero(16)),T.set(Ie.MBR,B.zero(8))):(T.set(Ie.AL,B.fromUnsigned(t.cpu.AX&255,8)),T.set(Ie.BL,B.fromUnsigned(t.cpu.BX&255,8)),T.set(Ie.CL,B.fromUnsigned(t.cpu.CX&255,8)),T.set(Ie.DL,B.fromUnsigned(t.cpu.DX&255,8)),T.set(Ie.SP,B.fromUnsigned(t.cpu.SP,16)),T.set(Ie.IP,B.fromUnsigned(t.cpu.IP,16)),T.set(Ie.IR,B.fromUnsigned(t.cpu.IR,8)),T.set(Ie.ri,B.fromUnsigned(t.cpu.ri,16)),T.set(Ie.id,B.fromUnsigned(t.cpu.id,16)),T.set(Ie.left,B.fromUnsigned(t.cpu.left,16)),T.set(Ie.right,B.fromUnsigned(t.cpu.right,16)),T.set(Ie.result,B.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,T.set(Ie.FLAGS,B.fromUnsigned(t.cpu.FLAGS,16)),T.set(Ie.MAR,B.fromUnsigned(t.cpu.MAR,16)),T.set(Ie.MBR,B.fromUnsigned(t.cpu.MBR,8))),T.set(si,{phase:"stopped"})}const LD=ue([]),DD=ue([]),zv=ue(new Array(Se.MAX_ADDRESS+1).fill(B.zero(8))),Cp=ue(Se.from(32)),aQ=ue(null),hg=256,lQ=ue(t=>{const e=t(aQ)??t(Cp);let n=e.value-e.value%hg,i=n+hg-1;i>Se.MAX_ADDRESS&&(i=Se.MAX_ADDRESS,n=i-hg+1);const r=t(zv),s=[];for(let o=0;o<hg;o++)s.push({address:Se.from(n+o),value:r[n+o]});return s});function cQ(t,e=!1){e?T.set(zv,new Array(Se.MAX_ADDRESS+1).fill(B.zero(8))):T.set(zv,t.memory.map(n=>B.fromUnsigned(n,8))),T.set(Cp,Se.from(32))}let y2=[],$D=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?$D:y2).push(n=n+t[e])})();function uQ(t){if(t<768)return!1;for(let e=0,n=y2.length;;){let i=e+n>>1;if(t<y2[i])n=i;else if(t>=$D[i])e=i+1;else return!0;if(e==n)return!1}}function f4(t){return t>=127462&&t<=127487}const h4=8205;function dQ(t,e,n=!0,i=!0){return(n?FD:fQ)(t,e,i)}function FD(t,e,n){if(e==t.length)return e;e&&zD(t.charCodeAt(e))&&BD(t.charCodeAt(e-1))&&e--;let i=mx(t,e);for(e+=p4(i);e<t.length;){let r=mx(t,e);if(i==h4||r==h4||n&&uQ(r))e+=p4(r),i=r;else if(f4(r)){let s=0,o=e-2;for(;o>=0&&f4(mx(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function fQ(t,e,n){for(;e>0;){let i=FD(t,e-2,n);if(i<e)return i;e--}return 0}function mx(t,e){let n=t.charCodeAt(e);if(!BD(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return zD(i)?(n-55296<<10)+(i-56320)+65536:n}function zD(t){return t>=56320&&t<57344}function BD(t){return t>=55296&&t<56320}function p4(t){return t<65536?1:2}class pt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=Vd(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Gs.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Vd(this,e,n);let i=[];return this.decompose(e,n,i,0),Gs.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Oh(this),s=new Oh(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new Oh(this,e)}iterRange(e,n=this.length){return new UD(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new VD(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?pt.empty:e.length<=32?new un(e):Gs.from(un.split(e,[]))}}class un extends pt{constructor(e,n=hQ(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new pQ(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new un(m4(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=C0(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new un(a,o.length+s.length));else{let l=a.length>>1;i.push(new un(a.slice(0,l)),new un(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof un))return super.replace(e,n,i);[e,n]=Vd(this,e,n);let r=C0(this.text,C0(i.text,m4(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new un(r,s):Gs.from(un.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=Vd(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new un(i,r)),i=[],r=-1);return r>-1&&n.push(new un(i,r)),n}}class Gs extends pt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?i.push(a):a.decompose(e-o,n-o,i,c)}o=l+1}}replace(e,n,i){if([e,n]=Vd(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[r]=l,new Gs(u,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=Vd(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Gs))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],c=e.children[s];if(l!=c)return i+l.scanIdentical(c,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let g of e)g.flatten(p);return new un(p,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,c=-1,u=[];function d(p){let g;if(p.lines>s&&p instanceof Gs)for(let m of p.children)d(m);else p.lines>o&&(l>o||!l)?(f(),a.push(p)):p instanceof un&&l&&(g=u[u.length-1])instanceof un&&p.lines+g.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new un(g.text.concat(p.text),g.length+1+p.length)):(l+p.lines>r&&f(),l+=p.lines,c+=p.length+1,u.push(p))}function f(){l!=0&&(a.push(u.length==1?u[0]:Gs.from(u,c)),c=-1,l=u.length=0)}for(let p of e)d(p);return f(),a.length==1?a[0]:new Gs(a,n)}}pt.empty=new un([""],0);function hQ(t){let e=-1;for(let n of t)e+=n.length+1;return e}function C0(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function m4(t,e,n){return C0(t,[""],e,n)}class Oh{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof un?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof un?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof un){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof un?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class UD{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new Oh(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class VD{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(pt.prototype[Symbol.iterator]=function(){return this.iter()},Oh.prototype[Symbol.iterator]=UD.prototype[Symbol.iterator]=VD.prototype[Symbol.iterator]=function(){return this});class pQ{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function Vd(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Yn(t,e,n=!0,i=!0){return dQ(t,e,n,i)}function mQ(t){return t>=56320&&t<57344}function gQ(t){return t>=55296&&t<56320}function Or(t,e){let n=t.charCodeAt(e);if(!gQ(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return mQ(i)?(n-55296<<10)+(i-56320)+65536:n}function TC(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Fo(t){return t<65536?1:2}const b2=/\r\n?|\n/;var Ui=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Ui||(Ui={}));class ao{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){w2(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new ao(e)}composeDesc(e){return this.empty?e:e.empty?this:HD(this,e)}mapDesc(e,n=!1){return e.empty?this:x2(this,e,n)}mapPos(e,n=-1,i=Ui.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=r+a;if(l<0){if(c>e)return s+(e-r);s+=a}else{if(i!=Ui.Simple&&c>=e&&(i==Ui.TrackDel&&r<e&&c>e||i==Ui.TrackBefore&&r<e||i==Ui.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ao(e)}static create(e){return new ao(e)}}class kn extends ao{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return w2(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return x2(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(pt.empty);i.push(o?e.slice(s,s+o):pt.empty)}s+=o}return new kn(n,i)}compose(e){return this.empty?e:e.empty?this:HD(this,e,!0)}map(e,n=!1){return e.empty?this:x2(this,e,n,!0)}iterChanges(e,n=!1){w2(this,e,n)}get desc(){return ao.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new Ep(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);oi(r,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;oi(n,u,d),d>0&&$a(i,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);oi(n,u,-1),oi(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new kn(n,i),filtered:ao.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!r.length)return;o<n&&oi(r,n-o,-1);let d=new kn(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof kn){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:f=d,insert:p}=u;if(d>f||d<0||f>n)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${n})`);let g=p?typeof p=="string"?pt.of(p.split(i||b2)):p:pt.empty,m=g.length;if(d==f&&m==0)return;d<o&&l(),d>o&&oi(r,d-o,-1),oi(r,f-d,m),$a(s,r,g),o=f}}return c(e),l(!a),a}static empty(e){return new kn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(pt.empty);i[r]=pt.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new kn(n,i)}static createSet(e,n){return new kn(e,n)}}function oi(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:r>=0&&e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function $a(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(pt.empty);t.push(n)}}function w2(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let c=r,u=s,d=pt.empty;for(;c+=a,u+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,c,s,u,d),r=c,s=u}}}function x2(t,e,n,i=!1){let r=[],s=i?[]:null,o=new Ep(t),a=new Ep(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);oi(r,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(oi(r,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(oi(r,0,o.ins),s&&$a(s,r,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;oi(r,c,l<o.i?o.ins:0),s&&l<o.i&&$a(s,r,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?kn.createSet(r,s):ao.create(r);throw new Error("Mismatched change set lengths")}}}function HD(t,e,n=!1){let i=[],r=n?[]:null,s=new Ep(t),o=new Ep(e);for(let a=!1;;){if(s.done&&o.done)return r?kn.createSet(i,r):ao.create(i);if(s.ins==0)oi(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)oi(i,0,o.ins,a),r&&$a(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;oi(i,l,u,a),r&&u&&$a(r,i,o.text)}else o.ins==-1?(oi(i,s.off?0:s.len,l,a),r&&$a(r,i,s.textBit(l))):(oi(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&$a(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>c),s.forward2(l),o.forward(l)}}}}class Ep{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?pt.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?pt.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class vc{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new vc(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return re.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return re.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return re.range(e.anchor,e.head)}static create(e,n,i){return new vc(e,n,i)}}class re{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:re.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new re([this.main],0)}addRange(e,n=!0){return re.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,re.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new re(e.ranges.map(n=>vc.fromJSON(n)),e.main)}static single(e,n=e){return new re([re.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return re.normalized(e.slice(),n);i=s.to}return new re(e,n)}static cursor(e,n=0,i,r){return vc.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?vc.create(n,e,48|s):vc.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?re.range(l,a):re.range(a,l))}}return new re(e,n)}}function WD(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let OC=0;class Ce{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=OC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ce(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:IC),!!e.static,e.enables)}of(e){return new E0([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new E0(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new E0(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function IC(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class E0{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=OC++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||S2(d,u)){let p=i(d);if(a?!g4(p,d.values[o],r):!r(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,f)=>{let p,g=f.config.address[s];if(g!=null){let m=Uv(f,g);if(this.dependencies.every(v=>v instanceof Ce?f.facet(v)===d.facet(v):v instanceof Ci?f.field(v,!1)==d.field(v,!1):!0)||(a?g4(p=i(d),m,r):r(p=i(d),m)))return d.values[o]=m,0}else p=i(d);return d.values[o]=p,1}}}}function g4(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function S2(t,e){let n=!1;for(let i of e)Ih(t,i)&1&&(n=!0);return n}function vQ(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<i.length;u++){let d=Uv(l,i[u]);if(r[u]==2)for(let f of d)c.push(f);else c.push(d)}return e.combine(c)}return{create(l){for(let c of i)Ih(l,c);return l.values[o]=a(l),1},update(l,c){if(!S2(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=S2(l,i),d=c.config.facets[e.id],f=c.facet(e);if(d&&!u&&IC(n,d))return l.values[o]=f,0;let p=a(l);return e.compare(p,f)?(l.values[o]=f,0):(l.values[o]=p,1)}}}const pg=Ce.define({static:!0});class Ci{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new Ci(OC++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(pg).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>{let s=i.facet(pg),o=r.facet(pg),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(i.values[n]=a.create(i),1):r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,pg.of({field:this,create:e})]}get extension(){return this}}const sc={lowest:4,low:3,default:2,high:1,highest:0};function Rf(t){return e=>new GD(e,t)}const hm={highest:Rf(sc.highest),high:Rf(sc.high),default:Rf(sc.default),low:Rf(sc.low),lowest:Rf(sc.lowest)};class GD{constructor(e,n){this.inner=e,this.prec=n}}class pm{of(e){return new k2(this,e)}reconfigure(e){return pm.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class k2{constructor(e,n){this.compartment=e,this.inner=n}}class Bv{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let f of yQ(e,n,o))f instanceof Ci?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of r)a[f.id]=c.length<<1,c.push(p=>f.slot(p));let u=i==null?void 0:i.config.facets;for(let f in s){let p=s[f],g=p[0].facet,m=u&&u[f]||[];if(p.every(v=>v.type==0))if(a[g.id]=l.length<<1|1,IC(m,p))l.push(i.facet(g));else{let v=g.combine(p.map(y=>y.value));l.push(i&&g.compare(v,i.facet(g))?i.facet(g):v)}else{for(let v of p)v.type==0?(a[v.id]=l.length<<1|1,l.push(v.value)):(a[v.id]=c.length<<1,c.push(y=>v.dynamicSlot(y)));a[g.id]=c.length<<1,c.push(v=>vQ(v,g,p))}}let d=c.map(f=>f(a));return new Bv(e,o,d,a,l,s)}}function yQ(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let c=i[l].indexOf(o);c>-1&&i[l].splice(c,1),o instanceof k2&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof k2){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof GD)s(o.inner,o.prec);else if(o instanceof Ci)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof E0)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,sc.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,sc.default),i.reduce((o,a)=>o.concat(a))}function Ih(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function Uv(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const KD=Ce.define(),_2=Ce.define({combine:t=>t.some(e=>e),static:!0}),qD=Ce.define({combine:t=>t.length?t[0]:void 0,static:!0}),YD=Ce.define(),XD=Ce.define(),JD=Ce.define(),ZD=Ce.define({combine:t=>t.length?t[0]:!1});class oa{constructor(e,n){this.type=e,this.value=n}static define(){return new bQ}}class bQ{of(e){return new oa(this,e)}}class wQ{constructor(e){this.map=e}of(e){return new tt(this,e)}}class tt{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new tt(this.type,n)}is(e){return this.type==e}static define(e={}){return new wQ(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}tt.reconfigure=tt.define();tt.appendConfig=tt.define();class An{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&WD(i,n.newLength),s.some(a=>a.type==An.time)||(this.annotations=s.concat(An.time.of(Date.now())))}static create(e,n,i,r,s,o){return new An(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(An.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}An.time=oa.define();An.userEvent=oa.define();An.addToHistory=oa.define();An.remote=oa.define();function xQ(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function QD(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=kn.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:tt.mapEffects(t.effects,r).concat(tt.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function C2(t,e,n){let i=e.selection,r=ad(e.annotations);return e.userEvent&&(r=r.concat(An.userEvent.of(e.userEvent))),{changes:e.changes instanceof kn?e.changes:kn.of(e.changes||[],n,t.facet(qD)),selection:i&&(i instanceof re?i:re.single(i.anchor,i.head)),effects:ad(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function e8(t,e,n){let i=C2(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=QD(i,C2(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=An.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return kQ(n?SQ(r):r)}function SQ(t){let e=t.startState,n=!0;for(let r of e.facet(YD)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:xQ(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=kn.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=An.create(e,r,t.selection&&t.selection.map(s),tt.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(XD);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof An?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof An?t=s[0]:t=e8(e,ad(s),!1)}return t}function kQ(t){let e=t.startState,n=e.facet(JD),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=QD(i,C2(e,s,t.changes.newLength),!0))}return i==t?t:An.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const _Q=[];function ad(t){return t==null?_Q:Array.isArray(t)?t:[t]}var Xn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Xn||(Xn={}));const CQ=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let E2;try{E2=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function EQ(t){if(E2)return E2.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||CQ.test(n)))return!0}return!1}function AQ(t){return e=>{if(!/\S/.test(e))return Xn.Space;if(EQ(e))return Xn.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Xn.Word;return Xn.Other}}class ct{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Ih(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return Ih(this,i),Uv(this,i)}update(...e){return e8(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(pm.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,c)=>r.set(c,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(tt.reconfigure)?(n=null,i=a.value):a.is(tt.appendConfig)&&(n=null,i=ad(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=Bv.resolve(i,r,this),s=new ct(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(_2)?e.newSelection:e.newSelection.asSingle();new ct(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:re.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=ad(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(r);for(let f=0;f<a;f++)s[f]=s[f].map(u);let d=r.mapDesc(c,!0);s.push(l.range.map(d)),r=r.compose(u),o=tt.mapEffects(o,u).concat(tt.mapEffects(ad(l.effects),d))}return{changes:r,selection:re.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof kn?e:kn.of(e,this.doc.length,this.facet(ct.lineSeparator))}toText(e){return pt.of(e.split(this.facet(ct.lineSeparator)||b2))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Ih(this,n),Uv(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Ci&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return ct.create({doc:e.doc,selection:re.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=Bv.resolve(e.extensions||[],new Map),i=e.doc instanceof pt?e.doc:pt.of((e.doc||"").split(n.staticFacet(ct.lineSeparator)||b2)),r=e.selection?e.selection instanceof re?e.selection:re.single(e.selection.anchor,e.selection.head):re.single(0);return WD(r,i.length),n.staticFacet(_2)||(r=r.asSingle()),new ct(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ct.tabSize)}get lineBreak(){return this.facet(ct.lineSeparator)||`
`}get readOnly(){return this.facet(ZD)}phrase(e,...n){for(let i of this.facet(ct.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(KD))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return AQ(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=Yn(n,o,!1);if(s(n.slice(l,o))!=Xn.Word)break;o=l}for(;a<r;){let l=Yn(n,a);if(s(n.slice(a,l))!=Xn.Word)break;a=l}return o==a?null:re.range(o+i,a+i)}}ct.allowMultipleSelections=_2;ct.tabSize=Ce.define({combine:t=>t.length?t[0]:4});ct.lineSeparator=qD;ct.readOnly=ZD;ct.phrases=Ce.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});ct.languageData=KD;ct.changeFilter=YD;ct.transactionFilter=XD;ct.transactionExtender=JD;pm.reconfigure=tt.define();function Ml(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class $c{eq(e){return this==e}range(e,n=e){return A2.create(e,n,this)}}$c.prototype.startSide=$c.prototype.endSide=0;$c.prototype.point=!1;$c.prototype.mapMode=Ui.TrackDel;let A2=class t8{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new t8(e,n,i)}};function N2(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class jC{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,f,p;if(u==d){let g=n.mapPos(u,c.startSide,c.mapMode);if(g==null||(f=p=g,c.startSide!=c.endSide&&(p=n.mapPos(u,c.endSide),p<f)))continue}else if(f=n.mapPos(u,c.startSide),p=n.mapPos(d,c.endSide),f>p||f==p&&c.startSide>0&&c.endSide<=0)continue;(p-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,p-f)),i.push(c),r.push(f-o),s.push(p-o))}return{mapped:i.length?new jC(r,s,i,a):null,pos:o}}}class xt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new xt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(N2)),this.isEmpty)return n.length?xt.of(n):this;let a=new n8(this,null,-1).goto(0),l=0,c=[],u=new gl;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(A2.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?xt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new xt(i,n,s||xt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Ap.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Ap.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=v4(o,a,i),c=new Tf(o,l,s),u=new Tf(a,l,s);i.iterGaps((d,f,p)=>y4(c,d,u,f,p,r)),i.empty&&i.length==0&&y4(c,0,u,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=v4(s,o),l=new Tf(s,a,0).goto(i),c=new Tf(o,a,0).goto(i);for(;;){if(l.to!=c.to||!P2(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>r)return!0;l.next(),c.next()}}static spans(e,n,i,r,s=-1){let o=new Tf(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);r.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(r.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new gl;for(let r of e instanceof A2?[e]:n?NQ(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return xt.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=xt.empty;r=r.nextLayer)n=new xt(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}xt.empty=new xt([],[],null,-1);function NQ(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(N2(e,i)>0)return t.slice().sort(N2);e=i}return t}xt.empty.nextLayer=xt.empty;class gl{finishChunk(e){this.chunks.push(new jC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new gl)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(xt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=xt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function v4(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class n8{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ap{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new n8(o,n,i,s));return r.length==1?r[0]:new Ap(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)gx(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)gx(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),gx(this.heap,0)}}}function gx(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Tf{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ap.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){mg(this.active,e),mg(this.activeTo,e),mg(this.activeRank,e),this.minActive=b4(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;gg(this.active,n,i),gg(this.activeTo,n,r),gg(this.activeRank,n,s),e&&gg(e,n,this.cursor.from),this.minActive=b4(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&mg(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function y4(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let c=t.to+l-n.to,u=c||t.endSide-n.endSide,d=u<0?t.to+l:n.to,f=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&P2(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,f,t.point,n.point):f>a&&!P2(t.active,n.active)&&s.compareRange(a,f,t.active,n.active),d>o)break;(c||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(d),a=d,u<=0&&t.next(),u>=0&&n.next()}}function P2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function mg(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function gg(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function b4(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function mm(t,e,n=t.length){let i=0;for(let r=0;r<n&&r<t.length;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Yn(t,r));return i}function PQ(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=Yn(t,r)}return t.length}const M2="ͼ",w4=typeof Symbol>"u"?"__"+M2:Symbol.for(M2),R2=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),x4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class vl{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let p in a){let g=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(m=>o.map(v=>m.replace(/&/,v))).reduce((m,v)=>m.concat(v)),g,l);else if(g&&typeof g=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(r(p),g,u,f)}else g!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+g+";")}(u.length||f)&&l.push((i&&!d&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=x4[w4]||1;return x4[w4]=e+1,M2+e.toString(36)}static mount(e,n,i){let r=e[R2],s=i&&i.nonce;r?s&&r.setNonce(s):r=new MQ(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let S4=new Map;class MQ{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=S4.get(i);if(s)return e[R2]=s;this.sheet=new r.CSSStyleSheet,S4.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[R2]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let c=0;c<a.rules.length;c++)i.insertRule(a.rules[c],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var yl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Np={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},RQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),TQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Wn=0;Wn<10;Wn++)yl[48+Wn]=yl[96+Wn]=String(Wn);for(var Wn=1;Wn<=24;Wn++)yl[Wn+111]="F"+Wn;for(var Wn=65;Wn<=90;Wn++)yl[Wn]=String.fromCharCode(Wn+32),Np[Wn]=String.fromCharCode(Wn);for(var vx in yl)Np.hasOwnProperty(vx)||(Np[vx]=yl[vx]);function OQ(t){var e=RQ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||TQ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Np:yl)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Rt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)i8(t,arguments[e]);return t}function i8(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)i8(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Pp(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function T2(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function A0(t,e){if(!e.anchorNode)return!1;try{return T2(t,e.anchorNode)}catch{return!1}}function Mp(t){return t.nodeType==3?zc(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function jh(t,e,n,i){return n?k4(t,e,n,i,-1)||k4(t,e,n,i,1):!1}function Fc(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Vv(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function k4(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:fo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Fc(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?fo(t):0}else return!1}}function fo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function hb(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function IQ(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function r8(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function jQ(t,e,n,i,r,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let f,p=u==l.body,g=1,m=1;if(p)f=IQ(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let w=u.getBoundingClientRect();({scaleX:g,scaleY:m}=r8(u,w)),f={left:w.left,right:w.left+u.clientWidth*g,top:w.top,bottom:w.top+u.clientHeight*m}}let v=0,y=0;if(r=="nearest")e.top<f.top?(y=e.top-(f.top+o),n>0&&e.bottom>f.bottom+y&&(y=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(y=e.bottom-f.bottom+o,n<0&&e.top-y<f.top&&(y=e.top-(f.top+o)));else{let w=e.bottom-e.top,x=f.bottom-f.top;y=(r=="center"&&w<=x?e.top+w/2-x/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-x+o)-f.top}if(i=="nearest"?e.left<f.left?(v=e.left-(f.left+s),n>0&&e.right>f.right+v&&(v=e.right-f.right+s)):e.right>f.right&&(v=e.right-f.right+s,n<0&&e.left<f.left+v&&(v=e.left-(f.left+s))):v=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,v||y)if(p)c.scrollBy(v,y);else{let w=0,x=0;if(y){let S=u.scrollTop;u.scrollTop+=y/m,x=(u.scrollTop-S)*m}if(v){let S=u.scrollLeft;u.scrollLeft+=v/g,w=(u.scrollLeft-S)*g}e={left:e.left-w,top:e.top-x,right:e.right-w,bottom:e.bottom-x},w&&Math.abs(w-v)<1&&(i="nearest"),x&&Math.abs(x-y)<1&&(r="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function LQ(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class DQ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?fo(n):0),i,Math.min(e.focusOffset,i?fo(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let lu=null;function s8(t){if(t.setActive)return t.setActive();if(lu)return t.focus(lu);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(lu==null?{get preventScroll(){return lu={preventScroll:!0},!0}}:void 0),!lu){lu=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let _4;function zc(t,e,n=e){let i=_4||(_4=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function ld(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function $Q(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function o8(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function FQ(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,fo(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=fo(n))}else{if(n==t)return!0;i=Fc(n),n=n.parentNode}}function a8(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function l8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=fo(n)}else if(n.parentNode&&!Vv(n))i=Fc(n),n=n.parentNode;else return null}}function c8(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!Vv(n))i=Fc(n)+1,n=n.parentNode;else return null}}class ci{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new ci(e.parentNode,Fc(e),n)}static after(e,n){return new ci(e.parentNode,Fc(e)+1,n)}}const LC=[];class Ot{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=Ot.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=C4(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=C4(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=fo(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ot.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,c=i,u=i;l<this.children.length;l++){let d=this.children[l],f=c+d.length;if(c<e&&f>n)return d.domBoundsAround(e,n,c);if(f>=e&&r==-1&&(r=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=LC){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new u8(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Ot.prototype.breakAfter=0;function C4(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class u8{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function d8(t,e,n,i,r,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,f=d?d.breakAfter:o;if(!(e==i&&u&&!o&&!f&&s.length<2&&u.merge(n,r,s.length?d:null,n==0,a,l))){if(i<c.length){let p=c[i];p&&(r<p.length||p.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(p=p.split(r),r=0),!f&&d&&p.merge(0,r,d,!0,0,l)?s[s.length-1]=p:((r||p.children.length&&!p.children[0].length)&&p.merge(0,r,null,!1,0,l),s.push(p))):p!=null&&p.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function f8(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let f of i)d+=f.length;t.length+=d,d8(t,c,u,a,l,i,0,r,s)}let Bi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},O2=typeof document<"u"?document:{documentElement:{style:{}}};const I2=/Edge\/(\d+)/.exec(Bi.userAgent),h8=/MSIE \d/.test(Bi.userAgent),j2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Bi.userAgent),pb=!!(h8||j2||I2),E4=!pb&&/gecko\/(\d+)/i.test(Bi.userAgent),yx=!pb&&/Chrome\/(\d+)/.exec(Bi.userAgent),zQ="webkitFontSmoothing"in O2.documentElement.style,p8=!pb&&/Apple Computer/.test(Bi.vendor),A4=p8&&(/Mobile\/\w+/.test(Bi.userAgent)||Bi.maxTouchPoints>2);var ke={mac:A4||/Mac/.test(Bi.platform),windows:/Win/.test(Bi.platform),linux:/Linux|X11/.test(Bi.platform),ie:pb,ie_version:h8?O2.documentMode||6:j2?+j2[1]:I2?+I2[1]:0,gecko:E4,gecko_version:E4?+(/Firefox\/(\d+)/.exec(Bi.userAgent)||[0,0])[1]:0,chrome:!!yx,chrome_version:yx?+yx[1]:0,ios:A4,android:/Android\b/.test(Bi.userAgent),safari:p8,webkit_version:zQ?+(/\bAppleWebKit\/(\d+)/.exec(Bi.userAgent)||[0,0])[1]:0,tabSize:O2.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const BQ=256;class bs extends Ot{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof bs)||this.length-(n-e)+i.length>BQ||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new bs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new ci(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return UQ(this.dom,e,n)}}class Qo extends Ot{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(o8(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof Qo&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(f8(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Qo(this.mark,n,o)}domAtPos(e){return m8(this,e)}coordsAt(e,n){return v8(this,e,n)}}function UQ(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?ke.chrome||ke.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=zc(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return ke.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?hb(l,o<0):l||null}class Fa extends Ot{static create(e,n,i){return new Fa(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=Fa.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Fa)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Fa&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return pt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):pt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ci.before(this.dom):ci.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return hb(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Hd extends Ot{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Hd&&e.side==this.side}split(){return new Hd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ci.before(this.dom):ci.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return pt.empty}get isHidden(){return!0}}bs.prototype.children=Fa.prototype.children=Hd.prototype.children=LC;function m8(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new ci(n,0)}function g8(t,e,n){let i,{children:r}=t;n>0&&e instanceof Qo&&r.length&&(i=r[r.length-1])instanceof Qo&&i.mark.eq(e.mark)?g8(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function v8(t,e,n){let i=null,r=-1,s=null,o=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let p=c.children[d],g=f+p.length;g>=u&&(p.children.length?a(p,u-f):(!s||s.isHidden&&(n>0||HQ(s,p)))&&(g>u||f==g&&p.getSide()>0)?(s=p,o=u-f):(f<u||f==g&&p.getSide()<0&&!p.isHidden)&&(i=p,r=u-f)),f=g}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):VQ(t)}function VQ(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Mp(e);return n[n.length-1]||null}function HQ(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function L2(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const N4=Object.create(null);function Hv(t,e,n){if(t==e)return!0;t||(t=N4),e||(e=N4);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function D2(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function WQ(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Rl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var wi=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(wi||(wi={}));class nt extends $c{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new gm(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new bl(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=y8(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new bl(e,i,r,n,e.widget||null,!0)}static line(e){return new vm(e)}static set(e,n=!1){return xt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}nt.none=xt.empty;class gm extends nt{constructor(e){let{start:n,end:i}=y8(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof gm&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Hv(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}gm.prototype.point=!1;class vm extends nt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof vm&&this.spec.class==e.spec.class&&Hv(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}vm.prototype.mapMode=Ui.TrackBefore;vm.prototype.point=!0;class bl extends nt{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?Ui.TrackBefore:Ui.TrackAfter:Ui.TrackDel}get type(){return this.startSide!=this.endSide?wi.WidgetRange:this.startSide<=0?wi.WidgetBefore:wi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof bl&&GQ(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}bl.prototype.point=!0;function y8(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function GQ(t,e){return t==e||!!(t&&e&&t.compare(e))}function N0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class vn extends Ot{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof vn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),f8(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new vn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Hv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){g8(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=L2(n,this.attrs||{})),i&&(this.attrs=L2({class:i},this.attrs||{}))}domAtPos(e){return m8(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(o8(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(D2(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Ot.get(r)instanceof Qo;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Ot.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!ke.ios||!this.children.some(s=>s instanceof bs))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof bs)||/[^ -~]/.test(i.text))return null;let r=Mp(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=v8(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof vn&&this.children.length==0&&e.children.length==0&&Hv(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof vn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class Ho extends Ot{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof Ho)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?ci.before(this.dom):ci.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new Ho(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return LC}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):pt.empty}domBoundsAround(){return null}become(e){return e instanceof Ho&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof $2?null:hb(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class $2 extends Rl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Lh{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Ho&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new vn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(vg(new Hd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Ho)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(vg(new bs(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof bl){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof bl)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ho(i.widget||Wd.block,a,i));else{let l=Fa.create(i.widget||Wd.inline,a,a?0:i.startSide),c=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),u=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(d.append(vg(new Hd(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(vg(l,r),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new Lh(e,n,i,s);return o.openEnd=xt.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function vg(t,e){for(let n of e)t=new Qo(n,[t],t.length);return t}class Wd extends Rl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Wd.inline=new Wd("span");Wd.block=new Wd("div");var Vt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Vt||(Vt={}));const Bc=Vt.LTR,DC=Vt.RTL;function b8(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const KQ=b8("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),qQ=b8("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),F2=Object.create(null),Ns=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);F2[e]=n,F2[n]=-e}function w8(t){return t<=247?KQ[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?qQ[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const YQ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class za{get dir(){return this.level%2?DC:Bc}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function x8(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!x8(i.inner,r.inner))return!1}return!0}const Tt=[];function XQ(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let c=o,u=l,d=l;c<a;c++){let f=w8(t.charCodeAt(c));f==512?f=u:f==8&&d==4&&(f=16),Tt[c]=f==4?2:f,f&7&&(d=f),u=f}for(let c=o,u=l,d=l;c<a;c++){let f=Tt[c];if(f==128)c<a-1&&u==Tt[c+1]&&u&24?f=Tt[c]=u:Tt[c]=256;else if(f==64){let p=c+1;for(;p<a&&Tt[p]==64;)p++;let g=c&&u==8||p<n&&Tt[p]==8?d==1?1:8:256;for(let m=c;m<p;m++)Tt[m]=g;c=p-1}else f==8&&d==1&&(Tt[c]=1);u=f,f&7&&(d=f)}}}function JQ(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:n;for(let d=c,f,p,g;d<u;d++)if(p=F2[f=t.charCodeAt(d)])if(p<0){for(let m=a-3;m>=0;m-=3)if(Ns[m+1]==-p){let v=Ns[m+2],y=v&2?r:v&4?v&1?s:r:0;y&&(Tt[d]=Tt[Ns[m]]=y),a=m;break}}else{if(Ns.length==189)break;Ns[a++]=d,Ns[a++]=f,Ns[a++]=l}else if((g=Tt[d])==2||g==1){let m=g==r;l=m?0:1;for(let v=a-3;v>=0;v-=3){let y=Ns[v+2];if(y&2)break;if(m)Ns[v+2]|=2;else{if(y&4)break;Ns[v+2]|=4}}}}}function ZQ(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let c=Tt[l];if(c==256){let u=l+1;for(;;)if(u==a){if(r==n.length)break;u=n[r++].to,a=r<n.length?n[r].from:e}else if(Tt[u]==256)u++;else break;let d=s==1,f=(u<e?Tt[u]:i)==1,p=d==f?d?1:2:i;for(let g=u,m=r,v=m?n[m-1].to:t;g>l;)g==v&&(g=n[--m].from,v=m?n[m-1].to:t),Tt[--g]=p;l=u}else s=c,l++}}}function z2(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let m=Tt[l];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c<s.length&&g==s[c].from){if(d)break e;let m=s[c];if(!u)for(let v=m.to,y=c+1;;){if(v==n)break e;if(y<s.length&&s[y].from==v)v=s[y++].to;else{if(Tt[v]==a)break e;break}}if(c++,f)f.push(m);else{m.from>l&&o.push(new za(l,m.from,p));let v=m.direction==Bc!=!(p%2);B2(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.to}g=m.to}else{if(g==n||(u?Tt[g]!=a:Tt[g]==a))break;g++}f?z2(t,l,g,i+1,r,f,o):l<g&&o.push(new za(l,g,p)),l=g}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let m=Tt[l-1];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,g=l;e:for(;;)if(c&&g==s[c-1].to){if(d)break e;let m=s[--c];if(!u)for(let v=m.from,y=c;;){if(v==e)break e;if(y&&s[y-1].to==v)v=s[--y].from;else{if(Tt[v-1]==a)break e;break}}if(f)f.push(m);else{m.to<l&&o.push(new za(m.to,l,p));let v=m.direction==Bc!=!(p%2);B2(t,v?i+1:i,r,m.inner,m.from,m.to,o),l=m.from}g=m.from}else{if(g==e||(u?Tt[g-1]!=a:Tt[g-1]==a))break;g--}f?z2(t,g,l,i+1,r,f,o):g<l&&o.push(new za(g,l,p)),l=g}}function B2(t,e,n,i,r,s,o){let a=e%2?2:1;XQ(t,r,s,i,a),JQ(t,r,s,i,a),ZQ(r,s,i,a),z2(t,r,s,e,n,i,o)}function QQ(t,e,n){if(!t)return[new za(0,0,e==DC?1:0)];if(e==Bc&&!n.length&&!YQ.test(t))return S8(t.length);if(n.length)for(;t.length>Tt.length;)Tt[Tt.length]=256;let i=[],r=e==Bc?0:1;return B2(t,r,r,n,0,t.length,i),i}function S8(t){return[new za(0,t,0)]}let k8="";function eee(t,e,n,i,r){var s;let o=i.head-t.from,a=za.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],c=l.side(r,n);if(o==c){let f=a+=r?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!r,n),c=l.side(r,n)}let u=Yn(t.text,o,l.forward(r,n));(u<l.from||u>l.to)&&(u=c),k8=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&u==c&&d.level+(r?0:1)<l.level?re.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):re.cursor(u+t.from,l.forward(r,n)?-1:1,l.level)}function tee(t,e,n){for(let i=e;i<n;i++){let r=w8(t.charCodeAt(i));if(r==1)return Bc;if(r==2||r==4)return DC}return Bc}const _8=Ce.define(),C8=Ce.define(),E8=Ce.define(),A8=Ce.define(),U2=Ce.define(),N8=Ce.define(),P8=Ce.define(),$C=Ce.define(),FC=Ce.define(),M8=Ce.define({combine:t=>t.some(e=>e)}),R8=Ce.define({combine:t=>t.some(e=>e)}),T8=Ce.define();class cd{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new cd(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new cd(re.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const yg=tt.define({map:(t,e)=>t.map(e)}),O8=tt.define();function dr(t,e,n){let i=t.facet(A8);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const zo=Ce.define({combine:t=>t.length?t[0]:!0});let nee=0;const Ku=Ce.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class ei{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Ku.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Ku.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new ei(nee++,e,i,r,a=>{let l=[];return o&&l.push(Rp.of(c=>{let u=c.plugin(a);return u?o(u):nt.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return ei.define((i,r)=>new e(i,r),n)}}class bx{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(dr(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){dr(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){dr(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const I8=Ce.define(),zC=Ce.define(),Rp=Ce.define(),j8=Ce.define(),BC=Ce.define(),L8=Ce.define();function P4(t,e){let n=t.state.facet(L8);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return xt.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=r;for(let f=a.length-1;f>=0;f--,l--){let p=a[f].spec.bidiIsolate,g;if(p==null&&(p=tee(e.text,c,u)),l>0&&d.length&&(g=d[d.length-1]).to==c&&g.direction==p)g.to=u,d=g.inner;else{let m={from:c,to:u,direction:p,inner:[]};d.push(m),d=m.inner}}}}),r}const D8=Ce.define();function UC(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(D8)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const uh=Ce.define();class Vr{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Vr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],f=n[s+1],p=Math.max(a,d),g=Math.min(u,f);if(p<=g&&new Vr(p+c,g+c,p,g).addToSet(i),f>u)break;s+=2}if(!l)return i;new Vr(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class Wv{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=kn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Vr(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new Wv(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class M4 extends Ot{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=nt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new vn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Vr(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!cee(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?ree(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new Vr(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(ke.ie||ke.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=aee(o,a,e.changes);return i=Vr.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=ke.chrome||ke.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Ho&&o.widget instanceof $2&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,f,p,g,m;if(i&&i.range.fromB<d&&i.range.toB>u){let S=Lh.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),_=Lh.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);p=S.breakAtStart,g=S.openStart,m=_.openEnd;let E=this.compositionView(i);_.breakAtStart?E.breakAfter=1:_.content.length&&E.merge(E.length,E.length,_.content[0],!1,_.openStart,0)&&(E.breakAfter=_.content[0].breakAfter,_.content.shift()),S.content.length&&E.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),f=S.content.concat(E).concat(_.content)}else({content:f,breakAtStart:p,openStart:g,openEnd:m}=Lh.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:v,off:y}=s.findPos(c,1),{i:w,off:x}=s.findPos(l,-1);d8(this,w,x,v,y,f,p,g,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(O8)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new bs(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new Qo(r,[n],n.length);let i=new vn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Ot.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&!(this.view.state.facet(zo)||this.dom.tabIndex>-1)&&A0(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(ke.gecko&&a.empty&&!this.hasComposition&&iee(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new ci(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!jh(l.node,l.offset,u.anchorNode,u.anchorOffset)||!jh(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{ke.android&&ke.chrome&&this.dom.contains(u.focusNode)&&lee(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=Pp(this.view.root);if(d)if(a.empty){if(ke.gecko){let f=see(l.node,l.offset);if(f&&f!=3){let p=(f==1?l8:c8)(l.node,l.offset);p&&(l=new ci(p.node,p.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new ci(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new ci(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&jh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Pp(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=vn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);i.collapse(u.node,u.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=Ot.get(n.childNodes[r]);s instanceof vn&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=Ot.get(n.childNodes[r]);s instanceof vn&&(i=s.domAtPos(s.length))}return i?new ci(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=Ot.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof vn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof vn&&!(i instanceof vn&&n>=0)))i=a,r=c;else if(i&&c==e&&l==e&&a instanceof Ho&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=c}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof vn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof bs))return null;let s=Yn(r.text,i);if(s==i)return null;let o=zc(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Vt.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],f=c+d.length;if(f>r)break;if(c>=i){let p=d.dom.getBoundingClientRect();if(n.push(p.height),o){let g=d.dom.lastChild,m=g?Mp(g):[];if(m.length){let v=m[m.length-1],y=l?v.right-p.left:p.right-v.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Vt.RTL:Vt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof vn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Mp(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new u8(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(nt.replace({widget:new $2(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return nt.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Rp).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(j8).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(xt.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(T8))try{if(c(this.view,e.range,e))return!0}catch(u){dr(this.view.state,u,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=UC(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;jQ(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Vt.LTR)}}function iee(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function $8(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=l8(n.focusNode,n.focusOffset),r=c8(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=Ot.get(r.node);if(!a||a instanceof bs&&a.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let l=Ot.get(i.node);!l||l instanceof bs&&l.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function ree(t,e,n){let i=$8(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new Vr(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=r.parentNode;;d=d.parentNode){let f=Ot.get(d);if(f instanceof Qo)u.push({node:d,deco:f.mark});else{if(f instanceof vn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:r,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new gm({inclusive:!0,attributes:WQ(d),tagName:d.tagName.toLowerCase()})});else return null}}}function see(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let oee=class{constructor(){this.changes=[]}compareRange(e,n){N0(e,n,this.changes)}comparePoint(e,n){N0(e,n,this.changes)}boundChange(e){N0(e,e,this.changes)}};function aee(t,e,n){let i=new oee;return xt.compare(t,e,n,i),i.changes}function lee(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function cee(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function uee(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return re.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=Yn(r.text,s,!1):a=Yn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let c=Yn(r.text,o,!1);if(i(r.text.slice(c,o))!=l)break;o=c}for(;a<r.length;){let c=Yn(r.text,a);if(i(r.text.slice(a,c))!=l)break;a=c}return re.range(o+r.from,a+r.from)}function dee(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function fee(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function wx(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function R4(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function T4(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function V2(t,e,n){let i,r,s,o,a=!1,l,c,u,d;for(let g=t.firstChild;g;g=g.nextSibling){let m=Mp(g);for(let v=0;v<m.length;v++){let y=m[v];r&&wx(r,y)&&(y=R4(T4(y,r.bottom),r.top));let w=dee(e,y),x=fee(n,y);if(w==0&&x==0)return g.nodeType==3?O4(g,e,n):V2(g,e,n);(!i||o>x||o==x&&s>w)&&(i=g,r=y,s=w,o=x,a=w?e<y.left?v>0:v<m.length-1:!0),w==0?n>y.bottom&&(!u||u.bottom<y.bottom)?(l=g,u=y):n<y.top&&(!d||d.top>y.top)&&(c=g,d=y):u&&wx(u,y)?u=T4(u,y.bottom):d&&wx(d,y)&&(d=R4(d,y.top))}}if(u&&u.bottom>=n?(i=l,r=u):d&&d.top<=n&&(i=c,r=d),!i)return{node:t,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return O4(i,f,n);if(a&&i.contentEditable!="false")return V2(i,f,n);let p=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:p}}function O4(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=zc(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let f=e>=(u.left+u.right)/2,p=f;if((ke.chrome||ke.gecko)&&zc(t,a).getBoundingClientRect().left==u.right&&(p=!f),d<=0)return{node:t,offset:a+(p?1:0)};r=a+(p?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function F8(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,f=d-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,_=!1;l=t.elementAtHeight(f),l.type!=wi.Text;)for(;f=i>0?l.bottom+S:l.top-S,!(f>=0&&f<=c);){if(_)return n?null:0;_=!0,i=-i}d=a+f;let p=l.from;if(p<t.viewport.from)return t.viewport.from==0?0:n?null:I4(t,o,l,u,d);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:I4(t,o,l,u,d);let g=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:g,v=m.elementFromPoint(u,d);v&&!t.contentDOM.contains(v)&&(v=null),v||(u=Math.max(o.left+1,Math.min(o.right-1,u)),v=m.elementFromPoint(u,d),v&&!t.contentDOM.contains(v)&&(v=null));let y,w=-1;if(v&&((r=t.docView.nearest(v))===null||r===void 0?void 0:r.isEditable)!=!1){if(g.caretPositionFromPoint){let S=g.caretPositionFromPoint(u,d);S&&({offsetNode:y,offset:w}=S)}else if(g.caretRangeFromPoint){let S=g.caretRangeFromPoint(u,d);S&&({startContainer:y,startOffset:w}=S,(!t.contentDOM.contains(y)||ke.safari&&hee(y,w,u)||ke.chrome&&pee(y,w,u))&&(y=void 0))}y&&(w=Math.min(fo(y),w))}if(!y||!t.docView.dom.contains(y)){let S=vn.find(t.docView,p);if(!S)return f>l.top+l.height/2?l.to:l.from;({node:y,offset:w}=V2(S.dom,u,d))}let x=t.docView.nearest(y);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=x.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(y,w)+x.posAtStart}function I4(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+PQ(o,s,t.state.tabSize)}function hee(t,e,n){let i,r=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let s=r.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return zc(t,i-1,i).getBoundingClientRect().right>n}function pee(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():zc(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function H2(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let s of i.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!r||s.type==wi.Text&&(r.type!=s.type||(n<0?s.from<e:s.to>e)))&&(r=s)}}return r||i}return i}function mee(t,e,n,i){let r=H2(t,e.head,e.assoc||-1),s=!i||r.type!=wi.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==Vt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return re.cursor(l,n?-1:1)}return re.cursor(n?r.to:r.from,n?-1:1)}function j4(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let c=eee(r,s,o,a,n),u=k8;if(!c){if(r.number==(n?t.state.doc.lines:1))return a;u=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),c=t.visualLineSide(r,!n)}if(l){if(!l(u))return a}else{if(!i)return c;l=i(u)}a=c}}function gee(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Xn.Space&&(r=o),r==o}}function vee(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return re.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-p.from))),a=(s<0?p.top:p.bottom)+u}let d=l.left+o,f=i??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=a+(f+p)*s,m=F8(t,{x:d,y:g},!1,s);if(g<l.top||g>l.bottom||(s<0?m<r:m>r)){let v=t.docView.coordsForChar(m),y=!v||g<v.top?-1:1;return re.cursor(m,y,void 0,o)}}}function P0(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function xx(t,e,n){let i=P0(t.state.facet(BC).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:re.cursor(i,i<n.from?1:-1)}const dh="￿";class yee{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ct.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=dh}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=Ot.get(r),l=Ot.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Vv(r))||Vv(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Ot.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(bee(e,i.node,i.offset)?n:0))}}function bee(t,e,n){for(;;){if(!e||n<fo(e))return!1;if(e==t)return!0;n=Fc(e)+1,e=e.parentNode}}class L4{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class wee{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:kee(e),l=new yee(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=_ee(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!T2(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!T2(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((ke.ios||ke.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),f=Math.max(l,c),p=u.from-d,g=u.to-f;(p==0||p==1||d==0)&&(g==0||g==-1||f==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=re.single(c,l)}}}function z8(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,c=null;(s===8||ke.android&&e.text.length<a-o)&&(l=r.to,c="end");let u=See(t.state.doc.sliceString(o,a,dh),e.text,l-o,c);u&&(ke.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==dh+dh&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:pt.of(e.text.slice(u.from,u.toB).split(dh))})}else i&&(!t.hasFocus&&t.state.facet(zo)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(ke.mac||ke.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=re.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:pt.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:ke.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=re.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:pt.of([" "])}),n)return VC(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function VC(t,e,n,i=-1){if(ke.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(ke.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ld(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&ld(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&ld(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=xee(t,e,n));return t.state.facet(N8).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function xee(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&$8(t,n.main.head);if(d){let g=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-g}}else u=t.state.doc.lineAt(s.head);let f=s.to-e.to,p=s.to-s.from;i=r.changeByRange(g=>{if(g.from==s.from&&g.to==s.to)return{changes:a,range:l||g.map(a)};let m=g.to-f,v=m-c.length;if(g.to-g.from!=p||t.state.sliceDoc(v,m)!=c||g.to>=u.from&&g.from<=u.to)return{range:g};let y=r.changes({from:v,to:m,insert:e.insert}),w=g.to-s.to;return{changes:y,range:l?re.range(Math.max(0,l.anchor+w),Math.max(0,l.head+w)):g.map(y)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function See(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function kee(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new L4(n,i)),(r!=n||s!=i)&&e.push(new L4(r,s))),e}function _ee(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?re.single(n+e,i+e):null}class Cee{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,ke.safari&&e.contentDOM.addEventListener("input",()=>null),ke.gecko&&Bee(e.contentDOM.ownerDocument)}handleEvent(e){!Oee(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=Eee(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&U8.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),ke.android&&ke.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return ke.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=B8.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Aee.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ld(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ke.safari&&!ke.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function D4(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){dr(n.state,r)}}}function Eee(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec,s=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(D4(i.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(D4(i.value,l))}}for(let i in ws)n(i).handlers.push(ws[i]);for(let i in Yr)n(i).observers.push(Yr[i]);return e}const B8=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Aee="dthko",U8=[16,17,18,20,91,92,224,225],bg=6;function wg(t){return Math.max(0,t)*.7+8}function Nee(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Pee{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=LQ(e.contentDOM),this.atoms=e.state.facet(BC).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ct.allowMultipleSelections)&&Mee(e,n),this.dragging=Tee(e,n)&&W8(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Nee(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=UC(this.view);e.clientX-l.left<=r+bg?n=-wg(r-e.clientX):e.clientX+l.right>=o-bg&&(n=wg(e.clientX-o)),e.clientY-l.top<=s+bg?i=-wg(s-e.clientY):e.clientY+l.bottom>=a-bg&&(i=wg(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=P0(this.atoms,r.from,0);o!=r.from&&(s=re.cursor(o,-1))}else{let o=P0(this.atoms,r.from,-1),a=P0(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=re.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?re.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Mee(t,e){let n=t.state.facet(_8);return n.length?n[0](e):ke.mac?e.metaKey:e.ctrlKey}function Ree(t,e){let n=t.state.facet(C8);return n.length?n[0](e):ke.mac?!e.altKey:!e.ctrlKey}function Tee(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Pp(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Oee(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Ot.get(n))&&i.ignoreEvent(e))return!1;return!0}const ws=Object.create(null),Yr=Object.create(null),V8=ke.ie&&ke.ie_version<15||ke.ios&&ke.webkit_version<604;function Iee(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),H8(t,n.value)},50)}function mb(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function H8(t,e){e=mb(t.state,$C,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(W2!=null&&n.selection.ranges.every(l=>l.empty)&&W2==s.toString()){let l=-1;i=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:re.cursor(c.from+d.length)}})}else o?i=n.changeByRange(l=>{let c=s.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:re.cursor(l.from+c.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Yr.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};ws.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Yr.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Yr.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};ws.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(E8))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=Dee(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new Pee(t,e,n,i)),i&&t.observer.ignore(()=>{s8(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function $4(t,e,n,i){if(i==1)return re.cursor(e,n);if(i==2)return uee(t.state,e,n);{let r=vn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,re.range(o,a)}}let F4=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function jee(t,e,n,i){let r=vn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&F4(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&F4(n,i,a)?1:o&&o.bottom>=i?-1:1}function z4(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:jee(t,n,e.clientX,e.clientY)}}const Lee=ke.ie&&ke.ie_version<=11;let B4=null,U4=0,V4=0;function W8(t){if(!Lee)return t.detail;let e=B4,n=V4;return B4=t,V4=Date.now(),U4=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(U4+1)%3:1}function Dee(t,e){let n=z4(t,e),i=W8(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=z4(t,s),c,u=$4(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=$4(t,n.pos,n.bias,i),f=Math.min(d.from,u.from),p=Math.max(d.to,u.to);u=f<u.from?re.range(f,p):re.range(p,f)}return o?r.replaceRange(r.main.extend(u.from,u.to)):a&&i==1&&r.ranges.length>1&&(c=$ee(r,l.pos))?c:a?r.addRange(u):re.create([u])}}}function $ee(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return re.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}ws.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=re.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",mb(t.state,FC,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ws.dragend=t=>(t.inputState.draggedContent=null,!1);function H4(t,e,n,i){if(n=mb(t.state,$C,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&Ree(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}ws.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&H4(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return H4(t,e,i,!0),!0}return!1};ws.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=V8?null:e.clipboardData;return n?(H8(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(Iee(t),!1)};function Fee(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function zee(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:mb(t,FC,e.join(t.lineBreak)),ranges:n,linewise:i}}let W2=null;ws.copy=ws.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=zee(t.state);if(!n&&!r)return!1;W2=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=V8?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(Fee(t,n),!1)};const G8=oa.define();function K8(t,e){let n=[];for(let i of t.facet(P8)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:G8.of(!0)}):null}function q8(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=K8(t.state,e);n?t.dispatch(n):t.update([])}},10)}Yr.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),q8(t)};Yr.blur=t=>{t.observer.clearSelectionRange(),q8(t)};Yr.compositionstart=Yr.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Yr.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,ke.chrome&&ke.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Yr.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};ws.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return VC(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let r;if(ke.chrome&&ke.android&&(r=B8.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return ke.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),ke.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Yr.compositionend(t,e),20),!1};const W4=new Set;function Bee(t){W4.has(t)||(W4.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const G4=["pre-wrap","normal","pre-line","break-spaces"];let Gd=!1;function K4(){Gd=!1}class Uee{constructor(e){this.lineWrapping=e,this.doc=pt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return G4.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=G4.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class Vee{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Ks{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?wi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof bl?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ks(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var $t=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}($t||($t={}));const M0=.001;class xi{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>M0&&(Gd=!0),this.height=e)}replace(e,n,i){return xi.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=r[a],f=s.lineAt(l,$t.ByPosNoHeight,i.setDoc(n),0,0),p=f.to>=c?f:s.lineAt(c,$t.ByPosNoHeight,i,0,0);for(d+=p.to-c,c=p.to;a>0&&f.from<=r[a-1].toA;)l=r[a-1].fromA,u=r[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,$t.ByPosNoHeight,i,0,0));u+=f.from-l,l=f.from;let g=HC.build(i.setDoc(o),e,u,d);s=Gv(s,s.replace(l,c,g))}return s.updateHeight(i,0)}static empty(){return new sr(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new Hee(xi.of(e.slice(0,n)),o,xi.of(e.slice(i)))}}function Gv(t,e){return t==e?t:(t.constructor!=e.constructor&&(Gd=!0),e)}xi.prototype.size=1;class Y8 extends xi{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new Ks(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class sr extends Y8{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new Ks(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof sr||r instanceof Un&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Un?r=new sr(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):xi.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Un extends xi{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let c=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=n.doc.lineAt(c),d=a+u.length*l,f=Math.max(i,e-d/2);return new Ks(u.from,u.length,f,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:u,length:d}=n.doc.line(s+c);return new Ks(u,d,i+a*c,a,0)}}lineAt(e,n,i,r,s){if(n==$t.ByHeight)return this.blockAt(e,i,r,s);if(n==$t.ByPosNoHeight){let{from:p,to:g}=i.doc.lineAt(e);return new Ks(p,g-p,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),c=i.doc.lineAt(e),u=a+c.length*l,d=c.number-o,f=r+a*d+l*(c.from-s-d);return new Ks(c.from,c.length,Math.max(r,Math.min(f,r+this.height-u)),u,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,s);for(let u=e,d=r;u<=n;){let f=i.doc.lineAt(u);if(u==e){let g=f.number-a;d+=l*g+c*(e-s-g)}let p=l+c*f.length;o(new Ks(f.from,f.length,d,p,0)),d+=p,u=f.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Un?i[i.length-1]=new Un(s.length+r):i.push(null,new Un(r-1))}if(e>0){let s=i[0];s instanceof Un?i[0]=new Un(e+s.length):i.unshift(new Un(e-1),null)}return xi.of(i)}decomposeLeft(e,n){n.push(new Un(e-1),null)}decomposeRight(e,n){n.push(null,new Un(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new Un(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=M0&&(l=-2);let f=new sr(u,d);f.outdated=!1,o.push(f),a+=u+1}a<=s&&o.push(null,new Un(s-a).updateHeight(e,a));let c=xi.of(o);return(l<0||Math.abs(c.height-this.height)>=M0||Math.abs(l-this.heightMetrics(e,n).perLine)>=M0)&&(Gd=!0),Gv(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Hee extends xi{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==$t.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==$t.ByPosNoHeight?$t.ByPosNoHeight:$t.ByPos;return l?c.join(this.right.lineAt(a,u,i,o,a)):this.left.lineAt(a,u,i,r,s).join(c)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let c=this.lineAt(l,$t.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&q4(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),q4(s,a)}return xi.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?xi.of(this.break?[e,null,n]:[e,n]):(this.left=Gv(this.left,e),this.right=Gv(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function q4(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Un&&(i=t[e+1])instanceof Un&&t.splice(e-1,3,new Un(n.length+1+i.length))}const Wee=5;class HC{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof sr?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new sr(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new Y8(o,r,i)):(o||s||r>=Wee)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new sr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Un(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof sr)return e;let n=new sr(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof sr)&&!this.isCovered?this.nodes.push(new sr(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof sr&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new HC(i,e);return xt.spans(n,i,r,s,0),s.finish(i)}}function Gee(t,e,n){let i=new Kee;return xt.compare(t,e,n,i,0),i.changes}class Kee{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&N0(e,n,this.changes,5)}}function qee(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(c==t.parentNode?r.innerHeight:l,f.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function Yee(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function Xee(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Sx{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return nt.replace({widget:new Jee(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class Jee extends Rl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Y4{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=X4,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Vt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(zC).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new Uee(n),this.stateDeco=e.facet(Rp).filter(i=>typeof i!="function"),this.heightMap=xi.empty().applyChanges(this.stateDeco,pt.empty,this.heightOracle.setDoc(e.doc),[new Vr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=nt.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new xg(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?X4:new WC(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(fh(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Rp).filter(u=>typeof u!="function");let r=e.changedRanges,s=Vr.extendWithRanges(r,Gee(i,this.stateDeco,e?e.changes:kn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);K4(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Gd)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(R8)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Vt.RTL:Vt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:S,scaleY:_}=r8(n,a);(S>.005&&Math.abs(this.scaleX-S)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=S,this.scaleY=_,c|=16,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=a8(e.scrollDOM);let g=(this.printing?Xee:qee)(n,this.paddingTop),m=g.top-this.pixelViewport.top,v=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(l=!0)),!this.inView&&!this.scrollTarget&&!Yee(e.dom))return 0;let w=a.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let S=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(S)&&(o=!0),o||r.lineWrapping&&Math.abs(w-this.contentDOMWidth)>r.charWidth){let{lineHeight:_,charWidth:E,textHeight:C}=e.docView.measureTextSize();o=_>0&&r.refresh(s,_,E,C,w/E,S),o&&(e.docView.minWidth=0,c|=16)}m>0&&v>0?u=Math.max(m,v):m<0&&v<0&&(u=Math.min(m,v)),K4();for(let _ of this.viewports){let E=_.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?xi.empty().applyChanges(this.stateDeco,pt.empty,this.heightOracle,[new Vr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new Vee(_.from,E))}Gd&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new xg(r.lineAt(o-i*1e3,$t.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,$t.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(c,$t.ByPos,s,0,0),f;n.y=="center"?f=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?f=d.top:f=d.bottom-u,l=new xg(r.lineAt(f-1e3/2,$t.ByHeight,s,0,0).from,r.lineAt(f+u+1e3/2,$t.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new xg(this.heightMap.lineAt(i,$t.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,$t.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,$t.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,$t.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new Sx(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Vt.LTR&&!i)return[];let a=[],l=(u,d,f,p)=>{if(d-u<s)return;let g=this.state.selection.main,m=[g.from];g.empty||m.push(g.to);for(let y of m)if(y>u&&y<d){l(u,y-10,f,p),l(y+10,d,f,p);return}let v=Qee(e,y=>y.from>=f.from&&y.to<=f.to&&Math.abs(y.from-u)<s&&Math.abs(y.to-d)<s&&!m.some(w=>y.from<w&&y.to>w));if(!v){if(d<f.to&&n&&i&&n.visibleRanges.some(x=>x.from<=d&&x.to>=d)){let x=n.moveToLineBoundary(re.cursor(d),!1,!0).head;x>u&&(d=x)}let y=this.gapSize(f,u,d,p),w=i||y<2e6?y:2e6;v=new Sx(u,d,y,w)}a.push(v)},c=u=>{if(u.length<o||u.type!=wi.Text)return;let d=Zee(u.from,u.to,this.stateDeco);if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(i){let m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,y;if(f!=null){let w=kg(d,f),x=((this.visibleBottom-this.visibleTop)/2+m)/u.height;v=w-x,y=w+x}else v=(this.visibleTop-u.top-m)/u.height,y=(this.visibleBottom-u.top+m)/u.height;p=Sg(d,v),g=Sg(d,y)}else{let m=d.total*this.heightOracle.charWidth,v=r*this.heightOracle.charWidth,y=0;if(m>2e6)for(let E of e)E.from>=u.from&&E.from<u.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=E.size-E.displaySize);let w=this.pixelViewport.left+y,x=this.pixelViewport.right+y,S,_;if(f!=null){let E=kg(d,f),C=((x-w)/2+v)/m;S=E-C,_=E+C}else S=(w-v)/m,_=(x+v)/m;p=Sg(d,S),g=Sg(d,_)}p>u.from&&l(u.from,p,u,d),g<u.to&&l(g,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,i,r){let s=kg(r,i)-kg(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Sx.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=nt.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];xt.spans(n,this.viewport.from,this.viewport.to,{span(s,o){i.push({from:s,to:o})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let o=this.visibleRanges[s],a=i[s];(o.from!=a.from||o.to!=a.to)&&(r|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||fh(this.heightMap.lineAt(e,$t.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||fh(this.heightMap.lineAt(this.scaler.fromDOM(e),$t.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return fh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let xg=class{constructor(e,n){this.from=e,this.to=n}};function Zee(t,e,n){let i=[],r=t,s=0;return xt.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Sg({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function kg(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function Qee(t,e){for(let n of t)if(e(n))return n}const X4={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class WC{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let c=n.lineAt(a,$t.ByPos,e,0,0).top,u=n.lineAt(l,$t.ByPos,e,0,0).bottom;return r+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof WC?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function fh(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new Ks(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>fh(r,e)):t._content)}const _g=Ce.define({combine:t=>t.join(" ")}),G2=Ce.define({combine:t=>t.indexOf(!0)>-1}),K2=vl.newName(),X8=vl.newName(),J8=vl.newName(),Z8={"&light":"."+X8,"&dark":"."+J8};function q2(t,e,n){return new vl(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const ete=q2("."+K2,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Z8),tte={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},kx=ke.ie&&ke.ie_version<=11;class nte{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new DQ,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(ke.ie&&ke.ie_version<=11||ke.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&ke.android&&e.constructor.EDIT_CONTEXT!==!1&&!(ke.chrome&&ke.chrome_version<126)&&(this.editContext=new rte(e),e.state.facet(zo)&&(e.contentDOM.editContext=this.editContext.editContext)),kx&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(zo)?i.root.activeElement!=this.dom:!A0(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(ke.ie&&ke.ie_version<=11||ke.android&&ke.chrome)&&!i.state.selection.main.empty&&r.focusNode&&jh(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Pp(e.root);if(!n)return!1;let i=ke.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&ite(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=A0(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&FQ(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,tte),kx&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),kx&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&ld(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&A0(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new wee(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=z8(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=J4(n,e.previousSibling||e.target.previousSibling,-1),r=J4(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(zo)!=e.state.facet(zo)&&(e.view.contentDOM.editContext=e.state.facet(zo)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function J4(t,e,n){for(;e;){let i=Ot.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function Z4(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return jh(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function ite(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return Z4(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?Z4(t,n):null}class rte{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:s,head:o}=r,a=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:pt.of(i.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=re.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));u.main.eq(r)||e.dispatch({selection:u,userEvent:"select"});return}if((ke.mac||ke.android)&&c.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:pt.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);VC(e,c,re.single(this.toEditorPos(i.selectionStart,u),this.toEditorPos(i.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(nt.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:O8.of(nt.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Pp(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(i)return;let u=c.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(c)){r=this.pendingContextChange=null,n+=u,this.to+=u;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Re{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||$Q(e.parent)||document,this.viewState=new Y4(e.state||ct.create(e)),e.scrollTo&&e.scrollTo.is(yg)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Ku).map(r=>new bx(r));for(let r of this.plugins)r.update(this);this.observer=new nte(this),this.inputState=new Cee(this),this.inputState.ensureHandlers(this.plugins),this.docView=new M4(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof An?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(G8))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=K8(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(ct.phrases)!=this.state.facet(ct.phrases))return this.setState(s);r=Wv.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;d=new cd(p.empty?p:re.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(yg)&&(d=p.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=Kv.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(uh)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(_g)!=r.state.facet(_g)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let f of this.state.facet(U2))try{f(r)}catch(p){dr(this.state,p,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!z8(this,u)&&c.force&&ld(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Y4(e),this.plugins=e.facet(Ku).map(i=>new bx(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new M4(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Ku),i=e.state.facet(Ku);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new bx(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){dr(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(a8(i))s=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(r);s=p.from,o=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(g){return dr(this.state,g),Q4}}),d=Wv.create(this,this.state,[]),f=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d),f&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=Q4)try{let g=c[p];g.write&&g.write(u[p],this)}catch(g){dr(this.state,g)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(g>1||g<-1){r=r+g,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(U2))a(n)}get themeClasses(){return K2+" "+(this.state.facet(G2)?J8:X8)+" "+this.state.facet(_g)}updateAttrs(){let e=eM(this,I8,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(zo)?"true":"false",class:"cm-content",style:`${ke.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),eM(this,zC,n);let i=this.observer.ignore(()=>{let r=D2(this.contentDOM,this.contentAttrs,n),s=D2(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Re.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(uh);let e=this.state.facet(Re.cspNonce);vl.mount(this.root,this.styleModules.concat(ete).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return xx(this,e,j4(this,e,n,i))}moveByGroup(e,n){return xx(this,e,j4(this,e,n,i=>gee(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return re.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return mee(this,e,n,i)}moveVertically(e,n,i){return xx(this,e,vee(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),F8(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[za.find(s,e-r.from,-1,n)];return hb(i,o.dir==Vt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(M8)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>ste)return S8(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||x8(s.isolates,i=P4(this,e))))return s.order;i||(i=P4(this,e));let r=QQ(e.text,n,i);return this.bidiCache.push(new Kv(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ke.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{s8(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return yg.of(new cd(typeof e=="number"?re.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return yg.of(new cd(re.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ei.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ei.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=vl.newName(),r=[_g.of(i),uh.of(q2(`.${i}`,e))];return n&&n.dark&&r.push(G2.of(!0)),r}static baseTheme(e){return hm.lowest(uh.of(q2("."+K2,e,Z8)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Ot.get(i)||Ot.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Re.styleModule=uh;Re.inputHandler=N8;Re.clipboardInputFilter=$C;Re.clipboardOutputFilter=FC;Re.scrollHandler=T8;Re.focusChangeEffect=P8;Re.perLineTextDirection=M8;Re.exceptionSink=A8;Re.updateListener=U2;Re.editable=zo;Re.mouseSelectionStyle=E8;Re.dragMovesSelection=C8;Re.clickAddsSelectionRange=_8;Re.decorations=Rp;Re.outerDecorations=j8;Re.atomicRanges=BC;Re.bidiIsolatedRanges=L8;Re.scrollMargins=D8;Re.darkTheme=G2;Re.cspNonce=Ce.define({combine:t=>t.length?t[0]:""});Re.contentAttributes=zC;Re.editorAttributes=I8;Re.lineWrapping=Re.contentAttributes.of({class:"cm-lineWrapping"});Re.announce=tt.define();const ste=4096,Q4={};class Kv{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Vt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new Kv(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function eM(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&L2(o,n)}return n}const ote=ke.mac?"mac":ke.windows?"win":ke.linux?"linux":"key";function ate(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Cg(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const lte=hm.default(Re.domEventHandlers({keydown(t,e){return t6(e6(e.state),t,e,"editor")}})),Q8=Ce.define({enables:lte}),tM=new WeakMap;function e6(t){let e=t.facet(Q8),n=tM.get(e);return n||tM.set(e,n=dte(e.reduce((i,r)=>i.concat(r),[]))),n}function cte(t,e,n){return t6(e6(t.state),e,t,n)}let Ma=null;const ute=4e3;function dte(t,e=ote){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,f;let p=n[o]||(n[o]=Object.create(null)),g=a.split(/ (?!$)/).map(y=>ate(y,e));for(let y=1;y<g.length;y++){let w=g.slice(0,y).join(" ");r(w,!0),p[w]||(p[w]={preventDefault:!0,stopPropagation:!1,run:[x=>{let S=Ma={view:x,prefix:w,scope:o};return setTimeout(()=>{Ma==S&&(Ma=null)},ute),!0}]})}let m=g.join(" ");r(m,!1);let v=p[m]||(p[m]={preventDefault:!1,stopPropagation:!1,run:((f=(d=p._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&v.run.push(l),c&&(v.preventDefault=!0),u&&(v.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let f in u)u[f].run.push(p=>d(p,Y2))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let Y2=null;function t6(t,e,n,i){Y2=e;let r=OQ(e),s=Or(r,0),o=Fo(s)==r.length&&r!=" ",a="",l=!1,c=!1,u=!1;Ma&&Ma.view==n&&Ma.scope==i&&(a=Ma.prefix+" ",U8.indexOf(e.keyCode)<0&&(c=!0,Ma=null));let d=new Set,f=v=>{if(v){for(let y of v.run)if(!d.has(y)&&(d.add(y),y(n)))return v.stopPropagation&&(u=!0),!0;v.preventDefault&&(v.stopPropagation&&(u=!0),c=!0)}return!1},p=t[i],g,m;return p&&(f(p[a+Cg(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ke.windows&&e.ctrlKey&&e.altKey)&&(g=yl[e.keyCode])&&g!=r?(f(p[a+Cg(g,e,!0)])||e.shiftKey&&(m=Np[e.keyCode])!=r&&m!=g&&f(p[a+Cg(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(p[a+Cg(r,e,!0)])&&(l=!0),!l&&f(p._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),Y2=null,l}class ym{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=n6(e);return[new ym(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return fte(e,n,i)}}function n6(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Vt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function nM(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function fte(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==Vt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=n6(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),p=H2(t,i,1),g=H2(t,r,-1),m=p.type==wi.Text?p:null,v=g.type==wi.Text?g:null;if(m&&(t.lineWrapping||p.widgetLineBreaks)&&(m=nM(t,i,1,m)),v&&(t.lineWrapping||g.widgetLineBreaks)&&(v=nM(t,r,-1,v)),m&&v&&m.from==v.from&&m.to==v.to)return w(x(n.from,n.to,m));{let _=m?x(n.from,null,m):S(p,!1),E=v?x(null,n.to,v):S(g,!0),C=[];return(m||p).to<(v||g).from-(m&&v?1:0)||p.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<E.top?C.push(y(d,_.bottom,f,E.top)):_.bottom<E.top&&t.elementAtHeight((_.bottom+E.top)/2).type==wi.Text&&(_.bottom=E.top=(_.bottom+E.top)/2),w(_).concat(C).concat(w(E))}function y(_,E,C,N){return new ym(e,_-l.left,E-l.top,C-_,N-E)}function w({top:_,bottom:E,horizontal:C}){let N=[];for(let M=0;M<C.length;M+=2)N.push(y(C[M],_,C[M+1],E));return N}function x(_,E,C){let N=1e9,M=-1e9,j=[];function I(D,K,X,te,U){let z=t.coordsAtPos(D,D==C.to?-2:2),ie=t.coordsAtPos(X,X==C.from?2:-2);!z||!ie||(N=Math.min(z.top,ie.top,N),M=Math.max(z.bottom,ie.bottom,M),U==Vt.LTR?j.push(s&&K?d:z.left,s&&te?f:ie.right):j.push(!s&&te?d:ie.left,!s&&K?f:z.right))}let O=_??C.from,H=E??C.to;for(let D of t.visibleRanges)if(D.to>O&&D.from<H)for(let K=Math.max(D.from,O),X=Math.min(D.to,H);;){let te=t.state.doc.lineAt(K);for(let U of t.bidiSpans(te)){let z=U.from+te.from,ie=U.to+te.from;if(z>=X)break;ie>K&&I(Math.max(z,K),_==null&&z<=O,Math.min(ie,X),E==null&&ie>=H,U.dir)}if(K=te.to+1,K>=X)break}return j.length==0&&I(O,_==null,H,E==null,t.textDirection),{top:N,bottom:M,horizontal:j}}function S(_,E){let C=a.top+(E?_.top:_.bottom);return{top:C,bottom:C,horizontal:[]}}}function hte(t,e){return t.constructor==e.constructor&&t.eq(e)}class pte{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(R0)!=e.state.facet(R0)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(R0);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!hte(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const R0=Ce.define();function i6(t){return[ei.define(e=>new pte(e,t)),R0.of(t)]}const Tp=Ce.define({combine(t){return Ml(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function mte(t={}){return[Tp.of(t),gte,vte,yte,R8.of(!0)]}function r6(t){return t.startState.facet(Tp)!=t.state.facet(Tp)}const gte=i6({above:!0,markers(t){let{state:e}=t,n=e.facet(Tp),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:re.cursor(r.head,r.head>r.anchor?-1:1);for(let l of ym.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=r6(t);return n&&iM(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){iM(e.state,t)},class:"cm-cursorLayer"});function iM(t,e){e.style.animationDuration=t.facet(Tp).cursorBlinkRate+"ms"}const vte=i6({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:ym.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||r6(t)},class:"cm-selectionLayer"}),yte=hm.highest(Re.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function rM(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function bte(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class wte{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,c,u)=>r(u,c,c+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,c,u)=>{let d=i(a,l,c);d&&u(c,c+a[0].length,d)};else if(i)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new gl,i=n.add.bind(n);for(let{from:r,to:s}of bte(e,this.maxLength))rM(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let f=[],p,g=(m,v,y)=>f.push(y.range(m,v));if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<d-l.from;)this.addMatch(p,e,p.index+l.from,g);else rM(e.state.doc,this.regexp,u,d,(m,v)=>this.addMatch(v,e,m,g));n=n.update({filterFrom:u,filterTo:d,filter:(m,v)=>m<u||v>d,add:f})}}return n}}const X2=/x/.unicode!=null?"gu":"g",xte=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,X2),Ste={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _x=null;function kte(){var t;if(_x==null&&typeof document<"u"&&document.body){let e=document.body.style;_x=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return _x||!1}const T0=Ce.define({combine(t){let e=Ml(t,{render:null,specialChars:xte,addSpecialChars:null});return(e.replaceTabs=!kte())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,X2)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,X2)),e}});function _te(t={}){return[T0.of(t),Cte()]}let sM=null;function Cte(){return sM||(sM=ei.fromClass(class{constructor(t){this.view=t,this.decorations=nt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(T0)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new wte({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=Or(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=mm(o.text,a,i-o.from);return nt.replace({widget:new Pte((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=nt.replace({widget:new Nte(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(T0);t.startState.facet(T0)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Ete="•";function Ate(t){return t>=32?Ete:t==10?"␤":String.fromCharCode(9216+t)}class Nte extends Rl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=Ate(this.code),i=e.state.phrase("Control character")+" "+(Ste[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Pte extends Rl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Mte(){return Tte}const Rte=nt.line({class:"cm-activeLine"}),Tte=ei.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(Rte.range(r.from)),e=r.from)}return nt.set(n)}},{decorations:t=>t.decorations}),Of="-10000px";class s6{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function Ote(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Cx=Ce.define({combine:t=>{var e,n,i;return{position:ke.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Ote}}}),oM=new WeakMap,GC=ei.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Cx);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new s6(t,KC,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(Cx);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=Of,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(ke.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Of&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=UC(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Cx).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],f=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){u.style.top=Of;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,m=f.right-f.left,v=(e=oM.get(c))!==null&&e!==void 0?e:f.bottom-f.top,y=c.offset||jte,w=this.view.textDirection==Vt.LTR,x=f.width>i.right-i.left?w?i.left:i.right-f.width:w?Math.max(i.left,Math.min(d.left-(p?14:0)+y.x,i.right-m)):Math.min(Math.max(i.left,d.left-m+(p?14:0)-y.x),i.right-m),S=this.above[a];!l.strictSide&&(S?d.top-v-g-y.y<i.top:d.bottom+v+g+y.y>i.bottom)&&S==i.bottom-d.bottom>d.top-i.top&&(S=this.above[a]=!S);let _=(S?d.top-i.top:i.bottom-d.bottom)-g;if(_<v&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=Of;continue}oM.set(c,v),u.style.height=(v=_)/s+"px"}else u.style.height&&(u.style.height="");let E=S?d.top-v-g-y.y:d.bottom+g+y.y,C=x+m;if(c.overlap!==!0)for(let N of o)N.left<C&&N.right>x&&N.top<E+v&&N.bottom>E&&(E=S?N.top-v-2-g:N.bottom+g+2);if(this.position=="absolute"?(u.style.top=(E-t.parent.top)/s+"px",aM(u,(x-t.parent.left)/r)):(u.style.top=E/s+"px",aM(u,x/r)),p){let N=d.left+(w?y.x:-y.x)-(x+14-7);p.style.left=N/r+"px"}c.overlap!==!0&&o.push({left:x,top:E,right:C,bottom:E+v}),u.classList.toggle("cm-tooltip-above",S),u.classList.toggle("cm-tooltip-below",!S),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Of}},{eventObservers:{scroll(){this.maybeMeasure()}}});function aM(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const Ite=Re.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),jte={x:0,y:0},KC=Ce.define({enables:[GC,Ite]}),qv=Ce.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class gb{static create(e){return new gb(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new s6(e,qv,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Lte=KC.compute([qv],t=>{let e=t.facet(qv);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:gb.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class Dte{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof Fa)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),c=l&&l.dir==Vt.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>dr(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(GC),n=e?e.manager.tooltips.findIndex(i=>i.create==gb.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!$te(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!Fte(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Eg=4;function $te(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=n-Eg&&e.clientX<=i+Eg&&e.clientY>=r-Eg&&e.clientY<=s+Eg}function Fte(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function zte(t,e={}){let n=tt.define(),i=Ci.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,Ui.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(Ute)&&(r=[]);return r},provide:r=>qv.from(r)});return{active:i,extension:[i,ei.define(r=>new Dte(r,t,i,n,e.hoverTime||300)),Lte]}}function Bte(t,e){let n=t.plugin(GC);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const Ute=tt.define(),lM=Ce.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Op(t,e){let n=t.plugin(o6),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const o6=ei.fromClass(class{constructor(t){this.input=t.state.facet(Ip),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(lM);this.top=new Ag(t,!0,e.topContainer),this.bottom=new Ag(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(lM);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ag(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ag(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Ip);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),r.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Ag{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=cM(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=cM(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function cM(t){let e=t.nextSibling;return t.remove(),e}const Ip=Ce.define({enables:o6});class wl extends $c{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}wl.prototype.elementClass="";wl.prototype.toDOM=void 0;wl.prototype.mapMode=Ui.TrackBefore;wl.prototype.startSide=wl.prototype.endSide=-1;wl.prototype.point=!0;const O0=Ce.define(),Vte=Ce.define(),I0=Ce.define(),uM=Ce.define({combine:t=>t.some(e=>e)});function Hte(t){return[Wte]}const Wte=ei.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(I0).map(e=>new fM(t,e)),this.fixed=!t.state.facet(uM);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(uM)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=xt.iter(this.view.state.facet(O0),this.view.viewport.from),i=[],r=this.gutters.map(s=>new Gte(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==wi.Text&&o){J2(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==wi.Text){J2(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(I0),n=t.state.facet(I0),i=t.docChanged||t.heightChanged||t.viewportChanged||!xt.eq(t.startState.facet(O0),t.state.facet(O0),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new fM(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Re.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,r=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Vt.LTR?{left:i,right:r}:{right:i,left:r}})});function dM(t){return Array.isArray(t)?t:[t]}function J2(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Gte{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=xt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new a6(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];J2(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(Vte)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class fM{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=dM(n.markers(e)),n.initialSpacer&&(this.spacer=new a6(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=dM(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!xt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class a6{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Kte(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(i+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function Kte(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const qte=Ce.define(),Yte=Ce.define(),qu=Ce.define({combine(t){return Ml(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return i}})}});class Ex extends wl{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ax(t,e){return t.state.facet(qu).formatNumber(e,t.state)}const Xte=I0.compute([qu],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(qte)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new Ex(Ax(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(Yte)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(qu)!=e.state.facet(qu),initialSpacer(e){return new Ex(Ax(e,hM(e.state.doc.lines)))},updateSpacer(e,n){let i=Ax(n.view,hM(n.view.state.doc.lines));return i==e.number?e:new Ex(i)},domEventHandlers:t.facet(qu).domEventHandlers,side:"before"}));function Jte(t={}){return[qu.of(t),Hte(),Xte]}function hM(t){let e=9;for(;e<t;)e=e*10+9;return e}const Zte=new class extends wl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Qte=O0.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(Zte.range(r)))}return xt.of(e)});function ene(){return Qte}const l6=new pm;function tne(t){window.codemirror&&window.codemirror.dispatch({effects:l6.reconfigure(ct.readOnly.of(t))})}const c6=tt.define(),Z2=tt.define(),nne=Ci.define({create(){return nt.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(c6)&&(n=nt.none,i.value!==null&&(n=n.update({add:[ine.range(i.value)]}))),i.is(Z2)&&(n=nt.none,i.value!==null&&(n=n.update({add:[rne.range(i.value)]})));return n},provide:t=>Re.decorations.from(t)}),ine=nt.line({class:"!bg-gradient-to-r !from-mantis-500/8 !via-mantis-500/5 !to-transparent !border-l-2 !border-mantis-400/40 !shadow-sm"}),rne=nt.line({class:"cm-current-instruction"});function sne(t){window.codemirror&&window.codemirror.dispatch({effects:c6.of(null)})}function u6(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:Z2.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:Z2.of(e)})}}const Yv=ue(!1),d6=Aa.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||Aa,one=1,pM=5e3,Ls=new Map,Dh=[];function ane(){let t=0;for(const e of Ls.keys())e>t&&(t=e);return t+1}function lne(){let t=1/0;for(const e of Ls.keys())e<t&&(t=e);return t}function Ba(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??pM,s=Number.isFinite(r)?setTimeout(()=>Ba({type:"DISMISS_TOAST",toastId:n}),r):null;Ls.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Ba({type:"DISMISS_TOAST",toastId:n})}}}),Ls.size>one&&Ba({type:"DISMISS_TOAST",toastId:lne()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=Ls.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??pM,o=Number.isFinite(s)?setTimeout(()=>Ba({type:"DISMISS_TOAST",toastId:n}),s):null;Ls.set(n,{...r,...i,timeout:o})}else Ls.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=Ls.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),Ls.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&Dh.length>0){const n=Array.from(Ls.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of Dh)i(n)}}function Di(t){const e=ane(),n=r=>Ba({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>Ba({type:"DISMISS_TOAST",toastId:e});return Ba({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function cne(){const[t,e]=b.useState([]);return b.useEffect(()=>(Dh.push(e),()=>{const n=Dh.indexOf(e);n>-1&&Dh.splice(n,1)}),[]),{toastList:t,toast:Di,dismiss:n=>Ba({type:"DISMISS_TOAST",toastId:n})}}var qC=wm(),Ze=t=>bm(t,qC),YC=wm();Ze.write=t=>bm(t,YC);var vb=wm();Ze.onStart=t=>bm(t,vb);var XC=wm();Ze.onFrame=t=>bm(t,XC);var JC=wm();Ze.onFinish=t=>bm(t,JC);var ud=[];Ze.setTimeout=(t,e)=>{const n=Ze.now()+e,i=()=>{const s=ud.findIndex(o=>o.cancel==i);~s&&ud.splice(s,1),Va-=~s?1:0},r={time:n,handler:t,cancel:i};return ud.splice(f6(n),0,r),Va+=1,h6(),r};var f6=t=>~(~ud.findIndex(e=>e.time>t)||~ud.length);Ze.cancel=t=>{vb.delete(t),XC.delete(t),JC.delete(t),qC.delete(t),YC.delete(t)};Ze.sync=t=>{Q2=!0,Ze.batchedUpdates(t),Q2=!1};Ze.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Ze.onStart(n)}return i.handler=t,i.cancel=()=>{vb.delete(n),e=null},i};var ZC=typeof window<"u"?window.requestAnimationFrame:()=>{};Ze.use=t=>ZC=t;Ze.now=typeof performance<"u"?()=>performance.now():Date.now;Ze.batchedUpdates=t=>t();Ze.catch=console.error;Ze.frameLoop="always";Ze.advance=()=>{Ze.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):m6()};var Ua=-1,Va=0,Q2=!1;function bm(t,e){Q2?(e.delete(t),t(0)):(e.add(t),h6())}function h6(){Ua<0&&(Ua=0,Ze.frameLoop!=="demand"&&ZC(p6))}function une(){Ua=-1}function p6(){~Ua&&(ZC(p6),Ze.batchedUpdates(m6))}function m6(){const t=Ua;Ua=Ze.now();const e=f6(Ua);if(e&&(g6(ud.splice(0,e),n=>n.handler()),Va-=e),!Va){une();return}vb.flush(),qC.flush(t?Math.min(64,Ua-t):16.667),XC.flush(),YC.flush(),JC.flush()}function wm(){let t=new Set,e=t;return{add(n){Va+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Va-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Va-=e.size,g6(e,i=>i(n)&&t.add(i)),Va+=t.size,e=t)}}}function g6(t,e){t.forEach(n=>{try{e(n)}catch(i){Ze.catch(i)}})}var dne=Object.defineProperty,fne=(t,e)=>{for(var n in e)dne(t,n,{get:e[n],enumerable:!0})},xs={};fne(xs,{assign:()=>pne,colors:()=>rl,createStringInterpolator:()=>eE,skipAnimation:()=>y6,to:()=>v6,willAdvance:()=>tE});function ek(){}var hne=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),de={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function ko(t,e){if(de.arr(t)){if(!de.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var ut=(t,e)=>t.forEach(e);function ho(t,e,n){if(de.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var fr=t=>de.und(t)?[]:de.arr(t)?t:[t];function $h(t,e){if(t.size){const n=Array.from(t);t.clear(),ut(n,e)}}var hh=(t,...e)=>$h(t,n=>n(...e)),QC=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),eE,v6,rl=null,y6=!1,tE=ek,pne=t=>{t.to&&(v6=t.to),t.now&&(Ze.now=t.now),t.colors!==void 0&&(rl=t.colors),t.skipAnimation!=null&&(y6=t.skipAnimation),t.createStringInterpolator&&(eE=t.createStringInterpolator),t.requestAnimationFrame&&Ze.use(t.requestAnimationFrame),t.batchedUpdates&&(Ze.batchedUpdates=t.batchedUpdates),t.willAdvance&&(tE=t.willAdvance),t.frameLoop&&(Ze.frameLoop=t.frameLoop)},Fh=new Set,jr=[],Nx=[],Xv=0,yb={get idle(){return!Fh.size&&!jr.length},start(t){Xv>t.priority?(Fh.add(t),Ze.onStart(mne)):(b6(t),Ze(tk))},advance:tk,sort(t){if(Xv)Ze.onFrame(()=>yb.sort(t));else{const e=jr.indexOf(t);~e&&(jr.splice(e,1),w6(t))}},clear(){jr=[],Fh.clear()}};function mne(){Fh.forEach(b6),Fh.clear(),Ze(tk)}function b6(t){jr.includes(t)||w6(t)}function w6(t){jr.splice(gne(jr,e=>e.priority>t.priority),0,t)}function tk(t){const e=Nx;for(let n=0;n<jr.length;n++){const i=jr[n];Xv=i.priority,i.idle||(tE(i),i.advance(t),i.idle||e.push(i))}return Xv=0,Nx=jr,Nx.length=0,jr=e,jr.length>0}function gne(t,e){const n=t.findIndex(e);return n<0?t.length:n}var vne=(t,e,n)=>Math.min(Math.max(n,t),e),yne={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},hs="[-+]?\\d*\\.?\\d+",Jv=hs+"%";function bb(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var bne=new RegExp("rgb"+bb(hs,hs,hs)),wne=new RegExp("rgba"+bb(hs,hs,hs,hs)),xne=new RegExp("hsl"+bb(hs,Jv,Jv)),Sne=new RegExp("hsla"+bb(hs,Jv,Jv,hs)),kne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,_ne=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Cne=/^#([0-9a-fA-F]{6})$/,Ene=/^#([0-9a-fA-F]{8})$/;function Ane(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Cne.exec(t))?parseInt(e[1]+"ff",16)>>>0:rl&&rl[t]!==void 0?rl[t]:(e=bne.exec(t))?(cu(e[1])<<24|cu(e[2])<<16|cu(e[3])<<8|255)>>>0:(e=wne.exec(t))?(cu(e[1])<<24|cu(e[2])<<16|cu(e[3])<<8|vM(e[4]))>>>0:(e=kne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Ene.exec(t))?parseInt(e[1],16)>>>0:(e=_ne.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=xne.exec(t))?(mM(gM(e[1]),Ng(e[2]),Ng(e[3]))|255)>>>0:(e=Sne.exec(t))?(mM(gM(e[1]),Ng(e[2]),Ng(e[3]))|vM(e[4]))>>>0:null}function Px(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function mM(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Px(r,i,t+1/3),o=Px(r,i,t),a=Px(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function cu(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function gM(t){return(parseFloat(t)%360+360)%360/360}function vM(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Ng(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function yM(t){let e=Ane(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var jp=(t,e,n)=>{if(de.fun(t))return t;if(de.arr(t))return jp({range:t,output:e,extrapolate:n});if(de.str(t.output[0]))return eE(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=Pne(c,s);return Nne(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function Nne(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function Pne(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Mne=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return vne(0,1,r/t)},Zv=1.70158,Pg=Zv*1.525,bM=Zv+1,wM=2*Math.PI/3,xM=2*Math.PI/4.5,Mg=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,x6={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>bM*t*t*t-Zv*t*t,easeOutBack:t=>1+bM*Math.pow(t-1,3)+Zv*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Pg+1)*2*t-Pg)/2:(Math.pow(2*t-2,2)*((Pg+1)*(t*2-2)+Pg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*wM),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*wM)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*xM))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*xM)/2+1,easeInBounce:t=>1-Mg(1-t),easeOutBounce:Mg,easeInOutBounce:t=>t<.5?(1-Mg(1-2*t))/2:(1+Mg(2*t-1))/2,steps:Mne},Lp=Symbol.for("FluidValue.get"),Kd=Symbol.for("FluidValue.observers"),Ir=t=>!!(t&&t[Lp]),$i=t=>t&&t[Lp]?t[Lp]():t,SM=t=>t[Kd]||null;function Rne(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Dp(t,e){const n=t[Kd];n&&n.forEach(i=>{Rne(i,e)})}var S6=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Tne(this,t)}},Tne=(t,e)=>k6(t,Lp,e);function lf(t,e){if(t[Lp]){let n=t[Kd];n||k6(t,Kd,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function $p(t,e){const n=t[Kd];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Kd]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var k6=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),j0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,One=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,kM=new RegExp(`(${j0.source})(%|[a-z]+)`,"i"),Ine=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,wb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,_6=t=>{const[e,n]=jne(t);if(!e||QC())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&wb.test(n))return _6(n);if(n)return n}return t},jne=t=>{const e=wb.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},Mx,Lne=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,C6=t=>{Mx||(Mx=rl?new RegExp(`(${Object.keys(rl).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>$i(s).replace(wb,_6).replace(One,yM).replace(Mx,yM)),n=e.map(s=>s.match(j0).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>jp({...t,output:s}));return s=>{var l;const o=!kM.test(e[0])&&((l=e.find(c=>kM.test(c)))==null?void 0:l.replace(j0,""));let a=0;return e[0].replace(j0,()=>`${r[a++](s)}${o||""}`).replace(Ine,Lne)}},nE="react-spring: ",E6=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${nE}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},Dne=E6(console.warn);function $ne(){Dne(`${nE}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Fne=E6(console.warn);function zne(){Fne(`${nE}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function xb(t){return de.str(t)&&(t[0]=="#"||/\d/.test(t)||!QC()&&wb.test(t)||t in(rl||{}))}var iE=QC()?b.useEffect:b.useLayoutEffect,Bne=()=>{const t=b.useRef(!1);return iE(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function A6(){const t=b.useState()[1],e=Bne();return()=>{e.current&&t(Math.random())}}function Une(t,e){const[n]=b.useState(()=>({inputs:e,result:t()})),i=b.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&Vne(e,s.inputs)||(s={inputs:e,result:t()}):s=n,b.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Vne(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var N6=t=>b.useEffect(t,Hne),Hne=[];function _M(t){const e=b.useRef();return b.useEffect(()=>{e.current=t}),e.current}var Fp=Symbol.for("Animated:node"),Wne=t=>!!t&&t[Fp]===t,Ds=t=>t&&t[Fp],rE=(t,e)=>hne(t,Fp,e),Sb=t=>t&&t[Fp]&&t[Fp].getPayload(),P6=class{constructor(){rE(this,this)}getPayload(){return this.payload||[]}},xm=class extends P6{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,de.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new xm(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return de.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,de.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},zp=class extends xm{constructor(t){super(0),this._string=null,this._toString=jp({output:[t,t]})}static create(t){return new zp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(de.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=jp({output:[this.getValue(),t]})),this._value=0,super.reset()}},Qv={dependencies:null},kb=class extends P6{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return ho(this.source,(n,i)=>{Wne(n)?e[i]=n.getValue(t):Ir(n)?e[i]=$i(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&ut(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return ho(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Qv.dependencies&&Ir(t)&&Qv.dependencies.add(t);const e=Sb(t);e&&ut(e,n=>this.add(n))}},M6=class extends kb{constructor(t){super(t)}static create(t){return new M6(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(Gne)),!0)}};function Gne(t){return(xb(t)?zp:xm).create(t)}function nk(t){const e=Ds(t);return e?e.constructor:de.arr(t)?M6:xb(t)?zp:xm}var CM=(t,e)=>{const n=!de.fun(t)||t.prototype&&t.prototype.isReactComponent;return b.forwardRef((i,r)=>{const s=b.useRef(null),o=n&&b.useCallback(g=>{s.current=Yne(r,g)},[r]),[a,l]=qne(i,e),c=A6(),u=()=>{const g=s.current;if(n&&!g)return;(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&c()},d=new Kne(u,l),f=b.useRef();iE(()=>(f.current=d,ut(l,g=>lf(g,d)),()=>{f.current&&(ut(f.current.deps,g=>$p(g,f.current)),Ze.cancel(f.current.update))})),b.useEffect(u,[]),N6(()=>()=>{const g=f.current;ut(g.deps,m=>$p(m,g))});const p=e.getComponentProps(a.getValue());return b.createElement(t,{...p,ref:o})})},Kne=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Ze.write(this.update)}};function qne(t,e){const n=new Set;return Qv.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new kb(t),Qv.dependencies=null,[t,n]}function Yne(t,e){return t&&(de.fun(t)?t(e):t.current=e),e}var EM=Symbol.for("AnimatedComponent"),Xne=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new kb(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=AM(o)||"Anonymous";return de.str(o)?o=s[o]||(s[o]=CM(o,r)):o=o[EM]||(o[EM]=CM(o,r)),o.displayName=`Animated(${a})`,o};return ho(t,(o,a)=>{de.arr(t)&&(a=AM(o)),s[a]=s(o)}),{animated:s}},AM=t=>de.str(t)?t:t&&de.str(t.displayName)?t.displayName:de.fun(t)&&t.name||null;function oc(t,...e){return de.fun(t)?t(...e):t}var zh=(t,e)=>t===!0||!!(e&&t&&(de.fun(t)?t(e):fr(t).includes(e))),R6=(t,e)=>de.obj(t)?e&&t[e]:t,T6=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Jne=t=>t,sE=(t,e=Jne)=>{let n=Zne;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);de.und(s)||(i[r]=s)}return i},Zne=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Qne={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function eie(t){const e={};let n=0;if(ho(t,(i,r)=>{Qne[r]||(e[r]=i,n++)}),n)return e}function O6(t){const e=eie(t);if(e){const n={to:e};return ho(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Bp(t){return t=$i(t),de.arr(t)?t.map(Bp):xb(t)?xs.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function tie(t){for(const e in t)return!0;return!1}function ik(t){return de.fun(t)||de.arr(t)&&de.obj(t[0])}function nie(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function iie(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var rie={default:{tension:170,friction:26}},rk={...rie.default,mass:1,damping:1,easing:x6.linear,clamp:!1},sie=class{constructor(){this.velocity=0,Object.assign(this,rk)}};function oie(t,e,n){n&&(n={...n},NM(n,e),e={...n,...e}),NM(t,e),Object.assign(t,e);for(const o in rk)t[o]==null&&(t[o]=rk[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return de.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function NM(t,e){if(!de.und(e.decay))t.duration=void 0;else{const n=!de.und(e.tension)||!de.und(e.friction);(n||!de.und(e.frequency)||!de.und(e.damping)||!de.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var PM=[],aie=class{constructor(){this.changed=!1,this.values=PM,this.toValues=null,this.fromValues=PM,this.config=new sie,this.immediate=!1}};function I6(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,u=zh(n.cancel??(i==null?void 0:i.cancel),e);if(u)p();else{de.und(n.pause)||(r.paused=zh(n.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||zh(g,e)),l=oc(n.delay||0,e),g?(r.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){r.resumeQueue.add(f),r.timeouts.delete(c),c.cancel(),l=c.time-Ze.now()}function f(){l>0&&!xs.skipAnimation?(r.delayed=!0,c=Ze.setTimeout(p,l),r.pauseQueue.add(d),r.timeouts.add(c)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(c),t<=(r.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(g){a(g)}}})}var oE=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?dd(t.get()):e.every(n=>n.noop)?j6(t.get()):cs(t.get(),e.every(n=>n.finished)),j6=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),cs=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),dd=t=>({value:t,cancelled:!0,finished:!1});function L6(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=sE(e,(v,y)=>y==="onRest"?void 0:v);let u,d;const f=new Promise((v,y)=>(u=v,d=y)),p=v=>{const y=r<=(n.cancelId||0)&&dd(i)||r!==n.asyncId&&cs(i,!1);if(y)throw v.result=y,d(v),v},g=(v,y)=>{const w=new MM,x=new RM;return(async()=>{if(xs.skipAnimation)throw Up(n),x.result=cs(i,!1),d(x),x;p(w);const S=de.obj(v)?{...v}:{...y,to:v};S.parentId=r,ho(c,(E,C)=>{de.und(S[C])&&(S[C]=E)});const _=await i.start(S);return p(w),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),_})()};let m;if(xs.skipAnimation)return Up(n),cs(i,!1);try{let v;de.arr(t)?v=(async y=>{for(const w of y)await g(w)})(t):v=Promise.resolve(t(g,i.stop.bind(i))),await Promise.all([v.then(u),f]),m=cs(i.get(),!0,!1)}catch(v){if(v instanceof MM)m=v.result;else if(v instanceof RM)m=v.result;else throw v}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return de.fun(o)&&Ze.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function Up(t,e){$h(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var MM=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},RM=class extends Error{constructor(){super("SkipAnimationSignal")}},sk=t=>t instanceof aE,lie=1,aE=class extends S6{constructor(){super(...arguments),this.id=lie++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Ds(this);return t&&t.getValue()}to(...t){return xs.to(this,t)}interpolate(...t){return $ne(),xs.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Dp(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||yb.sort(this),Dp(this,{type:"priority",parent:this,priority:t})}},Uc=Symbol.for("SpringPhase"),D6=1,ok=2,ak=4,Rx=t=>(t[Uc]&D6)>0,ga=t=>(t[Uc]&ok)>0,If=t=>(t[Uc]&ak)>0,TM=(t,e)=>e?t[Uc]|=ok|D6:t[Uc]&=~ok,OM=(t,e)=>e?t[Uc]|=ak:t[Uc]&=~ak,Ke=class extends aE{constructor(t,e){if(super(),this.animation=new aie,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!de.und(t)||!de.und(e)){const n=de.obj(t)?{...t}:{...e,from:t};de.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(ga(this)||this._state.asyncTo)||If(this)}get goal(){return $i(this.animation.to)}get velocity(){const t=Ds(this);return t instanceof xm?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Rx(this)}get isAnimating(){return ga(this)}get isPaused(){return If(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=Sb(i.to);!o&&Ir(i.to)&&(r=fr($i(i.to))),i.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==zp?1:o?o[u].lastPosition:r[u];let f=i.immediate,p=d;if(!f){if(p=c.lastPosition,s.tension<=0){c.done=!0;return}let g=c.elapsedTime+=t;const m=i.fromValues[u],v=c.v0!=null?c.v0:c.v0=de.arr(s.velocity)?s.velocity[u]:s.velocity;let y;const w=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(de.und(s.duration))if(s.decay){const x=s.decay===!0?.998:s.decay,S=Math.exp(-(1-x)*g);p=m+v/(1-x)*(1-S),f=Math.abs(c.lastPosition-p)<=w,y=v*S}else{y=c.lastVelocity==null?v:c.lastVelocity;const x=s.restVelocity||w/10,S=s.clamp?0:s.bounce,_=!de.und(S),E=m==d?c.v0>0:m<d;let C,N=!1;const M=1,j=Math.ceil(t/M);for(let I=0;I<j&&(C=Math.abs(y)>x,!(!C&&(f=Math.abs(d-p)<=w,f)));++I){_&&(N=p==d||p>d==E,N&&(y=-y*S,p=d));const O=-s.tension*1e-6*(p-d),H=-s.friction*.001*y,D=(O+H)/s.mass;y=y+D*M,p=p+y*M}}else{let x=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,g=c.elapsedTime+=t)),x=(s.progress||0)+g/this._memoizedDuration,x=x>1?1:x<0?0:x,c.durationProgress=x),p=m+s.easing(x)*(d-m),y=(p-c.lastPosition)/t,f=x==1}c.lastVelocity=y,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(p,s.round)&&(n=!0)});const a=Ds(this),l=a.getValue();if(e){const c=$i(i.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Ze.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ga(this)){const{to:t,config:e}=this.animation;Ze.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return de.und(t)?(n=this.queue||[],this.queue=[]):n=[de.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>oE(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Up(this._state,t&&this._lastCallId),Ze.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=de.obj(n)?n[e]:n,(n==null||ik(n))&&(n=void 0),i=de.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return Rx(this)||(t.reverse&&([n,i]=[i,n]),i=$i(i),de.und(i)?Ds(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,sE(t,(o,a)=>/^on/.test(a)?R6(o,n):o)),jM(this,t,"onProps"),Lf(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return I6(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{If(this)||(OM(this,!0),hh(s.pauseQueue),Lf(this,"onPause",cs(this,jf(this,this.animation.to)),this))},resume:()=>{If(this)&&(OM(this,!1),ga(this)&&this._resume(),hh(s.resumeQueue),Lf(this,"onResume",cs(this,jf(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=$6(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(dd(this));const i=!de.und(t.to),r=!de.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(dd(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;r&&!i&&(!e.default||de.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!ko(d,c);f&&(a.from=d),d=$i(d);const p=!ko(u,l);p&&this._focus(u);const g=ik(e.to),{config:m}=a,{decay:v,velocity:y}=m;(i||r)&&(m.velocity=0),e.config&&!g&&oie(m,oc(e.config,s),e.config!==o.config?oc(o.config,s):void 0);let w=Ds(this);if(!w||de.und(u))return n(cs(this,!0));const x=de.und(e.reset)?r&&!e.default:!de.und(d)&&zh(e.reset,s),S=x?d:this.get(),_=Bp(u),E=de.num(_)||de.arr(_)||xb(_),C=!g&&(!E||zh(o.immediate||e.immediate,s));if(p){const I=nk(u);if(I!==w.constructor)if(C)w=this._set(_);else throw Error(`Cannot animate between ${w.constructor.name} and ${I.name}, as the "to" prop suggests`)}const N=w.constructor;let M=Ir(u),j=!1;if(!M){const I=x||!Rx(this)&&f;(p||I)&&(j=ko(Bp(S),_),M=!j),(!ko(a.immediate,C)&&!C||!ko(m.decay,v)||!ko(m.velocity,y))&&(M=!0)}if(j&&ga(this)&&(a.changed&&!x?M=!0:M||this._stop(l)),!g&&((M||Ir(l))&&(a.values=w.getPayload(),a.toValues=Ir(u)?null:N==zp?[1]:fr(_)),a.immediate!=C&&(a.immediate=C,!C&&!x&&this._set(l)),M)){const{onRest:I}=a;ut(uie,H=>jM(this,e,H));const O=cs(this,jf(this,l));hh(this._pendingCalls,O),this._pendingCalls.add(n),a.changed&&Ze.batchedUpdates(()=>{var H;a.changed=!x,I==null||I(O,this),x?oc(o.onRest,O):(H=a.onStart)==null||H.call(a,O,this)})}x&&this._set(S),g?n(L6(e.to,e,this._state,this)):M?this._start():ga(this)&&!p?this._pendingCalls.add(n):n(j6(S))}_focus(t){const e=this.animation;t!==e.to&&(SM(this)&&this._detach(),e.to=t,SM(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Ir(e)&&(lf(e,this),sk(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Ir(t)&&$p(t,this)}_set(t,e=!0){const n=$i(t);if(!de.und(n)){const i=Ds(this);if(!i||!ko(n,i.getValue())){const r=nk(n);!i||i.constructor!=r?rE(this,r.create(n)):i.setValue(n),i&&Ze.batchedUpdates(()=>{this._onChange(n,e)})}}return Ds(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Lf(this,"onStart",cs(this,jf(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),oc(this.animation.onChange,t,this)),oc(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Ds(this).reset($i(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),ga(this)||(TM(this,!0),If(this)||this._resume())}_resume(){xs.skipAnimation?this.finish():yb.start(this)}_stop(t,e){if(ga(this)){TM(this,!1);const n=this.animation;ut(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Dp(this,{type:"idle",parent:this});const i=e?dd(this.get()):cs(this.get(),jf(this,t??n.to));hh(this._pendingCalls,i),n.changed&&(n.changed=!1,Lf(this,"onRest",i,this))}}};function jf(t,e){const n=Bp(e),i=Bp(t.get());return ko(i,n)}function $6(t,e=t.loop,n=t.to){const i=oc(e);if(i){const r=i!==!0&&O6(i),s=(r||t).reverse,o=!r||r.reset;return Vp({...t,loop:e,default:!1,pause:void 0,to:!s||ik(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function Vp(t){const{to:e,from:n}=t=O6(t),i=new Set;return de.obj(e)&&IM(e,i),de.obj(n)&&IM(n,i),t.keys=i.size?Array.from(i):null,t}function cie(t){const e=Vp(t);return de.und(e.default)&&(e.default=sE(e)),e}function IM(t,e){ho(t,(n,i)=>n!=null&&e.add(i))}var uie=["onStart","onRest","onChange","onPause","onResume"];function jM(t,e,n){t.animation[n]=e[n]!==T6(e,n)?R6(e[n],t.key):void 0}function Lf(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var die=["onStart","onChange","onRest"],fie=1,hie=class{constructor(t,e){this.id=fie++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];de.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(Vp(t)),this}start(t){let{queue:e}=this;return t?e=fr(t).map(Vp):this.queue=[],this._flush?this._flush(this,e):(V6(this,e),lk(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;ut(fr(e),i=>n[i].stop(!!t))}else Up(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(de.und(t))this.start({pause:!0});else{const e=this.springs;ut(fr(t),n=>e[n].pause())}return this}resume(t){if(de.und(t))this.start({pause:!1});else{const e=this.springs;ut(fr(t),n=>e[n].resume())}return this}each(t){ho(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,$h(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!i&&this._started,o=r||s&&n.size?this.get():null;r&&e.size&&$h(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,$h(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Ze.onFrame(this._onFrame)}};function lk(t,e){return Promise.all(e.map(n=>F6(t,n))).then(n=>oE(t,n))}async function F6(t,e,n){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=de.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=de.arr(r)||de.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):ut(die,m=>{const v=e[m];if(de.fun(v)){const y=t._events[m];e[m]=({finished:w,cancelled:x})=>{const S=y.get(v);S?(w||(S.finished=!1),x&&(S.cancelled=!0)):y.set(v,{value:null,finished:w||!1,cancelled:x||!1})},c&&(c[m]=e[m])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,hh(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const f=(i||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),p=e.cancel===!0||T6(e,"cancel")===!0;(u||p&&d.asyncId)&&f.push(I6(++t._lastAsyncId,{props:e,state:d,actions:{pause:ek,resume:ek,start(m,v){p?(Up(d,t._lastAsyncId),v(dd(t))):(m.onRest=a,v(L6(u,m,d,t)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const g=oE(t,await Promise.all(f));if(o&&g.finished&&!(n&&g.noop)){const m=$6(e,o,r);if(m)return V6(t,[m]),F6(t,m,!0)}return l&&Ze.batchedUpdates(()=>l(g,t,t.item)),g}function LM(t,e){const n={...t.springs};return e&&ut(fr(e),i=>{de.und(i.keys)&&(i=Vp(i)),de.obj(i.to)||(i={...i,to:void 0}),U6(n,i,r=>B6(r))}),z6(t,n),n}function z6(t,e){ho(e,(n,i)=>{t.springs[i]||(t.springs[i]=n,lf(n,t))})}function B6(t,e){const n=new Ke;return n.key=t,e&&lf(n,e),n}function U6(t,e,n){e.keys&&ut(e.keys,i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)})}function V6(t,e){ut(e,n=>{U6(t.springs,n,i=>B6(i,t))})}var _b=({children:t,...e})=>{const n=b.useContext(ey),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=Une(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=ey;return b.createElement(s,{value:e},t)},ey=pie(_b,{});_b.Provider=ey.Provider;_b.Consumer=ey.Consumer;function pie(t,e){return Object.assign(t,b.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var mie=()=>{const t=[],e=function(i){zne();const r=[];return ut(t,(s,o)=>{if(de.und(i))r.push(s.start());else{const a=n(i,s,o);a&&r.push(s.start(a))}}),r};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const r=t.indexOf(i);~r&&t.splice(r,1)},e.pause=function(){return ut(t,i=>i.pause(...arguments)),this},e.resume=function(){return ut(t,i=>i.resume(...arguments)),this},e.set=function(i){ut(t,(r,s)=>{const o=de.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return ut(t,(s,o)=>{if(de.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return ut(t,i=>i.stop(...arguments)),this},e.update=function(i){return ut(t,(r,s)=>r.update(this._getProps(i,r,s))),this};const n=function(i,r,s){return de.fun(i)?i(s,r):i};return e._getProps=n,e};function gie(t,e,n){const i=de.fun(e)&&e;i&&!n&&(n=[]);const r=b.useMemo(()=>i||arguments.length==3?mie():void 0,[]),s=b.useRef(0),o=A6(),a=b.useMemo(()=>({ctrls:[],queue:[],flush(y,w){const x=LM(y,w);return s.current>0&&!a.queue.length&&!Object.keys(x).some(_=>!y.springs[_])?lk(y,w):new Promise(_=>{z6(y,x),a.queue.push(()=>{_(lk(y,w))}),o()})}}),[]),l=b.useRef([...a.ctrls]),c=[],u=_M(t)||0;b.useMemo(()=>{ut(l.current.slice(t,u),y=>{nie(y,r),y.stop(!0)}),l.current.length=t,d(u,t)},[t]),b.useMemo(()=>{d(0,Math.min(u,t))},n);function d(y,w){for(let x=y;x<w;x++){const S=l.current[x]||(l.current[x]=new hie(null,a.flush)),_=i?i(x,S):e[x];_&&(c[x]=cie(_))}}const f=l.current.map((y,w)=>LM(y,c[w])),p=b.useContext(_b),g=_M(p),m=p!==g&&tie(p);iE(()=>{s.current++,a.ctrls=l.current;const{queue:y}=a;y.length&&(a.queue=[],ut(y,w=>w())),ut(l.current,(w,x)=>{r==null||r.add(w),m&&w.start({default:p});const S=c[x];S&&(iie(w,S.ref),w.ref?w.queue.push(S):w.start(S))})}),N6(()=>()=>{ut(a.ctrls,y=>y.stop(!0))});const v=f.map(y=>({...y}));return r?[v,r]:v}function Cb(t,e){const n=de.fun(t),[[i],r]=gie(1,n?t:[t],n?[]:e);return n||arguments.length==2?[i,r]:i}var vie=class extends aE{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=jp(...e);const n=this._get(),i=nk(n);rE(this,i.create(n))}advance(t){const e=this._get(),n=this.get();ko(e,n)||(Ds(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&DM(this._active)&&Tx(this)}_get(){const t=de.arr(this.source)?this.source.map($i):fr($i(this.source));return this.calc(...t)}_start(){this.idle&&!DM(this._active)&&(this.idle=!1,ut(Sb(this),t=>{t.done=!1}),xs.skipAnimation?(Ze.batchedUpdates(()=>this.advance()),Tx(this)):yb.start(this))}_attach(){let t=1;ut(fr(this.source),e=>{Ir(e)&&lf(e,this),sk(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){ut(fr(this.source),t=>{Ir(t)&&$p(t,this)}),this._active.clear(),Tx(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=fr(this.source).reduce((e,n)=>Math.max(e,(sk(n)?n.priority:0)+1),0))}};function yie(t){return t.idle!==!1}function DM(t){return!t.size||Array.from(t).every(yie)}function Tx(t){t.idle||(t.idle=!0,ut(Sb(t),e=>{e.done=!0}),Dp(t,{type:"idle",parent:t}))}xs.assign({createStringInterpolator:C6,to:(t,e)=>new vie(t,e)});var H6=/^--/;function bie(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!H6.test(t)&&!(Bh.hasOwnProperty(t)&&Bh[t])?e+"px":(""+e).trim()}var $M={};function wie(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...c}=e,u=Object.values(c),d=Object.keys(c).map(f=>n||t.hasAttribute(f)?f:$M[f]||($M[f]=f.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));s!==void 0&&(t.textContent=s);for(const f in r)if(r.hasOwnProperty(f)){const p=bie(f,r[f]);H6.test(f)?t.style.setProperty(f,p):t.style[f]=p}d.forEach((f,p)=>{t.setAttribute(f,u[p])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var Bh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xie=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),Sie=["Webkit","Ms","Moz","O"];Bh=Object.keys(Bh).reduce((t,e)=>(Sie.forEach(n=>t[xie(n,e)]=t[e]),t),Bh);var kie=/^(matrix|translate|scale|rotate|skew)/,_ie=/^(translate)/,Cie=/^(rotate|skew)/,Ox=(t,e)=>de.num(t)&&t!==0?t+e:t,L0=(t,e)=>de.arr(t)?t.every(n=>L0(n,e)):de.num(t)?t===e:parseFloat(t)===e,Eie=class extends kb{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>Ox(a,"px")).join(",")})`,L0(o,0)])),ho(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(kie.test(a)){if(delete i[a],de.und(o))return;const l=_ie.test(a)?"px":Cie.test(a)?"deg":"";r.push(fr(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${Ox(f,l)})`,L0(f,0)]:c=>[`${a}(${c.map(u=>Ox(u,l)).join(",")})`,L0(c,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new Aie(r,s)),super(i)}},Aie=class extends S6{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return ut(this.inputs,(n,i)=>{const r=$i(n[0]),[s,o]=this.transforms[i](de.arr(r)?r:n.map($i));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&ut(this.inputs,e=>ut(e,n=>Ir(n)&&lf(n,this)))}observerRemoved(t){t==0&&ut(this.inputs,e=>ut(e,n=>Ir(n)&&$p(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Dp(this,t)}},Nie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];xs.assign({batchedUpdates:Pl.unstable_batchedUpdates,createStringInterpolator:C6,colors:yne});var Pie=Xne(Nie,{applyAnimatedValues:wie,createAnimatedStyle:t=>new Eie(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),He=Pie.animated;const Yt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},$e=(t=Yt.stone[800])=>({backgroundColor:new Ke(t),opacity:new Ke(1)}),Nn=()=>({strokeDashoffset:new Ke(1),opacity:new Ke(1)}),Rg=()=>({strokeDashoffset:new Ke(1),opacity:new Ke(1),path:new Ke("")}),ty={bus:{address:Rg(),data:Rg(),rd:Rg(),wr:Rg(),iom:Nn(),mem:{stroke:new Ke(Yt.red[500])},handshake:Nn(),pic:Nn(),pio:Nn(),timer:Nn(),intr:Nn(),inta:Nn(),int0:Nn(),int1:Nn(),int2:Nn(),"switches->pio":Nn(),"pio->leds":Nn(),printer:{data:Nn(),strobe:Nn(),busy:Nn()}},clock:{angle:new Ke(0)},controlMemory:{overlay:{opacity:new Ke(0)},container:{opacity:new Ke(0),scale:new Ke(.8)},currentInstruction:{glow:new Ke(0)},microop:{0:{opacity:new Ke(0),translateX:new Ke(-20)},1:{opacity:new Ke(0),translateX:new Ke(-20)},2:{opacity:new Ke(0),translateX:new Ke(-20)},3:{opacity:new Ke(0),translateX:new Ke(-20)},4:{opacity:new Ke(0),translateX:new Ke(-20)}}},sequencer:{overlay:{opacity:new Ke(0)},container:{opacity:new Ke(0),scale:new Ke(.8)}},cpu:{internalBus:{address:{strokeDashoffset:new Ke(1),opacity:new Ke(1),path:new Ke("")},data:{strokeDashoffset:new Ke(1),opacity:new Ke(1),path:new Ke("")}},alu:{operands:Nn(),results:Nn(),cog:{rot:new Ke(0)},operation:{backgroundColor:new Ke(Yt.stone[800])}},decoder:{path:Nn(),progress:{progress:new Ke(0),opacity:new Ke(1)}},AX:$e(),BX:$e(),CX:$e(),DX:$e(),AL:$e(),BL:$e(),CL:$e(),DL:$e(),SP:$e(),"SP.l":$e(),"SP.h":$e(),IP:$e(),"IP.l":$e(),"IP.h":$e(),IR:$e(),ri:{...$e(),opacity:new Ke(0)},"ri.l":$e(),"ri.h":$e(),id:{...$e(),opacity:new Ke(0)},"id.l":$e(),"id.h":$e(),left:$e(),"left.l":$e(),"left.h":$e(),right:$e(),"right.l":$e(),"right.h":$e(),result:$e(),"result.l":$e(),"result.h":$e(),FLAGS:$e(),"FLAGS.l":$e(),"FLAGS.h":$e(),MAR:$e(),MBR:$e()},handshake:{DATA:$e(),STATE:$e()},memory:{"operating-cell":{color:new Ke(Yt.white)}},pic:{IMR:$e(),IRR:$e(),ISR:$e(),INT0:$e(),INT1:$e(),INT2:$e(),INT3:$e(),INT4:$e(),INT5:$e(),INT6:$e(),INT7:$e()},pio:{PA:$e(),PB:$e(),CA:$e(),CB:$e()},printer:{printing:{progress:new Ke(0),opacity:new Ke(1)}},timer:{CONT:$e(),COMP:$e()}};function We(t){try{return fD(ty,t)}catch{const n=t.split(".");let i=ty;for(const r of n)if(r in i)i=i[r];else return console.warn(`Path not found: ${t}`),{backgroundColor:new Ke(Yt.stone[800]),opacity:new Ke(1),stop(){},pause(){},resume(){},start:()=>Promise.resolve(),set(){},get:()=>Yt.stone[800],isPaused:!1};return i}}function W6(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof Ke?e[n]=i.get():e[n]=W6(i)}return e}const Mie=W6(ty);function G6(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof Ke?i.set(e[n]):G6(t[n],e[n])}}const Rie=()=>G6(ty,Mie),Hp=new Set;async function Fe(t,e){const n=T.get(tn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=T.sub(tn,()=>{T.get(tn).type!=="paused"&&(o(),s())})}),await Fe(t,e);const i=On();if(!i.animations&&!e.forceMs)return null;const r={duration:e.forceMs?e.duration:i.animations?e.duration*i.executionUnit:1,easing:x6[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;try{const l=We(s);if(a===void 0)return l.set(o);{Hp.add(s);const c=await We(s).start({from:o,to:a,config:r});return Hp.delete(s),c}}catch(l){return console.warn(`Error animando la clave ${s}:`,l),null}}))}const K6=()=>Hp.forEach(t=>{try{const e=We(t);e&&typeof e.pause=="function"&&e.pause()}catch(e){console.warn(`Error pausing animation for key ${t}:`,e)}}),q6=()=>Hp.forEach(t=>{try{const e=We(t);e&&typeof e.resume=="function"&&e.resume()}catch(e){console.warn(`Error resuming animation for key ${t}:`,e)}});function lE(){Hp.forEach(t=>{try{const e=We(t);e&&typeof e.stop=="function"&&(e.stop(!0),e.isPaused&&typeof e.resume=="function"&&e.resume())}catch(e){console.warn(`Error stopping animation for key ${t}:`,e)}}),setTimeout(()=>Rie(),10)}const Tie={AX:Yt.blue[500],BX:"#4F46E5",CX:"#3B82F6",DX:"#1E40AF",IP:Yt.red[500],SP:"#DC2626",MAR:Yt.blue[500],MBR:Yt.blue[500],IR:Yt.blue[500],FLAGS:"#F59E0B",result:"#10B981",id:"#F97316",ri:"#06B6D4",left:"#22C55E",right:"#16A34A"};function Y6(t){const e=t.replace("cpu.","").split(".")[0];return Tie[e]||Yt.stone[600]}async function In(t,e){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP||t==="cpu.right.l"||t==="cpu.left.l")return;const n=e||Y6(t);await Fe({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutCubic"}),await Fe({key:`${t}.backgroundColor`,to:Yt.stone[750]},{duration:3,easing:"easeInCubic"});return}catch(n){return console.warn(`No se pudo animar el registro ${t}:`,n),null}}async function jn(t){try{return t==="cpu.right.l"||t==="cpu.left.l"?void 0:await Fe({key:`${t}.backgroundColor`,to:Yt.stone[800]},{duration:2,easing:"easeInOutQuart"})}catch(e){return console.warn(`No se pudo desactivar el registro ${t}:`,e),null}}async function Wp(t){try{if(t==="cpu.MBR"&&window.__nextTransferMBRtoIP)return;const e=On(),n=Y6(t);await Fe({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutQuart"});const i=e.animations?1e3:1;await new Promise(r=>setTimeout(r,i)),await Fe({key:`${t}.backgroundColor`,to:Yt.stone[800]},{duration:2,easing:"easeInQuart"});return}catch(e){return console.warn(`No se pudo actualizar el registro ${t}:`,e),null}}async function qd(t){await In("cpu.MBR"),T.set(Sc,t),await jn("cpu.MBR")}function X6(){setTimeout(()=>{try{We("bus.rd.opacity").set(0)}catch{}try{We("bus.wr.opacity").set(0)}catch{}},0)}function ck(){try{We("bus.rd.opacity").start({to:1})}catch{}}function uk(){try{We("bus.rd.opacity").start({to:0})}catch{}}function J6(){try{We("bus.wr.opacity").start({to:1})}catch{}}function Z6(){try{We("bus.wr.opacity").start({to:0})}catch{}}async function Si(t,e){return await Fe([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function Kn(t){return await Fe({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}const Oie=Object.freeze(Object.defineProperty({__proto__:null,activateRegister:In,anim:Fe,deactivateRegister:jn,hideControlBusTextsOnInit:X6,hideReadControlText:uk,hideWriteControlText:Z6,pauseAllAnimations:K6,populateDataBus:qd,resumeAllAnimations:q6,showReadControlText:ck,showWriteControlText:J6,stopAllAnimations:lE,turnLineOff:Kn,turnLineOn:Si,updateRegisterWithGlow:Wp},Symbol.toStringTag,{value:"Module"}));async function FM(t){switch(t.type){case"bus:io.selected":{await Promise.all([Fe({key:"bus.mem.stroke",to:Yt.stone[700]},{duration:1,easing:"easeInSine"}),Si(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Hc(t.error);return}case"bus:reset":{await Promise.all([Fe([{key:"bus.address.strokeDashoffset",to:1},{key:"bus.data.strokeDashoffset",to:1},{key:"bus.rd.strokeDashoffset",to:1},{key:"bus.wr.strokeDashoffset",to:1}],{duration:1,easing:"easeInSine"}),Fe({key:"bus.mem.stroke",to:Yt.red[500]},{duration:1,easing:"easeOutSine"}),Kn("bus.iom"),Kn("bus.handshake"),Kn("bus.pio"),Kn("bus.pic"),Kn("bus.timer")]);return}default:return t}}async function Iie(t){switch(t.type){case"clock:tick":return;default:return t.type}}function dk(t,e,n){switch(t){case"SP":return"M 460 309 H 550 V 349 H 659";case"IP":return"M 460 349 H 659";case"ri":return"";default:throw new Error(`Invalid register ${t}`)}}function jie({showSP:t,showri:e}){const{path:n,...i}=We("cpu.internalBus.address"),r=[t?"M 400 309 H 550 V 250":"","M 400 349 H 550 V 255",e?"M 420 388 H 550 V 300":"","M 400 349 H 659"];return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-30",children:[r.map((s,o)=>h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:s},o)),h.jsx(He.path,{d:n,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i}),h.jsx(He.path,{d:n,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}var cE={exports:{}},fd=typeof Reflect=="object"?Reflect:null,zM=fd&&typeof fd.apply=="function"?fd.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},D0;fd&&typeof fd.ownKeys=="function"?D0=fd.ownKeys:Object.getOwnPropertySymbols?D0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:D0=function(e){return Object.getOwnPropertyNames(e)};function Lie(t){console&&console.warn&&console.warn(t)}var Q6=Number.isNaN||function(e){return e!==e};function Nt(){Nt.init.call(this)}cE.exports=Nt;cE.exports.once=zie;Nt.EventEmitter=Nt;Nt.prototype._events=void 0;Nt.prototype._eventsCount=0;Nt.prototype._maxListeners=void 0;var BM=10;function Eb(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Nt,"defaultMaxListeners",{enumerable:!0,get:function(){return BM},set:function(t){if(typeof t!="number"||t<0||Q6(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");BM=t}});Nt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Nt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Q6(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function e$(t){return t._maxListeners===void 0?Nt.defaultMaxListeners:t._maxListeners}Nt.prototype.getMaxListeners=function(){return e$(this)};Nt.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")zM(l,this,n);else for(var c=l.length,u=s$(l,c),i=0;i<c;++i)zM(u[i],this,n);return!0};function t$(t,e,n,i){var r,s,o;if(Eb(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=e$(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Lie(a)}return t}Nt.prototype.addListener=function(e,n){return t$(this,e,n,!1)};Nt.prototype.on=Nt.prototype.addListener;Nt.prototype.prependListener=function(e,n){return t$(this,e,n,!0)};function Die(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function n$(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=Die.bind(i);return r.listener=n,i.wrapFn=r,r}Nt.prototype.once=function(e,n){return Eb(n),this.on(e,n$(this,e,n)),this};Nt.prototype.prependOnceListener=function(e,n){return Eb(n),this.prependListener(e,n$(this,e,n)),this};Nt.prototype.removeListener=function(e,n){var i,r,s,o,a;if(Eb(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():$ie(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Nt.prototype.off=Nt.prototype.removeListener;Nt.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function i$(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?Fie(r):s$(r,r.length)}Nt.prototype.listeners=function(e){return i$(this,e,!0)};Nt.prototype.rawListeners=function(e){return i$(this,e,!1)};Nt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):r$.call(t,e)};Nt.prototype.listenerCount=r$;function r$(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Nt.prototype.eventNames=function(){return this._eventsCount>0?D0(this._events):[]};function s$(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function $ie(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Fie(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function zie(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}o$(t,e,s,{once:!0}),e!=="error"&&Bie(t,r,{once:!0})})}function Bie(t,e,n){typeof t.on=="function"&&o$(t,"error",e,n)}function o$(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Uie=cE.exports;function po(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(po.prototype[Symbol.iterator]=function(){return this});po.of=function(){var t=arguments,e=t.length,n=0;return new po(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};po.empty=function(){var t=new po(function(){return{done:!0}});return t};po.fromSequence=function(t){var e=0,n=t.length;return new po(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};po.is=function(t){return t instanceof po?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Ab=po;const Xr=Yc(Ab);var Nb={};Nb.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Nb.SYMBOL_SUPPORT=typeof Symbol<"u";var Vie=Ab,a$=Nb,Hie=a$.ARRAY_BUFFER_SUPPORT,Wie=a$.SYMBOL_SUPPORT;function Gie(t){return typeof t=="string"||Array.isArray(t)||Hie&&ArrayBuffer.isView(t)?Vie.fromSequence(t):typeof t!="object"||t===null?null:Wie&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var l$=function(e){var n=Gie(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},Kie=l$,qie=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=Kie(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const c$=Yc(qie);var Yie=Ab,Xie=l$,Jie=function(){var e=arguments,n=null,i=-1;return new Yie(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=Xie(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Wo=Yc(Jie);function Zie(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let _n=Zie;typeof Object.assign=="function"&&(_n=Object.assign);function Hr(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function qn(t){return typeof t=="object"&&t!==null}function u$(t){let e;for(e in t)return!1;return!0}function Cr(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function es(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function UM(t){return!(!qn(t)||t.attributes&&!Array.isArray(t.attributes))}function Qie(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class uE extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class be extends uE{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,be.prototype.constructor)}}class fe extends uE{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,fe.prototype.constructor)}}class Be extends uE{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Be.prototype.constructor)}}function d$(t,e){this.key=t,this.attributes=e,this.clear()}d$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function f$(t,e){this.key=t,this.attributes=e,this.clear()}f$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function h$(t,e){this.key=t,this.attributes=e,this.clear()}h$.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function cf(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}cf.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};cf.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};cf.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};cf.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const p$=0,m$=1,ere=2,g$=3;function aa(t,e,n,i,r,s,o){let a,l,c,u;if(i=""+i,n===p$){if(a=t._nodes.get(i),!a)throw new fe(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,u=s}else if(n===g$){if(r=""+r,l=t._edges.get(r),!l)throw new fe(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,f=l.target.key;if(i===d)a=l.target;else if(i===f)a=l.source;else throw new fe(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${f}).`);c=s,u=o}else{if(l=t._edges.get(i),!l)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===m$?a=l.source:a=l.target,c=r,u=s}return[a,c,u]}function tre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=aa(this,e,n,i,r,s);return o.attributes[a]}}function nre(t,e,n){t.prototype[e]=function(i,r){const[s]=aa(this,e,n,i,r);return s.attributes}}function ire(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=aa(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function rre(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=aa(this,e,n,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function sre(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=aa(this,e,n,i,r,s,o);if(typeof c!="function")throw new be(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function ore(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=aa(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function are(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=aa(this,e,n,i,r,s);if(!qn(a))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function lre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=aa(this,e,n,i,r,s);if(!qn(a))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return _n(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function cre(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=aa(this,e,n,i,r,s);if(typeof a!="function")throw new be(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const ure=[{name:t=>`get${t}Attribute`,attacher:tre},{name:t=>`get${t}Attributes`,attacher:nre},{name:t=>`has${t}Attribute`,attacher:ire},{name:t=>`set${t}Attribute`,attacher:rre},{name:t=>`update${t}Attribute`,attacher:sre},{name:t=>`remove${t}Attribute`,attacher:ore},{name:t=>`replace${t}Attributes`,attacher:are},{name:t=>`merge${t}Attributes`,attacher:lre},{name:t=>`update${t}Attributes`,attacher:cre}];function dre(t){ure.forEach(function({name:e,attacher:n}){n(t,e("Node"),p$),n(t,e("Source"),m$),n(t,e("Target"),ere),n(t,e("Opposite"),g$)})}function fre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Hr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function hre(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=Hr(this,s,o,n),!r)throw new fe(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function pre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Hr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function mre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Hr(this,a,l,n),!o)throw new fe(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function gre(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Hr(this,a,l,n),!o)throw new fe(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new be(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function vre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Hr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function yre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Hr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!qn(r))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function bre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Hr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!qn(r))throw new be(`Graph.${e}: provided attributes are not a plain object.`);return _n(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function wre(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Be(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Be(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Hr(this,o,a,n),!s)throw new fe(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Be(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new fe(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new be(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const xre=[{name:t=>`get${t}Attribute`,attacher:fre},{name:t=>`get${t}Attributes`,attacher:hre},{name:t=>`has${t}Attribute`,attacher:pre},{name:t=>`set${t}Attribute`,attacher:mre},{name:t=>`update${t}Attribute`,attacher:gre},{name:t=>`remove${t}Attribute`,attacher:vre},{name:t=>`replace${t}Attributes`,attacher:yre},{name:t=>`merge${t}Attributes`,attacher:bre},{name:t=>`update${t}Attributes`,attacher:wre}];function Sre(t){xre.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const kre=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function _re(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function Cre(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function Ix(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new Xr(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function Ere(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function Are(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function jx(t,e){let n=t[e];return n.next!==void 0?new Xr(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Xr.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function Nre(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):c$(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function v$(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:u,attributes:d,source:f,target:p}=a;if(l=i(u,d,f.key,p.key,f.attributes,p.attributes,a.undirected),t&&l)return u}}function Pre(t,e){if(t.size===0)return Xr.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Xr(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function dE(t,e,n,i,r,s){const o=e?Cre:_re;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function Mre(t,e,n,i){const r=[];return dE(!1,t,e,n,i,function(s){r.push(s)}),r}function Rre(t,e,n){let i=Xr.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=Wo(i,Ix(n.in))),e!=="in"&&typeof n.out<"u"&&(i=Wo(i,Ix(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=Wo(i,Ix(n.undirected))),i}function fE(t,e,n,i,r,s,o){const a=n?Are:Ere;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function Tre(t,e,n,i,r){const s=[];return fE(!1,t,e,n,i,r,function(o){s.push(o)}),s}function Ore(t,e,n,i){let r=Xr.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=Wo(r,jx(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=Wo(r,jx(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Wo(r,jx(n.undirected,i))),r}function Ire(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return Nre(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new fe(`Graph.${n}: could not find the "${s}" node in the graph.`);return Mre(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new fe(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new fe(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return Tre(i,this.multi,r,a,o)}throw new be(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function jre(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=c,v$(!1,this,i,d);if(arguments.length===2){c=""+c,d=u;const f=this._nodes.get(c);if(typeof f>"u")throw new fe(`Graph.${s}: could not find the "${c}" node in the graph.`);return dE(!1,this.multi,i==="mixed"?this.type:i,r,f,d)}if(arguments.length===3){c=""+c,u=""+u;const f=this._nodes.get(c);if(!f)throw new fe(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new fe(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return fE(!1,i,this.multi,r,f,u,d)}throw new be(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let f=0;i!=="directed"&&(f+=this.undirectedSize),i!=="undirected"&&(f+=this.directedSize),d=new Array(f);let p=0;c.push((g,m,v,y,w,x,S)=>{d[p++]=u(g,m,v,y,w,x,S)})}else d=[],c.push((f,p,g,m,v,y,w)=>{d.push(u(f,p,g,m,v,y,w))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((f,p,g,m,v,y,w)=>{u(f,p,g,m,v,y,w)&&d.push(f)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new be(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new be(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((p,g,m,v,y,w,x)=>{f=u(f,p,g,m,v,y,w,x)}),this[s].apply(this,c),f}}function Lre(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return u=l,v$(!0,this,i,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new fe(`Graph.${s}: could not find the "${l}" node in the graph.`);return dE(!0,this.multi,i==="mixed"?this.type:i,r,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new fe(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new fe(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return fE(!0,i,this.multi,r,d,c,u)}throw new be(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,g,m,v,y)=>c(d,f,p,g,m,v,y)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,g,m,v,y)=>!c(d,f,p,g,m,v,y)),!this[s].apply(this,l)}}function Dre(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Xr.empty();if(!arguments.length)return Pre(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new fe(`Graph.${s}: could not find the "${o}" node in the graph.`);return Rre(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new fe(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new fe(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return Ore(i,r,l,a)}throw new be(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function $re(t){kre.forEach(e=>{Ire(t,e),jre(t,e),Lre(t,e),Dre(t,e)})}const Fre=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Pb(){this.A=null,this.B=null}Pb.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Pb.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Df(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=r(c.key,c.attributes);if(t&&u)return c.key}}function hE(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return Df(t,null,i,i.undirected,r);if(typeof n=="string")return Df(t,null,i,i[n],r)}const s=new Pb;let o;if(e!=="undirected"){if(n!=="out"){if(o=Df(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=Df(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=Df(t,s,i,i.undirected,r),t&&o))return o}function zre(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return hE(!1,t,e,n,function(r){i.push(r)}),i}function $f(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new Xr(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function Bre(t,e,n){if(t!=="mixed"){if(t==="undirected")return $f(null,n,n.undirected);if(typeof e=="string")return $f(null,n,n[e])}let i=Xr.empty();const r=new Pb;return t!=="undirected"&&(e!=="out"&&(i=Wo(i,$f(r,n,n.in))),e!=="in"&&(i=Wo(i,$f(r,n,n.out)))),t!=="directed"&&(i=Wo(i,$f(r,n,n.undirected))),i}function Ure(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new fe(`Graph.${n}: could not find the "${s}" node in the graph.`);return zre(i==="mixed"?this.type:i,r,o)}}function Vre(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new fe(`Graph.${s}: could not find the "${c}" node in the graph.`);hE(!1,i==="mixed"?this.type:i,r,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(f,p)=>{d.push(u(f,p))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(f,p)=>{u(f,p)&&d.push(f)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new be(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[s](c,(p,g)=>{f=u(f,p,g)}),f}}function Hre(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new fe(`Graph.${o}: could not find the "${c}" node in the graph.`);return hE(!0,i==="mixed"?this.type:i,r,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(f,p)=>!u(f,p))}}function Wre(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Xr.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new fe(`Graph.${s}: could not find the "${o}" node in the graph.`);return Bre(i==="mixed"?this.type:i,r,a)}}function Gre(t){Fre.forEach(e=>{Ure(t,e),Vre(t,e),Hre(t,e),Wre(t,e)})}function Tg(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,u,d,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do f=d.target,p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do f=d.target,f.key!==c&&(f=d.source),p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!p&&r(l.key,null,l.attributes,null,null,null,null)}}function Kre(t,e){const n={key:t};return u$(e.attributes)||(n.attributes=_n({},e.attributes)),n}function qre(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return u$(n.attributes)||(i.attributes=_n({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function Yre(t){if(!qn(t))throw new be('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new be("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!qn(t.attributes)||t.attributes===null))throw new be("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Xre(t){if(!qn(t))throw new be('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new be("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new be("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!qn(t.attributes)||t.attributes===null))throw new be("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new be("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Jre=Qie(),Zre=new Set(["directed","undirected","mixed"]),VM=new Set(["domain","_events","_eventsCount","_maxListeners"]),Qre=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],ese={allowSelfLoops:!0,multi:!1,type:"mixed"};function tse(t,e,n){if(n&&!qn(n))throw new be(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new Be(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function HM(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function y$(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new Be(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Be(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!qn(a))throw new be(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new Be(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new fe(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new fe(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Be(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Be(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new cf(i,r,l,c,a);t._edges.set(r,d);const f=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,u.key=r,t.emit("edgeAdded",u),r}function nse(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new Be(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Be(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new be(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!qn(a))throw new be(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new Be(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),f,p;if(!n&&(f=t._edges.get(r),f)){if((f.source.key!==s||f.target.key!==o)&&(!i||f.source.key!==o||f.target.key!==s))throw new Be(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${f.source.key}", "${f.target.key}").`);p=f}if(!p&&!t.multi&&u&&(p=i?u.undirected[o]:u.out[o]),p){const w=[p.key,!1,!1,!1];if(l?!c:!a)return w;if(l){const x=p.attributes;p.attributes=c(x),t.emit("edgeAttributesUpdated",{type:"replace",key:p.key,attributes:p.attributes})}else _n(p.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:p.key,attributes:p.attributes,data:a});return w}a=a||{},l&&c&&(a=c(a));const g={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Be(`Graph.${e}: the "${r}" edge already exists in the graph.`);let m=!1,v=!1;u||(u=HM(t,s,{}),m=!0,s===o&&(d=u,v=!0)),d||(d=HM(t,o,{}),v=!0),f=new cf(i,r,u,d,a),t._edges.set(r,f);const y=s===o;return i?(u.undirectedDegree++,d.undirectedDegree++,y&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,y&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),i?t._undirectedSize++:t._directedSize++,g.key=r,t.emit("edgeAdded",g),[r,!0,m,v]}function uu(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class It extends Uie.EventEmitter{constructor(e){if(super(),e=_n({},ese,e),typeof e.multi!="boolean")throw new be(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Zre.has(e.type))throw new be(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new be(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?d$:e.type==="directed"?f$:h$;Cr(this,"NodeDataClass",n);const i="geid_"+Jre()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};Cr(this,"_attributes",{}),Cr(this,"_nodes",new Map),Cr(this,"_edges",new Map),Cr(this,"_directedSize",0),Cr(this,"_undirectedSize",0),Cr(this,"_directedSelfLoopCount",0),Cr(this,"_undirectedSelfLoopCount",0),Cr(this,"_edgeKeyGenerator",s),Cr(this,"_options",e),VM.forEach(o=>Cr(this,o,this[o])),es(this,"order",()=>this._nodes.size),es(this,"size",()=>this._edges.size),es(this,"directedSize",()=>this._directedSize),es(this,"undirectedSize",()=>this._undirectedSize),es(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),es(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),es(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),es(this,"multi",this._options.multi),es(this,"type",this._options.type),es(this,"allowSelfLoops",this._options.allowSelfLoops),es(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new be(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new be(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new be(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new Be("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new fe(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new fe(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new Be("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new fe(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new fe(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new Be("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new fe(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new fe(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new fe(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new fe(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new fe(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new fe(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return tse(this,e,n).key}mergeNode(e,n){if(n&&!qn(n))throw new be(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(_n(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new be(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new fe(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do uu(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do uu(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do uu(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=Hr(this,i,r,this.type),!n)throw new fe(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new fe(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return uu(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new Be("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Be("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=Hr(this,e,n,"directed");if(!i)throw new fe(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return uu(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new Be("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Be("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=Hr(this,e,n,"undirected");if(!i)throw new fe(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return uu(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new be("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!qn(e))throw new be("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!qn(e))throw new be("Graph.mergeAttributes: provided attributes are not a plain object.");return _n(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new be("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new be("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!UM(n))throw new be("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new be("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!UM(n))throw new be("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new be("Graph.forEachAdjacencyEntry: expecting a callback.");Tg(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new be("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Tg(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new be("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Tg(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new be("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Tg(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):c$(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new be("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new be("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new be("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new be("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new be("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new be("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new be("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new be("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Xr(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=Kre(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=qre(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof It)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,f,p,g)=>{n?g?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):g?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!qn(e))throw new be("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!qn(e.attributes))throw new be("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new be("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],Yre(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new be("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],Xre(a);const{source:c,target:u,attributes:d,undirected:f=l}=a;let p;"key"in a?(p=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,p.call(this,a.key,c,u,d)):(p=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,p.call(this,c,u,d))}}return this}nullCopy(e){const n=new It(_n({},this._options,e));return n.replaceAttributes(_n({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=_n({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Be(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Be("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Be("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,y$(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,_n({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const f=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof i[f]>"u"?i[f]=0:i[f]++,l+=`${i[f]}. `):l+=`[${o}]: `,l+=f,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!VM.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,Cr(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(It.prototype[Symbol.for("nodejs.util.inspect.custom")]=It.prototype.inspect);Qre.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?y$:nse;t.generateKey?It.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:It.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});dre(It);Sre(It);$re(It);Gre(It);class b$ extends It{constructor(e){const n=_n({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new be("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new be('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class pE extends It{constructor(e){const n=_n({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new be("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new be('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class w$ extends It{constructor(e){const n=_n({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new be("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class x$ extends It{constructor(e){const n=_n({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new be("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new be('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class S$ extends It{constructor(e){const n=_n({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new be("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new be('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function uf(t){t.from=function(e,n){const i=_n({},e.options,n),r=new t(i);return r.import(e),r}}uf(It);uf(b$);uf(pE);uf(w$);uf(x$);uf(S$);It.Graph=It;It.DirectedGraph=b$;It.UndirectedGraph=pE;It.MultiGraph=w$;It.MultiDirectedGraph=x$;It.MultiUndirectedGraph=S$;It.InvalidArgumentsGraphError=be;It.NotFoundGraphError=fe;It.UsageGraphError=Be;var ise=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},k$=Nb,rse=k$.ARRAY_BUFFER_SUPPORT,sse=k$.SYMBOL_SUPPORT,ose=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||rse&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(sse&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},_$=Ab,ase=ose;function bn(){this.clear()}bn.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};bn.prototype.enqueue=function(t){return this.items.push(t),++this.size};bn.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};bn.prototype.peek=function(){if(this.size)return this.items[this.offset]};bn.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};bn.prototype.toArray=function(){return this.items.slice(this.offset)};bn.prototype.values=function(){var t=this.items,e=this.offset;return new _$(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};bn.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new _$(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(bn.prototype[Symbol.iterator]=bn.prototype.values);bn.prototype.toString=function(){return this.toArray().join(",")};bn.prototype.toJSON=function(){return this.toArray()};bn.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:bn,enumerable:!1}),t};typeof Symbol<"u"&&(bn.prototype[Symbol.for("nodejs.util.inspect.custom")]=bn.prototype.inspect);bn.from=function(t){var e=new bn;return ase(t,function(n){e.enqueue(n)}),e};bn.of=function(){return bn.from(arguments)};var lse=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},C$=ise,cse=lse;function use(t,e,n){if(!C$(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,f,p,g,m,v,y=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=r(u),g=0,v=d.length;g<v;g++)if(f=d[g],f in s||(a.push(f),s[f]=u),f in o){y=!0;break e}}else for(c=l,l=[],p=0,m=c.length;p<m;p++)for(u=c[p],d=i(u),g=0,v=d.length;g<v;g++)if(f=d[g],f in o||(l.push(f),o[f]=u),f in s){y=!0;break e}if(!y)return null;for(var w=[];f;)w.unshift(f),f=s[f];for(f=o[w[w.length-1]];f;)w.push(f),f=o[f];return w.length?w:null}function E$(t,e,n){if(!C$(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!i.has(c)&&(i.add(c),cse(u,e[t](c)),r[c]=s);s++,o=u}return r}E$.bind(null,"outboundNeighbors");E$.bind(null,"neighbors");var dse=use;const W=new pE({allowSelfLoops:!1});W.addNode("MBR",{position:[620,250]});W.addNode("AL",{position:[455,45]});W.addNode("BL",{position:[455,85]});W.addNode("CL",{position:[455,125]});W.addNode("DL",{position:[455,165]});W.addNode("id",{position:[451,205]});W.addNode("SP",{position:[451,309]});W.addNode("IP",{position:[455,349]});W.addNode("ri",{position:[455,388]});W.addNode("MAR",{position:[698,349]});W.addNode("result",{position:[272,115]});W.addNode("NodoRegIn",{position:[390,115]});W.addNode("NodoRegOut",{position:[550,115]});W.addNode("FLAGS",{position:[250,225]});W.addNode("IR",{position:[250,275]});W.addNode("IR mbr join",{position:[250,250]});W.addNode("left",{position:[130,85]});W.addNode("right",{position:[125,145]});W.addNode("left end",{position:[220,85]});W.addNode("right end",{position:[220,145]});W.addNode("result start",{position:[280,115]});W.addNode("rmbr",{position:[250,390]});W.addNode("bleft1",{position:[550,16]});W.addNode("bleft2",{position:[90,16]});W.addNode("bleft3",{position:[90,85]});W.addNode("AL join",{position:[425,45]});W.addNode("BL join",{position:[425,85]});W.addNode("CL join",{position:[425,125]});W.addNode("DL join",{position:[425,165]});W.addNode("id join",{position:[250,205]});W.addNode("data mbr join",{position:[390,250]});W.addNode("SP join",{position:[390,309]});W.addNode("IP join",{position:[390,349]});W.addNode("ri join",{position:[390,388]});W.addNode("MAR join1",{position:[550,388]});W.addNode("MAR join2",{position:[550,349]});W.addNode("result mbr join",{position:[370,250]});W.addNode("FLAGS mbr join",{position:[155,250]});W.addNode("left join",{position:[30,85]});W.addNode("right join",{position:[90,145]});W.addNode("operands mbr join",{position:[90,250]});W.addNode("outr mbr join",{position:[550,250]});W.addNode("mbr reg join",{position:[390,250]});W.addNode("AL out",{position:[483,45]});W.addNode("BL out",{position:[483,85]});W.addNode("CL out",{position:[483,125]});W.addNode("DL out",{position:[483,165]});W.addNode("id out",{position:[441,205]});W.addNode("MBR out",{position:[630,250]});W.addNode("MBR out join",{position:[550,250]});W.addNode("SP out",{position:[510,309]});W.addNode("IP out",{position:[510,349]});W.addNode("IP out join",{position:[550,349]});W.addNode("ri out join",{position:[550,388]});W.addNode("SP out join",{position:[550,309]});W.addNode("AL out join",{position:[525,45]});W.addNode("BL out join",{position:[525,85]});W.addNode("CL out join",{position:[525,125]});W.addNode("DL out join",{position:[525,165]});W.addNode("id out join",{position:[521,205]});W.addUndirectedEdge("AL","AL out");W.addUndirectedEdge("BL","BL out");W.addUndirectedEdge("CL","CL out");W.addUndirectedEdge("DL","DL out");W.addUndirectedEdge("id","id out");W.addUndirectedEdge("IP","IP out");W.addUndirectedEdge("SP","SP out");W.addUndirectedEdge("AL out","AL out join");W.addUndirectedEdge("BL out","BL out join");W.addUndirectedEdge("CL out","CL out join");W.addUndirectedEdge("DL out","DL out join");W.addUndirectedEdge("id out","id out join");W.addUndirectedEdge("AL out join","NodoRegOut");W.addUndirectedEdge("BL out join","NodoRegOut");W.addUndirectedEdge("CL out join","NodoRegOut");W.addUndirectedEdge("DL out join","NodoRegOut");W.addUndirectedEdge("id out join","NodoRegOut");W.addUndirectedEdge("NodoRegOut","outr mbr join");W.addUndirectedEdge("NodoRegOut","bleft1");W.addUndirectedEdge("bleft1","bleft2");W.addUndirectedEdge("bleft2","bleft3");W.addUndirectedEdge("bleft3","left");W.addUndirectedEdge("left","left end");W.addUndirectedEdge("IP out join","outr mbr join");W.addUndirectedEdge("ri out join","outr mbr join");W.addUndirectedEdge("SP out join","outr mbr join");W.addUndirectedEdge("SP out join","MAR join2");W.addUndirectedEdge("outr mbr join","mbr reg join");W.addUndirectedEdge("MBR","outr mbr join");W.addUndirectedEdge("MBR","MBR out");W.addUndirectedEdge("MBR out","outr mbr join");W.addUndirectedEdge("mbr reg join","NodoRegIn");W.addUndirectedEdge("NodoRegIn","AL join");W.addUndirectedEdge("NodoRegIn","BL join");W.addUndirectedEdge("NodoRegIn","CL join");W.addUndirectedEdge("NodoRegIn","DL join");W.addUndirectedEdge("NodoRegIn","id join");W.addUndirectedEdge("outr mbr join","operands mbr join");W.addUndirectedEdge("AL join","AL");W.addUndirectedEdge("BL join","BL");W.addUndirectedEdge("CL join","CL");W.addUndirectedEdge("DL join","DL");W.addUndirectedEdge("MBR","data mbr join");W.addUndirectedEdge("data mbr join","NodoRegIn");W.addUndirectedEdge("IP","IP join");W.addUndirectedEdge("SP","SP join");W.addUndirectedEdge("ri","ri join");W.addUndirectedEdge("MAR join1","ri");W.addUndirectedEdge("MAR join2","MAR join1");W.addUndirectedEdge("MAR","MAR join2");W.addUndirectedEdge("IP join","SP join");W.addUndirectedEdge("SP join","ri join");W.addUndirectedEdge("result start","result");W.addUndirectedEdge("result","NodoRegIn");W.addUndirectedEdge("FLAGS","FLAGS mbr join");W.addUndirectedEdge("FLAGS mbr join","data mbr join");W.addUndirectedEdge("IR","IR mbr join");W.addUndirectedEdge("IR mbr join","FLAGS mbr join");W.addUndirectedEdge("left","left join");W.addUndirectedEdge("right","right join");W.addUndirectedEdge("left join","right join");W.addUndirectedEdge("right join","operands mbr join");W.addUndirectedEdge("right","right end");W.addNode("NodoRegOutLeft",{position:[550,90]});W.addUndirectedEdge("MBR out join","NodoRegOutLeft");W.addUndirectedEdge("NodoRegOutLeft","bleft1");W.addNode("NodoRegOutRight",{position:[550,140]});W.addUndirectedEdge("MBR out join","NodoRegOutRight");W.addUndirectedEdge("NodoRegOutRight","outr mbr join");W.addNode("NodoRegOutToRight",{position:[540,115]});W.addUndirectedEdge("NodoRegOut","NodoRegOutToRight");W.addUndirectedEdge("NodoRegOutToRight","outr mbr join");W.addNode("outr mbr join left",{position:[560,250]});W.addNode("NodoRegOutToLeft",{position:[560,115]});W.addUndirectedEdge("outr mbr join left","NodoRegOutToLeft");W.addUndirectedEdge("NodoRegOutToLeft","NodoRegOut");function fse(t,e,n){const r=(a=>a.replace(/\.(l|h)$/,""))(t);if(!W.hasNode(r))return console.warn(`Nodo origen '${r}' no existe en el grafo`),"";const s=us(t,"left end",e,n,{separateMBRPaths:!0,direction:"left"}),o=us(t,"right end",e,n,{separateMBRPaths:!0,direction:"right"});return s&&o?`${s} ${o}`:s||o||""}function us(t,e,n,i,r){console.log("🔍 generateDataPath llamado con:",{from:t,to:e,instruction:n,mode:i,options:r});const s=f=>f.replace(/\.(l|h)$/,""),o=s(t),a=s(e),l=["AL","BL","CL","DL","id","SP","IP","ri","MAR","left","right","left end","right end"];let c=[];if(console.log("🔍 Evaluando condición ri → MAR:",{normalizedFrom:o,normalizedTo:a,mode:i,condition:o==="ri"&&a==="MAR"&&i==="mem<-imd"}),o==="ri"&&a==="MAR"&&i==="mem<-imd")return console.log("🎯 Usando ruta especial ri → MAR:","M 455 388 H 550 V 349 H 659"),"M 455 388 H 550 V 349 H 659";if(!W.hasNode(o))return console.warn(`Nodo origen '${o}' no existe en el grafo`),"";if(!W.hasNode(a))return console.warn(`Nodo destino '${a}' no existe en el grafo`),"";if(o==="MAR"||a==="MAR")return"";if(r!=null&&r.separateMBRPaths&&t==="MBR"&&(e==="left"||e==="right"))e==="left"?c=[o,`${o} out`,`${o} out join`,"outr mbr join left","NodoRegOutToLeft","NodoRegOut","bleft1","bleft2","bleft3","left","left end"]:e==="right"&&(c=[o,`${o} out`,`${o} out join`,"outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"]);else if(a==="left")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","bleft1","bleft2","bleft3","left","left end"];else if(a==="right")if(o==="MBR"){const f="MBR_down300";W.hasNode(f)||(W.addNode(f,{position:[620,300]}),W.addUndirectedEdge("MBR",f));const p="MBR_right125_300";W.hasNode(p)||(W.addNode(p,{position:[125,300]}),W.addUndirectedEdge(f,p)),c=["MBR",f,p,"right","right end"]}else c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","IR mbr join","operands mbr join","right join","right","right end"];else if(o==="BL"&&a==="ri")c=["BL","BL out","BL out join","NodoRegOut","outr mbr join","MAR join2","MAR"];else if(l.includes(o)&&l.includes(a))["SP","IP","ri"].includes(a)?c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegDir",`${a} join`,a]:c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","mbr reg join","NodoRegIn",`${a} join`,a];else if(l.includes(o)&&a==="MBR")c=[o,`${o} out`,`${o} out join`,"NodoRegOut","outr mbr join","MBR"];else if(o==="MBR"&&a==="ri"){if(["JMP","JC","JZ"].includes(n??""))c=["MBR","mbr reg join","IP join","IP"];else if((n==="MOV"||n==="INT")&&i==="mem<-imd")c=["MBR","mbr reg join","ri join","ri"];else if(i==="mem<-imd"&&(n==="ADD"||n==="SUB"))c=["MBR","mbr reg join","ri join","ri"];else return"M 629 250 H 550 V 349 H 659";const f=W.getNodeAttribute(c[0],"position");let p=`M ${f[0]} ${f[1]}`;for(let g=1;g<c.length;g++){const[m,v]=W.getNodeAttribute(c[g],"position");p+=` L ${m} ${v}`}return p}else if(o==="MBR"&&a==="IR"){const f=W.getNodeAttribute("MBR","position"),p=W.getNodeAttribute("IR","position");return`M ${f[0]} ${f[1]} L ${p[0]} ${f[1]} L ${p[0]} ${p[1]}`}else try{c=dse(W,o,a)||[]}catch(f){return console.warn(`Error calculando ruta de ${o} a ${a}:`,f),""}if(o==="MBR"&&a==="IP"&&["JMP","JZ","JC"].includes(n??"")){const f=W.getNodeAttribute("MBR","position"),p=W.getNodeAttribute("mbr reg join","position"),g=W.getNodeAttribute("IP","position");return`M ${f[0]} ${f[1]} L ${p[0]} ${p[1]} L ${p[0]} ${g[1]} L ${g[0]} ${g[1]}`}if(o==="ri"&&a==="IP")return"M 455 388 H 550 V 349 H 455";if(o==="ri"&&a==="IP"&&(c=["MBR","mbr reg join","NodoRegIn","IP join","IP"]),o==="ri"&&a==="IP"&&n==="CALL"&&(c=["ri","ri out join","NodoRegOut","outr mbr join","mbr reg join","NodoRegIn","IP join","IP"]),o==="MBR"&&a==="ri"&&["JMP","JZ","JC"].includes(n??""))return"";if(o==="MBR"&&a==="ri"&&n==="CALL"&&(c=["MBR","mbr reg join","NodoRegIn","ri join","ri"]),o==="IP"&&a==="MBR"&&(n==="INT"||n==="CALL"))return"M 510 349 H 550 V 250 H 620";if(c.length===0)return console.warn(`No se encontró ruta de ${o} a ${a}`),"";const u=W.getNodeAttribute(c[0],"position");let d=`M ${u[0]} ${u[1]}`;for(let f=1;f<c.length;f++){const[p,g]=W.getNodeAttribute(c[f],"position");d+=` L ${p} ${g}`}return console.log("🎯 generateDataPath retornando:",d),d}function hse({showSP:t,showid:e,showri:n}){const{path:i,...r}=We("cpu.internalBus.data"),{path:s,...o}=We("cpu.internalBus.address");return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0 z-20",children:[h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 630","M 90 145 H 90","M 272 115 H 390","M 250 225 V 250","M 250 145 v 46","M 250 250 V 272","M 250 300 V 320","M 451 349 H 390 V 250",t?"M 451 309 H 390":"M 451 309",n?"M 455 388 H 390 V 300":"","M 455 45 H 425","M 455 85 H 425","M 455 125 H 425","M 455 165 H 425",e?"M 455 205 H 425":"",n?"M 550 388 H 480":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220","M 390 250 V 115","M 390 115 L 425 45 L 455 45","M 390 115 L 425 85 L 455 85","M 390 115 L 425 125 L 455 125","M 390 115 L 425 165 L 455 165","M 550 115 L 525 45 L 445 45","M 550 115 L 525 85 L 445 85","M 550 115 L 525 125 L 445 125","M 550 115 L 525 165 L 445 165",e?"M 550 115 L 521 205 L 441 205":""].join(" ")}),h.jsx("circle",{cx:390,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:115,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:250,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:390,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:250,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx("circle",{cx:550,cy:348,r:8,fill:"#292524",stroke:"#44403c",strokeWidth:2}),h.jsx(He.path,{d:i,className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),h.jsx(He.path,{d:i,className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r}),h.jsx(He.path,{d:s,className:"fill-none stroke-[#3B82F6] stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o}),h.jsx(He.path,{d:s,className:"fill-none stroke-[#60A5FA] stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:o})]})}console.log("🔧 generateDataPath importado:",typeof us);const A$=5;let ec=null,tc=null,Ar="fetching";const Ts=(t,e,n,i)=>{console.log("🎨 drawDataPath llamado con:",{from:t,to:e,instruction:n,mode:i});try{console.log("🔧 Antes de llamar generateDataPath"),console.log("🔧 generateDataPath es:",typeof us);const r=us(t,e,n,i);return console.log("🔧 Después de llamar generateDataPath"),console.log("🎯 Ruta generada en drawDataPath:",r),r?Fe([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:A$,easing:"easeInOutSine"}):(console.log("❌ No hay ruta, retornando Promise.resolve()"),Promise.resolve())}catch(r){return console.error("❌ Error en drawDataPath:",r),console.error("❌ Stack trace:",r instanceof Error?r.stack:"No stack trace"),Promise.resolve()}},pse=(t,e,n)=>{try{const i=fse(t,e,n);return i?Fe([{key:"cpu.internalBus.data.path",from:i},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:A$,easing:"easeInOutSine"}):Promise.resolve()}catch(i){return console.warn("Error en drawSimultaneousLeftRightPath:",i),Promise.resolve()}},_o=()=>Fe({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"}),mse=async(t,e,n)=>{console.log("🎯 Animación simultánea detectada: left y right desde",t),Ar!=="fetching-operands"&&(console.log("⏳ Esperando fase fetching-operands para animación simultánea..."),await new Promise(i=>{const r=()=>{Ar==="fetching-operands"?i():setTimeout(r,50)};r()}),console.log("✅ Fase fetching-operands alcanzada, procediendo con animación simultánea")),await pse(t,e,n),await Promise.all([In("cpu.left"),In("cpu.right")]),T.set(Ie.left,T.get(Ie[t])),T.set(Ie.right,T.get(Ie[t])),await Promise.all([jn("cpu.left"),jn("cpu.right")]),ec=null,tc=null,await _o()};let Mt="",Et="",Lx=null,ph=null,mh=null;const bo=t=>t.replace(/\.(l|h)$/,"");async function WM(){await Promise.all([Wp("cpu.MBR"),Wp("cpu.IP"),new Promise(t=>{window.dispatchEvent(new CustomEvent("ip-register-update")),t()})])}async function gse(){ph&&mh?(console.log("🎯 Ejecutando animaciones simultáneas para modo mem<-imd (MBR→ri + IP→MAR)"),await Promise.all([Ts("MBR","ri",ph.instruction,ph.mode),Fe([{key:"cpu.internalBus.address.path",from:dk("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})]),T.set(Ie.ri,T.get(Sc)),T.set(Fv,T.get(Ie.IP)),await Promise.all([In("cpu.ri"),In("cpu.MAR")]),await Promise.all([jn("cpu.ri"),jn("cpu.MAR")]),await Promise.all([_o(),Fe({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]),ph=null,mh=null):mh&&(console.log("🎯 Ejecutando animación individual IP→MAR para modo mem<-imd"),await Fe([{key:"cpu.internalBus.address.path",from:dk("IP")},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),T.set(Fv,T.get(Ie.IP)),await In("cpu.MAR"),await jn("cpu.MAR"),await Fe({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),mh=null)}async function GM(t){switch(console.log("🔍 CPU Event:",t.type,t),window.VONSIM_PARALLEL_ANIMATIONS&&t.type==="cpu:mar.set"&&window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-read-visual")),t.type){case"cpu:alu.execute":{console.log("🚀 Evento cpu:alu.execute recibido, fase actual:",Ar);const e={duration:3,easing:"easeInOutSine"};Ar!=="executing"?(console.log("⏳ Esperando fase executing para animación de la ALU..."),await new Promise(n=>{let i=0;const r=200,s=()=>{console.log("🔍 Verificando fase actual:",Ar),i++,Ar==="executing"?n():i>=r?(console.warn("⚠️ Timeout esperando fase executing, procediendo de todas formas"),n()):setTimeout(s,50)};s()}),console.log("✅ Fase executing alcanzada, procediendo con animación de la ALU")):console.log("✅ Ya estamos en fase executing, procediendo directamente"),await Fe([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),T.set(jD,t.operation),console.log("⚙️ Iniciando animación del engranaje de la ALU..."),await Promise.all([Fe({key:"cpu.alu.operation.backgroundColor",to:Yt.mantis[400]},{duration:1,easing:"easeOutQuart"}),Fe({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),console.log("✅ Animación del engranaje completada"),await Fe({key:"cpu.alu.operation.backgroundColor",to:Yt.stone[800]},{duration:1,easing:"easeOutQuart"}),console.log("🟡 Iniciando animación del bus de resultado..."),await Fe([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e),await Promise.all([In("cpu.result"),In("cpu.FLAGS")]),T.set(Ie.FLAGS,t.flags),T.set(Ie.result,t.result),await Promise.all([jn("cpu.result"),jn("cpu.FLAGS")]),await Fe({key:"cpu.alu.results.opacity",to:0},{duration:1,easing:"easeInSine"}),await Fe({key:"cpu.alu.operands.opacity",to:0},{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":{ec=null,tc=null,Ar="fetching";return}case"cpu:cycle.interrupt":{T.set(si,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await Fe([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{Mt=t.instruction.name,Et=t.instruction.willUse.ri?"mem<-imd":"",console.log("[cpu:cycle.start] instructionName:",Mt,"willUse.ri:",t.instruction.willUse.ri,"mode:",Et,"position:",t.instruction.position),t.instruction.willUse.ri,t.instruction.willUse.ri,ec=null,tc=null,Ar="fetching",u6(t.instruction.position.start),T.set(si,{phase:"fetching",metadata:t.instruction}),await Fe([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{const e=t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":t.next==="halting"?"halting":"fetching";Ar=e,console.log("🔄 Fase del ciclo actualizada:",Ar),T.set(si,n=>"metadata"in n?{...n,phase:e}:n);return}case"cpu:decode":{await Fe([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await Fe([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await Fe([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{T.set(si,{phase:"stopped",error:t.error}),Hc(t.error);return}case"cpu:halt":case"cpu:int.0":{if(t.type==="cpu:halt"){const e=T.get(si);"metadata"in e&&(T.set(si,{phase:"halting",metadata:e.metadata}),await new Promise(n=>setTimeout(n,1e3)))}T.set(si,{phase:"stopped"}),Hc();return}case"cpu:int.6":{T.set(si,{phase:"int6"});return}case"cpu:int.7":{T.set(si,{phase:"int7"});return}case"cpu:inta.off":{await Kn("bus.inta");return}case"cpu:inta.on":{await Si("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);window.dispatchEvent(new CustomEvent("vonsim:parallel-memory-write-visual")),await Si(`bus.${e}`,10);return}case"cpu:iom.on":{await Si("bus.iom",15);return}case"cpu:mar.set":{const e=bo(t.register),n=e==="MBR",i=n?"M 629 250 H 550 V 349 H 659":dk(e);if(console.log("[cpu:mar.set] event.register:",t.register,"| Animación especial:",n,"| regNorm:",e,"| mode:",Et,"| instructionName:",Mt),e==="IP"&&Et==="mem<-imd"||(await Fe([{key:"cpu.internalBus.address.path",from:i},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await In("cpu.MAR",Yt.blue[500]),T.set(Fv,T.get(Ie[e]))),e==="ri"){if(console.log("[cpu:mar.set] ri detectado, mode:",Et,"instructionName:",Mt),Et==="mem<-imd"){console.log("✅ Animando bus especial: ri → MAR (modo mem<-imd)",{instructionName:Mt,mode:Et}),console.log("🔧 Llamando drawDataPath con:",{from:"ri",to:"MAR",instructionName:Mt,mode:Et});const r=await Ts("ri","MAR",Mt,Et);console.log("🎯 Ruta generada para ri → MAR:",r),await _o()}else console.log("❌ No es modo mem<-imd, usando lógica alternativa"),await Ts(bo(Lx||"BL"),"MAR",Mt,Et),await _o();Lx=null}else e==="IP"&&Et==="mem<-imd"?(mh={instruction:Mt,mode:Et},console.log("📝 Marcando animación IP → MAR como pendiente para modo mem<-imd"),await gse()):n||(await Ts(e,"MAR",Mt,Et),await _o());e==="IP"&&Et==="mem<-imd"||await Promise.all([jn("cpu.MAR"),Fe({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const e=bo(t.register);e==="IP"&&(window.__nextTransferMBRtoIP=!0);const i=["ADD","SUB","AND","OR","XOR","CMP"].some(s=>Mt.startsWith(s));let r=!1;if((e==="MAR"||e.startsWith("MAR."))&&!["ADD","SUB","CMP"].some(a=>Mt.startsWith(a))){const a=T.get(Ie.IP),l=T.get(Sc);a===l&&(r=!0)}if(e==="IR")await Ts("MBR","IR",Mt,Et);else if((e==="MAR"||e.startsWith("MAR."))&&!r)console.log("Animando bus de datos: MBR → MAR",{instructionName:Mt,mode:Et}),await Ts("MBR","MAR",Mt,Et);else if(["AL","BL","CL","DL","ri"].includes(e)){const o=["ADD","SUB","CMP"].some(a=>Mt.startsWith(a));e==="ri"&&Et==="mem<-imd"?(ph={instruction:Mt,mode:Et},console.log("📝 Marcando animación MBR → ri como pendiente para modo mem<-imd")):(!i||o)&&await Ts("MBR",e,Mt,Et)}e==="ri"&&Et==="mem<-imd"||T.set(Ie[t.register],T.get(Sc)),e==="IR"?await Wp(`cpu.${e}`):e==="IP"||e==="ri"&&Et==="mem<-imd"||(await In(`cpu.${e}`),await jn(`cpu.${e}`)),e==="ri"&&Et==="mem<-imd"||await _o(),Ar==="fetching-operands"&&e!=="IR"&&(Ar="fetching-operands-completed",console.log("✅ Fase 'fetch-operands' completada al escribir en MBR"),T.set(si,s=>"metadata"in s?{...s,phase:"fetching-operands-completed"}:s));return}case"cpu:mbr.set":{if(bo(t.register)==="IP")await WM();else{const n=t.register.replace(/\.(l|h)$/,"");await Ts(n,"MBR",Mt,Et),T.set(Sc,T.get(Ie[t.register])),await _o()}return}case"cpu:register.copy":{const e=bo(t.src),n=bo(t.dest);if(n==="left"||n==="right"){const i={from:e,instruction:Mt,mode:Et};if(n==="left"?ec=i:n==="right"&&(tc=i),ec&&tc&&ec.from===tc.from&&ec.instruction===tc.instruction){await mse(e,Mt,Et);return}n==="left"?T.set(Ie.left,T.get(Ie[e])):T.set(Ie.right,T.get(Ie[e]));return}e==="ri"&&n==="IP"||await Ts(e,n,Mt,Et),await In(`cpu.${n}`),T.set(Ie[n],T.get(Ie[e])),await jn(`cpu.${n}`),await _o();return}case"cpu:register.update":{const[e]=g2(t.register),n=bo(e);n==="IP"||n==="MBR"?await WM():await Wp(n==="ri"?"cpu.ri":`cpu.${n}`),T.set(Ie[n],t.value);return}case"cpu:register.buscopy":{const e=bo(t.src),n=bo(t.dest);n==="ri"&&(Lx=e),e==="ri"&&n.toLowerCase()==="mar"||e==="ri"&&n==="IP"||(await Ts(e,n,Mt,Et),await new Promise(i=>setTimeout(i,150))),T.set(Ie[n],T.get(Ie[e])),await In(`cpu.${n}`),await jn(`cpu.${n}`),n!=="ri"&&await _o();return}default:return t}}async function vse(t){switch(t.type){case"f10:press":await Si("bus.int0",2),await Kn("bus.int0");return;default:return t.type}}const mE=ue(B.zero(8)),gE=ue(B.zero(8));function yse(t){t.io.handshake&&(T.set(mE,B.fromUnsigned(t.io.handshake.DATA,8)),T.set(gE,B.fromUnsigned(t.io.handshake.STATE,8)))}async function bse(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await qd(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await In(`handshake.${t.register}`),t.register){case"DATA":{T.set(mE,t.value);break}case"STATE":{T.set(gE,t.value);break}default:return t.register}await jn(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await Kn("bus.int2");return}case"handshake:int.on":{await Si("bus.int2",10);return}default:return t}}async function wse(t){switch(t.type){case"keyboard:listen-key":{T.set(tn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{T.sub(tn,()=>{const n=T.get(tn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const vE=ue(B.zero(8));function xse(t){t.io.leds!==null&&T.set(vE,B.fromUnsigned(t.io.leds,8))}async function Sse(t){switch(t.type){case"leds:update":{await Si("bus.pio->leds",2),T.set(vE,t.state),await Kn("bus.pio->leds");return}default:return t.type}}const ny=ue(!1),iy=ue(!1);function kse(t){return t==="memory-to-mbr"?"M 800 249 L 629 249":"M 629 249 L 800 249"}const kc=5,KM=(t,e=kc)=>{try{const n=kse(t);return n?Fe([{key:"bus.data.path",from:n},{key:"bus.data.opacity",from:1},{key:"bus.data.strokeDashoffset",from:1,to:0}],{duration:e,easing:"easeInOutSine"}):Promise.resolve()}catch(n){return console.warn("Error en drawExternalDataPath:",n),Promise.resolve()}},qM=()=>Fe({key:"bus.data.opacity",to:0},{duration:1,easing:"easeInSine"});function _se(){return"M 610 349 H 800"}const Dx=(t=kc)=>{try{const e=_se();return Fe([{key:"bus.address.path",from:e},{key:"bus.address.opacity",from:1},{key:"bus.address.strokeDashoffset",from:1,to:0}],{duration:t,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawExternalAddressPath:",e),Promise.resolve()}},$x=()=>Fe({key:"bus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),YM=(t=kc)=>{try{return Fe([{key:"bus.rd.path",from:"M 380 420 H 800"},{key:"bus.rd.opacity",from:1},{key:"bus.rd.strokeDashoffset",from:1,to:0}],{duration:t,easing:"easeInOutSine"})}catch(e){return console.warn("Error en drawRDControlPath:",e),Promise.resolve()}},Cse=()=>{try{return Fe([{key:"bus.wr.path",from:"M 380 440 H 800"},{key:"bus.wr.opacity",from:1},{key:"bus.wr.strokeDashoffset",from:1,to:0}],{duration:kc,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawWRControlPath:",t),Promise.resolve()}},XM=()=>Fe({key:"bus.rd.opacity",to:0},{duration:1,easing:"easeInSine"}),JM=()=>Fe({key:"bus.wr.opacity",to:0},{duration:1,easing:"easeInSine"});async function ZM(t){switch(typeof window<"u"&&window.VONSIM_PARALLEL_ANIMATIONS&&window.addEventListener("vonsim:parallel-memory-read-visual",()=>{T.set(ny,!0),Fe([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{Fe([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})}),Promise.all([Dx(),(async()=>{ck(),await YM(),uk()})()])}),t.type){case"memory:read":{if(!window.VONSIM_PARALLEL_ANIMATIONS){T.set(ny,!0),Fe([{key:"bus.address.opacity",to:.7},{key:"bus.rd.opacity",to:.7}],{duration:.15,easing:"easeOutQuad"}).then(()=>{Fe([{key:"bus.address.opacity",to:1},{key:"bus.rd.opacity",to:1}],{duration:.15,easing:"easeInQuad"})});const e=kc;await Promise.all([Dx(e),(async()=>{ck(),await YM(e),uk()})()]),await $x()}return}case"memory:read.ok":{T.set(Cp,Se.from(t.address)),await Fe({key:"memory.operating-cell.color",to:Yt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await KM("memory-to-mbr",kc),T.set(Sc,t.value),await Promise.all([Fe({key:"memory.operating-cell.color",to:Yt.white},{duration:1,easing:"easeOutQuart"}),qM(),$x(),XM(),JM()]);return}case"memory:write":{T.set(iy,!0),J6();const e=kc;await Promise.all([Dx(e),Cse()]),Z6(),T.set(iy,!1);return}case"memory:write.ok":{T.set(Cp,Se.from(t.address)),await In("cpu.MBR"),await KM("mbr-to-memory"),await Fe({key:"memory.operating-cell.color",to:Yt.mantis[400]},{duration:1,easing:"easeOutQuart"}),T.set(zv,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Promise.all([jn("cpu.MBR"),Fe({key:"memory.operating-cell.color",to:Yt.white},{duration:1,easing:"easeOutQuart"}),qM(),$x(),XM(),JM()]);return}case"memory:read.error":case"memory:write.error":{Hc(t.error);return}case"memory:write.warning":{Bse("Advertencia de Memoria",`${t.warning}`);return}default:return t}}const yE=ue(B.fromUnsigned(255,8)),bE=ue(B.fromUnsigned(0,8)),wE=ue(B.fromUnsigned(0,8)),ry=[ue(B.zero(8)),ue(B.zero(8)),ue(B.zero(8)),ue(B.zero(8)),ue(B.zero(8)),ue(B.zero(8)),ue(B.zero(8)),ue(B.zero(8))];function Ese(t){if(t.io.pic){T.set(yE,B.fromUnsigned(t.io.pic.IMR,8)),T.set(bE,B.fromUnsigned(t.io.pic.IRR,8)),T.set(wE,B.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<ry.length;e++)T.set(ry[e],B.fromUnsigned(t.io.pic.lines[e],8))}}async function Ase(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await qd(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await In(`pic.${t.register}`),t.register){case"IMR":{T.set(yE,t.value);break}case"IRR":{T.set(bE,t.value);break}case"ISR":{T.set(wE,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));T.set(ry[e],t.value);break}default:return t}await jn(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await Kn("bus.intr");return}case"pic:intr.on":{await Si("bus.intr",10);return}case"pic:int.send":{await qd(t.number);return}default:return t}}const xE=ue(B.zero(8)),SE=ue(B.zero(8)),kE=ue(B.zero(8)),_E=ue(B.zero(8));function Nse(t){t.io.pio&&(T.set(xE,B.fromUnsigned(t.io.pio.PA,8)),T.set(SE,B.fromUnsigned(t.io.pio.PB,8)),T.set(kE,B.fromUnsigned(t.io.pio.CA,8)),T.set(_E,B.fromUnsigned(t.io.pio.CB,8)))}async function Pse(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await qd(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await In(`pio.${t.register}`),t.register){case"PA":{T.set(xE,t.value);break}case"PB":{T.set(SE,t.value);break}case"CA":{T.set(kE,t.value);break}case"CB":{T.set(_E,t.value);break}default:return t.register}await jn(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const sy=ue([]),oy=ue("");function Mse(t){t.io.printer&&(T.set(sy,t.io.printer.buffer.map(e=>B.fromUnsigned(e,8))),T.set(oy,t.io.printer.paper))}async function Rse(t){switch(t.type){case"printer:buffer.add":{T.set(sy,e=>[...e,t.char]);return}case"printer:buffer.pop":{T.set(sy,e=>e.slice(1));return}case"printer:busy.off":{await Kn("bus.printer.busy");return}case"printer:busy.on":{await Si("bus.printer.busy",15);return}case"printer:data.read":{await Si("bus.printer.data",15),await Kn("bus.printer.data");return}case"printer:paper.print":{T.set(oy,e=>e+t.char);return}case"printer:paper.replace":{T.set(oy,"");return}case"printer:strobe.off":{await Kn("bus.printer.strobe");return}case"printer:strobe.on":{await Si("bus.printer.strobe",15);return}default:return t}}const CE=ue("");function Tse(t){"screen"in t.io&&t.io.screen!==null&&T.set(CE,t.io.screen)}async function Ose(t){switch(t.type){case"screen:send-char":{T.set(CE,t.output);return}default:return t.type}}const Mb=ue(B.zero(8));function Ise(t){t.io.switches!==null&&T.set(Mb,B.fromUnsigned(t.io.switches,8))}async function jse(t){switch(t.type){case"switches:toggle":{T.set(Mb,e=>e.withBit(t.index,!e.bit(t.index))),await Si("bus.switches->pio",2),await Kn("bus.switches->pio");return}default:return t}}const ay=ue(B.zero(8)),EE=ue(B.zero(8));function Lse(t){t.io.timer&&(T.set(ay,B.fromUnsigned(t.io.timer.CONT,8)),T.set(EE,B.fromUnsigned(t.io.timer.COMP,8)))}async function Dse(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await qd(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await In(`timer.${t.register}`),t.register){case"CONT":{T.set(ay,t.value);break}case"COMP":{T.set(EE,t.value);break}default:return t.register}await jn(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await Kn("bus.int1");return}case"timer:int.on":{await Si("bus.int1",10);return}case"timer:tick":{T.set(ay,t.cont),await Si("bus.int1",2),await Kn("bus.int1");return}default:return t}}const fk=new Set;async function Fx(t){T.get(gc).canAnimate||await new Promise(n=>{const i=T.sub(gc,()=>{T.get(gc).canAnimate&&(i(),n())})}),await t()}async function N$(t){Fse(t);const[e]=t.type.split(":",2);fk.add(t.type);const i=["cpu:mar.set","cpu:register.update","cpu:mbr.get","cpu:mbr.set","cpu:register.buscopy","cpu:register.copy","memory:read","memory:write"].includes(t.type);try{switch(e){case"bus":{i?await Fx(()=>FM(t)):await FM(t);break}case"clock":{await Iie(t);break}case"cpu":{i?await Fx(()=>GM(t)):await GM(t);break}case"f10":{await vse(t);break}case"handshake":{await bse(t);break}case"keyboard":{await wse(t);break}case"leds":{await Sse(t);break}case"memory":{i?await Fx(()=>ZM(t)):await ZM(t);break}case"pic":{await Ase(t);break}case"pio":{await Pse(t);break}case"printer":{await Rse(t);break}case"screen":{await Ose(t);break}case"switches":{await jse(t);break}case"timer":{await Dse(t);break}default:return e}}finally{fk.delete(t.type)}}function QM(...t){for(const e of t)if(fk.has(e))return!0;return!1}const $se={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function Fse(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${$se[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof B?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof Se?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof xr?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const pn=new iQ,tn=ue({type:"stopped"});let Vc=null;try{window.VonSimAddNotification&&(Vc=window.VonSimAddNotification)}catch{}function AE(t,e=10){window.VonSimAddNotification?window.VonSimAddNotification(t):e>0&&setTimeout(()=>AE(t,e-1),100)}function zse(t){const e=t.translate(On().language);Di({title:e,variant:"error"}),Vc?Vc({type:"error",title:"Error de simulación",message:e}):AE({type:"error",title:"Error de simulación",message:e})}function Bse(t,e){Di({title:t,description:e,variant:"info"}),Vc&&Vc({type:"warning",title:t,message:e})}function Hc(t){if(t&&(zse(t),t.code==="no-instruction")){T.set(tn,{type:"paused"});return}sne(),u6(null),tne(!1),T.set(tn,{type:"stopped",error:t}),T.set(si,{phase:"stopped",error:t}),lE()}function zn(){T.set(tn,{type:"paused"}),K6()}function Use(){const t=lb(On().language,"messages.assemble-error");Di({title:t,variant:"error"}),Vc?Vc({type:"error",title:"Error de ensamblado",message:t}):AE({type:"error",title:"Error de ensamblado",message:t})}function du(){Di({title:lb(On().language,"messages.invalid-action"),variant:"error"})}function eR(t,e=!1){oQ(t,e),cQ(t,e),yse(t),Ese(t),Nse(t),Lse(t),xse(t),Mse(t),Tse(t),Ise(t),Wt=0,_c=0,T.set(_p,Wt),T.set(fb,_c),T.set(_t,""),e&&T.set(rc,[])}let Pe=null,Gl=0,kt=0,Kl="",fu=!0,_u=!1,Os=!1,Wt=0,vt=0,_c=0,ql="",tR="",nR="",Ff=!1,Og=!1,Ig="",P$="";function Vse(t){return t.modeId&&t.modeRi?"directo-inmediato":t.modeId?"inmediato":t.modeRi?"directo":"registro"}function Hse(t,e){const{name:n,modeId:i,modeRi:r,executeStage:s}=e;return n==="MOV"&&i&&r?Wse(t,s):n==="MOV"&&r&&!i?Gse(t,s):n==="MOV"&&i&&!r?Kse(t):n==="INT"?qse(t,s,r):n==="CALL"?Yse(t):{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function Wse(t,e){switch(e){case 2:return{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0};case 4:return{message:"Ejecución: ri ← MBR; MAR ← IP",shouldDisplay:!0,shouldPause:!0};default:return{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}}function Gse(t,e){return e===2?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:e===4?{message:"Ejecución: MAR ← IP ; ri ← MBR",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function Kse(t){return t==="ri"?{message:"Ejecución: MAR ← ri",shouldDisplay:!0,shouldPause:!0}:t==="IP"?{message:"Ejecución: MAR ← IP",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function qse(t,e,n){return e===2&&n?{message:"Ejecución: ri ← MBR; MAR ← SP",shouldDisplay:!0,shouldPause:!0}:{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function Yse(t){return{message:`Ejecución: MAR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function Xse(t,e){const{name:n,modeId:i,modeRi:r,executeStage:s}=e;return t==="SP"?Jse(n,s,r):t==="FLAGS"?Zse(n,s,r):n==="INT"?Qse(t):n==="MOV"&&i&&r?eoe():n==="MOV"&&r&&!i?toe():n==="CALL"?noe(t):{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function Jse(t,e,n){if(n&&e===4&&t==="INT")return{message:"",shouldDisplay:!1,shouldPause:!1};switch(t){case"PUSH":return{message:"Ejecución: SP = SP - 1",shouldDisplay:!0,shouldPause:!0};case"RET":case"IRET":return{message:"Ejecución: SP = SP + 1",shouldDisplay:!0,shouldPause:!0};case"POP":if(e===3)return{message:`${P$}; SP = SP + 1`,shouldDisplay:!0,shouldPause:!0};break}return{message:"",shouldDisplay:!1,shouldPause:!1}}function Zse(t,e,n){return n&&e===5&&t==="INT"?{message:"Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1; IF = 0",shouldDisplay:!0,shouldPause:!0}:{message:"Ejecución: IF = 0",shouldDisplay:!0,shouldPause:!0}}function Qse(t){switch(t){case"DL":return{message:"Interrupción: AL ← ASCII",shouldDisplay:!0,shouldPause:!0};case"right.l":return{message:"Interrupción: SUB AL, 1",shouldDisplay:!0,shouldPause:!0};case"right":return{message:"Interrupción: ADD BL, 1",shouldDisplay:!0,shouldPause:!0};case"ri.l":return{message:"Interrupción: MAR ← (video)",shouldDisplay:!1,shouldPause:!0}}return{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function eoe(){return{message:"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function toe(){return{message:"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1",shouldDisplay:!0,shouldPause:!0}}function noe(t){return{message:`Ejecución: MBR ← ${t}`,shouldDisplay:!0,shouldPause:!0}}function iR(){return{name:Pe||"",modeId:_u,modeRi:Os,executeStage:kt,cycleCount:vt}}function rR(t,e,n,i){const r=Vse(n);console.log(`🔍 [${t}] Registro: ${e}`),console.log(`   Instrucción: ${n.name}`),console.log(`   Modo de direccionamiento: ${r}`),console.log(`   Etapa de ejecución: ${n.executeStage}`),console.log(`   Ciclo: ${n.cycleCount}`),console.log(`   Mensaje: ${i.message}`),console.log(`   Mostrar: ${i.shouldDisplay}`),console.log(`   Pausar: ${i.shouldPause}`),console.log("---")}function sR(t){return t.name?t.executeStage<0?(console.warn("⚠️ Etapa de ejecución inválida:",t.executeStage),!1):!0:(console.warn("⚠️ Contexto de instrucción sin nombre"),!1)}async function ac(t){try{for(;;){const e=T.get(tn);if(T.get(Yv)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),T.set(Yv,!1),Hc();break}if(e.type==="stopped"){Gl=0,kt=0,Kl="";break}if(e.type==="paused"){await new Promise(s=>{const o=T.sub(tn,()=>{o(),s()})});continue}const i=t.next();if(i.done)break;if(i.value&&typeof i.value<"u")await N$(i.value);else continue;if(i.value.type==="cpu:cycle.start"&&(Pe=i.value.instruction.name,_u=!!i.value.instruction.willUse.id,Os=!!i.value.instruction.willUse.ri,T.set(sQ,Os),vt=0,T.set(Rn,vt),console.log("🔄 Nueva instrucción iniciada:",Pe,"- Contador reiniciado a 0"),console.log("🔍 Detalles de la instrucción:","willUse.id:",i.value.instruction.willUse.id,"willUse.ri:",i.value.instruction.willUse.ri,"modeId:",_u,"modeRi:",Os),Ff=!1,Og=!1,Ig=""),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(i.value.type==="cpu:cycle.end"||i.value.type==="cpu:halt"){Gl=0,kt=0,fu=!0,Kl="",_c++,console.log(`Instrucciones: ${_c}`),T.set(fb,_c),i.value.type==="cpu:halt"?(Wt++,T.set(_p,Wt),T.set(_t,"Ejecución: Detenido")):(e.until==="cycle-change"||e.until==="end-of-instruction")&&zn();continue}else i.value.type==="cpu:int.6"?T.set(_t,"Interrupción: Rutina leer caracter del teclado"):i.value.type==="cpu:int.7"&&(T.set(_t,"Interrupción: Rutina mostrar por pantalla"),e.until==="cycle-change"&&zn());if(Gl<3)i.value.type==="cpu:mar.set"?(i.value.register==="SP"?(Gl=3,kt=3,T.set(_t,"Ejecución: MAR ← SP")):(T.set(_t,"Captación: MAR ← IP"),Wt++,vt++,T.set(Rn,vt),kt++),e.until==="cycle-change"&&zn(),Gl++):i.value.type==="cpu:register.update"?(T.set(_t,"Captación: MBR ← read(Memoria[MAR]); IP ← IP + 1"),Wt++,vt++,T.set(Rn,vt),e.until==="cycle-change"&&zn(),kt++,Gl++):i.value.type==="cpu:mbr.get"&&(T.set(_t,"Captación: IR ← MBR"),Wt++,vt++,T.set(Rn,vt),e.until==="cycle-change"&&zn(),Gl++);else if(i.value.type==="cpu:rd.on"&&kt>1?Kl="Ejecución: MBR ← read(Memoria[MAR])":i.value.type==="cpu:wr.on"?Kl="Ejecución: write(Memoria[MAR]) ← MBR":i.value.type==="pio:write.ok"&&(T.set(_t,"Ejecución: write(PIO[MAR]) ← MBR"),Wt++,vt++,T.set(Rn,vt),kt++),i.value.type==="cpu:mar.set"){const s=i.value.register;console.log("executeStageCounter:",kt),console.log("mbridirmar:",Ff),console.log("resultmbrimar:",Og),console.log("displayMessageresultmbr:",Ig),console.log("shouldDisplayMessage:",fu);const o=iR();if(sR(o)){const a=Hse(s,o);rR("MAR.set",s,o,a),Og?T.set(_t,Ig):Ff?T.set(_t,"Ejecución: id ← MBR; MAR ← IP"):(fu||s==="SP"||_u&&s==="IP"||a.shouldDisplay)&&T.set(_t,a.message)}Wt++,vt++,T.set(Rn,vt),e.until==="cycle-change"&&zn(),kt++}else if(i.value.type==="cpu:register.update"){const s=i.value.register,o=iR();if(sR(o)){const a=Xse(s,o);rR("register.update",s,o,a);let l=a.message;fu=a.shouldDisplay;const c=a.shouldPause;Os&&kt===8&&Pe==="INT"&&(l="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),kt===2&&Pe==="CALL"&&(l="Ejecución: ri ← MBR; SP ← SP - 1"),kt===4&&Pe==="CALL"&&(l="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),console.log("displayMessage:",l),console.log("currentInstructionName:",Pe),console.log("currentInstructionModeri:",Os),console.log("executeStageCounter:",kt),console.log("pause:",c),Pe!=="DEC"&&Pe!=="INC"&&Pe!=="NOT"&&Pe!=="NEG"&&!(Pe==="INT"&&kt===5)&&(T.set(_t,l),Wt++,vt++,T.set(Rn,vt)),kt++,l!=="Interrupción: MAR ← (video)"&&e.until==="cycle-change"&&Pe!=="DEC"&&Pe!=="INC"&&Pe!=="NOT"&&Pe!=="NEG"&&c&&zn()}}else if(i.value.type==="cpu:alu.execute")Pe==="CMP"&&(T.set(_t,`Ejecución: ${tR} ${Pe} ${ql} ; write(FLAGS)`),Wt++,vt++,T.set(Rn,vt),e.until==="cycle-change"&&zn());else if(i.value.type==="cpu:mbr.get"){const s=i.value.register==="id.l"?"id":i.value.register==="IP.l"?"IP":i.value.register==="FLAGS.l"?"FLAGS":i.value.register;(String(s)==="right.l"||String(s)==="left.l")&&(ql="MBR"),(Os&&kt===3&&(Pe==="ADD"||Pe==="SUB"||Pe==="CMP")||kt===3&&Pe==="POP")&&(Ff=!0),Pe==="POP"&&kt===3&&(P$=`Ejecución: ${s} ← MBR`),Ff||String(s)!=="ri.l"&&String(s)!=="right.l"&&String(s)!=="left.l"&&(T.set(_t,`Ejecución: ${s} ← MBR`),Wt++,vt++,T.set(Rn,vt),e.until==="cycle-change"&&zn())}else if(i.value.type==="cpu:register.buscopy"){console.log("📋 Evento cpu:register.buscopy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");if(Pe==="MOV"){const a=`Ejecución: ${o} ← ${s}`;T.set(_t,a),Wt++,vt++,T.set(Rn,vt),console.log("✅ Ciclo contabilizado para MOV register.buscopy - cycleCount:",Wt,"currentInstructionCycleCount:",vt)}}else if(i.value.type==="cpu:register.copy"){console.log("📋 Evento cpu:register.copy detectado");const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");let a="";Pe==="DEC"||Pe==="INC"||Pe==="NOT"||Pe==="NEG"?a=s==="result"?`${Pe} ${ql}`:s:(a=s==="result"?`${o} ${Pe} ${ql}`:s,nR=`${s} ${Pe} ${ql}; write(FLAGS)`),Pe==="CMP"&&String(o)==="right"&&(ql=s),Pe==="CMP"&&String(o)==="left"&&(tR=s);let l=`Ejecución: ${o} ← ${a}`;(Pe==="ADD"||Pe==="SUB"||Pe==="CMP")&&(l+="; write(FLAGS)"),s==="ri"&&o==="IP"?(l="Ejecución: IP ← MBR",Pe==="CALL"&&(l="Ejecución: IP ← ri"),T.set(_t,l),e.until==="cycle-change"&&zn()):o==="left"&&Pe==="INT"?l="ADD BL, 1":s==="result"&&Pe==="INT"?e.until==="cycle-change"&&zn():s==="IP"&&o==="id"?(l="Ejecución: id ← IP",T.set(_t,l),e.until==="cycle-change"&&zn()):s==="id"&&o==="ri"?(l="Ejecución: MAR ← id",fu=!1,T.set(_t,l)):s==="MBR"&&o==="ri"?(l="Ejecución: MAR ← MBR",T.set(_t,l)):s==="id"&&o==="IP"?(l="Ejecución: IP ← MBR",T.set(_t,l),e.until==="cycle-change"&&zn()):s==="BL"&&o==="ri"||s==="BX"&&o==="ri"?(l="Ejecución: MAR ← BL",T.set(_t,l),fu=!1,kt++):String(s)==="right.l"&&(ql=s),console.log("cpu:register.copy - sourceRegister:",s,"destRegister:",o,"currentInstructionName:",Pe),Pe==="MOV"?(T.set(_t,l),Wt++,vt++,T.set(Rn,vt),console.log("✅ Ciclo contabilizado para MOV register.copy - cycleCount:",Wt,"currentInstructionCycleCount:",vt)):o!=="result"&&o!=="left"&&o!=="right"&&s!=="result"&&s!=="left"&&s!=="right"||s==="result"&&o!=="MBR"?(T.set(_t,l),Wt++,vt++,T.set(Rn,vt),console.log("✅ Ciclo contabilizado para register.copy - cycleCount:",Wt,"currentInstructionCycleCount:",vt)):console.log("❌ Ciclo NO contabilizado para register.copy - condición no cumplida")}else if(i.value.type==="bus:reset"&&kt>1&&(Pe==="MOV"||Pe==="ADD"||Pe==="SUB"||Pe==="CMP"||Pe==="CALL"||Pe==="INT"||Pe==="PUSH"||Pe==="POP"||Pe==="IN"||Pe==="RET")){Pe==="RET"&&(Kl="Ejecución: MBR ← read(Memoria[MAR])"),Pe==="IN"&&(Kl="Ejecución: MBR ← read(PIO[MAR])");let s=!1;(Os&&(kt===4||kt===8)&&Pe==="INT"||kt===3&&Pe==="MOV"||kt===5&&Pe==="MOV"||_u&&kt===4&&(Pe==="CALL"||Pe==="ADD"||Pe==="SUB"||Pe==="CMP"))&&(s=!0),console.log("ContinuarSinGuarda:",s),console.log("executeStageCounter:",kt),s||(T.set(_t,Kl),Wt++,vt++,T.set(Rn,vt),e.until==="cycle-change"&&zn())}else if(i.value.type==="cpu:mbr.set"){const s=i.value.register==="id.l"?"id":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="IP.l"?"IP":i.value.register==="result.l"?nR:i.value.register;Os&&kt===5&&(Pe==="ADD"||Pe==="SUB")?(Og=!0,Ig=`Ejecución: MBR ← ${s} ; MAR ← ri`):(T.set(_t,`Ejecución: MBR ← ${s}`),e.until==="cycle-change"&&zn(),kt++,Wt++,vt++,T.set(Rn,vt))}}else T.set(_t,"");console.log(`Ciclos ejecutados: ${Wt}`),T.set(_p,Wt);const r=new CustomEvent("instructionChange",{detail:{instruction:Pe,modeid:_u,moderi:Os}});window.dispatchEvent(r),i.value.type==="cpu:cycle.update"||i.value.type==="cpu:cycle.interrupt"?e.until:i.value.type==="cpu:cycle.end"&&(e.until==="cycle-change"||e.until==="end-of-instruction")&&zn()}t.return()}catch(e){const n=en.from(e);Hc(n)}}async function ioe(...t){const e=t[0],n=T.get(tn);switch(e){case"cpu.run":{if(n.type==="running")return du();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;Wt=0,_c=0,T.set(_p,Wt),T.set(fb,_c),T.set(rc,[]);const r=window.codemirror.state.doc.toString(),s=AD(r);if(!s.success)return Use();const o=s.instructions.map(x=>x.instruction),a=o.some(x=>["CALL","RET","INT","IRET","POP","PUSH"].includes(x));T.set(RC,a);const l=o.includes("INT");T.set(v2,l);const c=s.instructions.some(x=>x.instruction==="INT"?x.operands.some(S=>S.type==="number-expression"&&typeof S.value.value=="number"?S.value.value===6||S.value.value===7:!1):!1),u=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>S.type==="number-expression"&&typeof S.value.value=="number"?S.value.value===48||S.value.value===50:!1):!1),d=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value>=32&&S.value.value<=43;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _>=32&&_<=43}}catch(_){console.warn("No se pudo resolver operando PIC:",_)}}return!1}):!1),f=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value===64||S.value.value===65;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _===64||_===65}}catch(_){console.warn("No se pudo resolver operando Handshake:",_)}}return!1}):!1),p=s.instructions.some(x=>x.instruction==="IN"||x.instruction==="OUT"?x.operands.some(S=>{if(S.type==="number-expression"){if(typeof S.value.value=="number")return S.value.value===16||S.value.value===17;try{if(S.value&&typeof S.value.resolve=="function"){const _=S.value.resolve();if(typeof _=="number")return _===16||_===17}}catch(_){console.warn("No se pudo resolver operando Timer:",_)}}return!1}):!1),g=On();T.set(Zr,x=>({...x,devices:{...x.devices,keyboardAndScreen:c,pio:u?"switches-and-leds":f?"printer":x.devices.pio,handshake:f?"printer":x.devices.handshake,pic:d||x.devices.pic,"switches-and-leds":u}})),T.set(ID,c);const m=l||d||f||p||c;T.set(v2,m),console.log("Detectado - PIC:",d,"Handshake:",f,"Timer:",p,"INT:",l),console.log("Habilitando vector de interrupciones:",m),pn.loadProgram({program:s,data:g.dataOnLoad,devices:{keyboardAndScreen:On().devices.keyboardAndScreen??!1,pic:On().devices.pic??!1,pio:On().devices.pio??null,handshake:On().devices.handshake??null},hasORG:s.hasORG}),console.log("result:",s);const v=s.instructions.filter(x=>x.type==="instruction").flatMap(x=>{const S=x.operands.map(C=>{if(C.type==="register")return C.value;if(C.type==="number-expression"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h";if(N.isLabel())return N.value}else{if(C.type==="indirect-address")return"[BL]";if(C.type==="direct-address"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h"}}return""}).join(", "),_=`${x.instruction} ${S}`.trim(),E=[{address:x.start.value,name:_,length:x.length.toString().trim()}];if(x.operands.some(C=>C.type==="number-expression"||C.type==="direct-address")){const C=x.start.value+1,N=x.operands.filter((M,j)=>x.length===3?j===0&&M.type==="number-expression":M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const j=M.value;if(j.isNumberLiteral())return j.value.toString(16)+"h";if(j.isLabel())return j.value}else if(M.type==="direct-address"){const j=M.value;if(j.isNumberLiteral())return j.value.toString(16)+"h"}return""}).join(", ");E.push({address:C,name:N,length:""})}if(x.length===3){const C=x.start.value+2,N=x.operands.filter(M=>M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const j=M.value;if(j.isNumberLiteral())return j.value.toString(16)+"h"}return""}).join(" ");E.push({address:C,name:N,length:""})}return E}),y=s.data.filter(x=>x.type==="data-directive").flatMap(x=>{const S=x.start.value;return x.getValues().map(E=>typeof E=="object"&&E!==null&&"toNumber"in E&&typeof E.toNumber=="function"?E.toNumber():typeof E=="number"?E:0).map((E,C)=>({address:S+C,label:C===0&&x.label||null,value:E}))});console.log("Direcciones de las instrucciones:",v),console.log("Direcciones de los datos:",y),T.set(LD,v),T.set(DD,y.map(x=>({...x,length:""}))),eR(pn.getComputerState());const w=["Start CPU",{until:i,devices:On().devices,language:On().language,animations:On().animations?"yes":"no"}];d6.capture(...w),T.set(tn,{type:"running",until:i,waitingForInput:!1}),ac(pn.startCPU()),roe(),soe()}else T.set(tn,{type:"running",until:i,waitingForInput:!1}),q6();return}case"cpu.stop":{const i=t[1];if(i){Hc(),eR(pn.getComputerState(),i);const{anim:r}=await _D(async()=>{const{anim:o}=await Promise.resolve().then(()=>Oie);return{anim:o}},void 0);await Promise.all([r({key:"cpu.internalBus.data.opacity",to:0},{duration:.1,easing:"easeInSine"}),r({key:"cpu.internalBus.address.opacity",to:0},{duration:.1,easing:"easeInSine"})]);const s=new CustomEvent("instructionChange",{detail:{instruction:"",modeid:!1,moderi:!1}});window.dispatchEvent(s)}else zn();return}case"f10.press":{if(!pn.devices.f10.connected()||n.type!=="running")return du();if(QM("f10:press"))return;ac(pn.devices.f10.press());return}case"switch.toggle":{if(!pn.devices.switches.connected())return du();if(QM("switches:toggle"))return;const i=t[1];n.type==="running"?ac(pn.devices.switches.toggle(i)):T.set(Mb,r=>r.withBit(i,!r.bit(i)));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return du();pn.devices.keyboard.readChar(B.fromChar(t[1])),T.set(tn,{...n,waitingForInput:!1});return}case"screen.clean":{if(!pn.devices.screen.connected())return du();ac(pn.devices.screen.clear());return}case"printer.clean":{if(!pn.devices.printer.connected())return du();ac(pn.devices.printer.clear());return}default:return e}}async function roe(){if(pn.devices.clock.connected())for(;T.get(tn).type!=="stopped";){const t=On().clockSpeed;await Fe({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),ac(pn.devices.clock.tick())}}async function soe(){if(pn.devices.printer.connected()){for(;T.get(tn).type!=="stopped";){const t=On().printerSpeed;await Fe([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Fe({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),await ac(pn.devices.printer.print())}if(T.get(tn).type==="stopped"&&pn.devices.printer.hasPending())for(;T.get(tn).type!=="stopped"||pn.devices.printer.hasPending();){const t=On().printerSpeed;await Fe([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Fe({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"});const e=pn.devices.printer.print();let n=e.next();for(;!n.done;)n.value&&typeof n.value<"u"&&await N$(n.value),n=e.next()}}}function $n(){const t=it(tn),e=bD(),n=b.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:ioe,devices:n}}function ooe({className:t}){const e=Xt(),{status:n,dispatch:i}=$n(),[r,s]=b.useState(null),[o,a]=b.useState("desktop");b.useEffect(()=>{const m=()=>{const v=window.innerWidth;v<=480?a("mobile"):v<=768?a("compact"):v<=1024?a("tablet"):a("desktop")};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),b.useEffect(()=>{n.type!=="running"&&s(null)},[n.type]);const l=b.useCallback(()=>{n.type!=="running"&&(s("cycle-change"),i("cpu.run","cycle-change"))},[n.type,i]);wu("F7",m=>{m.preventDefault(),l()},void 0,[l]);const c=b.useCallback(()=>{n.type!=="running"&&(s("end-of-instruction"),i("cpu.run","end-of-instruction"))},[n.type,i]);wu("F8",m=>{m.preventDefault(),c()},void 0,[c]);const u=b.useCallback(()=>{n.type!=="running"&&(s("infinity"),i("cpu.run","infinity"))},[n.type,i]);wu("F4",m=>{m.preventDefault(),u()},void 0,[u]);const d=b.useCallback(()=>{n.type==="running"&&i("cpu.stop",!1)},[n.type,i]),f=b.useCallback(()=>{n.type!=="running"&&i("cpu.stop",!0)},[n.type,i]);wu("F9",m=>{m.preventDefault(),f()},void 0,[f]),wu(" ",m=>{const v=m.target;v.tagName==="INPUT"||v.tagName==="TEXTAREA"||v.contentEditable==="true"||(m.preventDefault(),n.type==="running"&&d())},{event:"keydown"},[n.type,d]);const p=o==="desktop"||o==="tablet",g=o==="desktop";return h.jsxs("div",{"data-testid":"controls",className:Q("flex items-center justify-center gap-4 rounded-xl border border-stone-700 bg-stone-900/80 shadow-lg",o==="mobile"?"gap-2 px-2 py-0.5":o==="compact"?"gap-3 px-2 py-1":"gap-4 px-3 py-1",t),children:[n.type==="running"&&r==="cycle-change"?h.jsxs("button",{"data-testid":"cycle-button",onClick:d,title:e("control.action.pause"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Le,{icon:Th,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"cycle-button",disabled:n.type==="running",onClick:l,title:e("control.action.run.cycle-change"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-mantis-600/20 focus-visible:ring-2 focus-visible:ring-mantis-400 disabled:opacity-50",n.type==="running"&&n.until==="cycle-change"&&"animate-pulse-glow-mantis",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Le,{icon:bp,size:"lg",className:"text-mantis-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F7"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.cycle-change")})]}),n.type==="running"&&r==="end-of-instruction"?h.jsxs("button",{"data-testid":"new-button",onClick:d,title:e("control.action.pause"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Le,{icon:Th,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"new-button",disabled:n.type==="running",onClick:c,title:e("control.action.run.end-of-instruction"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-blue-600/20 focus-visible:ring-2 focus-visible:ring-blue-400 disabled:opacity-50",n.type==="running"&&n.until==="end-of-instruction"&&"animate-pulse-glow-blue",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Le,{icon:bC,size:"lg",className:"text-blue-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F8"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.end-of-instruction")})]}),n.type==="running"&&r==="infinity"?h.jsxs("button",{"data-testid":"open-button",onClick:d,title:e("control.action.pause"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-purple-600/20 focus-visible:ring-2 focus-visible:ring-purple-400","animate-pulse-glow-purple",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Le,{icon:Th,size:"lg",className:"text-purple-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"Space"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"open-button",disabled:n.type==="running",onClick:u,title:e("control.action.run.infinity"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-orange-600/20 focus-visible:ring-2 focus-visible:ring-orange-400 disabled:opacity-50",n.type==="running"&&n.until==="infinity"&&"animate-pulse-glow-orange",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Le,{icon:WX,size:"lg",className:"text-orange-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F4"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.infinity")})]}),h.jsxs("button",{"data-testid":"assemble-button",onClick:f,disabled:n.type==="stopped"||n.type==="running",title:e("control.action.reset"),className:Q("group relative flex flex-col items-center rounded-lg transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400 disabled:opacity-50",o==="mobile"?"px-1 py-0.5":"px-1.5 py-0.5"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Le,{icon:rD,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),g&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),p&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.reset")})]})]})}const M$=b.memo(({currentPhase:t="idle",className:e})=>{const[n,i]=b.useState("idle"),[r,s]=b.useState(!1);b.useEffect(()=>{if(t!=="idle"){i(t);const a=setTimeout(()=>i("idle"),1e3);return()=>clearTimeout(a)}},[t]);const o=[{id:"captacion",label:"Captación",color:"text-blue-400",icon:"📥",descripcion:"Captando instrucción desde memoria",pasos:["IP apunta a la dirección de memoria, el MAR recibe la dirección del IP","Se lee el contenido de memoria y se almacena en el MBR, IP se incrementa automáticamente","La instrucción se transfiere al IR"]},{id:"ejecucion",label:"Ejecución",color:"text-green-400",icon:"⚡",descripcion:"Ejecutando instrucción",subfases:[{id:"operandos",label:"Obtención de operandos",color:"text-yellow-400",icon:"🔍",descripcion:"Obteniendo operandos de la instrucción",pasos:["Se identifican y preparan los operandos necesarios para la operación."]},{id:"alu",label:"Procesar en ALU",color:"text-green-400",icon:"⚡",descripcion:"Procesando en la ALU",pasos:["La ALU ejecuta la operación aritmética o lógica con los operandos."]},{id:"escritura",label:"Escribir resultado",color:"text-purple-400",icon:"💾",descripcion:"Escribiendo resultado en registros",pasos:["El resultado de la operación se almacena en el registro destino."]}]}];return h.jsxs("div",{className:Q("flex flex-col gap-2 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 p-3 shadow-lg ring-1 ring-stone-300","min-w-[280px] max-w-[320px]",e),children:[h.jsx("div",{className:"mb-2 flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"CICLO CPU"}),h.jsx("button",{onClick:()=>s(!r),className:Q("rounded border px-2 py-1 text-[10px] font-bold transition-all duration-200",r?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300 hover:border-stone-400 hover:bg-stone-700"),children:r?"−":"+"})]})}),h.jsx("div",{className:"mt-2 flex items-center justify-center gap-2",children:o.map((a,l)=>h.jsxs("div",{className:"flex items-center",children:[h.jsxs("div",{className:Q("flex cursor-pointer flex-col items-center gap-1 rounded border-2 px-2 py-1 transition-all duration-200","hover:border-stone-300 hover:bg-stone-700",t===a.id?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300",n===a.id&&"animate-pulse"),onClick:()=>{var c;if(r)if(a.subfases){let u="";a.subfases.forEach(d=>{u+=`${d.label}
${d.descripcion}
Pasos:
${d.pasos.map((f,p)=>`${p+1}. ${f}`).join(`
`)}`,u+=`

`}),alert(u)}else alert(`${a.label}

${a.descripcion}

Pasos:
${(c=a.pasos)==null?void 0:c.map((u,d)=>`${d+1}. ${u}`).join(`
`)}`)},children:[h.jsx("div",{className:Q("text-lg transition-transform duration-300",t===a.id&&"scale-110"),children:a.icon}),h.jsx("span",{className:Q("text-[10px] font-bold uppercase tracking-wide transition-colors",t===a.id?"text-stone-950":"text-stone-300"),children:a.label}),h.jsx("span",{className:"max-w-16 text-center text-[9px] leading-tight text-stone-500",children:a.descripcion})]}),l<o.length-1&&h.jsx("div",{className:"mx-1 font-bold text-stone-400",children:"→"})]},a.id))}),r&&h.jsx("div",{className:"mt-2 rounded border-2 border-stone-600 bg-stone-800/80 p-2",children:h.jsxs("div",{className:"text-xs text-stone-300",children:[h.jsx("div",{className:"mb-1 font-bold text-stone-200",children:"Estado actual:"}),t==="fetch"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Leyendo instrucción desde memoria"})]}),t==="decode"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Interpretando código de operación"})]}),t==="execute"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-stone-300"}),h.jsx("span",{children:"Ejecutando operación en ALU"})]}),t==="idle"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-stone-400"}),h.jsx("span",{children:"CPU en espera de instrucciones"})]})]})}),h.jsx("div",{className:"text-center text-[8px] text-stone-500",children:"Haz clic en las fases para ver detalles"})]})});M$.displayName="ExecutionPhases";const aoe=b.memo(({steps:t,onStepChange:e,onComplete:n,className:i})=>{const[r,s]=b.useState(0),[o,a]=b.useState(!1),[l,c]=b.useState(2e3),u=t[r],d=r===0,f=r===t.length-1,p=b.useCallback(w=>{const x=Math.max(0,Math.min(w,t.length-1));s(x),e==null||e(x)},[t.length,e]),g=b.useCallback(()=>{f?(a(!1),n==null||n()):p(r+1)},[r,f,p,n]),m=b.useCallback(()=>{d||p(r-1)},[r,d,p]),v=b.useCallback(()=>{p(0),a(!1)},[p]),y=b.useCallback(()=>{a(!o)},[o]);return o&&!f&&setTimeout(g,l),h.jsxs("div",{className:Q("rounded-lg border border-stone-600 bg-stone-900 p-4",i),children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:"Modo Paso a Paso"}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("span",{className:"text-sm text-stone-400",children:["Paso ",r+1," de ",t.length]})})]}),h.jsx(M$,{currentPhase:u==null?void 0:u.phase,className:"mb-4"}),h.jsxs("div",{className:"mb-4 rounded-lg bg-stone-800 p-4",children:[h.jsx("div",{className:"mb-2 flex items-center gap-2",children:h.jsx("span",{className:"text-sm font-medium text-mantis-400",children:u==null?void 0:u.title})}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:u==null?void 0:u.description}),(u==null?void 0:u.instruction)&&h.jsxs("div",{className:"mb-3 rounded bg-stone-700 p-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Instrucción:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:u.instruction})]}),(u==null?void 0:u.registers)&&h.jsx("div",{className:"mb-3 grid grid-cols-2 gap-4",children:h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Registros:"}),h.jsx("div",{className:"mt-1 space-y-1",children:Object.entries(u.registers).map(([w,x])=>h.jsxs("div",{className:"flex justify-between text-xs",children:[h.jsxs("span",{className:"text-stone-300",children:[w,":"]}),h.jsx("span",{className:"font-mono text-mantis-400",children:x})]},w))})]})}),(u==null?void 0:u.memory)&&h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Memoria:"}),h.jsx("div",{className:"mt-1 grid grid-cols-4 gap-1",children:Object.entries(u.memory).map(([w,x])=>h.jsxs("div",{className:"text-center text-xs",children:[h.jsx("div",{className:"text-stone-500",children:w}),h.jsx("div",{className:"font-mono text-mantis-400",children:x})]},w))})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(ht,{variant:"outline",size:"sm",onClick:v,disabled:d&&!o,className:"flex items-center gap-1",children:[h.jsx(Le,{icon:rD}),"Reiniciar"]})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(ht,{variant:"outline",size:"sm",onClick:m,disabled:d,className:"flex items-center gap-1",children:[h.jsx(Le,{icon:oD}),"Anterior"]}),h.jsxs(ht,{variant:o?"secondary":"default",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx(Le,{icon:o?Th:bp}),o?"Pausar":"Reproducir"]}),h.jsxs(ht,{variant:"outline",size:"sm",onClick:g,disabled:f,className:"flex items-center gap-1",children:["Siguiente",h.jsx(Le,{icon:bC})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Velocidad:"}),h.jsxs("select",{value:l,onChange:w=>c(Number(w.target.value)),className:"rounded border border-stone-600 bg-stone-800 px-2 py-1 text-xs",children:[h.jsx("option",{value:1e3,children:"Rápida"}),h.jsx("option",{value:2e3,children:"Normal"}),h.jsx("option",{value:4e3,children:"Lenta"})]})]})]}),h.jsx("div",{className:"mt-4",children:h.jsx("div",{className:"h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(r+1)/t.length*100}%`}})})})]})});aoe.displayName="StepByStepMode";const loe=b.memo(({from:t,to:e,data:n,duration:i=2e3,className:r,onComplete:s})=>{const[o,a]=b.useState(!1),[l,c]=b.useState(0);return b.useEffect(()=>{a(!0),c(0);const u=Date.now(),d=()=>{const f=Date.now()-u,p=Math.min(f/i,1);c(p),p<1?requestAnimationFrame(d):setTimeout(()=>{a(!1),s==null||s()},500)};requestAnimationFrame(d)},[t,e,n,i,s]),o?h.jsxs("div",{className:Q("pointer-events-none absolute inset-0",r),children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"dataFlowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${t} L ${e}`,stroke:"url(#dataFlowGradient)",strokeWidth:"3",strokeDasharray:"10,5",strokeDashoffset:20-l*20,fill:"none",className:"animate-pulse"})]}),["Read","Write"].includes(n)?(()=>{const[u,d]=t.split(" ").map(Number),[f,p]=e.split(" ").map(Number),g=u+(f-u)*l,m=d+(p-d)*l;return h.jsx("div",{className:`absolute z-[100] select-none text-lg font-extrabold ${n==="Read"?"text-red-500":"text-orange-400"}`,style:{left:g,top:m-32,textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:o?1:0,pointerEvents:"none"},children:n})})():h.jsxs("div",{className:Q("absolute rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white","border border-mantis-400 shadow-lg","transition-all duration-300 ease-out"),style:{left:`${l*100}%`,transform:"translateX(-50%)",top:"50%",marginTop:"-12px"},children:[n,h.jsx("div",{className:"absolute -top-1 left-1/2 size-0 -translate-x-1/2 border-x-4 border-b-4 border-transparent border-b-mantis-500"})]})]}):null});loe.displayName="DataFlowAnimation";const coe={"fetch-decode-execute":{title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instrucción",steps:[{id:"fetch",title:"Fase Fetch",description:"La CPU lee la instrucción desde memoria",duration:2e3,animation:{type:"flow",targets:["IP","MAR","MBR"],data:{from:"IP",to:"MBR",value:"A1"}}},{id:"decode",title:"Fase Decode",description:"La CPU interpreta la instrucción",duration:2e3,animation:{type:"highlight",targets:["IR"],data:{instruction:"MOV AL, 5"}}},{id:"execute",title:"Fase Execute",description:"La CPU ejecuta la operación",duration:2e3,animation:{type:"transform",targets:["AL"],data:{newValue:"05"}}}]},"memory-access":{title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria RAM",steps:[{id:"address-setup",title:"Configurar Dirección",description:"La CPU coloca la dirección en el MAR",duration:1500,animation:{type:"highlight",targets:["MAR"],data:{address:"A0"}}},{id:"memory-read",title:"Lectura de Memoria",description:"El contenido se transfiere al MBR",duration:1500,animation:{type:"flow",targets:["memory-cell-A0","MBR"],data:{from:"memory",to:"MBR",value:"42"}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se mueven al registro destino",duration:1500,animation:{type:"flow",targets:["MBR","AL"],data:{from:"MBR",to:"AL",value:"42"}}}]},"register-transfer":{title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU",steps:[{id:"source-read",title:"Leer Registro Origen",description:"El valor se lee del registro origen",duration:1e3,animation:{type:"highlight",targets:["AL"],data:{value:"25"}}},{id:"bus-transfer",title:"Transferencia por Bus",description:"Los datos viajan por el bus interno",duration:1500,animation:{type:"flow",targets:["AL","BL"],data:{from:"AL",to:"BL",value:"25"}}},{id:"destination-write",title:"Escribir Registro Destino",description:"El valor se almacena en el registro destino",duration:1e3,animation:{type:"transform",targets:["BL"],data:{newValue:"25"}}}]},"alu-operation":{title:"Operación ALU",description:"Proceso de operación aritmética o lógica",steps:[{id:"operand-load",title:"Cargar Operandos",description:"Los operandos se cargan en la ALU",duration:1500,animation:{type:"highlight",targets:["AL","BL"],data:{operand1:"10",operand2:"05"}}},{id:"operation-execute",title:"Ejecutar Operación",description:"La ALU realiza la operación",duration:2e3,animation:{type:"sequence",targets:["ALU"],data:{operation:"ADD",result:"15"}}},{id:"result-store",title:"Almacenar Resultado",description:"El resultado se guarda en el registro destino",duration:1500,animation:{type:"transform",targets:["AL"],data:{newValue:"15"}}}]},"bus-communication":{title:"Comunicación por Bus",description:"Cómo los componentes se comunican a través del bus",steps:[{id:"bus-request",title:"Solicitud de Bus",description:"Un componente solicita acceso al bus",duration:1e3,animation:{type:"highlight",targets:["CPU"],data:{requesting:!0}}},{id:"bus-grant",title:"Concesión de Bus",description:"El bus se concede al componente solicitante",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{granted:!0}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se transfieren por el bus",duration:2e3,animation:{type:"flow",targets:["data-bus"],data:{data:"A1B2",direction:"CPU-to-Memory"}}},{id:"bus-release",title:"Liberación de Bus",description:"El bus se libera para otros componentes",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{released:!0}}}]}},R$=b.memo(({concept:t,onClose:e,className:n})=>{const[i,r]=b.useState(0),[s,o]=b.useState(!1),[a,l]=b.useState(!1),[c,u]=b.useState(!1),d=coe[t],f=d.steps[i],p=i===0,g=i===d.steps.length-1;b.useEffect(()=>{if(s){const _=setTimeout(()=>{g?o(!1):r(E=>E+1)},f.duration);return()=>clearTimeout(_)}},[s,i,g,f.duration]);const m=b.useCallback(()=>{g||r(_=>_+1)},[g]),v=b.useCallback(()=>{p||r(_=>_-1)},[p]),y=b.useCallback(()=>{r(0),o(!1)},[]),w=b.useCallback(()=>{o(!s)},[s]),x=b.useCallback(()=>{l(!a)},[a]),S=()=>{const{type:_,targets:E,data:C}=f.animation;switch(_){case"highlight":return h.jsxs("div",{className:"relative",children:[E.map((N,M)=>h.jsx("div",{className:"absolute inset-0 animate-pulse rounded border-2 border-mantis-400 bg-mantis-400/20",style:{animationDelay:`${M*200}ms`}},M)),C&&h.jsx("div",{className:"absolute right-2 top-2 rounded bg-mantis-500 px-2 py-1 text-xs text-white",children:Object.entries(C).map(([N,M])=>h.jsxs("div",{children:[N,": ",String(M)]},N))})]});case"flow":return h.jsxs("div",{className:"relative",children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${"from"in C&&C.from||"0,0"} L ${"to"in C&&C.to||"100,100"}`,stroke:"url(#flowGradient)",strokeWidth:"3",strokeDasharray:"10,5",className:"animate-pulse"})]}),"value"in C&&C.value&&h.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:h.jsx("div",{className:"rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:C.value})})]});case"transform":return h.jsxs("div",{className:"relative",children:[E.map((N,M)=>h.jsx("div",{className:"absolute inset-0 animate-ping rounded bg-mantis-400/30",style:{animationDelay:`${M*300}ms`}},M)),"newValue"in C&&C.newValue&&h.jsxs("div",{className:"absolute left-2 top-2 rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:["Nuevo: ",C.newValue]})]});case"sequence":return h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"rounded-lg bg-mantis-500 px-4 py-2 font-mono text-sm text-white",children:"operation"in C&&C.operation?C.operation:"Operación"})}),"result"in C&&C.result&&h.jsxs("div",{className:"absolute bottom-2 right-2 rounded bg-green-500 px-2 py-1 font-mono text-xs text-white",children:["= ",C.result]})]});default:return null}};return h.jsx("div",{className:Q("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",a&&"p-0",n),children:h.jsxs("div",{className:Q("rounded-lg border border-stone-600 bg-stone-900 shadow-xl",a?"size-full":"max-h-[90vh] w-full max-w-4xl"),children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:d.title}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ht,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"text-stone-400 hover:text-mantis-400",children:h.jsx(Le,{icon:sD})}),h.jsx(ht,{variant:"ghost",size:"sm",onClick:x,className:"text-stone-400 hover:text-mantis-400",children:h.jsx(Le,{icon:a?_X:FX})}),h.jsx(ht,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"×"})]})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm text-stone-400",children:[h.jsxs("span",{children:["Paso ",i+1," de ",d.steps.length]}),h.jsx("span",{children:"•"}),h.jsxs("span",{children:[f.duration/1e3,"s"]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(i+1)/d.steps.length*100}%`}})})]}),h.jsxs("div",{className:"flex-1 p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:f.title}),h.jsx("p",{className:"text-sm text-stone-300",children:f.description})]}),h.jsxs("div",{className:"relative h-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-800",children:[S(),c&&h.jsxs("div",{className:"absolute left-2 top-2 max-w-xs rounded border border-stone-600 bg-stone-900/90 p-3",children:[h.jsx("h4",{className:"mb-2 font-medium text-mantis-400",children:"Información"}),h.jsx("p",{className:"text-xs text-stone-300",children:d.description}),h.jsxs("div",{className:"mt-2 text-xs text-stone-400",children:[h.jsxs("div",{children:["Tipo de animación: ",f.animation.type]}),h.jsxs("div",{children:["Elementos: ",f.animation.targets.join(", ")]})]})]})]})]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(ht,{variant:"outline",size:"sm",onClick:y,className:"flex items-center gap-1",children:[h.jsx(Le,{icon:NX}),"Reiniciar"]}),h.jsx(ht,{variant:"outline",size:"sm",onClick:v,disabled:p,className:"flex items-center gap-1",children:"Anterior"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(ht,{variant:"outline",size:"sm",onClick:w,className:"flex items-center gap-1",children:[h.jsx(Le,{icon:s?Th:bp}),s?"Pausar":"Reproducir"]}),h.jsx(ht,{variant:"outline",size:"sm",onClick:m,disabled:g,className:"flex items-center gap-1",children:"Siguiente"})]})]})})]})})});R$.displayName="ConceptVisualizer";const uoe=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Aprende cómo funciona una CPU y sus componentes principales",difficulty:"beginner",estimatedTime:10,steps:[{id:"intro",title:"Introducción a la CPU",description:"¿Qué es una CPU y para qué sirve?",content:"La CPU (Unidad Central de Procesamiento) es el cerebro de la computadora. Se encarga de ejecutar instrucciones y procesar datos.",type:"explanation",completed:!1},{id:"registers",title:"Registros de la CPU",description:"Los registros son memoria rápida dentro de la CPU",content:"Los registros almacenan datos temporalmente durante la ejecución. Son más rápidos que la RAM pero tienen menos capacidad.",type:"explanation",completed:!1},{id:"program-counter",title:"Puntero de Instrucción",description:"El IP indica la siguiente instrucción a ejecutar",content:"El Puntero de Instrucción (IP) se incrementa automáticamente después de cada instrucción.",type:"explanation",completed:!1}]},{id:"memory-basics",title:"Memoria RAM",description:"Comprende cómo funciona la memoria principal",difficulty:"beginner",estimatedTime:8,steps:[{id:"memory-intro",title:"¿Qué es la Memoria RAM?",description:"La memoria de acceso aleatorio",content:"La RAM almacena programas y datos temporalmente. Cada ubicación tiene una dirección única.",type:"explanation",completed:!1},{id:"memory-access",title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria",content:"La CPU usa el bus de direcciones para especificar qué celda de memoria acceder.",type:"explanation",completed:!1},{id:"memory-quiz",title:"Quiz: Direccionamiento",description:"Pon a prueba tu conocimiento",content:"Responde correctamente para continuar.",type:"quiz",exercise:{question:"¿Cuántas direcciones de memoria tiene VonSim8?",options:["128 bytes","256 bytes","512 bytes","1024 bytes"],correctAnswer:1,explanation:"VonSim8 tiene 256 bytes de memoria (direcciones 00-FF en hexadecimal)."},completed:!1}]},{id:"instruction-cycle",title:"Ciclo de Instrucción",description:"Ciclo básico de ejecución de instrucciones",difficulty:"intermediate",estimatedTime:15,steps:[{id:"cycle-intro",title:"El Ciclo de Instrucción",description:"Las dos fases principales",content:"Cada instrucción pasa por dos fases: Fetch (leer) y Execute (ejecutar). La decodificación está incluida en la ejecución.",type:"explanation",completed:!1},{id:"fetch-phase",title:"Fase Fetch",description:"Leer la instrucción de memoria",content:"La CPU lee la instrucción desde la dirección apuntada por el IP.",type:"explanation",completed:!1},{id:"execute-phase",title:"Fase Execute",description:"Ejecutar la operación",content:"La CPU realiza la operación especificada por la instrucción.",type:"explanation",completed:!1}]}],T$=b.memo(({tutorial:t,onComplete:e,onClose:n,className:i})=>{var O,H;const[r,s]=b.useState(0),[o,a]=b.useState(t.steps),[l,c]=b.useState(!1),[u,d]=b.useState(!1),[f,p]=b.useState(""),[g,m]=b.useState(null),v=o[r],y=r===0,w=r===o.length-1,S=o.filter(D=>D.completed).length/o.length*100,_=b.useCallback(()=>{e==null||e(t.id)},[t.id,e]),E=b.useCallback(()=>{w?_():(s(D=>D+1),m(null),p(""))},[w,_]),C=b.useCallback(()=>{y||(s(D=>D-1),m(null),p(""))},[y]),N=b.useCallback(()=>{a(D=>D.map((K,X)=>X===r?{...K,completed:!0}:K))},[r]),M=b.useCallback(()=>{if(!v.exercise)return;const D=f===v.exercise.correctAnswer.toString();m({correct:D,message:D?"¡Correcto!":`Incorrecto. ${v.exercise.explanation}`}),D&&(N(),setTimeout(()=>{E()},2e3))},[v,f,N,E]);b.useEffect(()=>{if(l&&v.type==="explanation"){const D=setTimeout(()=>{w?c(!1):E()},5e3);return()=>clearTimeout(D)}},[l,r,w,v.type,E]);const j=D=>{switch(D){case"beginner":return"text-blue-400";case"intermediate":return"text-yellow-400";case"advanced":return"text-purple-400";default:return"text-stone-400"}},I=D=>{switch(D){case"beginner":return od;case"intermediate":return fm;case"advanced":return wC;default:return od}};return h.jsx("div",{className:Q("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",i),children:h.jsxs("div",{className:"max-h-[90vh] w-full max-w-2xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:t.title}),h.jsx(ht,{variant:"ghost",size:"sm",onClick:n,className:"text-stone-400 hover:text-white",children:"×"})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Le,{icon:I(t.difficulty),className:j(t.difficulty)}),h.jsx("span",{className:j(t.difficulty),children:t.difficulty==="beginner"?"Básico":t.difficulty==="intermediate"?"Intermedio":"Avanzado"})]}),h.jsx("span",{className:"text-stone-400",children:"•"}),h.jsxs("span",{className:"text-stone-400",children:[t.estimatedTime," min"]}),h.jsx("span",{className:"text-stone-400",children:"•"}),h.jsxs("span",{className:"text-stone-400",children:["Paso ",r+1," de ",o.length]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${S}%`}})})]}),h.jsxs("div",{className:"max-h-96 overflow-y-auto p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:v.title}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:v.description}),h.jsx("div",{className:"text-sm leading-relaxed text-stone-400",children:v.content})]}),v.type==="exercise"||v.type==="quiz"?h.jsxs("div",{className:"rounded-lg border border-stone-600 bg-stone-800 p-4",children:[h.jsx("h4",{className:"mb-3 font-medium text-white",children:(O=v.exercise)==null?void 0:O.question}),(H=v.exercise)!=null&&H.options?h.jsx("div",{className:"space-y-2",children:v.exercise.options.map((D,K)=>h.jsxs("label",{className:Q("flex cursor-pointer items-center gap-3 rounded border p-3 transition-colors",f===K.toString()?"border-mantis-400 bg-mantis-400/20":"border-stone-600 bg-stone-700 hover:bg-stone-600"),children:[h.jsx("input",{type:"radio",name:"answer",value:K,checked:f===K.toString(),onChange:X=>p(X.target.value),className:"text-mantis-400"}),h.jsx("span",{className:"text-stone-300",children:D})]},K))}):h.jsx("input",{type:"text",value:f,onChange:D=>p(D.target.value),placeholder:"Escribe tu respuesta...",className:"w-full rounded border border-stone-600 bg-stone-700 p-2 text-white"}),g&&h.jsx("div",{className:Q("mt-3 rounded border p-3",g.correct?"border-green-400 bg-green-400/20 text-green-400":"border-red-400 bg-red-400/20 text-red-400"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Le,{icon:g.correct?lD:dm}),g.message]})}),v.hints&&v.hints.length>0&&h.jsxs("div",{className:"mt-3",children:[h.jsxs(ht,{variant:"ghost",size:"sm",onClick:()=>d(!u),className:"text-mantis-400 hover:text-mantis-300",children:[h.jsx(Le,{icon:od,className:"mr-2"}),u?"Ocultar":"Mostrar"," Pistas"]}),u&&h.jsx("div",{className:"mt-2 rounded border border-stone-600 bg-stone-700 p-3",children:h.jsx("ul",{className:"space-y-1 text-sm text-stone-300",children:v.hints.map((D,K)=>h.jsxs("li",{children:["• ",D]},K))})})]})]}):null]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(ht,{variant:"outline",size:"sm",onClick:C,disabled:y,className:"flex items-center gap-1",children:[h.jsx(Le,{icon:oD}),"Anterior"]})}),h.jsx("div",{className:"flex items-center gap-2",children:v.type==="exercise"||v.type==="quiz"?h.jsx(ht,{size:"sm",onClick:M,disabled:!f,className:"bg-mantis-600 hover:bg-mantis-700",children:"Verificar Respuesta"}):h.jsxs(ht,{size:"sm",onClick:E,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700",children:[w?"Completar Tutorial":"Siguiente",!w&&h.jsx(Le,{icon:bC})]})})]})})]})})});T$.displayName="InteractiveTutorial";const O$=b.memo(({isOpen:t=!1,onShowProgress:e})=>{const[n,i]=b.useState(!1),[r]=b.useState(!1),[s,o]=b.useState(!1),[a,l]=b.useState(!1),[c,u]=b.useState(null),[d,f]=b.useState(null),p=S=>{console.log("Tutorial seleccionado:",S),u(S),o(!0)},g=S=>{f(S),l(!0)},m=()=>{o(!1),u(null)},v=()=>{l(!1),f(null)},y=[{id:"progress",title:"Progreso Educativo",description:"Ver logros y estadísticas de aprendizaje",icon:xC,color:"text-yellow-400",action:()=>e==null?void 0:e()},{id:"tutorials",title:"Tutoriales Interactivos",description:"Aprende paso a paso con ejercicios",icon:GX,color:"text-blue-400",action:()=>i(!n)}],w=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Conceptos básicos de CPU y registros",difficulty:"Básico",duration:"10 min"},{id:"memory-basics",title:"Memoria RAM",description:"Funcionamiento de la memoria principal",difficulty:"Básico",duration:"8 min"},{id:"instruction-cycle",title:"Ciclo de Instrucción",description:"Fases fetch-decode-execute",difficulty:"Intermedio",duration:"15 min"}],x=[{id:"fetch-decode-execute",title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instrucción"},{id:"memory-access",title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria RAM"},{id:"register-transfer",title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU"},{id:"alu-operation",title:"Operación ALU",description:"Proceso de operación aritmética o lógica"},{id:"bus-communication",title:"Comunicación por Bus",description:"Cómo los componentes se comunican a través del bus"}];return h.jsxs(h.Fragment,{children:[t&&h.jsx("div",{className:"fixed bottom-12 left-1/2 z-50 -translate-x-1/2",children:h.jsxs("div",{className:"min-w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[h.jsxs("div",{className:"mb-4 text-center",children:[h.jsx("h3",{className:"mb-1 text-lg font-semibold text-mantis-400",children:"Centro de Aprendizaje"}),h.jsx("p",{className:"text-sm text-stone-400",children:"Explora herramientas educativas interactivas"})]}),h.jsx("div",{className:"space-y-2",children:y.map(S=>h.jsx("div",{children:S.id==="tutorials"?h.jsxs("div",{children:[h.jsxs("button",{onClick:S.action,className:Q("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Le,{icon:S.icon,className:Q("text-lg",S.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:S.title}),h.jsx("div",{className:"text-sm text-stone-400",children:S.description})]}),h.jsx(Le,{icon:bp,className:Q("text-sm text-stone-400",n&&"text-blue-400")})]}),n&&h.jsx("div",{className:"ml-8 mt-2 space-y-1",children:w.map(_=>h.jsx("button",{onClick:()=>p(_.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:_.title}),h.jsx("div",{className:"text-xs text-stone-400",children:_.description})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-xs text-blue-400",children:_.difficulty}),h.jsx("div",{className:"text-xs text-stone-500",children:_.duration})]})]})},_.id))})]}):S.id==="visualizations"?h.jsxs("div",{children:[h.jsxs("button",{onClick:S.action,className:Q("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Le,{icon:S.icon,className:Q("text-lg",S.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:S.title}),h.jsx("div",{className:"text-sm text-stone-400",children:S.description})]}),h.jsx(Le,{icon:F3,className:Q("text-sm text-stone-400",r&&"text-green-400")})]}),r&&h.jsx("div",{className:"ml-8 mt-2 space-y-1",children:x.map(_=>h.jsx("button",{onClick:()=>g(_.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:_.title}),h.jsx("div",{className:"text-xs text-stone-400",children:_.description})]})},_.id))})]}):h.jsxs("button",{onClick:S.action,className:Q("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Le,{icon:S.icon,className:Q("text-lg",S.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:S.title}),h.jsx("div",{className:"text-sm text-stone-400",children:S.description})]})]})},S.id))}),h.jsx("div",{className:"mt-4 border-t border-stone-600 pt-3",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsx("span",{children:"Herramientas educativas"}),h.jsx("span",{children:"VonSim8"})]})})]})}),s&&c&&(()=>{const S=uoe.find(_=>_.id===c);return console.log("Tutorial encontrado:",S),S?h.jsx(T$,{tutorial:S,onComplete:m,onClose:()=>{console.log("Cerrando tutorial"),o(!1),u(null)}}):(console.error("Tutorial no encontrado:",c),null)})(),a&&d&&h.jsx(R$,{concept:d,onClose:v})]})});O$.displayName="EducationalMenu";const oR=[{id:"first_program",type:"programs_written",title:"Primer Programa",description:"Escribe tu primer programa en ensamblador",icon:od,requirement:1,current:0,unlocked:!1,points:10},{id:"instruction_master",type:"instructions_executed",title:"Maestro de Instrucciones",description:"Ejecuta 100 instrucciones",icon:AX,requirement:100,current:0,unlocked:!1,points:25},{id:"memory_explorer",type:"concept_mastered",title:"Explorador de Memoria",description:"Comprende el funcionamiento de la memoria RAM",icon:qX,requirement:1,current:0,unlocked:!1,points:15},{id:"cpu_architect",type:"concept_mastered",title:"Arquitecto de CPU",description:"Domina los conceptos de arquitectura de CPU",icon:HX,requirement:1,current:0,unlocked:!1,points:30},{id:"persistent_learner",type:"time_spent",title:"Estudiante Persistente",description:"Pasa 30 minutos aprendiendo",icon:fm,requirement:30,current:0,unlocked:!1,points:20},{id:"tutorial_master",type:"tutorials_completed",title:"Maestro de Tutoriales",description:"Completa un tutorial interactivo educativo",icon:xC,requirement:1,current:0,unlocked:!1,points:40}],aR=[{id:"beginner",name:"Principiante",description:"Conceptos básicos de programación y arquitectura",concepts:["register","memory","instruction"],requiredPoints:0,unlocked:!0,completed:!1},{id:"intermediate",name:"Intermedio",description:"Operaciones aritméticas y lógicas",concepts:["alu","bus","program-counter"],requiredPoints:50,unlocked:!1,completed:!1},{id:"advanced",name:"Avanzado",description:"Interrupciones y programación compleja",concepts:["flags","stack","interrupts"],requiredPoints:100,unlocked:!1,completed:!1}],I$=b.memo(({className:t,isVisible:e=!1,onClose:n})=>{const[i,r]=b.useState(oR),[s,o]=b.useState(aR),[a,l]=b.useState(0),[c,u]=b.useState(0);b.useEffect(()=>{const v=localStorage.getItem("vonsim8-educational-progress");if(v)try{const y=JSON.parse(v);r(y.achievements||oR),o(y.levels||aR),l(y.totalPoints||0),u(y.sessionTime||0)}catch{}},[]);const d=b.useCallback(()=>{const v={achievements:i,levels:s,totalPoints:a,sessionTime:c,lastSaved:Date.now()};localStorage.setItem("vonsim8-educational-progress",JSON.stringify(v))},[i,s,a,c]),f=b.useCallback((v,y)=>{r(w=>{const x=w.map(_=>{if(_.type===v){const E=Math.min(_.current+y,_.requirement),C=_.unlocked,N=E>=_.requirement;return!C&&N&&p(_),{..._,current:E,unlocked:N}}return _}),S=x.filter(_=>_.unlocked).reduce((_,E)=>_+E.points,0);return l(S),o(_=>_.map(E=>({...E,unlocked:S>=E.requiredPoints}))),x})},[]),p=v=>{const y=document.createElement("div");y.className=Q("fixed right-4 top-4 z-50 rounded-lg border-2 p-4 shadow-lg","animate-slide-in-right bg-mantis-500 text-white"),y.innerHTML=`
      <div class="flex items-center gap-3">
        <FontAwesomeIcon icon="${v.icon}" class="text-2xl" />
        <div>
          <div class="font-bold">¡Logro Desbloqueado!</div>
          <div class="text-sm">${v.title}</div>
        </div>
      </div>
    `,document.body.appendChild(y),setTimeout(()=>{y.remove()},3e3)};if(b.useEffect(()=>{const v=y=>{const{type:w,value:x=1}=y.detail;f(w,x)};return window.addEventListener("educational-progress",v),()=>window.removeEventListener("educational-progress",v)},[f]),b.useEffect(()=>{const v=setInterval(()=>{u(y=>{const w=y+1;return w%60===0&&f("time_spent",1),w})},1e3);return()=>clearInterval(v)},[f]),b.useEffect(()=>{const v=setInterval(d,3e4);return()=>clearInterval(v)},[d]),!e)return null;const g=i.filter(v=>v.unlocked),m=s.filter(v=>v.unlocked);return h.jsxs("div",{className:Q("fixed bottom-20 right-4 z-50 h-80 w-96 rounded-lg border border-stone-600 bg-stone-900 shadow-xl",t),children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-3",children:[h.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-mantis-400",children:[h.jsx(Le,{icon:xC}),"Progreso Educativo"]}),h.jsx(ht,{variant:"ghost",size:"sm",onClick:n,className:"text-xs text-stone-400 hover:text-white",children:"×"})]}),h.jsxs("div",{className:"h-64 space-y-3 overflow-y-auto p-3",children:[h.jsxs("div",{className:"rounded-lg bg-stone-800 p-3 text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-mantis-400",children:a}),h.jsx("div",{className:"text-xs text-stone-400",children:"Puntos Totales"})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Le,{icon:fm}),"Niveles de Aprendizaje"]}),h.jsx("div",{className:"space-y-1",children:s.map(v=>h.jsxs("div",{className:Q("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10 text-mantis-400":"border-stone-600 bg-stone-800 text-stone-500"),children:[h.jsx("div",{className:"font-medium",children:v.name}),h.jsx("div",{className:"text-stone-400",children:v.description}),!v.unlocked&&h.jsxs("div",{className:"mt-1 text-stone-500",children:["Requiere ",v.requiredPoints," puntos"]})]},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Le,{icon:EX}),"Logros (",g.length,"/",i.length,")"]}),h.jsx("div",{className:"space-y-1",children:i.map(v=>h.jsx("div",{className:Q("rounded border p-2 text-xs",v.unlocked?"border-mantis-400 bg-mantis-400/10":"border-stone-600 bg-stone-800"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Le,{icon:v.icon,className:v.unlocked?"text-mantis-400":"text-stone-500"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:Q("font-medium",v.unlocked?"text-mantis-400":"text-stone-400"),children:v.title}),h.jsx("div",{className:"text-stone-500",children:v.description}),h.jsxs("div",{className:"mt-1",children:[h.jsx("div",{className:"h-1 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-1 rounded-full bg-mantis-400 transition-all duration-300",style:{width:`${v.current/v.requirement*100}%`}})}),h.jsxs("div",{className:"mt-1 text-stone-500",children:[v.current,"/",v.requirement]})]})]})]})},v.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Le,{icon:TX}),"Estadísticas"]}),h.jsxs("div",{className:"text-xs text-stone-400",children:[h.jsxs("div",{children:["Tiempo de sesión: ",Math.floor(c/60),"m ",c%60,"s"]}),h.jsxs("div",{children:["Niveles completados: ",m.length,"/",s.length]})]})]})]})]})});I$.displayName="EducationalProgress";const j$=b.createContext(null),NE=()=>{const t=b.useContext(j$);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},L$=()=>{const[t,e]=b.useState([]),[n,i]=b.useState(!1);b.useEffect(()=>{const c=localStorage.getItem("vonsim8-notifications");if(c)try{const d=JSON.parse(c);if(Array.isArray(d)){const f=d.filter(p=>p&&typeof p=="object"&&"id"in p&&"type"in p&&"title"in p&&"message"in p&&"timestamp"in p&&"read"in p).map(p=>({id:String(p.id),type:p.type,title:String(p.title),message:String(p.message),timestamp:new Date(p.timestamp),read:!!p.read}));e(f)}}catch{e([])}if(!localStorage.getItem("vonsim8-welcome-notification")){const d={id:"welcome",type:"info",title:"¡Bienvenido a VonSim8!",message:"Gracias por usar nuestro simulador. Aquí encontrarás notificaciones importantes sobre el funcionamiento de la aplicación.",timestamp:new Date,read:!1};e(f=>[d,...f]),localStorage.setItem("vonsim8-welcome-notification","true")}},[]),b.useEffect(()=>{localStorage.setItem("vonsim8-notifications",JSON.stringify(t))},[t]);const r=b.useCallback(c=>{const u={...c,id:Date.now().toString(),timestamp:new Date,read:!1};e(d=>[u,...d])},[]),s=b.useCallback(c=>{e(u=>u.map(d=>d.id===c?{...d,read:!0}:d))},[]),o=b.useCallback(()=>{e(c=>c.map(u=>({...u,read:!0})))},[]),a=b.useCallback(c=>{e(u=>u.filter(d=>d.id!==c))},[]),l=b.useCallback(()=>{e([])},[]);return{notifications:t,isOpen:n,setIsOpen:i,addNotification:r,markAsRead:s,markAllAsRead:o,deleteNotification:a,clearAll:l}},doe=t=>b.useMemo(()=>{const e=t.length,n=t.filter(r=>!r.read).length,i=t.reduce((r,s)=>(r[s.type]=(r[s.type]||0)+1,r),{});return{total:e,unread:n,byType:i}},[t]),D$=b.memo(({type:t})=>{const e=b.useMemo(()=>{switch(t){case"info":return{icon:$3,className:"text-blue-400"};case"success":return{icon:lD,className:"text-green-400"};case"warning":return{icon:l2,className:"text-yellow-400"};case"error":return{icon:l2,className:"text-red-400"};default:return{icon:$3,className:"text-blue-400"}}},[t]);return h.jsx(Le,{icon:e.icon,className:Q("size-4",e.className)})});D$.displayName="NotificationIcon";const hk=b.memo(({notification:t,onMarkAsRead:e,onDelete:n})=>{const i=b.useCallback(r=>{const o=new Date().getTime()-r.getTime(),a=Math.floor(o/6e4),l=Math.floor(o/36e5),c=Math.floor(o/864e5);return c>0?`${c}d`:l>0?`${l}h`:a>0?`${a}m`:"Ahora"},[]);return h.jsx("div",{className:Q("rounded-lg border p-3 transition-colors",t.read?"border-stone-600 bg-stone-800":"border-mantis-500 bg-stone-800/80"),children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(D$,{type:t.type}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsx("h4",{className:"font-medium text-white",children:t.title}),h.jsx("button",{onClick:()=>n(t.id),className:"ml-2 rounded p-1 text-stone-400 transition-colors hover:text-white",children:h.jsx(Le,{icon:dm,size:"sm"})})]}),h.jsx("p",{className:"mt-1 text-sm text-stone-300",children:t.message}),h.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[h.jsx("span",{className:"text-xs text-stone-500",children:i(t.timestamp)}),h.jsxs("div",{className:"flex gap-2",children:[t.title==="Nueva versión disponible"&&h.jsx("button",{onClick:()=>{window.updateVonSim8&&window.updateVonSim8(),e(t.id)},className:"rounded bg-mantis-600 px-2 py-1 text-xs text-white transition-colors hover:bg-mantis-500",children:"Actualizar"}),!t.read&&h.jsx("button",{onClick:()=>e(t.id),className:"text-xs text-mantis-400 transition-colors hover:text-mantis-300",children:"Marcar como leída"})]})]})]})]})})});hk.displayName="NotificationItem";const $$=b.memo(()=>{const{notifications:t,isOpen:e,setIsOpen:n,markAsRead:i,markAllAsRead:r,deleteNotification:s,clearAll:o}=L$(),{total:a,unread:l}=doe(t),c=b.useCallback(()=>{n(f=>!f)},[n]),u=b.useMemo(()=>t.filter(f=>!f.read),[t]),d=b.useMemo(()=>t.filter(f=>f.read),[t]);return e?h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[h.jsx(Le,{icon:z3,className:"size-4"}),l>0&&h.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]}),h.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Notificaciones (",a,")"]}),h.jsxs("div",{className:"flex gap-2",children:[l>0&&h.jsx(ht,{variant:"ghost",size:"sm",onClick:r,className:"text-xs text-stone-400 hover:text-white",children:"Marcar todas"}),a>0&&h.jsx(ht,{variant:"ghost",size:"sm",onClick:o,className:"text-xs text-red-400 hover:text-red-300",children:"Limpiar"})]})]}),h.jsx("div",{className:"max-h-96 space-y-3 overflow-y-auto",children:t.length===0?h.jsx("p",{className:"text-center text-sm text-stone-500",children:"No hay notificaciones"}):h.jsxs(h.Fragment,{children:[u.length>0&&h.jsx("div",{className:"space-y-2",children:u.map(f=>h.jsx(hk,{notification:f,onMarkAsRead:i,onDelete:s},f.id))}),d.length>0&&u.length>0&&h.jsx("hr",{className:"border-stone-600"}),d.length>0&&h.jsx("div",{className:"space-y-2",children:d.map(f=>h.jsx(hk,{notification:f,onMarkAsRead:i,onDelete:s},f.id))})]})})]})]}):h.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[h.jsx(Le,{icon:z3,className:"size-4"}),l>0&&h.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]})});$$.displayName="NotificationCenter";const foe=({children:t})=>{const e=L$(),n=b.useMemo(()=>({addNotification:e.addNotification,markAsRead:e.markAsRead,markAllAsRead:e.markAllAsRead,deleteNotification:e.deleteNotification,clearAll:e.clearAll,notifications:e.notifications}),[e]);return h.jsx(j$.Provider,{value:n,children:t})};function ly(t,[e,n]){return Math.min(n,Math.max(e,t))}function hoe(t,e=globalThis==null?void 0:globalThis.document){const n=br(t);b.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var poe="DismissableLayer",pk="dismissableLayer.update",moe="dismissableLayer.pointerDownOutside",goe="dismissableLayer.focusOutside",lR,F$=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Sm=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(F$),[u,d]=b.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=b.useState({}),g=lt(e,C=>d(C)),m=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(v),w=u?m.indexOf(u):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,_=yoe(C=>{const N=C.target,M=[...c.branches].some(j=>j.contains(N));!S||M||(r==null||r(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),E=boe(C=>{const N=C.target;[...c.branches].some(j=>j.contains(N))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return hoe(C=>{w===c.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),b.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(lR=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),cR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=lR)}},[u,f,n,c]),b.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),cR())},[u,c]),b.useEffect(()=>{const C=()=>p({});return document.addEventListener(pk,C),()=>document.removeEventListener(pk,C)},[]),h.jsx(Ge.div,{...l,ref:g,style:{pointerEvents:x?S?"auto":"none":void 0,...t.style},onFocusCapture:ve(t.onFocusCapture,E.onFocusCapture),onBlurCapture:ve(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ve(t.onPointerDownCapture,_.onPointerDownCapture)})});Sm.displayName=poe;var voe="DismissableLayerBranch",z$=b.forwardRef((t,e)=>{const n=b.useContext(F$),i=b.useRef(null),r=lt(e,i);return b.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),h.jsx(Ge.div,{...t,ref:r})});z$.displayName=voe;function yoe(t,e=globalThis==null?void 0:globalThis.document){const n=br(t),i=b.useRef(!1),r=b.useRef(()=>{});return b.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){B$(moe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function boe(t,e=globalThis==null?void 0:globalThis.document){const n=br(t),i=b.useRef(!1);return b.useEffect(()=>{const r=s=>{s.target&&!i.current&&B$(goe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function cR(){const t=new CustomEvent(pk);document.dispatchEvent(t)}function B$(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?iC(r,s):r.dispatchEvent(s)}var woe=Sm,xoe=z$,zx=0;function PE(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??uR()),document.body.insertAdjacentElement("beforeend",t[1]??uR()),zx++,()=>{zx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),zx--}},[])}function uR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Bx="focusScope.autoFocusOnMount",Ux="focusScope.autoFocusOnUnmount",dR={bubbles:!1,cancelable:!0},Soe="FocusScope",Rb=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=b.useState(null),c=br(r),u=br(s),d=b.useRef(null),f=lt(e,m=>l(m)),p=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(i){let m=function(x){if(p.paused||!a)return;const S=x.target;a.contains(S)?d.current=S:ya(d.current,{select:!0})},v=function(x){if(p.paused||!a)return;const S=x.relatedTarget;S!==null&&(a.contains(S)||ya(d.current,{select:!0}))},y=function(x){if(document.activeElement===document.body)for(const _ of x)_.removedNodes.length>0&&ya(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),w.disconnect()}}},[i,a,p.paused]),b.useEffect(()=>{if(a){hR.add(p);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(Bx,dR);a.addEventListener(Bx,c),a.dispatchEvent(y),y.defaultPrevented||(koe(Noe(U$(a)),{select:!0}),document.activeElement===m&&ya(a))}return()=>{a.removeEventListener(Bx,c),setTimeout(()=>{const y=new CustomEvent(Ux,dR);a.addEventListener(Ux,u),a.dispatchEvent(y),y.defaultPrevented||ya(m??document.body,{select:!0}),a.removeEventListener(Ux,u),hR.remove(p)},0)}}},[a,c,u,p]);const g=b.useCallback(m=>{if(!n&&!i||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(v&&y){const w=m.currentTarget,[x,S]=_oe(w);x&&S?!m.shiftKey&&y===S?(m.preventDefault(),n&&ya(x,{select:!0})):m.shiftKey&&y===x&&(m.preventDefault(),n&&ya(S,{select:!0})):y===w&&m.preventDefault()}},[n,i,p.paused]);return h.jsx(Ge.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});Rb.displayName=Soe;function koe(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(ya(i,{select:e}),document.activeElement!==n)return}function _oe(t){const e=U$(t),n=fR(e,t),i=fR(e.reverse(),t);return[n,i]}function U$(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function fR(t,e){for(const n of t)if(!Coe(n,{upTo:e}))return n}function Coe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Eoe(t){return t instanceof HTMLInputElement&&"select"in t}function ya(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Eoe(t)&&e&&t.select()}}var hR=Aoe();function Aoe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=pR(t,e),t.unshift(e)},remove(e){var n;t=pR(t,e),(n=t[0])==null||n.resume()}}}function pR(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function Noe(t){return t.filter(e=>e.tagName!=="A")}const Poe=["top","right","bottom","left"],xl=Math.min,ar=Math.max,cy=Math.round,jg=Math.floor,lo=t=>({x:t,y:t}),Moe={left:"right",right:"left",bottom:"top",top:"bottom"},Roe={start:"end",end:"start"};function mk(t,e,n){return ar(t,xl(e,n))}function ea(t,e){return typeof t=="function"?t(e):t}function ta(t){return t.split("-")[0]}function df(t){return t.split("-")[1]}function ME(t){return t==="x"?"y":"x"}function RE(t){return t==="y"?"height":"width"}const Toe=new Set(["top","bottom"]);function Qs(t){return Toe.has(ta(t))?"y":"x"}function TE(t){return ME(Qs(t))}function Ooe(t,e,n){n===void 0&&(n=!1);const i=df(t),r=TE(t),s=RE(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=uy(o)),[o,uy(o)]}function Ioe(t){const e=uy(t);return[gk(t),e,gk(e)]}function gk(t){return t.replace(/start|end/g,e=>Roe[e])}const mR=["left","right"],gR=["right","left"],joe=["top","bottom"],Loe=["bottom","top"];function Doe(t,e,n){switch(t){case"top":case"bottom":return n?e?gR:mR:e?mR:gR;case"left":case"right":return e?joe:Loe;default:return[]}}function $oe(t,e,n,i){const r=df(t);let s=Doe(ta(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(gk)))),s}function uy(t){return t.replace(/left|right|bottom|top/g,e=>Moe[e])}function Foe(t){return{top:0,right:0,bottom:0,left:0,...t}}function V$(t){return typeof t!="number"?Foe(t):{top:t,right:t,bottom:t,left:t}}function dy(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function vR(t,e,n){let{reference:i,floating:r}=t;const s=Qs(e),o=TE(e),a=RE(o),l=ta(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let p;switch(l){case"top":p={x:u,y:i.y-r.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-r.width,y:d};break;default:p={x:i.x,y:i.y}}switch(df(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const zoe=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:d}=vR(c,i,l),f=i,p={},g=0;for(let m=0;m<a.length;m++){const{name:v,fn:y}=a[m],{x:w,y:x,data:S,reset:_}=await y({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=w??u,d=x??d,p={...p,[v]:{...p[v],...S}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:u,y:d}=vR(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:p}};async function Gp(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=ea(e,t),g=V$(p),v=a[f?d==="floating"?"reference":"floating":d],y=dy(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},_=dy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:x,strategy:l}):w);return{top:(y.top-_.top+g.top)/S.y,bottom:(_.bottom-y.bottom+g.bottom)/S.y,left:(y.left-_.left+g.left)/S.x,right:(_.right-y.right+g.right)/S.x}}const Boe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=ea(t,e)||{};if(c==null)return{};const d=V$(u),f={x:n,y:i},p=TE(r),g=RE(p),m=await o.getDimensions(c),v=p==="y",y=v?"top":"left",w=v?"bottom":"right",x=v?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[p]-f[p]-s.floating[g],_=f[p]-s.reference[p],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=E?E[x]:0;(!C||!await(o.isElement==null?void 0:o.isElement(E)))&&(C=a.floating[x]||s.floating[g]);const N=S/2-_/2,M=C/2-m[g]/2-1,j=xl(d[y],M),I=xl(d[w],M),O=j,H=C-m[g]-I,D=C/2-m[g]/2+N,K=mk(O,D,H),X=!l.arrow&&df(r)!=null&&D!==K&&s.reference[g]/2-(D<O?j:I)-m[g]/2<0,te=X?D<O?D-O:D-H:0;return{[p]:f[p]+te,data:{[p]:K,centerOffset:D-K-te,...X&&{alignmentOffset:te}},reset:X}}}),Uoe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...v}=ea(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=ta(r),w=Qs(a),x=ta(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=f||(x||!m?[uy(a)]:Ioe(a)),E=g!=="none";!f&&E&&_.push(...$oe(a,m,g,S));const C=[a,..._],N=await Gp(e,v),M=[];let j=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&M.push(N[y]),d){const D=Ooe(r,o,S);M.push(N[D[0]],N[D[1]])}if(j=[...j,{placement:r,overflows:M}],!M.every(D=>D<=0)){var I,O;const D=(((I=s.flip)==null?void 0:I.index)||0)+1,K=C[D];if(K&&(!(d==="alignment"?w!==Qs(K):!1)||j.every(U=>U.overflows[0]>0&&Qs(U.placement)===w)))return{data:{index:D,overflows:j},reset:{placement:K}};let X=(O=j.filter(te=>te.overflows[0]<=0).sort((te,U)=>te.overflows[1]-U.overflows[1])[0])==null?void 0:O.placement;if(!X)switch(p){case"bestFit":{var H;const te=(H=j.filter(U=>{if(E){const z=Qs(U.placement);return z===w||z==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(z=>z>0).reduce((z,ie)=>z+ie,0)]).sort((U,z)=>U[1]-z[1])[0])==null?void 0:H[0];te&&(X=te);break}case"initialPlacement":X=a;break}if(r!==X)return{reset:{placement:X}}}return{}}}};function yR(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function bR(t){return Poe.some(e=>t[e]>=0)}const Voe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=ea(t,e);switch(i){case"referenceHidden":{const s=await Gp(e,{...r,elementContext:"reference"}),o=yR(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:bR(o)}}}case"escaped":{const s=await Gp(e,{...r,altBoundary:!0}),o=yR(s,n.floating);return{data:{escapedOffsets:o,escaped:bR(o)}}}default:return{}}}}},H$=new Set(["left","top"]);async function Hoe(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=ta(n),a=df(n),l=Qs(n)==="y",c=H$.has(o)?-1:1,u=s&&l?-1:1,d=ea(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const Woe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await Hoe(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},Goe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:y,y:w}=v;return{x:y,y:w}}},...l}=ea(t,e),c={x:n,y:i},u=await Gp(e,l),d=Qs(ta(r)),f=ME(d);let p=c[f],g=c[d];if(s){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",w=p+u[v],x=p-u[y];p=mk(w,p,x)}if(o){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",w=g+u[v],x=g-u[y];g=mk(w,g,x)}const m=a.fn({...e,[f]:p,[d]:g});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[f]:s,[d]:o}}}}}},Koe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ea(t,e),u={x:n,y:i},d=Qs(r),f=ME(d);let p=u[f],g=u[d];const m=ea(a,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const x=f==="y"?"height":"width",S=s.reference[f]-s.floating[x]+v.mainAxis,_=s.reference[f]+s.reference[x]-v.mainAxis;p<S?p=S:p>_&&(p=_)}if(c){var y,w;const x=f==="y"?"width":"height",S=H$.has(ta(r)),_=s.reference[d]-s.floating[x]+(S&&((y=o.offset)==null?void 0:y[d])||0)+(S?0:v.crossAxis),E=s.reference[d]+s.reference[x]+(S?0:((w=o.offset)==null?void 0:w[d])||0)-(S?v.crossAxis:0);g<_?g=_:g>E&&(g=E)}return{[f]:p,[d]:g}}}},qoe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ea(t,e),u=await Gp(e,c),d=ta(r),f=df(r),p=Qs(r)==="y",{width:g,height:m}=s.floating;let v,y;d==="top"||d==="bottom"?(v=d,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,v=f==="end"?"top":"bottom");const w=m-u.top-u.bottom,x=g-u.left-u.right,S=xl(m-u[v],w),_=xl(g-u[y],x),E=!e.middlewareData.shift;let C=S,N=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=x),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(C=w),E&&!f){const j=ar(u.left,0),I=ar(u.right,0),O=ar(u.top,0),H=ar(u.bottom,0);p?N=g-2*(j!==0||I!==0?j+I:ar(u.left,u.right)):C=m-2*(O!==0||H!==0?O+H:ar(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:C});const M=await o.getDimensions(a.floating);return g!==M.width||m!==M.height?{reset:{rects:!0}}:{}}}};function Tb(){return typeof window<"u"}function ff(t){return W$(t)?(t.nodeName||"").toLowerCase():"#document"}function vr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function vo(t){var e;return(e=(W$(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function W$(t){return Tb()?t instanceof Node||t instanceof vr(t).Node:!1}function Ss(t){return Tb()?t instanceof Element||t instanceof vr(t).Element:!1}function mo(t){return Tb()?t instanceof HTMLElement||t instanceof vr(t).HTMLElement:!1}function wR(t){return!Tb()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof vr(t).ShadowRoot}const Yoe=new Set(["inline","contents"]);function km(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=ks(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!Yoe.has(r)}const Xoe=new Set(["table","td","th"]);function Joe(t){return Xoe.has(ff(t))}const Zoe=[":popover-open",":modal"];function Ob(t){return Zoe.some(e=>{try{return t.matches(e)}catch{return!1}})}const Qoe=["transform","translate","scale","rotate","perspective"],eae=["transform","translate","scale","rotate","perspective","filter"],tae=["paint","layout","strict","content"];function OE(t){const e=IE(),n=Ss(t)?ks(t):t;return Qoe.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||eae.some(i=>(n.willChange||"").includes(i))||tae.some(i=>(n.contain||"").includes(i))}function nae(t){let e=Sl(t);for(;mo(e)&&!Yd(e);){if(OE(e))return e;if(Ob(e))return null;e=Sl(e)}return null}function IE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const iae=new Set(["html","body","#document"]);function Yd(t){return iae.has(ff(t))}function ks(t){return vr(t).getComputedStyle(t)}function Ib(t){return Ss(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Sl(t){if(ff(t)==="html")return t;const e=t.assignedSlot||t.parentNode||wR(t)&&t.host||vo(t);return wR(e)?e.host:e}function G$(t){const e=Sl(t);return Yd(e)?t.ownerDocument?t.ownerDocument.body:t.body:mo(e)&&km(e)?e:G$(e)}function Kp(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=G$(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=vr(r);if(s){const a=vk(o);return e.concat(o,o.visualViewport||[],km(r)?r:[],a&&n?Kp(a):[])}return e.concat(r,Kp(r,[],n))}function vk(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function K$(t){const e=ks(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=mo(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=cy(n)!==s||cy(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function jE(t){return Ss(t)?t:t.contextElement}function hd(t){const e=jE(t);if(!mo(e))return lo(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=K$(e);let o=(s?cy(n.width):n.width)/i,a=(s?cy(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const rae=lo(0);function q$(t){const e=vr(t);return!IE()||!e.visualViewport?rae:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function sae(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==vr(t)?!1:e}function Wc(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=jE(t);let o=lo(1);e&&(i?Ss(i)&&(o=hd(i)):o=hd(t));const a=sae(s,n,i)?q$(s):lo(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=vr(s),p=i&&Ss(i)?vr(i):i;let g=f,m=vk(g);for(;m&&i&&p!==g;){const v=hd(m),y=m.getBoundingClientRect(),w=ks(m),x=y.left+(m.clientLeft+parseFloat(w.paddingLeft))*v.x,S=y.top+(m.clientTop+parseFloat(w.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=x,c+=S,g=vr(m),m=vk(g)}}return dy({width:u,height:d,x:l,y:c})}function LE(t,e){const n=Ib(t).scrollLeft;return e?e.left+n:Wc(vo(t)).left+n}function Y$(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:LE(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function oae(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=vo(i),a=e?Ob(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=lo(1);const u=lo(0),d=mo(i);if((d||!d&&!s)&&((ff(i)!=="body"||km(o))&&(l=Ib(i)),mo(i))){const p=Wc(i);c=hd(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}const f=o&&!d&&!s?Y$(o,l,!0):lo(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function aae(t){return Array.from(t.getClientRects())}function lae(t){const e=vo(t),n=Ib(t),i=t.ownerDocument.body,r=ar(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=ar(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+LE(t);const a=-n.scrollTop;return ks(i).direction==="rtl"&&(o+=ar(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function cae(t,e){const n=vr(t),i=vo(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=IE();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}const uae=new Set(["absolute","fixed"]);function dae(t,e){const n=Wc(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=mo(t)?hd(t):lo(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function xR(t,e,n){let i;if(e==="viewport")i=cae(t,n);else if(e==="document")i=lae(vo(t));else if(Ss(e))i=dae(e,n);else{const r=q$(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return dy(i)}function X$(t,e){const n=Sl(t);return n===e||!Ss(n)||Yd(n)?!1:ks(n).position==="fixed"||X$(n,e)}function fae(t,e){const n=e.get(t);if(n)return n;let i=Kp(t,[],!1).filter(a=>Ss(a)&&ff(a)!=="body"),r=null;const s=ks(t).position==="fixed";let o=s?Sl(t):t;for(;Ss(o)&&!Yd(o);){const a=ks(o),l=OE(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&uae.has(r.position)||km(o)&&!l&&X$(t,o))?i=i.filter(u=>u!==o):r=a,o=Sl(o)}return e.set(t,i),i}function hae(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?Ob(e)?[]:fae(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=xR(e,u,r);return c.top=ar(d.top,c.top),c.right=xl(d.right,c.right),c.bottom=xl(d.bottom,c.bottom),c.left=ar(d.left,c.left),c},xR(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function pae(t){const{width:e,height:n}=K$(t);return{width:e,height:n}}function mae(t,e,n){const i=mo(e),r=vo(e),s=n==="fixed",o=Wc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=lo(0);function c(){l.x=LE(r)}if(i||!i&&!s)if((ff(e)!=="body"||km(r))&&(a=Ib(e)),i){const p=Wc(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&c();s&&!i&&r&&c();const u=r&&!i&&!s?Y$(r,a):lo(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function Vx(t){return ks(t).position==="static"}function SR(t,e){if(!mo(t)||ks(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return vo(t)===n&&(n=n.ownerDocument.body),n}function J$(t,e){const n=vr(t);if(Ob(t))return n;if(!mo(t)){let r=Sl(t);for(;r&&!Yd(r);){if(Ss(r)&&!Vx(r))return r;r=Sl(r)}return n}let i=SR(t,e);for(;i&&Joe(i)&&Vx(i);)i=SR(i,e);return i&&Yd(i)&&Vx(i)&&!OE(i)?n:i||nae(t)||n}const gae=async function(t){const e=this.getOffsetParent||J$,n=this.getDimensions,i=await n(t.floating);return{reference:mae(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function vae(t){return ks(t).direction==="rtl"}const yae={convertOffsetParentRelativeRectToViewportRelativeRect:oae,getDocumentElement:vo,getClippingRect:hae,getOffsetParent:J$,getElementRects:gae,getClientRects:aae,getDimensions:pae,getScale:hd,isElement:Ss,isRTL:vae};function Z$(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function bae(t,e){let n=null,i;const r=vo(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=c;if(a||e(),!f||!p)return;const g=jg(d),m=jg(r.clientWidth-(u+f)),v=jg(r.clientHeight-(d+p)),y=jg(u),x={rootMargin:-g+"px "+-m+"px "+-v+"px "+-y+"px",threshold:ar(0,xl(1,l))||1};let S=!0;function _(E){const C=E[0].intersectionRatio;if(C!==l){if(!S)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!Z$(c,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(_,{...x,root:r.ownerDocument})}catch{n=new IntersectionObserver(_,x)}n.observe(t)}return o(!0),s}function wae(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=jE(t),u=r||s?[...c?Kp(c):[],...Kp(e)]:[];u.forEach(y=>{r&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=c&&a?bae(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[w]=y;w&&w.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=p)==null||x.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let g,m=l?Wc(t):null;l&&v();function v(){const y=Wc(t);m&&!Z$(m,y)&&n(),m=y,g=requestAnimationFrame(v)}return n(),()=>{var y;u.forEach(w=>{r&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d==null||d(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const xae=Woe,Sae=Goe,kae=Uoe,_ae=qoe,Cae=Voe,kR=Boe,Eae=Koe,Aae=(t,e,n)=>{const i=new Map,r={platform:yae,...n},s={...r.platform,_c:i};return zoe(t,e,{...r,platform:s})};var Nae=typeof document<"u",Pae=function(){},$0=Nae?b.useLayoutEffect:Pae;function fy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!fy(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!fy(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function Q$(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function _R(t,e){const n=Q$(t);return Math.round(e*n)/n}function Hx(t){const e=b.useRef(t);return $0(()=>{e.current=t}),e}function Mae(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=b.useState(i);fy(f,i)||p(i);const[g,m]=b.useState(null),[v,y]=b.useState(null),w=b.useCallback(U=>{U!==E.current&&(E.current=U,m(U))},[]),x=b.useCallback(U=>{U!==C.current&&(C.current=U,y(U))},[]),S=s||g,_=o||v,E=b.useRef(null),C=b.useRef(null),N=b.useRef(u),M=l!=null,j=Hx(l),I=Hx(r),O=Hx(c),H=b.useCallback(()=>{if(!E.current||!C.current)return;const U={placement:e,strategy:n,middleware:f};I.current&&(U.platform=I.current),Aae(E.current,C.current,U).then(z=>{const ie={...z,isPositioned:O.current!==!1};D.current&&!fy(N.current,ie)&&(N.current=ie,Pl.flushSync(()=>{d(ie)}))})},[f,e,n,I,O]);$0(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(U=>({...U,isPositioned:!1})))},[c]);const D=b.useRef(!1);$0(()=>(D.current=!0,()=>{D.current=!1}),[]),$0(()=>{if(S&&(E.current=S),_&&(C.current=_),S&&_){if(j.current)return j.current(S,_,H);H()}},[S,_,H,j,M]);const K=b.useMemo(()=>({reference:E,floating:C,setReference:w,setFloating:x}),[w,x]),X=b.useMemo(()=>({reference:S,floating:_}),[S,_]),te=b.useMemo(()=>{const U={position:n,left:0,top:0};if(!X.floating)return U;const z=_R(X.floating,u.x),ie=_R(X.floating,u.y);return a?{...U,transform:"translate("+z+"px, "+ie+"px)",...Q$(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:ie}},[n,a,X.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:H,refs:K,elements:X,floatingStyles:te}),[u,H,K,X,te])}const Rae=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?kR({element:i.current,padding:r}).fn(n):{}:i?kR({element:i,padding:r}).fn(n):{}}}},Tae=(t,e)=>({...xae(t),options:[t,e]}),Oae=(t,e)=>({...Sae(t),options:[t,e]}),Iae=(t,e)=>({...Eae(t),options:[t,e]}),jae=(t,e)=>({...kae(t),options:[t,e]}),Lae=(t,e)=>({..._ae(t),options:[t,e]}),Dae=(t,e)=>({...Cae(t),options:[t,e]}),$ae=(t,e)=>({...Rae(t),options:[t,e]});var Fae="Arrow",eF=b.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return h.jsx(Ge.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});eF.displayName=Fae;var zae=eF;function DE(t){const[e,n]=b.useState(void 0);return Qn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var $E="Popper",[tF,hf]=_s($E),[Bae,nF]=tF($E),iF=t=>{const{__scopePopper:e,children:n}=t,[i,r]=b.useState(null);return h.jsx(Bae,{scope:e,anchor:i,onAnchorChange:r,children:n})};iF.displayName=$E;var rF="PopperAnchor",sF=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=nF(rF,n),o=b.useRef(null),a=lt(e,o);return b.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:h.jsx(Ge.div,{...r,ref:a})});sF.displayName=rF;var FE="PopperContent",[Uae,Vae]=tF(FE),oF=b.forwardRef((t,e)=>{var k,P,L,R,Y,G;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=t,v=nF(FE,n),[y,w]=b.useState(null),x=lt(e,ne=>w(ne)),[S,_]=b.useState(null),E=DE(S),C=(E==null?void 0:E.width)??0,N=(E==null?void 0:E.height)??0,M=i+(s!=="center"?"-"+s:""),j=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},I=Array.isArray(c)?c:[c],O=I.length>0,H={padding:j,boundary:I.filter(Wae),altBoundary:O},{refs:D,floatingStyles:K,placement:X,isPositioned:te,middlewareData:U}=Mae({strategy:"fixed",placement:M,whileElementsMounted:(...ne)=>wae(...ne,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[Tae({mainAxis:r+N,alignmentAxis:o}),l&&Oae({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Iae():void 0,...H}),l&&jae({...H}),Lae({...H,apply:({elements:ne,rects:Z,availableWidth:Ne,availableHeight:ze})=>{const{width:Ue,height:De}=Z.reference,Je=ne.floating.style;Je.setProperty("--radix-popper-available-width",`${Ne}px`),Je.setProperty("--radix-popper-available-height",`${ze}px`),Je.setProperty("--radix-popper-anchor-width",`${Ue}px`),Je.setProperty("--radix-popper-anchor-height",`${De}px`)}}),S&&$ae({element:S,padding:a}),Gae({arrowWidth:C,arrowHeight:N}),f&&Dae({strategy:"referenceHidden",...H})]}),[z,ie]=cF(X),ye=br(g);Qn(()=>{te&&(ye==null||ye())},[te,ye]);const J=(k=U.arrow)==null?void 0:k.x,le=(P=U.arrow)==null?void 0:P.y,F=((L=U.arrow)==null?void 0:L.centerOffset)!==0,[$,V]=b.useState();return Qn(()=>{y&&V(window.getComputedStyle(y).zIndex)},[y]),h.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:te?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$,"--radix-popper-transform-origin":[(R=U.transformOrigin)==null?void 0:R.x,(Y=U.transformOrigin)==null?void 0:Y.y].join(" "),...((G=U.hide)==null?void 0:G.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(Uae,{scope:n,placedSide:z,onArrowChange:_,arrowX:J,arrowY:le,shouldHideArrow:F,children:h.jsx(Ge.div,{"data-side":z,"data-align":ie,...m,ref:x,style:{...m.style,animation:te?void 0:"none"}})})})});oF.displayName=FE;var aF="PopperArrow",Hae={top:"bottom",right:"left",bottom:"top",left:"right"},lF=b.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=Vae(aF,i),o=Hae[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(zae,{...r,ref:n,style:{...r.style,display:"block"}})})});lF.displayName=aF;function Wae(t){return t!==null}var Gae=t=>({name:"transformOrigin",options:t,fn(e){var v,y,w;const{placement:n,rects:i,middlewareData:r}=e,o=((v=r.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=cF(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=r.arrow)==null?void 0:y.x)??0)+a/2,p=(((w=r.arrow)==null?void 0:w.y)??0)+l/2;let g="",m="";return c==="bottom"?(g=o?d:`${f}px`,m=`${-l}px`):c==="top"?(g=o?d:`${f}px`,m=`${i.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=o?d:`${p}px`):c==="left"&&(g=`${i.floating.width+l}px`,m=o?d:`${p}px`),{data:{x:g,y:m}}}});function cF(t){const[e,n="center"]=t.split("-");return[e,n]}var uF=iF,jb=sF,zE=oF,BE=lF,Kae="Portal",_m=b.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=b.useState(!1);Qn(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?BG.createPortal(h.jsx(Ge.div,{...i,ref:e}),o):null});_m.displayName=Kae;function UE(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var dF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),qae="VisuallyHidden",VE=b.forwardRef((t,e)=>h.jsx(Ge.span,{...t,ref:e,style:{...dF,...t.style}}));VE.displayName=qae;var Yae=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},hu=new WeakMap,Lg=new WeakMap,Dg={},Wx=0,fF=function(t){return t&&(t.host||fF(t.parentNode))},Xae=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=fF(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Jae=function(t,e,n,i){var r=Xae(e,Array.isArray(t)?t:[t]);Dg[n]||(Dg[n]=new WeakMap);var s=Dg[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),g=p!==null&&p!=="false",m=(hu.get(f)||0)+1,v=(s.get(f)||0)+1;hu.set(f,m),s.set(f,v),o.push(f),m===1&&g&&Lg.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),Wx++,function(){o.forEach(function(d){var f=hu.get(d)-1,p=s.get(d)-1;hu.set(d,f),s.set(d,p),f||(Lg.has(d)||d.removeAttribute(i),Lg.delete(d)),p||d.removeAttribute(n)}),Wx--,Wx||(hu=new WeakMap,hu=new WeakMap,Lg=new WeakMap,Dg={})}},hF=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=Yae(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),Jae(i,r,n,"aria-hidden")):function(){return null}},F0="right-scroll-bar-position",z0="width-before-scroll-bar",Zae="with-scroll-bars-hidden",Qae="--removed-body-scroll-bar-size";function Gx(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function ele(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var tle=typeof window<"u"?b.useLayoutEffect:b.useEffect,CR=new WeakMap;function nle(t,e){var n=ele(null,function(i){return t.forEach(function(r){return Gx(r,i)})});return tle(function(){var i=CR.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||Gx(a,null)}),s.forEach(function(a){r.has(a)||Gx(a,o)})}CR.set(n,t)},[t]),n}function ile(t){return t}function rle(t,e){e===void 0&&(e=ile);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function sle(t){t===void 0&&(t={});var e=rle(null);return e.options=Ws({async:!0,ssr:!1},t),e}var pF=function(t){var e=t.sideCar,n=mL(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return b.createElement(i,Ws({},n))};pF.isSideCarExport=!0;function ole(t,e){return t.useMedium(e),pF}var mF=sle(),Kx=function(){},Lb=b.forwardRef(function(t,e){var n=b.useRef(null),i=b.useState({onScrollCapture:Kx,onWheelCapture:Kx,onTouchMoveCapture:Kx}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noRelative,g=t.noIsolation,m=t.inert,v=t.allowPinchZoom,y=t.as,w=y===void 0?"div":y,x=t.gapMode,S=mL(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,E=nle([n,e]),C=Ws(Ws({},S),r);return b.createElement(b.Fragment,null,u&&b.createElement(_,{sideCar:mF,removeScrollBar:c,shards:d,noRelative:p,noIsolation:g,inert:m,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:x}),o?b.cloneElement(b.Children.only(a),Ws(Ws({},C),{ref:E})):b.createElement(w,Ws({},C,{className:l,ref:E}),a))});Lb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Lb.classNames={fullWidth:z0,zeroRight:F0};var ale=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lle(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=ale();return e&&t.setAttribute("nonce",e),t}function cle(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function ule(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var dle=function(){var t=0,e=null;return{add:function(n){t==0&&(e=lle())&&(cle(e,n),ule(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},fle=function(){var t=dle();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},gF=function(){var t=fle(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},hle={left:0,top:0,right:0,gap:0},qx=function(t){return parseInt(t||"",10)||0},ple=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[qx(n),qx(i),qx(r)]},mle=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return hle;var e=ple(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},gle=gF(),pd="data-scroll-locked",vle=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Zae,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(pd,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(F0,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(z0,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(F0," .").concat(F0,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(z0," .").concat(z0,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(pd,`] {
    `).concat(Qae,": ").concat(a,`px;
  }
`)},ER=function(){var t=parseInt(document.body.getAttribute(pd)||"0",10);return isFinite(t)?t:0},yle=function(){b.useEffect(function(){return document.body.setAttribute(pd,(ER()+1).toString()),function(){var t=ER()-1;t<=0?document.body.removeAttribute(pd):document.body.setAttribute(pd,t.toString())}},[])},ble=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;yle();var s=b.useMemo(function(){return mle(r)},[r]);return b.createElement(gle,{styles:vle(s,!e,r,n?"":"!important")})},yk=!1;if(typeof window<"u")try{var $g=Object.defineProperty({},"passive",{get:function(){return yk=!0,!0}});window.addEventListener("test",$g,$g),window.removeEventListener("test",$g,$g)}catch{yk=!1}var pu=yk?{passive:!1}:!1,wle=function(t){return t.tagName==="TEXTAREA"},vF=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!wle(t)&&n[e]==="visible")},xle=function(t){return vF(t,"overflowY")},Sle=function(t){return vF(t,"overflowX")},AR=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=yF(t,i);if(r){var s=bF(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},kle=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},_le=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},yF=function(t,e){return t==="v"?xle(e):Sle(e)},bF=function(t,e){return t==="v"?kle(e):_le(e)},Cle=function(t,e){return t==="h"&&e==="rtl"?-1:1},Ele=function(t,e,n,i,r){var s=Cle(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{if(!a)break;var p=bF(t,a),g=p[0],m=p[1],v=p[2],y=m-v-s*g;(g||y)&&yF(t,a)&&(d+=y,f+=g);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},Fg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},NR=function(t){return[t.deltaX,t.deltaY]},PR=function(t){return t&&"current"in t?t.current:t},Ale=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Nle=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Ple=0,mu=[];function Mle(t){var e=b.useRef([]),n=b.useRef([0,0]),i=b.useRef(),r=b.useState(Ple++)[0],s=b.useState(gF)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var m=qK([t.lockRef.current],(t.shards||[]).map(PR),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var y=Fg(m),w=n.current,x="deltaX"in m?m.deltaX:w[0]-y[0],S="deltaY"in m?m.deltaY:w[1]-y[1],_,E=m.target,C=Math.abs(x)>Math.abs(S)?"h":"v";if("touches"in m&&C==="h"&&E.type==="range")return!1;var N=AR(C,E);if(!N)return!0;if(N?_=C:(_=C==="v"?"h":"v",N=AR(C,E)),!N)return!1;if(!i.current&&"changedTouches"in m&&(x||S)&&(i.current=_),!_)return!0;var M=i.current||_;return Ele(M,v,m,M==="h"?x:S)},[]),l=b.useCallback(function(m){var v=m;if(!(!mu.length||mu[mu.length-1]!==s)){var y="deltaY"in v?NR(v):Fg(v),w=e.current.filter(function(_){return _.name===v.type&&(_.target===v.target||v.target===_.shadowParent)&&Ale(_.delta,y)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var x=(o.current.shards||[]).map(PR).filter(Boolean).filter(function(_){return _.contains(v.target)}),S=x.length>0?a(v,x[0]):!o.current.noIsolation;S&&v.cancelable&&v.preventDefault()}}},[]),c=b.useCallback(function(m,v,y,w){var x={name:m,delta:v,target:y,should:w,shadowParent:Rle(y)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(S){return S!==x})},1)},[]),u=b.useCallback(function(m){n.current=Fg(m),i.current=void 0},[]),d=b.useCallback(function(m){c(m.type,NR(m),m.target,a(m,t.lockRef.current))},[]),f=b.useCallback(function(m){c(m.type,Fg(m),m.target,a(m,t.lockRef.current))},[]);b.useEffect(function(){return mu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,pu),document.addEventListener("touchmove",l,pu),document.addEventListener("touchstart",u,pu),function(){mu=mu.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,pu),document.removeEventListener("touchmove",l,pu),document.removeEventListener("touchstart",u,pu)}},[]);var p=t.removeScrollBar,g=t.inert;return b.createElement(b.Fragment,null,g?b.createElement(s,{styles:Nle(r)}):null,p?b.createElement(ble,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Rle(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Tle=ole(mF,Mle);var Db=b.forwardRef(function(t,e){return b.createElement(Lb,Ws({},t,{ref:e,sideCar:Tle}))});Db.classNames=Lb.classNames;var Ole=[" ","Enter","ArrowUp","ArrowDown"],Ile=[" ","Enter"],Gc="Select",[$b,Fb,jle]=om(Gc),[pf,W0e]=_s(Gc,[jle,hf]),zb=hf(),[Lle,Tl]=pf(Gc),[Dle,$le]=pf(Gc),wF=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:p,form:g}=t,m=zb(e),[v,y]=b.useState(null),[w,x]=b.useState(null),[S,_]=b.useState(!1),E=Zy(c),[C,N]=ul({prop:i,defaultProp:r??!1,onChange:s,caller:Gc}),[M,j]=ul({prop:o,defaultProp:a,onChange:l,caller:Gc}),I=b.useRef(null),O=v?g||!!v.closest("form"):!0,[H,D]=b.useState(new Set),K=Array.from(H).map(X=>X.props.value).join(";");return h.jsx(uF,{...m,children:h.jsxs(Lle,{required:p,scope:e,trigger:v,onTriggerChange:y,valueNode:w,onValueNodeChange:x,valueNodeHasChildren:S,onValueNodeHasChildrenChange:_,contentId:sf(),value:M,onValueChange:j,open:C,onOpenChange:N,dir:E,triggerPointerDownPosRef:I,disabled:f,children:[h.jsx($b.Provider,{scope:e,children:h.jsx(Dle,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(X=>{D(te=>new Set(te).add(X))},[]),onNativeOptionRemove:b.useCallback(X=>{D(te=>{const U=new Set(te);return U.delete(X),U})},[]),children:n})}),O?h.jsxs(FF,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:M,onChange:X=>j(X.target.value),disabled:f,form:g,children:[M===void 0?h.jsx("option",{value:""}):null,Array.from(H)]},K):null]})})};wF.displayName=Gc;var xF="SelectTrigger",SF=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=zb(n),o=Tl(xF,n),a=o.disabled||i,l=lt(e,o.onTriggerChange),c=Fb(n),u=b.useRef("touch"),[d,f,p]=BF(m=>{const v=c().filter(x=>!x.disabled),y=v.find(x=>x.value===o.value),w=UF(v,m,y);w!==void 0&&o.onValueChange(w.value)}),g=m=>{a||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx(jb,{asChild:!0,...s,children:h.jsx(Ge.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":zF(o.value)?"":void 0,...r,ref:l,onClick:ve(r.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:ve(r.onPointerDown,m=>{u.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:ve(r.onKeyDown,m=>{const v=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(v&&m.key===" ")&&Ole.includes(m.key)&&(g(),m.preventDefault())})})})});SF.displayName=xF;var kF="SelectValue",_F=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=Tl(kF,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=lt(e,l.onValueNodeChange);return Qn(()=>{c(u)},[c,u]),h.jsx(Ge.span,{...a,ref:d,style:{pointerEvents:"none"},children:zF(l.value)?h.jsx(h.Fragment,{children:o}):s})});_F.displayName=kF;var Fle="SelectIcon",CF=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return h.jsx(Ge.span,{"aria-hidden":!0,...r,ref:e,children:i||"▼"})});CF.displayName=Fle;var zle="SelectPortal",EF=t=>h.jsx(_m,{asChild:!0,...t});EF.displayName=zle;var Kc="SelectContent",AF=b.forwardRef((t,e)=>{const n=Tl(Kc,t.__scopeSelect),[i,r]=b.useState();if(Qn(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?Pl.createPortal(h.jsx(NF,{scope:t.__scopeSelect,children:h.jsx($b.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),s):null}return h.jsx(PF,{...t,ref:e})});AF.displayName=Kc;var ts=10,[NF,Ol]=pf(Kc),Ble="SelectContentImpl",Ule=jd("SelectContent.RemoveScroll"),PF=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v,...y}=t,w=Tl(Kc,n),[x,S]=b.useState(null),[_,E]=b.useState(null),C=lt(e,k=>S(k)),[N,M]=b.useState(null),[j,I]=b.useState(null),O=Fb(n),[H,D]=b.useState(!1),K=b.useRef(!1);b.useEffect(()=>{if(x)return hF(x)},[x]),PE();const X=b.useCallback(k=>{const[P,...L]=O().map(G=>G.ref.current),[R]=L.slice(-1),Y=document.activeElement;for(const G of k)if(G===Y||(G==null||G.scrollIntoView({block:"nearest"}),G===P&&_&&(_.scrollTop=0),G===R&&_&&(_.scrollTop=_.scrollHeight),G==null||G.focus(),document.activeElement!==Y))return},[O,_]),te=b.useCallback(()=>X([N,x]),[X,N,x]);b.useEffect(()=>{H&&te()},[H,te]);const{onOpenChange:U,triggerPointerDownPosRef:z}=w;b.useEffect(()=>{if(x){let k={x:0,y:0};const P=R=>{var Y,G;k={x:Math.abs(Math.round(R.pageX)-(((Y=z.current)==null?void 0:Y.x)??0)),y:Math.abs(Math.round(R.pageY)-(((G=z.current)==null?void 0:G.y)??0))}},L=R=>{k.x<=10&&k.y<=10?R.preventDefault():x.contains(R.target)||U(!1),document.removeEventListener("pointermove",P),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",L,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",L,{capture:!0})}}},[x,U,z]),b.useEffect(()=>{const k=()=>U(!1);return window.addEventListener("blur",k),window.addEventListener("resize",k),()=>{window.removeEventListener("blur",k),window.removeEventListener("resize",k)}},[U]);const[ie,ye]=BF(k=>{const P=O().filter(Y=>!Y.disabled),L=P.find(Y=>Y.ref.current===document.activeElement),R=UF(P,k,L);R&&setTimeout(()=>R.ref.current.focus())}),J=b.useCallback((k,P,L)=>{const R=!K.current&&!L;(w.value!==void 0&&w.value===P||R)&&(M(k),R&&(K.current=!0))},[w.value]),le=b.useCallback(()=>x==null?void 0:x.focus(),[x]),F=b.useCallback((k,P,L)=>{const R=!K.current&&!L;(w.value!==void 0&&w.value===P||R)&&I(k)},[w.value]),$=i==="popper"?bk:MF,V=$===bk?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:v}:{};return h.jsx(NF,{scope:n,content:x,viewport:_,onViewportChange:E,itemRefCallback:J,selectedItem:N,onItemLeave:le,itemTextRefCallback:F,focusSelectedItem:te,selectedItemText:j,position:i,isPositioned:H,searchRef:ie,children:h.jsx(Db,{as:Ule,allowPinchZoom:!0,children:h.jsx(Rb,{asChild:!0,trapped:w.open,onMountAutoFocus:k=>{k.preventDefault()},onUnmountAutoFocus:ve(r,k=>{var P;(P=w.trigger)==null||P.focus({preventScroll:!0}),k.preventDefault()}),children:h.jsx(Sm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:k=>k.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:h.jsx($,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:k=>k.preventDefault(),...y,...V,onPlaced:()=>D(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ve(y.onKeyDown,k=>{const P=k.ctrlKey||k.altKey||k.metaKey;if(k.key==="Tab"&&k.preventDefault(),!P&&k.key.length===1&&ye(k.key),["ArrowUp","ArrowDown","Home","End"].includes(k.key)){let R=O().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(k.key)&&(R=R.slice().reverse()),["ArrowUp","ArrowDown"].includes(k.key)){const Y=k.target,G=R.indexOf(Y);R=R.slice(G+1)}setTimeout(()=>X(R)),k.preventDefault()}})})})})})})});PF.displayName=Ble;var Vle="SelectItemAlignedPosition",MF=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=Tl(Kc,n),o=Ol(Kc,n),[a,l]=b.useState(null),[c,u]=b.useState(null),d=lt(e,C=>u(C)),f=Fb(n),p=b.useRef(!1),g=b.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:y,focusSelectedItem:w}=o,x=b.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&v&&y){const C=s.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),M=s.valueNode.getBoundingClientRect(),j=y.getBoundingClientRect();if(s.dir!=="rtl"){const Y=j.left-N.left,G=M.left-Y,ne=C.left-G,Z=C.width+ne,Ne=Math.max(Z,N.width),ze=window.innerWidth-ts,Ue=ly(G,[ts,Math.max(ts,ze-Ne)]);a.style.minWidth=Z+"px",a.style.left=Ue+"px"}else{const Y=N.right-j.right,G=window.innerWidth-M.right-Y,ne=window.innerWidth-C.right-G,Z=C.width+ne,Ne=Math.max(Z,N.width),ze=window.innerWidth-ts,Ue=ly(G,[ts,Math.max(ts,ze-Ne)]);a.style.minWidth=Z+"px",a.style.right=Ue+"px"}const I=f(),O=window.innerHeight-ts*2,H=m.scrollHeight,D=window.getComputedStyle(c),K=parseInt(D.borderTopWidth,10),X=parseInt(D.paddingTop,10),te=parseInt(D.borderBottomWidth,10),U=parseInt(D.paddingBottom,10),z=K+X+H+U+te,ie=Math.min(v.offsetHeight*5,z),ye=window.getComputedStyle(m),J=parseInt(ye.paddingTop,10),le=parseInt(ye.paddingBottom,10),F=C.top+C.height/2-ts,$=O-F,V=v.offsetHeight/2,k=v.offsetTop+V,P=K+X+k,L=z-P;if(P<=F){const Y=I.length>0&&v===I[I.length-1].ref.current;a.style.bottom="0px";const G=c.clientHeight-m.offsetTop-m.offsetHeight,ne=Math.max($,V+(Y?le:0)+G+te),Z=P+ne;a.style.height=Z+"px"}else{const Y=I.length>0&&v===I[0].ref.current;a.style.top="0px";const ne=Math.max(F,K+m.offsetTop+(Y?J:0)+V)+L;a.style.height=ne+"px",m.scrollTop=P-F+m.offsetTop}a.style.margin=`${ts}px 0`,a.style.minHeight=ie+"px",a.style.maxHeight=O+"px",i==null||i(),requestAnimationFrame(()=>p.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,v,y,s.dir,i]);Qn(()=>x(),[x]);const[S,_]=b.useState();Qn(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const E=b.useCallback(C=>{C&&g.current===!0&&(x(),w==null||w(),g.current=!1)},[x,w]);return h.jsx(Wle,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:h.jsx(Ge.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});MF.displayName=Vle;var Hle="SelectPopperPosition",bk=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=ts,...s}=t,o=zb(n);return h.jsx(zE,{...o,...s,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});bk.displayName=Hle;var[Wle,HE]=pf(Kc,{}),wk="SelectViewport",RF=b.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,s=Ol(wk,n),o=HE(wk,n),a=lt(e,s.onViewportChange),l=b.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),h.jsx($b.Slot,{scope:n,children:h.jsx(Ge.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:ve(r.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const g=window.innerHeight-ts*2,m=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),y=Math.max(m,v);if(y<g){const w=y+p,x=Math.min(g,w),S=w-x;d.style.height=x+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});RF.displayName=wk;var TF="SelectGroup",[Gle,Kle]=pf(TF),qle=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=sf();return h.jsx(Gle,{scope:n,id:r,children:h.jsx(Ge.div,{role:"group","aria-labelledby":r,...i,ref:e})})});qle.displayName=TF;var OF="SelectLabel",Yle=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Kle(OF,n);return h.jsx(Ge.div,{id:r.id,...i,ref:e})});Yle.displayName=OF;var hy="SelectItem",[Xle,IF]=pf(hy),jF=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=Tl(hy,n),l=Ol(hy,n),c=a.value===i,[u,d]=b.useState(s??""),[f,p]=b.useState(!1),g=lt(e,w=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,w,i,r)}),m=sf(),v=b.useRef("touch"),y=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(Xle,{scope:n,value:i,disabled:r,textId:m,isSelected:c,onItemTextChange:b.useCallback(w=>{d(x=>x||((w==null?void 0:w.textContent)??"").trim())},[]),children:h.jsx($b.ItemSlot,{scope:n,value:i,disabled:r,textValue:u,children:h.jsx(Ge.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:g,onFocus:ve(o.onFocus,()=>p(!0)),onBlur:ve(o.onBlur,()=>p(!1)),onClick:ve(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:ve(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:ve(o.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:ve(o.onPointerMove,w=>{var x;v.current=w.pointerType,r?(x=l.onItemLeave)==null||x.call(l):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ve(o.onPointerLeave,w=>{var x;w.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:ve(o.onKeyDown,w=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&w.key===" "||(Ile.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});jF.displayName=hy;var gh="SelectItemText",LF=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=Tl(gh,n),a=Ol(gh,n),l=IF(gh,n),c=$le(gh,n),[u,d]=b.useState(null),f=lt(e,y=>d(y),l.onItemTextChange,y=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,y,l.value,l.disabled)}),p=u==null?void 0:u.textContent,g=b.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=c;return Qn(()=>(m(g),()=>v(g)),[m,v,g]),h.jsxs(h.Fragment,{children:[h.jsx(Ge.span,{id:l.textId,...s,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Pl.createPortal(s.children,o.valueNode):null]})});LF.displayName=gh;var DF="SelectItemIndicator",Jle=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return IF(DF,n).isSelected?h.jsx(Ge.span,{"aria-hidden":!0,...i,ref:e}):null});Jle.displayName=DF;var xk="SelectScrollUpButton",Zle=b.forwardRef((t,e)=>{const n=Ol(xk,t.__scopeSelect),i=HE(xk,t.__scopeSelect),[r,s]=b.useState(!1),o=lt(e,i.onScrollButtonChange);return Qn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx($F,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});Zle.displayName=xk;var Sk="SelectScrollDownButton",Qle=b.forwardRef((t,e)=>{const n=Ol(Sk,t.__scopeSelect),i=HE(Sk,t.__scopeSelect),[r,s]=b.useState(!1),o=lt(e,i.onScrollButtonChange);return Qn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx($F,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});Qle.displayName=Sk;var $F=b.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,s=Ol("SelectScrollButton",n),o=b.useRef(null),a=Fb(n),l=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>l(),[l]),Qn(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(Ge.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:ve(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:ve(r.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:ve(r.onPointerLeave,()=>{l()})})}),ece="SelectSeparator",tce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return h.jsx(Ge.div,{"aria-hidden":!0,...i,ref:e})});tce.displayName=ece;var kk="SelectArrow",nce=b.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=zb(n),s=Tl(kk,n),o=Ol(kk,n);return s.open&&o.position==="popper"?h.jsx(BE,{...r,...i,ref:e}):null});nce.displayName=kk;var ice="SelectBubbleInput",FF=b.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const r=b.useRef(null),s=lt(i,r),o=UE(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(Ge.select,{...n,style:{...dF,...n.style},ref:s,defaultValue:e})});FF.displayName=ice;function zF(t){return t===""||t===void 0}function BF(t){const e=br(t),n=b.useRef(""),i=b.useRef(0),r=b.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=b.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function UF(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=rce(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function rce(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var sce=wF,VF=SF,oce=_F,ace=CF,lce=EF,HF=AF,cce=RF,WF=jF,uce=LF;const zf=sce,Bf=oce,Cu=b.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(VF,{ref:i,className:Q("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,h.jsx(ace,{asChild:!0,children:h.jsx("span",{className:"icon-[lucide--chevron-down] size-4 opacity-50"})})]}));Cu.displayName=VF.displayName;const Eu=b.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>h.jsx(lce,{children:h.jsx(HF,{ref:r,className:Q("relative z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:h.jsx(cce,{className:"p-1",children:e})})}));Eu.displayName=HF.displayName;const Ri=b.forwardRef(({className:t,children:e,...n},i)=>h.jsx(WF,{ref:i,className:Q("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:h.jsx(uce,{children:e})}));Ri.displayName=WF.displayName;var GF=["PageUp","PageDown"],KF=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],qF={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},mf="Slider",[_k,dce,fce]=om(mf),[YF,G0e]=_s(mf,[fce]),[hce,Bb]=YF(mf),XF=b.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[i],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:g,...m}=t,v=b.useRef(new Set),y=b.useRef(0),x=o==="horizontal"?pce:mce,[S=[],_]=ul({prop:u,defaultProp:c,onChange:I=>{var H;(H=[...v.current][y.current])==null||H.focus(),d(I)}}),E=b.useRef(S);function C(I){const O=wce(S,I);j(I,O)}function N(I){j(I,y.current)}function M(){const I=E.current[y.current];S[y.current]!==I&&f(S)}function j(I,O,{commit:H}={commit:!1}){const D=_ce(s),K=Cce(Math.round((I-i)/s)*s+i,D),X=ly(K,[i,r]);_((te=[])=>{const U=yce(te,X,O);if(kce(U,l*s)){y.current=U.indexOf(X);const z=String(U)!==String(te);return z&&H&&f(U),z?U:te}else return te})}return h.jsx(hce,{scope:t.__scopeSlider,name:n,disabled:a,min:i,max:r,valueIndexToChangeRef:y,thumbs:v.current,values:S,orientation:o,form:g,children:h.jsx(_k.Provider,{scope:t.__scopeSlider,children:h.jsx(_k.Slot,{scope:t.__scopeSlider,children:h.jsx(x,{"aria-disabled":a,"data-disabled":a?"":void 0,...m,ref:e,onPointerDown:ve(m.onPointerDown,()=>{a||(E.current=S)}),min:i,max:r,inverted:p,onSlideStart:a?void 0:C,onSlideMove:a?void 0:N,onSlideEnd:a?void 0:M,onHomeKeyDown:()=>!a&&j(i,0,{commit:!0}),onEndKeyDown:()=>!a&&j(r,S.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:O})=>{if(!a){const K=GF.includes(I.key)||I.shiftKey&&KF.includes(I.key)?10:1,X=y.current,te=S[X],U=s*K*O;j(te+U,X,{commit:!0})}}})})})})});XF.displayName=mf;var[JF,ZF]=YF(mf,{startEdge:"left",endEdge:"right",size:"width",direction:1}),pce=b.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=b.useState(null),p=lt(e,x=>f(x)),g=b.useRef(void 0),m=Zy(r),v=m==="ltr",y=v&&!s||!v&&s;function w(x){const S=g.current||d.getBoundingClientRect(),_=[0,S.width],C=WE(_,y?[n,i]:[i,n]);return g.current=S,C(x-S.left)}return h.jsx(JF,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:h.jsx(QF,{dir:m,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const S=w(x.clientX);o==null||o(S)},onSlideMove:x=>{const S=w(x.clientX);a==null||a(S)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:x=>{const _=qF[y?"from-left":"from-right"].includes(x.key);c==null||c({event:x,direction:_?-1:1})}})})}),mce=b.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=b.useRef(null),d=lt(e,u),f=b.useRef(void 0),p=!r;function g(m){const v=f.current||u.current.getBoundingClientRect(),y=[0,v.height],x=WE(y,p?[i,n]:[n,i]);return f.current=v,x(m-v.top)}return h.jsx(JF,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:h.jsx(QF,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const v=g(m.clientY);s==null||s(v)},onSlideMove:m=>{const v=g(m.clientY);o==null||o(v)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:m=>{const y=qF[p?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:y?-1:1})}})})}),QF=b.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=Bb(mf,n);return h.jsx(Ge.span,{...c,ref:e,onKeyDown:ve(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):GF.concat(KF).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ve(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():i(d)}),onPointerMove:ve(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:ve(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})})}),e9="SliderTrack",t9=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Bb(e9,n);return h.jsx(Ge.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});t9.displayName=e9;var Ck="SliderRange",n9=b.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=Bb(Ck,n),s=ZF(Ck,n),o=b.useRef(null),a=lt(e,o),l=r.values.length,c=r.values.map(f=>s9(f,r.min,r.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return h.jsx(Ge.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});n9.displayName=Ck;var Ek="SliderThumb",i9=b.forwardRef((t,e)=>{const n=dce(t.__scopeSlider),[i,r]=b.useState(null),s=lt(e,a=>r(a)),o=b.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return h.jsx(gce,{...t,ref:s,index:o})}),gce=b.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,name:r,...s}=t,o=Bb(Ek,n),a=ZF(Ek,n),[l,c]=b.useState(null),u=lt(e,w=>c(w)),d=l?o.form||!!l.closest("form"):!0,f=DE(l),p=o.values[i],g=p===void 0?0:s9(p,o.min,o.max),m=bce(i,o.values.length),v=f==null?void 0:f[a.size],y=v?xce(v,g,a.direction):0;return b.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${g}% + ${y}px)`},children:[h.jsx(_k.ItemSlot,{scope:t.__scopeSlider,children:h.jsx(Ge.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:ve(t.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),d&&h.jsx(r9,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},i)]})});i9.displayName=Ek;var vce="RadioBubbleInput",r9=b.forwardRef(({__scopeSlider:t,value:e,...n},i)=>{const r=b.useRef(null),s=lt(r,i),o=UE(e);return b.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(Ge.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});r9.displayName=vce;function yce(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function s9(t,e,n){const s=100/(n-e)*(t-e);return ly(s,[0,100])}function bce(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function wce(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function xce(t,e,n){const i=t/2,s=WE([0,50],[0,i]);return(i-s(e)*n)*n}function Sce(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function kce(t,e){if(e>0){const n=Sce(t);return Math.min(...n)>=e}return!0}function WE(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function _ce(t){return(String(t).split(".")[1]||"").length}function Cce(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var o9=XF,Ece=t9,Ace=n9,Nce=i9;const lc=b.forwardRef(({className:t,...e},n)=>h.jsxs(o9,{ref:n,className:Q("relative flex touch-none select-none items-center",t),...e,children:[h.jsx(Ece,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:h.jsx(Ace,{className:"absolute h-full bg-mantis-400"})}),h.jsx(Nce,{className:"block size-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));lc.displayName=o9.displayName;var Ub="Switch",[Pce,K0e]=_s(Ub),[Mce,Rce]=Pce(Ub),a9=b.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,p]=b.useState(null),g=lt(e,x=>p(x)),m=b.useRef(!1),v=f?u||!!f.closest("form"):!0,[y,w]=ul({prop:r,defaultProp:s??!1,onChange:c,caller:Ub});return h.jsxs(Mce,{scope:n,checked:y,disabled:a,children:[h.jsx(Ge.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":d9(y),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:g,onClick:ve(t.onClick,x=>{w(S=>!S),v&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})}),v&&h.jsx(u9,{control:f,bubbles:!m.current,name:i,value:l,checked:y,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});a9.displayName=Ub;var l9="SwitchThumb",c9=b.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=Rce(l9,n);return h.jsx(Ge.span,{"data-state":d9(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})});c9.displayName=l9;var Tce="SwitchBubbleInput",u9=b.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:i=!0,...r},s)=>{const o=b.useRef(null),a=lt(o,s),l=UE(n),c=DE(e);return b.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&p){const g=new Event("click",{bubbles:i});p.call(u,n),u.dispatchEvent(g)}},[l,n,i]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:a,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});u9.displayName=Tce;function d9(t){return t?"checked":"unchecked"}var f9=a9,Oce=c9;const Sa=b.forwardRef(({className:t,...e},n)=>h.jsx(f9,{className:Q("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:h.jsx(Oce,{className:Q("pointer-events-none block size-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Sa.displayName=f9.displayName;const Vb=ue(!1);function Ice(t){return(1e3/t).toFixed(1)}function h9({className:t}){const e=Xt(),[n,i]=af(),{status:r}=$n();return h.jsxs("div",{className:Q("overflow-auto scrollbar-stone-700",t),children:[h.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[h.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),h.jsxs(Ei,{children:[h.jsxs(Ai,{children:[h.jsxs(Ni,{children:[h.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),h.jsx(gu,{children:e("settings.animations.description")})]}),h.jsx(Sa,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&lE()}})]}),h.jsxs(Ei,{children:[h.jsx(Ai,{children:h.jsxs(Ni,{children:[h.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),h.jsx(lc,{className:"w-44",...MR({value:n.executionUnit,onValueChange:s=>i(o=>({...o,executionUnit:s})),min:500,max:1})})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(Ei,{children:[h.jsx(Ai,{children:h.jsx(Ni,{children:e("settings.instructionCycle.label")})}),h.jsx(Sa,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>i(o=>({...o,showInstructionCycle:s}))})]}),h.jsxs(Ei,{children:[h.jsx(Ai,{children:h.jsx(Ni,{children:e("settings.statsCPU.label")})}),h.jsx(Sa,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>i(o=>({...o,showStatsCPU:s}))})]}),h.jsxs(Ei,{children:[h.jsxs(Ai,{children:[h.jsxs(Ni,{children:[h.jsx("span",{className:"icon-[lucide--cpu] size-6"}),"Velocidad CPU (Hz)"]}),h.jsx(gu,{children:"Velocidad del procesador. Determina el tiempo de ciclo de la CPU."})]}),h.jsxs(zf,{value:n.cpuSpeed,onValueChange:s=>i(o=>({...o,cpuSpeed:s})),children:[h.jsx(Cu,{className:"w-32",children:h.jsx(Bf,{})}),h.jsxs(Eu,{children:[h.jsx(Ri,{value:"1",title:"1 Hz = 1 segundo por ciclo - Muy lenta",children:"1 Hz (1.0s)"}),h.jsx(Ri,{value:"2",title:"2 Hz = 0.5 segundos por ciclo - Lenta",children:"2 Hz (0.5s)"}),h.jsx(Ri,{value:"4",title:"4 Hz = 0.25 segundos por ciclo - Normal",children:"4 Hz (0.25s)"}),h.jsx(Ri,{value:"10",title:"10 Hz = 0.1 segundos por ciclo - Rápida",children:"10 Hz (0.1s)"})]})]})]}),h.jsxs(Ei,{children:[h.jsxs(Ai,{children:[h.jsxs(Ni,{children:[h.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),h.jsx(gu,{children:e("settings.flags.description")})]}),h.jsxs(zf,{value:n.flagsVisibility,onValueChange:s=>i(o=>({...o,flagsVisibility:s})),children:[h.jsx(Cu,{className:"w-32",children:h.jsx(Bf,{})}),h.jsxs(Eu,{children:[h.jsx(Ri,{value:"CF_ZF",children:"C Z"}),h.jsx(Ri,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(Ei,{children:h.jsxs(Ai,{children:[h.jsxs(Ni,{children:[h.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),h.jsx(gu,{children:e("settings.devices.description")})]})}),h.jsxs(Ei,{children:[h.jsx(Ai,{children:h.jsx(Ni,{children:e("settings.devices.keyboard-and-screen")})}),h.jsx(Sa,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),h.jsxs(Ei,{children:[h.jsxs(Ai,{children:[h.jsx(Ni,{children:e("settings.devices.pic.label")}),h.jsx(gu,{children:e("settings.devices.pic.description")})]}),h.jsx(Sa,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,pic:s}}))})]}),h.jsxs(Ei,{children:[h.jsx(Ai,{children:h.jsx(Ni,{children:e("settings.devices.pio.label")})}),h.jsxs(zf,{value:n.devices.pio??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[h.jsx(Cu,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(Bf,{})}),h.jsx(Eu,{children:MJ.map(s=>h.jsx(Ri,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),h.jsxs(Ei,{children:[h.jsx(Ai,{children:h.jsx(Ni,{children:e("settings.devices.handshake.label")})}),h.jsxs(zf,{value:n.devices.handshake??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:r.type!=="stopped",children:[h.jsx(Cu,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(Bf,{})}),h.jsx(Eu,{children:RJ.map(s=>h.jsx(Ri,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),(n.devices.pio==="printer"||n.devices.handshake==="printer")&&h.jsxs(Ei,{children:[h.jsx(Ai,{children:h.jsxs(Ni,{children:[h.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),h.jsx(lc,{className:"w-44",...MR({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),n.devices.pic&&h.jsxs(Ei,{children:[h.jsx(Ai,{children:h.jsxs(Ni,{children:[h.jsx("span",{className:"icon-[lucide--timer] size-6"}),"Frecuencia del Timer"]})}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs(zf,{value:n.clockSpeed.toString(),onValueChange:s=>i(o=>({...o,clockSpeed:parseInt(s)})),children:[h.jsx(Cu,{className:"w-40",children:h.jsx(Bf,{})}),h.jsxs(Eu,{children:[h.jsx(Ri,{value:"100",title:"Timer muy frecuente - Interrupciones cada 0.1 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Muy Frecuente"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.1s"})]})}),h.jsx(Ri,{value:"400",title:"Timer frecuente - Interrupciones cada 0.4 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Frecuente"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.4s"})]})}),h.jsx(Ri,{value:"600",title:"Timer normal - Interrupciones cada 0.6 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Normal"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.6s"})]})}),h.jsx(Ri,{value:"800",title:"Timer lento - Interrupciones cada 0.8 segundos",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Lento"}),h.jsx("span",{className:"text-xs text-stone-400",children:"0.8s"})]})}),h.jsx(Ri,{value:"1000",title:"Timer muy lento - Interrupciones cada 1 segundo",children:h.jsxs("div",{className:"flex w-full items-center justify-between",children:[h.jsx("span",{children:"Muy Lento"}),h.jsx("span",{className:"text-xs text-stone-400",children:"1.0s"})]})})]})]}),h.jsxs("div",{className:"flex items-center gap-1 text-xs text-stone-400",children:[h.jsx("span",{className:"icon-[lucide--info] size-4"}),h.jsxs("span",{children:["Frecuencia: ",Ice(n.clockSpeed)," Hz"]})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(Ei,{children:[h.jsxs(Ai,{children:[h.jsxs(Ni,{children:[h.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),h.jsxs(gu,{children:[e("settings.filters.description"),h.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:Su.filterBightness,filterContrast:Su.filterContrast,filterInvert:Su.filterInvert,filterSaturation:Su.filterSaturation})),children:e("settings.filters.revert")})]})]}),h.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[h.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),h.jsx(lc,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),h.jsx(lc,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),h.jsx(Sa,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),h.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),h.jsx(lc,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("div",{className:"flex justify-end p-4",children:h.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...Su,language:s.language,devices:s.devices})),children:[h.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function Ei({children:t}){return h.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Ai({children:t}){return h.jsx("div",{className:"grow",children:t})}function Ni({children:t}){return h.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function gu({children:t}){return h.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function MR({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}const jce=()=>({handleShowTour:b.useCallback(()=>{window.startWelcomeTour?window.startWelcomeTour():(localStorage.removeItem("vonsim8-tour-completed"),window.location.reload())},[])}),Ak=b.memo(({status:t,isMobile:e,isCompact:n})=>{const i=it(si),[r,s]=b.useState(null),[o,a]=b.useState(!1),l=b.useMemo(()=>{switch(t.type){case"running":return"Ejecutando";case"paused":return"Pausado";default:return"Detenido"}},[t.type]),c=b.useMemo(()=>{switch(t.type){case"running":return"bg-green-600";case"paused":return"bg-yellow-600";default:return"bg-stone-600"}},[t.type]);b.useEffect(()=>{if(i&&i.phase&&i.phase!==r){s(i.phase),a(!0);const p=setTimeout(()=>{a(!1)},800);return()=>clearTimeout(p)}},[i,r]);const u=b.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"Captación";case"fetching-operands":return"Obtención de operandos";case"fetching-operands-completed":return"Operandos obtenidos";case"executing":return"Ejecución";case"writeback":return"Escritura";case"interrupt":return"Interrupción";case"int6":case"int7":return"Interrupción";case"halting":return"Detener CPU";default:return""}},[i,t.type]),d=b.useMemo(()=>{if(!i||t.type!=="running"&&i.phase!=="halting")return"";switch(i.phase){case"fetching":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"fetching-operands":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"fetching-operands-completed":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"executing":return"bg-green-500/20 text-green-400 border-green-500/30";case"writeback":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"interrupt":return"bg-red-500/20 text-red-400 border-red-500/30";case"int6":case"int7":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"halting":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-stone-500/20 text-stone-400 border-stone-500/30"}},[i,t.type]),f=b.useMemo(()=>{if(!o||!i)return"";switch(i.phase){case"fetching":return"animate-phase-pulse-blue";case"fetching-operands":return"animate-phase-pulse-yellow";case"fetching-operands-completed":return"animate-phase-pulse-yellow";case"executing":return"animate-phase-pulse-green";case"writeback":return"animate-phase-pulse-purple";case"interrupt":return"animate-phase-pulse-red";case"int6":case"int7":return"animate-phase-pulse-orange";case"halting":return"animate-phase-pulse-red";default:return"animate-phase-pulse-stone"}},[o,i]);return h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:Q("flex items-center gap-1.5 rounded-full px-2 py-1 font-medium text-white",c,t.type==="running"&&"animate-pulse-glow",e&&"px-1.5 py-0.5",n&&"px-1 py-0.5"),children:[h.jsx("div",{className:Q("size-2 rounded-full",t.type==="running"?"bg-green-300":t.type==="paused"?"bg-yellow-300":"bg-stone-300")}),!e&&!n&&l]}),(t.type==="running"||i&&i.phase==="halting")&&u&&h.jsxs("div",{className:Q("rounded-xl border text-[10px] font-semibold uppercase tracking-wider backdrop-blur-sm transition-all duration-200 ease-in-out",d,f,e?"flex min-h-[20px] items-center justify-center whitespace-nowrap px-2 py-0.5 text-[8px]":n?"flex min-h-[18px] items-center justify-center whitespace-nowrap px-1.5 py-0.5 text-[8px]":"px-2 py-1"),children:[u," "]})]})});Ak.displayName="SimulationStatus";const p9=b.memo(({onShowTour:t,onToggleSettings:e,settingsOpen:n,onToggleEducational:i,educationalOpen:r})=>{const s=Xt();return h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx($$,{}),h.jsx(gr,{content:"Centro de aprendizaje",position:"bottom",children:h.jsx(S0,{icon:h.jsx(Le,{icon:fm,className:"size-4"}),onClick:i,variant:r?"secondary":"ghost",size:"md","aria-label":"Centro de aprendizaje",className:Q("hover-lift",r&&"animate-pulse-glow"),"data-testid":"educational-button"})}),h.jsx(gr,{content:"Mostrar tour de bienvenida",position:"bottom",children:h.jsx(S0,{icon:h.jsx(Le,{icon:IX,className:"size-4"}),onClick:t,variant:"ghost",size:"md","aria-label":"Mostrar tour de bienvenida",className:"hover-lift"})}),h.jsx(gr,{content:s("settings.title"),position:"bottom",children:h.jsx(S0,{icon:h.jsx("span",{className:"icon-[lucide--settings] block size-5"}),onClick:e,variant:n?"secondary":"ghost",size:"md","aria-label":s("settings.title"),className:Q("hover-lift",n&&"animate-pulse-glow"),"data-testid":"settings-button"})})]})});p9.displayName="ActionButtons";const m9=b.memo(()=>{const[t,e]=lm(Vb),[n,i]=b.useState(!1),[r,s]=b.useState(!1),{status:o}=$n(),{handleShowTour:a}=jce(),[l,c]=b.useState("desktop");b.useEffect(()=>{const v=()=>{const y=window.innerWidth;y<=480?c("mobile"):y<=768?c("compact"):y<=1024?c("tablet"):c("desktop")};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const u=b.useCallback(()=>{e(v=>!v)},[e]),d=b.useCallback(()=>{i(v=>!v)},[]),f=b.useCallback(()=>{s(v=>!v)},[]),p=b.useMemo(()=>h.jsxs("div",{className:"hover-scale flex select-none items-center justify-center",children:[h.jsxs("div",{className:"group relative flex size-10 items-center justify-center overflow-hidden rounded-xl bg-gradient-to-br from-mantis-500 to-mantis-600 shadow-lg hover:scale-105",children:[h.jsx("div",{className:"absolute inset-0 opacity-10",children:h.jsx("div",{className:"size-full bg-[radial-gradient(circle_at_30%_30%,rgba(255,255,255,0.1)_1px,transparent_1px),radial-gradient(circle_at_70%_70%,rgba(255,255,255,0.1)_1px,transparent_1px)] bg-[length:8px_8px]"})}),h.jsx("div",{className:"relative z-10 flex items-center justify-center",children:h.jsx("span",{className:"text-lg font-bold tracking-tight text-white",children:"V8"})}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/10 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),h.jsx("div",{className:"absolute -right-0.5 -top-0.5 size-2 animate-pulse rounded-full bg-mantis-300"})]}),h.jsxs("div",{className:"ml-3 flex flex-col",children:[h.jsxs("h1",{className:"text-lg font-bold max-sm:hidden",children:["Von",h.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]}),h.jsx("span",{className:"text-xs text-stone-400 max-sm:hidden",children:"Simulador CPU 8-bit"})]})]}),[]),m=(()=>{switch(l){case"mobile":return{gridCols:"grid-cols-2",showStatusLeft:!0,showStatusCenter:!1,showActionButtons:!1,isCompact:!0,isMobile:!0};case"compact":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!1,isCompact:!0,isMobile:!1};case"tablet":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1};case"desktop":return{gridCols:"grid-cols-3",showStatusLeft:!1,showStatusCenter:!0,showActionButtons:!0,isCompact:!1,isMobile:!1}}})();return h.jsxs(h.Fragment,{children:[h.jsx("header",{className:Q("relative bg-black text-sm text-white",l==="mobile"?"header-mobile p-2":l==="compact"?"header-compact p-2":l==="tablet"?"header-tablet p-2":"p-2"),"data-testid":"header",children:h.jsxs("div",{className:Q("grid items-center",m.gridCols),children:[h.jsxs("div",{className:"flex items-center gap-3",children:[p,m.showStatusLeft&&h.jsx(Ak,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})]}),m.showStatusCenter&&h.jsx("div",{className:"flex justify-center",children:h.jsx(Ak,{status:o,isMobile:m.isMobile,isCompact:m.isCompact})}),h.jsxs("div",{className:"flex items-center justify-end gap-6",children:[h.jsx("div",{className:"flex justify-end",children:h.jsx(ooe,{})}),m.showActionButtons&&h.jsx(p9,{onShowTour:a,onToggleSettings:u,settingsOpen:t,onToggleEducational:d,educationalOpen:n})]})]})}),!m.isMobile&&n&&h.jsx(O$,{isOpen:n,onClose:()=>i(!1),onShowProgress:f}),!m.isMobile&&r&&h.jsx(I$,{isVisible:r,onClose:()=>s(!1)})]})});m9.displayName="Header";const Lce=[{key:"F7",description:"Ejecutar un ciclo",category:"Simulación"},{key:"F8",description:"Ejecutar una instrucción completa",category:"Simulación"},{key:"F4",description:"Ejecución infinita",category:"Simulación"},{key:"F9",description:"Resetear simulación",category:"Simulación"},{key:"Espacio",description:"Pausar/Reanudar (cuando está ejecutando)",category:"Simulación"},{key:"Ctrl+S",description:"Guardar archivo",category:"Editor"},{key:"Ctrl+O",description:"Abrir archivo",category:"Editor"},{key:"Ctrl+N",description:"Nuevo archivo",category:"Editor"},{key:"Ctrl+Z",description:"Deshacer",category:"Editor"},{key:"Ctrl+Y",description:"Rehacer",category:"Editor"},{key:"Ctrl+F",description:"Buscar",category:"Editor"},{key:"Ctrl+H",description:"Reemplazar",category:"Editor"},{key:"Tab",description:"Indentar",category:"Editor"},{key:"Shift+Tab",description:"Desindentar",category:"Editor"},{key:"F1",description:"Mostrar atajos de teclado",category:"Navegación"},{key:"F2",description:"Abrir configuración",category:"Navegación"},{key:"F3",description:"Buscar en el código",category:"Navegación"},{key:"F5",description:"Actualizar página",category:"Navegación"},{key:"F6",description:"Cambiar foco al editor",category:"Navegación"},{key:"Escape",description:"Cerrar diálogos",category:"Interfaz"},{key:"Ctrl+Shift+P",description:"Paleta de comandos",category:"Interfaz"},{key:"Ctrl+B",description:"Mostrar/ocultar barra lateral",category:"Interfaz"},{key:"Ctrl+J",description:"Mostrar/ocultar terminal",category:"Interfaz"},{key:"Ctrl++",description:"Zoom in",category:"Vista"},{key:"Ctrl+-",description:"Zoom out",category:"Vista"},{key:"Ctrl+0",description:"Resetear zoom",category:"Vista"},{key:"Ctrl+Shift+Z",description:"Zoom a la selección",category:"Vista"},{key:"F12",description:"Herramientas de desarrollador",category:"Desarrollo"},{key:"Ctrl+Shift+I",description:"Inspeccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+C",description:"Seleccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+J",description:"Consola",category:"Desarrollo"},{key:"Ctrl+Shift+M",description:"Vista móvil",category:"Desarrollo"}],Dce=()=>{const[t,e]=b.useState(!1),n=b.useCallback(()=>{e(!0)},[]),i=b.useCallback(()=>{e(!1)},[]);return b.useEffect(()=>{const r=s=>{s.key==="F1"&&(s.preventDefault(),n())};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n]),{isOpen:t,openModal:n,closeModal:i}},$ce=()=>b.useMemo(()=>{const t=Lce.reduce((e,n)=>(e[n.category]||(e[n.category]=[]),e[n.category].push(n),e),{});return Object.entries(t).sort(([e],[n])=>e.localeCompare(n))},[]),g9=b.memo(({shortcut:t})=>h.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-stone-800 p-3 transition-colors hover:bg-stone-700",children:[h.jsx("span",{className:"text-sm text-stone-300",children:t.description}),h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-2 py-1 font-mono text-xs text-white",children:t.key})]}));g9.displayName="ShortcutItem";const v9=b.memo(({category:t,shortcuts:e})=>h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"border-b border-stone-600 pb-2 text-lg font-semibold text-mantis-400",children:t}),h.jsx("div",{className:"space-y-2",children:e.map((n,i)=>h.jsx(g9,{shortcut:n},`${t}-${i}`))})]}));v9.displayName="ShortcutCategory";const y9=b.memo(()=>{const{isOpen:t,closeModal:e}=Dce(),n=$ce(),i=b.useCallback(s=>{s.target===s.currentTarget&&e()},[e]),r=b.useCallback(s=>{s.key==="Escape"&&e()},[e]);return b.useEffect(()=>{if(t)return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t,r]),t?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:i,children:h.jsxs("div",{className:"max-h-[80vh] w-full max-w-4xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"icon-[lucide--keyboard] size-6 text-mantis-400"}),h.jsx("h2",{className:"text-xl font-semibold text-white",children:"Atajos de Teclado"})]}),h.jsx("button",{onClick:e,className:"rounded p-2 text-stone-400 transition-colors hover:text-white",children:h.jsx(Le,{icon:dm,size:"lg"})})]}),h.jsx("div",{className:"max-h-[calc(80vh-80px)] overflow-y-auto p-4",children:h.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:n.map(([s,o])=>h.jsx(v9,{category:s,shortcuts:o},s))})}),h.jsx("div",{className:"border-t border-stone-600 bg-stone-800 p-4",children:h.jsxs("div",{className:"flex items-center justify-between text-sm text-stone-400",children:[h.jsxs("span",{children:["Presiona"," ",h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-1 py-0.5 font-mono text-xs",children:"F1"})," ","para abrir este diálogo"]}),h.jsx(ht,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"Cerrar"})]})})]})}):null});y9.displayName="KeyboardShortcuts";function Fce(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await _D(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:e}).then(d=>{s?s("/VonSim8/sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const b9=()=>{const t=NE(),e=b.useMemo(()=>(t==null?void 0:t.addNotification)||(()=>{}),[t==null?void 0:t.addNotification]),[n,i]=b.useState({available:!1,updating:!1,lastUpdate:null}),r=b.useRef(null);return b.useEffect(()=>{const s=Fce({onNeedRefresh(){i(c=>({...c,available:!0})),e({type:"info",title:"Nueva versión disponible",message:"Hay una nueva versión de VonSim8 disponible. Haz clic en 'Actualizar' para aplicar los cambios."}),typeof window<"u"&&window.VonSimAddNotification&&window.VonSimAddNotification({type:"info",title:"Actualización disponible",message:"Una nueva versión está lista para instalar."})},onOfflineReady(){e({type:"success",title:"Modo offline disponible",message:"VonSim8 ahora está disponible para uso offline."})},onRegistered(c){console.log("Service Worker registrado:",c),c.waiting&&i(u=>({...u,available:!0}))},onRegisterError(c){console.error("Error al registrar Service Worker:",c),e({type:"error",title:"Error de actualización",message:"No se pudo configurar la actualización automática. Algunas funciones pueden no estar disponibles."})}});r.current=s;const o=async()=>{if(r.current){i(c=>({...c,updating:!0}));try{r.current(),i(c=>({...c,available:!1,updating:!1,lastUpdate:new Date})),e({type:"success",title:"Actualización aplicada",message:"La nueva versión se ha aplicado correctamente."})}catch(c){console.error("Error al actualizar:",c),i(u=>({...u,updating:!1})),e({type:"error",title:"Error al actualizar",message:"No se pudo aplicar la actualización. Inténtalo de nuevo."})}}};window.updateVonSim8=o;const a=()=>{r.current&&r.current()};window.checkVonSim8Updates=a;const l=setInterval(a,5*60*1e3);return()=>{delete window.updateVonSim8,delete window.checkVonSim8Updates,clearInterval(l)}},[e]),{updateInfo:n,updateApp:()=>{r.current&&r.current()},checkForUpdates:()=>{r.current&&r.current()}}},RR="vonsim8-commit-hash",zce=5*60*1e3,w9=()=>{const t=NE(),e=b.useMemo(()=>(t==null?void 0:t.addNotification)||(()=>{}),[t==null?void 0:t.addNotification]),[n,i]=b.useState({currentHash:"e2bc0e2",lastKnownHash:null,hasUpdate:!1,lastCheck:null}),r=b.useCallback(()=>{try{const a=localStorage.getItem(RR),l="e2bc0e2";return i(c=>({...c,currentHash:l,lastKnownHash:a,lastCheck:new Date})),a&&a!==l?(i(c=>({...c,hasUpdate:!0})),e({type:"info",title:"Nueva versión detectada",message:`Se ha detectado una nueva versión de VonSim8 (${l.substring(0,7)}). Recarga la página para actualizar.`}),!0):!1}catch(a){return console.warn("Error checking version update:",a),!1}},[e]),s=b.useCallback(()=>{try{localStorage.setItem(RR,"e2bc0e2")}catch(a){console.warn("Error saving version hash before reload:",a)}window.location.reload()},[]),o=b.useCallback(()=>{i(a=>({...a,hasUpdate:!1}))},[]);return b.useEffect(()=>{r()},[r]),b.useEffect(()=>{const a=setInterval(r,zce);return()=>clearInterval(a)},[r]),b.useEffect(()=>{const a=()=>{document.hidden||r()};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a)}},[r]),b.useEffect(()=>{const a=()=>{r()};return window.addEventListener("online",a),()=>{window.removeEventListener("online",a)}},[r]),{versionInfo:n,checkForVersionUpdate:r,updateToNewVersion:s,dismissUpdate:o}},x9=b.memo(()=>{const{updateInfo:t,updateApp:e}=b9(),{versionInfo:n,updateToNewVersion:i}=w9(),[r,s]=b.useState(!0),[o,a]=b.useState(!1),[l,c]=b.useState(!1),u=t.available||n.hasUpdate,d=b.useCallback(async()=>{a(!0);try{t.available?await e():n.hasUpdate&&i(),s(!1)}catch(p){console.error("Error al actualizar:",p)}finally{a(!1)}},[e,t.available,i,n.hasUpdate]),f=b.useCallback(()=>{c(!0),setTimeout(()=>{s(!1)},300)},[]);return!u||!r?null:h.jsxs("div",{className:Q("fixed inset-x-0 top-0 z-50 transition-all duration-300 ease-out",l?"-translate-y-full opacity-0":"translate-y-0 opacity-100"),children:[h.jsx("div",{className:"border-b border-stone-700/50 bg-gradient-to-r from-stone-900/95 via-stone-800/95 to-stone-900/95 shadow-2xl backdrop-blur-md",children:h.jsx("div",{className:"mx-auto max-w-7xl p-4",children:h.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"relative shrink-0",children:[h.jsx("div",{className:"absolute inset-0 animate-ping rounded-full bg-mantis-500/20"}),h.jsx("div",{className:"relative rounded-full bg-gradient-to-br from-mantis-500 to-mantis-600 p-2 shadow-lg sm:p-3",children:h.jsx(Le,{icon:wC,className:"size-4 animate-bounce text-white sm:size-5"})})]}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"mb-1 flex flex-col space-y-1 sm:flex-row sm:items-center sm:space-x-2 sm:space-y-0",children:[h.jsx("h3",{className:"text-base font-bold text-white sm:text-lg",children:"Nueva versión disponible"}),h.jsxs("div",{className:"flex w-fit items-center space-x-1 rounded-full bg-mantis-500/20 px-2 py-1",children:[h.jsx(Le,{icon:iD,className:"size-3 text-mantis-400"}),h.jsx("span",{className:"text-xs font-medium text-mantis-300",children:"Actualización"})]})]}),h.jsx("p",{className:"text-xs leading-relaxed text-stone-300 sm:text-sm",children:"Hay una nueva versión de VonSim8 con mejoras y correcciones. Te recomendamos actualizar para obtener la mejor experiencia."})]})]}),h.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[h.jsx(ht,{onClick:d,disabled:o,variant:"primary",size:"sm",className:Q("relative overflow-hidden transition-all duration-300","bg-gradient-to-r from-mantis-600 to-mantis-700","hover:from-mantis-700 hover:to-mantis-800","shadow-lg hover:shadow-xl","border border-mantis-500/30","text-xs sm:text-sm",o&&"animate-pulse"),leftIcon:h.jsx(Le,{icon:o?RX:$X,className:Q("size-3 transition-transform duration-200 sm:size-4",o&&"animate-spin")}),children:o?"Actualizando...":"Actualizar ahora"}),h.jsx(ht,{onClick:f,variant:"ghost",size:"sm",className:"shrink-0 text-stone-400 transition-all duration-200 hover:bg-stone-700/50 hover:text-white","aria-label":"Cerrar banner de actualización",children:h.jsx(Le,{icon:dm,className:"size-3 sm:size-4"})})]})]})})}),o&&h.jsx("div",{className:"h-1 animate-pulse bg-gradient-to-r from-mantis-500 to-mantis-600",children:h.jsx("div",{className:"animate-shimmer h-full bg-white/30"})})]})});x9.displayName="UpdateBanner";ue(!1);const Uh=[{id:"welcome",target:"app-container",title:"¡Bienvenido a VonSim8!",content:"Te acompañaré en un recorrido por las funciones principales de la plataforma. VonSim8 es un simulador de computadora de 8 bits que te permite programar en lenguaje ensamblador y ver cómo funciona internamente una computadora.",icon:CX,position:"top"},{id:"header",target:"header",title:"Barra de Navegación",content:"Aquí encontrarás el logo, el estado de la simulación, los controles principales y acceso a notificaciones, tour de ayuda y configuración.",icon:"icon-[lucide--navigation]",position:"bottom"},{id:"controls",target:"controls-container",title:"Controles de Simulación",content:"Controla la simulación: F7 (ejecutar ciclo), F8 (ejecutar instrucción), F4 (ejecución infinita), F9 (resetear). También puedes usar los botones visuales.",icon:"icon-[lucide--cpu]",position:"bottom"},{id:"editor-buttons",target:"panel-editor",title:"Editor de Código",content:"Aquí es donde escribirás tu código ensamblador. El editor tiene resaltado de sintaxis, autocompletado y validación en tiempo real. Usa los botones de arriba para crear, abrir, guardar y ensamblar tu programa.",icon:"icon-[lucide--file-terminal]",position:"right"},{id:"computer-view",target:"panel-computer",title:"Simulador de Computadora",content:"Aquí verás la computadora virtual con CPU, memoria RAM, registros, ALU, buses de datos y control, y todos los periféricos como pantalla, teclado, LEDs y switches.",icon:"icon-[lucide--monitor]",position:"left"},{id:"cpu-architecture",target:"cpu-component",title:"Arquitectura CPU",content:"Observa cómo la CPU ejecuta instrucciones paso a paso: fetch, decode, execute. Ve los valores en los registros, el contador de programa y el estado de las banderas.",icon:"icon-[lucide--microchip]",position:"left"},{id:"memory-ram",target:"memory-component",title:"Memoria RAM",content:"Explora la memoria RAM de 256 bytes. Ve cómo se almacenan datos e instrucciones, y cómo la CPU accede a diferentes direcciones de memoria. Cada celda muestra su dirección y valor en hexadecimal.",icon:"icon-[lucide--database]",position:"left"},{id:"settings-button",target:"settings-button",title:"Botón de Configuración",content:"Haz clic en este engranaje para acceder a las configuraciones avanzadas. Aquí podrás ajustar la velocidad de simulación, cambiar el tema visual, seleccionar el idioma y personalizar atajos de teclado.",icon:"icon-[lucide--settings]",position:"bottom"},{id:"settings-panel",target:"panel-settings",title:"Panel de Configuración",content:"En este panel encontrarás todas las opciones de configuración organizadas por categorías: simulación, interfaz, idioma y atajos de teclado. Los cambios se aplican automáticamente.",icon:"icon-[lucide--settings]",position:"left"},{id:"footer",target:"footer-links",title:"Recursos y Soporte",content:"Encuentra documentación completa, código fuente en GitHub, reporta bugs y accede a recursos de aprendizaje para dominar la programación en ensamblador.",icon:"icon-[lucide--help-circle]",position:"top"},{id:"final",target:"cycle-button",title:"¡Listo para Programar!",content:"Ya conoces las funciones principales de VonSim8. Comienza escribiendo código en el editor, ejecuta la simulación paso a paso con el botón 'Por Ciclo' y observa cómo funciona tu programa en la computadora virtual. ¡Disfruta programando!",icon:"icon-[lucide--rocket]",position:"bottom"}],Bce=()=>{const[t,e]=b.useState(0),[n,i]=b.useState(!1),[r,s]=b.useState(!0),[,o]=lm(Vb),a=b.useMemo(()=>t===Uh.length-1,[t]),l=b.useMemo(()=>t===0,[t]),c=b.useCallback(()=>{i(!1),localStorage.setItem("vonsim8-tour-completed","true")},[]),u=b.useCallback(()=>{e(g=>Math.min(g+1,Uh.length-1))},[]),d=b.useCallback(()=>{e(g=>Math.max(g-1,0))},[]),f=b.useCallback(()=>{c()},[c]),p=b.useCallback(()=>{i(!0),e(0)},[]);return b.useEffect(()=>{},[]),b.useEffect(()=>{const g=Uh[t],m=document.querySelector(`[data-testid="${g.target}"]`);s(!!m),g.id==="settings-button"?o(!0):g.id!=="settings-panel"&&g.id!=="settings-button"&&o(!1)},[t,o]),{currentStep:t,isVisible:n,isLastStep:a,isFirstStep:l,handleNext:u,handlePrev:d,handleSkip:f,completeTour:c,startTour:p,targetFound:r}},Uce=t=>b.useMemo(()=>{const e=document.querySelector(`[data-testid="${t.target}"]`);if(!e)return null;const n=e.getBoundingClientRect(),i=window.innerWidth,r=window.innerHeight;if(t.id==="welcome"&&t.position==="top")return{positionStyles:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},highlightStyles:{top:0,left:0,width:"100vw",height:"100vh"}};if(t.id==="footer"){let g=n.top-200-60,m=n.right+20;const v="translateX(0)";g<40&&(g=40),g+200>r-100&&(g=Math.max(40,r/2-200/2)),m+320>i&&(m=i-320-20);const y={top:g,left:m,transform:v},w={top:n.top-2,left:n.left-2,width:n.width+4,height:n.height+4};return{positionStyles:y,highlightStyles:w}}let s,o,a;switch(t.position){case"top":s=n.top-20,o=n.left+n.width/2,a="translateX(-50%)";break;case"bottom":s=n.bottom+20,o=n.left+n.width/2,a="translateX(-50%)";break;case"left":s=n.top+n.height/2,o=n.left-20,a="translateY(-50%)";break;case"right":s=n.top+n.height/2,o=n.right+20,a="translateY(-50%)";break}const l=320,c=200;o+l/2>i?o=i-l/2-20:o-l/2<0&&(o=l/2+20),s+c>r?s=r-c-20:s<0&&(s=20);const u={top:s,left:o,transform:a},d={top:n.top-8,left:n.left-8,width:n.width+16,height:n.height+16};return{positionStyles:u,highlightStyles:d}},[t]),S9=b.memo(({current:t,total:e})=>h.jsx("div",{className:"mb-2 h-2 w-full overflow-hidden rounded-full bg-stone-700",children:h.jsx("div",{className:"h-full bg-mantis-500 transition-all duration-300",style:{width:`${(t+1)/e*100}%`}})}));S9.displayName="ProgressBar";const k9=b.memo(({step:t,currentStep:e,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:l,targetFound:c})=>{const u=Uce(t),d=b.useRef(null);b.useEffect(()=>{var m;(m=d.current)==null||m.focus()},[e]);const f="animate-fade-in";if(!c||!u)return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:h.jsxs("div",{className:"max-w-sm rounded-lg border-2 border-mantis-400 bg-stone-900 p-8 text-center shadow-2xl",children:[h.jsx(Le,{icon:l2,className:"mb-4 text-4xl text-yellow-400"}),h.jsx("h3",{className:"mb-2 text-lg font-semibold text-mantis-400",children:"Elemento no encontrado"}),h.jsx("p",{className:"mb-4 text-stone-300",children:"No se pudo encontrar el elemento de la interfaz para este paso del tour."}),h.jsx(ht,{onClick:o,className:"bg-mantis-600 hover:bg-mantis-700",children:"Saltar tour"})]})});const{positionStyles:p,highlightStyles:g}=u;return h.jsx("div",{className:"fixed inset-0 z-50 bg-black/50",children:h.jsxs("div",{className:"relative size-full",children:[h.jsx("div",{className:"absolute rounded-lg border-2 border-mantis-400 bg-transparent shadow-2xl transition-all duration-300",style:g}),h.jsxs("div",{ref:d,tabIndex:-1,role:"dialog","aria-modal":"true",className:`absolute max-w-sm rounded-lg border border-mantis-400 bg-stone-900 p-6 text-white shadow-xl focus:outline-none ${f}`,style:p,children:[h.jsx(S9,{current:e,total:l}),h.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[t.icon&&(typeof t.icon=="string"?h.jsx("span",{className:`${t.icon} text-2xl text-mantis-400`}):h.jsx(Le,{icon:t.icon,className:"text-2xl text-mantis-400"})),h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:t.title})]}),h.jsx("p",{className:"mb-4 text-sm text-stone-300",children:t.content}),h.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[h.jsx(ht,{variant:"ghost",size:"sm",onClick:o,className:"text-stone-400 hover:text-white","aria-label":"Saltar tour",children:"Saltar"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(ht,{variant:"outline",size:"sm",onClick:s,disabled:i,className:"flex items-center gap-1","aria-label":"Anterior",children:[h.jsx(Le,{icon:BX}),"Anterior"]}),n?h.jsxs(ht,{size:"sm",onClick:a,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Finalizar",children:["Finalizar",h.jsx(Le,{icon:iD})]}):h.jsxs(ht,{size:"sm",onClick:r,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Siguiente",children:["Siguiente",h.jsx(Le,{icon:UX})]})]})]}),h.jsxs("div",{className:"mt-2 text-right text-xs text-stone-500",children:["Paso ",e+1," de ",l]}),h.jsx("button",{onClick:o,className:"absolute right-2 top-2 rounded p-1 text-stone-400 hover:text-white focus:outline-none","aria-label":"Cerrar",children:h.jsx(Le,{icon:dm,size:"sm"})})]})]})})});k9.displayName="TourTooltip";const _9=b.memo(()=>{const{currentStep:t,isVisible:e,isLastStep:n,isFirstStep:i,handleNext:r,handlePrev:s,handleSkip:o,completeTour:a,startTour:l,targetFound:c}=Bce();b.useEffect(()=>(window.startWelcomeTour=l,()=>{delete window.startWelcomeTour}),[l]);const u=b.useMemo(()=>Uh[t],[t]);return b.useEffect(()=>{if(!e)return;const d=f=>{f.key==="Escape"&&o(),f.key==="ArrowRight"&&r(),f.key==="ArrowLeft"&&s()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[e,o,r,s]),!e||!u?null:h.jsx(k9,{step:u,currentStep:t,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:Uh.length,targetFound:c})});_9.displayName="WelcomeTour";var Dr=function(t,e){return Number(t.toFixed(e))},Vce=function(t,e){return e},Gt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},Hce=function(t){return-Math.cos(t*Math.PI)/2+.5},Wce=function(t){return t},Gce=function(t){return t*t},Kce=function(t){return t*(2-t)},qce=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},Yce=function(t){return t*t*t},Xce=function(t){return--t*t*t+1},Jce=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},Zce=function(t){return t*t*t*t},Qce=function(t){return 1- --t*t*t*t},eue=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},tue=function(t){return t*t*t*t*t},nue=function(t){return 1+--t*t*t*t*t},iue=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},C9={easeOut:Hce,linear:Wce,easeInQuad:Gce,easeOutQuad:Kce,easeInOutQuad:qce,easeInCubic:Yce,easeOutCubic:Xce,easeInOutCubic:Jce,easeInQuart:Zce,easeOutQuart:Qce,easeInOutQuart:eue,easeInQuint:tue,easeOutQuint:nue,easeInOutQuint:iue},E9=function(t){typeof t=="number"&&cancelAnimationFrame(t)},ds=function(t){t.mounted&&(E9(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function A9(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;ds(t),t.animation=function(){if(!t.mounted)return E9(t.animation);var o=new Date().getTime()-r,a=o/n,l=C9[e],c=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function rue(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function Il(t,e,n,i){var r=rue(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,f=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):A9(t,i,n,function(p){var g=a+u*p,m=l+d*p,v=c+f*p;s(g,m,v)})}}function sue(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=i-a,u=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var oue=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,c=t-e-a,u=a,d=i-r-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},GE=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=sue(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,f=oue(o,l,c,a,u,d,!!r);return f},Nk=function(t,e,n,i){return i?t<e?Dr(e,2):t>n?Dr(n,2):Dr(t,2):Dr(t,2)},Cc=function(t,e){var n=GE(t,e);return t.bounds=n,n};function Cm(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;o&&(d=r,f=s);var p=Nk(t,a-d,c+d,i),g=Nk(e,l-f,u+f,i);return{x:p,y:g}}function Hb(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,f=c-n*u,p=Cm(d,f,r,s,0,0,null);return p}function Em(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var TR=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(u){return u instanceof Element?r==null?void 0:r.contains(u):!1}):r==null?void 0:r.contains(s),l=i&&s&&a;if(!l)return!1;var c=Wb(s,n);return!c},OR=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},aue=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},lue=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function cue(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,f=u.minPositionX,p=u.maxPositionY,g=u.minPositionY,m=n>d||n<f,v=i>p||i<g,y=n>d?c.offsetWidth:t.setup.minPositionX||0,w=i>p?c.offsetHeight:t.setup.minPositionY||0,x=Hb(t,y,w,r,t.bounds,a||l),S=x.x,_=x.y;return{scale:r,positionX:m?S:n,positionY:v?_:i}}}function N9(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var f=Cm(e,n,a,s,i,r,o),p=f.x,g=f.y;t.setTransformState(c,p,g)}}var uue=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,c=r.positionY;if(!i)return{x:l,y:c};var u=e-i.x,d=n-i.y,f=o?l:u,p=a?c:d;return{x:f,y:p}},kl=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},due=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},fue=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!i)};function hue(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function IR(t,e,n,i,r,s,o,a,l,c){if(r){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return i?e:Nk(t,s,o,r)}function pue(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function mue(t,e){var n=due(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var c=pue(o,a),u=e.x-i.x,d=e.y-i.y,f=u/c,p=d/c,g=l-r,m=u*u+d*d,v=Math.sqrt(m)/g;t.velocity={velocityX:f,velocityY:p,total:v}}t.lastMousePosition=e,t.velocityTime=l}}function gue(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=fue(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,p=i.limitToBounds,g=i.alignmentAnimation,m=i.zoomAnimation,v=i.panning,y=v.lockAxisY,w=v.lockAxisX,x=m.animationType,S=g.sizeX,_=g.sizeY,E=g.velocityAlignmentTime,C=E,N=hue(t,l),M=Math.max(N,C),j=kl(t,S),I=kl(t,_),O=j*r.offsetWidth/100,H=I*r.offsetHeight/100,D=c+O,K=u-O,X=d+H,te=f-H,U=t.transformState,z=new Date().getTime();A9(t,x,M,function(ie){var ye=t.transformState,J=ye.scale,le=ye.positionX,F=ye.positionY,$=new Date().getTime()-z,V=$/C,k=C9[g.animationType],P=1-k(Math.min(1,V)),L=1-ie,R=le+o*L,Y=F+a*L,G=IR(R,U.positionX,le,w,p,u,c,K,D,P),ne=IR(Y,U.positionY,F,y,p,f,d,te,X,P);(le!==R||F!==Y)&&t.setTransformState(J,G,ne)})}}function jR(t,e){var n=t.transformState.scale;ds(t),Cc(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?lue(t,e):aue(t,e)}function KE(t,e){var n=t.transformState.scale,i=t.setup,r=i.minScale,s=i.alignmentAnimation,o=s.disabled,a=s.sizeX,l=s.sizeY,c=s.animationTime,u=s.animationType,d=o||n<r||!a&&!l;if(!d){var f=cue(t);f&&Il(t,f,e??c,u)}}function LR(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=uue(t,e,n),c=l.x,u=l.y,d=kl(t,o),f=kl(t,a);mue(t,{x:c,y:u}),N9(t,c,u,d,f)}}function vue(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,f=!e&&n&&(n==null?void 0:n.total)>.1&&d;f?gue(t):KE(t)}}function qE(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=Em(Dr(e,2),s,o,0,!1),c=Cc(t,l),u=Hb(t,n,i,l,c,a),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function P9(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||i>=o;if((i>=1||a)&&KE(t),!(f||!r||!t.mounted)){var p=e||r.offsetWidth/2,g=n||r.offsetHeight/2,m=qE(t,o,p,g);m&&Il(t,m,u,d)}}var sl=function(){return sl=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},sl.apply(this,arguments)};function DR(t,e,n){for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var zg={scale:1,positionX:0,positionY:0},Uf={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},Pk={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},M9=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:zg.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:zg.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:zg.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:zg.positionY}},$R=function(t){var e=sl({},Uf);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof Uf[n]<"u";if(r&&i){var s=Object.prototype.toString.call(Uf[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=sl(sl({},Uf[n]),t[n]):a?e[n]=DR(DR([],Uf[n],!0),t[n]):e[n]=t[n]}}),e},R9=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=c?i*Math.exp(e*n):i+e*n,f=Em(Dr(d,3),a,o,u,!1);return f};function T9(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,f=(u/2-l)/a,p=(d/2-c)/a,g=R9(t,e,n),m=qE(t,g,f,p);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");Il(t,m,i,r)}function O9(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=M9(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var f=GE(t,a.scale),p=Cm(a.positionX,a.positionY,f,o,0,0,s),g={scale:a.scale,positionX:p.x,positionY:p.y};c===a.scale&&u===a.positionX&&d===a.positionY||(i==null||i(),Il(t,g,e,n))}}function yue(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function bue(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!i||!r)return s;var u=i.getBoundingClientRect(),d=e.getBoundingClientRect(),f=yue(e,i,r,s),p=f.x,g=f.y,m=d.width/s.scale,v=d.height/s.scale,y=i.offsetWidth/m,w=i.offsetHeight/v,x=Em(n||Math.min(y,w),l,c,0,!1),S=(u.width-m*x)/2,_=(u.height-v*x)/2,E=(u.left-p)*x+S,C=(u.top-g)*x+_,N=GE(t,x),M=Cm(E,C,N,a,0,0,i),j=M.x,I=M.y;return{positionX:j,positionY:I,scale:x}}var wue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),T9(t,1,e,n,i)}},xue=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),T9(t,-1,e,n,i)}},Sue=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!u||!d)){var p={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?c:i};Il(t,p,r,s)}}},kue=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),O9(t,e,n)}},_ue=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=I9(e||r.scale,s,o);Il(t,a,n,i)}}},Cue=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),ds(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=bue(t,o,n);Il(t,a,i,r)}}},Mk=function(t){return{instance:t,zoomIn:wue(t),zoomOut:xue(t),setTransform:Sue(t),resetTransform:kue(t),centerView:_ue(t),zoomToElement:Cue(t)}},Eue=function(t){return{instance:t,state:t.transformState}},jt=function(t){var e={};return Object.assign(e,Eue(t)),Object.assign(e,Mk(t)),e},Yx=!1;function Xx(){try{var t={get passive(){return Yx=!0,!1}};return t}catch{return Yx=!1,Yx}}var Bg=".".concat(Pk.wrapperClass),Wb=function(t,e){return e.some(function(n){return t.matches("".concat(Bg," ").concat(n,", ").concat(Bg," .").concat(n,", ").concat(Bg," ").concat(n," *, ").concat(Bg," .").concat(n," *"))})},Rk=function(t){t&&clearTimeout(t)},Aue=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},I9=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function Nue(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Pue=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!i&&c;if(!u||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=Wb(c,o);return!d},Mue=function(t){return t?t.deltaY<0?1:-1:0};function Rue(t,e){var n=Mue(t),i=Vce(e,n);return i}function j9(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var Tue=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,f=u.size,p=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var g=s+e*n,m=i?!1:!p,v=Em(Dr(g,3),c,l,f,m&&!d);return v},Oue=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},Iue=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=Wb(o,r);return!l},jue=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},Lue=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Dr(r[0].clientX-i.left,5),o=Dr(r[0].clientY-i.top,5),a=Dr(r[1].clientX-i.left,5),l=Dr(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},L9=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},Due=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,c=a.size,u=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,f=d*n;return Em(Dr(f,2),o,s,c,!u&&!l)},$ue=160,Fue=100,zue=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(ds(t),Gt(jt(t),e,i),Gt(jt(t),e,r))},Bue=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,p=o.disablePadding,g=o.smooth,m=d.size,v=d.disabled,y=f.step,w=f.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var x=Rue(e,null),S=g?w*Math.abs(e.deltaY):y,_=Tue(t,x,S,!e.ctrlKey);if(l!==_){var E=Cc(t,_),C=j9(e,s,l),N=v||m===0||u||p,M=c&&N,j=Hb(t,C.x,C.y,_,E,M),I=j.x,O=j.y;t.previousWheelEvent=e,t.setTransformState(_,I,O),Gt(jt(t),e,i),Gt(jt(t),e,r)}},Uue=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;Rk(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(P9(t,e.x,e.y),t.wheelAnimationTimer=null)},Fue);var s=Oue(t,e);s&&(Rk(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Gt(jt(t),e,i),Gt(jt(t),e,r))},$ue))},D9=function(t){for(var e=0,n=0,i=0;i<2;i+=1)e+=t.touches[i].clientX,n+=t.touches[i].clientY;var r=e/2,s=n/2;return{x:r,y:s}},Vue=function(t,e){var n=L9(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var i=D9(e);t.pinchLastCenterX=i.x,t.pinchLastCenterY=i.y,ds(t)},Hue=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,c=o.zoomAnimation,u=o.alignmentAnimation,d=c.disabled,f=c.size;if(!(i===null||!n)){var p=Lue(e,s,n);if(!(!Number.isFinite(p.x)||!Number.isFinite(p.y))){var g=L9(e),m=Due(t,g),v=D9(e),y=v.x-(t.pinchLastCenterX||0),w=v.y-(t.pinchLastCenterY||0);if(!(m===s&&y===0&&w===0)){t.pinchLastCenterX=v.x,t.pinchLastCenterY=v.y;var x=Cc(t,m),S=d||f===0||l,_=a&&S,E=Hb(t,p.x,p.y,m,x,_),C=E.x,N=E.y;t.pinchMidpoint=p,t.lastDistance=g;var M=u.sizeX,j=u.sizeY,I=kl(t,M),O=kl(t,j),H=C+y,D=N+w,K=Cm(H,D,x,a,I,O,r),X=K.x,te=K.y;t.setTransformState(m,X,te)}}}},Wue=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,P9(t,e==null?void 0:e.x,e==null?void 0:e.y)},$9=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;Rk(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Gt(jt(t),e,n)},i)},Gue=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Gt(jt(t),e,i),O9(t,o,a,function(){return Gt(jt(t),e,r)}),$9(t,e)};function Kue(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function que(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,p=u.step,g=u.animationTime,m=u.animationType;if(!d&&!i){if(f==="reset")return Gue(t,e);if(!s)return console.error("No ContentComponent found");var v=Kue(f,t.transformState.scale),y=R9(t,v,p);if(o!==y){Gt(jt(t),e,l);var w=j9(e,s,o),x=qE(t,y,w.x,w.y);if(!x)return console.error("Error during zoom event. New transformation state was not calculated.");Gt(jt(t),e,c),Il(t,x,g,m),$9(t,e)}}}var Yue=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=r==null?void 0:r.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=Wb(l,a);return!d},Xue=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){n.props=i,Cc(n,n.transformState.scale),n.setup=$R(i)},this.initializeWindowEvents=function(){var i,r,s=Xx(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;(r=n.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var i,r,s=Xx(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),ds(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=Xx();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i,r){var s=!1,o=n.setup.centerOnInit,a=function(l,c){for(var u=0,d=l;u<d.length;u++){var f=d[u];if(f.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(l){l(jt(n))}),n.observer=new ResizeObserver(function(l){if(a(l,i)||a(l,r))if(o&&!s){var c=r.offsetWidth,u=r.offsetHeight;(c>0||u>0)&&(s=!0,n.setCenter())}else ds(n),Cc(n,n.transformState.scale),KE(n,0)}),n.observer.observe(i),n.observer.observe(r)},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=Pue(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(zue(n,i),Bue(n,i),Uue(n,i))}}},this.onWheelPanning=function(i){var r=n.setup,s=r.disabled,o=r.wheel,a=r.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var l=n.transformState,c=l.positionX,u=l.positionY,d=c-i.deltaX,f=u-i.deltaY,p=a.lockAxisX?c:d,g=a.lockAxisY?u:f,m=n.setup.alignmentAnimation,v=m.sizeX,y=m.sizeY,w=kl(n,v),x=kl(n,y);p===c&&g===u||N9(n,p,g,w,x)}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=TR(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),ds(n),jR(n,i),Gt(jt(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=OR(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),LR(n,i.clientX,i.clientY),Gt(jt(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(vue(n),Gt(jt(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=Iue(n,i);l&&(Vue(n,i),ds(n),Gt(jt(n),i,o),Gt(jt(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=jue(n);l&&(i.preventDefault(),i.stopPropagation(),Hue(n,i),Gt(jt(n),i,o),Gt(jt(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(Wue(n),Gt(jt(n),i,s),Gt(jt(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=TR(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200&&i.touches.length===1;if(!a){n.lastTouch=+new Date,ds(n);var l=i.touches,c=l.length===1,u=l.length===2;c&&(ds(n),jR(n,i),Gt(jt(n),i,s)),u&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=OR(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];LR(n,a.clientX,a.clientY),Gt(jt(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=Yue(n,i);s&&que(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=jt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Gt(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=I9(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):Aue(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return jt(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,Cc(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(i,r),n.initializeWindowEvents(),n.isInitialized=!0;var s=jt(n);Gt(s,void 0,n.props.onInit)},this.props=e,this.setup=$R(this.props),this.transformState=M9(this.props)}return t}(),YE=Ft.createContext(null),Jue=function(t,e){return typeof t=="function"?t(e):t},Zue=Ft.forwardRef(function(t,e){var n=b.useRef(new Xue(t)).current,i=Jue(t.children,Mk(n));return b.useImperativeHandle(e,function(){return Mk(n)},[n]),b.useEffect(function(){n.update(t)},[n,t]),Ft.createElement(YE.Provider,{value:n},i)});Ft.forwardRef(function(t,e){var n=b.useRef(null),i=b.useContext(YE);return b.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),Ft.createElement("div",sl({},t,{ref:Nue([n,e])}))});function Que(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var ede=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,FR={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};Que(ede);var tde=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,f=b.useContext(YE),p=f.init,g=f.cleanupWindowEvents,m=b.useRef(null),v=b.useRef(null);return b.useEffect(function(){var y=m.current,w=v.current;return y!==null&&w!==null&&p&&(p==null||p(y,w)),function(){g==null||g()}},[]),Ft.createElement("div",sl({},c,{ref:m,className:"".concat(Pk.wrapperClass," ").concat(FR.wrapper," ").concat(i),style:o}),Ft.createElement("div",sl({},d,{ref:v,className:"".concat(Pk.contentClass," ").concat(FR.content," ").concat(s),style:a}),e))};function nde({wrapperRef:t}){const e=Xt();return h.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function zR(t){switch(t){case"Captación":return"text-blue-300 bg-gradient-to-r from-blue-500/10 to-cyan-500/10";case"Obtención de operandos":return"text-yellow-300 bg-gradient-to-r from-yellow-500/10 to-orange-500/10";case"Ejecución":return"text-green-300 bg-gradient-to-r from-green-500/10 to-emerald-500/10";case"Escritura":return"text-purple-300 bg-gradient-to-r from-purple-500/10 to-violet-500/10";default:return"text-stone-300 bg-gradient-to-r from-stone-500/10 to-gray-500/10"}}function ide(t,e){if(t==="Ejecución")return/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-300 bg-yellow-500/5 border-yellow-400/30 shadow-yellow-400/20":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-300 bg-purple-500/5 border-purple-400/30 shadow-purple-400/20":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-300 bg-green-500/5 border-green-400/30 shadow-green-400/20");switch(t){case"Captación":return"text-blue-300 bg-blue-500/5 border-blue-400/30 shadow-blue-400/20";case"Obtención de operandos":return"text-yellow-300 bg-yellow-500/5 border-yellow-400/30 shadow-yellow-400/20";case"Escritura":return"text-purple-300 bg-purple-500/5 border-purple-400/30 shadow-purple-400/20";default:return"text-stone-300 bg-stone-500/5 border-stone-400/30 shadow-stone-400/20"}}function rde(t,e=!1){const n=(()=>{switch(t){case"Captación":return"📥";case"Obtención de operandos":return"🔍";case"Ejecución":return"⚡";case"Escritura":return"💾";case"Interrupción":return"🚨";default:return"⚙️"}})();return e?h.jsx("span",{className:"inline-block animate-bounce",children:n}):n}function sde(t){return/obten/i.test(t)||/operando/i.test(t)||/leer/i.test(t)||/cargar/i.test(t)?"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-yellow-400/30 shadow-lg shadow-yellow-400/10":/escrib/i.test(t)||/guardar/i.test(t)||/almacenar/i.test(t)||/resultado/i.test(t)?"bg-gradient-to-r from-purple-500/10 to-violet-500/10 border-purple-400/30 shadow-lg shadow-purple-400/10":(/procesar/i.test(t)||/alu/i.test(t)||/calcular/i.test(t)||/operar/i.test(t)||/ejecut/i.test(t),"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-400/30 shadow-lg shadow-green-400/10")}function BR(t,e){if(!t)return"";switch(e){case"Captación":return"ring-2 ring-blue-400/50 ring-offset-2 ring-offset-stone-800";case"Obtención de operandos":return"ring-2 ring-yellow-400/50 ring-offset-2 ring-offset-stone-800";case"Ejecución":return"ring-2 ring-green-400/50 ring-offset-2 ring-offset-stone-800";case"Escritura":return"ring-2 ring-purple-400/50 ring-offset-2 ring-offset-stone-800";default:return"ring-2 ring-stone-400/50 ring-offset-2 ring-offset-stone-800"}}function ode(t,e){return t==="Captación"?"text-blue-400":t==="Ejecución"?/obten/i.test(e)||/operando/i.test(e)||/leer/i.test(e)||/cargar/i.test(e)?"text-yellow-400":/escrib/i.test(e)||/guardar/i.test(e)||/almacenar/i.test(e)||/resultado/i.test(e)?"text-purple-400":(/procesar/i.test(e)||/alu/i.test(e)||/calcular/i.test(e)||/operar/i.test(e)||/ejecut/i.test(e),"text-green-400"):t==="Escritura"?"text-purple-400":t==="Obtención de operandos"?"text-yellow-400":"text-stone-400"}function ade(){const t=it(_t),e=it(rc),n=it(tn),i=it(Yv),[r]=af(),s=b.useRef(null),o=(a,l)=>{const[c,...u]=a.split(":"),d=u.join(":").trim();return{cycle:l,stage:c.trim(),action:d}};return b.useEffect(()=>{if(t){const a=T.get(Rn),l=o(t,a);T.set(rc,c=>{const u=c[c.length-1];return u&&u.cycle===a&&u.action===l.action?c:[...c,l]})}},[t]),b.useEffect(()=>{const a=T.sub(Rn,()=>{const l=T.get(Rn),c=T.get(_t);if(c&&l>0){const u=o(c,l);T.set(gc,{canAnimate:!1,pendingMessage:c}),T.set(rc,d=>{const f=d[d.length-1];return f&&f.cycle===l&&f.action===u.action?d:[...d,u]}),setTimeout(()=>{T.set(gc,{canAnimate:!0,pendingMessage:null})},100)}l===0&&(T.set(rc,[]),T.set(gc,{canAnimate:!0,pendingMessage:null}))});return()=>{a()}},[]),b.useEffect(()=>{const a=T.sub(tn,()=>{T.get(tn).type==="stopped"&&(T.set(rc,[]),T.set(gc,{canAnimate:!0,pendingMessage:null}))});return()=>{a()}},[]),b.useEffect(()=>{n.type==="running"&&i&&Di({title:"El programa ha sido modificado",description:"La ejecución se reiniciará desde el principio para aplicar los cambios.",variant:"info"})},[n,i]),b.useEffect(()=>{const a=s.current;a&&(a.scrollTop=a.scrollHeight)},[e]),r.showInstructionCycle?h.jsx("div",{className:"absolute left-[120px] top-[520px] z-10 h-min w-[420px]",children:h.jsxs("div",{className:"rounded-xl border-2 border-stone-400/50 bg-gradient-to-br from-stone-800 to-stone-900 shadow-2xl backdrop-blur-sm",children:[h.jsx("div",{className:"rounded-t-xl border-b-2 border-stone-600/50 bg-gradient-to-r from-stone-700 to-stone-800 px-4 py-3",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"relative",children:[h.jsx("span",{className:"animate-spin-slow text-xl",children:"🔄"}),h.jsx("div",{className:"absolute -right-1 -top-1 size-2 rounded-full bg-green-400"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"bg-gradient-to-r from-stone-200 to-stone-300 bg-clip-text text-sm font-bold text-transparent",children:"Ciclo de Instrucción"}),h.jsx("p",{className:"text-xs text-stone-400",children:"Seguimiento paso a paso"})]})]}),h.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-green-400/30 bg-gradient-to-r from-green-500/20 to-emerald-500/20 px-3 py-1.5",children:[h.jsx("div",{className:"size-2 rounded-full bg-green-400 shadow-lg shadow-green-400/50"}),h.jsx("span",{className:"text-xs font-medium text-green-300",children:"Activo"})]})]})}),h.jsxs("div",{ref:s,className:"scrollbar-thin max-h-80 overflow-y-auto p-4",children:[e.map((a,l)=>{const c=l===0||e[l-1].stage!==a.stage,u=l===e.length-1;return h.jsxs("div",{className:"mb-3 transition-all duration-300 ease-in-out",children:[c&&h.jsx("div",{className:"animate-fade-in mb-3",children:h.jsxs("div",{className:`flex items-center gap-3 rounded-xl border border-stone-600/50 bg-gradient-to-r from-stone-700/80 to-stone-800/80 p-4 shadow-lg ${zR(a.stage)}`,children:[h.jsxs("div",{className:"relative",children:[h.jsx("span",{className:"text-xl",children:rde(a.stage,u)}),u&&h.jsx("div",{className:"absolute -right-1 -top-1 size-3 rounded-full bg-green-400"})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:`text-sm font-bold ${zR(a.stage).split(" ")[0]}`,children:a.stage}),h.jsxs("p",{className:"text-xs text-stone-400",children:[a.stage==="Captación"&&"Leer instrucción",a.stage==="Obtención de operandos"&&"Preparar datos",a.stage==="Ejecución"&&"Procesar instrucción",a.stage==="Escritura"&&"Guardar resultado",a.stage==="Interrupción"&&"Manejar interrupción"]})]})]})}),a.stage==="Interrupción"?h.jsx("div",{className:`rounded-xl border-l-4 border-red-400 bg-gradient-to-r from-red-900/30 to-red-800/20 p-4 shadow-lg transition-all duration-300 ${u?"ring-2 ring-red-400/50 ring-offset-2 ring-offset-stone-800":""}`,children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-lg",children:"🚨"}),h.jsx("span",{className:"text-sm font-medium text-red-300",children:a.action})]})}):h.jsxs("div",{className:`flex items-center gap-3 rounded-xl border p-4 transition-all duration-300 hover:scale-[1.02] ${a.stage==="Ejecución"?`${sde(a.action)} ${u?BR(u,a.stage):""}`:`border-stone-600/50 bg-gradient-to-r from-stone-800/80 to-stone-900/80 ${u?"bg-stone-700/80 "+BR(u,a.stage):""}`}`,children:[h.jsx("div",{className:`flex size-8 items-center justify-center rounded-full text-sm font-bold transition-all duration-300 ${u?"scale-110 bg-gradient-to-r from-green-600 to-emerald-700 shadow-lg shadow-green-400/30 ring-2 ring-green-400/50":"bg-stone-700"} ${u?"text-white":ode(a.stage,a.action)}`,children:a.cycle}),h.jsx("div",{className:"flex-1",children:h.jsx("span",{className:`text-sm font-medium transition-all duration-200 ${ide(a.stage,a.action).split(" ")[0]}`,children:a.action})}),u&&h.jsx("div",{className:"flex items-center gap-1",children:h.jsx("div",{className:"size-2 rounded-full bg-green-400 shadow-lg shadow-green-400/50"})})]})]},l)}),e.length===0&&h.jsx("div",{className:"animate-fade-in flex items-center justify-center py-12",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"mb-4 text-5xl",children:"⏳"}),h.jsx("h4",{className:"mb-2 bg-gradient-to-r from-stone-300 to-stone-400 bg-clip-text text-sm font-bold text-transparent",children:"Esperando instrucciones"}),h.jsx("p",{className:"text-xs text-stone-500",children:"Ejecuta un programa para ver el ciclo"})]})})]}),h.jsx("div",{className:"rounded-b-xl border-t border-stone-600/50 bg-gradient-to-r from-stone-800/80 to-stone-900/80 px-4 py-3",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-blue-400"}),"Ciclos: ",T.get(Rn)]}),h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-green-400"}),"Monitor en tiempo real"]})]})})]})}):null}function lde(){const t=Xt(),{devices:e}=$n();return e.hasIOBus?h.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function cde(){const{devices:t}=$n(),e=it(ny),n=it(iy),i=b.useRef(null),r=b.useRef(null),s=b.useRef(null),o=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),a=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),l="M 750 545 H 800",{path:c,strokeDashoffset:u,opacity:d}=We("bus.rd"),{path:f,strokeDashoffset:p,opacity:g}=We("bus.wr");return h.jsxs(h.Fragment,{children:[e&&h.jsx(dde,{pathRef:r,progressSpring:u}),n&&h.jsx(fde,{pathRef:s,progressSpring:p}),h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[h.jsx("path",{ref:i,className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:o}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:o}),e&&h.jsx(He.path,{ref:r,d:c,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),e&&h.jsx(He.path,{d:c,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:u,opacity:d}}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:a}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:a}),n&&h.jsx(He.path,{ref:s,d:f,className:"fill-none stroke-orange-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,146,60,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),n&&h.jsx(He.path,{d:f,className:"fill-none stroke-orange-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:p,opacity:g}}),t.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(Pn,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:l}),h.jsx(He.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:l,style:We("bus.mem")})]}),t.pic&&h.jsx(Pn,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&h.jsx(Pn,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&h.jsx(Pn,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&h.jsx(Pn,{springs:"bus.handshake",d:"M 710 595 V 950 H 900"}),t.pic&&h.jsxs(h.Fragment,{children:[h.jsx(Pn,{springs:"bus.intr",d:"M 110 700 V 470"}),h.jsx(Pn,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&h.jsx(Pn,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&h.jsx(Pn,{springs:"bus.int1",d:"M 475 955 H 400 V 900"}),t.pic&&t.handshake&&h.jsx(Pn,{springs:"bus.int2",d:"M 900 1075 H 300 V 900"}),t.pio==="switches-and-leds"&&h.jsxs(h.Fragment,{children:[h.jsx(Pn,{springs:"bus.switches->pio",d:"M 1300 758 H 1120"}),h.jsx(Pn,{springs:"bus.pio->leds",d:"M 1120 868 H 1300"})]}),t.pio==="printer"&&h.jsxs(h.Fragment,{children:[h.jsx(Pn,{springs:"bus.printer.strobe",d:"M 1120 770 H 1225 V 992 H 1300"}),h.jsx(Pn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1210 V 782 H 1120"}),h.jsx(Pn,{springs:"bus.printer.data",d:"M 1120 850 H 1175 V 1062 H 1300"})]}),t.handshake==="printer"&&h.jsxs(h.Fragment,{children:[h.jsx(Pn,{springs:"bus.printer.strobe",d:"M 1120 992 H 1300"}),h.jsx(Pn,{springs:"bus.printer.busy",d:"M 1300 1007 H 1120"}),h.jsx(Pn,{springs:"bus.printer.data",d:"M 1120 1062 H 1300"})]})]})]})}function Pn({d:t,springs:e}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[3px]",strokeLinejoin:"round",d:t}),h.jsx(He.path,{d:t,className:"fill-none stroke-red-500 stroke-[3px] drop-shadow-[0_0_8px_rgba(239,68,68,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:We(e)}),h.jsx(He.path,{d:t,className:"fill-none stroke-red-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:We(e)})]})}function ude(){const t=Xt(),{devices:e}=$n();return h.jsxs(h.Fragment,{children:[h.jsx(Zi,{style:{left:385,top:405},children:"rd"}),h.jsx(Zi,{style:{left:385,top:425},children:"wr"}),e.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(Zi,{children:"io/m"}),h.jsx(Zi,{children:t("computer.chip-select.mem")})]}),e.pic&&h.jsx(Zi,{children:t("computer.chip-select.pic")}),e.timer&&h.jsx(Zi,{children:t("computer.chip-select.timer")}),e.pio&&h.jsx(Zi,{children:t("computer.chip-select.pio")}),e.handshake&&h.jsx(Zi,{children:t("computer.chip-select.handshake")}),e.pic&&h.jsxs(h.Fragment,{children:[h.jsx(Zi,{children:"intr"}),h.jsx(Zi,{children:"inta"})]}),e.printer&&h.jsxs(h.Fragment,{children:[h.jsx(Zi,{children:"strobe"}),h.jsx(Zi,{children:"busy"}),h.jsx(Zi,{children:"data"})]})]})}function Zi({children:t,style:e}){return h.jsx("span",{className:"pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",style:e,children:t})}function dde({pathRef:t,progressSpring:e}){const[n,i]=b.useState(!0),r=hp(ny),[s,o]=b.useState(!1),[a,l]=b.useState(0);if(b.useEffect(()=>{if(!e||typeof e.get!="function")return;let d=!0;function f(){if(!d)return;const p=e.get();l(1-p),p>0&&requestAnimationFrame(f)}return f(),()=>{d=!1}},[e]),b.useEffect(()=>{if(!t.current){const d=setTimeout(()=>o(f=>!f),10);return()=>clearTimeout(d)}o(!0)},[t]),b.useEffect(()=>{s&&a>=1&&(i(!1),setTimeout(()=>r(!1),100))},[a,s,r]),!n||!s)return null;let c=0,u=0;if(t.current){const d=t.current,f=d.getTotalLength(),p=d.getPointAtLength(a*f);c=p.x+40,u=p.y}else c=380+420*a+40,u=420;return h.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:c,top:u-32,color:"#ef4444",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:n?1:0},children:"Read"})}function fde({pathRef:t,progressSpring:e}){const[n,i]=b.useState(!0),r=hp(iy),[s,o]=b.useState(!1),[a,l]=b.useState(0);if(b.useEffect(()=>{if(!e||typeof e.get!="function")return;let d=!0;function f(){if(!d)return;const p=e.get();l(1-p),p>0&&requestAnimationFrame(f)}return f(),()=>{d=!1}},[e]),b.useEffect(()=>{if(!t.current){const d=setTimeout(()=>o(f=>!f),10);return()=>clearTimeout(d)}o(!0)},[t]),b.useEffect(()=>{s&&a>=1&&(i(!1),setTimeout(()=>r(!1),100))},[a,s,r]),!n||!s)return null;let c=0,u=0;if(t.current){const d=t.current,f=d.getTotalLength(),p=d.getPointAtLength(a*f);c=p.x+40,u=p.y}else c=380+420*a+40,u=440;return h.jsx("div",{className:"pointer-events-none absolute z-[100] select-none text-xs font-extrabold",style:{left:c,top:u+12,color:"#f59e42",textShadow:"0 0 4px #000, 0 0 2px #000",background:"rgba(0,0,0,0.2)",padding:"2px 8px",borderRadius:"6px",transition:"left 0.1s linear, top 0.1s linear",opacity:n?1:0},children:"Write"})}function hde(){const{devices:t}=$n(),e=["M 610 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 629 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" "),{path:i,strokeDashoffset:r,opacity:s}=We("bus.data"),{path:o,strokeDashoffset:a,opacity:l}=We("bus.address");return h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] size-full",children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:n}),h.jsx(He.path,{d:i,className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx(He.path,{d:i,className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:e}),h.jsx(He.path,{d:o,className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}}),h.jsx(He.path,{d:o,className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}})]})}function pde(){return h.jsxs(h.Fragment,{children:[h.jsx(hde,{}),h.jsx(cde,{}),h.jsx(ude,{}),h.jsx(lde,{})]})}function mde(){const{devices:t}=$n();if(!t.clock)return null;const e=We("clock.angle");return h.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:h.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx(He.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}const gde={register:{beginner:"Un registro es como una caja pequeña donde la CPU guarda datos temporalmente. Es muy rápido de acceder.",intermediate:"Los registros son memoria de acceso rápido dentro de la CPU. Son más rápidos que la RAM pero tienen menos capacidad.",advanced:"Registros de propósito general (AL, BL, CL, DL) para operaciones aritméticas. Cada uno puede almacenar 8 bits."},memory:{beginner:"La memoria RAM es como un gran almacén donde se guardan programas y datos. Cada ubicación tiene una dirección única.",intermediate:"Memoria de acceso aleatorio (RAM) de 256 bytes. La CPU puede leer y escribir en cualquier dirección.",advanced:"Memoria principal de 256 bytes con direccionamiento de 8 bits (00-FF). Organizada en celdas de 8 bits cada una."},alu:{beginner:'La ALU (Unidad Aritmético-Lógica) es el "cerebro matemático" de la CPU. Realiza sumas, restas y comparaciones.',intermediate:"Arithmetic Logic Unit procesa operaciones matemáticas y lógicas. Recibe operandos y devuelve resultados.",advanced:"ALU de 8 bits que ejecuta operaciones: ADD, SUB, AND, OR, XOR, NOT, CMP. Incluye flags de estado (Z, N, C)."},bus:{beginner:'Los buses son como "carreteras" por donde viajan los datos entre los componentes de la computadora.',intermediate:"Buses de datos y control conectan CPU, memoria y periféricos. El bus de datos transporta información.",advanced:"Bus de datos de 8 bits bidireccional, bus de direcciones de 8 bits, y líneas de control para sincronización."},instruction:{beginner:"Una instrucción es un comando que le dice a la CPU qué operación realizar, como sumar dos números.",intermediate:"Cada instrucción tiene un código de operación (opcode) y operandos. La CPU las ejecuta secuencialmente.",advanced:"Formato de instrucción: opcode (1 byte) + operandos. Ejemplos: MOV, ADD, JMP, CALL. Ciclo fetch-decode-execute."},"program-counter":{beginner:"El contador de programa (IP) indica qué instrucción ejecutar a continuación. Se incrementa automáticamente.",intermediate:"Program Counter (IP) contiene la dirección de la siguiente instrucción. Se actualiza en cada ciclo.",advanced:"Instruction Pointer (IP) de 8 bits. Incrementa en 1-2 bytes según el tamaño de la instrucción actual."},flags:{beginner:"Las banderas son indicadores que muestran el resultado de operaciones, como si el resultado fue cero.",intermediate:"Flags de estado: Zero (Z), Negative (N), Carry (C). Se actualizan automáticamente en operaciones.",advanced:"Flags de 1 bit: Z (resultado cero), N (resultado negativo), C (acarreo/overflow). Controlan saltos condicionales."},stack:{beginner:"La pila es como una pila de platos. Solo puedes agregar o quitar del tope. Útil para guardar direcciones de retorno.",intermediate:"Stack Pointer (SP) apunta al tope de la pila. PUSH agrega datos, POP los retira. LIFO (Last In, First Out).",advanced:"Pila de 256 bytes con SP de 8 bits. PUSH decrementa SP, POP lo incrementa. Usada para CALL/RET y variables locales."},interrupt:{beginner:"Una interrupción es como un timbre que interrumpe lo que está haciendo la CPU para atender algo urgente.",intermediate:"Las interrupciones permiten que dispositivos externos notifiquen a la CPU eventos importantes.",advanced:"Sistema de interrupciones con PIC (Programmable Interrupt Controller). IRET retorna de la rutina de interrupción."},peripheral:{beginner:"Los periféricos son dispositivos externos como teclado, pantalla y LEDs que se conectan a la computadora.",intermediate:"Periféricos se comunican con la CPU a través de puertos de entrada/salida (I/O).",advanced:"Sistema de I/O con PIO (Programmable I/O) y módulos específicos para cada periférico."},assembly:{beginner:"El lenguaje ensamblador es un lenguaje de programación que usa palabras en lugar de números para las instrucciones.",intermediate:"Cada instrucción de ensamblador se traduce a código de máquina. El ensamblador hace esta traducción.",advanced:"Sintaxis: etiqueta, mnemónico, operandos, comentarios. Directivas como ORG, DB, DW para datos."},addressing:{beginner:"El direccionamiento es cómo la CPU encuentra los datos que necesita en la memoria.",intermediate:"Modos de direccionamiento: inmediato, directo, indirecto. Cada uno accede a datos de forma diferente.",advanced:"Direccionamiento inmediato (valor en instrucción), directo (dirección en instrucción), indirecto (dirección en registro)."}},vde={beginner:od,intermediate:fm,advanced:wC},UR={beginner:"text-blue-400",intermediate:"text-yellow-400",advanced:"text-purple-400"},F9=b.memo(({concept:t,level:e="beginner",children:n,className:i})=>{const[r,s]=b.useState(e),o=gde[t];if(!o)return console.warn(`No educational content found for concept: ${t}`),h.jsx(h.Fragment,{children:n});const a=o[r],l=vde[r],c=h.jsxs("div",{className:"max-w-xs p-3",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx(Le,{icon:l,className:Q("text-sm",UR[r])}),h.jsxs("span",{className:Q("text-sm font-medium",UR[r]),children:["Nivel"," ",r==="beginner"?"Básico":r==="intermediate"?"Intermedio":"Avanzado"]})]}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:a}),h.jsx("div",{className:"flex gap-1",children:["beginner","intermediate","advanced"].map(u=>h.jsx("button",{onClick:d=>{d.stopPropagation(),s(u)},className:Q("rounded px-2 py-1 text-xs transition-colors",r===u?"bg-mantis-600 text-white":"bg-stone-700 text-stone-400 hover:bg-stone-600"),children:u==="beginner"?"B":u==="intermediate"?"I":"A"},u))})]});return h.jsx(gr,{content:c,position:"top",children:h.jsxs("span",{className:Q("inline-flex cursor-help items-center gap-1",i),children:[n,h.jsx(Le,{icon:od,className:"text-xs text-mantis-400 opacity-70 transition-opacity hover:opacity-100"})]})})});F9.displayName="EducationalTooltip";var Gb="Popover",[z9,q0e]=_s(Gb,[hf]),Am=hf(),[yde,jl]=z9(Gb),B9=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=Am(e),l=b.useRef(null),[c,u]=b.useState(!1),[d,f]=ul({prop:i,defaultProp:r??!1,onChange:s,caller:Gb});return h.jsx(uF,{...a,children:h.jsx(yde,{scope:e,contentId:sf(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:b.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:c,onCustomAnchorAdd:b.useCallback(()=>u(!0),[]),onCustomAnchorRemove:b.useCallback(()=>u(!1),[]),modal:o,children:n})})};B9.displayName=Gb;var U9="PopoverAnchor",bde=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=jl(U9,n),s=Am(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return b.useEffect(()=>(o(),()=>a()),[o,a]),h.jsx(jb,{...s,...i,ref:e})});bde.displayName=U9;var V9="PopoverTrigger",H9=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=jl(V9,n),s=Am(n),o=lt(e,r.triggerRef),a=h.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Y9(r.open),...i,ref:o,onClick:ve(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:h.jsx(jb,{asChild:!0,...s,children:a})});H9.displayName=V9;var XE="PopoverPortal",[wde,xde]=z9(XE,{forceMount:void 0}),W9=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=jl(XE,e);return h.jsx(wde,{scope:e,forceMount:n,children:h.jsx(ia,{present:n||s.open,children:h.jsx(_m,{asChild:!0,container:r,children:i})})})};W9.displayName=XE;var Xd="PopoverContent",G9=b.forwardRef((t,e)=>{const n=xde(Xd,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=jl(Xd,t.__scopePopover);return h.jsx(ia,{present:i||s.open,children:s.modal?h.jsx(kde,{...r,ref:e}):h.jsx(_de,{...r,ref:e})})});G9.displayName=Xd;var Sde=jd("PopoverContent.RemoveScroll"),kde=b.forwardRef((t,e)=>{const n=jl(Xd,t.__scopePopover),i=b.useRef(null),r=lt(e,i),s=b.useRef(!1);return b.useEffect(()=>{const o=i.current;if(o)return hF(o)},[]),h.jsx(Db,{as:Sde,allowPinchZoom:!0,children:h.jsx(K9,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ve(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ve(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),_de=b.forwardRef((t,e)=>{const n=jl(Xd,t.__scopePopover),i=b.useRef(!1),r=b.useRef(!1);return h.jsx(K9,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),K9=b.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=jl(Xd,n),p=Am(n);return PE(),h.jsx(Rb,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:h.jsx(Sm,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(zE,{"data-state":Y9(f.open),role:"dialog",id:f.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),q9="PopoverClose",Cde=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=jl(q9,n);return h.jsx(Ge.button,{type:"button",...i,ref:e,onClick:ve(t.onClick,()=>r.onOpenChange(!1))})});Cde.displayName=q9;var Ede="PopoverArrow",Ade=b.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Am(n);return h.jsx(BE,{...r,...i,ref:e})});Ade.displayName=Ede;function Y9(t){return t?"open":"closed"}var Nde=B9,Pde=H9,Mde=W9,X9=G9;const JE=Nde,ZE=Pde,Kb=b.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>h.jsx(Mde,{children:h.jsx(X9,{ref:r,align:e,sideOffset:n,className:Q("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));Kb.displayName=X9.displayName;function hr({name:t,valueAtom:e,springs:n,emphasis:i=!1,className:r}){const s=Xt(),o=it(e),a=o.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t,u=["AL","BL","CL","DL"].includes(t),d=t==="IP",f=t==="SP",p=t==="MBR",g=t==="MAR",m=t==="IR",v=["id","ri"].includes(t),y=c==="FLAGS";return h.jsxs(JE,{children:[h.jsx(ZE,{asChild:!0,children:h.jsxs(He.button,{title:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c,className:Q("flex cursor-pointer items-center font-mono leading-none transition-opacity",u||d||f||p||g||m||v?"size-10 justify-center rounded border-2 text-lg font-bold shadow-[0_2px_8px_0_rgba(60,180,120,0.10)] transition-all duration-200 hover:scale-110 hover:shadow-xl":y?"min-h-[32px] min-w-[90px] gap-2 rounded border-2 border-yellow-400 bg-gradient-to-br from-yellow-900 via-yellow-800 to-stone-900 px-2.5 py-0.5 font-bold text-yellow-200 shadow-[0_2px_8px_0_rgba(250,204,21,0.10)]":"rounded-md border bg-stone-800 px-2 py-1",u?"border-mantis-500 bg-stone-800 text-mantis-300":d?"border-red-500 bg-stone-800 text-red-300":f?"border-yellow-400 bg-stone-800 text-yellow-300":p||g||m?"border-indigo-400 bg-stone-800 text-indigo-300":v?"border-cyan-400 bg-stone-800 text-cyan-300":y?"":i?"border-mantis-400 text-lg":"border-stone-600 text-base",r),style:c==="left"||c==="right"||c==="result"?{backgroundColor:"transparent"}:We(n),children:[u||f||p||g||m||v?h.jsx(h.Fragment,{children:h.jsx("span",{className:Q(u||v||m||g||p?"mt-4":"mt-2","font-mono text-base font-bold"),children:a.toString("hex")})}):d?h.jsx(h.Fragment,{children:h.jsx("span",{className:Q("mt-4 font-mono text-base font-bold text-red-300"),children:a.toString("hex")})}):c==="left"||c==="right"||c==="result"?h.jsx("span",{className:"ml-12 font-mono text-xs font-bold",style:{color:c==="left"?"#34D399":c==="right"?"#60A5FA":"#F59E0B",fontSize:"12px",fontWeight:"bold",textShadow:c==="left"?"0 0 8px rgba(52, 211, 153, 0.6)":c==="right"?"0 0 8px rgba(96, 165, 250, 0.6)":"0 0 8px rgba(245, 158, 11, 0.6)"},children:a.toString("hex")}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:Q("mr-2 font-extrabold tracking-wide",u&&"text-mantis-300 drop-shadow",y&&"text-yellow-200",v&&"text-cyan-300",(c==="left"||c==="right")&&"text-xs"),children:c}),h.jsx("span",{className:Q("rounded px-1 py-0.5 font-light",u?"border border-mantis-400 bg-stone-950 text-mantis-300":y?"border border-yellow-400 bg-yellow-950 text-yellow-200":v?"border border-cyan-400 bg-cyan-950 text-cyan-200":"border border-stone-600 bg-stone-900 text-white"),children:a.toString("hex")})]}),y&&h.jsxs("span",{className:"ml-2 flex gap-1",children:[h.jsx("span",{className:Q("rounded border px-1 text-xs font-bold",Number(a)&2?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"Z"}),h.jsx("span",{className:Q("rounded border px-1 text-xs font-bold",Number(a)&1?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"C"})]})]})}),h.jsxs(Kb,{className:"w-60",children:[h.jsx("div",{className:"px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"font-medium text-white",children:c!=="left"&&c!=="right"&&c!=="result"?`Registro ${c}`:c}),c!=="left"&&c!=="right"&&c!=="result"&&h.jsx(F9,{concept:"register",level:"beginner",children:h.jsx("span",{className:"text-xs text-mantis-400",children:"💡"})})]})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(w=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${w}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(w)})]},w))})]})]})}function Rde(){const t=it(Ie.FLAGS),e=it(jD),n=it(si),[i,r]=b.useState(!1),[s,o]=b.useState(""),[a,l]=b.useState(""),[c,u]=b.useState(""),[d,f]=b.useState(""),[p,g]=b.useState(""),[m,v]=b.useState(""),y=it(ID),[w]=af(),x=b.useCallback(()=>n&&"metadata"in n&&n.metadata?`${n.metadata.name}${n.metadata.operands.length?" "+n.metadata.operands.join(", "):""}`:"",[n]),S=I=>["ADD","SUB","CMP","AND","OR","XOR"].some(H=>I.startsWith(H)),_=I=>{let O="AL",H="BL",D="AL";const K=[/ADD\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/SUB\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/CMP\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/AND\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/OR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/,/XOR\s+([[\]A-Z0-9]+),\s*([[\]A-Z0-9]+)/];for(const te of K){const U=I.match(te);if(U){O=U[1],H=U[2],/\[.*\]/.test(O)&&(O="MBR"),/\[.*\]/.test(H)&&(H="MBR"),D=U[1];break}}const X=["AL","BL","CL","DL","MBR"];return X.includes(O)||(O="AL"),X.includes(H)||(H="BL"),X.includes(D)||(D="AL"),{left:O,right:H,destination:D}};b.useEffect(()=>{const I=D=>{console.log("🎯 handleInstruction llamado con:",D);const X=x()||D;if(console.log("🎯 Instrucción completa a usar:",X),D)if(S(X)){r(!0);const{left:U,right:z,destination:ie}=_(X);console.log("🎯 Registros detectados:",{left:U,right:z,destination:ie}),f(U),g(z),v(ie);let ye,J;U==="MBR"&&z!=="MBR"?(ye=us(U,"left",D,void 0,{separateMBRPaths:!0,direction:"left"}),J=us(z,"right",D)):z==="MBR"&&U!=="MBR"?(ye=us(U,"left",D),J=us(z,"right",D,void 0,{separateMBRPaths:!0,direction:"right"})):(ye=us(U,"left",D),J=us(z,"right",D));const le="M 455 45 L 465 45 L 550 45 L 550 16 L 90 16 L 90 85 L 130 85 L 220 85",F="M 455 85 L 465 85 L 550 85 L 550 250 L 90 250 L 90 145 L 125 145 L 220 145";o(ye||le),l(J||F),u("")}else r(!1),o(""),l(""),u(""),f(""),g(""),v("");else r(!1),o(""),l(""),u(""),f(""),g(""),v("")},O=D=>{const K=D,X=x();I(X||K.detail.instruction)},H=D=>{const K=D;if(K.detail&&K.detail.instruction){const X=x();I(X||K.detail.instruction)}};return window.addEventListener("instructionChange",O),window.addEventListener("cpu:alu.execute",H),()=>{window.removeEventListener("instructionChange",O),window.removeEventListener("cpu:alu.execute",H)}},[n,x]);const E=t.bit(1),C=t.bit(0),N=t.bit(3),M=t.bit(4),j=t.bit(2);return h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[s&&h.jsx(He.path,{className:"fill-none stroke-green-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",d:s,pathLength:1,strokeDasharray:1,style:We("cpu.alu.operands")}),a&&h.jsx(He.path,{className:"fill-none stroke-blue-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]",strokeLinejoin:"round",d:a,pathLength:1,strokeDasharray:1,style:We("cpu.alu.operands")}),c&&h.jsx(He.path,{className:"fill-none stroke-amber-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(251,191,36,0.6)]",strokeLinejoin:"round",d:c,pathLength:1,strokeDasharray:1,style:We("cpu.alu.results")}),s&&h.jsx(He.path,{className:"fill-none stroke-green-300 stroke-1 opacity-50",strokeLinejoin:"round",d:s,pathLength:1,strokeDasharray:1,style:We("cpu.alu.operands")}),a&&h.jsx(He.path,{className:"fill-none stroke-blue-300 stroke-1 opacity-50",strokeLinejoin:"round",d:a,pathLength:1,strokeDasharray:1,style:We("cpu.alu.operands")}),c&&h.jsx(He.path,{className:"fill-none stroke-amber-300 stroke-1 opacity-50",strokeLinejoin:"round",d:c,pathLength:1,strokeDasharray:1,style:We("cpu.alu.results")}),d&&p&&i&&s&&a&&h.jsxs(He.text,{x:"125",y:"65",fill:"#34D399",fontSize:"12",fontWeight:"bold",style:We("cpu.alu.cog"),children:[d,"="]}),d&&p&&i&&s&&a&&h.jsxs(He.text,{x:"125",y:"168",fill:"#60A5FA",fontSize:"12",fontWeight:"bold",style:We("cpu.alu.cog"),children:[p,"="]}),m&&i&&c&&h.jsxs(He.text,{x:"310",y:"95",fill:"#F59E0B",fontSize:"12",fontWeight:"bold",style:We("cpu.alu.cog"),children:[m,"="]}),h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"aluGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#374151"}),h.jsx("stop",{offset:"50%",stopColor:"#4B5563"}),h.jsx("stop",{offset:"100%",stopColor:"#1F2937"})]}),h.jsx("filter",{id:"aluShadow",children:h.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"rgba(0,0,0,0.3)"})})]}),h.jsx("path",{d:"M 220 60 v 50 l 20 12 l -20 12 v 50 l 60 -36 v -52 Z",fill:"url(#aluGradient)",stroke:"#6B7280",strokeWidth:"2",strokeLinejoin:"round",filter:"url(#aluShadow)"}),h.jsx("text",{x:"250",y:"105",fill:"#E5E7EB",fontSize:"12",fontWeight:"bold",textAnchor:"middle",children:"ALU"})]}),h.jsx(He.span,{className:"icon-[lucide--settings] absolute left-[244px] top-[120px] block size-5 text-stone-300",style:{transform:We("cpu.alu.cog").rot.to(I=>`rotate(${I*60}deg)`)}}),i&&h.jsx(He.span,{className:"absolute left-[244px] top-[40px] z-30 flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:We("cpu.alu.operation"),children:e}),h.jsxs(He.div,{className:Q("absolute flex min-h-[30px] w-min min-w-[38px] items-center gap-0.5 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 px-0.5 py-1 font-bold text-stone-200 shadow-lg ring-1 ring-stone-300",w.flagsVisibility==="SF_OF_CF_ZF"?"left-[210px] top-[190px]":"left-[230px] top-[190px]"),style:We("cpu.FLAGS"),children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"FLAGS"}),h.jsxs("div",{className:"mt-2 flex items-center gap-0.5",children:[y&&h.jsx("span",{className:Q("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",M?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"I"}),w.flagsVisibility==="SF_OF_CF_ZF"&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:Q("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",N?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"S"}),h.jsx("span",{className:Q("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",j?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"O"})]}),h.jsx("span",{className:Q("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",E?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"C"}),h.jsx("span",{className:Q("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",C?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"Z"})]})]})]})}function Tde({progress:t,resetAnimations:e,returnToOriginal:n}){const{opacity:r,filterIntensity:s}=Cb({opacity:t.to(o=>n||e||o===0||o>0&&o<1?.4:o===1?1:.4),filterIntensity:t.to(o=>n||e||o===0||o>0&&o<1?.25:o===1?.6:.25),config:{tension:280,friction:60,duration:300}});return h.jsx(He.div,{style:{opacity:r,filter:s.to(o=>`drop-shadow(0 0 ${8*o}px rgba(56,189,248,${o}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:h.jsxs("svg",{width:"90",height:"42",viewBox:"0 0 90 42",children:[h.jsx("rect",{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"#0369a1",stroke:"#38bdf8",strokeWidth:"2.5"}),Array.from({length:4}).map((o,a)=>h.jsx("rect",{x:2,y:10+a*5,width:8,height:2.5,rx:1.2,fill:"#38bdf8"},a)),Array.from({length:8}).map((o,a)=>h.jsx(He.rect,{x:60,y:8+a*3.2,width:24,height:2.5,rx:1.2,fill:t.to(l=>n||e||l>0&&l<1?"#0ea5e9":l===1?"#7dd3fc":"#0ea5e9"),style:{filter:t.to(l=>n||e||l>0&&l<1?"none":l===1?"drop-shadow(0 0 8px #38bdf8)":"none")}},a)),Array.from({length:5}).map((o,a)=>h.jsx(He.rect,{x:15,y:t.to(()=>12+a*3.5),width:40,height:2.8,rx:1.4,fill:t.to(l=>n||e||l===0||l>0&&l<1?"#0c4a6e":l===1?"#7dd3fc":"#0c4a6e"),style:{filter:t.to(l=>n||e||l===0||l>0&&l<1?"none":l===1?"drop-shadow(0 0 6px #38bdf8)":"none"),transition:"fill 0.7s, filter 0.7s"}},a)),h.jsx(He.rect,{x:"10",y:"8",width:"50",height:"26",rx:"8",fill:"none",stroke:"#7dd3fc",strokeWidth:"2.5",strokeDasharray:"160",strokeDashoffset:t.to(o=>n||e||o>0&&o<1?160:o===1?0:160),style:{opacity:t.to(o=>n||e||o>0&&o<1?0:o===1?.8:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})})}function Ode({progress:t,phase:e,resetAnimations:n,returnToOriginal:i}){return h.jsxs(h.Fragment,{children:[Array.from({length:5}).map((s,o)=>h.jsx(He.rect,{x:16,y:t.to(()=>10+o*4),width:38,height:3,rx:1,fill:t.to(a=>i||n||e==="fetching"&&a===0||a===0?"#581c87":a>=(o+1)/5?"#f0abfc":Math.floor(a*5)===o&&a>0&&a<1?"#fff1fb":"#581c87"),style:{filter:t.to(a=>i||n||e==="fetching"&&a===0||a===0?"none":a>=(o+1)/5?"drop-shadow(0 0 6px #e879f9)":Math.floor(a*5)===o&&a>0&&a<1?"drop-shadow(0 0 12px #e879f9)":"none"),transition:"fill 0.7s, filter 0.7s"}},o)),h.jsx(He.rect,{x:15,y:t.to(s=>10+Math.floor(s*5)*4-.5),width:40,height:3.5,rx:1.5,fill:"#e879f9",style:{opacity:t.to(s=>i||n?0:s>0&&s<1?.25+.25*Math.sin(s*Math.PI):0),transition:"y 0.3s, opacity 0.2s"}}),h.jsx(He.rect,{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"none",stroke:"#f0abfc",strokeWidth:"2",strokeDasharray:"160",strokeDashoffset:t.to(s=>i||n||e==="fetching"&&s===0||s===0?160:160-160*s),style:{opacity:t.to(s=>i||n?0:s>0&&s<1&&e==="fetching-operands"?.7:0),transition:"stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}})]})}function Ide({progress:t,showControlMem:e,returnToOriginal:n}){const{opacity:i,pulseActive:r}=Cb({opacity:t.to(s=>n||s===0?.4:s>0&&s<1?1:.4),pulseActive:t.to(s=>n?!1:e&&s>0&&s<1),config:{tension:280,friction:60,duration:300}});return h.jsx(He.span,{className:"flex size-4 items-center justify-center rounded-full bg-fuchsia-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(232,121,249,0.6)]",style:{opacity:i,fontVariantNumeric:"tabular-nums",fontFamily:"monospace",transition:"opacity 0.3s ease-out"},title:"Lectura de microinstrucciones",children:h.jsx(He.span,{style:{animation:r.to(s=>s?"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite":"none")},children:"1"})})}function jde({progress:t,showControlMem:e,returnToOriginal:n}){const{opacity:i,pulseActive:r}=Cb({opacity:t.to(s=>n||s===0||s>0&&s<1?.4:s===1?1:.4),pulseActive:t.to(s=>n?!1:e&&s===1),config:{tension:280,friction:60,duration:300}});return h.jsx(He.span,{className:"flex size-4 items-center justify-center rounded-full bg-sky-400 text-[10px] font-extrabold text-white shadow-[0_0_4px_rgba(56,189,248,0.6)]",style:{opacity:i,fontVariantNumeric:"tabular-nums",fontFamily:"monospace",transition:"opacity 0.3s ease-out"},title:"Envío de señales de control",children:h.jsx(He.span,{style:{animation:r.to(s=>s?"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite":"none")},children:"2"})})}function Lde({progress:t,phase:e,memAnimKey:n,resetAnimations:i,returnToOriginal:r}){const{opacity:s,filterIntensity:o}=Cb({opacity:t.to(a=>r||a===0?.4:a>0&&a<1?1:.4),filterIntensity:t.to(a=>r||a===0?.25:a>0&&a<1?.6:.25),config:{tension:280,friction:60,duration:300}});return h.jsx(He.div,{style:{opacity:s,filter:o.to(a=>`drop-shadow(0 0 ${8*a}px rgba(232,121,249,${a}))`),transition:"opacity 0.3s ease-out, filter 0.3s ease-out"},children:h.jsxs("svg",{width:"70",height:"38",viewBox:"0 0 70 38",className:"mb-0.5",children:[h.jsx("rect",{x:"8",y:"6",width:"54",height:"26",rx:"4",fill:"#a21caf",stroke:"#e879f9",strokeWidth:"2"}),Array.from({length:4}).map((a,l)=>h.jsx("rect",{x:2,y:9+l*6,width:6,height:2,rx:1,fill:"#e879f9"},l)),Array.from({length:4}).map((a,l)=>h.jsx("rect",{x:62,y:9+l*6,width:6,height:2,rx:1,fill:"#e879f9"},l)),h.jsx(Ode,{progress:t,phase:e,resetAnimations:i,returnToOriginal:r},n)]})})}function Dde(){const[t,e]=b.useState(0),[n,i]=b.useState(!1),[r,s]=b.useState(!1);b.useEffect(()=>{let d=0;const f=We("cpu.decoder.progress.progress").to(p=>{d===0&&p>0&&(e(g=>g+1),i(!1),s(!1)),d>0&&p===0&&(e(g=>g+1),i(!0),setTimeout(()=>{s(!0)},100),setTimeout(()=>i(!1),100)),d=p});return()=>{typeof f=="function"&&f()}},[]);const o=Xt(),a=it(si),[l,c]=b.useState(!1),[,u]=b.useState(!1);return b.useEffect(()=>{let d=null;u(!1);let f;return l?f=We("cpu.decoder.progress.progress").to(p=>{p===1?d=setTimeout(()=>{u(!0)},1500):(d&&clearTimeout(d),u(!1))}):u(!1),()=>{d&&clearTimeout(d),typeof f=="function"&&f()}},[l]),h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[h.jsx(He.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-400 stroke-[3px] drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:We("cpu.decoder.path")}),h.jsx(He.path,{d:"M 250 310 V 320",className:"fill-none stroke-mantis-300 stroke-1 opacity-50",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:We("cpu.decoder.path")})]}),h.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:o("computer.cpu.control-unit")})}),h.jsxs("div",{className:"absolute bottom-[17px] left-[30px] flex h-[160px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[h.jsx("div",{className:"min-w-[180px] overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-3 py-1",children:h.jsxs("div",{style:{position:"relative",left:0},children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{style:{position:"relative",left:0,display:"flex",alignItems:"center"},children:[h.jsx("span",{className:"text-sm leading-none",children:o("computer.cpu.decoder")}),h.jsx("button",{type:"button","aria-label":l?"Ocultar memoria de control":"Mostrar memoria de control",className:"ml-2 flex size-6 items-center justify-center rounded-lg bg-gradient-to-r from-mantis-600 to-mantis-500 text-white shadow-lg transition-all duration-300 hover:from-mantis-500 hover:to-mantis-400 focus:outline-none focus:ring-2 focus:ring-mantis-400",style:{fontSize:"1.2em",lineHeight:1,padding:0,minWidth:0,minHeight:0,transform:l?"rotate(180deg)":"rotate(0deg)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:l?"0 4px 12px rgba(34,197,94,0.4)":"0 2px 8px rgba(34,197,94,0.2)"},onClick:()=>c(d=>!d),children:h.jsx("span",{style:{fontWeight:"bold",transform:l?"scale(0.8)":"scale(1)",transition:"transform 0.2s ease-out"},children:l?"−":"+"})})]})}),h.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:h.jsx(He.div,{className:"h-full bg-mantis-400",style:{width:We("cpu.decoder.progress.progress").to(d=>`${d*100}%`),opacity:We("cpu.decoder.progress.opacity")}})}),h.jsx("div",{className:"flex w-full justify-center",children:l&&h.jsx("div",{className:"flex min-w-[120px] flex-col items-center",children:h.jsxs("div",{className:"flex flex-row items-start gap-4",children:[h.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[h.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-fuchsia-100 drop-shadow-[0_0_6px_rgba(232,121,249,0.6)]",style:{minHeight:"18px"},children:[h.jsx(Ide,{progress:We("cpu.decoder.progress.progress"),showControlMem:l,returnToOriginal:r}),"Memoria de control"]}),h.jsx(Lde,{progress:We("cpu.decoder.progress.progress"),phase:a==null?void 0:a.phase,memAnimKey:t,resetAnimations:n,returnToOriginal:r})]}),h.jsxs("div",{className:"flex min-w-[90px] flex-col items-center",children:[h.jsxs("span",{className:"mb-0.5 flex items-center gap-1 text-center text-[10px] font-bold tracking-wide text-sky-100 drop-shadow-[0_0_6px_rgba(56,189,248,0.6)]",style:{minHeight:"18px"},children:[h.jsx(jde,{progress:We("cpu.decoder.progress.progress"),showControlMem:l,returnToOriginal:r}),"Secuenciador"]}),h.jsx(Tde,{progress:We("cpu.decoder.progress.progress"),phase:a==null?void 0:a.phase,memAnimKey:t,resetAnimations:n,returnToOriginal:r})]})]})})}),h.jsx("div",{className:"flex w-full justify-center",style:{maxHeight:l?90:0,opacity:l?1:0,transform:l?"translateY(0)":"translateY(-10px)",transition:"max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease-out, transform 0.5s ease-out",overflow:"hidden"}})]})}),h.jsx("div",{className:"flex w-full flex-1 items-start justify-center p-1",children:h.jsxs("div",{className:"w-[220px] max-w-[220px]",children:[h.jsx("div",{className:"mb-1 flex items-center justify-between",children:h.jsx("span",{className:"w-16 whitespace-nowrap text-xs font-bold uppercase tracking-wide text-mantis-400",children:"Instrucción"})}),h.jsx("div",{className:"mb-0.5 rounded border border-stone-600 bg-stone-900/80 p-0.5",children:h.jsx("div",{className:"min-w-0 flex-1 text-center",children:a&&"metadata"in a&&a.metadata?h.jsxs("div",{className:"truncate text-xs text-stone-300",children:[h.jsx("span",{className:"font-mono text-mantis-300",children:a.metadata.name}),a.metadata.operands.length>0&&h.jsxs("span",{className:"text-white",children:[" ",a.metadata.operands.join(", ")]})]}):h.jsx("div",{className:"text-xs text-stone-500",children:(a==null?void 0:a.phase)==="stopped"?"CPU detenida":"Esperando..."})})})]})})]})]})}function $de(){const[t,e]=b.useState(!1),[n,i]=b.useState(0);return b.useEffect(()=>{const r=()=>{e(!0),i(s=>s+1),setTimeout(()=>{e(!1)},3e3)};return window.addEventListener("ip-register-update",r),()=>{window.removeEventListener("ip-register-update",r)}},[]),t?h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
        @keyframes slideUpAndFade {
          0% {
            opacity: 1;
            transform: translateY(0px);
          }
          30% {
            opacity: 1;
            transform: translateY(-30px);
          }
          70% {
            opacity: 1;
            transform: translateY(-30px);
          }
          100% {
            opacity: 0;
            transform: translateY(-50px);
          }
        }
      `}),h.jsx("div",{className:Q("pointer-events-none absolute left-[425px] top-[342px]","font-mono text-lg font-bold"),style:{color:"#ff6347",animation:"slideUpAndFade 3s ease-out forwards"},children:"+1"},n)]}):null}function Fde(){const t=Xt(),e=it(RC),[n,i]=b.useState(!1),[r,s]=b.useState(!1),[o,a]=b.useState(!1);return b.useEffect(()=>{const l=(u,d,f)=>{a(u==="ADD"||u==="SUB"||u==="CMP"||u==="AND"||u==="OR"||u==="XOR"||u==="NOT"||u==="NEG"||u==="DEC"||u==="INC"),i(!!(u==="IRET"||d)),s(!!f)},c=u=>{const d=u;l(d.detail.instruction,d.detail.modeid,d.detail.moderi)};return window.addEventListener("instructionChange",c),()=>{window.removeEventListener("instructionChange",c)}},[]),h.jsxs("div",{"data-testid":"cpu-component",className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),h.jsx(jie,{showSP:e,showri:r}),h.jsx(hse,{showSP:e,showid:n,showri:r}),o&&h.jsxs(h.Fragment,{children:[h.jsx(Pi,{name:"left",className:Q("left-[96px] top-[49px]","border-transparent","bg-transparent")}),h.jsx(Pi,{name:"right",className:Q("left-[96px] top-[150px]","border-transparent","bg-transparent")}),h.jsx(Pi,{name:"result",className:Q("left-[280px] top-[79px]","border-transparent","bg-transparent")})]}),h.jsx(Rde,{}),h.jsxs("div",{className:"absolute left-[450px] top-[30px] z-10",children:[h.jsx(Pi,{name:"AL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"AL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[70px] z-10",children:[h.jsx(Pi,{name:"BL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"BL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[110px] z-10",children:[h.jsx(Pi,{name:"CL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"CL"})]}),h.jsxs("div",{className:"absolute left-[450px] top-[150px] z-10",children:[h.jsx(Pi,{name:"DL",emphasis:!0,className:""}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-emerald-400 bg-emerald-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-emerald-400",children:"DL"})]}),n&&h.jsx(Pi,{name:"id",className:Q("left-[450px] top-[190px]","border-cyan-400")}),h.jsxs("div",{className:"absolute left-[450px] top-[332px] z-10",children:[h.jsx(Pi,{name:"IP",emphasis:!0,className:"border-red-500"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-red-500 bg-red-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-red-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IP"})]}),h.jsxs("div",{className:"absolute left-[610px] top-[332px] z-10",children:[h.jsx(Pi,{name:"MAR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MAR"})]}),h.jsxs("div",{className:"absolute left-[610px] top-[233px] z-10",children:[h.jsx(Pi,{name:"MBR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"MBR"})]}),h.jsxs("div",{className:"absolute left-[230px] top-[270px] z-10",children:[h.jsx(Pi,{name:"IR",className:"border-indigo-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-indigo-400 bg-indigo-800 px-1 py-0 font-mono text-[10px] font-bold tracking-widest text-indigo-200",style:{textShadow:"0 1px 4px #000, 0 0px 2px #fff4"},children:"IR"})]}),h.jsx(Dde,{}),e&&h.jsx(Pi,{name:"SP",emphasis:!0,className:Q("left-[450px] top-[292px]","border-yellow-400")}),r&&h.jsxs("div",{className:"absolute left-[450px] top-[372px] z-10",children:[h.jsx(Pi,{name:"ri",emphasis:!0,className:"border-cyan-400"}),h.jsx("span",{className:"absolute left-0 top-0 z-30 select-none rounded-full border border-cyan-400 bg-cyan-800 px-1 py-0 font-mono text-xs font-bold tracking-widest text-cyan-400",children:"ri"})]}),h.jsx($de,{})]})}function Pi({name:t,emphasis:e,className:n}){const i=r=>`cpu.${r}`;return h.jsx(hr,{name:t,valueAtom:Ie[t],springs:i(t),emphasis:e,className:Q("absolute",n)})}const J9=b.memo(({className:t})=>{const e=Xt(),n=it(_p),i=it(fb),[r]=af(),[s,o]=b.useState(!1),l=1e3/parseInt(r.cpuSpeed);if(!r.showStatsCPU)return null;const c=i>0?(n/i).toFixed(2):"-",u=n*l,d=l/1e3,f=()=>n===0?"📊":i===0?"⏸️":"⚡",p=()=>n===0?"text-stone-400":i===0?"text-yellow-400":"text-mantis-400",g=h.jsxs("div",{className:"space-y-3 text-xs",children:[h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"CPI (Ciclos por Instrucción):"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Métrica fundamental que indica la eficiencia del procesador. Calculada como el cociente entre ciclos totales e instrucciones ejecutadas. Un CPI más bajo significa mejor rendimiento."})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Tiempo de CPU:"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Tiempo real transcurrido durante la ejecución del programa. Se calcula multiplicando los ciclos totales por el tiempo de cada ciclo según la velocidad configurada."})]})]}),m=h.jsxs("div",{className:"space-y-3 text-xs",children:[h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Velocidad CPU (Hz):"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Frecuencia del reloj del procesador que determina la velocidad de ejecución. Cada ciclo de reloj ejecuta una microoperación del procesador."})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-mantis-300",children:"Tiempo por Ciclo:"}),h.jsx("br",{}),h.jsx("span",{className:"text-stone-300",children:"Duración de cada ciclo calculada como 1/velocidad. Por ejemplo, 1 MHz = 1 microsegundo por ciclo."})]})]});return h.jsxs("div",{className:Q("flex flex-col gap-2 rounded-lg border border-stone-600 bg-stone-900/95 p-3 shadow-lg","min-w-[300px] max-w-[350px]",t),children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm font-bold uppercase tracking-wide text-mantis-400",children:e("computer.cpu.stats")}),h.jsx("button",{onClick:()=>o(!s),className:Q("rounded px-2 py-1 text-xs transition-colors",s?"bg-mantis-400/20 text-mantis-400":"text-stone-400 hover:bg-mantis-400/10 hover:text-mantis-400"),children:s?"−":"+"})]})}),h.jsxs("div",{className:"flex items-center gap-3 rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsx("div",{className:Q("text-2xl",p()),children:f()}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:Q("text-sm font-semibold",p()),children:n>0?"Ejecutando":"En espera"}),h.jsx("div",{className:"mt-1 text-xs text-stone-400",children:i>0?`${i} instrucciones ejecutadas`:"Sin instrucciones ejecutadas"})]})]}),s&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsx("div",{className:"mb-2 text-xs font-bold text-mantis-400",children:"Métricas principales:"}),h.jsx("div",{className:"mb-2 text-xs text-stone-400",children:"Estadísticas acumuladas del programa completo"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-stone-300",children:"Ciclos totales del programa"}),h.jsx("div",{className:"font-mono text-lg text-white",children:n})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-stone-300",children:e("computer.cpu.instruction-count")}),h.jsx("div",{className:"font-mono text-lg text-white",children:i})]})]})]}),h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Métricas de Rendimiento:"}),h.jsx(gr,{content:g,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:h.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:"💡"})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-xs text-stone-300",title:e("computer.cpu.cpi-help"),children:[e("computer.cpu.cpi"),":"]}),h.jsx("span",{className:"font-mono text-sm text-mantis-300",children:c})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-xs text-stone-300",title:`${e("computer.cpu.cpu-time-help")} (${d.toFixed(1)} s)`,children:e("computer.cpu.cpu-time")}),h.jsxs("span",{className:"font-mono text-sm text-mantis-300",children:[(u/1e3).toFixed(1)," s"]})]})]})]}),h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-800/80 p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-mantis-400",children:"Configuración Actual:"}),h.jsx(gr,{content:m,position:"top",maxWidth:400,className:"text-stone-400 transition-colors hover:text-mantis-400",children:h.jsx("button",{className:"text-xs transition-transform hover:scale-110",children:"⚙️"})})]}),h.jsx("div",{className:"space-y-1 text-xs text-stone-300",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-stone-300",children:h.jsx("strong",{children:"Velocidad CPU:"})}),h.jsxs("span",{className:"font-mono text-mantis-300",children:[r.cpuSpeed," Hz (",d.toFixed(1)," s/ciclo)"]})]})})]})]})]})});J9.displayName="CPUStats";const zde="_pushable_1q0ek_2",Bde="_front_1q0ek_15",Ude="_shadow_1q0ek_20",Vde="_edge_1q0ek_52",Ug={pushable:zde,front:Bde,shadow:Ude,edge:Vde};function Hde(){const t=Xt(),{status:e,dispatch:n,devices:i}=$n();return wu("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?h.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:h.jsxs("button",{className:Ug.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[h.jsx("div",{className:Ug.shadow}),h.jsx("div",{className:Ug.edge}),h.jsx("span",{className:Ug.front,children:t("computer.f10")})]})}):null}function Wde(){const t=Xt(),{devices:e}=$n();return e.handshake?h.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),h.jsx(hr,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:gE,springs:"handshake.STATE",className:"mx-auto my-4"}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(hr,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:mE,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var Z9={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.89 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(b)})(V7,function(n){return function(){var i={442:function(a){a.exports=n},651:function(a){a.exports=function(){var l={d:function(F,$){for(var V in $)l.o($,V)&&!l.o(F,V)&&Object.defineProperty(F,V,{enumerable:!0,get:$[V]})},o:function(F,$){return Object.prototype.hasOwnProperty.call(F,$)},r:function(F){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})}},c={};function u(F){return function($){if(Array.isArray($))return f($)}(F)||function($){if(typeof Symbol<"u"&&$[Symbol.iterator]!=null||$["@@iterator"]!=null)return Array.from($)}(F)||d(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(F,$){if(F){if(typeof F=="string")return f(F,$);var V={}.toString.call(F).slice(8,-1);return V==="Object"&&F.constructor&&(V=F.constructor.name),V==="Map"||V==="Set"?Array.from(F):V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V)?f(F,$):void 0}}function f(F,$){($==null||$>F.length)&&($=F.length);for(var V=0,k=Array($);V<$;V++)k[V]=F[V];return k}function p(F){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},p(F)}function g(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,v(k.key),k)}}function m(F,$,V){return($=v($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function v(F){var $=function(V,k){if(p(V)!="object"||!V)return V;var P=V[Symbol.toPrimitive];if(P!==void 0){var L=P.call(V,k);if(p(L)!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return p($)=="symbol"?$:$+""}l.r(c),l.d(c,{SimpleKeyboard:function(){return J},default:function(){return le}});var y=function(){return F=function k(P){var L=P.getOptions,R=P.getCaretPosition,Y=P.getCaretPositionEnd,G=P.dispatch;(function(ne,Z){if(!(ne instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,k),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(ne){return ne&&!(ne[0]==="{"&&ne[ne.length-1]==="}")}),this.getOptions=L,this.getCaretPosition=R,this.getCaretPositionEnd=Y,this.dispatch=G,k.bindMethods(k,this)},$=[{key:"getButtonType",value:function(k){return k.includes("{")&&k.includes("}")&&k!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(k){var P=this.getButtonType(k),L=k.replace("{","").replace("}",""),R="";return P!=="standardBtn"&&(R=" hg-button-".concat(L)),"hg-".concat(P).concat(R)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(k,P){return(P=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),P):P||this.getDefaultDiplay())[k]||k}},{key:"getUpdatedInput",value:function(k,P,L){var R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:L,Y=arguments.length>4&&arguments[4]!==void 0&&arguments[4],G=this.getOptions(),ne=[L,R,Y],Z=P;return(k==="{bksp}"||k==="{backspace}")&&Z.length>0?Z=this.removeAt.apply(this,[Z].concat(ne)):(k==="{delete}"||k==="{forwarddelete}")&&Z.length>0?Z=this.removeForwardsAt.apply(this,[Z].concat(ne)):k==="{space}"?Z=this.addStringAt.apply(this,[Z," "].concat(ne)):k!=="{tab}"||typeof G.tabCharOnTab=="boolean"&&G.tabCharOnTab===!1?k!=="{enter}"&&k!=="{numpadenter}"||!G.newLineOnEnter?k.includes("numpad")&&Number.isInteger(Number(k[k.length-2]))?Z=this.addStringAt.apply(this,[Z,k[k.length-2]].concat(ne)):k==="{numpaddivide}"?Z=this.addStringAt.apply(this,[Z,"/"].concat(ne)):k==="{numpadmultiply}"?Z=this.addStringAt.apply(this,[Z,"*"].concat(ne)):k==="{numpadsubtract}"?Z=this.addStringAt.apply(this,[Z,"-"].concat(ne)):k==="{numpadadd}"?Z=this.addStringAt.apply(this,[Z,"+"].concat(ne)):k==="{numpaddecimal}"?Z=this.addStringAt.apply(this,[Z,"."].concat(ne)):k==="{"||k==="}"?Z=this.addStringAt.apply(this,[Z,k].concat(ne)):k.includes("{")||k.includes("}")||(Z=this.addStringAt.apply(this,[Z,k].concat(ne))):Z=this.addStringAt.apply(this,[Z,`
`].concat(ne)):Z=this.addStringAt.apply(this,[Z,"	"].concat(ne)),G.debug&&console.log("Input will be: "+Z),Z}},{key:"updateCaretPos",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],L=this.updateCaretPosAction(k,P);this.dispatch(function(R){R.setCaretPosition(L)})}},{key:"updateCaretPosAction",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],L=this.getOptions(),R=this.getCaretPosition();return R!=null&&(P?R>0&&(R-=k):R+=k),L.debug&&console.log("Caret at:",R),R}},{key:"addStringAt",value:function(k,P){var L,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k.length,G=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return R||R===0?(L=[k.slice(0,R),P,k.slice(Y)].join(""),this.isMaxLengthReached()||G&&this.updateCaretPos(P.length)):L=k+P,L}},{key:"removeAt",value:function(k){var P,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.length,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(L===0&&R===0)return k;if(L===R){var G=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;L&&L>=0?k.substring(L-2,L).match(G)?(P=k.substr(0,L-2)+k.substr(L),Y&&this.updateCaretPos(2,!0)):(P=k.substr(0,L-1)+k.substr(L),Y&&this.updateCaretPos(1,!0)):k.slice(-2).match(G)?(P=k.slice(0,-2),Y&&this.updateCaretPos(2,!0)):(P=k.slice(0,-1),Y&&this.updateCaretPos(1,!0))}else P=k.slice(0,L)+k.slice(R),Y&&this.dispatch(function(ne){ne.setCaretPosition(L)});return P}},{key:"removeForwardsAt",value:function(k){var P,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.length,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.length,Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return k!=null&&k.length&&L!==null?(L===R?P=k.substring(L,L+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?k.substr(0,L)+k.substr(L+2):k.substr(0,L)+k.substr(L+1):(P=k.slice(0,L)+k.slice(R),Y&&this.dispatch(function(G){G.setCaretPosition(L)})),P):k}},{key:"handleMaxLength",value:function(k,P){var L=this.getOptions(),R=L.maxLength,Y=k[L.inputName||"default"],G=P.length-1>=R;if(P.length<=Y.length)return!1;if(Number.isInteger(R))return L.debug&&console.log("maxLength (num) reached:",G),G?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(p(R)==="object"){var ne=P.length-1>=R[L.inputName||"default"];return L.debug&&console.log("maxLength (obj) reached:",ne),ne?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(k){return k?k.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(P,L){return L.length?P+L[0].toUpperCase()+L.slice(1):P}):""}},{key:"chunkArray",value:function(k,P){return u(Array(Math.ceil(k.length/P))).map(function(L,R){return k.slice(P*R,P+P*R)})}},{key:"escapeRegex",value:function(k){return k.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(k,P){var L=k,R=P.indexOf("‫");return R<k&&R!=-1&&L--,P.indexOf("‬")<k&&R!=-1&&L--,L<0?0:L}},{key:"isConstructor",value:function(k){try{Reflect.construct(String,[],k)}catch{return!1}return!0}}],V=[{key:"bindMethods",value:function(k,P){var L,R=function(G,ne){var Z=typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(!Z){if(Array.isArray(G)||(Z=d(G))||ne){Z&&(G=Z);var Ne=0,ze=function(){};return{s:ze,n:function(){return Ne>=G.length?{done:!0}:{done:!1,value:G[Ne++]}},e:function(me){throw me},f:ze}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ue,De=!0,Je=!1;return{s:function(){Z=Z.call(G)},n:function(){var me=Z.next();return De=me.done,me},e:function(me){Je=!0,Ue=me},f:function(){try{De||Z.return==null||Z.return()}finally{if(Je)throw Ue}}}}(Object.getOwnPropertyNames(k.prototype));try{for(R.s();!(L=R.n()).done;){var Y=L.value;Y==="constructor"||Y==="bindMethods"||(P[Y]=P[Y].bind(P))}}catch(G){R.e(G)}finally{R.f()}}}],$&&g(F.prototype,$),V&&g(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}();m(y,"noop",function(){});var w=y;function x(F){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},x(F)}function S(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,E(k.key),k)}}function _(F,$,V){return($=E($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function E(F){var $=function(V,k){if(x(V)!="object"||!V)return V;var P=V[Symbol.toPrimitive];if(P!==void 0){var L=P.call(V,k);if(x(L)!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return x($)=="symbol"?$:$+""}var C=function(){return F=function k(P){var L=this,R=P.dispatch,Y=P.getOptions;(function(G,ne){if(!(G instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,k),_(this,"getOptions",void 0),_(this,"dispatch",void 0),_(this,"isModifierKey",function(G){return G.altKey||G.ctrlKey||G.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(G.code||G.key||L.keyCodeToKey(G==null?void 0:G.keyCode))}),this.dispatch=R,this.getOptions=Y,w.bindMethods(k,this)},$=[{key:"handleHighlightKeyDown",value:function(k){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var L=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(R){var Y,G,ne=R.getButtonElement(L),Z=R.getButtonElement("{".concat(L,"}"));if(ne)Y=ne,G=L;else{if(!Z)return;Y=Z,G="{".concat(L,"}")}var Ne,ze,Ue,De,Je=function(St){St.style.background=P.physicalKeyboardHighlightBgColor||"#dadce4",St.style.color=P.physicalKeyboardHighlightTextColor||"black"};if(Y)if(Array.isArray(Y)){if(Y.forEach(function(St){return Je(St)}),P.physicalKeyboardHighlightPress)if(P.physicalKeyboardHighlightPressUsePointerEvents)(Ne=Y[0])===null||Ne===void 0||(ze=Ne.onpointerdown)===null||ze===void 0||ze.call(Ne,k);else if(P.physicalKeyboardHighlightPressUseClick){var me;(me=Y[0])===null||me===void 0||me.click()}else R.handleButtonClicked(G,k)}else Je(Y),P.physicalKeyboardHighlightPress&&(P.physicalKeyboardHighlightPressUsePointerEvents?(Ue=Y)===null||Ue===void 0||(De=Ue.onpointerdown)===null||De===void 0||De.call(Ue,k):P.physicalKeyboardHighlightPressUseClick?Y.click():R.handleButtonClicked(G,k))})}},{key:"handleHighlightKeyUp",value:function(k){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(k)&&(k.preventDefault(),k.stopImmediatePropagation());var L=this.getSimpleKeyboardLayoutKey(k);this.dispatch(function(R){var Y,G,ne,Z=R.getButtonElement(L)||R.getButtonElement("{".concat(L,"}")),Ne=function(ze){ze.removeAttribute&&ze.removeAttribute("style")};Z&&(Array.isArray(Z)?(Z.forEach(function(ze){return Ne(ze)}),P.physicalKeyboardHighlightPressUsePointerEvents&&((Y=Z[0])===null||Y===void 0||(G=Y.onpointerup)===null||G===void 0||G.call(Y,k))):(Ne(Z),P.physicalKeyboardHighlightPressUsePointerEvents&&(Z==null||(ne=Z.onpointerup)===null||ne===void 0||ne.call(Z,k))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(k){var P,L="",R=k.code||k.key||this.keyCodeToKey(k==null?void 0:k.keyCode);return(L=R!=null&&R.includes("Numpad")||R!=null&&R.includes("Shift")||R!=null&&R.includes("Space")||R!=null&&R.includes("Backspace")||R!=null&&R.includes("Control")||R!=null&&R.includes("Alt")||R!=null&&R.includes("Meta")?k.code||"":k.key||this.keyCodeToKey(k==null?void 0:k.keyCode)||"").length>1?(P=L)===null||P===void 0?void 0:P.toLowerCase():L}},{key:"keyCodeToKey",value:function(k){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[k]||""}}],$&&S(F.prototype,$),V&&S(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}();function N(F){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},N(F)}function M(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,I(k.key),k)}}function j(F,$,V){return($=I($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function I(F){var $=function(V,k){if(N(V)!="object"||!V)return V;var P=V[Symbol.toPrimitive];if(P!==void 0){var L=P.call(V,k);if(N(L)!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return N($)=="symbol"?$:$+""}var O=function(){return F=function k(P){var L=P.utilities,R=P.options;(function(Y,G){if(!(Y instanceof G))throw new TypeError("Cannot call a class as a function")})(this,k),j(this,"utilities",void 0),j(this,"options",void 0),j(this,"candidateBoxElement",void 0),j(this,"pageIndex",0),j(this,"pageSize",void 0),this.utilities=L,this.options=R,w.bindMethods(k,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},$=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(k){var P=this,L=k.candidateValue,R=k.targetElement,Y=k.onSelect;if(L&&L.length){var G=this.utilities.chunkArray(L.split(" "),this.pageSize);this.renderPage({candidateListPages:G,targetElement:R,pageIndex:this.pageIndex,nbPages:G.length,onItemSelected:function(ne,Z){Y(ne,Z),P.destroy()}})}}},{key:"renderPage",value:function(k){var P,L=this,R=k.candidateListPages,Y=k.targetElement,G=k.pageIndex,ne=k.nbPages,Z=k.onItemSelected;(P=this.candidateBoxElement)===null||P===void 0||P.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Ne=document.createElement("ul");Ne.className="hg-candidate-box-list",R[G].forEach(function(wn){var Fl,Es=document.createElement("li"),la=function(){var ca=new(L.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(ca,"target",{value:Es}),ca};Es.className="hg-candidate-box-list-item",Es.innerHTML=((Fl=L.options.display)===null||Fl===void 0?void 0:Fl[wn])||wn,L.options.useTouchEvents?Es.ontouchstart=function(ca){return Z(wn,ca||la())}:Es.onclick=function(){var ca=arguments.length>0&&arguments[0]!==void 0?arguments[0]:la();return Z(wn,ca)},Ne.appendChild(Es)});var ze=G>0,Ue=document.createElement("div");Ue.classList.add("hg-candidate-box-prev"),ze&&Ue.classList.add("hg-candidate-box-btn-active");var De=function(){ze&&L.renderPage({candidateListPages:R,targetElement:Y,pageIndex:G-1,nbPages:ne,onItemSelected:Z})};this.options.useTouchEvents?Ue.ontouchstart=De:Ue.onclick=De,this.candidateBoxElement.appendChild(Ue),this.candidateBoxElement.appendChild(Ne);var Je=G<ne-1,me=document.createElement("div");me.classList.add("hg-candidate-box-next"),Je&&me.classList.add("hg-candidate-box-btn-active");var St=function(){Je&&L.renderPage({candidateListPages:R,targetElement:Y,pageIndex:G+1,nbPages:ne,onItemSelected:Z})};this.options.useTouchEvents?me.ontouchstart=St:me.onclick=St,this.candidateBoxElement.appendChild(me),Y.prepend(this.candidateBoxElement)}}],$&&M(F.prototype,$),V&&M(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}(),H=O;function D(F){return function($){if(Array.isArray($))return K($)}(F)||function($){if(typeof Symbol<"u"&&$[Symbol.iterator]!=null||$["@@iterator"]!=null)return Array.from($)}(F)||function($,V){if($){if(typeof $=="string")return K($,V);var k={}.toString.call($).slice(8,-1);return k==="Object"&&$.constructor&&(k=$.constructor.name),k==="Map"||k==="Set"?Array.from($):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?K($,V):void 0}}(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function K(F,$){($==null||$>F.length)&&($=F.length);for(var V=0,k=Array($);V<$;V++)k[V]=F[V];return k}function X(F){return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},X(F)}function te(F,$){var V=Object.keys(F);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(F);$&&(k=k.filter(function(P){return Object.getOwnPropertyDescriptor(F,P).enumerable})),V.push.apply(V,k)}return V}function U(F,$){for(var V=0;V<$.length;V++){var k=$[V];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(F,ie(k.key),k)}}function z(F,$,V){return($=ie($))in F?Object.defineProperty(F,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[$]=V,F}function ie(F){var $=function(V,k){if(X(V)!="object"||!V)return V;var P=V[Symbol.toPrimitive];if(P!==void 0){var L=P.call(V,k);if(X(L)!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(V)}(F,"string");return X($)=="symbol"?$:$+""}var ye=function(){return F=function k(P,L){var R=this;if(function(De,Je){if(!(De instanceof Je))throw new TypeError("Cannot call a class as a function")}(this,k),z(this,"input",void 0),z(this,"options",void 0),z(this,"utilities",void 0),z(this,"caretPosition",void 0),z(this,"caretPositionEnd",void 0),z(this,"keyboardDOM",void 0),z(this,"keyboardPluginClasses",void 0),z(this,"keyboardDOMClass",void 0),z(this,"buttonElements",void 0),z(this,"currentInstanceName",void 0),z(this,"allKeyboardInstances",void 0),z(this,"keyboardInstanceNames",void 0),z(this,"isFirstKeyboardInstance",void 0),z(this,"physicalKeyboard",void 0),z(this,"modules",void 0),z(this,"activeButtonClass",void 0),z(this,"holdInteractionTimeout",void 0),z(this,"holdTimeout",void 0),z(this,"isMouseHold",void 0),z(this,"initialized",void 0),z(this,"candidateBox",void 0),z(this,"keyboardRowsDOM",void 0),z(this,"defaultName","default"),z(this,"activeInputElement",null),z(this,"handleParams",function(De,Je){var me,St,wn;if(typeof De=="string")me=De.split(".").join(""),St=document.querySelector(".".concat(me)),wn=Je;else if(De instanceof HTMLDivElement){if(!De.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");me=De.className.split(" ")[0],St=De,wn=Je}else me="simple-keyboard",St=document.querySelector(".".concat(me)),wn=De;return{keyboardDOMClass:me,keyboardDOM:St,options:wn}}),z(this,"getOptions",function(){return R.options}),z(this,"getCaretPosition",function(){return R.caretPosition}),z(this,"getCaretPositionEnd",function(){return R.caretPositionEnd}),z(this,"registerModule",function(De,Je){R.modules[De]||(R.modules[De]={}),Je(R.modules[De])}),z(this,"getKeyboardClassString",function(){for(var De=arguments.length,Je=new Array(De),me=0;me<De;me++)Je[me]=arguments[me];return[R.keyboardDOMClass].concat(Je).filter(function(St){return!!St}).join(" ")}),typeof window<"u"){var Y=this.handleParams(P,L),G=Y.keyboardDOMClass,ne=Y.keyboardDOM,Z=Y.options,Ne=Z===void 0?{}:Z;this.utilities=new w({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=ne,this.options=function(De){for(var Je=1;Je<arguments.length;Je++){var me=arguments[Je]!=null?arguments[Je]:{};Je%2?te(Object(me),!0).forEach(function(St){z(De,St,me[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(me)):te(Object(me)).forEach(function(St){Object.defineProperty(De,St,Object.getOwnPropertyDescriptor(me,St))})}return De}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Ne),this.keyboardPluginClasses="",w.bindMethods(k,this);var ze=this.options.inputName,Ue=ze===void 0?this.defaultName:ze;if(this.input={},this.input[Ue]="",this.keyboardDOMClass=G,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new C({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new H({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(G,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},$=[{key:"setCaretPosition",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k;this.caretPosition=k,this.caretPositionEnd=P}},{key:"getInputCandidates",value:function(k){var P=this,L=this.options,R=L.layoutCandidates,Y=L.layoutCandidatesCaseSensitiveMatch;if(!R||X(R)!=="object")return{};var G=Object.keys(R).filter(function(Ne){var ze=k.substring(0,P.getCaretPositionEnd()||0)||k,Ue=new RegExp("".concat(P.utilities.escapeRegex(Ne),"$"),Y?"g":"gi");return!!D(ze.matchAll(Ue)).length});if(G.length>1){var ne=G.sort(function(Ne,ze){return ze.length-Ne.length})[0];return{candidateKey:ne,candidateValue:R[ne]}}if(G.length){var Z=G[0];return{candidateKey:Z,candidateValue:R[Z]}}return{}}},{key:"showCandidatesBox",value:function(k,P,L){var R=this;this.candidateBox&&this.candidateBox.show({candidateValue:P,targetElement:L,onSelect:function(Y,G){var ne=R.options,Z=ne.layoutCandidatesCaseSensitiveMatch,Ne=ne.disableCandidateNormalization,ze=ne.enableLayoutCandidatesKeyPress,Ue=Y;Ne||(Ue=Y.normalize("NFD")),typeof R.options.beforeInputUpdate=="function"&&R.options.beforeInputUpdate(R);var De=R.getInput(R.options.inputName,!0),Je=R.getCaretPositionEnd()||0,me=De.substring(0,Je||0)||De,St=new RegExp("".concat(R.utilities.escapeRegex(k),"$"),Z?"g":"gi"),wn=me.replace(St,Ue),Fl=De.replace(me,wn),Es=wn.length-me.length,la=(Je||De.length)+Es;la<0&&(la=0),R.setInput(Fl,R.options.inputName,!0),R.setCaretPosition(la),ze&&typeof R.options.onKeyPress=="function"&&R.options.onKeyPress(Y,G),typeof R.options.onChange=="function"&&R.options.onChange(R.getInput(R.options.inputName,!0),G),typeof R.options.onChangeAll=="function"&&R.options.onChangeAll(R.getAllInputs(),G)}})}},{key:"handleButtonClicked",value:function(k,P){var L=this.options,R=L.inputName,Y=R===void 0?this.defaultName:R,G=L.debug;if(k!=="{//}"){this.input[Y]||(this.input[Y]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var ne=this.utilities.getUpdatedInput(k,this.input[Y],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(k)&&this.activeInputElement&&this.input[Y]&&this.input[Y]===ne&&this.caretPosition===0&&this.caretPositionEnd===ne.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(k,P);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(k,P),this.input[Y]!==ne&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(ne))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,ne))return;var Z=this.utilities.getUpdatedInput(k,this.input[Y],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(Z,this.options.inputName,!0),G&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),P==null?void 0:P.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),P),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),P),P!=null&&P.target&&this.options.enableLayoutCandidates){var Ne,ze=this.getInputCandidates(ne),Ue=ze.candidateKey,De=ze.candidateValue;Ue&&De?this.showCandidatesBox(Ue,De,this.keyboardDOM):(Ne=this.candidateBox)===null||Ne===void 0||Ne.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),G&&console.log("Key pressed:",k)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(k){this.options.syncInstanceInputs?this.dispatch(function(P){P.isMouseHold=k}):this.isMouseHold=k}},{key:"handleButtonMouseDown",value:function(k,P){var L=this;P&&(this.options.preventMouseDownDefault&&P.preventDefault(),this.options.stopMouseDownPropagation&&P.stopPropagation(),P.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(L.getMouseHold()&&(!k.includes("{")&&!k.includes("}")||k==="{delete}"||k==="{backspace}"||k==="{bksp}"||k==="{space}"||k==="{tab}")||k==="{arrowright}"||k==="{arrowleft}"||k==="{arrowup}"||k==="{arrowdown}")&&(L.options.debug&&console.log("Button held:",k),L.handleButtonHold(k)),clearTimeout(L.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(k,P){var L=this;P&&(this.options.preventMouseUpDefault&&P.preventDefault&&P.preventDefault(),this.options.stopMouseUpPropagation&&P.stopPropagation&&P.stopPropagation(),!(P.target===this.keyboardDOM||P.target&&this.keyboardDOM.contains(P.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(P.target===this.candidateBox.candidateBoxElement||P.target&&this.candidateBox.candidateBoxElement.contains(P.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(R){R.classList.remove(L.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),k&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(k,P)}},{key:"handleKeyboardContainerMouseDown",value:function(k){this.options.preventMouseDownDefault&&k.preventDefault()}},{key:"handleButtonHold",value:function(k){var P=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){P.getMouseHold()?(P.handleButtonClicked(k),P.handleButtonHold(k)):clearTimeout(P.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var k=this;this.dispatch(function(P){P.replaceInput(k.input),P.setCaretPosition(k.caretPosition,k.caretPositionEnd)})}},{key:"clearInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[k]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,P=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!P&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[k].replace("‫","").replace("‬","")+"‬":this.input[k]}},{key:"getAllInputs",value:function(){var k=this,P={};return Object.keys(this.input).forEach(function(L){P[L]=k.getInput(L,!0)}),P}},{key:"setInput",value:function(k){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,L=arguments.length>2?arguments[2]:void 0;this.input[P]=k,!L&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(k){this.input=k}},{key:"setOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=this.changedOptions(k);this.options=Object.assign(this.options,k),P.length&&(this.options.debug&&console.log("changedOptions",P),this.onSetOptions(P),this.render())}},{key:"changedOptions",value:function(k){var P=this;return Object.keys(k).filter(function(L){return JSON.stringify(k[L])!==JSON.stringify(P.options[L])})}},{key:"onSetOptions",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];k.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(k.includes("layoutCandidatesPageSize")||k.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new H({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(k){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(P){k(window.SimpleKeyboardInstances[P],P)})}},{key:"addButtonTheme",value:function(k,P){var L=this;P&&k&&(k.split(" ").forEach(function(R){P.split(" ").forEach(function(Y){L.options.buttonTheme||(L.options.buttonTheme=[]);var G=!1;L.options.buttonTheme.map(function(ne){if(ne!=null&&ne.class.split(" ").includes(Y)){G=!0;var Z=ne.buttons.split(" ");Z.includes(R)||(G=!0,Z.push(R),ne.buttons=Z.join(" "))}return ne}),G||L.options.buttonTheme.push({class:Y,buttons:k})})}),this.render())}},{key:"removeButtonTheme",value:function(k,P){var L=this;if(!k&&!P)return this.options.buttonTheme=[],void this.render();k&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(k.split(" ").forEach(function(R){var Y;(Y=L.options)===null||Y===void 0||(Y=Y.buttonTheme)===null||Y===void 0||Y.map(function(G,ne){if(G&&P&&P.includes(G.class)||!P){var Z,Ne,ze=(Z=G)===null||Z===void 0?void 0:Z.buttons.split(" ").filter(function(Ue){return Ue!==R});G&&ze!=null&&ze.length?G.buttons=ze.join(" "):((Ne=L.options.buttonTheme)===null||Ne===void 0||Ne.splice(ne,1),G=null)}return G})}),this.render())}},{key:"getButtonElement",value:function(k){var P,L=this.buttonElements[k];return L&&(P=L.length>1?L:L[0]),P}},{key:"inputPatternIsValid",value:function(k){var P,L=this.options.inputPattern;if((P=L instanceof RegExp?L:L[this.options.inputName||this.defaultName])&&k){var R=P.test(k);return this.options.debug&&console.log('inputPattern ("'.concat(P,'"): ').concat(R?"passed":"did not pass!")),R}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var k=this.options.physicalKeyboardHighlightPreventDefault,P=k!==void 0&&k;document.addEventListener("keyup",this.handleKeyUp,P),document.addEventListener("keydown",this.handleKeyDown,P),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(k){this.caretEventHandler(k),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(k)}},{key:"handleKeyDown",value:function(k){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(k)}},{key:"handleMouseUp",value:function(k){this.caretEventHandler(k)}},{key:"handleTouchEnd",value:function(k){this.caretEventHandler(k)}},{key:"handleSelect",value:function(k){this.caretEventHandler(k)}},{key:"handleSelectionChange",value:function(k){navigator.userAgent.includes("Firefox")||this.caretEventHandler(k)}},{key:"caretEventHandler",value:function(k){var P,L=this;k.target.tagName&&(P=k.target.tagName.toLowerCase()),this.dispatch(function(R){var Y=k.target===R.keyboardDOM||k.target&&R.keyboardDOM.contains(k.target);if(L.options.syncInstanceInputs&&Array.isArray(k.path)&&(Y=k.path.some(function(Z){var Ne;return Z==null||(Ne=Z.hasAttribute)===null||Ne===void 0?void 0:Ne.call(Z,"data-skInstance")})),(P==="textarea"||P==="input"&&["text","search","url","tel","password"].includes(k.target.type))&&!R.options.disableCaretPositioning){var G=k.target.selectionStart,ne=k.target.selectionEnd;R.options.rtl&&(G=R.utilities.getRtlOffset(G,R.getInput()),ne=R.utilities.getRtlOffset(ne,R.getInput())),R.setCaretPosition(G,ne),R.activeInputElement=k.target,R.options.debug&&console.log("Caret at: ",R.getCaretPosition(),R.getCaretPositionEnd(),k&&k.target.tagName.toLowerCase(),"(".concat(R.keyboardDOMClass,")"),k==null?void 0:k.type)}else!R.options.disableCaretPositioning&&Y||(k==null?void 0:k.type)==="selectionchange"||(R.setCaretPosition(null),R.activeInputElement=null,R.options.debug&&console.log('Caret position reset due to "'.concat(k==null?void 0:k.type,'" event'),k))})}},{key:"recurseButtons",value:function(k){var P=this;k&&Object.keys(this.buttonElements).forEach(function(L){return P.buttonElements[L].forEach(k)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var k=this.options.physicalKeyboardHighlightPreventDefault,P=k!==void 0&&k;document.removeEventListener("keyup",this.handleKeyUp,P),document.removeEventListener("keydown",this.handleKeyDown,P),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(L){L&&(L.onpointerdown=null,L.onpointerup=null,L.onpointercancel=null,L.ontouchstart=null,L.ontouchend=null,L.ontouchcancel=null,L.onclick=null,L.onmousedown=null,L.onmouseup=null,L.remove(),L=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(k){var P=this.options.buttonTheme,L=[];return Array.isArray(P)&&P.forEach(function(R){if(R&&R.class&&typeof R.class=="string"&&R.buttons&&typeof R.buttons=="string"){var Y=R.class.split(" ");R.buttons.split(" ").includes(k)&&(L=[].concat(D(L),D(Y)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',R)}),L}},{key:"setDOMButtonAttributes",value:function(k,P){var L=this.options.buttonAttributes;Array.isArray(L)&&L.forEach(function(R){R.attribute&&typeof R.attribute=="string"&&R.value&&typeof R.value=="string"&&R.buttons&&typeof R.buttons=="string"?R.buttons.split(" ").includes(k)&&P(R.attribute,R.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',R)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(k){var P;if((P=k.target.classList)!==null&&P!==void 0&&P.contains("hg-button"))return k.preventDefault(),k.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var k=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(P){var L=k.utilities.isConstructor(P)?new P(k):P(k);L.init&&L.init(k)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(k,P){return!!this.modules[k]&&this.modules[k][P]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(k,P,L,R){var Y=this,G=Array.from(k.children),ne=0;return G.length&&L.forEach(function(Z,Ne){var ze=R[Ne];if(!(ze&&ze>Z))return!1;var Ue=Z-ne,De=ze-ne,Je=document.createElement("div");Je.className+="hg-button-container";var me="".concat(Y.options.layoutName,"-r").concat(P,"c").concat(Ne);Je.setAttribute("data-skUID",me);var St=G.splice(Ue,De-Ue+1);ne+=De-Ue,St.forEach(function(wn){return Je.appendChild(wn)}),G.splice(Ue,0,Je),k.innerHTML="",G.forEach(function(wn){return k.appendChild(wn)}),Y.options.debug&&console.log("rowDOMContainer",St,Ue,De,ne+1)}),k}},{key:"render",value:function(){var k=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var P="hg-layout-".concat(this.options.layoutName),L=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},R=this.options.useTouchEvents||!1,Y=R?"hg-touch-events":"",G=this.options.useMouseEvents||!1,ne=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,P,this.keyboardPluginClasses,Y),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",L[this.options.layoutName||this.defaultName].forEach(function(Z,Ne){var ze=Z.split(" ");k.options.excludeFromLayout&&k.options.excludeFromLayout[k.options.layoutName||k.defaultName]&&(ze=ze.filter(function(me){return k.options.excludeFromLayout&&!k.options.excludeFromLayout[k.options.layoutName||k.defaultName].includes(me)}));var Ue=document.createElement("div");Ue.className+="hg-row";var De=[],Je=[];ze.forEach(function(me,St){var wn,Fl=!ne&&typeof me=="string"&&me.length>1&&me.indexOf("[")===0,Es=!ne&&typeof me=="string"&&me.length>1&&me.indexOf("]")===me.length-1;Fl&&(De.push(St),me=me.replace(/\[/g,"")),Es&&(Je.push(St),me=me.replace(/\]/g,""));var la=k.utilities.getButtonClass(me),ca=k.utilities.getButtonDisplayName(me,k.options.display,k.options.mergeDisplay),D7=k.options.useButtonTag?"button":"div",Fn=document.createElement(D7);Fn.className+="hg-button ".concat(la),(wn=Fn.classList).add.apply(wn,D(k.getButtonThemeClasses(me))),k.setDOMButtonAttributes(me,function(on,F7){Fn.setAttribute(on,F7)}),k.activeButtonClass="hg-activeButton",!k.utilities.pointerEventsSupported()||R||G?R?(Fn.ontouchstart=function(on){k.handleButtonClicked(me,on),k.handleButtonMouseDown(me,on)},Fn.ontouchend=function(on){k.handleButtonMouseUp(me,on)},Fn.ontouchcancel=function(on){k.handleButtonMouseUp(me,on)}):(Fn.onclick=function(on){k.setMouseHold(!1),typeof k.options.onKeyReleased=="function"||k.options.useMouseEvents&&k.options.clickOnMouseDown||k.handleButtonClicked(me,on)},Fn.onmousedown=function(on){(typeof k.options.onKeyReleased=="function"||k.options.useMouseEvents&&k.options.clickOnMouseDown)&&!k.isMouseHold&&k.handleButtonClicked(me,on),k.handleButtonMouseDown(me,on)},Fn.onmouseup=function(on){k.handleButtonMouseUp(me,on)}):(Fn.onpointerdown=function(on){k.handleButtonClicked(me,on),k.handleButtonMouseDown(me,on)},Fn.onpointerup=function(on){k.handleButtonMouseUp(me,on)},Fn.onpointercancel=function(on){k.handleButtonMouseUp(me,on)}),Fn.setAttribute("data-skBtn",me);var $7="".concat(k.options.layoutName,"-r").concat(Ne,"b").concat(St);Fn.setAttribute("data-skBtnUID",$7);var TA=document.createElement("span");TA.innerHTML=ca,Fn.appendChild(TA),k.buttonElements[me]||(k.buttonElements[me]=[]),k.buttonElements[me].push(Fn),Ue.appendChild(Fn)}),Ue=k.parseRowDOMContainers(Ue,Ne,De,Je),k.keyboardRowsDOM.appendChild(Ue)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||R||G?R?(document.ontouchend=function(Z){return k.handleButtonMouseUp(void 0,Z)},document.ontouchcancel=function(Z){return k.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.ontouchstart=function(Z){return k.handleKeyboardContainerMouseDown(Z)}):R||(document.onmouseup=function(Z){return k.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.onmousedown=function(Z){return k.handleKeyboardContainerMouseDown(Z)}):(document.onpointerup=function(Z){return k.handleButtonMouseUp(void 0,Z)},this.keyboardDOM.onpointerdown=function(Z){return k.handleKeyboardContainerMouseDown(Z)}),this.onInit())}}],$&&U(F.prototype,$),V&&U(F,V),Object.defineProperty(F,"prototype",{writable:!1}),F;var F,$,V}(),J=ye,le=J;return c}()}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return m},default:function(){return v}});var a=s(442);function l(y){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},l(y)}function c(y,w){var x=Object.keys(y);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(y);w&&(S=S.filter(function(_){return Object.getOwnPropertyDescriptor(y,_).enumerable})),x.push.apply(x,S)}return x}function u(y){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?c(Object(x),!0).forEach(function(S){d(y,S,x[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(x)):c(Object(x)).forEach(function(S){Object.defineProperty(y,S,Object.getOwnPropertyDescriptor(x,S))})}return y}function d(y,w,x){return(w=function(S){var _=function(E,C){if(l(E)!="object"||!E)return E;var N=E[Symbol.toPrimitive];if(N!==void 0){var M=N.call(E,C);if(l(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(E)}(S,"string");return l(_)=="symbol"?_:_+""}(w))in y?Object.defineProperty(y,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):y[w]=x,y}var f=function(y){return u(u({},y),{},{keyboardRef:null})},p=s(651),g=s.n(p),m=function(y){var w=y.baseClass||"react-simple-keyboard",x=a.useRef(null),S=a.useRef(null),_=a.useRef(null),E=a.useRef(y);return a.useEffect(function(){return function(){_.current&&_.current.destroy(),x.current=!1}},[]),a.useEffect(function(){var C=function(O){return u(u({},O),{},{theme:"simple-keyboard ".concat(O.theme||"hg-theme-default")})}(y);if(!x.current){x.current=!0,C.debug&&console.log("ReactSimpleKeyboard: Init");var N=S.current,M=".".concat(w);_.current=new(g())(N||M,C),C.keyboardRef&&C.keyboardRef(_.current)}var j=function(O,H){var D=f(H),K=f(O);return Object.keys(D).filter(function(X){return D[X]!==K[X]})}(E.current,C);if(j.length){var I=_.current;E.current=C,I==null||I.setOptions(C),C.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",j)}},[x,w,E,y]),a.createElement("div",{className:w,ref:S})},v=m}(),o}()})})(Z9);var Gde=Z9.exports;const Kde=Yc(Gde),qde={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y u i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y U I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w é r t y ú í ó p ́ +","{lock} á s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W É R T Y Ú Í Ó P ̈ *","{lock} Á S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y ü i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y Ü I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},Yde={en:{"{bksp}":"Backspace ⌫","{enter}":"Enter ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Caps Lock ⇪","{space}":"Space"},es:{"{bksp}":"⌫","{enter}":"Intro ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Bloq Mayús ⇪","{space}":"Espacio"}},VR="Á É Í Ó Ú á é í ó ú ́",HR="Ü ü ̈";function Xde(){const t=CC(),e=Xt(),{status:n,dispatch:i,devices:r}=$n(),[s,o]=b.useState("none"),[a,l]=b.useState(!1),[c,u]=b.useState(!1),d=b.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),f=b.useCallback(p=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",p)},[n,i,r.keyboard]);return r.keyboard?h.jsxs("div",{className:"absolute left-[1600px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),h.jsx(Kde,{theme:Q("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:qde,display:Yde[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:VR},{class:"hg-diaeresisDeadKeyButton",buttons:HR}],disableButtonHold:!0,onKeyPress:p=>{if(p==="{shiftleft}"||p==="{shiftright}"){o(g=>g==="none"?"once":"none");return}if(p==="{lock}"){o(g=>g==="none"?"lock":"none");return}if(t==="es"){if(a){VR.includes(p)&&(l(!1),s==="once"&&o("none"),f(p));return}else if(p==="́"){l(!0);return}if(c){HR.includes(p)&&(u(!1),s==="once"&&o("none"),f(p));return}else if(p==="̈"){u(!0);return}}s==="once"&&o("none"),f(p==="{bksp}"?"\b":p==="{enter}"?`
`:p==="{tab}"?"	":p==="{space}"?" ":p)}})]}):null}function Jde(){const t=Xt(),{devices:e}=$n(),n=it(vE).toArray();return e.leds?h.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),h.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>h.jsxs("div",{className:"flex w-7 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:r}),h.jsx("div",{className:Q("relative size-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:h.jsx("div",{className:Q("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})})]},r))})]}):null}function Zde(){const t=Xt(),e=it(lQ),n=it(Ie.IP),i=it(LD),r=it(DD),s=it(Ie.SP),o=it(RC),a=it(v2),l=bD(),c=a||l.pic||l.handshake!==null,u=()=>{const g=[];for(let m=0;m<256;m+=16){const v=e.slice(m,m+16);g.push(v)}return g},d=16,f=Math.floor(Number(n.valueOf())/d),p=Number(n.valueOf())%d;return h.jsxs("div",{className:"absolute left-[800px] top-[-160px] z-10 size-auto rounded-lg border border-stone-600 bg-stone-900 shadow-2xl [&_*]:z-20","data-testid":"memory-component",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white shadow",children:t("computer.memory.name")}),h.jsx("div",{className:"m-4 overflow-x-auto",children:h.jsxs("table",{className:"mx-auto w-auto min-w-[600px] border-separate text-center font-mono text-base",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{}),Array.from({length:16}).map((g,m)=>h.jsx("th",{className:Q("relative size-10 border border-gray-500 bg-mantis-500",m%4===0&&m!==0?"border-l-4 border-mantis-600":""),children:h.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===p&&h.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:"↓"})]})},m))]})}),h.jsx("tbody",{children:u().map((g,m)=>h.jsxs("tr",{className:m%4===0&&m!==0?"border-t-4 border-mantis-600":"",children:[h.jsx("th",{className:"relative size-10 border border-gray-500 bg-mantis-500",children:h.jsxs("span",{className:"inline-flex items-center",children:[m.toString(16).toUpperCase(),m===f&&h.jsx("span",{className:"ml-0.5 align-middle text-xs text-red-500",children:"→"})]})}),g.map((v,y)=>{var w,x,S;return h.jsx("td",{className:Q("size-10 border border-gray-500 p-0 transition-shadow duration-200",y%4===0&&y!==0?"border-l-4 border-mantis-600":""),children:h.jsx(Qde,{address:v.address,value:v.value,isIP:v.address.valueOf()===n.valueOf(),isSP:o&&v.address.valueOf()===s.valueOf(),isStackData:o&&v.address.valueOf()>s.valueOf(),isProgramAddress:!!i.find(_=>_.address===v.address.value),isDataAddress:!!r.find(_=>_.address===v.address.value),isInterruptVector:c&&v.address.valueOf()>=0&&v.address.valueOf()<=7,label:((w=i.find(_=>_.address===v.address.value))==null?void 0:w.name)||((x=r.find(_=>_.address===v.address.value))==null?void 0:x.label)||null,length:((S=i.find(_=>_.address===v.address.value))==null?void 0:S.length)??null})},y)})]},m))})]})})]})}function Qde({address:t,value:e,isIP:n,isSP:i,isStackData:r,isProgramAddress:s,isDataAddress:o,isInterruptVector:a,label:l,length:c}){const u=Xt(),d=it(Cp),[f,p]=b.useState(!1),g=b.useRef(e);b.useEffect(()=>{g.current!==e&&(p(!0),setTimeout(()=>p(!1),300),g.current=e)},[e]);const m=u("computer.memory.cell",t);return h.jsxs(JE,{children:[h.jsx(ZE,{asChild:!0,children:h.jsxs(He.div,{title:m,className:Q("relative flex size-10 cursor-pointer select-none items-center justify-center border font-mono text-base transition-all duration-200",n?"z-10 shadow-lg shadow-red-500/50 outline outline-2 outline-red-500 ring-2 ring-red-500 ring-offset-2":i?"z-10 shadow-lg shadow-yellow-400/50 outline outline-2 outline-yellow-400 ring-2 ring-yellow-400 ring-offset-2":"","bg-stone-800",a&&!i&&!r?"border-l-4 border-purple-500":"",s&&!i&&!r&&!a?"border-l-4 border-blue-500":"",o&&!i&&!r&&!s&&!a?"border-l-4 border-green-500":"",r&&!i?"border-l-4 border-yellow-500":"",i?"border-l-4 border-yellow-400":"","text-stone-100","hover:z-20 hover:scale-110 hover:shadow-xl",f&&"animate-pulse"),style:t.value===d.value?We("memory.operating-cell"):void 0,children:[a&&!i&&!r&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-purple-400",title:"Vector de interrupción",style:{lineHeight:1},children:"⚡"}),s&&!i&&!r&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-blue-400",title:"Instrucción",style:{lineHeight:1},children:"📘"}),o&&!i&&!r&&!s&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-green-400",title:"Dato",style:{lineHeight:1},children:"📦"}),r&&!i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-400",title:"Dato de la pila",style:{lineHeight:1},children:"📚"}),i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-300",title:"Stack Pointer",style:{lineHeight:1},children:"📍"}),h.jsx("span",{className:"z-10 mt-3 block font-mono text-lg font-bold",children:e.toString("hex")}),n&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-red-500",title:"IP",style:{lineHeight:1},children:"▲"}),i&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-yellow-500",title:"SP",style:{lineHeight:1},children:"▲"})]})}),h.jsxs(Kb,{className:"w-60",children:[h.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[m," ",l?h.jsxs("span",{className:"font-bold text-mantis-400",children:["(",l,")",c!==null&&c!==""&&h.jsxs("span",{className:"text-xs font-normal text-white",children:[" Bytes: ",c]})]}):""]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(v=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:u(`generics.byte-representation.${v}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(v)})]},v))})]})]})}function efe(){const t=Xt(),{devices:e}=$n();return e.pic?h.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsxs("div",{className:"flex items-start",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),h.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[h.jsx(hr,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:yE,springs:"pic.IMR",emphasis:!0}),h.jsx(hr,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:bE,springs:"pic.IRR",emphasis:!0}),h.jsx(hr,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:wE,springs:"pic.ISR",emphasis:!0})]})]}),h.jsx("hr",{className:"mb-2 border-stone-600"}),h.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:ry.map((n,i)=>h.jsx(hr,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function tfe(){const t=Xt(),{devices:e}=$n();return e.pio?h.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"mb-2 block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(hr,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:xE,springs:"pio.PA"}),h.jsx(hr,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:kE,springs:"pio.CA"})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(hr,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:SE,springs:"pio.PB"}),h.jsx(hr,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:_E,springs:"pio.CB"})]})]}):null}const nfe="_printer_fbkny_2",ife="_shadow_fbkny_6",rfe="_sides_fbkny_11",sfe="_front_fbkny_22",ofe="_trailContainer_fbkny_27",afe="_trail_fbkny_27",lfe="_paper_fbkny_33",Yl={printer:nfe,shadow:ife,sides:rfe,front:sfe,trailContainer:ofe,trail:afe,paper:lfe},cfe=Array.from({length:5},(t,e)=>e);function ufe(){const t=Xt(),{devices:e}=$n(),n=it(sy),i=it(oy);return e.printer?h.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:h.jsxs("div",{className:Yl.printer,title:t("computer.printer.name"),children:[h.jsx("div",{className:Yl.shadow}),h.jsx("div",{className:Yl.sides}),h.jsxs("div",{className:Yl.front,children:[h.jsx("div",{className:Yl.trailContainer,children:h.jsx("div",{className:Yl.trail,children:h.jsx("pre",{className:Yl.paper,children:i})})}),h.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:cfe.map(r=>{const s=n[r]?wD(n[r].unsigned):null;return h.jsx("span",{className:Q("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),h.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:h.jsx(He.div,{className:"h-full bg-mantis-400",style:{width:We("printer.printing.progress").to(r=>`${r*100}%`),opacity:We("printer.printing.opacity")}})})]})]})}):null}const dfe="_container_6nvz7_2",ffe="_text_6nvz7_22",WR={container:dfe,text:ffe};function hfe(){const t=Xt(),{devices:e}=$n(),n=it(CE);return e.screen?h.jsxs("div",{className:"absolute left-[1600px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),h.jsx("div",{className:WR.container,children:h.jsx("pre",{className:WR.text,children:n})})]}):null}function pfe(){const t=Xt(),{dispatch:e,devices:n}=$n(),i=it(Mb).toArray();return n.switches?h.jsxs("div",{className:"absolute left-[1300px] top-[680px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),h.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((r,s)=>h.jsxs("div",{className:"flex w-8 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:s}),h.jsx(Sa,{checked:r,onCheckedChange:()=>e("switch.toggle",s),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800"})]},s))})]}):null}function mfe(){const t=Xt(),{devices:e}=$n();return e.timer?h.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),h.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[h.jsx(hr,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:ay,springs:"timer.CONT"}),h.jsx(hr,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:EE,springs:"timer.COMP"})]})]}):null}function Q9(){const t=b.useRef(null);return b.useEffect(()=>{X6()},[]),h.jsx("div",{className:"relative size-full",children:h.jsxs(Zue,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[h.jsx(tde,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:h.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[h.jsx(pde,{}),h.jsx("div",{className:"absolute left-[120px] top-[-120px] z-20",children:h.jsx(J9,{})}),h.jsx(Fde,{}),h.jsx(ade,{}),h.jsx(Zde,{}),h.jsx(Wde,{}),h.jsx(efe,{}),h.jsx(tfe,{}),h.jsx(mfe,{}),h.jsx(mde,{}),h.jsx(Hde,{}),h.jsx(Xde,{}),h.jsx(Jde,{}),h.jsx(ufe,{}),h.jsx(pfe,{}),h.jsx(hfe,{})]})}),h.jsx(nde,{wrapperRef:t})]})})}const gfe=1024;let vfe=0;class Jx{constructor(e,n){this.from=e,this.to=n}}class ft{constructor(e={}){this.id=vfe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Xi.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}ft.closedBy=new ft({deserialize:t=>t.split(" ")});ft.openedBy=new ft({deserialize:t=>t.split(" ")});ft.group=new ft({deserialize:t=>t.split(" ")});ft.isolate=new ft({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});ft.contextHash=new ft({perNode:!0});ft.lookAhead=new ft({perNode:!0});ft.mounted=new ft({perNode:!0});class py{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[ft.mounted.id]}}const yfe=Object.create(null);class Xi{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):yfe,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Xi(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(ft.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(ft.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Xi.none=new Xi("",Object.create(null),0,8);class QE{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Xi(i.name,r,i.id,i.flags):i)}return new QE(n)}}const Vg=new WeakMap,GR=new WeakMap;var Gn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Gn||(Gn={}));class nn{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=py.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Ok(this.topNode,e)}cursorAt(e,n=0,i=0){let r=Vg.get(this)||this.topNode,s=new Ok(r);return s.moveTo(e,n),Vg.set(this,s._tree),s}get topNode(){return new Wr(this,0,0,null)}resolve(e,n=0){let i=qp(Vg.get(this)||this.topNode,e,n,!1);return Vg.set(this,i),i}resolveInner(e,n=0){let i=qp(GR.get(this)||this.topNode,e,n,!0);return GR.set(this,i),i}resolveStack(e,n=0){return xfe(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&Gn.IncludeAnonymous)>0;for(let l=this.cursor(o|Gn.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:nA(Xi.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new nn(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new nn(Xi.none,n,i,r)))}static build(e){return Sfe(e)}}nn.empty=new nn(Xi.none,[],[],0);class eA{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new eA(this.buffer,this.index)}}class _l{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Xi.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(ez(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let c=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,c)}return new _l(s,o,this.set)}}function ez(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function qp(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Wr&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:Gn.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Wr&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class tz{cursor(e=0){return new Ok(this,e)}getChild(e,n=null,i=null){let r=KR(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return KR(this,e,n,i)}resolve(e,n=0){return qp(this,e,n,!1)}resolveInner(e,n=0){return qp(this,e,n,!0)}matchContext(e){return Tk(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class Wr extends tz{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(ez(r,i,d,d+u.length)){if(u instanceof _l){if(s&Gn.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,n,i-d,r);if(f>-1)return new Ha(new bfe(o,u,e,d),null,f)}else if(s&Gn.IncludeAnonymous||!u.type.isAnonymous||tA(u)){let f;if(!(s&Gn.IgnoreMounts)&&(f=py.get(u))&&!f.overlay)return new Wr(f.tree,d,e,o);let p=new Wr(u,d,e,o);return s&Gn.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?u.children.length-1:0,n,i,r)}}}if(s&Gn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&Gn.IgnoreOverlays)&&(r=py.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Wr(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function KR(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Tk(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class bfe{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class Ha extends tz{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new Ha(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&Gn.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Ha(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ha(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Ha(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new nn(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function nz(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof Wr&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new wfe(r,n)}class wfe{constructor(e,n){this.heads=e,this.node=n}get next(){return nz(this.heads)}}function xfe(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof Wr?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=py.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Wr(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(qp(a,e,n,!1))}}return r?nz(r):i}class Ok{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Wr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Wr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&Gn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Gn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Gn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&Gn.IncludeAnonymous||a instanceof _l||!a.type.isAnonymous||tA(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new Ha(this.buffer,n,this.stack[r]);return this.bufferNode=new Ha(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Tk(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Tk(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function tA(t){return t.children.some(e=>e instanceof _l||!e.type.isAnonymous||tA(e))}function Sfe(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=gfe,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new eA(n,n.length):n,l=i.types,c=0,u=0;function d(_,E,C,N,M,j){let{id:I,start:O,end:H,size:D}=a,K=u,X=c;for(;D<0;)if(a.next(),D==-1){let ye=s[I];C.push(ye),N.push(O-_);return}else if(D==-3){c=I;return}else if(D==-4){u=I;return}else throw new RangeError(`Unrecognized record size: ${D}`);let te=l[I],U,z,ie=O-_;if(H-O<=r&&(z=v(a.pos-E,M))){let ye=new Uint16Array(z.size-z.skip),J=a.pos-z.size,le=ye.length;for(;a.pos>J;)le=y(z.start,ye,le);U=new _l(ye,H-z.start,i),ie=z.start-_}else{let ye=a.pos-D;a.next();let J=[],le=[],F=I>=o?I:-1,$=0,V=H;for(;a.pos>ye;)F>=0&&a.id==F&&a.size>=0?(a.end<=V-r&&(g(J,le,O,$,a.end,V,F,K,X),$=J.length,V=a.end),a.next()):j>2500?f(O,ye,J,le):d(O,ye,J,le,F,j+1);if(F>=0&&$>0&&$<J.length&&g(J,le,O,$,O,V,F,K,X),J.reverse(),le.reverse(),F>-1&&$>0){let k=p(te,X);U=nA(te,J,le,0,J.length,0,H-O,k,k)}else U=m(te,J,le,H-O,K-H,X)}C.push(U),N.push(ie)}function f(_,E,C,N){let M=[],j=0,I=-1;for(;a.pos>E;){let{id:O,start:H,end:D,size:K}=a;if(K>4)a.next();else{if(I>-1&&H<I)break;I<0&&(I=D-r),M.push(O,H,D),j++,a.next()}}if(j){let O=new Uint16Array(j*4),H=M[M.length-2];for(let D=M.length-3,K=0;D>=0;D-=3)O[K++]=M[D],O[K++]=M[D+1]-H,O[K++]=M[D+2]-H,O[K++]=K;C.push(new _l(O,M[2]-H,i)),N.push(H-_)}}function p(_,E){return(C,N,M)=>{let j=0,I=C.length-1,O,H;if(I>=0&&(O=C[I])instanceof nn){if(!I&&O.type==_&&O.length==M)return O;(H=O.prop(ft.lookAhead))&&(j=N[I]+O.length+H)}return m(_,C,N,M,j,E)}}function g(_,E,C,N,M,j,I,O,H){let D=[],K=[];for(;_.length>N;)D.push(_.pop()),K.push(E.pop()+C-M);_.push(m(i.types[I],D,K,j-M,O-j,H)),E.push(M-C)}function m(_,E,C,N,M,j,I){if(j){let O=[ft.contextHash,j];I=I?[O].concat(I):[O]}if(M>25){let O=[ft.lookAhead,M];I=I?[O].concat(I):[O]}return new nn(_,E,C,N,I)}function v(_,E){let C=a.fork(),N=0,M=0,j=0,I=C.end-r,O={size:0,start:0,skip:0};e:for(let H=C.pos-_;C.pos>H;){let D=C.size;if(C.id==E&&D>=0){O.size=N,O.start=M,O.skip=j,j+=4,N+=4,C.next();continue}let K=C.pos-D;if(D<0||K<H||C.start<I)break;let X=C.id>=o?4:0,te=C.start;for(C.next();C.pos>K;){if(C.size<0)if(C.size==-3)X+=4;else break e;else C.id>=o&&(X+=4);C.next()}M=te,N+=D,j+=X}return(E<0||N==_)&&(O.size=N,O.start=M,O.skip=j),O.size>4?O:void 0}function y(_,E,C){let{id:N,start:M,end:j,size:I}=a;if(a.next(),I>=0&&N<o){let O=C;if(I>4){let H=a.pos-(I-4);for(;a.pos>H;)C=y(_,E,C)}E[--C]=O,E[--C]=j-_,E[--C]=M-_,E[--C]=N}else I==-3?c=N:I==-4&&(u=N);return C}let w=[],x=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,w,x,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:w.length?x[0]+w[0].length:0;return new nn(l[t.topID],w.reverse(),x.reverse(),S)}const qR=new WeakMap;function B0(t,e){if(!t.isAnonymous||e instanceof _l||e.type!=t)return 1;let n=qR.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof nn)){n=1;break}n+=B0(t,i)}qR.set(e,n)}return n}function nA(t,e,n,i,r,s,o,a,l){let c=0;for(let g=i;g<r;g++)c+=B0(t,e[g]);let u=Math.ceil(c*1.5/8),d=[],f=[];function p(g,m,v,y,w){for(let x=v;x<y;){let S=x,_=m[x],E=B0(t,g[x]);for(x++;x<y;x++){let C=B0(t,g[x]);if(E+C>=u)break;E+=C}if(x==S+1){if(E>u){let C=g[S];p(C.children,C.positions,0,C.children.length,m[S]+w);continue}d.push(g[S])}else{let C=m[x-1]+g[x-1].length-_;d.push(nA(t,g,m,S,x,_,C,null,l))}f.push(_+w-s)}}return p(e,n,i,r,0),(a||l)(d,f,o)}class Ec{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new Ec(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let p=Math.max(f.from,l)-c,g=Math.min(f.to,d)-c;f=p>=g?null:new Ec(p,g,f.tree,f.offset+c,a>0,!!u)}if(f&&r.push(f),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r}}class iz{startParse(e,n,i){return typeof e=="string"&&(e=new kfe(e)),i=i?i.length?i.map(r=>new Jx(r.from,r.to)):[new Jx(0,0)]:[new Jx(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class kfe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new ft({perNode:!0});let _fe=0;class Cn{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=_fe++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof Cn&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new Cn(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new my(e);return i=>i.modified.indexOf(n)>-1?i:my.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let Cfe=0;class my{constructor(e){this.name=e,this.instances=[],this.id=Cfe++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&Efe(n,a.modified));if(i)return i;let r=[],s=new Cn(e.name,r,e,n);for(let a of n)a.instances.push(s);let o=Afe(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(my.get(a,l));return s}}function Efe(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function Afe(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function Nfe(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==r.length)break;let p=r[d++];if(d==r.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+r);let u=new gy(i,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return rz.add(e)}const rz=new ft;class gy{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}gy.empty=new gy([],2,null);function sz(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function Pfe(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function Mfe(t,e,n,i=0,r=t.length){let s=new Rfe(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class Rfe{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=r,u=Tfe(e)||gy.empty,d=Pfe(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(ft.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+a,1),g=this.highlighters.filter(v=>!v.scope||v.scope(f.tree.type)),m=e.firstChild();for(let v=0,y=a;;v++){let w=v<f.overlay.length?f.overlay[v]:null,x=w?w.from+a:l,S=Math.max(n,y),_=Math.min(i,x);if(S<_&&m)for(;e.from<_&&(this.highlightRange(e,S,_,r,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=x||!e.nextSibling())););if(!w||x>i)break;y=w.to+a,y>n&&(this.highlightRange(p.cursor(),Math.max(n,w.from+a),Math.min(i,y),"",g),this.startSpan(Math.min(i,y),c))}m&&e.parent()}else if(e.firstChild()){f&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function Tfe(t){let e=t.type.prop(rz);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const pe=Cn.define,Hg=pe(),ka=pe(),YR=pe(ka),XR=pe(ka),_a=pe(),Wg=pe(_a),Zx=pe(_a),Is=pe(),Xl=pe(Is),Ps=pe(),Ms=pe(),Ik=pe(),Vf=pe(Ik),Gg=pe(),Ve={comment:Hg,lineComment:pe(Hg),blockComment:pe(Hg),docComment:pe(Hg),name:ka,variableName:pe(ka),typeName:YR,tagName:pe(YR),propertyName:XR,attributeName:pe(XR),className:pe(ka),labelName:pe(ka),namespace:pe(ka),macroName:pe(ka),literal:_a,string:Wg,docString:pe(Wg),character:pe(Wg),attributeValue:pe(Wg),number:Zx,integer:pe(Zx),float:pe(Zx),bool:pe(_a),regexp:pe(_a),escape:pe(_a),color:pe(_a),url:pe(_a),keyword:Ps,self:pe(Ps),null:pe(Ps),atom:pe(Ps),unit:pe(Ps),modifier:pe(Ps),operatorKeyword:pe(Ps),controlKeyword:pe(Ps),definitionKeyword:pe(Ps),moduleKeyword:pe(Ps),operator:Ms,derefOperator:pe(Ms),arithmeticOperator:pe(Ms),logicOperator:pe(Ms),bitwiseOperator:pe(Ms),compareOperator:pe(Ms),updateOperator:pe(Ms),definitionOperator:pe(Ms),typeOperator:pe(Ms),controlOperator:pe(Ms),punctuation:Ik,separator:pe(Ik),bracket:Vf,angleBracket:pe(Vf),squareBracket:pe(Vf),paren:pe(Vf),brace:pe(Vf),content:Is,heading:Xl,heading1:pe(Xl),heading2:pe(Xl),heading3:pe(Xl),heading4:pe(Xl),heading5:pe(Xl),heading6:pe(Xl),contentSeparator:pe(Is),list:pe(Is),quote:pe(Is),emphasis:pe(Is),strong:pe(Is),link:pe(Is),monospace:pe(Is),strikethrough:pe(Is),inserted:pe(),deleted:pe(),changed:pe(),invalid:pe(),meta:Gg,documentMeta:pe(Gg),annotation:pe(Gg),processingInstruction:pe(Gg),definition:Cn.defineModifier("definition"),constant:Cn.defineModifier("constant"),function:Cn.defineModifier("function"),standard:Cn.defineModifier("standard"),local:Cn.defineModifier("local"),special:Cn.defineModifier("special")};for(let t in Ve){let e=Ve[t];e instanceof Cn&&(e.name=t)}sz([{tag:Ve.link,class:"tok-link"},{tag:Ve.heading,class:"tok-heading"},{tag:Ve.emphasis,class:"tok-emphasis"},{tag:Ve.strong,class:"tok-strong"},{tag:Ve.keyword,class:"tok-keyword"},{tag:Ve.atom,class:"tok-atom"},{tag:Ve.bool,class:"tok-bool"},{tag:Ve.url,class:"tok-url"},{tag:Ve.labelName,class:"tok-labelName"},{tag:Ve.inserted,class:"tok-inserted"},{tag:Ve.deleted,class:"tok-deleted"},{tag:Ve.literal,class:"tok-literal"},{tag:Ve.string,class:"tok-string"},{tag:Ve.number,class:"tok-number"},{tag:[Ve.regexp,Ve.escape,Ve.special(Ve.string)],class:"tok-string2"},{tag:Ve.variableName,class:"tok-variableName"},{tag:Ve.local(Ve.variableName),class:"tok-variableName tok-local"},{tag:Ve.definition(Ve.variableName),class:"tok-variableName tok-definition"},{tag:Ve.special(Ve.variableName),class:"tok-variableName2"},{tag:Ve.definition(Ve.propertyName),class:"tok-propertyName tok-definition"},{tag:Ve.typeName,class:"tok-typeName"},{tag:Ve.namespace,class:"tok-namespace"},{tag:Ve.className,class:"tok-className"},{tag:Ve.macroName,class:"tok-macroName"},{tag:Ve.propertyName,class:"tok-propertyName"},{tag:Ve.operator,class:"tok-operator"},{tag:Ve.comment,class:"tok-comment"},{tag:Ve.meta,class:"tok-meta"},{tag:Ve.invalid,class:"tok-invalid"},{tag:Ve.punctuation,class:"tok-punctuation"}]);var Qx;const Yu=new ft;function Ofe(t){return Ce.define({combine:t?e=>e.concat(t):void 0})}const Ife=new ft;class ps{constructor(e,n,i=[],r=""){this.data=e,this.name=r,ct.prototype.hasOwnProperty("tree")||Object.defineProperty(ct.prototype,"tree",{get(){return go(this)}}),this.parser=n,this.extension=[Qd.of(this),ct.languageData.of((s,o,a)=>{let l=JR(s,o,a),c=l.type.prop(Yu);if(!c)return[];let u=s.facet(c),d=l.type.prop(Ife);if(d){let f=l.resolve(o-l.from,a);for(let p of d)if(p.test(f,s)){let g=s.facet(p.facet);return p.type=="replace"?g:g.concat(u)}}return u})].concat(i)}isActiveAt(e,n,i=-1){return JR(e,n,i).type.prop(Yu)==this.data}findRegions(e){let n=e.facet(Qd);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Yu)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(ft.mounted);if(a){if(a.tree.prop(Yu)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof nn&&r(c,s.positions[l]+o)}};return r(go(e),0),i}get allowsNesting(){return!0}}ps.setState=tt.define();function JR(t,e,n){let i=t.facet(Qd),r=go(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,Gn.ExcludeBuffers))s.type.isTop&&(r=s);return r}function go(t){let e=t.field(ps.state,!1);return e?e.tree:nn.empty}class jfe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Hf=null;class Jd{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Jd(e,n,[],nn.empty,0,i,[],null)}startParse(){return this.parser.startParse(new jfe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=nn.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Ec.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Ec.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Hf;Hf=this;try{return e()}finally{Hf=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=ZR(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),i=Ec.applyChanges(i,l),r=nn.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new Jd(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=ZR(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends iz{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=Hf;if(l){for(let c of r)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new nn(Xi.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Hf}}function ZR(t,e,n){return Ec.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Zd{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Zd(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Jd.create(e.facet(Qd).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Zd(i)}}ps.state=Ci.define({create:Zd.init,update(t,e){for(let n of e.effects)if(n.is(ps.setState))return n.value;return e.startState.facet(Qd)!=e.state.facet(Qd)?Zd.init(e.state):t.apply(e)}});let oz=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(oz=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const e1=typeof navigator<"u"&&(!((Qx=navigator.scheduling)===null||Qx===void 0)&&Qx.isInputPending)?()=>navigator.scheduling.isInputPending():null,Lfe=ei.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(ps.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(ps.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=oz(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(ps.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!e1?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>e1&&e1()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ps.setState.of(new Zd(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>dr(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Qd=Ce.define({combine(t){return t.length?t[0]:null},enables:t=>[ps.state,Lfe,Re.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class Dfe{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const $fe=Ce.define(),iA=Ce.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function qc(t){let e=t.facet(iA);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function jk(t,e){let n="",i=t.tabSize,r=t.facet(iA)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function Ffe(t,e){t instanceof ct&&(t=new rA(t));for(let i of t.state.facet($fe)){let r=i(t,e);if(r!==void 0)return r}let n=go(t.state);return n.length>=e?zfe(t,n,e):null}class rA{constructor(e,n={}){this.state=e,this.options=n,this.unit=qc(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return mm(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const az=new ft;function zfe(t,e,n){let i=e.resolveStack(n),r=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return lz(i,t,n)}function lz(t,e,n){for(let i=t;i;i=i.next){let r=Ufe(i.node);if(r)return r(sA.create(e,n,i))}return 0}function Bfe(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Ufe(t){let e=t.type.prop(az);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(ft.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>Gfe(o,!0,1,void 0,s&&!Bfe(o)?r.from:void 0)}return t.parent==null?Vfe:null}function Vfe(){return 0}class sA extends rA{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new sA(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Hfe(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return lz(this.context.next,this.base,this.pos)}}function Hfe(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Wfe(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function Gfe(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=Wfe(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const Kfe=Ce.define(),qfe=new ft;function Yfe(t,e,n){let i=go(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(qfe);if(l&&(a.to<i.length-50||i.length==t.doc.length||!Xfe(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function Xfe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function cz(t,e,n){for(let i of t.facet(Kfe)){let r=i(t,e,n);if(r)return r}return Yfe(t,e,n)}function uz(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const oA=tt.define({map:uz}),qb=tt.define({map:uz});function dz(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const Nm=Ci.define({create(){return nt.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=QR(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(oA)&&!Jfe(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(mz),r=i?nt.replace({widget:new rhe(i(e.state,n.value))}):eT;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(qb)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=QR(t,e.selection.main.head)),t},provide:t=>Re.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(eT.range(i,r))}return nt.set(e,!0)}});function QR(t,e,n=e){let i=!1;return t.between(e,n,(r,s)=>{r<n&&s>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(r,s)=>r>=n||s<=e}):t}function fz(t,e,n){var i;let r=null;return(i=t.field(Nm,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function Jfe(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function hz(t,e){return t.field(Nm,!1)?e:e.concat(tt.appendConfig.of(ihe()))}const Zfe=t=>{for(let e of dz(t)){let n=cz(t.state,e.from,e.to);if(n)return t.dispatch({effects:hz(t.state,[oA.of(n),pz(t,n)])}),!0}return!1},Qfe=t=>{if(!t.state.field(Nm,!1))return!1;let e=[];for(let n of dz(t)){let i=fz(t.state,n.from,n.to);i&&e.push(qb.of(i),pz(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function pz(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Re.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const ehe=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=cz(e,r.from,r.to);s&&n.push(oA.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:hz(t.state,n)}),!!n.length},the=t=>{let e=t.state.field(Nm,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(qb.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},nhe={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},mz=Ce.define({combine(t){return Ml(t,nhe)}});function ihe(t){return[Nm,she]}function gz(t,e){let{state:n}=t,i=n.facet(mz),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=fz(t.state,a.from,a.to);l&&t.dispatch({effects:qb.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const eT=nt.replace({widget:new class extends Rl{toDOM(t){return gz(t,null)}}});class rhe extends Rl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return gz(e,this.value)}}const she=Re.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Yb{constructor(e,n){this.specs=e;let i;function r(a){let l=vl.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof ps?a=>a.prop(Yu)==o.data:o?a=>a==o:void 0,this.style=sz(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new vl(i):null,this.themeType=n.themeType}static define(e,n){return new Yb(e,n||{})}}const Lk=Ce.define(),ohe=Ce.define({combine(t){return t.length?[t[0]]:null}});function t1(t){let e=t.facet(Lk);return e.length?e:t.facet(ohe)}function ahe(t,e){let n=[che],i;return t instanceof Yb&&(t.module&&n.push(Re.styleModule.of(t.module)),i=t.themeType),i?n.push(Lk.computeN([Re.darkTheme],r=>r.facet(Re.darkTheme)==(i=="dark")?[t]:[])):n.push(Lk.of(t)),n}class lhe{constructor(e){this.markCache=Object.create(null),this.tree=go(e.state),this.decorations=this.buildDeco(e,t1(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=go(e.state),i=t1(e.state),r=i!=t1(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return nt.none;let i=new gl;for(let{from:r,to:s}of e.visibleRanges)Mfe(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=nt.mark({class:l})))},r,s);return i.finish()}}const che=hm.high(ei.fromClass(lhe,{decorations:t=>t.decorations})),uhe=1e4,dhe="()[]{}",fhe=new ft;function Dk(t,e,n){let i=t.prop(e<0?ft.openedBy:ft.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function $k(t){let e=t.type.prop(fhe);return e?e(t.node):t}function Kg(t,e,n,i={}){let r=i.maxScanDistance||uhe,s=i.brackets||dhe,o=go(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=Dk(l.type,n,s);if(c&&l.from<l.to){let u=$k(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return hhe(t,e,n,l,u,c,s)}}return phe(t,e,n,o,a.type,r,s)}function hhe(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do if(n<0?u.to<=i.from:u.from>=i.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=$k(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(Dk(u.type,n,o))c++;else if(Dk(u.type,-n,o)){if(c==0){let d=$k(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function phe(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let f=0;!u.next().done&&f<=s;){let p=u.value;n<0&&(f+=p.length);let g=e+f*n;for(let m=n>0?0:p.length-1,v=n>0?p.length:-1;m!=v;m+=n){let y=o.indexOf(p[m]);if(!(y<0||i.resolveInner(g+m,1).type!=r))if(y%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:g+m,to:g+m+1},matched:y>>1==l>>1};d--}}n>0&&(f+=p.length)}return u.done?{start:c,matched:!1}:null}function tT(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class vz{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=tT(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:tT(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function mhe(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||ghe,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||cA,mergeTokens:t.mergeTokens!==!1}}function ghe(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const nT=new WeakMap;class aA extends ps{constructor(e){let n=Ofe(e.languageData),i=mhe(e),r,s=new class extends iz{createParse(o,a,l){return new yhe(r,o,a,l)}};super(n,s,[],e.name),this.topNode=xhe(n,this),r=this,this.streamParser=i,this.stateAfter=new ft({perNode:!0}),this.tokenTable=e.tokenTable?new xz(i.tokenTable):whe}static define(e){return new aA(e)}getIndent(e){let n,{overrideIndentation:i}=e.options;i&&(n=nT.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let r=lA(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),c=Math.min(e.pos,l.to);if(l.length){let u=i?i(l.from):-1,d=new vz(l.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;d.pos<c-l.from;)bz(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return i&&n==null&&nT.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function lA(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof nn&&l<r&&lA(t,a,l,i,r);if(c)return c}return null}function yz(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&n==0&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof nn){if(!(l=yz(t,a,n-o,i-o,r)))break;return r?new nn(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function vhe(t,e,n,i,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&lA(t,s.tree,0-s.offset,n,a),c;if(l&&l.pos<=i&&(c=yz(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:c}}return{state:t.streamParser.startState(r?qc(r):4),tree:nn.empty}}class yhe{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=Jd.get(),o=r[0].from,{state:a,tree:l}=vhe(e,i,o,this.to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&r.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(qc(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Jd.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(n,r,1),n+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=i:this.chunk.push(e,n,i,s),r}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new vz(n,e?e.state.tabSize:4,e?qc(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=bz(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=nn.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:bhe,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new nn(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new nn(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function bz(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const cA=Object.create(null),Yp=[Xi.none],bhe=new QE(Yp),iT=[],rT=Object.create(null),wz=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])wz[t]=Sz(cA,e);class xz{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),wz)}resolve(e){return e?this.table[e]||(this.table[e]=Sz(this.extra,e)):0}}const whe=new xz(cA);function n1(t,e){iT.indexOf(t)>-1||(iT.push(t),console.warn(e))}function Sz(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Ve[c];u?typeof u=="function"?l.length?l=l.map(u):n1(c,`Modifier ${c} used at start of tag`):l.length?n1(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:n1(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=rT[r];if(s)return s.id;let o=rT[r]=Xi.define({id:Yp.length,name:i,props:[Nfe({[i]:n})]});return Yp.push(o),o.id}function xhe(t,e){let n=Xi.define({id:Yp.length,name:"Document",props:[Yu.add(()=>t),az.add(()=>i=>e.getIndent(i))],top:!0});return Yp.push(n),n}Vt.RTL,Vt.LTR;const She=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=uA(t.state,n.from);return i.line?khe(t):i.block?Ahe(t):!1};function Pm(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const khe=Pm(dA,0),_he=Pm(dA,1),Che=Pm(dA,2),Ehe=Pm(kz,0),Ahe=Pm((t,e)=>kz(t,e,Phe(e)),0);function uA(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Wf=50;function Nhe(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-Wf,i),o=t.sliceDoc(r,r+Wf),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let u,d;r-i<=2*Wf?u=d=t.sliceDoc(i,r):(u=t.sliceDoc(i,i+Wf),d=t.sliceDoc(r-Wf,r));let f=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(d)[0].length,g=d.length-p-n.length;return u.slice(f,f+e.length)==e&&d.slice(g,g+n.length)==n?{open:{pos:i+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:r-p-n.length,margin:/\s/.test(d.charAt(g-1))?1:0}}:null}function Phe(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function kz(t,e,n=e.selection.ranges){let i=n.map(s=>uA(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>Nhe(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function dA(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,c=uA(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>r&&(s==o||o>d.from)){r=d.from;let f=/^\s*/.exec(d.text)[0].length,p=f==d.length,g=d.text.slice(f,f+c.length)==c?f:-1;f<d.text.length&&f<l&&(l=f),i.push({line:d,comment:g,token:c,indent:f,empty:p,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of i)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const Fk=oa.define(),Mhe=oa.define(),Rhe=Ce.define(),_z=Ce.define({combine(t){return Ml(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),Cz=Ci.define({create(){return eo.empty},update(t,e){let n=e.state.facet(_z),i=e.annotation(Fk);if(i){let l=Gi.fromTransaction(e,i.selection),c=i.side,u=c==0?t.undone:t.done;return l?u=vy(u,u.length,n.minDepth,l):u=Nz(u,e.startState.selection),new eo(c==0?i.rest:u,c==0?u:i.rest)}let r=e.annotation(Mhe);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(An.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Gi.fromTransaction(e),o=e.annotation(An.time),a=e.annotation(An.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new eo(t.done.map(Gi.fromJSON),t.undone.map(Gi.fromJSON))}});function The(t={}){return[Cz,_z.of(t),Re.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?Ez:e.inputType=="historyRedo"?zk:null;return i?(e.preventDefault(),i(n)):!1}})]}function fA(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(Cz,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const Ez=fA(0,!1),zk=fA(1,!1),Ohe=fA(0,!0);class Gi{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Gi(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Gi(e.changes&&kn.fromJSON(e.changes),[],e.mapped&&ao.fromJSON(e.mapped),e.startSelection&&re.fromJSON(e.startSelection),e.selectionsAfter.map(re.fromJSON))}static fromTransaction(e,n){let i=$r;for(let r of e.startState.facet(Rhe)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Gi(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,$r)}static selection(e){return new Gi(void 0,$r,void 0,void 0,e)}}function vy(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function Ihe(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(i=!0)}}),i}function jhe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function Az(t,e){return t.length?e.length?t.concat(e):t:e}const $r=[],Lhe=200;function Nz(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Lhe));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),vy(t,t.length-1,1e9,n.setSelAfter(i)))}else return[Gi.selection([e])]}function Dhe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function i1(t,e){if(!t.length)return t;let n=t.length,i=$r;for(;n;){let r=$he(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[Gi.selection(i)]:$r}function $he(t,e,n){let i=Az(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):$r,n);if(!t.changes)return Gi.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Gi(r,tt.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const Fhe=/^(input\.type|delete)($|\.)/;class eo{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new eo(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||Fhe.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,Ihe(a.changes,e.changes))||i=="input.type.compose")?o=vy(o,o.length-1,r.minDepth,new Gi(e.changes.compose(a.changes),Az(tt.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,$r)):o=vy(o,o.length,r.minDepth,e),new eo(o,$r,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:$r;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&jhe(s[s.length-1],e)?this:new eo(Nz(this.done,e),this.undone,n,i)}addMapping(e){return new eo(i1(this.done,e),i1(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Fk.of({side:e,rest:Dhe(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?$r:r.slice(0,r.length-1);return s.mapped&&(a=i1(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Fk.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}eo.empty=new eo($r,$r);function Mm(t,e){return re.create(t.ranges.map(e),t.mainIndex)}function Ll(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Qc({state:t,dispatch:e},n){let i=Mm(t.selection,n);return i.eq(t.selection,!0)?!1:(e(Ll(t,i)),!0)}function Xb(t,e){return re.cursor(e?t.to:t.from)}function Pz(t,e){return Qc(t,n=>n.empty?t.moveByChar(n,e):Xb(n,e))}function Dl(t){return t.textDirectionAt(t.state.selection.main.head)==Vt.LTR}const sT=t=>Pz(t,!Dl(t)),oT=t=>Pz(t,Dl(t));function Mz(t,e){return Qc(t,n=>n.empty?t.moveByGroup(n,e):Xb(n,e))}const zhe=t=>Mz(t,!Dl(t)),Bhe=t=>Mz(t,Dl(t));function Rz(t,e){return Qc(t,n=>{if(!n.empty)return Xb(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const aT=t=>Rz(t,!1),lT=t=>Rz(t,!0);function Tz(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Re.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function Oz(t,e){let n=Tz(t),{state:i}=t,r=Mm(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):Xb(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=Re.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Ll(i,r),{effects:s}),!0}const r1=t=>Oz(t,!1),s1=t=>Oz(t,!0);function Jb(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=re.cursor(i.from+s))}return r}const cT=t=>Qc(t,e=>Jb(t,e,!0)),uT=t=>Qc(t,e=>Jb(t,e,!1)),Uhe=t=>Qc(t,e=>re.cursor(t.lineBlockAt(e.head).from,1)),Vhe=t=>Qc(t,e=>re.cursor(t.lineBlockAt(e.head).to,-1));function Hhe(t,e,n){let i=!1,r=Mm(t.selection,s=>{let o=Kg(t,s.head,-1)||Kg(t,s.head,1)||s.head>0&&Kg(t,s.head-1,1)||s.head<t.doc.length&&Kg(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return re.cursor(a)});return i?(e(Ll(t,r)),!0):!1}const Whe=({state:t,dispatch:e})=>Hhe(t,e);function $l(t,e){let n=Mm(t.state.selection,i=>{let r=e(i);return re.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Ll(t.state,n)),!0)}function Iz(t,e){return $l(t,n=>t.moveByChar(n,e))}const dT=t=>Iz(t,!Dl(t)),fT=t=>Iz(t,Dl(t));function jz(t,e){return $l(t,n=>t.moveByGroup(n,e))}const Ghe=t=>jz(t,!Dl(t)),Khe=t=>jz(t,Dl(t));function Lz(t,e){return $l(t,n=>t.moveVertically(n,e))}const hT=t=>Lz(t,!1),pT=t=>Lz(t,!0);function Dz(t,e){return $l(t,n=>t.moveVertically(n,e,Tz(t).height))}const mT=t=>Dz(t,!1),gT=t=>Dz(t,!0),vT=t=>$l(t,e=>Jb(t,e,!0)),yT=t=>$l(t,e=>Jb(t,e,!1)),qhe=t=>$l(t,e=>re.cursor(t.lineBlockAt(e.head).from)),Yhe=t=>$l(t,e=>re.cursor(t.lineBlockAt(e.head).to)),bT=({state:t,dispatch:e})=>(e(Ll(t,{anchor:0})),!0),wT=({state:t,dispatch:e})=>(e(Ll(t,{anchor:t.doc.length})),!0),xT=({state:t,dispatch:e})=>(e(Ll(t,{anchor:t.selection.main.anchor,head:0})),!0),ST=({state:t,dispatch:e})=>(e(Ll(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Xhe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Jhe=({state:t,dispatch:e})=>{let n=Qb(t).map(({from:i,to:r})=>re.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:re.create(n),userEvent:"select"})),!0};function Zb(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=qg(t,l,!1)):l>o&&(n="delete.forward",l=qg(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=qg(t,o,!1),a=qg(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:re.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Re.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function qg(t,e,n){if(t instanceof Re)for(let i of t.state.facet(Re.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const $z=(t,e,n)=>Zb(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),a,l;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let c=mm(a,s.tabSize),u=c%qc(s)||qc(s);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)r--;l=r}else l=Yn(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=Yn(o.text,l-o.from,!1,!1)+o.from);return l}),o1=t=>$z(t,!1,!0),kT=t=>$z(t,!0,!1),Fz=(t,e)=>Zb(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=Yn(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||i!=n.head)&&(a=u),i=l}return i}),_T=t=>Fz(t,!1),Zhe=t=>Fz(t,!0),CT=t=>Zb(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Qhe=t=>Zb(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),epe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:pt.of(["",""])},range:re.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},tpe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:Yn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:Yn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:re.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Qb(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function zz(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of Qb(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(re.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(re.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:re.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const npe=({state:t,dispatch:e})=>zz(t,e,!1),ipe=({state:t,dispatch:e})=>zz(t,e,!0);function Bz(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of Qb(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const rpe=({state:t,dispatch:e})=>Bz(t,e,!1),spe=({state:t,dispatch:e})=>Bz(t,e,!0),ope=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Qb(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=Mm(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),a=t.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function ape(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=go(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(ft.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const ET=lpe(!1);function lpe(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&ape(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new rA(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=Ffe(c,s);for(u==null&&(u=mm(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",jk(e,u)];return l&&d.push(jk(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:pt.of(d)},range:re.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Uz(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:re.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const Bk=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Uz(t,(n,i)=>{i.push({from:n.from,insert:t.facet(iA)})}),{userEvent:"input.indent"})),!0),AT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Uz(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=mm(r,t.tabSize),o=0,a=jk(t,Math.max(0,s-qc(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),NT=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Xp{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(NT(a)):NT,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Or(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=TC(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Fo(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Xp.prototype[Symbol.iterator]=function(){return this});const Vz={from:-1,to:-1,match:/.*/.exec("")},hA="gm"+(/x/.unicode==null?"":"u");class Hz{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Vz,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Wz(e,n,i,r,s);this.re=new RegExp(n,hA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=yy(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=yy(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const a1=new WeakMap;class md{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=a1.get(e);if(!r||r.from>=i||r.to<=n){let a=new md(n,e.sliceString(n,i));return a1.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),a1.set(e,new md(o,s)),new md(n,s.slice(n-o,i-o))}}class Wz{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=Vz,this.matchPos=yy(e,r),this.re=new RegExp(n,hA+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=md.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=yy(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=md.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Hz.prototype[Symbol.iterator]=Wz.prototype[Symbol.iterator]=function(){return this});function cpe(t){try{return new RegExp(t,hA),!0}catch{return!1}}function yy(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function Uk(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Rt("input",{class:"cm-textfield",name:"line",value:e}),i=Rt("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Vh.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},Rt("label",t.state.phrase("Go to line"),": ",n)," ",Rt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Rt("button",{name:"close",onclick:()=>{t.dispatch({effects:Vh.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,f=u?+u.slice(1):0,p=c?+c:a.number;if(c&&d){let v=p/100;l&&(v=v*(l=="-"?-1:1)+a.number/o.doc.lines),p=Math.round(o.doc.lines*v)}else c&&l&&(p=p*(l=="-"?-1:1)+a.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),m=re.cursor(g.from+Math.max(0,Math.min(f,g.length)));t.dispatch({effects:[Vh.of(!1),Re.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:i}}const Vh=tt.define(),PT=Ci.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Vh)&&(t=n.value);return t},provide:t=>Ip.from(t,e=>e?Uk:null)}),upe=t=>{let e=Op(t,Uk);if(!e){let n=[Vh.of(!0)];t.state.field(PT,!1)==null&&n.push(tt.appendConfig.of([PT,dpe])),t.dispatch({effects:n}),e=Op(t,Uk)}return e&&e.dom.querySelector("input").select(),!0},dpe=Re.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),fpe=({state:t,dispatch:e})=>{let{selection:n}=t,i=re.create(n.ranges.map(r=>t.wordAt(r.head)||re.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function hpe(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new Xp(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Xp(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const ppe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return fpe({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=hpe(t,i);return r?(e(t.update({selection:t.selection.addRange(re.range(r.from,r.to),!1),effects:Re.scrollIntoView(r.to)})),!0):!1},gf=Ce.define({combine(t){return Ml(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new kpe(e),scrollToMatch:e=>Re.scrollIntoView(e)})}});class Gz{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||cpe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new ype(this):new gpe(this)}getCursor(e,n=0,i){let r=e.doc?e:ct.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Nu(this,r,n,i):Au(this,r,n,i)}}class Kz{constructor(e){this.spec=e}}function Au(t,e,n,i){return new Xp(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?mpe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function mpe(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(by(r,n-s))!=Xn.Word||e(wy(r,n-s))!=Xn.Word)&&(e(wy(r,i-s))!=Xn.Word||e(by(r,i-s))!=Xn.Word))}class gpe extends Kz{constructor(e){super(e)}nextMatch(e,n,i){let r=Au(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=Au(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=Au(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=Au(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Au(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Nu(t,e,n,i){return new Hz(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?vpe(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function by(t,e){return t.slice(Yn(t,e,!1),e)}function wy(t,e){return t.slice(e,Yn(t,e))}function vpe(t){return(e,n,i)=>!i[0].length||(t(by(i.input,i.index))!=Xn.Word||t(wy(i.input,i.index))!=Xn.Word)&&(t(wy(i.input,i.index+i[0].length))!=Xn.Word||t(by(i.input,i.index+i[0].length))!=Xn.Word)}class ype extends Kz{nextMatch(e,n,i){let r=Nu(this.spec,e,i,e.doc.length).next();return r.done&&(r=Nu(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=Nu(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let s=+i.slice(0,r);if(s>0&&s<e.match.length)return e.match[s]+i.slice(r)}return n})}matchAll(e,n){let i=Nu(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Nu(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Jp=tt.define(),pA=tt.define(),ol=Ci.define({create(t){return new l1(Vk(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Jp)?t=new l1(n.value.create(),t.panel):n.is(pA)&&(t=new l1(t.query,n.value?mA:null));return t},provide:t=>Ip.from(t,e=>e.panel)});class l1{constructor(e,n){this.query=e,this.panel=n}}const bpe=nt.mark({class:"cm-searchMatch"}),wpe=nt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),xpe=ei.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(ol))}update(t){let e=t.state.field(ol);(e!=t.startState.field(ol)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return nt.none;let{view:n}=this,i=new gl;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(f=>f.from==c&&f.to==u);i.add(c,u,d?wpe:bpe)})}return i.finish()}},{decorations:t=>t.decorations});function Rm(t){return e=>{let n=e.state.field(ol,!1);return n&&n.query.spec.valid?t(e,n):Zz(e)}}const MT=Rm((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=re.single(i.from,i.to),s=t.state.facet(gf);return t.dispatch({selection:r,effects:[gA(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),Jz(t),!0}),RT=Rm((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=re.single(r.from,r.to),o=t.state.facet(gf);return t.dispatch({selection:s,effects:[gA(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),Jz(t),!0}),qz=Rm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:re.create(n.map(i=>re.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),Spe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new Xp(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(re.range(a.value.from,a.value.to))}return e(t.update({selection:re.create(s,o),userEvent:"select.search.matches"})),!0},TT=Rm((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,a=[],l,c,u=[];o.from==i&&o.to==r&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(Re.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let d=t.state.changes(a);return o&&(l=re.single(o.from,o.to).map(d),u.push(gA(t,o)),u.push(n.facet(gf).scrollToMatch(l.main,t))),t.dispatch({changes:d,selection:l,effects:u,userEvent:"input.replace"}),!0}),Yz=Rm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Re.announce.of(i),userEvent:"input.replace.all"}),!0});function mA(t){return t.state.facet(gf).createPanel(t)}function Vk(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(gf);return new Gz({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function Xz(t){let e=Op(t,mA);return e&&e.dom.querySelector("[main-field]")}function Jz(t){let e=Xz(t);e&&e==t.root.activeElement&&e.select()}const Zz=t=>{let e=t.state.field(ol,!1);if(e&&e.panel){let n=Xz(t);if(n&&n!=t.root.activeElement){let i=Vk(t.state,e.query.spec);i.valid&&t.dispatch({effects:Jp.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[pA.of(!0),e?Jp.of(Vk(t.state,e.query.spec)):tt.appendConfig.of(Cpe)]});return!0},Qz=t=>{let e=t.state.field(ol,!1);if(!e||!e.panel)return!1;let n=Op(t,mA);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:pA.of(!1)}),!0};class kpe{constructor(e){this.view=e;let n=this.query=e.state.field(ol).query.spec;this.commit=this.commit.bind(this),this.searchField=Rt("input",{value:n.search,placeholder:Qi(e,"Find"),"aria-label":Qi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Rt("input",{value:n.replace,placeholder:Qi(e,"Replace"),"aria-label":Qi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Rt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Rt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Rt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return Rt("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Rt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>MT(e),[Qi(e,"next")]),i("prev",()=>RT(e),[Qi(e,"previous")]),i("select",()=>qz(e),[Qi(e,"all")]),Rt("label",null,[this.caseField,Qi(e,"match case")]),Rt("label",null,[this.reField,Qi(e,"regexp")]),Rt("label",null,[this.wordField,Qi(e,"by word")]),...e.state.readOnly?[]:[Rt("br"),this.replaceField,i("replace",()=>TT(e),[Qi(e,"replace")]),i("replaceAll",()=>Yz(e),[Qi(e,"replace all")])],Rt("button",{name:"close",onclick:()=>Qz(e),"aria-label":Qi(e,"close"),type:"button"},["×"])])}commit(){let e=new Gz({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Jp.of(e)}))}keydown(e){cte(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?RT:MT)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),TT(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Jp)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(gf).top}}function Qi(t,e){return t.state.phrase(e)}const Yg=30,Xg=/[\s\.,:;?!]/;function gA(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-Yg),o=Math.min(r,n+Yg),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<Yg;l++)if(!Xg.test(a[l+1])&&Xg.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-Yg;l--)if(!Xg.test(a[l-1])&&Xg.test(a[l])){a=a.slice(0,l);break}}return Re.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const _pe=Re.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Cpe=[ol,hm.low(xpe),_pe];class Epe{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=go(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(eB(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function OT(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Ape(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=OT(e)+OT(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Npe(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:Ape(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class IT{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function Hh(t){return t.selection.main.from}function eB(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const tB=oa.define();function Ppe(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:re.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const jT=new WeakMap;function Mpe(t){if(!Array.isArray(t))return t;let e=jT.get(t);return e||jT.set(t,e=Npe(t)),e}const nB=tt.define(),vA=tt.define();class Rpe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=Or(e,n),r=Fo(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(Or(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let w=Or(e,0),x=Fo(w),S=x==e.length?0:-100;if(w!=n[0])if(w==i[0])S+=-200;else return null;return this.ret(S,[0,x])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let w=0,x=Math.min(e.length,200);w<x&&c<l;){let S=Or(e,w);(S==n[c]||S==i[c])&&(r[c++]=w),w+=Fo(S)}if(c<l)return null}let u=0,d=0,f=!1,p=0,g=-1,m=-1,v=/[a-z]/.test(e),y=!0;for(let w=0,x=Math.min(e.length,200),S=0;w<x&&d<l;){let _=Or(e,w);a<0&&(u<l&&_==n[u]&&(s[u++]=w),p<l&&(_==n[p]||_==i[p]?(p==0&&(g=w),m=w+1,p++):p=0));let E,C=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(E=TC(_))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!w||C==1&&v||S==0&&C!=0)&&(n[d]==_||i[d]==_&&(f=!0)?o[d++]=w:o.length&&(y=!1)),S=C,w+=Fo(_)}return d==l&&o[0]==0&&y?this.result(-100+(f?-200:0),o,e):p==l&&g==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):p==l?this.ret(-900-e.length,[g,m]):d==l?this.result(-100+(f?-200:0)+-700+(y?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?Fo(Or(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class Tpe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const qs=Ce.define({combine(t){return Ml(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Ope,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>LT(e(i),n(i)),optionClass:(e,n)=>i=>LT(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function LT(t,e){return t?e?t+" "+e:t:e}function Ope(t,e,n,i,r,s){let o=t.textDirection==Vt.RTL,a=o,l=!1,c="top",u,d,f=e.left-r.left,p=r.right-e.right,g=i.right-i.left,m=i.bottom-i.top;if(a&&f<Math.min(g,p)?a=!1:!a&&p<Math.min(g,f)&&(a=!0),g<=(a?f:p))u=Math.max(r.top,Math.min(n.top,r.bottom-m))-e.top,d=Math.min(400,a?f:p);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let w=r.bottom-e.bottom;w>=m||w>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let v=(e.bottom-e.top)/s.offsetHeight,y=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/v}px; max-width: ${d/y}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function Ipe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function c1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class jpe{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(qs);this.optionContent=Ipe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=c1(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(qs).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:vA.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=c1(s.length,o,e.state.facet(qs).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=c1(n.options.length,n.selected,this.view.state.facet(qs).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>dr(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&Dpe(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(qs).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",o=>{o.target==r&&o.preventDefault()});let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>i.from||i.from==0))if(s=f,typeof c!="string"&&c.header)r.appendChild(c.header(c));else{let p=r.appendChild(document.createElement("completion-section"));p.textContent=f}}const u=r.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let f of this.optionContent){let p=f(a,this.view.state,this.view,l);p&&u.appendChild(p)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Lpe(t,e){return n=>new jpe(n,t,e)}function Dpe(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function DT(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function $pe(t,e){let n=[],i=null,r=c=>{n.push(c);let{section:u}=c.completion;if(u){i||(i=[]);let d=typeof u=="string"?u:u.name;i.some(f=>f.name==d)||i.push(typeof u=="string"?{name:d}:u)}},s=e.facet(qs);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)r(new IT(d,c.source,u?u(d):[],1e9-n.length));else{let d=e.sliceDoc(c.from,c.to),f,p=s.filterStrict?new Tpe(d):new Rpe(d);for(let g of c.result.options)if(f=p.match(g.label)){let m=g.displayLabel?u?u(g,f.matched):[]:f.matched;r(new IT(g,c.source,m,f.score+(g.boost||0)))}}}if(i){let c=Object.create(null),u=0,d=(f,p)=>{var g,m;return((g=f.rank)!==null&&g!==void 0?g:1e9)-((m=p.rank)!==null&&m!==void 0?m:1e9)||(f.name<p.name?-1:1)};for(let f of i.sort(d))u-=1e5,c[f.name]=u;for(let f of n){let{section:p}=f.completion;p&&(f.score+=c[typeof p=="string"?p:p.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of n.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):DT(c.completion)>DT(a)&&(o[o.length-1]=c),a=c.completion}return o}class Xu{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Xu(this.options,$T(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(c=>c.isPending))return r.setDisabled();let a=$pe(e,n);if(!a.length)return r&&e.some(c=>c.isPending)?r.setDisabled():null;let l=n.facet(qs).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let c=r.options[r.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new Xu(a,$T(i,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:Wpe,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new Xu(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Xu(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class xy{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new xy(Upe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(qs),s=(i.override||n.languageDataAt("autocomplete",Hh(n)).map(Mpe)).map(l=>(this.active.find(u=>u.source==l)||new ms(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(iB));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Fpe(s,this.active)||a?o=Xu.build(s,n,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new ms(l.source,0):l));for(let l of e.effects)l.is(rB)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new xy(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?zpe:Bpe}}function Fpe(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const zpe={"aria-autocomplete":"list"},Bpe={};function $T(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Upe=[];function Vpe(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(tB);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class ms{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=Vpe(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new ms(r.source,0)),i&4&&r.state==0&&(r=new ms(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(nB))r=new ms(r.source,1,s.value);else if(s.is(vA))r=new ms(r.source,0);else if(s.is(iB))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Hh(e.state))}}class Wh extends ms{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Hh(e.state);if(a>o||!r||n&2&&(Hh(e.startState)==this.from||a<this.limit))return new ms(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return Hpe(r.validFor,e.state,s,o)?new Wh(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new Epe(e.state,a,!1)))?new Wh(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:Hh(e.state)):new ms(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Wh(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ms(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Hpe(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):eB(t,!0).test(r)}const iB=tt.define({map(t,e){return t.map(n=>n.map(e))}}),rB=tt.define(),vf=Ci.define({create(){return xy.start()},update(t,e){return t.update(e)},provide:t=>[KC.from(t,e=>e.tooltip),Re.contentAttributes.from(t,e=>e.attrs)]});function sB(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(vf).active.find(r=>r.source==e.source);return i instanceof Wh?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},Ppe(t.state,n,i.from,i.to)),{annotations:tB.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const Wpe=Lpe(vf,sB);function Jg(t,e="option"){return n=>{let i=n.state.field(vf,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(qs).interactionDelay)return!1;let r=1,s;e=="page"&&(s=Bte(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:rB.of(a)}),!0}}const FT=t=>{let e=t.state.field(vf,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(qs).interactionDelay?!1:sB(t,e.open.options[e.open.selected])},Gpe=t=>t.state.field(vf,!1)?(t.dispatch({effects:nB.of(!0)}),!0):!1,Kpe=t=>{let e=t.state.field(vf,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:vA.of(null)}),!0)},oB={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},aB=new class extends $c{};aB.startSide=1;aB.endSide=-1;const u1="()[]{}<>«»»«［］｛｝";function qpe(t){for(let e=0;e<u1.length;e+=2)if(u1.charCodeAt(e)==t)return u1.charAt(e+1);return TC(t<128?t:t+1)}function Ype(t,e){return t.languageDataAt("closeBrackets",e)[0]||oB}const Xpe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=Ype(t,t.selection.main.head).brackets||oB.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=Zpe(t.doc,o.head);for(let l of i)if(l==a&&Jpe(t.doc,o.head)==qpe(Or(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:re.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function Jpe(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Fo(Or(n,0)))}function Zpe(t,e){let n=t.sliceString(e-2,e);return Fo(Or(n,0))==n.length?n:n.slice(1)}class zT{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class cc{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=i.facet(to).markerFilter;r&&(e=r(e,i));let s=e.slice().sort((u,d)=>u.from-d.from||u.to-d.to),o=new gl,a=[],l=0;for(let u=0;;){let d=u==s.length?null:s[u];if(!d&&!a.length)break;let f,p;for(a.length?(f=l,p=a.reduce((m,v)=>Math.min(m,v.to),d&&d.from>f?d.from:1e8)):(f=d.from,p=d.to,a.push(d),u++);u<s.length;){let m=s[u];if(m.from==f&&(m.to>m.from||m.to==f))a.push(m),u++,p=Math.min(m.to,p);else{p=Math.min(m.from,p);break}}let g=hme(a);if(a.some(m=>m.from==m.to||m.from==m.to-1&&i.doc.lineAt(m.from).to==m.from))o.add(f,f,nt.widget({widget:new cme(g),diagnostics:a.slice()}));else{let m=a.reduce((v,y)=>y.markClass?v+" "+y.markClass:v,"");o.add(f,p,nt.mark({class:"cm-lintRange cm-lintRange-"+g+m,diagnostics:a.slice(),inclusiveEnd:a.some(v=>v.to>p)}))}l=p;for(let m=0;m<a.length;m++)a[m].to<=l&&a.splice(m--,1)}let c=o.finish();return new cc(c,n,ef(c))}}function ef(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new zT(r,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new zT(i.from,s,i.diagnostic)}}),i}function Qpe(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(to).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(yA))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function lB(t,e){return t.field(pr,!1)?e:e.concat(tt.appendConfig.of(fB))}function eme(t,e){return{effects:lB(t,[yA.of(e)])}}const yA=tt.define(),bA=tt.define(),cB=tt.define(),pr=Ci.define({create(){return new cc(nt.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=ef(n,t.selected.diagnostic,s)||ef(n,null,s)}!n.size&&r&&e.state.facet(to).autoPanel&&(r=null),t=new cc(n,r,i)}for(let n of e.effects)if(n.is(yA)){let i=e.state.facet(to).autoPanel?n.value.length?Zp.open:null:t.panel;t=cc.init(n.value,i,e.state)}else n.is(bA)?t=new cc(t.diagnostics,n.value?Zp.open:null,t.selected):n.is(cB)&&(t=new cc(t.diagnostics,t.panel,n.value));return t},provide:t=>[Ip.from(t,e=>e.panel),Re.decorations.from(t,e=>e.diagnostics)]}),tme=nt.mark({class:"cm-lintRange cm-lintRange-active"});function nme(t,e,n){let{diagnostics:i}=t.state.field(pr),r,s=-1,o=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0)))return r=u.diagnostics,s=l,o=c,!1});let a=t.state.facet(to).tooltipFilter;return r&&a&&(r=a(r,t.state)),r?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:ime(t,r)}}}:null}function ime(t,e){return Rt("ul",{class:"cm-tooltip-lint"},e.map(n=>dB(t,n,!1)))}const rme=t=>{let e=t.state.field(pr,!1);(!e||!e.panel)&&t.dispatch({effects:lB(t.state,[bA.of(!0)])});let n=Op(t,Zp.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},BT=t=>{let e=t.state.field(pr,!1);return!e||!e.panel?!1:(t.dispatch({effects:bA.of(!1)}),!0)},sme=t=>{let e=t.state.field(pr,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},ome=ei.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(to);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(to);n.length&&ame(n.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(eme(this.view.state,i.reduce((r,s)=>r.concat(s))))},i=>{dr(this.view.state,i)})}}update(t){let e=t.state.facet(to);(t.docChanged||e!=t.startState.facet(to)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function ame(t,e,n){let i=[],r=-1;for(let s of t)s.then(o=>{i.push(o),clearTimeout(r),i.length==t.length?e(i):r=setTimeout(()=>e(i),200)},n)}const to=Ce.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Ml(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function lme(t,e={}){return[to.of({source:t,config:e}),ome,fB]}function uB(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function dB(t,e,n){var i;let r=n?uB(e.actions):[];return Rt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Rt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let p=ef(t.state.field(pr).diagnostics,e);p&&s.apply(t,p.from,p.to)},{name:c}=s,u=r[o]?c.indexOf(r[o]):-1,d=u<0?c:[c.slice(0,u),Rt("u",c.slice(u,u+1)),c.slice(u+1)];return Rt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&Rt("div",{class:"cm-diagnosticSource"},e.source))}class cme extends Rl{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Rt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class UT{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=dB(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Zp{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)BT(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=uB(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=ef(this.view.state.field(pr).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Rt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Rt("div",{class:"cm-panel-lint"},this.list,Rt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>BT(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(pr).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(pr),i=0,r=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,f;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==u){d=p;break}d<0?(f=new UT(this.view,u),this.items.splice(i,0,f),r=!0):(f=this.items[d],d>i&&(this.items.splice(i,d-i),r=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new UT(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(pr),i=ef(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:cB.of(i)})}static open(e){return new Zp(e)}}function ume(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Zg(t){return ume(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const dme=Re.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Zg("#d11")},".cm-lintRange-warning":{backgroundImage:Zg("orange")},".cm-lintRange-info":{backgroundImage:Zg("#999")},".cm-lintRange-hint":{backgroundImage:Zg("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function fme(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function hme(t){let e="hint",n=1;for(let i of t){let r=fme(i.severity);r>n&&(n=r,e=i.severity)}return e}const fB=[pr,Re.decorations.compute([pr],t=>{let{selected:e,panel:n}=t.field(pr);return!e||!n||e.from==e.to?nt.none:nt.set([tme.range(e.from,e.to)])}),zte(nme,{hideOn:Qpe}),dme],hB=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},pme=hB("up"),mme=hB("down"),gme=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(re.range(s,s)):e=re.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},vme=[{key:"Ctrl-Space",run:Gpe},{key:"Escape",run:Kpe},{key:"ArrowDown",run:Jg(!0)},{key:"ArrowUp",run:Jg(!1)},{key:"PageDown",run:Jg(!0,"page")},{key:"PageUp",run:Jg(!1,"page")},{key:"Enter",run:FT},{key:"Tab",run:FT},{key:"Mod-f",run:Zz,scope:"editor search-panel"},{key:"Escape",run:Qz,scope:"editor search-panel"},{key:"Alt-Enter",run:qz,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:Yz,scope:"editor search-panel"},{key:"Ctrl-g",run:upe},{key:"Mod-d",run:ppe,preventDefault:!0},{key:"Shift-Mod-l",run:Spe},{key:"Enter",run:ET,shift:ET},{key:"ArrowLeft",run:sT,shift:dT,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:zhe,shift:Ghe},{key:"ArrowRight",run:oT,shift:fT,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Bhe,shift:Khe},{key:"ArrowUp",run:aT,shift:hT,preventDefault:!0},{key:"ArrowDown",run:lT,shift:pT,preventDefault:!0},{key:"Home",run:uT,shift:yT},{mac:"Cmd-ArrowLeft",run:uT,shift:yT},{key:"Mod-Home",run:bT,shift:xT},{mac:"Cmd-ArrowUp",run:bT,shift:xT},{key:"PageUp",run:r1,shift:mT},{mac:"Ctrl-ArrowUp",run:r1,shift:mT},{key:"PageDown",run:s1,shift:gT},{mac:"Ctrl-ArrowDown",run:s1,shift:gT},{key:"End",run:cT,shift:vT},{mac:"Cmd-ArrowRight",run:cT,shift:vT},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:pme,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:mme,preventDefault:!0},{key:"Shift-Alt-i",run:gme},{key:"Mod-End",run:wT,shift:ST},{mac:"Cmd-ArrowDown",run:wT,shift:ST},{key:"Mod-a",run:Xhe},{key:"Backspace",run:Xpe},{key:"Backspace",run:o1,shift:o1},{key:"Delete",run:kT},{key:"Mod-Backspace",mac:"Alt-Backspace",run:_T},{key:"Mod-Delete",mac:"Alt-Delete",run:Zhe},{mac:"Mod-Backspace",run:Qhe},{mac:"Mod-Delete",run:CT},{mac:"Ctrl-b",run:sT,shift:dT,preventDefault:!0},{mac:"Ctrl-f",run:oT,shift:fT},{mac:"Ctrl-p",run:aT,shift:hT},{mac:"Ctrl-n",run:lT,shift:pT},{mac:"Ctrl-a",run:Uhe,shift:qhe},{mac:"Ctrl-e",run:Vhe,shift:Yhe},{mac:"Ctrl-d",run:kT},{mac:"Ctrl-h",run:o1},{mac:"Ctrl-k",run:CT},{mac:"Ctrl-Alt-h",run:_T},{mac:"Ctrl-o",run:epe},{mac:"Ctrl-t",run:tpe},{mac:"Ctrl-v",run:s1},{mac:"Alt-v",run:r1},{key:"Shift-Mod-k",run:ope},{key:"Alt-ArrowDown",run:ipe},{key:"Alt-ArrowUp",run:npe},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:spe},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:rpe},{key:"Mod-l",run:Jhe,preventDefault:!0},{key:"Shift-Mod-\\",run:Whe},{key:"Tab",run:Bk,shift:AT,preventDefault:!0},{key:"Mod-[",run:AT},{key:"Mod-]",run:Bk},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Zfe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Qfe},{key:"Mod-k Mod-0",run:ehe},{key:"Mod-k Mod-j",run:the},{key:"Mod-k Mod-c",run:_he},{key:"Mod-k Mod-u",run:Che},{key:"Mod-/",run:She},{key:"Shift-Alt-a",run:Ehe},{key:"Mod-z",run:Ez,preventDefault:!0},{key:"Mod-y",run:zk,preventDefault:!0},{key:"Mod-Shift-z",run:zk,preventDefault:!0},{key:"Mod-u",run:Ohe,preventDefault:!0},{key:"Mod-Shift-m",run:rme},{key:"F8",run:sme}];var yme=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},vu=new WeakMap,Qg=new WeakMap,e0={},d1=0,pB=function(t){return t&&(t.host||pB(t.parentNode))},bme=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=pB(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},wme=function(t,e,n,i){var r=bme(e,Array.isArray(t)?t:[t]);e0[n]||(e0[n]=new WeakMap);var s=e0[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),g=p!==null&&p!=="false",m=(vu.get(f)||0)+1,v=(s.get(f)||0)+1;vu.set(f,m),s.set(f,v),o.push(f),m===1&&g&&Qg.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),d1++,function(){o.forEach(function(d){var f=vu.get(d)-1,p=s.get(d)-1;vu.set(d,f),s.set(d,p),f||(Qg.has(d)||d.removeAttribute(i),Qg.delete(d)),p||d.removeAttribute(n)}),d1--,d1||(vu=new WeakMap,vu=new WeakMap,Qg=new WeakMap,e0={})}},xme=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=yme(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),wme(i,r,n,"aria-hidden")):function(){return null}},Hk=["Enter"," "],Sme=["ArrowDown","PageUp","Home"],mB=["ArrowUp","PageDown","End"],kme=[...Sme,...mB],_me={ltr:[...Hk,"ArrowRight"],rtl:[...Hk,"ArrowLeft"]},Cme={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ew="Menu",[Qp,Eme,Ame]=om(ew),[eu,gB]=_s(ew,[Ame,hf,Qy]),wA=hf(),vB=Qy(),[X0e,tu]=eu(ew),[J0e,Tm]=eu(ew),Nme="MenuAnchor",xA=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=wA(n);return h.jsx(jb,{...r,...i,ref:e})});xA.displayName=Nme;var SA="MenuPortal",[Pme,yB]=eu(SA,{forceMount:void 0}),bB=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=tu(SA,e);return h.jsx(Pme,{scope:e,forceMount:n,children:h.jsx(ia,{present:n||s.open,children:h.jsx(_m,{asChild:!0,container:r,children:i})})})};bB.displayName=SA;var Gr="MenuContent",[Mme,kA]=eu(Gr),wB=b.forwardRef((t,e)=>{const n=yB(Gr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=tu(Gr,t.__scopeMenu),o=Tm(Gr,t.__scopeMenu);return h.jsx(Qp.Provider,{scope:t.__scopeMenu,children:h.jsx(ia,{present:i||s.open,children:h.jsx(Qp.Slot,{scope:t.__scopeMenu,children:o.modal?h.jsx(Rme,{...r,ref:e}):h.jsx(Tme,{...r,ref:e})})})})}),Rme=b.forwardRef((t,e)=>{const n=tu(Gr,t.__scopeMenu),i=b.useRef(null),r=lt(e,i);return b.useEffect(()=>{const s=i.current;if(s)return xme(s)},[]),h.jsx(_A,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ve(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Tme=b.forwardRef((t,e)=>{const n=tu(Gr,t.__scopeMenu);return h.jsx(_A,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Ome=jd("MenuContent.ScrollLock"),_A=b.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:g,...m}=t,v=tu(Gr,n),y=Tm(Gr,n),w=wA(n),x=vB(n),S=Eme(n),[_,E]=b.useState(null),C=b.useRef(null),N=lt(e,C,v.onContentChange),M=b.useRef(0),j=b.useRef(""),I=b.useRef(0),O=b.useRef(null),H=b.useRef("right"),D=b.useRef(0),K=g?Db:b.Fragment,X=g?{as:Ome,allowPinchZoom:!0}:void 0,te=z=>{var k,P;const ie=j.current+z,ye=S().filter(L=>!L.disabled),J=document.activeElement,le=(k=ye.find(L=>L.ref.current===J))==null?void 0:k.textValue,F=ye.map(L=>L.textValue),$=Wme(F,ie,le),V=(P=ye.find(L=>L.textValue===$))==null?void 0:P.ref.current;(function L(R){j.current=R,window.clearTimeout(M.current),R!==""&&(M.current=window.setTimeout(()=>L(""),1e3))})(ie),V&&setTimeout(()=>V.focus())};b.useEffect(()=>()=>window.clearTimeout(M.current),[]),PE();const U=b.useCallback(z=>{var ye,J;return H.current===((ye=O.current)==null?void 0:ye.side)&&Kme(z,(J=O.current)==null?void 0:J.area)},[]);return h.jsx(Mme,{scope:n,searchRef:j,onItemEnter:b.useCallback(z=>{U(z)&&z.preventDefault()},[U]),onItemLeave:b.useCallback(z=>{var ie;U(z)||((ie=C.current)==null||ie.focus(),E(null))},[U]),onTriggerLeave:b.useCallback(z=>{U(z)&&z.preventDefault()},[U]),pointerGraceTimerRef:I,onPointerGraceIntentChange:b.useCallback(z=>{O.current=z},[]),children:h.jsx(K,{...X,children:h.jsx(Rb,{asChild:!0,trapped:r,onMountAutoFocus:ve(s,z=>{var ie;z.preventDefault(),(ie=C.current)==null||ie.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:h.jsx(Sm,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(Lj,{asChild:!0,...x,dir:y.dir,orientation:"vertical",loop:i,currentTabStopId:_,onCurrentTabStopIdChange:E,onEntryFocus:ve(l,z=>{y.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(zE,{role:"menu","aria-orientation":"vertical","data-state":LB(v.open),"data-radix-menu-content":"",dir:y.dir,...w,...m,ref:N,style:{outline:"none",...m.style},onKeyDown:ve(m.onKeyDown,z=>{const ye=z.target.closest("[data-radix-menu-content]")===z.currentTarget,J=z.ctrlKey||z.altKey||z.metaKey,le=z.key.length===1;ye&&(z.key==="Tab"&&z.preventDefault(),!J&&le&&te(z.key));const F=C.current;if(z.target!==F||!kme.includes(z.key))return;z.preventDefault();const V=S().filter(k=>!k.disabled).map(k=>k.ref.current);mB.includes(z.key)&&V.reverse(),Vme(V)}),onBlur:ve(t.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(M.current),j.current="")}),onPointerMove:ve(t.onPointerMove,em(z=>{const ie=z.target,ye=D.current!==z.clientX;if(z.currentTarget.contains(ie)&&ye){const J=z.clientX>D.current?"right":"left";H.current=J,D.current=z.clientX}}))})})})})})})});wB.displayName=Gr;var Ime="MenuGroup",CA=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Ge.div,{role:"group",...i,ref:e})});CA.displayName=Ime;var jme="MenuLabel",xB=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Ge.div,{...i,ref:e})});xB.displayName=jme;var Sy="MenuItem",VT="menu.itemSelect",tw=b.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=b.useRef(null),o=Tm(Sy,t.__scopeMenu),a=kA(Sy,t.__scopeMenu),l=lt(e,s),c=b.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(VT,{bubbles:!0,cancelable:!0});d.addEventListener(VT,p=>i==null?void 0:i(p),{once:!0}),iC(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return h.jsx(SB,{...r,ref:l,disabled:n,onClick:ve(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:ve(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:ve(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||Hk.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});tw.displayName=Sy;var SB=b.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=kA(Sy,n),a=vB(n),l=b.useRef(null),c=lt(e,l),[u,d]=b.useState(!1),[f,p]=b.useState("");return b.useEffect(()=>{const g=l.current;g&&p((g.textContent??"").trim())},[s.children]),h.jsx(Qp.ItemSlot,{scope:n,disabled:i,textValue:r??f,children:h.jsx(Dj,{asChild:!0,...a,focusable:!i,children:h.jsx(Ge.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:c,onPointerMove:ve(t.onPointerMove,em(g=>{i?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ve(t.onPointerLeave,em(g=>o.onItemLeave(g))),onFocus:ve(t.onFocus,()=>d(!0)),onBlur:ve(t.onBlur,()=>d(!1))})})})}),Lme="MenuCheckboxItem",kB=b.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return h.jsx(NB,{scope:t.__scopeMenu,checked:n,children:h.jsx(tw,{role:"menuitemcheckbox","aria-checked":ky(n)?"mixed":n,...r,ref:e,"data-state":AA(n),onSelect:ve(r.onSelect,()=>i==null?void 0:i(ky(n)?!0:!n),{checkForDefaultPrevented:!1})})})});kB.displayName=Lme;var _B="MenuRadioGroup",[Dme,$me]=eu(_B,{value:void 0,onValueChange:()=>{}}),CB=b.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=br(i);return h.jsx(Dme,{scope:t.__scopeMenu,value:n,onValueChange:s,children:h.jsx(CA,{...r,ref:e})})});CB.displayName=_B;var EB="MenuRadioItem",AB=b.forwardRef((t,e)=>{const{value:n,...i}=t,r=$me(EB,t.__scopeMenu),s=n===r.value;return h.jsx(NB,{scope:t.__scopeMenu,checked:s,children:h.jsx(tw,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":AA(s),onSelect:ve(i.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});AB.displayName=EB;var EA="MenuItemIndicator",[NB,Fme]=eu(EA,{checked:!1}),PB=b.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=Fme(EA,n);return h.jsx(ia,{present:i||ky(s.checked)||s.checked===!0,children:h.jsx(Ge.span,{...r,ref:e,"data-state":AA(s.checked)})})});PB.displayName=EA;var zme="MenuSeparator",MB=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Ge.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});MB.displayName=zme;var Bme="MenuArrow",RB=b.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=wA(n);return h.jsx(BE,{...r,...i,ref:e})});RB.displayName=Bme;var Ume="MenuSub",[Z0e,TB]=eu(Ume),vh="MenuSubTrigger",OB=b.forwardRef((t,e)=>{const n=tu(vh,t.__scopeMenu),i=Tm(vh,t.__scopeMenu),r=TB(vh,t.__scopeMenu),s=kA(vh,t.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>u,[u]),b.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),h.jsx(xA,{asChild:!0,...c,children:h.jsx(SB,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":LB(n.open),...t,ref:Jy(e,r.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ve(t.onPointerMove,em(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ve(t.onPointerLeave,em(d=>{var p,g;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(g=n.content)==null?void 0:g.dataset.side,v=m==="right",y=v?-5:5,w=f[v?"left":"right"],x=f[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:w,y:f.top},{x,y:f.top},{x,y:f.bottom},{x:w,y:f.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ve(t.onKeyDown,d=>{var p;const f=s.searchRef.current!=="";t.disabled||f&&d.key===" "||_me[i.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});OB.displayName=vh;var IB="MenuSubContent",jB=b.forwardRef((t,e)=>{const n=yB(Gr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=tu(Gr,t.__scopeMenu),o=Tm(Gr,t.__scopeMenu),a=TB(IB,t.__scopeMenu),l=b.useRef(null),c=lt(e,l);return h.jsx(Qp.Provider,{scope:t.__scopeMenu,children:h.jsx(ia,{present:i||s.open,children:h.jsx(Qp.Slot,{scope:t.__scopeMenu,children:h.jsx(_A,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ve(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ve(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ve(t.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=Cme[o.dir].includes(u.key);d&&f&&(s.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});jB.displayName=IB;function LB(t){return t?"open":"closed"}function ky(t){return t==="indeterminate"}function AA(t){return ky(t)?"indeterminate":t?"checked":"unchecked"}function Vme(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Hme(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function Wme(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Hme(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Gme(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>i!=f>i&&n<(d-c)*(i-u)/(f-u)+c&&(r=!r)}return r}function Kme(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Gme(n,e)}function em(t){return e=>e.pointerType==="mouse"?t(e):void 0}var qme=xA,Yme=bB,Xme=wB,Jme=CA,Zme=xB,Qme=tw,ege=kB,tge=CB,nge=AB,ige=PB,rge=MB,sge=RB,oge=OB,age=jB,DB="DropdownMenu",[lge,Q0e]=_s(DB,[gB]),Ji=gB(),[eve,$B]=lge(DB),FB="DropdownMenuTrigger",cge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=$B(FB,n),o=Ji(n);return h.jsx(qme,{asChild:!0,...o,children:h.jsx(Ge.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:Jy(e,s.triggerRef),onPointerDown:ve(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ve(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});cge.displayName=FB;var uge="DropdownMenuPortal",zB=t=>{const{__scopeDropdownMenu:e,...n}=t,i=Ji(e);return h.jsx(Yme,{...i,...n})};zB.displayName=uge;var BB="DropdownMenuContent",UB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=$B(BB,n),s=Ji(n),o=b.useRef(!1);return h.jsx(Xme,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...i,ref:e,onCloseAutoFocus:ve(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ve(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!r.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});UB.displayName=BB;var dge="DropdownMenuGroup",fge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Ji(n);return h.jsx(Jme,{...r,...i,ref:e})});fge.displayName=dge;var hge="DropdownMenuLabel",VB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Ji(n);return h.jsx(Zme,{...r,...i,ref:e})});VB.displayName=hge;var pge="DropdownMenuItem",HB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Ji(n);return h.jsx(Qme,{...r,...i,ref:e})});HB.displayName=pge;var mge="DropdownMenuCheckboxItem",WB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Ji(n);return h.jsx(ege,{...r,...i,ref:e})});WB.displayName=mge;var gge="DropdownMenuRadioGroup",vge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Ji(n);return h.jsx(tge,{...r,...i,ref:e})});vge.displayName=gge;var yge="DropdownMenuRadioItem",GB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Ji(n);return h.jsx(nge,{...r,...i,ref:e})});GB.displayName=yge;var bge="DropdownMenuItemIndicator",KB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Ji(n);return h.jsx(ige,{...r,...i,ref:e})});KB.displayName=bge;var wge="DropdownMenuSeparator",qB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Ji(n);return h.jsx(rge,{...r,...i,ref:e})});qB.displayName=wge;var xge="DropdownMenuArrow",Sge=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Ji(n);return h.jsx(sge,{...r,...i,ref:e})});Sge.displayName=xge;var kge="DropdownMenuSubTrigger",YB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Ji(n);return h.jsx(oge,{...r,...i,ref:e})});YB.displayName=kge;var _ge="DropdownMenuSubContent",XB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Ji(n);return h.jsx(age,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});XB.displayName=_ge;var Cge=zB,JB=UB,ZB=VB,QB=HB,e7=WB,t7=GB,n7=KB,i7=qB,r7=YB,s7=XB;const Ege=b.forwardRef(({className:t,inset:e,children:n,...i},r)=>h.jsxs(r7,{ref:r,className:Q("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,h.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block size-4"})]}));Ege.displayName=r7.displayName;const Age=b.forwardRef(({className:t,...e},n)=>h.jsx(s7,{ref:n,className:Q("z-50 min-w-32 overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));Age.displayName=s7.displayName;const Nge=b.forwardRef(({className:t,sideOffset:e=4,...n},i)=>h.jsx(Cge,{children:h.jsx(JB,{ref:i,sideOffset:e,className:Q("z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));Nge.displayName=JB.displayName;const Pge=b.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(QB,{ref:i,className:Q("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Pge.displayName=QB.displayName;const Mge=b.forwardRef(({className:t,children:e,checked:n,...i},r)=>h.jsxs(e7,{ref:r,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(n7,{children:h.jsx("span",{className:"icon-[lucide--check] size-4"})})}),e]}));Mge.displayName=e7.displayName;const Rge=b.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(t7,{ref:i,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(n7,{children:h.jsx("span",{className:"icon-[lucide--circle-dot] block size-4"})})}),e]}));Rge.displayName=t7.displayName;const Tge=b.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(ZB,{ref:i,className:Q("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Tge.displayName=ZB.displayName;const Oge=b.forwardRef(({className:t,...e},n)=>h.jsx(i7,{ref:n,className:Q("-mx-1 my-1 h-px bg-stone-600",t),...e}));Oge.displayName=i7.displayName;const NA=mD("vonsim-program",lb(On().language,"editor.example"),void 0,{getOnInit:!0}),o7=()=>{const t=T.get(NA);return typeof t=="string"?t:""},Ige=ei.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(T.set(NA,this.view.state.doc.toString()),T.set(Yv,!0))}}),HT=ue(null);ue(t=>t(HT),(t,e,n)=>{e(HT,n)});const jge=ue("");ue(t=>t(jge)!==t(NA));const Wk=ue(0),WT=ue(null),GT=ue(t=>t(WT),(t,e,n)=>{e(WT,n)}),a7=ue(""),Lge=ue(()=>typeof window<"u"&&window.codemirror?window.codemirror.state.doc.toString():o7()||""),Dge=ue(t=>t(a7)!==t(Lge)),f1="showSaveFilePicker"in window;function $ge(){const[t,e]=af(),n=it(Wk),i=it(GT),r=hp(GT),s=hp(a7),o=it(Dge),a=i&&o;b.useEffect(()=>{if(window.codemirror){const d=()=>{};return window.codemirror.dom.addEventListener("input",d),()=>{window.codemirror.dom.removeEventListener("input",d)}}},[]);const l=b.useCallback(async()=>{if(!f1){Di({title:"editor.files.unsupported",variant:"error"});return}if(!(a&&!confirm("editor.files.unsaved")))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await d.requestPermission({mode:"readwrite"})==="granted"){r(d);const g=await(await d.getFile()).text();s(g),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:g}})}}catch(d){console.error(d),Di({title:"editor.files.open-error",variant:"error"})}},[a,r,s]),c=b.useCallback(async()=>{if(!f1){Di({title:"editor.files.unsupported",variant:"error"});return}if(!i){Di({title:"No hay archivo abierto para guardar",variant:"error"});return}if(a)try{const d=window.codemirror.state.doc.toString(),f=await i.createWritable({keepExistingData:!1});await f.write(d),await f.close(),s(d),Di({title:"Archivo guardado",variant:"info"})}catch(d){console.error(d),Di({title:"editor.files.save-error",variant:"error"})}},[i,a,s]),u=b.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),f=(i==null?void 0:i.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(f1)try{const p=await window.showSaveFilePicker({suggestedName:f,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await p.requestPermission({mode:"readwrite"})==="granted"){r(p);const m=await p.createWritable({keepExistingData:!1});await m.write(d),await m.close(),s(d),Di({title:"Archivo guardado",variant:"info"})}}catch(p){console.error(p),Di({title:"editor.files.save-error",variant:"error"})}else{const p=new Blob([d],{type:"text/plain"}),g=URL.createObjectURL(p),m=document.createElement("a");m.style.display="none",m.href=g,m.download=f,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(g)}},[i,r,s]);return h.jsxs("div",{"data-testid":"status-bar",className:"flex items-center justify-between border-t border-stone-700 bg-gradient-to-r from-stone-800 to-stone-900 px-4 py-0.5 font-sans text-xs text-stone-300 shadow-inner",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[i&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-medium text-white transition-colors",children:i.name}),a&&h.jsx("span",{className:"size-2 rounded-full bg-orange-400"})]}),i&&h.jsx("div",{className:"h-4 w-px bg-stone-600"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(gr,{content:"editor.files.open",position:"top",children:h.jsx(ht,{variant:"ghost",size:"sm",onClick:l,className:"hover-lift","aria-label":"editor.files.open",children:h.jsx("span",{className:"icon-[lucide--folder-open] size-4"})})}),h.jsx(gr,{content:"editor.files.save",position:"top",children:h.jsx(ht,{variant:"ghost",size:"sm",onClick:c,disabled:!i||!a,className:"hover-lift","aria-label":"editor.files.save",children:h.jsx("span",{className:"icon-[lucide--save] size-4"})})}),h.jsx(gr,{content:"editor.files.save-as",position:"top",children:h.jsx(ht,{variant:"ghost",size:"sm",onClick:u,className:"hover-lift","aria-label":"editor.files.save-as",children:h.jsx("span",{className:"icon-[lucide--save-all] size-4"})})})]})]}),h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsxs(JE,{children:[h.jsx(ZE,{asChild:!0,children:h.jsx("button",{className:"flex items-center justify-center rounded-lg p-1 text-stone-300 hover:bg-stone-800 focus:outline-none focus:ring-2 focus:ring-mantis-500","aria-label":"Ajustar tamaño de fuente del editor",title:"Ajustar tamaño de fuente del editor",type:"button",children:h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5"})})}),h.jsxs(Kb,{align:"end",className:"w-56 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-5 text-mantis-400"}),h.jsx("span",{className:"text-sm font-medium text-white",children:"Tamaño de fuente del editor"}),h.jsxs("span",{className:"ml-auto text-xs text-stone-400",children:[t.editorFontSize,"px"]})]}),h.jsx(lc,{value:[t.editorFontSize],min:8,max:64,step:1,onValueChange:([d])=>e(f=>({...f,editorFontSize:d})),className:"w-full"}),h.jsxs("div",{className:"mt-2 flex justify-between text-xs text-stone-500",children:[h.jsx("span",{children:"8"}),h.jsx("span",{children:"64"})]})]})]}),h.jsxs("div",{className:Q("flex items-center gap-1.5 rounded-full px-2 py-0.5 font-medium transition-colors",n>0?"border border-red-500/30 bg-red-500/20 text-red-300":"border border-green-500/30 bg-green-500/20 text-green-300"),children:[h.jsx("div",{className:Q("size-2 rounded-full",n>0?"bg-red-400":"bg-green-400")}),h.jsx("span",{className:"font-mono",children:n>0?`${n} error${n>1?"es":""}`:"Sin errores"})]})]})]})}const Ti={character:Ve.character,comment:Ve.comment,"data-directive":Cn.define(),identifier:Ve.variableName,instruction:Cn.define(),label:Ve.labelName,number:Ve.number,operator:Ve.operator,offset:Cn.define(),"ptr-size":Cn.define(),punctuation:Ve.punctuation,register:Cn.define(),special:Cn.define(),string:Ve.string,unassigned:Cn.define()},Fge=aA.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":NC.includes(e)?"data-directive":PC.includes(e)?"instruction":Dv.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:Ti}),zge=ahe(Yb.define([{tag:Ti.character,class:"text-orange-300"},{tag:Ti.comment,class:"text-stone-500 italic"},{tag:Ti["data-directive"],class:"text-rose-400/80"},{tag:Ti.instruction,class:"text-mantis-400"},{tag:Ti.number,class:"text-cyan-300/60"},{tag:Ti.operator,class:"text-rose-300"},{tag:Ti.offset,class:"text-rose-400/80 italic"},{tag:Ti["ptr-size"],class:"text-rose-400/80 italic"},{tag:Ti.punctuation,class:"text-stone-600"},{tag:Ti.register,class:"text-emerald-400/80"},{tag:Ti.special,class:"text-yellow-300/80"},{tag:Ti.string,class:"text-orange-300"},{tag:Ti.unassigned,class:"text-rose-400/80"}])),Bge=lme(t=>{const e=t.state.doc.toString(),n=AD(e);if(n.success)return T.set(Wk,0),[];const i=n,r=On().language,s=i.errors.map(o=>{var c,u;const a=((c=o.position)==null?void 0:c.start)??0,l=((u=o.position)==null?void 0:u.end)??e.length;return{message:o.translate(r),severity:"error",from:a,to:l}});return T.set(Wk,s.length),s},{delay:200});function Uge(){return new Dfe(Fge,[zge,Bge])}function l7({className:t}){const[e,n]=b.useState(),i=jJ(),r=b.useCallback(s=>{s&&n(s)},[]);return b.useEffect(()=>{if(e)return window.codemirror=new Re({state:ct.create({doc:o7()||"",extensions:[ct.tabSize.of(2),l6.of(ct.readOnly.of(!1)),Ige,Jte(),nne,ene(),_te(),The(),mte(),Re.domEventHandlers({drop:s=>s.preventDefault()}),ct.allowMultipleSelections.of(!0),Mte(),Re.updateListener.of(s=>{s.selectionSet}),Q8.of([{key:"Escape",run:s=>(s.dispatch({selection:re.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?Bk(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...vme]),Uge()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),h.jsxs("div",{className:Q("flex flex-col rounded-lg border border-stone-700 bg-gradient-to-br from-stone-900 to-stone-800 shadow-xl",t),children:[h.jsx("div",{ref:r,className:"grow overflow-auto rounded-t-lg font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),h.jsx($ge,{})]})}const c7=b.memo(()=>{const t=CC(),e=nq("(max-width: 640px)");b9(),w9();const n=b.useMemo(()=>({}),[]);return h.jsxs("div",{"data-testid":"app-container",className:"flex h-screen w-screen flex-col bg-black text-white",lang:t,style:n,children:[h.jsx(x9,{}),h.jsx(m9,{"data-testid":"header"}),e?h.jsx(d7,{}):h.jsx(u7,{}),h.jsx(kD,{"data-testid":"footer"}),h.jsx(_9,{}),h.jsx(y9,{})]})});c7.displayName="App";const u7=b.memo(()=>{const[t]=lm(Vb);return h.jsxs(pL,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[h.jsx(b0,{id:"panel-editor",order:1,minSize:30,defaultSize:50,tagName:"section",className:"rounded-lg border border-stone-600 bg-black","data-testid":"panel-editor",children:h.jsx(l7,{className:"size-full"})}),h.jsx(US,{className:"w-2"}),h.jsx(b0,{id:"panel-computer",order:2,minSize:20,defaultSize:50,tagName:"section",className:"computer-background rounded-lg border border-stone-600","data-testid":"panel-computer",children:h.jsx(Q9,{})}),t&&h.jsxs(h.Fragment,{children:[h.jsx(US,{className:"w-2"}),h.jsx(b0,{id:"panel-settings",order:3,minSize:30,defaultSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800","data-testid":"panel-settings",children:h.jsx(h9,{className:"size-full"})})]})]})});u7.displayName="DesktopLayout";const d7=b.memo(()=>{const t=Xt(),[e,n]=b.useState("editor"),[i,r]=lm(Vb),s=it(si),o=b.useMemo(()=>"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),a=b.useMemo(()=>i?"settings":e,[i,e]),l=b.useCallback(u=>{i&&r(!1),n(u)},[i,r]),c=b.useMemo(()=>{switch(a){case"editor":return"Editor";case"computer":return"Computadora";case"settings":return"Configuración";default:return""}},[a]);return h.jsx(Fj,{value:a,onValueChange:l,asChild:!0,children:h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"sticky top-0 z-30 w-full border-b border-stone-700 bg-stone-900 px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-500",children:"Pestaña:"}),h.jsx("span",{className:"text-sm font-medium text-white",children:c})]}),a==="computer"&&h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-xs text-stone-500",children:"Instrucción actual:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:o||h.jsx("span",{className:"italic text-stone-400",children:"Sin instrucción"})})]})]})}),h.jsx(y0,{value:"editor",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-black data-[state=inactive]:hidden","data-testid":"panel-editor",children:h.jsx(l7,{className:"size-full"})})}),h.jsx(y0,{value:"computer",asChild:!0,children:h.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-computer",children:h.jsx(Q9,{})})}),h.jsx(y0,{value:"settings",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-settings",children:h.jsx(h9,{className:"size-full"})})}),h.jsx("div",{className:"border-t border-stone-700 bg-stone-900 p-2",children:h.jsxs(Bj,{className:"grid grid-cols-3 gap-2",children:[h.jsxs(v0,{value:"editor",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--file-terminal] mb-1 size-5"}),t("control.tabs.editor")]}),h.jsxs(v0,{value:"computer",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--computer] mb-1 size-5"}),t("control.tabs.computer")]}),h.jsxs(v0,{value:"settings",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--settings] mb-1 size-5"}),"Configuración"]})]})})]})})});d7.displayName="MobileLayout";var PA="ToastProvider",[MA,Vge,Hge]=om("Toast"),[f7,tve]=_s("Toast",[Hge]),[Wge,nw]=f7(PA),h7=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=b.useState(null),[c,u]=b.useState(0),d=b.useRef(!1),f=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${PA}\`. Expected non-empty \`string\`.`),h.jsx(MA.Provider,{scope:e,children:h.jsx(Wge,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>u(p=>p+1),[]),onToastRemove:b.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};h7.displayName=PA;var p7="ToastViewport",Gge=["F8"],Gk="toast.viewportPause",Kk="toast.viewportResume",m7=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=Gge,label:r="Notifications ({hotkey})",...s}=t,o=nw(p7,n),a=Vge(n),l=b.useRef(null),c=b.useRef(null),u=b.useRef(null),d=b.useRef(null),f=lt(e,d,o.onViewportChange),p=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;b.useEffect(()=>{const v=y=>{var x;i.length!==0&&i.every(S=>y[S]||y.code===S)&&((x=d.current)==null||x.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[i]),b.useEffect(()=>{const v=l.current,y=d.current;if(g&&v&&y){const w=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(Gk);y.dispatchEvent(E),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(Kk);y.dispatchEvent(E),o.isClosePausedRef.current=!1}},S=E=>{!v.contains(E.relatedTarget)&&x()},_=()=>{v.contains(document.activeElement)||x()};return v.addEventListener("focusin",w),v.addEventListener("focusout",S),v.addEventListener("pointermove",w),v.addEventListener("pointerleave",_),window.addEventListener("blur",w),window.addEventListener("focus",x),()=>{v.removeEventListener("focusin",w),v.removeEventListener("focusout",S),v.removeEventListener("pointermove",w),v.removeEventListener("pointerleave",_),window.removeEventListener("blur",w),window.removeEventListener("focus",x)}}},[g,o.isClosePausedRef]);const m=b.useCallback(({tabbingDirection:v})=>{const w=a().map(x=>{const S=x.ref.current,_=[S,...s0e(S)];return v==="forwards"?_:_.reverse()});return(v==="forwards"?w.reverse():w).flat()},[a]);return b.useEffect(()=>{const v=d.current;if(v){const y=w=>{var _,E,C;const x=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!x){const N=document.activeElement,M=w.shiftKey;if(w.target===v&&M){(_=c.current)==null||_.focus();return}const O=m({tabbingDirection:M?"backwards":"forwards"}),H=O.findIndex(D=>D===N);h1(O.slice(H+1))?w.preventDefault():M?(E=c.current)==null||E.focus():(C=u.current)==null||C.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[a,m]),h.jsxs(xoe,{ref:l,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&h.jsx(qk,{ref:c,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"forwards"});h1(v)}}),h.jsx(MA.Slot,{scope:n,children:h.jsx(Ge.ol,{tabIndex:-1,...s,ref:f})}),g&&h.jsx(qk,{ref:u,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"backwards"});h1(v)}})]})});m7.displayName=p7;var g7="ToastFocusProxy",qk=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=nw(g7,n);return h.jsx(VE,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&i()}})});qk.displayName=g7;var Om="Toast",Kge="toast.swipeStart",qge="toast.swipeMove",Yge="toast.swipeCancel",Xge="toast.swipeEnd",v7=b.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a,l]=ul({prop:i,defaultProp:r??!0,onChange:s,caller:Om});return h.jsx(ia,{present:n||a,children:h.jsx(Qge,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:br(t.onPause),onResume:br(t.onResume),onSwipeStart:ve(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ve(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ve(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ve(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});v7.displayName=Om;var[Jge,Zge]=f7(Om,{onClose(){}}),Qge=b.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...g}=t,m=nw(Om,n),[v,y]=b.useState(null),w=lt(e,D=>y(D)),x=b.useRef(null),S=b.useRef(null),_=r||m.duration,E=b.useRef(0),C=b.useRef(_),N=b.useRef(0),{onToastAdd:M,onToastRemove:j}=m,I=br(()=>{var K;(v==null?void 0:v.contains(document.activeElement))&&((K=m.viewport)==null||K.focus()),o()}),O=b.useCallback(D=>{!D||D===1/0||(window.clearTimeout(N.current),E.current=new Date().getTime(),N.current=window.setTimeout(I,D))},[I]);b.useEffect(()=>{const D=m.viewport;if(D){const K=()=>{O(C.current),c==null||c()},X=()=>{const te=new Date().getTime()-E.current;C.current=C.current-te,window.clearTimeout(N.current),l==null||l()};return D.addEventListener(Gk,X),D.addEventListener(Kk,K),()=>{D.removeEventListener(Gk,X),D.removeEventListener(Kk,K)}}},[m.viewport,_,l,c,O]),b.useEffect(()=>{s&&!m.isClosePausedRef.current&&O(_)},[s,_,m.isClosePausedRef,O]),b.useEffect(()=>(M(),()=>j()),[M,j]);const H=b.useMemo(()=>v?_7(v):null,[v]);return m.viewport?h.jsxs(h.Fragment,{children:[H&&h.jsx(e0e,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:H}),h.jsx(Jge,{scope:n,onClose:I,children:Pl.createPortal(h.jsx(MA.ItemSlot,{scope:n,children:h.jsx(woe,{asChild:!0,onEscapeKeyDown:ve(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||I(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(Ge.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ve(t.onKeyDown,D=>{D.key==="Escape"&&(a==null||a(D.nativeEvent),D.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:ve(t.onPointerDown,D=>{D.button===0&&(x.current={x:D.clientX,y:D.clientY})}),onPointerMove:ve(t.onPointerMove,D=>{if(!x.current)return;const K=D.clientX-x.current.x,X=D.clientY-x.current.y,te=!!S.current,U=["left","right"].includes(m.swipeDirection),z=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,ie=U?z(0,K):0,ye=U?0:z(0,X),J=D.pointerType==="touch"?10:2,le={x:ie,y:ye},F={originalEvent:D,delta:le};te?(S.current=le,t0(qge,d,F,{discrete:!1})):KT(le,m.swipeDirection,J)?(S.current=le,t0(Kge,u,F,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs(K)>J||Math.abs(X)>J)&&(x.current=null)}),onPointerUp:ve(t.onPointerUp,D=>{const K=S.current,X=D.target;if(X.hasPointerCapture(D.pointerId)&&X.releasePointerCapture(D.pointerId),S.current=null,x.current=null,K){const te=D.currentTarget,U={originalEvent:D,delta:K};KT(K,m.swipeDirection,m.swipeThreshold)?t0(Xge,p,U,{discrete:!0}):t0(Yge,f,U,{discrete:!0}),te.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),e0e=t=>{const{__scopeToast:e,children:n,...i}=t,r=nw(Om,e),[s,o]=b.useState(!1),[a,l]=b.useState(!1);return i0e(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:h.jsx(_m,{asChild:!0,children:h.jsx(VE,{...i,children:s&&h.jsxs(h.Fragment,{children:[r.label," ",n]})})})},t0e="ToastTitle",y7=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(Ge.div,{...i,ref:e})});y7.displayName=t0e;var n0e="ToastDescription",b7=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(Ge.div,{...i,ref:e})});b7.displayName=n0e;var w7="ToastAction",x7=b.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?h.jsx(k7,{altText:n,asChild:!0,children:h.jsx(RA,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${w7}\`. Expected non-empty \`string\`.`),null)});x7.displayName=w7;var S7="ToastClose",RA=b.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=Zge(S7,n);return h.jsx(k7,{asChild:!0,children:h.jsx(Ge.button,{type:"button",...i,ref:e,onClick:ve(t.onClick,r.onClose)})})});RA.displayName=S7;var k7=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return h.jsx(Ge.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function _7(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),r0e(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(..._7(i))}}),e}function t0(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?iC(r,s):r.dispatchEvent(s)}var KT=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function i0e(t=()=>{}){const e=br(t);Qn(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function r0e(t){return t.nodeType===t.ELEMENT_NODE}function s0e(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function h1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var o0e=h7,C7=m7,E7=v7,A7=y7,N7=b7,P7=x7,M7=RA;const a0e=o0e,R7=b.forwardRef(({className:t,...e},n)=>h.jsx(C7,{ref:n,className:Q("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));R7.displayName=C7.displayName;const T7=b.forwardRef(({className:t,variant:e="default",...n},i)=>h.jsx(E7,{ref:i,"data-variant":e,className:Q("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"border border-red-600 bg-red-900 text-red-50",e==="info"&&"border border-green-500 bg-stone-900 text-white",t),...n}));T7.displayName=E7.displayName;const l0e=b.forwardRef(({className:t,...e},n)=>h.jsx(P7,{ref:n,className:Q("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));l0e.displayName=P7.displayName;const O7=b.forwardRef(({className:t,...e},n)=>h.jsx(M7,{ref:n,className:Q("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100",t),"toast-close":"",...e,children:h.jsx("span",{className:"block size-4",children:"✕"})}));O7.displayName=M7.displayName;const I7=b.forwardRef(({className:t,...e},n)=>h.jsx(A7,{ref:n,className:Q("text-sm font-semibold",t),...e}));I7.displayName=A7.displayName;const j7=b.forwardRef(({className:t,...e},n)=>h.jsx(N7,{ref:n,className:Q("text-sm opacity-90",t),...e}));j7.displayName=N7.displayName;function c0e(){const{toastList:t}=cne();return h.jsxs(a0e,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>h.jsxs(T7,{...o,variant:s,children:[h.jsxs("div",{className:"grid gap-1",children:[n&&h.jsx(I7,{children:n}),i&&h.jsx(j7,{children:i})]}),r,h.jsx(O7,{})]},e)),h.jsx(R7,{})]})}window.codemirror=null;function u0e(){const{addNotification:t}=NE();return window.VonSimAddNotification=t,null}function L7(t,e){const n={type:"error",title:"Error inesperado",message:e?`${t}
${e}`:t};function i(r=10){window.VonSimAddNotification?window.VonSimAddNotification(n):r>0&&setTimeout(()=>i(r-1),100)}i()}window.onerror=function(t,e,n,i,r){return L7(typeof t=="string"?t:"Error de JavaScript",r&&r.stack?r.stack:void 0),!1};window.onunhandledrejection=function(t){const e=t.reason instanceof Error?t.reason.stack||t.reason.message:String(t.reason);return L7("Promesa no manejada",e),!1};const d0e=Mj(document.getElementById("root"));d0e.render(h.jsx(b.StrictMode,{children:h.jsx(OH,{client:d6,children:h.jsxs(foe,{children:[h.jsx(u0e,{}),h.jsx(nJ,{children:h.jsx(c7,{})}),h.jsx(c0e,{})]})})}));
